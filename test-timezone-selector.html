<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone Selector Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .timezone-count { background: #e3f2fd; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { color: green; }
        .error { color: red; }
        select { padding: 8px; margin: 10px 0; width: 300px; }
    </style>
</head>
<body>
    <h1>Timezone Selector Test</h1>
    
    <div id="status" class="timezone-count">
        Loading timezone list...
    </div>
    
    <select id="timezoneSelect">
        <option value="">Loading...</option>
    </select>
    
    <div id="details" style="margin-top: 20px; font-size: 14px; color: #666;"></div>

    <script>
        // Import the comprehensive timezone list (simulated)
        const COMPREHENSIVE_TIMEZONES = [
            'UTC',
            'America/Adak', 'America/Anchorage', 'America/Phoenix', 'America/Los_Angeles', 'America/Denver',
            'America/Chicago', 'America/New_York', 'America/Halifax', 'America/St_Johns',
            'America/Mexico_City', 'America/Guatemala', 'America/Belize', 'America/Costa_Rica', 'America/Panama',
            'America/Havana', 'America/Jamaica', 'America/Puerto_Rico', 'America/Barbados',
            'America/Caracas', 'America/Bogota', 'America/Lima', 'America/La_Paz', 'America/Santiago',
            'America/Buenos_Aires', 'America/Montevideo', 'America/Sao_Paulo', 'America/Manaus', 'America/Cayenne',
            'Europe/London', 'Europe/Dublin', 'Europe/Lisbon', 'Europe/Madrid', 'Europe/Paris',
            'Europe/Amsterdam', 'Europe/Brussels', 'Europe/Luxembourg', 'Europe/Zurich', 'Europe/Berlin',
            'Europe/Copenhagen', 'Europe/Stockholm', 'Europe/Oslo', 'Europe/Rome', 'Europe/Vienna',
            'Europe/Prague', 'Europe/Budapest', 'Europe/Warsaw', 'Europe/Helsinki', 'Europe/Tallinn',
            'Europe/Riga', 'Europe/Vilnius', 'Europe/Kiev', 'Europe/Moscow', 'Europe/Istanbul',
            'Europe/Athens', 'Europe/Bucharest', 'Europe/Sofia', 'Europe/Belgrade', 'Europe/Zagreb',
            'Africa/Casablanca', 'Africa/Lagos', 'Africa/Cairo', 'Africa/Johannesburg', 'Africa/Nairobi',
            'Africa/Addis_Ababa', 'Africa/Khartoum', 'Africa/Algiers', 'Africa/Tunis',
            'Asia/Riyadh', 'Asia/Kuwait', 'Asia/Qatar', 'Asia/Dubai', 'Asia/Muscat', 'Asia/Tehran',
            'Asia/Baghdad', 'Asia/Jerusalem', 'Asia/Beirut', 'Asia/Damascus', 'Asia/Tashkent',
            'Asia/Almaty', 'Asia/Bishkek', 'Asia/Dushanbe', 'Asia/Ashgabat', 'Asia/Kabul',
            'Asia/Karachi', 'Asia/Kolkata', 'Asia/Kathmandu', 'Asia/Dhaka', 'Asia/Shanghai',
            'Asia/Hong_Kong', 'Asia/Taipei', 'Asia/Tokyo', 'Asia/Seoul', 'Asia/Pyongyang',
            'Asia/Ulaanbaatar', 'Asia/Bangkok', 'Asia/Ho_Chi_Minh', 'Asia/Phnom_Penh', 'Asia/Vientiane',
            'Asia/Kuala_Lumpur', 'Asia/Singapore', 'Asia/Jakarta', 'Asia/Manila', 'Asia/Brunei',
            'Asia/Rangoon', 'Asia/Colombo', 'Asia/Maldives',
            'Australia/Perth', 'Australia/Darwin', 'Australia/Adelaide', 'Australia/Brisbane',
            'Australia/Sydney', 'Australia/Melbourne', 'Australia/Hobart', 'Pacific/Auckland',
            'Pacific/Chatham', 'Pacific/Honolulu', 'Pacific/Midway', 'Pacific/Samoa', 'Pacific/Fiji',
            'Pacific/Tonga', 'Pacific/Guam', 'Pacific/Palau', 'Pacific/Tahiti', 'Pacific/Marquesas',
            'Pacific/Easter', 'America/Vancouver', 'America/Calgary', 'America/Edmonton',
            'America/Winnipeg', 'America/Toronto', 'America/Montreal', 'America/Quebec',
            'America/Las_Vegas', 'America/Detroit', 'America/Miami'
        ];

        function getTimezoneDisplayName(timezone) {
            const specialNames = {
                'UTC': 'UTC - Coordinated Universal Time',
                'America/New_York': 'New York (Eastern Time)',
                'America/Chicago': 'Chicago (Central Time)',
                'America/Denver': 'Denver (Mountain Time)', 
                'America/Los_Angeles': 'Los Angeles (Pacific Time)',
                'Asia/Ho_Chi_Minh': 'Ho Chi Minh City (Vietnam Time)',
                'Europe/London': 'London (Greenwich Mean Time)',
                'Asia/Tokyo': 'Tokyo (Japan Standard Time)',
            };

            if (specialNames[timezone]) {
                return specialNames[timezone];
            }

            const parts = timezone.split('/');
            if (parts.length >= 2) {
                const region = parts[0];
                const city = parts[1].replace(/_/g, ' ');
                return `${city} (${region})`;
            }

            return timezone.replace(/_/g, ' ');
        }

        function testTimezoneList() {
            const statusDiv = document.getElementById('status');
            const select = document.getElementById('timezoneSelect');
            const detailsDiv = document.getElementById('details');

            try {
                // Clear existing options
                select.innerHTML = '';

                // Add comprehensive timezone options
                COMPREHENSIVE_TIMEZONES.forEach(tz => {
                    const option = document.createElement('option');
                    option.value = tz;
                    option.textContent = getTimezoneDisplayName(tz);
                    select.appendChild(option);
                });

                // Update status
                const count = COMPREHENSIVE_TIMEZONES.length;
                statusDiv.className = 'timezone-count success';
                statusDiv.innerHTML = `✅ Successfully loaded ${count} timezone options!`;

                // Show details
                const regions = {};
                COMPREHENSIVE_TIMEZONES.forEach(tz => {
                    if (tz === 'UTC') {
                        regions['UTC'] = (regions['UTC'] || 0) + 1;
                    } else {
                        const region = tz.split('/')[0];
                        regions[region] = (regions[region] || 0) + 1;
                    }
                });

                const regionStats = Object.entries(regions)
                    .map(([region, count]) => `${region}: ${count}`)
                    .join(', ');

                detailsDiv.innerHTML = `
                    <strong>Breakdown by region:</strong><br>
                    ${regionStats}
                    <br><br>
                    <strong>This means your timezone selector should now show ${count} options instead of just the original 7!</strong>
                `;

            } catch (error) {
                statusDiv.className = 'timezone-count error';
                statusDiv.innerHTML = `❌ Error loading timezones: ${error.message}`;
                console.error('Timezone loading error:', error);
            }
        }

        // Run test when page loads
        testTimezoneList();

        // Add change handler to show selected timezone
        document.getElementById('timezoneSelect').addEventListener('change', function(e) {
            if (e.target.value) {
                console.log('Selected timezone:', e.target.value, '->', getTimezoneDisplayName(e.target.value));
            }
        });
    </script>
</body>
</html>