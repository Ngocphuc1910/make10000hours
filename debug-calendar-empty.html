<!DOCTYPE html>
<html>
<head>
    <title>Debug Calendar Empty Issue</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        .debug-section { margin: 20px 0; padding: 15px; background: #2a2a2a; border-radius: 5px; }
        .debug-title { color: #4CAF50; font-weight: bold; margin-bottom: 10px; }
        pre { background: #333; padding: 10px; border-radius: 3px; overflow-x: auto; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .success { color: #4CAF50; }
    </style>
</head>
<body>
    <h1>üîç Debug Calendar Empty Issue</h1>
    
    <div class="debug-section">
        <div class="debug-title">Debug Commands</div>
        <p>Open browser console and run these commands to debug:</p>
        <pre>
// Enable calendar debug mode
globalThis.__debug_calendar_conversion = true;

// Check task store data
console.log('Tasks:', window.useTaskStore?.getState?.()?.tasks || 'TaskStore not found');
console.log('Projects:', window.useTaskStore?.getState?.()?.projects || 'Projects not found');

// Check user store
console.log('User:', window.useUserStore?.getState?.()?.user || 'UserStore not found');

// Check if stores are available
console.log('Available stores:', Object.keys(window).filter(key => key.includes('Store')));

// Check calendar events state
console.log('Calendar component state - check React DevTools or add console.logs');

// Test timezone utils
console.log('Current timezone:', new Intl.DateTimeFormat().resolvedOptions().timeZone);

// Test TaskDisplayService availability
console.log('TaskDisplayService available:', window.TaskDisplayService ? 'Yes' : 'No');
        </pre>
    </div>

    <div class="debug-section">
        <div class="debug-title">Manual Store Check</div>
        <p>If stores are undefined, the issue might be that React components haven't initialized yet.</p>
        <p>Navigate to localhost:3000/calendar and then come back to this debug page.</p>
    </div>

    <div class="debug-section">
        <div class="debug-title">Common Issues</div>
        <ul>
            <li>TaskDisplayService import/export error</li>
            <li>Tasks array is empty or undefined</li>
            <li>Projects array is empty or undefined</li>
            <li>User timezone is undefined causing conversion failure</li>
            <li>mergeEventsAndTasks function parameter order wrong</li>
            <li>React component not re-rendering after state changes</li>
        </ul>
    </div>

    <script>
        // Auto-enable debug mode
        globalThis.__debug_calendar_conversion = true;
        console.log('üîç Calendar debug mode enabled automatically');
        
        // Check if we're in the right environment
        setTimeout(() => {
            const hasReact = window.React !== undefined;
            const hasZustand = Object.keys(window).some(key => key.includes('Store'));
            
            console.log('Environment check:');
            console.log('- React available:', hasReact);
            console.log('- Zustand stores available:', hasZustand);
            
            if (!hasReact || !hasZustand) {
                console.warn('‚ö†Ô∏è This debug page should be opened AFTER navigating to localhost:3000/calendar');
            }
        }, 1000);
    </script>
</body>
</html>