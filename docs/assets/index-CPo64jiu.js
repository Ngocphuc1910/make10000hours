var eIe=Object.defineProperty;var tIe=(n,e,t)=>e in n?eIe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var zt=(n,e,t)=>tIe(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function kr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function nIe(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var EF={exports:{}},NA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eZ;function rIe(){if(eZ)return NA;eZ=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return NA.Fragment=e,NA.jsx=t,NA.jsxs=t,NA}var tZ;function iIe(){return tZ||(tZ=1,EF.exports=rIe()),EF.exports}var x=iIe(),AF={exports:{}},qn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nZ;function aIe(){if(nZ)return qn;nZ=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=d&&z[d]||z["@@iterator"],typeof z=="function"?z:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(z,ae,le){this.props=z,this.context=ae,this.refs=v,this.updater=le||f}y.prototype.isReactComponent={},y.prototype.setState=function(z,ae){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ae,"setState")},y.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function w(){}w.prototype=y.prototype;function _(z,ae,le){this.props=z,this.context=ae,this.refs=v,this.updater=le||f}var T=_.prototype=new w;T.constructor=_,m(T,y.prototype),T.isPureReactComponent=!0;var A=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function M(z,ae,le,ee,ye,fe){return le=fe.ref,{$$typeof:n,type:z,key:ae,ref:le!==void 0?le:null,props:fe}}function P(z,ae){return M(z.type,ae,void 0,void 0,void 0,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function j(z){var ae={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(le){return ae[le]})}var L=/\/+/g;function B(z,ae){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):ae.toString(36)}function $(){}function Y(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then($,$):(z.status="pending",z.then(function(ae){z.status==="pending"&&(z.status="fulfilled",z.value=ae)},function(ae){z.status==="pending"&&(z.status="rejected",z.reason=ae)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,ae,le,ee,ye){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var Ce=!1;if(z===null)Ce=!0;else switch(fe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(z.$$typeof){case n:case e:Ce=!0;break;case u:return Ce=z._init,G(Ce(z._payload),ae,le,ee,ye)}}if(Ce)return ye=ye(z),Ce=ee===""?"."+B(z,0):ee,A(ye)?(le="",Ce!=null&&(le=Ce.replace(L,"$&/")+"/"),G(ye,ae,le,"",function(we){return we})):ye!=null&&(O(ye)&&(ye=P(ye,le+(ye.key==null||z&&z.key===ye.key?"":(""+ye.key).replace(L,"$&/")+"/")+Ce)),ae.push(ye)),1;Ce=0;var at=ee===""?".":ee+":";if(A(z))for(var Le=0;Le<z.length;Le++)ee=z[Le],fe=at+B(ee,Le),Ce+=G(ee,ae,le,fe,ye);else if(Le=h(z),typeof Le=="function")for(z=Le.call(z),Le=0;!(ee=z.next()).done;)ee=ee.value,fe=at+B(ee,Le++),Ce+=G(ee,ae,le,fe,ye);else if(fe==="object"){if(typeof z.then=="function")return G(Y(z),ae,le,ee,ye);throw ae=String(z),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function W(z,ae,le){if(z==null)return z;var ee=[],ye=0;return G(z,ee,"","",function(fe){return ae.call(le,fe,ye++)}),ee}function X(z){if(z._status===-1){var ae=z._result;ae=ae(),ae.then(function(le){(z._status===0||z._status===-1)&&(z._status=1,z._result=le)},function(le){(z._status===0||z._status===-1)&&(z._status=2,z._result=le)}),z._status===-1&&(z._status=0,z._result=ae)}if(z._status===1)return z._result.default;throw z._result}var te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function re(){}return qn.Children={map:W,forEach:function(z,ae,le){W(z,function(){ae.apply(this,arguments)},le)},count:function(z){var ae=0;return W(z,function(){ae++}),ae},toArray:function(z){return W(z,function(ae){return ae})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},qn.Component=y,qn.Fragment=t,qn.Profiler=i,qn.PureComponent=_,qn.StrictMode=r,qn.Suspense=l,qn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,qn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return C.H.useMemoCache(z)}},qn.cache=function(z){return function(){return z.apply(null,arguments)}},qn.cloneElement=function(z,ae,le){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ee=m({},z.props),ye=z.key,fe=void 0;if(ae!=null)for(Ce in ae.ref!==void 0&&(fe=void 0),ae.key!==void 0&&(ye=""+ae.key),ae)!k.call(ae,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&ae.ref===void 0||(ee[Ce]=ae[Ce]);var Ce=arguments.length-2;if(Ce===1)ee.children=le;else if(1<Ce){for(var at=Array(Ce),Le=0;Le<Ce;Le++)at[Le]=arguments[Le+2];ee.children=at}return M(z.type,ye,void 0,void 0,fe,ee)},qn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},qn.createElement=function(z,ae,le){var ee,ye={},fe=null;if(ae!=null)for(ee in ae.key!==void 0&&(fe=""+ae.key),ae)k.call(ae,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ye[ee]=ae[ee]);var Ce=arguments.length-2;if(Ce===1)ye.children=le;else if(1<Ce){for(var at=Array(Ce),Le=0;Le<Ce;Le++)at[Le]=arguments[Le+2];ye.children=at}if(z&&z.defaultProps)for(ee in Ce=z.defaultProps,Ce)ye[ee]===void 0&&(ye[ee]=Ce[ee]);return M(z,fe,void 0,void 0,null,ye)},qn.createRef=function(){return{current:null}},qn.forwardRef=function(z){return{$$typeof:s,render:z}},qn.isValidElement=O,qn.lazy=function(z){return{$$typeof:u,_payload:{_status:-1,_result:z},_init:X}},qn.memo=function(z,ae){return{$$typeof:c,type:z,compare:ae===void 0?null:ae}},qn.startTransition=function(z){var ae=C.T,le={};C.T=le;try{var ee=z(),ye=C.S;ye!==null&&ye(le,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(re,te)}catch(fe){te(fe)}finally{C.T=ae}},qn.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},qn.use=function(z){return C.H.use(z)},qn.useActionState=function(z,ae,le){return C.H.useActionState(z,ae,le)},qn.useCallback=function(z,ae){return C.H.useCallback(z,ae)},qn.useContext=function(z){return C.H.useContext(z)},qn.useDebugValue=function(){},qn.useDeferredValue=function(z,ae){return C.H.useDeferredValue(z,ae)},qn.useEffect=function(z,ae,le){var ee=C.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(z,ae)},qn.useId=function(){return C.H.useId()},qn.useImperativeHandle=function(z,ae,le){return C.H.useImperativeHandle(z,ae,le)},qn.useInsertionEffect=function(z,ae){return C.H.useInsertionEffect(z,ae)},qn.useLayoutEffect=function(z,ae){return C.H.useLayoutEffect(z,ae)},qn.useMemo=function(z,ae){return C.H.useMemo(z,ae)},qn.useOptimistic=function(z,ae){return C.H.useOptimistic(z,ae)},qn.useReducer=function(z,ae,le){return C.H.useReducer(z,ae,le)},qn.useRef=function(z){return C.H.useRef(z)},qn.useState=function(z){return C.H.useState(z)},qn.useSyncExternalStore=function(z,ae,le){return C.H.useSyncExternalStore(z,ae,le)},qn.useTransition=function(){return C.H.useTransition()},qn.version="19.1.0",qn}var rZ;function eq(){return rZ||(rZ=1,AF.exports=aIe()),AF.exports}var K=eq();const ve=kr(K);var kF={exports:{}},LA={},CF={exports:{}},DF={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iZ;function oIe(){return iZ||(iZ=1,function(n){function e(W,X){var te=W.length;W.push(X);e:for(;0<te;){var re=te-1>>>1,z=W[re];if(0<i(z,X))W[re]=X,W[te]=z,te=re;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var X=W[0],te=W.pop();if(te!==X){W[0]=te;e:for(var re=0,z=W.length,ae=z>>>1;re<ae;){var le=2*(re+1)-1,ee=W[le],ye=le+1,fe=W[ye];if(0>i(ee,te))ye<z&&0>i(fe,ee)?(W[re]=fe,W[ye]=te,re=ye):(W[re]=ee,W[le]=te,re=le);else if(ye<z&&0>i(fe,te))W[re]=fe,W[ye]=te,re=ye;else break e}}return X}function i(W,X){var te=W.sortIndex-X.sortIndex;return te!==0?te:W.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(W){for(var X=t(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=W)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(W){if(v=!1,A(W),!m)if(t(l)!==null)m=!0,k||(k=!0,B());else{var X=t(c);X!==null&&G(C,X.startTime-W)}}var k=!1,M=-1,P=5,O=-1;function j(){return y?!0:!(n.unstable_now()-O<P)}function L(){if(y=!1,k){var W=n.unstable_now();O=W;var X=!0;try{e:{m=!1,v&&(v=!1,_(M),M=-1),f=!0;var te=h;try{t:{for(A(W),d=t(l);d!==null&&!(d.expirationTime>W&&j());){var re=d.callback;if(typeof re=="function"){d.callback=null,h=d.priorityLevel;var z=re(d.expirationTime<=W);if(W=n.unstable_now(),typeof z=="function"){d.callback=z,A(W),X=!0;break t}d===t(l)&&r(l),A(W)}else r(l);d=t(l)}if(d!==null)X=!0;else{var ae=t(c);ae!==null&&G(C,ae.startTime-W),X=!1}}break e}finally{d=null,h=te,f=!1}X=void 0}}finally{X?B():k=!1}}}var B;if(typeof T=="function")B=function(){T(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Y=$.port2;$.port1.onmessage=L,B=function(){Y.postMessage(null)}}else B=function(){w(L,0)};function G(W,X){M=w(function(){W(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_next=function(W){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var te=h;h=X;try{return W()}finally{h=te}},n.unstable_requestPaint=function(){y=!0},n.unstable_runWithPriority=function(W,X){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=h;h=W;try{return X()}finally{h=te}},n.unstable_scheduleCallback=function(W,X,te){var re=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?re+te:re):te=re,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,W={id:u++,callback:X,priorityLevel:W,startTime:te,expirationTime:z,sortIndex:-1},te>re?(W.sortIndex=te,e(c,W),t(l)===null&&W===t(c)&&(v?(_(M),M=-1):v=!0,G(C,te-re))):(W.sortIndex=z,e(l,W),m||f||(m=!0,k||(k=!0,B()))),W},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(W){var X=h;return function(){var te=h;h=X;try{return W.apply(this,arguments)}finally{h=te}}}}(DF)),DF}var aZ;function sIe(){return aZ||(aZ=1,CF.exports=oIe()),CF.exports}var IF={exports:{}},_s={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oZ;function lIe(){if(oZ)return _s;oZ=1;var n=eq();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return _s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_s.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,u)},_s.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},_s.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},_s.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},_s.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,f=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:f}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:f,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},_s.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=s(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},_s.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},_s.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=s(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},_s.requestFormReset=function(l){r.d.r(l)},_s.unstable_batchedUpdates=function(l,c){return l(c)},_s.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},_s.useFormStatus=function(){return o.H.useHostTransitionStatus()},_s.version="19.1.0",_s}var sZ;function gge(){if(sZ)return IF.exports;sZ=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),IF.exports=lIe(),IF.exports}var lZ;function cIe(){if(lZ)return LA;lZ=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=sIe(),e=eq(),t=gge();function r(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)b+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function a(g){var b=g,E=g;if(g.alternate)for(;b.return;)b=b.return;else{g=b;do b=g,(b.flags&4098)!==0&&(E=b.return),g=b.return;while(g)}return b.tag===3?E:null}function o(g){if(g.tag===13){var b=g.memoizedState;if(b===null&&(g=g.alternate,g!==null&&(b=g.memoizedState)),b!==null)return b.dehydrated}return null}function s(g){if(a(g)!==g)throw Error(r(188))}function l(g){var b=g.alternate;if(!b){if(b=a(g),b===null)throw Error(r(188));return b!==g?null:g}for(var E=g,I=b;;){var F=E.return;if(F===null)break;var U=F.alternate;if(U===null){if(I=F.return,I!==null){E=I;continue}break}if(F.child===U.child){for(U=F.child;U;){if(U===E)return s(F),g;if(U===I)return s(F),b;U=U.sibling}throw Error(r(188))}if(E.return!==I.return)E=F,I=U;else{for(var J=!1,ie=F.child;ie;){if(ie===E){J=!0,E=F,I=U;break}if(ie===I){J=!0,I=F,E=U;break}ie=ie.sibling}if(!J){for(ie=U.child;ie;){if(ie===E){J=!0,E=U,I=F;break}if(ie===I){J=!0,I=U,E=F;break}ie=ie.sibling}if(!J)throw Error(r(189))}}if(E.alternate!==I)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?g:b}function c(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g;for(g=g.child;g!==null;){if(b=c(g),b!==null)return b;g=g.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(g){return g===null||typeof g!="object"?null:(g=L&&g[L]||g["@@iterator"],typeof g=="function"?g:null)}var $=Symbol.for("react.client.reference");function Y(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===$?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList";case O:return"Activity"}if(typeof g=="object")switch(g.$$typeof){case f:return"Portal";case T:return(g.displayName||"Context")+".Provider";case _:return(g._context.displayName||"Context")+".Consumer";case A:var b=g.render;return g=g.displayName,g||(g=b.displayName||b.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case M:return b=g.displayName||null,b!==null?b:Y(g.type)||"Memo";case P:b=g._payload,g=g._init;try{return Y(g(b))}catch{}}return null}var G=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},re=[],z=-1;function ae(g){return{current:g}}function le(g){0>z||(g.current=re[z],re[z]=null,z--)}function ee(g,b){z++,re[z]=g.current,g.current=b}var ye=ae(null),fe=ae(null),Ce=ae(null),at=ae(null);function Le(g,b){switch(ee(Ce,b),ee(fe,g),ee(ye,null),b.nodeType){case 9:case 11:g=(g=b.documentElement)&&(g=g.namespaceURI)?ov(g):0;break;default:if(g=b.tagName,b=b.namespaceURI)b=ov(b),g=DP(b,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}le(ye),ee(ye,g)}function we(){le(ye),le(fe),le(Ce)}function be(g){g.memoizedState!==null&&ee(at,g);var b=ye.current,E=DP(b,g.type);b!==E&&(ee(fe,g),ee(ye,E))}function ge(g){fe.current===g&&(le(ye),le(fe)),at.current===g&&(le(at),eb._currentValue=te)}var he=Object.prototype.hasOwnProperty,Ge=n.unstable_scheduleCallback,je=n.unstable_cancelCallback,rt=n.unstable_shouldYield,bt=n.unstable_requestPaint,lt=n.unstable_now,cn=n.unstable_getCurrentPriorityLevel,Ct=n.unstable_ImmediatePriority,En=n.unstable_UserBlockingPriority,jn=n.unstable_NormalPriority,Re=n.unstable_LowPriority,Jt=n.unstable_IdlePriority,hn=n.log,Mt=n.unstable_setDisableYieldValue,Te=null,Ne=null;function tt(g){if(typeof hn=="function"&&Mt(g),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Te,g)}catch{}}var xt=Math.clz32?Math.clz32:Nn,fn=Math.log,Ti=Math.LN2;function Nn(g){return g>>>=0,g===0?32:31-(fn(g)/Ti|0)|0}var Nr=256,oi=4194304;function on(g){var b=g&42;if(b!==0)return b;switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return g&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return g}}function zr(g,b,E){var I=g.pendingLanes;if(I===0)return 0;var F=0,U=g.suspendedLanes,J=g.pingedLanes;g=g.warmLanes;var ie=I&134217727;return ie!==0?(I=ie&~U,I!==0?F=on(I):(J&=ie,J!==0?F=on(J):E||(E=ie&~g,E!==0&&(F=on(E))))):(ie=I&~U,ie!==0?F=on(ie):J!==0?F=on(J):E||(E=I&~g,E!==0&&(F=on(E)))),F===0?0:b!==0&&b!==F&&(b&U)===0&&(U=F&-F,E=b&-b,U>=E||U===32&&(E&4194048)!==0)?b:F}function Ei(g,b){return(g.pendingLanes&~(g.suspendedLanes&~g.pingedLanes)&b)===0}function mi(g,b){switch(g){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var g=Nr;return Nr<<=1,(Nr&4194048)===0&&(Nr=256),g}function Be(){var g=oi;return oi<<=1,(oi&62914560)===0&&(oi=4194304),g}function Ke(g){for(var b=[],E=0;31>E;E++)b.push(g);return b}function Tt(g,b){g.pendingLanes|=b,b!==268435456&&(g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0)}function nr(g,b,E,I,F,U){var J=g.pendingLanes;g.pendingLanes=E,g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0,g.expiredLanes&=E,g.entangledLanes&=E,g.errorRecoveryDisabledLanes&=E,g.shellSuspendCounter=0;var ie=g.entanglements,de=g.expirationTimes,ke=g.hiddenUpdates;for(E=J&~E;0<E;){var Ve=31-xt(E),We=1<<Ve;ie[Ve]=0,de[Ve]=-1;var De=ke[Ve];if(De!==null)for(ke[Ve]=null,Ve=0;Ve<De.length;Ve++){var Me=De[Ve];Me!==null&&(Me.lane&=-536870913)}E&=~We}I!==0&&oe(g,I,0),U!==0&&F===0&&g.tag!==0&&(g.suspendedLanes|=U&~(J&~b))}function oe(g,b,E){g.pendingLanes|=b,g.suspendedLanes&=~b;var I=31-xt(b);g.entangledLanes|=b,g.entanglements[I]=g.entanglements[I]|1073741824|E&4194090}function ce(g,b){var E=g.entangledLanes|=b;for(g=g.entanglements;E;){var I=31-xt(E),F=1<<I;F&b|g[I]&b&&(g[I]|=b),E&=~F}}function pe(g){switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=128;break;case 268435456:g=134217728;break;default:g=0}return g}function Ae(g){return g&=-g,2<g?8<g?(g&134217727)!==0?32:268435456:8:2}function Qe(){var g=X.p;return g!==0?g:(g=window.event,g===void 0?32:rb(g.type))}function gt(g,b){var E=X.p;try{return X.p=g,b()}finally{X.p=E}}var Dt=Math.random().toString(36).slice(2),ft="__reactFiber$"+Dt,Bt="__reactProps$"+Dt,yt="__reactContainer$"+Dt,Vt="__reactEvents$"+Dt,Kn="__reactListeners$"+Dt,vi="__reactHandles$"+Dt,ba="__reactResources$"+Dt,ls="__reactMarker$"+Dt;function oa(g){delete g[ft],delete g[Bt],delete g[Vt],delete g[Kn],delete g[vi]}function Jl(g){var b=g[ft];if(b)return b;for(var E=g.parentNode;E;){if(b=E[yt]||E[ft]){if(E=b.alternate,b.child!==null||E!==null&&E.child!==null)for(g=MP(g);g!==null;){if(E=g[ft])return E;g=MP(g)}return b}g=E,E=g.parentNode}return null}function sa(g){if(g=g[ft]||g[yt]){var b=g.tag;if(b===5||b===6||b===13||b===26||b===27||b===3)return g}return null}function _l(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g.stateNode;throw Error(r(33))}function Qa(g){var b=g[ba];return b||(b=g[ba]={hoistableStyles:new Map,hoistableScripts:new Map}),b}function Ai(g){g[ls]=!0}var hh=new Set,Zr={};function Ra(g,b){Sl(g,b),Sl(g+"Capture",b)}function Sl(g,b){for(Zr[g]=b,g=0;g<b.length;g++)hh.add(b[g])}var Xf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fn={},fh={};function im(g){return he.call(fh,g)?!0:he.call(Fn,g)?!1:Xf.test(g)?fh[g]=!0:(Fn[g]=!0,!1)}function ph(g,b,E){if(im(b))if(E===null)g.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":g.removeAttribute(b);return;case"boolean":var I=b.toLowerCase().slice(0,5);if(I!=="data-"&&I!=="aria-"){g.removeAttribute(b);return}}g.setAttribute(b,""+E)}}function ec(g,b,E){if(E===null)g.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(b);return}g.setAttribute(b,""+E)}}function Xn(g,b,E,I){if(I===null)g.removeAttribute(E);else{switch(typeof I){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(E);return}g.setAttributeNS(b,E,""+I)}}var cs,vx;function wa(g){if(cs===void 0)try{throw Error()}catch(E){var b=E.stack.trim().match(/\n( *(at )?)/);cs=b&&b[1]||"",vx=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+g+vx}var la=!1;function am(g,b){if(!g||la)return"";la=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var I={DetermineComponentFrameRoot:function(){try{if(b){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Me){var De=Me}Reflect.construct(g,[],We)}else{try{We.call()}catch(Me){De=Me}g.call(We.prototype)}}else{try{throw Error()}catch(Me){De=Me}(We=g())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Me){if(Me&&De&&typeof Me.stack=="string")return[Me.stack,De.stack]}return[null,null]}};I.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(I.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(I.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=I.DetermineComponentFrameRoot(),J=U[0],ie=U[1];if(J&&ie){var de=J.split(`
`),ke=ie.split(`
`);for(F=I=0;I<de.length&&!de[I].includes("DetermineComponentFrameRoot");)I++;for(;F<ke.length&&!ke[F].includes("DetermineComponentFrameRoot");)F++;if(I===de.length||F===ke.length)for(I=de.length-1,F=ke.length-1;1<=I&&0<=F&&de[I]!==ke[F];)F--;for(;1<=I&&0<=F;I--,F--)if(de[I]!==ke[F]){if(I!==1||F!==1)do if(I--,F--,0>F||de[I]!==ke[F]){var Ve=`
`+de[I].replace(" at new "," at ");return g.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",g.displayName)),Ve}while(1<=I&&0<=F);break}}}finally{la=!1,Error.prepareStackTrace=E}return(E=g?g.displayName||g.name:"")?wa(E):""}function Tl(g){switch(g.tag){case 26:case 27:case 5:return wa(g.type);case 16:return wa("Lazy");case 13:return wa("Suspense");case 19:return wa("SuspenseList");case 0:case 15:return am(g.type,!1);case 11:return am(g.type.render,!1);case 1:return am(g.type,!0);case 31:return wa("Activity");default:return""}}function Zf(g){try{var b="";do b+=Tl(g),g=g.return;while(g);return b}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function Na(g){switch(typeof g){case"bigint":case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Qf(g){var b=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Vy(g){var b=Qf(g)?"checked":"value",E=Object.getOwnPropertyDescriptor(g.constructor.prototype,b),I=""+g[b];if(!g.hasOwnProperty(b)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var F=E.get,U=E.set;return Object.defineProperty(g,b,{configurable:!0,get:function(){return F.call(this)},set:function(J){I=""+J,U.call(this,J)}}),Object.defineProperty(g,b,{enumerable:E.enumerable}),{getValue:function(){return I},setValue:function(J){I=""+J},stopTracking:function(){g._valueTracker=null,delete g[b]}}}}function gh(g){g._valueTracker||(g._valueTracker=Vy(g))}function zy(g){if(!g)return!1;var b=g._valueTracker;if(!b)return!0;var E=b.getValue(),I="";return g&&(I=Qf(g)?g.checked?"true":"false":g.value),g=I,g!==E?(b.setValue(g),!0):!1}function Vs(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}var Jf=/[\n"\\]/g;function qi(g){return g.replace(Jf,function(b){return"\\"+b.charCodeAt(0).toString(16)+" "})}function La(g,b,E,I,F,U,J,ie){g.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?g.type=J:g.removeAttribute("type"),b!=null?J==="number"?(b===0&&g.value===""||g.value!=b)&&(g.value=""+Na(b)):g.value!==""+Na(b)&&(g.value=""+Na(b)):J!=="submit"&&J!=="reset"||g.removeAttribute("value"),b!=null?Ju(g,J,Na(b)):E!=null?Ju(g,J,Na(E)):I!=null&&g.removeAttribute("value"),F==null&&U!=null&&(g.defaultChecked=!!U),F!=null&&(g.checked=F&&typeof F!="function"&&typeof F!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?g.name=""+Na(ie):g.removeAttribute("name")}function mh(g,b,E,I,F,U,J,ie){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(g.type=U),b!=null||E!=null){if(!(U!=="submit"&&U!=="reset"||b!=null))return;E=E!=null?""+Na(E):"",b=b!=null?""+Na(b):E,ie||b===g.value||(g.value=b),g.defaultValue=b}I=I??F,I=typeof I!="function"&&typeof I!="symbol"&&!!I,g.checked=ie?g.checked:!!I,g.defaultChecked=!!I,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(g.name=J)}function Ju(g,b,E){b==="number"&&Vs(g.ownerDocument)===g||g.defaultValue===""+E||(g.defaultValue=""+E)}function $o(g,b,E,I){if(g=g.options,b){b={};for(var F=0;F<E.length;F++)b["$"+E[F]]=!0;for(E=0;E<g.length;E++)F=b.hasOwnProperty("$"+g[E].value),g[E].selected!==F&&(g[E].selected=F),F&&I&&(g[E].defaultSelected=!0)}else{for(E=""+Na(E),b=null,F=0;F<g.length;F++){if(g[F].value===E){g[F].selected=!0,I&&(g[F].defaultSelected=!0);return}b!==null||g[F].disabled||(b=g[F])}b!==null&&(b.selected=!0)}}function Lr(g,b,E){if(b!=null&&(b=""+Na(b),b!==g.value&&(g.value=b),E==null)){g.defaultValue!==b&&(g.defaultValue=b);return}g.defaultValue=E!=null?""+Na(E):""}function ep(g,b,E,I){if(b==null){if(I!=null){if(E!=null)throw Error(r(92));if(G(I)){if(1<I.length)throw Error(r(93));I=I[0]}E=I}E==null&&(E=""),b=E}E=Na(b),g.defaultValue=E,I=g.textContent,I===E&&I!==""&&I!==null&&(g.value=I)}function zs(g,b){if(b){var E=g.firstChild;if(E&&E===g.lastChild&&E.nodeType===3){E.nodeValue=b;return}}g.textContent=b}var xa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(g,b,E){var I=b.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?I?g.setProperty(b,""):b==="float"?g.cssFloat="":g[b]="":I?g.setProperty(b,E):typeof E!="number"||E===0||xa.has(b)?b==="float"?g.cssFloat=E:g[b]=(""+E).trim():g[b]=E+"px"}function om(g,b,E){if(b!=null&&typeof b!="object")throw Error(r(62));if(g=g.style,E!=null){for(var I in E)!E.hasOwnProperty(I)||b!=null&&b.hasOwnProperty(I)||(I.indexOf("--")===0?g.setProperty(I,""):I==="float"?g.cssFloat="":g[I]="");for(var F in b)I=b[F],b.hasOwnProperty(F)&&E[F]!==I&&tc(g,F,I)}else for(var U in b)b.hasOwnProperty(U)&&tc(g,U,b[U])}function vh(g){if(g.indexOf("-")===-1)return!1;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yh(g){return bx.test(""+g)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":g}var us=null;function Hs(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var yo=null,El=null;function sm(g){var b=sa(g);if(b&&(g=b.stateNode)){var E=g[Bt]||null;e:switch(g=b.stateNode,b.type){case"input":if(La(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),b=E.name,E.type==="radio"&&b!=null){for(E=g;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+qi(""+b)+'"][type="radio"]'),b=0;b<E.length;b++){var I=E[b];if(I!==g&&I.form===g.form){var F=I[Bt]||null;if(!F)throw Error(r(90));La(I,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(b=0;b<E.length;b++)I=E[b],I.form===g.form&&zy(I)}break e;case"textarea":Lr(g,E.value,E.defaultValue);break e;case"select":b=E.value,b!=null&&$o(g,!!E.multiple,b,!1)}}}var ds=!1;function xx(g,b,E){if(ds)return g(b,E);ds=!0;try{var I=g(b);return I}finally{if(ds=!1,(yo!==null||El!==null)&&(R0(),yo&&(b=yo,g=El,El=yo=null,sm(b),g)))for(b=0;b<g.length;b++)sm(g[b])}}function tp(g,b){var E=g.stateNode;if(E===null)return null;var I=E[Bt]||null;if(I===null)return null;E=I[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(g=g.type,I=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!I;break e;default:g=!1}if(g)return null;if(E&&typeof E!="function")throw Error(r(231,b,typeof E));return E}var nc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=!1;if(nc)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){Ja=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{Ja=!1}var Al=null,rc=null,ic=null;function np(){if(ic)return ic;var g,b=rc,E=b.length,I,F="value"in Al?Al.value:Al.textContent,U=F.length;for(g=0;g<E&&b[g]===F[g];g++);var J=E-g;for(I=1;I<=J&&b[E-I]===F[U-I];I++);return ic=F.slice(g,1<I?1-I:void 0)}function ac(g){var b=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&b===13&&(g=13)):g=b,g===10&&(g=13),32<=g||g===13?g:0}function Hc(){return!0}function lm(){return!1}function Wi(g){function b(E,I,F,U,J){this._reactName=E,this._targetInst=F,this.type=I,this.nativeEvent=U,this.target=J,this.currentTarget=null;for(var ie in g)g.hasOwnProperty(ie)&&(E=g[ie],this[ie]=E?E(U):U[ie]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Hc:lm,this.isPropagationStopped=lm,this}return u(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),b}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gc=Wi(rr),ed=u({},rr,{view:0,detail:0}),Hy=Wi(ed),cm,bh,Gs,wh=u({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Gs&&(Gs&&g.type==="mousemove"?(cm=g.screenX-Gs.screenX,bh=g.screenY-Gs.screenY):bh=cm=0,Gs=g),cm)},movementY:function(g){return"movementY"in g?g.movementY:bh}}),kl=Wi(wh),Gy=u({},wh,{dataTransfer:0}),qc=Wi(Gy),oc=u({},ed,{relatedTarget:0}),um=Wi(oc),qy=u({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),dm=Wi(qy),_x=u({},rr,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),td=Wi(_x),sn=u({},rr,{data:0}),xh=Wi(sn),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_t={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(g){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(g):(g=_t[g])?!!b[g]:!1}function rp(){return Wy}var yi=u({},ed,{key:function(g){if(g.key){var b=Wc[g.key]||g.key;if(b!=="Unidentified")return b}return g.type==="keypress"?(g=ac(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?ir[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(g){return g.type==="keypress"?ac(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?ac(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),ip=Wi(yi),ja=u({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Wi(ja),Yc=u({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),Sx=Wi(Yc),Tx=u({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ex=Wi(Tx),hm=u({},wh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),fm=Wi(hm),eo=u({},rr,{newState:0,oldState:0}),Ax=Wi(eo),kx=[9,13,27,32],Kc=nc&&"CompositionEvent"in window,R=null;nc&&"documentMode"in document&&(R=document.documentMode);var q=nc&&"TextEvent"in window&&!R,Q=nc&&(!Kc||R&&8<R&&11>=R),se=" ",Se=!1;function Oe(g,b){switch(g){case"keyup":return kx.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ut(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var Zn=!1;function _a(g,b){switch(g){case"compositionend":return ut(b);case"keypress":return b.which!==32?null:(Se=!0,se);case"textInput":return g=b.data,g===se&&Se?null:g;default:return null}}function $n(g,b){if(Zn)return g==="compositionend"||!Kc&&Oe(g,b)?(g=np(),ic=rc=Al=null,Zn=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Q&&b.locale!=="ko"?null:b.data;default:return null}}var Fa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Li(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b==="input"?!!Fa[g.type]:b==="textarea"}function qs(g,b,E,I){yo?El?El.push(I):El=[I]:yo=I,b=H0(b,"onChange"),0<b.length&&(E=new Gc("onChange","change",null,E,I),g.push({event:E,listeners:b}))}var to=null,lc=null;function Yy(g){TP(g,0)}function Cx(g){var b=_l(g);if(zy(b))return g}function Xc(g,b){if(g==="change")return b}var bo=!1;if(nc){var aE;if(nc){var ap="oninput"in document;if(!ap){var qM=document.createElement("div");qM.setAttribute("oninput","return;"),ap=typeof qM.oninput=="function"}aE=ap}else aE=!1;bo=aE&&(!document.documentMode||9<document.documentMode)}function WM(){to&&(to.detachEvent("onpropertychange",Ky),lc=to=null)}function Ky(g){if(g.propertyName==="value"&&Cx(lc)){var b=[];qs(b,lc,g,Hs(g)),xx(Yy,b)}}function Dx(g,b,E){g==="focusin"?(WM(),to=b,lc=E,to.attachEvent("onpropertychange",Ky)):g==="focusout"&&WM()}function oE(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Cx(lc)}function sE(g,b){if(g==="click")return Cx(b)}function lE(g,b){if(g==="input"||g==="change")return Cx(b)}function cE(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var ji=typeof Object.is=="function"?Object.is:cE;function pm(g,b){if(ji(g,b))return!0;if(typeof g!="object"||g===null||typeof b!="object"||b===null)return!1;var E=Object.keys(g),I=Object.keys(b);if(E.length!==I.length)return!1;for(I=0;I<E.length;I++){var F=E[I];if(!he.call(b,F)||!ji(g[F],b[F]))return!1}return!0}function YM(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function gm(g,b){var E=YM(g);g=0;for(var I;E;){if(E.nodeType===3){if(I=g+E.textContent.length,g<=b&&I>=b)return{node:E,offset:b-g};g=I}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=YM(E)}}function _h(g,b){return g&&b?g===b?!0:g&&g.nodeType===3?!1:b&&b.nodeType===3?_h(g,b.parentNode):"contains"in g?g.contains(b):g.compareDocumentPosition?!!(g.compareDocumentPosition(b)&16):!1:!1}function nd(g){g=g!=null&&g.ownerDocument!=null&&g.ownerDocument.defaultView!=null?g.ownerDocument.defaultView:window;for(var b=Vs(g.document);b instanceof g.HTMLIFrameElement;){try{var E=typeof b.contentWindow.location.href=="string"}catch{E=!1}if(E)g=b.contentWindow;else break;b=Vs(g.document)}return b}function Ix(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b&&(b==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||b==="textarea"||g.contentEditable==="true")}var KM=nc&&"documentMode"in document&&11>=document.documentMode,op=null,uE=null,Sh=null,Xy=!1;function Mx(g,b,E){var I=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Xy||op==null||op!==Vs(I)||(I=op,"selectionStart"in I&&Ix(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Sh&&pm(Sh,I)||(Sh=I,I=H0(uE,"onSelect"),0<I.length&&(b=new Gc("onSelect","select",null,b,E),g.push({event:b,listeners:I}),b.target=op)))}function si(g,b){var E={};return E[g.toLowerCase()]=b.toLowerCase(),E["Webkit"+g]="webkit"+b,E["Moz"+g]="moz"+b,E}var Ws={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},mm={},fs={};nc&&(fs=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Th(g){if(mm[g])return mm[g];if(!Ws[g])return g;var b=Ws[g],E;for(E in b)if(b.hasOwnProperty(E)&&E in fs)return mm[g]=b[E];return g}var dE=Th("animationend"),XM=Th("animationiteration"),Px=Th("animationstart"),Ox=Th("transitionrun"),ZM=Th("transitionstart"),hE=Th("transitioncancel"),fE=Th("transitionend"),pE=new Map,Rx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rx.push("scrollEnd");function cc(g,b){pE.set(g,b),Ra(b,[g])}var Nx=new WeakMap;function Ys(g,b){if(typeof g=="object"&&g!==null){var E=Nx.get(g);return E!==void 0?E:(b={value:g,source:b,stack:Zf(b)},Nx.set(g,b),b)}return{value:g,source:b,stack:Zf(b)}}var ps=[],vm=0,Zy=0;function sp(){for(var g=vm,b=Zy=vm=0;b<g;){var E=ps[b];ps[b++]=null;var I=ps[b];ps[b++]=null;var F=ps[b];ps[b++]=null;var U=ps[b];if(ps[b++]=null,I!==null&&F!==null){var J=I.pending;J===null?F.next=F:(F.next=J.next,J.next=F),I.pending=F}U!==0&&gE(E,F,U)}}function Lx(g,b,E,I){ps[vm++]=g,ps[vm++]=b,ps[vm++]=E,ps[vm++]=I,Zy|=I,g.lanes|=I,g=g.alternate,g!==null&&(g.lanes|=I)}function Qy(g,b,E,I){return Lx(g,b,E,I),Fi(g)}function lp(g,b){return Lx(g,null,null,b),Fi(g)}function gE(g,b,E){g.lanes|=E;var I=g.alternate;I!==null&&(I.lanes|=E);for(var F=!1,U=g.return;U!==null;)U.childLanes|=E,I=U.alternate,I!==null&&(I.childLanes|=E),U.tag===22&&(g=U.stateNode,g===null||g._visibility&1||(F=!0)),g=U,U=U.return;return g.tag===3?(U=g.stateNode,F&&b!==null&&(F=31-xt(E),g=U.hiddenUpdates,I=g[F],I===null?g[F]=[b]:I.push(b),b.lane=E|536870912),U):null}function Fi(g){if(50<Xm)throw Xm=0,x_=null,Error(r(185));for(var b=g.return;b!==null;)g=b,b=g.return;return g.tag===3?g.stateNode:null}var Cl={};function Jy(g,b,E,I){this.tag=g,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(g,b,E,I){return new Jy(g,b,E,I)}function jx(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Zc(g,b){var E=g.alternate;return E===null?(E=Yi(g.tag,b,g.key,g.mode),E.elementType=g.elementType,E.type=g.type,E.stateNode=g.stateNode,E.alternate=g,g.alternate=E):(E.pendingProps=b,E.type=g.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=g.flags&65011712,E.childLanes=g.childLanes,E.lanes=g.lanes,E.child=g.child,E.memoizedProps=g.memoizedProps,E.memoizedState=g.memoizedState,E.updateQueue=g.updateQueue,b=g.dependencies,E.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},E.sibling=g.sibling,E.index=g.index,E.ref=g.ref,E.refCleanup=g.refCleanup,E}function Fx(g,b){g.flags&=65011714;var E=g.alternate;return E===null?(g.childLanes=0,g.lanes=b,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,b=E.dependencies,g.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),g}function bi(g,b,E,I,F,U){var J=0;if(I=g,typeof g=="function")jx(g)&&(J=1);else if(typeof g=="string")J=N_(g,E,ye.current)?26:g==="html"||g==="head"||g==="body"?27:5;else e:switch(g){case O:return g=Yi(31,E,b,F),g.elementType=O,g.lanes=U,g;case m:return Dl(E.children,F,U,b);case v:J=8,F|=24;break;case y:return g=Yi(12,E,b,F|2),g.elementType=y,g.lanes=U,g;case C:return g=Yi(13,E,b,F),g.elementType=C,g.lanes=U,g;case k:return g=Yi(19,E,b,F),g.elementType=k,g.lanes=U,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case w:case T:J=10;break e;case _:J=9;break e;case A:J=11;break e;case M:J=14;break e;case P:J=16,I=null;break e}J=29,E=Error(r(130,g===null?"null":typeof g,"")),I=null}return b=Yi(J,E,b,F),b.elementType=g,b.type=I,b.lanes=U,b}function Dl(g,b,E,I){return g=Yi(7,g,I,b),g.lanes=E,g}function $x(g,b,E){return g=Yi(6,g,null,b),g.lanes=E,g}function e0(g,b,E){return b=Yi(4,g.children!==null?g.children:[],g.key,b),b.lanes=E,b.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},b}var cp=[],Il=0,Bx=null,t0=0,Ks=[],Xs=0,Eh=null,rd=1,Qc="";function Ml(g,b){cp[Il++]=t0,cp[Il++]=Bx,Bx=g,t0=b}function mE(g,b,E){Ks[Xs++]=rd,Ks[Xs++]=Qc,Ks[Xs++]=Eh,Eh=g;var I=rd;g=Qc;var F=32-xt(I)-1;I&=~(1<<F),E+=1;var U=32-xt(b)+F;if(30<U){var J=F-F%5;U=(I&(1<<J)-1).toString(32),I>>=J,F-=J,rd=1<<32-xt(b)+F|E<<F|I,Qc=U+g}else rd=1<<U|E<<F|I,Qc=g}function Ux(g){g.return!==null&&(Ml(g,1),mE(g,1,0))}function Ah(g){for(;g===Bx;)Bx=cp[--Il],cp[Il]=null,t0=cp[--Il],cp[Il]=null;for(;g===Eh;)Eh=Ks[--Xs],Ks[Xs]=null,Qc=Ks[--Xs],Ks[Xs]=null,rd=Ks[--Xs],Ks[Xs]=null}var $a=null,Cr=null,Sr=!1,up=null,Jc=!1,eu=Error(r(519));function uc(g){var b=Error(r(418,""));throw id(Ys(b,g)),eu}function n0(g){var b=g.stateNode,E=g.type,I=g.memoizedProps;switch(b[ft]=g,b[Bt]=I,E){case"dialog":Ln("cancel",b),Ln("close",b);break;case"iframe":case"object":case"embed":Ln("load",b);break;case"video":case"audio":for(E=0;E<tv.length;E++)Ln(tv[E],b);break;case"source":Ln("error",b);break;case"img":case"image":case"link":Ln("error",b),Ln("load",b);break;case"details":Ln("toggle",b);break;case"input":Ln("invalid",b),mh(b,I.value,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name,!0),gh(b);break;case"select":Ln("invalid",b);break;case"textarea":Ln("invalid",b),ep(b,I.value,I.defaultValue,I.children),gh(b)}E=I.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||b.textContent===""+E||I.suppressHydrationWarning===!0||CP(b.textContent,E)?(I.popover!=null&&(Ln("beforetoggle",b),Ln("toggle",b)),I.onScroll!=null&&Ln("scroll",b),I.onScrollEnd!=null&&Ln("scrollend",b),I.onClick!=null&&(b.onclick=Bp),b=!0):b=!1,b||uc(g)}function vE(g){for($a=g.return;$a;)switch($a.tag){case 5:case 13:Jc=!1;return;case 27:case 3:Jc=!0;return;default:$a=$a.return}}function ym(g){if(g!==$a)return!1;if(!Sr)return vE(g),Sr=!0,!1;var b=g.tag,E;if((E=b!==3&&b!==27)&&((E=b===5)&&(E=g.type,E=!(E!=="form"&&E!=="button")||Vp(g.type,g.memoizedProps)),E=!E),E&&Cr&&uc(g),vE(g),b===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));e:{for(g=g.nextSibling,b=0;g;){if(g.nodeType===8)if(E=g.data,E==="/$"){if(b===0){Cr=So(g.nextSibling);break e}b--}else E!=="$"&&E!=="$!"&&E!=="$?"||b++;g=g.nextSibling}Cr=null}}else b===27?(b=Cr,fu(g.type)?(g=AA,AA=null,Cr=g):Cr=b):Cr=$a?So(g.stateNode.nextSibling):null;return!0}function bm(){Cr=$a=null,Sr=!1}function r0(){var g=up;return g!==null&&(Go===null?Go=g:Go.push.apply(Go,g),up=null),g}function id(g){up===null?up=[g]:up.push(g)}var Vx=ae(null),tu=null,ad=null;function kh(g,b,E){ee(Vx,b._currentValue),b._currentValue=E}function od(g){g._currentValue=Vx.current,le(Vx)}function wm(g,b,E){for(;g!==null;){var I=g.alternate;if((g.childLanes&b)!==b?(g.childLanes|=b,I!==null&&(I.childLanes|=b)):I!==null&&(I.childLanes&b)!==b&&(I.childLanes|=b),g===E)break;g=g.return}}function yE(g,b,E,I){var F=g.child;for(F!==null&&(F.return=g);F!==null;){var U=F.dependencies;if(U!==null){var J=F.child;U=U.firstContext;e:for(;U!==null;){var ie=U;U=F;for(var de=0;de<b.length;de++)if(ie.context===b[de]){U.lanes|=E,ie=U.alternate,ie!==null&&(ie.lanes|=E),wm(U.return,E,g),I||(J=null);break e}U=ie.next}}else if(F.tag===18){if(J=F.return,J===null)throw Error(r(341));J.lanes|=E,U=J.alternate,U!==null&&(U.lanes|=E),wm(J,E,g),J=null}else J=F.child;if(J!==null)J.return=F;else for(J=F;J!==null;){if(J===g){J=null;break}if(F=J.sibling,F!==null){F.return=J.return,J=F;break}J=J.return}F=J}}function i0(g,b,E,I){g=null;for(var F=b,U=!1;F!==null;){if(!U){if((F.flags&524288)!==0)U=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var J=F.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var ie=F.type;ji(F.pendingProps.value,J.value)||(g!==null?g.push(ie):g=[ie])}}else if(F===at.current){if(J=F.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(g!==null?g.push(eb):g=[eb])}F=F.return}g!==null&&yE(b,g,E,I),b.flags|=262144}function xm(g){for(g=g.firstContext;g!==null;){if(!ji(g.context._currentValue,g.memoizedValue))return!0;g=g.next}return!1}function dc(g){tu=g,ad=null,g=g.dependencies,g!==null&&(g.firstContext=null)}function Ba(g){return QM(tu,g)}function a0(g,b){return tu===null&&dc(g),QM(g,b)}function QM(g,b){var E=b._currentValue;if(b={context:b,memoizedValue:E,next:null},ad===null){if(g===null)throw Error(r(308));ad=b,g.dependencies={lanes:0,firstContext:b},g.flags|=524288}else ad=ad.next=b;return E}var bE=typeof AbortController<"u"?AbortController:function(){var g=[],b=this.signal={aborted:!1,addEventListener:function(E,I){g.push(I)}};this.abort=function(){b.aborted=!0,g.forEach(function(E){return E()})}},wE=n.unstable_scheduleCallback,xE=n.unstable_NormalPriority,Ki={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _m(){return{controller:new bE,data:new Map,refCount:0}}function Sm(g){g.refCount--,g.refCount===0&&wE(xE,function(){g.controller.abort()})}var Tm=null,zx=0,dp=0,Ch=null;function o0(g,b){if(Tm===null){var E=Tm=[];zx=0,dp=V0(),Ch={status:"pending",value:void 0,then:function(I){E.push(I)}}}return zx++,b.then(_E,_E),b}function _E(){if(--zx===0&&Tm!==null){Ch!==null&&(Ch.status="fulfilled");var g=Tm;Tm=null,dp=0,Ch=null;for(var b=0;b<g.length;b++)(0,g[b])()}}function JM(g,b){var E=[],I={status:"pending",value:null,reason:null,then:function(F){E.push(F)}};return g.then(function(){I.status="fulfilled",I.value=b;for(var F=0;F<E.length;F++)(0,E[F])(b)},function(F){for(I.status="rejected",I.reason=F,F=0;F<E.length;F++)(0,E[F])(void 0)}),I}var s0=W.S;W.S=function(g,b){typeof b=="object"&&b!==null&&typeof b.then=="function"&&o0(g,b),s0!==null&&s0(g,b)};var sd=ae(null);function hp(){var g=sd.current;return g!==null?g:Qr.pooledCache}function nu(g,b){b===null?ee(sd,sd.current):ee(sd,b.pool)}function eP(){var g=hp();return g===null?null:{parent:Ki._currentValue,pool:g}}var Em=Error(r(460)),tP=Error(r(474)),l0=Error(r(542)),SE={then:function(){}};function nP(g){return g=g.status,g==="fulfilled"||g==="rejected"}function wo(){}function Hx(g,b,E){switch(E=g[E],E===void 0?g.push(b):E!==b&&(b.then(wo,wo),b=E),b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,rP(g),g;default:if(typeof b.status=="string")b.then(wo,wo);else{if(g=Qr,g!==null&&100<g.shellSuspendCounter)throw Error(r(482));g=b,g.status="pending",g.then(function(I){if(b.status==="pending"){var F=b;F.status="fulfilled",F.value=I}},function(I){if(b.status==="pending"){var F=b;F.status="rejected",F.reason=I}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,rP(g),g}throw fp=b,Em}}var fp=null;function c0(){if(fp===null)throw Error(r(459));var g=fp;return fp=null,g}function rP(g){if(g===Em||g===l0)throw Error(r(483))}var Bo=!1;function Gx(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function u0(g,b){g=g.updateQueue,b.updateQueue===g&&(b.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,callbacks:null})}function hc(g){return{lane:g,tag:0,payload:null,callback:null,next:null}}function ld(g,b,E){var I=g.updateQueue;if(I===null)return null;if(I=I.shared,(dr&2)!==0){var F=I.pending;return F===null?b.next=b:(b.next=F.next,F.next=b),I.pending=b,b=Fi(g),gE(g,null,E),b}return Lx(g,I,b,E),Fi(g)}function ru(g,b,E){if(b=b.updateQueue,b!==null&&(b=b.shared,(E&4194048)!==0)){var I=b.lanes;I&=g.pendingLanes,E|=I,b.lanes=E,ce(g,E)}}function d0(g,b){var E=g.updateQueue,I=g.alternate;if(I!==null&&(I=I.updateQueue,E===I)){var F=null,U=null;if(E=E.firstBaseUpdate,E!==null){do{var J={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};U===null?F=U=J:U=U.next=J,E=E.next}while(E!==null);U===null?F=U=b:U=U.next=b}else F=U=b;E={baseState:I.baseState,firstBaseUpdate:F,lastBaseUpdate:U,shared:I.shared,callbacks:I.callbacks},g.updateQueue=E;return}g=E.lastBaseUpdate,g===null?E.firstBaseUpdate=b:g.next=b,E.lastBaseUpdate=b}var qx=!1;function Am(){if(qx){var g=Ch;if(g!==null)throw g}}function km(g,b,E,I){qx=!1;var F=g.updateQueue;Bo=!1;var U=F.firstBaseUpdate,J=F.lastBaseUpdate,ie=F.shared.pending;if(ie!==null){F.shared.pending=null;var de=ie,ke=de.next;de.next=null,J===null?U=ke:J.next=ke,J=de;var Ve=g.alternate;Ve!==null&&(Ve=Ve.updateQueue,ie=Ve.lastBaseUpdate,ie!==J&&(ie===null?Ve.firstBaseUpdate=ke:ie.next=ke,Ve.lastBaseUpdate=de))}if(U!==null){var We=F.baseState;J=0,Ve=ke=de=null,ie=U;do{var De=ie.lane&-536870913,Me=De!==ie.lane;if(Me?(lr&De)===De:(I&De)===De){De!==0&&De===dp&&(qx=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var bn=g,un=ie;De=b;var hi=E;switch(un.tag){case 1:if(bn=un.payload,typeof bn=="function"){We=bn.call(hi,We,De);break e}We=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=un.payload,De=typeof bn=="function"?bn.call(hi,We,De):bn,De==null)break e;We=u({},We,De);break e;case 2:Bo=!0}}De=ie.callback,De!==null&&(g.flags|=64,Me&&(g.flags|=8192),Me=F.callbacks,Me===null?F.callbacks=[De]:Me.push(De))}else Me={lane:De,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Ve===null?(ke=Ve=Me,de=We):Ve=Ve.next=Me,J|=De;if(ie=ie.next,ie===null){if(ie=F.shared.pending,ie===null)break;Me=ie,ie=Me.next,Me.next=null,F.lastBaseUpdate=Me,F.shared.pending=null}}while(!0);Ve===null&&(de=We),F.baseState=de,F.firstBaseUpdate=ke,F.lastBaseUpdate=Ve,U===null&&(F.shared.lanes=0),yd|=J,g.lanes=J,g.memoizedState=We}}function TE(g,b){if(typeof g!="function")throw Error(r(191,g));g.call(b)}function iP(g,b){var E=g.callbacks;if(E!==null)for(g.callbacks=null,g=0;g<E.length;g++)TE(E[g],b)}var cd=ae(null),ud=ae(0);function EE(g,b){g=uu,ee(ud,g),ee(cd,b),uu=g|b.baseLanes}function Wx(){ee(ud,uu),ee(cd,cd.current)}function Dh(){uu=ud.current,le(cd),le(ud)}var fc=0,Bn=null,jr=null,Xi=null,dd=!1,pp=!1,iu=!1,gp=0,Ih=0,hd=null,Yx=0;function ki(){throw Error(r(321))}function Cm(g,b){if(b===null)return!1;for(var E=0;E<b.length&&E<g.length;E++)if(!ji(g[E],b[E]))return!1;return!0}function Kx(g,b,E,I,F,U){return fc=U,Bn=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,W.H=g===null||g.memoizedState===null?uP:dP,iu=!1,U=E(I,F),iu=!1,pp&&(U=kE(b,E,I,F)),AE(g),U}function AE(g){W.H=o_;var b=jr!==null&&jr.next!==null;if(fc=0,Xi=jr=Bn=null,dd=!1,Ih=0,hd=null,b)throw Error(r(300));g===null||Hi||(g=g.dependencies,g!==null&&xm(g)&&(Hi=!0))}function kE(g,b,E,I){Bn=g;var F=0;do{if(pp&&(hd=null),Ih=0,pp=!1,25<=F)throw Error(r(301));if(F+=1,Xi=jr=null,g.updateQueue!=null){var U=g.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}W.H=pF,U=b(E,I)}while(pp);return U}function aP(){var g=W.H,b=g.useState()[0];return b=typeof b.then=="function"?Mh(b):b,g=g.useState()[0],(jr!==null?jr.memoizedState:null)!==g&&(Bn.flags|=1024),b}function CE(){var g=gp!==0;return gp=0,g}function h0(g,b,E){b.updateQueue=g.updateQueue,b.flags&=-2053,g.lanes&=~E}function Xx(g){if(dd){for(g=g.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}dd=!1}fc=0,Xi=jr=Bn=null,pp=!1,Ih=gp=0,hd=null}function gs(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?Bn.memoizedState=Xi=g:Xi=Xi.next=g,Xi}function Zi(){if(jr===null){var g=Bn.alternate;g=g!==null?g.memoizedState:null}else g=jr.next;var b=Xi===null?Bn.memoizedState:Xi.next;if(b!==null)Xi=b,jr=g;else{if(g===null)throw Bn.alternate===null?Error(r(467)):Error(r(310));jr=g,g={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Xi===null?Bn.memoizedState=Xi=g:Xi=Xi.next=g}return Xi}function mp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mh(g){var b=Ih;return Ih+=1,hd===null&&(hd=[]),g=Hx(hd,g,b),b=Bn,(Xi===null?b.memoizedState:Xi.next)===null&&(b=b.alternate,W.H=b===null||b.memoizedState===null?uP:dP),g}function vp(g){if(g!==null&&typeof g=="object"){if(typeof g.then=="function")return Mh(g);if(g.$$typeof===T)return Ba(g)}throw Error(r(438,String(g)))}function Dm(g){var b=null,E=Bn.updateQueue;if(E!==null&&(b=E.memoCache),b==null){var I=Bn.alternate;I!==null&&(I=I.updateQueue,I!==null&&(I=I.memoCache,I!=null&&(b={data:I.data.map(function(F){return F.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),E===null&&(E=mp(),Bn.updateQueue=E),E.memoCache=b,E=b.data[b.index],E===void 0)for(E=b.data[b.index]=Array(g),I=0;I<g;I++)E[I]=j;return b.index++,E}function pc(g,b){return typeof b=="function"?b(g):b}function Im(g){var b=Zi();return Ph(b,jr,g)}function Ph(g,b,E){var I=g.queue;if(I===null)throw Error(r(311));I.lastRenderedReducer=E;var F=g.baseQueue,U=I.pending;if(U!==null){if(F!==null){var J=F.next;F.next=U.next,U.next=J}b.baseQueue=F=U,I.pending=null}if(U=g.baseState,F===null)g.memoizedState=U;else{b=F.next;var ie=J=null,de=null,ke=b,Ve=!1;do{var We=ke.lane&-536870913;if(We!==ke.lane?(lr&We)===We:(fc&We)===We){var De=ke.revertLane;if(De===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),We===dp&&(Ve=!0);else if((fc&De)===De){ke=ke.next,De===dp&&(Ve=!0);continue}else We={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(ie=de=We,J=U):de=de.next=We,Bn.lanes|=De,yd|=De;We=ke.action,iu&&E(U,We),U=ke.hasEagerState?ke.eagerState:E(U,We)}else De={lane:We,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(ie=de=De,J=U):de=de.next=De,Bn.lanes|=We,yd|=We;ke=ke.next}while(ke!==null&&ke!==b);if(de===null?J=U:de.next=ie,!ji(U,g.memoizedState)&&(Hi=!0,Ve&&(E=Ch,E!==null)))throw E;g.memoizedState=U,g.baseState=J,g.baseQueue=de,I.lastRenderedState=U}return F===null&&(I.lanes=0),[g.memoizedState,I.dispatch]}function Zx(g){var b=Zi(),E=b.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=g;var I=E.dispatch,F=E.pending,U=b.memoizedState;if(F!==null){E.pending=null;var J=F=F.next;do U=g(U,J.action),J=J.next;while(J!==F);ji(U,b.memoizedState)||(Hi=!0),b.memoizedState=U,b.baseQueue===null&&(b.baseState=U),E.lastRenderedState=U}return[U,I]}function DE(g,b,E){var I=Bn,F=Zi(),U=Sr;if(U){if(E===void 0)throw Error(r(407));E=E()}else E=b();var J=!ji((jr||F).memoizedState,E);J&&(F.memoizedState=E,Hi=!0),F=F.queue;var ie=Oh.bind(null,I,F,g);if(Rm(2048,8,ie,[g]),F.getSnapshot!==b||J||Xi!==null&&Xi.memoizedState.tag&1){if(I.flags|=2048,li(9,Pm(),Jx.bind(null,I,F,E,b),null),Qr===null)throw Error(r(349));U||(fc&124)!==0||Qx(I,b,E)}return E}function Qx(g,b,E){g.flags|=16384,g={getSnapshot:b,value:E},b=Bn.updateQueue,b===null?(b=mp(),Bn.updateQueue=b,b.stores=[g]):(E=b.stores,E===null?b.stores=[g]:E.push(g))}function Jx(g,b,E,I){b.value=E,b.getSnapshot=I,Mm(b)&&yp(g)}function Oh(g,b,E){return E(function(){Mm(b)&&yp(g)})}function Mm(g){var b=g.getSnapshot;g=g.value;try{var E=b();return!ji(g,E)}catch{return!0}}function yp(g){var b=lp(g,2);b!==null&&xs(b,g,2)}function bp(g){var b=gs();if(typeof g=="function"){var E=g;if(g=E(),iu){tt(!0);try{E()}finally{tt(!1)}}}return b.memoizedState=b.baseState=g,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:g},b}function wp(g,b,E,I){return g.baseState=E,Ph(g,jr,typeof I=="function"?I:pc)}function ms(g,b,E,I,F){if(m0(g))throw Error(r(485));if(g=b.action,g!==null){var U={payload:F,action:g,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){U.listeners.push(J)}};W.T!==null?E(!0):U.isTransition=!1,I(U),E=b.pending,E===null?(U.next=b.pending=U,xp(b,U)):(U.next=E.next,b.pending=E.next=U)}}function xp(g,b){var E=b.action,I=b.payload,F=g.state;if(b.isTransition){var U=W.T,J={};W.T=J;try{var ie=E(F,I),de=W.S;de!==null&&de(J,ie),IE(g,b,ie)}catch(ke){Pl(g,b,ke)}finally{W.T=U}}else try{U=E(F,I),IE(g,b,U)}catch(ke){Pl(g,b,ke)}}function IE(g,b,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(I){gc(g,b,I)},function(I){return Pl(g,b,I)}):gc(g,b,E)}function gc(g,b,E){b.status="fulfilled",b.value=E,ME(b),g.state=E,b=g.pending,b!==null&&(E=b.next,E===b?g.pending=null:(E=E.next,b.next=E,xp(g,E)))}function Pl(g,b,E){var I=g.pending;if(g.pending=null,I!==null){I=I.next;do b.status="rejected",b.reason=E,ME(b),b=b.next;while(b!==I)}g.action=null}function ME(g){g=g.listeners;for(var b=0;b<g.length;b++)(0,g[b])()}function e_(g,b){return b}function oP(g,b){if(Sr){var E=Qr.formState;if(E!==null){e:{var I=Bn;if(Sr){if(Cr){t:{for(var F=Cr,U=Jc;F.nodeType!==8;){if(!U){F=null;break t}if(F=So(F.nextSibling),F===null){F=null;break t}}U=F.data,F=U==="F!"||U==="F"?F:null}if(F){Cr=So(F.nextSibling),I=F.data==="F!";break e}}uc(I)}I=!1}I&&(b=E[0])}}return E=gs(),E.memoizedState=E.baseState=b,I={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e_,lastRenderedState:b},E.queue=I,E=Lm.bind(null,Bn,I),I.dispatch=E,I=bp(!1),U=a_.bind(null,Bn,!1,I.queue),I=gs(),F={state:b,dispatch:null,action:g,pending:null},I.queue=F,E=ms.bind(null,Bn,F,U,E),F.dispatch=E,I.memoizedState=g,[b,E,!1]}function sP(g){var b=Zi();return lP(b,jr,g)}function lP(g,b,E){if(b=Ph(g,b,e_)[0],g=Im(pc)[0],typeof b=="object"&&b!==null&&typeof b.then=="function")try{var I=Mh(b)}catch(J){throw J===Em?l0:J}else I=b;b=Zi();var F=b.queue,U=F.dispatch;return E!==b.memoizedState&&(Bn.flags|=2048,li(9,Pm(),fF.bind(null,F,E),null)),[I,U,g]}function fF(g,b){g.action=b}function t_(g){var b=Zi(),E=jr;if(E!==null)return lP(b,E,g);Zi(),b=b.memoizedState,E=Zi();var I=E.queue.dispatch;return E.memoizedState=g,[b,I,!1]}function li(g,b,E,I){return g={tag:g,create:E,deps:I,inst:b,next:null},b=Bn.updateQueue,b===null&&(b=mp(),Bn.updateQueue=b),E=b.lastEffect,E===null?b.lastEffect=g.next=g:(I=E.next,E.next=g,g.next=I,b.lastEffect=g),g}function Pm(){return{destroy:void 0,resource:void 0}}function n_(){return Zi().memoizedState}function Om(g,b,E,I){var F=gs();I=I===void 0?null:I,Bn.flags|=g,F.memoizedState=li(1|b,Pm(),E,I)}function Rm(g,b,E,I){var F=Zi();I=I===void 0?null:I;var U=F.memoizedState.inst;jr!==null&&I!==null&&Cm(I,jr.memoizedState.deps)?F.memoizedState=li(b,U,E,I):(Bn.flags|=g,F.memoizedState=li(1|b,U,E,I))}function PE(g,b){Om(8390656,8,g,b)}function OE(g,b){Rm(2048,8,g,b)}function RE(g,b){return Rm(4,2,g,b)}function f0(g,b){return Rm(4,4,g,b)}function Rh(g,b){if(typeof b=="function"){g=g();var E=b(g);return function(){typeof E=="function"?E():b(null)}}if(b!=null)return g=g(),b.current=g,function(){b.current=null}}function NE(g,b,E){E=E!=null?E.concat([g]):null,Rm(4,4,Rh.bind(null,b,g),E)}function r_(){}function LE(g,b){var E=Zi();b=b===void 0?null:b;var I=E.memoizedState;return b!==null&&Cm(b,I[1])?I[0]:(E.memoizedState=[g,b],g)}function xo(g,b){var E=Zi();b=b===void 0?null:b;var I=E.memoizedState;if(b!==null&&Cm(b,I[1]))return I[0];if(I=g(),iu){tt(!0);try{g()}finally{tt(!1)}}return E.memoizedState=[I,b],I}function _p(g,b,E){return E===void 0||(fc&1073741824)!==0?g.memoizedState=b:(g.memoizedState=E,g=lA(),Bn.lanes|=g,yd|=g,E)}function jE(g,b,E,I){return ji(E,b)?E:cd.current!==null?(g=_p(g,E,I),ji(g,b)||(Hi=!0),g):(fc&42)===0?(Hi=!0,g.memoizedState=E):(g=lA(),Bn.lanes|=g,yd|=g,b)}function FE(g,b,E,I,F){var U=X.p;X.p=U!==0&&8>U?U:8;var J=W.T,ie={};W.T=ie,a_(g,!1,b,E);try{var de=F(),ke=W.S;if(ke!==null&&ke(ie,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ve=JM(de,I);jm(g,b,Ve,ws(g))}else jm(g,b,I,ws(g))}catch(We){jm(g,b,{then:function(){},status:"rejected",reason:We},ws())}finally{X.p=U,W.T=J}}function $E(){}function i_(g,b,E,I){if(g.tag!==5)throw Error(r(476));var F=BE(g).queue;FE(g,F,b,te,E===null?$E:function(){return Sp(g),E(I)})}function BE(g){var b=g.memoizedState;if(b!==null)return b;b={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:te},next:null};var E={};return b.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:E},next:null},g.memoizedState=b,g=g.alternate,g!==null&&(g.memoizedState=b),b}function Sp(g){var b=BE(g).next.queue;jm(g,b,{},ws())}function UE(){return Ba(eb)}function p0(){return Zi().memoizedState}function g0(){return Zi().memoizedState}function Zs(g){for(var b=g.return;b!==null;){switch(b.tag){case 24:case 3:var E=ws();g=hc(E);var I=ld(b,g,E);I!==null&&(xs(I,b,E),ru(I,b,E)),b={cache:_m()},g.payload=b;return}b=b.return}}function Nm(g,b,E){var I=ws();E={lane:I,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},m0(g)?Nh(b,E):(E=Qy(g,b,E,I),E!==null&&(xs(E,g,I),cP(E,b,I)))}function Lm(g,b,E){var I=ws();jm(g,b,E,I)}function jm(g,b,E,I){var F={lane:I,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(m0(g))Nh(b,F);else{var U=g.alternate;if(g.lanes===0&&(U===null||U.lanes===0)&&(U=b.lastRenderedReducer,U!==null))try{var J=b.lastRenderedState,ie=U(J,E);if(F.hasEagerState=!0,F.eagerState=ie,ji(ie,J))return Lx(g,b,F,0),Qr===null&&sp(),!1}catch{}finally{}if(E=Qy(g,b,F,I),E!==null)return xs(E,g,I),cP(E,b,I),!0}return!1}function a_(g,b,E,I){if(I={lane:2,revertLane:V0(),action:I,hasEagerState:!1,eagerState:null,next:null},m0(g)){if(b)throw Error(r(479))}else b=Qy(g,E,I,2),b!==null&&xs(b,g,2)}function m0(g){var b=g.alternate;return g===Bn||b!==null&&b===Bn}function Nh(g,b){pp=dd=!0;var E=g.pending;E===null?b.next=b:(b.next=E.next,E.next=b),g.pending=b}function cP(g,b,E){if((E&4194048)!==0){var I=b.lanes;I&=g.pendingLanes,E|=I,b.lanes=E,ce(g,E)}}var o_={readContext:Ba,use:vp,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki},uP={readContext:Ba,use:vp,useCallback:function(g,b){return gs().memoizedState=[g,b===void 0?null:b],g},useContext:Ba,useEffect:PE,useImperativeHandle:function(g,b,E){E=E!=null?E.concat([g]):null,Om(4194308,4,Rh.bind(null,b,g),E)},useLayoutEffect:function(g,b){return Om(4194308,4,g,b)},useInsertionEffect:function(g,b){Om(4,2,g,b)},useMemo:function(g,b){var E=gs();b=b===void 0?null:b;var I=g();if(iu){tt(!0);try{g()}finally{tt(!1)}}return E.memoizedState=[I,b],I},useReducer:function(g,b,E){var I=gs();if(E!==void 0){var F=E(b);if(iu){tt(!0);try{E(b)}finally{tt(!1)}}}else F=b;return I.memoizedState=I.baseState=F,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:F},I.queue=g,g=g.dispatch=Nm.bind(null,Bn,g),[I.memoizedState,g]},useRef:function(g){var b=gs();return g={current:g},b.memoizedState=g},useState:function(g){g=bp(g);var b=g.queue,E=Lm.bind(null,Bn,b);return b.dispatch=E,[g.memoizedState,E]},useDebugValue:r_,useDeferredValue:function(g,b){var E=gs();return _p(E,g,b)},useTransition:function(){var g=bp(!1);return g=FE.bind(null,Bn,g.queue,!0,!1),gs().memoizedState=g,[!1,g]},useSyncExternalStore:function(g,b,E){var I=Bn,F=gs();if(Sr){if(E===void 0)throw Error(r(407));E=E()}else{if(E=b(),Qr===null)throw Error(r(349));(lr&124)!==0||Qx(I,b,E)}F.memoizedState=E;var U={value:E,getSnapshot:b};return F.queue=U,PE(Oh.bind(null,I,U,g),[g]),I.flags|=2048,li(9,Pm(),Jx.bind(null,I,U,E,b),null),E},useId:function(){var g=gs(),b=Qr.identifierPrefix;if(Sr){var E=Qc,I=rd;E=(I&~(1<<32-xt(I)-1)).toString(32)+E,b="«"+b+"R"+E,E=gp++,0<E&&(b+="H"+E.toString(32)),b+="»"}else E=Yx++,b="«"+b+"r"+E.toString(32)+"»";return g.memoizedState=b},useHostTransitionStatus:UE,useFormState:oP,useActionState:oP,useOptimistic:function(g){var b=gs();b.memoizedState=b.baseState=g;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=E,b=a_.bind(null,Bn,!0,E),E.dispatch=b,[g,b]},useMemoCache:Dm,useCacheRefresh:function(){return gs().memoizedState=Zs.bind(null,Bn)}},dP={readContext:Ba,use:vp,useCallback:LE,useContext:Ba,useEffect:OE,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:f0,useMemo:xo,useReducer:Im,useRef:n_,useState:function(){return Im(pc)},useDebugValue:r_,useDeferredValue:function(g,b){var E=Zi();return jE(E,jr.memoizedState,g,b)},useTransition:function(){var g=Im(pc)[0],b=Zi().memoizedState;return[typeof g=="boolean"?g:Mh(g),b]},useSyncExternalStore:DE,useId:p0,useHostTransitionStatus:UE,useFormState:sP,useActionState:sP,useOptimistic:function(g,b){var E=Zi();return wp(E,jr,g,b)},useMemoCache:Dm,useCacheRefresh:g0},pF={readContext:Ba,use:vp,useCallback:LE,useContext:Ba,useEffect:OE,useImperativeHandle:NE,useInsertionEffect:RE,useLayoutEffect:f0,useMemo:xo,useReducer:Zx,useRef:n_,useState:function(){return Zx(pc)},useDebugValue:r_,useDeferredValue:function(g,b){var E=Zi();return jr===null?_p(E,g,b):jE(E,jr.memoizedState,g,b)},useTransition:function(){var g=Zx(pc)[0],b=Zi().memoizedState;return[typeof g=="boolean"?g:Mh(g),b]},useSyncExternalStore:DE,useId:p0,useHostTransitionStatus:UE,useFormState:t_,useActionState:t_,useOptimistic:function(g,b){var E=Zi();return jr!==null?wp(E,jr,g,b):(E.baseState=g,[g,E.queue.dispatch])},useMemoCache:Dm,useCacheRefresh:g0},Tp=null,Fm=0;function s_(g){var b=Fm;return Fm+=1,Tp===null&&(Tp=[]),Hx(Tp,g,b)}function v0(g,b){b=b.props.ref,g.ref=b!==void 0?b:null}function $m(g,b){throw b.$$typeof===d?Error(r(525)):(g=Object.prototype.toString.call(b),Error(r(31,g==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":g)))}function VE(g){var b=g._init;return b(g._payload)}function zi(g){function b(xe,me){if(g){var Ee=xe.deletions;Ee===null?(xe.deletions=[me],xe.flags|=16):Ee.push(me)}}function E(xe,me){if(!g)return null;for(;me!==null;)b(xe,me),me=me.sibling;return null}function I(xe){for(var me=new Map;xe!==null;)xe.key!==null?me.set(xe.key,xe):me.set(xe.index,xe),xe=xe.sibling;return me}function F(xe,me){return xe=Zc(xe,me),xe.index=0,xe.sibling=null,xe}function U(xe,me,Ee){return xe.index=Ee,g?(Ee=xe.alternate,Ee!==null?(Ee=Ee.index,Ee<me?(xe.flags|=67108866,me):Ee):(xe.flags|=67108866,me)):(xe.flags|=1048576,me)}function J(xe){return g&&xe.alternate===null&&(xe.flags|=67108866),xe}function ie(xe,me,Ee,ze){return me===null||me.tag!==6?(me=$x(Ee,xe.mode,ze),me.return=xe,me):(me=F(me,Ee),me.return=xe,me)}function de(xe,me,Ee,ze){var Nt=Ee.type;return Nt===m?Ve(xe,me,Ee.props.children,ze,Ee.key):me!==null&&(me.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===P&&VE(Nt)===me.type)?(me=F(me,Ee.props),v0(me,Ee),me.return=xe,me):(me=bi(Ee.type,Ee.key,Ee.props,null,xe.mode,ze),v0(me,Ee),me.return=xe,me)}function ke(xe,me,Ee,ze){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ee.containerInfo||me.stateNode.implementation!==Ee.implementation?(me=e0(Ee,xe.mode,ze),me.return=xe,me):(me=F(me,Ee.children||[]),me.return=xe,me)}function Ve(xe,me,Ee,ze,Nt){return me===null||me.tag!==7?(me=Dl(Ee,xe.mode,ze,Nt),me.return=xe,me):(me=F(me,Ee),me.return=xe,me)}function We(xe,me,Ee){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=$x(""+me,xe.mode,Ee),me.return=xe,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case h:return Ee=bi(me.type,me.key,me.props,null,xe.mode,Ee),v0(Ee,me),Ee.return=xe,Ee;case f:return me=e0(me,xe.mode,Ee),me.return=xe,me;case P:var ze=me._init;return me=ze(me._payload),We(xe,me,Ee)}if(G(me)||B(me))return me=Dl(me,xe.mode,Ee,null),me.return=xe,me;if(typeof me.then=="function")return We(xe,s_(me),Ee);if(me.$$typeof===T)return We(xe,a0(xe,me),Ee);$m(xe,me)}return null}function De(xe,me,Ee,ze){var Nt=me!==null?me.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Nt!==null?null:ie(xe,me,""+Ee,ze);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case h:return Ee.key===Nt?de(xe,me,Ee,ze):null;case f:return Ee.key===Nt?ke(xe,me,Ee,ze):null;case P:return Nt=Ee._init,Ee=Nt(Ee._payload),De(xe,me,Ee,ze)}if(G(Ee)||B(Ee))return Nt!==null?null:Ve(xe,me,Ee,ze,null);if(typeof Ee.then=="function")return De(xe,me,s_(Ee),ze);if(Ee.$$typeof===T)return De(xe,me,a0(xe,Ee),ze);$m(xe,Ee)}return null}function Me(xe,me,Ee,ze,Nt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return xe=xe.get(Ee)||null,ie(me,xe,""+ze,Nt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case h:return xe=xe.get(ze.key===null?Ee:ze.key)||null,de(me,xe,ze,Nt);case f:return xe=xe.get(ze.key===null?Ee:ze.key)||null,ke(me,xe,ze,Nt);case P:var ar=ze._init;return ze=ar(ze._payload),Me(xe,me,Ee,ze,Nt)}if(G(ze)||B(ze))return xe=xe.get(Ee)||null,Ve(me,xe,ze,Nt,null);if(typeof ze.then=="function")return Me(xe,me,Ee,s_(ze),Nt);if(ze.$$typeof===T)return Me(xe,me,Ee,a0(me,ze),Nt);$m(me,ze)}return null}function bn(xe,me,Ee,ze){for(var Nt=null,ar=null,Wt=me,pn=me=0,To=null;Wt!==null&&pn<Ee.length;pn++){Wt.index>pn?(To=Wt,Wt=null):To=Wt.sibling;var Ir=De(xe,Wt,Ee[pn],ze);if(Ir===null){Wt===null&&(Wt=To);break}g&&Wt&&Ir.alternate===null&&b(xe,Wt),me=U(Ir,me,pn),ar===null?Nt=Ir:ar.sibling=Ir,ar=Ir,Wt=To}if(pn===Ee.length)return E(xe,Wt),Sr&&Ml(xe,pn),Nt;if(Wt===null){for(;pn<Ee.length;pn++)Wt=We(xe,Ee[pn],ze),Wt!==null&&(me=U(Wt,me,pn),ar===null?Nt=Wt:ar.sibling=Wt,ar=Wt);return Sr&&Ml(xe,pn),Nt}for(Wt=I(Wt);pn<Ee.length;pn++)To=Me(Wt,xe,pn,Ee[pn],ze),To!==null&&(g&&To.alternate!==null&&Wt.delete(To.key===null?pn:To.key),me=U(To,me,pn),ar===null?Nt=To:ar.sibling=To,ar=To);return g&&Wt.forEach(function(gv){return b(xe,gv)}),Sr&&Ml(xe,pn),Nt}function un(xe,me,Ee,ze){if(Ee==null)throw Error(r(151));for(var Nt=null,ar=null,Wt=me,pn=me=0,To=null,Ir=Ee.next();Wt!==null&&!Ir.done;pn++,Ir=Ee.next()){Wt.index>pn?(To=Wt,Wt=null):To=Wt.sibling;var gv=De(xe,Wt,Ir.value,ze);if(gv===null){Wt===null&&(Wt=To);break}g&&Wt&&gv.alternate===null&&b(xe,Wt),me=U(gv,me,pn),ar===null?Nt=gv:ar.sibling=gv,ar=gv,Wt=To}if(Ir.done)return E(xe,Wt),Sr&&Ml(xe,pn),Nt;if(Wt===null){for(;!Ir.done;pn++,Ir=Ee.next())Ir=We(xe,Ir.value,ze),Ir!==null&&(me=U(Ir,me,pn),ar===null?Nt=Ir:ar.sibling=Ir,ar=Ir);return Sr&&Ml(xe,pn),Nt}for(Wt=I(Wt);!Ir.done;pn++,Ir=Ee.next())Ir=Me(Wt,xe,pn,Ir.value,ze),Ir!==null&&(g&&Ir.alternate!==null&&Wt.delete(Ir.key===null?pn:Ir.key),me=U(Ir,me,pn),ar===null?Nt=Ir:ar.sibling=Ir,ar=Ir);return g&&Wt.forEach(function(JDe){return b(xe,JDe)}),Sr&&Ml(xe,pn),Nt}function hi(xe,me,Ee,ze){if(typeof Ee=="object"&&Ee!==null&&Ee.type===m&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case h:e:{for(var Nt=Ee.key;me!==null;){if(me.key===Nt){if(Nt=Ee.type,Nt===m){if(me.tag===7){E(xe,me.sibling),ze=F(me,Ee.props.children),ze.return=xe,xe=ze;break e}}else if(me.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===P&&VE(Nt)===me.type){E(xe,me.sibling),ze=F(me,Ee.props),v0(ze,Ee),ze.return=xe,xe=ze;break e}E(xe,me);break}else b(xe,me);me=me.sibling}Ee.type===m?(ze=Dl(Ee.props.children,xe.mode,ze,Ee.key),ze.return=xe,xe=ze):(ze=bi(Ee.type,Ee.key,Ee.props,null,xe.mode,ze),v0(ze,Ee),ze.return=xe,xe=ze)}return J(xe);case f:e:{for(Nt=Ee.key;me!==null;){if(me.key===Nt)if(me.tag===4&&me.stateNode.containerInfo===Ee.containerInfo&&me.stateNode.implementation===Ee.implementation){E(xe,me.sibling),ze=F(me,Ee.children||[]),ze.return=xe,xe=ze;break e}else{E(xe,me);break}else b(xe,me);me=me.sibling}ze=e0(Ee,xe.mode,ze),ze.return=xe,xe=ze}return J(xe);case P:return Nt=Ee._init,Ee=Nt(Ee._payload),hi(xe,me,Ee,ze)}if(G(Ee))return bn(xe,me,Ee,ze);if(B(Ee)){if(Nt=B(Ee),typeof Nt!="function")throw Error(r(150));return Ee=Nt.call(Ee),un(xe,me,Ee,ze)}if(typeof Ee.then=="function")return hi(xe,me,s_(Ee),ze);if(Ee.$$typeof===T)return hi(xe,me,a0(xe,Ee),ze);$m(xe,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,me!==null&&me.tag===6?(E(xe,me.sibling),ze=F(me,Ee),ze.return=xe,xe=ze):(E(xe,me),ze=$x(Ee,xe.mode,ze),ze.return=xe,xe=ze),J(xe)):E(xe,me)}return function(xe,me,Ee,ze){try{Fm=0;var Nt=hi(xe,me,Ee,ze);return Tp=null,Nt}catch(Wt){if(Wt===Em||Wt===l0)throw Wt;var ar=Yi(29,Wt,null,xe.mode);return ar.lanes=ze,ar.return=xe,ar}finally{}}}var ci=zi(!0),zE=zi(!1),no=ae(null),au=null;function Lh(g){var b=g.alternate;ee(ca,ca.current&1),ee(no,g),au===null&&(b===null||cd.current!==null||b.memoizedState!==null)&&(au=g)}function l_(g){if(g.tag===22){if(ee(ca,ca.current),ee(no,g),au===null){var b=g.alternate;b!==null&&b.memoizedState!==null&&(au=g)}}else fd()}function fd(){ee(ca,ca.current),ee(no,no.current)}function mc(g){le(no),au===g&&(au=null),le(ca)}var ca=ae(0);function y0(g){for(var b=g;b!==null;){if(b.tag===13){var E=b.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||P_(E)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function Ep(g,b,E,I){b=g.memoizedState,E=E(I,b),E=E==null?b:u({},b,E),g.memoizedState=E,g.lanes===0&&(g.updateQueue.baseState=E)}var b0={enqueueSetState:function(g,b,E){g=g._reactInternals;var I=ws(),F=hc(I);F.payload=b,E!=null&&(F.callback=E),b=ld(g,F,I),b!==null&&(xs(b,g,I),ru(b,g,I))},enqueueReplaceState:function(g,b,E){g=g._reactInternals;var I=ws(),F=hc(I);F.tag=1,F.payload=b,E!=null&&(F.callback=E),b=ld(g,F,I),b!==null&&(xs(b,g,I),ru(b,g,I))},enqueueForceUpdate:function(g,b){g=g._reactInternals;var E=ws(),I=hc(E);I.tag=2,b!=null&&(I.callback=b),b=ld(g,I,E),b!==null&&(xs(b,g,E),ru(b,g,E))}};function w0(g,b,E,I,F,U,J){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(I,U,J):b.prototype&&b.prototype.isPureReactComponent?!pm(E,I)||!pm(F,U):!0}function c_(g,b,E,I){g=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(E,I),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(E,I),b.state!==g&&b0.enqueueReplaceState(b,b.state,null)}function ou(g,b){var E=b;if("ref"in b){E={};for(var I in b)I!=="ref"&&(E[I]=b[I])}if(g=g.defaultProps){E===b&&(E=u({},E));for(var F in g)E[F]===void 0&&(E[F]=g[F])}return E}var Bm=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function u_(g){Bm(g)}function hP(g){console.error(g)}function fP(g){Bm(g)}function jh(g,b){try{var E=g.onUncaughtError;E(b.value,{componentStack:b.stack})}catch(I){setTimeout(function(){throw I})}}function Ap(g,b,E){try{var I=g.onCaughtError;I(E.value,{componentStack:E.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function x0(g,b,E){return E=hc(E),E.tag=3,E.payload={element:null},E.callback=function(){jh(g,b)},E}function HE(g){return g=hc(g),g.tag=3,g}function wr(g,b,E,I){var F=E.type.getDerivedStateFromError;if(typeof F=="function"){var U=I.value;g.payload=function(){return F(U)},g.callback=function(){Ap(b,E,I)}}var J=E.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(g.callback=function(){Ap(b,E,I),typeof F!="function"&&(bd===null?bd=new Set([this]):bd.add(this));var ie=I.stack;this.componentDidCatch(I.value,{componentStack:ie!==null?ie:""})})}function Pt(g,b,E,I,F){if(E.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){if(b=E.alternate,b!==null&&i0(b,E,F,!0),E=no.current,E!==null){switch(E.tag){case 13:return au===null?__():E.alternate===null&&$i===0&&($i=3),E.flags&=-257,E.flags|=65536,E.lanes=F,I===SE?E.flags|=16384:(b=E.updateQueue,b===null?E.updateQueue=new Set([I]):b.add(I),T_(g,I,F)),!1;case 22:return E.flags|=65536,I===SE?E.flags|=16384:(b=E.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([I])},E.updateQueue=b):(E=b.retryQueue,E===null?b.retryQueue=new Set([I]):E.add(I)),T_(g,I,F)),!1}throw Error(r(435,E.tag))}return T_(g,I,F),__(),!1}if(Sr)return b=no.current,b!==null?((b.flags&65536)===0&&(b.flags|=256),b.flags|=65536,b.lanes=F,I!==eu&&(g=Error(r(422),{cause:I}),id(Ys(g,E)))):(I!==eu&&(b=Error(r(423),{cause:I}),id(Ys(b,E))),g=g.current.alternate,g.flags|=65536,F&=-F,g.lanes|=F,I=Ys(I,E),F=x0(g.stateNode,I,F),d0(g,F),$i!==4&&($i=2)),!1;var U=Error(r(520),{cause:I});if(U=Ys(U,E),Km===null?Km=[U]:Km.push(U),$i!==4&&($i=2),b===null)return!0;I=Ys(I,E),E=b;do{switch(E.tag){case 3:return E.flags|=65536,g=F&-F,E.lanes|=g,g=x0(E.stateNode,I,g),d0(E,g),!1;case 1:if(b=E.type,U=E.stateNode,(E.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(bd===null||!bd.has(U))))return E.flags|=65536,F&=-F,E.lanes|=F,F=HE(F),wr(F,g,E,I),d0(E,F),!1}E=E.return}while(E!==null);return!1}var GE=Error(r(461)),Hi=!1;function ui(g,b,E,I){b.child=g===null?zE(b,null,E,I):ci(b,g.child,E,I)}function vc(g,b,E,I,F){E=E.render;var U=b.ref;if("ref"in I){var J={};for(var ie in I)ie!=="ref"&&(J[ie]=I[ie])}else J=I;return dc(b),I=Kx(g,b,E,J,U,F),ie=CE(),g!==null&&!Hi?(h0(g,b,F),Qs(g,b,F)):(Sr&&ie&&Ux(b),b.flags|=1,ui(g,b,I,F),b.child)}function Sa(g,b,E,I,F){if(g===null){var U=E.type;return typeof U=="function"&&!jx(U)&&U.defaultProps===void 0&&E.compare===null?(b.tag=15,b.type=U,qE(g,b,U,I,F)):(g=bi(E.type,null,I,b,b.mode,F),g.ref=b.ref,g.return=b,b.child=g)}if(U=g.child,!T0(g,F)){var J=U.memoizedProps;if(E=E.compare,E=E!==null?E:pm,E(J,I)&&g.ref===b.ref)return Qs(g,b,F)}return b.flags|=1,g=Zc(U,I),g.ref=b.ref,g.return=b,b.child=g}function qE(g,b,E,I,F){if(g!==null){var U=g.memoizedProps;if(pm(U,I)&&g.ref===b.ref)if(Hi=!1,b.pendingProps=I=U,T0(g,F))(g.flags&131072)!==0&&(Hi=!0);else return b.lanes=g.lanes,Qs(g,b,F)}return _0(g,b,E,I,F)}function pP(g,b,E){var I=b.pendingProps,F=I.children,U=g!==null?g.memoizedState:null;if(I.mode==="hidden"){if((b.flags&128)!==0){if(I=U!==null?U.baseLanes|E:E,g!==null){for(F=b.child=g.child,U=0;F!==null;)U=U|F.lanes|F.childLanes,F=F.sibling;b.childLanes=U&~I}else b.childLanes=0,b.child=null;return WE(g,b,I,E)}if((E&536870912)!==0)b.memoizedState={baseLanes:0,cachePool:null},g!==null&&nu(b,U!==null?U.cachePool:null),U!==null?EE(b,U):Wx(),l_(b);else return b.lanes=b.childLanes=536870912,WE(g,b,U!==null?U.baseLanes|E:E,E)}else U!==null?(nu(b,U.cachePool),EE(b,U),fd(),b.memoizedState=null):(g!==null&&nu(b,null),Wx(),fd());return ui(g,b,F,E),b.child}function WE(g,b,E,I){var F=hp();return F=F===null?null:{parent:Ki._currentValue,pool:F},b.memoizedState={baseLanes:E,cachePool:F},g!==null&&nu(b,null),Wx(),l_(b),g!==null&&i0(g,b,I,!0),null}function Fh(g,b){var E=b.ref;if(E===null)g!==null&&g.ref!==null&&(b.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(g===null||g.ref!==E)&&(b.flags|=4194816)}}function _0(g,b,E,I,F){return dc(b),E=Kx(g,b,E,I,void 0,F),I=CE(),g!==null&&!Hi?(h0(g,b,F),Qs(g,b,F)):(Sr&&I&&Ux(b),b.flags|=1,ui(g,b,E,F),b.child)}function gP(g,b,E,I,F,U){return dc(b),b.updateQueue=null,E=kE(b,I,E,F),AE(g),I=CE(),g!==null&&!Hi?(h0(g,b,U),Qs(g,b,U)):(Sr&&I&&Ux(b),b.flags|=1,ui(g,b,E,U),b.child)}function kp(g,b,E,I,F){if(dc(b),b.stateNode===null){var U=Cl,J=E.contextType;typeof J=="object"&&J!==null&&(U=Ba(J)),U=new E(I,U),b.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=b0,b.stateNode=U,U._reactInternals=b,U=b.stateNode,U.props=I,U.state=b.memoizedState,U.refs={},Gx(b),J=E.contextType,U.context=typeof J=="object"&&J!==null?Ba(J):Cl,U.state=b.memoizedState,J=E.getDerivedStateFromProps,typeof J=="function"&&(Ep(b,E,J,I),U.state=b.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(J=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),J!==U.state&&b0.enqueueReplaceState(U,U.state,null),km(b,I,U,F),Am(),U.state=b.memoizedState),typeof U.componentDidMount=="function"&&(b.flags|=4194308),I=!0}else if(g===null){U=b.stateNode;var ie=b.memoizedProps,de=ou(E,ie);U.props=de;var ke=U.context,Ve=E.contextType;J=Cl,typeof Ve=="object"&&Ve!==null&&(J=Ba(Ve));var We=E.getDerivedStateFromProps;Ve=typeof We=="function"||typeof U.getSnapshotBeforeUpdate=="function",ie=b.pendingProps!==ie,Ve||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ie||ke!==J)&&c_(b,U,I,J),Bo=!1;var De=b.memoizedState;U.state=De,km(b,I,U,F),Am(),ke=b.memoizedState,ie||De!==ke||Bo?(typeof We=="function"&&(Ep(b,E,We,I),ke=b.memoizedState),(de=Bo||w0(b,E,de,I,De,ke,J))?(Ve||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(b.flags|=4194308)):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=I,b.memoizedState=ke),U.props=I,U.state=ke,U.context=J,I=de):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),I=!1)}else{U=b.stateNode,u0(g,b),J=b.memoizedProps,Ve=ou(E,J),U.props=Ve,We=b.pendingProps,De=U.context,ke=E.contextType,de=Cl,typeof ke=="object"&&ke!==null&&(de=Ba(ke)),ie=E.getDerivedStateFromProps,(ke=typeof ie=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(J!==We||De!==de)&&c_(b,U,I,de),Bo=!1,De=b.memoizedState,U.state=De,km(b,I,U,F),Am();var Me=b.memoizedState;J!==We||De!==Me||Bo||g!==null&&g.dependencies!==null&&xm(g.dependencies)?(typeof ie=="function"&&(Ep(b,E,ie,I),Me=b.memoizedState),(Ve=Bo||w0(b,E,Ve,I,De,Me,de)||g!==null&&g.dependencies!==null&&xm(g.dependencies))?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(I,Me,de),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(I,Me,de)),typeof U.componentDidUpdate=="function"&&(b.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&De===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&De===g.memoizedState||(b.flags|=1024),b.memoizedProps=I,b.memoizedState=Me),U.props=I,U.state=Me,U.context=de,I=Ve):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&De===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&De===g.memoizedState||(b.flags|=1024),I=!1)}return U=I,Fh(g,b),I=(b.flags&128)!==0,U||I?(U=b.stateNode,E=I&&typeof E.getDerivedStateFromError!="function"?null:U.render(),b.flags|=1,g!==null&&I?(b.child=ci(b,g.child,null,F),b.child=ci(b,null,E,F)):ui(g,b,E,F),b.memoizedState=U.state,g=b.child):g=Qs(g,b,F),g}function YE(g,b,E,I){return bm(),b.flags|=256,ui(g,b,E,I),b.child}var d_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function h_(g){return{baseLanes:g,cachePool:eP()}}function $h(g,b,E){return g=g!==null?g.childLanes&~E:0,b&&(g|=Js),g}function S0(g,b,E){var I=b.pendingProps,F=!1,U=(b.flags&128)!==0,J;if((J=U)||(J=g!==null&&g.memoizedState===null?!1:(ca.current&2)!==0),J&&(F=!0,b.flags&=-129),J=(b.flags&32)!==0,b.flags&=-33,g===null){if(Sr){if(F?Lh(b):fd(),Sr){var ie=Cr,de;if(de=ie){e:{for(de=ie,ie=Jc;de.nodeType!==8;){if(!ie){ie=null;break e}if(de=So(de.nextSibling),de===null){ie=null;break e}}ie=de}ie!==null?(b.memoizedState={dehydrated:ie,treeContext:Eh!==null?{id:rd,overflow:Qc}:null,retryLane:536870912,hydrationErrors:null},de=Yi(18,null,null,0),de.stateNode=ie,de.return=b,b.child=de,$a=b,Cr=null,de=!0):de=!1}de||uc(b)}if(ie=b.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return P_(ie)?b.lanes=32:b.lanes=536870912,null;mc(b)}return ie=I.children,I=I.fallback,F?(fd(),F=b.mode,ie=f_({mode:"hidden",children:ie},F),I=Dl(I,F,E,null),ie.return=b,I.return=b,ie.sibling=I,b.child=ie,F=b.child,F.memoizedState=h_(E),F.childLanes=$h(g,J,E),b.memoizedState=d_,I):(Lh(b),Um(b,ie))}if(de=g.memoizedState,de!==null&&(ie=de.dehydrated,ie!==null)){if(U)b.flags&256?(Lh(b),b.flags&=-257,b=Bh(g,b,E)):b.memoizedState!==null?(fd(),b.child=g.child,b.flags|=128,b=null):(fd(),F=I.fallback,ie=b.mode,I=f_({mode:"visible",children:I.children},ie),F=Dl(F,ie,E,null),F.flags|=2,I.return=b,F.return=b,I.sibling=F,b.child=I,ci(b,g.child,null,E),I=b.child,I.memoizedState=h_(E),I.childLanes=$h(g,J,E),b.memoizedState=d_,b=F);else if(Lh(b),P_(ie)){if(J=ie.nextSibling&&ie.nextSibling.dataset,J)var ke=J.dgst;J=ke,I=Error(r(419)),I.stack="",I.digest=J,id({value:I,source:null,stack:null}),b=Bh(g,b,E)}else if(Hi||i0(g,b,E,!1),J=(E&g.childLanes)!==0,Hi||J){if(J=Qr,J!==null&&(I=E&-E,I=(I&42)!==0?1:pe(I),I=(I&(J.suspendedLanes|E))!==0?0:I,I!==0&&I!==de.retryLane))throw de.retryLane=I,lp(g,I),xs(J,g,I),GE;ie.data==="$?"||__(),b=Bh(g,b,E)}else ie.data==="$?"?(b.flags|=192,b.child=g.child,b=null):(g=de.treeContext,Cr=So(ie.nextSibling),$a=b,Sr=!0,up=null,Jc=!1,g!==null&&(Ks[Xs++]=rd,Ks[Xs++]=Qc,Ks[Xs++]=Eh,rd=g.id,Qc=g.overflow,Eh=b),b=Um(b,I.children),b.flags|=4096);return b}return F?(fd(),F=I.fallback,ie=b.mode,de=g.child,ke=de.sibling,I=Zc(de,{mode:"hidden",children:I.children}),I.subtreeFlags=de.subtreeFlags&65011712,ke!==null?F=Zc(ke,F):(F=Dl(F,ie,E,null),F.flags|=2),F.return=b,I.return=b,I.sibling=F,b.child=I,I=F,F=b.child,ie=g.child.memoizedState,ie===null?ie=h_(E):(de=ie.cachePool,de!==null?(ke=Ki._currentValue,de=de.parent!==ke?{parent:ke,pool:ke}:de):de=eP(),ie={baseLanes:ie.baseLanes|E,cachePool:de}),F.memoizedState=ie,F.childLanes=$h(g,J,E),b.memoizedState=d_,I):(Lh(b),E=g.child,g=E.sibling,E=Zc(E,{mode:"visible",children:I.children}),E.return=b,E.sibling=null,g!==null&&(J=b.deletions,J===null?(b.deletions=[g],b.flags|=16):J.push(g)),b.child=E,b.memoizedState=null,E)}function Um(g,b){return b=f_({mode:"visible",children:b},g.mode),b.return=g,g.child=b}function f_(g,b){return g=Yi(22,g,null,b),g.lanes=0,g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},g}function Bh(g,b,E){return ci(b,g.child,null,E),g=Um(b,b.pendingProps.children),g.flags|=2,b.memoizedState=null,g}function KE(g,b,E){g.lanes|=b;var I=g.alternate;I!==null&&(I.lanes|=b),wm(g.return,b,E)}function Uh(g,b,E,I,F){var U=g.memoizedState;U===null?g.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:I,tail:E,tailMode:F}:(U.isBackwards=b,U.rendering=null,U.renderingStartTime=0,U.last=I,U.tail=E,U.tailMode=F)}function XE(g,b,E){var I=b.pendingProps,F=I.revealOrder,U=I.tail;if(ui(g,b,I.children,E),I=ca.current,(I&2)!==0)I=I&1|2,b.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=b.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&KE(g,E,b);else if(g.tag===19)KE(g,E,b);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===b)break e;for(;g.sibling===null;){if(g.return===null||g.return===b)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}I&=1}switch(ee(ca,I),F){case"forwards":for(E=b.child,F=null;E!==null;)g=E.alternate,g!==null&&y0(g)===null&&(F=E),E=E.sibling;E=F,E===null?(F=b.child,b.child=null):(F=E.sibling,E.sibling=null),Uh(b,!1,F,E,U);break;case"backwards":for(E=null,F=b.child,b.child=null;F!==null;){if(g=F.alternate,g!==null&&y0(g)===null){b.child=F;break}g=F.sibling,F.sibling=E,E=F,F=g}Uh(b,!0,E,null,U);break;case"together":Uh(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function Qs(g,b,E){if(g!==null&&(b.dependencies=g.dependencies),yd|=b.lanes,(E&b.childLanes)===0)if(g!==null){if(i0(g,b,E,!1),(E&b.childLanes)===0)return null}else return null;if(g!==null&&b.child!==g.child)throw Error(r(153));if(b.child!==null){for(g=b.child,E=Zc(g,g.pendingProps),b.child=E,E.return=b;g.sibling!==null;)g=g.sibling,E=E.sibling=Zc(g,g.pendingProps),E.return=b;E.sibling=null}return b.child}function T0(g,b){return(g.lanes&b)!==0?!0:(g=g.dependencies,!!(g!==null&&xm(g)))}function mP(g,b,E){switch(b.tag){case 3:Le(b,b.stateNode.containerInfo),kh(b,Ki,g.memoizedState.cache),bm();break;case 27:case 5:be(b);break;case 4:Le(b,b.stateNode.containerInfo);break;case 10:kh(b,b.type,b.memoizedProps.value);break;case 13:var I=b.memoizedState;if(I!==null)return I.dehydrated!==null?(Lh(b),b.flags|=128,null):(E&b.child.childLanes)!==0?S0(g,b,E):(Lh(b),g=Qs(g,b,E),g!==null?g.sibling:null);Lh(b);break;case 19:var F=(g.flags&128)!==0;if(I=(E&b.childLanes)!==0,I||(i0(g,b,E,!1),I=(E&b.childLanes)!==0),F){if(I)return XE(g,b,E);b.flags|=128}if(F=b.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),ee(ca,ca.current),I)break;return null;case 22:case 23:return b.lanes=0,pP(g,b,E);case 24:kh(b,Ki,g.memoizedState.cache)}return Qs(g,b,E)}function Vm(g,b,E){if(g!==null)if(g.memoizedProps!==b.pendingProps)Hi=!0;else{if(!T0(g,E)&&(b.flags&128)===0)return Hi=!1,mP(g,b,E);Hi=(g.flags&131072)!==0}else Hi=!1,Sr&&(b.flags&1048576)!==0&&mE(b,t0,b.index);switch(b.lanes=0,b.tag){case 16:e:{g=b.pendingProps;var I=b.elementType,F=I._init;if(I=F(I._payload),b.type=I,typeof I=="function")jx(I)?(g=ou(I,g),b.tag=1,b=kp(null,b,I,g,E)):(b.tag=0,b=_0(null,b,I,g,E));else{if(I!=null){if(F=I.$$typeof,F===A){b.tag=11,b=vc(null,b,I,g,E);break e}else if(F===M){b.tag=14,b=Sa(null,b,I,g,E);break e}}throw b=Y(I)||I,Error(r(306,b,""))}}return b;case 0:return _0(g,b,b.type,b.pendingProps,E);case 1:return I=b.type,F=ou(I,b.pendingProps),kp(g,b,I,F,E);case 3:e:{if(Le(b,b.stateNode.containerInfo),g===null)throw Error(r(387));I=b.pendingProps;var U=b.memoizedState;F=U.element,u0(g,b),km(b,I,null,E);var J=b.memoizedState;if(I=J.cache,kh(b,Ki,I),I!==U.cache&&yE(b,[Ki],E,!0),Am(),I=J.element,U.isDehydrated)if(U={element:I,isDehydrated:!1,cache:J.cache},b.updateQueue.baseState=U,b.memoizedState=U,b.flags&256){b=YE(g,b,I,E);break e}else if(I!==F){F=Ys(Error(r(424)),b),id(F),b=YE(g,b,I,E);break e}else{switch(g=b.stateNode.containerInfo,g.nodeType){case 9:g=g.body;break;default:g=g.nodeName==="HTML"?g.ownerDocument.body:g}for(Cr=So(g.firstChild),$a=b,Sr=!0,up=null,Jc=!0,E=zE(b,null,I,E),b.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(bm(),I===F){b=Qs(g,b,E);break e}ui(g,b,I,E)}b=b.child}return b;case 26:return Fh(g,b),g===null?(E=dv(b.type,null,b.pendingProps,null))?b.memoizedState=E:Sr||(E=b.type,g=b.pendingProps,I=M_(Ce.current).createElement(E),I[ft]=b,I[Bt]=g,ua(I,E,g),Ai(I),b.stateNode=I):b.memoizedState=dv(b.type,g.memoizedProps,b.pendingProps,g.memoizedState),null;case 27:return be(b),g===null&&Sr&&(I=b.stateNode=G0(b.type,b.pendingProps,Ce.current),$a=b,Jc=!0,F=Cr,fu(b.type)?(AA=F,Cr=So(I.firstChild)):Cr=F),ui(g,b,b.pendingProps.children,E),Fh(g,b),g===null&&(b.flags|=4194304),b.child;case 5:return g===null&&Sr&&((F=I=Cr)&&(I=wF(I,b.type,b.pendingProps,Jc),I!==null?(b.stateNode=I,$a=b,Cr=So(I.firstChild),Jc=!1,F=!0):F=!1),F||uc(b)),be(b),F=b.type,U=b.pendingProps,J=g!==null?g.memoizedProps:null,I=U.children,Vp(F,U)?I=null:J!==null&&Vp(F,J)&&(b.flags|=32),b.memoizedState!==null&&(F=Kx(g,b,aP,null,null,E),eb._currentValue=F),Fh(g,b),ui(g,b,I,E),b.child;case 6:return g===null&&Sr&&((g=E=Cr)&&(E=EA(E,b.pendingProps,Jc),E!==null?(b.stateNode=E,$a=b,Cr=null,g=!0):g=!1),g||uc(b)),null;case 13:return S0(g,b,E);case 4:return Le(b,b.stateNode.containerInfo),I=b.pendingProps,g===null?b.child=ci(b,null,I,E):ui(g,b,I,E),b.child;case 11:return vc(g,b,b.type,b.pendingProps,E);case 7:return ui(g,b,b.pendingProps,E),b.child;case 8:return ui(g,b,b.pendingProps.children,E),b.child;case 12:return ui(g,b,b.pendingProps.children,E),b.child;case 10:return I=b.pendingProps,kh(b,b.type,I.value),ui(g,b,I.children,E),b.child;case 9:return F=b.type._context,I=b.pendingProps.children,dc(b),F=Ba(F),I=I(F),b.flags|=1,ui(g,b,I,E),b.child;case 14:return Sa(g,b,b.type,b.pendingProps,E);case 15:return qE(g,b,b.type,b.pendingProps,E);case 19:return XE(g,b,E);case 31:return I=b.pendingProps,E=b.mode,I={mode:I.mode,children:I.children},g===null?(E=f_(I,E),E.ref=b.ref,b.child=E,E.return=b,b=E):(E=Zc(g.child,I),E.ref=b.ref,b.child=E,E.return=b,b=E),b;case 22:return pP(g,b,E);case 24:return dc(b),I=Ba(Ki),g===null?(F=hp(),F===null&&(F=Qr,U=_m(),F.pooledCache=U,U.refCount++,U!==null&&(F.pooledCacheLanes|=E),F=U),b.memoizedState={parent:I,cache:F},Gx(b),kh(b,Ki,F)):((g.lanes&E)!==0&&(u0(g,b),km(b,null,null,E),Am()),F=g.memoizedState,U=b.memoizedState,F.parent!==I?(F={parent:I,cache:I},b.memoizedState=F,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=F),kh(b,Ki,I)):(I=U.cache,kh(b,Ki,I),I!==F.cache&&yE(b,[Ki],E,!0))),ui(g,b,b.pendingProps.children,E),b.child;case 29:throw b.pendingProps}throw Error(r(156,b.tag))}function su(g){g.flags|=4}function ZE(g,b){if(b.type!=="stylesheet"||(b.state.loading&4)!==0)g.flags&=-16777217;else if(g.flags|=16777216,!pu(b)){if(b=no.current,b!==null&&((lr&4194048)===lr?au!==null:(lr&62914560)!==lr&&(lr&536870912)===0||b!==au))throw fp=SE,tP;g.flags|=8192}}function E0(g,b){b!==null&&(g.flags|=4),g.flags&16384&&(b=g.tag!==22?Be():536870912,g.lanes|=b,Op|=b)}function zm(g,b){if(!Sr)switch(g.tailMode){case"hidden":b=g.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?g.tail=null:E.sibling=null;break;case"collapsed":E=g.tail;for(var I=null;E!==null;)E.alternate!==null&&(I=E),E=E.sibling;I===null?b||g.tail===null?g.tail=null:g.tail.sibling=null:I.sibling=null}}function Ci(g){var b=g.alternate!==null&&g.alternate.child===g.child,E=0,I=0;if(b)for(var F=g.child;F!==null;)E|=F.lanes|F.childLanes,I|=F.subtreeFlags&65011712,I|=F.flags&65011712,F.return=g,F=F.sibling;else for(F=g.child;F!==null;)E|=F.lanes|F.childLanes,I|=F.subtreeFlags,I|=F.flags,F.return=g,F=F.sibling;return g.subtreeFlags|=I,g.childLanes=E,b}function vP(g,b,E){var I=b.pendingProps;switch(Ah(b),b.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(b),null;case 1:return Ci(b),null;case 3:return E=b.stateNode,I=null,g!==null&&(I=g.memoizedState.cache),b.memoizedState.cache!==I&&(b.flags|=2048),od(Ki),we(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(g===null||g.child===null)&&(ym(b)?su(b):g===null||g.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,r0())),Ci(b),null;case 26:return E=b.memoizedState,g===null?(su(b),E!==null?(Ci(b),ZE(b,E)):(Ci(b),b.flags&=-16777217)):E?E!==g.memoizedState?(su(b),Ci(b),ZE(b,E)):(Ci(b),b.flags&=-16777217):(g.memoizedProps!==I&&su(b),Ci(b),b.flags&=-16777217),null;case 27:ge(b),E=Ce.current;var F=b.type;if(g!==null&&b.stateNode!=null)g.memoizedProps!==I&&su(b);else{if(!I){if(b.stateNode===null)throw Error(r(166));return Ci(b),null}g=ye.current,ym(b)?n0(b):(g=G0(F,I,E),b.stateNode=g,su(b))}return Ci(b),null;case 5:if(ge(b),E=b.type,g!==null&&b.stateNode!=null)g.memoizedProps!==I&&su(b);else{if(!I){if(b.stateNode===null)throw Error(r(166));return Ci(b),null}if(g=ye.current,ym(b))n0(b);else{switch(F=M_(Ce.current),g){case 1:g=F.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:g=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":g=F.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":g=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":g=F.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof I.is=="string"?F.createElement("select",{is:I.is}):F.createElement("select"),I.multiple?g.multiple=!0:I.size&&(g.size=I.size);break;default:g=typeof I.is=="string"?F.createElement(E,{is:I.is}):F.createElement(E)}}g[ft]=b,g[Bt]=I;e:for(F=b.child;F!==null;){if(F.tag===5||F.tag===6)g.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===b)break e;for(;F.sibling===null;){if(F.return===null||F.return===b)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}b.stateNode=g;e:switch(ua(g,E,I),E){case"button":case"input":case"select":case"textarea":g=!!I.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&su(b)}}return Ci(b),b.flags&=-16777217,null;case 6:if(g&&b.stateNode!=null)g.memoizedProps!==I&&su(b);else{if(typeof I!="string"&&b.stateNode===null)throw Error(r(166));if(g=Ce.current,ym(b)){if(g=b.stateNode,E=b.memoizedProps,I=null,F=$a,F!==null)switch(F.tag){case 27:case 5:I=F.memoizedProps}g[ft]=b,g=!!(g.nodeValue===E||I!==null&&I.suppressHydrationWarning===!0||CP(g.nodeValue,E)),g||uc(b)}else g=M_(g).createTextNode(I),g[ft]=b,b.stateNode=g}return Ci(b),null;case 13:if(I=b.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(F=ym(b),I!==null&&I.dehydrated!==null){if(g===null){if(!F)throw Error(r(318));if(F=b.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[ft]=b}else bm(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;Ci(b),F=!1}else F=r0(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=F),F=!0;if(!F)return b.flags&256?(mc(b),b):(mc(b),null)}if(mc(b),(b.flags&128)!==0)return b.lanes=E,b;if(E=I!==null,g=g!==null&&g.memoizedState!==null,E){I=b.child,F=null,I.alternate!==null&&I.alternate.memoizedState!==null&&I.alternate.memoizedState.cachePool!==null&&(F=I.alternate.memoizedState.cachePool.pool);var U=null;I.memoizedState!==null&&I.memoizedState.cachePool!==null&&(U=I.memoizedState.cachePool.pool),U!==F&&(I.flags|=2048)}return E!==g&&E&&(b.child.flags|=8192),E0(b,b.updateQueue),Ci(b),null;case 4:return we(),g===null&&nv(b.stateNode.containerInfo),Ci(b),null;case 10:return od(b.type),Ci(b),null;case 19:if(le(ca),F=b.memoizedState,F===null)return Ci(b),null;if(I=(b.flags&128)!==0,U=F.rendering,U===null)if(I)zm(F,!1);else{if($i!==0||g!==null&&(g.flags&128)!==0)for(g=b.child;g!==null;){if(U=y0(g),U!==null){for(b.flags|=128,zm(F,!1),g=U.updateQueue,b.updateQueue=g,E0(b,g),b.subtreeFlags=0,g=E,E=b.child;E!==null;)Fx(E,g),E=E.sibling;return ee(ca,ca.current&1|2),b.child}g=g.sibling}F.tail!==null&&lt()>P0&&(b.flags|=128,I=!0,zm(F,!1),b.lanes=4194304)}else{if(!I)if(g=y0(U),g!==null){if(b.flags|=128,I=!0,g=g.updateQueue,b.updateQueue=g,E0(b,g),zm(F,!0),F.tail===null&&F.tailMode==="hidden"&&!U.alternate&&!Sr)return Ci(b),null}else 2*lt()-F.renderingStartTime>P0&&E!==536870912&&(b.flags|=128,I=!0,zm(F,!1),b.lanes=4194304);F.isBackwards?(U.sibling=b.child,b.child=U):(g=F.last,g!==null?g.sibling=U:b.child=U,F.last=U)}return F.tail!==null?(b=F.tail,F.rendering=b,F.tail=b.sibling,F.renderingStartTime=lt(),b.sibling=null,g=ca.current,ee(ca,I?g&1|2:g&1),b):(Ci(b),null);case 22:case 23:return mc(b),Dh(),I=b.memoizedState!==null,g!==null?g.memoizedState!==null!==I&&(b.flags|=8192):I&&(b.flags|=8192),I?(E&536870912)!==0&&(b.flags&128)===0&&(Ci(b),b.subtreeFlags&6&&(b.flags|=8192)):Ci(b),E=b.updateQueue,E!==null&&E0(b,E.retryQueue),E=null,g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),I=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(I=b.memoizedState.cachePool.pool),I!==E&&(b.flags|=2048),g!==null&&le(sd),null;case 24:return E=null,g!==null&&(E=g.memoizedState.cache),b.memoizedState.cache!==E&&(b.flags|=2048),od(Ki),Ci(b),null;case 25:return null;case 30:return null}throw Error(r(156,b.tag))}function Hm(g,b){switch(Ah(b),b.tag){case 1:return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 3:return od(Ki),we(),g=b.flags,(g&65536)!==0&&(g&128)===0?(b.flags=g&-65537|128,b):null;case 26:case 27:case 5:return ge(b),null;case 13:if(mc(b),g=b.memoizedState,g!==null&&g.dehydrated!==null){if(b.alternate===null)throw Error(r(340));bm()}return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 19:return le(ca),null;case 4:return we(),null;case 10:return od(b.type),null;case 22:case 23:return mc(b),Dh(),g!==null&&le(sd),g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 24:return od(Ki),null;case 25:return null;default:return null}}function A0(g,b){switch(Ah(b),b.tag){case 3:od(Ki),we();break;case 26:case 27:case 5:ge(b);break;case 4:we();break;case 13:mc(b);break;case 19:le(ca);break;case 10:od(b.type);break;case 22:case 23:mc(b),Dh(),g!==null&&le(sd);break;case 24:od(Ki)}}function Gm(g,b){try{var E=b.updateQueue,I=E!==null?E.lastEffect:null;if(I!==null){var F=I.next;E=F;do{if((E.tag&g)===g){I=void 0;var U=E.create,J=E.inst;I=U(),J.destroy=I}E=E.next}while(E!==F)}}catch(ie){Hr(b,b.return,ie)}}function Vh(g,b,E){try{var I=b.updateQueue,F=I!==null?I.lastEffect:null;if(F!==null){var U=F.next;I=U;do{if((I.tag&g)===g){var J=I.inst,ie=J.destroy;if(ie!==void 0){J.destroy=void 0,F=b;var de=E,ke=ie;try{ke()}catch(Ve){Hr(F,de,Ve)}}}I=I.next}while(I!==U)}}catch(Ve){Hr(b,b.return,Ve)}}function QE(g){var b=g.updateQueue;if(b!==null){var E=g.stateNode;try{iP(b,E)}catch(I){Hr(g,g.return,I)}}}function JE(g,b,E){E.props=ou(g.type,g.memoizedProps),E.state=g.memoizedState;try{E.componentWillUnmount()}catch(I){Hr(g,b,I)}}function zh(g,b){try{var E=g.ref;if(E!==null){switch(g.tag){case 26:case 27:case 5:var I=g.stateNode;break;case 30:I=g.stateNode;break;default:I=g.stateNode}typeof E=="function"?g.refCleanup=E(I):E.current=I}}catch(F){Hr(g,b,F)}}function Ol(g,b){var E=g.ref,I=g.refCleanup;if(E!==null)if(typeof I=="function")try{I()}catch(F){Hr(g,b,F)}finally{g.refCleanup=null,g=g.alternate,g!=null&&(g.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(F){Hr(g,b,F)}else E.current=null}function Hh(g){var b=g.type,E=g.memoizedProps,I=g.stateNode;try{e:switch(b){case"button":case"input":case"select":case"textarea":E.autoFocus&&I.focus();break e;case"img":E.src?I.src=E.src:E.srcSet&&(I.srcset=E.srcSet)}}catch(F){Hr(g,g.return,F)}}function er(g,b,E){try{var I=g.stateNode;xA(I,g.type,E,b),I[Bt]=b}catch(F){Hr(g,g.return,F)}}function qm(g){return g.tag===5||g.tag===3||g.tag===26||g.tag===27&&fu(g.type)||g.tag===4}function k0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||qm(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.tag===27&&fu(g.type)||g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Di(g,b,E){var I=g.tag;if(I===5||I===6)g=g.stateNode,b?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(g,b):(b=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,b.appendChild(g),E=E._reactRootContainer,E!=null||b.onclick!==null||(b.onclick=Bp));else if(I!==4&&(I===27&&fu(g.type)&&(E=g.stateNode,b=null),g=g.child,g!==null))for(Di(g,b,E),g=g.sibling;g!==null;)Di(g,b,E),g=g.sibling}function pd(g,b,E){var I=g.tag;if(I===5||I===6)g=g.stateNode,b?E.insertBefore(g,b):E.appendChild(g);else if(I!==4&&(I===27&&fu(g.type)&&(E=g.stateNode),g=g.child,g!==null))for(pd(g,b,E),g=g.sibling;g!==null;)pd(g,b,E),g=g.sibling}function Wm(g){var b=g.stateNode,E=g.memoizedProps;try{for(var I=g.type,F=b.attributes;F.length;)b.removeAttributeNode(F[0]);ua(b,I,E),b[ft]=g,b[Bt]=E}catch(U){Hr(g,g.return,U)}}var gd=!1,Qi=!1,wi=!1,vs=typeof WeakSet=="function"?WeakSet:Set,sr=null;function Ym(g,b){if(g=g.containerInfo,I_=wc,g=nd(g),Ix(g)){if("selectionStart"in g)var E={start:g.selectionStart,end:g.selectionEnd};else e:{E=(E=g.ownerDocument)&&E.defaultView||window;var I=E.getSelection&&E.getSelection();if(I&&I.rangeCount!==0){E=I.anchorNode;var F=I.anchorOffset,U=I.focusNode;I=I.focusOffset;try{E.nodeType,U.nodeType}catch{E=null;break e}var J=0,ie=-1,de=-1,ke=0,Ve=0,We=g,De=null;t:for(;;){for(var Me;We!==E||F!==0&&We.nodeType!==3||(ie=J+F),We!==U||I!==0&&We.nodeType!==3||(de=J+I),We.nodeType===3&&(J+=We.nodeValue.length),(Me=We.firstChild)!==null;)De=We,We=Me;for(;;){if(We===g)break t;if(De===E&&++ke===F&&(ie=J),De===U&&++Ve===I&&(de=J),(Me=We.nextSibling)!==null)break;We=De,De=We.parentNode}We=Me}E=ie===-1||de===-1?null:{start:ie,end:de}}else E=null}E=E||{start:0,end:0}}else E=null;for(_A={focusedElem:g,selectionRange:E},wc=!1,sr=b;sr!==null;)if(b=sr,g=b.child,(b.subtreeFlags&1024)!==0&&g!==null)g.return=b,sr=g;else for(;sr!==null;){switch(b=sr,U=b.alternate,g=b.flags,b.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&U!==null){g=void 0,E=b,F=U.memoizedProps,U=U.memoizedState,I=E.stateNode;try{var bn=ou(E.type,F,E.elementType===E.type);g=I.getSnapshotBeforeUpdate(bn,U),I.__reactInternalSnapshotBeforeUpdate=g}catch(un){Hr(E,E.return,un)}}break;case 3:if((g&1024)!==0){if(g=b.stateNode.containerInfo,E=g.nodeType,E===9)TA(g);else if(E===1)switch(g.nodeName){case"HEAD":case"HTML":case"BODY":TA(g);break;default:g.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=b.sibling,g!==null){g.return=b.return,sr=g;break}sr=b.return}}function Cp(g,b,E){var I=E.flags;switch(E.tag){case 0:case 11:case 15:md(g,E),I&4&&Gm(5,E);break;case 1:if(md(g,E),I&4)if(g=E.stateNode,b===null)try{g.componentDidMount()}catch(J){Hr(E,E.return,J)}else{var F=ou(E.type,b.memoizedProps);b=b.memoizedState;try{g.componentDidUpdate(F,b,g.__reactInternalSnapshotBeforeUpdate)}catch(J){Hr(E,E.return,J)}}I&64&&QE(E),I&512&&zh(E,E.return);break;case 3:if(md(g,E),I&64&&(g=E.updateQueue,g!==null)){if(b=null,E.child!==null)switch(E.child.tag){case 27:case 5:b=E.child.stateNode;break;case 1:b=E.child.stateNode}try{iP(g,b)}catch(J){Hr(E,E.return,J)}}break;case 27:b===null&&I&4&&Wm(E);case 26:case 5:md(g,E),b===null&&I&4&&Hh(E),I&512&&zh(E,E.return);break;case 12:md(g,E);break;case 13:md(g,E),I&4&&tA(g,E),I&64&&(g=E.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(E=_P.bind(null,E),IP(g,E))));break;case 22:if(I=E.memoizedState!==null||gd,!I){b=b!==null&&b.memoizedState!==null||Qi,F=gd;var U=Qi;gd=I,(Qi=b)&&!U?Ho(g,E,(E.subtreeFlags&8772)!==0):md(g,E),gd=F,Qi=U}break;case 30:break;default:md(g,E)}}function Uo(g){var b=g.alternate;b!==null&&(g.alternate=null,Uo(b)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(b=g.stateNode,b!==null&&oa(b)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}var di=null,Vo=!1;function Ta(g,b,E){for(E=E.child;E!==null;)eA(g,b,E),E=E.sibling}function eA(g,b,E){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Te,E)}catch{}switch(E.tag){case 26:Qi||Ol(E,b),Ta(g,b,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:Qi||Ol(E,b);var I=di,F=Vo;fu(E.type)&&(di=E.stateNode,Vo=!1),Ta(g,b,E),q0(E.stateNode),di=I,Vo=F;break;case 5:Qi||Ol(E,b);case 6:if(I=di,F=Vo,di=null,Ta(g,b,E),di=I,Vo=F,di!==null)if(Vo)try{(di.nodeType===9?di.body:di.nodeName==="HTML"?di.ownerDocument.body:di).removeChild(E.stateNode)}catch(U){Hr(E,b,U)}else try{di.removeChild(E.stateNode)}catch(U){Hr(E,b,U)}break;case 18:di!==null&&(Vo?(g=di,cv(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,E.stateNode),ne(g)):cv(di,E.stateNode));break;case 4:I=di,F=Vo,di=E.stateNode.containerInfo,Vo=!0,Ta(g,b,E),di=I,Vo=F;break;case 0:case 11:case 14:case 15:Qi||Vh(2,E,b),Qi||Vh(4,E,b),Ta(g,b,E);break;case 1:Qi||(Ol(E,b),I=E.stateNode,typeof I.componentWillUnmount=="function"&&JE(E,b,I)),Ta(g,b,E);break;case 21:Ta(g,b,E);break;case 22:Qi=(I=Qi)||E.memoizedState!==null,Ta(g,b,E),Qi=I;break;default:Ta(g,b,E)}}function tA(g,b){if(b.memoizedState===null&&(g=b.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null))))try{ne(g)}catch(E){Hr(b,b.return,E)}}function yP(g){switch(g.tag){case 13:case 19:var b=g.stateNode;return b===null&&(b=g.stateNode=new vs),b;case 22:return g=g.stateNode,b=g._retryCache,b===null&&(b=g._retryCache=new vs),b;default:throw Error(r(435,g.tag))}}function zo(g,b){var E=yP(g);b.forEach(function(I){var F=$0.bind(null,g,I);E.has(I)||(E.add(I),I.then(F,F))})}function Fr(g,b){var E=b.deletions;if(E!==null)for(var I=0;I<E.length;I++){var F=E[I],U=g,J=b,ie=J;e:for(;ie!==null;){switch(ie.tag){case 27:if(fu(ie.type)){di=ie.stateNode,Vo=!1;break e}break;case 5:di=ie.stateNode,Vo=!1;break e;case 3:case 4:di=ie.stateNode.containerInfo,Vo=!0;break e}ie=ie.return}if(di===null)throw Error(r(160));eA(U,J,F),di=null,Vo=!1,U=F.alternate,U!==null&&(U.return=null),F.return=null}if(b.subtreeFlags&13878)for(b=b.child;b!==null;)nA(b,g),b=b.sibling}var _o=null;function nA(g,b){var E=g.alternate,I=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:Fr(b,g),ys(g),I&4&&(Vh(3,g,g.return),Gm(3,g),Vh(5,g,g.return));break;case 1:Fr(b,g),ys(g),I&512&&(Qi||E===null||Ol(E,E.return)),I&64&&gd&&(g=g.updateQueue,g!==null&&(I=g.callbacks,I!==null&&(E=g.shared.hiddenCallbacks,g.shared.hiddenCallbacks=E===null?I:E.concat(I))));break;case 26:var F=_o;if(Fr(b,g),ys(g),I&512&&(Qi||E===null||Ol(E,E.return)),I&4){var U=E!==null?E.memoizedState:null;if(I=g.memoizedState,E===null)if(I===null)if(g.stateNode===null){e:{I=g.type,E=g.memoizedProps,F=F.ownerDocument||F;t:switch(I){case"title":U=F.getElementsByTagName("title")[0],(!U||U[ls]||U[ft]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=F.createElement(I),F.head.insertBefore(U,F.querySelector("head > title"))),ua(U,I,E),U[ft]=g,Ai(U),I=U;break e;case"link":var J=DA("link","href",F).get(I+(E.href||""));if(J){for(var ie=0;ie<J.length;ie++)if(U=J[ie],U.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&U.getAttribute("rel")===(E.rel==null?null:E.rel)&&U.getAttribute("title")===(E.title==null?null:E.title)&&U.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){J.splice(ie,1);break t}}U=F.createElement(I),ua(U,I,E),F.head.appendChild(U);break;case"meta":if(J=DA("meta","content",F).get(I+(E.content||""))){for(ie=0;ie<J.length;ie++)if(U=J[ie],U.getAttribute("content")===(E.content==null?null:""+E.content)&&U.getAttribute("name")===(E.name==null?null:E.name)&&U.getAttribute("property")===(E.property==null?null:E.property)&&U.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&U.getAttribute("charset")===(E.charSet==null?null:E.charSet)){J.splice(ie,1);break t}}U=F.createElement(I),ua(U,I,E),F.head.appendChild(U);break;default:throw Error(r(468,I))}U[ft]=g,Ai(U),I=U}g.stateNode=I}else IA(F,g.type,g.stateNode);else g.stateNode=qp(F,I,g.memoizedProps);else U!==I?(U===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):U.count--,I===null?IA(F,g.type,g.stateNode):qp(F,I,g.memoizedProps)):I===null&&g.stateNode!==null&&er(g,g.memoizedProps,E.memoizedProps)}break;case 27:Fr(b,g),ys(g),I&512&&(Qi||E===null||Ol(E,E.return)),E!==null&&I&4&&er(g,g.memoizedProps,E.memoizedProps);break;case 5:if(Fr(b,g),ys(g),I&512&&(Qi||E===null||Ol(E,E.return)),g.flags&32){F=g.stateNode;try{zs(F,"")}catch(Me){Hr(g,g.return,Me)}}I&4&&g.stateNode!=null&&(F=g.memoizedProps,er(g,F,E!==null?E.memoizedProps:F)),I&1024&&(wi=!0);break;case 6:if(Fr(b,g),ys(g),I&4){if(g.stateNode===null)throw Error(r(162));I=g.memoizedProps,E=g.stateNode;try{E.nodeValue=I}catch(Me){Hr(g,g.return,Me)}}break;case 3:if(Q0=null,F=_o,_o=W0(b.containerInfo),Fr(b,g),_o=F,ys(g),I&4&&E!==null&&E.memoizedState.isDehydrated)try{ne(b.containerInfo)}catch(Me){Hr(g,g.return,Me)}wi&&(wi=!1,rA(g));break;case 4:I=_o,_o=W0(g.stateNode.containerInfo),Fr(b,g),ys(g),_o=I;break;case 12:Fr(b,g),ys(g);break;case 13:Fr(b,g),ys(g),g.child.flags&8192&&g.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(y_=lt()),I&4&&(I=g.updateQueue,I!==null&&(g.updateQueue=null,zo(g,I)));break;case 22:F=g.memoizedState!==null;var de=E!==null&&E.memoizedState!==null,ke=gd,Ve=Qi;if(gd=ke||F,Qi=Ve||de,Fr(b,g),Qi=Ve,gd=ke,ys(g),I&8192)e:for(b=g.stateNode,b._visibility=F?b._visibility&-2:b._visibility|1,F&&(E===null||de||gd||Qi||lu(g)),E=null,b=g;;){if(b.tag===5||b.tag===26){if(E===null){de=E=b;try{if(U=de.stateNode,F)J=U.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{ie=de.stateNode;var We=de.memoizedProps.style,De=We!=null&&We.hasOwnProperty("display")?We.display:null;ie.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Me){Hr(de,de.return,Me)}}}else if(b.tag===6){if(E===null){de=b;try{de.stateNode.nodeValue=F?"":de.memoizedProps}catch(Me){Hr(de,de.return,Me)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===g)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break e;for(;b.sibling===null;){if(b.return===null||b.return===g)break e;E===b&&(E=null),b=b.return}E===b&&(E=null),b.sibling.return=b.return,b=b.sibling}I&4&&(I=g.updateQueue,I!==null&&(E=I.retryQueue,E!==null&&(I.retryQueue=null,zo(g,E))));break;case 19:Fr(b,g),ys(g),I&4&&(I=g.updateQueue,I!==null&&(g.updateQueue=null,zo(g,I)));break;case 30:break;case 21:break;default:Fr(b,g),ys(g)}}function ys(g){var b=g.flags;if(b&2){try{for(var E,I=g.return;I!==null;){if(qm(I)){E=I;break}I=I.return}if(E==null)throw Error(r(160));switch(E.tag){case 27:var F=E.stateNode,U=k0(g);pd(g,U,F);break;case 5:var J=E.stateNode;E.flags&32&&(zs(J,""),E.flags&=-33);var ie=k0(g);pd(g,ie,J);break;case 3:case 4:var de=E.stateNode.containerInfo,ke=k0(g);Di(g,ke,de);break;default:throw Error(r(161))}}catch(Ve){Hr(g,g.return,Ve)}g.flags&=-3}b&4096&&(g.flags&=-4097)}function rA(g){if(g.subtreeFlags&1024)for(g=g.child;g!==null;){var b=g;rA(b),b.tag===5&&b.flags&1024&&b.stateNode.reset(),g=g.sibling}}function md(g,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Cp(g,b.alternate,b),b=b.sibling}function lu(g){for(g=g.child;g!==null;){var b=g;switch(b.tag){case 0:case 11:case 14:case 15:Vh(4,b,b.return),lu(b);break;case 1:Ol(b,b.return);var E=b.stateNode;typeof E.componentWillUnmount=="function"&&JE(b,b.return,E),lu(b);break;case 27:q0(b.stateNode);case 26:case 5:Ol(b,b.return),lu(b);break;case 22:b.memoizedState===null&&lu(b);break;case 30:lu(b);break;default:lu(b)}g=g.sibling}}function Ho(g,b,E){for(E=E&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var I=b.alternate,F=g,U=b,J=U.flags;switch(U.tag){case 0:case 11:case 15:Ho(F,U,E),Gm(4,U);break;case 1:if(Ho(F,U,E),I=U,F=I.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(ke){Hr(I,I.return,ke)}if(I=U,F=I.updateQueue,F!==null){var ie=I.stateNode;try{var de=F.shared.hiddenCallbacks;if(de!==null)for(F.shared.hiddenCallbacks=null,F=0;F<de.length;F++)TE(de[F],ie)}catch(ke){Hr(I,I.return,ke)}}E&&J&64&&QE(U),zh(U,U.return);break;case 27:Wm(U);case 26:case 5:Ho(F,U,E),E&&I===null&&J&4&&Hh(U),zh(U,U.return);break;case 12:Ho(F,U,E);break;case 13:Ho(F,U,E),E&&J&4&&tA(F,U);break;case 22:U.memoizedState===null&&Ho(F,U,E),zh(U,U.return);break;case 30:break;default:Ho(F,U,E)}b=b.sibling}}function C0(g,b){var E=null;g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),g=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(g=b.memoizedState.cachePool.pool),g!==E&&(g!=null&&g.refCount++,E!=null&&Sm(E))}function D0(g,b){g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&Sm(g))}function cu(g,b,E,I){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)iA(g,b,E,I),b=b.sibling}function iA(g,b,E,I){var F=b.flags;switch(b.tag){case 0:case 11:case 15:cu(g,b,E,I),F&2048&&Gm(9,b);break;case 1:cu(g,b,E,I);break;case 3:cu(g,b,E,I),F&2048&&(g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&Sm(g)));break;case 12:if(F&2048){cu(g,b,E,I),g=b.stateNode;try{var U=b.memoizedProps,J=U.id,ie=U.onPostCommit;typeof ie=="function"&&ie(J,b.alternate===null?"mount":"update",g.passiveEffectDuration,-0)}catch(de){Hr(b,b.return,de)}}else cu(g,b,E,I);break;case 13:cu(g,b,E,I);break;case 23:break;case 22:U=b.stateNode,J=b.alternate,b.memoizedState!==null?U._visibility&2?cu(g,b,E,I):Gh(g,b):U._visibility&2?cu(g,b,E,I):(U._visibility|=2,Dp(g,b,E,I,(b.subtreeFlags&10256)!==0)),F&2048&&C0(J,b);break;case 24:cu(g,b,E,I),F&2048&&D0(b.alternate,b);break;default:cu(g,b,E,I)}}function Dp(g,b,E,I,F){for(F=F&&(b.subtreeFlags&10256)!==0,b=b.child;b!==null;){var U=g,J=b,ie=E,de=I,ke=J.flags;switch(J.tag){case 0:case 11:case 15:Dp(U,J,ie,de,F),Gm(8,J);break;case 23:break;case 22:var Ve=J.stateNode;J.memoizedState!==null?Ve._visibility&2?Dp(U,J,ie,de,F):Gh(U,J):(Ve._visibility|=2,Dp(U,J,ie,de,F)),F&&ke&2048&&C0(J.alternate,J);break;case 24:Dp(U,J,ie,de,F),F&&ke&2048&&D0(J.alternate,J);break;default:Dp(U,J,ie,de,F)}b=b.sibling}}function Gh(g,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var E=g,I=b,F=I.flags;switch(I.tag){case 22:Gh(E,I),F&2048&&C0(I.alternate,I);break;case 24:Gh(E,I),F&2048&&D0(I.alternate,I);break;default:Gh(E,I)}b=b.sibling}}var Ip=8192;function Mp(g){if(g.subtreeFlags&Ip)for(g=g.child;g!==null;)aA(g),g=g.sibling}function aA(g){switch(g.tag){case 26:Mp(g),g.flags&Ip&&g.memoizedState!==null&&SF(_o,g.memoizedState,g.memoizedProps);break;case 5:Mp(g);break;case 3:case 4:var b=_o;_o=W0(g.stateNode.containerInfo),Mp(g),_o=b;break;case 22:g.memoizedState===null&&(b=g.alternate,b!==null&&b.memoizedState!==null?(b=Ip,Ip=16777216,Mp(g),Ip=b):Mp(g));break;default:Mp(g)}}function oA(g){var b=g.alternate;if(b!==null&&(g=b.child,g!==null)){b.child=null;do b=g.sibling,g.sibling=null,g=b;while(g!==null)}}function I0(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var E=0;E<b.length;E++){var I=b[E];sr=I,bP(I,g)}oA(g)}if(g.subtreeFlags&10256)for(g=g.child;g!==null;)p_(g),g=g.sibling}function p_(g){switch(g.tag){case 0:case 11:case 15:I0(g),g.flags&2048&&Vh(9,g,g.return);break;case 3:I0(g);break;case 12:I0(g);break;case 22:var b=g.stateNode;g.memoizedState!==null&&b._visibility&2&&(g.return===null||g.return.tag!==13)?(b._visibility&=-3,He(g)):I0(g);break;default:I0(g)}}function He(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var E=0;E<b.length;E++){var I=b[E];sr=I,bP(I,g)}oA(g)}for(g=g.child;g!==null;){switch(b=g,b.tag){case 0:case 11:case 15:Vh(8,b,b.return),He(b);break;case 22:E=b.stateNode,E._visibility&2&&(E._visibility&=-3,He(b));break;default:He(b)}g=g.sibling}}function bP(g,b){for(;sr!==null;){var E=sr;switch(E.tag){case 0:case 11:case 15:Vh(8,E,b);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var I=E.memoizedState.cachePool.pool;I!=null&&I.refCount++}break;case 24:Sm(E.memoizedState.cache)}if(I=E.child,I!==null)I.return=E,sr=I;else e:for(E=g;sr!==null;){I=sr;var F=I.sibling,U=I.return;if(Uo(I),I===E){sr=null;break e}if(F!==null){F.return=U,sr=F;break e}sr=U}}}var Ii={getCacheForType:function(g){var b=Ba(Ki),E=b.data.get(g);return E===void 0&&(E=g(),b.data.set(g,E)),E}},M0=typeof WeakMap=="function"?WeakMap:Map,dr=0,Qr=null,Qn=null,lr=0,Dr=0,bs=null,vd=!1,Pp=!1,g_=!1,uu=0,$i=0,yd=0,qh=0,m_=0,Js=0,Op=0,Km=null,Go=null,v_=!1,y_=0,P0=1/0,O0=null,bd=null,Ua=0,wd=null,Rp=null,Np=0,b_=0,w_=null,sA=null,Xm=0,x_=null;function ws(){if((dr&2)!==0&&lr!==0)return lr&-lr;if(W.T!==null){var g=dp;return g!==0?g:V0()}return Qe()}function lA(){Js===0&&(Js=(lr&536870912)===0||Sr?Xe():536870912);var g=no.current;return g!==null&&(g.flags|=32),Js}function xs(g,b,E){(g===Qr&&(Dr===2||Dr===9)||g.cancelPendingCommit!==null)&&(xi(g,0),xd(g,lr,Js,!1)),Tt(g,E),((dr&2)===0||g!==Qr)&&(g===Qr&&((dr&2)===0&&(qh|=E),$i===4&&xd(g,lr,Js,!1)),du(g))}function cA(g,b,E){if((dr&6)!==0)throw Error(r(327));var I=!E&&(b&124)===0&&(b&g.expiredLanes)===0||Ei(g,b),F=I?gF(g,b):S_(g,b,!0),U=I;do{if(F===0){Pp&&!I&&xd(g,b,0,!1);break}else{if(E=g.current.alternate,U&&!wP(E)){F=S_(g,b,!1),U=!1;continue}if(F===2){if(U=b,g.errorRecoveryDisabledLanes&U)var J=0;else J=g.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){b=J;e:{var ie=g;F=Km;var de=ie.current.memoizedState.isDehydrated;if(de&&(xi(ie,J).flags|=256),J=S_(ie,J,!1),J!==2){if(g_&&!de){ie.errorRecoveryDisabledLanes|=U,qh|=U,F=4;break e}U=Go,Go=F,U!==null&&(Go===null?Go=U:Go.push.apply(Go,U))}F=J}if(U=!1,F!==2)continue}}if(F===1){xi(g,0),xd(g,b,0,!0);break}e:{switch(I=g,U=F,U){case 0:case 1:throw Error(r(345));case 4:if((b&4194048)!==b)break;case 6:xd(I,b,Js,!vd);break e;case 2:Go=null;break;case 3:case 5:break;default:throw Error(r(329))}if((b&62914560)===b&&(F=y_+300-lt(),10<F)){if(xd(I,b,Js,!vd),zr(I,0,!0)!==0)break e;I.timeoutHandle=Hp(uA.bind(null,I,E,Go,O0,v_,b,Js,qh,Op,vd,U,2,-0,0),F);break e}uA(I,E,Go,O0,v_,b,Js,qh,Op,vd,U,0,-0,0)}}break}while(!0);du(g)}function uA(g,b,E,I,F,U,J,ie,de,ke,Ve,We,De,Me){if(g.timeoutHandle=-1,We=b.subtreeFlags,(We&8192||(We&16785408)===16785408)&&(pv={stylesheets:null,count:0,unsuspend:Pn},aA(b),We=OP(),We!==null)){g.cancelPendingCommit=We(Tr.bind(null,g,b,U,E,I,F,J,ie,de,Ve,1,De,Me)),xd(g,U,J,!ke);return}Tr(g,b,U,E,I,F,J,ie,de)}function wP(g){for(var b=g;;){var E=b.tag;if((E===0||E===11||E===15)&&b.flags&16384&&(E=b.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var I=0;I<E.length;I++){var F=E[I],U=F.getSnapshot;F=F.value;try{if(!ji(U(),F))return!1}catch{return!1}}if(E=b.child,b.subtreeFlags&16384&&E!==null)E.return=b,b=E;else{if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function xd(g,b,E,I){b&=~m_,b&=~qh,g.suspendedLanes|=b,g.pingedLanes&=~b,I&&(g.warmLanes|=b),I=g.expirationTimes;for(var F=b;0<F;){var U=31-xt(F),J=1<<U;I[U]=-1,F&=~J}E!==0&&oe(g,E,b)}function R0(){return(dr&6)===0?(U0(0),!1):!0}function Ji(){if(Qn!==null){if(Dr===0)var g=Qn.return;else g=Qn,ad=tu=null,Xx(g),Tp=null,Fm=0,g=Qn;for(;g!==null;)A0(g.alternate,g),g=g.return;Qn=null}}function xi(g,b){var E=g.timeoutHandle;E!==-1&&(g.timeoutHandle=-1,yF(E)),E=g.cancelPendingCommit,E!==null&&(g.cancelPendingCommit=null,E()),Ji(),Qr=g,Qn=E=Zc(g.current,null),lr=b,Dr=0,bs=null,vd=!1,Pp=Ei(g,b),g_=!1,Op=Js=m_=qh=yd=$i=0,Go=Km=null,v_=!1,(b&8)!==0&&(b|=b&32);var I=g.entangledLanes;if(I!==0)for(g=g.entanglements,I&=b;0<I;){var F=31-xt(I),U=1<<F;b|=g[F],I&=~U}return uu=b,sp(),E}function Ea(g,b){Bn=null,W.H=o_,b===Em||b===l0?(b=c0(),Dr=3):b===tP?(b=c0(),Dr=4):Dr=b===GE?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,bs=b,Qn===null&&($i=1,jh(g,Ys(b,g.current)))}function N0(){var g=W.H;return W.H=o_,g===null?o_:g}function L0(){var g=W.A;return W.A=Ii,g}function __(){$i=4,vd||(lr&4194048)!==lr&&no.current!==null||(Pp=!0),(yd&134217727)===0&&(qh&134217727)===0||Qr===null||xd(Qr,lr,Js,!1)}function S_(g,b,E){var I=dr;dr|=2;var F=N0(),U=L0();(Qr!==g||lr!==b)&&(O0=null,xi(g,b)),b=!1;var J=$i;e:do try{if(Dr!==0&&Qn!==null){var ie=Qn,de=bs;switch(Dr){case 8:Ji(),J=6;break e;case 3:case 2:case 9:case 6:no.current===null&&(b=!0);var ke=Dr;if(Dr=0,bs=null,yc(g,ie,de,ke),E&&Pp){J=0;break e}break;default:ke=Dr,Dr=0,bs=null,yc(g,ie,de,ke)}}Zm(),J=$i;break}catch(Ve){Ea(g,Ve)}while(!0);return b&&g.shellSuspendCounter++,ad=tu=null,dr=I,W.H=F,W.A=U,Qn===null&&(Qr=null,lr=0,sp()),J}function Zm(){for(;Qn!==null;)Sd(Qn)}function gF(g,b){var E=dr;dr|=2;var I=N0(),F=L0();Qr!==g||lr!==b?(O0=null,P0=lt()+500,xi(g,b)):Pp=Ei(g,b);e:do try{if(Dr!==0&&Qn!==null){b=Qn;var U=bs;t:switch(Dr){case 1:Dr=0,bs=null,yc(g,b,U,1);break;case 2:case 9:if(nP(U)){Dr=0,bs=null,Lp(b);break}b=function(){Dr!==2&&Dr!==9||Qr!==g||(Dr=7),du(g)},U.then(b,b);break e;case 3:Dr=7;break e;case 4:Dr=5;break e;case 7:nP(U)?(Dr=0,bs=null,Lp(b)):(Dr=0,bs=null,yc(g,b,U,7));break;case 5:var J=null;switch(Qn.tag){case 26:J=Qn.memoizedState;case 5:case 27:var ie=Qn;if(!J||pu(J)){Dr=0,bs=null;var de=ie.sibling;if(de!==null)Qn=de;else{var ke=ie.return;ke!==null?(Qn=ke,Td(ke)):Qn=null}break t}}Dr=0,bs=null,yc(g,b,U,5);break;case 6:Dr=0,bs=null,yc(g,b,U,6);break;case 8:Ji(),$i=6;break e;default:throw Error(r(462))}}_d();break}catch(Ve){Ea(g,Ve)}while(!0);return ad=tu=null,W.H=I,W.A=F,dr=E,Qn!==null?0:(Qr=null,lr=0,sp(),$i)}function _d(){for(;Qn!==null&&!rt();)Sd(Qn)}function Sd(g){var b=Vm(g.alternate,g,uu);g.memoizedProps=g.pendingProps,b===null?Td(g):Qn=b}function Lp(g){var b=g,E=b.alternate;switch(b.tag){case 15:case 0:b=gP(E,b,b.pendingProps,b.type,void 0,lr);break;case 11:b=gP(E,b,b.pendingProps,b.type.render,b.ref,lr);break;case 5:Xx(b);default:A0(E,b),b=Qn=Fx(b,uu),b=Vm(E,b,uu)}g.memoizedProps=g.pendingProps,b===null?Td(g):Qn=b}function yc(g,b,E,I){ad=tu=null,Xx(b),Tp=null,Fm=0;var F=b.return;try{if(Pt(g,F,b,E,lr)){$i=1,jh(g,Ys(E,g.current)),Qn=null;return}}catch(U){if(F!==null)throw Qn=F,U;$i=1,jh(g,Ys(E,g.current)),Qn=null;return}b.flags&32768?(Sr||I===1?g=!0:Pp||(lr&536870912)!==0?g=!1:(vd=g=!0,(I===2||I===9||I===3||I===6)&&(I=no.current,I!==null&&I.tag===13&&(I.flags|=16384))),Qm(b,g)):Td(b)}function Td(g){var b=g;do{if((b.flags&32768)!==0){Qm(b,vd);return}g=b.return;var E=vP(b.alternate,b,uu);if(E!==null){Qn=E;return}if(b=b.sibling,b!==null){Qn=b;return}Qn=b=g}while(b!==null);$i===0&&($i=5)}function Qm(g,b){do{var E=Hm(g.alternate,g);if(E!==null){E.flags&=32767,Qn=E;return}if(E=g.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!b&&(g=g.sibling,g!==null)){Qn=g;return}Qn=g=E}while(g!==null);$i=6,Qn=null}function Tr(g,b,E,I,F,U,J,ie,de){g.cancelPendingCommit=null;do F0();while(Ua!==0);if((dr&6)!==0)throw Error(r(327));if(b!==null){if(b===g.current)throw Error(r(177));if(U=b.lanes|b.childLanes,U|=Zy,nr(g,E,U,J,ie,de),g===Qr&&(Qn=Qr=null,lr=0),Rp=b,wd=g,Np=E,b_=U,w_=F,sA=I,(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?(g.callbackNode=null,g.callbackPriority=0,Ed(jn,function(){return pA(),null})):(g.callbackNode=null,g.callbackPriority=0),I=(b.flags&13878)!==0,(b.subtreeFlags&13878)!==0||I){I=W.T,W.T=null,F=X.p,X.p=2,J=dr,dr|=4;try{Ym(g,b,E)}finally{dr=J,X.p=F,W.T=I}}Ua=1,j0(),dA(),hA()}}function j0(){if(Ua===1){Ua=0;var g=wd,b=Rp,E=(b.flags&13878)!==0;if((b.subtreeFlags&13878)!==0||E){E=W.T,W.T=null;var I=X.p;X.p=2;var F=dr;dr|=4;try{nA(b,g);var U=_A,J=nd(g.containerInfo),ie=U.focusedElem,de=U.selectionRange;if(J!==ie&&ie&&ie.ownerDocument&&_h(ie.ownerDocument.documentElement,ie)){if(de!==null&&Ix(ie)){var ke=de.start,Ve=de.end;if(Ve===void 0&&(Ve=ke),"selectionStart"in ie)ie.selectionStart=ke,ie.selectionEnd=Math.min(Ve,ie.value.length);else{var We=ie.ownerDocument||document,De=We&&We.defaultView||window;if(De.getSelection){var Me=De.getSelection(),bn=ie.textContent.length,un=Math.min(de.start,bn),hi=de.end===void 0?un:Math.min(de.end,bn);!Me.extend&&un>hi&&(J=hi,hi=un,un=J);var xe=gm(ie,un),me=gm(ie,hi);if(xe&&me&&(Me.rangeCount!==1||Me.anchorNode!==xe.node||Me.anchorOffset!==xe.offset||Me.focusNode!==me.node||Me.focusOffset!==me.offset)){var Ee=We.createRange();Ee.setStart(xe.node,xe.offset),Me.removeAllRanges(),un>hi?(Me.addRange(Ee),Me.extend(me.node,me.offset)):(Ee.setEnd(me.node,me.offset),Me.addRange(Ee))}}}}for(We=[],Me=ie;Me=Me.parentNode;)Me.nodeType===1&&We.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<We.length;ie++){var ze=We[ie];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}wc=!!I_,_A=I_=null}finally{dr=F,X.p=I,W.T=E}}g.current=b,Ua=2}}function dA(){if(Ua===2){Ua=0;var g=wd,b=Rp,E=(b.flags&8772)!==0;if((b.subtreeFlags&8772)!==0||E){E=W.T,W.T=null;var I=X.p;X.p=2;var F=dr;dr|=4;try{Cp(g,b.alternate,b)}finally{dr=F,X.p=I,W.T=E}}Ua=3}}function hA(){if(Ua===4||Ua===3){Ua=0,bt();var g=wd,b=Rp,E=Np,I=sA;(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?Ua=5:(Ua=0,Rp=wd=null,fA(g,g.pendingLanes));var F=g.pendingLanes;if(F===0&&(bd=null),Ae(E),b=b.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Te,b,void 0,(b.current.flags&128)===128)}catch{}if(I!==null){b=W.T,F=X.p,X.p=2,W.T=null;try{for(var U=g.onRecoverableError,J=0;J<I.length;J++){var ie=I[J];U(ie.value,{componentStack:ie.stack})}}finally{W.T=b,X.p=F}}(Np&3)!==0&&F0(),du(g),F=g.pendingLanes,(E&4194090)!==0&&(F&42)!==0?g===x_?Xm++:(Xm=0,x_=g):Xm=0,U0(0)}}function fA(g,b){(g.pooledCacheLanes&=b)===0&&(b=g.pooledCache,b!=null&&(g.pooledCache=null,Sm(b)))}function F0(g){return j0(),dA(),hA(),pA()}function pA(){if(Ua!==5)return!1;var g=wd,b=b_;b_=0;var E=Ae(Np),I=W.T,F=X.p;try{X.p=32>E?32:E,W.T=null,E=w_,w_=null;var U=wd,J=Np;if(Ua=0,Rp=wd=null,Np=0,(dr&6)!==0)throw Error(r(331));var ie=dr;if(dr|=4,p_(U.current),iA(U,U.current,J,E),dr=ie,U0(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Te,U)}catch{}return!0}finally{X.p=F,W.T=I,fA(g,b)}}function gA(g,b,E){b=Ys(E,b),b=x0(g.stateNode,b,2),g=ld(g,b,2),g!==null&&(Tt(g,2),du(g))}function Hr(g,b,E){if(g.tag===3)gA(g,g,E);else for(;b!==null;){if(b.tag===3){gA(b,g,E);break}else if(b.tag===1){var I=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(bd===null||!bd.has(I))){g=Ys(E,g),E=HE(2),I=ld(b,E,2),I!==null&&(wr(E,I,b,g),Tt(I,2),du(I));break}}b=b.return}}function T_(g,b,E){var I=g.pingCache;if(I===null){I=g.pingCache=new M0;var F=new Set;I.set(b,F)}else F=I.get(b),F===void 0&&(F=new Set,I.set(b,F));F.has(E)||(g_=!0,F.add(E),g=xP.bind(null,g,b,E),b.then(g,g))}function xP(g,b,E){var I=g.pingCache;I!==null&&I.delete(b),g.pingedLanes|=g.suspendedLanes&E,g.warmLanes&=~E,Qr===g&&(lr&E)===E&&($i===4||$i===3&&(lr&62914560)===lr&&300>lt()-y_?(dr&2)===0&&xi(g,0):m_|=E,Op===lr&&(Op=0)),du(g)}function mA(g,b){b===0&&(b=Be()),g=lp(g,b),g!==null&&(Tt(g,b),du(g))}function _P(g){var b=g.memoizedState,E=0;b!==null&&(E=b.retryLane),mA(g,E)}function $0(g,b){var E=0;switch(g.tag){case 13:var I=g.stateNode,F=g.memoizedState;F!==null&&(E=F.retryLane);break;case 19:I=g.stateNode;break;case 22:I=g.stateNode._retryCache;break;default:throw Error(r(314))}I!==null&&I.delete(b),mA(g,E)}function Ed(g,b){return Ge(g,b)}var B0=null,Ad=null,Er=!1,E_=!1,jp=!1,Fp=0;function du(g){g!==Ad&&g.next===null&&(Ad===null?B0=Ad=g:Ad=Ad.next=g),E_=!0,Er||(Er=!0,wA())}function U0(g,b){if(!jp&&E_){jp=!0;do for(var E=!1,I=B0;I!==null;){if(g!==0){var F=I.pendingLanes;if(F===0)var U=0;else{var J=I.suspendedLanes,ie=I.pingedLanes;U=(1<<31-xt(42|g)+1)-1,U&=F&~(J&~ie),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(E=!0,bA(I,U))}else U=lr,U=zr(I,I===Qr?U:0,I.cancelPendingCommit!==null||I.timeoutHandle!==-1),(U&3)===0||Ei(I,U)||(E=!0,bA(I,U));I=I.next}while(E);jp=!1}}function A_(){vA()}function vA(){E_=Er=!1;var g=0;Fp!==0&&(sv()&&(g=Fp),Fp=0);for(var b=lt(),E=null,I=B0;I!==null;){var F=I.next,U=Gr(I,b);U===0?(I.next=null,E===null?B0=F:E.next=F,F===null&&(Ad=E)):(E=I,(g!==0||(U&3)!==0)&&(E_=!0)),I=F}U0(g)}function Gr(g,b){for(var E=g.suspendedLanes,I=g.pingedLanes,F=g.expirationTimes,U=g.pendingLanes&-62914561;0<U;){var J=31-xt(U),ie=1<<J,de=F[J];de===-1?((ie&E)===0||(ie&I)!==0)&&(F[J]=mi(ie,b)):de<=b&&(g.expiredLanes|=ie),U&=~ie}if(b=Qr,E=lr,E=zr(g,g===b?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),I=g.callbackNode,E===0||g===b&&(Dr===2||Dr===9)||g.cancelPendingCommit!==null)return I!==null&&I!==null&&je(I),g.callbackNode=null,g.callbackPriority=0;if((E&3)===0||Ei(g,E)){if(b=E&-E,b===g.callbackPriority)return b;switch(I!==null&&je(I),Ae(E)){case 2:case 8:E=En;break;case 32:E=jn;break;case 268435456:E=Jt;break;default:E=jn}return I=yA.bind(null,g),E=Ge(E,I),g.callbackPriority=b,g.callbackNode=E,b}return I!==null&&I!==null&&je(I),g.callbackPriority=2,g.callbackNode=null,2}function yA(g,b){if(Ua!==0&&Ua!==5)return g.callbackNode=null,g.callbackPriority=0,null;var E=g.callbackNode;if(F0()&&g.callbackNode!==E)return null;var I=lr;return I=zr(g,g===Qr?I:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),I===0?null:(cA(g,I,b),Gr(g,lt()),g.callbackNode!=null&&g.callbackNode===E?yA.bind(null,g):null)}function bA(g,b){if(F0())return null;cA(g,b,!0)}function wA(){bF(function(){(dr&6)!==0?Ge(Ct,A_):vA()})}function V0(){return Fp===0&&(Fp=Xe()),Fp}function Jm(g){return g==null||typeof g=="symbol"||typeof g=="boolean"?null:typeof g=="function"?g:yh(""+g)}function k_(g,b){var E=b.ownerDocument.createElement("input");return E.name=b.name,E.value=b.value,g.id&&E.setAttribute("form",g.id),b.parentNode.insertBefore(E,b),g=new FormData(g),E.parentNode.removeChild(E),g}function z0(g,b,E,I,F){if(b==="submit"&&E&&E.stateNode===F){var U=Jm((F[Bt]||null).action),J=I.submitter;J&&(b=(b=J[Bt]||null)?Jm(b.formAction):J.getAttribute("formAction"),b!==null&&(U=b,J=null));var ie=new Gc("action","action",null,I,F);g.push({event:ie,listeners:[{instance:null,listener:function(){if(I.defaultPrevented){if(Fp!==0){var de=J?k_(F,J):new FormData(F);i_(E,{pending:!0,data:de,method:F.method,action:U},null,de)}}else typeof U=="function"&&(ie.preventDefault(),de=J?k_(F,J):new FormData(F),i_(E,{pending:!0,data:de,method:F.method,action:U},U,de))},currentTarget:F}]})}}for(var ev=0;ev<Rx.length;ev++){var C_=Rx[ev],SP=C_.toLowerCase(),D_=C_[0].toUpperCase()+C_.slice(1);cc(SP,"on"+D_)}cc(dE,"onAnimationEnd"),cc(XM,"onAnimationIteration"),cc(Px,"onAnimationStart"),cc("dblclick","onDoubleClick"),cc("focusin","onFocus"),cc("focusout","onBlur"),cc(Ox,"onTransitionRun"),cc(ZM,"onTransitionStart"),cc(hE,"onTransitionCancel"),cc(fE,"onTransitionEnd"),Sl("onMouseEnter",["mouseout","mouseover"]),Sl("onMouseLeave",["mouseout","mouseover"]),Sl("onPointerEnter",["pointerout","pointerover"]),Sl("onPointerLeave",["pointerout","pointerover"]),Ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ra("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tv));function TP(g,b){b=(b&4)!==0;for(var E=0;E<g.length;E++){var I=g[E],F=I.event;I=I.listeners;e:{var U=void 0;if(b)for(var J=I.length-1;0<=J;J--){var ie=I[J],de=ie.instance,ke=ie.currentTarget;if(ie=ie.listener,de!==U&&F.isPropagationStopped())break e;U=ie,F.currentTarget=ke;try{U(F)}catch(Ve){Bm(Ve)}F.currentTarget=null,U=de}else for(J=0;J<I.length;J++){if(ie=I[J],de=ie.instance,ke=ie.currentTarget,ie=ie.listener,de!==U&&F.isPropagationStopped())break e;U=ie,F.currentTarget=ke;try{U(F)}catch(Ve){Bm(Ve)}F.currentTarget=null,U=de}}}}function Ln(g,b){var E=b[Vt];E===void 0&&(E=b[Vt]=new Set);var I=g+"__bubble";E.has(I)||(EP(b,g,2,!1),E.add(I))}function $p(g,b,E){var I=0;b&&(I|=4),EP(E,g,I,b)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function nv(g){if(!g[Wh]){g[Wh]=!0,hh.forEach(function(E){E!=="selectionchange"&&(mF.has(E)||$p(E,!1,g),$p(E,!0,g))});var b=g.nodeType===9?g:g.ownerDocument;b===null||b[Wh]||(b[Wh]=!0,$p("selectionchange",!1,b))}}function EP(g,b,E,I){switch(rb(b)){case 2:var F=tb;break;case 8:F=j_;break;default:F=OA}E=F.bind(null,b,E,g),F=void 0,!Ja||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(F=!0),I?F!==void 0?g.addEventListener(b,E,{capture:!0,passive:F}):g.addEventListener(b,E,!0):F!==void 0?g.addEventListener(b,E,{passive:F}):g.addEventListener(b,E,!1)}function rv(g,b,E,I,F){var U=I;if((b&1)===0&&(b&2)===0&&I!==null)e:for(;;){if(I===null)return;var J=I.tag;if(J===3||J===4){var ie=I.stateNode.containerInfo;if(ie===F)break;if(J===4)for(J=I.return;J!==null;){var de=J.tag;if((de===3||de===4)&&J.stateNode.containerInfo===F)return;J=J.return}for(;ie!==null;){if(J=Jl(ie),J===null)return;if(de=J.tag,de===5||de===6||de===26||de===27){I=U=J;continue e}ie=ie.parentNode}}I=I.return}xx(function(){var ke=U,Ve=Hs(E),We=[];e:{var De=pE.get(g);if(De!==void 0){var Me=Gc,bn=g;switch(g){case"keypress":if(ac(E)===0)break e;case"keydown":case"keyup":Me=ip;break;case"focusin":bn="focus",Me=um;break;case"focusout":bn="blur",Me=um;break;case"beforeblur":case"afterblur":Me=um;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Sx;break;case dE:case XM:case Px:Me=dm;break;case fE:Me=Ex;break;case"scroll":case"scrollend":Me=Hy;break;case"wheel":Me=fm;break;case"copy":case"cut":case"paste":Me=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=sc;break;case"toggle":case"beforetoggle":Me=Ax}var un=(b&4)!==0,hi=!un&&(g==="scroll"||g==="scrollend"),xe=un?De!==null?De+"Capture":null:De;un=[];for(var me=ke,Ee;me!==null;){var ze=me;if(Ee=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||Ee===null||xe===null||(ze=tp(me,xe),ze!=null&&un.push(iv(me,ze,Ee))),hi)break;me=me.return}0<un.length&&(De=new Me(De,bn,null,E,Ve),We.push({event:De,listeners:un}))}}if((b&7)===0){e:{if(De=g==="mouseover"||g==="pointerover",Me=g==="mouseout"||g==="pointerout",De&&E!==us&&(bn=E.relatedTarget||E.fromElement)&&(Jl(bn)||bn[yt]))break e;if((Me||De)&&(De=Ve.window===Ve?Ve:(De=Ve.ownerDocument)?De.defaultView||De.parentWindow:window,Me?(bn=E.relatedTarget||E.toElement,Me=ke,bn=bn?Jl(bn):null,bn!==null&&(hi=a(bn),un=bn.tag,bn!==hi||un!==5&&un!==27&&un!==6)&&(bn=null)):(Me=null,bn=ke),Me!==bn)){if(un=kl,ze="onMouseLeave",xe="onMouseEnter",me="mouse",(g==="pointerout"||g==="pointerover")&&(un=sc,ze="onPointerLeave",xe="onPointerEnter",me="pointer"),hi=Me==null?De:_l(Me),Ee=bn==null?De:_l(bn),De=new un(ze,me+"leave",Me,E,Ve),De.target=hi,De.relatedTarget=Ee,ze=null,Jl(Ve)===ke&&(un=new un(xe,me+"enter",bn,E,Ve),un.target=Ee,un.relatedTarget=hi,ze=un),hi=ze,Me&&bn)t:{for(un=Me,xe=bn,me=0,Ee=un;Ee;Ee=hu(Ee))me++;for(Ee=0,ze=xe;ze;ze=hu(ze))Ee++;for(;0<me-Ee;)un=hu(un),me--;for(;0<Ee-me;)xe=hu(xe),Ee--;for(;me--;){if(un===xe||xe!==null&&un===xe.alternate)break t;un=hu(un),xe=hu(xe)}un=null}else un=null;Me!==null&&av(We,De,Me,un,!1),bn!==null&&hi!==null&&av(We,hi,bn,un,!0)}}e:{if(De=ke?_l(ke):window,Me=De.nodeName&&De.nodeName.toLowerCase(),Me==="select"||Me==="input"&&De.type==="file")var Nt=Xc;else if(Li(De))if(bo)Nt=lE;else{Nt=oE;var ar=Dx}else Me=De.nodeName,!Me||Me.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?ke&&vh(ke.elementType)&&(Nt=Xc):Nt=sE;if(Nt&&(Nt=Nt(g,ke))){qs(We,Nt,E,Ve);break e}ar&&ar(g,De,ke),g==="focusout"&&ke&&De.type==="number"&&ke.memoizedProps.value!=null&&Ju(De,"number",De.value)}switch(ar=ke?_l(ke):window,g){case"focusin":(Li(ar)||ar.contentEditable==="true")&&(op=ar,uE=ke,Sh=null);break;case"focusout":Sh=uE=op=null;break;case"mousedown":Xy=!0;break;case"contextmenu":case"mouseup":case"dragend":Xy=!1,Mx(We,E,Ve);break;case"selectionchange":if(KM)break;case"keydown":case"keyup":Mx(We,E,Ve)}var Wt;if(Kc)e:{switch(g){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else Zn?Oe(g,E)&&(pn="onCompositionEnd"):g==="keydown"&&E.keyCode===229&&(pn="onCompositionStart");pn&&(Q&&E.locale!=="ko"&&(Zn||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&Zn&&(Wt=np()):(Al=Ve,rc="value"in Al?Al.value:Al.textContent,Zn=!0)),ar=H0(ke,pn),0<ar.length&&(pn=new xh(pn,g,null,E,Ve),We.push({event:pn,listeners:ar}),Wt?pn.data=Wt:(Wt=ut(E),Wt!==null&&(pn.data=Wt)))),(Wt=q?_a(g,E):$n(g,E))&&(pn=H0(ke,"onBeforeInput"),0<pn.length&&(ar=new xh("onBeforeInput","beforeinput",null,E,Ve),We.push({event:ar,listeners:pn}),ar.data=Wt)),z0(We,g,ke,E,Ve)}TP(We,b)})}function iv(g,b,E){return{instance:g,listener:b,currentTarget:E}}function H0(g,b){for(var E=b+"Capture",I=[];g!==null;){var F=g,U=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||U===null||(F=tp(g,E),F!=null&&I.unshift(iv(g,F,U)),F=tp(g,b),F!=null&&I.push(iv(g,F,U))),g.tag===3)return I;g=g.return}return[]}function hu(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5&&g.tag!==27);return g||null}function av(g,b,E,I,F){for(var U=b._reactName,J=[];E!==null&&E!==I;){var ie=E,de=ie.alternate,ke=ie.stateNode;if(ie=ie.tag,de!==null&&de===I)break;ie!==5&&ie!==26&&ie!==27||ke===null||(de=ke,F?(ke=tp(E,U),ke!=null&&J.unshift(iv(E,ke,de))):F||(ke=tp(E,U),ke!=null&&J.push(iv(E,ke,de)))),E=E.return}J.length!==0&&g.push({event:b,listeners:J})}var vF=/\r\n?/g,AP=/\u0000|\uFFFD/g;function kP(g){return(typeof g=="string"?g:""+g).replace(vF,`
`).replace(AP,"")}function CP(g,b){return b=kP(b),kP(g)===b}function Bp(){}function xr(g,b,E,I,F,U){switch(E){case"children":typeof I=="string"?b==="body"||b==="textarea"&&I===""||zs(g,I):(typeof I=="number"||typeof I=="bigint")&&b!=="body"&&zs(g,""+I);break;case"className":ec(g,"class",I);break;case"tabIndex":ec(g,"tabindex",I);break;case"dir":case"role":case"viewBox":case"width":case"height":ec(g,E,I);break;case"style":om(g,I,U);break;case"data":if(b!=="object"){ec(g,"data",I);break}case"src":case"href":if(I===""&&(b!=="a"||E!=="href")){g.removeAttribute(E);break}if(I==null||typeof I=="function"||typeof I=="symbol"||typeof I=="boolean"){g.removeAttribute(E);break}I=yh(""+I),g.setAttribute(E,I);break;case"action":case"formAction":if(typeof I=="function"){g.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(E==="formAction"?(b!=="input"&&xr(g,b,"name",F.name,F,null),xr(g,b,"formEncType",F.formEncType,F,null),xr(g,b,"formMethod",F.formMethod,F,null),xr(g,b,"formTarget",F.formTarget,F,null)):(xr(g,b,"encType",F.encType,F,null),xr(g,b,"method",F.method,F,null),xr(g,b,"target",F.target,F,null)));if(I==null||typeof I=="symbol"||typeof I=="boolean"){g.removeAttribute(E);break}I=yh(""+I),g.setAttribute(E,I);break;case"onClick":I!=null&&(g.onclick=Bp);break;case"onScroll":I!=null&&Ln("scroll",g);break;case"onScrollEnd":I!=null&&Ln("scrollend",g);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(E=I.__html,E!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=E}}break;case"multiple":g.multiple=I&&typeof I!="function"&&typeof I!="symbol";break;case"muted":g.muted=I&&typeof I!="function"&&typeof I!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(I==null||typeof I=="function"||typeof I=="boolean"||typeof I=="symbol"){g.removeAttribute("xlink:href");break}E=yh(""+I),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":I!=null&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(E,""+I):g.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":I&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(E,""):g.removeAttribute(E);break;case"capture":case"download":I===!0?g.setAttribute(E,""):I!==!1&&I!=null&&typeof I!="function"&&typeof I!="symbol"?g.setAttribute(E,I):g.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":I!=null&&typeof I!="function"&&typeof I!="symbol"&&!isNaN(I)&&1<=I?g.setAttribute(E,I):g.removeAttribute(E);break;case"rowSpan":case"start":I==null||typeof I=="function"||typeof I=="symbol"||isNaN(I)?g.removeAttribute(E):g.setAttribute(E,I);break;case"popover":Ln("beforetoggle",g),Ln("toggle",g),ph(g,"popover",I);break;case"xlinkActuate":Xn(g,"http://www.w3.org/1999/xlink","xlink:actuate",I);break;case"xlinkArcrole":Xn(g,"http://www.w3.org/1999/xlink","xlink:arcrole",I);break;case"xlinkRole":Xn(g,"http://www.w3.org/1999/xlink","xlink:role",I);break;case"xlinkShow":Xn(g,"http://www.w3.org/1999/xlink","xlink:show",I);break;case"xlinkTitle":Xn(g,"http://www.w3.org/1999/xlink","xlink:title",I);break;case"xlinkType":Xn(g,"http://www.w3.org/1999/xlink","xlink:type",I);break;case"xmlBase":Xn(g,"http://www.w3.org/XML/1998/namespace","xml:base",I);break;case"xmlLang":Xn(g,"http://www.w3.org/XML/1998/namespace","xml:lang",I);break;case"xmlSpace":Xn(g,"http://www.w3.org/XML/1998/namespace","xml:space",I);break;case"is":ph(g,"is",I);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=yx.get(E)||E,ph(g,E,I))}}function Up(g,b,E,I,F,U){switch(E){case"style":om(g,I,U);break;case"dangerouslySetInnerHTML":if(I!=null){if(typeof I!="object"||!("__html"in I))throw Error(r(61));if(E=I.__html,E!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=E}}break;case"children":typeof I=="string"?zs(g,I):(typeof I=="number"||typeof I=="bigint")&&zs(g,""+I);break;case"onScroll":I!=null&&Ln("scroll",g);break;case"onScrollEnd":I!=null&&Ln("scrollend",g);break;case"onClick":I!=null&&(g.onclick=Bp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(F=E.endsWith("Capture"),b=E.slice(2,F?E.length-7:void 0),U=g[Bt]||null,U=U!=null?U[E]:null,typeof U=="function"&&g.removeEventListener(b,U,F),typeof I=="function")){typeof U!="function"&&U!==null&&(E in g?g[E]=null:g.hasAttribute(E)&&g.removeAttribute(E)),g.addEventListener(b,I,F);break e}E in g?g[E]=I:I===!0?g.setAttribute(E,""):ph(g,E,I)}}}function ua(g,b,E){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ln("error",g),Ln("load",g);var I=!1,F=!1,U;for(U in E)if(E.hasOwnProperty(U)){var J=E[U];if(J!=null)switch(U){case"src":I=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:xr(g,b,U,J,E,null)}}F&&xr(g,b,"srcSet",E.srcSet,E,null),I&&xr(g,b,"src",E.src,E,null);return;case"input":Ln("invalid",g);var ie=U=J=F=null,de=null,ke=null;for(I in E)if(E.hasOwnProperty(I)){var Ve=E[I];if(Ve!=null)switch(I){case"name":F=Ve;break;case"type":J=Ve;break;case"checked":de=Ve;break;case"defaultChecked":ke=Ve;break;case"value":U=Ve;break;case"defaultValue":ie=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,b));break;default:xr(g,b,I,Ve,E,null)}}mh(g,U,ie,de,ke,J,F,!1),gh(g);return;case"select":Ln("invalid",g),I=J=U=null;for(F in E)if(E.hasOwnProperty(F)&&(ie=E[F],ie!=null))switch(F){case"value":U=ie;break;case"defaultValue":J=ie;break;case"multiple":I=ie;default:xr(g,b,F,ie,E,null)}b=U,E=J,g.multiple=!!I,b!=null?$o(g,!!I,b,!1):E!=null&&$o(g,!!I,E,!0);return;case"textarea":Ln("invalid",g),U=F=I=null;for(J in E)if(E.hasOwnProperty(J)&&(ie=E[J],ie!=null))switch(J){case"value":I=ie;break;case"defaultValue":F=ie;break;case"children":U=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(91));break;default:xr(g,b,J,ie,E,null)}ep(g,I,F,U),gh(g);return;case"option":for(de in E)if(E.hasOwnProperty(de)&&(I=E[de],I!=null))switch(de){case"selected":g.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:xr(g,b,de,I,E,null)}return;case"dialog":Ln("beforetoggle",g),Ln("toggle",g),Ln("cancel",g),Ln("close",g);break;case"iframe":case"object":Ln("load",g);break;case"video":case"audio":for(I=0;I<tv.length;I++)Ln(tv[I],g);break;case"image":Ln("error",g),Ln("load",g);break;case"details":Ln("toggle",g);break;case"embed":case"source":case"link":Ln("error",g),Ln("load",g);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in E)if(E.hasOwnProperty(ke)&&(I=E[ke],I!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:xr(g,b,ke,I,E,null)}return;default:if(vh(b)){for(Ve in E)E.hasOwnProperty(Ve)&&(I=E[Ve],I!==void 0&&Up(g,b,Ve,I,E,void 0));return}}for(ie in E)E.hasOwnProperty(ie)&&(I=E[ie],I!=null&&xr(g,b,ie,I,E,null))}function xA(g,b,E,I){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,U=null,J=null,ie=null,de=null,ke=null,Ve=null;for(Me in E){var We=E[Me];if(E.hasOwnProperty(Me)&&We!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":de=We;default:I.hasOwnProperty(Me)||xr(g,b,Me,null,I,We)}}for(var De in I){var Me=I[De];if(We=E[De],I.hasOwnProperty(De)&&(Me!=null||We!=null))switch(De){case"type":U=Me;break;case"name":F=Me;break;case"checked":ke=Me;break;case"defaultChecked":Ve=Me;break;case"value":J=Me;break;case"defaultValue":ie=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,b));break;default:Me!==We&&xr(g,b,De,Me,I,We)}}La(g,J,ie,de,ke,Ve,U,F);return;case"select":Me=J=ie=De=null;for(U in E)if(de=E[U],E.hasOwnProperty(U)&&de!=null)switch(U){case"value":break;case"multiple":Me=de;default:I.hasOwnProperty(U)||xr(g,b,U,null,I,de)}for(F in I)if(U=I[F],de=E[F],I.hasOwnProperty(F)&&(U!=null||de!=null))switch(F){case"value":De=U;break;case"defaultValue":ie=U;break;case"multiple":J=U;default:U!==de&&xr(g,b,F,U,I,de)}b=ie,E=J,I=Me,De!=null?$o(g,!!E,De,!1):!!I!=!!E&&(b!=null?$o(g,!!E,b,!0):$o(g,!!E,E?[]:"",!1));return;case"textarea":Me=De=null;for(ie in E)if(F=E[ie],E.hasOwnProperty(ie)&&F!=null&&!I.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:xr(g,b,ie,null,I,F)}for(J in I)if(F=I[J],U=E[J],I.hasOwnProperty(J)&&(F!=null||U!=null))switch(J){case"value":De=F;break;case"defaultValue":Me=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:F!==U&&xr(g,b,J,F,I,U)}Lr(g,De,Me);return;case"option":for(var bn in E)if(De=E[bn],E.hasOwnProperty(bn)&&De!=null&&!I.hasOwnProperty(bn))switch(bn){case"selected":g.selected=!1;break;default:xr(g,b,bn,null,I,De)}for(de in I)if(De=I[de],Me=E[de],I.hasOwnProperty(de)&&De!==Me&&(De!=null||Me!=null))switch(de){case"selected":g.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:xr(g,b,de,De,I,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var un in E)De=E[un],E.hasOwnProperty(un)&&De!=null&&!I.hasOwnProperty(un)&&xr(g,b,un,null,I,De);for(ke in I)if(De=I[ke],Me=E[ke],I.hasOwnProperty(ke)&&De!==Me&&(De!=null||Me!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,b));break;default:xr(g,b,ke,De,I,Me)}return;default:if(vh(b)){for(var hi in E)De=E[hi],E.hasOwnProperty(hi)&&De!==void 0&&!I.hasOwnProperty(hi)&&Up(g,b,hi,void 0,I,De);for(Ve in I)De=I[Ve],Me=E[Ve],!I.hasOwnProperty(Ve)||De===Me||De===void 0&&Me===void 0||Up(g,b,Ve,De,I,Me);return}}for(var xe in E)De=E[xe],E.hasOwnProperty(xe)&&De!=null&&!I.hasOwnProperty(xe)&&xr(g,b,xe,null,I,De);for(We in I)De=I[We],Me=E[We],!I.hasOwnProperty(We)||De===Me||De==null&&Me==null||xr(g,b,We,De,I,Me)}var I_=null,_A=null;function M_(g){return g.nodeType===9?g:g.ownerDocument}function ov(g){switch(g){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DP(g,b){if(g===0)switch(b){case"svg":return 1;case"math":return 2;default:return 0}return g===1&&b==="foreignObject"?0:g}function Vp(g,b){return g==="textarea"||g==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.children=="bigint"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var zp=null;function sv(){var g=window.event;return g&&g.type==="popstate"?g===zp?!1:(zp=g,!0):(zp=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,yF=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,bF=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(g){return lv.resolve(null).then(g).catch(SA)}:Hp;function SA(g){setTimeout(function(){throw g})}function fu(g){return g==="head"}function cv(g,b){var E=b,I=0,F=0;do{var U=E.nextSibling;if(g.removeChild(E),U&&U.nodeType===8)if(E=U.data,E==="/$"){if(0<I&&8>I){E=I;var J=g.ownerDocument;if(E&1&&q0(J.documentElement),E&2&&q0(J.body),E&4)for(E=J.head,q0(E),J=E.firstChild;J;){var ie=J.nextSibling,de=J.nodeName;J[ls]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&J.rel.toLowerCase()==="stylesheet"||E.removeChild(J),J=ie}}if(F===0){g.removeChild(U),ne(b);return}F--}else E==="$"||E==="$?"||E==="$!"?F++:I=E.charCodeAt(0)-48;else I=0;E=U}while(E);ne(b)}function TA(g){var b=g.firstChild;for(b&&b.nodeType===10&&(b=b.nextSibling);b;){var E=b;switch(b=b.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":TA(E),oa(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}g.removeChild(E)}}function wF(g,b,E,I){for(;g.nodeType===1;){var F=E;if(g.nodeName.toLowerCase()!==b.toLowerCase()){if(!I&&(g.nodeName!=="INPUT"||g.type!=="hidden"))break}else if(I){if(!g[ls])switch(b){case"meta":if(!g.hasAttribute("itemprop"))break;return g;case"link":if(U=g.getAttribute("rel"),U==="stylesheet"&&g.hasAttribute("data-precedence"))break;if(U!==F.rel||g.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||g.getAttribute("title")!==(F.title==null?null:F.title))break;return g;case"style":if(g.hasAttribute("data-precedence"))break;return g;case"script":if(U=g.getAttribute("src"),(U!==(F.src==null?null:F.src)||g.getAttribute("type")!==(F.type==null?null:F.type)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&U&&g.hasAttribute("async")&&!g.hasAttribute("itemprop"))break;return g;default:return g}}else if(b==="input"&&g.type==="hidden"){var U=F.name==null?null:""+F.name;if(F.type==="hidden"&&g.getAttribute("name")===U)return g}else return g;if(g=So(g.nextSibling),g===null)break}return null}function EA(g,b,E){if(b==="")return null;for(;g.nodeType!==3;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!E||(g=So(g.nextSibling),g===null))return null;return g}function P_(g){return g.data==="$!"||g.data==="$?"&&g.ownerDocument.readyState==="complete"}function IP(g,b){var E=g.ownerDocument;if(g.data!=="$?"||E.readyState==="complete")b();else{var I=function(){b(),E.removeEventListener("DOMContentLoaded",I)};E.addEventListener("DOMContentLoaded",I),g._reactRetry=I}}function So(g){for(;g!=null;g=g.nextSibling){var b=g.nodeType;if(b===1||b===3)break;if(b===8){if(b=g.data,b==="$"||b==="$!"||b==="$?"||b==="F!"||b==="F")break;if(b==="/$")return null}}return g}var AA=null;function MP(g){g=g.previousSibling;for(var b=0;g;){if(g.nodeType===8){var E=g.data;if(E==="$"||E==="$!"||E==="$?"){if(b===0)return g;b--}else E==="/$"&&b++}g=g.previousSibling}return null}function G0(g,b,E){switch(b=M_(E),g){case"html":if(g=b.documentElement,!g)throw Error(r(452));return g;case"head":if(g=b.head,!g)throw Error(r(453));return g;case"body":if(g=b.body,!g)throw Error(r(454));return g;default:throw Error(r(451))}}function q0(g){for(var b=g.attributes;b.length;)g.removeAttributeNode(b[0]);oa(g)}var Rl=new Map,Yh=new Set;function W0(g){return typeof g.getRootNode=="function"?g.getRootNode():g.nodeType===9?g:g.ownerDocument}var bc=X.d;X.d={f:xF,r:kA,D:_F,C:R_,L:Y0,m:PP,X:X0,S:K0,M:Z0};function xF(){var g=bc.f(),b=R0();return g||b}function kA(g){var b=sa(g);b!==null&&b.tag===5&&b.type==="form"?Sp(b):bc.r(g)}var uv=typeof document>"u"?null:document;function O_(g,b,E){var I=uv;if(I&&typeof b=="string"&&b){var F=qi(b);F='link[rel="'+g+'"][href="'+F+'"]',typeof E=="string"&&(F+='[crossorigin="'+E+'"]'),Yh.has(F)||(Yh.add(F),g={rel:g,crossOrigin:E,href:b},I.querySelector(F)===null&&(b=I.createElement("link"),ua(b,"link",g),Ai(b),I.head.appendChild(b)))}}function _F(g){bc.D(g),O_("dns-prefetch",g,null)}function R_(g,b){bc.C(g,b),O_("preconnect",g,b)}function Y0(g,b,E){bc.L(g,b,E);var I=uv;if(I&&g&&b){var F='link[rel="preload"][as="'+qi(b)+'"]';b==="image"&&E&&E.imageSrcSet?(F+='[imagesrcset="'+qi(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(F+='[imagesizes="'+qi(E.imageSizes)+'"]')):F+='[href="'+qi(g)+'"]';var U=F;switch(b){case"style":U=qo(g);break;case"script":U=Gp(g)}Rl.has(U)||(g=u({rel:"preload",href:b==="image"&&E&&E.imageSrcSet?void 0:g,as:b},E),Rl.set(U,g),I.querySelector(F)!==null||b==="style"&&I.querySelector(hv(U))||b==="script"&&I.querySelector(An(U))||(b=I.createElement("link"),ua(b,"link",g),Ai(b),I.head.appendChild(b)))}}function PP(g,b){bc.m(g,b);var E=uv;if(E&&g){var I=b&&typeof b.as=="string"?b.as:"script",F='link[rel="modulepreload"][as="'+qi(I)+'"][href="'+qi(g)+'"]',U=F;switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Gp(g)}if(!Rl.has(U)&&(g=u({rel:"modulepreload",href:g},b),Rl.set(U,g),E.querySelector(F)===null)){switch(I){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(An(U)))return}I=E.createElement("link"),ua(I,"link",g),Ai(I),E.head.appendChild(I)}}}function K0(g,b,E){bc.S(g,b,E);var I=uv;if(I&&g){var F=Qa(I).hoistableStyles,U=qo(g);b=b||"default";var J=F.get(U);if(!J){var ie={loading:0,preload:null};if(J=I.querySelector(hv(U)))ie.loading=5;else{g=u({rel:"stylesheet",href:g,"data-precedence":b},E),(E=Rl.get(U))&&el(g,E);var de=J=I.createElement("link");Ai(de),ua(de,"link",g),de._p=new Promise(function(ke,Ve){de.onload=ke,de.onerror=Ve}),de.addEventListener("load",function(){ie.loading|=1}),de.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Un(J,b,I)}J={type:"stylesheet",instance:J,count:1,state:ie},F.set(U,J)}}}function X0(g,b){bc.X(g,b);var E=uv;if(E&&g){var I=Qa(E).hoistableScripts,F=Gp(g),U=I.get(F);U||(U=E.querySelector(An(F)),U||(g=u({src:g,async:!0},b),(b=Rl.get(F))&&rn(g,b),U=E.createElement("script"),Ai(U),ua(U,"link",g),E.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},I.set(F,U))}}function Z0(g,b){bc.M(g,b);var E=uv;if(E&&g){var I=Qa(E).hoistableScripts,F=Gp(g),U=I.get(F);U||(U=E.querySelector(An(F)),U||(g=u({src:g,async:!0,type:"module"},b),(b=Rl.get(F))&&rn(g,b),U=E.createElement("script"),Ai(U),ua(U,"link",g),E.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},I.set(F,U))}}function dv(g,b,E,I){var F=(F=Ce.current)?W0(F):null;if(!F)throw Error(r(446));switch(g){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(b=qo(E.href),E=Qa(F).hoistableStyles,I=E.get(b),I||(I={type:"style",instance:null,count:0,state:null},E.set(b,I)),I):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){g=qo(E.href);var U=Qa(F).hoistableStyles,J=U.get(g);if(J||(F=F.ownerDocument||F,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(g,J),(U=F.querySelector(hv(g)))&&!U._p&&(J.instance=U,J.state.loading=5),Rl.has(g)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},Rl.set(g,E),U||CA(F,g,E,J.state))),b&&I===null)throw Error(r(528,""));return J}if(b&&I!==null)throw Error(r(529,""));return null;case"script":return b=E.async,E=E.src,typeof E=="string"&&b&&typeof b!="function"&&typeof b!="symbol"?(b=Gp(E),E=Qa(F).hoistableScripts,I=E.get(b),I||(I={type:"script",instance:null,count:0,state:null},E.set(b,I)),I):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,g))}}function qo(g){return'href="'+qi(g)+'"'}function hv(g){return'link[rel="stylesheet"]['+g+"]"}function fv(g){return u({},g,{"data-precedence":g.precedence,precedence:null})}function CA(g,b,E,I){g.querySelector('link[rel="preload"][as="style"]['+b+"]")?I.loading=1:(b=g.createElement("link"),I.preload=b,b.addEventListener("load",function(){return I.loading|=1}),b.addEventListener("error",function(){return I.loading|=2}),ua(b,"link",E),Ai(b),g.head.appendChild(b))}function Gp(g){return'[src="'+qi(g)+'"]'}function An(g){return"script[async]"+g}function qp(g,b,E){if(b.count++,b.instance===null)switch(b.type){case"style":var I=g.querySelector('style[data-href~="'+qi(E.href)+'"]');if(I)return b.instance=I,Ai(I),I;var F=u({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return I=(g.ownerDocument||g).createElement("style"),Ai(I),ua(I,"style",F),Un(I,E.precedence,g),b.instance=I;case"stylesheet":F=qo(E.href);var U=g.querySelector(hv(F));if(U)return b.state.loading|=4,b.instance=U,Ai(U),U;I=fv(E),(F=Rl.get(F))&&el(I,F),U=(g.ownerDocument||g).createElement("link"),Ai(U);var J=U;return J._p=new Promise(function(ie,de){J.onload=ie,J.onerror=de}),ua(U,"link",I),b.state.loading|=4,Un(U,E.precedence,g),b.instance=U;case"script":return U=Gp(E.src),(F=g.querySelector(An(U)))?(b.instance=F,Ai(F),F):(I=E,(F=Rl.get(U))&&(I=u({},E),rn(I,F)),g=g.ownerDocument||g,F=g.createElement("script"),Ai(F),ua(F,"link",I),g.head.appendChild(F),b.instance=F);case"void":return null;default:throw Error(r(443,b.type))}else b.type==="stylesheet"&&(b.state.loading&4)===0&&(I=b.instance,b.state.loading|=4,Un(I,E.precedence,g));return b.instance}function Un(g,b,E){for(var I=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=I.length?I[I.length-1]:null,U=F,J=0;J<I.length;J++){var ie=I[J];if(ie.dataset.precedence===b)U=ie;else if(U!==F)break}U?U.parentNode.insertBefore(g,U.nextSibling):(b=E.nodeType===9?E.head:E,b.insertBefore(g,b.firstChild))}function el(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.title==null&&(g.title=b.title)}function rn(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.integrity==null&&(g.integrity=b.integrity)}var Q0=null;function DA(g,b,E){if(Q0===null){var I=new Map,F=Q0=new Map;F.set(E,I)}else F=Q0,I=F.get(E),I||(I=new Map,F.set(E,I));if(I.has(g))return I;for(I.set(g,null),E=E.getElementsByTagName(g),F=0;F<E.length;F++){var U=E[F];if(!(U[ls]||U[ft]||g==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var J=U.getAttribute(b)||"";J=g+J;var ie=I.get(J);ie?ie.push(U):I.set(J,[U])}}return I}function IA(g,b,E){g=g.ownerDocument||g,g.head.insertBefore(E,b==="title"?g.querySelector("head > title"):null)}function N_(g,b,E){if(E===1||b.itemProp!=null)return!1;switch(g){case"meta":case"title":return!0;case"style":if(typeof b.precedence!="string"||typeof b.href!="string"||b.href==="")break;return!0;case"link":if(typeof b.rel!="string"||typeof b.href!="string"||b.href===""||b.onLoad||b.onError)break;switch(b.rel){case"stylesheet":return g=b.disabled,typeof b.precedence=="string"&&g==null;default:return!0}case"script":if(b.async&&typeof b.async!="function"&&typeof b.async!="symbol"&&!b.onLoad&&!b.onError&&b.src&&typeof b.src=="string")return!0}return!1}function pu(g){return!(g.type==="stylesheet"&&(g.state.loading&3)===0)}var pv=null;function Pn(){}function SF(g,b,E){if(pv===null)throw Error(r(475));var I=pv;if(b.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var F=qo(E.href),U=g.querySelector(hv(F));if(U){g=U._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(I.count++,I=J0.bind(I),g.then(I,I)),b.state.loading|=4,b.instance=U,Ai(U);return}U=g.ownerDocument||g,E=fv(E),(F=Rl.get(F))&&el(E,F),U=U.createElement("link"),Ai(U);var J=U;J._p=new Promise(function(ie,de){J.onload=ie,J.onerror=de}),ua(U,"link",E),b.instance=U}I.stylesheets===null&&(I.stylesheets=new Map),I.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(I.count++,b=J0.bind(I),g.addEventListener("load",b),g.addEventListener("error",b))}}function OP(){if(pv===null)throw Error(r(475));var g=pv;return g.stylesheets&&g.count===0&&Ye(g,g.stylesheets),0<g.count?function(b){var E=setTimeout(function(){if(g.stylesheets&&Ye(g,g.stylesheets),g.unsuspend){var I=g.unsuspend;g.unsuspend=null,I()}},6e4);return g.unsuspend=b,function(){g.unsuspend=null,clearTimeout(E)}}:null}function J0(){if(this.count--,this.count===0){if(this.stylesheets)Ye(this,this.stylesheets);else if(this.unsuspend){var g=this.unsuspend;this.unsuspend=null,g()}}}var L_=null;function Ye(g,b){g.stylesheets=null,g.unsuspend!==null&&(g.count++,L_=new Map,b.forEach(cr,g),L_=null,J0.call(g))}function cr(g,b){if(!(b.state.loading&4)){var E=L_.get(g);if(E)var I=E.get(null);else{E=new Map,L_.set(g,E);for(var F=g.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<F.length;U++){var J=F[U];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(E.set(J.dataset.precedence,J),I=J)}I&&E.set(null,I)}F=b.instance,J=F.getAttribute("data-precedence"),U=E.get(J)||I,U===I&&E.set(null,F),E.set(J,F),this.count++,I=J0.bind(this),F.addEventListener("load",I),F.addEventListener("error",I),U?U.parentNode.insertBefore(F,U.nextSibling):(g=g.nodeType===9?g.head:g,g.insertBefore(F,g.firstChild)),b.state.loading|=4}}var eb={$$typeof:T,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function TF(g,b,E,I,F,U,J,ie){this.tag=1,this.containerInfo=g,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=I,this.onUncaughtError=F,this.onCaughtError=U,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function RP(g,b,E,I,F,U,J,ie,de,ke,Ve,We){return g=new TF(g,b,E,J,ie,de,ke,We),b=1,U===!0&&(b|=24),U=Yi(3,null,null,b),g.current=U,U.stateNode=g,b=_m(),b.refCount++,g.pooledCache=b,b.refCount++,U.memoizedState={element:I,isDehydrated:E,cache:b},Gx(U),g}function NP(g){return g?(g=Cl,g):Cl}function MA(g,b,E,I,F,U){F=NP(F),I.context===null?I.context=F:I.pendingContext=F,I=hc(b),I.payload={element:E},U=U===void 0?null:U,U!==null&&(I.callback=U),E=ld(g,I,b),E!==null&&(xs(E,g,b),ru(E,g,b))}function LP(g,b){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var E=g.retryLane;g.retryLane=E!==0&&E<b?E:b}}function PA(g,b){LP(g,b),(g=g.alternate)&&LP(g,b)}function kd(g){if(g.tag===13){var b=lp(g,67108864);b!==null&&xs(b,g,67108864),PA(g,67108864)}}var wc=!0;function tb(g,b,E,I){var F=W.T;W.T=null;var U=X.p;try{X.p=2,OA(g,b,E,I)}finally{X.p=U,W.T=F}}function j_(g,b,E,I){var F=W.T;W.T=null;var U=X.p;try{X.p=8,OA(g,b,E,I)}finally{X.p=U,W.T=F}}function OA(g,b,E,I){if(wc){var F=nb(I);if(F===null)rv(g,b,I,F_,E),U_(g,I);else if(xc(F,g,b,E,I))I.stopPropagation();else if(U_(g,I),b&4&&-1<B_.indexOf(g)){for(;F!==null;){var U=sa(F);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var J=on(U.pendingLanes);if(J!==0){var ie=U;for(ie.pendingLanes|=2,ie.entangledLanes|=2;J;){var de=1<<31-xt(J);ie.entanglements[1]|=de,J&=~de}du(U),(dr&6)===0&&(P0=lt()+500,U0(0))}}break;case 13:ie=lp(U,2),ie!==null&&xs(ie,U,2),R0(),PA(U,2)}if(U=nb(I),U===null&&rv(g,b,I,F_,E),U===F)break;F=U}F!==null&&I.stopPropagation()}else rv(g,b,I,null,E)}}function nb(g){return g=Hs(g),RA(g)}var F_=null;function RA(g){if(F_=null,g=Jl(g),g!==null){var b=a(g);if(b===null)g=null;else{var E=b.tag;if(E===13){if(g=o(b),g!==null)return g;g=null}else if(E===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;g=null}else b!==g&&(g=null)}}return F_=g,null}function rb(g){switch(g){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case Ct:return 2;case En:return 8;case jn:case Re:return 32;case Jt:return 268435456;default:return 32}default:return 32}}var $_=!1,Cd=null,gu=null,Dd=null,ib=new Map,ab=new Map,Kh=[],B_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(g,b){switch(g){case"focusin":case"focusout":Cd=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":Dd=null;break;case"pointerover":case"pointerout":ib.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":ab.delete(b.pointerId)}}function Xh(g,b,E,I,F,U){return g===null||g.nativeEvent!==U?(g={blockedOn:b,domEventName:E,eventSystemFlags:I,nativeEvent:U,targetContainers:[F]},b!==null&&(b=sa(b),b!==null&&kd(b)),g):(g.eventSystemFlags|=I,b=g.targetContainers,F!==null&&b.indexOf(F)===-1&&b.push(F),g)}function xc(g,b,E,I,F){switch(b){case"focusin":return Cd=Xh(Cd,g,b,E,I,F),!0;case"dragenter":return gu=Xh(gu,g,b,E,I,F),!0;case"mouseover":return Dd=Xh(Dd,g,b,E,I,F),!0;case"pointerover":var U=F.pointerId;return ib.set(U,Xh(ib.get(U)||null,g,b,E,I,F)),!0;case"gotpointercapture":return U=F.pointerId,ab.set(U,Xh(ab.get(U)||null,g,b,E,I,F)),!0}return!1}function Id(g){var b=Jl(g.target);if(b!==null){var E=a(b);if(E!==null){if(b=E.tag,b===13){if(b=o(E),b!==null){g.blockedOn=b,gt(g.priority,function(){if(E.tag===13){var I=ws();I=pe(I);var F=lp(E,I);F!==null&&xs(F,E,I),PA(E,I)}});return}}else if(b===3&&E.stateNode.current.memoizedState.isDehydrated){g.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}g.blockedOn=null}function p(g){if(g.blockedOn!==null)return!1;for(var b=g.targetContainers;0<b.length;){var E=nb(g.nativeEvent);if(E===null){E=g.nativeEvent;var I=new E.constructor(E.type,E);us=I,E.target.dispatchEvent(I),us=null}else return b=sa(E),b!==null&&kd(b),g.blockedOn=E,!1;b.shift()}return!0}function S(g,b,E){p(g)&&E.delete(b)}function D(){$_=!1,Cd!==null&&p(Cd)&&(Cd=null),gu!==null&&p(gu)&&(gu=null),Dd!==null&&p(Dd)&&(Dd=null),ib.forEach(S),ab.forEach(S)}function N(g,b){g.blockedOn===b&&(g.blockedOn=null,$_||($_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,D)))}var V=null;function H(g){V!==g&&(V=g,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){V===g&&(V=null);for(var b=0;b<g.length;b+=3){var E=g[b],I=g[b+1],F=g[b+2];if(typeof I!="function"){if(RA(I||E)===null)continue;break}var U=sa(E);U!==null&&(g.splice(b,3),b-=3,i_(U,{pending:!0,data:F,method:E.method,action:I},I,F))}}))}function ne(g){function b(de){return N(de,g)}Cd!==null&&N(Cd,g),gu!==null&&N(gu,g),Dd!==null&&N(Dd,g),ib.forEach(b),ab.forEach(b);for(var E=0;E<Kh.length;E++){var I=Kh[E];I.blockedOn===g&&(I.blockedOn=null)}for(;0<Kh.length&&(E=Kh[0],E.blockedOn===null);)Id(E),E.blockedOn===null&&Kh.shift();if(E=(g.ownerDocument||g).$$reactFormReplay,E!=null)for(I=0;I<E.length;I+=3){var F=E[I],U=E[I+1],J=F[Bt]||null;if(typeof U=="function")J||H(E);else if(J){var ie=null;if(U&&U.hasAttribute("formAction")){if(F=U,J=U[Bt]||null)ie=J.formAction;else if(RA(F)!==null)continue}else ie=J.action;typeof ie=="function"?E[I+1]=ie:(E.splice(I,3),I-=3),H(E)}}}function ue(g){this._internalRoot=g}Pe.prototype.render=ue.prototype.render=function(g){var b=this._internalRoot;if(b===null)throw Error(r(409));var E=b.current,I=ws();MA(E,I,g,b,null,null)},Pe.prototype.unmount=ue.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var b=g.containerInfo;MA(g.current,2,null,g,null,null),R0(),b[yt]=null}};function Pe(g){this._internalRoot=g}Pe.prototype.unstable_scheduleHydration=function(g){if(g){var b=Qe();g={blockedOn:null,target:g,priority:b};for(var E=0;E<Kh.length&&b!==0&&b<Kh[E].priority;E++);Kh.splice(E,0,g),E===0&&Id(g)}};var nt=e.version;if(nt!=="19.1.0")throw Error(r(527,nt,"19.1.0"));X.findDOMNode=function(g){var b=g._reactInternals;if(b===void 0)throw typeof g.render=="function"?Error(r(188)):(g=Object.keys(g).join(","),Error(r(268,g)));return g=l(b),g=g!==null?c(g):null,g=g===null?null:g.stateNode,g};var jt={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mr.isDisabled&&mr.supportsFiber)try{Te=mr.inject(jt),Ne=mr}catch{}}return LA.createRoot=function(g,b){if(!i(g))throw Error(r(299));var E=!1,I="",F=u_,U=hP,J=fP,ie=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(I=b.identifierPrefix),b.onUncaughtError!==void 0&&(F=b.onUncaughtError),b.onCaughtError!==void 0&&(U=b.onCaughtError),b.onRecoverableError!==void 0&&(J=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(ie=b.unstable_transitionCallbacks)),b=RP(g,1,!1,null,null,E,I,F,U,J,ie,null),g[yt]=b.current,nv(g),new ue(b)},LA.hydrateRoot=function(g,b,E){if(!i(g))throw Error(r(299));var I=!1,F="",U=u_,J=hP,ie=fP,de=null,ke=null;return E!=null&&(E.unstable_strictMode===!0&&(I=!0),E.identifierPrefix!==void 0&&(F=E.identifierPrefix),E.onUncaughtError!==void 0&&(U=E.onUncaughtError),E.onCaughtError!==void 0&&(J=E.onCaughtError),E.onRecoverableError!==void 0&&(ie=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(de=E.unstable_transitionCallbacks),E.formState!==void 0&&(ke=E.formState)),b=RP(g,1,!0,b,E??null,I,F,U,J,ie,de,ke),b.context=NP(null),E=b.current,I=ws(),I=pe(I),F=hc(I),F.callback=null,ld(E,F,I),E=I,b.current.lanes=E,Tt(b,E),du(b),g[yt]=b.current,nv(g),new Pe(b)},LA.version="19.1.0",LA}var cZ;function uIe(){if(cZ)return kF.exports;cZ=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kF.exports=cIe(),kF.exports}var dIe=uIe();const hIe=kr(dIe);typeof window<"u"&&!window.process&&(window.process={env:{},version:"",platform:"browser",nextTick:n=>setTimeout(n,0),cwd:()=>"/",argv:[],stderr:{write:console.error},stdout:{write:console.log}});typeof window<"u"&&!window.global&&(window.global=window);const fIe="modulepreload",pIe=function(n){return"/"+n},uZ={},vr=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(c=>{if(c=pIe(c),c in uZ)return;uZ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":fIe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})},dZ=n=>{let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(f=>f(e,h))}},i=()=>e,s={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,s);return s},gIe=n=>n?dZ(n):dZ,mIe=n=>n;function vIe(n,e=mIe){const t=ve.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return ve.useDebugValue(t),t}const hZ=n=>{const e=gIe(n),t=r=>vIe(e,r);return Object.assign(t,e),t},Vf=n=>n?hZ(n):hZ;var fZ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yIe=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},vge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=a>>2,d=(a&3)<<4|s>>4;let h=(s&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mge(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yIe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||c==null||d==null)throw new bIe;const h=a<<2|s>>4;if(r.push(h),c!==64){const f=s<<4&240|c>>2;if(r.push(f),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bIe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wIe=function(n){const e=mge(n);return vge.encodeByteArray(e,!0)},mN=function(n){return wIe(n).replace(/\./g,"")},yge=function(n){try{return vge.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vN(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!xIe(t)||(n[t]=vN(n[t],e[t]));return n}function xIe(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ie=()=>bge().__FIREBASE_DEFAULTS__,SIe=()=>{if(typeof process>"u"||typeof fZ>"u")return;const n=fZ.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TIe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yge(n[1]);return e&&JSON.parse(e)},UL=()=>{try{return _Ie()||SIe()||TIe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wge=n=>{var e,t;return(t=(e=UL())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},EIe=n=>{const e=wge(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xge=()=>{var n;return(n=UL())===null||n===void 0?void 0:n.config},_ge=n=>{var e;return(e=UL())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AIe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kIe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mN(JSON.stringify(t)),mN(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CIe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xa())}function tq(){var n;const e=(n=UL())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function DIe(){return typeof window<"u"||Sge()}function Sge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function IIe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nq(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tge(){const n=Xa();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MIe(){return!tq()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZC(){try{return typeof indexedDB=="object"}catch{return!1}}function Ege(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function PIe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OIe="FirebaseError";class es extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OIe,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qg.prototype.create)}}class qg{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?RIe(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new es(i,s,r)}}function RIe(n,e){return n.replace(NIe,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NIe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function LIe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function QC(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(gZ(a)&&gZ(o)){if(!QC(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function gZ(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GS(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Lk(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Age(n,e){const t=new jIe(n,e);return t.subscribe.bind(t)}class jIe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FIe(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=MF),i.error===void 0&&(i.error=MF),i.complete===void 0&&(i.complete=MF);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FIe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function MF(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ie=1e3,BIe=2,UIe=4*60*60*1e3,VIe=.5;function mZ(n,e=$Ie,t=BIe){const r=e*Math.pow(t,n),i=Math.round(VIe*r*(Math.random()-.5)*2);return Math.min(UIe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){return n&&n._delegate?n._delegate:n}class zc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zIe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new AIe;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GIe(e))try{this.getOrInitializeService({instanceIdentifier:Ob})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ob){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ob){return this.instances.has(e)}getOptions(e=Ob){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HIe(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ob){return this.component?this.component.multipleInstances?e:Ob:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HIe(n){return n===Ob?void 0:n}function GIe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zIe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=[];var hr;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(hr||(hr={}));const Cge={debug:hr.DEBUG,verbose:hr.VERBOSE,info:hr.INFO,warn:hr.WARN,error:hr.ERROR,silent:hr.SILENT},qIe=hr.INFO,WIe={[hr.DEBUG]:"log",[hr.VERBOSE]:"log",[hr.INFO]:"info",[hr.WARN]:"warn",[hr.ERROR]:"error"},YIe=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=WIe[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class OI{constructor(e){this.name=e,this._logLevel=qIe,this._logHandler=YIe,this._userLogHandler=null,iq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in hr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,hr.DEBUG,...e),this._logHandler(this,hr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,hr.VERBOSE,...e),this._logHandler(this,hr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,hr.INFO,...e),this._logHandler(this,hr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,hr.WARN,...e),this._logHandler(this,hr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,hr.ERROR,...e),this._logHandler(this,hr.ERROR,...e)}}function KIe(n){iq.forEach(e=>{e.setLogLevel(n)})}function XIe(n,e){for(const t of iq){let r=null;e&&e.level&&(r=Cge[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,a,...o)=>{const s=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");a>=(r??i.logLevel)&&n({level:hr[a].toLowerCase(),message:s,args:o,type:i.name})}}}const ZIe=(n,e)=>e.some(t=>n instanceof t);let vZ,yZ;function QIe(){return vZ||(vZ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JIe(){return yZ||(yZ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dge=new WeakMap,wz=new WeakMap,Ige=new WeakMap,PF=new WeakMap,aq=new WeakMap;function eMe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(ey(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Dge.set(t,n)}).catch(()=>{}),aq.set(e,n),e}function tMe(n){if(wz.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});wz.set(n,e)}let xz={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wz.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ige.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ey(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nMe(n){xz=n(xz)}function rMe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(OF(this),e,...t);return Ige.set(r,e.sort?e.sort():[e]),ey(r)}:JIe().includes(n)?function(...e){return n.apply(OF(this),e),ey(Dge.get(this))}:function(...e){return ey(n.apply(OF(this),e))}}function iMe(n){return typeof n=="function"?rMe(n):(n instanceof IDBTransaction&&tMe(n),ZIe(n,QIe())?new Proxy(n,xz):n)}function ey(n){if(n instanceof IDBRequest)return eMe(n);if(PF.has(n))return PF.get(n);const e=iMe(n);return e!==n&&(PF.set(n,e),aq.set(e,n)),e}const OF=n=>aq.get(n);function Mge(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=ey(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ey(o.result),l.oldVersion,l.newVersion,ey(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const aMe=["get","getKey","getAll","getAllKeys","count"],oMe=["put","add","delete","clear"],RF=new Map;function bZ(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(RF.get(e))return RF.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=oMe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aMe.includes(t)))return;const a=async function(o,...s){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[t](...s),i&&l.done]))[0]};return RF.set(e,a),a}nMe(n=>({...n,get:(e,t,r)=>bZ(e,t)||n.get(e,t,r),has:(e,t)=>!!bZ(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lMe(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function lMe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yN="@firebase/app",_z="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=new OI("@firebase/app"),cMe="@firebase/app-compat",uMe="@firebase/analytics-compat",dMe="@firebase/analytics",hMe="@firebase/app-check-compat",fMe="@firebase/app-check",pMe="@firebase/auth",gMe="@firebase/auth-compat",mMe="@firebase/database",vMe="@firebase/data-connect",yMe="@firebase/database-compat",bMe="@firebase/functions",wMe="@firebase/functions-compat",xMe="@firebase/installations",_Me="@firebase/installations-compat",SMe="@firebase/messaging",TMe="@firebase/messaging-compat",EMe="@firebase/performance",AMe="@firebase/performance-compat",kMe="@firebase/remote-config",CMe="@firebase/remote-config-compat",DMe="@firebase/storage",IMe="@firebase/storage-compat",MMe="@firebase/firestore",PMe="@firebase/vertexai-preview",OMe="@firebase/firestore-compat",RMe="firebase",NMe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="[DEFAULT]",LMe={[yN]:"fire-core",[cMe]:"fire-core-compat",[dMe]:"fire-analytics",[uMe]:"fire-analytics-compat",[fMe]:"fire-app-check",[hMe]:"fire-app-check-compat",[pMe]:"fire-auth",[gMe]:"fire-auth-compat",[mMe]:"fire-rtdb",[vMe]:"fire-data-connect",[yMe]:"fire-rtdb-compat",[bMe]:"fire-fn",[wMe]:"fire-fn-compat",[xMe]:"fire-iid",[_Me]:"fire-iid-compat",[SMe]:"fire-fcm",[TMe]:"fire-fcm-compat",[EMe]:"fire-perf",[AMe]:"fire-perf-compat",[kMe]:"fire-rc",[CMe]:"fire-rc-compat",[DMe]:"fire-gcs",[IMe]:"fire-gcs-compat",[MMe]:"fire-fst",[OMe]:"fire-fst-compat",[PMe]:"fire-vertex","fire-js":"fire-js",[RMe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map,C1=new Map,D1=new Map;function JC(n,e){try{n.container.addComponent(e)}catch(t){Dg.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pge(n,e){n.container.addOrOverwriteComponent(e)}function Gu(n){const e=n.name;if(D1.has(e))return Dg.debug(`There were multiple attempts to register component ${e}.`),!1;D1.set(e,n);for(const t of hy.values())JC(t,n);for(const t of C1.values())JC(t,n);return!0}function Wg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jMe(n,e,t=dy){Wg(n,e).clearInstance(t)}function Oge(n){return n.options!==void 0}function fa(n){return n.settings!==void 0}function FMe(){D1.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Me={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vu=new qg("app","Firebase",$Me);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rge=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vu.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BMe extends Rge{constructor(e,t,r,i){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,o,i);else{const s=e;super(s.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ls(yN,_z,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){oq(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vu.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=NMe;function VL(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vu.create("bad-app-name",{appName:String(i)});if(t||(t=xge()),!t)throw Vu.create("no-options");const a=hy.get(i);if(a){if(QC(t,a.options)&&QC(r,a.config))return a;throw Vu.create("duplicate-app",{appName:i})}const o=new kge(i);for(const l of D1.values())o.addComponent(l);const s=new Rge(t,r,o);return hy.set(i,s),s}function UMe(n,e){if(DIe()&&!Sge())throw Vu.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Oge(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((u,d)=>Math.imul(31,u)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vu.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),o=C1.get(a);if(o)return o.incRefCount(e.releaseOnDeref),o;const s=new kge(a);for(const c of D1.values())s.addComponent(c);const l=new BMe(t,e,a,s);return C1.set(a,l),l}function zL(n=dy){const e=hy.get(n);if(!e&&n===dy&&xge())return VL();if(!e)throw Vu.create("no-app",{appName:n});return e}function VMe(){return Array.from(hy.values())}async function oq(n){let e=!1;const t=n.name;hy.has(t)?(e=!0,hy.delete(t)):C1.has(t)&&n.decRefCount()<=0&&(C1.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Ls(n,e,t){var r;let i=(r=LMe[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dg.warn(s.join(" "));return}Gu(new zc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Nge(n,e){if(n!==null&&typeof n!="function")throw Vu.create("invalid-log-argument");XIe(n,e)}function Lge(n){KIe(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zMe="firebase-heartbeat-database",HMe=1,eD="firebase-heartbeat-store";let NF=null;function jge(){return NF||(NF=Mge(zMe,HMe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(eD)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vu.create("idb-open",{originalErrorMessage:n.message})})),NF}async function GMe(n){try{const t=(await jge()).transaction(eD),r=await t.objectStore(eD).get(Fge(n));return await t.done,r}catch(e){if(e instanceof es)Dg.warn(e.message);else{const t=Vu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dg.warn(t.message)}}}async function wZ(n,e){try{const r=(await jge()).transaction(eD,"readwrite");await r.objectStore(eD).put(e,Fge(n)),await r.done}catch(t){if(t instanceof es)Dg.warn(t.message);else{const r=Vu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dg.warn(r.message)}}}function Fge(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qMe=1024,WMe=30*24*60*60*1e3;class YMe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XMe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xZ();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=WMe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dg.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xZ(),{heartbeatsToSend:r,unsentEntries:i}=KMe(this._heartbeatsCache.heartbeats),a=mN(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Dg.warn(t),""}}}function xZ(){return new Date().toISOString().substring(0,10)}function KMe(n,e=qMe){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),_Z(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_Z(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XMe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZC()?Ege().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GMe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return wZ(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return wZ(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _Z(n){return mN(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZMe(n){Gu(new zc("platform-logger",e=>new sMe(e),"PRIVATE")),Gu(new zc("heartbeat",e=>new YMe(e),"PRIVATE")),Ls(yN,_z,n),Ls(yN,_z,"esm2017"),Ls("fire-js","")}ZMe("");const QMe=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:es,SDK_VERSION:ky,_DEFAULT_ENTRY_NAME:dy,_addComponent:JC,_addOrOverwriteComponent:Pge,_apps:hy,_clearComponents:FMe,_components:D1,_getProvider:Wg,_isFirebaseApp:Oge,_isFirebaseServerApp:fa,_registerComponent:Gu,_removeServiceInstance:jMe,_serverApps:C1,deleteApp:oq,getApp:zL,getApps:VMe,initializeApp:VL,initializeServerApp:UMe,onLog:Nge,registerVersion:Ls,setLogLevel:Lge},Symbol.toStringTag,{value:"Module"}));var SZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pw,$ge;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function O(){}O.prototype=P.prototype,M.D=P.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(j,L,B){for(var $=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)$[Y-2]=arguments[Y];return P.prototype[L].apply(j,$)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,O){O||(O=0);var j=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)j[L]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for(L=0;16>L;++L)j[L]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;P=M.g[0],O=M.g[1],L=M.g[2];var B=M.g[3],$=P+(B^O&(L^B))+j[0]+3614090360&4294967295;P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[1]+3905402710&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[2]+606105819&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[3]+3250441966&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[4]+4118548399&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[5]+1200080426&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[6]+2821735955&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[7]+4249261313&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[8]+1770035416&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[9]+2336552879&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[10]+4294925233&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[11]+2304563134&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(B^O&(L^B))+j[12]+1804603682&4294967295,P=O+($<<7&4294967295|$>>>25),$=B+(L^P&(O^L))+j[13]+4254626195&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(O^B&(P^O))+j[14]+2792965006&4294967295,L=B+($<<17&4294967295|$>>>15),$=O+(P^L&(B^P))+j[15]+1236535329&4294967295,O=L+($<<22&4294967295|$>>>10),$=P+(L^B&(O^L))+j[1]+4129170786&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[6]+3225465664&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[11]+643717713&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[0]+3921069994&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[5]+3593408605&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[10]+38016083&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[15]+3634488961&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[4]+3889429448&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[9]+568446438&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[14]+3275163606&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[3]+4107603335&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[8]+1163531501&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(L^B&(O^L))+j[13]+2850285829&4294967295,P=O+($<<5&4294967295|$>>>27),$=B+(O^L&(P^O))+j[2]+4243563512&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^O&(B^P))+j[7]+1735328473&4294967295,L=B+($<<14&4294967295|$>>>18),$=O+(B^P&(L^B))+j[12]+2368359562&4294967295,O=L+($<<20&4294967295|$>>>12),$=P+(O^L^B)+j[5]+4294588738&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[8]+2272392833&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[11]+1839030562&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[14]+4259657740&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[1]+2763975236&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[4]+1272893353&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[7]+4139469664&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[10]+3200236656&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[13]+681279174&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[0]+3936430074&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[3]+3572445317&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[6]+76029189&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(O^L^B)+j[9]+3654602809&4294967295,P=O+($<<4&4294967295|$>>>28),$=B+(P^O^L)+j[12]+3873151461&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^O)+j[15]+530742520&4294967295,L=B+($<<16&4294967295|$>>>16),$=O+(L^B^P)+j[2]+3299628645&4294967295,O=L+($<<23&4294967295|$>>>9),$=P+(L^(O|~B))+j[0]+4096336452&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[7]+1126891415&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[14]+2878612391&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[5]+4237533241&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[12]+1700485571&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[3]+2399980690&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[10]+4293915773&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[1]+2240044497&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[8]+1873313359&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[15]+4264355552&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[6]+2734768916&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[13]+1309151649&4294967295,O=L+($<<21&4294967295|$>>>11),$=P+(L^(O|~B))+j[4]+4149444226&4294967295,P=O+($<<6&4294967295|$>>>26),$=B+(O^(P|~L))+j[11]+3174756917&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~O))+j[2]+718787259&4294967295,L=B+($<<15&4294967295|$>>>17),$=O+(B^(L|~P))+j[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(L+($<<21&4294967295|$>>>11))&4294967295,M.g[2]=M.g[2]+L&4294967295,M.g[3]=M.g[3]+B&4294967295}r.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var O=P-this.blockSize,j=this.B,L=this.h,B=0;B<P;){if(L==0)for(;B<=O;)i(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<P;)if(j[L++]=M.charCodeAt(B++),L==this.blockSize){i(this,j),L=0;break}}else for(;B<P;)if(j[L++]=M[B++],L==this.blockSize){i(this,j),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var O=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=O&255,O/=256;for(this.u(M),M=Array(16),P=O=0;4>P;++P)for(var j=0;32>j;j+=8)M[O++]=this.g[P]>>>j&255;return M};function a(M,P){var O=s;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=P(M)}function o(M,P){this.h=P;for(var O=[],j=!0,L=M.length-1;0<=L;L--){var B=M[L]|0;j&&B==P||(O[L]=B,j=!1)}this.g=O}var s={};function l(M){return-128<=M&&128>M?a(M,function(P){return new o([P|0],0>P?-1:0)}):new o([M|0],0>M?-1:0)}function c(M){if(isNaN(M)||!isFinite(M))return d;if(0>M)return y(c(-M));for(var P=[],O=1,j=0;M>=O;j++)P[j]=M/O|0,O*=4294967296;return new o(P,0)}function u(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return y(u(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=c(Math.pow(P,8)),j=d,L=0;L<M.length;L+=8){var B=Math.min(8,M.length-L),$=parseInt(M.substring(L,L+B),P);8>B?(B=c(Math.pow(P,B)),j=j.j(B).add(c($))):(j=j.j(O),j=j.add(c($)))}return j}var d=l(0),h=l(1),f=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-y(this).m();for(var M=0,P=1,O=0;O<this.g.length;O++){var j=this.i(O);M+=(0<=j?j:4294967296+j)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(m(this))return"0";if(v(this))return"-"+y(this).toString(M);for(var P=c(Math.pow(M,6)),O=this,j="";;){var L=A(O,P).g;O=w(O,L.j(P));var B=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=L,m(O))return B+j;for(;6>B.length;)B="0"+B;j=B+j}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function m(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function v(M){return M.h==-1}n.l=function(M){return M=w(this,M),v(M)?-1:m(M)?0:1};function y(M){for(var P=M.g.length,O=[],j=0;j<P;j++)O[j]=~M.g[j];return new o(O,~M.h).add(h)}n.abs=function(){return v(this)?y(this):this},n.add=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0,L=0;L<=P;L++){var B=j+(this.i(L)&65535)+(M.i(L)&65535),$=(B>>>16)+(this.i(L)>>>16)+(M.i(L)>>>16);j=$>>>16,B&=65535,$&=65535,O[L]=$<<16|B}return new o(O,O[O.length-1]&-2147483648?-1:0)};function w(M,P){return M.add(y(P))}n.j=function(M){if(m(this)||m(M))return d;if(v(this))return v(M)?y(this).j(y(M)):y(y(this).j(M));if(v(M))return y(this.j(y(M)));if(0>this.l(f)&&0>M.l(f))return c(this.m()*M.m());for(var P=this.g.length+M.g.length,O=[],j=0;j<2*P;j++)O[j]=0;for(j=0;j<this.g.length;j++)for(var L=0;L<M.g.length;L++){var B=this.i(j)>>>16,$=this.i(j)&65535,Y=M.i(L)>>>16,G=M.i(L)&65535;O[2*j+2*L]+=$*G,_(O,2*j+2*L),O[2*j+2*L+1]+=B*G,_(O,2*j+2*L+1),O[2*j+2*L+1]+=$*Y,_(O,2*j+2*L+1),O[2*j+2*L+2]+=B*Y,_(O,2*j+2*L+2)}for(j=0;j<P;j++)O[j]=O[2*j+1]<<16|O[2*j];for(j=P;j<2*P;j++)O[j]=0;return new o(O,0)};function _(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function T(M,P){this.g=M,this.h=P}function A(M,P){if(m(P))throw Error("division by zero");if(m(M))return new T(d,d);if(v(M))return P=A(y(M),P),new T(y(P.g),y(P.h));if(v(P))return P=A(M,y(P)),new T(y(P.g),P.h);if(30<M.g.length){if(v(M)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var O=h,j=P;0>=j.l(M);)O=C(O),j=C(j);var L=k(O,1),B=k(j,1);for(j=k(j,2),O=k(O,2);!m(j);){var $=B.add(j);0>=$.l(M)&&(L=L.add(O),B=$),j=k(j,1),O=k(O,1)}return P=w(M,L.j(P)),new T(L,P)}for(L=d;0<=M.l(P);){for(O=Math.max(1,Math.floor(M.m()/P.m())),j=Math.ceil(Math.log(O)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),B=c(O),$=B.j(P);v($)||0<$.l(M);)O-=j,B=c(O),$=B.j(P);m(B)&&(B=h),L=L.add(B),M=w(M,$)}return new T(L,M)}n.A=function(M){return A(this,M).h},n.and=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)&M.i(j);return new o(O,this.h&M.h)},n.or=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)|M.i(j);return new o(O,this.h|M.h)},n.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],j=0;j<P;j++)O[j]=this.i(j)^M.i(j);return new o(O,this.h^M.h)};function C(M){for(var P=M.g.length+1,O=[],j=0;j<P;j++)O[j]=M.i(j)<<1|M.i(j-1)>>>31;return new o(O,M.h)}function k(M,P){var O=P>>5;P%=32;for(var j=M.g.length-O,L=[],B=0;B<j;B++)L[B]=0<P?M.i(B+O)>>>P|M.i(B+O+1)<<32-P:M.i(B+O);return new o(L,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$ge=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,pw=o}).apply(typeof SZ<"u"?SZ:typeof self<"u"?self:typeof window<"u"?window:{});var jP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bge,jk,Uge,CR,Sz,Vge,zge,Hge;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(R,q,Q){return R==Array.prototype||R==Object.prototype||(R[q]=Q.value),R};function t(R){R=[typeof globalThis=="object"&&globalThis,R,typeof window=="object"&&window,typeof self=="object"&&self,typeof jP=="object"&&jP];for(var q=0;q<R.length;++q){var Q=R[q];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var r=t(this);function i(R,q){if(q)e:{var Q=r;R=R.split(".");for(var se=0;se<R.length-1;se++){var Se=R[se];if(!(Se in Q))break e;Q=Q[Se]}R=R[R.length-1],se=Q[R],q=q(se),q!=se&&q!=null&&e(Q,R,{configurable:!0,writable:!0,value:q})}}function a(R,q){R instanceof String&&(R+="");var Q=0,se=!1,Se={next:function(){if(!se&&Q<R.length){var Oe=Q++;return{value:q(Oe,R[Oe]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}i("Array.prototype.values",function(R){return R||function(){return a(this,function(q,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(R){var q=typeof R;return q=q!="object"?q:R?Array.isArray(R)?"array":q:"null",q=="array"||q=="object"&&typeof R.length=="number"}function c(R){var q=typeof R;return q=="object"&&R!=null||q=="function"}function u(R,q,Q){return R.call.apply(R.bind,arguments)}function d(R,q,Q){if(!R)throw Error();if(2<arguments.length){var se=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,se),R.apply(q,Se)}}return function(){return R.apply(q,arguments)}}function h(R,q,Q){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function f(R,q){var Q=Array.prototype.slice.call(arguments,1);return function(){var se=Q.slice();return se.push.apply(se,arguments),R.apply(this,se)}}function m(R,q){function Q(){}Q.prototype=q.prototype,R.aa=q.prototype,R.prototype=new Q,R.prototype.constructor=R,R.Qb=function(se,Se,Oe){for(var ut=Array(arguments.length-2),Zn=2;Zn<arguments.length;Zn++)ut[Zn-2]=arguments[Zn];return q.prototype[Se].apply(se,ut)}}function v(R){const q=R.length;if(0<q){const Q=Array(q);for(let se=0;se<q;se++)Q[se]=R[se];return Q}return[]}function y(R,q){for(let Q=1;Q<arguments.length;Q++){const se=arguments[Q];if(l(se)){const Se=R.length||0,Oe=se.length||0;R.length=Se+Oe;for(let ut=0;ut<Oe;ut++)R[Se+ut]=se[ut]}else R.push(se)}}class w{constructor(q,Q){this.i=q,this.j=Q,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function _(R){return/^[\s\xa0]*$/.test(R)}function T(){var R=s.navigator;return R&&(R=R.userAgent)?R:""}function A(R){return A[" "](R),R}A[" "]=function(){};var C=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function k(R,q,Q){for(const se in R)q.call(Q,R[se],se,R)}function M(R,q){for(const Q in R)q.call(void 0,R[Q],Q,R)}function P(R){const q={};for(const Q in R)q[Q]=R[Q];return q}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(R,q){let Q,se;for(let Se=1;Se<arguments.length;Se++){se=arguments[Se];for(Q in se)R[Q]=se[Q];for(let Oe=0;Oe<O.length;Oe++)Q=O[Oe],Object.prototype.hasOwnProperty.call(se,Q)&&(R[Q]=se[Q])}}function L(R){var q=1;R=R.split(":");const Q=[];for(;0<q&&R.length;)Q.push(R.shift()),q--;return R.length&&Q.push(R.join(":")),Q}function B(R){s.setTimeout(()=>{throw R},0)}function $(){var R=re;let q=null;return R.g&&(q=R.g,R.g=R.g.next,R.g||(R.h=null),q.next=null),q}class Y{constructor(){this.h=this.g=null}add(q,Q){const se=G.get();se.set(q,Q),this.h?this.h.next=se:this.g=se,this.h=se}}var G=new w(()=>new W,R=>R.reset());class W{constructor(){this.next=this.g=this.h=null}set(q,Q){this.h=q,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let X,te=!1,re=new Y,z=()=>{const R=s.Promise.resolve(void 0);X=()=>{R.then(ae)}};var ae=()=>{for(var R;R=$();){try{R.h.call(R.g)}catch(Q){B(Q)}var q=G;q.j(R),100>q.h&&(q.h++,R.next=q.g,q.g=R)}te=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(R,q){this.type=R,this.g=this.target=q,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var R=!1,q=Object.defineProperty({},"passive",{get:function(){R=!0}});try{const Q=()=>{};s.addEventListener("test",Q,q),s.removeEventListener("test",Q,q)}catch{}return R}();function fe(R,q){if(ee.call(this,R?R.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,R){var Q=this.type=R.type,se=R.changedTouches&&R.changedTouches.length?R.changedTouches[0]:null;if(this.target=R.target||R.srcElement,this.g=q,q=R.relatedTarget){if(C){e:{try{A(q.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(q=null)}}else Q=="mouseover"?q=R.fromElement:Q=="mouseout"&&(q=R.toElement);this.relatedTarget=q,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0),this.button=R.button,this.key=R.key||"",this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.shiftKey=R.shiftKey,this.metaKey=R.metaKey,this.pointerId=R.pointerId||0,this.pointerType=typeof R.pointerType=="string"?R.pointerType:Ce[R.pointerType]||"",this.state=R.state,this.i=R,R.defaultPrevented&&fe.aa.h.call(this)}}m(fe,ee);var Ce={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var R=this.i;R.preventDefault?R.preventDefault():R.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),Le=0;function we(R,q,Q,se,Se){this.listener=R,this.proxy=null,this.src=q,this.type=Q,this.capture=!!se,this.ha=Se,this.key=++Le,this.da=this.fa=!1}function be(R){R.da=!0,R.listener=null,R.proxy=null,R.src=null,R.ha=null}function ge(R){this.src=R,this.g={},this.h=0}ge.prototype.add=function(R,q,Q,se,Se){var Oe=R.toString();R=this.g[Oe],R||(R=this.g[Oe]=[],this.h++);var ut=Ge(R,q,se,Se);return-1<ut?(q=R[ut],Q||(q.fa=!1)):(q=new we(q,this.src,Oe,!!se,Se),q.fa=Q,R.push(q)),q};function he(R,q){var Q=q.type;if(Q in R.g){var se=R.g[Q],Se=Array.prototype.indexOf.call(se,q,void 0),Oe;(Oe=0<=Se)&&Array.prototype.splice.call(se,Se,1),Oe&&(be(q),R.g[Q].length==0&&(delete R.g[Q],R.h--))}}function Ge(R,q,Q,se){for(var Se=0;Se<R.length;++Se){var Oe=R[Se];if(!Oe.da&&Oe.listener==q&&Oe.capture==!!Q&&Oe.ha==se)return Se}return-1}var je="closure_lm_"+(1e6*Math.random()|0),rt={};function bt(R,q,Q,se,Se){if(Array.isArray(q)){for(var Oe=0;Oe<q.length;Oe++)bt(R,q[Oe],Q,se,Se);return null}return Q=Mt(Q),R&&R[at]?R.K(q,Q,c(se)?!!se.capture:!1,Se):lt(R,q,Q,!1,se,Se)}function lt(R,q,Q,se,Se,Oe){if(!q)throw Error("Invalid event type");var ut=c(Se)?!!Se.capture:!!Se,Zn=Jt(R);if(Zn||(R[je]=Zn=new ge(R)),Q=Zn.add(q,Q,se,ut,Oe),Q.proxy)return Q;if(se=cn(),Q.proxy=se,se.src=R,se.listener=Q,R.addEventListener)ye||(Se=ut),Se===void 0&&(Se=!1),R.addEventListener(q.toString(),se,Se);else if(R.attachEvent)R.attachEvent(jn(q.toString()),se);else if(R.addListener&&R.removeListener)R.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function cn(){function R(Q){return q.call(R.src,R.listener,Q)}const q=Re;return R}function Ct(R,q,Q,se,Se){if(Array.isArray(q))for(var Oe=0;Oe<q.length;Oe++)Ct(R,q[Oe],Q,se,Se);else se=c(se)?!!se.capture:!!se,Q=Mt(Q),R&&R[at]?(R=R.i,q=String(q).toString(),q in R.g&&(Oe=R.g[q],Q=Ge(Oe,Q,se,Se),-1<Q&&(be(Oe[Q]),Array.prototype.splice.call(Oe,Q,1),Oe.length==0&&(delete R.g[q],R.h--)))):R&&(R=Jt(R))&&(q=R.g[q.toString()],R=-1,q&&(R=Ge(q,Q,se,Se)),(Q=-1<R?q[R]:null)&&En(Q))}function En(R){if(typeof R!="number"&&R&&!R.da){var q=R.src;if(q&&q[at])he(q.i,R);else{var Q=R.type,se=R.proxy;q.removeEventListener?q.removeEventListener(Q,se,R.capture):q.detachEvent?q.detachEvent(jn(Q),se):q.addListener&&q.removeListener&&q.removeListener(se),(Q=Jt(q))?(he(Q,R),Q.h==0&&(Q.src=null,q[je]=null)):be(R)}}}function jn(R){return R in rt?rt[R]:rt[R]="on"+R}function Re(R,q){if(R.da)R=!0;else{q=new fe(q,this);var Q=R.listener,se=R.ha||R.src;R.fa&&En(R),R=Q.call(se,q)}return R}function Jt(R){return R=R[je],R instanceof ge?R:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(R){return typeof R=="function"?R:(R[hn]||(R[hn]=function(q){return R.handleEvent(q)}),R[hn])}function Te(){le.call(this),this.i=new ge(this),this.M=this,this.F=null}m(Te,le),Te.prototype[at]=!0,Te.prototype.removeEventListener=function(R,q,Q,se){Ct(this,R,q,Q,se)};function Ne(R,q){var Q,se=R.F;if(se)for(Q=[];se;se=se.F)Q.push(se);if(R=R.M,se=q.type||q,typeof q=="string")q=new ee(q,R);else if(q instanceof ee)q.target=q.target||R;else{var Se=q;q=new ee(se,R),j(q,Se)}if(Se=!0,Q)for(var Oe=Q.length-1;0<=Oe;Oe--){var ut=q.g=Q[Oe];Se=tt(ut,se,!0,q)&&Se}if(ut=q.g=R,Se=tt(ut,se,!0,q)&&Se,Se=tt(ut,se,!1,q)&&Se,Q)for(Oe=0;Oe<Q.length;Oe++)ut=q.g=Q[Oe],Se=tt(ut,se,!1,q)&&Se}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var R=this.i,q;for(q in R.g){for(var Q=R.g[q],se=0;se<Q.length;se++)be(Q[se]);delete R.g[q],R.h--}}this.F=null},Te.prototype.K=function(R,q,Q,se){return this.i.add(String(R),q,!1,Q,se)},Te.prototype.L=function(R,q,Q,se){return this.i.add(String(R),q,!0,Q,se)};function tt(R,q,Q,se){if(q=R.i.g[String(q)],!q)return!0;q=q.concat();for(var Se=!0,Oe=0;Oe<q.length;++Oe){var ut=q[Oe];if(ut&&!ut.da&&ut.capture==Q){var Zn=ut.listener,_a=ut.ha||ut.src;ut.fa&&he(R.i,ut),Se=Zn.call(_a,se)!==!1&&Se}}return Se&&!se.defaultPrevented}function xt(R,q,Q){if(typeof R=="function")Q&&(R=h(R,Q));else if(R&&typeof R.handleEvent=="function")R=h(R.handleEvent,R);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:s.setTimeout(R,q||0)}function fn(R){R.g=xt(()=>{R.g=null,R.i&&(R.i=!1,fn(R))},R.l);const q=R.h;R.h=null,R.m.apply(null,q)}class Ti extends le{constructor(q,Q){super(),this.m=q,this.l=Q,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:fn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(R){le.call(this),this.h=R,this.g={}}m(Nn,le);var Nr=[];function oi(R){k(R.g,function(q,Q){this.g.hasOwnProperty(Q)&&En(q)},R),R.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),oi(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=s.JSON.stringify,zr=s.JSON.parse,Ei=class{stringify(R){return s.JSON.stringify(R,void 0)}parse(R){return s.JSON.parse(R,void 0)}};function mi(){}mi.prototype.h=null;function Xe(R){return R.h||(R.h=R.i())}function Be(){}var Ke={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tt(){ee.call(this,"d")}m(Tt,ee);function nr(){ee.call(this,"c")}m(nr,ee);var oe={},ce=null;function pe(){return ce=ce||new Te}oe.La="serverreachability";function Ae(R){ee.call(this,oe.La,R)}m(Ae,ee);function Qe(R){const q=pe();Ne(q,new Ae(q))}oe.STAT_EVENT="statevent";function gt(R,q){ee.call(this,oe.STAT_EVENT,R),this.stat=q}m(gt,ee);function Dt(R){const q=pe();Ne(q,new gt(q,R))}oe.Ma="timingevent";function ft(R,q){ee.call(this,oe.Ma,R),this.size=q}m(ft,ee);function Bt(R,q){if(typeof R!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){R()},q)}function yt(){this.g=!0}yt.prototype.xa=function(){this.g=!1};function Vt(R,q,Q,se,Se,Oe){R.info(function(){if(R.g)if(Oe)for(var ut="",Zn=Oe.split("&"),_a=0;_a<Zn.length;_a++){var $n=Zn[_a].split("=");if(1<$n.length){var Fa=$n[0];$n=$n[1];var Li=Fa.split("_");ut=2<=Li.length&&Li[1]=="type"?ut+(Fa+"="+$n+"&"):ut+(Fa+"=redacted&")}}else ut=null;else ut=Oe;return"XMLHTTP REQ ("+se+") [attempt "+Se+"]: "+q+`
`+Q+`
`+ut})}function Kn(R,q,Q,se,Se,Oe,ut){R.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Se+"]: "+q+`
`+Q+`
`+Oe+" "+ut})}function vi(R,q,Q,se){R.info(function(){return"XMLHTTP TEXT ("+q+"): "+ls(R,Q)+(se?" "+se:"")})}function ba(R,q){R.info(function(){return"TIMEOUT: "+q})}yt.prototype.info=function(){};function ls(R,q){if(!R.g)return q;if(!q)return null;try{var Q=JSON.parse(q);if(Q){for(R=0;R<Q.length;R++)if(Array.isArray(Q[R])){var se=Q[R];if(!(2>se.length)){var Se=se[1];if(Array.isArray(Se)&&!(1>Se.length)){var Oe=Se[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var ut=1;ut<Se.length;ut++)Se[ut]=""}}}}return on(Q)}catch{return q}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sa;function _l(){}m(_l,mi),_l.prototype.g=function(){return new XMLHttpRequest},_l.prototype.i=function(){return{}},sa=new _l;function Qa(R,q,Q,se){this.j=R,this.i=q,this.l=Q,this.R=se||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var hh={},Zr={};function Ra(R,q,Q){R.L=1,R.v=ep(La(q)),R.m=Q,R.P=!0,Sl(R,null)}function Sl(R,q){R.F=Date.now(),fh(R),R.A=La(R.v);var Q=R.A,se=R.R;Array.isArray(se)||(se=[String(se)]),sm(Q.i,"t",se),R.C=0,Q=R.j.J,R.h=new Ai,R.g=Ex(R.j,Q?q:null,!R.m),0<R.O&&(R.M=new Ti(h(R.Y,R,R.g),R.O)),q=R.U,Q=R.g,se=R.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(Nr[0]=Se.toString()),Se=Nr);for(var Oe=0;Oe<Se.length;Oe++){var ut=bt(Q,Se[Oe],se||q.handleEvent,!1,q.h||q);if(!ut)break;q.g[ut.key]=ut}q=R.H?P(R.H):{},R.m?(R.u||(R.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",R.g.ea(R.A,R.u,R.m,q)):(R.u="GET",R.g.ea(R.A,R.u,null,q)),Qe(),Vt(R.i,R.u,R.A,R.l,R.R,R.m)}Qa.prototype.ca=function(R){R=R.target;const q=this.M;q&&kl(R)==3?q.j():this.Y(R)},Qa.prototype.Y=function(R){try{if(R==this.g)e:{const Li=kl(this.g);var q=this.g.Ba();const qs=this.g.Z();if(!(3>Li)&&(Li!=3||this.g&&(this.h.h||this.g.oa()||Gy(this.g)))){this.J||Li!=4||q==7||(q==8||0>=qs?Qe(3):Qe(2)),ph(this);var Q=this.g.Z();this.X=Q;t:if(Xf(this)){var se=Gy(this.g);R="";var Se=se.length,Oe=kl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),ec(this);var ut="";break t}this.h.i=new s.TextDecoder}for(q=0;q<Se;q++)this.h.h=!0,R+=this.h.i.decode(se[q],{stream:!(Oe&&q==Se-1)});se.length=0,this.h.g+=R,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=Q==200,Kn(this.i,this.u,this.A,this.l,this.R,Li,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var Zn,_a=this.g;if((Zn=_a.g?_a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Zn)){var $n=Zn;break t}}$n=null}if(Q=$n)vi(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cs(this,Q);else{this.o=!1,this.s=3,Dt(12),Xn(this),ec(this);break e}}if(this.P){Q=!0;let to;for(;!this.J&&this.C<ut.length;)if(to=Fn(this,ut),to==Zr){Li==4&&(this.s=4,Dt(14),Q=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(to==hh){this.s=4,Dt(15),vi(this.i,this.l,ut,"[Invalid Chunk]"),Q=!1;break}else vi(this.i,this.l,to,null),cs(this,to);if(Xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Li!=4||ut.length!=0||this.h.h||(this.s=1,Dt(16),Q=!1),this.o=this.o&&Q,!Q)vi(this.i,this.l,ut,"[Invalid Chunked Response]"),Xn(this),ec(this);else if(0<ut.length&&!this.W){this.W=!0;var Fa=this.j;Fa.g==this&&Fa.ba&&!Fa.M&&(Fa.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),rp(Fa),Fa.M=!0,Dt(11))}}else vi(this.i,this.l,ut,null),cs(this,ut);Li==4&&Xn(this),this.o&&!this.J&&(Li==4?ja(this.j,this):(this.o=!1,fh(this)))}else qc(this.g),Q==400&&0<ut.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Xn(this),ec(this)}}}catch{}finally{}};function Xf(R){return R.g?R.u=="GET"&&R.L!=2&&R.j.Ca:!1}function Fn(R,q){var Q=R.C,se=q.indexOf(`
`,Q);return se==-1?Zr:(Q=Number(q.substring(Q,se)),isNaN(Q)?hh:(se+=1,se+Q>q.length?Zr:(q=q.slice(se,se+Q),R.C=se+Q,q)))}Qa.prototype.cancel=function(){this.J=!0,Xn(this)};function fh(R){R.S=Date.now()+R.I,im(R,R.I)}function im(R,q){if(R.B!=null)throw Error("WatchDog timer not null");R.B=Bt(h(R.ba,R),q)}function ph(R){R.B&&(s.clearTimeout(R.B),R.B=null)}Qa.prototype.ba=function(){this.B=null;const R=Date.now();0<=R-this.S?(ba(this.i,this.A),this.L!=2&&(Qe(),Dt(17)),Xn(this),this.s=2,ec(this)):im(this,this.S-R)};function ec(R){R.j.G==0||R.J||ja(R.j,R)}function Xn(R){ph(R);var q=R.M;q&&typeof q.ma=="function"&&q.ma(),R.M=null,oi(R.U),R.g&&(q=R.g,R.g=null,q.abort(),q.ma())}function cs(R,q){try{var Q=R.j;if(Q.G!=0&&(Q.g==R||Tl(Q.h,R))){if(!R.K&&Tl(Q.h,R)&&Q.G==3){try{var se=Q.Da.g.parse(q)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Se=se;if(Se[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<R.F)ip(Q),dm(Q);else break e;Wy(Q),Dt(18)}}else Q.za=Se[1],0<Q.za-Q.T&&37500>Se[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=Bt(h(Q.Za,Q),6e3));if(1>=am(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Yc(Q,11)}else if((R.K||Q.g==R)&&ip(Q),!_(q))for(Se=Q.Da.g.parse(q),q=0;q<Se.length;q++){let $n=Se[q];if(Q.T=$n[0],$n=$n[1],Q.G==2)if($n[0]=="c"){Q.K=$n[1],Q.ia=$n[2];const Fa=$n[3];Fa!=null&&(Q.la=Fa,Q.j.info("VER="+Q.la));const Li=$n[4];Li!=null&&(Q.Aa=Li,Q.j.info("SVER="+Q.Aa));const qs=$n[5];qs!=null&&typeof qs=="number"&&0<qs&&(se=1.5*qs,Q.L=se,Q.j.info("backChannelRequestTimeoutMs_="+se)),se=Q;const to=R.g;if(to){const lc=to.g?to.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lc){var Oe=se.h;Oe.g||lc.indexOf("spdy")==-1&&lc.indexOf("quic")==-1&&lc.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Zf(Oe,Oe.h),Oe.h=null))}if(se.D){const Yy=to.g?to.g.getResponseHeader("X-HTTP-Session-Id"):null;Yy&&(se.ya=Yy,Lr(se.I,se.D,Yy))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-R.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),se=Q;var ut=R;if(se.qa=Tx(se,se.J?se.ia:null,se.W),ut.K){Na(se.h,ut);var Zn=ut,_a=se.L;_a&&(Zn.I=_a),Zn.B&&(ph(Zn),fh(Zn)),se.g=ut}else _t(se);0<Q.i.length&&td(Q)}else $n[0]!="stop"&&$n[0]!="close"||Yc(Q,7);else Q.G==3&&($n[0]=="stop"||$n[0]=="close"?$n[0]=="stop"?Yc(Q,7):qy(Q):$n[0]!="noop"&&Q.l&&Q.l.ta($n),Q.v=0)}}Qe(4)}catch{}}var vx=class{constructor(R,q){this.g=R,this.map=q}};function wa(R){this.l=R||10,s.PerformanceNavigationTiming?(R=s.performance.getEntriesByType("navigation"),R=0<R.length&&(R[0].nextHopProtocol=="hq"||R[0].nextHopProtocol=="h2")):R=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=R?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(R){return R.h?!0:R.g?R.g.size>=R.j:!1}function am(R){return R.h?1:R.g?R.g.size:0}function Tl(R,q){return R.h?R.h==q:R.g?R.g.has(q):!1}function Zf(R,q){R.g?R.g.add(q):R.h=q}function Na(R,q){R.h&&R.h==q?R.h=null:R.g&&R.g.has(q)&&R.g.delete(q)}wa.prototype.cancel=function(){if(this.i=Qf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const R of this.g.values())R.cancel();this.g.clear()}};function Qf(R){if(R.h!=null)return R.i.concat(R.h.D);if(R.g!=null&&R.g.size!==0){let q=R.i;for(const Q of R.g.values())q=q.concat(Q.D);return q}return v(R.i)}function Vy(R){if(R.V&&typeof R.V=="function")return R.V();if(typeof Map<"u"&&R instanceof Map||typeof Set<"u"&&R instanceof Set)return Array.from(R.values());if(typeof R=="string")return R.split("");if(l(R)){for(var q=[],Q=R.length,se=0;se<Q;se++)q.push(R[se]);return q}q=[],Q=0;for(se in R)q[Q++]=R[se];return q}function gh(R){if(R.na&&typeof R.na=="function")return R.na();if(!R.V||typeof R.V!="function"){if(typeof Map<"u"&&R instanceof Map)return Array.from(R.keys());if(!(typeof Set<"u"&&R instanceof Set)){if(l(R)||typeof R=="string"){var q=[];R=R.length;for(var Q=0;Q<R;Q++)q.push(Q);return q}q=[],Q=0;for(const se in R)q[Q++]=se;return q}}}function zy(R,q){if(R.forEach&&typeof R.forEach=="function")R.forEach(q,void 0);else if(l(R)||typeof R=="string")Array.prototype.forEach.call(R,q,void 0);else for(var Q=gh(R),se=Vy(R),Se=se.length,Oe=0;Oe<Se;Oe++)q.call(void 0,se[Oe],Q&&Q[Oe],R)}var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jf(R,q){if(R){R=R.split("&");for(var Q=0;Q<R.length;Q++){var se=R[Q].indexOf("="),Se=null;if(0<=se){var Oe=R[Q].substring(0,se);Se=R[Q].substring(se+1)}else Oe=R[Q];q(Oe,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}function qi(R){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,R instanceof qi){this.h=R.h,mh(this,R.j),this.o=R.o,this.g=R.g,Ju(this,R.s),this.l=R.l;var q=R.i,Q=new us;Q.i=q.i,q.g&&(Q.g=new Map(q.g),Q.h=q.h),$o(this,Q),this.m=R.m}else R&&(q=String(R).match(Vs))?(this.h=!1,mh(this,q[1]||"",!0),this.o=zs(q[2]||""),this.g=zs(q[3]||"",!0),Ju(this,q[4]),this.l=zs(q[5]||"",!0),$o(this,q[6]||"",!0),this.m=zs(q[7]||"")):(this.h=!1,this.i=new us(null,this.h))}qi.prototype.toString=function(){var R=[],q=this.j;q&&R.push(xa(q,om,!0),":");var Q=this.g;return(Q||q=="file")&&(R.push("//"),(q=this.o)&&R.push(xa(q,om,!0),"@"),R.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&R.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&R.push("/"),R.push(xa(Q,Q.charAt(0)=="/"?yx:vh,!0))),(Q=this.i.toString())&&R.push("?",Q),(Q=this.m)&&R.push("#",xa(Q,yh)),R.join("")};function La(R){return new qi(R)}function mh(R,q,Q){R.j=Q?zs(q,!0):q,R.j&&(R.j=R.j.replace(/:$/,""))}function Ju(R,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);R.s=q}else R.s=null}function $o(R,q,Q){q instanceof us?(R.i=q,xx(R.i,R.h)):(Q||(q=xa(q,bx)),R.i=new us(q,R.h))}function Lr(R,q,Q){R.i.set(q,Q)}function ep(R){return Lr(R,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),R}function zs(R,q){return R?q?decodeURI(R.replace(/%25/g,"%2525")):decodeURIComponent(R):""}function xa(R,q,Q){return typeof R=="string"?(R=encodeURI(R).replace(q,tc),Q&&(R=R.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R):null}function tc(R){return R=R.charCodeAt(0),"%"+(R>>4&15).toString(16)+(R&15).toString(16)}var om=/[#\/\?@]/g,vh=/[#\?:]/g,yx=/[#\?]/g,bx=/[#\?@]/g,yh=/#/g;function us(R,q){this.h=this.g=null,this.i=R||null,this.j=!!q}function Hs(R){R.g||(R.g=new Map,R.h=0,R.i&&Jf(R.i,function(q,Q){R.add(decodeURIComponent(q.replace(/\+/g," ")),Q)}))}n=us.prototype,n.add=function(R,q){Hs(this),this.i=null,R=ds(this,R);var Q=this.g.get(R);return Q||this.g.set(R,Q=[]),Q.push(q),this.h+=1,this};function yo(R,q){Hs(R),q=ds(R,q),R.g.has(q)&&(R.i=null,R.h-=R.g.get(q).length,R.g.delete(q))}function El(R,q){return Hs(R),q=ds(R,q),R.g.has(q)}n.forEach=function(R,q){Hs(this),this.g.forEach(function(Q,se){Q.forEach(function(Se){R.call(q,Se,se,this)},this)},this)},n.na=function(){Hs(this);const R=Array.from(this.g.values()),q=Array.from(this.g.keys()),Q=[];for(let se=0;se<q.length;se++){const Se=R[se];for(let Oe=0;Oe<Se.length;Oe++)Q.push(q[se])}return Q},n.V=function(R){Hs(this);let q=[];if(typeof R=="string")El(this,R)&&(q=q.concat(this.g.get(ds(this,R))));else{R=Array.from(this.g.values());for(let Q=0;Q<R.length;Q++)q=q.concat(R[Q])}return q},n.set=function(R,q){return Hs(this),this.i=null,R=ds(this,R),El(this,R)&&(this.h-=this.g.get(R).length),this.g.set(R,[q]),this.h+=1,this},n.get=function(R,q){return R?(R=this.V(R),0<R.length?String(R[0]):q):q};function sm(R,q,Q){yo(R,q),0<Q.length&&(R.i=null,R.g.set(ds(R,q),v(Q)),R.h+=Q.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const R=[],q=Array.from(this.g.keys());for(var Q=0;Q<q.length;Q++){var se=q[Q];const Oe=encodeURIComponent(String(se)),ut=this.V(se);for(se=0;se<ut.length;se++){var Se=Oe;ut[se]!==""&&(Se+="="+encodeURIComponent(String(ut[se]))),R.push(Se)}}return this.i=R.join("&")};function ds(R,q){return q=String(q),R.j&&(q=q.toLowerCase()),q}function xx(R,q){q&&!R.j&&(Hs(R),R.i=null,R.g.forEach(function(Q,se){var Se=se.toLowerCase();se!=Se&&(yo(this,se),sm(this,Se,Q))},R)),R.j=q}function tp(R,q){const Q=new yt;if(s.Image){const se=new Image;se.onload=f(Ja,Q,"TestLoadImage: loaded",!0,q,se),se.onerror=f(Ja,Q,"TestLoadImage: error",!1,q,se),se.onabort=f(Ja,Q,"TestLoadImage: abort",!1,q,se),se.ontimeout=f(Ja,Q,"TestLoadImage: timeout",!1,q,se),s.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=R}else q(!1)}function nc(R,q){const Q=new yt,se=new AbortController,Se=setTimeout(()=>{se.abort(),Ja(Q,"TestPingServer: timeout",!1,q)},1e4);fetch(R,{signal:se.signal}).then(Oe=>{clearTimeout(Se),Oe.ok?Ja(Q,"TestPingServer: ok",!0,q):Ja(Q,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Se),Ja(Q,"TestPingServer: error",!1,q)})}function Ja(R,q,Q,se,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),se(Q)}catch{}}function hs(){this.g=new Ei}function Al(R,q,Q){const se=Q||"";try{zy(R,function(Se,Oe){let ut=Se;c(Se)&&(ut=on(Se)),q.push(se+Oe+"="+encodeURIComponent(ut))})}catch(Se){throw q.push(se+"type="+encodeURIComponent("_badmap")),Se}}function rc(R){this.l=R.Ub||null,this.j=R.eb||!1}m(rc,mi),rc.prototype.g=function(){return new ic(this.l,this.j)},rc.prototype.i=function(R){return function(){return R}}({});function ic(R,q){Te.call(this),this.D=R,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(ic,Te),n=ic.prototype,n.open=function(R,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=R,this.A=q,this.readyState=1,Hc(this)},n.send=function(R){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};R&&(q.body=R),(this.D||s).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ac(this)),this.readyState=0},n.Sa=function(R){if(this.g&&(this.l=R,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=R.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if(this.responseType==="arraybuffer")R.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in R){if(this.j=R.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;np(this)}else R.text().then(this.Ra.bind(this),this.ga.bind(this))};function np(R){R.j.read().then(R.Pa.bind(R)).catch(R.ga.bind(R))}n.Pa=function(R){if(this.g){if(this.o&&R.value)this.response.push(R.value);else if(!this.o){var q=R.value?R.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!R.done}))&&(this.response=this.responseText+=q)}R.done?ac(this):Hc(this),this.readyState==3&&np(this)}},n.Ra=function(R){this.g&&(this.response=this.responseText=R,ac(this))},n.Qa=function(R){this.g&&(this.response=R,ac(this))},n.ga=function(){this.g&&ac(this)};function ac(R){R.readyState=4,R.l=null,R.j=null,R.v=null,Hc(R)}n.setRequestHeader=function(R,q){this.u.append(R,q)},n.getResponseHeader=function(R){return this.h&&this.h.get(R.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const R=[],q=this.h.entries();for(var Q=q.next();!Q.done;)Q=Q.value,R.push(Q[0]+": "+Q[1]),Q=q.next();return R.join(`\r
`)};function Hc(R){R.onreadystatechange&&R.onreadystatechange.call(R)}Object.defineProperty(ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(R){this.m=R?"include":"same-origin"}});function lm(R){let q="";return k(R,function(Q,se){q+=se,q+=":",q+=Q,q+=`\r
`}),q}function Wi(R,q,Q){e:{for(se in Q){var se=!1;break e}se=!0}se||(Q=lm(Q),typeof R=="string"?Q!=null&&encodeURIComponent(String(Q)):Lr(R,q,Q))}function rr(R){Te.call(this),this.headers=new Map,this.o=R||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(rr,Te);var Gc=/^https?$/i,ed=["POST","PUT"];n=rr.prototype,n.Ha=function(R){this.J=R},n.ea=function(R,q,Q,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+R);q=q?q.toUpperCase():"GET",this.D=R,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sa.g(),this.v=this.o?Xe(this.o):Xe(sa),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(q,String(R),!0),this.B=!1}catch(Oe){Hy(this,Oe);return}if(R=Q||"",Q=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Se in se)Q.set(Se,se[Se]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Oe of se.keys())Q.set(Oe,se.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(Q.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),Se=s.FormData&&R instanceof s.FormData,!(0<=Array.prototype.indexOf.call(ed,q,void 0))||se||Se||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,ut]of Q)this.g.setRequestHeader(Oe,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(R),this.u=!1}catch(Oe){Hy(this,Oe)}};function Hy(R,q){R.h=!1,R.g&&(R.j=!0,R.g.abort(),R.j=!1),R.l=q,R.m=5,cm(R),Gs(R)}function cm(R){R.A||(R.A=!0,Ne(R,"complete"),Ne(R,"error"))}n.abort=function(R){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=R||7,Ne(this,"complete"),Ne(this,"abort"),Gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gs(this,!0)),rr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bh(this):this.bb())},n.bb=function(){bh(this)};function bh(R){if(R.h&&typeof o<"u"&&(!R.v[1]||kl(R)!=4||R.Z()!=2)){if(R.u&&kl(R)==4)xt(R.Ea,0,R);else if(Ne(R,"readystatechange"),kl(R)==4){R.h=!1;try{const ut=R.Z();e:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var Q;if(!(Q=q)){var se;if(se=ut===0){var Se=String(R.D).match(Vs)[1]||null;!Se&&s.self&&s.self.location&&(Se=s.self.location.protocol.slice(0,-1)),se=!Gc.test(Se?Se.toLowerCase():"")}Q=se}if(Q)Ne(R,"complete"),Ne(R,"success");else{R.m=6;try{var Oe=2<kl(R)?R.g.statusText:""}catch{Oe=""}R.l=Oe+" ["+R.Z()+"]",cm(R)}}finally{Gs(R)}}}}function Gs(R,q){if(R.g){wh(R);const Q=R.g,se=R.v[0]?()=>{}:null;R.g=null,R.v=null,q||Ne(R,"ready");try{Q.onreadystatechange=se}catch{}}}function wh(R){R.I&&(s.clearTimeout(R.I),R.I=null)}n.isActive=function(){return!!this.g};function kl(R){return R.g?R.g.readyState:0}n.Z=function(){try{return 2<kl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(R){if(this.g){var q=this.g.responseText;return R&&q.indexOf(R)==0&&(q=q.substring(R.length)),zr(q)}};function Gy(R){try{if(!R.g)return null;if("response"in R.g)return R.g.response;switch(R.H){case"":case"text":return R.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in R.g)return R.g.mozResponseArrayBuffer}return null}catch{return null}}function qc(R){const q={};R=(R.g&&2<=kl(R)&&R.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<R.length;se++){if(_(R[se]))continue;var Q=L(R[se]);const Se=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Oe=q[Se]||[];q[Se]=Oe,Oe.push(Q)}M(q,function(se){return se.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oc(R,q,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[R]||q}function um(R){this.Aa=0,this.i=[],this.j=new yt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oc("failFast",!1,R),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oc("baseRetryDelayMs",5e3,R),this.cb=oc("retryDelaySeedMs",1e4,R),this.Wa=oc("forwardChannelMaxRetries",2,R),this.wa=oc("forwardChannelRequestTimeoutMs",2e4,R),this.pa=R&&R.xmlHttpFactory||void 0,this.Xa=R&&R.Tb||void 0,this.Ca=R&&R.useFetchStreams||!1,this.L=void 0,this.J=R&&R.supportsCrossDomainXhr||!1,this.K="",this.h=new wa(R&&R.concurrentRequestLimit),this.Da=new hs,this.P=R&&R.fastHandshake||!1,this.O=R&&R.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=R&&R.Rb||!1,R&&R.xa&&this.j.xa(),R&&R.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&R&&R.detectBufferingProxy||!1,this.ja=void 0,R&&R.longPollingTimeout&&0<R.longPollingTimeout&&(this.ja=R.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=um.prototype,n.la=8,n.G=1,n.connect=function(R,q,Q,se){Dt(0),this.W=R,this.H=q||{},Q&&se!==void 0&&(this.H.OSID=Q,this.H.OAID=se),this.F=this.X,this.I=Tx(this,null,this.W),td(this)};function qy(R){if(_x(R),R.G==3){var q=R.U++,Q=La(R.I);if(Lr(Q,"SID",R.K),Lr(Q,"RID",q),Lr(Q,"TYPE","terminate"),Wc(R,Q),q=new Qa(R,R.j,q),q.L=2,q.v=ep(La(Q)),Q=!1,s.navigator&&s.navigator.sendBeacon)try{Q=s.navigator.sendBeacon(q.v.toString(),"")}catch{}!Q&&s.Image&&(new Image().src=q.v,Q=!0),Q||(q.g=Ex(q.j,null),q.g.ea(q.v)),q.F=Date.now(),fh(q)}Sx(R)}function dm(R){R.g&&(rp(R),R.g.cancel(),R.g=null)}function _x(R){dm(R),R.u&&(s.clearTimeout(R.u),R.u=null),ip(R),R.h.cancel(),R.s&&(typeof R.s=="number"&&s.clearTimeout(R.s),R.s=null)}function td(R){if(!la(R.h)&&!R.s){R.s=!0;var q=R.Ga;X||z(),te||(X(),te=!0),re.add(q,R),R.B=0}}function sn(R,q){return am(R.h)>=R.h.j-(R.s?1:0)?!1:R.s?(R.i=q.D.concat(R.i),!0):R.G==1||R.G==2||R.B>=(R.Va?0:R.Wa)?!1:(R.s=Bt(h(R.Ga,R,q),sc(R,R.B)),R.B++,!0)}n.Ga=function(R){if(this.s)if(this.s=null,this.G==1){if(!R){this.U=Math.floor(1e5*Math.random()),R=this.U++;const Se=new Qa(this,this.j,R);let Oe=this.o;if(this.S&&(Oe?(Oe=P(Oe),j(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(Se.H=Oe,Oe=null),this.P)e:{for(var q=0,Q=0;Q<this.i.length;Q++){t:{var se=this.i[Q];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(q+=se,4096<q){q=Q;break e}if(q===4096||Q===this.i.length-1){q=Q+1;break e}}q=1e3}else q=1e3;q=ir(this,Se,q),Q=La(this.I),Lr(Q,"RID",R),Lr(Q,"CVER",22),this.D&&Lr(Q,"X-HTTP-Session-Id",this.D),Wc(this,Q),Oe&&(this.O?q="headers="+encodeURIComponent(String(lm(Oe)))+"&"+q:this.m&&Wi(Q,this.m,Oe)),Zf(this.h,Se),this.Ua&&Lr(Q,"TYPE","init"),this.P?(Lr(Q,"$req",q),Lr(Q,"SID","null"),Se.T=!0,Ra(Se,Q,null)):Ra(Se,Q,q),this.G=2}}else this.G==3&&(R?xh(this,R):this.i.length==0||la(this.h)||xh(this))};function xh(R,q){var Q;q?Q=q.l:Q=R.U++;const se=La(R.I);Lr(se,"SID",R.K),Lr(se,"RID",Q),Lr(se,"AID",R.T),Wc(R,se),R.m&&R.o&&Wi(se,R.m,R.o),Q=new Qa(R,R.j,Q,R.B+1),R.m===null&&(Q.H=R.o),q&&(R.i=q.D.concat(R.i)),q=ir(R,Q,1e3),Q.I=Math.round(.5*R.wa)+Math.round(.5*R.wa*Math.random()),Zf(R.h,Q),Ra(Q,se,q)}function Wc(R,q){R.H&&k(R.H,function(Q,se){Lr(q,se,Q)}),R.l&&zy({},function(Q,se){Lr(q,se,Q)})}function ir(R,q,Q){Q=Math.min(R.i.length,Q);var se=R.l?h(R.l.Na,R.l,R):null;e:{var Se=R.i;let Oe=-1;for(;;){const ut=["count="+Q];Oe==-1?0<Q?(Oe=Se[0].g,ut.push("ofs="+Oe)):Oe=0:ut.push("ofs="+Oe);let Zn=!0;for(let _a=0;_a<Q;_a++){let $n=Se[_a].g;const Fa=Se[_a].map;if($n-=Oe,0>$n)Oe=Math.max(0,Se[_a].g-100),Zn=!1;else try{Al(Fa,ut,"req"+$n+"_")}catch{se&&se(Fa)}}if(Zn){se=ut.join("&");break e}}}return R=R.i.splice(0,Q),q.D=R,se}function _t(R){if(!R.g&&!R.u){R.Y=1;var q=R.Fa;X||z(),te||(X(),te=!0),re.add(q,R),R.v=0}}function Wy(R){return R.g||R.u||3<=R.v?!1:(R.Y++,R.u=Bt(h(R.Fa,R),sc(R,R.v)),R.v++,!0)}n.Fa=function(){if(this.u=null,yi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var R=2*this.R;this.j.info("BP detection timer enabled: "+R),this.A=Bt(h(this.ab,this),R)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),dm(this),yi(this))};function rp(R){R.A!=null&&(s.clearTimeout(R.A),R.A=null)}function yi(R){R.g=new Qa(R,R.j,"rpc",R.Y),R.m===null&&(R.g.H=R.o),R.g.O=0;var q=La(R.qa);Lr(q,"RID","rpc"),Lr(q,"SID",R.K),Lr(q,"AID",R.T),Lr(q,"CI",R.F?"0":"1"),!R.F&&R.ja&&Lr(q,"TO",R.ja),Lr(q,"TYPE","xmlhttp"),Wc(R,q),R.m&&R.o&&Wi(q,R.m,R.o),R.L&&(R.g.I=R.L);var Q=R.g;R=R.ia,Q.L=1,Q.v=ep(La(q)),Q.m=null,Q.P=!0,Sl(Q,R)}n.Za=function(){this.C!=null&&(this.C=null,dm(this),Wy(this),Dt(19))};function ip(R){R.C!=null&&(s.clearTimeout(R.C),R.C=null)}function ja(R,q){var Q=null;if(R.g==q){ip(R),rp(R),R.g=null;var se=2}else if(Tl(R.h,q))Q=q.D,Na(R.h,q),se=1;else return;if(R.G!=0){if(q.o)if(se==1){Q=q.m?q.m.length:0,q=Date.now()-q.F;var Se=R.B;se=pe(),Ne(se,new ft(se,Q)),td(R)}else _t(R);else if(Se=q.s,Se==3||Se==0&&0<q.X||!(se==1&&sn(R,q)||se==2&&Wy(R)))switch(Q&&0<Q.length&&(q=R.h,q.i=q.i.concat(Q)),Se){case 1:Yc(R,5);break;case 4:Yc(R,10);break;case 3:Yc(R,6);break;default:Yc(R,2)}}}function sc(R,q){let Q=R.Ta+Math.floor(Math.random()*R.cb);return R.isActive()||(Q*=2),Q*q}function Yc(R,q){if(R.j.info("Error code "+q),q==2){var Q=h(R.fb,R),se=R.Xa;const Se=!se;se=new qi(se||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||mh(se,"https"),ep(se),Se?tp(se.toString(),Q):nc(se.toString(),Q)}else Dt(2);R.G=0,R.l&&R.l.sa(q),Sx(R),_x(R)}n.fb=function(R){R?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Sx(R){if(R.G=0,R.ka=[],R.l){const q=Qf(R.h);(q.length!=0||R.i.length!=0)&&(y(R.ka,q),y(R.ka,R.i),R.h.i.length=0,v(R.i),R.i.length=0),R.l.ra()}}function Tx(R,q,Q){var se=Q instanceof qi?La(Q):new qi(Q);if(se.g!="")q&&(se.g=q+"."+se.g),Ju(se,se.s);else{var Se=s.location;se=Se.protocol,q=q?q+"."+Se.hostname:Se.hostname,Se=+Se.port;var Oe=new qi(null);se&&mh(Oe,se),q&&(Oe.g=q),Se&&Ju(Oe,Se),Q&&(Oe.l=Q),se=Oe}return Q=R.D,q=R.ya,Q&&q&&Lr(se,Q,q),Lr(se,"VER",R.la),Wc(R,se),se}function Ex(R,q,Q){if(q&&!R.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=R.Ca&&!R.pa?new rr(new rc({eb:Q})):new rr(R.pa),q.Ha(R.J),q}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hm(){}n=hm.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fm(){}fm.prototype.g=function(R,q){return new eo(R,q)};function eo(R,q){Te.call(this),this.g=new um(q),this.l=R,this.h=q&&q.messageUrlParams||null,R=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(R?R["X-Client-Protocol"]="webchannel":R={"X-Client-Protocol":"webchannel"}),this.g.o=R,R=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(R?R["X-WebChannel-Content-Type"]=q.messageContentType:R={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(R?R["X-WebChannel-Client-Profile"]=q.va:R={"X-WebChannel-Client-Profile":q.va}),this.g.S=R,(R=q&&q.Sb)&&!_(R)&&(this.g.m=R),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!_(q)&&(this.g.D=q,R=this.h,R!==null&&q in R&&(R=this.h,q in R&&delete R[q])),this.j=new Kc(this)}m(eo,Te),eo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},eo.prototype.close=function(){qy(this.g)},eo.prototype.o=function(R){var q=this.g;if(typeof R=="string"){var Q={};Q.__data__=R,R=Q}else this.u&&(Q={},Q.__data__=on(R),R=Q);q.i.push(new vx(q.Ya++,R)),q.G==3&&td(q)},eo.prototype.N=function(){this.g.l=null,delete this.j,qy(this.g),delete this.g,eo.aa.N.call(this)};function Ax(R){Tt.call(this),R.__headers__&&(this.headers=R.__headers__,this.statusCode=R.__status__,delete R.__headers__,delete R.__status__);var q=R.__sm__;if(q){e:{for(const Q in q){R=Q;break e}R=void 0}(this.i=R)&&(R=this.i,q=q!==null&&R in q?q[R]:void 0),this.data=q}else this.data=R}m(Ax,Tt);function kx(){nr.call(this),this.status=1}m(kx,nr);function Kc(R){this.g=R}m(Kc,hm),Kc.prototype.ua=function(){Ne(this.g,"a")},Kc.prototype.ta=function(R){Ne(this.g,new Ax(R))},Kc.prototype.sa=function(R){Ne(this.g,new kx)},Kc.prototype.ra=function(){Ne(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,eo.prototype.send=eo.prototype.o,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,Hge=function(){return new fm},zge=function(){return pe()},Vge=oe,Sz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,CR=oa,Jl.COMPLETE="complete",Uge=Jl,Be.EventType=Ke,Ke.OPEN="a",Ke.CLOSE="b",Ke.ERROR="c",Ke.MESSAGE="d",Te.prototype.listen=Te.prototype.K,jk=Be,rr.prototype.listenOnce=rr.prototype.L,rr.prototype.getLastError=rr.prototype.Ka,rr.prototype.getLastErrorCode=rr.prototype.Ba,rr.prototype.getStatus=rr.prototype.Z,rr.prototype.getResponseJson=rr.prototype.Oa,rr.prototype.getResponseText=rr.prototype.oa,rr.prototype.send=rr.prototype.ea,rr.prototype.setWithCredentials=rr.prototype.Ha,Bge=rr}).apply(typeof jP<"u"?jP:typeof self<"u"?self:typeof window<"u"?window:{});const TZ="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Is.UNAUTHENTICATED=new Is(null),Is.GOOGLE_CREDENTIALS=new Is("google-credentials-uid"),Is.FIRST_PARTY=new Is("first-party-uid"),Is.MOCK_USER=new Is("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xT="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new OI("@firebase/firestore");function jA(){return Iw.logLevel}function Ft(n,...e){if(Iw.logLevel<=hr.DEBUG){const t=e.map(sq);Iw.debug(`Firestore (${xT}): ${n}`,...t)}}function Ig(n,...e){if(Iw.logLevel<=hr.ERROR){const t=e.map(sq);Iw.error(`Firestore (${xT}): ${n}`,...t)}}function I1(n,...e){if(Iw.logLevel<=hr.WARN){const t=e.map(sq);Iw.warn(`Firestore (${xT}): ${n}`,...t)}}function sq(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n="Unexpected state"){const e=`FIRESTORE (${xT}) INTERNAL ASSERTION FAILED: `+n;throw Ig(e),new Error(e)}function ii(n,e){n||Cn()}function Rn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gge{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JMe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Is.UNAUTHENTICATED))}shutdown(){}}class ePe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tPe{constructor(e){this.t=e,this.currentUser=Is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ii(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let a=new mg;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mg,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mg)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ii(typeof r.accessToken=="string"),new Gge(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ii(e===null||typeof e=="string"),new Is(e)}}class nPe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Is.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rPe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nPe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iPe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aPe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ii(this.o===void 0);const r=a=>{a.error!=null&&Ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ii(typeof t.token=="string"),this.R=t.token,new iPe(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oPe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=oPe(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Mr(n,e){return n<e?-1:n>e?1:0}function M1(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new At(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new At(qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new At(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new At(qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.timestamp=e}static fromTimestamp(e){return new On(e)}static min(){return new On(new Kr(0,0))}static max(){return new On(new Kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r){t===void 0?t=0:t>e.length&&Cn(),r===void 0?r=e.length-t:r>e.length-t&&Cn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return tD.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tD?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),o=t.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ui extends tD{construct(e,t,r){return new Ui(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new At(qe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ui(t)}static emptyPath(){return new Ui([])}}const sPe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qo extends tD{construct(e,t,r){return new Qo(e,t,r)}static isValidIdentifier(e){return sPe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qo(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new At(qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new At(qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new At(qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new At(qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qo(t)}static emptyPath(){return new Qo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.path=e}static fromPath(e){return new nn(Ui.fromString(e))}static fromName(e){return new nn(Ui.fromString(e).popFirst(5))}static empty(){return new nn(Ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ui.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ui.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nn(new Ui(e.slice()))}}function lPe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=On.fromTimestamp(r===1e9?new Kr(t+1,0):new Kr(t,r));return new fy(i,nn.empty(),e)}function cPe(n){return new fy(n.readTime,n.key,-1)}class fy{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new fy(On.min(),nn.empty(),-1)}static max(){return new fy(On.max(),nn.empty(),-1)}}function uPe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nn.comparator(n.documentKey,e.documentKey),t!==0?t:Mr(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dPe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hPe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(n){if(n.code!==qe.FAILED_PRECONDITION||n.message!==dPe)throw n;Ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,r)=>{t(e)})}static reject(e){return new et((t,r)=>{r(e)})}static waitFor(e){return new et((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},l=>r(l))}),o=!0,a===i&&t()})}static or(e){let t=et.resolve(!1);for(const r of e)t=t.next(i=>i?et.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new et((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let l=0;l<a;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++s,s===a&&r(o)},u=>i(u))}})}static doWhile(e,t){return new et((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function fPe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function NI(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lq.oe=-1;function HL(n){return n==null}function bN(n){return n===0&&1/n==-1/0}function pPe(n){return typeof n=="number"&&Number.isInteger(n)&&!bN(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qw(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Wge(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.comparator=e,this.root=t||Zo.EMPTY}insert(e,t){return new ia(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zo.BLACK,null,null))}remove(e){return new ia(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new FP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new FP(this.root,e,this.comparator,!1)}getReverseIterator(){return new FP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new FP(this.root,e,this.comparator,!0)}}class FP{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zo{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Zo.RED,this.left=i??Zo.EMPTY,this.right=a??Zo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Zo(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Cn();const e=this.left.check();if(e!==this.right.check())throw Cn();return e+(this.isRed()?0:1)}}Zo.EMPTY=null,Zo.RED=!0,Zo.BLACK=!1;Zo.EMPTY=new class{constructor(){this.size=0}get key(){throw Cn()}get value(){throw Cn()}get color(){throw Cn()}get left(){throw Cn()}get right(){throw Cn()}copy(e,t,r,i,a){return this}insert(e,t,r){return new Zo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.comparator=e,this.data=new ia(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AZ(this.data.getIterator())}getIteratorFrom(e){return new AZ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ts)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ts(this.comparator);return t.data=e,t}}class AZ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.fields=e,e.sort(Qo.comparator)}static empty(){return new Nc([])}unionWith(e){let t=new ts(Qo.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return M1(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yge extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Yge("Invalid base64 string: "+a):a}}(e);return new rs(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new rs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rs.EMPTY_BYTE_STRING=new rs("");const gPe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function py(n){if(ii(!!n),typeof n=="string"){let e=0;const t=gPe.exec(n);if(ii(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ka(n.seconds),nanos:ka(n.nanos)}}function ka(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mw(n){return typeof n=="string"?rs.fromBase64String(n):rs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function uq(n){const e=n.mapValue.fields.__previous_value__;return cq(e)?uq(e):e}function nD(n){const e=py(n.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPe{constructor(e,t,r,i,a,o,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class rD{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rD("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rD&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={mapValue:{}};function Pw(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cq(n)?4:yPe(n)?9007199254740991:vPe(n)?10:11:Cn()}function Mf(n,e){if(n===e)return!0;const t=Pw(n);if(t!==Pw(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nD(n).isEqual(nD(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=py(i.timestampValue),s=py(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return Mw(i.bytesValue).isEqual(Mw(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ka(i.geoPointValue.latitude)===ka(a.geoPointValue.latitude)&&ka(i.geoPointValue.longitude)===ka(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ka(i.integerValue)===ka(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ka(i.doubleValue),s=ka(a.doubleValue);return o===s?bN(o)===bN(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return M1(n.arrayValue.values||[],e.arrayValue.values||[],Mf);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(EZ(o)!==EZ(s))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(s[l]===void 0||!Mf(o[l],s[l])))return!1;return!0}(n,e);default:return Cn()}}function iD(n,e){return(n.values||[]).find(t=>Mf(t,e))!==void 0}function P1(n,e){if(n===e)return 0;const t=Pw(n),r=Pw(e);if(t!==r)return Mr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mr(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=ka(a.integerValue||a.doubleValue),l=ka(o.integerValue||o.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(n,e);case 3:return kZ(n.timestampValue,e.timestampValue);case 4:return kZ(nD(n),nD(e));case 5:return Mr(n.stringValue,e.stringValue);case 6:return function(a,o){const s=Mw(a),l=Mw(o);return s.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),l=o.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=Mr(s[c],l[c]);if(u!==0)return u}return Mr(s.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=Mr(ka(a.latitude),ka(o.latitude));return s!==0?s:Mr(ka(a.longitude),ka(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CZ(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,l,c,u;const d=a.fields||{},h=o.fields||{},f=(s=d.value)===null||s===void 0?void 0:s.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=Mr(((c=f==null?void 0:f.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:CZ(f,m)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===$P.mapValue&&o===$P.mapValue)return 0;if(a===$P.mapValue)return 1;if(o===$P.mapValue)return-1;const s=a.fields||{},l=Object.keys(s),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=Mr(l[d],u[d]);if(h!==0)return h;const f=P1(s[l[d]],c[u[d]]);if(f!==0)return f}return Mr(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Cn()}}function kZ(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Mr(n,e);const t=py(n),r=py(e),i=Mr(t.seconds,r.seconds);return i!==0?i:Mr(t.nanos,r.nanos)}function CZ(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=P1(t[i],r[i]);if(a)return a}return Mr(t.length,r.length)}function O1(n){return Tz(n)}function Tz(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=py(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Mw(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return nn.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Tz(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Tz(t.fields[o])}`;return i+"}"}(n.mapValue):Cn()}function DZ(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ez(n){return!!n&&"integerValue"in n}function dq(n){return!!n&&"arrayValue"in n}function IZ(n){return!!n&&"nullValue"in n}function MZ(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function DR(n){return!!n&&"mapValue"in n}function vPe(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function dC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qw(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yPe(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.value=e}static empty(){return new Gl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!DR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dC(t)}setAll(e){let t=Qo.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=dC(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());DR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];DR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qw(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Gl(dC(this.value))}}function Kge(n){const e=[];return Qw(n.fields,(t,r)=>{const i=new Qo([t]);if(DR(r)){const a=Kge(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Nc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Os(e,0,On.min(),On.min(),On.min(),Gl.empty(),0)}static newFoundDocument(e,t,r,i){return new Os(e,1,t,On.min(),r,i,0)}static newNoDocument(e,t){return new Os(e,2,t,On.min(),On.min(),Gl.empty(),0)}static newUnknownDocument(e,t){return new Os(e,3,t,On.min(),On.min(),Gl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(On.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=On.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t){this.position=e,this.inclusive=t}}function PZ(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=nn.comparator(nn.fromName(o.referenceValue),t.key):r=P1(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function OZ(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mf(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t="asc"){this.field=e,this.dir=t}}function bPe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xge{}class Wa extends Xge{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xPe(e,t,r):t==="array-contains"?new TPe(e,r):t==="in"?new EPe(e,r):t==="not-in"?new APe(e,r):t==="array-contains-any"?new kPe(e,r):new Wa(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _Pe(e,r):new SPe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(P1(t,this.value)):t!==null&&Pw(this.value)===Pw(t)&&this.matchesComparison(P1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rh extends Xge{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rh(e,t)}matches(e){return Zge(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zge(n){return n.op==="and"}function Qge(n){return wPe(n)&&Zge(n)}function wPe(n){for(const e of n.filters)if(e instanceof rh)return!1;return!0}function Az(n){if(n instanceof Wa)return n.field.canonicalString()+n.op.toString()+O1(n.value);if(Qge(n))return n.filters.map(e=>Az(e)).join(",");{const e=n.filters.map(t=>Az(t)).join(",");return`${n.op}(${e})`}}function Jge(n,e){return n instanceof Wa?function(r,i){return i instanceof Wa&&r.op===i.op&&r.field.isEqual(i.field)&&Mf(r.value,i.value)}(n,e):n instanceof rh?function(r,i){return i instanceof rh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&Jge(o,i.filters[s]),!0):!1}(n,e):void Cn()}function eme(n){return n instanceof Wa?function(t){return`${t.field.canonicalString()} ${t.op} ${O1(t.value)}`}(n):n instanceof rh?function(t){return t.op.toString()+" {"+t.getFilters().map(eme).join(" ,")+"}"}(n):"Filter"}class xPe extends Wa{constructor(e,t,r){super(e,t,r),this.key=nn.fromName(r.referenceValue)}matches(e){const t=nn.comparator(e.key,this.key);return this.matchesComparison(t)}}class _Pe extends Wa{constructor(e,t){super(e,"in",t),this.keys=tme("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SPe extends Wa{constructor(e,t){super(e,"not-in",t),this.keys=tme("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tme(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>nn.fromName(r.referenceValue))}class TPe extends Wa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dq(t)&&iD(t.arrayValue,this.value)}}class EPe extends Wa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&iD(this.value.arrayValue,t)}}class APe extends Wa{constructor(e,t){super(e,"not-in",t)}matches(e){if(iD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!iD(this.value.arrayValue,t)}}class kPe extends Wa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dq(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>iD(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CPe{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ue=null}}function RZ(n,e=null,t=[],r=[],i=null,a=null,o=null){return new CPe(n,e,t,r,i,a,o)}function hq(n){const e=Rn(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Az(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),HL(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>O1(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>O1(r)).join(",")),e.ue=t}return e.ue}function fq(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bPe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jge(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OZ(n.startAt,e.startAt)&&OZ(n.endAt,e.endAt)}function kz(n){return nn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DPe(n,e,t,r,i,a,o,s){return new _T(n,e,t,r,i,a,o,s)}function GL(n){return new _T(n)}function NZ(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nme(n){return n.collectionGroup!==null}function hC(n){const e=Rn(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new ts(Qo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new aD(a,r))}),t.has(Qo.keyField().canonicalString())||e.ce.push(new aD(Qo.keyField(),r))}return e.ce}function Ef(n){const e=Rn(n);return e.le||(e.le=IPe(e,hC(n))),e.le}function IPe(n,e){if(n.limitType==="F")return RZ(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new aD(i.field,a)});const t=n.endAt?new wN(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wN(n.startAt.position,n.startAt.inclusive):null;return RZ(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cz(n,e){const t=n.filters.concat([e]);return new _T(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xN(n,e,t){return new _T(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qL(n,e){return fq(Ef(n),Ef(e))&&n.limitType===e.limitType}function rme(n){return`${hq(Ef(n))}|lt:${n.limitType}`}function OS(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eme(i)).join(", ")}]`),HL(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>O1(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>O1(i)).join(",")),`Target(${r})`}(Ef(n))}; limitType=${n.limitType})`}function WL(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):nn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of hC(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,l){const c=PZ(o,s,l);return o.inclusive?c<=0:c<0}(r.startAt,hC(r),i)||r.endAt&&!function(o,s,l){const c=PZ(o,s,l);return o.inclusive?c>=0:c>0}(r.endAt,hC(r),i))}(n,e)}function MPe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ime(n){return(e,t)=>{let r=!1;for(const i of hC(n)){const a=PPe(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function PPe(n,e,t){const r=n.field.isKeyField()?nn.comparator(e.key,t.key):function(a,o,s){const l=o.data.field(a),c=s.data.field(a);return l!==null&&c!==null?P1(l,c):Cn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Cn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qw(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Wge(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OPe=new ia(nn.comparator);function Mg(){return OPe}const ame=new ia(nn.comparator);function Fk(...n){let e=ame;for(const t of n)e=e.insert(t.key,t);return e}function ome(n){let e=ame;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qb(){return fC()}function sme(){return fC()}function fC(){return new ST(n=>n.toString(),(n,e)=>n.isEqual(e))}const RPe=new ia(nn.comparator),NPe=new ts(nn.comparator);function pr(...n){let e=NPe;for(const t of n)e=e.add(t);return e}const LPe=new ts(Mr);function jPe(){return LPe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bN(e)?"-0":e}}function lme(n){return{integerValue:""+n}}function cme(n,e){return pPe(e)?lme(e):pq(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this._=void 0}}function FPe(n,e,t){return n instanceof oD?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&cq(a)&&(a=uq(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(t,e):n instanceof sD?dme(n,e):n instanceof lD?hme(n,e):function(i,a){const o=ume(i,a),s=LZ(o)+LZ(i.Pe);return Ez(o)&&Ez(i.Pe)?lme(s):pq(i.serializer,s)}(n,e)}function $Pe(n,e,t){return n instanceof sD?dme(n,e):n instanceof lD?hme(n,e):t}function ume(n,e){return n instanceof cD?function(r){return Ez(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class oD extends YL{}class sD extends YL{constructor(e){super(),this.elements=e}}function dme(n,e){const t=fme(e);for(const r of n.elements)t.some(i=>Mf(i,r))||t.push(r);return{arrayValue:{values:t}}}class lD extends YL{constructor(e){super(),this.elements=e}}function hme(n,e){let t=fme(e);for(const r of n.elements)t=t.filter(i=>!Mf(i,r));return{arrayValue:{values:t}}}class cD extends YL{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function LZ(n){return ka(n.integerValue||n.doubleValue)}function fme(n){return dq(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(e,t){this.field=e,this.transform=t}}function BPe(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof sD&&i instanceof sD||r instanceof lD&&i instanceof lD?M1(r.elements,i.elements,Mf):r instanceof cD&&i instanceof cD?Mf(r.Pe,i.Pe):r instanceof oD&&i instanceof oD}(n.transform,e.transform)}class UPe{constructor(e,t){this.version=e,this.transformResults=t}}class dl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dl}static exists(e){return new dl(void 0,e)}static updateTime(e){return new dl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function IR(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class KL{}function gme(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new XL(n.key,dl.none()):new LI(n.key,n.data,dl.none());{const t=n.data,r=Gl.empty();let i=new ts(Qo.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Cy(n.key,r,new Nc(i.toArray()),dl.none())}}function VPe(n,e,t){n instanceof LI?function(i,a,o){const s=i.value.clone(),l=FZ(i.fieldTransforms,a,o.transformResults);s.setAll(l),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof Cy?function(i,a,o){if(!IR(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=FZ(i.fieldTransforms,a,o.transformResults),l=a.data;l.setAll(mme(i)),l.setAll(s),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function pC(n,e,t,r){return n instanceof LI?function(a,o,s,l){if(!IR(a.precondition,o))return s;const c=a.value.clone(),u=$Z(a.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cy?function(a,o,s,l){if(!IR(a.precondition,o))return s;const c=$Z(a.fieldTransforms,l,o),u=o.data;return u.setAll(mme(a)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(a,o,s){return IR(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function zPe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ume(r.transform,i||null);a!=null&&(t===null&&(t=Gl.empty()),t.set(r.field,a))}return t||null}function jZ(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&M1(r,i,(a,o)=>BPe(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class LI extends KL{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cy extends KL{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function mme(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FZ(n,e,t){const r=new Map;ii(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,$Pe(o,s,t[i]))}return r}function $Z(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,FPe(a,o,e))}return r}class XL extends KL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HPe extends KL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GPe{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&VPe(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sme();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const l=gme(o,s);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(On.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pr())}isEqual(e){return this.batchId===e.batchId&&M1(this.mutations,e.mutations,(t,r)=>jZ(t,r))&&M1(this.baseMutations,e.baseMutations,(t,r)=>jZ(t,r))}}class gq{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ii(e.mutations.length===r.length);let i=function(){return RPe}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new gq(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qPe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WPe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Va,_r;function YPe(n){switch(n){default:return Cn();case qe.CANCELLED:case qe.UNKNOWN:case qe.DEADLINE_EXCEEDED:case qe.RESOURCE_EXHAUSTED:case qe.INTERNAL:case qe.UNAVAILABLE:case qe.UNAUTHENTICATED:return!1;case qe.INVALID_ARGUMENT:case qe.NOT_FOUND:case qe.ALREADY_EXISTS:case qe.PERMISSION_DENIED:case qe.FAILED_PRECONDITION:case qe.ABORTED:case qe.OUT_OF_RANGE:case qe.UNIMPLEMENTED:case qe.DATA_LOSS:return!0}}function vme(n){if(n===void 0)return Ig("GRPC error has no .code"),qe.UNKNOWN;switch(n){case Va.OK:return qe.OK;case Va.CANCELLED:return qe.CANCELLED;case Va.UNKNOWN:return qe.UNKNOWN;case Va.DEADLINE_EXCEEDED:return qe.DEADLINE_EXCEEDED;case Va.RESOURCE_EXHAUSTED:return qe.RESOURCE_EXHAUSTED;case Va.INTERNAL:return qe.INTERNAL;case Va.UNAVAILABLE:return qe.UNAVAILABLE;case Va.UNAUTHENTICATED:return qe.UNAUTHENTICATED;case Va.INVALID_ARGUMENT:return qe.INVALID_ARGUMENT;case Va.NOT_FOUND:return qe.NOT_FOUND;case Va.ALREADY_EXISTS:return qe.ALREADY_EXISTS;case Va.PERMISSION_DENIED:return qe.PERMISSION_DENIED;case Va.FAILED_PRECONDITION:return qe.FAILED_PRECONDITION;case Va.ABORTED:return qe.ABORTED;case Va.OUT_OF_RANGE:return qe.OUT_OF_RANGE;case Va.UNIMPLEMENTED:return qe.UNIMPLEMENTED;case Va.DATA_LOSS:return qe.DATA_LOSS;default:return Cn()}}(_r=Va||(Va={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KPe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XPe=new pw([4294967295,4294967295],0);function BZ(n){const e=KPe().encode(n),t=new $ge;return t.update(e),new Uint8Array(t.digest())}function UZ(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new pw([t,r],0),new pw([i,a],0)]}class mq{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $k(`Invalid padding: ${t}`);if(r<0)throw new $k(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $k(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $k(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pw.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(pw.fromNumber(r)));return i.compare(XPe)===1&&(i=new pw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=BZ(e),[r,i]=UZ(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new mq(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.Ie===0)return;const t=BZ(e),[r,i]=UZ(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $k extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ZL(On.min(),i,new ia(Mr),Mg(),pr())}}class jI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jI(r,t,pr(),pr(),pr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class yme{constructor(e,t){this.targetId=e,this.me=t}}class bme{constructor(e,t,r=rs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VZ{constructor(){this.fe=0,this.ge=HZ(),this.pe=rs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pr(),t=pr(),r=pr();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Cn()}}),new jI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=HZ()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ii(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZPe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mg(),this.qe=zZ(),this.Qe=new ia(Mr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Cn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const a=i.target;if(kz(a))if(r===0){const o=new nn(a.path);this.Ue(t,o,Os.newNoDocument(o,On.min()))}else ii(r===1);else{const o=this.Ye(t);if(o!==r){const s=this.Ze(e),l=s?this.Xe(s,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=Mw(r).toUint8Array()}catch(l){if(l instanceof Yge)return I1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new mq(o,i,a)}catch(l){return I1(l instanceof $k?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Ie===0?null:s}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.Le.tt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,a,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((a,o)=>{const s=this.Je(o);if(s){if(a.current&&kz(s.target)){const l=new nn(s.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Os.newNoDocument(l,e))}a.be&&(t.set(o,a.ve()),a.Ce())}});let r=pr();this.qe.forEach((a,o)=>{let s=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new ZL(e,t,this.Qe,this.ke,r);return this.ke=Mg(),this.qe=zZ(),this.Qe=new ia(Mr),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new VZ,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ts(Mr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ft("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new VZ),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zZ(){return new ia(nn.comparator)}function HZ(){return new ia(nn.comparator)}const QPe={asc:"ASCENDING",desc:"DESCENDING"},JPe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eOe={and:"AND",or:"OR"};class tOe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dz(n,e){return n.useProto3Json||HL(e)?e:{value:e}}function _N(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wme(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nOe(n,e){return _N(n,e.toTimestamp())}function Af(n){return ii(!!n),On.fromTimestamp(function(t){const r=py(t);return new Kr(r.seconds,r.nanos)}(n))}function vq(n,e){return Iz(n,e).canonicalString()}function Iz(n,e){const t=function(i){return new Ui(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function xme(n){const e=Ui.fromString(n);return ii(Ame(e)),e}function Mz(n,e){return vq(n.databaseId,e.path)}function LF(n,e){const t=xme(e);if(t.get(1)!==n.databaseId.projectId)throw new At(qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new At(qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nn(Sme(t))}function _me(n,e){return vq(n.databaseId,e)}function rOe(n){const e=xme(n);return e.length===4?Ui.emptyPath():Sme(e)}function Pz(n){return new Ui(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sme(n){return ii(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GZ(n,e,t){return{name:Mz(n,e),fields:t.value.mapValue.fields}}function iOe(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Cn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(c,u){return c.useProto3Json?(ii(u===void 0||typeof u=="string"),rs.fromBase64String(u||"")):(ii(u===void 0||u instanceof Buffer||u instanceof Uint8Array),rs.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(c){const u=c.code===void 0?qe.UNKNOWN:vme(c.code);return new At(u,c.message||"")}(o);t=new bme(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=LF(n,r.document.name),a=Af(r.document.updateTime),o=r.document.createTime?Af(r.document.createTime):On.min(),s=new Gl({mapValue:{fields:r.document.fields}}),l=Os.newFoundDocument(i,a,o,s),c=r.targetIds||[],u=r.removedTargetIds||[];t=new MR(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=LF(n,r.document),a=r.readTime?Af(r.readTime):On.min(),o=Os.newNoDocument(i,a),s=r.removedTargetIds||[];t=new MR([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=LF(n,r.document),a=r.removedTargetIds||[];t=new MR([],a,i,null)}else{if(!("filter"in e))return Cn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new WPe(i,a),s=r.targetId;t=new yme(s,o)}}return t}function aOe(n,e){let t;if(e instanceof LI)t={update:GZ(n,e.key,e.value)};else if(e instanceof XL)t={delete:Mz(n,e.key)};else if(e instanceof Cy)t={update:GZ(n,e.key,e.data),updateMask:pOe(e.fieldMask)};else{if(!(e instanceof HPe))return Cn();t={verify:Mz(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof oD)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof sD)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof lD)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof cD)return{fieldPath:o.field.canonicalString(),increment:s.Pe};throw Cn()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:nOe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Cn()}(n,e.precondition)),t}function oOe(n,e){return n&&n.length>0?(ii(e!==void 0),n.map(t=>function(i,a){let o=i.updateTime?Af(i.updateTime):Af(a);return o.isEqual(On.min())&&(o=Af(a)),new UPe(o,i.transformResults||[])}(t,e))):[]}function sOe(n,e){return{documents:[_me(n,e.path)]}}function lOe(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_me(n,i);const a=function(c){if(c.length!==0)return Eme(rh.create(c,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:RS(h.field),direction:dOe(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=Dz(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function cOe(n){let e=rOe(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ii(r===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];t.where&&(a=function(d){const h=Tme(d);return h instanceof rh&&Qge(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(m){return new aD(NS(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let s=null;t.limit&&(s=function(d){let h;return h=typeof d=="object"?d.value:d,HL(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new wN(f,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new wN(f,h)}(t.endAt)),DPe(e,i,o,a,s,"F",l,c)}function uOe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Cn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tme(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=NS(t.unaryFilter.field);return Wa.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=NS(t.unaryFilter.field);return Wa.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=NS(t.unaryFilter.field);return Wa.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=NS(t.unaryFilter.field);return Wa.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Cn()}}(n):n.fieldFilter!==void 0?function(t){return Wa.create(NS(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Cn()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return rh.create(t.compositeFilter.filters.map(r=>Tme(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Cn()}}(t.compositeFilter.op))}(n):Cn()}function dOe(n){return QPe[n]}function hOe(n){return JPe[n]}function fOe(n){return eOe[n]}function RS(n){return{fieldPath:n.canonicalString()}}function NS(n){return Qo.fromServerFormat(n.fieldPath)}function Eme(n){return n instanceof Wa?function(t){if(t.op==="=="){if(MZ(t.value))return{unaryFilter:{field:RS(t.field),op:"IS_NAN"}};if(IZ(t.value))return{unaryFilter:{field:RS(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MZ(t.value))return{unaryFilter:{field:RS(t.field),op:"IS_NOT_NAN"}};if(IZ(t.value))return{unaryFilter:{field:RS(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:RS(t.field),op:hOe(t.op),value:t.value}}}(n):n instanceof rh?function(t){const r=t.getFilters().map(i=>Eme(i));return r.length===1?r[0]:{compositeFilter:{op:fOe(t.op),filters:r}}}(n):Cn()}function pOe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ame(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,r,i,a=On.min(),o=On.min(),s=rs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new Vv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gOe{constructor(e){this.ct=e}}function mOe(n){const e=cOe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vOe{constructor(){this.un=new yOe}addToCollectionParentIndex(e,t){return this.un.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(fy.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(fy.min())}updateCollectionGroup(e,t,r){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class yOe{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ts(Ui.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ts(Ui.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new R1(0)}static kn(){return new R1(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bOe{constructor(){this.changes=new ST(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Os.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?et.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wOe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xOe{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pC(r.mutation,i,Nc.empty(),Kr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pr()){const i=Qb();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=Fk();return a.forEach((s,l)=>{o=o.insert(s,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qb();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pr()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Mg();const o=fC(),s=function(){return fC()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Cy)?a=a.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),pC(u.mutation,c,u.mutation.getFieldMask(),Kr.now())):o.set(c.key,Nc.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return s.set(c,new wOe(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),s))}recalculateAndSaveOverlays(e,t){const r=fC();let i=new ia((o,s)=>o-s),a=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Nc.empty();u=s.applyToLocalView(c,u),r.set(l,u);const d=(i.get(s.batchId)||pr()).add(l);i=i.insert(s.batchId,d)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,d=sme();u.forEach(h=>{if(!a.has(h)){const f=gme(t.get(h),r.get(h));f!==null&&d.set(h,f),a=a.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return nn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nme(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):et.resolve(Qb());let s=-1,l=a;return o.next(c=>et.forEach(c,(u,d)=>(s<d.largestBatchId&&(s=d.largestBatchId),a.get(u)?et.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,pr())).next(u=>({batchId:s,changes:ome(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nn(t)).next(r=>{let i=Fk();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=Fk();return this.indexManager.getCollectionParents(e,a).next(s=>et.forEach(s,l=>{const c=function(d,h){return new _T(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Os.newInvalidDocument(u)))});let s=Fk();return o.forEach((l,c)=>{const u=a.get(l);u!==void 0&&pC(u.mutation,c,Nc.empty(),Kr.now()),WL(t,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Oe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return et.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Af(i.createTime)}}(t)),et.resolve()}getNamedQuery(e,t){return et.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:mOe(i.bundledQuery),readTime:Af(i.readTime)}}(t)),et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SOe{constructor(){this.overlays=new ia(nn.comparator),this.Ir=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qb();return et.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ht(e,t,a)}),et.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),et.resolve()}getOverlaysForCollection(e,t,r){const i=Qb(),a=t.length+1,o=new nn(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return et.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ia((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=a.get(c.largestBatchId);u===null&&(u=Qb(),a=a.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=Qb(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return et.resolve(s)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qPe(t,r));let a=this.Ir.get(t);a===void 0&&(a=pr(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TOe{constructor(){this.sessionToken=rs.EMPTY_BYTE_STRING}getSessionToken(e){return et.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,et.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(){this.Tr=new ts(Io.Er),this.dr=new ts(Io.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Io(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Io(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new nn(new Ui([])),r=new Io(t,e),i=new Io(t,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new nn(new Ui([])),r=new Io(t,e),i=new Io(t,e+1);let a=pr();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Io(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Io{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return nn.comparator(e.key,t.key)||Mr(e.wr,t.wr)}static Ar(e,t){return Mr(e.wr,t.wr)||nn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EOe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ts(Io.Er)}checkEmpty(e){return et.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GPe(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.br=this.br.add(new Io(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return et.resolve(o)}lookupMutationBatch(e,t){return et.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),a=i<0?0:i;return et.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Io(t,0),i=new Io(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const s=this.Dr(o.wr);a.push(s)}),et.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ts(Mr);return t.forEach(i=>{const a=new Io(i,0),o=new Io(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],s=>{r=r.add(s.wr)})}),et.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;nn.isDocumentKey(a)||(a=a.child(""));const o=new Io(new nn(a),0);let s=new ts(Mr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.wr)),!0)},o),et.resolve(this.Cr(s))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ii(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return et.forEach(t.mutations,i=>{const a=new Io(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Io(t,0),i=this.br.firstAfterOrEqual(r);return et.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,et.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AOe{constructor(e){this.Mr=e,this.docs=function(){return new ia(nn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return et.resolve(r?r.document.mutableCopy():Os.newInvalidDocument(t))}getEntries(e,t){let r=Mg();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Os.newInvalidDocument(i))}),et.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Mg();const o=t.path,s=new nn(o.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||uPe(cPe(u),r)<=0||(i.has(u.key)||WL(t,u))&&(a=a.insert(u.key,u.mutableCopy()))}return et.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Cn()}Or(e,t){return et.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new kOe(this)}getSize(e){return et.resolve(this.size)}}class kOe extends bOe{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),et.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COe{constructor(e){this.persistence=e,this.Nr=new ST(t=>hq(t),fq),this.lastRemoteSnapshotVersion=On.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yq,this.targetCount=0,this.kr=R1.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),et.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new R1(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Kn(t),et.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Nr.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),et.waitFor(a).next(()=>i)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return et.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),et.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),et.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),et.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return et.resolve(r)}containsKey(e,t){return et.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOe{constructor(e,t){this.qr={},this.overlays={},this.Qr=new lq(0),this.Kr=!1,this.Kr=!0,this.$r=new TOe,this.referenceDelegate=e(this),this.Ur=new COe(this),this.indexManager=new vOe,this.remoteDocumentCache=function(i){return new AOe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gOe(t),this.Gr=new _Oe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SOe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new EOe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ft("MemoryPersistence","Starting transaction:",e);const i=new IOe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,t){return et.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class IOe extends hPe{constructor(e){super(),this.currentSequenceNumber=e}}class bq{constructor(e){this.persistence=e,this.Jr=new yq,this.Yr=null}static Zr(e){return new bq(e)}get Xr(){if(this.Yr)return this.Yr;throw Cn()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),et.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),et.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Xr,r=>{const i=nn.fromPath(r);return this.ei(e,i).next(a=>{a||t.removeEntry(i,On.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return et.or([()=>et.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pr(),i=pr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wq(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return MIe()?8:fPe(Xa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.Yi(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new MOe;return this.Xi(e,t,o).next(s=>{if(a.result=s,this.zi)return this.es(e,t,o,s.size)})}).next(()=>a.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(jA()<=hr.DEBUG&&Ft("QueryEngine","SDK will not create cache indexes for query:",OS(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),et.resolve()):(jA()<=hr.DEBUG&&Ft("QueryEngine","Query:",OS(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(jA()<=hr.DEBUG&&Ft("QueryEngine","The SDK decides to create cache indexes for query:",OS(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ef(t))):et.resolve())}Yi(e,t){if(NZ(t))return et.resolve(null);let r=Ef(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xN(t,null,"F"),r=Ef(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=pr(...a);return this.Ji.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,s);return this.ns(t,c,o,l.readTime)?this.Yi(e,xN(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return NZ(t)||i.isEqual(On.min())?et.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(t,a);return this.ns(t,o,r,i)?et.resolve(null):(jA()<=hr.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),OS(t)),this.rs(e,o,t,lPe(i,-1)).next(s=>s))})}ts(e,t){let r=new ts(ime(e));return t.forEach((i,a)=>{WL(e,a)&&(r=r.add(a))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,t,r){return jA()<=hr.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",OS(t)),this.Ji.getDocumentsMatchingQuery(e,t,fy.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ia(Mr),this._s=new ST(a=>hq(a),fq),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xOe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function ROe(n,e,t,r){return new OOe(n,e,t,r)}async function kme(n,e){const t=Rn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let l=pr();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of a){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:s}))})})}function NOe(n,e){const t=Rn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const d=c.batch,h=d.keys();let f=et.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(l,m)).next(v=>{const y=c.docVersions.get(m);ii(y!==null),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),f.next(()=>s.mutationQueue.removeMutationBatch(l,d))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=pr();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Cme(n){const e=Rn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function LOe(n,e){const t=Rn(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const s=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;s.push(t.Ur.removeMatchingKeys(a,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(a,u.addedDocuments,d)));let f=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(rs.EMPTY_BYTE_STRING,On.min()).withLastLimboFreeSnapshotVersion(On.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(v,y,w){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&s.push(t.Ur.updateTargetData(a,f))});let l=Mg(),c=pr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,u))}),s.push(jOe(a,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(On.min())){const u=t.Ur.getLastRemoteSnapshotVersion(a).next(d=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(u)}return et.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(t.os=i,a))}function jOe(n,e,t){let r=pr(),i=pr();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Mg();return t.forEach((s,l)=>{const c=a.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(On.min())?(e.removeEntry(s,l.readTime),o=o.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(s,l)):Ft("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function FOe(n,e){const t=Rn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $Oe(n,e){const t=Rn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(a=>a?(i=a,et.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Vv(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function Oz(n,e,t){const r=Rn(n),i=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!NI(o))throw o;Ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function qZ(n,e,t){const r=Rn(n);let i=On.min(),a=pr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Rn(l),h=d._s.get(u);return h!==void 0?et.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(r,o,Ef(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,s.targetId).next(l=>{a=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:On.min(),t?a:pr())).next(s=>(BOe(r,MPe(e),s),{documents:s,Ts:a})))}function BOe(n,e,t){let r=n.us.get(e)||On.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class WZ{constructor(){this.activeTargetIds=jPe()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UOe{constructor(){this.so=new WZ,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new WZ,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BP=null;function jF(){return BP===null?BP=function(){return 268435456+Math.round(2147483648*Math.random())}():BP++,"0x"+BP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zOe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HOe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="WebChannelConnection";class GOe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(t,r,i,a,o){const s=jF(),l=this.xo(t,r.toUriEncodedString());Ft("RestConnection",`Sending RPC '${t}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,a,o),this.No(t,l,c,i).then(u=>(Ft("RestConnection",`Received RPC '${t}' ${s}: `,u),u),u=>{throw I1("RestConnection",`RPC '${t}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,a,o,s){return this.Mo(t,r,i,a,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xT}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}xo(t,r){const i=zOe[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const a=jF();return new Promise((o,s)=>{const l=new Bge;l.setWithCredentials(!0),l.listenOnce(Uge.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case CR.NO_ERROR:const u=l.getResponseJson();Ft(Ss,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(u)),o(u);break;case CR.TIMEOUT:Ft(Ss,`RPC '${e}' ${a} timed out`),s(new At(qe.DEADLINE_EXCEEDED,"Request time out"));break;case CR.HTTP_ERROR:const d=l.getStatus();if(Ft(Ss,`RPC '${e}' ${a} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(qe).indexOf(w)>=0?w:qe.UNKNOWN}(f.status);s(new At(m,f.message))}else s(new At(qe.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new At(qe.UNAVAILABLE,"Connection failed."));break;default:Cn()}}finally{Ft(Ss,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Ft(Ss,`RPC '${e}' ${a} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=jF(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hge(),s=zge(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Ft(Ss,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const m=new HOe({Io:y=>{f?Ft(Ss,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(Ft(Ss,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Ft(Ss,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},To:()=>d.close()}),v=(y,w,_)=>{y.listen(w,T=>{try{_(T)}catch(A){setTimeout(()=>{throw A},0)}})};return v(d,jk.EventType.OPEN,()=>{f||(Ft(Ss,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),v(d,jk.EventType.CLOSE,()=>{f||(f=!0,Ft(Ss,`RPC '${e}' stream ${i} transport closed`),m.So())}),v(d,jk.EventType.ERROR,y=>{f||(f=!0,I1(Ss,`RPC '${e}' stream ${i} transport errored:`,y),m.So(new At(qe.UNAVAILABLE,"The operation could not be completed")))}),v(d,jk.EventType.MESSAGE,y=>{var w;if(!f){const _=y.data[0];ii(!!_);const T=_,A=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(A){Ft(Ss,`RPC '${e}' stream ${i} received error:`,A);const C=A.status;let k=function(O){const j=Va[O];if(j!==void 0)return vme(j)}(C),M=A.message;k===void 0&&(k=qe.INTERNAL,M="Unknown error status: "+C+" with message "+A.message),f=!0,m.So(new At(k,M)),d.close()}else Ft(Ss,`RPC '${e}' stream ${i} received:`,_),m.bo(_)}}),v(s,Vge.STAT_EVENT,y=>{y.stat===Sz.PROXY?Ft(Ss,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Sz.NOPROXY&&Ft(Ss,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function FF(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(n){return new tOe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dme{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ime{constructor(e,t,r,i,a,o,s,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dme(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===qe.RESOURCE_EXHAUSTED?(Ig(t.toString()),Ig("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===qe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new At(qe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qOe extends Ime{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=iOe(this.serializer,e),r=function(a){if(!("targetChange"in a))return On.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?On.min():o.readTime?Af(o.readTime):On.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Pz(this.serializer),t.addTarget=function(a,o){let s;const l=o.target;if(s=kz(l)?{documents:sOe(a,l)}:{query:lOe(a,l)._t},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=wme(a,o.resumeToken);const c=Dz(a,o.expectedCount);c!==null&&(s.expectedCount=c)}else if(o.snapshotVersion.compareTo(On.min())>0){s.readTime=_N(a,o.snapshotVersion.toTimestamp());const c=Dz(a,o.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=uOe(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Pz(this.serializer),t.removeTarget=e,this.a_(t)}}class WOe extends Ime{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ii(!!e.streamToken),this.lastStreamToken=e.streamToken,ii(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ii(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=oOe(e.writeResults,e.commitTime),r=Af(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Pz(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>aOe(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new At(qe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Iz(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new At(qe.UNKNOWN,a.toString())})}Lo(e,t,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Lo(e,Iz(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new At(qe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class KOe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ig(t),this.D_=!1):Ft("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XOe{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Jw(this)&&(Ft("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Rn(l);c.L_.add(4),await FI(c),c.q_.set("Unknown"),c.L_.delete(4),await JL(c)}(this))})}),this.q_=new KOe(r,i)}}async function JL(n){if(Jw(n))for(const e of n.B_)await e(!0)}async function FI(n){for(const e of n.B_)await e(!1)}function Mme(n,e){const t=Rn(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Tq(t)?Sq(t):TT(t).r_()&&_q(t,e))}function xq(n,e){const t=Rn(n),r=TT(t);t.N_.delete(e),r.r_()&&Pme(t,e),t.N_.size===0&&(r.r_()?r.o_():Jw(t)&&t.q_.set("Unknown"))}function _q(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(On.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}TT(n).A_(e)}function Pme(n,e){n.Q_.xe(e),TT(n).R_(e)}function Sq(n){n.Q_=new ZPe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),TT(n).start(),n.q_.v_()}function Tq(n){return Jw(n)&&!TT(n).n_()&&n.N_.size>0}function Jw(n){return Rn(n).L_.size===0}function Ome(n){n.Q_=void 0}async function ZOe(n){n.q_.set("Online")}async function QOe(n){n.N_.forEach((e,t)=>{_q(n,e)})}async function JOe(n,e){Ome(n),Tq(n)?(n.q_.M_(e),Sq(n)):n.q_.set("Unknown")}async function eRe(n,e,t){if(n.q_.set("Online"),e instanceof bme&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.N_.delete(s),i.Q_.removeTarget(s))}(n,e)}catch(r){Ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await SN(n,r)}else if(e instanceof MR?n.Q_.Ke(e):e instanceof yme?n.Q_.He(e):n.Q_.We(e),!t.isEqual(On.min()))try{const r=await Cme(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.Q_.rt(o);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.N_.get(c);u&&a.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),s.targetMismatches.forEach((l,c)=>{const u=a.N_.get(l);if(!u)return;a.N_.set(l,u.withResumeToken(rs.EMPTY_BYTE_STRING,u.snapshotVersion)),Pme(a,l);const d=new Vv(u.target,l,c,u.sequenceNumber);_q(a,d)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){Ft("RemoteStore","Failed to raise snapshot:",r),await SN(n,r)}}async function SN(n,e,t){if(!NI(e))throw e;n.L_.add(1),await FI(n),n.q_.set("Offline"),t||(t=()=>Cme(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ft("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await JL(n)})}function Rme(n,e){return e().catch(t=>SN(n,t,e))}async function ej(n){const e=Rn(n),t=gy(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tRe(e);)try{const i=await FOe(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,nRe(e,i)}catch(i){await SN(e,i)}Nme(e)&&Lme(e)}function tRe(n){return Jw(n)&&n.O_.length<10}function nRe(n,e){n.O_.push(e);const t=gy(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Nme(n){return Jw(n)&&!gy(n).n_()&&n.O_.length>0}function Lme(n){gy(n).start()}async function rRe(n){gy(n).p_()}async function iRe(n){const e=gy(n);for(const t of n.O_)e.m_(t.mutations)}async function aRe(n,e,t){const r=n.O_.shift(),i=gq.from(r,e,t);await Rme(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ej(n)}async function oRe(n,e){e&&gy(n).V_&&await async function(r,i){if(function(o){return YPe(o)&&o!==qe.ABORTED}(i.code)){const a=r.O_.shift();gy(r).s_(),await Rme(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ej(r)}}(n,e),Nme(n)&&Lme(n)}async function KZ(n,e){const t=Rn(n);t.asyncQueue.verifyOperationInProgress(),Ft("RemoteStore","RemoteStore received new credentials");const r=Jw(t);t.L_.add(3),await FI(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await JL(t)}async function sRe(n,e){const t=Rn(n);e?(t.L_.delete(2),await JL(t)):e||(t.L_.add(2),await FI(t),t.q_.set("Unknown"))}function TT(n){return n.K_||(n.K_=function(t,r,i){const a=Rn(t);return a.w_(),new qOe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:ZOe.bind(null,n),Ro:QOe.bind(null,n),mo:JOe.bind(null,n),d_:eRe.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Tq(n)?Sq(n):n.q_.set("Unknown")):(await n.K_.stop(),Ome(n))})),n.K_}function gy(n){return n.U_||(n.U_=function(t,r,i){const a=Rn(t);return a.w_(),new WOe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rRe.bind(null,n),mo:oRe.bind(null,n),f_:iRe.bind(null,n),g_:aRe.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await ej(n)):(await n.U_.stop(),n.O_.length>0&&(Ft("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new mg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new Eq(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new At(qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Aq(n,e){if(Ig("AsyncQueue",`${e}: ${n}`),NI(n))return new At(qe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nn.comparator(t.key,r.key):(t,r)=>nn.comparator(t.key,r.key),this.keyedMap=Fk(),this.sortedSet=new ia(this.comparator)}static emptySet(e){return new r1(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof r1)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new r1;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(){this.W_=new ia(nn.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Cn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class N1{constructor(e,t,r,i,a,o,s,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new N1(e,t,r1.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qL(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lRe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cRe{constructor(){this.queries=ZZ(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Rn(t),a=i.queries;i.queries=ZZ(),a.forEach((o,s)=>{for(const l of s.j_)l.onError(r)})})(this,new At(qe.ABORTED,"Firestore shutting down"))}}function ZZ(){return new ST(n=>rme(n),qL)}async function kq(n,e){const t=Rn(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new lRe,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(i,!0);break;case 1:a.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=Aq(o,`Initialization of query '${OS(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&Dq(t)}async function Cq(n,e){const t=Rn(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uRe(n,e){const t=Rn(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.j_)s.X_(i)&&(r=!0);o.z_=i}}r&&Dq(t)}function dRe(n,e,t){const r=Rn(n),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(t);r.queries.delete(e)}function Dq(n){n.Y_.forEach(e=>{e.next()})}var Rz,QZ;(QZ=Rz||(Rz={})).ea="default",QZ.Cache="cache";class Iq{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new N1(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=N1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rz.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jme{constructor(e){this.key=e}}class Fme{constructor(e){this.key=e}}class hRe{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pr(),this.mutatedKeys=pr(),this.Aa=ime(e),this.Ra=new r1(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new XZ,i=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=WL(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),y=!0):this.ga(h,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(s=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(l||c)&&(s=!0)),y&&(f?(o=o.add(f),a=v?a.add(u):a.delete(u)):(o=o.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:s,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(f,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cn()}};return v(f)-v(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const s=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new N1(this.query,e.Ra,a,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new XZ,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pr(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Fme(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jme(r))}),t}ba(e){this.Ta=e.Ts,this.da=pr();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return N1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fRe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pRe{constructor(e){this.key=e,this.va=!1}}class gRe{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ST(s=>rme(s),qL),this.Ma=new Map,this.xa=new Set,this.Oa=new ia(nn.comparator),this.Na=new Map,this.La=new yq,this.Ba={},this.ka=new Map,this.qa=R1.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mRe(n,e,t=!0){const r=Hme(n);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await $me(r,e,t,!0),i}async function vRe(n,e){const t=Hme(n);await $me(t,e,!0,!1)}async function $me(n,e,t,r){const i=await $Oe(n.localStore,Ef(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await yRe(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Mme(n.remoteStore,i),s}async function yRe(n,e,t,r,i){n.Ka=(d,h,f)=>async function(v,y,w,_){let T=y.view.ma(w);T.ns&&(T=await qZ(v.localStore,y.query,!1).then(({documents:M})=>y.view.ma(M,T)));const A=_&&_.targetChanges.get(y.targetId),C=_&&_.targetMismatches.get(y.targetId)!=null,k=y.view.applyChanges(T,v.isPrimaryClient,A,C);return eQ(v,y.targetId,k.wa),k.snapshot}(n,d,h,f);const a=await qZ(n.localStore,e,!0),o=new hRe(e,a.Ts),s=o.ma(a.documents),l=jI.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(s,n.isPrimaryClient,l);eQ(n,t,c.wa);const u=new fRe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function bRe(n,e,t){const r=Rn(n),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!qL(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Oz(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xq(r.remoteStore,i.targetId),Nz(r,i.targetId)}).catch(RI)):(Nz(r,i.targetId),await Oz(r.localStore,i.targetId,!0))}async function wRe(n,e){const t=Rn(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xq(t.remoteStore,r.targetId))}async function xRe(n,e,t){const r=CRe(n);try{const i=await function(o,s){const l=Rn(o),c=Kr.now(),u=s.reduce((f,m)=>f.add(m.key),pr());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Mg(),v=pr();return l.cs.getEntries(f,u).next(y=>{m=y,m.forEach((w,_)=>{_.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;const w=[];for(const _ of s){const T=zPe(_,d.get(_.key).overlayedDocument);T!=null&&w.push(new Cy(_.key,T,Kge(T.value.mapValue),dl.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,s)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(f,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:ome(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ia(Mr)),c=c.insert(s,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await $I(r,i.changes),await ej(r.remoteStore)}catch(i){const a=Aq(i,"Failed to persist write");t.reject(a)}}async function Bme(n,e){const t=Rn(n);try{const r=await LOe(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Na.get(a);o&&(ii(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ii(o.va):i.removedDocuments.size>0&&(ii(o.va),o.va=!1))}),await $I(t,r,e)}catch(r){await RI(r)}}function JZ(n,e,t){const r=Rn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((a,o)=>{const s=o.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const l=Rn(o);l.onlineState=s;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.j_)h.Z_(s)&&(c=!0)}),c&&Dq(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _Re(n,e,t){const r=Rn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new ia(nn.comparator);o=o.insert(a,Os.newNoDocument(a,On.min()));const s=pr().add(a),l=new ZL(On.min(),new Map,new ia(Mr),o,s);await Bme(r,l),r.Oa=r.Oa.remove(a),r.Na.delete(e),Mq(r)}else await Oz(r.localStore,e,!1).then(()=>Nz(r,e,t)).catch(RI)}async function SRe(n,e){const t=Rn(n),r=e.batch.batchId;try{const i=await NOe(t.localStore,e);Vme(t,r,null),Ume(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await $I(t,i)}catch(i){await RI(i)}}async function TRe(n,e,t){const r=Rn(n);try{const i=await function(o,s){const l=Rn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(d=>(ii(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Vme(r,e,t),Ume(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await $I(r,i)}catch(i){await RI(i)}}function Ume(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Vme(n,e,t){const r=Rn(n);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Nz(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zme(n,r)})}function zme(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(xq(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Mq(n))}function eQ(n,e,t){for(const r of t)r instanceof jme?(n.La.addReference(r.key,e),ERe(n,r)):r instanceof Fme?(Ft("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zme(n,r.key)):Cn()}function ERe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ft("SyncEngine","New document in limbo: "+t),n.xa.add(r),Mq(n))}function Mq(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new nn(Ui.fromString(e)),r=n.qa.next();n.Na.set(r,new pRe(t)),n.Oa=n.Oa.insert(t,r),Mme(n.remoteStore,new Vv(Ef(GL(t.path)),r,"TargetPurposeLimboResolution",lq.oe))}}async function $I(n,e,t){const r=Rn(n),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((s,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=wq.Wi(l.targetId,c);a.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=Rn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>et.forEach(c,h=>et.forEach(h.$i,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>et.forEach(h.Ui,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!NI(d))throw d;Ft("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.os.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(h,v)}}}(r.localStore,a))}async function ARe(n,e){const t=Rn(n);if(!t.currentUser.isEqual(e)){Ft("SyncEngine","User change. New user:",e.toKey());const r=await kme(t.localStore,e);t.currentUser=e,function(a,o){a.ka.forEach(s=>{s.forEach(l=>{l.reject(new At(qe.CANCELLED,o))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $I(t,r.hs)}}function kRe(n,e){const t=Rn(n),r=t.Na.get(e);if(r&&r.va)return pr().add(r.key);{let i=pr();const a=t.Ma.get(e);if(!a)return i;for(const o of a){const s=t.Fa.get(o);i=i.unionWith(s.view.Va)}return i}}function Hme(n){const e=Rn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bme.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kRe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_Re.bind(null,e),e.Ca.d_=uRe.bind(null,e.eventManager),e.Ca.$a=dRe.bind(null,e.eventManager),e}function CRe(n){const e=Rn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SRe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TRe.bind(null,e),e}class TN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=QL(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ROe(this.persistence,new POe,e.initialUser,this.serializer)}Ga(e){return new DOe(bq.Zr,this.serializer)}Wa(e){return new UOe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}TN.provider={build:()=>new TN};class Lz{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JZ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ARe.bind(null,this.syncEngine),await sRe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cRe}()}createDatastore(e){const t=QL(e.databaseInfo.databaseId),r=function(a){return new GOe(a)}(e.databaseInfo);return function(a,o,s,l){return new YOe(a,o,s,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new XOe(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>JZ(this.syncEngine,t,0),function(){return YZ.D()?new YZ:new VOe}())}createSyncEngine(e,t){return function(i,a,o,s,l,c,u){const d=new gRe(i,a,o,s,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Rn(i);Ft("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await FI(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lz.provider={build:()=>new Lz};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ig("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DRe{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Is.UNAUTHENTICATED,this.clientId=qge.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ft("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ft("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Aq(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $F(n,e){n.asyncQueue.verifyOperationInProgress(),Ft("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kme(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function tQ(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IRe(n);Ft("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KZ(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KZ(e.remoteStore,i)),n._onlineComponents=e}async function IRe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ft("FirestoreClient","Using user provided OfflineComponentProvider");try{await $F(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===qe.FAILED_PRECONDITION||i.code===qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;I1("Error using user provided cache. Falling back to memory cache: "+t),await $F(n,new TN)}}else Ft("FirestoreClient","Using default OfflineComponentProvider"),await $F(n,new TN);return n._offlineComponents}async function Gme(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ft("FirestoreClient","Using user provided OnlineComponentProvider"),await tQ(n,n._uninitializedComponentsProvider._online)):(Ft("FirestoreClient","Using default OnlineComponentProvider"),await tQ(n,new Lz))),n._onlineComponents}function MRe(n){return Gme(n).then(e=>e.syncEngine)}async function EN(n){const e=await Gme(n),t=e.eventManager;return t.onListen=mRe.bind(null,e.syncEngine),t.onUnlisten=bRe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vRe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wRe.bind(null,e.syncEngine),t}function PRe(n,e,t={}){const r=new mg;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new Pq({next:h=>{u.Za(),o.enqueueAndForget(()=>Cq(a,d));const f=h.docs.has(s);!f&&h.fromCache?c.reject(new At(qe.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new At(qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Iq(GL(s.path),u,{includeMetadataChanges:!0,_a:!0});return kq(a,d)}(await EN(n),n.asyncQueue,e,t,r)),r.promise}function ORe(n,e,t={}){const r=new mg;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new Pq({next:h=>{u.Za(),o.enqueueAndForget(()=>Cq(a,d)),h.fromCache&&l.source==="server"?c.reject(new At(qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Iq(s,u,{includeMetadataChanges:!0,_a:!0});return kq(a,d)}(await EN(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qme(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wme(n,e,t){if(!t)throw new At(qe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RRe(n,e,t,r){if(e===!0&&r===!0)throw new At(qe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rQ(n){if(!nn.isDocumentKey(n))throw new At(qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iQ(n){if(nn.isDocumentKey(n))throw new At(qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tj(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Cn()}function hl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new At(qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tj(n);throw new At(qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function NRe(n,e){if(e<=0)throw new At(qe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new At(qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new At(qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RRe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qme((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new At(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new At(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new At(qe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nj{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aQ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new At(qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new At(qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aQ(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JMe;switch(r.type){case"firstParty":return new rPe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new At(qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=nQ.get(t);r&&(Ft("ComponentProvider","Removing Datastore"),nQ.delete(t),r.terminate())}(this),Promise.resolve()}}function LRe(n,e,t,r={}){var i;const a=(n=hl(n,nj))._getSettings(),o=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&I1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=Is.MOCK_USER;else{s=kIe(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new At(qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Is(c)}n._authCredentials=new ePe(new Gge(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yg(this.firestore,e,this._query)}}class js{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ty(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new js(this.firestore,e,this._key)}}class ty extends Yg{constructor(e,t,r){super(e,t,GL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new js(this.firestore,null,new nn(e))}withConverter(e){return new ty(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=ln(n),Wme("collection","path",e),n instanceof nj){const r=Ui.fromString(e,...t);return iQ(r),new ty(n,null,r)}{if(!(n instanceof js||n instanceof ty))throw new At(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ui.fromString(e,...t));return iQ(r),new ty(n.firestore,null,r)}}function _n(n,e,...t){if(n=ln(n),arguments.length===1&&(e=qge.newId()),Wme("doc","path",e),n instanceof nj){const r=Ui.fromString(e,...t);return rQ(r),new js(n,null,new nn(r))}{if(!(n instanceof js||n instanceof ty))throw new At(qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ui.fromString(e,...t));return rQ(r),new js(n.firestore,n instanceof ty?n.converter:null,new nn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dme(this,"async_queue_retry"),this.Vu=()=>{const r=FF();r&&Ft("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=FF();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=FF();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new mg;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!NI(e))throw e;Ft("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(r);throw Ig("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Eq.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&Cn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function sQ(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Pf extends nj{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new oQ,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oQ(e),this._firestoreClient=void 0,await e}}}function jRe(n,e){const t=typeof n=="object"?n:zL(),r=typeof n=="string"?n:"(default)",i=Wg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=EIe("firestore");a&&LRe(i,...a)}return i}function BI(n){if(n._terminated)throw new At(qe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FRe(n),n._firestoreClient}function FRe(n){var e,t,r;const i=n._freezeSettings(),a=function(s,l,c,u){return new mPe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,qme(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new DRe(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this._byteString=e}static fromBase64String(e){try{return new L1(rs.fromBase64String(e))}catch(t){throw new At(qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new L1(rs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new At(qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new At(qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new At(qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Re=/^__.*__$/;class BRe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Cy(e,this.data,this.fieldMask,t,this.fieldTransforms):new LI(e,this.data,t,this.fieldTransforms)}}class Yme{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kme(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cn()}}class Nq{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Nq(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return AN(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kme(this.Cu)&&$Re.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class URe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||QL(e)}Qu(e,t,r,i=!1){return new Nq({Cu:e,methodName:t,qu:r,path:Qo.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zI(n){const e=n._freezeSettings(),t=QL(n._databaseId);return new URe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Lq(n,e,t,r,i,a={}){const o=n.Qu(a.merge||a.mergeFields?2:0,e,t,i);$q("Data must be an object, but it was:",o,r);const s=Qme(r,o);let l,c;if(a.merge)l=new Nc(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=jz(e,d,t);if(!o.contains(h))throw new At(qe.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);eve(u,h)||u.push(h)}l=new Nc(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new BRe(new Gl(s),l,c)}class rj extends VI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rj}}class jq extends VI{_toFieldTransform(e){return new pme(e.path,new oD)}isEqual(e){return e instanceof jq}}class Fq extends VI{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new cD(e.serializer,cme(e.serializer,this.$u));return new pme(e.path,t)}isEqual(e){return e instanceof Fq&&this.$u===e.$u}}function Xme(n,e,t,r){const i=n.Qu(1,e,t);$q("Data must be an object, but it was:",i,r);const a=[],o=Gl.empty();Qw(r,(l,c)=>{const u=Bq(e,l,t);c=ln(c);const d=i.Nu(u);if(c instanceof rj)a.push(u);else{const h=HI(c,d);h!=null&&(a.push(u),o.set(u,h))}});const s=new Nc(a);return new Yme(o,s,i.fieldTransforms)}function Zme(n,e,t,r,i,a){const o=n.Qu(1,e,t),s=[jz(e,r,t)],l=[i];if(a.length%2!=0)throw new At(qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)s.push(jz(e,a[h])),l.push(a[h+1]);const c=[],u=Gl.empty();for(let h=s.length-1;h>=0;--h)if(!eve(c,s[h])){const f=s[h];let m=l[h];m=ln(m);const v=o.Nu(f);if(m instanceof rj)c.push(f);else{const y=HI(m,v);y!=null&&(c.push(f),u.set(f,y))}}const d=new Nc(c);return new Yme(u,d,o.fieldTransforms)}function VRe(n,e,t,r=!1){return HI(t,n.Qu(r?4:3,e))}function HI(n,e){if(Jme(n=ln(n)))return $q("Unsupported field value:",e,n),Qme(n,e);if(n instanceof VI)return function(r,i){if(!Kme(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let l=HI(s,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cme(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Kr.fromDate(r);return{timestampValue:_N(i.serializer,a)}}if(r instanceof Kr){const a=new Kr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_N(i.serializer,a)}}if(r instanceof Oq)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof L1)return{bytesValue:wme(i.serializer,r._byteString)};if(r instanceof js){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vq(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rq)return function(o,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw s.Bu("VectorValues must only contain numeric values.");return pq(s.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${tj(r)}`)}(n,e)}function Qme(n,e){const t={};return Wge(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qw(n,(r,i)=>{const a=HI(i,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function Jme(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kr||n instanceof Oq||n instanceof L1||n instanceof js||n instanceof VI||n instanceof Rq)}function $q(n,e,t){if(!Jme(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=tj(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function jz(n,e,t){if((e=ln(e))instanceof UI)return e._internalPath;if(typeof e=="string")return Bq(n,e);throw AN("Field path arguments must be of type string or ",n,!1,void 0,t)}const zRe=new RegExp("[~\\*/\\[\\]]");function Bq(n,e,t){if(e.search(zRe)>=0)throw AN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new UI(...e.split("."))._internalPath}catch{throw AN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AN(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new At(qe.INVALID_ARGUMENT,s+n+l)}function eve(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tve{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new js(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ij("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HRe extends tve{data(){return super.data()}}function ij(n,e){return typeof e=="string"?Bq(n,e):e instanceof UI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nve(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new At(qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uq{}class Vq extends Uq{}function qt(n,e,...t){let r=[];e instanceof Uq&&r.push(e),r=r.concat(t),function(a){const o=a.filter(l=>l instanceof zq).length,s=a.filter(l=>l instanceof aj).length;if(o>1||o>0&&s>0)throw new At(qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class aj extends Vq{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aj(e,t,r)}_apply(e){const t=this._parse(e);return ive(e._query,t),new Yg(e.firestore,e.converter,Cz(e._query,t))}_parse(e){const t=zI(e.firestore);return function(a,o,s,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new At(qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){cQ(d,u);const f=[];for(const m of d)f.push(lQ(l,a,m));h={arrayValue:{values:f}}}else h=lQ(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||cQ(d,u),h=VRe(s,o,d,u==="in"||u==="not-in");return Wa.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vt(n,e,t){const r=e,i=ij("where",n);return aj._create(i,r,t)}class zq extends Uq{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zq(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:rh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const l of s)ive(o,l),o=Cz(o,l)}(e._query,t),new Yg(e.firestore,e.converter,Cz(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hq extends Vq{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hq(e,t)}_apply(e){const t=function(i,a,o){if(i.startAt!==null)throw new At(qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new At(qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aD(a,o)}(e._query,this._field,this._direction);return new Yg(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new _T(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ta(n,e="asc"){const t=e,r=ij("orderBy",n);return Hq._create(r,t)}class Gq extends Vq{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Gq(e,t,r)}_apply(e){return new Yg(e.firestore,e.converter,xN(e._query,this._limit,this._limitType))}}function rve(n){return NRe("limit",n),Gq._create("limit",n,"F")}function lQ(n,e,t){if(typeof(t=ln(t))=="string"){if(t==="")throw new At(qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nme(e)&&t.indexOf("/")!==-1)throw new At(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ui.fromString(t));if(!nn.isDocumentKey(r))throw new At(qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DZ(n,new nn(r))}if(t instanceof js)return DZ(n,t._key);throw new At(qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tj(t)}.`)}function cQ(n,e){if(!Array.isArray(n)||n.length===0)throw new At(qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ive(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new At(qe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new At(qe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class GRe{convertValue(e,t="none"){switch(Pw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ka(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Cn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qw(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ka(o.doubleValue));return new Rq(a)}convertGeoPoint(e){return new Oq(ka(e.latitude),ka(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uq(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nD(e));default:return null}}convertTimestamp(e){const t=py(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ui.fromString(e);ii(Ame(r));const i=new rD(r.get(1),r.get(3)),a=new nn(r.popFirst(5));return i.isEqual(t)||Ig(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ave extends tve{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new PR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ij("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class PR extends ave{data(e={}){return super.data(e)}}class ove{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bk(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new PR(this._firestore,this._userDataWriter,r.key,r,new Bk(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new At(qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const l=new PR(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Bk(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const l=new PR(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Bk(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),u=o.indexOf(s.doc.key)),{type:qRe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qRe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n){n=hl(n,js);const e=hl(n.firestore,Pf);return PRe(BI(e),n._key).then(t=>lve(e,n,t))}class Wq extends GRe{constructor(e){super(),this.firestore=e}convertBytes(e){return new L1(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new js(this.firestore,null,t)}}function kn(n){n=hl(n,Yg);const e=hl(n.firestore,Pf),t=BI(e),r=new Wq(e);return nve(n._query),ORe(t,n._query).then(i=>new ove(e,r,n,i))}function Jd(n,e,t){n=hl(n,js);const r=hl(n.firestore,Pf),i=qq(n.converter,e,t);return GI(r,[Lq(zI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,dl.none())])}function Ca(n,e,t,...r){n=hl(n,js);const i=hl(n.firestore,Pf),a=zI(i);let o;return o=typeof(e=ln(e))=="string"||e instanceof UI?Zme(a,"updateDoc",n._key,e,t,r):Xme(a,"updateDoc",n._key,e),GI(i,[o.toMutation(n._key,dl.exists(!0))])}function sve(n){return GI(hl(n.firestore,Pf),[new XL(n._key,dl.none())])}function uD(n,e){const t=hl(n.firestore,Pf),r=_n(n),i=qq(n.converter,e);return GI(t,[Lq(zI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dl.exists(!1))]).then(()=>r)}function ny(n,...e){var t,r,i;n=ln(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||sQ(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(sQ(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(n instanceof js)c=hl(n.firestore,Pf),u=GL(n._key.path),l={next:d=>{e[o]&&e[o](lve(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=hl(n,Yg);c=hl(d.firestore,Pf),u=d._query;const h=new Wq(c);l={next:f=>{e[o]&&e[o](new ove(c,h,d,f))},error:e[o+1],complete:e[o+2]},nve(n._query)}return function(h,f,m,v){const y=new Pq(v),w=new Iq(f,y,m);return h.asyncQueue.enqueueAndForget(async()=>kq(await EN(h),w)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>Cq(await EN(h),w))}}(BI(c),u,s,l)}function GI(n,e){return function(r,i){const a=new mg;return r.asyncQueue.enqueueAndForget(async()=>xRe(await MRe(r),i,a)),a.promise}(BI(n),e)}function lve(n,e,t){const r=t.docs.get(e._key),i=new Wq(n);return new ave(n,i,e._key,r,new Bk(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WRe{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zI(e)}set(e,t,r){this._verifyNotCommitted();const i=BF(e,this._firestore),a=qq(i.converter,t,r),o=Lq(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,dl.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=BF(e,this._firestore);let o;return o=typeof(t=ln(t))=="string"||t instanceof UI?Zme(this._dataReader,"WriteBatch.update",a._key,t,r,i):Xme(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,dl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=BF(e,this._firestore);return this._mutations=this._mutations.concat(new XL(t._key,dl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new At(qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function BF(n,e){if((n=ln(n)).firestore!==e)throw new At(qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Co(){return new jq("serverTimestamp")}function cve(n){return new Fq("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){return BI(n=hl(n,Pf)),new WRe(n,e=>GI(n,e))}(function(e,t=!0){(function(i){xT=i})(ky),Gu(new zc("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new Pf(new tPe(r.getProvider("auth-internal")),new aPe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new At(qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rD(c.options.projectId,u)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),Ls(TZ,"4.7.3",e),Ls(TZ,"4.7.3","esm2017")})();var YRe="firebase",KRe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ls(YRe,KRe,"app");function Yq(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const FA={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},V_={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XRe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function uve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZRe=XRe,QRe=uve,dve=new qg("auth","Firebase",uve());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new OI("@firebase/auth");function JRe(n,...e){kN.logLevel<=hr.WARN&&kN.warn(`Auth (${ky}): ${n}`,...e)}function OR(n,...e){kN.logLevel<=hr.ERROR&&kN.error(`Auth (${ky}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(n,...e){throw Xq(n,...e)}function ho(n,...e){return Xq(n,...e)}function Kq(n,e,t){const r=Object.assign(Object.assign({},QRe()),{[e]:t});return new qg("auth","Firebase",r).create(e,{appName:n.name})}function No(n){return Kq(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ET(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lo(n,"argument-error"),Kq(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xq(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return dve.create(n,...e)}function ot(n,e,...t){if(!n)throw Xq(e,...t)}function yf(n){const e="INTERNAL ASSERTION FAILED: "+n;throw OR(e),new Error(e)}function ih(n,e){n||yf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Zq(){return uQ()==="http:"||uQ()==="https:"}function uQ(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eNe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zq()||nq()||"connection"in navigator)?navigator.onLine:!0}function tNe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.shortDelay=e,this.longDelay=t,ih(t>e,"Short delay should be less than long delay!"),this.isMobile=CIe()||rq()}get(){return eNe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(n,e){ih(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nNe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rNe=new qI(3e4,6e4);function va(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ya(n,e,t,r,i={}){return fve(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=wT(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},a);return IIe()||(c.referrerPolicy="no-referrer"),hve.fetch()(pve(n,n.config.apiHost,t,s),c)})}async function fve(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},nNe),e);try{const i=new aNe(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Uk(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,c]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uk(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uk(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uk(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Kq(n,u,c);Lo(n,u)}}catch(i){if(i instanceof es)throw i;Lo(n,"network-request-failed",{message:String(i)})}}async function Kg(n,e,t,r,i={}){const a=await ya(n,e,t,r,i);return"mfaPendingCredential"in a&&Lo(n,"multi-factor-auth-required",{_serverResponse:a}),a}function pve(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Qq(n.config,i):`${n.config.apiScheme}://${i}`}function iNe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aNe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ho(this.auth,"network-request-failed")),rNe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uk(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ho(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(n){return n!==void 0&&n.getResponse!==void 0}function hQ(n){return n!==void 0&&n.enterprise!==void 0}class oNe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return iNe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sNe(n){return(await ya(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function lNe(n,e){return ya(n,"GET","/v2/recaptchaConfig",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cNe(n,e){return ya(n,"POST","/v1/accounts:delete",e)}async function uNe(n,e){return ya(n,"POST","/v1/accounts:update",e)}async function gve(n,e){return ya(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dNe(n,e=!1){const t=ln(n),r=await t.getIdToken(e),i=oj(r);ot(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:mC(UF(i.auth_time)),issuedAtTime:mC(UF(i.iat)),expirationTime:mC(UF(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function UF(n){return Number(n)*1e3}function oj(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return OR("JWT malformed, contained fewer than 3 sections"),null;try{const i=yge(t);return i?JSON.parse(i):(OR("Failed to decode base64 JWT payload"),null)}catch(i){return OR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fQ(n){const e=oj(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pg(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof es&&hNe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hNe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fNe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mC(this.lastLoginAt),this.creationTime=mC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Pg(n,gve(t,{idToken:r}));ot(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?mve(a.providerUserInfo):[],s=gNe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Fz(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function pNe(n){const e=ln(n);await hD(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gNe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mve(n){return n.map(e=>{var{providerId:t}=e,r=Yq(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mNe(n,e){const t=await fve(n,{},async()=>{const r=wT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=pve(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",hve.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vNe(n,e){return ya(n,"POST","/v2/accounts:revokeToken",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fQ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=fQ(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await mNe(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new i1;return r&&(ot(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ot(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ot(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new i1,this.toJSON())}_performRefresh(){return yf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sg{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Yq(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fNe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fz(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Pg(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dNe(this,e)}reload(){return pNe(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hD(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fa(this.auth.app))return Promise.reject(No(this.auth));const e=await this.getIdToken();return await Pg(this,cNe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,l,c,u;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(s=t.tenantId)!==null&&s!==void 0?s:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,_=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:A,isAnonymous:C,providerData:k,stsTokenManager:M}=t;ot(T&&M,e,"internal-error");const P=i1.fromJSON(this.name,M);ot(typeof T=="string",e,"internal-error"),mv(d,e.name),mv(h,e.name),ot(typeof A=="boolean",e,"internal-error"),ot(typeof C=="boolean",e,"internal-error"),mv(f,e.name),mv(m,e.name),mv(v,e.name),mv(y,e.name),mv(w,e.name),mv(_,e.name);const O=new sg({uid:T,auth:e,email:h,emailVerified:A,displayName:d,isAnonymous:C,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:P,createdAt:w,lastLoginAt:_});return k&&Array.isArray(k)&&(O.providerData=k.map(j=>Object.assign({},j))),y&&(O._redirectEventId=y),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new i1;i.updateFromServerResponse(t);const a=new sg({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hD(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ot(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?mve(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new i1;s.updateFromIdToken(r);const l=new sg({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Fz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=new Map;function Lc(n){ih(n instanceof Function,"Expected a class definition");let e=pQ.get(n);return e?(ih(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pQ.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vve{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vve.type="NONE";const j1=vve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n,e,t){return`firebase:${n}:${e}:${t}`}class a1{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=gw(this.userKey,i.apiKey,a),this.fullPersistenceKey=gw("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new a1(Lc(j1),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||Lc(j1);const o=gw(r,e.config.apiKey,e.name);let s=null;for(const c of t)try{const u=await c._get(o);if(u){const d=sg._fromJSON(e,u);c!==a&&(s=d),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new a1(a,e,r):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new a1(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xve(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yve(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_ve(e))return"Blackberry";if(Sve(e))return"Webos";if(bve(e))return"Safari";if((e.includes("chrome/")||wve(e))&&!e.includes("edge/"))return"Chrome";if(WI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yve(n=Xa()){return/firefox\//i.test(n)}function bve(n=Xa()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wve(n=Xa()){return/crios\//i.test(n)}function xve(n=Xa()){return/iemobile/i.test(n)}function WI(n=Xa()){return/android/i.test(n)}function _ve(n=Xa()){return/blackberry/i.test(n)}function Sve(n=Xa()){return/webos/i.test(n)}function YI(n=Xa()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yNe(n=Xa()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function bNe(n=Xa()){var e;return YI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wNe(){return Tge()&&document.documentMode===10}function Tve(n=Xa()){return YI(n)||WI(n)||Sve(n)||_ve(n)||/windows phone/i.test(n)||xve(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eve(n,e=[]){let t;switch(n){case"Browser":t=gQ(Xa());break;case"Worker":t=`${gQ(Xa())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ky}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xNe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const l=e(a);o(l)}catch(l){s(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Ne(n,e={}){return ya(n,"GET","/v2/passwordPolicy",va(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SNe=6;class TNe{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:SNe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ENe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mQ(this),this.idTokenSubscription=new mQ(this),this.beforeStateQueue=new xNe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lc(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await a1.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gve(this,{idToken:e}),r=await sg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(fa(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hD(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tNe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fa(this.app))return Promise.reject(No(this));const t=e?ln(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fa(this.app)?Promise.reject(No(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fa(this.app)?Promise.reject(No(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _Ne(this),t=new TNe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qg("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await vNe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lc(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await a1.create(this,[Lc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Eve(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&JRe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ga(n){return ln(n)}class mQ{constructor(e){this.auth=e,this.observer=null,this.addObserver=Age(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ANe(n){KI=n}function Jq(n){return KI.loadJS(n)}function kNe(){return KI.recaptchaV2Script}function CNe(){return KI.recaptchaEnterpriseScript}function DNe(){return KI.gapiScript}function Ave(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const INe="recaptcha-enterprise",MNe="NO_RECAPTCHA";class PNe{constructor(e){this.type=INe,this.auth=ga(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{lNe(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const c=new oNe(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(l=>{s(l)})})}function i(a,o,s){const l=window.grecaptcha;hQ(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(MNe)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&hQ(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CNe();l.length!==0&&(l+=s),Jq(l).then(()=>{i(s,a,o)}).catch(c=>{o(c)})}}).catch(s=>{o(s)})})}}async function vQ(n,e,t,r=!1){const i=new PNe(n);let a;try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function fD(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await vQ(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await vQ(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ONe(n,e){const t=Wg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(QC(a,e??{}))return i;Lo(i,"already-initialized")}return t.initialize({options:e})}function RNe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Lc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kve(n,e,t){const r=ga(n);ot(r._canInitEmulator,r,"emulator-config-failed"),ot(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=Cve(e),{host:o,port:s}=NNe(e),l=s===null?"":`:${s}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||LNe()}function Cve(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NNe(n){const e=Cve(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:yQ(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:yQ(o)}}}function yQ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LNe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yf("not implemented")}_getIdTokenResponse(e){return yf("not implemented")}_linkToIdToken(e,t){return yf("not implemented")}_getReauthenticationResolver(e){return yf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dve(n,e){return ya(n,"POST","/v1/accounts:resetPassword",va(n,e))}async function jNe(n,e){return ya(n,"POST","/v1/accounts:update",e)}async function FNe(n,e){return ya(n,"POST","/v1/accounts:signUp",e)}async function $Ne(n,e){return ya(n,"POST","/v1/accounts:update",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BNe(n,e){return Kg(n,"POST","/v1/accounts:signInWithPassword",va(n,e))}async function sj(n,e){return ya(n,"POST","/v1/accounts:sendOobCode",va(n,e))}async function UNe(n,e){return sj(n,e)}async function VNe(n,e){return sj(n,e)}async function zNe(n,e){return sj(n,e)}async function HNe(n,e){return sj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GNe(n,e){return Kg(n,"POST","/v1/accounts:signInWithEmailLink",va(n,e))}async function qNe(n,e){return Kg(n,"POST","/v1/accounts:signInWithEmailLink",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD extends AT{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new pD(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new pD(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fD(e,t,"signInWithPassword",BNe);case"emailLink":return GNe(e,{email:this._email,oobCode:this._password});default:Lo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fD(e,r,"signUpPassword",FNe);case"emailLink":return qNe(e,{idToken:t,email:this._email,oobCode:this._password});default:Lo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(n,e){return Kg(n,"POST","/v1/accounts:signInWithIdp",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WNe="http://localhost";class Of extends AT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Of(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Yq(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Of(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return vg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,vg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vg(e,t)}buildRequest(){const e={requestUri:WNe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wT(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YNe(n,e){return ya(n,"POST","/v1/accounts:sendVerificationCode",va(n,e))}async function KNe(n,e){return Kg(n,"POST","/v1/accounts:signInWithPhoneNumber",va(n,e))}async function XNe(n,e){const t=await Kg(n,"POST","/v1/accounts:signInWithPhoneNumber",va(n,e));if(t.temporaryProof)throw Uk(n,"account-exists-with-different-credential",t);return t}const ZNe={USER_NOT_FOUND:"user-not-found"};async function QNe(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Kg(n,"POST","/v1/accounts:signInWithPhoneNumber",va(n,t),ZNe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends AT{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new mw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new mw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return KNe(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return XNe(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return QNe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new mw({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JNe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e2e(n){const e=GS(Lk(n)).link,t=e?GS(Lk(e)).deep_link_id:null,r=GS(Lk(n)).deep_link_id;return(r?GS(Lk(r)).link:null)||r||t||e||n}class lj{constructor(e){var t,r,i,a,o,s;const l=GS(Lk(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=JNe((i=l.mode)!==null&&i!==void 0?i:null);ot(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=e2e(e);try{return new lj(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.providerId=Dy.PROVIDER_ID}static credential(e,t){return pD._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lj.parseLink(t);return ot(r,"argument-error"),pD._fromEmailAndCode(e,r.code,r.tenantId)}}Dy.PROVIDER_ID="password";Dy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class o1 extends kT{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ot("providerId"in t&&"signInMethod"in t,"argument-error"),Of._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ot(e.idToken||e.accessToken,"argument-error"),Of._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return o1.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return o1.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:s}=e;if(!r&&!i&&!t&&!a||!s)return null;try{return new o1(s)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends kT{constructor(){super("facebook.com")}static credential(e){return Of._fromParams({providerId:hf.PROVIDER_ID,signInMethod:hf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hf.credentialFromTaggedObject(e)}static credentialFromError(e){return hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hf.credential(e.oauthAccessToken)}catch{return null}}}hf.FACEBOOK_SIGN_IN_METHOD="facebook.com";hf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends kT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Of._fromParams({providerId:Gd.PROVIDER_ID,signInMethod:Gd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gd.credentialFromTaggedObject(e)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gd.credential(t,r)}catch{return null}}}Gd.GOOGLE_SIGN_IN_METHOD="google.com";Gd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends kT{constructor(){super("github.com")}static credential(e){return Of._fromParams({providerId:ff.PROVIDER_ID,signInMethod:ff.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ff.credentialFromTaggedObject(e)}static credentialFromError(e){return ff.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ff.credential(e.oauthAccessToken)}catch{return null}}}ff.GITHUB_SIGN_IN_METHOD="github.com";ff.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2e="http://localhost";class F1 extends AT{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return vg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,vg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vg(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new F1(r,a)}static _create(e,t){return new F1(e,t)}buildRequest(){return{requestUri:t2e,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2e="saml.";class CN extends Xg{constructor(e){ot(e.startsWith(n2e),"argument-error"),super(e)}static credentialFromResult(e){return CN.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return CN.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=F1.fromJSON(e);return ot(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return F1._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends kT{constructor(){super("twitter.com")}static credential(e,t){return Of._fromParams({providerId:pf.PROVIDER_ID,signInMethod:pf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pf.credentialFromTaggedObject(e)}static credentialFromError(e){return pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return pf.credential(t,r)}catch{return null}}}pf.TWITTER_SIGN_IN_METHOD="twitter.com";pf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ive(n,e){return Kg(n,"POST","/v1/accounts:signUp",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await sg._fromIdTokenResponse(e,r,i),o=bQ(r);return new qu({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=bQ(r);return new qu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function bQ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2e(n){var e;if(fa(n.app))return Promise.reject(No(n));const t=ga(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new qu({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Ive(t,{returnSecureToken:!0}),i=await qu._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN extends es{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,DN.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new DN(e,t,r,i)}}function Mve(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?DN._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pve(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2e(n,e){const t=ln(n);await cj(!0,t,e);const{providerUserInfo:r}=await uNe(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Pve(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function e7(n,e,t=!1){const r=await Pg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return qu._forOperation(n,"link",r)}async function cj(n,e,t){await hD(e);const r=Pve(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ot(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ove(n,e,t=!1){const{auth:r}=n;if(fa(r.app))return Promise.reject(No(r));const i="reauthenticate";try{const a=await Pg(n,Mve(r,i,e,n),t);ot(a.idToken,r,"internal-error");const o=oj(a.idToken);ot(o,r,"internal-error");const{sub:s}=o;return ot(n.uid===s,r,"user-mismatch"),qu._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Lo(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rve(n,e,t=!1){if(fa(n.app))return Promise.reject(No(n));const r="signIn",i=await Mve(n,r,e),a=await qu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function uj(n,e){return Rve(ga(n),e)}async function Nve(n,e){const t=ln(n);return await cj(!1,t,e.providerId),e7(t,e)}async function Lve(n,e){return Ove(ln(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2e(n,e){return Kg(n,"POST","/v1/accounts:signInWithCustomToken",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2e(n,e){if(fa(n.app))return Promise.reject(No(n));const t=ga(n),r=await a2e(t,{token:e,returnSecureToken:!0}),i=await qu._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?t7._fromServerResponse(e,t):"totpInfo"in t?n7._fromServerResponse(e,t):Lo(e,"internal-error")}}class t7 extends XI{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new t7(t)}}class n7 extends XI{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new n7(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(n,e,t){var r;ot(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),ot(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ot(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ot(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(n){const e=ga(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s2e(n,e,t){const r=ga(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&dj(r,i,t),await fD(r,i,"getOobCode",VNe)}async function l2e(n,e,t){await Dve(ln(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r7(n),r})}async function c2e(n,e){await $Ne(ln(n),{oobCode:e})}async function jve(n,e){const t=ln(n),r=await Dve(t,{oobCode:e}),i=r.requestType;switch(ot(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ot(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ot(r.mfaInfo,t,"internal-error");default:ot(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=XI._fromServerResponse(ga(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function u2e(n,e){const{data:t}=await jve(ln(n),e);return t.email}async function d2e(n,e,t){if(fa(n.app))return Promise.reject(No(n));const r=ga(n),o=await fD(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ive).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&r7(n),l}),s=await qu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function h2e(n,e,t){return fa(n.app)?Promise.reject(No(n)):uj(ln(n),Dy.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&r7(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2e(n,e,t){const r=ga(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,s){ot(s.handleCodeInApp,r,"argument-error"),s&&dj(r,o,s)}a(i,t),await fD(r,i,"getOobCode",zNe)}function p2e(n,e){const t=lj.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function g2e(n,e,t){if(fa(n.app))return Promise.reject(No(n));const r=ln(n),i=Dy.credentialWithLink(e,t||dD());return ot(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),uj(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2e(n,e){return ya(n,"POST","/v1/accounts:createAuthUri",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2e(n,e){const t=Zq()?dD():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await m2e(ln(n),r);return i||[]}async function y2e(n,e){const t=ln(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&dj(t.auth,i,e);const{email:a}=await UNe(t.auth,i);a!==n.email&&await n.reload()}async function b2e(n,e,t){const r=ln(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&dj(r.auth,a,t);const{email:o}=await HNe(r.auth,a);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2e(n,e){return ya(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2e(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=ln(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Pg(r,w2e(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const s=r.providerData.find(({providerId:l})=>l==="password");s&&(s.displayName=r.displayName,s.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _2e(n,e){const t=ln(n);return fa(t.auth.app)?Promise.reject(No(t.auth)):Fve(t,e,null)}function S2e(n,e){return Fve(ln(n),null,e)}async function Fve(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const o=await Pg(n,jNe(r,a));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2e(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=oj(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const s=o!=="anonymous"&&o!=="custom"?o:null;return new s1(a,s)}}if(!r)return null;switch(r){case"facebook.com":return new E2e(a,i);case"github.com":return new A2e(a,i);case"google.com":return new k2e(a,i);case"twitter.com":return new C2e(a,i,n.screenName||null);case"custom":case"anonymous":return new s1(a,null);default:return new s1(a,r,i)}}class s1{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class $ve extends s1{constructor(e,t,r,i){super(e,t,r),this.username=i}}class E2e extends s1{constructor(e,t){super(e,"facebook.com",t)}}class A2e extends $ve{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class k2e extends s1{constructor(e,t){super(e,"google.com",t)}}class C2e extends $ve{constructor(e,t,r){super(e,"twitter.com",t,r)}}function D2e(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:T2e(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2e(n,e){return ln(n).setPersistence(e)}function M2e(n,e,t,r){return ln(n).onIdTokenChanged(e,t,r)}function P2e(n,e,t){return ln(n).beforeAuthStateChanged(e,t)}function O2e(n,e,t,r){return ln(n).onAuthStateChanged(e,t,r)}function R2e(n){return ln(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Jb("enroll",e,t)}static _fromMfaPendingCredential(e){return new Jb("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Jb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Jb._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=ga(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(s=>XI._fromServerResponse(r,s));ot(i.mfaPendingCredential,r,"internal-error");const o=Jb._fromMfaPendingCredential(i.mfaPendingCredential);return new i7(o,a,async s=>{const l=await s._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const u=await qu._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return ot(t.user,r,"internal-error"),qu._forOperation(t.user,t.operationType,c);default:Lo(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function N2e(n,e){var t;const r=ln(n),i=e;return ot(e.customData.operationType,r,"argument-error"),ot((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),i7._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2e(n,e){return ya(n,"POST","/v2/accounts/mfaEnrollment:start",va(n,e))}function j2e(n,e){return ya(n,"POST","/v2/accounts/mfaEnrollment:finalize",va(n,e))}function F2e(n,e){return ya(n,"POST","/v2/accounts/mfaEnrollment:withdraw",va(n,e))}class a7{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>XI._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new a7(e)}async getSession(){return Jb._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await Pg(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Pg(this.user,F2e(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const VF=new WeakMap;function $2e(n){const e=ln(n);return VF.has(e)||VF.set(e,a7._fromUser(e)),VF.get(e)}const IN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(IN,"1"),this.storage.removeItem(IN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2e=1e3,U2e=10;class Uve extends Bve{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tve(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);wNe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U2e):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},B2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uve.type="LOCAL";const ZI=Uve;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve extends Bve{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vve.type="SESSION";const my=Vve;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2e(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new hj(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async c=>c(t.origin,a)),l=await V2e(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,l)=>{const c=QI("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){return window}function H2e(n){qa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(){return typeof qa().WorkerGlobalScope<"u"&&typeof qa().importScripts=="function"}async function G2e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q2e(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function W2e(){return o7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zve="firebaseLocalStorageDb",Y2e=1,MN="firebaseLocalStorage",Hve="fbase_key";class JI{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fj(n,e){return n.transaction([MN],e?"readwrite":"readonly").objectStore(MN)}function K2e(){const n=indexedDB.deleteDatabase(zve);return new JI(n).toPromise()}function $z(){const n=indexedDB.open(zve,Y2e);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(MN,{keyPath:Hve})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(MN)?e(r):(r.close(),await K2e(),e(await $z()))})})}async function wQ(n,e,t){const r=fj(n,!0).put({[Hve]:e,value:t});return new JI(r).toPromise()}async function X2e(n,e){const t=fj(n,!1).get(e),r=await new JI(t).toPromise();return r===void 0?null:r.value}function xQ(n,e){const t=fj(n,!0).delete(e);return new JI(t).toPromise()}const Z2e=800,Q2e=3;class Gve{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $z(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Q2e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return o7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hj._getInstance(W2e()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await G2e(),!this.activeServiceWorker)return;this.sender=new z2e(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q2e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $z();return await wQ(e,IN,"1"),await xQ(e,IN),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wQ(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>X2e(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xQ(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=fj(i,!1).getAll();return new JI(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gve.type="LOCAL";const $1=Gve;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2e(n,e){return ya(n,"POST","/v2/accounts/mfaSignIn:start",va(n,e))}function eLe(n,e){return ya(n,"POST","/v2/accounts/mfaSignIn:finalize",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tLe=500,nLe=6e4,UP=1e12;class rLe{constructor(e){this.auth=e,this.counter=UP,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new iLe(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||UP;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||UP;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||UP;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class iLe{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ot(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=aLe(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},nLe)},tLe))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function aLe(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=Ave("rcb"),oLe=new qI(3e4,6e4);class sLe{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=qa().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ot(lLe(t),e,"argument-error"),this.shouldResolveImmediately(t)&&dQ(qa().grecaptcha)?Promise.resolve(qa().grecaptcha):new Promise((r,i)=>{const a=qa().setTimeout(()=>{i(ho(e,"network-request-failed"))},oLe.get());qa()[zF]=()=>{qa().clearTimeout(a),delete qa()[zF];const s=qa().grecaptcha;if(!s||!dQ(s)){i(ho(e,"internal-error"));return}const l=s.render;s.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=t,r(s)};const o=`${kNe()}?${wT({onload:zF,render:"explicit",hl:t})}`;Jq(o).catch(()=>{clearTimeout(a),i(ho(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=qa().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function lLe(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class cLe{async load(e){return new rLe(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve="recaptcha",uLe={theme:"light",type:"image"};let dLe=class{constructor(e,t,r=Object.assign({},uLe)){this.parameters=r,this.type=qve,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ga(e),this.isInvisible=this.parameters.size==="invisible",ot(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ot(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cLe:new sLe,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ot(!this.parameters.sitekey,this.auth,"argument-error"),ot(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ot(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=qa()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ot(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ot(Zq()&&!o7(),this.auth,"internal-error"),await hLe(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await sNe(this.auth);ot(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ot(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function hLe(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=mw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function fLe(n,e,t){if(fa(n.app))return Promise.reject(No(n));const r=ga(n),i=await pj(r,e,ln(t));return new s7(i,a=>uj(r,a))}async function pLe(n,e,t){const r=ln(n);await cj(!1,r,"phone");const i=await pj(r.auth,e,ln(t));return new s7(i,a=>Nve(r,a))}async function gLe(n,e,t){const r=ln(n);if(fa(r.auth.app))return Promise.reject(No(r.auth));const i=await pj(r.auth,e,ln(t));return new s7(i,a=>Lve(r,a))}async function pj(n,e,t){var r;const i=await t.verify();try{ot(typeof i=="string",n,"argument-error"),ot(t.type===qve,n,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return ot(o.type==="enroll",n,"internal-error"),(await L2e(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ot(o.type==="signin",n,"internal-error");const s=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return ot(s,n,"missing-multi-factor-info"),(await J2e(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await YNe(n,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function mLe(n,e){const t=ln(n);if(fa(t.auth.app))return Promise.reject(No(t.auth));await e7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ow=class RR{constructor(e){this.providerId=RR.PROVIDER_ID,this.auth=ga(e)}verifyPhoneNumber(e,t){return pj(this.auth,e,ln(t))}static credential(e,t){return mw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return RR.credentialFromTaggedObject(t)}static credentialFromError(e){return RR.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?mw._fromTokenResponse(t,r):null}};Ow.PROVIDER_ID="phone";Ow.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(n,e){return e?Lc(e):(ot(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7 extends AT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vLe(n){return Rve(n.auth,new l7(n),n.bypassAuthState)}function yLe(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),Ove(t,new l7(n),n.bypassAuthState)}async function bLe(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),e7(t,new l7(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wve{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vLe;case"linkViaPopup":case"linkViaRedirect":return bLe;case"reauthViaPopup":case"reauthViaRedirect":return yLe;default:Lo(this.auth,"internal-error")}}resolve(e){ih(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ih(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wLe=new qI(2e3,1e4);async function xLe(n,e,t){if(fa(n.app))return Promise.reject(ho(n,"operation-not-supported-in-this-environment"));const r=ga(n);ET(n,e,Xg);const i=ex(r,t);return new lg(r,"signInViaPopup",e,i).executeNotNull()}async function _Le(n,e,t){const r=ln(n);if(fa(r.auth.app))return Promise.reject(ho(r.auth,"operation-not-supported-in-this-environment"));ET(r.auth,e,Xg);const i=ex(r.auth,t);return new lg(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function SLe(n,e,t){const r=ln(n);ET(r.auth,e,Xg);const i=ex(r.auth,t);return new lg(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class lg extends Wve{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,lg.currentPopupAction&&lg.currentPopupAction.cancel(),lg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ih(this.filter.length===1,"Popup operations only handle one event");const e=QI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ho(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ho(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wLe.get())};e()}}lg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TLe="pendingRedirect",vC=new Map;class ELe extends Wve{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vC.get(this.auth._key());if(!e){try{const r=await ALe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vC.set(this.auth._key(),e)}return this.bypassAuthState||vC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ALe(n,e){const t=Kve(e),r=Yve(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function c7(n,e){return Yve(n)._set(Kve(e),"true")}function kLe(){vC.clear()}function u7(n,e){vC.set(n._key(),e)}function Yve(n){return Lc(n._redirectPersistence)}function Kve(n){return gw(TLe,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CLe(n,e,t){return DLe(n,e,t)}async function DLe(n,e,t){if(fa(n.app))return Promise.reject(No(n));const r=ga(n);ET(n,e,Xg),await r._initializationPromise;const i=ex(r,t);return await c7(i,r),i._openRedirect(r,e,"signInViaRedirect")}function ILe(n,e,t){return MLe(n,e,t)}async function MLe(n,e,t){const r=ln(n);if(ET(r.auth,e,Xg),fa(r.auth.app))return Promise.reject(No(r.auth));await r.auth._initializationPromise;const i=ex(r.auth,t);await c7(i,r.auth);const a=await Xve(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function PLe(n,e,t){return OLe(n,e,t)}async function OLe(n,e,t){const r=ln(n);ET(r.auth,e,Xg),await r.auth._initializationPromise;const i=ex(r.auth,t);await cj(!1,r,e.providerId),await c7(i,r.auth);const a=await Xve(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function RLe(n,e){return await ga(n)._initializationPromise,gj(n,e,!1)}async function gj(n,e,t=!1){if(fa(n.app))return Promise.reject(No(n));const r=ga(n),i=ex(r,e),o=await new ELe(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function Xve(n){const e=QI(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NLe=10*60*1e3;class Zve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LLe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Qve(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ho(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NLe&&this.cachedEventUids.clear(),this.cachedEventUids.has(_Q(e))}saveEventToCache(e){this.cachedEventUids.add(_Q(e)),this.lastProcessedEventTime=Date.now()}}function _Q(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Qve({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LLe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qve(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jve(n,e={}){return ya(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jLe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FLe=/^https?/;async function $Le(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Jve(n);for(const t of e)try{if(BLe(t))return}catch{}Lo(n,"unauthorized-domain")}function BLe(n){const e=dD(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!FLe.test(t))return!1;if(jLe.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ULe=new qI(3e4,6e4);function SQ(){const n=qa().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function VLe(n){return new Promise((e,t)=>{var r,i,a;function o(){SQ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SQ(),t(ho(n,"network-request-failed"))},timeout:ULe.get()})}if(!((i=(r=qa().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=qa().gapi)===null||a===void 0)&&a.load)o();else{const s=Ave("iframefcb");return qa()[s]=()=>{gapi.load?o():t(ho(n,"network-request-failed"))},Jq(`${DNe()}?onload=${s}`).catch(l=>t(l))}}).catch(e=>{throw NR=null,e})}let NR=null;function zLe(n){return NR=NR||VLe(n),NR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HLe=new qI(5e3,15e3),GLe="__/auth/iframe",qLe="emulator/auth/iframe",WLe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YLe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KLe(n){const e=n.config;ot(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qq(e,qLe):`https://${n.config.authDomain}/${GLe}`,r={apiKey:e.apiKey,appName:n.name,v:ky},i=YLe.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${wT(r).slice(1)}`}async function XLe(n){const e=await zLe(n),t=qa().gapi;return ot(t,n,"internal-error"),e.open({where:document.body,url:KLe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WLe,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=ho(n,"network-request-failed"),s=qa().setTimeout(()=>{a(o)},HLe.get());function l(){qa().clearTimeout(s),i(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZLe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},QLe=500,JLe=600,eje="_blank",tje="http://localhost";class TQ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nje(n,e,t,r=QLe,i=JLe){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},ZLe),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Xa().toLowerCase();t&&(s=wve(c)?eje:t),yve(c)&&(e=e||tje,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(bNe(c)&&s!=="_self")return rje(e||"",s),new TQ(null);const d=window.open(e||"",s,u);ot(d,n,"popup-blocked");try{d.focus()}catch{}return new TQ(d)}function rje(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ije="__/auth/handler",aje="emulator/auth/handler",oje=encodeURIComponent("fac");async function Bz(n,e,t,r,i,a){ot(n.config.authDomain,n,"auth-domain-config-required"),ot(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ky,eventId:i};if(e instanceof Xg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",LIe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(a||{}))o[u]=d}if(e instanceof kT){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const u of Object.keys(s))s[u]===void 0&&delete s[u];const l=await n._getAppCheckToken(),c=l?`#${oje}=${encodeURIComponent(l)}`:"";return`${sje(n)}?${wT(s).slice(1)}${c}`}function sje({config:n}){return n.emulator?Qq(n,aje):`https://${n.authDomain}/${ije}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="webStorageSupport";class lje{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=my,this._completeRedirectFn=gj,this._overrideRedirectResult=u7}async _openPopup(e,t,r,i){var a;ih((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Bz(e,t,r,dD(),i);return nje(e,o,QI())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Bz(e,t,r,dD(),i);return H2e(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(ih(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XLe(e),r=new Zve(e);return t.register("authEvent",i=>(ot(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HF,{type:HF},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[HF];o!==void 0&&t(!!o),Lo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$Le(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tve()||bve()||YI()}}const eye=lje;class cje{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return yf("unexpected MultiFactorSessionType")}}}class d7 extends cje{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new d7(e)}_finalizeEnroll(e,t,r){return j2e(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return eLe(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tye{constructor(){}static assertion(e){return d7._fromCredential(e)}}tye.FACTOR_ID="phone";var EQ="@firebase/auth",AQ="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uje{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dje(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hje(n){Gu(new zc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;ot(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Eve(n)},c=new ENe(r,i,a,l);return RNe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gu(new zc("auth-internal",e=>{const t=ga(e.getProvider("auth").getImmediate());return(r=>new uje(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(EQ,AQ,dje(n)),Ls(EQ,AQ,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fje=5*60,pje=_ge("authIdTokenMaxAge")||fje;let kQ=null;const gje=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>pje)return;const i=t==null?void 0:t.token;kQ!==i&&(kQ=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mje(n=zL()){const e=Wg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ONe(n,{popupRedirectResolver:eye,persistence:[$1,ZI,my]}),r=_ge("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=gje(a.toString());P2e(t,o,()=>o(t.currentUser)),M2e(t,s=>o(s))}}const i=wge("auth");return i&&kve(t,`http://${i}`),t}function vje(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ANe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=ho("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",vje().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hje("Browser");const nye="@firebase/installations",h7="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rye=1e4,iye=`w:${h7}`,aye="FIS_v2",yje="https://firebaseinstallations.googleapis.com/v1",bje=60*60*1e3,wje="installations",xje="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _je={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rw=new qg(wje,xje,_je);function oye(n){return n instanceof es&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sye({projectId:n}){return`${yje}/projects/${n}/installations`}function lye(n){return{token:n.token,requestStatus:2,expiresIn:Tje(n.expiresIn),creationTime:Date.now()}}async function cye(n,e){const r=(await e.json()).error;return Rw.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uye({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Sje(n,{refreshToken:e}){const t=uye(n);return t.append("Authorization",Eje(e)),t}async function dye(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Tje(n){return Number(n.replace("s","000"))}function Eje(n){return`${aye} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aje({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=sye(n),i=uye(n),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:aye,appId:n.appId,sdkVersion:iye},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await dye(()=>fetch(r,s));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:lye(c.authToken)}}else throw await cye("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hye(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kje(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cje=/^[cdef][\w-]{21}$/,Uz="";function Dje(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Ije(n);return Cje.test(t)?t:Uz}catch{return Uz}}function Ije(n){return kje(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fye=new Map;function pye(n,e){const t=mj(n);gye(t,e),Mje(t,e)}function gye(n,e){const t=fye.get(n);if(t)for(const r of t)r(e)}function Mje(n,e){const t=Pje();t&&t.postMessage({key:n,fid:e}),Oje()}let ew=null;function Pje(){return!ew&&"BroadcastChannel"in self&&(ew=new BroadcastChannel("[Firebase] FID Change"),ew.onmessage=n=>{gye(n.data.key,n.data.fid)}),ew}function Oje(){fye.size===0&&ew&&(ew.close(),ew=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rje="firebase-installations-database",Nje=1,Nw="firebase-installations-store";let GF=null;function f7(){return GF||(GF=Mge(Rje,Nje,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Nw)}}})),GF}async function PN(n,e){const t=mj(n),i=(await f7()).transaction(Nw,"readwrite"),a=i.objectStore(Nw),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&pye(n,e.fid),e}async function mye(n){const e=mj(n),r=(await f7()).transaction(Nw,"readwrite");await r.objectStore(Nw).delete(e),await r.done}async function vj(n,e){const t=mj(n),i=(await f7()).transaction(Nw,"readwrite"),a=i.objectStore(Nw),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&pye(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p7(n){let e;const t=await vj(n.appConfig,r=>{const i=Lje(r),a=jje(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===Uz?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Lje(n){const e=n||{fid:Dje(),registrationStatus:0};return vye(e)}function jje(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Rw.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Fje(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$je(n)}:{installationEntry:e}}async function Fje(n,e){try{const t=await Aje(n,e);return PN(n.appConfig,t)}catch(t){throw oye(t)&&t.customData.serverCode===409?await mye(n.appConfig):await PN(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function $je(n){let e=await CQ(n.appConfig);for(;e.registrationStatus===1;)await hye(100),e=await CQ(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await p7(n);return r||t}return e}function CQ(n){return vj(n,e=>{if(!e)throw Rw.create("installation-not-found");return vye(e)})}function vye(n){return Bje(n)?{fid:n.fid,registrationStatus:0}:n}function Bje(n){return n.registrationStatus===1&&n.registrationTime+rye<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uje({appConfig:n,heartbeatServiceProvider:e},t){const r=Vje(n,t),i=Sje(n,t),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:iye,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await dye(()=>fetch(r,s));if(l.ok){const c=await l.json();return lye(c)}else throw await cye("Generate Auth Token",l)}function Vje(n,{fid:e}){return`${sye(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7(n,e=!1){let t;const r=await vj(n.appConfig,a=>{if(!yye(a))throw Rw.create("not-registered");const o=a.authToken;if(!e&&Gje(o))return a;if(o.requestStatus===1)return t=zje(n,e),a;{if(!navigator.onLine)throw Rw.create("app-offline");const s=Wje(a);return t=Hje(n,s),s}});return t?await t:r.authToken}async function zje(n,e){let t=await DQ(n.appConfig);for(;t.authToken.requestStatus===1;)await hye(100),t=await DQ(n.appConfig);const r=t.authToken;return r.requestStatus===0?g7(n,e):r}function DQ(n){return vj(n,e=>{if(!yye(e))throw Rw.create("not-registered");const t=e.authToken;return Yje(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Hje(n,e){try{const t=await Uje(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await PN(n.appConfig,r),t}catch(t){if(oye(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await mye(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await PN(n.appConfig,r)}throw t}}function yye(n){return n!==void 0&&n.registrationStatus===2}function Gje(n){return n.requestStatus===2&&!qje(n)}function qje(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+bje}function Wje(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Yje(n){return n.requestStatus===1&&n.requestTime+rye<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kje(n){const e=n,{installationEntry:t,registrationPromise:r}=await p7(e);return r?r.catch(console.error):g7(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xje(n,e=!1){const t=n;return await Zje(t),(await g7(t,e)).token}async function Zje(n){const{registrationPromise:e}=await p7(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qje(n){if(!n||!n.options)throw qF("App Configuration");if(!n.name)throw qF("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qF(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function qF(n){return Rw.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye="installations",Jje="installations-internal",e5e=n=>{const e=n.getProvider("app").getImmediate(),t=Qje(e),r=Wg(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},t5e=n=>{const e=n.getProvider("app").getImmediate(),t=Wg(e,bye).getImmediate();return{getId:()=>Kje(t),getToken:i=>Xje(t,i)}};function n5e(){Gu(new zc(bye,e5e,"PUBLIC")),Gu(new zc(Jje,t5e,"PRIVATE"))}n5e();Ls(nye,h7);Ls(nye,h7,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="analytics",r5e="firebase_id",i5e="origin",a5e=60*1e3,o5e="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",m7="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=new OI("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5e={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$c=new qg("analytics","Analytics",s5e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5e(n){if(!n.startsWith(m7)){const e=$c.create("invalid-gtag-resource",{gtagURL:n});return fl.warn(e.message),""}return n}function wye(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function c5e(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function u5e(n,e){const t=c5e("firebase-js-sdk-policy",{createScriptURL:l5e}),r=document.createElement("script"),i=`${m7}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function d5e(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function h5e(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const l=(await wye(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(s){fl.error(s)}n("config",i,a)}async function f5e(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await wye(t);for(const l of o){const c=s.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){fl.error(a)}}function p5e(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,l]=o;await f5e(n,e,t,s,l)}else if(a==="config"){const[s,l]=o;await h5e(n,e,t,r,s,l)}else if(a==="consent"){const[s,l]=o;n("consent",s,l)}else if(a==="get"){const[s,l,c]=o;n("get",s,l,c)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){fl.error(s)}}return i}function g5e(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=p5e(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function m5e(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(m7)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5e=30,y5e=1e3;class b5e{constructor(e={},t=y5e){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xye=new b5e;function w5e(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function x5e(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:w5e(r)},a=o5e.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(s=l.error.message)}catch{}throw $c.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function _5e(n,e=xye,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw $c.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw $c.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new E5e;return setTimeout(async()=>{s.abort()},a5e),_ye({appId:r,apiKey:i,measurementId:a},o,s,e)}async function _ye(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=xye){var a;const{appId:o,measurementId:s}=n;try{await S5e(r,e)}catch(l){if(s)return fl.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:s};throw l}try{const l=await x5e(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!T5e(c)){if(i.deleteThrottleMetadata(o),s)return fl.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw l}const u=Number((a=c==null?void 0:c.customData)===null||a===void 0?void 0:a.httpStatus)===503?mZ(t,i.intervalMillis,v5e):mZ(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),fl.debug(`Calling attemptFetch again in ${u} millis`),_ye(n,d,r,i)}}function S5e(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r($c.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function T5e(n){if(!(n instanceof es)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class E5e{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function A5e(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}async function k5e(n,e,t,r){{const i=await e;n("config",i,{update:!0,user_id:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5e(){if(ZC())try{await Ege()}catch(n){return fl.warn($c.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return fl.warn($c.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function D5e(n,e,t,r,i,a,o){var s;const l=_5e(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&fl.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>fl.error(f)),e.push(l);const c=C5e().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);m5e(a)||u5e(a,u.measurementId),i("js",new Date);const h=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return h[i5e]="firebase",h.update=!0,d!=null&&(h[r5e]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5e{constructor(e){this.app=e}_delete(){return delete l1[this.app.options.appId],Promise.resolve()}}let l1={},IQ=[];const MQ={};let WF="dataLayer",M5e="gtag",PQ,v7,OQ=!1;function P5e(){const n=[];if(nq()&&n.push("This is a browser extension environment."),PIe()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=$c.create("invalid-analytics-context",{errorInfo:e});fl.warn(t.message)}}function O5e(n,e,t){P5e();const r=n.options.appId;if(!r)throw $c.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)fl.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $c.create("no-api-key");if(l1[r]!=null)throw $c.create("already-exists",{id:r});if(!OQ){d5e(WF);const{wrappedGtag:a,gtagCore:o}=g5e(l1,IQ,MQ,WF,M5e);v7=a,PQ=o,OQ=!0}return l1[r]=D5e(n,IQ,MQ,e,PQ,WF,t),new I5e(n)}function R5e(n=zL()){n=ln(n);const e=Wg(n,ON);return e.isInitialized()?e.getImmediate():N5e(n)}function N5e(n,e={}){const t=Wg(n,ON);if(t.isInitialized()){const i=t.getImmediate();if(QC(e,t.getOptions()))return i;throw $c.create("already-initialized")}return t.initialize({options:e})}function L5e(n,e,t){n=ln(n),k5e(v7,l1[n.app.options.appId],e).catch(r=>fl.error(r))}function zf(n,e,t,r){n=ln(n),A5e(v7,l1[n.app.options.appId],e,t,r).catch(i=>fl.error(i))}const RQ="@firebase/analytics",NQ="0.10.8";function j5e(){Gu(new zc(ON,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return O5e(r,i,t)},"PUBLIC")),Gu(new zc("analytics-internal",n,"PRIVATE")),Ls(RQ,NQ),Ls(RQ,NQ,"esm2017");function n(e){try{const t=e.getProvider(ON).getImmediate();return{logEvent:(r,i,a)=>zf(t,r,i,a)}}catch(t){throw $c.create("interop-component-reg-failed",{reason:t})}}}j5e();const F5e={apiKey:"AIzaSyCqlF02YJgHBt-uxqAlzF0bYUf5_ihOlUk",authDomain:"make10000hours.firebaseapp.com",projectId:"make10000hours",storageBucket:"make10000hours.firebasestorage.app",messagingSenderId:"496225832510",appId:"1:496225832510:web:27dc0adaf5d89a71cd0b6f",measurementId:"G-X6YHGN5WRS"},y7=VL(F5e),vy=mje(y7);typeof window<"u"&&(window.firebaseAuth=vy);I2e(vy,ZI).then(()=>{console.log("🔐 Firebase Auth persistence set to LOCAL")}).catch(n=>{console.error("❌ Failed to set Firebase Auth persistence:",n)});const Je=jRe(y7);let ma;try{ma=R5e(y7),console.log("📊 Firebase Analytics initialized")}catch(n){console.warn("⚠️ Firebase Analytics not available:",n)}const yC={timer:{pomodoro:25,shortBreak:5,longBreak:15,autoStartBreaks:!1,autoStartPomodoros:!1,longBreakInterval:4},darkMode:!1,compactTaskView:!1};let LQ=!1;const jQ=Zt(Je,"users"),Qt=Vf((n,e)=>({user:null,isLoading:!0,error:null,isAuthenticated:!1,isInitialized:!1,initialize:()=>{if(LQ){console.log("User store already initializing, skipping...");return}return LQ=!0,console.log("🔐 Initializing user store authentication..."),O2e(vy,async r=>{if(console.log("🔐 Auth state changed from userStore:",r?"User found":"No user"),r)try{n({isLoading:!0});const i=await e().createUserDataIfNotExists(r.uid,r),a={...r,...i};n({user:a,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null}),console.log("✅ User authentication restored successfully");try{const{useSyncStore:o}=await vr(async()=>{const{useSyncStore:s}=await Promise.resolve().then(()=>Q5e);return{useSyncStore:s}},void 0);await o.getState().initializeSync(),console.log("✅ Sync initialized for user")}catch(o){console.error("❌ Failed to initialize sync:",o)}}catch(i){console.error("❌ Error creating user data:",i),n({error:i,isLoading:!1,isAuthenticated:!1,isInitialized:!0})}else n({user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null}),console.log("🔐 No authenticated user found")},r=>{console.error("❌ Firebase Auth error:",r),n({error:r,isLoading:!1,isAuthenticated:!1,isInitialized:!0})})},createUserDataIfNotExists:async(t,r)=>{try{const i=()=>r!=null&&r.displayName?r.displayName:r!=null&&r.email?r.email.split("@")[0]:`user_${t.substring(0,8)}`,a={uid:t,userName:i(),settings:yC},o=_n(jQ,t),s=await Wd(o);if(!s.exists())await Jd(o,a);else{const l=s.data();if(!l.userName){const c={...l,userName:i()};return await Jd(o,c,{merge:!0}),c}return l}return a}catch(i){throw new Error(`Failed to create user data: ${i}`)}},updateUserData:async t=>{try{const r=_n(jQ,t.uid);await Jd(r,t,{merge:!0});const{user:i}=e();i&&(console.log("Updating user data in store:",t),n({user:{...i,...t}}))}catch(r){throw new Error(`Failed to update user data: ${r}`)}},signOut:async()=>{try{n({isLoading:!0});try{const{googleOAuthService:t}=await vr(async()=>{const{googleOAuthService:r}=await Promise.resolve().then(()=>K5e);return{googleOAuthService:r}},void 0);t.clearTokenOnLogout()}catch(t){console.warn("Failed to clear Google Calendar token:",t)}await R2e(vy),n({user:null,isAuthenticated:!1,isInitialized:!0,error:null,isLoading:!1})}catch(t){n({error:t,isLoading:!1})}},setUser:t=>{n({user:t,isAuthenticated:!!t,error:null})},setError:t=>n({error:t}),setLoading:t=>n({isLoading:t})})),Wo=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Qt},Symbol.toStringTag,{value:"Module"})),Sye=(n,e)=>{ma&&zf(ma,"page_view",{page_title:e||n,page_location:window.location.href,page_path:window.location.pathname})},$5e=n=>{ma&&zf(ma,"login",{method:n})},B5e=n=>{ma&&zf(ma,"sign_up",{method:n})},U5e=n=>{ma&&zf(ma,"task_created",{project_id:n||"no-project",timestamp:new Date().toISOString()})},V5e=(n,e,t)=>{ma&&zf(ma,"task_completed",{task_id:n,time_spent_minutes:e,project_id:t||"no-project",timestamp:new Date().toISOString()})},FQ=(n,e)=>{ma&&zf(ma,"pomodoro_started",{task_id:n,estimated_time_minutes:e,timestamp:new Date().toISOString()})},z5e=(n,e)=>{ma&&zf(ma,"pomodoro_completed",{task_id:n,actual_time_minutes:e,timestamp:new Date().toISOString()})},H5e=n=>{ma&&zf(ma,"project_created",{project_name:n,timestamp:new Date().toISOString()})},G5e=n=>{ma&&L5e(ma,n)},q5e=(n,e)=>{ma&&zf(ma,n,{...e,timestamp:new Date().toISOString()})},W5e="workSessions",Eo=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(n&&typeof n.toDate=="function")return n.toDate();if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?new Date:e}return new Date};class Y5e{constructor(){zt(this,"workSessionsCollection",Zt(Je,W5e))}async createWorkSession(e){try{const t=new Date().getTime(),r=`${e.taskId}_${e.date}_${t}`,i=_n(this.workSessionsCollection,r),a={...e,id:r,status:e.status||"completed",createdAt:new Date,updatedAt:new Date};return await Jd(i,a),r}catch(t){throw console.error("Error creating work session:",t),t}}async createActiveSession(e,t,r,i){try{const a=new Date,o={userId:r,taskId:e,projectId:t,date:a.toISOString().split("T")[0],duration:0,sessionType:i,status:"active",startTime:a,notes:`${i} session started`};return await this.createWorkSession(o)}catch(a){throw console.error("Error creating active session:",a),a}}async updateSession(e,t){try{const r=_n(this.workSessionsCollection,e),i={...t,updatedAt:new Date};await Ca(r,i)}catch(r){throw console.error("Error updating session:",r),r}}async incrementDuration(e,t){try{const r=_n(this.workSessionsCollection,e),i={duration:cve(t),updatedAt:new Date};await Ca(r,i)}catch(r){throw console.error("Error incrementing session duration:",r),r}}async completeSession(e,t,r,i){try{await this.updateSession(e,{duration:t,status:r,endTime:new Date,notes:i||`Session ${r}: ${t}m`})}catch(a){throw console.error("Error completing session:",a),a}}async getActiveSessions(e){try{const t=qt(this.workSessionsCollection,vt("userId","==",e),vt("status","==","active"),ta("updatedAt","desc"));return(await kn(t)).docs.map(i=>{const a=i.data();return{id:i.id,...a,createdAt:Eo(a.createdAt),updatedAt:Eo(a.updatedAt),startTime:a.startTime?Eo(a.startTime):void 0,endTime:a.endTime?Eo(a.endTime):void 0}})}catch(t){return console.error("Error fetching active sessions:",t),[]}}async cleanupOrphanedSessions(e,t=60){try{const r=await this.getActiveSessions(e),i=new Date(Date.now()-t*60*1e3);let a=0;for(const o of r)new Date(o.updatedAt)<i&&(o.duration>0?(await this.completeSession(o.id,o.duration,"completed",`Session completed: ${o.duration}m (app restart cleanup)`),console.log(`✅ Completed meaningful session: ${o.id} (${o.duration}m)`)):(await this.deleteWorkSession(o.id),console.log(`🗑️ Deleted empty orphaned session: ${o.id}`)),a++);return a}catch(r){return console.error("Error cleaning up orphaned sessions:",r),0}}async upsertWorkSession(e,t=0,r="manual"){try{const i={...e,duration:t,sessionType:r,status:"completed",notes:r==="manual"?t>0?`Manual time addition: +${t}m`:`Manual time reduction: ${t}m`:`${r} session completed`};return await this.createWorkSession(i)}catch(i){throw console.error("Error upserting work session:",i),i}}async getWorkSessionsByDateRange(e,t,r){try{const i=qt(this.workSessionsCollection,vt("userId","==",e),vt("updatedAt",">=",Kr.fromDate(t)),vt("updatedAt","<=",Kr.fromDate(r)),ta("updatedAt","desc"));return(await kn(i)).docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:Eo(s.createdAt),updatedAt:Eo(s.updatedAt)}})}catch(i){throw console.error("Error fetching work sessions:",i),i}}async getWorkSessionsByTask(e,t){try{const r=qt(this.workSessionsCollection,vt("userId","==",e),vt("taskId","==",t));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Eo(o.createdAt),updatedAt:Eo(o.updatedAt)}})}catch(r){throw console.error("Error fetching task work sessions:",r),r}}async getWorkSessionsByProject(e,t){try{const r=qt(this.workSessionsCollection,vt("userId","==",e),vt("projectId","==",t),ta("updatedAt","desc"));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Eo(o.createdAt),updatedAt:Eo(o.updatedAt)}})}catch(r){throw console.error("Error fetching project work sessions:",r),r}}async updateWorkSessionsProjectId(e,t,r){try{const i=await this.getWorkSessionsByTask(e,t);if(i.length===0)return 0;const a=i.map(async o=>{const s=_n(this.workSessionsCollection,o.id);return Ca(s,{projectId:r,updatedAt:new Date})});return await Promise.all(a),console.log(`✅ Updated ${i.length} work sessions for task ${t} to project ${r}`),i.length}catch(i){throw console.error("Error updating work sessions project ID:",i),i}}async deleteWorkSession(e){try{const t=_n(this.workSessionsCollection,e);await sve(t)}catch(t){throw console.error("Error deleting work session:",t),t}}subscribeToWorkSessions(e,t){const r=qt(this.workSessionsCollection,vt("userId","==",e));return ny(r,i=>{const a=i.docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:Eo(s.createdAt),updatedAt:Eo(s.updatedAt)}});t(a)})}async getWorkSessionsForRange(e,t,r){try{const i=t.toISOString().split("T")[0],a=r.toISOString().split("T")[0];console.log("WorkSessionService - Loading sessions for range:",{userId:e,startDate:i,endDate:a});const o=qt(this.workSessionsCollection,vt("userId","==",e)),l=(await kn(o)).docs.map(u=>{const d=u.data();return{id:u.id,...d,createdAt:Eo(d.createdAt),updatedAt:Eo(d.updatedAt)}}),c=l.filter(u=>{const d=u.date;return d>=i&&d<=a});return c.sort((u,d)=>d.date.localeCompare(u.date)),console.log("WorkSessionService - Loaded sessions:",c.length,"out of",l.length),c}catch(i){throw console.error("Error getting work sessions for range:",i),i}}async getAllWorkSessions(e){try{console.log("WorkSessionService - Loading ALL sessions for user:",e);const t=qt(this.workSessionsCollection,vt("userId","==",e)),i=(await kn(t)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Eo(o.createdAt),updatedAt:Eo(o.updatedAt)}});return i.sort((a,o)=>o.date.localeCompare(a.date)),console.log("WorkSessionService - Loaded ALL sessions:",i.length),i}catch(t){throw console.error("Error getting all work sessions:",t),t}}async getRecentWorkSessions(e,t=50){try{const r=qt(this.workSessionsCollection,vt("userId","==",e),ta("updatedAt","desc"),rve(t));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:Eo(o.createdAt),updatedAt:Eo(o.updatedAt)}})}catch(r){throw console.error("Error fetching recent work sessions:",r),r}}}const Da=new Y5e,$Q=Zt(Je,"tasks"),BQ=Zt(Je,"projects"),Ut=Vf((n,e)=>({tasks:[],projects:[],isAddingTask:!1,editingTaskId:null,showDetailsMenu:!1,isLoading:!1,unsubscribe:null,initializeStore:async()=>{const{user:t,isAuthenticated:r}=Qt.getState();if(!r||!t){n({tasks:[],projects:[],isLoading:!1});return}n({isLoading:!0});const{unsubscribe:i}=e();i&&i();const a=qt($Q,vt("userId","==",t.uid),ta("order","asc")),o=qt(BQ,vt("userId","==",t.uid)),s=ny(a,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));console.log(`Fetched ${d.length} tasks for user ${t.uid}`),n({tasks:d})}),l=ny(o,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));n({projects:d,isLoading:!1})});n({unsubscribe:()=>{s(),l()}})},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,tasks:[],projects:[]}))},addProject:async t=>{try{const{user:r}=Qt.getState();if(!r)throw new Error("User not authenticated");const i={...t,userId:r.uid};if(t.name==="No Project"){const o=_n(Je,"projects","no-project");return await Jd(o,i),"no-project"}const a=await uD(BQ,i);return H5e(t.name),a.id}catch(r){throw console.error("Error adding project:",r),r}},updateProject:async(t,r)=>{try{const{user:i}=Qt.getState();if(!i)throw new Error("User not authenticated");const a=_n(Je,"projects",t);await Ca(a,r),console.log(`✅ Successfully updated project ${t}`)}catch(i){throw console.error(`❌ Error updating project ${t}:`,i),i}},deleteProject:async t=>{try{const{user:r}=Qt.getState();if(!r)throw new Error("User not authenticated");console.log(`🗑️ Starting deletion of project ${t}...`);const i=qt($Q,vt("userId","==",r.uid),vt("projectId","==",t)),a=await kn(i),o=a.docs.map(c=>c.id);if(console.log(`📋 Found ${o.length} tasks in project ${t}`),o.length>0)try{for(const c of o){const u=await Da.getWorkSessionsByTask(r.uid,c);if(console.log(`📋 Found ${u.length} work sessions for task ${c}`),u.length>0){const d=u.map(h=>Da.deleteWorkSession(h.id));await Promise.all(d),console.log(`✅ Deleted ${u.length} work sessions for task ${c}`)}}}catch(c){console.error("❌ Error deleting work sessions for project tasks:",c),console.warn(`⚠️ Work session cleanup failed for project ${t}, but continuing with deletion`)}const s=gC(Je);a.docs.forEach(c=>{s.delete(c.ref)});const l=_n(Je,"projects",t);s.delete(l),await s.commit(),console.log(`✅ Successfully deleted project ${t}, ${o.length} tasks, and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting project ${t}:`,r),r}},addTask:async t=>{try{console.log("addTask started");const{user:r}=Qt.getState();if(!r)throw new Error("No user found");console.log("User found:",r.uid);const i=Zt(Je,"tasks"),{tasks:a}=e();console.log("Current tasks count:",a.length);const o={...t,userId:r.uid,order:a.length,createdAt:new Date,updatedAt:new Date};console.log("About to add task to Firestore:",o);const s=await uD(i,o);return console.log("Firestore addDoc completed, docRef:",s.id),U5e(t.projectId),console.log("Task creation initiated successfully"),s.id}catch(r){throw console.error("Error adding task:",r),r}},updateTask:async(t,r)=>{try{const{user:i}=Qt.getState();if(!i)throw new Error("No user found");const{tasks:a}=e(),o=a.find(u=>u.id===t),s=r.projectId&&o&&r.projectId!==o.projectId,l=Object.fromEntries(Object.entries(r).filter(([u,d])=>d!==void 0)),c=_n(Je,"tasks",t);if(await Ca(c,{...l,updatedAt:new Date}),s&&r.projectId)try{const u=await Da.updateWorkSessionsProjectId(i.uid,t,r.projectId);u>0&&console.log(`🔄 Updated ${u} work sessions for task ${t} to project ${r.projectId}`)}catch(u){console.error("❌ Failed to update work sessions project ID:",u),console.warn("⚠️ Task was updated but work session project IDs may be inconsistent")}n({editingTaskId:null})}catch(i){throw console.error("Error updating task:",i),i}},updateTaskLocally:(t,r)=>{const{tasks:i}=e();i[t]={...i[t],...r,updatedAt:new Date},n({tasks:[...i]})},deleteTask:async t=>{try{const{user:r}=Qt.getState();if(!r)throw new Error("No user found");console.log(`🗑️ Starting deletion of task ${t}...`);try{const a=await Da.getWorkSessionsByTask(r.uid,t);if(console.log(`📋 Found ${a.length} work sessions for task ${t}`),a.length>0){const o=a.map(async s=>(console.log(`🗑️ Deleting work session: ${s.id}`),Da.deleteWorkSession(s.id)));await Promise.all(o),console.log(`✅ Successfully deleted ${a.length} work sessions for task ${t}`)}else console.log(`ℹ️ No work sessions found for task ${t}`)}catch(a){console.error("❌ Error deleting work sessions for task:",a),console.warn(`⚠️ Work session cleanup failed for task ${t}, but continuing with task deletion`)}console.log(`🗑️ Deleting task ${t}...`);const i=_n(Je,"tasks",t);await sve(i),console.log(`✅ Successfully deleted task ${t} and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting task ${t}:`,r),r}},toggleTaskCompletion:async(t,r="default")=>{try{const{tasks:i}=e(),a=i.find(u=>u.id===t);if(!a)return null;const o=!a.completed,s=o?"completed":"pomodoro";let l=null;if(o&&r==="pomodoro"&&(l=e().getNextPomodoroTask(t)),o){const{useTimerStore:u}=await vr(async()=>{const{useTimerStore:h}=await Promise.resolve().then(()=>R3e);return{useTimerStore:h}},void 0),d=u.getState();d.currentTask&&d.currentTask.id===t&&(r==="pomodoro"&&l?await d.switchToNextPomodoroTask(l):(d.isRunning&&await d.pause(),await d.setCurrentTask(null)))}const c=_n(Je,"tasks",t);return await Ca(c,{completed:o,status:s,updatedAt:new Date}),o&&V5e(t,a.timeSpent,a.projectId),l}catch(i){throw console.error("Error toggling task completion:",i),i}},updateTaskStatus:async(t,r)=>{try{const{tasks:i}=e(),a=i.find(c=>c.id===t);if(!a)return;const o=r==="completed"?!0:a.status==="completed"?!1:a.completed,s={status:r,completed:o,updatedAt:new Date};r==="pomodoro"&&(s.hideFromPomodoro=!1);const l=_n(Je,"tasks",t);await Ca(l,s)}catch(i){throw console.error("Error updating task status:",i),i}},reorderTasks:async(t,r)=>{try{const{tasks:i}=e(),a=i.findIndex(c=>c.id===t);if(a===-1)return;const o=[...i],[s]=o.splice(a,1);o.splice(r,0,s);const l=o.map(async(c,u)=>{const d=_n(Je,"tasks",c.id);return Ca(d,{order:u,updatedAt:c.id===t?new Date:c.updatedAt})});await Promise.all(l)}catch(i){throw console.error("Error reordering tasks:",i),i}},moveTaskToStatusAndPosition:async(t,r,i)=>{try{const{tasks:a}=e(),o=a.findIndex(v=>v.id===t);if(o===-1)return;const s=a[o],l=r==="completed"?!0:s.status==="completed"?!1:s.completed,c=[...a];c[o]={...s,status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro};const[u]=c.splice(o,1),d=o<i?i-1:i;c.splice(d,0,u);const h=[],f=_n(Je,"tasks",t);h.push(Ca(f,{status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro,order:d,updatedAt:new Date}));const m=a;for(let v=0;v<c.length;v++){const y=c[v],w=m.find(T=>T.id===y.id);if(y.id===t||!w||w.order===v)continue;const _=_n(Je,"tasks",y.id);h.push(Ca(_,{order:v,updatedAt:new Date}))}await Promise.all(h)}catch(a){throw console.error("Error moving task to status and position:",a),a}},timeSpentIncrement:async(t,r=1)=>{if(r<=0){console.warn("Increment must be a positive number");return}const{tasks:i}=e(),a=i.find(s=>s.id===t);if(!a)throw console.error("Task not found:",t),new Error("Task not found");const o=a.timeSpent+r;if(o<0)throw console.error("Time spent cannot be negative"),new Error("Time spent cannot be negative");try{const s=_n(Je,"tasks",t);await Ca(s,{timeSpent:o,updatedAt:new Date})}catch(s){throw console.error("Error incrementing time spent:",s),s}},setIsAddingTask:t=>n({isAddingTask:t}),setEditingTaskId:t=>n({editingTaskId:t}),setShowDetailsMenu:t=>n({showDetailsMenu:t}),handleMoveCompletedDown:async()=>{try{const{tasks:t}=e(),r=t.filter(s=>s.completed),a=[...t.filter(s=>!s.completed),...r],o=gC(Je);a.forEach((s,l)=>{const c=_n(Je,"tasks",s.id);o.update(c,{order:l})}),await o.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error moving completed tasks:",t),t}},handleArchiveCompleted:async()=>{try{const{tasks:t}=e(),r=t.filter(a=>a.completed),i=gC(Je);r.forEach(a=>{const o=_n(Je,"tasks",a.id);i.update(o,{hideFromPomodoro:!0,updatedAt:new Date})}),await i.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error archiving completed tasks:",t),t}},cleanupOrphanedWorkSessions:async()=>{try{const{user:t}=Qt.getState(),{tasks:r}=e();if(!t)throw new Error("No user found");console.log("🧹 Starting cleanup of orphaned work sessions...");const i=await Da.getRecentWorkSessions(t.uid,1e3);console.log(`Found ${i.length} total work sessions`);const a=new Set(r.map(l=>l.id));console.log(`Found ${a.size} current tasks`);const o=i.filter(l=>!a.has(l.taskId));if(console.log(`Found ${o.length} orphaned work sessions to delete`),o.length===0)return console.log("✅ No orphaned work sessions found"),{deletedCount:0,orphanedSessions:[]};const s=o.map(l=>Da.deleteWorkSession(l.id));return await Promise.all(s),console.log(`✅ Successfully deleted ${o.length} orphaned work sessions`),{deletedCount:o.length,orphanedSessions:o.map(l=>({id:l.id,taskId:l.taskId,duration:l.duration,date:l.date}))}}catch(t){throw console.error("Error cleaning up orphaned work sessions:",t),t}},getNextPomodoroTask:t=>{const{tasks:r}=e(),i=r.filter(s=>s.status==="pomodoro"&&!s.completed&&!s.hideFromPomodoro).sort((s,l)=>s.order-l.order);console.log("Finding next Pomodoro task:",{currentTaskId:t,allPomodoroTasks:i.map(s=>({id:s.id,title:s.title,order:s.order}))});const a=i.findIndex(s=>s.id===t),o=a>=0&&a<i.length-1?i[a+1]:null;return console.log("Next task result:",{currentIndex:a,nextTask:o?{id:o.id,title:o.title}:null}),o}}));Qt.subscribe(n=>{const e=Ut.getState();if(!n.isInitialized){console.log("TaskStore - User store not initialized yet, waiting...");return}console.log("TaskStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user?(console.log("TaskStore - User authenticated, initializing..."),e.initializeStore()):(console.log("TaskStore - User not authenticated, cleaning up..."),e.cleanupListeners())});class Tye{constructor(){zt(this,"clientId");zt(this,"scope","https://www.googleapis.com/auth/calendar");zt(this,"tokenClient",null);this.clientId="496225832510-4q5t9iogu4dhpsbenkg6f5oqmbgudae8.apps.googleusercontent.com",console.log("🔍 OAuth service initialized:",{clientId:this.clientId?`${this.clientId.substring(0,10)}...`:"Not set",scope:this.scope})}isConfigured(){const e=!!this.clientId;return console.log("🔍 OAuth2 configuration check:",{clientId:this.clientId?`${this.clientId.substring(0,10)}...`:"Not set",configured:e}),e}getCurrentUserId(){try{if(typeof window<"u"&&window.firebaseAuth){const i=window.firebaseAuth.currentUser;if(i!=null&&i.uid)return i.uid}const e="make10000hours",r=localStorage.getItem("firebase:authUser:AIzaSyCqlF02YJgHBt-uxqAlzF0bYUf5_ihOlUk:[DEFAULT]");if(r&&r!=="null"){const i=JSON.parse(r);if(i!=null&&i.uid)return i.uid}return null}catch(e){return console.warn("Could not get current user ID:",e),null}}getStoredToken(){try{const e=this.getCurrentUserId();if(!e)return console.log("🔍 No current user, cannot check token"),null;const t=localStorage.getItem("google_calendar_token");if(console.log("🔍 Checking stored token:",t?"Found":"Not found"),!t)return null;const r=JSON.parse(t);return r.userId!==e?(console.warn("⚠️ Token belongs to different user, removing..."),localStorage.removeItem("google_calendar_token"),null):(console.log("🔍 Token details:",{hasAccessToken:!!r.accessToken,userId:r.userId,currentUserId:e,expiresAt:new Date(r.expiresAt).toISOString(),isExpired:Date.now()>=r.expiresAt}),Date.now()>=r.expiresAt?(console.warn("⚠️ Token expired, removing..."),localStorage.removeItem("google_calendar_token"),null):(console.log("✅ Valid token found for current user"),r))}catch(e){return console.error("Error reading stored token:",e),null}}storeToken(e){try{const t=this.getCurrentUserId();if(!t)throw new Error("No current user to store token for");const r={...e,userId:t};localStorage.setItem("google_calendar_token",JSON.stringify(r)),console.log("✅ Token stored in localStorage for user:",t)}catch(t){throw console.error("Error storing token:",t),t}}async loadGoogleIdentityServices(){var e;if(!((e=window.google)!=null&&e.accounts))return new Promise((t,r)=>{const i=document.createElement("script");i.src="https://accounts.google.com/gsi/client",i.async=!0,i.defer=!0,i.onload=()=>{console.log("✅ Google Identity Services loaded"),t()},i.onerror=()=>{console.error("❌ Failed to load Google Identity Services"),r(new Error("Failed to load Google Identity Services"))},document.head.appendChild(i)})}async initTokenClient(){this.tokenClient||(await this.loadGoogleIdentityServices(),this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:this.scope,callback:e=>{if(e.error)throw console.error("❌ OAuth error:",e.error),new Error(`OAuth error: ${e.error}`);console.log("✅ OAuth success:",{hasAccessToken:!!e.access_token,expiresIn:e.expires_in}),this.storeToken({accessToken:e.access_token,expiresAt:Date.now()+e.expires_in*1e3})}}))}async requestCalendarAccess(){if(!this.isConfigured())throw new Error("Google OAuth2 Client ID not configured. Please set VITE_GOOGLE_OAUTH_CLIENT_ID in your environment variables.");try{await this.initTokenClient(),this.tokenClient.requestAccessToken({prompt:"consent"})}catch(e){throw console.error("❌ Error requesting calendar access:",e),e}}async handleOAuthCallback(){return!!this.getStoredToken()}async hasCalendarAccess(){const e=this.getStoredToken();if(!e)return!1;try{return(await fetch("https://www.googleapis.com/calendar/v3/users/me/calendarList",{headers:{Authorization:`Bearer ${e.accessToken}`}})).ok}catch(t){return console.error("Error checking calendar access:",t),!1}}async revokeAccess(){const e=this.getStoredToken();if(e)try{await fetch(`https://oauth2.googleapis.com/revoke?token=${e.accessToken}`,{method:"POST"})}catch(t){console.error("Error revoking token:",t)}localStorage.removeItem("google_calendar_token"),console.log("✅ Google Calendar access revoked and token cleared")}clearTokenOnLogout(){localStorage.removeItem("google_calendar_token"),console.log("✅ Google Calendar token cleared on logout")}}const Cs=new Tye,K5e=Object.freeze(Object.defineProperty({__proto__:null,GoogleOAuthService:Tye,googleOAuthService:Cs},Symbol.toStringTag,{value:"Module"}));class X5e{constructor(){zt(this,"calendarId","primary");zt(this,"baseUrl","https://www.googleapis.com/calendar/v3")}async initialize(){if(!vy.currentUser)throw new Error("User not authenticated");if(!Cs.isConfigured()){console.warn("📅 Google OAuth2 not configured - running in demo mode"),console.warn("ℹ️  Set VITE_GOOGLE_OAUTH_CLIENT_ID to enable real Google Calendar sync");return}if(!Cs.getStoredToken()){console.warn("📅 No calendar access token - running in demo mode"),console.warn("ℹ️  Grant calendar access in settings to enable real sync");return}console.log("✅ Google Calendar API authenticated successfully"),console.log("🔗 Real Google Calendar sync is now active")}getAuthHeaders(){const e=Cs.getStoredToken();if(!e)throw new Error("No access token available");return{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}}async createEvent(e,t){var i;if(await this.initialize(),Cs.getStoredToken())try{const a=this.taskToGoogleEvent(e,t),o=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(a)});if(!o.ok){const l=await o.json();throw new Error(`API error: ${((i=l.error)==null?void 0:i.message)||o.statusText}`)}const s=await o.json();return console.log("✅ Created Google Calendar event:",s.id),s.id}catch(a){throw console.error("❌ Failed to create Google Calendar event:",a),a}else{const a=`demo_event_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;return console.log("📅 DEMO MODE: Simulating Google Calendar event creation"),console.log("📋 Task Details:",{taskId:e.id,title:e.title,project:t.name,scheduledDate:e.scheduledDate,scheduledTime:e.includeTime?`${e.scheduledStartTime} - ${e.scheduledEndTime}`:"All day"}),console.log("🔗 Generated Event ID (demo):",a),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(o=>setTimeout(o,1e3)),a}}async updateEvent(e,t,r){var a;if(await this.initialize(),Cs.getStoredToken())try{const o=this.taskToGoogleEvent(t,r),s=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(o)});if(!s.ok){const l=await s.json();throw new Error(`API error: ${((a=l.error)==null?void 0:a.message)||s.statusText}`)}console.log("✅ Updated Google Calendar event:",e)}catch(o){throw console.error("❌ Failed to update Google Calendar event:",o),o}else console.log("📅 DEMO MODE: Simulating Google Calendar event update"),console.log("📋 Event Details:",{eventId:e,taskId:t.id,title:t.title,project:r.name,scheduledDate:t.scheduledDate,scheduledTime:t.includeTime?`${t.scheduledStartTime} - ${t.scheduledEndTime}`:"All day"}),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(o=>setTimeout(o,800))}async deleteEvent(e){var r;if(await this.initialize(),Cs.getStoredToken())try{const i=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!i.ok){const a=await i.json();throw new Error(`API error: ${((r=a.error)==null?void 0:r.message)||i.statusText}`)}console.log("✅ Deleted Google Calendar event:",e)}catch(i){throw console.error("❌ Failed to delete Google Calendar event:",i),i}else console.log("📅 DEMO MODE: Simulating Google Calendar event deletion"),console.log("🗑️ Event ID:",e),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(i=>setTimeout(i,600))}async getEvent(e){var r;if(await this.initialize(),!Cs.getStoredToken())throw new Error("No access token available");try{const i=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{headers:this.getAuthHeaders()});if(!i.ok){const a=await i.json();throw new Error(`API error: ${((r=a.error)==null?void 0:r.message)||i.statusText}`)}return await i.json()}catch(i){throw console.error("Error getting Google Calendar event:",i),new Error(`Failed to get calendar event: ${i.message}`)}}async listEvents(e,t,r){var a;if(await this.initialize(),!Cs.getStoredToken())return console.log("🔄 DEMO MODE: Simulating Google Calendar events list"),await new Promise(o=>setTimeout(o,1200)),{items:[],nextSyncToken:`sync_${Date.now()}`,nextPageToken:void 0};console.log("🔄 Listing Google Calendar events:",{timeMin:e.toISOString(),timeMax:t.toISOString(),syncToken:r?"provided":"none"});try{const o=new URLSearchParams({timeMin:e.toISOString(),timeMax:t.toISOString(),singleEvents:"true",orderBy:"startTime"});r&&o.append("syncToken",r);const s=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events?${o}`,{headers:this.getAuthHeaders()});if(!s.ok){const c=await s.json();throw new Error(`API error: ${((a=c.error)==null?void 0:a.message)||s.statusText}`)}const l=await s.json();return{items:l.items||[],nextSyncToken:l.nextSyncToken,nextPageToken:l.nextPageToken}}catch(o){return console.error("Error listing Google Calendar events:",o),{items:[],nextSyncToken:`sync_${Date.now()}`,nextPageToken:void 0}}}async watchEvents(e,t){var i;if(await this.initialize(),!Cs.getStoredToken())throw new Error("No access token available");try{const a=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events/watch`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({id:e,type:"web_hook",address:t})});if(!a.ok){const s=await a.json();throw new Error(`API error: ${((i=s.error)==null?void 0:i.message)||a.statusText}`)}const o=await a.json();return{channelId:o.id,resourceId:o.resourceId,expiration:parseInt(o.expiration)}}catch(a){throw console.error("Error setting up Google Calendar webhook:",a),new Error(`Failed to set up calendar webhook: ${a.message}`)}}async stopChannel(e,t){var i;if(await this.initialize(),!Cs.getStoredToken())throw new Error("No access token available");try{const a=await fetch(`${this.baseUrl}/channels/stop`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({id:e,resourceId:t})});if(!a.ok){const o=await a.json();throw new Error(`API error: ${((i=o.error)==null?void 0:i.message)||a.statusText}`)}}catch(a){throw console.error("Error stopping Google Calendar channel:",a),new Error(`Failed to stop calendar channel: ${a.message}`)}}taskToGoogleEvent(e,t){const r={summary:e.title,description:this.buildEventDescription(e,t),extendedProperties:{private:{taskId:e.id,projectId:e.projectId,make10000hours:"true"}}};if(e.scheduledDate)if(e.includeTime&&e.scheduledStartTime&&e.scheduledEndTime){const i=`${e.scheduledDate}T${e.scheduledStartTime}:00`,a=`${e.scheduledDate}T${e.scheduledEndTime}:00`;r.start={dateTime:i,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},r.end={dateTime:a,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}}else r.start={date:e.scheduledDate},r.end={date:e.scheduledDate};return t.color&&(r.colorId=this.getGoogleColorId(t.color)),r}buildEventDescription(e,t){let r="";return e.description&&(r+=e.description+`

`),r+=`Project: ${t.name}
`,e.timeEstimated>0&&(r+=`Estimated time: ${e.timeEstimated} minutes
`),e.timeSpent>0&&(r+=`Time spent: ${e.timeSpent} minutes
`),r+=`Status: ${e.status}
`,r+=`
--- Created by Make10000hours ---`,r}getGoogleColorId(e){return{"#3174ad":"1","#b1365f":"2","#7627bb":"3","#b1440e":"4","#856508":"5","#0d7377":"6","#5484ed":"7","#51b749":"8","#fbd75b":"9","#ffb878":"10","#ff887c":"11"}[e]||"1"}googleEventToTask(e){const t={title:e.summary,description:this.extractTaskDescription(e.description),googleCalendarEventId:e.id,syncStatus:"synced",lastSyncedAt:new Date,googleCalendarModified:!0};if(e.start)if(e.start.dateTime){const r=new Date(e.start.dateTime),i=new Date(e.end.dateTime);t.scheduledDate=r.toISOString().split("T")[0],t.scheduledStartTime=r.toTimeString().substring(0,5),t.scheduledEndTime=i.toTimeString().substring(0,5),t.includeTime=!0}else e.start.date&&(t.scheduledDate=e.start.date,t.includeTime=!1);return t}extractTaskDescription(e){if(!e)return"";const t=e.split(`
`),r=[];for(const i of t){if(i.includes("--- Created by Make10000hours ---"))break;!i.startsWith("Project:")&&!i.startsWith("Estimated time:")&&!i.startsWith("Time spent:")&&!i.startsWith("Status:")&&r.push(i)}return r.join(`
`).trim()}isOurEvent(e){var t,r;return((r=(t=e.extendedProperties)==null?void 0:t.private)==null?void 0:r.make10000hours)==="true"}getTaskIdFromEvent(e){var t,r;return((r=(t=e.extendedProperties)==null?void 0:t.private)==null?void 0:r.taskId)||null}}const Zh=new X5e;class Z5e{constructor(e){zt(this,"userId");this.userId=e}toDate(e){return e?typeof e=="object"&&"toDate"in e?e.toDate():e instanceof Date?e:new Date(e):new Date}async initializeSync(){try{if(!(await Wd(_n(Je,"syncStates",this.userId))).exists()){const t={userId:this.userId,calendarId:"primary",lastFullSync:new Date,lastIncrementalSync:new Date,isEnabled:!0,createdAt:new Date,updatedAt:new Date};await Jd(_n(Je,"syncStates",this.userId),t),console.log("🔄 Sync state initialized for user:",this.userId)}}catch(e){throw console.error("Error initializing sync:",e),e}}async getSyncState(){try{const e=await Wd(_n(Je,"syncStates",this.userId));return e.exists()?e.data():null}catch(e){return console.error("Error getting sync state:",e),null}}async updateSyncState(e){try{const t=Object.fromEntries(Object.entries(e).filter(([r,i])=>i!==void 0));await Ca(_n(Je,"syncStates",this.userId),{...t,updatedAt:new Date})}catch(t){throw console.error("Error updating sync state:",t),t}}async logSyncOperation(e){try{await uD(Zt(Je,"syncLogs"),{...e,timestamp:new Date})}catch(t){console.error("Error logging sync operation:",t)}}async syncTaskToGoogle(e,t){if(!e.scheduledDate||e.syncStatus==="disabled"){console.log(`Skipping sync for task ${e.id}: no scheduled date or disabled`);return}if(console.log(`🔄 Starting sync for task: ${e.title} (${e.id})`),!e.id||!e.title||!t.name)throw new Error(`Invalid task or project data: taskId=${e.id}, title=${e.title}, project=${t.name}`);try{if(e.googleCalendarEventId)await Zh.updateEvent(e.googleCalendarEventId,e,t),await this.updateTaskSyncStatus(e.id,{syncStatus:"synced",lastSyncedAt:new Date}),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"success"});else{const r=await Zh.createEvent(e,t);await this.updateTaskSyncStatus(e.id,{googleCalendarEventId:r,syncStatus:"synced",lastSyncedAt:new Date}),await this.logSyncOperation({userId:this.userId,operation:"create",direction:"to_google",taskId:e.id,googleEventId:r,status:"success"})}}catch(r){throw console.error("Error syncing task to Google:",r),await this.updateTaskSyncStatus(e.id,{syncStatus:"error",syncError:r.message}),await this.logSyncOperation({userId:this.userId,operation:e.googleCalendarEventId?"update":"create",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"error",error:r.message}),r}}async deleteTaskFromGoogle(e){if(e.googleCalendarEventId)try{await Zh.deleteEvent(e.googleCalendarEventId),await this.logSyncOperation({userId:this.userId,operation:"delete",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"success"})}catch(t){throw console.error("Error deleting task from Google:",t),await this.logSyncOperation({userId:this.userId,operation:"delete",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"error",error:t.message}),t}}async performIncrementalSync(){const e=await this.getSyncState();if(!(!e||!e.isEnabled))try{const t=await Zh.listEvents(new Date(Date.now()-2592e6),new Date(Date.now()+2592e6),e.nextSyncToken);for(const r of t.items)await this.processGoogleCalendarEvent(r);await this.updateSyncState({nextSyncToken:t.nextSyncToken,lastIncrementalSync:new Date}),console.log(`🔄 Incremental sync completed: ${t.items.length} events processed`)}catch(t){console.error("Error performing incremental sync:",t),t.message.includes("410")&&(console.log("🔄 Sync token invalid, performing full sync"),await this.performFullSync())}}async performFullSync(){const e=await this.getSyncState();if(!(!e||!e.isEnabled))try{const t=await Zh.listEvents(new Date(Date.now()-2592e6),new Date(Date.now()+2592e6));for(const r of t.items)await this.processGoogleCalendarEvent(r);await this.updateSyncState({nextSyncToken:t.nextSyncToken,lastFullSync:new Date,lastIncrementalSync:new Date}),console.log(`🔄 Full sync completed: ${t.items.length} events processed`)}catch(t){throw console.error("Error performing full sync:",t),t}}async processGoogleCalendarEvent(e){if(!Zh.isOurEvent(e))return;const t=Zh.getTaskIdFromEvent(e);if(t)try{const r=await Wd(_n(Je,"tasks",t));if(e.status==="cancelled"){r.exists()&&await this.handleEventDeleted(t,e);return}if(!r.exists()){await this.createTaskFromGoogleEvent(e);return}const i=r.data(),a=new Date(e.updated||Date.now()),o=this.toDate(i.updatedAt);if(this.isConflict(a,o)){await this.handleConflict(i,e);return}await this.updateTaskFromGoogleEvent(i,e)}catch(r){console.error("Error processing Google Calendar event:",r),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:t,googleEventId:e.id,status:"error",error:r.message})}}async handleEventDeleted(e,t){try{await Ca(_n(Je,"tasks",e),{googleCalendarEventId:null,syncStatus:"disabled",updatedAt:new Date}),await this.logSyncOperation({userId:this.userId,operation:"delete",direction:"from_google",taskId:e,googleEventId:t.id,status:"success"})}catch(r){throw console.error("Error handling event deletion:",r),r}}async createTaskFromGoogleEvent(e){const t=Zh.googleEventToTask(e),r={id:_n(Zt(Je,"tasks")).id,userId:this.userId,projectId:"default",completed:!1,status:"todo",timeSpent:0,timeEstimated:0,order:0,createdAt:new Date,updatedAt:new Date,...t};await Jd(_n(Je,"tasks",r.id),r),await this.logSyncOperation({userId:this.userId,operation:"create",direction:"from_google",taskId:r.id,googleEventId:e.id,status:"success"})}async updateTaskFromGoogleEvent(e,t){const r=Zh.googleEventToTask(t),i=Object.fromEntries(Object.entries(r).filter(([a,o])=>o!==void 0));await Ca(_n(Je,"tasks",e.id),{...i,updatedAt:new Date}),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:e.id,googleEventId:t.id,status:"success"})}async handleConflict(e,t){const r=new Date(t.updated||Date.now()),i=this.toDate(e.updatedAt);if(r>i)await this.updateTaskFromGoogleEvent(e,t),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:e.id,googleEventId:t.id,status:"conflict",conflictResolution:"last_modified_wins"});else{const a=await this.getProjectById(e.projectId);a&&(await Zh.updateEvent(t.id,e,a),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"to_google",taskId:e.id,googleEventId:t.id,status:"conflict",conflictResolution:"last_modified_wins"}))}}isConflict(e,t){const r=this.toDate(e).getTime(),i=this.toDate(t).getTime();return Math.abs(r-i)<6e4}async updateTaskSyncStatus(e,t){const r=Object.fromEntries(Object.entries(t).filter(([i,a])=>a!==void 0));await Ca(_n(Je,"tasks",e),{...r,updatedAt:new Date})}async getProjectById(e){try{const t=await Wd(_n(Je,"projects",e));return t.exists()?t.data():null}catch(t){return console.error("Error getting project:",t),null}}async getSyncLogs(e=50){try{const t=qt(Zt(Je,"syncLogs"),vt("userId","==",this.userId),ta("timestamp","desc"));return(await kn(t)).docs.map(i=>({id:i.id,...i.data()}))}catch(t){return console.error("Error getting sync logs:",t),[]}}async toggleSync(e){await this.updateSyncState({isEnabled:e}),e&&await this.performFullSync()}async getSyncStatus(){const e=await this.getSyncState(),t=qt(Zt(Je,"tasks"),vt("userId","==",this.userId),vt("scheduledDate","!=",null)),i=(await kn(t)).docs.map(s=>s.data()),a=i.filter(s=>s.syncStatus==="pending").length,o=i.filter(s=>s.syncStatus==="error").length;return{isEnabled:(e==null?void 0:e.isEnabled)||!1,lastSync:(e==null?void 0:e.lastIncrementalSync)||new Date(0),pendingTasks:a,errorTasks:o}}}const qS=n=>new Z5e(n),yj=Vf((n,e)=>({syncEnabled:!1,syncInProgress:!1,lastSyncTime:null,syncError:null,pendingTasks:new Set,errorTasks:new Set,getSyncManager:()=>{const{user:t}=Qt.getState();return t?qS(t.uid):null},initializeSync:async()=>{try{const t=e().getSyncManager();if(!t)return;await t.initializeSync();const r=await t.getSyncStatus();n({syncEnabled:r.isEnabled,lastSyncTime:r.lastSync,pendingTasks:new Set,errorTasks:new Set})}catch(t){console.error("Error initializing sync:",t),n({syncError:t.message})}},enableSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.toggleSync(!0),n({syncEnabled:!0,syncInProgress:!1,lastSyncTime:new Date})}catch(t){throw console.error("Error enabling sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},disableSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.toggleSync(!1),n({syncEnabled:!1,syncInProgress:!1,pendingTasks:new Set,errorTasks:new Set})}catch(t){throw console.error("Error disabling sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},syncTask:async t=>{const{syncEnabled:r,pendingTasks:i,errorTasks:a}=e();if(r)try{const o=new Set(i);o.add(t);const s=new Set(a);s.delete(t),n({pendingTasks:o,errorTasks:s});const l=e().getSyncManager();if(!l)throw new Error("Sync manager not available");const{tasks:c,projects:u}=Ut.getState(),d=c.find(m=>m.id===t),h=d?u.find(m=>m.id===d.projectId):null;if(!d||!h)throw new Error("Task or project not found");d.scheduledDate&&await l.syncTaskToGoogle(d,h);const f=new Set(i);f.delete(t),n({pendingTasks:f,lastSyncTime:new Date})}catch(o){console.error("Error syncing task:",o);const s=new Set(i);s.delete(t);const l=new Set(a);l.add(t),n({pendingTasks:s,errorTasks:l,syncError:o.message})}},syncTaskDeletion:async t=>{const{syncEnabled:r}=e();if(r)try{const i=e().getSyncManager();if(!i)throw new Error("Sync manager not available");const{tasks:a}=Ut.getState(),o=a.find(s=>s.id===t);o&&o.googleCalendarEventId&&await i.deleteTaskFromGoogle(o),n({lastSyncTime:new Date})}catch(i){console.error("Error syncing task deletion:",i),n({syncError:i.message})}},performManualSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.performFullSync(),n({syncInProgress:!1,lastSyncTime:new Date})}catch(t){throw console.error("Error performing manual sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},clearSyncError:()=>{n({syncError:null})}})),Eye=()=>{const{syncTask:n,syncTaskDeletion:e}=yj();return{syncTaskAfterUpdate:async i=>{try{await n(i)}catch(a){console.error("Sync failed after task update:",a)}},syncTaskAfterDeletion:async i=>{try{await e(i)}catch(a){console.error("Sync failed after task deletion:",a)}}}},Aye=()=>{const n=Ut(),{syncTaskAfterUpdate:e,syncTaskAfterDeletion:t}=Eye();return{...n,addTask:async o=>{const s=await n.addTask(o);return o.scheduledDate&&await e(s),s},updateTask:async(o,s)=>{await n.updateTask(o,s);const l=s.scheduledDate!==void 0||s.scheduledStartTime!==void 0||s.scheduledEndTime!==void 0||s.includeTime!==void 0,c=s.title!==void 0||s.description!==void 0;if(l||c){const{tasks:u}=n,d=u.find(h=>h.id===o);d&&d.scheduledDate&&await e(o)}},deleteTask:async o=>{await t(o),await n.deleteTask(o)}}},Q5e=Object.freeze(Object.defineProperty({__proto__:null,useSyncIntegration:Eye,useSyncStore:yj,useTaskStoreWithSync:Aye},Symbol.toStringTag,{value:"Module"})),J5e=()=>{const{tasks:n,projects:e}=Ut.getState(),{syncEnabled:t,pendingTasks:r,errorTasks:i}=yj.getState(),{user:a}=Qt.getState();console.log("=== SYNC DEBUG INFO ==="),console.log("User:",a==null?void 0:a.uid),console.log("Sync enabled:",t),console.log("Pending tasks:",r.size),console.log("Error tasks:",i.size),console.log("Total tasks:",n.length);const o=n.filter(l=>l.scheduledDate);console.log("Scheduled tasks:",o.length),o.forEach((l,c)=>{const u=e.find(d=>d.id===l.projectId);console.log(`Task ${c+1}:`,{id:l.id,title:l.title,scheduledDate:l.scheduledDate,syncStatus:l.syncStatus,googleCalendarEventId:l.googleCalendarEventId,project:u==null?void 0:u.name,hasValidProject:!!u})});const s=n.filter(l=>!e.find(u=>u.id===l.projectId));s.length>0&&console.warn("Tasks with missing projects:",s.map(l=>({id:l.id,title:l.title,projectId:l.projectId}))),console.log("=== END SYNC DEBUG ===")},eFe=async()=>{const{tasks:n}=Ut.getState(),{updateTask:e}=Ut.getState();for(const t of n)if(t.scheduledDate&&!t.syncStatus){console.log(`Fixing sync status for task: ${t.title}`);try{await e(t.id,{syncStatus:"pending"})}catch(r){console.error(`Failed to fix sync status for task ${t.id}:`,r)}}};typeof window<"u"&&(window.debugSyncStatus=J5e,window.fixTaskSyncStatus=eFe);const tFe=K.createContext(void 0);function nFe({children:n}){const[e,t]=K.useState({color:"Tomato",textColor:"white"}),i={theme:e,changeTheme:a=>{let o;["BlueViolet","CornflowerBlue","SaddleBrown"].includes(a)?o="white":o="black",t({color:a,textColor:o})}};return x.jsx(tFe.Provider,{value:i,children:n})}var $A={},UQ;function rFe(){if(UQ)return $A;UQ=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.parse=o,$A.serialize=c;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,f){const m=new a,v=h.length;if(v<2)return m;const y=(f==null?void 0:f.decode)||u;let w=0;do{const _=h.indexOf("=",w);if(_===-1)break;const T=h.indexOf(";",w),A=T===-1?v:T;if(_>A){w=h.lastIndexOf(";",_-1)+1;continue}const C=s(h,w,_),k=l(h,_,C),M=h.slice(C,k);if(m[M]===void 0){let P=s(h,_+1,A),O=l(h,A,P);const j=y(h.slice(P,O));m[M]=j}w=A+1}while(w<v);return m}function s(h,f,m){do{const v=h.charCodeAt(f);if(v!==32&&v!==9)return f}while(++f<m);return m}function l(h,f,m){for(;f>m;){const v=h.charCodeAt(--f);if(v!==32&&v!==9)return f+1}return m}function c(h,f,m){const v=(m==null?void 0:m.encode)||encodeURIComponent;if(!n.test(h))throw new TypeError(`argument name is invalid: ${h}`);const y=v(f);if(!e.test(y))throw new TypeError(`argument val is invalid: ${f}`);let w=h+"="+y;if(!m)return w;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);w+="; Max-Age="+m.maxAge}if(m.domain){if(!t.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);w+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);w+="; Path="+m.path}if(m.expires){if(!d(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);w+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(w+="; HttpOnly"),m.secure&&(w+="; Secure"),m.partitioned&&(w+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return w}function u(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return i.call(h)==="[object Date]"}return $A}rFe();var VQ="popstate";function iFe(n={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=tx(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Vz("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof a=="string"?a:gD(a))}function r(i,a){ah(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return oFe(e,t,r,n)}function ra(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ah(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aFe(){return Math.random().toString(36).substring(2,10)}function zQ(n,e){return{usr:n.state,key:n.key,idx:e}}function Vz(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tx(e):e,state:t,key:e&&e.key||r||aFe()}}function gD({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tx(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function oFe(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){s="POP";let y=u(),w=y==null?null:y-c;c=y,l&&l({action:s,location:v.location,delta:w})}function h(y,w){s="PUSH";let _=Vz(v.location,y,w);t&&t(_,y),c=u()+1;let T=zQ(_,c),A=v.createHref(_);try{o.pushState(T,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(A)}a&&l&&l({action:s,location:v.location,delta:1})}function f(y,w){s="REPLACE";let _=Vz(v.location,y,w);t&&t(_,y),c=u();let T=zQ(_,c),A=v.createHref(_);o.replaceState(T,"",A),a&&l&&l({action:s,location:v.location,delta:0})}function m(y){return sFe(y)}let v={get action(){return s},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(VQ,d),l=y,()=>{i.removeEventListener(VQ,d),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let w=m(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return v}function sFe(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ra(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:gD(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function kye(n,e,t="/"){return lFe(n,e,t,!1)}function lFe(n,e,t,r){let i=typeof e=="string"?tx(e):e,a=Og(i.pathname||"/",t);if(a==null)return null;let o=Cye(n);cFe(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=wFe(a);s=yFe(o[l],c,r)}return s}function Cye(n,e=[],t=[],r=""){let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(ra(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=yg([r,l.relativePath]),u=t.concat(l);a.children&&a.children.length>0&&(ra(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Cye(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:mFe(c,a.index),routesMeta:u})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of Dye(a.path))i(a,o,l)}),e}function Dye(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Dye(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>n.startsWith("/")&&l===""?"/":l)}function cFe(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:vFe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var uFe=/^:[\w-]+$/,dFe=3,hFe=2,fFe=1,pFe=10,gFe=-2,HQ=n=>n==="*";function mFe(n,e){let t=n.split("/"),r=t.length;return t.some(HQ)&&(r+=gFe),e&&(r+=hFe),t.filter(i=>!HQ(i)).reduce((i,a)=>i+(uFe.test(a)?dFe:a===""?fFe:pFe),r)}function vFe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function yFe(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=RN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=RN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:yg([a,d.pathname]),pathnameBase:TFe(yg([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=yg([a,d.pathnameBase]))}return o}function RN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=bFe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let m=s[h]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const f=s[h];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:n}}function bFe(n,e=!1,t=!0){ah(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wFe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ah(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Og(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function xFe(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?tx(n):n;return{pathname:t?t.startsWith("/")?t:_Fe(t,e):e,search:EFe(r),hash:AFe(i)}}function _Fe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function YF(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SFe(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Iye(n){let e=SFe(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Mye(n,e,t,r=!1){let i;typeof n=="string"?i=tx(n):(i={...n},ra(!i.pathname||!i.pathname.includes("?"),YF("?","pathname","search",i)),ra(!i.pathname||!i.pathname.includes("#"),YF("#","pathname","hash",i)),ra(!i.search||!i.search.includes("#"),YF("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let l=xFe(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var yg=n=>n.join("/").replace(/\/\/+/g,"/"),TFe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EFe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AFe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kFe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Pye=["POST","PUT","PATCH","DELETE"];new Set(Pye);var CFe=["GET",...Pye];new Set(CFe);var CT=K.createContext(null);CT.displayName="DataRouter";var bj=K.createContext(null);bj.displayName="DataRouterState";var Oye=K.createContext({isTransitioning:!1});Oye.displayName="ViewTransition";var DFe=K.createContext(new Map);DFe.displayName="Fetchers";var IFe=K.createContext(null);IFe.displayName="Await";var Hf=K.createContext(null);Hf.displayName="Navigation";var eM=K.createContext(null);eM.displayName="Location";var Gf=K.createContext({outlet:null,matches:[],isDataRoute:!1});Gf.displayName="Route";var b7=K.createContext(null);b7.displayName="RouteError";function MFe(n,{relative:e}={}){ra(tM(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(Hf),{hash:i,pathname:a,search:o}=nM(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:yg([t,a])),r.createHref({pathname:s,search:o,hash:i})}function tM(){return K.useContext(eM)!=null}function ss(){return ra(tM(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(eM).location}var Rye="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nye(n){K.useContext(Hf).static||K.useLayoutEffect(n)}function Zg(){let{isDataRoute:n}=K.useContext(Gf);return n?qFe():PFe()}function PFe(){ra(tM(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(CT),{basename:e,navigator:t}=K.useContext(Hf),{matches:r}=K.useContext(Gf),{pathname:i}=ss(),a=JSON.stringify(Iye(r)),o=K.useRef(!1);return Nye(()=>{o.current=!0}),K.useCallback((l,c={})=>{if(ah(o.current,Rye),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=Mye(l,JSON.parse(a),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:yg([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,a,i,n])}var OFe=K.createContext(null);function RFe(n){let e=K.useContext(Gf).outlet;return e&&K.createElement(OFe.Provider,{value:n},e)}function nM(n,{relative:e}={}){let{matches:t}=K.useContext(Gf),{pathname:r}=ss(),i=JSON.stringify(Iye(t));return K.useMemo(()=>Mye(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function NFe(n,e){return Lye(n,e)}function Lye(n,e,t,r){var w;ra(tM(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=K.useContext(Hf),{matches:a}=K.useContext(Gf),o=a[a.length-1],s=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let _=u&&u.path||"";jye(l,!u||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=ss(),h;if(e){let _=typeof e=="string"?tx(e):e;ra(c==="/"||((w=_.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),h=_}else h=d;let f=h.pathname||"/",m=f;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=kye(n,{pathname:m});ah(u||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),ah(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=BFe(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},s,_.params),pathname:yg([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:yg([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,r);return e&&y?K.createElement(eM.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function LFe(){let n=GFe(),e=kFe(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:a},"ErrorBoundary")," or"," ",K.createElement("code",{style:a},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,o)}var jFe=K.createElement(LFe,null),FFe=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(Gf.Provider,{value:this.props.routeContext},K.createElement(b7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $Fe({routeContext:n,match:e,children:t}){let r=K.useContext(CT);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Gf.Provider,{value:n},t)}function BFe(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let l=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);ra(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,s=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=l),c.route.id){let{loaderData:u,errors:d}=t,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,h=!1,f=null,m=null;t&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||jFe,o&&(s<0&&u===0?(jye("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):s===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),y=()=>{let w;return d?w=f:h?w=m:c.route.Component?w=K.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,K.createElement($Fe,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:w})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?K.createElement(FFe,{location:t.location,revalidation:t.revalidation,component:f,error:d,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}function w7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UFe(n){let e=K.useContext(CT);return ra(e,w7(n)),e}function VFe(n){let e=K.useContext(bj);return ra(e,w7(n)),e}function zFe(n){let e=K.useContext(Gf);return ra(e,w7(n)),e}function x7(n){let e=zFe(n),t=e.matches[e.matches.length-1];return ra(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function HFe(){return x7("useRouteId")}function GFe(){var r;let n=K.useContext(b7),e=VFe("useRouteError"),t=x7("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function qFe(){let{router:n}=UFe("useNavigate"),e=x7("useNavigate"),t=K.useRef(!1);return Nye(()=>{t.current=!0}),K.useCallback(async(i,a={})=>{ah(t.current,Rye),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var GQ={};function jye(n,e,t){!e&&!GQ[n]&&(GQ[n]=!0,ah(!1,t))}K.memo(WFe);function WFe({routes:n,future:e,state:t}){return Lye(n,void 0,t,e)}function Fye(n){return RFe(n.context)}function Tu(n){ra(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YFe({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){ra(!tM(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=K.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=tx(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=t,f=K.useMemo(()=>{let m=Og(l,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return ah(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:K.createElement(Hf.Provider,{value:s},K.createElement(eM.Provider,{children:e,value:f}))}function KFe({children:n,location:e}){return NFe(zz(n),e)}function zz(n,e=[]){let t=[];return K.Children.forEach(n,(r,i)=>{if(!K.isValidElement(r))return;let a=[...e,i];if(r.type===K.Fragment){t.push.apply(t,zz(r.props.children,a));return}ra(r.type===Tu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ra(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zz(r.props.children,a)),t.push(o)}),t}var LR="get",jR="application/x-www-form-urlencoded";function wj(n){return n!=null&&typeof n.tagName=="string"}function XFe(n){return wj(n)&&n.tagName.toLowerCase()==="button"}function ZFe(n){return wj(n)&&n.tagName.toLowerCase()==="form"}function QFe(n){return wj(n)&&n.tagName.toLowerCase()==="input"}function JFe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function e3e(n,e){return n.button===0&&(!e||e==="_self")&&!JFe(n)}var VP=null;function t3e(){if(VP===null)try{new FormData(document.createElement("form"),0),VP=!1}catch{VP=!0}return VP}var n3e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function KF(n){return n!=null&&!n3e.has(n)?(ah(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jR}"`),null):n}function r3e(n,e){let t,r,i,a,o;if(ZFe(n)){let s=n.getAttribute("action");r=s?Og(s,e):null,t=n.getAttribute("method")||LR,i=KF(n.getAttribute("enctype"))||jR,a=new FormData(n)}else if(XFe(n)||QFe(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||s.getAttribute("action");if(r=l?Og(l,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||LR,i=KF(n.getAttribute("formenctype"))||KF(s.getAttribute("enctype"))||jR,a=new FormData(s,n),!t3e()){let{name:c,type:u,value:d}=n;if(u==="image"){let h=c?`${c}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else c&&a.append(c,d)}}else{if(wj(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=LR,r=null,i=jR,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function _7(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function i3e(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a3e(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function o3e(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await i3e(a,t);return o.links?o.links():[]}return[]}));return u3e(r.flat(1).filter(a3e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qQ(n,e,t,r,i,a){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,s=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):a==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function s3e(n,e,{includeHydrateFallback:t}={}){return l3e(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function l3e(n){return[...new Set(n)]}function c3e(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function u3e(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(c3e(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var d3e=new Set([100,101,204,205]);function h3e(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Og(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function $ye(){let n=K.useContext(CT);return _7(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function f3e(){let n=K.useContext(bj);return _7(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var S7=K.createContext(void 0);S7.displayName="FrameworkContext";function Bye(){let n=K.useContext(S7);return _7(n,"You must render this element inside a <HydratedRouter> element"),n}function p3e(n,e){let t=K.useContext(S7),[r,i]=K.useState(!1),[a,o]=K.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=K.useRef(null);K.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=w=>{w.forEach(_=>{o(_.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[n]),K.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let f=()=>{i(!0)},m=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,h,{}]:[a,h,{onFocus:BA(s,f),onBlur:BA(l,m),onMouseEnter:BA(c,f),onMouseLeave:BA(u,m),onTouchStart:BA(d,f)}]:[!1,h,{}]}function BA(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function g3e({page:n,...e}){let{router:t}=$ye(),r=K.useMemo(()=>kye(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(v3e,{page:n,matches:r,...e}):null}function m3e(n){let{manifest:e,routeModules:t}=Bye(),[r,i]=K.useState([]);return K.useEffect(()=>{let a=!1;return o3e(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function v3e({page:n,matches:e,...t}){let r=ss(),{manifest:i,routeModules:a}=Bye(),{basename:o}=$ye(),{loaderData:s,matches:l}=f3e(),c=K.useMemo(()=>qQ(n,e,l,i,r,"data"),[n,e,l,i,r]),u=K.useMemo(()=>qQ(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,v=!1;if(e.forEach(w=>{var T;let _=i.routes[w.route.id];!_||!_.hasLoader||(!c.some(A=>A.route.id===w.route.id)&&w.route.id in s&&((T=a[w.route.id])!=null&&T.shouldRevalidate)||_.hasClientLoader?v=!0:m.add(w.route.id))}),m.size===0)return[];let y=h3e(n,o);return v&&m.size>0&&y.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[o,s,r,i,c,e,n,a]),h=K.useMemo(()=>s3e(u,i),[u,i]),f=m3e(u);return K.createElement(K.Fragment,null,d.map(m=>K.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),h.map(m=>K.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),f.map(({key:m,link:v})=>K.createElement("link",{key:m,...v})))}function y3e(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Uye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Uye&&(window.__reactRouterVersion="7.6.2")}catch{}function b3e({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=iFe({window:t,v5Compat:!0}));let i=r.current,[a,o]=K.useState({action:i.action,location:i.location}),s=K.useCallback(l=>{K.startTransition(()=>o(l))},[o]);return K.useLayoutEffect(()=>i.listen(s),[i,s]),K.createElement(YFe,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Vye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NN=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},f){let{basename:m}=K.useContext(Hf),v=typeof c=="string"&&Vye.test(c),y,w=!1;if(typeof c=="string"&&v&&(y=c,Uye))try{let O=new URL(window.location.href),j=c.startsWith("//")?new URL(O.protocol+c):new URL(c),L=Og(j.pathname,m);j.origin===O.origin&&L!=null?c=L+j.search+j.hash:w=!0}catch{ah(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=MFe(c,{relative:i}),[T,A,C]=p3e(r,h),k=S3e(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:d});function M(O){e&&e(O),O.defaultPrevented||k(O)}let P=K.createElement("a",{...h,...C,href:y||_,onClick:w||a?e:M,ref:y3e(f,A),target:l,"data-discover":!v&&t==="render"?"true":void 0});return T&&!v?K.createElement(K.Fragment,null,P,K.createElement(g3e,{page:_})):P});NN.displayName="Link";var w3e=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...c},u){let d=nM(o,{relative:c.relative}),h=ss(),f=K.useContext(bj),{navigator:m,basename:v}=K.useContext(Hf),y=f!=null&&C3e(d)&&s===!0,w=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,_=h.pathname,T=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),T=T?T.toLowerCase():null,w=w.toLowerCase()),T&&v&&(T=Og(T,v)||T);const A=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let C=_===w||!i&&_.startsWith(w)&&_.charAt(A)==="/",k=T!=null&&(T===w||!i&&T.startsWith(w)&&T.charAt(w.length)==="/"),M={isActive:C,isPending:k,isTransitioning:y},P=C?e:void 0,O;typeof r=="function"?O=r(M):O=[r,C?"active":null,k?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(M):a;return K.createElement(NN,{...c,"aria-current":P,className:O,ref:u,style:j,to:o,viewTransition:s},typeof l=="function"?l(M):l)});w3e.displayName="NavLink";var x3e=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=LR,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let m=A3e(),v=k3e(s,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",w=typeof s=="string"&&Vye.test(s),_=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,C=(A==null?void 0:A.getAttribute("formmethod"))||o;m(A||T.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:d})};return K.createElement("form",{ref:f,method:y,action:v,onSubmit:r?l:_,...h,"data-discover":!w&&n==="render"?"true":void 0})});x3e.displayName="Form";function _3e(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zye(n){let e=K.useContext(CT);return ra(e,_3e(n)),e}function S3e(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Zg(),l=ss(),c=nM(n,{relative:a});return K.useCallback(u=>{if(e3e(u,e)){u.preventDefault();let d=t!==void 0?t:gD(l)===gD(c);s(n,{replace:d,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,c,t,r,e,n,i,a,o])}var T3e=0,E3e=()=>`__${String(++T3e)}__`;function A3e(){let{router:n}=zye("useSubmit"),{basename:e}=K.useContext(Hf),t=HFe();return K.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:l,body:c}=r3e(r,e);if(i.navigate===!1){let u=i.fetcherKey||E3e();await n.fetch(u,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function k3e(n,{relative:e}={}){let{basename:t}=K.useContext(Hf),r=K.useContext(Gf);ra(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...nM(n||".",{relative:e})},o=ss();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let u=s.toString();a.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:yg([t,a.pathname])),gD(a)}function C3e(n,e={}){let t=K.useContext(Oye);ra(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=zye("useViewTransitionState"),i=nM(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Og(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Og(t.nextLocation.pathname,r)||t.nextLocation.pathname;return RN(i.pathname,o)!=null||RN(i.pathname,a)!=null}[...d3e];var D3e=gge();const T7=n=>{const e=Math.floor(n/60),t=n%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},ry=n=>{const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},I3e=()=>{const n=Date.now().toString(36),e=Math.random().toString(36).substr(2,9);return`${n}-${e}`},M3e=()=>{const n=localStorage.getItem("timer-device-id");if(n)return n;const e=I3e();return localStorage.setItem("timer-device-id",e),e},FR=(n=new Date)=>eg(n),eg=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},P3e=(n,e)=>{let t=e.getTime()-n.getTime();t<0&&(t+=24*60*60*1e3);let r=Math.round(t/(1e3*60));return r===0&&(r=30),r>480&&(r=480),r},XF="timerStates";class O3e{constructor(){zt(this,"unsubscribe",null);zt(this,"deviceId");this.deviceId=M3e()}async saveTimerState(e,t){try{const r=_n(Je,XF,e),i={userId:e,...t,activeDeviceId:this.deviceId,updatedAt:new Date};await Jd(r,i,{merge:!0})}catch(r){throw console.error("Error saving timer state:",r),r}}async loadTimerState(e){try{const t=_n(Je,XF,e),r=await Wd(t);return r.exists()?r.data():null}catch(t){throw console.error("Error loading timer state:",t),t}}async deleteTimerState(e){try{const t=_n(Je,XF,e);await Jd(t,{currentTime:0,totalTime:0,mode:"pomodoro",sessionsCompleted:0,isRunning:!1,currentTaskId:null,lastUpdated:Co(),deviceId:this.deviceId,userId:e})}catch(t){throw console.error("Error deleting timer state:",t),t}}isActiveDevice(e){return(e==null?void 0:e.activeDeviceId)===this.deviceId}getDeviceId(){return this.deviceId}}const WQ=new O3e,ei=Vf((n,e)=>{const t=async(r,i=3)=>{const a=Ut.getState();let o=0;for(;o<i;){const s=a.tasks.find(l=>l.id===r);if(s)return s;await new Promise(l=>setTimeout(l,Math.pow(2,o)*1e3)),o++}return null};return{isRunning:!1,currentTime:yC.timer.pomodoro*60,totalTime:yC.timer.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:yC.timer,enableStartPauseBtn:!0,isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,taskLoadRetryCount:0,isTaskLoading:!1,taskLoadError:null,start:async()=>{const r=e();r.isActiveDevice||n({isActiveDevice:!0}),!r.isRunning&&r.currentTask&&await e().createActiveSession(),n({isRunning:!0,syncError:null}),r.mode==="pomodoro"&&r.currentTask&&FQ(r.currentTask.id,r.currentTask.timeEstimated||0),e().saveToDatabase(),e().saveToLocalStorage()},pause:async()=>{e().activeSession&&await e().completeActiveSession("paused"),n({isRunning:!1}),e().saveToDatabase(),e().saveToLocalStorage()},reset:()=>{const{mode:r,settings:i}=e(),a=i[r]*60;n({currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase(),e().saveToLocalStorage()},skip:async()=>{const{mode:r,sessionsCompleted:i,settings:a,currentTask:o,activeSession:s}=e();if(s&&await e().completeActiveSession("completed"),r==="pomodoro"&&o){const f=(a.pomodoro*60-e().currentTime)/60;z5e(o.id,f)}let l=r,c=i;r==="pomodoro"?(c=i+1,c%a.longBreakInterval===0?l="longBreak":l="shortBreak"):l="pomodoro";const u=a[l]*60,d=a.autoStartPomodoros&&l==="pomodoro",h=a.autoStartBreaks&&(l==="shortBreak"||l==="longBreak");n({mode:l,currentTime:u,totalTime:u,isRunning:d||h,sessionsCompleted:c,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:a}),(d||h)&&o&&(await e().createActiveSession(),d&&FQ(o.id,o.timeEstimated||0)),e().saveToDatabase()},tick:()=>{const{currentTime:r,totalTime:i,isActiveDevice:a,isRunning:o,activeSession:s,lastCountedMinute:l,mode:c}=e();if(!a||!o)return;const{timeSpentIncrement:u}=Ut.getState();if(s&&c==="pomodoro"){const d=Math.floor(r/60);l!==null&&l!==d&&d<l&&(console.log("Minute boundary crossed:",{from:l,to:d,sessionId:s.sessionId,taskId:s.taskId}),e().updateActiveSession(),s.taskId&&u(s.taskId,1)),(l===null||l!==d)&&n({lastCountedMinute:d})}r>0?(n({currentTime:r-1}),e().saveToLocalStorage(),r%60===0&&e().saveToDatabase()):r===0&&e().skip()},setMode:r=>{const{settings:i}=e(),a=i[r]*60;n({mode:r,currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase(),e().saveToLocalStorage()},setCurrentTask:async r=>{const i=e();i.isRunning&&i.activeSession&&i.currentTask&&r&&i.currentTask.id!==r.id?(await e().switchActiveSession(),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),await e().createActiveSession()):n({currentTask:r}),e().saveToDatabase(),e().saveToLocalStorage()},setSettings:r=>{const i=e();if(i.currentTime===i.totalTime&&!i.isRunning&&i.sessionsCompleted===0){const{mode:o}=i,s=r[o]*60;n({settings:r,currentTime:s,totalTime:s,isRunning:!1}),e().saveToDatabase()}else n({settings:r})},createActiveSession:async()=>{const{currentTask:r,mode:i,currentTime:a}=e(),{user:o}=Qt.getState();if(!(!r||!o))try{const s=await Da.createActiveSession(r.id,r.projectId,o.uid,i),l={sessionId:s,taskId:r.id,startTime:new Date,lastUpdateTime:new Date,status:"active"},c=Math.floor(a/60);n({activeSession:l,sessionStartTimerPosition:a,lastCountedMinute:null}),console.log("Created new session:",{sessionId:s,taskId:r.id,startTimerPosition:a,startMinute:c,timer_display:`${Math.floor(a/60)}:${String(a%60).padStart(2,"0")}`,sessionType:i})}catch(s){console.error("Failed to create active session:",s)}},updateActiveSession:async()=>{const{activeSession:r}=e();if(r)try{await Da.incrementDuration(r.sessionId,1),n({activeSession:{...r,lastUpdateTime:new Date}}),console.log("Session updated: +1 minute",{sessionId:r.sessionId,lastUpdateTime:new Date})}catch(i){console.error("Failed to update active session:",i)}},switchActiveSession:async()=>{const{activeSession:r}=e();if(r)try{const i={status:"switched",endTime:new Date,notes:"Task switched"};await Da.updateSession(r.sessionId,i),n({activeSession:null,lastCountedMinute:null})}catch(i){console.error("Failed to switch active session:",i)}},completeActiveSession:async r=>{const{activeSession:i,lastCountedMinute:a,currentTime:o}=e();if(i)try{let s=0;if(a!==null){const c=Math.floor(o/60);c<a&&(s=a-c)}s>0&&await Da.incrementDuration(i.sessionId,s);const l={status:r,endTime:new Date,notes:`Session ${r}${s>0?`: +${s}m remaining`:""}`};await Da.updateSession(i.sessionId,l),n({activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Session completed:",{sessionId:i.sessionId,status:r,remainingMinutes:s})}catch(s){console.error("Failed to complete active session:",s)}},cleanupOrphanedSessions:async()=>{const{user:r}=Qt.getState();if(r)try{const i=await Da.cleanupOrphanedSessions(r.uid);console.log(`Cleaned up ${i} orphaned sessions`)}catch(i){console.error("Failed to cleanup orphaned sessions:",i)}},initializePersistence:async r=>{try{n({isLoading:!0,syncError:null}),await e().loadFromLocalStorage();const i=Ut.getState();i.tasks.length===0&&i.initializeStore().catch(s=>{console.warn("Background task store initialization failed:",s)}),e().cleanupOrphanedSessions().catch(s=>{console.warn("Background cleanup failed:",s)});const a=localStorage.getItem("lastRemoteSync");(!a||Date.now()-parseInt(a)>5*60*1e3)&&WQ.loadTimerState(r).then(s=>{s&&e().syncFromRemoteState(s),localStorage.setItem("lastRemoteSync",Date.now().toString())}).catch(s=>{console.warn("Background remote sync failed:",s),n({syncError:"Failed to sync timer state"})}),n({isLoading:!1})}catch(i){console.error("Failed to initialize timer persistence:",i),n({isLoading:!1,syncError:"Failed to sync timer state"})}},saveToDatabase:async()=>{const r=Qt.getState();if(!r.user||!r.isAuthenticated)return;const i=e();if(i.isActiveDevice)try{n({isSyncing:!0,syncError:null});const a={currentTime:i.currentTime,totalTime:i.totalTime,mode:i.mode,sessionsCompleted:i.sessionsCompleted,isRunning:i.isRunning,currentTaskId:i.currentTask?i.currentTask.id:null};i.activeSession&&(a.sessionStartTime=i.activeSession.startTime,a.activeSessionId=i.activeSession.sessionId,a.sessionStartTimerPosition=i.sessionStartTimerPosition),await WQ.saveTimerState(r.user.uid,a),n({isSyncing:!1,lastSyncTime:new Date})}catch(a){console.error("Failed to save timer state:",a),n({isSyncing:!1,syncError:"Failed to save timer state"})}},saveToLocalStorage:()=>{var a;const r=e(),i={currentTime:r.currentTime,totalTime:r.totalTime,mode:r.mode,sessionsCompleted:r.sessionsCompleted,isRunning:r.isRunning,currentTaskId:((a=r.currentTask)==null?void 0:a.id)||null,lastSaveTime:new Date().toISOString(),activeSession:r.activeSession,sessionStartTimerPosition:r.sessionStartTimerPosition,currentTaskDetails:r.currentTask?{id:r.currentTask.id,title:r.currentTask.title,projectId:r.currentTask.projectId,timeSpent:r.currentTask.timeSpent,timeEstimated:r.currentTask.timeEstimated}:null};try{localStorage.setItem("timerState",JSON.stringify(i))}catch(o){console.error("Failed to save to localStorage:",o)}},loadFromLocalStorage:async()=>{var i;e();const r=localStorage.getItem("timerState");if(r)try{n({isTaskLoading:!0,taskLoadError:null});const a=JSON.parse(r);n({currentTime:a.currentTime,totalTime:a.totalTime,mode:a.mode,sessionsCompleted:a.sessionsCompleted,isRunning:a.isRunning,activeSession:a.activeSession,sessionStartTimerPosition:a.sessionStartTimerPosition}),a.currentTaskDetails?(n({currentTask:{...a.currentTaskDetails,completed:!1,status:"pomodoro",userId:((i=Qt.getState().user)==null?void 0:i.uid)||"",createdAt:new Date,updatedAt:new Date,order:0},isTaskLoading:!1}),a.currentTaskId&&t(a.currentTaskId,1).then(o=>{o&&n({currentTask:o})}).catch(o=>{console.warn("Background task verification failed:",o)})):n({isTaskLoading:!1})}catch(a){console.error("Failed to parse timer state from localStorage:",a),n({isTaskLoading:!1,taskLoadError:"Failed to load saved timer state"})}},syncFromRemoteState:async r=>{const i=r.currentTaskId||null,a=i&&Ut.getState().tasks.find(o=>o.id===i)||null;if(n({...r,currentTask:a,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),r.isRunning&&a&&r.mode==="pomodoro")try{if(r.activeSessionId){const{user:o}=Qt.getState();if(o){const l=(await Da.getActiveSessions(o.uid)).find(c=>c.id===r.activeSessionId&&c.status==="active");if(l){console.log("Resuming existing session:",{sessionId:l.id,duration:l.duration,reason:"page reload"});return}}}await e().createActiveSession(),console.log("Created new session:",{taskId:a.id,reason:"no active session found"})}catch(o){console.error("Failed to handle session during page reload:",o)}},cleanupPersistence:()=>{n({isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null})},resetTimerState:()=>{const{settings:r}=e();n({isRunning:!1,currentTime:r.pomodoro*60,totalTime:r.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,isActiveDevice:!0,syncError:null})},setEnableStartPauseBtn:r=>{n({enableStartPauseBtn:r})},switchToNextPomodoroTask:async r=>{const{mode:i,sessionsCompleted:a,settings:o,currentTask:s,activeSession:l}=e();console.log("switchToNextPomodoroTask called:",{nextTaskId:r.id,nextTaskTitle:r.title,currentTaskId:s==null?void 0:s.id,currentTaskTitle:s==null?void 0:s.title,mode:i,hasActiveSession:!!l}),i==="pomodoro"&&s&&r.id!==s.id?(l&&(console.log("Completing current session:",l.sessionId),await e().completeActiveSession("completed")),console.log("Setting new current task:",r.title),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Creating new session for task:",r.title),await e().createActiveSession()):console.log("Skipping task switch - conditions not met"),e().saveToDatabase()}}});Qt.subscribe(async n=>{const e=ei.getState();if(!n.isInitialized){console.log("TimerStore - User store not initialized yet, waiting...");return}if(console.log("TimerStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isLoading:n.isLoading,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user&&!n.isLoading){console.log("TimerStore - User authenticated, initializing persistence...");try{await e.initializePersistence(n.user.uid),e.setSettings(n.user.settings.timer)}catch(t){console.error("Failed to initialize timer persistence:",t)}}else console.log("TimerStore - User not authenticated, cleaning up..."),e.cleanupPersistence(),e.resetTimerState()});const R3e=Object.freeze(Object.defineProperty({__proto__:null,useTimerStore:ei},Symbol.toStringTag,{value:"Module"})),N3e=({currentTime:n,totalTime:e,size:t=300,strokeWidth:r=12,color:i="#BA4949",bgColor:a="var(--border-color)",children:o,className:s=""})=>{const[l,c]=K.useState(t);K.useEffect(()=>{const m=()=>{const v=Math.min(window.innerWidth-80,300);c(t>v?v:t)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[t]);const u=l/2-r/2,d=2*Math.PI*u,h=e>0?n/e:0,f=d*(1-h);return x.jsxs("div",{className:`timer-circle relative ${s}`,style:{width:l,height:l},children:[x.jsxs("svg",{width:l,height:l,viewBox:`0 0 ${l} ${l}`,children:[x.jsx("circle",{className:"timer-circle-bg",cx:l/2,cy:l/2,r:u,fill:"none",stroke:a,strokeWidth:r}),x.jsx("circle",{className:"timer-circle-progress",cx:l/2,cy:l/2,r:u,fill:"none",stroke:i,strokeWidth:r,strokeLinecap:"round",strokeDasharray:d,strokeDashoffset:f,style:{transform:"rotate(-90deg)",transformOrigin:"center",transition:"stroke-dashoffset 1s linear"}})]}),x.jsx("div",{className:"timer-text absolute inset-0 flex flex-col items-center justify-center",children:o})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3e=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j3e=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),YQ=n=>{const e=j3e(n);return e.charAt(0).toUpperCase()+e.slice(1)},Hye=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),F3e=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $3e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=K.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>K.createElement("svg",{ref:l,...$3e,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Hye("lucide",i),...!a&&!F3e(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,u])=>K.createElement(c,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(n,e)=>{const t=K.forwardRef(({className:r,...i},a)=>K.createElement(B3e,{ref:a,iconNode:e,className:Hye(`lucide-${L3e(YQ(n))}`,`lucide-${n}`,r),...i}));return t.displayName=YQ(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],V3e=wt("activity",U3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3e=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],H3e=wt("beaker",z3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],q3e=wt("bell",G3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3e=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],$R=wt("bot",W3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],K3e=wt("brain",Y3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3e=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],Z3e=wt("bug",X3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],J3e=wt("calendar-days",Q3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cg=wt("calendar",e4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],n4e=wt("chart-column",t4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],i4e=wt("check-check",r4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],o4e=wt("check",a4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gye=wt("chevron-down",s4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],c4e=wt("chevron-left",l4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qye=wt("chevron-right",u4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$v=wt("circle-alert",d4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bg=wt("circle-check-big",h4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p4e=wt("circle-help",f4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],LN=wt("circle-x",g4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Wye=wt("clock",m4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Hz=wt("database",v4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],b4e=wt("ellipsis-vertical",y4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Yye=wt("external-link",w4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_4e=wt("eye-off",x4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T4e=wt("eye",S4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4e=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],A4e=wt("facebook",E4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xj=wt("file-text",k4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4e=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],D4e=wt("flame",C4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],M4e=wt("focus",I4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],O4e=wt("folder",P4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],N4e=wt("github",R4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ZF=wt("globe",L4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],F4e=wt("grid-3x3",j4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Kye=wt("info",$4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],U4e=wt("instagram",B4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],KQ=wt("key",V4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],H4e=wt("link",z4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4e=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],XQ=wt("linkedin",G4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],W4e=wt("list-checks",q4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],og=wt("loader-circle",Y4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ZQ=wt("loader",K4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Z4e=wt("mail",X4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],J4e=wt("maximize",Q4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],t$e=wt("menu",e$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$e=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],LS=wt("message-circle",n$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$e=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],i$e=wt("minimize",r$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],o$e=wt("monitor",a$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$e=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],l$e=wt("moon",s$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$e=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],u$e=wt("music",c$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],h$e=wt("palette",d$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],p$e=wt("panel-right-close",f$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],m$e=wt("panel-right-open",g$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$e=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Xye=wt("pause",v$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$e=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Zye=wt("play",y$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],w$e=wt("plus",b$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gz=wt("refresh-cw",x$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],S$e=wt("rotate-ccw",_$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],E$e=wt("send",T$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$e=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],c1=wt("settings",A$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$e=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],C$e=wt("shopping-cart",k$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$e=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],I$e=wt("skip-forward",D$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$e=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P$e=wt("square-check-big",M$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],R$e=wt("square-pen",O$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$e=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],L$e=wt("sun",N$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$e=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],F$e=wt("test-tube",j$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$e=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],B$e=wt("timer",$$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V$e=wt("trash-2",U$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],H$e=wt("trending-up",z$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],E7=wt("triangle-alert",G$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$e=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],W$e=wt("twitter",q$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],K$e=wt("user",Y$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Z$e=wt("users",X$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],QQ=wt("video",Q$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qz=wt("x",J$e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eBe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],tBe=wt("wrench",eBe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nBe=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],rBe=wt("youtube",nBe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iBe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Qye=wt("zap",iBe),aBe={"timer-line":B$e,"task-line":P$e,"dashboard-line":n4e,"calendar-line":cg,"settings-line":c1,"question-line":p4e,"arrow-left-s-line":c4e,"arrow-right-s-line":qye,"menu-line":t$e,"layout-right-line":m$e,"layout-right-2-line":p$e,"check-line":o4e,"close-line":qz,"add-line":w$e,"edit-line":R$e,"delete-bin-line":V$e,"pause-line":Xye,"restart-line":S$e,"skip-forward-line":I$e,"play-line":Zye,"notification-line":q3e,"fullscreen-line":J4e,"fullscreen-exit-line":i$e,"time-line":Wye,"calendar-event-line":J3e,"arrow-down-s-line":Gye,"fire-line":D4e,"focus-3-line":M4e,"brain-line":K3e,"list-check":W4e,"layout-grid-line":F4e,"checkbox-multiple-line":i4e,"more-2-fill":b4e,"folder-line":O4e,"palette-line":h$e,"sun-line":L$e,"moon-line":l$e,"computer-line":o$e,"database-2-line":Hz,"refresh-line":Gz,"information-line":Kye,"error-warning-line":E7,"test-tube-line":F$e,"tools-line":tBe,"ri-global-line":ZF,"ri-github-line":N4e,"ri-facebook-line":A4e,"ri-file-list-line":xj,"ri-instagram-line":U4e,"ri-linkedin-line":XQ,"ri-twitter-line":W$e,"ri-youtube-line":rBe,"ri-linkedin-box-line":XQ,"ri-discord-line":LS,"ri-telegram-line":LS,"ri-whatsapp-line":LS,"ri-snapchat-line":LS,"ri-music-line":u$e,"ri-video-line":QQ,"ri-mail-line":Z4e,"ri-amazon-line":C$e,"ri-netflix-line":QQ,"ri-reddit-line":LS,"ri-pinterest-line":ZF,"ri-google-line":ZF,"flask-line":H3e,"links-line":H4e,"bug-line":Z3e},ht=({name:n,className:e="",size:t=20})=>{const r=aBe[n];return r?x.jsx(r,{size:t,className:e,"aria-hidden":"true"}):(console.warn(`Icon "${n}" not found in iconMap`),x.jsx("div",{className:`w-5 h-5 ${e}`}))},oBe=({className:n=""})=>{var M;const e=ei(P=>P.currentTime),t=ei(P=>P.totalTime),r=ei(P=>P.isRunning),i=ei(P=>P.mode),a=ei(P=>P.sessionsCompleted),o=ei(P=>P.currentTask),s=ei(P=>P.enableStartPauseBtn),l=ei(P=>P.isLoading),c=ei(P=>P.isSyncing),u=ei(P=>P.syncError),d=ei(P=>P.isTaskLoading),h=ei(P=>P.taskLoadError),{start:f,pause:m,reset:v,skip:y,setMode:w}=ei(),_=()=>{if(!s){console.warn("Start/Pause button is disabled");return}r?m():f()},T=()=>{v()},A=()=>{y()},C=T7(e),k=()=>d?x.jsxs("div",{className:"flex items-center text-sm text-text-secondary mb-2",children:[x.jsx(ht,{name:"loader-4-line",className:"mr-1 animate-spin",size:16}),"Recovering task state..."]}):h?x.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[x.jsx(ht,{name:"error-warning-line",className:"mr-1",size:16}),h]}):u&&!l&&!c?x.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[x.jsx(ht,{name:"error-warning-line",className:"mr-1",size:16}),"Connection error"]}):null;return x.jsxs("div",{className:`flex flex-col items-center max-w-full w-full ${n}`,children:[x.jsxs("div",{className:"mb-8 text-center w-full",children:[x.jsxs("div",{className:"inline-flex items-center bg-background-container p-1 rounded-full mb-2 flex-wrap justify-center",children:[x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="pomodoro"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("pomodoro"),disabled:l||d,children:"Pomodoro"}),x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="shortBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("shortBreak"),disabled:l||d,children:"Short Break"}),x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="longBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("longBreak"),disabled:l||d,children:"Long Break"})]}),x.jsxs("p",{className:"text-sm text-text-secondary",children:["Session ",a+1," of ",ei.getState().settings.longBreakInterval]}),k()]}),x.jsxs(N3e,{currentTime:e,totalTime:t,className:"mb-6",size:Math.min(300,window.innerWidth-80),children:[x.jsx("div",{className:"text-4xl sm:text-5xl font-bold text-text-primary",children:C}),x.jsx("div",{className:"text-sm text-text-secondary",children:"remaining"})]}),x.jsxs("div",{className:"flex items-center space-x-4 mb-8 flex-wrap justify-center",children:[x.jsx("button",{className:`px-5 sm:px-6 py-3 rounded-full font-medium bg-primary text-white hover:bg-opacity-90 !rounded-button whitespace-nowrap m-1 ${!s||l||d?"opacity-50 cursor-not-allowed":""}`,onClick:_,disabled:l||d||!s,children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:`${r?"pause":"play"}-line`,size:20})}),x.jsx("span",{className:"ml-2",children:r?"Pause":"Start"})]})}),x.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:T,disabled:l||d,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"restart-line",size:20})})}),x.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:A,disabled:l||d,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"skip-forward-line",size:20})})})]}),x.jsxs("div",{className:"w-full max-w-md bg-background-container rounded-lg p-4",children:[x.jsx("p",{className:"text-text-primary mb-2 break-words text-left",children:d?x.jsxs("span",{className:"flex items-center",children:[x.jsx(ht,{name:"loader-4-line",className:"mr-2 animate-spin",size:16}),"Recovering task..."]}):o?o.title:"Select a task to start working"}),x.jsxs("div",{className:"flex items-center justify-between text-sm text-text-secondary flex-wrap gap-2 text-left",children:[x.jsx("span",{className:"break-words text-left",children:o?`Project: ${((M=Ut.getState().projects.find(P=>P.id===o.projectId))==null?void 0:M.name)||"Unknown Project"}`:"No project selected"}),x.jsx("span",{className:"text-left",children:o?`Est: ${o.timeSpent}/${o.timeEstimated}m`:"Est: --"})]})]})]})},sBe=()=>x.jsx(oBe,{});function Jye(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Jye(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Pr(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Jye(n))&&(r&&(r+=" "),r+=e);return r}const wg=({children:n,className:e,title:t,action:r,noPadding:i=!1,fullHeight:a=!1})=>x.jsxs("div",{className:Pr("bg-background-secondary rounded-lg shadow-sm border border-border",a?"h-full":"",e),children:[t&&x.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[x.jsx("h3",{className:"text-lg font-medium text-text-primary",children:t}),r&&x.jsx("div",{className:"flex items-center",children:r})]}),x.jsx("div",{className:Pr(!i&&"p-6"),children:n})]}),oh=Vf((n,e)=>({selectedRange:{rangeType:"all time",startDate:null,endDate:null},workSessions:[],focusTimeView:"daily",unsubscribe:null,isLoading:!1,useEventDrivenLoading:!0,setSelectedRange:async t=>{var i;n({selectedRange:t});const{useEventDrivenLoading:r}=e();if(r){const a=(i=Qt.getState().user)==null?void 0:i.uid;a&&await e().loadWorkSessionsForRange(a,t)}},setWorkSessions:t=>n({workSessions:t}),setFocusTimeView:t=>n({focusTimeView:t}),subscribeWorkSessions:t=>{console.log("DashboardStore - Subscribing to work sessions for user:",t);const{unsubscribe:r}=e();r&&r();const i=Da.subscribeToWorkSessions(t,a=>{console.log("DashboardStore - Received work sessions:",a.length),console.log("DashboardStore - Sample work sessions:",a.slice(0,3)),console.log("DashboardStore - Today's sessions:",a.filter(o=>{const s=new Date(o.date),l=new Date;return s.toDateString()===l.toDateString()}).length),n({workSessions:a})});n({unsubscribe:i})},loadWorkSessionsForRange:async(t,r)=>{const{startDate:i,endDate:a,rangeType:o}=r;console.log("DashboardStore - Loading work sessions for range:",{userId:t,rangeType:o,startDate:(i==null?void 0:i.toISOString().split("T")[0])||"null",endDate:(a==null?void 0:a.toISOString().split("T")[0])||"null"}),n({isLoading:!0});try{let s;o==="all time"||!i||!a?(console.log('DashboardStore - Loading all sessions for "all time"'),s=await Da.getAllWorkSessions(t)):s=await Da.getWorkSessionsForRange(t,i,a),console.log("DashboardStore - Successfully loaded sessions:",s.length),n({workSessions:s})}catch(s){console.error("DashboardStore - Error loading work sessions:",s)}finally{n({isLoading:!1})}},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,workSessions:[]}))}}));Qt.subscribe(n=>{var t;const e=oh.getState();if(!n.isInitialized){console.log("DashboardStore - User store not initialized yet, waiting...");return}if(console.log("DashboardStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,userId:(t=n.user)==null?void 0:t.uid,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user){const{useEventDrivenLoading:r,selectedRange:i}=e;r?(console.log("DashboardStore - User logged in, using event-driven loading"),e.cleanupListeners(),console.log("DashboardStore - Loading data for current range:",i),e.loadWorkSessionsForRange(n.user.uid,i)):(console.log("DashboardStore - User logged in, using subscription-based loading"),e.subscribeWorkSessions(n.user.uid))}else console.log("DashboardStore - User logged out, cleaning up"),e.setWorkSessions([]),e.cleanupListeners()});const lBe=Object.freeze(Object.defineProperty({__proto__:null,useDashboardStore:oh},Symbol.toStringTag,{value:"Module"})),cBe=()=>{const{workSessions:n}=oh(),[e,t]=K.useState({dailyAverage:{hours:0,minutes:0},totalFocus:{hours:0,minutes:0},weeklyGoal:{current:0,target:25,progress:0},journey:{current:0,target:1e4,progress:0}}),[r,i]=K.useState(!1);return K.useEffect(()=>{(()=>{i(!0);const o={};let s=0;const l=new Date,c=l.getDay()===0?6:l.getDay()-1;l.setDate(l.getDate()-c),l.setHours(0,0,0,0),n.filter(h=>h.sessionType==="pomodoro"||h.sessionType==="manual").forEach(h=>{const f=h.date,m=h.duration;o[f]?o[f]+=m:o[f]=m,new Date(f)>=l&&(s+=m)});const u=Object.values(o).reduce((h,f)=>h+f,0),d=u/Object.keys(o).length||0;t({dailyAverage:{hours:Math.floor(d/60),minutes:Math.floor(d%60)},totalFocus:{hours:Math.floor(u/60),minutes:u%60},weeklyGoal:{current:parseFloat((s/60).toFixed(1)),target:25,progress:Math.min(s/60/25*100,100)},journey:{current:Math.floor(u/60),target:1e4,progress:parseFloat((u/60/1e4*100).toFixed(2))}}),i(!1)})()},[n]),r?x.jsx(wg,{title:"Average Focus Time",children:x.jsx("div",{className:"flex items-center justify-center h-40",children:x.jsx("div",{className:"text-text-secondary",children:"Loading focus statistics..."})})}):x.jsxs(wg,{title:"Average Focus Time",children:[x.jsxs("div",{className:"flex items-center justify-between mb-8",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"text-3xl font-bold text-text-primary",children:[e.dailyAverage.hours,"h ",e.dailyAverage.minutes,"m"]}),x.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"Daily average"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-3xl font-bold text-text-primary",children:[e.totalFocus.hours,"h ",e.totalFocus.minutes,"m"]}),x.jsx("p",{className:"text-sm text-text-secondary mt-2",children:"Total focus time"})]})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[x.jsx("span",{className:"text-text-secondary",children:"Weekly goal (25h)"}),x.jsxs("span",{className:"font-medium text-text-primary",children:[e.weeklyGoal.current,"h / ",e.weeklyGoal.target,"h"]})]}),x.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.weeklyGoal.progress}%`}})})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[x.jsx("span",{className:"text-text-secondary",children:"Journey to 10,000 hours"}),x.jsxs("span",{className:"font-medium text-text-primary",children:[e.journey.current,"h / ",e.journey.target,"h"]})]}),x.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.journey.progress}%`}})})]})]})]})},uBe=(n,e)=>{const t=n.timeSpent||0;return{id:n.id,userId:n.userId,projectId:n.projectId,name:n.title,description:n.description||"",completed:n.completed,totalFocusTime:t,createdAt:n.createdAt,status:n.status,timeSpent:n.timeSpent,timeEstimated:n.timeEstimated,order:n.order,hideFromPomodoro:n.hideFromPomodoro,updatedAt:n.updatedAt}},dBe=n=>{if(n.length===0)return{currentStreak:0,longestStreak:0,totalFocusDays:0,streakDates:[]};const e=new Map;n.forEach(u=>{const d=u.date;e.has(d)||e.set(d,[]),e.get(d).push(u)});const t=Array.from(e.keys()).map(u=>new Date(u)).sort((u,d)=>u.getTime()-d.getTime());if(t.length===0)return{currentStreak:0,longestStreak:0,totalFocusDays:0,streakDates:[]};let r=0,i=0;const a=new Date;a.setHours(0,0,0,0);const o=t[t.length-1];if(o.setHours(0,0,0,0),Math.floor((a.getTime()-o.getTime())/(1e3*60*60*24))<=1){r=1;for(let u=t.length-2;u>=0;u--){const d=t[u+1],h=t[u];if(Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24))===1)r++;else break}}let l=1;for(let u=1;u<t.length;u++){const d=t[u],h=t[u-1];Math.floor((d.getTime()-h.getTime())/(1e3*60*60*24))===1?l++:(i=Math.max(i,l),l=1)}i=Math.max(i,l);const c=t.map(u=>({date:u,hasFocused:!0}));return{currentStreak:r,longestStreak:i,totalFocusDays:t.length,streakDates:c}},hBe=async(n,e,t)=>{try{const r=new Date,i=new Date(r);i.setDate(r.getDate()-1);const a=i.toISOString().split("T")[0];await Da.upsertWorkSession({userId:n,taskId:e,projectId:t,date:a},120);const s=new Date(r).toISOString().split("T")[0];await Da.upsertWorkSession({userId:n,taskId:e,projectId:t,date:s},90);const l=new Date(r);l.setDate(r.getDate()-3);const c=l.toISOString().split("T")[0];await Da.upsertWorkSession({userId:n,taskId:e,projectId:t,date:c},45),console.log("✅ Test work sessions created successfully!"),console.log("🎯 Check your dashboard to see the sync in action")}catch(r){console.error("❌ Failed to create test work sessions:",r)}},fBe=()=>{const[n,e]=K.useState(()=>{const T=new Date;return new Date(T.getFullYear(),T.getMonth(),1)}),[t,r]=K.useState([]),[i,a]=K.useState(null),{workSessions:o}=oh(),{user:s}=Qt(),l=dBe(o);K.useEffect(()=>{if(o.length>0){const T=new Date,A=new Date(T.getFullYear(),T.getMonth(),1);e(A)}},[o.length]);const c=()=>{const T=new Date(n);T.setMonth(T.getMonth()-1),e(T)},u=()=>{const T=new Date(n);T.setMonth(T.getMonth()+1),e(T)},d=(T,A)=>{if(!A)return!1;const C=new Date(T).toDateString(),k=typeof A=="string"?new Date(A).toDateString():A.toDateString();return C===k},h=T=>{const A=FR(T),C=o.some(k=>k.date===A);return A===FR(new Date)&&console.log(`Today (${A}): has session = ${C}`),C&&console.log(`Date ${A} has work session`),C};K.useEffect(()=>{const T=n.getFullYear(),A=n.getMonth(),C=new Date(T,A,1),k=new Date(C);k.setDate(k.getDate()-C.getDay());const M=[];for(let P=0;P<35;P++){const O=new Date(k);if(O.setDate(k.getDate()+P),O.getMonth()===A||Math.abs(O.getMonth()-A)===1||A===0&&O.getMonth()===11||A===11&&O.getMonth()===0){const j=h(O);FR(O),M.push({date:O,hasFocused:j})}else M.push(null)}r(M)},[n,o]);const f=n.toLocaleDateString("en-US",{month:"long",year:"numeric"}),m=T=>{a(T.date)},v=T=>{const A=new Date;return T.getDate()===A.getDate()&&T.getMonth()===A.getMonth()&&T.getFullYear()===A.getFullYear()},y=T=>{const A=new Date;A.setHours(0,0,0,0);const C=new Date(T);return C.setHours(0,0,0,0),C<A},w=T=>{const A="w-8 h-8 rounded-full flex items-center justify-center text-xs cursor-pointer transition-all duration-200";return v(T.date)?`${A} bg-background-primary border-2 border-primary border-dashed text-text-primary font-medium`:y(T.date)?T.hasFocused?`${A} bg-primary text-white hover:bg-opacity-90 font-medium`:`${A} bg-background-primary border border-border text-text-secondary hover:bg-background-container`:`${A} bg-background-primary border border-border text-text-secondary opacity-50`},_=async()=>{s!=null&&s.uid&&await hBe(s.uid,"test-task-id","test-project-id")};return x.jsxs(wg,{title:"Focus Streak",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center text-sm text-green-500 font-medium",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx("i",{className:"ri-fire-line"})}),x.jsxs("span",{children:[l.currentStreak," days"]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[o.length===0&&x.jsx("button",{onClick:_,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Test Data"}),x.jsx("button",{onClick:c,className:"p-1.5 rounded-full hover:bg-background-container",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-arrow-left-s-line"})})}),x.jsx("span",{className:"text-sm font-medium text-text-primary",children:f}),x.jsx("button",{onClick:u,className:"p-1.5 rounded-full hover:bg-background-container",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-arrow-right-s-line"})})})]})]}),x.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(T=>x.jsx("div",{className:"text-center text-xs font-medium text-text-secondary py-1",children:T},T))}),x.jsx("div",{className:"grid grid-cols-7 gap-2",children:t.map((T,A)=>x.jsx("div",{className:"flex items-center justify-center",children:T?x.jsx("div",{className:`${w(T)}
                  ${i&&d(T.date,i)?"ring-2 ring-primary ring-offset-2":""}
                `,onClick:()=>m(T),children:T.date.getDate()}):x.jsx("div",{})},A))})]})};var QF,JQ;function Zl(){if(JQ)return QF;JQ=1;var n=Array.isArray;return QF=n,QF}var JF,eJ;function e0e(){if(eJ)return JF;eJ=1;var n=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;return JF=n,JF}var e3,tJ;function qf(){if(tJ)return e3;tJ=1;var n=e0e(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return e3=t,e3}var t3,nJ;function rM(){if(nJ)return t3;nJ=1;var n=qf(),e=n.Symbol;return t3=e,t3}var n3,rJ;function pBe(){if(rJ)return n3;rJ=1;var n=rM(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(o){var s=t.call(o,i),l=o[i];try{o[i]=void 0;var c=!0}catch{}var u=r.call(o);return c&&(s?o[i]=l:delete o[i]),u}return n3=a,n3}var r3,iJ;function gBe(){if(iJ)return r3;iJ=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return r3=t,r3}var i3,aJ;function Qg(){if(aJ)return i3;aJ=1;var n=rM(),e=pBe(),t=gBe(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):t(s)}return i3=o,i3}var a3,oJ;function Jg(){if(oJ)return a3;oJ=1;function n(e){return e!=null&&typeof e=="object"}return a3=n,a3}var o3,sJ;function DT(){if(sJ)return o3;sJ=1;var n=Qg(),e=Jg(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return o3=r,o3}var s3,lJ;function A7(){if(lJ)return s3;lJ=1;var n=Zl(),e=DT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(n(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||o!=null&&a in Object(o)}return s3=i,s3}var l3,cJ;function Iy(){if(cJ)return l3;cJ=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return l3=n,l3}var c3,uJ;function k7(){if(uJ)return c3;uJ=1;var n=Qg(),e=Iy(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=n(s);return l==r||l==i||l==t||l==a}return c3=o,c3}var u3,dJ;function mBe(){if(dJ)return u3;dJ=1;var n=qf(),e=n["__core-js_shared__"];return u3=e,u3}var d3,hJ;function vBe(){if(hJ)return d3;hJ=1;var n=mBe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return d3=t,d3}var h3,fJ;function t0e(){if(fJ)return h3;fJ=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return h3=t,h3}var f3,pJ;function yBe(){if(pJ)return f3;pJ=1;var n=k7(),e=vBe(),t=Iy(),r=t0e(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!t(h)||e(h))return!1;var f=n(h)?u:a;return f.test(r(h))}return f3=d,f3}var p3,gJ;function bBe(){if(gJ)return p3;gJ=1;function n(e,t){return e==null?void 0:e[t]}return p3=n,p3}var g3,mJ;function nx(){if(mJ)return g3;mJ=1;var n=yBe(),e=bBe();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return g3=t,g3}var m3,vJ;function _j(){if(vJ)return m3;vJ=1;var n=nx(),e=n(Object,"create");return m3=e,m3}var v3,yJ;function wBe(){if(yJ)return v3;yJ=1;var n=_j();function e(){this.__data__=n?n(null):{},this.size=0}return v3=e,v3}var y3,bJ;function xBe(){if(bJ)return y3;bJ=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return y3=n,y3}var b3,wJ;function _Be(){if(wJ)return b3;wJ=1;var n=_j(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var o=this.__data__;if(n){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return b3=i,b3}var w3,xJ;function SBe(){if(xJ)return w3;xJ=1;var n=_j(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return w3=r,w3}var x3,_J;function TBe(){if(_J)return x3;_J=1;var n=_j(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return x3=t,x3}var _3,SJ;function EBe(){if(SJ)return _3;SJ=1;var n=wBe(),e=xBe(),t=_Be(),r=SBe(),i=TBe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,_3=a,_3}var S3,TJ;function ABe(){if(TJ)return S3;TJ=1;function n(){this.__data__=[],this.size=0}return S3=n,S3}var T3,EJ;function C7(){if(EJ)return T3;EJ=1;function n(e,t){return e===t||e!==e&&t!==t}return T3=n,T3}var E3,AJ;function Sj(){if(AJ)return E3;AJ=1;var n=C7();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return E3=e,E3}var A3,kJ;function kBe(){if(kJ)return A3;kJ=1;var n=Sj(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,o=n(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return A3=r,A3}var k3,CJ;function CBe(){if(CJ)return k3;CJ=1;var n=Sj();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return k3=e,k3}var C3,DJ;function DBe(){if(DJ)return C3;DJ=1;var n=Sj();function e(t){return n(this.__data__,t)>-1}return C3=e,C3}var D3,IJ;function IBe(){if(IJ)return D3;IJ=1;var n=Sj();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return D3=e,D3}var I3,MJ;function Tj(){if(MJ)return I3;MJ=1;var n=ABe(),e=kBe(),t=CBe(),r=DBe(),i=IBe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,I3=a,I3}var M3,PJ;function D7(){if(PJ)return M3;PJ=1;var n=nx(),e=qf(),t=n(e,"Map");return M3=t,M3}var P3,OJ;function MBe(){if(OJ)return P3;OJ=1;var n=EBe(),e=Tj(),t=D7();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return P3=r,P3}var O3,RJ;function PBe(){if(RJ)return O3;RJ=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return O3=n,O3}var R3,NJ;function Ej(){if(NJ)return R3;NJ=1;var n=PBe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return R3=e,R3}var N3,LJ;function OBe(){if(LJ)return N3;LJ=1;var n=Ej();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return N3=e,N3}var L3,jJ;function RBe(){if(jJ)return L3;jJ=1;var n=Ej();function e(t){return n(this,t).get(t)}return L3=e,L3}var j3,FJ;function NBe(){if(FJ)return j3;FJ=1;var n=Ej();function e(t){return n(this,t).has(t)}return j3=e,j3}var F3,$J;function LBe(){if($J)return F3;$J=1;var n=Ej();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return F3=e,F3}var $3,BJ;function I7(){if(BJ)return $3;BJ=1;var n=MBe(),e=OBe(),t=RBe(),r=NBe(),i=LBe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,$3=a,$3}var B3,UJ;function n0e(){if(UJ)return B3;UJ=1;var n=I7(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var c=r.apply(this,o);return a.cache=l.set(s,c)||l,c};return a.cache=new(t.Cache||n),a}return t.Cache=n,B3=t,B3}var U3,VJ;function jBe(){if(VJ)return U3;VJ=1;var n=n0e(),e=500;function t(r){var i=n(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return U3=t,U3}var V3,zJ;function FBe(){if(zJ)return V3;zJ=1;var n=jBe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,c){a.push(l?c.replace(t,"$1"):s||o)}),a});return V3=r,V3}var z3,HJ;function M7(){if(HJ)return z3;HJ=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return z3=n,z3}var H3,GJ;function $Be(){if(GJ)return H3;GJ=1;var n=rM(),e=M7(),t=Zl(),r=DT(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(r(s))return a?a.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return H3=o,H3}var G3,qJ;function r0e(){if(qJ)return G3;qJ=1;var n=$Be();function e(t){return t==null?"":n(t)}return G3=e,G3}var q3,WJ;function i0e(){if(WJ)return q3;WJ=1;var n=Zl(),e=A7(),t=FBe(),r=r0e();function i(a,o){return n(a)?a:e(a,o)?[a]:t(r(a))}return q3=i,q3}var W3,YJ;function Aj(){if(YJ)return W3;YJ=1;var n=DT();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return W3=e,W3}var Y3,KJ;function P7(){if(KJ)return Y3;KJ=1;var n=i0e(),e=Aj();function t(r,i){i=n(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return Y3=t,Y3}var K3,XJ;function a0e(){if(XJ)return K3;XJ=1;var n=P7();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return K3=e,K3}var BBe=a0e();const zu=kr(BBe);var X3,ZJ;function UBe(){if(ZJ)return X3;ZJ=1;function n(e){return e==null}return X3=n,X3}var VBe=UBe();const Xr=kr(VBe);var Z3,QJ;function zBe(){if(QJ)return Z3;QJ=1;var n=Qg(),e=Zl(),t=Jg(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return Z3=i,Z3}var HBe=zBe();const Lw=kr(HBe);var GBe=k7();const or=kr(GBe);var qBe=Iy();const IT=kr(qBe);var Q3={exports:{}},qr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JJ;function WBe(){if(JJ)return qr;JJ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var w=y.$$typeof;switch(w){case n:switch(y=y.type,y){case t:case i:case r:case c:case u:return y;default:switch(y=y&&y.$$typeof,y){case s:case o:case l:case h:case d:case a:return y;default:return w}}case e:return w}}}return qr.ContextConsumer=o,qr.ContextProvider=a,qr.Element=n,qr.ForwardRef=l,qr.Fragment=t,qr.Lazy=h,qr.Memo=d,qr.Portal=e,qr.Profiler=i,qr.StrictMode=r,qr.Suspense=c,qr.SuspenseList=u,qr.isAsyncMode=function(){return!1},qr.isConcurrentMode=function(){return!1},qr.isContextConsumer=function(y){return v(y)===o},qr.isContextProvider=function(y){return v(y)===a},qr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===n},qr.isForwardRef=function(y){return v(y)===l},qr.isFragment=function(y){return v(y)===t},qr.isLazy=function(y){return v(y)===h},qr.isMemo=function(y){return v(y)===d},qr.isPortal=function(y){return v(y)===e},qr.isProfiler=function(y){return v(y)===i},qr.isStrictMode=function(y){return v(y)===r},qr.isSuspense=function(y){return v(y)===c},qr.isSuspenseList=function(y){return v(y)===u},qr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===r||y===c||y===u||y===f||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===d||y.$$typeof===a||y.$$typeof===o||y.$$typeof===l||y.$$typeof===m||y.getModuleId!==void 0)},qr.typeOf=v,qr}var eee;function YBe(){return eee||(eee=1,Q3.exports=WBe()),Q3.exports}var KBe=YBe(),J3,tee;function o0e(){if(tee)return J3;tee=1;var n=Qg(),e=Jg(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return J3=r,J3}var e4,nee;function XBe(){if(nee)return e4;nee=1;var n=o0e();function e(t){return n(t)&&t!=+t}return e4=e,e4}var ZBe=XBe();const iM=kr(ZBe);var QBe=o0e();const JBe=kr(QBe);var Yd=function(e){return e===0?0:e>0?1:-1},tw=function(e){return Lw(e)&&e.indexOf("%")===e.length-1},mt=function(e){return JBe(e)&&!iM(e)},lo=function(e){return mt(e)||Lw(e)},eUe=0,kj=function(e){var t=++eUe;return"".concat(e||"").concat(t)},jw=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(e)&&!Lw(e))return r;var a;if(tw(e)){var o=e.indexOf("%");a=t*parseFloat(e.slice(0,o))/100}else a=+e;return iM(a)&&(a=r),i&&a>t&&(a=t),a},Bv=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},tUe=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},z_=function(e,t){return mt(e)&&mt(t)?function(r){return e+r*(t-e)}:function(){return t}};function Wz(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):zu(r,e))===t})}var nUe=function(e,t){return mt(e)&&mt(t)?e-t:Lw(e)&&Lw(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function u1(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function Yz(n){"@babel/helpers - typeof";return Yz=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yz(n)}var rUe=["viewBox","children"],iUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ree=["points","pathLength"],t4={svg:rUe,polygon:ree,polyline:ree},O7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],jN=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(K.isValidElement(e)&&(r=e.props),!IT(r))return null;var i={};return Object.keys(r).forEach(function(a){O7.includes(a)&&(i[a]=t||function(o){return r[a](r,o)})}),i},aUe=function(e,t,r){return function(i){return e(t,r,i),null}},FN=function(e,t,r){if(!IT(e)||Yz(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];O7.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=aUe(o,t,r))}),i},oUe=["children"],sUe=["children"];function iee(n,e){if(n==null)return{};var t=lUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var aee={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xg=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},oee=null,n4=null,R7=function n(e){if(e===oee&&Array.isArray(n4))return n4;var t=[];return K.Children.forEach(e,function(r){Xr(r)||(KBe.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),n4=t,oee=e,t};function eh(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return xg(i)}):r=[xg(e)],R7(n).forEach(function(i){var a=zu(i,"type.displayName")||zu(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function Ic(n,e){var t=eh(n,e);return t&&t[0]}var see=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!mt(r)||r<=0||!mt(i)||i<=0)},cUe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],uUe=function(e){return e&&e.type&&Lw(e.type)&&cUe.indexOf(e.type)>=0},dUe=function(e,t,r,i){var a,o=(a=t4==null?void 0:t4[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!or(e)&&(i&&o.includes(t)||iUe.includes(t))||r&&O7.includes(t)},Ur=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(K.isValidElement(e)&&(i=e.props),!IT(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;dUe((s=i)===null||s===void 0?void 0:s[o],o,t,r)&&(a[o]=i[o])}),a},Kz=function n(e,t){if(e===t)return!0;var r=K.Children.count(e);if(r!==K.Children.count(t))return!1;if(r===0)return!0;if(r===1)return lee(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],o=t[i];if(Array.isArray(a)||Array.isArray(o)){if(!n(a,o))return!1}else if(!lee(a,o))return!1}return!0},lee=function(e,t){if(Xr(e)&&Xr(t))return!0;if(!Xr(e)&&!Xr(t)){var r=e.props||{},i=r.children,a=iee(r,oUe),o=t.props||{},s=o.children,l=iee(o,sUe);return i&&s?u1(a,l)&&Kz(i,s):!i&&!s?u1(a,l):!1}return!1},cee=function(e,t){var r=[],i={};return R7(e).forEach(function(a,o){if(uUe(a))r.push(a);else if(a){var s=xg(a.type),l=t[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var d=c(a,s,o);r.push(d),i[s]=!0}}}),r},hUe=function(e){var t=e&&e.type;return t&&aee[t]?aee[t]:null},fUe=function(e,t){return R7(t).indexOf(e)},pUe=["children","width","height","viewBox","className","style","title","desc"];function Xz(){return Xz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xz.apply(this,arguments)}function gUe(n,e){if(n==null)return{};var t=mUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function mUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Zz(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,o=n.style,s=n.title,l=n.desc,c=gUe(n,pUe),u=i||{width:t,height:r,x:0,y:0},d=Pr("recharts-surface",a);return ve.createElement("svg",Xz({},Ur(c,!0,"svg"),{className:d,width:t,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ve.createElement("title",null,s),ve.createElement("desc",null,l),e)}var vUe=["children","className"];function Qz(){return Qz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qz.apply(this,arguments)}function yUe(n,e){if(n==null)return{};var t=bUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function bUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Oo=ve.forwardRef(function(n,e){var t=n.children,r=n.className,i=yUe(n,vUe),a=Pr("recharts-layer",r);return ve.createElement("g",Qz({className:a},Ur(i,!0),{ref:e}),t)}),_g=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},r4,uee;function wUe(){if(uee)return r4;uee=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+t];return o}return r4=n,r4}var i4,dee;function xUe(){if(dee)return i4;dee=1;var n=wUe();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return i4=e,i4}var a4,hee;function s0e(){if(hee)return a4;hee=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+n+i+a+"]");function l(c){return s.test(c)}return a4=l,a4}var o4,fee;function _Ue(){if(fee)return o4;fee=1;function n(e){return e.split("")}return o4=n,o4}var s4,pee;function SUe(){if(pee)return s4;pee=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="["+n+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+n+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",m=c+"?",v="["+a+"]?",y="(?:"+f+"(?:"+[u,d,h].join("|")+")"+v+m+")*",w=v+m+y,_="(?:"+[u+s+"?",s,d,h,o].join("|")+")",T=RegExp(l+"(?="+l+")|"+_+w,"g");function A(C){return C.match(T)||[]}return s4=A,s4}var l4,gee;function TUe(){if(gee)return l4;gee=1;var n=_Ue(),e=s0e(),t=SUe();function r(i){return e(i)?t(i):n(i)}return l4=r,l4}var c4,mee;function EUe(){if(mee)return c4;mee=1;var n=xUe(),e=s0e(),t=TUe(),r=r0e();function i(a){return function(o){o=r(o);var s=e(o)?t(o):void 0,l=s?s[0]:o.charAt(0),c=s?n(s,1).join(""):o.slice(1);return l[a]()+c}}return c4=i,c4}var u4,vee;function AUe(){if(vee)return u4;vee=1;var n=EUe(),e=n("toUpperCase");return u4=e,u4}var kUe=AUe();const Cj=kr(kUe);function Oi(n){return function(){return n}}const l0e=Math.cos,$N=Math.sin,ch=Math.sqrt,BN=Math.PI,Dj=2*BN,Jz=Math.PI,e9=2*Jz,Rb=1e-6,CUe=e9-Rb;function c0e(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function DUe(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return c0e;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let IUe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?c0e:DUe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-t,u=o-e,d=s-t,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Rb)if(!(Math.abs(d*l-c*u)>Rb)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let f=r-o,m=i-s,v=l*l+c*c,y=f*f+m*m,w=Math.sqrt(v),_=Math.sqrt(h),T=a*Math.tan((Jz-Math.acos((v+h-y)/(2*w*_)))/2),A=T/_,C=T/w;Math.abs(A-1)>Rb&&this._append`L${e+A*u},${t+A*d}`,this._append`A${a},${a},0,0,${+(d*f>u*m)},${this._x1=e+C*l},${this._y1=t+C*c}`}}arc(e,t,r,i,a,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=t+l,d=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Rb||Math.abs(this._y1-u)>Rb)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%e9+e9),h>CUe?this._append`A${r},${r},0,1,${d},${e-s},${t-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>Rb&&this._append`A${r},${r},0,${+(h>=Jz)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function N7(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new IUe(e)}function L7(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function u0e(n){this._context=n}u0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function Ij(n){return new u0e(n)}function d0e(n){return n[0]}function h0e(n){return n[1]}function f0e(n,e){var t=Oi(!0),r=null,i=Ij,a=null,o=N7(s);n=typeof n=="function"?n:n===void 0?d0e:Oi(n),e=typeof e=="function"?e:e===void 0?h0e:Oi(e);function s(l){var c,u=(l=L7(l)).length,d,h=!1,f;for(r==null&&(a=i(f=o())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+n(d,c,l),+e(d,c,l));if(f)return a=null,f+""||null}return s.x=function(l){return arguments.length?(n=typeof l=="function"?l:Oi(+l),s):n},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Oi(+l),s):e},s.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Oi(!!l),s):t},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function zP(n,e,t){var r=null,i=Oi(!0),a=null,o=Ij,s=null,l=N7(c);n=typeof n=="function"?n:n===void 0?d0e:Oi(+n),e=typeof e=="function"?e:Oi(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?h0e:Oi(+t);function c(d){var h,f,m,v=(d=L7(d)).length,y,w=!1,_,T=new Array(v),A=new Array(v);for(a==null&&(s=o(_=l())),h=0;h<=v;++h){if(!(h<v&&i(y=d[h],h,d))===w)if(w=!w)f=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=f;--m)s.point(T[m],A[m]);s.lineEnd(),s.areaEnd()}w&&(T[h]=+n(y,h,d),A[h]=+e(y,h,d),s.point(r?+r(y,h,d):T[h],t?+t(y,h,d):A[h]))}if(_)return s=null,_+""||null}function u(){return f0e().defined(i).curve(o).context(a)}return c.x=function(d){return arguments.length?(n=typeof d=="function"?d:Oi(+d),r=null,c):n},c.x0=function(d){return arguments.length?(n=typeof d=="function"?d:Oi(+d),c):n},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Oi(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Oi(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Oi(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Oi(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(n).y(e)},c.lineY1=function(){return u().x(n).y(t)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Oi(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),c):a},c}class p0e{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function MUe(n){return new p0e(n,!0)}function PUe(n){return new p0e(n,!1)}const j7={draw(n,e){const t=ch(e/BN);n.moveTo(t,0),n.arc(0,0,t,0,Dj)}},OUe={draw(n,e){const t=ch(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},g0e=ch(1/3),RUe=g0e*2,NUe={draw(n,e){const t=ch(e/RUe),r=t*g0e;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},LUe={draw(n,e){const t=ch(e),r=-t/2;n.rect(r,r,t,t)}},jUe=.8908130915292852,m0e=$N(BN/10)/$N(7*BN/10),FUe=$N(Dj/10)*m0e,$Ue=-l0e(Dj/10)*m0e,BUe={draw(n,e){const t=ch(e*jUe),r=FUe*t,i=$Ue*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const o=Dj*a/5,s=l0e(o),l=$N(o);n.lineTo(l*t,-s*t),n.lineTo(s*r-l*i,l*r+s*i)}n.closePath()}},d4=ch(3),UUe={draw(n,e){const t=-ch(e/(d4*3));n.moveTo(0,t*2),n.lineTo(-d4*t,-t),n.lineTo(d4*t,-t),n.closePath()}},mu=-.5,vu=ch(3)/2,t9=1/ch(12),VUe=(t9/2+1)*3,zUe={draw(n,e){const t=ch(e/VUe),r=t/2,i=t*t9,a=r,o=t*t9+t,s=-a,l=o;n.moveTo(r,i),n.lineTo(a,o),n.lineTo(s,l),n.lineTo(mu*r-vu*i,vu*r+mu*i),n.lineTo(mu*a-vu*o,vu*a+mu*o),n.lineTo(mu*s-vu*l,vu*s+mu*l),n.lineTo(mu*r+vu*i,mu*i-vu*r),n.lineTo(mu*a+vu*o,mu*o-vu*a),n.lineTo(mu*s+vu*l,mu*l-vu*s),n.closePath()}};function HUe(n,e){let t=null,r=N7(i);n=typeof n=="function"?n:Oi(n||j7),e=typeof e=="function"?e:Oi(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:Oi(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Oi(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function UN(){}function VN(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function v0e(n){this._context=n}v0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:VN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:VN(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function GUe(n){return new v0e(n)}function y0e(n){this._context=n}y0e.prototype={areaStart:UN,areaEnd:UN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:VN(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function qUe(n){return new y0e(n)}function b0e(n){this._context=n}b0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:VN(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function WUe(n){return new b0e(n)}function w0e(n){this._context=n}w0e.prototype={areaStart:UN,areaEnd:UN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function YUe(n){return new w0e(n)}function yee(n){return n<0?-1:1}function bee(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(yee(a)+yee(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function wee(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function h4(n,e,t){var r=n._x0,i=n._y0,a=n._x1,o=n._y1,s=(a-r)/3;n._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*t,a,o)}function zN(n){this._context=n}zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h4(this,this._t0,wee(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,h4(this,wee(this,t=bee(this,n,e)),t);break;default:h4(this,this._t0,t=bee(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function x0e(n){this._context=new _0e(n)}(x0e.prototype=Object.create(zN.prototype)).point=function(n,e){zN.prototype.point.call(this,e,n)};function _0e(n){this._context=n}_0e.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function KUe(n){return new zN(n)}function XUe(n){return new x0e(n)}function S0e(n){this._context=n}S0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=xee(n),i=xee(e),a=0,o=1;o<t;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function xee(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),o=new Array(t);for(i[0]=0,a[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function ZUe(n){return new S0e(n)}function Mj(n,e){this._context=n,this._t=e}Mj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function QUe(n){return new Mj(n,.5)}function JUe(n){return new Mj(n,0)}function e6e(n){return new Mj(n,1)}function B1(n,e){if((o=n.length)>1)for(var t=1,r,i,a=n[e[0]],o,s=a.length;t<o;++t)for(i=a,a=n[e[t]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function n9(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function t6e(n,e){return n[e]}function n6e(n){const e=[];return e.key=n,e}function r6e(){var n=Oi([]),e=n9,t=B1,r=t6e;function i(a){var o=Array.from(n.apply(this,arguments),n6e),s,l=o.length,c=-1,u;for(const d of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,a)]).data=d;for(s=0,u=L7(e(o));s<l;++s)o[u[s]].index=s;return t(o,u),o}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Oi(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Oi(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?n9:typeof a=="function"?a:Oi(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??B1,i):t},i}function i6e(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,o;i<a;++i){for(o=t=0;t<r;++t)o+=n[t][i][1]||0;if(o)for(t=0;t<r;++t)n[t][i][1]/=o}B1(n,e)}}function a6e(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var o=0,s=0;o<i;++o)s+=n[o][t][1]||0;r[t][1]+=r[t][0]=-s/2}B1(n,e)}}function o6e(n,e){if(!(!((o=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var u=n[e[s]],d=u[r][1]||0,h=u[r-1][1]||0,f=(d-h)/2,m=0;m<s;++m){var v=n[e[m]],y=v[r][1]||0,w=v[r-1][1]||0;f+=y-w}l+=d,c+=f*d}i[r-1][1]+=i[r-1][0]=t,l&&(t-=c/l)}i[r-1][1]+=i[r-1][0]=t,B1(n,e)}}function mD(n){"@babel/helpers - typeof";return mD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mD(n)}var s6e=["type","size","sizeType"];function r9(){return r9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},r9.apply(this,arguments)}function _ee(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function See(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_ee(Object(t),!0).forEach(function(r){l6e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_ee(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l6e(n,e,t){return e=c6e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c6e(n){var e=u6e(n,"string");return mD(e)=="symbol"?e:e+""}function u6e(n,e){if(mD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(mD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function d6e(n,e){if(n==null)return{};var t=h6e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function h6e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var T0e={symbolCircle:j7,symbolCross:OUe,symbolDiamond:NUe,symbolSquare:LUe,symbolStar:BUe,symbolTriangle:UUe,symbolWye:zUe},f6e=Math.PI/180,p6e=function(e){var t="symbol".concat(Cj(e));return T0e[t]||j7},g6e=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*f6e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},m6e=function(e,t){T0e["symbol".concat(Cj(e))]=t},F7=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=d6e(e,s6e),c=See(See({},l),{},{type:r,size:a,sizeType:s}),u=function(){var y=p6e(r),w=HUe().type(y).size(g6e(a,s,r));return w()},d=c.className,h=c.cx,f=c.cy,m=Ur(c,!0);return h===+h&&f===+f&&a===+a?ve.createElement("path",r9({},m,{className:Pr("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(f,")"),d:u()})):null};F7.registerSymbol=m6e;function U1(n){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U1(n)}function i9(){return i9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i9.apply(this,arguments)}function Tee(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v6e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tee(Object(t),!0).forEach(function(r){vD(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tee(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y6e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function b6e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,A0e(r.key),r)}}function w6e(n,e,t){return e&&b6e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function x6e(n,e,t){return e=HN(e),_6e(n,E0e()?Reflect.construct(e,t||[],HN(n).constructor):e.apply(n,t))}function _6e(n,e){if(e&&(U1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S6e(n)}function S6e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function E0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E0e=function(){return!!n})()}function HN(n){return HN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HN(n)}function T6e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&a9(n,e)}function a9(n,e){return a9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a9(n,e)}function vD(n,e,t){return e=A0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A0e(n){var e=E6e(n,"string");return U1(e)=="symbol"?e:e+""}function E6e(n,e){if(U1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(U1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var yu=32,$7=function(n){function e(){return y6e(this,e),x6e(this,e,arguments)}return T6e(e,n),w6e(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=yu/2,o=yu/6,s=yu/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ve.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:yu,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ve.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(yu,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ve.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(yu/8,"h").concat(yu,"v").concat(yu*3/4,"h").concat(-yu,"z"),className:"recharts-legend-icon"});if(ve.isValidElement(r.legendIcon)){var c=v6e({},r);return delete c.legendIcon,ve.cloneElement(r.legendIcon,c)}return ve.createElement(F7,{fill:l,cx:a,cy:a,size:yu,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:yu,height:yu},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(f,m){var v=f.formatter||l,y=Pr(vD(vD({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",f.inactive));if(f.type==="none")return null;var w=or(f.value)?null:f.value;_g(!or(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=f.inactive?c:f.color;return ve.createElement("li",i9({className:y,style:d,key:"legend-item-".concat(m)},FN(r.props,f,m)),ve.createElement(Zz,{width:o,height:o,viewBox:u,style:h},r.renderIcon(f)),ve.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(w,f,m):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return ve.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(K.PureComponent);vD($7,"displayName","Legend");vD($7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var f4,Eee;function A6e(){if(Eee)return f4;Eee=1;var n=Tj();function e(){this.__data__=new n,this.size=0}return f4=e,f4}var p4,Aee;function k6e(){if(Aee)return p4;Aee=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return p4=n,p4}var g4,kee;function C6e(){if(kee)return g4;kee=1;function n(e){return this.__data__.get(e)}return g4=n,g4}var m4,Cee;function D6e(){if(Cee)return m4;Cee=1;function n(e){return this.__data__.has(e)}return m4=n,m4}var v4,Dee;function I6e(){if(Dee)return v4;Dee=1;var n=Tj(),e=D7(),t=I7(),r=200;function i(a,o){var s=this.__data__;if(s instanceof n){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(l)}return s.set(a,o),this.size=s.size,this}return v4=i,v4}var y4,Iee;function k0e(){if(Iee)return y4;Iee=1;var n=Tj(),e=A6e(),t=k6e(),r=C6e(),i=D6e(),a=I6e();function o(s){var l=this.__data__=new n(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,y4=o,y4}var b4,Mee;function M6e(){if(Mee)return b4;Mee=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return b4=e,b4}var w4,Pee;function P6e(){if(Pee)return w4;Pee=1;function n(e){return this.__data__.has(e)}return w4=n,w4}var x4,Oee;function C0e(){if(Oee)return x4;Oee=1;var n=I7(),e=M6e(),t=P6e();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new n;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,x4=r,x4}var _4,Ree;function D0e(){if(Ree)return _4;Ree=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return _4=n,_4}var S4,Nee;function I0e(){if(Nee)return S4;Nee=1;function n(e,t){return e.has(t)}return S4=n,S4}var T4,Lee;function M0e(){if(Lee)return T4;Lee=1;var n=C0e(),e=D0e(),t=I0e(),r=1,i=2;function a(o,s,l,c,u,d){var h=l&r,f=o.length,m=s.length;if(f!=m&&!(h&&m>f))return!1;var v=d.get(o),y=d.get(s);if(v&&y)return v==s&&y==o;var w=-1,_=!0,T=l&i?new n:void 0;for(d.set(o,s),d.set(s,o);++w<f;){var A=o[w],C=s[w];if(c)var k=h?c(C,A,w,s,o,d):c(A,C,w,o,s,d);if(k!==void 0){if(k)continue;_=!1;break}if(T){if(!e(s,function(M,P){if(!t(T,P)&&(A===M||u(A,M,l,c,d)))return T.push(P)})){_=!1;break}}else if(!(A===C||u(A,C,l,c,d))){_=!1;break}}return d.delete(o),d.delete(s),_}return T4=a,T4}var E4,jee;function O6e(){if(jee)return E4;jee=1;var n=qf(),e=n.Uint8Array;return E4=e,E4}var A4,Fee;function R6e(){if(Fee)return A4;Fee=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return A4=n,A4}var k4,$ee;function B7(){if($ee)return k4;$ee=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return k4=n,k4}var C4,Bee;function N6e(){if(Bee)return C4;Bee=1;var n=rM(),e=O6e(),t=C7(),r=M0e(),i=R6e(),a=B7(),o=1,s=2,l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Map]",h="[object Number]",f="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",T=n?n.prototype:void 0,A=T?T.valueOf:void 0;function C(k,M,P,O,j,L,B){switch(P){case _:if(k.byteLength!=M.byteLength||k.byteOffset!=M.byteOffset)return!1;k=k.buffer,M=M.buffer;case w:return!(k.byteLength!=M.byteLength||!L(new e(k),new e(M)));case l:case c:case h:return t(+k,+M);case u:return k.name==M.name&&k.message==M.message;case f:case v:return k==M+"";case d:var $=i;case m:var Y=O&o;if($||($=a),k.size!=M.size&&!Y)return!1;var G=B.get(k);if(G)return G==M;O|=s,B.set(k,M);var W=r($(k),$(M),O,j,L,B);return B.delete(k),W;case y:if(A)return A.call(k)==A.call(M)}return!1}return C4=C,C4}var D4,Uee;function P0e(){if(Uee)return D4;Uee=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return D4=n,D4}var I4,Vee;function L6e(){if(Vee)return I4;Vee=1;var n=P0e(),e=Zl();function t(r,i,a){var o=i(r);return e(r)?o:n(o,a(r))}return I4=t,I4}var M4,zee;function j6e(){if(zee)return M4;zee=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];t(s,r,e)&&(o[a++]=s)}return o}return M4=n,M4}var P4,Hee;function F6e(){if(Hee)return P4;Hee=1;function n(){return[]}return P4=n,P4}var O4,Gee;function $6e(){if(Gee)return O4;Gee=1;var n=j6e(),e=F6e(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(s){return r.call(o,s)}))}:e;return O4=a,O4}var R4,qee;function B6e(){if(qee)return R4;qee=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return R4=n,R4}var N4,Wee;function U6e(){if(Wee)return N4;Wee=1;var n=Qg(),e=Jg(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return N4=r,N4}var L4,Yee;function U7(){if(Yee)return L4;Yee=1;var n=U6e(),e=Jg(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return L4=a,L4}var Vk={exports:{}},j4,Kee;function V6e(){if(Kee)return j4;Kee=1;function n(){return!1}return j4=n,j4}Vk.exports;var Xee;function O0e(){return Xee||(Xee=1,function(n,e){var t=qf(),r=V6e(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o?t.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;n.exports=c}(Vk,Vk.exports)),Vk.exports}var F4,Zee;function V7(){if(Zee)return F4;Zee=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return F4=t,F4}var $4,Qee;function z7(){if(Qee)return $4;Qee=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return $4=e,$4}var B4,Jee;function z6e(){if(Jee)return B4;Jee=1;var n=Qg(),e=z7(),t=Jg(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",f="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",k="[object Int32Array]",M="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",L={};L[_]=L[T]=L[A]=L[C]=L[k]=L[M]=L[P]=L[O]=L[j]=!0,L[r]=L[i]=L[y]=L[a]=L[w]=L[o]=L[s]=L[l]=L[c]=L[u]=L[d]=L[h]=L[f]=L[m]=L[v]=!1;function B($){return t($)&&e($.length)&&!!L[n($)]}return B4=B,B4}var U4,ete;function R0e(){if(ete)return U4;ete=1;function n(e){return function(t){return e(t)}}return U4=n,U4}var zk={exports:{}};zk.exports;var tte;function H6e(){return tte||(tte=1,function(n,e){var t=e0e(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,o=a&&t.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=s}(zk,zk.exports)),zk.exports}var V4,nte;function N0e(){if(nte)return V4;nte=1;var n=z6e(),e=R0e(),t=H6e(),r=t&&t.isTypedArray,i=r?e(r):n;return V4=i,V4}var z4,rte;function G6e(){if(rte)return z4;rte=1;var n=B6e(),e=U7(),t=Zl(),r=O0e(),i=V7(),a=N0e(),o=Object.prototype,s=o.hasOwnProperty;function l(c,u){var d=t(c),h=!d&&e(c),f=!d&&!h&&r(c),m=!d&&!h&&!f&&a(c),v=d||h||f||m,y=v?n(c.length,String):[],w=y.length;for(var _ in c)(u||s.call(c,_))&&!(v&&(_=="length"||f&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,w)))&&y.push(_);return y}return z4=l,z4}var H4,ite;function q6e(){if(ite)return H4;ite=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return H4=e,H4}var G4,ate;function L0e(){if(ate)return G4;ate=1;function n(e,t){return function(r){return e(t(r))}}return G4=n,G4}var q4,ote;function W6e(){if(ote)return q4;ote=1;var n=L0e(),e=n(Object.keys,Object);return q4=e,q4}var W4,ste;function Y6e(){if(ste)return W4;ste=1;var n=q6e(),e=W6e(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return W4=i,W4}var Y4,lte;function aM(){if(lte)return Y4;lte=1;var n=k7(),e=z7();function t(r){return r!=null&&e(r.length)&&!n(r)}return Y4=t,Y4}var K4,cte;function Pj(){if(cte)return K4;cte=1;var n=G6e(),e=Y6e(),t=aM();function r(i){return t(i)?n(i):e(i)}return K4=r,K4}var X4,ute;function K6e(){if(ute)return X4;ute=1;var n=L6e(),e=$6e(),t=Pj();function r(i){return n(i,t,e)}return X4=r,X4}var Z4,dte;function X6e(){if(dte)return Z4;dte=1;var n=K6e(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,o,s,l,c,u){var d=s&e,h=n(a),f=h.length,m=n(o),v=m.length;if(f!=v&&!d)return!1;for(var y=f;y--;){var w=h[y];if(!(d?w in o:r.call(o,w)))return!1}var _=u.get(a),T=u.get(o);if(_&&T)return _==o&&T==a;var A=!0;u.set(a,o),u.set(o,a);for(var C=d;++y<f;){w=h[y];var k=a[w],M=o[w];if(l)var P=d?l(M,k,w,o,a,u):l(k,M,w,a,o,u);if(!(P===void 0?k===M||c(k,M,s,l,u):P)){A=!1;break}C||(C=w=="constructor")}if(A&&!C){var O=a.constructor,j=o.constructor;O!=j&&"constructor"in a&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof j=="function"&&j instanceof j)&&(A=!1)}return u.delete(a),u.delete(o),A}return Z4=i,Z4}var Q4,hte;function Z6e(){if(hte)return Q4;hte=1;var n=nx(),e=qf(),t=n(e,"DataView");return Q4=t,Q4}var J4,fte;function Q6e(){if(fte)return J4;fte=1;var n=nx(),e=qf(),t=n(e,"Promise");return J4=t,J4}var e$,pte;function j0e(){if(pte)return e$;pte=1;var n=nx(),e=qf(),t=n(e,"Set");return e$=t,e$}var t$,gte;function J6e(){if(gte)return t$;gte=1;var n=nx(),e=qf(),t=n(e,"WeakMap");return t$=t,t$}var n$,mte;function eVe(){if(mte)return n$;mte=1;var n=Z6e(),e=D7(),t=Q6e(),r=j0e(),i=J6e(),a=Qg(),o=t0e(),s="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",d="[object WeakMap]",h="[object DataView]",f=o(n),m=o(e),v=o(t),y=o(r),w=o(i),_=a;return(n&&_(new n(new ArrayBuffer(1)))!=h||e&&_(new e)!=s||t&&_(t.resolve())!=c||r&&_(new r)!=u||i&&_(new i)!=d)&&(_=function(T){var A=a(T),C=A==l?T.constructor:void 0,k=C?o(C):"";if(k)switch(k){case f:return h;case m:return s;case v:return c;case y:return u;case w:return d}return A}),n$=_,n$}var r$,vte;function tVe(){if(vte)return r$;vte=1;var n=k0e(),e=M0e(),t=N6e(),r=X6e(),i=eVe(),a=Zl(),o=O0e(),s=N0e(),l=1,c="[object Arguments]",u="[object Array]",d="[object Object]",h=Object.prototype,f=h.hasOwnProperty;function m(v,y,w,_,T,A){var C=a(v),k=a(y),M=C?u:i(v),P=k?u:i(y);M=M==c?d:M,P=P==c?d:P;var O=M==d,j=P==d,L=M==P;if(L&&o(v)){if(!o(y))return!1;C=!0,O=!1}if(L&&!O)return A||(A=new n),C||s(v)?e(v,y,w,_,T,A):t(v,y,M,w,_,T,A);if(!(w&l)){var B=O&&f.call(v,"__wrapped__"),$=j&&f.call(y,"__wrapped__");if(B||$){var Y=B?v.value():v,G=$?y.value():y;return A||(A=new n),T(Y,G,w,_,A)}}return L?(A||(A=new n),r(v,y,w,_,T,A)):!1}return r$=m,r$}var i$,yte;function H7(){if(yte)return i$;yte=1;var n=tVe(),e=Jg();function t(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,o,t,s)}return i$=t,i$}var a$,bte;function nVe(){if(bte)return a$;bte=1;var n=k0e(),e=H7(),t=1,r=2;function i(a,o,s,l){var c=s.length,u=c,d=!l;if(a==null)return!u;for(a=Object(a);c--;){var h=s[c];if(d&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<u;){h=s[c];var f=h[0],m=a[f],v=h[1];if(d&&h[2]){if(m===void 0&&!(f in a))return!1}else{var y=new n;if(l)var w=l(m,v,f,a,o,y);if(!(w===void 0?e(v,m,t|r,l,y):w))return!1}}return!0}return a$=i,a$}var o$,wte;function F0e(){if(wte)return o$;wte=1;var n=Iy();function e(t){return t===t&&!n(t)}return o$=e,o$}var s$,xte;function rVe(){if(xte)return s$;xte=1;var n=F0e(),e=Pj();function t(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,n(s)]}return i}return s$=t,s$}var l$,_te;function $0e(){if(_te)return l$;_te=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return l$=n,l$}var c$,Ste;function iVe(){if(Ste)return c$;Ste=1;var n=nVe(),e=rVe(),t=$0e();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(o){return o===i||n(o,i,a)}}return c$=r,c$}var u$,Tte;function aVe(){if(Tte)return u$;Tte=1;function n(e,t){return e!=null&&t in Object(e)}return u$=n,u$}var d$,Ete;function oVe(){if(Ete)return d$;Ete=1;var n=i0e(),e=U7(),t=Zl(),r=V7(),i=z7(),a=Aj();function o(s,l,c){l=n(l,s);for(var u=-1,d=l.length,h=!1;++u<d;){var f=a(l[u]);if(!(h=s!=null&&c(s,f)))break;s=s[f]}return h||++u!=d?h:(d=s==null?0:s.length,!!d&&i(d)&&r(f,d)&&(t(s)||e(s)))}return d$=o,d$}var h$,Ate;function sVe(){if(Ate)return h$;Ate=1;var n=aVe(),e=oVe();function t(r,i){return r!=null&&e(r,i,n)}return h$=t,h$}var f$,kte;function lVe(){if(kte)return f$;kte=1;var n=H7(),e=a0e(),t=sVe(),r=A7(),i=F0e(),a=$0e(),o=Aj(),s=1,l=2;function c(u,d){return r(u)&&i(d)?a(o(u),d):function(h){var f=e(h,u);return f===void 0&&f===d?t(h,u):n(d,f,s|l)}}return f$=c,f$}var p$,Cte;function MT(){if(Cte)return p$;Cte=1;function n(e){return e}return p$=n,p$}var g$,Dte;function cVe(){if(Dte)return g$;Dte=1;function n(e){return function(t){return t==null?void 0:t[e]}}return g$=n,g$}var m$,Ite;function uVe(){if(Ite)return m$;Ite=1;var n=P7();function e(t){return function(r){return n(r,t)}}return m$=e,m$}var v$,Mte;function dVe(){if(Mte)return v$;Mte=1;var n=cVe(),e=uVe(),t=A7(),r=Aj();function i(a){return t(a)?n(r(a)):e(a)}return v$=i,v$}var y$,Pte;function My(){if(Pte)return y$;Pte=1;var n=iVe(),e=lVe(),t=MT(),r=Zl(),i=dVe();function a(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?e(o[0],o[1]):n(o):i(o)}return y$=a,y$}var b$,Ote;function B0e(){if(Ote)return b$;Ote=1;function n(e,t,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}return b$=n,b$}var w$,Rte;function hVe(){if(Rte)return w$;Rte=1;function n(e){return e!==e}return w$=n,w$}var x$,Nte;function fVe(){if(Nte)return x$;Nte=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return x$=n,x$}var _$,Lte;function pVe(){if(Lte)return _$;Lte=1;var n=B0e(),e=hVe(),t=fVe();function r(i,a,o){return a===a?t(i,a,o):n(i,e,o)}return _$=r,_$}var S$,jte;function gVe(){if(jte)return S$;jte=1;var n=pVe();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return S$=e,S$}var T$,Fte;function mVe(){if(Fte)return T$;Fte=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return T$=n,T$}var E$,$te;function vVe(){if($te)return E$;$te=1;function n(){}return E$=n,E$}var A$,Bte;function yVe(){if(Bte)return A$;Bte=1;var n=j0e(),e=vVe(),t=B7(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return A$=i,A$}var k$,Ute;function bVe(){if(Ute)return k$;Ute=1;var n=C0e(),e=gVe(),t=mVe(),r=I0e(),i=yVe(),a=B7(),o=200;function s(l,c,u){var d=-1,h=e,f=l.length,m=!0,v=[],y=v;if(u)m=!1,h=t;else if(f>=o){var w=c?null:i(l);if(w)return a(w);m=!1,h=r,y=new n}else y=c?[]:v;e:for(;++d<f;){var _=l[d],T=c?c(_):_;if(_=u||_!==0?_:0,m&&T===T){for(var A=y.length;A--;)if(y[A]===T)continue e;c&&y.push(T),v.push(_)}else h(y,T,u)||(y!==v&&y.push(T),v.push(_))}return v}return k$=s,k$}var C$,Vte;function wVe(){if(Vte)return C$;Vte=1;var n=My(),e=bVe();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return C$=t,C$}var xVe=wVe();const zte=kr(xVe);function U0e(n,e,t){return e===!0?zte(n,t):or(e)?zte(n,e):n}function V1(n){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V1(n)}var _Ve=["ref"];function Hte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hte(Object(t),!0).forEach(function(r){Oj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function SVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Gte(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,z0e(r.key),r)}}function TVe(n,e,t){return e&&Gte(n.prototype,e),t&&Gte(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function EVe(n,e,t){return e=GN(e),AVe(n,V0e()?Reflect.construct(e,t||[],GN(n).constructor):e.apply(n,t))}function AVe(n,e){if(e&&(V1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kVe(n)}function kVe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function V0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V0e=function(){return!!n})()}function GN(n){return GN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GN(n)}function CVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&o9(n,e)}function o9(n,e){return o9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o9(n,e)}function Oj(n,e,t){return e=z0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z0e(n){var e=DVe(n,"string");return V1(e)=="symbol"?e:e+""}function DVe(n,e){if(V1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(V1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function IVe(n,e){if(n==null)return{};var t=MVe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function MVe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function PVe(n){return n.value}function OVe(n,e){if(ve.isValidElement(n))return ve.cloneElement(n,e);if(typeof n=="function")return ve.createElement(n,e);e.ref;var t=IVe(e,_Ve);return ve.createElement($7,t)}var qte=1,d1=function(n){function e(){var t;SVe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=EVe(this,e,[].concat(i)),Oj(t,"lastBoundingBox",{width:-1,height:-1}),t}return CVe(e,n),TVe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>qte||Math.abs(i.height-this.lastBoundingBox.height)>qte)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wp({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var f=this.getBBoxSnapshot();d={left:((c||0)-f.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((u||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Wp(Wp({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=Wp(Wp({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return ve.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(f){r.wrapperNode=f}},OVe(a,Wp(Wp({},this.props),{},{payload:U0e(u,c,PVe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Wp(Wp({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&mt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(K.PureComponent);Oj(d1,"displayName","Legend");Oj(d1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var D$,Wte;function RVe(){if(Wte)return D$;Wte=1;var n=rM(),e=U7(),t=Zl(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return D$=i,D$}var I$,Yte;function H0e(){if(Yte)return I$;Yte=1;var n=P0e(),e=RVe();function t(r,i,a,o,s){var l=-1,c=r.length;for(a||(a=e),s||(s=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?t(u,i-1,a,o,s):n(s,u):o||(s[s.length]=u)}return s}return I$=t,I$}var M$,Kte;function NVe(){if(Kte)return M$;Kte=1;function n(e){return function(t,r,i){for(var a=-1,o=Object(t),s=i(t),l=s.length;l--;){var c=s[e?l:++a];if(r(o[c],c,o)===!1)break}return t}}return M$=n,M$}var P$,Xte;function LVe(){if(Xte)return P$;Xte=1;var n=NVe(),e=n();return P$=e,P$}var O$,Zte;function G0e(){if(Zte)return O$;Zte=1;var n=LVe(),e=Pj();function t(r,i){return r&&n(r,i,e)}return O$=t,O$}var R$,Qte;function jVe(){if(Qte)return R$;Qte=1;var n=aM();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return R$=e,R$}var N$,Jte;function G7(){if(Jte)return N$;Jte=1;var n=G0e(),e=jVe(),t=e(n);return N$=t,N$}var L$,ene;function q0e(){if(ene)return L$;ene=1;var n=G7(),e=aM();function t(r,i){var a=-1,o=e(r)?Array(r.length):[];return n(r,function(s,l,c){o[++a]=i(s,l,c)}),o}return L$=t,L$}var j$,tne;function FVe(){if(tne)return j$;tne=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return j$=n,j$}var F$,nne;function $Ve(){if(nne)return F$;nne=1;var n=DT();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,o=t===t,s=n(t),l=r!==void 0,c=r===null,u=r===r,d=n(r);if(!c&&!d&&!s&&t>r||s&&l&&u&&!c&&!d||a&&l&&u||!i&&u||!o)return 1;if(!a&&!s&&!d&&t<r||d&&i&&o&&!a&&!s||c&&i&&o||!l&&o||!u)return-1}return 0}return F$=e,F$}var $$,rne;function BVe(){if(rne)return $$;rne=1;var n=$Ve();function e(t,r,i){for(var a=-1,o=t.criteria,s=r.criteria,l=o.length,c=i.length;++a<l;){var u=n(o[a],s[a]);if(u){if(a>=c)return u;var d=i[a];return u*(d=="desc"?-1:1)}}return t.index-r.index}return $$=e,$$}var B$,ine;function UVe(){if(ine)return B$;ine=1;var n=M7(),e=P7(),t=My(),r=q0e(),i=FVe(),a=R0e(),o=BVe(),s=MT(),l=Zl();function c(u,d,h){d.length?d=n(d,function(v){return l(v)?function(y){return e(y,v.length===1?v[0]:v)}:v}):d=[s];var f=-1;d=n(d,a(t));var m=r(u,function(v,y,w){var _=n(d,function(T){return T(v)});return{criteria:_,index:++f,value:v}});return i(m,function(v,y){return o(v,y,h)})}return B$=c,B$}var U$,ane;function VVe(){if(ane)return U$;ane=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return U$=n,U$}var V$,one;function zVe(){if(one)return V$;one=1;var n=VVe(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),c=Array(l);++s<l;)c[s]=o[i+s];s=-1;for(var u=Array(i+1);++s<i;)u[s]=o[s];return u[i]=a(c),n(r,this,u)}}return V$=t,V$}var z$,sne;function HVe(){if(sne)return z$;sne=1;function n(e){return function(){return e}}return z$=n,z$}var H$,lne;function W0e(){if(lne)return H$;lne=1;var n=nx(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return H$=e,H$}var G$,cne;function GVe(){if(cne)return G$;cne=1;var n=HVe(),e=W0e(),t=MT(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return G$=r,G$}var q$,une;function qVe(){if(une)return q$;une=1;var n=800,e=16,t=Date.now;function r(i){var a=0,o=0;return function(){var s=t(),l=e-(s-o);if(o=s,l>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return q$=r,q$}var W$,dne;function WVe(){if(dne)return W$;dne=1;var n=GVe(),e=qVe(),t=e(n);return W$=t,W$}var Y$,hne;function YVe(){if(hne)return Y$;hne=1;var n=MT(),e=zVe(),t=WVe();function r(i,a){return t(e(i,a,n),i+"")}return Y$=r,Y$}var K$,fne;function Rj(){if(fne)return K$;fne=1;var n=C7(),e=aM(),t=V7(),r=Iy();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&t(o,s.length):l=="string"&&o in s)?n(s[o],a):!1}return K$=i,K$}var X$,pne;function KVe(){if(pne)return X$;pne=1;var n=H0e(),e=UVe(),t=YVe(),r=Rj(),i=t(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,n(o,1),[])});return X$=i,X$}var XVe=KVe();const q7=kr(XVe);function yD(n){"@babel/helpers - typeof";return yD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yD(n)}function s9(){return s9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s9.apply(this,arguments)}function ZVe(n,e){return tze(n)||eze(n,e)||JVe(n,e)||QVe()}function QVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JVe(n,e){if(n){if(typeof n=="string")return gne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gne(n,e)}}function gne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function eze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function tze(n){if(Array.isArray(n))return n}function mne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Z$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mne(Object(t),!0).forEach(function(r){nze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nze(n,e,t){return e=rze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rze(n){var e=ize(n,"string");return yD(e)=="symbol"?e:e+""}function ize(n,e){if(yD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function aze(n){return Array.isArray(n)&&lo(n[0])&&lo(n[1])?n.join(" ~ "):n}var oze=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,m=e.labelClassName,v=e.label,y=e.labelFormatter,w=e.accessibilityLayer,_=w===void 0?!1:w,T=function(){if(u&&u.length){var B={padding:0,margin:0},$=(h?q7(u,h):u).map(function(Y,G){if(Y.type==="none")return null;var W=Z$({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},s),X=Y.formatter||d||aze,te=Y.value,re=Y.name,z=te,ae=re;if(X&&z!=null&&ae!=null){var le=X(te,re,Y,G,u);if(Array.isArray(le)){var ee=ZVe(le,2);z=ee[0],ae=ee[1]}else z=le}return ve.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:W},lo(ae)?ve.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,lo(ae)?ve.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ve.createElement("span",{className:"recharts-tooltip-item-value"},z),ve.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return ve.createElement("ul",{className:"recharts-tooltip-item-list",style:B},$)}return null},A=Z$({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),C=Z$({margin:0},c),k=!Xr(v),M=k?v:"",P=Pr("recharts-default-tooltip",f),O=Pr("recharts-tooltip-label",m);k&&y&&u!==void 0&&u!==null&&(M=y(v,u));var j=_?{role:"status","aria-live":"assertive"}:{};return ve.createElement("div",s9({className:P,style:A},j),ve.createElement("p",{className:O,style:C},ve.isValidElement(M)?M:"".concat(M)),T())};function bD(n){"@babel/helpers - typeof";return bD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bD(n)}function HP(n,e,t){return e=sze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sze(n){var e=lze(n,"string");return bD(e)=="symbol"?e:e+""}function lze(n,e){if(bD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(bD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var UA="recharts-tooltip-wrapper",cze={visibility:"hidden"};function uze(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return Pr(UA,HP(HP(HP(HP({},"".concat(UA,"-right"),mt(t)&&e&&mt(e.x)&&t>=e.x),"".concat(UA,"-left"),mt(t)&&e&&mt(e.x)&&t<e.x),"".concat(UA,"-bottom"),mt(r)&&e&&mt(e.y)&&r>=e.y),"".concat(UA,"-top"),mt(r)&&e&&mt(e.y)&&r<e.y))}function vne(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,o=n.reverseDirection,s=n.tooltipDimension,l=n.viewBox,c=n.viewBoxDimension;if(a&&mt(a[r]))return a[r];var u=t[r]-s-i,d=t[r]+i;if(e[r])return o[r]?u:d;if(o[r]){var h=u,f=l[r];return h<f?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+s,v=l[r]+c;return m>v?Math.max(u,l[r]):Math.max(d,l[r])}function dze(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function hze(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,o=n.tooltipBox,s=n.useTranslate3d,l=n.viewBox,c,u,d;return o.height>0&&o.width>0&&t?(u=vne({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=vne({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=dze({translateX:u,translateY:d,useTranslate3d:s})):c=cze,{cssProperties:c,cssClasses:uze({translateX:u,translateY:d,coordinate:t})}}function z1(n){"@babel/helpers - typeof";return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z1(n)}function yne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yne(Object(t),!0).forEach(function(r){c9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fze(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pze(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,K0e(r.key),r)}}function gze(n,e,t){return e&&pze(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function mze(n,e,t){return e=qN(e),vze(n,Y0e()?Reflect.construct(e,t||[],qN(n).constructor):e.apply(n,t))}function vze(n,e){if(e&&(z1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yze(n)}function yze(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Y0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y0e=function(){return!!n})()}function qN(n){return qN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qN(n)}function bze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&l9(n,e)}function l9(n,e){return l9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l9(n,e)}function c9(n,e,t){return e=K0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K0e(n){var e=wze(n,"string");return z1(e)=="symbol"?e:e+""}function wze(n,e){if(z1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(z1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var wne=1,xze=function(n){function e(){var t;fze(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=mze(this,e,[].concat(i)),c9(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),c9(t,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,u;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=t.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),t}return bze(e,n),gze(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wne||Math.abs(r.height-this.state.lastBoundingBox.height)>wne)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,f=i.offset,m=i.position,v=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,_=i.wrapperStyle,T=hze({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:m,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),A=T.cssClasses,C=T.cssProperties,k=bne(bne({transition:h&&a?"transform ".concat(s,"ms ").concat(l):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return ve.createElement("div",{tabIndex:-1,className:A,style:k,ref:function(P){r.wrapperNode=P}},c)}}])}(K.PureComponent),_ze=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},oM={isSsr:_ze()};function H1(n){"@babel/helpers - typeof";return H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H1(n)}function xne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _ne(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xne(Object(t),!0).forEach(function(r){W7(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):xne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Sze(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Tze(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Z0e(r.key),r)}}function Eze(n,e,t){return e&&Tze(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Aze(n,e,t){return e=WN(e),kze(n,X0e()?Reflect.construct(e,t||[],WN(n).constructor):e.apply(n,t))}function kze(n,e){if(e&&(H1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cze(n)}function Cze(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function X0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X0e=function(){return!!n})()}function WN(n){return WN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WN(n)}function Dze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&u9(n,e)}function u9(n,e){return u9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u9(n,e)}function W7(n,e,t){return e=Z0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z0e(n){var e=Ize(n,"string");return H1(e)=="symbol"?e:e+""}function Ize(n,e){if(H1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(H1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Mze(n){return n.dataKey}function Pze(n,e){return ve.isValidElement(n)?ve.cloneElement(n,e):typeof n=="function"?ve.createElement(n,e):ve.createElement(oze,e)}var Vd=function(n){function e(){return Sze(this,e),Aze(this,e,arguments)}return Dze(e,n),Eze(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,f=i.offset,m=i.payload,v=i.payloadUniqBy,y=i.position,w=i.reverseDirection,_=i.useTranslate3d,T=i.viewBox,A=i.wrapperStyle,C=m??[];d&&C.length&&(C=U0e(m.filter(function(M){return M.value!=null&&(M.hide!==!0||r.props.includeHidden)}),v,Mze));var k=C.length>0;return ve.createElement(xze,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:a,coordinate:u,hasPayload:k,offset:f,position:y,reverseDirection:w,useTranslate3d:_,viewBox:T,wrapperStyle:A},Pze(c,_ne(_ne({},this.props),{},{payload:C})))}}])}(K.PureComponent);W7(Vd,"displayName","Tooltip");W7(Vd,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!oM.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Q$,Sne;function Oze(){if(Sne)return Q$;Sne=1;var n=qf(),e=function(){return n.Date.now()};return Q$=e,Q$}var J$,Tne;function Rze(){if(Tne)return J$;Tne=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return J$=e,J$}var eB,Ene;function Nze(){if(Ene)return eB;Ene=1;var n=Rze(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return eB=t,eB}var tB,Ane;function Q0e(){if(Ane)return tB;Ane=1;var n=Nze(),e=Iy(),t=DT(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(t(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=n(c);var d=a.test(c);return d||o.test(c)?s(c.slice(2),d?2:8):i.test(c)?r:+c}return tB=l,tB}var nB,kne;function Lze(){if(kne)return nB;kne=1;var n=Iy(),e=Oze(),t=Q0e(),r="Expected a function",i=Math.max,a=Math.min;function o(s,l,c){var u,d,h,f,m,v,y=0,w=!1,_=!1,T=!0;if(typeof s!="function")throw new TypeError(r);l=t(l)||0,n(c)&&(w=!!c.leading,_="maxWait"in c,h=_?i(t(c.maxWait)||0,l):h,T="trailing"in c?!!c.trailing:T);function A($){var Y=u,G=d;return u=d=void 0,y=$,f=s.apply(G,Y),f}function C($){return y=$,m=setTimeout(P,l),w?A($):f}function k($){var Y=$-v,G=$-y,W=l-Y;return _?a(W,h-G):W}function M($){var Y=$-v,G=$-y;return v===void 0||Y>=l||Y<0||_&&G>=h}function P(){var $=e();if(M($))return O($);m=setTimeout(P,k($))}function O($){return m=void 0,T&&u?A($):(u=d=void 0,f)}function j(){m!==void 0&&clearTimeout(m),y=0,u=v=d=m=void 0}function L(){return m===void 0?f:O(e())}function B(){var $=e(),Y=M($);if(u=arguments,d=this,v=$,Y){if(m===void 0)return C(v);if(_)return clearTimeout(m),m=setTimeout(P,l),A(v)}return m===void 0&&(m=setTimeout(P,l)),f}return B.cancel=j,B.flush=L,B}return nB=o,nB}var rB,Cne;function jze(){if(Cne)return rB;Cne=1;var n=Lze(),e=Iy(),t="Expected a function";function r(i,a,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(t);return e(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),n(i,a,{leading:s,maxWait:a,trailing:l})}return rB=r,rB}var Fze=jze();const J0e=kr(Fze);function wD(n){"@babel/helpers - typeof";return wD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wD(n)}function Dne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dne(Object(t),!0).forEach(function(r){$ze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Dne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $ze(n,e,t){return e=Bze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Bze(n){var e=Uze(n,"string");return wD(e)=="symbol"?e:e+""}function Uze(n,e){if(wD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Vze(n,e){return qze(n)||Gze(n,e)||Hze(n,e)||zze()}function zze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hze(n,e){if(n){if(typeof n=="string")return Ine(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ine(n,e)}}function Ine(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Gze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function qze(n){if(Array.isArray(n))return n}var ebe=K.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,o=a===void 0?"100%":a,s=n.height,l=s===void 0?"100%":s,c=n.minWidth,u=c===void 0?0:c,d=n.minHeight,h=n.maxHeight,f=n.children,m=n.debounce,v=m===void 0?0:m,y=n.id,w=n.className,_=n.onResize,T=n.style,A=T===void 0?{}:T,C=K.useRef(null),k=K.useRef();k.current=_,K.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var M=K.useState({containerWidth:i.width,containerHeight:i.height}),P=Vze(M,2),O=P[0],j=P[1],L=K.useCallback(function($,Y){j(function(G){var W=Math.round($),X=Math.round(Y);return G.containerWidth===W&&G.containerHeight===X?G:{containerWidth:W,containerHeight:X}})},[]);K.useEffect(function(){var $=function(re){var z,ae=re[0].contentRect,le=ae.width,ee=ae.height;L(le,ee),(z=k.current)===null||z===void 0||z.call(k,le,ee)};v>0&&($=J0e($,v,{trailing:!0,leading:!1}));var Y=new ResizeObserver($),G=C.current.getBoundingClientRect(),W=G.width,X=G.height;return L(W,X),Y.observe(C.current),function(){Y.disconnect()}},[L,v]);var B=K.useMemo(function(){var $=O.containerWidth,Y=O.containerHeight;if($<0||Y<0)return null;_g(tw(o)||tw(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),_g(!t||t>0,"The aspect(%s) must be greater than zero.",t);var G=tw(o)?$:o,W=tw(l)?Y:l;t&&t>0&&(G?W=G/t:W&&(G=W*t),h&&W>h&&(W=h)),_g(G>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,W,o,l,u,d,t);var X=!Array.isArray(f)&&xg(f.type).endsWith("Chart");return ve.Children.map(f,function(te){return ve.isValidElement(te)?K.cloneElement(te,GP({width:G,height:W},X?{style:GP({height:"100%",width:"100%",maxHeight:W,maxWidth:G},te.props.style)}:{})):te})},[t,f,l,h,d,u,O,o]);return ve.createElement("div",{id:y?"".concat(y):void 0,className:Pr("recharts-responsive-container",w),style:GP(GP({},A),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:C},B)}),Nj=function(e){return null};Nj.displayName="Cell";function xD(n){"@babel/helpers - typeof";return xD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xD(n)}function Mne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function d9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mne(Object(t),!0).forEach(function(r){Wze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wze(n,e,t){return e=Yze(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yze(n){var e=Kze(n,"string");return xD(e)=="symbol"?e:e+""}function Kze(n,e){if(xD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var H_={widthCache:{},cacheCount:0},Xze=2e3,Zze={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Pne="recharts_measurement_span";function Qze(n){var e=d9({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var bC=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||oM.isSsr)return{width:0,height:0};var r=Qze(t),i=JSON.stringify({text:e,copyStyle:r});if(H_.widthCache[i])return H_.widthCache[i];try{var a=document.getElementById(Pne);a||(a=document.createElement("span"),a.setAttribute("id",Pne),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=d9(d9({},Zze),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return H_.widthCache[i]=l,++H_.cacheCount>Xze&&(H_.cacheCount=0,H_.widthCache={}),l}catch{return{width:0,height:0}}},Jze=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function _D(n){"@babel/helpers - typeof";return _D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_D(n)}function YN(n,e){return r9e(n)||n9e(n,e)||t9e(n,e)||e9e()}function e9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t9e(n,e){if(n){if(typeof n=="string")return One(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return One(n,e)}}function One(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function n9e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function r9e(n){if(Array.isArray(n))return n}function i9e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Rne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,o9e(r.key),r)}}function a9e(n,e,t){return e&&Rne(n.prototype,e),t&&Rne(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function o9e(n){var e=s9e(n,"string");return _D(e)=="symbol"?e:e+""}function s9e(n,e){if(_D(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(_D(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Nne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Lne=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,l9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,c9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tbe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},u9e=Object.keys(tbe),WS="NaN";function d9e(n,e){return n*tbe[e]}var qP=function(){function n(e,t){i9e(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!l9e.test(t)&&(this.num=NaN,this.unit=""),u9e.includes(t)&&(this.num=d9e(e,t),this.unit="px")}return a9e(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=c9e.exec(t))!==null&&r!==void 0?r:[],a=YN(i,3),o=a[1],s=a[2];return new n(parseFloat(o),s??"")}}])}();function nbe(n){if(n.includes(WS))return WS;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=Nne.exec(e))!==null&&t!==void 0?t:[],i=YN(r,4),a=i[1],o=i[2],s=i[3],l=qP.parse(a??""),c=qP.parse(s??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return WS;e=e.replace(Nne,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=Lne.exec(e))!==null&&d!==void 0?d:[],f=YN(h,4),m=f[1],v=f[2],y=f[3],w=qP.parse(m??""),_=qP.parse(y??""),T=v==="+"?w.add(_):w.subtract(_);if(T.isNaN())return WS;e=e.replace(Lne,T.toString())}return e}var jne=/\(([^()]*)\)/;function h9e(n){for(var e=n;e.includes("(");){var t=jne.exec(e),r=YN(t,2),i=r[1];e=e.replace(jne,nbe(i))}return e}function f9e(n){var e=n.replace(/\s+/g,"");return e=h9e(e),e=nbe(e),e}function p9e(n){try{return f9e(n)}catch{return WS}}function iB(n){var e=p9e(n.slice(5,-1));return e===WS?"":e}var g9e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],m9e=["dx","dy","angle","className","breakAll"];function h9(){return h9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h9.apply(this,arguments)}function Fne(n,e){if(n==null)return{};var t=v9e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function v9e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function $ne(n,e){return x9e(n)||w9e(n,e)||b9e(n,e)||y9e()}function y9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b9e(n,e){if(n){if(typeof n=="string")return Bne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bne(n,e)}}function Bne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function w9e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function x9e(n){if(Array.isArray(n))return n}var rbe=/[ \f\n\r\t\v\u2028\u2029]+/,ibe=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];Xr(t)||(r?a=t.toString().split(""):a=t.toString().split(rbe));var o=a.map(function(l){return{word:l,width:bC(l,i).width}}),s=r?0:bC(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},_9e=function(e,t,r,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=mt(o),d=s,h=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(W,X){var te=X.word,re=X.width,z=W[W.length-1];if(z&&(i==null||a||z.width+re+r<Number(i)))z.words.push(te),z.width+=re+r;else{var ae={words:[te],width:re};W.push(ae)}return W},[])},f=h(t),m=function(G){return G.reduce(function(W,X){return W.width>X.width?W:X})};if(!u)return f;for(var v="…",y=function(G){var W=d.slice(0,G),X=ibe({breakAll:c,style:l,children:W+v}).wordsWithComputedWidth,te=h(X),re=te.length>o||m(te).width>Number(i);return[re,te]},w=0,_=d.length-1,T=0,A;w<=_&&T<=d.length-1;){var C=Math.floor((w+_)/2),k=C-1,M=y(k),P=$ne(M,2),O=P[0],j=P[1],L=y(C),B=$ne(L,1),$=B[0];if(!O&&!$&&(w=C+1),O&&$&&(_=C-1),!O&&$){A=j;break}T++}return A||f},Une=function(e){var t=Xr(e)?[]:e.toString().split(rbe);return[{words:t}]},S9e=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((t||r)&&!oM.isSsr){var l,c,u=ibe({breakAll:o,children:i,style:a});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return Une(i);return _9e({breakAll:o,children:i,maxLines:s,style:a},l,c,t,r)}return Une(i)},Vne="#808080",KN=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,f=h===void 0?"start":h,m=e.verticalAnchor,v=m===void 0?"end":m,y=e.fill,w=y===void 0?Vne:y,_=Fne(e,g9e),T=K.useMemo(function(){return S9e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),A=_.dx,C=_.dy,k=_.angle,M=_.className,P=_.breakAll,O=Fne(_,m9e);if(!lo(r)||!lo(a))return null;var j=r+(mt(A)?A:0),L=a+(mt(C)?C:0),B;switch(v){case"start":B=iB("calc(".concat(c,")"));break;case"middle":B=iB("calc(".concat((T.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:B=iB("calc(".concat(T.length-1," * -").concat(s,")"));break}var $=[];if(d){var Y=T[0].width,G=_.width;$.push("scale(".concat((mt(G)?G/Y:1)/Y,")"))}return k&&$.push("rotate(".concat(k,", ").concat(j,", ").concat(L,")")),$.length&&(O.transform=$.join(" ")),ve.createElement("text",h9({},Ur(O,!0),{x:j,y:L,className:Pr("recharts-text",M),textAnchor:f,fill:w.includes("url")?Vne:w}),T.map(function(W,X){var te=W.words.join(P?"":" ");return ve.createElement("tspan",{x:j,dy:X===0?B:s,key:"".concat(te,"-").concat(X)},te)}))};function iy(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function T9e(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Y7(n){let e,t,r;n.length!==2?(e=iy,t=(s,l)=>iy(n(s),l),r=(s,l)=>n(s)-l):(e=n===iy||n===T9e?n:E9e,t=n,r=n);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){const d=i(s,l,c,u-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function E9e(){return 0}function abe(n){return n===null?NaN:+n}function*A9e(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const k9e=Y7(iy),sM=k9e.right;Y7(abe).center;class zne extends Map{constructor(e,t=I9e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Hne(this,e))}has(e){return super.has(Hne(this,e))}set(e,t){return super.set(C9e(this,e),t)}delete(e){return super.delete(D9e(this,e))}}function Hne({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function C9e({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function D9e({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function I9e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function M9e(n=iy){if(n===iy)return obe;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function obe(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const P9e=Math.sqrt(50),O9e=Math.sqrt(10),R9e=Math.sqrt(2);function XN(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=P9e?10:a>=O9e?5:a>=R9e?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(n*c),l=Math.round(e*c),s/c<n&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(n/c),l=Math.round(e/c),s*c<n&&++s,l*c>e&&--l),l<s&&.5<=t&&t<2?XN(n,e,t*2):[s,l,c]}function f9(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,o]=r?XN(e,n,t):XN(n,e,t);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function p9(n,e,t){return e=+e,n=+n,t=+t,XN(n,e,t)[2]}function g9(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?p9(e,n,t):p9(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Gne(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function qne(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function sbe(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?obe:M9e(i);r>t;){if(r-t>600){const l=r-t+1,c=e-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));sbe(n,e,f,m,i)}const a=n[e];let o=t,s=r;for(VA(n,t,e),i(n[r],a)>0&&VA(n,t,r);o<s;){for(VA(n,o,s),++o,--s;i(n[o],a)<0;)++o;for(;i(n[s],a)>0;)--s}i(n[t],a)===0?VA(n,t,s):(++s,VA(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}return n}function VA(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function N9e(n,e,t){if(n=Float64Array.from(A9e(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return qne(n);if(e>=1)return Gne(n);var r,i=(r-1)*e,a=Math.floor(i),o=Gne(sbe(n,a).subarray(0,a+1)),s=qne(n.subarray(a+1));return o+(s-o)*(i-a)}}function L9e(n,e,t=abe){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),o=+t(n[a],a,n),s=+t(n[a+1],a+1,n);return o+(s-o)*(i-a)}}function j9e(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Ku(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function em(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const m9=Symbol("implicit");function K7(){var n=new zne,e=[],t=[],r=m9;function i(a){let o=n.get(a);if(o===void 0){if(r!==m9)return r;n.set(a,o=e.push(a)-1)}return t[o%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new zne;for(const o of a)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return K7(e,t).unknown(r)},Ku.apply(i,arguments),i}function SD(){var n=K7().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete n.unknown;function d(){var h=e().length,f=i<r,m=f?i:r,v=f?r:i;a=(v-m)/Math.max(1,h-l+c*2),s&&(a=Math.floor(a)),m+=(v-m-a*(h-l))*u,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=j9e(h).map(function(w){return m+a*w});return t(f?y.reverse():y)}return n.domain=function(h){return arguments.length?(e(h),d()):e()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,d()},n.bandwidth=function(){return o},n.step=function(){return a},n.round=function(h){return arguments.length?(s=!!h,d()):s},n.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},n.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},n.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},n.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},n.copy=function(){return SD(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ku.apply(d(),arguments)}function lbe(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return lbe(e())},n}function wC(){return lbe(SD.apply(null,arguments).paddingInner(1))}function X7(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function cbe(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function lM(){}var TD=.7,ZN=1/TD,h1="\\s*([+-]?\\d+)\\s*",ED="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F9e=/^#([0-9a-f]{3,8})$/,$9e=new RegExp(`^rgb\\(${h1},${h1},${h1}\\)$`),B9e=new RegExp(`^rgb\\(${kf},${kf},${kf}\\)$`),U9e=new RegExp(`^rgba\\(${h1},${h1},${h1},${ED}\\)$`),V9e=new RegExp(`^rgba\\(${kf},${kf},${kf},${ED}\\)$`),z9e=new RegExp(`^hsl\\(${ED},${kf},${kf}\\)$`),H9e=new RegExp(`^hsla\\(${ED},${kf},${kf},${ED}\\)$`),Wne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X7(lM,AD,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Yne,formatHex:Yne,formatHex8:G9e,formatHsl:q9e,formatRgb:Kne,toString:Kne});function Yne(){return this.rgb().formatHex()}function G9e(){return this.rgb().formatHex8()}function q9e(){return ube(this).formatHsl()}function Kne(){return this.rgb().formatRgb()}function AD(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=F9e.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Xne(e):t===3?new Wl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?WP(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?WP(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$9e.exec(n))?new Wl(e[1],e[2],e[3],1):(e=B9e.exec(n))?new Wl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=U9e.exec(n))?WP(e[1],e[2],e[3],e[4]):(e=V9e.exec(n))?WP(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=z9e.exec(n))?Jne(e[1],e[2]/100,e[3]/100,1):(e=H9e.exec(n))?Jne(e[1],e[2]/100,e[3]/100,e[4]):Wne.hasOwnProperty(n)?Xne(Wne[n]):n==="transparent"?new Wl(NaN,NaN,NaN,0):null}function Xne(n){return new Wl(n>>16&255,n>>8&255,n&255,1)}function WP(n,e,t,r){return r<=0&&(n=e=t=NaN),new Wl(n,e,t,r)}function W9e(n){return n instanceof lM||(n=AD(n)),n?(n=n.rgb(),new Wl(n.r,n.g,n.b,n.opacity)):new Wl}function v9(n,e,t,r){return arguments.length===1?W9e(n):new Wl(n,e,t,r??1)}function Wl(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}X7(Wl,v9,cbe(lM,{brighter(n){return n=n==null?ZN:Math.pow(ZN,n),new Wl(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?TD:Math.pow(TD,n),new Wl(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Wl(vw(this.r),vw(this.g),vw(this.b),QN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zne,formatHex:Zne,formatHex8:Y9e,formatRgb:Qne,toString:Qne}));function Zne(){return`#${nw(this.r)}${nw(this.g)}${nw(this.b)}`}function Y9e(){return`#${nw(this.r)}${nw(this.g)}${nw(this.b)}${nw((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qne(){const n=QN(this.opacity);return`${n===1?"rgb(":"rgba("}${vw(this.r)}, ${vw(this.g)}, ${vw(this.b)}${n===1?")":`, ${n})`}`}function QN(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function vw(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function nw(n){return n=vw(n),(n<16?"0":"")+n.toString(16)}function Jne(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new qd(n,e,t,r)}function ube(n){if(n instanceof qd)return new qd(n.h,n.s,n.l,n.opacity);if(n instanceof lM||(n=AD(n)),!n)return new qd;if(n instanceof qd)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new qd(o,s,l,n.opacity)}function K9e(n,e,t,r){return arguments.length===1?ube(n):new qd(n,e,t,r??1)}function qd(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}X7(qd,K9e,cbe(lM,{brighter(n){return n=n==null?ZN:Math.pow(ZN,n),new qd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?TD:Math.pow(TD,n),new qd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Wl(aB(n>=240?n-240:n+120,i,r),aB(n,i,r),aB(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new qd(ere(this.h),YP(this.s),YP(this.l),QN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=QN(this.opacity);return`${n===1?"hsl(":"hsla("}${ere(this.h)}, ${YP(this.s)*100}%, ${YP(this.l)*100}%${n===1?")":`, ${n})`}`}}));function ere(n){return n=(n||0)%360,n<0?n+360:n}function YP(n){return Math.max(0,Math.min(1,n||0))}function aB(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Z7=n=>()=>n;function X9e(n,e){return function(t){return n+t*e}}function Z9e(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Q9e(n){return(n=+n)==1?dbe:function(e,t){return t-e?Z9e(e,t,n):Z7(isNaN(e)?t:e)}}function dbe(n,e){var t=e-n;return t?X9e(n,t):Z7(isNaN(n)?e:n)}const tre=function n(e){var t=Q9e(e);function r(i,a){var o=t((i=v9(i)).r,(a=v9(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),c=dbe(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function J9e(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function eHe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function tHe(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)i[o]=PT(n[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function nHe(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function JN(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function rHe(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=PT(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var y9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oB=new RegExp(y9.source,"g");function iHe(n){return function(){return n}}function aHe(n){return function(e){return n(e)+""}}function oHe(n,e){var t=y9.lastIndex=oB.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(n=n+"",e=e+"";(r=y9.exec(n))&&(i=oB.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:JN(r,i)})),t=oB.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?aHe(l[0].x):iHe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function PT(n,e){var t=typeof e,r;return e==null||t==="boolean"?Z7(e):(t==="number"?JN:t==="string"?(r=AD(e))?(e=r,tre):oHe:e instanceof AD?tre:e instanceof Date?nHe:eHe(e)?J9e:Array.isArray(e)?tHe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?rHe:JN)(n,e)}function Q7(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function sHe(n,e){e===void 0&&(e=n,n=PT);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function lHe(n){return function(){return n}}function e2(n){return+n}var nre=[0,1];function ul(n){return n}function b9(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:lHe(isNaN(e)?NaN:.5)}function cHe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function uHe(n,e,t){var r=n[0],i=n[1],a=e[0],o=e[1];return i<r?(r=b9(i,r),a=t(o,a)):(r=b9(r,i),a=t(a,o)),function(s){return a(r(s))}}function dHe(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=b9(n[o],n[o+1]),a[o]=t(e[o],e[o+1]);return function(s){var l=sM(n,s,1,r)-1;return a[l](i[l](s))}}function cM(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Lj(){var n=nre,e=nre,t=PT,r,i,a,o=ul,s,l,c;function u(){var h=Math.min(n.length,e.length);return o!==ul&&(o=cHe(n[0],n[h-1])),s=h>2?dHe:uHe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?a:(l||(l=s(n.map(r),e,t)))(r(o(h)))}return d.invert=function(h){return o(i((c||(c=s(e,n.map(r),JN)))(h)))},d.domain=function(h){return arguments.length?(n=Array.from(h,e2),u()):n.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),t=Q7,u()},d.clamp=function(h){return arguments.length?(o=h?!0:ul,u()):o!==ul},d.interpolate=function(h){return arguments.length?(t=h,u()):t},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,f){return r=h,i=f,u()}}function J7(){return Lj()(ul,ul)}function hHe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function t2(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function G1(n){return n=t2(Math.abs(n)),n?n[1]:NaN}function fHe(n,e){return function(t,r){for(var i=t.length,a=[],o=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=n[o=(o+1)%n.length];return a.reverse().join(e)}}function pHe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var gHe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kD(n){if(!(e=gHe.exec(n)))throw new Error("invalid format: "+n);var e;return new eW({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kD.prototype=eW.prototype;function eW(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}eW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mHe(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var hbe;function vHe(n,e){var t=t2(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(hbe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+t2(n,Math.max(0,e+a-1))[0]}function rre(n,e){var t=t2(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ire={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:hHe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>rre(n*100,e),r:rre,s:vHe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function are(n){return n}var ore=Array.prototype.map,sre=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function yHe(n){var e=n.grouping===void 0||n.thousands===void 0?are:fHe(ore.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?are:pHe(ore.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(d){d=kD(d);var h=d.fill,f=d.align,m=d.sign,v=d.symbol,y=d.zero,w=d.width,_=d.comma,T=d.precision,A=d.trim,C=d.type;C==="n"?(_=!0,C="g"):ire[C]||(T===void 0&&(T=12),A=!0,C="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var k=v==="$"?t:v==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",M=v==="$"?r:/[%p]/.test(C)?o:"",P=ire[C],O=/[defgprs%]/.test(C);T=T===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function j(L){var B=k,$=M,Y,G,W;if(C==="c")$=P(L)+$,L="";else{L=+L;var X=L<0||1/L<0;if(L=isNaN(L)?l:P(Math.abs(L),T),A&&(L=mHe(L)),X&&+L==0&&m!=="+"&&(X=!1),B=(X?m==="("?m:s:m==="-"||m==="("?"":m)+B,$=(C==="s"?sre[8+hbe/3]:"")+$+(X&&m==="("?")":""),O){for(Y=-1,G=L.length;++Y<G;)if(W=L.charCodeAt(Y),48>W||W>57){$=(W===46?i+L.slice(Y+1):L.slice(Y))+$,L=L.slice(0,Y);break}}}_&&!y&&(L=e(L,1/0));var te=B.length+L.length+$.length,re=te<w?new Array(w-te+1).join(h):"";switch(_&&y&&(L=e(re+L,re.length?w-$.length:1/0),re=""),f){case"<":L=B+L+$+re;break;case"=":L=B+re+L+$;break;case"^":L=re.slice(0,te=re.length>>1)+B+L+$+re.slice(te);break;default:L=re+B+L+$;break}return a(L)}return j.toString=function(){return d+""},j}function u(d,h){var f=c((d=kD(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(G1(h)/3)))*3,v=Math.pow(10,-m),y=sre[8+m/3];return function(w){return f(v*w)+y}}return{format:c,formatPrefix:u}}var KP,tW,fbe;bHe({thousands:",",grouping:[3],currency:["$",""]});function bHe(n){return KP=yHe(n),tW=KP.format,fbe=KP.formatPrefix,KP}function wHe(n){return Math.max(0,-G1(Math.abs(n)))}function xHe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(G1(e)/3)))*3-G1(Math.abs(n)))}function _He(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,G1(e)-G1(n))+1}function pbe(n,e,t,r){var i=g9(n,e,t),a;switch(r=kD(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=xHe(i,o))&&(r.precision=a),fbe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_He(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=wHe(i))&&(r.precision=a-(r.type==="%")*2);break}}return tW(r)}function Py(n){var e=n.domain;return n.ticks=function(t){var r=e();return f9(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return pbe(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=p9(o,s,t),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return n},n}function n2(){var n=J7();return n.copy=function(){return cM(n,n2())},Ku.apply(n,arguments),Py(n)}function gbe(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,e2),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return gbe(n).unknown(e)},n=arguments.length?Array.from(n,e2):[0,1],Py(t)}function mbe(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],o;return a<i&&(o=t,t=r,r=o,o=i,i=a,a=o),n[t]=e.floor(i),n[r]=e.ceil(a),n}function lre(n){return Math.log(n)}function cre(n){return Math.exp(n)}function SHe(n){return-Math.log(-n)}function THe(n){return-Math.exp(-n)}function EHe(n){return isFinite(n)?+("1e"+n):n<0?0:n}function AHe(n){return n===10?EHe:n===Math.E?Math.exp:e=>Math.pow(n,e)}function kHe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function ure(n){return(e,t)=>-n(-e,t)}function nW(n){const e=n(lre,cre),t=e.domain;let r=10,i,a;function o(){return i=kHe(r),a=AHe(r),t()[0]<0?(i=ure(i),a=ure(a),n(SHe,THe)):n(lre,cre),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(t(s),o()):t()},e.ticks=s=>{const l=t();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),f=i(u),m,v;const y=s==null?10:+s;let w=[];if(!(r%1)&&f-h<y){if(h=Math.floor(h),f=Math.ceil(f),c>0){for(;h<=f;++h)for(m=1;m<r;++m)if(v=h<0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}}else for(;h<=f;++h)for(m=r-1;m>=1;--m)if(v=h>0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}w.length*2<y&&(w=f9(c,u,y))}else w=f9(h,f,Math.min(f-h,y)).map(a);return d?w.reverse():w},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=kD(l)).precision==null&&(l.trim=!0),l=tW(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let d=u/a(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>t(mbe(t(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function vbe(){const n=nW(Lj()).domain([1,10]);return n.copy=()=>cM(n,vbe()).base(n.base()),Ku.apply(n,arguments),n}function dre(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function hre(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function rW(n){var e=1,t=n(dre(e),hre(e));return t.constant=function(r){return arguments.length?n(dre(e=+r),hre(e)):e},Py(t)}function ybe(){var n=rW(Lj());return n.copy=function(){return cM(n,ybe()).constant(n.constant())},Ku.apply(n,arguments)}function fre(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function CHe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function DHe(n){return n<0?-n*n:n*n}function iW(n){var e=n(ul,ul),t=1;function r(){return t===1?n(ul,ul):t===.5?n(CHe,DHe):n(fre(t),fre(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},Py(e)}function aW(){var n=iW(Lj());return n.copy=function(){return cM(n,aW()).exponent(n.exponent())},Ku.apply(n,arguments),n}function IHe(){return aW.apply(null,arguments).exponent(.5)}function pre(n){return Math.sign(n)*n*n}function MHe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function bbe(){var n=J7(),e=[0,1],t=!1,r;function i(a){var o=MHe(n(a));return isNaN(o)?r:t?Math.round(o):o}return i.invert=function(a){return n.invert(pre(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,e2)).map(pre)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return bbe(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},Ku.apply(i,arguments),Py(i)}function wbe(){var n=[],e=[],t=[],r;function i(){var o=0,s=Math.max(1,e.length);for(t=new Array(s-1);++o<s;)t[o-1]=L9e(n,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[sM(t,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?t[s-1]:n[0],s<t.length?t[s]:n[n.length-1]]},a.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let s of o)s!=null&&!isNaN(s=+s)&&n.push(s);return n.sort(iy),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return wbe().domain(n).range(e).unknown(r)},Ku.apply(a,arguments)}function xbe(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[sM(r,l,0,t)]:a}function s(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return o}return o.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,s()):[n,e]},o.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=t?[r[t-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return xbe().domain([n,e]).range(i).unknown(a)},Ku.apply(Py(o),arguments)}function _be(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[sM(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[n[o-1],n[o]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return _be().domain(n).range(e).unknown(t)},Ku.apply(i,arguments)}const sB=new Date,lB=new Date;function mo(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),n(a);while(c<a&&a<o);return l},i.filter=a=>mo(o=>{if(o>=o)for(;n(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),t&&(i.count=(a,o)=>(sB.setTime(+a),lB.setTime(+o),n(sB),n(lB),Math.floor(t(sB,lB))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const r2=mo(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);r2.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?mo(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):r2);r2.range;const ug=1e3,Fu=ug*60,dg=Fu*60,Rg=dg*24,oW=Rg*7,gre=Rg*30,cB=Rg*365,rw=mo(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ug)},(n,e)=>(e-n)/ug,n=>n.getUTCSeconds());rw.range;const sW=mo(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ug)},(n,e)=>{n.setTime(+n+e*Fu)},(n,e)=>(e-n)/Fu,n=>n.getMinutes());sW.range;const lW=mo(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Fu)},(n,e)=>(e-n)/Fu,n=>n.getUTCMinutes());lW.range;const cW=mo(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ug-n.getMinutes()*Fu)},(n,e)=>{n.setTime(+n+e*dg)},(n,e)=>(e-n)/dg,n=>n.getHours());cW.range;const uW=mo(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*dg)},(n,e)=>(e-n)/dg,n=>n.getUTCHours());uW.range;const uM=mo(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Fu)/Rg,n=>n.getDate()-1);uM.range;const jj=mo(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Rg,n=>n.getUTCDate()-1);jj.range;const Sbe=mo(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Rg,n=>Math.floor(n/Rg));Sbe.range;function rx(n){return mo(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fu)/oW)}const Fj=rx(0),i2=rx(1),PHe=rx(2),OHe=rx(3),q1=rx(4),RHe=rx(5),NHe=rx(6);Fj.range;i2.range;PHe.range;OHe.range;q1.range;RHe.range;NHe.range;function ix(n){return mo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/oW)}const $j=ix(0),a2=ix(1),LHe=ix(2),jHe=ix(3),W1=ix(4),FHe=ix(5),$He=ix(6);$j.range;a2.range;LHe.range;jHe.range;W1.range;FHe.range;$He.range;const dW=mo(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());dW.range;const hW=mo(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());hW.range;const Ng=mo(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Ng.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:mo(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Ng.range;const Lg=mo(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Lg.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:mo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Lg.range;function Tbe(n,e,t,r,i,a){const o=[[rw,1,ug],[rw,5,5*ug],[rw,15,15*ug],[rw,30,30*ug],[a,1,Fu],[a,5,5*Fu],[a,15,15*Fu],[a,30,30*Fu],[i,1,dg],[i,3,3*dg],[i,6,6*dg],[i,12,12*dg],[r,1,Rg],[r,2,2*Rg],[t,1,oW],[e,1,gre],[e,3,3*gre],[n,1,cB]];function s(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),m=f?f.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,f=Y7(([,,y])=>y).right(o,h);if(f===o.length)return n.every(g9(c/cB,u/cB,d));if(f===0)return r2.every(Math.max(g9(c,u,d),1));const[m,v]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return m.every(v)}return[s,l]}const[BHe,UHe]=Tbe(Lg,hW,$j,Sbe,uW,lW),[VHe,zHe]=Tbe(Ng,dW,Fj,uM,cW,sW);function uB(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function dB(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function zA(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function HHe(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,o=n.shortDays,s=n.months,l=n.shortMonths,c=HA(i),u=GA(i),d=HA(a),h=GA(a),f=HA(o),m=GA(o),v=HA(s),y=GA(s),w=HA(l),_=GA(l),T={a:X,A:te,b:re,B:z,c:null,d:xre,e:xre,f:f8e,g:S8e,G:E8e,H:u8e,I:d8e,j:h8e,L:Ebe,m:p8e,M:g8e,p:ae,q:le,Q:Tre,s:Ere,S:m8e,u:v8e,U:y8e,V:b8e,w:w8e,W:x8e,x:null,X:null,y:_8e,Y:T8e,Z:A8e,"%":Sre},A={a:ee,A:ye,b:fe,B:Ce,c:null,d:_re,e:_re,f:I8e,g:B8e,G:V8e,H:k8e,I:C8e,j:D8e,L:kbe,m:M8e,M:P8e,p:at,q:Le,Q:Tre,s:Ere,S:O8e,u:R8e,U:N8e,V:L8e,w:j8e,W:F8e,x:null,X:null,y:$8e,Y:U8e,Z:z8e,"%":Sre},C={a:j,A:L,b:B,B:$,c:Y,d:bre,e:bre,f:o8e,g:yre,G:vre,H:wre,I:wre,j:n8e,L:a8e,m:t8e,M:r8e,p:O,q:e8e,Q:l8e,s:c8e,S:i8e,u:KHe,U:XHe,V:ZHe,w:YHe,W:QHe,x:G,X:W,y:yre,Y:vre,Z:JHe,"%":s8e};T.x=k(t,T),T.X=k(r,T),T.c=k(e,T),A.x=k(t,A),A.X=k(r,A),A.c=k(e,A);function k(we,be){return function(ge){var he=[],Ge=-1,je=0,rt=we.length,bt,lt,cn;for(ge instanceof Date||(ge=new Date(+ge));++Ge<rt;)we.charCodeAt(Ge)===37&&(he.push(we.slice(je,Ge)),(lt=mre[bt=we.charAt(++Ge)])!=null?bt=we.charAt(++Ge):lt=bt==="e"?" ":"0",(cn=be[bt])&&(bt=cn(ge,lt)),he.push(bt),je=Ge+1);return he.push(we.slice(je,Ge)),he.join("")}}function M(we,be){return function(ge){var he=zA(1900,void 0,1),Ge=P(he,we,ge+="",0),je,rt;if(Ge!=ge.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(be&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(je=dB(zA(he.y,0,1)),rt=je.getUTCDay(),je=rt>4||rt===0?a2.ceil(je):a2(je),je=jj.offset(je,(he.V-1)*7),he.y=je.getUTCFullYear(),he.m=je.getUTCMonth(),he.d=je.getUTCDate()+(he.w+6)%7):(je=uB(zA(he.y,0,1)),rt=je.getDay(),je=rt>4||rt===0?i2.ceil(je):i2(je),je=uM.offset(je,(he.V-1)*7),he.y=je.getFullYear(),he.m=je.getMonth(),he.d=je.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),rt="Z"in he?dB(zA(he.y,0,1)).getUTCDay():uB(zA(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(rt+5)%7:he.w+he.U*7-(rt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,dB(he)):uB(he)}}function P(we,be,ge,he){for(var Ge=0,je=be.length,rt=ge.length,bt,lt;Ge<je;){if(he>=rt)return-1;if(bt=be.charCodeAt(Ge++),bt===37){if(bt=be.charAt(Ge++),lt=C[bt in mre?be.charAt(Ge++):bt],!lt||(he=lt(we,ge,he))<0)return-1}else if(bt!=ge.charCodeAt(he++))return-1}return he}function O(we,be,ge){var he=c.exec(be.slice(ge));return he?(we.p=u.get(he[0].toLowerCase()),ge+he[0].length):-1}function j(we,be,ge){var he=f.exec(be.slice(ge));return he?(we.w=m.get(he[0].toLowerCase()),ge+he[0].length):-1}function L(we,be,ge){var he=d.exec(be.slice(ge));return he?(we.w=h.get(he[0].toLowerCase()),ge+he[0].length):-1}function B(we,be,ge){var he=w.exec(be.slice(ge));return he?(we.m=_.get(he[0].toLowerCase()),ge+he[0].length):-1}function $(we,be,ge){var he=v.exec(be.slice(ge));return he?(we.m=y.get(he[0].toLowerCase()),ge+he[0].length):-1}function Y(we,be,ge){return P(we,e,be,ge)}function G(we,be,ge){return P(we,t,be,ge)}function W(we,be,ge){return P(we,r,be,ge)}function X(we){return o[we.getDay()]}function te(we){return a[we.getDay()]}function re(we){return l[we.getMonth()]}function z(we){return s[we.getMonth()]}function ae(we){return i[+(we.getHours()>=12)]}function le(we){return 1+~~(we.getMonth()/3)}function ee(we){return o[we.getUTCDay()]}function ye(we){return a[we.getUTCDay()]}function fe(we){return l[we.getUTCMonth()]}function Ce(we){return s[we.getUTCMonth()]}function at(we){return i[+(we.getUTCHours()>=12)]}function Le(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var be=k(we+="",T);return be.toString=function(){return we},be},parse:function(we){var be=M(we+="",!1);return be.toString=function(){return we},be},utcFormat:function(we){var be=k(we+="",A);return be.toString=function(){return we},be},utcParse:function(we){var be=M(we+="",!0);return be.toString=function(){return we},be}}}var mre={"-":"",_:" ",0:"0"},jo=/^\s*\d+/,GHe=/^%/,qHe=/[\\^$*+?|[\]().{}]/g;function Rr(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function WHe(n){return n.replace(qHe,"\\$&")}function HA(n){return new RegExp("^(?:"+n.map(WHe).join("|")+")","i")}function GA(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function YHe(n,e,t){var r=jo.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function KHe(n,e,t){var r=jo.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function XHe(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function ZHe(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function QHe(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function vre(n,e,t){var r=jo.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function yre(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function JHe(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function e8e(n,e,t){var r=jo.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function t8e(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function bre(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function n8e(n,e,t){var r=jo.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function wre(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function r8e(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function i8e(n,e,t){var r=jo.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function a8e(n,e,t){var r=jo.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function o8e(n,e,t){var r=jo.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function s8e(n,e,t){var r=GHe.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function l8e(n,e,t){var r=jo.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function c8e(n,e,t){var r=jo.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function xre(n,e){return Rr(n.getDate(),e,2)}function u8e(n,e){return Rr(n.getHours(),e,2)}function d8e(n,e){return Rr(n.getHours()%12||12,e,2)}function h8e(n,e){return Rr(1+uM.count(Ng(n),n),e,3)}function Ebe(n,e){return Rr(n.getMilliseconds(),e,3)}function f8e(n,e){return Ebe(n,e)+"000"}function p8e(n,e){return Rr(n.getMonth()+1,e,2)}function g8e(n,e){return Rr(n.getMinutes(),e,2)}function m8e(n,e){return Rr(n.getSeconds(),e,2)}function v8e(n){var e=n.getDay();return e===0?7:e}function y8e(n,e){return Rr(Fj.count(Ng(n)-1,n),e,2)}function Abe(n){var e=n.getDay();return e>=4||e===0?q1(n):q1.ceil(n)}function b8e(n,e){return n=Abe(n),Rr(q1.count(Ng(n),n)+(Ng(n).getDay()===4),e,2)}function w8e(n){return n.getDay()}function x8e(n,e){return Rr(i2.count(Ng(n)-1,n),e,2)}function _8e(n,e){return Rr(n.getFullYear()%100,e,2)}function S8e(n,e){return n=Abe(n),Rr(n.getFullYear()%100,e,2)}function T8e(n,e){return Rr(n.getFullYear()%1e4,e,4)}function E8e(n,e){var t=n.getDay();return n=t>=4||t===0?q1(n):q1.ceil(n),Rr(n.getFullYear()%1e4,e,4)}function A8e(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Rr(e/60|0,"0",2)+Rr(e%60,"0",2)}function _re(n,e){return Rr(n.getUTCDate(),e,2)}function k8e(n,e){return Rr(n.getUTCHours(),e,2)}function C8e(n,e){return Rr(n.getUTCHours()%12||12,e,2)}function D8e(n,e){return Rr(1+jj.count(Lg(n),n),e,3)}function kbe(n,e){return Rr(n.getUTCMilliseconds(),e,3)}function I8e(n,e){return kbe(n,e)+"000"}function M8e(n,e){return Rr(n.getUTCMonth()+1,e,2)}function P8e(n,e){return Rr(n.getUTCMinutes(),e,2)}function O8e(n,e){return Rr(n.getUTCSeconds(),e,2)}function R8e(n){var e=n.getUTCDay();return e===0?7:e}function N8e(n,e){return Rr($j.count(Lg(n)-1,n),e,2)}function Cbe(n){var e=n.getUTCDay();return e>=4||e===0?W1(n):W1.ceil(n)}function L8e(n,e){return n=Cbe(n),Rr(W1.count(Lg(n),n)+(Lg(n).getUTCDay()===4),e,2)}function j8e(n){return n.getUTCDay()}function F8e(n,e){return Rr(a2.count(Lg(n)-1,n),e,2)}function $8e(n,e){return Rr(n.getUTCFullYear()%100,e,2)}function B8e(n,e){return n=Cbe(n),Rr(n.getUTCFullYear()%100,e,2)}function U8e(n,e){return Rr(n.getUTCFullYear()%1e4,e,4)}function V8e(n,e){var t=n.getUTCDay();return n=t>=4||t===0?W1(n):W1.ceil(n),Rr(n.getUTCFullYear()%1e4,e,4)}function z8e(){return"+0000"}function Sre(){return"%"}function Tre(n){return+n}function Ere(n){return Math.floor(+n/1e3)}var G_,Dbe,Ibe;H8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function H8e(n){return G_=HHe(n),Dbe=G_.format,G_.parse,Ibe=G_.utcFormat,G_.utcParse,G_}function G8e(n){return new Date(n)}function q8e(n){return n instanceof Date?+n:+new Date(+n)}function fW(n,e,t,r,i,a,o,s,l,c){var u=J7(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),v=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),_=c("%b %d"),T=c("%B"),A=c("%Y");function C(k){return(l(k)<k?f:s(k)<k?m:o(k)<k?v:a(k)<k?y:r(k)<k?i(k)<k?w:_:t(k)<k?T:A)(k)}return u.invert=function(k){return new Date(d(k))},u.domain=function(k){return arguments.length?h(Array.from(k,q8e)):h().map(G8e)},u.ticks=function(k){var M=h();return n(M[0],M[M.length-1],k??10)},u.tickFormat=function(k,M){return M==null?C:c(M)},u.nice=function(k){var M=h();return(!k||typeof k.range!="function")&&(k=e(M[0],M[M.length-1],k??10)),k?h(mbe(M,k)):u},u.copy=function(){return cM(u,fW(n,e,t,r,i,a,o,s,l,c))},u}function W8e(){return Ku.apply(fW(VHe,zHe,Ng,dW,Fj,uM,cW,sW,rw,Dbe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y8e(){return Ku.apply(fW(BHe,UHe,Lg,hW,$j,jj,uW,lW,rw,Ibe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Bj(){var n=0,e=1,t,r,i,a,o=ul,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-t)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([n,e]=d,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),c):[n,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(h){var f,m;return arguments.length?([f,m]=h,o=d(f,m),c):[o(0),o(1)]}}return c.range=u(PT),c.rangeRound=u(Q7),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,t=d(n),r=d(e),i=t===r?0:1/(r-t),c}}function Oy(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Mbe(){var n=Py(Bj()(ul));return n.copy=function(){return Oy(n,Mbe())},em.apply(n,arguments)}function Pbe(){var n=nW(Bj()).domain([1,10]);return n.copy=function(){return Oy(n,Pbe()).base(n.base())},em.apply(n,arguments)}function Obe(){var n=rW(Bj());return n.copy=function(){return Oy(n,Obe()).constant(n.constant())},em.apply(n,arguments)}function pW(){var n=iW(Bj());return n.copy=function(){return Oy(n,pW()).exponent(n.exponent())},em.apply(n,arguments)}function K8e(){return pW.apply(null,arguments).exponent(.5)}function Rbe(){var n=[],e=ul;function t(r){if(r!=null&&!isNaN(r=+r))return e((sM(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(iy),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>N9e(n,a/r))},t.copy=function(){return Rbe(e).domain(n)},em.apply(t,arguments)}function Uj(){var n=0,e=.5,t=1,r=1,i,a,o,s,l,c=ul,u,d=!1,h;function f(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-a)*(r*v<r*a?s:l),c(d?Math.max(0,Math.min(1,v)):v))}f.domain=function(v){return arguments.length?([n,e,t]=v,i=u(n=+n),a=u(e=+e),o=u(t=+t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f):[n,e,t]},f.clamp=function(v){return arguments.length?(d=!!v,f):d},f.interpolator=function(v){return arguments.length?(c=v,f):c};function m(v){return function(y){var w,_,T;return arguments.length?([w,_,T]=y,c=sHe(v,[w,_,T]),f):[c(0),c(.5),c(1)]}}return f.range=m(PT),f.rangeRound=m(Q7),f.unknown=function(v){return arguments.length?(h=v,f):h},function(v){return u=v,i=v(n),a=v(e),o=v(t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f}}function Nbe(){var n=Py(Uj()(ul));return n.copy=function(){return Oy(n,Nbe())},em.apply(n,arguments)}function Lbe(){var n=nW(Uj()).domain([.1,1,10]);return n.copy=function(){return Oy(n,Lbe()).base(n.base())},em.apply(n,arguments)}function jbe(){var n=rW(Uj());return n.copy=function(){return Oy(n,jbe()).constant(n.constant())},em.apply(n,arguments)}function gW(){var n=iW(Uj());return n.copy=function(){return Oy(n,gW()).exponent(n.exponent())},em.apply(n,arguments)}function X8e(){return gW.apply(null,arguments).exponent(.5)}const Are=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:SD,scaleDiverging:Nbe,scaleDivergingLog:Lbe,scaleDivergingPow:gW,scaleDivergingSqrt:X8e,scaleDivergingSymlog:jbe,scaleIdentity:gbe,scaleImplicit:m9,scaleLinear:n2,scaleLog:vbe,scaleOrdinal:K7,scalePoint:wC,scalePow:aW,scaleQuantile:wbe,scaleQuantize:xbe,scaleRadial:bbe,scaleSequential:Mbe,scaleSequentialLog:Pbe,scaleSequentialPow:pW,scaleSequentialQuantile:Rbe,scaleSequentialSqrt:K8e,scaleSequentialSymlog:Obe,scaleSqrt:IHe,scaleSymlog:ybe,scaleThreshold:_be,scaleTime:W8e,scaleUtc:Y8e,tickFormat:pbe},Symbol.toStringTag,{value:"Module"}));var hB,kre;function Fbe(){if(kre)return hB;kre=1;var n=DT();function e(t,r,i){for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r(s);if(l!=null&&(c===void 0?l===l&&!n(l):i(l,c)))var c=l,u=s}return u}return hB=e,hB}var fB,Cre;function Z8e(){if(Cre)return fB;Cre=1;function n(e,t){return e>t}return fB=n,fB}var pB,Dre;function Q8e(){if(Dre)return pB;Dre=1;var n=Fbe(),e=Z8e(),t=MT();function r(i){return i&&i.length?n(i,t,e):void 0}return pB=r,pB}var J8e=Q8e();const Vj=kr(J8e);var gB,Ire;function eGe(){if(Ire)return gB;Ire=1;function n(e,t){return e<t}return gB=n,gB}var mB,Mre;function tGe(){if(Mre)return mB;Mre=1;var n=Fbe(),e=eGe(),t=MT();function r(i){return i&&i.length?n(i,t,e):void 0}return mB=r,mB}var nGe=tGe();const zj=kr(nGe);var vB,Pre;function rGe(){if(Pre)return vB;Pre=1;var n=M7(),e=My(),t=q0e(),r=Zl();function i(a,o){var s=r(a)?n:t;return s(a,e(o,3))}return vB=i,vB}var yB,Ore;function iGe(){if(Ore)return yB;Ore=1;var n=H0e(),e=rGe();function t(r,i){return n(e(r,i),1)}return yB=t,yB}var aGe=iGe();const oGe=kr(aGe);var bB,Rre;function sGe(){if(Rre)return bB;Rre=1;var n=H7();function e(t,r){return n(t,r)}return bB=e,bB}var lGe=sGe();const mW=kr(lGe);var OT=1e9,cGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yW,Gi=!0,Wu="[DecimalError] ",yw=Wu+"Invalid argument: ",vW=Wu+"Exponent out of range: ",RT=Math.floor,Nb=Math.pow,uGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Oc,Mo=1e7,Bi=7,$be=9007199254740991,o2=RT($be/Bi),Ot={};Ot.absoluteValue=Ot.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Ot.comparedTo=Ot.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Bi;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Ot.dividedBy=Ot.div=function(n){return Sg(this,new this.constructor(n))};Ot.dividedToIntegerBy=Ot.idiv=function(n){var e=this,t=e.constructor;return _i(Sg(e,new t(n),0,1),t.precision)};Ot.equals=Ot.eq=function(n){return!this.cmp(n)};Ot.exponent=function(){return Ka(this)};Ot.greaterThan=Ot.gt=function(n){return this.cmp(n)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(n){return this.cmp(n)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(n){return this.cmp(n)<0};Ot.lessThanOrEqualTo=Ot.lte=function(n){return this.cmp(n)<1};Ot.logarithm=Ot.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Oc))throw Error(Wu+"NaN");if(t.s<1)throw Error(Wu+(t.s?"NaN":"-Infinity"));return t.eq(Oc)?new r(0):(Gi=!1,e=Sg(CD(t,a),CD(n,a),a),Gi=!0,_i(e,i))};Ot.minus=Ot.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Vbe(e,n):Bbe(e,(n.s=-n.s,n))};Ot.modulo=Ot.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Wu+"NaN");return t.s?(Gi=!1,e=Sg(t,n,0,1).times(n),Gi=!0,t.minus(e)):_i(new r(t),i)};Ot.naturalExponential=Ot.exp=function(){return Ube(this)};Ot.naturalLogarithm=Ot.ln=function(){return CD(this)};Ot.negated=Ot.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Ot.plus=Ot.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?Bbe(e,n):Vbe(e,(n.s=-n.s,n))};Ot.precision=Ot.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(yw+n);if(e=Ka(i)+1,r=i.d.length-1,t=r*Bi+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};Ot.squareRoot=Ot.sqrt=function(){var n,e,t,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Wu+"NaN")}for(n=Ka(s),Gi=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=bf(s.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=RT((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=o=t+3;;)if(a=r,r=a.plus(Sg(s,a,o+2)).times(.5),bf(a.d).slice(0,o)===(e=bf(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(_i(a,t+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return Gi=!0,_i(r,t)};Ot.times=Ot.mul=function(n){var e,t,r,i,a,o,s,l,c,u=this,d=u.constructor,h=u.d,f=(n=new d(n)).d;if(!u.s||!n.s)return new d(0);for(n.s*=u.s,t=u.e+n.e,l=h.length,c=f.length,l<c&&(a=h,h=f,f=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+f[r]*h[i-r-1]+e,a[i--]=s%Mo|0,e=s/Mo|0;a[i]=(a[i]+e)%Mo|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,Gi?_i(n,d.precision):n};Ot.toDecimalPlaces=Ot.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Rf(n,0,OT),e===void 0?e=r.rounding:Rf(e,0,8),_i(t,n+Ka(t)+1,e))};Ot.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Fw(r,!0):(Rf(n,0,OT),e===void 0?e=i.rounding:Rf(e,0,8),r=_i(new i(r),n+1,e),t=Fw(r,!0,n+1)),t};Ot.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?Fw(i):(Rf(n,0,OT),e===void 0?e=a.rounding:Rf(e,0,8),r=_i(new a(i),n+Ka(i)+1,e),t=Fw(r.abs(),!1,n+Ka(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};Ot.toInteger=Ot.toint=function(){var n=this,e=n.constructor;return _i(new e(n),Ka(n)+1,e.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(n){var e,t,r,i,a,o,s=this,l=s.constructor,c=12,u=+(n=new l(n));if(!n.s)return new l(Oc);if(s=new l(s),!s.s){if(n.s<1)throw Error(Wu+"Infinity");return s}if(s.eq(Oc))return s;if(r=l.precision,n.eq(Oc))return _i(s,r);if(e=n.e,t=n.d.length-1,o=e>=t,a=s.s,o){if((t=u<0?-u:u)<=$be){for(i=new l(Oc),e=Math.ceil(r/Bi+4),Gi=!1;t%2&&(i=i.times(s),Lre(i.d,e)),t=RT(t/2),t!==0;)s=s.times(s),Lre(s.d,e);return Gi=!0,n.s<0?new l(Oc).div(i):_i(i,r)}}else if(a<0)throw Error(Wu+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,s.s=1,Gi=!1,i=n.times(CD(s,r+c)),Gi=!0,i=Ube(i),i.s=a,i};Ot.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=Ka(i),r=Fw(i,t<=a.toExpNeg||t>=a.toExpPos)):(Rf(n,1,OT),e===void 0?e=a.rounding:Rf(e,0,8),i=_i(new a(i),n,e),t=Ka(i),r=Fw(i,n<=t||t<=a.toExpNeg,n)),r};Ot.toSignificantDigits=Ot.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Rf(n,1,OT),e===void 0?e=r.rounding:Rf(e,0,8)),_i(new r(t),n,e)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Ka(n),t=n.constructor;return Fw(n,e<=t.toExpNeg||e>=t.toExpPos)};function Bbe(n,e){var t,r,i,a,o,s,l,c,u=n.constructor,d=u.precision;if(!n.s||!e.s)return e.s||(e=new u(n)),Gi?_i(e,d):e;if(l=n.d,c=e.d,o=n.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(d/Bi),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),t=0;a;)t=(l[--a]=l[a]+c[a]+t)/Mo|0,l[a]%=Mo;for(t&&(l.unshift(t),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Gi?_i(e,d):e}function Rf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(yw+n)}function bf(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=Bi-r.length,t&&(a+=Nv(t)),a+=r;o=n[e],r=o+"",t=Bi-r.length,t&&(a+=Nv(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Sg=function(){function n(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Mo|0,o=a/Mo|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function t(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Mo+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,u,d,h,f,m,v,y,w,_,T,A,C,k,M,P,O=r.constructor,j=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(Wu+"Division by zero");for(l=r.e-i.e,M=B.length,C=L.length,f=new O(j),m=f.d=[],c=0;B[c]==(L[c]||0);)++c;if(B[c]>(L[c]||0)&&--l,a==null?_=a=O.precision:o?_=a+(Ka(r)-Ka(i))+1:_=a,_<0)return new O(0);if(_=_/Bi+2|0,c=0,M==1)for(u=0,B=B[0],_++;(c<C||u)&&_--;c++)T=u*Mo+(L[c]||0),m[c]=T/B|0,u=T%B|0;else{for(u=Mo/(B[0]+1)|0,u>1&&(B=n(B,u),L=n(L,u),M=B.length,C=L.length),A=M,v=L.slice(0,M),y=v.length;y<M;)v[y++]=0;P=B.slice(),P.unshift(0),k=B[0],B[1]>=Mo/2&&++k;do u=0,s=e(B,v,M,y),s<0?(w=v[0],M!=y&&(w=w*Mo+(v[1]||0)),u=w/k|0,u>1?(u>=Mo&&(u=Mo-1),d=n(B,u),h=d.length,y=v.length,s=e(d,v,h,y),s==1&&(u--,t(d,M<h?P:B,h))):(u==0&&(s=u=1),d=B.slice()),h=d.length,h<y&&d.unshift(0),t(v,d,y),s==-1&&(y=v.length,s=e(B,v,M,y),s<1&&(u++,t(v,M<y?P:B,y))),y=v.length):s===0&&(u++,v=[0]),m[c++]=u,s&&v[0]?v[y++]=L[A]||0:(v=[L[A]],y=1);while((A++<C||v[0]!==void 0)&&_--)}return m[0]||m.shift(),f.e=l,_i(f,o?a+Ka(f)+1:a)}}();function Ube(n,e){var t,r,i,a,o,s,l=0,c=0,u=n.constructor,d=u.precision;if(Ka(n)>16)throw Error(vW+Ka(n));if(!n.s)return new u(Oc);for(Gi=!1,s=d,o=new u(.03125);n.abs().gte(.1);)n=n.times(o),c+=5;for(r=Math.log(Nb(2,c))/Math.LN10*2+5|0,s+=r,t=i=a=new u(Oc),u.precision=s;;){if(i=_i(i.times(n),s),t=t.times(++l),o=a.plus(Sg(i,t,s)),bf(o.d).slice(0,s)===bf(a.d).slice(0,s)){for(;c--;)a=_i(a.times(a),s);return u.precision=d,e==null?(Gi=!0,_i(a,d)):a}a=o}}function Ka(n){for(var e=n.e*Bi,t=n.d[0];t>=10;t/=10)e++;return e}function wB(n,e,t){if(e>n.LN10.sd())throw Gi=!0,t&&(n.precision=t),Error(Wu+"LN10 precision limit exceeded");return _i(new n(n.LN10),e)}function Nv(n){for(var e="";n--;)e+="0";return e}function CD(n,e){var t,r,i,a,o,s,l,c,u,d=1,h=10,f=n,m=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(Wu+(f.s?"NaN":"-Infinity"));if(f.eq(Oc))return new v(0);if(e==null?(Gi=!1,c=y):c=e,f.eq(10))return e==null&&(Gi=!0),wB(v,c);if(c+=h,v.precision=c,t=bf(m),r=t.charAt(0),a=Ka(f),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)f=f.times(n),t=bf(f.d),r=t.charAt(0),d++;a=Ka(f),r>1?(f=new v("0."+t),a++):f=new v(r+"."+t.slice(1))}else return l=wB(v,c+2,y).times(a+""),f=CD(new v(r+"."+t.slice(1)),c-h).plus(l),v.precision=y,e==null?(Gi=!0,_i(f,y)):f;for(s=o=f=Sg(f.minus(Oc),f.plus(Oc),c),u=_i(f.times(f),c),i=3;;){if(o=_i(o.times(u),c),l=s.plus(Sg(o,new v(i),c)),bf(l.d).slice(0,c)===bf(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(wB(v,c+2,y).times(a+""))),s=Sg(s,new v(d),c),v.precision=y,e==null?(Gi=!0,_i(s,y)):s;s=l,i+=2}}function Nre(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=RT(t/Bi),n.d=[],r=(t+1)%Bi,t<0&&(r+=Bi),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Bi;r<i;)n.d.push(+e.slice(r,r+=Bi));e=e.slice(r),r=Bi-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Gi&&(n.e>o2||n.e<-o2))throw Error(vW+t)}else n.s=0,n.e=0,n.d=[0];return n}function _i(n,e,t){var r,i,a,o,s,l,c,u,d=n.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Bi,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/Bi),a=d.length,u>=a)return n;for(c=a=d[u],o=1;a>=10;a/=10)o++;r%=Bi,i=r-Bi+o}if(t!==void 0&&(a=Nb(10,o-i-1),s=c/a%10|0,l=e<0||d[u+1]!==void 0||c%a,l=t<4?(s||l)&&(t==0||t==(n.s<0?3:2)):s>5||s==5&&(t==4||l||t==6&&(r>0?i>0?c/Nb(10,o-i):0:d[u-1])%10&1||t==(n.s<0?8:7))),e<1||!d[0])return l?(a=Ka(n),d.length=1,e=e-a-1,d[0]=Nb(10,(Bi-e%Bi)%Bi),n.e=RT(-e/Bi)||0):(d.length=1,d[0]=n.e=n.s=0),n;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Nb(10,Bi-r),d[u]=i>0?(c/Nb(10,o-i)%Nb(10,i)|0)*a:0),l)for(;;)if(u==0){(d[0]+=a)==Mo&&(d[0]=1,++n.e);break}else{if(d[u]+=a,d[u]!=Mo)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Gi&&(n.e>o2||n.e<-o2))throw Error(vW+Ka(n));return n}function Vbe(n,e){var t,r,i,a,o,s,l,c,u,d,h=n.constructor,f=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),Gi?_i(e,f):e;if(l=n.d,d=e.d,r=e.e,c=n.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(t=l,o=-o,s=d.length):(t=d,r=c,s=l.length),i=Math.max(Math.ceil(f/Bi),s)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=l.length,s=d.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=Mo-1;--l[a],l[i]+=Mo}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Gi?_i(e,f):e):new h(0)}function Fw(n,e,t){var r,i=Ka(n),a=bf(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+Nv(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Nv(-i-1)+a,t&&(r=t-o)>0&&(a+=Nv(r))):i>=o?(a+=Nv(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+Nv(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=Nv(r))),n.s<0?"-"+a:a}function Lre(n,e){if(n.length>e)return n.length=e,!0}function zbe(n){var e,t,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(yw+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Nre(o,a.toString())}else if(typeof a!="string")throw Error(yw+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,uGe.test(a))Nre(o,a);else throw Error(yw+a)}if(i.prototype=Ot,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=zbe,i.config=i.set=dGe,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function dGe(n){if(!n||typeof n!="object")throw Error(Wu+"Object expected");var e,t,r,i=["precision",1,OT,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(RT(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(yw+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(yw+t+": "+r);return this}var yW=zbe(cGe);Oc=new yW(1);const pi=yW;function hGe(n){return mGe(n)||gGe(n)||pGe(n)||fGe()}function fGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pGe(n,e){if(n){if(typeof n=="string")return w9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w9(n,e)}}function gGe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function mGe(n){if(Array.isArray(n))return w9(n)}function w9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var vGe=function(e){return e},Hbe={},Gbe=function(e){return e===Hbe},jre=function(e){return function t(){return arguments.length===0||arguments.length===1&&Gbe(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},yGe=function n(e,t){return e===1?t:jre(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==Hbe}).length;return o>=e?t.apply(void 0,i):n(e-o,jre(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(d){return Gbe(d)?l.shift():d});return t.apply(void 0,hGe(u).concat(l))}))})},Hj=function(e){return yGe(e.length,e)},x9=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},bGe=Hj(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),wGe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return vGe;var i=t.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},_9=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},qbe=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t&&a.every(function(s,l){return s===t[l]})||(t=a,r=e.apply(void 0,a)),r}};function xGe(n){var e;return n===0?e=1:e=Math.floor(new pi(n).abs().log(10).toNumber())+1,e}function _Ge(n,e,t){for(var r=new pi(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var SGe=Hj(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),TGe=Hj(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),EGe=Hj(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const Gj={rangeStep:_Ge,getDigitCount:xGe,interpolateNumber:SGe,uninterpolateNumber:TGe,uninterpolateTruncation:EGe};function S9(n){return CGe(n)||kGe(n)||Wbe(n)||AGe()}function AGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kGe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function CGe(n){if(Array.isArray(n))return T9(n)}function DD(n,e){return MGe(n)||IGe(n,e)||Wbe(n,e)||DGe()}function DGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wbe(n,e){if(n){if(typeof n=="string")return T9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return T9(n,e)}}function T9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function IGe(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var o=n[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return t}}function MGe(n){if(Array.isArray(n))return n}function Ybe(n){var e=DD(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function Kbe(n,e,t){if(n.lte(0))return new pi(0);var r=Gj.getDigitCount(n.toNumber()),i=new pi(10).pow(r),a=n.div(i),o=r!==1?.05:.1,s=new pi(Math.ceil(a.div(o).toNumber())).add(t).mul(o),l=s.mul(i);return e?l:new pi(Math.ceil(l))}function PGe(n,e,t){var r=1,i=new pi(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new pi(10).pow(Gj.getDigitCount(n)-1),i=new pi(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new pi(Math.floor(n)))}else n===0?i=new pi(Math.floor((e-1)/2)):t||(i=new pi(Math.floor(n)));var o=Math.floor((e-1)/2),s=wGe(bGe(function(l){return i.add(new pi(l-o).mul(r)).toNumber()}),x9);return s(0,e)}function Xbe(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new pi(0),tickMin:new pi(0),tickMax:new pi(0)};var a=Kbe(new pi(e).sub(n).div(t-1),r,i),o;n<=0&&e>=0?o=new pi(0):(o=new pi(n).add(e).div(2),o=o.sub(new pi(o).mod(a)));var s=Math.ceil(o.sub(n).div(a).toNumber()),l=Math.ceil(new pi(e).sub(o).div(a).toNumber()),c=s+l+1;return c>t?Xbe(n,e,t,r,i+1):(c<t&&(l=e>0?l+(t-c):l,s=e>0?s:s+(t-c)),{step:a,tickMin:o.sub(new pi(s).mul(a)),tickMax:o.add(new pi(l).mul(a))})}function OGe(n){var e=DD(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Ybe([t,r]),l=DD(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(S9(x9(0,i-1).map(function(){return 1/0}))):[].concat(S9(x9(0,i-1).map(function(){return-1/0})),[u]);return t>r?_9(d):d}if(c===u)return PGe(c,i,a);var h=Xbe(c,u,o,a),f=h.step,m=h.tickMin,v=h.tickMax,y=Gj.rangeStep(m,v.add(new pi(.1).mul(f)),f);return t>r?_9(y):y}function RGe(n,e){var t=DD(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Ybe([r,i]),s=DD(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=Kbe(new pi(c).sub(l).div(u-1),a,0),h=[].concat(S9(Gj.rangeStep(new pi(l),new pi(c).sub(new pi(.99).mul(d)),d)),[c]);return r>i?_9(h):h}var NGe=qbe(OGe),LGe=qbe(RGe),jGe="Invariant failed";function $w(n,e){throw new Error(jGe)}var FGe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Y1(n){"@babel/helpers - typeof";return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y1(n)}function s2(){return s2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s2.apply(this,arguments)}function $Ge(n,e){return zGe(n)||VGe(n,e)||UGe(n,e)||BGe()}function BGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UGe(n,e){if(n){if(typeof n=="string")return Fre(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fre(n,e)}}function Fre(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function VGe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function zGe(n){if(Array.isArray(n))return n}function HGe(n,e){if(n==null)return{};var t=GGe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function GGe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function qGe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function WGe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Jbe(r.key),r)}}function YGe(n,e,t){return e&&WGe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function KGe(n,e,t){return e=l2(e),XGe(n,Zbe()?Reflect.construct(e,t||[],l2(n).constructor):e.apply(n,t))}function XGe(n,e){if(e&&(Y1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZGe(n)}function ZGe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zbe=function(){return!!n})()}function l2(n){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l2(n)}function QGe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&E9(n,e)}function E9(n,e){return E9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E9(n,e)}function Qbe(n,e,t){return e=Jbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jbe(n){var e=JGe(n,"string");return Y1(e)=="symbol"?e:e+""}function JGe(n,e){if(Y1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var qj=function(n){function e(){return qGe(this,e),KGe(this,e,arguments)}return QGe(e,n),YGe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=HGe(r,FGe),f=Ur(h,!1);this.props.direction==="x"&&u.type!=="number"&&$w();var m=l.map(function(v){var y=c(v,s),w=y.x,_=y.y,T=y.value,A=y.errorVal;if(!A)return null;var C=[],k,M;if(Array.isArray(A)){var P=$Ge(A,2);k=P[0],M=P[1]}else k=M=A;if(a==="vertical"){var O=u.scale,j=_+i,L=j+o,B=j-o,$=O(T-k),Y=O(T+M);C.push({x1:Y,y1:L,x2:Y,y2:B}),C.push({x1:$,y1:j,x2:Y,y2:j}),C.push({x1:$,y1:L,x2:$,y2:B})}else if(a==="horizontal"){var G=d.scale,W=w+i,X=W-o,te=W+o,re=G(T-k),z=G(T+M);C.push({x1:X,y1:z,x2:te,y2:z}),C.push({x1:W,y1:re,x2:W,y2:z}),C.push({x1:X,y1:re,x2:te,y2:re})}return ve.createElement(Oo,s2({className:"recharts-errorBar",key:"bar-".concat(C.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},f),C.map(function(ae){return ve.createElement("line",s2({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return ve.createElement(Oo,{className:"recharts-errorBars"},m)}}])}(ve.Component);Qbe(qj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Qbe(qj,"displayName","ErrorBar");function ID(n){"@babel/helpers - typeof";return ID=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ID(n)}function $re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ob(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$re(Object(t),!0).forEach(function(r){eqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$re(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function eqe(n,e,t){return e=tqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tqe(n){var e=nqe(n,"string");return ID(e)=="symbol"?e:e+""}function nqe(n,e){if(ID(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ID(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var ewe=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Ic(t,d1);if(!o)return null;var s=d1.defaultProps,l=s!==void 0?ob(ob({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(u,d){var h=d.item,f=d.props,m=f.sectors||f.data||[];return u.concat(m.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(r||[]).map(function(u){var d=u.item,h=d.type.defaultProps,f=h!==void 0?ob(ob({},h),d.props):{},m=f.dataKey,v=f.name,y=f.legendType,w=f.hide;return{inactive:w,dataKey:m,type:l.iconType||y||"square",color:bW(d),value:v||m,payload:f}}),ob(ob(ob({},l),d1.getWithHeight(o,i)),{},{payload:c,item:o})};function MD(n){"@babel/helpers - typeof";return MD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MD(n)}function Bre(n){return oqe(n)||aqe(n)||iqe(n)||rqe()}function rqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iqe(n,e){if(n){if(typeof n=="string")return A9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A9(n,e)}}function aqe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oqe(n){if(Array.isArray(n))return A9(n)}function A9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ure(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ha(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ure(Object(t),!0).forEach(function(r){f1(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ure(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function f1(n,e,t){return e=sqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sqe(n){var e=lqe(n,"string");return MD(e)=="symbol"?e:e+""}function lqe(n,e){if(MD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(MD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nf(n,e,t){return Xr(n)||Xr(e)?t:lo(e)?zu(n,e,t):or(e)?e(n):t}function xC(n,e,t,r){var i=oGe(n,function(s){return Nf(s,e)});if(t==="number"){var a=i.filter(function(s){return mt(s)||parseFloat(s)});return a.length?[zj(a),Vj(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!Xr(s)}):i;return o.map(function(s){return lo(s)||s instanceof Date?s:""})}var cqe=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,d=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,f=void 0;if(Yd(d-u)!==Yd(h-d)){var m=[];if(Yd(h-d)===Yd(l[1]-l[0])){f=h;var v=d+l[1]-l[0];m[0]=Math.min(v,(v+u)/2),m[1]=Math.max(v,(v+u)/2)}else{f=u;var y=h+l[1]-l[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var w=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>w[0]&&e<=w[1]||e>=m[0]&&e<=m[1]){o=i[c].index;break}}else{var _=Math.min(u,h),T=Math.max(u,h);if(e>(_+d)/2&&e<=(T+d)/2){o=i[c].index;break}}}else for(var A=0;A<s;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<s-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===s-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){o=r[A].index;break}return o},bW=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?ha(ha({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},uqe=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var u=a[s[l]].stackGroups,d=Object.keys(u),h=0,f=d.length;h<f;h++){var m=u[d[h]],v=m.items,y=m.cateAxisId,w=v.filter(function(M){return xg(M.type).indexOf("Bar")>=0});if(w&&w.length){var _=w[0].type.defaultProps,T=_!==void 0?ha(ha({},_),w[0].props):w[0].props,A=T.barSize,C=T[y];o[C]||(o[C]=[]);var k=Xr(A)?t:A;o[C].push({item:w[0],stackList:w.slice(1),barSize:Xr(k)?void 0:jw(k,r,0)})}}return o},dqe=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=jw(t,i,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=i/l,m=o.reduce(function(A,C){return A+C.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&f>0&&(h=!0,f*=.9,m=l*f);var v=(i-m)/2>>0,y={offset:v-c,size:0};u=o.reduce(function(A,C){var k={item:C.item,position:{offset:y.offset+y.size+c,size:h?f:C.barSize}},M=[].concat(Bre(A),[k]);return y=M[M.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(P){M.push({item:P,position:y})}),M},d)}else{var w=jw(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var _=(i-2*w-(l-1)*c)/l;_>1&&(_>>=0);var T=s===+s?Math.min(_,s):_;u=o.reduce(function(A,C,k){var M=[].concat(Bre(A),[{item:C.item,position:{offset:w+(_+c)*k+(_-T)/2,size:T}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(P){M.push({item:P,position:M[M.length-1].position})}),M},d)}return u},hqe=function(e,t,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=ewe({children:a,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,f=c.align,m=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&m==="middle")&&f!=="center"&&mt(e[f]))return ha(ha({},e),{},f1({},f,e[f]+(d||0)));if((v==="horizontal"||v==="vertical"&&f==="center")&&m!=="middle"&&mt(e[m]))return ha(ha({},e),{},f1({},m,e[m]+(h||0)))}return e},fqe=function(e,t,r){return Xr(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},twe=function(e,t,r,i,a){var o=t.props.children,s=eh(o,qj).filter(function(c){return fqe(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Nf(u,r);if(Xr(d))return c;var h=Array.isArray(d)?[zj(d),Vj(d)]:[d,d],f=l.reduce(function(m,v){var y=Nf(u,v,0),w=h[0]-Math.abs(Array.isArray(y)?y[0]:y),_=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,m[0]),Math.max(_,m[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},pqe=function(e,t,r,i,a){var o=t.map(function(s){return twe(e,s,r,a,i)}).filter(function(s){return!Xr(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},nwe=function(e,t,r,i,a){var o=t.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&twe(e,l,c,i)||xC(e,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},rwe=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},iwe=function(e,t,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===t&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(t),o||s.push(r),s},hg=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(t||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Yd(s[0]-s[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!iM(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:a?a[d]:d,index:h,offset:c}})},xB=new WeakMap,XP=function(e,t){if(typeof t!="function")return e;xB.has(e)||xB.set(e,new WeakMap);var r=xB.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},gqe=function(e,t,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:SD(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:n2(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:wC(),realScaleType:"point"}:a==="category"?{scale:SD(),realScaleType:"band"}:{scale:n2(),realScaleType:"linear"};if(Lw(i)){var l="scale".concat(Cj(i));return{scale:(Are[l]||wC)(),realScaleType:Are[l]?l:"point"}}return or(i)?{scale:i}:{scale:wC(),realScaleType:"point"}},Vre=1e-4,mqe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-Vre,o=Math.max(i[0],i[1])+Vre,s=e(t[0]),l=e(t[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([t[0],t[r-1]])}},vqe=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},yqe=function(e,t){if(!t||t.length!==2||!mt(t[0])||!mt(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!mt(e[0])||e[0]<r)&&(a[0]=r),(!mt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},bqe=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<t;++s){var l=iM(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},wqe=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<t;++o){var s=iM(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},xqe={sign:bqe,expand:i6e,none:B1,silhouette:a6e,wiggle:o6e,positive:wqe},_qe=function(e,t,r){var i=t.map(function(s){return s.props.dataKey}),a=xqe[r],o=r6e().keys(i).value(function(s,l){return+Nf(s,l,0)}).order(n9).offset(a);return o(e)},Sqe=function(e,t,r,i,a,o){if(!e)return null;var s=o?t.reverse():t,l={},c=s.reduce(function(d,h){var f,m=(f=h.type)!==null&&f!==void 0&&f.defaultProps?ha(ha({},h.type.defaultProps),h.props):h.props,v=m.stackId,y=m.hide;if(y)return d;var w=m[r],_=d[w]||{hasStack:!1,stackGroups:{}};if(lo(v)){var T=_.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(h),_.hasStack=!0,_.stackGroups[v]=T}else _.stackGroups[kj("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return ha(ha({},d),{},f1({},w,_))},l),u={};return Object.keys(c).reduce(function(d,h){var f=c[h];if(f.hasStack){var m={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(v,y){var w=f.stackGroups[y];return ha(ha({},v),{},f1({},y,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:_qe(e,w.items,a)}))},m)}return ha(ha({},d),{},f1({},h,f))},u)},Tqe=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,o=t.originalDomain,s=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=NGe(c,a,s);return e.domain([zj(u),Vj(u)]),{niceTicks:u}}if(a&&i==="number"){var d=e.domain(),h=LGe(d,a,s);return{niceTicks:h}}return null},zre=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(t.type==="category")return r[s]?r[s].coordinate+i:null;var l=Nf(o,t.dataKey,t.domain[s]);return Xr(l)?null:t.scale(l)-a/2+i},Eqe=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Aqe=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ha(ha({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(lo(a)){var o=t[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},kqe=function(e){return e.reduce(function(t,r){return[zj(r.concat([t[0]]).filter(mt)),Vj(r.concat([t[1]]).filter(mt))]},[1/0,-1/0])},awe=function(e,t,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,u){var d=kqe(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Hre=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Gre=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,k9=function(e,t,r){if(or(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(mt(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(Hre.test(e[0])){var a=+Hre.exec(e[0])[1];i[0]=t[0]-a}else or(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(mt(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(Gre.test(e[1])){var o=+Gre.exec(e[1])[1];i[1]=t[1]+o}else or(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},c2=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=q7(t,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],u=a[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},qre=function(e,t,r){return!e||!e.length||mW(e,zu(r,"type.defaultProps.domain"))?t:e},owe=function(e,t){var r=e.type.defaultProps?ha(ha({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return ha(ha({},Ur(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:bW(e),value:Nf(t,i),type:l,payload:t,chartType:c,hide:u})};function PD(n){"@babel/helpers - typeof";return PD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PD(n)}function Wre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wre(Object(t),!0).forEach(function(r){Cqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cqe(n,e,t){return e=Dqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dqe(n){var e=Iqe(n,"string");return PD(e)=="symbol"?e:e+""}function Iqe(n,e){if(PD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(PD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var u2=Math.PI/180,Mqe=function(e){return e*180/Math.PI},Jo=function(e,t,r,i){return{x:e+Math.cos(-u2*i)*r,y:t+Math.sin(-u2*i)*r}},Pqe=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},Oqe=function(e,t){var r=e.x,i=e.y,a=t.cx,o=t.cy,s=Pqe({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:Mqe(c),angleInRadian:c}},Rqe=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:t-o*360,endAngle:r-o*360}},Nqe=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},Kre=function(e,t){var r=e.x,i=e.y,a=Oqe({x:r,y:i},t),o=a.radius,s=a.angle,l=t.innerRadius,c=t.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=Rqe(t),d=u.startAngle,h=u.endAngle,f=s,m;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;m=f>=h&&f<=d}return m?Yre(Yre({},t),{},{radius:o,angle:Nqe(f,t)}):null};function OD(n){"@babel/helpers - typeof";return OD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OD(n)}var Lqe=["offset"];function jqe(n){return Uqe(n)||Bqe(n)||$qe(n)||Fqe()}function Fqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $qe(n,e){if(n){if(typeof n=="string")return C9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C9(n,e)}}function Bqe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uqe(n){if(Array.isArray(n))return C9(n)}function C9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Vqe(n,e){if(n==null)return{};var t=zqe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function zqe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Xre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function io(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xre(Object(t),!0).forEach(function(r){Hqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hqe(n,e,t){return e=Gqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gqe(n){var e=qqe(n,"string");return OD(e)=="symbol"?e:e+""}function qqe(n,e){if(OD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(OD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RD(){return RD=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RD.apply(this,arguments)}var Wqe=function(e){var t=e.value,r=e.formatter,i=Xr(e.children)?t:e.children;return or(r)?r(i):i},Yqe=function(e,t){var r=Yd(t-e),i=Math.min(Math.abs(t-e),360);return r*i},Kqe=function(e,t,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,f=l.startAngle,m=l.endAngle,v=l.clockWise,y=(d+h)/2,w=Yqe(f,m),_=w>=0?1:-1,T,A;i==="insideStart"?(T=f+_*o,A=v):i==="insideEnd"?(T=m-_*o,A=!v):i==="end"&&(T=m+_*o,A=v),A=w<=0?A:!A;var C=Jo(c,u,y,T),k=Jo(c,u,y,T+(A?1:-1)*359),M="M".concat(C.x,",").concat(C.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(k.x,",").concat(k.y),P=Xr(e.id)?kj("recharts-radial-line-"):e.id;return ve.createElement("text",RD({},r,{dominantBaseline:"central",className:Pr("recharts-radial-bar-label",s)}),ve.createElement("defs",null,ve.createElement("path",{id:P,d:M})),ve.createElement("textPath",{xlinkHref:"#".concat(P)},t))},Xqe=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,d=a.endAngle,h=(u+d)/2;if(i==="outside"){var f=Jo(o,s,c+r,h),m=f.x,v=f.y;return{x:m,y:v,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,w=Jo(o,s,y,h),_=w.x,T=w.y;return{x:_,y:T,textAnchor:"middle",verticalAnchor:"middle"}},Zqe=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=t,s=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,h=d*i,f=d>0?"end":"start",m=d>0?"start":"end",v=c>=0?1:-1,y=v*i,w=v>0?"end":"start",_=v>0?"start":"end";if(a==="top"){var T={x:s+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:f};return io(io({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var A={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return io(io({},A),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var C={x:s-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return io(io({},C),r?{width:Math.max(C.x-r.x,0),height:u}:{})}if(a==="right"){var k={x:s+c+y,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return io(io({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:u}:{})}var M=r?{width:c,height:u}:{};return a==="insideLeft"?io({x:s+y,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},M):a==="insideRight"?io({x:s+c-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},M):a==="insideTop"?io({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},M):a==="insideBottom"?io({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:f},M):a==="insideTopLeft"?io({x:s+y,y:l+h,textAnchor:_,verticalAnchor:m},M):a==="insideTopRight"?io({x:s+c-y,y:l+h,textAnchor:w,verticalAnchor:m},M):a==="insideBottomLeft"?io({x:s+y,y:l+u-h,textAnchor:_,verticalAnchor:f},M):a==="insideBottomRight"?io({x:s+c-y,y:l+u-h,textAnchor:w,verticalAnchor:f},M):IT(a)&&(mt(a.x)||tw(a.x))&&(mt(a.y)||tw(a.y))?io({x:s+jw(a.x,c),y:l+jw(a.y,u),textAnchor:"end",verticalAnchor:"end"},M):io({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},M)},Qqe=function(e){return"cx"in e&&mt(e.cx)};function Rs(n){var e=n.offset,t=e===void 0?5:e,r=Vqe(n,Lqe),i=io({offset:t},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!a||Xr(s)&&Xr(l)&&!K.isValidElement(c)&&!or(c))return null;if(K.isValidElement(c))return K.cloneElement(c,i);var f;if(or(c)){if(f=K.createElement(c,i),K.isValidElement(f))return f}else f=Wqe(i);var m=Qqe(a),v=Ur(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Kqe(i,f,v);var y=m?Xqe(i):Zqe(i);return ve.createElement(KN,RD({className:Pr("recharts-label",d)},v,y,{breakAll:h}),f)}Rs.displayName="Label";var swe=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,f=e.top,m=e.left,v=e.width,y=e.height,w=e.clockWise,_=e.labelViewBox;if(_)return _;if(mt(v)&&mt(y)){if(mt(d)&&mt(h))return{x:d,y:h,width:v,height:y};if(mt(f)&&mt(m))return{x:f,y:m,width:v,height:y}}return mt(d)&&mt(h)?{x:d,y:h,width:0,height:0}:mt(t)&&mt(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:w}:e.viewBox?e.viewBox:{}},Jqe=function(e,t){return e?e===!0?ve.createElement(Rs,{key:"label-implicit",viewBox:t}):lo(e)?ve.createElement(Rs,{key:"label-implicit",viewBox:t,value:e}):K.isValidElement(e)?e.type===Rs?K.cloneElement(e,{key:"label-implicit",viewBox:t}):ve.createElement(Rs,{key:"label-implicit",content:e,viewBox:t}):or(e)?ve.createElement(Rs,{key:"label-implicit",content:e,viewBox:t}):IT(e)?ve.createElement(Rs,RD({viewBox:t},e,{key:"label-implicit"})):null:null},e7e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=swe(e),o=eh(i,Rs).map(function(l,c){return K.cloneElement(l,{viewBox:t||a,key:"label-".concat(c)})});if(!r)return o;var s=Jqe(e.label,t||a);return[s].concat(jqe(o))};Rs.parseViewBox=swe;Rs.renderCallByParent=e7e;var _B,Zre;function t7e(){if(Zre)return _B;Zre=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return _B=n,_B}var n7e=t7e();const r7e=kr(n7e);function ND(n){"@babel/helpers - typeof";return ND=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ND(n)}var i7e=["valueAccessor"],a7e=["data","dataKey","clockWise","id","textBreakAll"];function o7e(n){return u7e(n)||c7e(n)||l7e(n)||s7e()}function s7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7e(n,e){if(n){if(typeof n=="string")return D9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D9(n,e)}}function c7e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function u7e(n){if(Array.isArray(n))return D9(n)}function D9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function d2(){return d2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d2.apply(this,arguments)}function Qre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Jre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qre(Object(t),!0).forEach(function(r){d7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function d7e(n,e,t){return e=h7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h7e(n){var e=f7e(n,"string");return ND(e)=="symbol"?e:e+""}function f7e(n,e){if(ND(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ND(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eie(n,e){if(n==null)return{};var t=p7e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function p7e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var g7e=function(e){return Array.isArray(e.value)?r7e(e.value):e.value};function bw(n){var e=n.valueAccessor,t=e===void 0?g7e:e,r=eie(n,i7e),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=eie(r,a7e);return!i||!i.length?null:ve.createElement(Oo,{className:"recharts-label-list"},i.map(function(u,d){var h=Xr(a)?t(u,d):Nf(u&&u.payload,a),f=Xr(s)?{}:{id:"".concat(s,"-").concat(d)};return ve.createElement(Rs,d2({},Ur(u,!0),c,f,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Rs.parseViewBox(Xr(o)?u:Jre(Jre({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}bw.displayName="LabelList";function m7e(n,e){return n?n===!0?ve.createElement(bw,{key:"labelList-implicit",data:e}):ve.isValidElement(n)||or(n)?ve.createElement(bw,{key:"labelList-implicit",data:e,content:n}):IT(n)?ve.createElement(bw,d2({data:e},n,{key:"labelList-implicit"})):null:null}function v7e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=eh(r,bw).map(function(o,s){return K.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!t)return i;var a=m7e(n.label,e);return[a].concat(o7e(i))}bw.renderCallByParent=v7e;function LD(n){"@babel/helpers - typeof";return LD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LD(n)}function I9(){return I9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},I9.apply(this,arguments)}function tie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tie(Object(t),!0).forEach(function(r){y7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y7e(n,e,t){return e=b7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b7e(n){var e=w7e(n,"string");return LD(e)=="symbol"?e:e+""}function w7e(n,e){if(LD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(LD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var x7e=function(e,t){var r=Yd(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},ZP=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,d=Math.asin(l/u)/u2,h=c?a:a+o*d,f=Jo(t,r,u,h),m=Jo(t,r,i,h),v=c?a-o*d:a,y=Jo(t,r,u*Math.cos(d*u2),v);return{center:f,circleTangency:m,lineTangency:y,theta:d}},lwe=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=x7e(o,s),c=o+l,u=Jo(t,r,a,o),d=Jo(t,r,a,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var f=Jo(t,r,i,o),m=Jo(t,r,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},_7e=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=Yd(u-c),h=ZP({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),f=h.circleTangency,m=h.lineTangency,v=h.theta,y=ZP({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),w=y.circleTangency,_=y.lineTangency,T=y.theta,A=l?Math.abs(c-u):Math.abs(c-u)-v-T;if(A<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):lwe({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var k=ZP({cx:t,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),M=k.circleTangency,P=k.lineTangency,O=k.theta,j=ZP({cx:t,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),L=j.circleTangency,B=j.lineTangency,$=j.theta,Y=l?Math.abs(c-u):Math.abs(c-u)-O-$;if(Y<0&&o===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Y>180),",").concat(+(d>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},S7e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cwe=function(e){var t=nie(nie({},S7e),e),r=t.cx,i=t.cy,a=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(o<a||u===d)return null;var f=Pr("recharts-sector",h),m=o-a,v=jw(s,m,0,!0),y;return v>0&&Math.abs(u-d)<360?y=_7e({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=lwe({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),ve.createElement("path",I9({},Ur(t,!0),{className:f,d:y,role:"img"}))};function jD(n){"@babel/helpers - typeof";return jD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jD(n)}function M9(){return M9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},M9.apply(this,arguments)}function rie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function iie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rie(Object(t),!0).forEach(function(r){T7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function T7e(n,e,t){return e=E7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E7e(n){var e=A7e(n,"string");return jD(e)=="symbol"?e:e+""}function A7e(n,e){if(jD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(jD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var aie={curveBasisClosed:qUe,curveBasisOpen:WUe,curveBasis:GUe,curveBumpX:MUe,curveBumpY:PUe,curveLinearClosed:YUe,curveLinear:Ij,curveMonotoneX:KUe,curveMonotoneY:XUe,curveNatural:ZUe,curveStep:QUe,curveStepAfter:e6e,curveStepBefore:JUe},QP=function(e){return e.x===+e.x&&e.y===+e.y},qA=function(e){return e.x},WA=function(e){return e.y},k7e=function(e,t){if(or(e))return e;var r="curve".concat(Cj(e));return(r==="curveMonotone"||r==="curveBump")&&t?aie["".concat(r).concat(t==="vertical"?"Y":"X")]:aie[r]||Ij},C7e=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=k7e(r,s),d=c?a.filter(function(v){return QP(v)}):a,h;if(Array.isArray(o)){var f=c?o.filter(function(v){return QP(v)}):o,m=d.map(function(v,y){return iie(iie({},v),{},{base:f[y]})});return s==="vertical"?h=zP().y(WA).x1(qA).x0(function(v){return v.base.x}):h=zP().x(qA).y1(WA).y0(function(v){return v.base.y}),h.defined(QP).curve(u),h(m)}return s==="vertical"&&mt(o)?h=zP().y(WA).x1(qA).x0(o):mt(o)?h=zP().x(qA).y1(WA).y0(o):h=f0e().x(qA).y(WA),h.defined(QP).curve(u),h(d)},oie=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?C7e(e):i;return ve.createElement("path",M9({},Ur(e,!1),jN(e),{className:Pr("recharts-curve",t),d:o,ref:a}))},SB={exports:{}},TB,sie;function D7e(){if(sie)return TB;sie=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return TB=n,TB}var EB,lie;function I7e(){if(lie)return EB;lie=1;var n=D7e();function e(){}function t(){}return t.resetWarningCache=e,EB=function(){function r(o,s,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},EB}var cie;function M7e(){return cie||(cie=1,SB.exports=I7e()()),SB.exports}var P7e=M7e();const Wr=kr(P7e);var O7e=Object.getOwnPropertyNames,R7e=Object.getOwnPropertySymbols,N7e=Object.prototype.hasOwnProperty;function uie(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function JP(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var a=i.cache,o=a.get(t),s=a.get(r);if(o&&s)return o===r&&s===t;a.set(t,r),a.set(r,t);var l=n(t,r,i);return a.delete(t),a.delete(r),l}}function die(n){return O7e(n).concat(R7e(n))}var L7e=Object.hasOwn||function(n,e){return N7e.call(n,e)};function ax(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var j7e="__v",F7e="__o",$7e="_owner",hie=Object.getOwnPropertyDescriptor,fie=Object.keys;function B7e(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function U7e(n,e){return ax(n.getTime(),e.getTime())}function V7e(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function z7e(n,e){return n===e}function pie(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(s=c.next())&&!s.done;){if(i[d]){d++;continue}var h=o.value,f=s.value;if(t.equals(h[0],f[0],l,d,n,e,t)&&t.equals(h[1],f[1],h[0],f[0],n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var H7e=ax;function G7e(n,e,t){var r=fie(n),i=r.length;if(fie(e).length!==i)return!1;for(;i-- >0;)if(!uwe(n,e,t,r[i]))return!1;return!0}function YA(n,e,t){var r=die(n),i=r.length;if(die(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!uwe(n,e,t,a)||(o=hie(n,a),s=hie(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function q7e(n,e){return ax(n.valueOf(),e.valueOf())}function W7e(n,e){return n.source===e.source&&n.flags===e.flags}function gie(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!i[u]&&t.equals(o.value,s.value,o.value,s.value,n,e,t)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function Y7e(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function K7e(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function uwe(n,e,t,r){return(r===$7e||r===F7e||r===j7e)&&(n.$$typeof||e.$$typeof)?!0:L7e(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var X7e="[object Arguments]",Z7e="[object Boolean]",Q7e="[object Date]",J7e="[object Error]",eWe="[object Map]",tWe="[object Number]",nWe="[object Object]",rWe="[object RegExp]",iWe="[object Set]",aWe="[object String]",oWe="[object URL]",sWe=Array.isArray,mie=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,vie=Object.assign,lWe=Object.prototype.toString.call.bind(Object.prototype.toString);function cWe(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,a=n.areMapsEqual,o=n.areNumbersEqual,s=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,c=n.areRegExpsEqual,u=n.areSetsEqual,d=n.areTypedArraysEqual,h=n.areUrlsEqual;return function(m,v,y){if(m===v)return!0;if(m==null||v==null)return!1;var w=typeof m;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?o(m,v,y):w==="function"?i(m,v,y):!1;var _=m.constructor;if(_!==v.constructor)return!1;if(_===Object)return s(m,v,y);if(sWe(m))return e(m,v,y);if(mie!=null&&mie(m))return d(m,v,y);if(_===Date)return t(m,v,y);if(_===RegExp)return c(m,v,y);if(_===Map)return a(m,v,y);if(_===Set)return u(m,v,y);var T=lWe(m);return T===Q7e?t(m,v,y):T===rWe?c(m,v,y):T===eWe?a(m,v,y):T===iWe?u(m,v,y):T===nWe?typeof m.then!="function"&&typeof v.then!="function"&&s(m,v,y):T===oWe?h(m,v,y):T===J7e?r(m,v,y):T===X7e?s(m,v,y):T===Z7e||T===tWe||T===aWe?l(m,v,y):!1}}function uWe(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?YA:B7e,areDatesEqual:U7e,areErrorsEqual:V7e,areFunctionsEqual:z7e,areMapsEqual:r?uie(pie,YA):pie,areNumbersEqual:H7e,areObjectsEqual:r?YA:G7e,arePrimitiveWrappersEqual:q7e,areRegExpsEqual:W7e,areSetsEqual:r?uie(gie,YA):gie,areTypedArraysEqual:r?YA:Y7e,areUrlsEqual:K7e};if(t&&(i=vie({},i,t(i))),e){var a=JP(i.areArraysEqual),o=JP(i.areMapsEqual),s=JP(i.areObjectsEqual),l=JP(i.areSetsEqual);i=vie({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function dWe(n){return function(e,t,r,i,a,o,s){return n(e,t,s)}}function hWe(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,a=n.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,f=u.meta;return t(l,c,{cache:h,equals:i,meta:f,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return t(l,c,o)}}var fWe=Ry();Ry({strict:!0});Ry({circular:!0});Ry({circular:!0,strict:!0});Ry({createInternalComparator:function(){return ax}});Ry({strict:!0,createInternalComparator:function(){return ax}});Ry({circular:!0,createInternalComparator:function(){return ax}});Ry({circular:!0,createInternalComparator:function(){return ax},strict:!0});function Ry(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,a=n.strict,o=a===void 0?!1:a,s=uWe(n),l=cWe(s),c=r?r(l):dWe(l);return hWe({circular:t,comparator:l,createState:i,equals:c,strict:o})}function pWe(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function yie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):pWe(i)};requestAnimationFrame(r)}function P9(n){"@babel/helpers - typeof";return P9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P9(n)}function gWe(n){return bWe(n)||yWe(n)||vWe(n)||mWe()}function mWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vWe(n,e){if(n){if(typeof n=="string")return bie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bie(n,e)}}function bie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function bWe(n){if(Array.isArray(n))return n}function wWe(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var o=a,s=gWe(o),l=s[0],c=s.slice(1);if(typeof l=="number"){yie(i.bind(null,c),l);return}i(l),yie(i.bind(null,c));return}P9(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function FD(n){"@babel/helpers - typeof";return FD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FD(n)}function wie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wie(Object(t),!0).forEach(function(r){dwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function dwe(n,e,t){return e=xWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xWe(n){var e=_We(n,"string");return FD(e)==="symbol"?e:String(e)}function _We(n,e){if(FD(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(FD(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var SWe=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},TWe=function(e){return e},EWe=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},_C=function(e,t){return Object.keys(t).reduce(function(r,i){return xie(xie({},r),{},dwe({},i,e(i,t[i])))},{})},_ie=function(e,t,r){return e.map(function(i){return"".concat(EWe(i)," ").concat(t,"ms ").concat(r)}).join(",")};function AWe(n,e){return DWe(n)||CWe(n,e)||hwe(n,e)||kWe()}function kWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function DWe(n){if(Array.isArray(n))return n}function IWe(n){return OWe(n)||PWe(n)||hwe(n)||MWe()}function MWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hwe(n,e){if(n){if(typeof n=="string")return O9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O9(n,e)}}function PWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function OWe(n){if(Array.isArray(n))return O9(n)}function O9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var h2=1e-4,fwe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},pwe=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},Sie=function(e,t){return function(r){var i=fwe(e,t);return pwe(i,r)}},RWe=function(e,t){return function(r){var i=fwe(e,t),a=[].concat(IWe(i.map(function(o,s){return o*s}).slice(1)),[0]);return pwe(a,r)}},Tie=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2],s=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=AWe(c,4);i=u[0],a=u[1],o=u[2],s=u[3]}}}var d=Sie(i,o),h=Sie(a,s),f=RWe(i,o),m=function(w){return w>1?1:w<0?0:w},v=function(w){for(var _=w>1?1:w,T=_,A=0;A<8;++A){var C=d(T)-_,k=f(T);if(Math.abs(C-_)<h2||k<h2)return h(T);T=m(T-C/k)}return h(T)};return v.isStepper=!1,v},NWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(u,d,h){var f=-(u-d)*r,m=h*a,v=h+(f-m)*s/1e3,y=h*s/1e3+u;return Math.abs(y-d)<h2&&Math.abs(v)<h2?[d,0]:[y,v]};return l.isStepper=!0,l.dt=s,l},LWe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Tie(i);case"spring":return NWe();default:if(i.split("(")[0]==="cubic-bezier")return Tie(i)}return typeof i=="function"?i:null};function $D(n){"@babel/helpers - typeof";return $D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$D(n)}function Eie(n){return $We(n)||FWe(n)||gwe(n)||jWe()}function jWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $We(n){if(Array.isArray(n))return N9(n)}function Aie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Yo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Aie(Object(t),!0).forEach(function(r){R9(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Aie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function R9(n,e,t){return e=BWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BWe(n){var e=UWe(n,"string");return $D(e)==="symbol"?e:String(e)}function UWe(n,e){if($D(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if($D(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VWe(n,e){return GWe(n)||HWe(n,e)||gwe(n,e)||zWe()}function zWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gwe(n,e){if(n){if(typeof n=="string")return N9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N9(n,e)}}function N9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function HWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function GWe(n){if(Array.isArray(n))return n}var f2=function(e,t,r){return e+(t-e)*r},L9=function(e){var t=e.from,r=e.to;return t!==r},qWe=function n(e,t,r){var i=_C(function(a,o){if(L9(o)){var s=e(o.from,o.to,o.velocity),l=VWe(s,2),c=l[0],u=l[1];return Yo(Yo({},o),{},{from:c,velocity:u})}return o},t);return r<1?_C(function(a,o){return L9(o)?Yo(Yo({},o),{},{velocity:f2(o.velocity,i[a].velocity,r),from:f2(o.from,i[a].from,r)}):o},t):n(e,i,r-1)};const WWe=function(n,e,t,r,i){var a=SWe(n,e),o=a.reduce(function(y,w){return Yo(Yo({},y),{},R9({},w,[n[w],e[w]]))},{}),s=a.reduce(function(y,w){return Yo(Yo({},y),{},R9({},w,{from:n[w],velocity:0,to:e[w]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return _C(function(w,_){return _.from},s)},f=function(){return!Object.values(s).filter(L9).length},m=function(w){c||(c=w);var _=w-c,T=_/t.dt;s=qWe(t,s,T),i(Yo(Yo(Yo({},n),e),h())),c=w,f()||(l=requestAnimationFrame(d))},v=function(w){u||(u=w);var _=(w-u)/r,T=_C(function(C,k){return f2.apply(void 0,Eie(k).concat([t(_)]))},o);if(i(Yo(Yo(Yo({},n),e),T)),_<1)l=requestAnimationFrame(d);else{var A=_C(function(C,k){return f2.apply(void 0,Eie(k).concat([t(1)]))},o);i(Yo(Yo(Yo({},n),e),A))}};return d=t.isStepper?m:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function K1(n){"@babel/helpers - typeof";return K1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K1(n)}var YWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KWe(n,e){if(n==null)return{};var t=XWe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function XWe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function AB(n){return eYe(n)||JWe(n)||QWe(n)||ZWe()}function ZWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QWe(n,e){if(n){if(typeof n=="string")return j9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j9(n,e)}}function JWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eYe(n){if(Array.isArray(n))return j9(n)}function j9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Md(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kie(Object(t),!0).forEach(function(r){Hk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hk(n,e,t){return e=mwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nYe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,mwe(r.key),r)}}function rYe(n,e,t){return e&&nYe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function mwe(n){var e=iYe(n,"string");return K1(e)==="symbol"?e:String(e)}function iYe(n,e){if(K1(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(K1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function aYe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&F9(n,e)}function F9(n,e){return F9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},F9(n,e)}function oYe(n){var e=sYe();return function(){var r=p2(n),i;if(e){var a=p2(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return $9(this,i)}}function $9(n,e){if(e&&(K1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B9(n)}function B9(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sYe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p2(n){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p2(n)}var yy=function(n){aYe(t,n);var e=oYe(t);function t(r,i){var a;tYe(this,t),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,h=o.children,f=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(B9(a)),a.changeStyle=a.changeStyle.bind(B9(a)),!s||f<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:u}),$9(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof h=="function")return a.state={style:c},$9(a);a.state={style:l?Hk({},l,c):c}}else a.state={style:{}};return a}return rYe(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,d=a.from,h=this.state.style;if(s){if(!o){var f={style:l?Hk({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(f);return}if(!(fWe(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=m||c?d:i.to;if(this.state&&h){var y={style:l?Hk({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(y)}this.runAnimation(Md(Md({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,f=WWe(o,s,LWe(c),l,this.changeStyle),m=function(){a.stopJSAnimation=f()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],u=c.style,d=c.duration,h=d===void 0?0:d,f=function(v,y,w){if(w===0)return v;var _=y.duration,T=y.easing,A=T===void 0?"ease":T,C=y.style,k=y.properties,M=y.onAnimationEnd,P=w>0?o[w-1]:y,O=k||Object.keys(C);if(typeof A=="function"||A==="spring")return[].concat(AB(v),[a.runJSAnimation.bind(a,{from:P.style,to:C,duration:_,easing:A}),_]);var j=_ie(O,_,A),L=Md(Md(Md({},P.style),C),{},{transition:j});return[].concat(AB(v),[L,_,M]).filter(TWe)};return this.manager.start([l].concat(AB(o.reduce(f,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=wWe());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,f=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?Hk({},s,l):l,y=_ie(Object.keys(v),o,c);m.start([u,a,Md(Md({},v),{},{transition:y}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=KWe(i,YWe),c=K.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!s||c===0||o<=0)return a;var d=function(f){var m=f.props,v=m.style,y=v===void 0?{}:v,w=m.className,_=K.cloneElement(f,Md(Md({},l),{},{style:Md(Md({},y),u),className:w}));return _};return c===1?d(K.Children.only(a)):ve.createElement("div",null,K.Children.map(a,function(h){return d(h)}))}}]),t}(K.PureComponent);yy.displayName="Animate";yy.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};yy.propTypes={from:Wr.oneOfType([Wr.object,Wr.string]),to:Wr.oneOfType([Wr.object,Wr.string]),attributeName:Wr.string,duration:Wr.number,begin:Wr.number,easing:Wr.oneOfType([Wr.string,Wr.func]),steps:Wr.arrayOf(Wr.shape({duration:Wr.number.isRequired,style:Wr.object.isRequired,easing:Wr.oneOfType([Wr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Wr.func]),properties:Wr.arrayOf("string"),onAnimationEnd:Wr.func})),children:Wr.oneOfType([Wr.node,Wr.func]),isActive:Wr.bool,canBegin:Wr.bool,onAnimationEnd:Wr.func,shouldReAnimate:Wr.bool,onAnimationStart:Wr.func,onAnimationReStart:Wr.func};function BD(n){"@babel/helpers - typeof";return BD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BD(n)}function g2(){return g2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},g2.apply(this,arguments)}function lYe(n,e){return hYe(n)||dYe(n,e)||uYe(n,e)||cYe()}function cYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uYe(n,e){if(n){if(typeof n=="string")return Cie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cie(n,e)}}function Cie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function dYe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function hYe(n){if(Array.isArray(n))return n}function Die(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Iie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Die(Object(t),!0).forEach(function(r){fYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Die(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fYe(n,e,t){return e=pYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pYe(n){var e=gYe(n,"string");return BD(e)=="symbol"?e:e+""}function gYe(n,e){if(BD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(BD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Mie=function(e,t,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,f=4;h<f;h++)d[h]=a[h]>o?o:a[h];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+i-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+i)),u+="L ".concat(e+l*d[3],",").concat(t+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+i-s*d[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var m=Math.min(o,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+i,`
            L `).concat(e+l*m,",").concat(t+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+i-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},mYe=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,o=t.y,s=t.width,l=t.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),u=Math.max(a,a+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return r>=c&&r<=u&&i>=d&&i<=h}return!1},vYe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wW=function(e){var t=Iie(Iie({},vYe),e),r=K.useRef(),i=K.useState(-1),a=lYe(i,2),o=a[0],s=a[1];K.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&s(A)}catch{}},[]);var l=t.x,c=t.y,u=t.width,d=t.height,h=t.radius,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isAnimationActive,_=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var T=Pr("recharts-rectangle",f);return _?ve.createElement(yy,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:v,animationEasing:m,isActive:_},function(A){var C=A.width,k=A.height,M=A.x,P=A.y;return ve.createElement(yy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:w,easing:m},ve.createElement("path",g2({},Ur(t,!0),{className:T,d:Mie(M,P,C,k,h),ref:r})))}):ve.createElement("path",g2({},Ur(t,!0),{className:T,d:Mie(l,c,u,d,h)}))};function U9(){return U9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},U9.apply(this,arguments)}var vwe=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,o=Pr("recharts-dot",a);return t===+t&&r===+r&&i===+i?ve.createElement("circle",U9({},Ur(e,!1),jN(e),{className:o,cx:t,cy:r,r:i})):null};function UD(n){"@babel/helpers - typeof";return UD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UD(n)}var yYe=["x","y","top","left","width","height","className"];function V9(){return V9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},V9.apply(this,arguments)}function Pie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bYe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pie(Object(t),!0).forEach(function(r){wYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function wYe(n,e,t){return e=xYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xYe(n){var e=_Ye(n,"string");return UD(e)=="symbol"?e:e+""}function _Ye(n,e){if(UD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(UD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function SYe(n,e){if(n==null)return{};var t=TYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function TYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var EYe=function(e,t,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(r)},AYe=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,f=h===void 0?0:h,m=e.className,v=SYe(e,yYe),y=bYe({x:r,y:a,top:s,left:c,width:d,height:f},v);return!mt(r)||!mt(a)||!mt(d)||!mt(f)||!mt(s)||!mt(c)?null:ve.createElement("path",V9({},Ur(y,!0),{className:Pr("recharts-cross",m),d:EYe(r,a,d,f,s,c)}))},kB,Oie;function kYe(){if(Oie)return kB;Oie=1;var n=L0e(),e=n(Object.getPrototypeOf,Object);return kB=e,kB}var CB,Rie;function CYe(){if(Rie)return CB;Rie=1;var n=Qg(),e=kYe(),t=Jg(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function c(u){if(!t(u)||n(u)!=r)return!1;var d=e(u);if(d===null)return!0;var h=s.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return CB=c,CB}var DYe=CYe();const IYe=kr(DYe);var DB,Nie;function MYe(){if(Nie)return DB;Nie=1;var n=Qg(),e=Jg(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return DB=r,DB}var PYe=MYe();const OYe=kr(PYe);function VD(n){"@babel/helpers - typeof";return VD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VD(n)}function m2(){return m2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},m2.apply(this,arguments)}function RYe(n,e){return FYe(n)||jYe(n,e)||LYe(n,e)||NYe()}function NYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LYe(n,e){if(n){if(typeof n=="string")return Lie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lie(n,e)}}function Lie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function jYe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function FYe(n){if(Array.isArray(n))return n}function jie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jie(Object(t),!0).forEach(function(r){$Ye(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $Ye(n,e,t){return e=BYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BYe(n){var e=UYe(n,"string");return VD(e)=="symbol"?e:e+""}function UYe(n,e){if(VD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(VD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var $ie=function(e,t,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-o/2,",").concat(t+a),s+="L ".concat(e+r-o/2-i,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},VYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zYe=function(e){var t=Fie(Fie({},VYe),e),r=K.useRef(),i=K.useState(-1),a=RYe(i,2),o=a[0],s=a[1];K.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=t.x,c=t.y,u=t.upperWidth,d=t.lowerWidth,h=t.height,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var _=Pr("recharts-trapezoid",f);return w?ve.createElement(yy,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:v,animationEasing:m,isActive:w},function(T){var A=T.upperWidth,C=T.lowerWidth,k=T.height,M=T.x,P=T.y;return ve.createElement(yy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:m},ve.createElement("path",m2({},Ur(t,!0),{className:_,d:$ie(M,P,A,C,k),ref:r})))}):ve.createElement("g",null,ve.createElement("path",m2({},Ur(t,!0),{className:_,d:$ie(l,c,u,d,h)})))},HYe=["option","shapeType","propTransformer","activeClassName","isActive"];function zD(n){"@babel/helpers - typeof";return zD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zD(n)}function GYe(n,e){if(n==null)return{};var t=qYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function qYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Bie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bie(Object(t),!0).forEach(function(r){WYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WYe(n,e,t){return e=YYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YYe(n){var e=KYe(n,"string");return zD(e)=="symbol"?e:e+""}function KYe(n,e){if(zD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(zD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XYe(n,e){return v2(v2({},e),n)}function ZYe(n,e){return n==="symbols"}function Uie(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return ve.createElement(wW,t);case"trapezoid":return ve.createElement(zYe,t);case"sector":return ve.createElement(cwe,t);case"symbols":if(ZYe(e))return ve.createElement(F7,t);break;default:return null}}function QYe(n){return K.isValidElement(n)?n.props:n}function JYe(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?XYe:r,a=n.activeClassName,o=a===void 0?"recharts-active-shape":a,s=n.isActive,l=GYe(n,HYe),c;if(K.isValidElement(e))c=K.cloneElement(e,v2(v2({},l),QYe(e)));else if(or(e))c=e(l);else if(IYe(e)&&!OYe(e)){var u=i(e,l);c=ve.createElement(Uie,{shapeType:t,elementProps:u})}else{var d=l;c=ve.createElement(Uie,{shapeType:t,elementProps:d})}return s?ve.createElement(Oo,{className:o},c):c}function Wj(n,e){return e!=null&&"trapezoids"in n.props}function Yj(n,e){return e!=null&&"sectors"in n.props}function HD(n,e){return e!=null&&"points"in n.props}function eKe(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function tKe(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function nKe(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function rKe(n,e){var t;return Wj(n,e)?t=eKe:Yj(n,e)?t=tKe:HD(n,e)&&(t=nKe),t}function iKe(n,e){var t;return Wj(n,e)?t="trapezoids":Yj(n,e)?t="sectors":HD(n,e)&&(t="points"),t}function aKe(n,e){if(Wj(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(Yj(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return HD(n,e)?e.payload:{}}function oKe(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=iKe(t,e),a=aKe(t,e),o=r.filter(function(l,c){var u=mW(a,l),d=t.props[i].filter(function(m){var v=rKe(t,e);return v(m,e)}),h=t.props[i].indexOf(d[d.length-1]),f=c===h;return u&&f}),s=r.indexOf(o[o.length-1]);return s}var IB,Vie;function sKe(){if(Vie)return IB;Vie=1;var n=Math.ceil,e=Math.max;function t(r,i,a,o){for(var s=-1,l=e(n((i-r)/(a||1)),0),c=Array(l);l--;)c[o?l:++s]=r,r+=a;return c}return IB=t,IB}var MB,zie;function ywe(){if(zie)return MB;zie=1;var n=Q0e(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return MB=r,MB}var PB,Hie;function lKe(){if(Hie)return PB;Hie=1;var n=sKe(),e=Rj(),t=ywe();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=t(a),o===void 0?(o=a,a=0):o=t(o),s=s===void 0?a<o?1:-1:t(s),n(a,o,s,i)}}return PB=r,PB}var OB,Gie;function cKe(){if(Gie)return OB;Gie=1;var n=lKe(),e=n();return OB=e,OB}var uKe=cKe();const y2=kr(uKe);function GD(n){"@babel/helpers - typeof";return GD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GD(n)}function qie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Wie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qie(Object(t),!0).forEach(function(r){bwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function bwe(n,e,t){return e=dKe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dKe(n){var e=hKe(n,"string");return GD(e)=="symbol"?e:e+""}function hKe(n,e){if(GD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(GD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var fKe=["Webkit","Moz","O","ms"],pKe=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=fKe.reduce(function(a,o){return Wie(Wie({},a),{},bwe({},o+r,t))},{});return i[e]=t,i};function X1(n){"@babel/helpers - typeof";return X1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X1(n)}function b2(){return b2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b2.apply(this,arguments)}function Yie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function RB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yie(Object(t),!0).forEach(function(r){Dc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Kie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,xwe(r.key),r)}}function mKe(n,e,t){return e&&Kie(n.prototype,e),t&&Kie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function vKe(n,e,t){return e=w2(e),yKe(n,wwe()?Reflect.construct(e,t||[],w2(n).constructor):e.apply(n,t))}function yKe(n,e){if(e&&(X1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bKe(n)}function bKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wwe=function(){return!!n})()}function w2(n){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w2(n)}function wKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&z9(n,e)}function z9(n,e){return z9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z9(n,e)}function Dc(n,e,t){return e=xwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xwe(n){var e=xKe(n,"string");return X1(e)=="symbol"?e:e+""}function xKe(n,e){if(X1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(X1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var _Ke=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,c=wC().domain(y2(0,l)).range([a,a+o-s]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},Xie=function(e){return e.changedTouches&&!!e.changedTouches.length},Z1=function(n){function e(t){var r;return gKe(this,e),r=vKe(this,e,[t]),Dc(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Dc(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Dc(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Dc(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Dc(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Dc(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Dc(r,"handleSlideDragStart",function(i){var a=Xie(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return wKe(e,n),mKe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,d=Math.min(i,a),h=Math.max(i,a),f=e.getIndexInRange(o,d),m=e.getIndexInRange(o,h);return{startIndex:f-f%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Nf(a[r],s,r);return or(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,h=l.startIndex,f=l.endIndex,m=l.onChange,v=r.pageX-a;v>0?v=Math.min(v,c+u-d-s,c+u-d-o):v<0&&(v=Math.max(v,c-o,c-s));var y=this.getIndex({startX:o+v,endX:s+v});(y.startIndex!==h||y.endIndex!==f)&&m&&m(y),this.setState({startX:o+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=Xie(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],u=this.props,d=u.x,h=u.width,f=u.travellerWidth,m=u.onChange,v=u.gap,y=u.data,w={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,d+h-f-c):_<0&&(_=Math.max(_,d-c)),w[o]=c+_;var T=this.getIndex(w),A=T.startIndex,C=T.endIndex,k=function(){var P=y.length-1;return o==="startX"&&(s>l?A%v===0:C%v===0)||s<l&&C===P||o==="endX"&&(s>l?C%v===0:A%v===0)||s>l&&C===P};this.setState(Dc(Dc({},o,c+_),"brushMoveStartX",r.pageX),function(){m&&k()&&m(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,u=this.state[i],d=s.indexOf(u);if(d!==-1){var h=d+r;if(!(h===-1||h>=s.length)){var f=s[h];i==="startX"&&f>=c||i==="endX"&&f<=l||this.setState(Dc({},i,f),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return ve.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,d=K.Children.only(c);return d?ve.cloneElement(d,{x:i,y:a,width:o,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,h=l.traveller,f=l.ariaLabel,m=l.data,v=l.startIndex,y=l.endIndex,w=Math.max(r,this.props.x),_=RB(RB({},Ur(this.props,!1)),{},{x:w,y:c,width:u,height:d}),T=f||"Min value: ".concat((a=m[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=m[y])===null||o===void 0?void 0:o.name);return ve.createElement(Oo,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),s.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return ve.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,h=u.endX,f=5,m={pointerEvents:"none",fill:c};return ve.createElement(Oo,{className:"recharts-brush-texts"},ve.createElement(KN,b2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-f,y:o+s/2},m),this.getTextOfTick(i)),ve.createElement(KN,b2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+f,y:o+s/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,h=this.state,f=h.startX,m=h.endX,v=h.isTextActive,y=h.isSlideMoving,w=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!mt(s)||!mt(l)||!mt(c)||!mt(u)||c<=0||u<=0)return null;var T=Pr("recharts-brush",a),A=ve.Children.count(o)===1,C=pKe("userSelect","none");return ve.createElement(Oo,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(f,m),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(m,"endX"),(v||y||w||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return ve.createElement(ve.Fragment,null,ve.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),ve.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),ve.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ve.isValidElement(r)?a=ve.cloneElement(r,i):or(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return RB({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?_Ke({data:a,width:o,x:s,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var h=i.scale.domain().map(function(f){return i.scale(f)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(K.PureComponent);Dc(Z1,"displayName","Brush");Dc(Z1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var NB,Zie;function SKe(){if(Zie)return NB;Zie=1;var n=G7();function e(t,r){var i;return n(t,function(a,o,s){return i=r(a,o,s),!i}),!!i}return NB=e,NB}var LB,Qie;function TKe(){if(Qie)return LB;Qie=1;var n=D0e(),e=My(),t=SKe(),r=Zl(),i=Rj();function a(o,s,l){var c=r(o)?n:t;return l&&i(o,s,l)&&(s=void 0),c(o,e(s,3))}return LB=a,LB}var EKe=TKe();const AKe=kr(EKe);var Cf=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},jB,Jie;function kKe(){if(Jie)return jB;Jie=1;var n=W0e();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return jB=e,jB}var FB,eae;function CKe(){if(eae)return FB;eae=1;var n=kKe(),e=G0e(),t=My();function r(i,a){var o={};return a=t(a,3),e(i,function(s,l,c){n(o,l,a(s,l,c))}),o}return FB=r,FB}var DKe=CKe();const IKe=kr(DKe);var $B,tae;function MKe(){if(tae)return $B;tae=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return $B=n,$B}var BB,nae;function PKe(){if(nae)return BB;nae=1;var n=G7();function e(t,r){var i=!0;return n(t,function(a,o,s){return i=!!r(a,o,s),i}),i}return BB=e,BB}var UB,rae;function OKe(){if(rae)return UB;rae=1;var n=MKe(),e=PKe(),t=My(),r=Zl(),i=Rj();function a(o,s,l){var c=r(o)?n:e;return l&&i(o,s,l)&&(s=void 0),c(o,t(s,3))}return UB=a,UB}var RKe=OKe();const _we=kr(RKe);var NKe=["x","y"];function qD(n){"@babel/helpers - typeof";return qD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qD(n)}function H9(){return H9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},H9.apply(this,arguments)}function iae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function KA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iae(Object(t),!0).forEach(function(r){LKe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function LKe(n,e,t){return e=jKe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jKe(n){var e=FKe(n,"string");return qD(e)=="symbol"?e:e+""}function FKe(n,e){if(qD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $Ke(n,e){if(n==null)return{};var t=BKe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BKe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function UKe(n,e){var t=n.x,r=n.y,i=$Ke(n,NKe),a="".concat(t),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return KA(KA(KA(KA(KA({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function aae(n){return ve.createElement(JYe,H9({shapeType:"rectangle",propTransformer:UKe,activeClassName:"recharts-active-bar"},n))}var VKe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||$w(),t)}},zKe=["value","background"],Swe;function Q1(n){"@babel/helpers - typeof";return Q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q1(n)}function HKe(n,e){if(n==null)return{};var t=GKe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function GKe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function x2(){return x2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},x2.apply(this,arguments)}function oae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function za(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oae(Object(t),!0).forEach(function(r){zv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ewe(r.key),r)}}function WKe(n,e,t){return e&&sae(n.prototype,e),t&&sae(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function YKe(n,e,t){return e=_2(e),KKe(n,Twe()?Reflect.construct(e,t||[],_2(n).constructor):e.apply(n,t))}function KKe(n,e){if(e&&(Q1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XKe(n)}function XKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Twe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Twe=function(){return!!n})()}function _2(n){return _2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_2(n)}function ZKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&G9(n,e)}function G9(n,e){return G9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G9(n,e)}function zv(n,e,t){return e=Ewe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ewe(n){var e=QKe(n,"string");return Q1(e)=="symbol"?e:e+""}function QKe(n,e){if(Q1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Q1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ny=function(n){function e(){var t;qKe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=YKe(this,e,[].concat(i)),zv(t,"state",{isAnimationFinished:!1}),zv(t,"id",kj("recharts-bar-")),zv(t,"handleAnimationEnd",function(){var o=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),o&&o()}),zv(t,"handleAnimationStart",function(){var o=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),o&&o()}),t}return ZKe(e,n),WKe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,u=Ur(this.props,!1);return r&&r.map(function(d,h){var f=h===l,m=f?c:o,v=za(za(za({},u),d),{},{isActive:f,option:m,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ve.createElement(Oo,x2({className:"recharts-bar-rectangle"},FN(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),ve.createElement(aae,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state.prevData;return ve.createElement(yy,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,v=a.map(function(y,w){var _=h&&h[w];if(_){var T=z_(_.x,y.x),A=z_(_.y,y.y),C=z_(_.width,y.width),k=z_(_.height,y.height);return za(za({},y),{},{x:T(m),y:A(m),width:C(m),height:k(m)})}if(o==="horizontal"){var M=z_(0,y.height),P=M(m);return za(za({},y),{},{y:y.y+y.height-P,height:P})}var O=z_(0,y.width),j=O(m);return za(za({},y),{},{width:j})});return ve.createElement(Oo,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!mW(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=Ur(this.props.background,!1);return a.map(function(c,u){c.value;var d=c.background,h=HKe(c,zKe);if(!d)return null;var f=za(za(za(za(za({},h),{},{fill:"#eee"},d),l),FN(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ve.createElement(aae,x2({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},f))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,d=eh(u,qj);if(!d)return null;var h=c==="vertical"?o[0].height/2:o[0].width/2,f=function(y,w){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:Nf(y,w)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ve.createElement(Oo,m,d.map(function(v){return ve.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,h=r.height,f=r.isAnimationActive,m=r.background,v=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=Pr("recharts-bar",o),_=s&&s.allowDataOverflow,T=l&&l.allowDataOverflow,A=_||T,C=Xr(v)?this.id:v;return ve.createElement(Oo,{className:w},_||T?ve.createElement("defs",null,ve.createElement("clipPath",{id:"clipPath-".concat(C)},ve.createElement("rect",{x:_?c:c-d/2,y:T?u:u-h/2,width:_?d:d*2,height:T?h:h*2}))):null,ve.createElement(Oo,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(C,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,C),(!f||y)&&bw.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(K.PureComponent);Swe=Ny;zv(Ny,"displayName","Bar");zv(Ny,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!oM.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zv(Ny,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,o=n.yAxis,s=n.xAxisTicks,l=n.yAxisTicks,c=n.stackedData,u=n.dataStartIndex,d=n.displayedData,h=n.offset,f=vqe(r,t);if(!f)return null;var m=e.layout,v=t.type.defaultProps,y=v!==void 0?za(za({},v),t.props):t.props,w=y.dataKey,_=y.children,T=y.minPointSize,A=m==="horizontal"?o:a,C=c?A.scale.domain():null,k=Eqe({numericAxis:A}),M=eh(_,Nj),P=d.map(function(O,j){var L,B,$,Y,G,W;c?L=yqe(c[u+j],C):(L=Nf(O,w),Array.isArray(L)||(L=[k,L]));var X=VKe(T,Swe.defaultProps.minPointSize)(L[1],j);if(m==="horizontal"){var te,re=[o.scale(L[0]),o.scale(L[1])],z=re[0],ae=re[1];B=zre({axis:a,ticks:s,bandSize:i,offset:f.offset,entry:O,index:j}),$=(te=ae??z)!==null&&te!==void 0?te:void 0,Y=f.size;var le=z-ae;if(G=Number.isNaN(le)?0:le,W={x:B,y:o.y,width:Y,height:o.height},Math.abs(X)>0&&Math.abs(G)<Math.abs(X)){var ee=Yd(G||X)*(Math.abs(X)-Math.abs(G));$-=ee,G+=ee}}else{var ye=[a.scale(L[0]),a.scale(L[1])],fe=ye[0],Ce=ye[1];if(B=fe,$=zre({axis:o,ticks:l,bandSize:i,offset:f.offset,entry:O,index:j}),Y=Ce-fe,G=f.size,W={x:a.x,y:$,width:a.width,height:G},Math.abs(X)>0&&Math.abs(Y)<Math.abs(X)){var at=Yd(Y||X)*(Math.abs(X)-Math.abs(Y));Y+=at}}return za(za(za({},O),{},{x:B,y:$,width:Y,height:G,value:c?L:L[1],payload:O,background:W},M&&M[j]&&M[j].props),{},{tooltipPayload:[owe(t,O)],tooltipPosition:{x:B+Y/2,y:$+G/2}})});return za({data:P,layout:m},h)});function WD(n){"@babel/helpers - typeof";return WD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WD(n)}function JKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Awe(r.key),r)}}function eXe(n,e,t){return e&&lae(n.prototype,e),t&&lae(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function cae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cae(Object(t),!0).forEach(function(r){Kj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Kj(n,e,t){return e=Awe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Awe(n){var e=tXe(n,"string");return WD(e)=="symbol"?e:e+""}function tXe(n,e){if(WD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(WD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var nXe=function(e,t,r,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(t),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!Ic(c,Ny);return u.reduce(function(f,m){var v=t[m],y=v.orientation,w=v.domain,_=v.padding,T=_===void 0?{}:_,A=v.mirror,C=v.reversed,k="".concat(y).concat(A?"Mirror":""),M,P,O,j,L;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var B=w[1]-w[0],$=1/0,Y=v.categoricalDomain.sort(nUe);if(Y.forEach(function(ye,fe){fe>0&&($=Math.min((ye||0)-(Y[fe-1]||0),$))}),Number.isFinite($)){var G=$/B,W=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(M=G*W/2),v.padding==="no-gap"){var X=jw(e.barCategoryGap,G*W),te=G*W/2;M=te-X-(te-X)/W*X}}}i==="xAxis"?P=[r.left+(T.left||0)+(M||0),r.left+r.width-(T.right||0)-(M||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(M||0),r.top+r.height-(T.bottom||0)-(M||0)]:P=v.range,C&&(P=[P[1],P[0]]);var re=gqe(v,a,h),z=re.scale,ae=re.realScaleType;z.domain(w).range(P),mqe(z);var le=Tqe(z,zd(zd({},v),{},{realScaleType:ae}));i==="xAxis"?(L=y==="top"&&!A||y==="bottom"&&A,O=r.left,j=d[k]-L*v.height):i==="yAxis"&&(L=y==="left"&&!A||y==="right"&&A,O=d[k]-L*v.width,j=r.top);var ee=zd(zd(zd({},v),le),{},{realScaleType:ae,x:O,y:j,scale:z,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return ee.bandSize=c2(ee,le),!v.hide&&i==="xAxis"?d[k]+=(L?-1:1)*ee.height:v.hide||(d[k]+=(L?-1:1)*ee.width),zd(zd({},f),{},Kj({},m,ee))},{})},kwe=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},rXe=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return kwe({x:t,y:r},{x:i,y:a})},Cwe=function(){function n(e){JKe(this,n),this.scale=e}return eXe(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])}();Kj(Cwe,"EPS",1e-4);var xW=function(e){var t=Object.keys(e).reduce(function(r,i){return zd(zd({},r),{},Kj({},i,Cwe.create(e[i])))},{});return zd(zd({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return IKe(i,function(l,c){return t[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return _we(i,function(a,o){return t[o].isInRange(a)})}})};function iXe(n){return(n%180+180)%180}var aXe=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=iXe(i),o=a*Math.PI/180,s=Math.atan(r/t),l=o>s&&o<Math.PI-s?r/Math.sin(o):t/Math.cos(o);return Math.abs(l)},VB,uae;function oXe(){if(uae)return VB;uae=1;var n=My(),e=aM(),t=Pj();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var c=n(o,3);a=t(a),o=function(d){return c(l[d],d,l)}}var u=i(a,o,s);return u>-1?l[c?a[u]:u]:void 0}}return VB=r,VB}var zB,dae;function sXe(){if(dae)return zB;dae=1;var n=ywe();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return zB=e,zB}var HB,hae;function lXe(){if(hae)return HB;hae=1;var n=B0e(),e=My(),t=sXe(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var c=s==null?0:t(s);return c<0&&(c=r(l+c,0)),n(a,e(o,3),c)}return HB=i,HB}var GB,fae;function cXe(){if(fae)return GB;fae=1;var n=oXe(),e=lXe(),t=n(e);return GB=t,GB}var uXe=cXe();const dXe=kr(uXe);var hXe=n0e();const fXe=kr(hXe);var pXe=fXe(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),_W=K.createContext(void 0),SW=K.createContext(void 0),Dwe=K.createContext(void 0),Iwe=K.createContext({}),Mwe=K.createContext(void 0),Pwe=K.createContext(0),Owe=K.createContext(0),pae=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,u=pXe(a);return ve.createElement(_W.Provider,{value:r},ve.createElement(SW.Provider,{value:i},ve.createElement(Iwe.Provider,{value:a},ve.createElement(Dwe.Provider,{value:u},ve.createElement(Mwe.Provider,{value:o},ve.createElement(Pwe.Provider,{value:c},ve.createElement(Owe.Provider,{value:l},s)))))))},gXe=function(){return K.useContext(Mwe)},Rwe=function(e){var t=K.useContext(_W);t==null&&$w();var r=t[e];return r==null&&$w(),r},mXe=function(){var e=K.useContext(_W);return Bv(e)},vXe=function(){var e=K.useContext(SW),t=dXe(e,function(r){return _we(r.domain,Number.isFinite)});return t||Bv(e)},Nwe=function(e){var t=K.useContext(SW);t==null&&$w();var r=t[e];return r==null&&$w(),r},yXe=function(){var e=K.useContext(Dwe);return e},bXe=function(){return K.useContext(Iwe)},TW=function(){return K.useContext(Owe)},EW=function(){return K.useContext(Pwe)};function J1(n){"@babel/helpers - typeof";return J1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J1(n)}function wXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jwe(r.key),r)}}function _Xe(n,e,t){return e&&xXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function SXe(n,e,t){return e=S2(e),TXe(n,Lwe()?Reflect.construct(e,t||[],S2(n).constructor):e.apply(n,t))}function TXe(n,e){if(e&&(J1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EXe(n)}function EXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lwe=function(){return!!n})()}function S2(n){return S2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S2(n)}function AXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&q9(n,e)}function q9(n,e){return q9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},q9(n,e)}function gae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gae(Object(t),!0).forEach(function(r){AW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AW(n,e,t){return e=jwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jwe(n){var e=kXe(n,"string");return J1(e)=="symbol"?e:e+""}function kXe(n,e){if(J1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(J1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function CXe(n,e){return PXe(n)||MXe(n,e)||IXe(n,e)||DXe()}function DXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IXe(n,e){if(n){if(typeof n=="string")return vae(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vae(n,e)}}function vae(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function MXe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function PXe(n){if(Array.isArray(n))return n}function W9(){return W9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},W9.apply(this,arguments)}var OXe=function(e,t){var r;return ve.isValidElement(e)?r=ve.cloneElement(e,t):or(e)?r=e(t):r=ve.createElement("line",W9({},t,{className:"recharts-reference-line-line"})),r},RXe=function(e,t,r,i,a,o,s,l,c){var u=a.x,d=a.y,h=a.width,f=a.height;if(r){var m=c.y,v=e.y.apply(m,{position:o});if(Cf(c,"discard")&&!e.y.isInRange(v))return null;var y=[{x:u+h,y:v},{x:u,y:v}];return l==="left"?y.reverse():y}if(t){var w=c.x,_=e.x.apply(w,{position:o});if(Cf(c,"discard")&&!e.x.isInRange(_))return null;var T=[{x:_,y:d+f},{x:_,y:d}];return s==="top"?T.reverse():T}if(i){var A=c.segment,C=A.map(function(k){return e.apply(k,{position:o})});return Cf(c,"discard")&&AKe(C,function(k){return!e.isInRange(k)})?null:C}return null};function NXe(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,o=n.shape,s=n.className,l=n.alwaysShow,c=gXe(),u=Rwe(i),d=Nwe(a),h=yXe();if(!c||!h)return null;_g(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=xW({x:u.scale,y:d.scale}),m=lo(e),v=lo(t),y=r&&r.length===2,w=RXe(f,m,v,y,h,n.position,u.orientation,d.orientation,n);if(!w)return null;var _=CXe(w,2),T=_[0],A=T.x,C=T.y,k=_[1],M=k.x,P=k.y,O=Cf(n,"hidden")?"url(#".concat(c,")"):void 0,j=mae(mae({clipPath:O},Ur(n,!0)),{},{x1:A,y1:C,x2:M,y2:P});return ve.createElement(Oo,{className:Pr("recharts-reference-line",s)},OXe(o,j),Rs.renderCallByParent(n,rXe({x1:A,y1:C,x2:M,y2:P})))}var kW=function(n){function e(){return wXe(this,e),SXe(this,e,arguments)}return AXe(e,n),_Xe(e,[{key:"render",value:function(){return ve.createElement(NXe,this.props)}}])}(ve.Component);AW(kW,"displayName","ReferenceLine");AW(kW,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Y9(){return Y9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Y9.apply(this,arguments)}function eT(n){"@babel/helpers - typeof";return eT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eT(n)}function yae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yae(Object(t),!0).forEach(function(r){Xj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function LXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,$we(r.key),r)}}function FXe(n,e,t){return e&&jXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function $Xe(n,e,t){return e=T2(e),BXe(n,Fwe()?Reflect.construct(e,t||[],T2(n).constructor):e.apply(n,t))}function BXe(n,e){if(e&&(eT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UXe(n)}function UXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Fwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fwe=function(){return!!n})()}function T2(n){return T2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T2(n)}function VXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&K9(n,e)}function K9(n,e){return K9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K9(n,e)}function Xj(n,e,t){return e=$we(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $we(n){var e=zXe(n,"string");return eT(e)=="symbol"?e:e+""}function zXe(n,e){if(eT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(eT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var HXe=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=xW({x:i.scale,y:a.scale}),s=o.apply({x:t,y:r},{bandAware:!0});return Cf(e,"discard")&&!o.isInRange(s)?null:s},Zj=function(n){function e(){return LXe(this,e),$Xe(this,e,arguments)}return VXe(e,n),FXe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=lo(i),u=lo(a);if(_g(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=HXe(this.props);if(!d)return null;var h=d.x,f=d.y,m=this.props,v=m.shape,y=m.className,w=Cf(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=bae(bae({clipPath:w},Ur(this.props,!0)),{},{cx:h,cy:f});return ve.createElement(Oo,{className:Pr("recharts-reference-dot",y)},e.renderDot(v,_),Rs.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}])}(ve.Component);Xj(Zj,"displayName","ReferenceDot");Xj(Zj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Xj(Zj,"renderDot",function(n,e){var t;return ve.isValidElement(n)?t=ve.cloneElement(n,e):or(n)?t=n(e):t=ve.createElement(vwe,Y9({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function X9(){return X9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},X9.apply(this,arguments)}function tT(n){"@babel/helpers - typeof";return tT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tT(n)}function wae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wae(Object(t),!0).forEach(function(r){Qj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Uwe(r.key),r)}}function WXe(n,e,t){return e&&qXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function YXe(n,e,t){return e=E2(e),KXe(n,Bwe()?Reflect.construct(e,t||[],E2(n).constructor):e.apply(n,t))}function KXe(n,e){if(e&&(tT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XXe(n)}function XXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bwe=function(){return!!n})()}function E2(n){return E2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E2(n)}function ZXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Z9(n,e)}function Z9(n,e){return Z9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z9(n,e)}function Qj(n,e,t){return e=Uwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uwe(n){var e=QXe(n,"string");return tT(e)=="symbol"?e:e+""}function QXe(n,e){if(tT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(tT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var JXe=function(e,t,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,u=a.xAxis,d=a.yAxis;if(!u||!d)return null;var h=xW({x:u.scale,y:d.scale}),f={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:t?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Cf(a,"discard")&&(!h.isInRange(f)||!h.isInRange(m))?null:kwe(f,m)},Jj=function(n){function e(){return GXe(this,e),YXe(this,e,arguments)}return ZXe(e,n),WXe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;_g(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=lo(i),h=lo(a),f=lo(o),m=lo(s),v=this.props.shape;if(!d&&!h&&!f&&!m&&!v)return null;var y=JXe(d,h,f,m,this.props);if(!y&&!v)return null;var w=Cf(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ve.createElement(Oo,{className:Pr("recharts-reference-area",l)},e.renderRect(v,xae(xae({clipPath:w},Ur(this.props,!0)),y)),Rs.renderCallByParent(this.props,y))}}])}(ve.Component);Qj(Jj,"displayName","ReferenceArea");Qj(Jj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Qj(Jj,"renderRect",function(n,e){var t;return ve.isValidElement(n)?t=ve.cloneElement(n,e):or(n)?t=n(e):t=ve.createElement(wW,X9({},e,{className:"recharts-reference-area-rect"})),t});function Vwe(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function eZe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return aXe(r,t)}function tZe(n,e,t){var r=t==="width",i=n.x,a=n.y,o=n.width,s=n.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function A2(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function nZe(n,e){return Vwe(n,e+1)}function rZe(n,e,t,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,c=1,u=o,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:Vwe(r,c)};var v=l,y,w=function(){return y===void 0&&(y=t(m,v)),y},_=m.coordinate,T=l===0||A2(n,_,w,u,s);T||(l=0,u=o,c+=1),T&&(u=_+n*(w()/2+i),l+=c)},h;c<=a.length;)if(h=d(),h)return h.v;return[]}function YD(n){"@babel/helpers - typeof";return YD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YD(n)}function _ae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ds(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_ae(Object(t),!0).forEach(function(r){iZe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_ae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iZe(n,e,t){return e=aZe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aZe(n){var e=oZe(n,"string");return YD(e)=="symbol"?e:e+""}function oZe(n,e){if(YD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(YD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sZe(n,e,t,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(h){var f=a[h],m,v=function(){return m===void 0&&(m=t(f,h)),m};if(h===o-1){var y=n*(f.coordinate+n*v()/2-l);a[h]=f=Ds(Ds({},f),{},{tickCoord:y>0?f.coordinate-y*n:f.coordinate})}else a[h]=f=Ds(Ds({},f),{},{tickCoord:f.coordinate});var w=A2(n,f.tickCoord,v,s,l);w&&(l=f.tickCoord-n*(v()/2+i),a[h]=Ds(Ds({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return a}function lZe(n,e,t,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var u=r[s-1],d=t(u,s-1),h=n*(u.coordinate+n*d/2-c);o[s-1]=u=Ds(Ds({},u),{},{tickCoord:h>0?u.coordinate-h*n:u.coordinate});var f=A2(n,u.tickCoord,function(){return d},l,c);f&&(c=u.tickCoord-n*(d/2+i),o[s-1]=Ds(Ds({},u),{},{isShow:!0}))}for(var m=a?s-1:s,v=function(_){var T=o[_],A,C=function(){return A===void 0&&(A=t(T,_)),A};if(_===0){var k=n*(T.coordinate-n*C()/2-l);o[_]=T=Ds(Ds({},T),{},{tickCoord:k<0?T.coordinate-k*n:T.coordinate})}else o[_]=T=Ds(Ds({},T),{},{tickCoord:T.coordinate});var M=A2(n,T.tickCoord,C,l,c);M&&(l=T.tickCoord+n*(C()/2+i),o[_]=Ds(Ds({},T),{},{isShow:!0}))},y=0;y<m;y++)v(y);return o}function CW(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,o=n.minTickGap,s=n.orientation,l=n.interval,c=n.tickFormatter,u=n.unit,d=n.angle;if(!i||!i.length||!r)return[];if(mt(l)||oM.isSsr)return nZe(i,typeof l=="number"&&mt(l)?l:0);var h=[],f=s==="top"||s==="bottom"?"width":"height",m=u&&f==="width"?bC(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},v=function(T,A){var C=or(c)?c(T.value,A):T.value;return f==="width"?eZe(bC(C,{fontSize:e,letterSpacing:t}),m,d):bC(C,{fontSize:e,letterSpacing:t})[f]},y=i.length>=2?Yd(i[1].coordinate-i[0].coordinate):1,w=tZe(a,y,f);return l==="equidistantPreserveStart"?rZe(y,w,v,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=lZe(y,w,v,i,o,l==="preserveStartEnd"):h=sZe(y,w,v,i,o),h.filter(function(_){return _.isShow}))}var cZe=["viewBox"],uZe=["viewBox"],dZe=["ticks"];function nT(n){"@babel/helpers - typeof";return nT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nT(n)}function YS(){return YS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},YS.apply(this,arguments)}function Sae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tl(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sae(Object(t),!0).forEach(function(r){DW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qB(n,e){if(n==null)return{};var t=hZe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hZe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function fZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Tae(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Hwe(r.key),r)}}function pZe(n,e,t){return e&&Tae(n.prototype,e),t&&Tae(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function gZe(n,e,t){return e=k2(e),mZe(n,zwe()?Reflect.construct(e,t||[],k2(n).constructor):e.apply(n,t))}function mZe(n,e){if(e&&(nT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZe(n)}function vZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zwe=function(){return!!n})()}function k2(n){return k2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k2(n)}function yZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Q9(n,e)}function Q9(n,e){return Q9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q9(n,e)}function DW(n,e,t){return e=Hwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hwe(n){var e=bZe(n,"string");return nT(e)=="symbol"?e:e+""}function bZe(n,e){if(nT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var NT=function(n){function e(t){var r;return fZe(this,e),r=gZe(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return yZe(e,n),pZe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=qB(r,cZe),s=this.props,l=s.viewBox,c=qB(s,uZe);return!u1(a,l)||!u1(o,c)||!u1(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,h=i.tickMargin,f,m,v,y,w,_,T=d?-1:1,A=r.tickSize||u,C=mt(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":f=m=r.coordinate,y=o+ +!d*l,v=y-T*A,_=v-T*h,w=C;break;case"left":v=y=r.coordinate,m=a+ +!d*s,f=m-T*A,w=f-T*h,_=C;break;case"right":v=y=r.coordinate,m=a+ +d*s,f=m+T*A,w=f+T*h,_=C;break;default:f=m=r.coordinate,y=o+ +d*l,v=y+T*A,_=v+T*h,w=C;break}return{line:{x1:f,y1:v,x2:m,y2:y},tick:{x:w,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=tl(tl(tl({},Ur(this.props,!1)),Ur(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=tl(tl({},d),{},{x1:i,y1:a+h*s,x2:i+o,y2:a+h*s})}else{var f=+(l==="left"&&!c||l==="right"&&c);d=tl(tl({},d),{},{x1:i+f*o,y1:a,x2:i+f*o,y2:a+s})}return ve.createElement("line",YS({},d,{className:Pr("recharts-cartesian-axis-line",zu(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,d=s.tickFormatter,h=s.unit,f=CW(tl(tl({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=Ur(this.props,!1),w=Ur(u,!1),_=tl(tl({},y),{},{fill:"none"},Ur(l,!1)),T=f.map(function(A,C){var k=o.getTickLineCoord(A),M=k.line,P=k.tick,O=tl(tl(tl(tl({textAnchor:m,verticalAnchor:v},y),{},{stroke:"none",fill:c},w),P),{},{index:C,payload:A,visibleTicksCount:f.length,tickFormatter:d});return ve.createElement(Oo,YS({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},FN(o.props,A,C)),l&&ve.createElement("line",YS({},_,M,{className:Pr("recharts-cartesian-axis-tick-line",zu(l,"className"))})),u&&e.renderTickItem(u,O,"".concat(or(d)?d(A.value,C):A.value).concat(h||"")))});return ve.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,h=d.ticks,f=qB(d,dZe),m=h;return or(l)&&(m=h&&h.length>0?l(this.props):l(f)),o<=0||s<=0||!m||!m.length?null:ve.createElement(Oo,{className:Pr("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Rs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return ve.isValidElement(r)?o=ve.cloneElement(r,i):or(r)?o=r(i):o=ve.createElement(KN,YS({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(K.Component);DW(NT,"displayName","CartesianAxis");DW(NT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var wZe=["x1","y1","x2","y2","key"],xZe=["offset"];function Bw(n){"@babel/helpers - typeof";return Bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bw(n)}function Eae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ns(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Eae(Object(t),!0).forEach(function(r){_Ze(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Eae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _Ze(n,e,t){return e=SZe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SZe(n){var e=TZe(n,"string");return Bw(e)=="symbol"?e:e+""}function TZe(n,e){if(Bw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Bw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iw(){return iw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iw.apply(this,arguments)}function Aae(n,e){if(n==null)return{};var t=EZe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function EZe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var AZe=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return ve.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Gwe(n,e){var t;if(ve.isValidElement(n))t=ve.cloneElement(n,e);else if(or(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=Aae(e,wZe),c=Ur(l,!1);c.offset;var u=Aae(c,xZe);t=ve.createElement("line",iw({},u,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return t}function kZe(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Ns(Ns({},n),{},{x1:e,y1:s,x2:e+t,y2:s,key:"line-".concat(l),index:l});return Gwe(i,c)});return ve.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function CZe(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Ns(Ns({},n),{},{x1:s,y1:e,x2:s,y2:e+t,key:"line-".concat(l),index:l});return Gwe(i,c)});return ve.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function DZe(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,o=n.height,s=n.horizontalPoints,l=n.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,f){return h-f});i!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?i+o-h:u[f+1]-h;if(v<=0)return null;var y=f%e.length;return ve.createElement("rect",{key:"react-".concat(f),y:h,x:r,height:v,width:a,stroke:"none",fill:e[y],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function IZe(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,o=n.y,s=n.width,l=n.height,c=n.verticalPoints;if(!t||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+a-a)}).sort(function(h,f){return h-f});a!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?a+s-h:u[f+1]-h;if(v<=0)return null;var y=f%r.length;return ve.createElement("rect",{key:"react-".concat(f),x:h,y:o,width:v,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ve.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var MZe=function(e,t){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return iwe(CW(Ns(Ns(Ns({},NT.defaultProps),r),{},{ticks:hg(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,t)},PZe=function(e,t){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return iwe(CW(Ns(Ns(Ns({},NT.defaultProps),r),{},{ticks:hg(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,t)},q_={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function IW(n){var e,t,r,i,a,o,s=TW(),l=EW(),c=bXe(),u=Ns(Ns({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:q_.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:q_.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:q_.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:q_.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:q_.vertical,verticalFill:(o=n.verticalFill)!==null&&o!==void 0?o:q_.verticalFill,x:mt(n.x)?n.x:c.left,y:mt(n.y)?n.y:c.top,width:mt(n.width)?n.width:c.width,height:mt(n.height)?n.height:c.height}),d=u.x,h=u.y,f=u.width,m=u.height,v=u.syncWithTicks,y=u.horizontalValues,w=u.verticalValues,_=mXe(),T=vXe();if(!mt(f)||f<=0||!mt(m)||m<=0||!mt(d)||d!==+d||!mt(h)||h!==+h)return null;var A=u.verticalCoordinatesGenerator||MZe,C=u.horizontalCoordinatesGenerator||PZe,k=u.horizontalPoints,M=u.verticalPoints;if((!k||!k.length)&&or(C)){var P=y&&y.length,O=C({yAxis:T?Ns(Ns({},T),{},{ticks:P?y:T.ticks}):void 0,width:s,height:l,offset:c},P?!0:v);_g(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Bw(O),"]")),Array.isArray(O)&&(k=O)}if((!M||!M.length)&&or(A)){var j=w&&w.length,L=A({xAxis:_?Ns(Ns({},_),{},{ticks:j?w:_.ticks}):void 0,width:s,height:l,offset:c},j?!0:v);_g(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Bw(L),"]")),Array.isArray(L)&&(M=L)}return ve.createElement("g",{className:"recharts-cartesian-grid"},ve.createElement(AZe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ve.createElement(kZe,iw({},u,{offset:c,horizontalPoints:k,xAxis:_,yAxis:T})),ve.createElement(CZe,iw({},u,{offset:c,verticalPoints:M,xAxis:_,yAxis:T})),ve.createElement(DZe,iw({},u,{horizontalPoints:k})),ve.createElement(IZe,iw({},u,{verticalPoints:M})))}IW.displayName="CartesianGrid";function rT(n){"@babel/helpers - typeof";return rT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rT(n)}function OZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function RZe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ywe(r.key),r)}}function NZe(n,e,t){return e&&RZe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function LZe(n,e,t){return e=C2(e),jZe(n,qwe()?Reflect.construct(e,t||[],C2(n).constructor):e.apply(n,t))}function jZe(n,e){if(e&&(rT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FZe(n)}function FZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qwe=function(){return!!n})()}function C2(n){return C2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C2(n)}function $Ze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&J9(n,e)}function J9(n,e){return J9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J9(n,e)}function Wwe(n,e,t){return e=Ywe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ywe(n){var e=BZe(n,"string");return rT(e)=="symbol"?e:e+""}function BZe(n,e){if(rT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(rT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function eH(){return eH=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eH.apply(this,arguments)}function UZe(n){var e=n.xAxisId,t=TW(),r=EW(),i=Rwe(e);return i==null?null:ve.createElement(NT,eH({},i,{className:Pr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(o){return hg(o,!0)}}))}var dM=function(n){function e(){return OZe(this,e),LZe(this,e,arguments)}return $Ze(e,n),NZe(e,[{key:"render",value:function(){return ve.createElement(UZe,this.props)}}])}(ve.Component);Wwe(dM,"displayName","XAxis");Wwe(dM,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function iT(n){"@babel/helpers - typeof";return iT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iT(n)}function VZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zZe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Zwe(r.key),r)}}function HZe(n,e,t){return e&&zZe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function GZe(n,e,t){return e=D2(e),qZe(n,Kwe()?Reflect.construct(e,t||[],D2(n).constructor):e.apply(n,t))}function qZe(n,e){if(e&&(iT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WZe(n)}function WZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kwe=function(){return!!n})()}function D2(n){return D2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D2(n)}function YZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&tH(n,e)}function tH(n,e){return tH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tH(n,e)}function Xwe(n,e,t){return e=Zwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zwe(n){var e=KZe(n,"string");return iT(e)=="symbol"?e:e+""}function KZe(n,e){if(iT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(iT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function nH(){return nH=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nH.apply(this,arguments)}var XZe=function(e){var t=e.yAxisId,r=TW(),i=EW(),a=Nwe(t);return a==null?null:ve.createElement(NT,nH({},a,{className:Pr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return hg(s,!0)}}))},hM=function(n){function e(){return VZe(this,e),GZe(this,e,arguments)}return YZe(e,n),HZe(e,[{key:"render",value:function(){return ve.createElement(XZe,this.props)}}])}(ve.Component);Xwe(hM,"displayName","YAxis");Xwe(hM,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kae(n){return eQe(n)||JZe(n)||QZe(n)||ZZe()}function ZZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QZe(n,e){if(n){if(typeof n=="string")return rH(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rH(n,e)}}function JZe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eQe(n){if(Array.isArray(n))return rH(n)}function rH(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var iH=function(e,t,r,i,a){var o=eh(e,kW),s=eh(e,Zj),l=[].concat(kae(o),kae(s)),c=eh(e,Jj),u="".concat(i,"Id"),d=i[0],h=t;if(l.length&&(h=l.reduce(function(v,y){if(y.props[u]===r&&Cf(y.props,"extendDomain")&&mt(y.props[d])){var w=y.props[d];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},h)),c.length){var f="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(v,y){if(y.props[u]===r&&Cf(y.props,"extendDomain")&&mt(y.props[f])&&mt(y.props[m])){var w=y.props[f],_=y.props[m];return[Math.min(v[0],w,_),Math.max(v[1],w,_)]}return v},h)}return a&&a.length&&(h=a.reduce(function(v,y){return mt(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},h)),h},WB={exports:{}},Cae;function tQe(){return Cae||(Cae=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,u,d,h,f,m){var v=t?t+c:c;if(!this._events[v])return!1;var y=this._events[v],w=arguments.length,_,T;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(T=1,_=new Array(w-1);T<w;T++)_[T-1]=arguments[T];y.fn.apply(y.context,_)}else{var A=y.length,C;for(T=0;T<A;T++)switch(y[T].once&&this.removeListener(c,y[T].fn,void 0,!0),w){case 1:y[T].fn.call(y[T].context);break;case 2:y[T].fn.call(y[T].context,u);break;case 3:y[T].fn.call(y[T].context,u,d);break;case 4:y[T].fn.call(y[T].context,u,d,h);break;default:if(!_)for(C=1,_=new Array(w-1);C<w;C++)_[C-1]=arguments[C];y[T].fn.apply(y[T].context,_)}}return!0},s.prototype.on=function(c,u,d){return a(this,c,u,d,!1)},s.prototype.once=function(c,u,d){return a(this,c,u,d,!0)},s.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var v=0,y=[],w=m.length;v<w;v++)(m[v].fn!==u||h&&!m[v].once||d&&m[v].context!==d)&&y.push(m[v]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,n.exports=s}(WB)),WB.exports}var nQe=tQe();const rQe=kr(nQe);var YB=new rQe,KB="recharts.syncMouseEvents";function KD(n){"@babel/helpers - typeof";return KD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KD(n)}function iQe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aQe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Qwe(r.key),r)}}function oQe(n,e,t){return e&&aQe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function XB(n,e,t){return e=Qwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qwe(n){var e=sQe(n,"string");return KD(e)=="symbol"?e:e+""}function sQe(n,e){if(KD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(KD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var lQe=function(){function n(){iQe(this,n),XB(this,"activeIndex",0),XB(this,"coordinateList",[]),XB(this,"layout","horizontal")}return oQe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,o=t.container,s=o===void 0?null:o,l=t.layout,c=l===void 0?null:l,u=t.offset,d=u===void 0?null:u,h=t.mouseHandlerCallback,f=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,h=o+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function cQe(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&mt(r)&&mt(i))return!0}return!1}function uQe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Jwe(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,o=Jo(e,t,r,i),s=Jo(e,t,r,a);return{points:[o,s],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function dQe(n,e,t){var r,i,a,o;if(n==="horizontal")r=e.x,a=r,i=t.top,o=t.top+t.height;else if(n==="vertical")i=e.y,o=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=Jo(s,l,c,d),f=Jo(s,l,u,d);r=h.x,i=h.y,a=f.x,o=f.y}else return Jwe(e);return[{x:r,y:i},{x:a,y:o}]}function XD(n){"@babel/helpers - typeof";return XD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XD(n)}function Dae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function eO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dae(Object(t),!0).forEach(function(r){hQe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Dae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hQe(n,e,t){return e=fQe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fQe(n){var e=pQe(n,"string");return XD(e)=="symbol"?e:e+""}function pQe(n,e){if(XD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(XD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gQe(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,o=n.activeCoordinate,s=n.activePayload,l=n.offset,c=n.activeTooltipIndex,u=n.tooltipAxisBandSize,d=n.layout,h=n.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!f||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var m,v=oie;if(h==="ScatterChart")m=o,v=AYe;else if(h==="BarChart")m=uQe(d,o,l,u),v=wW;else if(d==="radial"){var y=Jwe(o),w=y.cx,_=y.cy,T=y.radius,A=y.startAngle,C=y.endAngle;m={cx:w,cy:_,startAngle:A,endAngle:C,innerRadius:T,outerRadius:T},v=cwe}else m={points:dQe(d,o,l)},v=oie;var k=eO(eO(eO(eO({stroke:"#ccc",pointerEvents:"none"},l),m),Ur(f,!1)),{},{payload:s,payloadIndex:c,className:Pr("recharts-tooltip-cursor",f.className)});return K.isValidElement(f)?K.cloneElement(f,k):K.createElement(v,k)}var mQe=["item"],vQe=["children","className","width","height","style","compact","title","desc"];function aT(n){"@babel/helpers - typeof";return aT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aT(n)}function KS(){return KS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},KS.apply(this,arguments)}function Iae(n,e){return wQe(n)||bQe(n,e)||txe(n,e)||yQe()}function yQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bQe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function wQe(n){if(Array.isArray(n))return n}function Mae(n,e){if(n==null)return{};var t=xQe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xQe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function _Qe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function SQe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,nxe(r.key),r)}}function TQe(n,e,t){return e&&SQe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function EQe(n,e,t){return e=I2(e),AQe(n,exe()?Reflect.construct(e,t||[],I2(n).constructor):e.apply(n,t))}function AQe(n,e){if(e&&(aT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kQe(n)}function kQe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function exe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(exe=function(){return!!n})()}function I2(n){return I2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I2(n)}function CQe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&aH(n,e)}function aH(n,e){return aH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aH(n,e)}function oT(n){return MQe(n)||IQe(n)||txe(n)||DQe()}function DQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function txe(n,e){if(n){if(typeof n=="string")return oH(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oH(n,e)}}function IQe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function MQe(n){if(Array.isArray(n))return oH(n)}function oH(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Pae(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ue(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pae(Object(t),!0).forEach(function(r){gn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pae(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gn(n,e,t){return e=nxe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nxe(n){var e=PQe(n,"string");return aT(e)=="symbol"?e:e+""}function PQe(n,e){if(aT(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(aT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var OQe={xAxis:["bottom","top"],yAxis:["left","right"]},RQe={width:"100%",height:"100%"},rxe={x:0,y:0};function tO(n){return n}var NQe=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},LQe=function(e,t,r,i){var a=t.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return Ue(Ue(Ue({},i),Jo(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return Ue(Ue(Ue({},i),Jo(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return rxe},e5=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(oT(s),oT(c)):s},[]);return o.length>0?o:e&&e.length&&mt(i)&&mt(a)?e.slice(i,a+1):[]};function ixe(n){return n==="number"?[0,"auto"]:void 0}var sH=function(e,t,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=e5(t,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:t;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var f=d===void 0?s:d;h=Wz(f,o.dataKey,i)}else h=d&&d[r]||s[r];return h?[].concat(oT(l),[owe(c,h)]):l},[])},Oae=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},o=NQe(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=cqe(o,s,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=sH(e,t,u,d),f=LQe(r,s,u,a);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:f}}return null},jQe=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,f=rwe(u,a);return r.reduce(function(m,v){var y,w=v.type.defaultProps!==void 0?Ue(Ue({},v.type.defaultProps),v.props):v.props,_=w.type,T=w.dataKey,A=w.allowDataOverflow,C=w.allowDuplicatedCategory,k=w.scale,M=w.ticks,P=w.includeHidden,O=w[o];if(m[O])return m;var j=e5(e.data,{graphicalItems:i.filter(function(le){var ee,ye=o in le.props?le.props[o]:(ee=le.type.defaultProps)===null||ee===void 0?void 0:ee[o];return ye===O}),dataStartIndex:l,dataEndIndex:c}),L=j.length,B,$,Y;cQe(w.domain,A,_)&&(B=k9(w.domain,null,A),f&&(_==="number"||k!=="auto")&&(Y=xC(j,T,"category")));var G=ixe(_);if(!B||B.length===0){var W,X=(W=w.domain)!==null&&W!==void 0?W:G;if(T){if(B=xC(j,T,_),_==="category"&&f){var te=tUe(B);C&&te?($=B,B=y2(0,L)):C||(B=qre(X,B,v).reduce(function(le,ee){return le.indexOf(ee)>=0?le:[].concat(oT(le),[ee])},[]))}else if(_==="category")C?B=B.filter(function(le){return le!==""&&!Xr(le)}):B=qre(X,B,v).reduce(function(le,ee){return le.indexOf(ee)>=0||ee===""||Xr(ee)?le:[].concat(oT(le),[ee])},[]);else if(_==="number"){var re=pqe(j,i.filter(function(le){var ee,ye,fe=o in le.props?le.props[o]:(ee=le.type.defaultProps)===null||ee===void 0?void 0:ee[o],Ce="hide"in le.props?le.props.hide:(ye=le.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return fe===O&&(P||!Ce)}),T,a,u);re&&(B=re)}f&&(_==="number"||k!=="auto")&&(Y=xC(j,T,"category"))}else f?B=y2(0,L):s&&s[O]&&s[O].hasStack&&_==="number"?B=h==="expand"?[0,1]:awe(s[O].stackGroups,l,c):B=nwe(j,i.filter(function(le){var ee=o in le.props?le.props[o]:le.type.defaultProps[o],ye="hide"in le.props?le.props.hide:le.type.defaultProps.hide;return ee===O&&(P||!ye)}),_,u,!0);if(_==="number")B=iH(d,B,O,a,M),X&&(B=k9(X,B,A));else if(_==="category"&&X){var z=X,ae=B.every(function(le){return z.indexOf(le)>=0});ae&&(B=z)}}return Ue(Ue({},m),{},gn({},O,Ue(Ue({},w),{},{axisType:a,domain:B,categoricalDomain:Y,duplicateDomain:$,originalDomain:(y=w.domain)!==null&&y!==void 0?y:G,isCategorical:f,layout:u})))},{})},FQe=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=e5(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),f=h.length,m=rwe(u,a),v=-1;return r.reduce(function(y,w){var _=w.type.defaultProps!==void 0?Ue(Ue({},w.type.defaultProps),w.props):w.props,T=_[o],A=ixe("number");if(!y[T]){v++;var C;return m?C=y2(0,f):s&&s[T]&&s[T].hasStack?(C=awe(s[T].stackGroups,l,c),C=iH(d,C,T,a)):(C=k9(A,nwe(h,r.filter(function(k){var M,P,O=o in k.props?k.props[o]:(M=k.type.defaultProps)===null||M===void 0?void 0:M[o],j="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===T&&!j}),"number",u),i.defaultProps.allowDataOverflow),C=iH(d,C,T,a)),Ue(Ue({},y),{},gn({},T,Ue(Ue({axisType:a},i.defaultProps),{},{hide:!0,orientation:zu(OQe,"".concat(a,".").concat(v%2),null),domain:C,originalDomain:A,isCategorical:m,layout:u})))}return y},{})},$Qe=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,o=t.graphicalItems,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=eh(u,a),f={};return h&&h.length?f=jQe(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(f=FQe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),f},BQe=function(e){var t=Bv(e),r=hg(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:q7(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:c2(t,r)}},Rae=function(e){var t=e.children,r=e.defaultShowTooltip,i=Ic(t,Z1),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},UQe=function(e){return!e||!e.length?!1:e.some(function(t){var r=xg(t&&t.type);return r&&r.indexOf("Bar")>=0})},Nae=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},VQe=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,d=r.children,h=r.margin||{},f=Ic(d,Z1),m=Ic(d,d1),v=Object.keys(l).reduce(function(C,k){var M=l[k],P=M.orientation;return!M.mirror&&!M.hide?Ue(Ue({},C),{},gn({},P,C[P]+M.width)):C},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(C,k){var M=o[k],P=M.orientation;return!M.mirror&&!M.hide?Ue(Ue({},C),{},gn({},P,zu(C,"".concat(P))+M.height)):C},{top:h.top||0,bottom:h.bottom||0}),w=Ue(Ue({},y),v),_=w.bottom;f&&(w.bottom+=f.props.height||Z1.defaultProps.height),m&&t&&(w=hqe(w,i,r,t));var T=c-w.left-w.right,A=u-w.top-w.bottom;return Ue(Ue({brushBottom:_},w),{},{width:Math.max(T,0),height:Math.max(A,0)})},zQe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},HQe=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(w,_){var T=_.graphicalItems,A=_.stackGroups,C=_.offset,k=_.updateId,M=_.dataStartIndex,P=_.dataEndIndex,O=w.barSize,j=w.layout,L=w.barGap,B=w.barCategoryGap,$=w.maxBarSize,Y=Nae(j),G=Y.numericAxisName,W=Y.cateAxisName,X=UQe(T),te=[];return T.forEach(function(re,z){var ae=e5(w.data,{graphicalItems:[re],dataStartIndex:M,dataEndIndex:P}),le=re.type.defaultProps!==void 0?Ue(Ue({},re.type.defaultProps),re.props):re.props,ee=le.dataKey,ye=le.maxBarSize,fe=le["".concat(G,"Id")],Ce=le["".concat(W,"Id")],at={},Le=l.reduce(function(jn,Re){var Jt=_["".concat(Re.axisType,"Map")],hn=le["".concat(Re.axisType,"Id")];Jt&&Jt[hn]||Re.axisType==="zAxis"||$w();var Mt=Jt[hn];return Ue(Ue({},jn),{},gn(gn({},Re.axisType,Mt),"".concat(Re.axisType,"Ticks"),hg(Mt)))},at),we=Le[W],be=Le["".concat(W,"Ticks")],ge=A&&A[fe]&&A[fe].hasStack&&Aqe(re,A[fe].stackGroups),he=xg(re.type).indexOf("Bar")>=0,Ge=c2(we,be),je=[],rt=X&&uqe({barSize:O,stackGroups:A,totalSize:zQe(Le,W)});if(he){var bt,lt,cn=Xr(ye)?$:ye,Ct=(bt=(lt=c2(we,be,!0))!==null&&lt!==void 0?lt:cn)!==null&&bt!==void 0?bt:0;je=dqe({barGap:L,barCategoryGap:B,bandSize:Ct!==Ge?Ct:Ge,sizeList:rt[Ce],maxBarSize:cn}),Ct!==Ge&&(je=je.map(function(jn){return Ue(Ue({},jn),{},{position:Ue(Ue({},jn.position),{},{offset:jn.position.offset-Ct/2})})}))}var En=re&&re.type&&re.type.getComposedData;En&&te.push({props:Ue(Ue({},En(Ue(Ue({},Le),{},{displayedData:ae,props:w,dataKey:ee,item:re,bandSize:Ge,barPosition:je,offset:C,stackedData:ge,layout:j,dataStartIndex:M,dataEndIndex:P}))),{},gn(gn(gn({key:re.key||"item-".concat(z)},G,Le[G]),W,Le[W]),"animationId",k)),childIndex:fUe(re,w.children),item:re})}),te},f=function(w,_){var T=w.props,A=w.dataStartIndex,C=w.dataEndIndex,k=w.updateId;if(!see({props:T}))return null;var M=T.children,P=T.layout,O=T.stackOffset,j=T.data,L=T.reverseStackOrder,B=Nae(P),$=B.numericAxisName,Y=B.cateAxisName,G=eh(M,r),W=Sqe(j,G,"".concat($,"Id"),"".concat(Y,"Id"),O,L),X=l.reduce(function(le,ee){var ye="".concat(ee.axisType,"Map");return Ue(Ue({},le),{},gn({},ye,$Qe(T,Ue(Ue({},ee),{},{graphicalItems:G,stackGroups:ee.axisType===$&&W,dataStartIndex:A,dataEndIndex:C}))))},{}),te=VQe(Ue(Ue({},X),{},{props:T,graphicalItems:G}),_==null?void 0:_.legendBBox);Object.keys(X).forEach(function(le){X[le]=u(T,X[le],te,le.replace("Map",""),t)});var re=X["".concat(Y,"Map")],z=BQe(re),ae=h(T,Ue(Ue({},X),{},{dataStartIndex:A,dataEndIndex:C,updateId:k,graphicalItems:G,stackGroups:W,offset:te}));return Ue(Ue({formattedGraphicalItems:ae,graphicalItems:G,offset:te,stackGroups:W},z),X)},m=function(y){function w(_){var T,A,C;return _Qe(this,w),C=EQe(this,w,[_]),gn(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),gn(C,"accessibilityManager",new lQe),gn(C,"handleLegendBBoxUpdate",function(k){if(k){var M=C.state,P=M.dataStartIndex,O=M.dataEndIndex,j=M.updateId;C.setState(Ue({legendBBox:k},f({props:C.props,dataStartIndex:P,dataEndIndex:O,updateId:j},Ue(Ue({},C.state),{},{legendBBox:k}))))}}),gn(C,"handleReceiveSyncEvent",function(k,M,P){if(C.props.syncId===k){if(P===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(M)}}),gn(C,"handleBrushChange",function(k){var M=k.startIndex,P=k.endIndex;if(M!==C.state.dataStartIndex||P!==C.state.dataEndIndex){var O=C.state.updateId;C.setState(function(){return Ue({dataStartIndex:M,dataEndIndex:P},f({props:C.props,dataStartIndex:M,dataEndIndex:P,updateId:O},C.state))}),C.triggerSyncEvent({dataStartIndex:M,dataEndIndex:P})}}),gn(C,"handleMouseEnter",function(k){var M=C.getMouseInfo(k);if(M){var P=Ue(Ue({},M),{},{isTooltipActive:!0});C.setState(P),C.triggerSyncEvent(P);var O=C.props.onMouseEnter;or(O)&&O(P,k)}}),gn(C,"triggeredAfterMouseMove",function(k){var M=C.getMouseInfo(k),P=M?Ue(Ue({},M),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(P),C.triggerSyncEvent(P);var O=C.props.onMouseMove;or(O)&&O(P,k)}),gn(C,"handleItemMouseEnter",function(k){C.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),gn(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),gn(C,"handleMouseMove",function(k){k.persist(),C.throttleTriggeredAfterMouseMove(k)}),gn(C,"handleMouseLeave",function(k){C.throttleTriggeredAfterMouseMove.cancel();var M={isTooltipActive:!1};C.setState(M),C.triggerSyncEvent(M);var P=C.props.onMouseLeave;or(P)&&P(M,k)}),gn(C,"handleOuterEvent",function(k){var M=hUe(k),P=zu(C.props,"".concat(M));if(M&&or(P)){var O,j;/.*touch.*/i.test(M)?j=C.getMouseInfo(k.changedTouches[0]):j=C.getMouseInfo(k),P((O=j)!==null&&O!==void 0?O:{},k)}}),gn(C,"handleClick",function(k){var M=C.getMouseInfo(k);if(M){var P=Ue(Ue({},M),{},{isTooltipActive:!0});C.setState(P),C.triggerSyncEvent(P);var O=C.props.onClick;or(O)&&O(P,k)}}),gn(C,"handleMouseDown",function(k){var M=C.props.onMouseDown;if(or(M)){var P=C.getMouseInfo(k);M(P,k)}}),gn(C,"handleMouseUp",function(k){var M=C.props.onMouseUp;if(or(M)){var P=C.getMouseInfo(k);M(P,k)}}),gn(C,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),gn(C,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.handleMouseDown(k.changedTouches[0])}),gn(C,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&C.handleMouseUp(k.changedTouches[0])}),gn(C,"handleDoubleClick",function(k){var M=C.props.onDoubleClick;if(or(M)){var P=C.getMouseInfo(k);M(P,k)}}),gn(C,"handleContextMenu",function(k){var M=C.props.onContextMenu;if(or(M)){var P=C.getMouseInfo(k);M(P,k)}}),gn(C,"triggerSyncEvent",function(k){C.props.syncId!==void 0&&YB.emit(KB,C.props.syncId,k,C.eventEmitterSymbol)}),gn(C,"applySyncEvent",function(k){var M=C.props,P=M.layout,O=M.syncMethod,j=C.state.updateId,L=k.dataStartIndex,B=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)C.setState(Ue({dataStartIndex:L,dataEndIndex:B},f({props:C.props,dataStartIndex:L,dataEndIndex:B,updateId:j},C.state)));else if(k.activeTooltipIndex!==void 0){var $=k.chartX,Y=k.chartY,G=k.activeTooltipIndex,W=C.state,X=W.offset,te=W.tooltipTicks;if(!X)return;if(typeof O=="function")G=O(te,k);else if(O==="value"){G=-1;for(var re=0;re<te.length;re++)if(te[re].value===k.activeLabel){G=re;break}}var z=Ue(Ue({},X),{},{x:X.left,y:X.top}),ae=Math.min($,z.x+z.width),le=Math.min(Y,z.y+z.height),ee=te[G]&&te[G].value,ye=sH(C.state,C.props.data,G),fe=te[G]?{x:P==="horizontal"?te[G].coordinate:ae,y:P==="horizontal"?le:te[G].coordinate}:rxe;C.setState(Ue(Ue({},k),{},{activeLabel:ee,activeCoordinate:fe,activePayload:ye,activeTooltipIndex:G}))}else C.setState(k)}),gn(C,"renderCursor",function(k){var M,P=C.state,O=P.isTooltipActive,j=P.activeCoordinate,L=P.activePayload,B=P.offset,$=P.activeTooltipIndex,Y=P.tooltipAxisBandSize,G=C.getTooltipEventType(),W=(M=k.props.active)!==null&&M!==void 0?M:O,X=C.props.layout,te=k.key||"_recharts-cursor";return ve.createElement(gQe,{key:te,activeCoordinate:j,activePayload:L,activeTooltipIndex:$,chartName:t,element:k,isActive:W,layout:X,offset:B,tooltipAxisBandSize:Y,tooltipEventType:G})}),gn(C,"renderPolarAxis",function(k,M,P){var O=zu(k,"type.axisType"),j=zu(C.state,"".concat(O,"Map")),L=k.type.defaultProps,B=L!==void 0?Ue(Ue({},L),k.props):k.props,$=j&&j[B["".concat(O,"Id")]];return K.cloneElement(k,Ue(Ue({},$),{},{className:Pr(O,$.className),key:k.key||"".concat(M,"-").concat(P),ticks:hg($,!0)}))}),gn(C,"renderPolarGrid",function(k){var M=k.props,P=M.radialLines,O=M.polarAngles,j=M.polarRadius,L=C.state,B=L.radiusAxisMap,$=L.angleAxisMap,Y=Bv(B),G=Bv($),W=G.cx,X=G.cy,te=G.innerRadius,re=G.outerRadius;return K.cloneElement(k,{polarAngles:Array.isArray(O)?O:hg(G,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(j)?j:hg(Y,!0).map(function(z){return z.coordinate}),cx:W,cy:X,innerRadius:te,outerRadius:re,key:k.key||"polar-grid",radialLines:P})}),gn(C,"renderLegend",function(){var k=C.state.formattedGraphicalItems,M=C.props,P=M.children,O=M.width,j=M.height,L=C.props.margin||{},B=O-(L.left||0)-(L.right||0),$=ewe({children:P,formattedGraphicalItems:k,legendWidth:B,legendContent:c});if(!$)return null;var Y=$.item,G=Mae($,mQe);return K.cloneElement(Y,Ue(Ue({},G),{},{chartWidth:O,chartHeight:j,margin:L,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),gn(C,"renderTooltip",function(){var k,M=C.props,P=M.children,O=M.accessibilityLayer,j=Ic(P,Vd);if(!j)return null;var L=C.state,B=L.isTooltipActive,$=L.activeCoordinate,Y=L.activePayload,G=L.activeLabel,W=L.offset,X=(k=j.props.active)!==null&&k!==void 0?k:B;return K.cloneElement(j,{viewBox:Ue(Ue({},W),{},{x:W.left,y:W.top}),active:X,label:G,payload:X?Y:[],coordinate:$,accessibilityLayer:O})}),gn(C,"renderBrush",function(k){var M=C.props,P=M.margin,O=M.data,j=C.state,L=j.offset,B=j.dataStartIndex,$=j.dataEndIndex,Y=j.updateId;return K.cloneElement(k,{key:k.key||"_recharts-brush",onChange:XP(C.handleBrushChange,k.props.onChange),data:O,x:mt(k.props.x)?k.props.x:L.left,y:mt(k.props.y)?k.props.y:L.top+L.height+L.brushBottom-(P.bottom||0),width:mt(k.props.width)?k.props.width:L.width,startIndex:B,endIndex:$,updateId:"brush-".concat(Y)})}),gn(C,"renderReferenceElement",function(k,M,P){if(!k)return null;var O=C,j=O.clipPathId,L=C.state,B=L.xAxisMap,$=L.yAxisMap,Y=L.offset,G=k.type.defaultProps||{},W=k.props,X=W.xAxisId,te=X===void 0?G.xAxisId:X,re=W.yAxisId,z=re===void 0?G.yAxisId:re;return K.cloneElement(k,{key:k.key||"".concat(M,"-").concat(P),xAxis:B[te],yAxis:$[z],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:j})}),gn(C,"renderActivePoints",function(k){var M=k.item,P=k.activePoint,O=k.basePoint,j=k.childIndex,L=k.isRange,B=[],$=M.props.key,Y=M.item.type.defaultProps!==void 0?Ue(Ue({},M.item.type.defaultProps),M.item.props):M.item.props,G=Y.activeDot,W=Y.dataKey,X=Ue(Ue({index:j,dataKey:W,cx:P.x,cy:P.y,r:4,fill:bW(M.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ur(G,!1)),jN(G));return B.push(w.renderActiveDot(G,X,"".concat($,"-activePoint-").concat(j))),O?B.push(w.renderActiveDot(G,Ue(Ue({},X),{},{cx:O.x,cy:O.y}),"".concat($,"-basePoint-").concat(j))):L&&B.push(null),B}),gn(C,"renderGraphicChild",function(k,M,P){var O=C.filterFormatItem(k,M,P);if(!O)return null;var j=C.getTooltipEventType(),L=C.state,B=L.isTooltipActive,$=L.tooltipAxis,Y=L.activeTooltipIndex,G=L.activeLabel,W=C.props.children,X=Ic(W,Vd),te=O.props,re=te.points,z=te.isRange,ae=te.baseLine,le=O.item.type.defaultProps!==void 0?Ue(Ue({},O.item.type.defaultProps),O.item.props):O.item.props,ee=le.activeDot,ye=le.hide,fe=le.activeBar,Ce=le.activeShape,at=!!(!ye&&B&&X&&(ee||fe||Ce)),Le={};j!=="axis"&&X&&X.props.trigger==="click"?Le={onClick:XP(C.handleItemMouseEnter,k.props.onClick)}:j!=="axis"&&(Le={onMouseLeave:XP(C.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:XP(C.handleItemMouseEnter,k.props.onMouseEnter)});var we=K.cloneElement(k,Ue(Ue({},O.props),Le));function be(Re){return typeof $.dataKey=="function"?$.dataKey(Re.payload):null}if(at)if(Y>=0){var ge,he;if($.dataKey&&!$.allowDuplicatedCategory){var Ge=typeof $.dataKey=="function"?be:"payload.".concat($.dataKey.toString());ge=Wz(re,Ge,G),he=z&&ae&&Wz(ae,Ge,G)}else ge=re==null?void 0:re[Y],he=z&&ae&&ae[Y];if(Ce||fe){var je=k.props.activeIndex!==void 0?k.props.activeIndex:Y;return[K.cloneElement(k,Ue(Ue(Ue({},O.props),Le),{},{activeIndex:je})),null,null]}if(!Xr(ge))return[we].concat(oT(C.renderActivePoints({item:O,activePoint:ge,basePoint:he,childIndex:Y,isRange:z})))}else{var rt,bt=(rt=C.getItemByXY(C.state.activeCoordinate))!==null&&rt!==void 0?rt:{graphicalItem:we},lt=bt.graphicalItem,cn=lt.item,Ct=cn===void 0?k:cn,En=lt.childIndex,jn=Ue(Ue(Ue({},O.props),Le),{},{activeIndex:En});return[K.cloneElement(Ct,jn),null,null]}return z?[we,null,null]:[we,null]}),gn(C,"renderCustomized",function(k,M,P){return K.cloneElement(k,Ue(Ue({key:"recharts-customized-".concat(P)},C.props),C.state))}),gn(C,"renderMap",{CartesianGrid:{handler:tO,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:tO},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:tO},YAxis:{handler:tO},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((T=_.id)!==null&&T!==void 0?T:kj("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=J0e(C.triggeredAfterMouseMove,(A=_.throttleDelay)!==null&&A!==void 0?A:1e3/60),C.state={},C}return CQe(w,y),TQe(w,[{key:"componentDidMount",value:function(){var T,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,A=T.children,C=T.data,k=T.height,M=T.layout,P=Ic(A,Vd);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,L=sH(this.state,C,O,j),B=this.state.tooltipTicks[O].coordinate,$=(this.state.offset.top+k)/2,Y=M==="horizontal",G=Y?{x:B,y:$}:{y:B,x:$},W=this.state.formattedGraphicalItems.find(function(te){var re=te.item;return re.type.name==="Scatter"});W&&(G=Ue(Ue({},G),W.props.points[O].tooltipPosition),L=W.props.points[O].tooltipPayload);var X={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:j,activePayload:L,activeCoordinate:G};this.setState(X),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var C,k;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(T){Kz([Ic(T.children,Vd)],[Ic(this.props.children,Vd)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Ic(this.props.children,Vd);if(T&&typeof T.props.shared=="boolean"){var A=T.props.shared?"axis":"item";return s.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var A=this.container,C=A.getBoundingClientRect(),k=Jze(C),M={chartX:Math.round(T.pageX-k.left),chartY:Math.round(T.pageY-k.top)},P=C.width/A.offsetWidth||1,O=this.inRange(M.chartX,M.chartY,P);if(!O)return null;var j=this.state,L=j.xAxisMap,B=j.yAxisMap,$=this.getTooltipEventType(),Y=Oae(this.state,this.props.data,this.props.layout,O);if($!=="axis"&&L&&B){var G=Bv(L).scale,W=Bv(B).scale,X=G&&G.invert?G.invert(M.chartX):null,te=W&&W.invert?W.invert(M.chartY):null;return Ue(Ue({},M),{},{xValue:X,yValue:te},Y)}return Y?Ue(Ue({},M),Y):null}},{key:"inRange",value:function(T,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,M=T/C,P=A/C;if(k==="horizontal"||k==="vertical"){var O=this.state.offset,j=M>=O.left&&M<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return j?{x:M,y:P}:null}var L=this.state,B=L.angleAxisMap,$=L.radiusAxisMap;if(B&&$){var Y=Bv(B);return Kre({x:M,y:P},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,A=this.getTooltipEventType(),C=Ic(T,Vd),k={};C&&A==="axis"&&(C.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var M=jN(this.props,this.handleOuterEvent);return Ue(Ue({},M),k)}},{key:"addListener",value:function(){YB.on(KB,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){YB.removeListener(KB,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,A,C){for(var k=this.state.formattedGraphicalItems,M=0,P=k.length;M<P;M++){var O=k[M];if(O.item===T||O.props.key===T.key||A===xg(O.item.type)&&C===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,A=this.state.offset,C=A.left,k=A.top,M=A.height,P=A.width;return ve.createElement("defs",null,ve.createElement("clipPath",{id:T},ve.createElement("rect",{x:C,y:k,height:M,width:P})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(A,C){var k=Iae(C,2),M=k[0],P=k[1];return Ue(Ue({},A),{},gn({},M,P.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(A,C){var k=Iae(C,2),M=k[0],P=k[1];return Ue(Ue({},A),{},gn({},M,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(T){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(T){var A=this.state,C=A.formattedGraphicalItems,k=A.activeItem;if(C&&C.length)for(var M=0,P=C.length;M<P;M++){var O=C[M],j=O.props,L=O.item,B=L.type.defaultProps!==void 0?Ue(Ue({},L.type.defaultProps),L.props):L.props,$=xg(L.type);if($==="Bar"){var Y=(j.data||[]).find(function(te){return mYe(T,te)});if(Y)return{graphicalItem:O,payload:Y}}else if($==="RadialBar"){var G=(j.data||[]).find(function(te){return Kre(T,te)});if(G)return{graphicalItem:O,payload:G}}else if(Wj(O,k)||Yj(O,k)||HD(O,k)){var W=oKe({graphicalItem:O,activeTooltipItem:k,itemData:B.data}),X=B.activeIndex===void 0?W:B.activeIndex;return{graphicalItem:Ue(Ue({},O),{},{childIndex:X}),payload:HD(O,k)?B.data[W]:O.props.data[W]}}}return null}},{key:"render",value:function(){var T=this;if(!see(this))return null;var A=this.props,C=A.children,k=A.className,M=A.width,P=A.height,O=A.style,j=A.compact,L=A.title,B=A.desc,$=Mae(A,vQe),Y=Ur($,!1);if(j)return ve.createElement(pae,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement(Zz,KS({},Y,{width:M,height:P,title:L,desc:B}),this.renderClipPath(),cee(C,this.renderMap)));if(this.props.accessibilityLayer){var G,W;Y.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,Y.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Y.onKeyDown=function(te){T.accessibilityManager.keyboardEvent(te)},Y.onFocus=function(){T.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return ve.createElement(pae,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ve.createElement("div",KS({className:Pr("recharts-wrapper",k),style:Ue({position:"relative",cursor:"default",width:M,height:P},O)},X,{ref:function(re){T.container=re}}),ve.createElement(Zz,KS({},Y,{width:M,height:P,title:L,desc:B,style:RQe}),this.renderClipPath(),cee(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(K.Component);gn(m,"displayName",t),gn(m,"defaultProps",Ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),gn(m,"getDerivedStateFromProps",function(y,w){var _=y.dataKey,T=y.data,A=y.children,C=y.width,k=y.height,M=y.layout,P=y.stackOffset,O=y.margin,j=w.dataStartIndex,L=w.dataEndIndex;if(w.updateId===void 0){var B=Rae(y);return Ue(Ue(Ue({},B),{},{updateId:0},f(Ue(Ue({props:y},B),{},{updateId:0}),w)),{},{prevDataKey:_,prevData:T,prevWidth:C,prevHeight:k,prevLayout:M,prevStackOffset:P,prevMargin:O,prevChildren:A})}if(_!==w.prevDataKey||T!==w.prevData||C!==w.prevWidth||k!==w.prevHeight||M!==w.prevLayout||P!==w.prevStackOffset||!u1(O,w.prevMargin)){var $=Rae(y),Y={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},G=Ue(Ue({},Oae(w,T,M)),{},{updateId:w.updateId+1}),W=Ue(Ue(Ue({},$),Y),G);return Ue(Ue(Ue({},W),f(Ue({props:y},W),w)),{},{prevDataKey:_,prevData:T,prevWidth:C,prevHeight:k,prevLayout:M,prevStackOffset:P,prevMargin:O,prevChildren:A})}if(!Kz(A,w.prevChildren)){var X,te,re,z,ae=Ic(A,Z1),le=ae&&(X=(te=ae.props)===null||te===void 0?void 0:te.startIndex)!==null&&X!==void 0?X:j,ee=ae&&(re=(z=ae.props)===null||z===void 0?void 0:z.endIndex)!==null&&re!==void 0?re:L,ye=le!==j||ee!==L,fe=!Xr(T),Ce=fe&&!ye?w.updateId:w.updateId+1;return Ue(Ue({updateId:Ce},f(Ue(Ue({props:y},w),{},{updateId:Ce,dataStartIndex:le,dataEndIndex:ee}),w)),{},{prevChildren:A,dataStartIndex:le,dataEndIndex:ee})}return null}),gn(m,"renderActiveDot",function(y,w,_){var T;return K.isValidElement(y)?T=K.cloneElement(y,w):or(y)?T=y(w):T=ve.createElement(vwe,w),ve.createElement(Oo,{className:"recharts-active-dot",key:_},T)});var v=K.forwardRef(function(w,_){return ve.createElement(m,KS({},w,{ref:_}))});return v.displayName=m.displayName,v},axe=HQe({chartName:"BarChart",GraphicalChild:Ny,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:dM},{axisType:"yAxis",AxisComp:hM}],formatAxisMap:nXe});const GQe=ve.memo(()=>{const{workSessions:n,selectedRange:e}=oh(),t=Ut(w=>w.projects),r=K.useMemo(()=>{var A,C;if(console.log("TopProjects - Filtering work sessions:",{totalSessions:n.length,rangeType:e.rangeType,startDate:(A=e.startDate)==null?void 0:A.toISOString(),endDate:(C=e.endDate)==null?void 0:C.toISOString()}),e.rangeType==="all time")return console.log('TopProjects - Using all sessions for "all time"'),n;if(!e.startDate||!e.endDate)return console.log("TopProjects - No date range specified, using all sessions"),n;const w=new Date(e.startDate);w.setHours(0,0,0,0);const _=new Date(e.endDate);_.setHours(23,59,59,999);const T=n.filter(k=>{const M=new Date(k.date);return M>=w&&M<=_});return console.log("TopProjects - Filtered result:",{originalCount:n.length,filteredCount:T.length,sampleFiltered:T.slice(0,3)}),T},[n,e]),i=K.useMemo(()=>{const w=new Map;return r.filter(_=>_.sessionType==="pomodoro"||_.sessionType==="manual").forEach(_=>{const T=_.duration||0,A=w.get(_.projectId)||0;w.set(_.projectId,A+T)}),t.map(_=>({id:_.id,userId:_.userId,name:_.name,color:_.color||"#3B82F6",totalFocusTime:w.get(_.id)||0,createdAt:new Date,isActive:!0})).filter(_=>_.totalFocusTime>0).sort((_,T)=>T.totalFocusTime-_.totalFocusTime)},[t,r]),a=i.slice(0,9),o=i.slice(9),s=o.reduce((w,_)=>w+_.totalFocusTime,0),l=[...a.map(w=>({name:"",fullName:w.name,value:w.totalFocusTime,color:w.color}))];o.length>0&&s>0&&l.push({name:"",fullName:"Others",value:s,color:"#969696"});const c=Math.max(...l.map(w=>w.value)),d=(w=>w<=300?60:w<=600?120:w<=1200?240:Math.ceil(w/6/60)*60)(c),h=Math.ceil(c/d)*d,f=Array.from({length:Math.floor(h/d)+1},(w,_)=>_*d),m=({active:w,payload:_,label:T})=>{if(w&&_&&_.length){const A=_[0].payload;return x.jsxs("div",{className:"bg-background-secondary border border-border rounded-lg shadow-lg p-3",children:[x.jsx("p",{className:"text-text-primary font-medium text-sm mb-1",children:A.fullName}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:A.color}}),x.jsx("span",{className:"text-text-secondary text-sm",children:ry(A.value)})]})]})}return null},v=()=>x.jsx("div",{className:"flex flex-wrap gap-x-8 gap-y-2 mt-4 px-4",children:l.map((w,_)=>x.jsxs("div",{className:"flex items-center min-w-0 max-w-[200px]",children:[x.jsx("div",{className:"w-3 h-3 rounded-sm mr-2 flex-shrink-0",style:{backgroundColor:w.color}}),x.jsx("span",{className:"text-xs text-text-secondary overflow-hidden text-ellipsis whitespace-nowrap flex-1",title:w.fullName,children:w.fullName})]},_))}),y=w=>{const{x:_,y:T,value:A,width:C}=w;let k="";if(A<60)k=`${A}m`;else{const M=Math.floor(A/60),P=A%60;k=P>0?`${M}h ${P}m`:`${M}h`}return x.jsx("text",{x:_+C/2,y:T-8,fill:"var(--text-secondary)",textAnchor:"middle",fontSize:"11",fontWeight:"500",style:{whiteSpace:"nowrap"},children:k})};return l.length===0?x.jsx(wg,{title:"Top Projects",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:x.jsx("i",{className:"ri-folder-line ri-2x"})}),x.jsx("p",{className:"text-text-secondary text-sm",children:"No projects with focus time found"})]})})}):x.jsx(wg,{title:"Top Projects",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsxs("div",{className:"flex flex-col w-full h-[360px]",children:[x.jsx("div",{className:"flex-1",children:x.jsx(ebe,{width:"100%",height:"100%",children:x.jsxs(axe,{data:l,margin:{top:50,right:30,left:25,bottom:20},barSize:35,children:[x.jsx("text",{x:"50%",y:20,textAnchor:"middle",dominantBaseline:"hanging",className:"fill-text-primary text-sm font-medium",style:{transform:"translateY(-5px)"},children:"Time Spent"}),x.jsx(IW,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-color)",strokeWidth:1}),x.jsx(dM,{dataKey:"name",interval:0,tick:!1,tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},dy:8}),x.jsx(hM,{tickFormatter:w=>{if(w<60)return`${w}m`;const _=Math.floor(w/60),T=w%60;return T>0?`${_}h ${T}m`:`${_}h`},tick:{fill:"var(--text-secondary)",fontSize:11,fontWeight:500},tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},width:45,dx:-5,ticks:f,domain:[0,h],allowDataOverflow:!1}),x.jsx(Vd,{content:x.jsx(m,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),x.jsx(Ny,{dataKey:"value",radius:[4,4,0,0],label:x.jsx(y,{}),children:l.map((w,_)=>x.jsx(Nj,{fill:w.color,style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:T=>{const A=document.querySelector(`[name="Bar-${_}"]`);A&&(A.style.filter="brightness(0.9)")},onMouseLeave:T=>{const A=document.querySelector(`[name="Bar-${_}"]`);A&&(A.style.filter="brightness(1)")}},`cell-${_}`))})]})})}),x.jsx(v,{})]})})}),qQe=ve.memo(()=>{const{workSessions:n,selectedRange:e}=oh(),{tasks:t,projects:r}=Ut(),{user:i}=Qt(),[a,o]=K.useState(!1),s=K.useMemo(()=>t.map(u=>({id:u.id,title:u.title,description:u.description,projectId:u.projectId,userId:u.userId,status:u.status,priority:u.priority,completed:u.completed,order:u.order,createdAt:u.createdAt,updatedAt:u.updatedAt})),[t.map(u=>`${u.id}-${u.title}-${u.status}-${u.projectId}-${u.completed}`).join("|")]),l=K.useMemo(()=>{if(e.rangeType==="all time"||!e.startDate||!e.endDate)return n;const u=new Date(e.startDate);u.setHours(0,0,0,0);const d=new Date(e.endDate);return d.setHours(23,59,59,999),n.filter(h=>{const f=new Date(h.date);return f>=u&&f<=d})},[n,e]),c=K.useMemo(()=>{if(!i||l.length===0)return[];const u=new Map;return l.filter(d=>d.sessionType==="pomodoro"||d.sessionType==="manual").forEach(d=>{const h=d.duration||0,f=u.get(d.taskId)||0;u.set(d.taskId,f+h)}),Array.from(u.entries()).map(([d,h])=>{const f=s.find(v=>v.id===d);return f?{...uBe(f),totalFocusTime:h}:null}).filter(d=>d!==null&&d.totalFocusTime>0).sort((d,h)=>h.totalFocusTime-d.totalFocusTime)},[i,s,l]);return a?x.jsx(wg,{title:"Top Tasks",action:x.jsx("button",{className:"flex items-center text-sm text-text-secondary",children:x.jsx("span",{children:"Loading..."})}),children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsx("div",{className:"text-center",children:x.jsx("p",{className:"text-text-secondary text-sm",children:"Loading tasks..."})})})}):c.length===0?x.jsx(wg,{title:"Top Tasks",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:x.jsx("i",{className:"ri-calendar-event-line ri-2x"})}),x.jsx("p",{className:"text-text-secondary text-sm",children:"No tasks with focus time found"})]})})}):x.jsx(wg,{title:"Top Tasks",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsxs("div",{className:"space-y-2 h-[360px] overflow-y-auto pr-1 custom-scrollbar",children:[x.jsx("style",{children:`
          .custom-scrollbar::-webkit-scrollbar {
            width: 0 !important;
            display: none !important;
          }
          .custom-scrollbar {
            scrollbar-width: none !important;
            -ms-overflow-style: none !important;
            overflow: -moz-scrollbars-none !important;
          }
          .custom-scrollbar {
            -webkit-overflow-scrolling: touch;
          }
          `}),c.map((u,d)=>{const h=r.find(m=>m.id===u.projectId);if(!h)return null;const f=ry(u.totalFocusTime);return x.jsx("div",{className:"flex items-center py-2 border-b border-border",children:x.jsxs("div",{className:"flex items-center",children:[x.jsxs("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary mr-3",children:[d+1,"."]}),x.jsxs("div",{children:[x.jsx("h4",{className:"text-sm font-medium text-text-primary",children:u.name}),x.jsx("div",{className:"flex items-center mt-0.5",children:x.jsxs("span",{className:"text-xs text-text-secondary",children:[h.name," • ",f]})})]})]})},u.id)})]})})}),WQe=({active:n,payload:e,label:t})=>{if(n&&e&&e.length){const r=e[0].value;return x.jsxs("div",{className:"bg-background-secondary p-3 border border-border rounded-lg shadow-lg",children:[x.jsx("p",{className:"font-medium text-text-primary",children:t}),x.jsxs("p",{className:"text-sm text-text-secondary",children:[x.jsx("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"}),"Focus Time: ",ry(r)]})]})}return null},YQe=ve.memo(()=>{const{workSessions:n,focusTimeView:e,setFocusTimeView:t,selectedRange:r}=oh(),i=K.useMemo(()=>{if(r.rangeType==="all time"||!r.startDate||!r.endDate)return n;const h=new Date(r.startDate);h.setHours(0,0,0,0);const f=new Date(r.endDate);return f.setHours(23,59,59,999),n.filter(m=>{const v=new Date(m.date);return v>=h&&v<=f})},[n,r]),a=h=>{let f;if(typeof h=="string"){if(h.includes("T"))return h.split("T")[0];if(h.match(/^\d{4}-\d{2}-\d{2}$/))return h;f=new Date(h)}else f=new Date(h);if(f&&!isNaN(f.getTime())){const m=f.getFullYear(),v=(f.getMonth()+1).toString().padStart(2,"0"),y=f.getDate().toString().padStart(2,"0");return`${m}-${v}-${y}`}return typeof h=="string"?h:h.toISOString().split("T")[0]},o=K.useMemo(()=>{var h,f;if(!i.length)return[];try{const m={};i.filter(y=>y.sessionType==="pomodoro"||y.sessionType==="manual").forEach(y=>{const w=a(y.date),_=y.duration||0;m[w]||(m[w]=0),m[w]+=_}),console.log("Time by date aggregated:",m);const v=[];if(e==="daily"){let y,w;if(console.log("Daily view processing selectedRange:",{rangeType:r.rangeType,startDate:(h=r.startDate)==null?void 0:h.toISOString(),endDate:(f=r.endDate)==null?void 0:f.toISOString()}),r.rangeType==="all time")if(i.length>0){const T=[...new Set(i.map(A=>A.date))].map(A=>new Date(A)).sort((A,C)=>A.getTime()-C.getTime());y=new Date(T[0]),w=new Date(T[T.length-1]),console.log("All time daily - using actual data range:",{startDate:y.toISOString(),endDate:w.toISOString(),totalDates:T.length})}else w=new Date,y=new Date,y.setDate(w.getDate()-6);else r.startDate&&r.endDate?(y=new Date(r.startDate),w=new Date(r.endDate)):(w=new Date,r.rangeType==="last 30 days"?(y=new Date,y.setDate(w.getDate()-29)):r.rangeType==="last 7 days"?(y=new Date,y.setDate(w.getDate()-6)):r.rangeType==="today"?y=new Date:(y=new Date,y.setDate(w.getDate()-6)));y.setHours(0,0,0,0),w.setHours(23,59,59,999);const _=new Date(y);for(console.log("Daily view - generating days from:",y.toISOString(),"to:",w.toISOString());_<=w;){const T=a(_),A=_.toLocaleDateString("en-US",{month:"short",day:"numeric"}),C=m[T]||0;console.log(`Daily lookup: ${T} = ${C} minutes`),v.push({date:A,value:C,displayValue:C>0?ry(C):"0m"}),_.setDate(_.getDate()+1)}console.log("Daily view - generated days:",v.length,"days with data:",v.filter(T=>T.value>0).length)}else if(e==="weekly"){const y={};Object.entries(m).forEach(([A,C])=>{try{const k=new Date(A+"T00:00:00");if(isNaN(k.getTime())){console.warn("Invalid date:",A);return}const M=new Date(k),P=k.getDay(),O=P===0?6:P-1;M.setDate(k.getDate()-O),M.setHours(0,0,0,0);const j=M.toISOString().split("T")[0];y[j]||(y[j]=0),y[j]+=C}catch(k){console.error("Error processing date for weekly view:",A,k)}}),console.log("Weekly data aggregated:",y);let w=8,_=new Date,T=new Date;if(r.rangeType==="all time")if(i.length>0){const A=[...new Set(i.map(B=>B.date))].map(B=>new Date(B)).sort((B,$)=>B.getTime()-$.getTime()),C=A[0],k=A[A.length-1],M=C.getDay(),P=M===0?6:M-1;_=new Date(C),_.setDate(C.getDate()-P),_.setHours(0,0,0,0);const O=k.getDay(),j=O===0?6:O-1;T=new Date(k),T.setDate(k.getDate()-j),T.setHours(0,0,0,0);const L=Math.ceil((T.getTime()-_.getTime())/(1e3*60*60*24*7));w=Math.max(L+1,1),console.log("All time weekly view - calculated range:",{earliestDate:C.toISOString(),latestDate:k.toISOString(),startWeek:_.toISOString(),endWeek:T.toISOString(),weeksToShow:w})}else{w=8,T=new Date;const A=T.getDay(),C=A===0?6:A-1;T.setDate(T.getDate()-C),T.setHours(0,0,0,0),_=new Date(T),_.setDate(T.getDate()-(w-1)*7)}else if(r.startDate&&r.endDate){_=new Date(r.startDate),T=new Date(r.endDate);const A=_.getDay(),C=A===0?6:A-1;_.setDate(_.getDate()-C),_.setHours(0,0,0,0);const k=T.getDay(),M=k===0?6:k-1;T.setDate(T.getDate()-M),T.setHours(0,0,0,0);const P=Math.ceil((T.getTime()-_.getTime())/(1e3*60*60*24*7));w=Math.max(P+1,1)}else{w=8,T=new Date;const A=T.getDay(),C=A===0?6:A-1;T.setDate(T.getDate()-C),T.setHours(0,0,0,0),_=new Date(T),_.setDate(T.getDate()-(w-1)*7)}console.log("Weekly view - startWeek:",_,"endWeek:",T,"weeksToShow:",w);for(let A=0;A<w;A++){const C=new Date(_);C.setDate(_.getDate()+A*7),C.setHours(0,0,0,0);const k=new Date(C);k.setDate(C.getDate()+6);const M=C.toISOString().split("T")[0],P=y[M]||0;let O;try{const j=C.toLocaleDateString("en-US",{month:"short",day:"numeric"}),L=k.toLocaleDateString("en-US",{month:"short",day:"numeric"});O=`${j} - ${L}`}catch(j){console.error("Date formatting error:",j),O=`Week ${A+1}`}v.push({date:O,value:P,displayValue:P>0?ry(P):"0m"})}}else if(e==="monthly"){const y={};Object.entries(m).forEach(([A,C])=>{const k=new Date(A+"T00:00:00");if(isNaN(k.getTime())){console.warn("Invalid date:",A);return}const M=`${k.getFullYear()}-${(k.getMonth()+1).toString().padStart(2,"0")}`;y[M]||(y[M]=0),y[M]+=C});let w=6,_=new Date,T=new Date;if(r.rangeType==="all time")if(i.length>0){const A=i.map(P=>new Date(P.date)),C=new Date(Math.min(...A.map(P=>P.getTime()))),k=new Date(Math.max(...A.map(P=>P.getTime())));_=new Date(C.getFullYear(),C.getMonth(),1),T=new Date(k.getFullYear(),k.getMonth(),1);const M=(T.getFullYear()-_.getFullYear())*12+(T.getMonth()-_.getMonth());w=Math.max(M+1,1)}else w=6,T=new Date,T=new Date(T.getFullYear(),T.getMonth(),1),_=new Date(T),_.setMonth(T.getMonth()-(w-1));else if(r.startDate&&r.endDate){_=new Date(r.startDate.getFullYear(),r.startDate.getMonth(),1),T=new Date(r.endDate.getFullYear(),r.endDate.getMonth(),1);const A=(T.getFullYear()-_.getFullYear())*12+(T.getMonth()-_.getMonth());w=Math.max(A+1,1)}else w=6,T=new Date,T=new Date(T.getFullYear(),T.getMonth(),1),_=new Date(T),_.setMonth(T.getMonth()-(w-1));console.log("Monthly view - startMonth:",_,"endMonth:",T,"monthsToShow:",w);for(let A=0;A<w;A++){const C=new Date(_);C.setMonth(_.getMonth()+A),C.setHours(0,0,0,0);const k=`${C.getFullYear()}-${(C.getMonth()+1).toString().padStart(2,"0")}`,M=y[k]||0;let P;try{P=C.toLocaleDateString("en-US",{month:"long",year:"numeric"})}catch(O){console.error("Date formatting error:",O),P=`Month ${A+1}`}v.push({date:P,value:M,displayValue:M>0?ry(M):"0m"})}}return v}catch(m){return console.error("Error processing chart data:",m),[]}},[i,e,r]),s=h=>{t(h)},l=()=>{const h=o.length;return h<=5?60:h<=8?50:h<=15?40:h<=31?30:h<=60?20:h<=90?15:10},c=()=>{const h=o.length;let f=0;return e==="daily"?h<=7?f=0:h<=14?f=1:h<=31?f=2:h<=60?f=4:h<=90?f=6:f=Math.floor(h/10):e==="weekly"?h<=8?f=0:h<=16?f=1:f=Math.floor(h/8):e==="monthly"&&(h<=12?f=0:f=Math.floor(h/12)),f},u=()=>45,d=h=>{if(h===0)return"";const f=Math.floor(h/60),m=h%60;return f===0?`${m}m`:m===0?`${f}h`:`${f}h${m}m`};return x.jsxs(wg,{title:"Focus Time Trend",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("div",{}),x.jsx("div",{className:"flex items-center space-x-2",children:x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="daily"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("daily"),children:"Daily"}),x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="weekly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("weekly"),children:"Weekly"}),x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="monthly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("monthly"),children:"Monthly"})]})})]}),x.jsx("div",{className:"h-[28rem]",children:o.length===0?x.jsx("div",{className:"flex items-center justify-center h-full",children:x.jsxs("div",{className:"text-center text-text-secondary",children:[x.jsx("p",{className:"text-lg font-medium mb-2",children:"No focus time data available"}),x.jsx("p",{className:"text-sm",children:"Start a timer to see your trends!"})]})}):x.jsx(ebe,{width:"100%",height:"100%",children:x.jsxs(axe,{data:o,margin:{top:30,right:20,left:15,bottom:u()},children:[x.jsx(IW,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),x.jsx(dM,{dataKey:"date",axisLine:{stroke:"var(--border-color)"},tickLine:{stroke:"var(--border-color)"},tick:{fill:"var(--text-secondary)",fontSize:12},interval:c(),angle:0,textAnchor:"middle",height:55}),x.jsx(hM,{axisLine:!1,tickLine:!1,tick:{fill:"var(--text-secondary)",fontSize:12},tickFormatter:h=>h<60?`${h}m`:`${Math.floor(h/60)}h`}),x.jsx(Vd,{content:x.jsx(WQe,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),x.jsx(Ny,{dataKey:"value",radius:[6,6,0,0],minPointSize:2,barSize:l(),label:{position:"top",fill:"var(--text-secondary)",fontSize:12,fontWeight:500,formatter:d},children:o.map((h,f)=>x.jsx(Nj,{fill:"#57B5E7",style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:m=>{const v=document.querySelector(`[name="Bar-${f}"]`);v&&(v.style.filter="brightness(0.9)")},onMouseLeave:m=>{const v=document.querySelector(`[name="Bar-${f}"]`);v&&(v.style.filter="brightness(1)")}},`cell-${f}`))})]})})})]})}),KQe=()=>{const{loadWorkSessionsForRange:n,selectedRange:e,useEventDrivenLoading:t}=oh(),{user:r,isAuthenticated:i}=Qt();return K.useEffect(()=>{i&&r&&t&&(console.log("DashboardContent - Component mounted, loading data for current range"),n(r.uid,e))},[i,r==null?void 0:r.uid,n,e,t]),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsx(cBe,{}),x.jsx("div",{className:"lg:col-span-2",children:x.jsx(fBe,{})})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsx(GQe,{}),x.jsx(qQe,{})]}),x.jsx(YQe,{})]})},XQe=()=>x.jsx("div",{className:"w-full max-w-7xl mx-auto",children:x.jsx(KQe,{})}),ZQe=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,s,l)=>{let c=o;if(s){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=h=>{const f=o(h);if(!u(d,f)){const m=d;s(d=f,m)}},l!=null&&l.fireImmediately&&s(d,d)}return i(c)},n(e,t,r)},QQe=ZQe;function JQe(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const o=l=>l===null?null:JSON.parse(l,void 0),s=(a=t.getItem(i))!=null?a:null;return s instanceof Promise?s.then(o):o(s)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const lH=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return lH(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return lH(r)(t)}}}},eJe=(n,e)=>(t,r,i)=>{let a={storage:JQe(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...e},o=!1;const s=new Set,l=new Set;let c=a.storage;if(!c)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...v)},r,i);const u=()=>{const v=a.partialize({...r()});return c.setItem(a.name,{state:v,version:a.version})},d=i.setState;i.setState=(v,y)=>{d(v,y),u()};const h=n((...v)=>{t(...v),u()},r,i);i.getInitialState=()=>h;let f;const m=()=>{var v,y;if(!c)return;o=!1,s.forEach(_=>{var T;return _((T=r())!=null?T:h)});const w=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(v=r())!=null?v:h))||void 0;return lH(c.getItem.bind(c))(a.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate){const T=a.migrate(_.state,_.version);return T instanceof Promise?T.then(A=>[!0,A]):[!0,T]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var T;const[A,C]=_;if(f=a.merge(C,(T=r())!=null?T:h),t(f,!0),A)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,l.forEach(_=>_(f))}).catch(_=>{w==null||w(void 0,_)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},a.skipHydration||m(),f||h},t5=eJe,pl=Vf()(t5(n=>({isLeftSidebarOpen:!1,isRightSidebarOpen:!0,rightSidebarWidth:480,isHelpModalOpen:!1,isSettingsModalOpen:!1,isFocusMode:!1,activeHelpTab:"pomodoro",toastMessage:null,toggleLeftSidebar:()=>n(e=>({isLeftSidebarOpen:!e.isLeftSidebarOpen})),toggleRightSidebar:()=>n(e=>({isRightSidebarOpen:!e.isRightSidebarOpen})),setRightSidebarWidth:e=>n({rightSidebarWidth:e}),toggleHelpModal:()=>n(e=>({isHelpModalOpen:!e.isHelpModalOpen})),toggleSettingsModal:()=>n(e=>({isSettingsModalOpen:!e.isSettingsModalOpen})),toggleFocusMode:()=>n(e=>({isFocusMode:!e.isFocusMode})),setActiveHelpTab:e=>n({activeHelpTab:e}),showToast:e=>{n({toastMessage:e}),setTimeout(()=>{n(t=>t.toastMessage===e?{toastMessage:null}:{})},3e3)},hideToast:()=>n({toastMessage:null})}),{name:"ui-store",partialize:n=>({rightSidebarWidth:n.rightSidebarWidth,isLeftSidebarOpen:n.isLeftSidebarOpen,isRightSidebarOpen:n.isRightSidebarOpen})}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJe{constructor(e,t){this._delegate=e,this.firebase=t,JC(e,new zc("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),oq(this._delegate)))}_getService(e,t=dy){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=dy){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){JC(this._delegate,e)}_addOrOverwriteComponent(e){Pge(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJe={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Lae=new qg("app-compat","Firebase",nJe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rJe(n){const e={},t={__esModule:!0,initializeApp:a,app:i,registerVersion:Ls,setLogLevel:Lge,onLog:Nge,apps:null,SDK_VERSION:ky,INTERNAL:{registerComponent:s,removeApp:r,useAsService:l,modularAPIs:QMe}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||dy,!pZ(e,c))throw Lae.create("no-app",{appName:c});return e[c]}i.App=n;function a(c,u={}){const d=VL(c,u);if(pZ(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function s(c){const u=c.name,d=u.replace("-compat","");if(Gu(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw Lae.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&vN(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?t[d]:null}function l(c,u){return u==="serverAuth"?null:u}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oxe(){const n=rJe(tJe);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:oxe,extendNamespace:e,createSubscribe:Age,ErrorFactory:qg,deepExtend:vN});function e(t){vN(n,t)}return n}const iJe=oxe();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jae=new OI("@firebase/app-compat"),aJe="@firebase/app-compat",oJe="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJe(n){Ls(aJe,oJe,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=bge();if(n.firebase!==void 0){jae.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&jae.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Kt=iJe;sJe();var lJe="firebase",cJe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.registerVersion(lJe,cJe,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJe=2e3;async function dJe(n,e,t){var r;const{BuildInfo:i}=Uw();ih(e.sessionId,"AuthEvent did not contain a session ID");const a=await mJe(e.sessionId),o={};return YI()?o.ibi=i.packageName:WI()?o.apn=i.packageName:Lo(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=a,Bz(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function hJe(n){const{BuildInfo:e}=Uw(),t={};YI()?t.iosBundleId=e.packageName:WI()?t.androidPackageName=e.packageName:Lo(n,"operation-not-supported-in-this-environment"),await Jve(n,t)}function fJe(n){const{cordova:e}=Uw();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,yNe()?"_blank":"_system","location=yes"),t(i)})})}async function pJe(n,e,t){const{cordova:r}=Uw();let i=()=>{};try{await new Promise((a,o)=>{let s=null;function l(){var d;a();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){s||(s=window.setTimeout(()=>{o(ho(n,"redirect-cancelled-by-user"))},uJe))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),WI()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),s&&window.clearTimeout(s)}})}finally{i()}}function gJe(n){var e,t,r,i,a,o,s,l,c,u;const d=Uw();ot(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ot(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ot(typeof((a=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ot(typeof((l=(s=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||s===void 0?void 0:s.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ot(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function mJe(n){const e=vJe(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function vJe(n){if(ih(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yJe=20;class bJe extends Zve{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function wJe(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:SJe(),postBody:null,tenantId:n.tenantId,error:ho(n,"no-auth-event")}}function xJe(n,e){return cH()._set(uH(n),e)}async function Fae(n){const e=await cH()._get(uH(n));return e&&await cH()._remove(uH(n)),e}function _Je(n,e){var t,r;const i=EJe(e);if(i.includes("/__/auth/callback")){const a=BR(i),o=a.firebaseError?TJe(decodeURIComponent(a.firebaseError)):null,s=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=s?ho(s):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function SJe(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<yJe;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function cH(){return Lc(ZI)}function uH(n){return gw("authEvent",n.config.apiKey,n.name)}function TJe(n){try{return JSON.parse(n)}catch{return null}}function EJe(n){const e=BR(n),t=e.link?decodeURIComponent(e.link):void 0,r=BR(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return BR(i).link||i||r||t||n}function BR(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return GS(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJe=500;class kJe{constructor(){this._redirectPersistence=my,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gj,this._overrideRedirectResult=u7}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new bJe(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Lo(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){gJe(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),kLe(),await this._originValidation(e);const o=wJe(e,r,i);await xJe(e,o);const s=await dJe(e,o,t),l=await fJe(s);return pJe(e,a,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hJe(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=Uw(),o=setTimeout(async()=>{await Fae(e),t.onEvent($ae())},AJe),s=async u=>{clearTimeout(o);const d=await Fae(e);let h=null;d&&(u!=null&&u.url)&&(h=_Je(d,u.url)),t.onEvent(h||$ae())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,s);const l=i,c=`${a.packageName.toLowerCase()}://`;Uw().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&s({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const CJe=kJe;function $ae(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ho("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJe(n,e){ga(n)._logFramework(e)}var IJe="@firebase/auth-compat",MJe="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJe=1e3;function SC(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function OJe(){return SC()==="http:"||SC()==="https:"}function sxe(n=Xa()){return!!((SC()==="file:"||SC()==="ionic:"||SC()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function RJe(){return rq()||tq()}function NJe(){return Tge()&&(document==null?void 0:document.documentMode)===11}function LJe(n=Xa()){return/Edge\/\d+/.test(n)}function jJe(n=Xa()){return NJe()||LJe(n)}function lxe(){try{const n=self.localStorage,e=QI();if(n)return n.setItem(e,"1"),n.removeItem(e),jJe()?ZC():!0}catch{return MW()&&ZC()}return!1}function MW(){return typeof globalThis<"u"&&"WorkerGlobalScope"in globalThis&&"importScripts"in globalThis}function ZB(){return(OJe()||nq()||sxe())&&!RJe()&&lxe()&&!MW()}function cxe(){return sxe()&&typeof document<"u"}async function FJe(){return cxe()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},PJe);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function $Je(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc={LOCAL:"local",NONE:"none",SESSION:"session"},XA=ot,uxe="persistence";function BJe(n,e){if(XA(Object.values(Pc).includes(e),n,"invalid-persistence-type"),rq()){XA(e!==Pc.SESSION,n,"unsupported-persistence-type");return}if(tq()){XA(e===Pc.NONE,n,"unsupported-persistence-type");return}if(MW()){XA(e===Pc.NONE||e===Pc.LOCAL&&ZC(),n,"unsupported-persistence-type");return}XA(e===Pc.NONE||lxe(),n,"unsupported-persistence-type")}async function dH(n){await n._initializationPromise;const e=dxe(),t=gw(uxe,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function UJe(n,e){const t=dxe();if(!t)return[];const r=gw(uxe,n,e);switch(t.getItem(r)){case Pc.NONE:return[j1];case Pc.LOCAL:return[$1,my];case Pc.SESSION:return[my];default:return[]}}function dxe(){var n;try{return((n=$Je())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VJe=ot;class Hv{constructor(){this.browserResolver=Lc(eye),this.cordovaResolver=Lc(CJe),this.underlyingResolver=null,this._redirectPersistence=my,this._completeRedirectFn=gj,this._overrideRedirectResult=u7}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return cxe()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return VJe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await FJe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hxe(n){return n.unwrap()}function zJe(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJe(n){return fxe(n)}function GJe(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new qJe(n,N2e(n,e))}else if(r){const i=fxe(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function fxe(n){const{_tokenResponse:e}=n instanceof es?n.customData:n;if(!e)return null;if(!(n instanceof es)&&"temporaryProof"in e&&"phoneNumber"in e)return Ow.credentialFromResult(n);const t=e.providerId;if(!t||t===FA.PASSWORD)return null;let r;switch(t){case FA.GOOGLE:r=Gd;break;case FA.FACEBOOK:r=hf;break;case FA.GITHUB:r=ff;break;case FA.TWITTER:r=pf;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:o,pendingToken:s,nonce:l}=e;return!a&&!o&&!i&&!s?null:s?t.startsWith("saml.")?F1._create(t,s):Of._fromParams({providerId:t,signInMethod:t,pendingToken:s,idToken:i,accessToken:a}):new o1(t).credential({idToken:i,accessToken:a,rawNonce:l})}return n instanceof es?r.credentialFromError(n):r.credentialFromResult(n)}function Ul(n,e){return e.catch(t=>{throw t instanceof es&&GJe(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:HJe(t),additionalUserInfo:D2e(t),user:fg.getOrCreate(i)}})}async function hH(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Ul(n,t.confirm(r))}}class qJe{constructor(e,t){this.resolver=t,this.auth=zJe(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ul(hxe(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._delegate=e,this.multiFactor=$2e(e)}static getOrCreate(e){return fg.USER_MAP.has(e)||fg.USER_MAP.set(e,new fg(e)),fg.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ul(this.auth,Nve(this._delegate,e))}async linkWithPhoneNumber(e,t){return hH(this.auth,pLe(this._delegate,e,t))}async linkWithPopup(e){return Ul(this.auth,SLe(this._delegate,e,Hv))}async linkWithRedirect(e){return await dH(ga(this.auth)),PLe(this._delegate,e,Hv)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ul(this.auth,Lve(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return hH(this.auth,gLe(this._delegate,e,t))}reauthenticateWithPopup(e){return Ul(this.auth,_Le(this._delegate,e,Hv))}async reauthenticateWithRedirect(e){return await dH(ga(this.auth)),ILe(this._delegate,e,Hv)}sendEmailVerification(e){return y2e(this._delegate,e)}async unlink(e){return await i2e(this._delegate,e),this}updateEmail(e){return _2e(this._delegate,e)}updatePassword(e){return S2e(this._delegate,e)}updatePhoneNumber(e){return mLe(this._delegate,e)}updateProfile(e){return x2e(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return b2e(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=ot;class fH{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ZA(r,"invalid-api-key",{appName:e.name}),ZA(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Hv:void 0;this._delegate=t.initialize({options:{persistence:WJe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ZRe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){kve(this._delegate,e,t)}applyActionCode(e){return c2e(this._delegate,e)}checkActionCode(e){return jve(this._delegate,e)}confirmPasswordReset(e,t){return l2e(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ul(this._delegate,d2e(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return v2e(this._delegate,e)}isSignInWithEmailLink(e){return p2e(this._delegate,e)}async getRedirectResult(){ZA(ZB(),this._delegate,"operation-not-supported-in-this-environment");const e=await RLe(this._delegate,Hv);return e?Ul(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){DJe(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:a,complete:o}=Bae(e,t,r);return this._delegate.onAuthStateChanged(i,a,o)}onIdTokenChanged(e,t,r){const{next:i,error:a,complete:o}=Bae(e,t,r);return this._delegate.onIdTokenChanged(i,a,o)}sendSignInLinkToEmail(e,t){return f2e(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s2e(this._delegate,e,t||void 0)}async setPersistence(e){BJe(this._delegate,e);let t;switch(e){case Pc.SESSION:t=my;break;case Pc.LOCAL:t=await Lc($1)._isAvailable()?$1:ZI;break;case Pc.NONE:t=j1;break;default:return Lo("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ul(this._delegate,r2e(this._delegate))}signInWithCredential(e){return Ul(this._delegate,uj(this._delegate,e))}signInWithCustomToken(e){return Ul(this._delegate,o2e(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ul(this._delegate,h2e(this._delegate,e,t))}signInWithEmailLink(e,t){return Ul(this._delegate,g2e(this._delegate,e,t))}signInWithPhoneNumber(e,t){return hH(this._delegate,fLe(this._delegate,e,t))}async signInWithPopup(e){return ZA(ZB(),this._delegate,"operation-not-supported-in-this-environment"),Ul(this._delegate,xLe(this._delegate,e,Hv))}async signInWithRedirect(e){return ZA(ZB(),this._delegate,"operation-not-supported-in-this-environment"),await dH(this._delegate),CLe(this._delegate,e,Hv)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return u2e(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}fH.Persistence=Pc;function Bae(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&fg.getOrCreate(o)),error:e,complete:t}}function WJe(n,e){const t=UJe(n,e);if(typeof self<"u"&&!t.includes($1)&&t.push($1),typeof window<"u")for(const r of[ZI,my])t.includes(r)||t.push(r);return t.includes(j1)||t.push(j1),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(){this.providerId="phone",this._delegate=new Ow(hxe(Kt.auth()))}static credential(e,t){return Ow.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}PW.PHONE_SIGN_IN_METHOD=Ow.PHONE_SIGN_IN_METHOD;PW.PROVIDER_ID=Ow.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJe=ot;class KJe{constructor(e,t,r=Kt.app()){var i;YJe((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new dLe(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XJe="auth-compat";function ZJe(n){n.INTERNAL.registerComponent(new zc(XJe,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new fH(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:V_.EMAIL_SIGNIN,PASSWORD_RESET:V_.PASSWORD_RESET,RECOVER_EMAIL:V_.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:V_.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:V_.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:V_.VERIFY_EMAIL}},EmailAuthProvider:Dy,FacebookAuthProvider:hf,GithubAuthProvider:ff,GoogleAuthProvider:Gd,OAuthProvider:o1,SAMLAuthProvider:CN,PhoneAuthProvider:PW,PhoneMultiFactorGenerator:tye,RecaptchaVerifier:KJe,TwitterAuthProvider:pf,Auth:fH,AuthCredential:AT,Error:es}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(IJe,MJe)}ZJe(Kt);var QB={exports:{}},Uae;function QJe(){return Uae||(Uae=1,function(n){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(y,w){w=w||{};var _=document.createEvent("CustomEvent");return _.initCustomEvent(y,!!w.bubbles,!!w.cancelable,w.detail||null),_},e.prototype=window.Event.prototype);function t(v){for(;v&&v!==document.body;){var y=window.getComputedStyle(v),w=function(_,T){return!(y[_]===void 0||y[_]===T)};if(y.opacity<1||w("zIndex","auto")||w("transform","none")||w("mixBlendMode","normal")||w("filter","none")||w("perspective","none")||y.isolation==="isolate"||y.position==="fixed"||y.webkitOverflowScrolling==="touch")return!0;v=v.parentElement}return!1}function r(v){for(;v;){if(v.localName==="dialog")return v;v=v.parentElement}return null}function i(v){v&&v.blur&&v!==document.body&&v.blur()}function a(v,y){for(var w=0;w<v.length;++w)if(v[w]===y)return!0;return!1}function o(v){return!v||!v.hasAttribute("method")?!1:v.getAttribute("method").toLowerCase()==="dialog"}function s(v){if(this.dialog_=v,this.replacedStyleTop_=!1,this.openAsModal_=!1,v.hasAttribute("role")||v.setAttribute("role","dialog"),v.show=this.show.bind(this),v.showModal=this.showModal.bind(this),v.close=this.close.bind(this),"returnValue"in v||(v.returnValue=""),"MutationObserver"in window){var y=new MutationObserver(this.maybeHideModal.bind(this));y.observe(v,{attributes:!0,attributeFilter:["open"]})}else{var w=!1,_=(function(){w?this.downgradeModal():this.maybeHideModal(),w=!1}).bind(this),T,A=function(C){if(C.target===v){var k="DOMNodeRemoved";w|=C.type.substr(0,k.length)===k,window.clearTimeout(T),T=window.setTimeout(_,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(C){v.addEventListener(C,A)})}Object.defineProperty(v,"open",{set:this.setOpen.bind(this),get:v.hasAttribute.bind(v,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}s.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(v){v?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(v){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var y=document.createElement("div");this.dialog_.insertBefore(y,this.dialog_.firstChild),y.tabIndex=-1,y.focus(),this.dialog_.removeChild(y)}var w=document.createEvent("MouseEvents");w.initMouseEvent(v.type,v.bubbles,v.cancelable,window,v.detail,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,v.relatedTarget),this.dialog_.dispatchEvent(w),v.stopPropagation()},focus_:function(){var v=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!v&&this.dialog_.tabIndex>=0&&(v=this.dialog_),!v){var y=["button","input","keygen","select","textarea"],w=y.map(function(_){return _+":not([disabled])"});w.push('[tabindex]:not([disabled]):not([tabindex=""])'),v=this.dialog_.querySelector(w.join(", "))}i(document.activeElement),v&&v.focus()},updateZIndex:function(v,y){if(v<y)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=v,this.backdrop_.style.zIndex=y},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");t(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(v){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),v!==void 0&&(this.dialog_.returnValue=v);var y=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(y)}};var l={};if(l.reposition=function(v){var y=document.body.scrollTop||document.documentElement.scrollTop,w=y+(window.innerHeight-v.offsetHeight)/2;v.style.top=Math.max(y,w)+"px"},l.isInlinePositionSetByStylesheet=function(v){for(var y=0;y<document.styleSheets.length;++y){var w=document.styleSheets[y],_=null;try{_=w.cssRules}catch{}if(_)for(var T=0;T<_.length;++T){var A=_[T],C=null;try{C=document.querySelectorAll(A.selectorText)}catch{}if(!(!C||!a(C,v))){var k=A.style.getPropertyValue("top"),M=A.style.getPropertyValue("bottom");if(k&&k!=="auto"||M&&M!=="auto")return!0}}}return!1},l.needsCentering=function(v){var y=window.getComputedStyle(v);return y.position!=="absolute"||v.style.top!=="auto"&&v.style.top!==""||v.style.bottom!=="auto"&&v.style.bottom!==""?!1:!l.isInlinePositionSetByStylesheet(v)},l.forceRegisterDialog=function(v){if((window.HTMLDialogElement||v.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",v),v.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new s(v)},l.registerDialog=function(v){v.showModal||l.forceRegisterDialog(v)},l.DialogManager=function(){this.pendingDialogStack=[];var v=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(y){this.forwardTab_=void 0,y.stopPropagation(),v([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(y){var w=[];y.forEach(function(_){for(var T=0,A;A=_.removedNodes[T];++T){if(A instanceof Element)A.localName==="dialog"&&w.push(A);else continue;w=w.concat(A.querySelectorAll("dialog"))}}),w.length&&v(w)}))},l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var v=this.zIndexHigh_,y=0,w;w=this.pendingDialogStack[y];++y)w.updateZIndex(--v,--v),y===0&&(this.overlay.style.zIndex=--v);var _=this.pendingDialogStack[0];if(_){var T=_.dialog.parentNode||document.body;T.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(v){for(;v=r(v);){for(var y=0,w;w=this.pendingDialogStack[y];++y)if(w.dialog===v)return y===0;v=v.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(v){if(!this.containedByTopDialog_(v.target)&&(v.preventDefault(),v.stopPropagation(),i(v.target),this.forwardTab_!==void 0)){var y=this.pendingDialogStack[0],w=y.dialog,_=w.compareDocumentPosition(v.target);return _&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?y.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(v){if(this.forwardTab_=void 0,v.keyCode===27){v.preventDefault(),v.stopPropagation();var y=new e("cancel",{bubbles:!1,cancelable:!0}),w=this.pendingDialogStack[0];w&&w.dialog.dispatchEvent(y)&&w.dialog.close()}else v.keyCode===9&&(this.forwardTab_=!v.shiftKey)},l.DialogManager.prototype.checkDOM_=function(v){var y=this.pendingDialogStack.slice();y.forEach(function(w){v.indexOf(w.dialog)!==-1?w.downgradeModal():w.maybeHideModal()})},l.DialogManager.prototype.pushDialog=function(v){var y=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=y?!1:(this.pendingDialogStack.unshift(v)===1&&this.blockDocument(),this.updateStacking(),!0)},l.DialogManager.prototype.removeDialog=function(v){var y=this.pendingDialogStack.indexOf(v);y!==-1&&(this.pendingDialogStack.splice(y,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,window.HTMLDialogElement===void 0){var c=document.createElement("form");if(c.setAttribute("method","dialog"),c.method!=="dialog"){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var d=u.get;u.get=function(){return o(this)?"dialog":d.call(this)};var h=u.set;u.set=function(v){return typeof v=="string"&&v.toLowerCase()==="dialog"?this.setAttribute("method",v):h.call(this,v)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",function(v){if(l.formSubmitter=null,l.useValue=null,!v.defaultPrevented){var y=v.target;if(!(!y||!o(y.form))){var w=y.type==="submit"&&["button","input"].indexOf(y.localName)>-1;if(!w){if(!(y.localName==="input"&&y.type==="image"))return;l.useValue=v.offsetX+","+v.offsetY}var _=r(y);_&&(l.formSubmitter=y)}}},!1);var f=HTMLFormElement.prototype.submit,m=function(){if(!o(this))return f.call(this);var v=r(this);v&&v.close()};HTMLFormElement.prototype.submit=m,document.addEventListener("submit",function(v){var y=v.target;if(o(y)){v.preventDefault();var w=r(y);if(w){var _=l.formSubmitter;_&&_.form===y?w.close(l.useValue||_.value):w.close(),l.formSubmitter=null}}},!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,typeof n.exports=="object"?n.exports=l:window.dialogPolyfill=l})()}(QB)),QB.exports}var JJe=QJe();const eet=kr(JJe);var Vae={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zae;function tet(){if(zae)return Vae;zae=1;var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};return n=function(){var e=[],t=[],r="mdlComponentConfigInternal_";function i(y,w){for(var _=0;_<e.length;_++)if(e[_].className===y)return typeof w<"u"&&(e[_]=w),e[_];return!1}function a(y){var w=y.getAttribute("data-upgraded");return w===null?[""]:w.split(",")}function o(y,w){var _=a(y);return _.indexOf(w)!==-1}function s(y,w,_){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(y,{bubbles:w,cancelable:_});var T=document.createEvent("Events");return T.initEvent(y,w,_),T}function l(y,w){if(typeof y>"u"&&typeof w>"u")for(var _=0;_<e.length;_++)l(e[_].className,e[_].cssClass);else{var T=y;if(typeof w>"u"){var A=i(T);A&&(w=A.cssClass)}for(var C=document.querySelectorAll("."+w),k=0;k<C.length;k++)c(C[k],T)}}function c(y,w){if(!(typeof y=="object"&&y instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var _=s("mdl-componentupgrading",!0,!0);if(y.dispatchEvent(_),!_.defaultPrevented){var T=a(y),A=[];if(w)o(y,w)||A.push(i(w));else{var C=y.classList;e.forEach(function($){C.contains($.cssClass)&&A.indexOf($)===-1&&!o(y,$.className)&&A.push($)})}for(var k=0,M=A.length,P;k<M;k++){if(P=A[k],P){T.push(P.className),y.setAttribute("data-upgraded",T.join(","));var O=new P.classConstructor(y);O[r]=P,t.push(O);for(var j=0,L=P.callbacks.length;j<L;j++)P.callbacks[j](y);P.widget&&(y[P.className]=O)}else throw new Error("Unable to find a registered component for the given class.");var B=s("mdl-componentupgraded",!0,!1);y.dispatchEvent(B)}}}function u(y){Array.isArray(y)||(y instanceof Element?y=[y]:y=Array.prototype.slice.call(y));for(var w=0,_=y.length,T;w<_;w++)T=y[w],T instanceof HTMLElement&&(c(T),T.children.length>0&&u(T.children))}function d(y){var w=typeof y.widget>"u"&&typeof y.widget>"u",_=!0;w||(_=y.widget||y.widget);var T={classConstructor:y.constructor||y.constructor,className:y.classAsString||y.classAsString,cssClass:y.cssClass||y.cssClass,widget:_,callbacks:[]};if(e.forEach(function(C){if(C.cssClass===T.cssClass)throw new Error("The provided cssClass has already been registered: "+C.cssClass);if(C.className===T.className)throw new Error("The provided className has already been registered")}),y.constructor.prototype.hasOwnProperty(r))throw new Error("MDL component classes must not have "+r+" defined as a property.");var A=i(y.classAsString,T);A||e.push(T)}function h(y,w){var _=i(y);_&&_.callbacks.push(w)}function f(){for(var y=0;y<e.length;y++)l(e[y].className)}function m(y){if(y){var w=t.indexOf(y);t.splice(w,1);var _=y.element_.getAttribute("data-upgraded").split(","),T=_.indexOf(y[r].classAsString);_.splice(T,1),y.element_.setAttribute("data-upgraded",_.join(","));var A=s("mdl-componentdowngraded",!0,!1);y.element_.dispatchEvent(A)}}function v(y){var w=function(T){t.filter(function(A){return A.element_===T}).forEach(m)};if(y instanceof Array||y instanceof NodeList)for(var _=0;_<y.length;_++)w(y[_]);else if(y instanceof Node)w(y);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:l,upgradeElement:c,upgradeElements:u,upgradeAllRegistered:f,registerUpgradedCallback:h,register:d,downgradeElements:v}}(),n.ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Vae}tet();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(e){e&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialProgress=n,n.prototype.Constant_={},n.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},n.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},n.prototype.setProgress=n.prototype.setProgress,n.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},n.prototype.setBuffer=n.prototype.setBuffer,n.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialSpinner=n,n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),a.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[r,i,a],s=0;s<o.length;s++){var l=document.createElement("div");l.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[s].appendChild(l)}t.appendChild(r),t.appendChild(i),t.appendChild(a),this.element_.appendChild(t)},n.prototype.createLayer=n.prototype.createLayer,n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.stop=n.prototype.stop,n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.start=n.prototype.start,n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=n,n.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},n.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},n.prototype.onKeyDown_=function(e){var t=e.target.value.split(`
`).length;e.keyCode===13&&t>=this.maxRows&&e.preventDefault()},n.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},n.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.onReset_=function(e){this.updateClasses_()},n.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},n.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},n.prototype.checkDisabled=n.prototype.checkDisabled,n.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.checkFocus=n.prototype.checkFocus,n.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},n.prototype.checkValidity=n.prototype.checkValidity,n.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},n.prototype.checkDirty=n.prototype.checkDirty,n.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},n.prototype.enable=n.prototype.enable,n.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},n.prototype.change=n.prototype.change,n.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:n,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var n,e=typeof Object.create=="function"?Object.create:function(p){function S(){}return S.prototype=p,new S},t;if(typeof Object.setPrototypeOf=="function")t=Object.setPrototypeOf;else{var r;e:{var i={xb:!0},a={};try{a.__proto__=i,r=a.xb;break e}catch{}r=!1}t=r?function(p,S){if(p.__proto__=S,p.__proto__!==S)throw new TypeError(p+" is not extensible");return p}:null}var o=t;function s(p,S){if(p.prototype=e(S.prototype),p.prototype.constructor=p,o)o(p,S);else for(var D in S)if(D!="prototype")if(Object.defineProperties){var N=Object.getOwnPropertyDescriptor(S,D);N&&Object.defineProperty(p,D,N)}else p[D]=S[D];p.K=S.prototype}var l=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,D){p!=Array.prototype&&p!=Object.prototype&&(p[S]=D.value)},c=typeof window<"u"&&window===this?this:typeof globalThis<"u"&&globalThis!=null?globalThis:this;function u(p,S){if(S){var D=c;p=p.split(".");for(var N=0;N<p.length-1;N++){var V=p[N];V in D||(D[V]={}),D=D[V]}p=p[p.length-1],N=D[p],S=S(N),S!=N&&S!=null&&l(D,p,{configurable:!0,writable:!0,value:S})}}u("Object.is",function(p){return p||function(S,D){return S===D?S!==0||1/S===1/D:S!==S&&D!==D}}),u("Array.prototype.includes",function(p){return p||function(S,D){var N=this;N instanceof String&&(N=String(N));var V=N.length;for(D=D||0,0>D&&(D=Math.max(D+V,0));D<V;D++){var H=N[D];if(H===S||Object.is(H,S))return!0}return!1}});var d=this;function h(p){return p!==void 0}function f(p){return typeof p=="string"}var m=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function w(p){p.W=void 0,p.Xa=function(){return p.W?p.W:p.W=new p}}function _(p){var S=typeof p;if(S=="object")if(p){if(p instanceof Array)return"array";if(p instanceof Object)return S;var D=Object.prototype.toString.call(p);if(D=="[object Window]")return"object";if(D=="[object Array]"||typeof p.length=="number"&&typeof p.splice<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("splice"))return"array";if(D=="[object Function]"||typeof p.call<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("call"))return"function"}else return"null";else if(S=="function"&&typeof p.call>"u")return"object";return S}function T(p){return _(p)=="array"}function A(p){var S=_(p);return S=="array"||S=="object"&&typeof p.length=="number"}function C(p){return _(p)=="function"}function k(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function M(p,S,D){return p.call.apply(p.bind,arguments)}function P(p,S,D){if(!p)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,N),p.apply(S,V)}}return function(){return p.apply(S,arguments)}}function O(p,S,D){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?O=M:O=P,O.apply(null,arguments)}function j(p,S){var D=Array.prototype.slice.call(arguments,1);return function(){var N=D.slice();return N.push.apply(N,arguments),p.apply(this,N)}}function L(p,S){for(var D in S)p[D]=S[D]}var B=Date.now||function(){return+new Date};function $(p,S){p=p.split(".");var D=d;p[0]in D||typeof D.execScript>"u"||D.execScript("var "+p[0]);for(var N;p.length&&(N=p.shift());)!p.length&&h(S)?D[N]=S:D[N]&&D[N]!==Object.prototype[N]?D=D[N]:D=D[N]={}}function Y(p,S){function D(){}D.prototype=S.prototype,p.K=S.prototype,p.prototype=new D,p.prototype.constructor=p,p.vc=function(N,V,H){for(var ne=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)ne[ue-2]=arguments[ue];return S.prototype[V].apply(N,ne)}}function G(p){if(Error.captureStackTrace)Error.captureStackTrace(this,G);else{var S=Error().stack;S&&(this.stack=S)}p&&(this.message=String(p))}Y(G,Error),G.prototype.name="CustomError";var W;function X(p,S){p=p.split("%s");for(var D="",N=p.length-1,V=0;V<N;V++)D+=p[V]+(V<S.length?S[V]:"%s");G.call(this,D+p[N])}Y(X,G),X.prototype.name="AssertionError";function te(p,S){throw new X("Failure"+(p?": "+p:""),Array.prototype.slice.call(arguments,1))}var re=Array.prototype.indexOf?function(p,S){return Array.prototype.indexOf.call(p,S,void 0)}:function(p,S){if(f(p))return f(S)&&S.length==1?p.indexOf(S,0):-1;for(var D=0;D<p.length;D++)if(D in p&&p[D]===S)return D;return-1},z=Array.prototype.forEach?function(p,S,D){Array.prototype.forEach.call(p,S,D)}:function(p,S,D){for(var N=p.length,V=f(p)?p.split(""):p,H=0;H<N;H++)H in V&&S.call(D,V[H],H,p)};function ae(p,S){for(var D=f(p)?p.split(""):p,N=p.length-1;0<=N;--N)N in D&&S.call(void 0,D[N],N,p)}var le=Array.prototype.filter?function(p,S){return Array.prototype.filter.call(p,S,void 0)}:function(p,S){for(var D=p.length,N=[],V=0,H=f(p)?p.split(""):p,ne=0;ne<D;ne++)if(ne in H){var ue=H[ne];S.call(void 0,ue,ne,p)&&(N[V++]=ue)}return N},ee=Array.prototype.map?function(p,S){return Array.prototype.map.call(p,S,void 0)}:function(p,S){for(var D=p.length,N=Array(D),V=f(p)?p.split(""):p,H=0;H<D;H++)H in V&&(N[H]=S.call(void 0,V[H],H,p));return N},ye=Array.prototype.some?function(p,S){return Array.prototype.some.call(p,S,void 0)}:function(p,S){for(var D=p.length,N=f(p)?p.split(""):p,V=0;V<D;V++)if(V in N&&S.call(void 0,N[V],V,p))return!0;return!1};function fe(p,S){return 0<=re(p,S)}function Ce(p,S){S=re(p,S);var D;return(D=0<=S)&&at(p,S),D}function at(p,S){return Array.prototype.splice.call(p,S,1).length==1}function Le(p,S){e:{for(var D=p.length,N=f(p)?p.split(""):p,V=0;V<D;V++)if(V in N&&S.call(void 0,N[V],V,p)){S=V;break e}S=-1}0<=S&&at(p,S)}function we(p,S){var D=0;ae(p,function(N,V){S.call(void 0,N,V,p)&&at(p,V)&&D++})}function be(p){return Array.prototype.concat.apply([],arguments)}function ge(p){var S=p.length;if(0<S){for(var D=Array(S),N=0;N<S;N++)D[N]=p[N];return D}return[]}function he(p,S,D){return 2>=arguments.length?Array.prototype.slice.call(p,S):Array.prototype.slice.call(p,S,D)}var Ge=String.prototype.trim?function(p){return p.trim()}:function(p){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(p)[1]},je=/&/g,rt=/</g,bt=/>/g,lt=/"/g,cn=/'/g,Ct=/\x00/g,En=/[\x00&<>"']/;function jn(p,S){return p<S?-1:p>S?1:0}function Re(p){return En.test(p)&&(p.indexOf("&")!=-1&&(p=p.replace(je,"&amp;")),p.indexOf("<")!=-1&&(p=p.replace(rt,"&lt;")),p.indexOf(">")!=-1&&(p=p.replace(bt,"&gt;")),p.indexOf('"')!=-1&&(p=p.replace(lt,"&quot;")),p.indexOf("'")!=-1&&(p=p.replace(cn,"&#39;")),p.indexOf("\0")!=-1&&(p=p.replace(Ct,"&#0;"))),p}function Jt(p,S,D){for(var N in p)S.call(D,p[N],N,p)}function hn(p){var S={},D;for(D in p)S[D]=p[D];return S}var Mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(p,S){for(var D,N,V=1;V<arguments.length;V++){N=arguments[V];for(D in N)p[D]=N[D];for(var H=0;H<Mt.length;H++)D=Mt[H],Object.prototype.hasOwnProperty.call(N,D)&&(p[D]=N[D])}}var Ne="StopIteration"in d?d.StopIteration:{message:"StopIteration",stack:""};function tt(){}tt.prototype.next=function(){throw Ne},tt.prototype.ha=function(){return this};function xt(p){if(p instanceof tt)return p;if(typeof p.ha=="function")return p.ha(!1);if(A(p)){var S=0,D=new tt;return D.next=function(){for(;;){if(S>=p.length)throw Ne;if(S in p)return p[S++];S++}},D}throw Error("Not implemented")}function fn(p,S){if(A(p))try{z(p,S,void 0)}catch(D){if(D!==Ne)throw D}else{p=xt(p);try{for(;;)S.call(void 0,p.next(),void 0,p)}catch(D){if(D!==Ne)throw D}}}function Ti(p){if(A(p))return ge(p);p=xt(p);var S=[];return fn(p,function(D){S.push(D)}),S}function Nn(p,S){this.g={},this.a=[],this.j=this.h=0;var D=arguments.length;if(1<D){if(D%2)throw Error("Uneven number of arguments");for(var N=0;N<D;N+=2)this.set(arguments[N],arguments[N+1])}else if(p)if(p instanceof Nn)for(D=p.ja(),N=0;N<D.length;N++)this.set(D[N],p.get(D[N]));else for(N in p)this.set(N,p[N])}n=Nn.prototype,n.la=function(){Nr(this);for(var p=[],S=0;S<this.a.length;S++)p.push(this.g[this.a[S]]);return p},n.ja=function(){return Nr(this),this.a.concat()},n.clear=function(){this.g={},this.j=this.h=this.a.length=0};function Nr(p){if(p.h!=p.a.length){for(var S=0,D=0;S<p.a.length;){var N=p.a[S];oi(p.g,N)&&(p.a[D++]=N),S++}p.a.length=D}if(p.h!=p.a.length){var V={};for(D=S=0;S<p.a.length;)N=p.a[S],oi(V,N)||(p.a[D++]=N,V[N]=1),S++;p.a.length=D}}n.get=function(p,S){return oi(this.g,p)?this.g[p]:S},n.set=function(p,S){oi(this.g,p)||(this.h++,this.a.push(p),this.j++),this.g[p]=S},n.forEach=function(p,S){for(var D=this.ja(),N=0;N<D.length;N++){var V=D[N],H=this.get(V);p.call(S,H,V,this)}},n.ha=function(p){Nr(this);var S=0,D=this.j,N=this,V=new tt;return V.next=function(){if(D!=N.j)throw Error("The map has changed since the iterator was created");if(S>=N.a.length)throw Ne;var H=N.a[S++];return p?H:N.g[H]},V};function oi(p,S){return Object.prototype.hasOwnProperty.call(p,S)}var on=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zr(p,S){if(p){p=p.split("&");for(var D=0;D<p.length;D++){var N=p[D].indexOf("="),V=null;if(0<=N){var H=p[D].substring(0,N);V=p[D].substring(N+1)}else H=p[D];S(H,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ei(p,S,D,N){for(var V=D.length;0<=(S=p.indexOf(D,S))&&S<N;){var H=p.charCodeAt(S-1);if((H==38||H==63)&&(H=p.charCodeAt(S+V),!H||H==61||H==38||H==35))return S;S+=V+1}return-1}var mi=/#|$/;function Xe(p,S){var D=p.search(mi),N=Ei(p,0,S,D);if(0>N)return null;var V=p.indexOf("&",N);return(0>V||V>D)&&(V=D),N+=S.length+1,decodeURIComponent(p.substr(N,V-N).replace(/\+/g," "))}var Be=/[?&]($|#)/;function Ke(p,S){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var D;p instanceof Ke?(this.i=h(S)?S:p.i,Tt(this,p.j),this.A=p.A,this.h=p.h,nr(this,p.C),this.g=p.g,oe(this,ls(p.a)),this.s=p.s):p&&(D=String(p).match(on))?(this.i=!!S,Tt(this,D[1]||"",!0),this.A=pe(D[2]||""),this.h=pe(D[3]||"",!0),nr(this,D[4]),this.g=pe(D[5]||"",!0),oe(this,D[6]||"",!0),this.s=pe(D[7]||"")):(this.i=!!S,this.a=new Vt(null,this.i))}Ke.prototype.toString=function(){var p=[],S=this.j;S&&p.push(Ae(S,gt,!0),":");var D=this.h;return(D||S=="file")&&(p.push("//"),(S=this.A)&&p.push(Ae(S,gt,!0),"@"),p.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.C,D!=null&&p.push(":",String(D))),(D=this.g)&&(this.h&&D.charAt(0)!="/"&&p.push("/"),p.push(Ae(D,D.charAt(0)=="/"?ft:Dt,!0))),(D=this.a.toString())&&p.push("?",D),(D=this.s)&&p.push("#",Ae(D,yt)),p.join("")};function Tt(p,S,D){p.j=D?pe(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function nr(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.C=S}else p.C=null}function oe(p,S,D){S instanceof Vt?(p.a=S,Jl(p.a,p.i)):(D||(S=Ae(S,Bt)),p.a=new Vt(S,p.i))}function ce(p){return p instanceof Ke?new Ke(p):new Ke(p,void 0)}function pe(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ae(p,S,D){return f(p)?(p=encodeURI(p).replace(S,Qe),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Qe(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var gt=/[#\/\?@]/g,Dt=/[#\?:]/g,ft=/[#\?]/g,Bt=/[#\?@]/g,yt=/#/g;function Vt(p,S){this.g=this.a=null,this.h=p||null,this.j=!!S}function Kn(p){p.a||(p.a=new Nn,p.g=0,p.h&&zr(p.h,function(S,D){p.add(decodeURIComponent(S.replace(/\+/g," ")),D)}))}n=Vt.prototype,n.add=function(p,S){Kn(this),this.h=null,p=oa(this,p);var D=this.a.get(p);return D||this.a.set(p,D=[]),D.push(S),this.g+=1,this};function vi(p,S){Kn(p),S=oa(p,S),oi(p.a.g,S)&&(p.h=null,p.g-=p.a.get(S).length,p=p.a,oi(p.g,S)&&(delete p.g[S],p.h--,p.j++,p.a.length>2*p.h&&Nr(p)))}n.clear=function(){this.a=this.h=null,this.g=0};function ba(p,S){return Kn(p),S=oa(p,S),oi(p.a.g,S)}n.forEach=function(p,S){Kn(this),this.a.forEach(function(D,N){z(D,function(V){p.call(S,V,N,this)},this)},this)},n.ja=function(){Kn(this);for(var p=this.a.la(),S=this.a.ja(),D=[],N=0;N<S.length;N++)for(var V=p[N],H=0;H<V.length;H++)D.push(S[N]);return D},n.la=function(p){Kn(this);var S=[];if(f(p))ba(this,p)&&(S=be(S,this.a.get(oa(this,p))));else{p=this.a.la();for(var D=0;D<p.length;D++)S=be(S,p[D])}return S},n.set=function(p,S){return Kn(this),this.h=null,p=oa(this,p),ba(this,p)&&(this.g-=this.a.get(p).length),this.a.set(p,[S]),this.g+=1,this},n.get=function(p,S){return p?(p=this.la(p),0<p.length?String(p[0]):S):S},n.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var p=[],S=this.a.ja(),D=0;D<S.length;D++){var N=S[D],V=encodeURIComponent(String(N));N=this.la(N);for(var H=0;H<N.length;H++){var ne=V;N[H]!==""&&(ne+="="+encodeURIComponent(String(N[H]))),p.push(ne)}}return this.h=p.join("&")};function ls(p){var S=new Vt;return S.h=p.h,p.a&&(S.a=new Nn(p.a),S.g=p.g),S}function oa(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function Jl(p,S){S&&!p.j&&(Kn(p),p.h=null,p.a.forEach(function(D,N){var V=N.toLowerCase();N!=V&&(vi(this,N),vi(this,V),0<D.length&&(this.h=null,this.a.set(oa(this,V),ge(D)),this.g+=D.length))},p)),p.j=S}function sa(p){this.a=ce(p)}function _l(p,S){S?p.a.a.set(Zr.Sa,S):vi(p.a.a,Zr.Sa)}function Qa(p,S){S!==null?p.a.a.set(Zr.Qa,S?"1":"0"):vi(p.a.a,Zr.Qa)}function Ai(p){return p.a.a.get(Zr.Pa)||null}function hh(p,S){S?p.a.a.set(Zr.PROVIDER_ID,S):vi(p.a.a,Zr.PROVIDER_ID)}sa.prototype.toString=function(){return this.a.toString()};var Zr={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},Ra;e:{var Sl=d.navigator;if(Sl){var Xf=Sl.userAgent;if(Xf){Ra=Xf;break e}}Ra=""}function Fn(p){return Ra.indexOf(p)!=-1}function fh(){return(Fn("Chrome")||Fn("CriOS"))&&!Fn("Edge")}function im(p){return im[" "](p),p}im[" "]=y;function ph(p,S){var D=zy;return Object.prototype.hasOwnProperty.call(D,p)?D[p]:D[p]=S(p)}var ec=Fn("Opera"),Xn=Fn("Trident")||Fn("MSIE"),cs=Fn("Edge"),vx=cs||Xn,wa=Fn("Gecko")&&!(Ra.toLowerCase().indexOf("webkit")!=-1&&!Fn("Edge"))&&!(Fn("Trident")||Fn("MSIE"))&&!Fn("Edge"),la=Ra.toLowerCase().indexOf("webkit")!=-1&&!Fn("Edge"),am=la&&Fn("Mobile"),Tl=Fn("Macintosh");function Zf(){var p=d.document;return p?p.documentMode:void 0}var Na;e:{var Qf="",Vy=function(){var p=Ra;if(wa)return/rv:([^\);]+)(\)|;)/.exec(p);if(cs)return/Edge\/([\d\.]+)/.exec(p);if(Xn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(p);if(la)return/WebKit\/(\S+)/.exec(p);if(ec)return/(?:Version)[ \/]?(\S+)/.exec(p)}();if(Vy&&(Qf=Vy?Vy[1]:""),Xn){var gh=Zf();if(gh!=null&&gh>parseFloat(Qf)){Na=String(gh);break e}}Na=Qf}var zy={};function Vs(p){return ph(p,function(){for(var S=0,D=Ge(String(Na)).split("."),N=Ge(String(p)).split("."),V=Math.max(D.length,N.length),H=0;S==0&&H<V;H++){var ne=D[H]||"",ue=N[H]||"";do{if(ne=/(\d*)(\D*)(.*)/.exec(ne)||["","","",""],ue=/(\d*)(\D*)(.*)/.exec(ue)||["","","",""],ne[0].length==0&&ue[0].length==0)break;S=jn(ne[1].length==0?0:parseInt(ne[1],10),ue[1].length==0?0:parseInt(ue[1],10))||jn(ne[2].length==0,ue[2].length==0)||jn(ne[2],ue[2]),ne=ne[3],ue=ue[3]}while(S==0)}return 0<=S})}var Jf,qi=d.document;Jf=qi&&Xn?Zf()||(qi.compatMode=="CSS1Compat"?parseInt(Na,10):5):void 0;function La(p,S){this.a=p===Ju&&S||"",this.g=mh}La.prototype.ma=!0,La.prototype.ka=function(){return this.a},La.prototype.toString=function(){return"Const{"+this.a+"}"};var mh={},Ju={};function $o(){this.a="",this.h=zs}$o.prototype.ma=!0,$o.prototype.ka=function(){return this.a.toString()},$o.prototype.g=function(){return 1},$o.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Lr(p){return p instanceof $o&&p.constructor===$o&&p.h===zs?p.a:(te("expected object of type TrustedResourceUrl, got '"+p+"' of type "+_(p)),"type_error:TrustedResourceUrl")}function ep(){var p=QM;p instanceof La&&p.constructor===La&&p.g===mh?p=p.a:(te("expected object of type Const, got '"+p+"'"),p="type_error:Const");var S=new $o;return S.a=p,S}var zs={};function xa(){this.a="",this.h=bx}xa.prototype.ma=!0,xa.prototype.ka=function(){return this.a.toString()},xa.prototype.g=function(){return 1},xa.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function tc(p){return p instanceof xa&&p.constructor===xa&&p.h===bx?p.a:(te("expected object of type SafeUrl, got '"+p+"' of type "+_(p)),"type_error:SafeUrl")}var om=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function vh(p){return p instanceof xa?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),om.test(p)||(p="about:invalid#zClosurez"),yh(p))}function yx(p){return p instanceof xa?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),om.test(p)||(p="about:invalid#zClosurez"),yh(p))}var bx={};function yh(p){var S=new xa;return S.a=p,S}yh("about:blank");function us(){this.a="",this.g=Hs}us.prototype.ma=!0;var Hs={};us.prototype.ka=function(){return this.a},us.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function yo(){this.a="",this.j=sm,this.h=null}yo.prototype.g=function(){return this.h},yo.prototype.ma=!0,yo.prototype.ka=function(){return this.a.toString()},yo.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function El(p){return p instanceof yo&&p.constructor===yo&&p.j===sm?p.a:(te("expected object of type SafeHtml, got '"+p+"' of type "+_(p)),"type_error:SafeHtml")}var sm={};function ds(p,S){var D=new yo;return D.a=p,D.h=S,D}ds("<!DOCTYPE html>",0);var xx=ds("",0);ds("<br>",0);var tp=function(p){var S=!1,D;return function(){return S||(D=p(),S=!0),D}}(function(){if(typeof document>"u")return!1;var p=document.createElement("div"),S=document.createElement("div");return S.appendChild(document.createElement("div")),p.appendChild(S),p.firstChild?(S=p.firstChild.firstChild,p.innerHTML=El(xx),!S.parentElement):!1});function nc(p,S){if(p.src=Lr(S),v===null)e:{if(S=d.document,(S=S.querySelector&&S.querySelector("script[nonce]"))&&(S=S.nonce||S.getAttribute("nonce"))&&m.test(S)){v=S;break e}v=""}S=v,S&&p.setAttribute("nonce",S)}function Ja(p,S){S=S instanceof xa?S:yx(S),p.assign(tc(S))}function hs(p,S){this.a=h(p)?p:0,this.g=h(S)?S:0}hs.prototype.toString=function(){return"("+this.a+", "+this.g+")"},hs.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},hs.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},hs.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function Al(p,S){this.width=p,this.height=S}n=Al.prototype,n.toString=function(){return"("+this.width+" x "+this.height+")"},n.aspectRatio=function(){return this.width/this.height},n.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},n.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},n.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function rc(p){return p?new bh(Gc(p)):W||(W=new bh)}function ic(p,S){var D=S||document;return D.querySelectorAll&&D.querySelector?D.querySelectorAll("."+p):ac(document,p,S)}function np(p,S){var D=S||document;if(D.getElementsByClassName)p=D.getElementsByClassName(p)[0];else{D=document;var N=S||D;p=N.querySelectorAll&&N.querySelector&&p?N.querySelector(p?"."+p:""):ac(D,p,S)[0]||null}return p||null}function ac(p,S,D){var N;if(p=D||p,p.querySelectorAll&&p.querySelector&&S)return p.querySelectorAll(S?"."+S:"");if(S&&p.getElementsByClassName){var V=p.getElementsByClassName(S);return V}if(V=p.getElementsByTagName("*"),S){var H={};for(D=N=0;p=V[D];D++){var ne=p.className;typeof ne.split=="function"&&fe(ne.split(/\s+/),S)&&(H[N++]=p)}return H.length=N,H}return V}function Hc(p,S){Jt(S,function(D,N){D&&typeof D=="object"&&D.ma&&(D=D.ka()),N=="style"?p.style.cssText=D:N=="class"?p.className=D:N=="for"?p.htmlFor=D:lm.hasOwnProperty(N)?p.setAttribute(lm[N],D):N.lastIndexOf("aria-",0)==0||N.lastIndexOf("data-",0)==0?p.setAttribute(N,D):p[N]=D})}var lm={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wi(p){return p.scrollingElement?p.scrollingElement:(la||p.compatMode!="CSS1Compat")&&p.body||p.documentElement}function rr(p){p&&p.parentNode&&p.parentNode.removeChild(p)}function Gc(p){return p.nodeType==9?p:p.ownerDocument||p.document}function ed(p,S){if("textContent"in p)p.textContent=S;else if(p.nodeType==3)p.data=String(S);else if(p.firstChild&&p.firstChild.nodeType==3){for(;p.lastChild!=p.firstChild;)p.removeChild(p.lastChild);p.firstChild.data=String(S)}else{for(var D;D=p.firstChild;)p.removeChild(D);p.appendChild(Gc(p).createTextNode(String(S)))}}function Hy(p,S){return S?cm(p,function(D){return!S||f(D.className)&&fe(D.className.split(/\s+/),S)}):null}function cm(p,S){for(var D=0;p;){if(S(p))return p;p=p.parentNode,D++}return null}function bh(p){this.a=p||d.document||document}bh.prototype.N=function(){return f(void 0)?this.a.getElementById(void 0):void 0};var Gs={Fc:!0},wh={Hc:!0},kl={},Gy={Gc:!0};function qc(){throw Error("Do not instantiate directly")}qc.prototype.va=null,qc.prototype.toString=function(){return this.content};function oc(p,S,D,N){if(p=p(S||dm,void 0,D),N=(N||rc()).a.createElement("DIV"),p=um(p),p.match(qy),p=ds(p,null),tp())for(;N.lastChild;)N.removeChild(N.lastChild);return N.innerHTML=El(p),N.childNodes.length==1&&(p=N.firstChild,p.nodeType==1&&(N=p)),N}function um(p){if(!k(p))return Re(String(p));if(p instanceof qc){if(p.fa===Gs)return p.content;if(p.fa===Gy)return Re(p.content)}return te("Soy template output is unsafe for use as HTML: "+p),"zSoyz"}var qy=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,dm={};function _x(p){if(p!=null)switch(p.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function td(){qc.call(this)}Y(td,qc),td.prototype.fa=Gs;function sn(p){return p!=null&&p.fa===Gs?p:p instanceof yo?_t(El(p).toString(),p.g()):_t(Re(String(String(p))),_x(p))}function xh(){qc.call(this)}Y(xh,qc),xh.prototype.fa=wh,xh.prototype.va=1;function Wc(p,S){this.content=String(p),this.va=S??null}Y(Wc,qc),Wc.prototype.fa=Gy;function ir(p){return new Wc(p,void 0)}var _t=function(p){function S(D){this.content=D}return S.prototype=p.prototype,function(D,N){return D=new S(String(D)),N!==void 0&&(D.va=N),D}}(td),Wy=function(p){function S(D){this.content=D}return S.prototype=p.prototype,function(D){return new S(String(D))}}(xh);function rp(p){function S(){}var D={label:yi("New password")};S.prototype=p,p=new S;for(var N in D)p[N]=D[N];return p}function yi(p){return(p=String(p))?new Wc(p,void 0):""}var ip=function(p){function S(D){this.content=D}return S.prototype=p.prototype,function(D,N){return D=String(D),D?(D=new S(D),N!==void 0&&(D.va=N),D):""}}(td);function ja(p){return p!=null&&p.fa===Gs?String(String(p.content).replace(Kc,"").replace(R,"&lt;")).replace(fm,Tx):Re(String(p))}function sc(p){return p!=null&&p.fa===wh?p=String(p).replace(eo,hm):p instanceof xa?p=String(tc(p).toString()).replace(eo,hm):(p=String(p),kx.test(p)?p=p.replace(eo,hm):(te("Bad value `%s` for |filterNormalizeUri",[p]),p="#zSoyz")),p}function Yc(p){return p!=null&&p.fa===kl?p=p.content:p==null?p="":p instanceof us?p instanceof us&&p.constructor===us&&p.g===Hs?p=p.a:(te("expected object of type SafeStyle, got '"+p+"' of type "+_(p)),p="type_error:SafeStyle"):(p=String(p),Ax.test(p)||(te("Bad value `%s` for |filterCssValue",[p]),p="zSoyz")),p}var Sx={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Tx(p){return Sx[p]}var Ex={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function hm(p){return Ex[p]}var fm=/[\x00\x22\x27\x3c\x3e]/g,eo=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Ax=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,kx=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Kc=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,R=/</g;function q(){return ir("Enter a valid phone number")}function Q(){return ir("Unable to send password reset code to specified email")}function se(){return ir("Something went wrong. Please try again.")}function Se(){return ir("This email already exists without any means of sign-in. Please reset the password to recover.")}function Oe(p){p=p||{};var S="";switch(p.code){case"invalid-argument":S+="Client specified an invalid argument.";break;case"invalid-configuration":S+="Client specified an invalid project configuration.";break;case"failed-precondition":S+="Request can not be executed in the current system state.";break;case"out-of-range":S+="Client specified an invalid range.";break;case"unauthenticated":S+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":S+="Client does not have sufficient permission.";break;case"not-found":S+="Specified resource is not found.";break;case"aborted":S+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":S+="The resource that a client tried to create already exists.";break;case"resource-exhausted":S+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":S+="Request cancelled by the client.";break;case"data-loss":S+="Unrecoverable data loss or data corruption.";break;case"unknown":S+="Unknown server error.";break;case"internal":S+="Internal server error.";break;case"not-implemented":S+="API method not implemented by the server.";break;case"unavailable":S+="Service unavailable.";break;case"deadline-exceeded":S+="Request deadline exceeded.";break;case"auth/user-disabled":S+="The user account has been disabled by an administrator.";break;case"auth/timeout":S+="The operation has timed out.";break;case"auth/too-many-requests":S+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":S+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":S+="A network error has occurred. Try again later.";break;case"restart-process":S+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":S+="No sign-in provider is available for the given email, please try with a different email."}return ir(S)}function ut(){return ir("Please login again to perform this operation")}function Zn(p,S,D){var N=Error.call(this);if(this.message=N.message,"stack"in N&&(this.stack=N.stack),this.code=_a+p,!(p=S)){switch(p="",this.code){case"firebaseui/merge-conflict":p+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:p+=se()}p=ir(p).toString()}this.message=p||"",this.credential=D||null}s(Zn,Error),Zn.prototype.toJSON=function(){return{code:this.code,message:this.message}};var _a="firebaseui/";function $n(){this.T=this.T,this.C=this.C}var Fa=0;$n.prototype.T=!1,$n.prototype.m=function(){!this.T&&(this.T=!0,this.o(),Fa!=0)};function Li(p,S){p.T?h(void 0)?S.call(void 0):S():(p.C||(p.C=[]),p.C.push(h(void 0)?O(S,void 0):S))}$n.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qs(p){p&&typeof p.m=="function"&&p.m()}var to=Object.freeze||function(p){return p},lc=!Xn||9<=Number(Jf),Yy=Xn&&!Vs("9"),Cx=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{d.addEventListener("test",y,S),d.removeEventListener("test",y,S)}catch{}return p}();function Xc(p,S){this.type=p,this.g=this.target=S,this.h=!1,this.qb=!0}Xc.prototype.stopPropagation=function(){this.h=!0},Xc.prototype.preventDefault=function(){this.qb=!1};function bo(p,S){if(Xc.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,p){var D=this.type=p.type,N=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(wa){e:{try{im(S.nodeName);var V=!0;break e}catch{}V=!1}V||(S=null)}}else D=="mouseover"?S=p.fromElement:D=="mouseout"&&(S=p.toElement);this.relatedTarget=S,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.keyCode=p.keyCode||0,this.key=p.key||"",this.j=p.charCode||(D=="keypress"?p.keyCode:0),this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=f(p.pointerType)?p.pointerType:aE[p.pointerType]||"",this.a=p,p.defaultPrevented&&this.preventDefault()}}Y(bo,Xc);var aE=to({2:"touch",3:"pen",4:"mouse"});bo.prototype.stopPropagation=function(){bo.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},bo.prototype.preventDefault=function(){bo.K.preventDefault.call(this);var p=this.a;if(p.preventDefault)p.preventDefault();else if(p.returnValue=!1,Yy)try{(p.ctrlKey||112<=p.keyCode&&123>=p.keyCode)&&(p.keyCode=-1)}catch{}};var ap="closure_listenable_"+(1e6*Math.random()|0),qM=0;function WM(p,S,D,N,V){this.listener=p,this.proxy=null,this.src=S,this.type=D,this.capture=!!N,this.La=V,this.key=++qM,this.sa=this.Ia=!1}function Ky(p){p.sa=!0,p.listener=null,p.proxy=null,p.src=null,p.La=null}function Dx(p){this.src=p,this.a={},this.g=0}Dx.prototype.add=function(p,S,D,N,V){var H=p.toString();p=this.a[H],p||(p=this.a[H]=[],this.g++);var ne=sE(p,S,N,V);return-1<ne?(S=p[ne],D||(S.Ia=!1)):(S=new WM(S,this.src,H,!!N,V),S.Ia=D,p.push(S)),S};function oE(p,S){var D=S.type;D in p.a&&Ce(p.a[D],S)&&(Ky(S),p.a[D].length==0&&(delete p.a[D],p.g--))}function sE(p,S,D,N){for(var V=0;V<p.length;++V){var H=p[V];if(!H.sa&&H.listener==S&&H.capture==!!D&&H.La==N)return V}return-1}var lE="closure_lm_"+(1e6*Math.random()|0),cE={};function ji(p,S,D,N,V){if(N&&N.once)return gm(p,S,D,N,V);if(T(S)){for(var H=0;H<S.length;H++)ji(p,S[H],D,N,V);return null}return D=Mx(D),p&&p[ap]?p.J.add(String(S),D,!1,k(N)?!!N.capture:!!N,V):pm(p,S,D,!1,N,V)}function pm(p,S,D,N,V,H){if(!S)throw Error("Invalid event type");var ne=k(V)?!!V.capture:!!V,ue=Sh(p);if(ue||(p[lE]=ue=new Dx(p)),D=ue.add(S,D,N,ne,H),D.proxy)return D;if(N=YM(),D.proxy=N,N.src=p,N.listener=D,p.addEventListener)Cx||(V=ne),V===void 0&&(V=!1),p.addEventListener(S.toString(),N,V);else if(p.attachEvent)p.attachEvent(Ix(S.toString()),N);else if(p.addListener&&p.removeListener)p.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return D}function YM(){var p=uE,S=lc?function(D){return p.call(S.src,S.listener,D)}:function(D){if(D=p.call(S.src,S.listener,D),!D)return D};return S}function gm(p,S,D,N,V){if(T(S)){for(var H=0;H<S.length;H++)gm(p,S[H],D,N,V);return null}return D=Mx(D),p&&p[ap]?p.J.add(String(S),D,!0,k(N)?!!N.capture:!!N,V):pm(p,S,D,!0,N,V)}function _h(p,S,D,N,V){if(T(S))for(var H=0;H<S.length;H++)_h(p,S[H],D,N,V);else N=k(N)?!!N.capture:!!N,D=Mx(D),p&&p[ap]?(p=p.J,S=String(S).toString(),S in p.a&&(H=p.a[S],D=sE(H,D,N,V),-1<D&&(Ky(H[D]),at(H,D),H.length==0&&(delete p.a[S],p.g--)))):p&&(p=Sh(p))&&(S=p.a[S.toString()],p=-1,S&&(p=sE(S,D,N,V)),(D=-1<p?S[p]:null)&&nd(D))}function nd(p){if(typeof p!="number"&&p&&!p.sa){var S=p.src;if(S&&S[ap])oE(S.J,p);else{var D=p.type,N=p.proxy;S.removeEventListener?S.removeEventListener(D,N,p.capture):S.detachEvent?S.detachEvent(Ix(D),N):S.addListener&&S.removeListener&&S.removeListener(N),(D=Sh(S))?(oE(D,p),D.g==0&&(D.src=null,S[lE]=null)):Ky(p)}}}function Ix(p){return p in cE?cE[p]:cE[p]="on"+p}function KM(p,S,D,N){var V=!0;if((p=Sh(p))&&(S=p.a[S.toString()]))for(S=S.concat(),p=0;p<S.length;p++){var H=S[p];H&&H.capture==D&&!H.sa&&(H=op(H,N),V=V&&H!==!1)}return V}function op(p,S){var D=p.listener,N=p.La||p.src;return p.Ia&&nd(p),D.call(N,S)}function uE(p,S){if(p.sa)return!0;if(!lc){if(!S)e:{S=["window","event"];for(var D=d,N=0;N<S.length;N++)if(D=D[S[N]],D==null){S=null;break e}S=D}if(N=S,S=new bo(N,this),D=!0,!(0>N.keyCode||N.returnValue!=null)){e:{var V=!1;if(N.keyCode==0)try{N.keyCode=-1;break e}catch{V=!0}(V||N.returnValue==null)&&(N.returnValue=!0)}for(N=[],V=S.g;V;V=V.parentNode)N.push(V);for(p=p.type,V=N.length-1;!S.h&&0<=V;V--){S.g=N[V];var H=KM(N[V],p,!0,S);D=D&&H}for(V=0;!S.h&&V<N.length;V++)S.g=N[V],H=KM(N[V],p,!1,S),D=D&&H}return D}return op(p,new bo(S,this))}function Sh(p){return p=p[lE],p instanceof Dx?p:null}var Xy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mx(p){return C(p)?p:(p[Xy]||(p[Xy]=function(S){return p.handleEvent(S)}),p[Xy])}function si(){$n.call(this),this.J=new Dx(this),this.wb=this,this.Ha=null}Y(si,$n),si.prototype[ap]=!0,si.prototype.Za=function(p){this.Ha=p},si.prototype.removeEventListener=function(p,S,D,N){_h(this,p,S,D,N)};function Ws(p,S){var D,N=p.Ha;if(N)for(D=[];N;N=N.Ha)D.push(N);if(p=p.wb,N=S.type||S,f(S))S=new Xc(S,p);else if(S instanceof Xc)S.target=S.target||p;else{var V=S;S=new Xc(N,p),Te(S,V)}if(V=!0,D)for(var H=D.length-1;!S.h&&0<=H;H--){var ne=S.g=D[H];V=mm(ne,N,!0,S)&&V}if(S.h||(ne=S.g=p,V=mm(ne,N,!0,S)&&V,S.h||(V=mm(ne,N,!1,S)&&V)),D)for(H=0;!S.h&&H<D.length;H++)ne=S.g=D[H],V=mm(ne,N,!1,S)&&V;return V}si.prototype.o=function(){if(si.K.o.call(this),this.J){var p=this.J,S;for(S in p.a){for(var D=p.a[S],N=0;N<D.length;N++)Ky(D[N]);delete p.a[S],p.g--}}this.Ha=null};function mm(p,S,D,N){if(S=p.J.a[String(S)],!S)return!0;S=S.concat();for(var V=!0,H=0;H<S.length;++H){var ne=S[H];if(ne&&!ne.sa&&ne.capture==D){var ue=ne.listener,Pe=ne.La||ne.src;ne.Ia&&oE(p.J,ne),V=ue.call(Pe,N)!==!1&&V}}return V&&N.qb!=0}var fs={},Th=0;function dE(p,S){if(!p)throw Error("Event target element must be provided!");if(p=Px(p),fs[p]&&fs[p].length)for(var D=0;D<fs[p].length;D++)Ws(fs[p][D],S)}function XM(p){var S=Px(p.N());fs[S]&&fs[S].length&&(Le(fs[S],function(D){return D==p}),fs[S].length||delete fs[S])}function Px(p){return typeof p.a>"u"&&(p.a=Th,Th++),p.a}function Ox(p){if(!p)throw Error("Event target element must be provided!");si.call(this),this.a=p}s(Ox,si),Ox.prototype.N=function(){return this.a},Ox.prototype.register=function(){var p=Px(this.N());fs[p]?fe(fs[p],this)||fs[p].push(this):fs[p]=[this]};function ZM(p){if(!p)return!1;try{return!!p.$goog_Thenable}catch{return!1}}function hE(p,S){this.h=p,this.j=S,this.g=0,this.a=null}hE.prototype.get=function(){if(0<this.g){this.g--;var p=this.a;this.a=p.next,p.next=null}else p=this.h();return p};function fE(p,S){p.j(S),100>p.g&&(p.g++,S.next=p.a,p.a=S)}function pE(){this.g=this.a=null}var Rx=new hE(function(){return new Nx},function(p){p.reset()});pE.prototype.add=function(p,S){var D=Rx.get();D.set(p,S),this.g?this.g.next=D:this.a=D,this.g=D};function cc(){var p=lp,S=null;return p.a&&(S=p.a,p.a=p.a.next,p.a||(p.g=null),S.next=null),S}function Nx(){this.next=this.g=this.a=null}Nx.prototype.set=function(p,S){this.a=p,this.g=S,this.next=null},Nx.prototype.reset=function(){this.next=this.g=this.a=null};function Ys(p){d.setTimeout(function(){throw p},0)}var ps;function vm(){var p=d.MessageChannel;if(typeof p>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Fn("Presto")&&(p=function(){var V=document.createElement("IFRAME");V.style.display="none",V.src="",document.documentElement.appendChild(V);var H=V.contentWindow;V=H.document,V.open(),V.write(""),V.close();var ne="callImmediate"+Math.random(),ue=H.location.protocol=="file:"?"*":H.location.protocol+"//"+H.location.host;V=O(function(Pe){(ue=="*"||Pe.origin==ue)&&Pe.data==ne&&this.port1.onmessage()},this),H.addEventListener("message",V,!1),this.port1={},this.port2={postMessage:function(){H.postMessage(ne,ue)}}}),typeof p<"u"&&!Fn("Trident")&&!Fn("MSIE")){var S=new p,D={},N=D;return S.port1.onmessage=function(){if(h(D.next)){D=D.next;var V=D.gb;D.gb=null,V()}},function(V){N.next={gb:V},N=N.next,S.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(V){var H=document.createElement("SCRIPT");H.onreadystatechange=function(){H.onreadystatechange=null,H.parentNode.removeChild(H),H=null,V(),V=null},document.documentElement.appendChild(H)}:function(V){d.setTimeout(V,0)}}function Zy(p,S){sp||Lx(),Qy||(sp(),Qy=!0),lp.add(p,S)}var sp;function Lx(){if(d.Promise&&d.Promise.resolve){var p=d.Promise.resolve(void 0);sp=function(){p.then(gE)}}else sp=function(){var S=gE;!C(d.setImmediate)||d.Window&&d.Window.prototype&&!Fn("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(ps||(ps=vm()),ps(S)):d.setImmediate(S)}}var Qy=!1,lp=new pE;function gE(){for(var p;p=cc();){try{p.a.call(p.g)}catch(S){Ys(S)}fE(Rx,p)}Qy=!1}function Fi(p){if(this.a=Cl,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,p!=y)try{var S=this;p.call(void 0,function(D){Il(S,Jy,D)},function(D){if(!(D instanceof Ml))try{throw D instanceof Error?D:Error("Promise rejected.")}catch{}Il(S,Yi,D)})}catch(D){Il(this,Yi,D)}}var Cl=0,Jy=2,Yi=3;function jx(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}jx.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Zc=new hE(function(){return new jx},function(p){p.reset()});function Fx(p,S,D){var N=Zc.get();return N.s=p,N.g=S,N.j=D,N}function bi(p){if(p instanceof Fi)return p;var S=new Fi(y);return Il(S,Jy,p),S}function Dl(p){return new Fi(function(S,D){D(p)})}Fi.prototype.then=function(p,S,D){return cp(this,C(p)?p:null,C(S)?S:null,D)},Fi.prototype.$goog_Thenable=!0,n=Fi.prototype,n.fc=function(p,S){return p=Fx(p,p,S),p.h=!0,e0(this,p),this},n.Ca=function(p,S){return cp(this,null,p,S)},n.cancel=function(p){this.a==Cl&&Zy(function(){var S=new Ml(p);$x(this,S)},this)};function $x(p,S){if(p.a==Cl)if(p.h){var D=p.h;if(D.g){for(var N=0,V=null,H=null,ne=D.g;ne&&(ne.h||(N++,ne.a==p&&(V=ne),!(V&&1<N)));ne=ne.next)V||(H=ne);V&&(D.a==Cl&&N==1?$x(D,S):(H?(N=H,N.next==D.j&&(D.j=N),N.next=N.next.next):Ks(D),Xs(D,V,Yi,S)))}p.h=null}else Il(p,Yi,S)}function e0(p,S){p.g||p.a!=Jy&&p.a!=Yi||t0(p),p.j?p.j.next=S:p.g=S,p.j=S}function cp(p,S,D,N){var V=Fx(null,null,null);return V.a=new Fi(function(H,ne){V.s=S?function(ue){try{var Pe=S.call(N,ue);H(Pe)}catch(nt){ne(nt)}}:H,V.g=D?function(ue){try{var Pe=D.call(N,ue);!h(Pe)&&ue instanceof Ml?ne(ue):H(Pe)}catch(nt){ne(nt)}}:ne}),V.a.h=p,e0(p,V),V.a}n.hc=function(p){this.a=Cl,Il(this,Jy,p)},n.ic=function(p){this.a=Cl,Il(this,Yi,p)};function Il(p,S,D){if(p.a==Cl){p===D&&(S=Yi,D=new TypeError("Promise cannot resolve to itself")),p.a=1;e:{var N=D,V=p.hc,H=p.ic;if(N instanceof Fi){e0(N,Fx(V||y,H||null,p));var ne=!0}else if(ZM(N))N.then(V,H,p),ne=!0;else{if(k(N))try{var ue=N.then;if(C(ue)){Bx(N,ue,V,H,p),ne=!0;break e}}catch(Pe){H.call(p,Pe),ne=!0;break e}ne=!1}}ne||(p.A=D,p.a=S,p.h=null,t0(p),S!=Yi||D instanceof Ml||rd(p,D))}}function Bx(p,S,D,N,V){function H(Pe){ue||(ue=!0,N.call(V,Pe))}function ne(Pe){ue||(ue=!0,D.call(V,Pe))}var ue=!1;try{S.call(p,ne,H)}catch(Pe){H(Pe)}}function t0(p){p.i||(p.i=!0,Zy(p.Hb,p))}function Ks(p){var S=null;return p.g&&(S=p.g,p.g=S.next,S.next=null),p.g||(p.j=null),S}n.Hb=function(){for(var p;p=Ks(this);)Xs(this,p,this.a,this.A);this.i=!1};function Xs(p,S,D,N){if(D==Yi&&S.g&&!S.h)for(;p&&p.s;p=p.h)p.s=!1;if(S.a)S.a.h=null,Eh(S,D,N);else try{S.h?S.s.call(S.j):Eh(S,D,N)}catch(V){Qc.call(null,V)}fE(Zc,S)}function Eh(p,S,D){S==Jy?p.s.call(p.j,D):p.g&&p.g.call(p.j,D)}function rd(p,S){p.s=!0,Zy(function(){p.s&&Qc.call(null,S)})}var Qc=Ys;function Ml(p){G.call(this,p)}Y(Ml,G),Ml.prototype.name="cancel";function mE(p,S,D){S||(S={}),D=D||window;var N=p instanceof xa?p:vh(typeof p.href<"u"?p.href:String(p));p=S.target||p.target;var V=[];for(H in S)switch(H){case"width":case"height":case"top":case"left":V.push(H+"="+S[H]);break;case"target":case"noopener":case"noreferrer":break;default:V.push(H+"="+(S[H]?1:0))}var H=V.join(",");return(Fn("iPhone")&&!Fn("iPod")&&!Fn("iPad")||Fn("iPad")||Fn("iPod"))&&D.navigator&&D.navigator.standalone&&p&&p!="_self"?(H=D.document.createElement("A"),N=N instanceof xa?N:yx(N),H.href=tc(N),H.setAttribute("target",p),S.noreferrer&&H.setAttribute("rel","noreferrer"),S=document.createEvent("MouseEvent"),S.initMouseEvent("click",!0,!0,D,1),H.dispatchEvent(S),D={}):S.noreferrer?(D=D.open("",p,H),S=tc(N).toString(),D&&(vx&&S.indexOf(";")!=-1&&(S="'"+S.replace(/'/g,"%27")+"'"),D.opener=null,S=ds('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Re(S)+'">',null),D.document.write(El(S)),D.document.close())):(D=D.open(tc(N).toString(),p,H))&&S.noopener&&(D.opener=null),D}function Ux(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function Ah(p){mE(p,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function $a(p,S){if(p=k(p)&&p.nodeType==1?p:document.querySelector(String(p)),p==null)throw Error(S||"Cannot find element.");return p}function Cr(){return window.location.href}function Sr(){var p=null;return new Fi(function(S){d.document.readyState=="complete"?S():(p=function(){S()},gm(window,"load",p))}).Ca(function(S){throw _h(window,"load",p),S})}function up(){for(var p=32,S=[];0<p;)S.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),p--;return S.join("")}function Jc(p,S,D){return D=D===void 0?{}:D,Object.keys(p).filter(function(N){return S.includes(N)}).reduce(function(N,V){return N[V]=p[V],N},D)}function eu(p){var S=od;this.s=[],this.T=S,this.O=p||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}eu.prototype.cancel=function(p){if(this.a)this.h instanceof eu&&this.h.cancel();else{if(this.g){var S=this.g;delete this.g,p?S.cancel(p):(S.C--,0>=S.C&&S.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(p=new id,n0(this),uc(this,!1,p))}},eu.prototype.L=function(p,S){this.A=!1,uc(this,p,S)};function uc(p,S,D){p.a=!0,p.h=D,p.j=!S,bm(p)}function n0(p){if(p.a){if(!p.J)throw new r0;p.J=!1}}eu.prototype.callback=function(p){n0(this),uc(this,!0,p)};function vE(p,S,D){p.s.push([S,D,void 0]),p.a&&bm(p)}eu.prototype.then=function(p,S,D){var N,V,H=new Fi(function(ne,ue){N=ne,V=ue});return vE(this,N,function(ne){ne instanceof id?H.cancel():V(ne)}),H.then(p,S,D)},eu.prototype.$goog_Thenable=!0;function ym(p){return ye(p.s,function(S){return C(S[1])})}function bm(p){if(p.i&&p.a&&ym(p)){var S=p.i,D=tu[S];D&&(d.clearTimeout(D.a),delete tu[S]),p.i=0}p.g&&(p.g.C--,delete p.g),S=p.h;for(var N=D=!1;p.s.length&&!p.A;){var V=p.s.shift(),H=V[0],ne=V[1];if(V=V[2],H=p.j?ne:H)try{var ue=H.call(V||p.O,S);h(ue)&&(p.j=p.j&&(ue==S||ue instanceof Error),p.h=S=ue),(ZM(S)||typeof d.Promise=="function"&&S instanceof d.Promise)&&(N=!0,p.A=!0)}catch(Pe){S=Pe,p.j=!0,ym(p)||(D=!0)}}p.h=S,N&&(ue=O(p.L,p,!0),N=O(p.L,p,!1),S instanceof eu?(vE(S,ue,N),S.l=!0):S.then(ue,N)),D&&(S=new Vx(S),tu[S.a]=S,p.i=S.a)}function r0(){G.call(this)}Y(r0,G),r0.prototype.message="Deferred has already fired",r0.prototype.name="AlreadyCalledError";function id(){G.call(this)}Y(id,G),id.prototype.message="Deferred was canceled",id.prototype.name="CanceledError";function Vx(p){this.a=d.setTimeout(O(this.h,this),0),this.g=p}Vx.prototype.h=function(){throw delete tu[this.a],this.g};var tu={};function ad(p){var S={},D=S.document||document,N=Lr(p).toString(),V=document.createElement("SCRIPT"),H={rb:V,sb:void 0},ne=new eu(H),ue=null,Pe=S.timeout!=null?S.timeout:5e3;return 0<Pe&&(ue=window.setTimeout(function(){wm(V,!0);var nt=new xm(i0,"Timeout reached for loading script "+N);n0(ne),uc(ne,!1,nt)},Pe),H.sb=ue),V.onload=V.onreadystatechange=function(){V.readyState&&V.readyState!="loaded"&&V.readyState!="complete"||(wm(V,S.xc||!1,ue),ne.callback(null))},V.onerror=function(){wm(V,!0,ue);var nt=new xm(yE,"Error while loading script "+N);n0(ne),uc(ne,!1,nt)},H=S.attributes||{},Te(H,{type:"text/javascript",charset:"UTF-8"}),Hc(V,H),nc(V,p),kh(D).appendChild(V),ne}function kh(p){var S=(p||document).getElementsByTagName("HEAD");return S&&S.length!=0?S[0]:p.documentElement}function od(){if(this&&this.rb){var p=this.rb;p&&p.tagName=="SCRIPT"&&wm(p,!0,this.sb)}}function wm(p,S,D){D!=null&&d.clearTimeout(D),p.onload=y,p.onerror=y,p.onreadystatechange=y,S&&window.setTimeout(function(){rr(p)},0)}var yE=0,i0=1;function xm(p,S){var D="Jsloader error (code #"+p+")";S&&(D+=": "+S),G.call(this,D),this.code=p}Y(xm,G);function dc(){return d.google&&d.google.accounts&&d.google.accounts.id||null}function Ba(p){this.a=p||dc(),this.h=!1,this.g=null}Ba.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function a0(p,S,D){if(p.a&&S)return function(){return p.h=!0,new Fi(function(V){p.g=V,p.a.initialize({client_id:S,callback:V,auto_select:!D}),p.a.prompt()})}();if(S){var N=bE.Xa().load().then(function(){return p.a=dc(),a0(p,S,D)}).Ca(function(){return null});return bi(N)}return bi(null)}w(Ba);var QM=new La(Ju,"https://accounts.google.com/gsi/client");function bE(){this.a=null}bE.prototype.load=function(){var p=this;if(this.a)return this.a;var S=ep();return dc()?bi():this.a=Sr().then(function(){if(!dc())return new Fi(function(D,N){var V=setTimeout(function(){p.a=null,N(Error("Network error!"))},1e4);d.onGoogleLibraryLoad=function(){clearTimeout(V),D()},bi(ad(S)).then(function(){dc()&&D()}).Ca(function(H){clearTimeout(V),p.a=null,N(H)})})})},w(bE);function wE(p,S){this.a=p,this.g=S||function(D){throw D}}wE.prototype.confirm=function(p){return bi(this.a.confirm(p)).Ca(this.g)};function xE(p,S,D){this.reset(p,S,D,void 0,void 0)}xE.prototype.a=null,xE.prototype.reset=function(p,S,D,N,V){this.h=N||B(),this.j=p,this.s=S,this.g=D,delete this.a};function Ki(p){this.s=p,this.a=this.h=this.j=this.g=null}function _m(p,S){this.name=p,this.value=S}_m.prototype.toString=function(){return this.name};var Sm=new _m("SEVERE",1e3),Tm=new _m("WARNING",900),zx=new _m("CONFIG",700);function dp(p){return p.j?p.j:p.g?dp(p.g):(te("Root logger has no level set."),null)}Ki.prototype.log=function(p,S,D){if(p.value>=dp(this).value)for(C(S)&&(S=S()),p=new xE(p,String(S),this.s),D&&(p.a=D),D=this;D;){var N=D,V=p;if(N.a)for(var H=0;S=N.a[H];H++)S(V);D=D.g}};var Ch={},o0=null;function _E(){o0||(o0=new Ki(""),Ch[""]=o0,o0.j=zx)}function JM(p){_E();var S;if(!(S=Ch[p])){S=new Ki(p);var D=p.lastIndexOf("."),N=p.substr(D+1);D=JM(p.substr(0,D)),D.h||(D.h={}),D.h[N]=S,S.g=D,Ch[p]=S}return S}function s0(){this.a=B()}var sd=null;s0.prototype.set=function(p){this.a=p},s0.prototype.reset=function(){this.set(B())},s0.prototype.get=function(){return this.a};function hp(p){this.j=p||"",sd||(sd=new s0),this.s=sd}hp.prototype.a=!0,hp.prototype.g=!0,hp.prototype.h=!1;function nu(p){return 10>p?"0"+p:String(p)}function eP(p,S){p=(p.h-S)/1e3,S=p.toFixed(3);var D=0;if(1>p)D=2;else for(;100>p;)D++,p*=10;for(;0<D--;)S=" "+S;return S}function Em(p){hp.call(this,p)}Y(Em,hp);function tP(p,S){var D=[];if(D.push(p.j," "),p.g){var N=new Date(S.h);D.push("[",nu(N.getFullYear()-2e3)+nu(N.getMonth()+1)+nu(N.getDate())+" "+nu(N.getHours())+":"+nu(N.getMinutes())+":"+nu(N.getSeconds())+"."+nu(Math.floor(N.getMilliseconds()/10)),"] ")}return D.push("[",eP(S,p.s.get()),"s] "),D.push("[",S.g,"] "),D.push(S.s),p.h&&(S=S.a)&&D.push(`
`,S instanceof Error?S.message:S.toString()),p.a&&D.push(`
`),D.join("")}function l0(){this.s=O(this.h,this),this.a=new Em,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}l0.prototype.h=function(p){function S(H){if(H){if(H.value>=Sm.value)return"error";if(H.value>=Tm.value)return"warn";if(H.value>=zx.value)return"log"}return"debug"}if(!this.j[p.g]){var D=tP(this.a,p),N=SE;if(N){var V=S(p.j);nP(N,V,D,p.a)}}};var SE=d.console;function nP(p,S,D,N){p[S]?p[S](D,N||""):p.log(D,N||"")}function wo(p,S){var D=Hx;D&&D.log(Sm,p,S)}var Hx;Hx=JM("firebaseui");var fp=new l0;if(fp.g!=1){var c0;_E(),c0=o0;var rP=fp.s;c0.a||(c0.a=[]),c0.a.push(rP),fp.g=!0}function Bo(p){var S=Hx;S&&S.log(Tm,p,void 0)}function Gx(){this.a=(typeof document>"u"?null:document)||{cookie:""}}n=Gx.prototype,n.set=function(p,S,D,N,V,H){if(/[;=\s]/.test(p))throw Error('Invalid cookie name "'+p+'"');if(/[;\r\n]/.test(S))throw Error('Invalid cookie value "'+S+'"');h(D)||(D=-1),V=V?";domain="+V:"",N=N?";path="+N:"",H=H?";secure":"",D=0>D?"":D==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(B()+1e3*D).toUTCString(),this.a.cookie=p+"="+S+V+N+D+H},n.get=function(p,S){for(var D=p+"=",N=(this.a.cookie||"").split(";"),V=0,H;V<N.length;V++){if(H=Ge(N[V]),H.lastIndexOf(D,0)==0)return H.substr(D.length);if(H==p)return""}return S},n.ja=function(){return u0(this).keys},n.la=function(){return u0(this).values},n.clear=function(){for(var p=u0(this).keys,S=p.length-1;0<=S;S--){var D=p[S];this.get(D),this.set(D,"",0,void 0,void 0)}};function u0(p){p=(p.a.cookie||"").split(";");for(var S=[],D=[],N,V,H=0;H<p.length;H++)V=Ge(p[H]),N=V.indexOf("="),N==-1?(S.push(""),D.push(V)):(S.push(V.substring(0,N)),D.push(V.substring(N+1)));return{keys:S,values:D}}var hc=new Gx;function ld(){}function ru(p,S,D,N){this.h=typeof p<"u"&&p!==null?p:-1,this.g=S||null,this.a=D||null,this.j=!!N}s(ru,ld),ru.prototype.set=function(p,S){hc.set(p,S,this.h,this.g,this.a,this.j)},ru.prototype.get=function(p){return hc.get(p)||null},ru.prototype.ra=function(p){var S=this.g,D=this.a;hc.get(p),hc.set(p,"",0,S,D)};function d0(p,S){this.g=p,this.a=S||null}function qx(p){return{email:p.g,credential:p.a&&p.a.toJSON()}}function Am(p){if(p&&p.email){var S=p.credential&&Kt.auth.AuthCredential.fromJSON(p.credential);return new d0(p.email,S)}return null}function km(p){this.a=p||null}function TE(p){for(var S=[],D=0,N=0;N<p.length;N++){var V=p.charCodeAt(N);255<V&&(S[D++]=V&255,V>>=8),S[D++]=V}return S}function iP(p){return ee(p,function(S){return S=S.toString(16),1<S.length?S:"0"+S}).join("")}function cd(p){for(this.i=p,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(ud*(this.j+1)),p=0;p<this.g;p++)this.a[p]=[this.i[4*p],this.i[4*p+1],this.i[4*p+2],this.i[4*p+3]];var S=Array(4);for(p=this.g;p<ud*(this.j+1);p++){if(S[0]=this.a[p-1][0],S[1]=this.a[p-1][1],S[2]=this.a[p-1][2],S[3]=this.a[p-1][3],p%this.g==0){var D=S,N=D[0];D[0]=D[1],D[1]=D[2],D[2]=D[3],D[3]=N,Xi(S),S[0]^=iu[p/this.g][0],S[1]^=iu[p/this.g][1],S[2]^=iu[p/this.g][2],S[3]^=iu[p/this.g][3]}else 6<this.g&&p%this.g==4&&Xi(S);this.a[p]=Array(4),this.a[p][0]=this.a[p-this.g][0]^S[0],this.a[p][1]=this.a[p-this.g][1]^S[1],this.a[p][2]=this.a[p-this.g][2]^S[2],this.a[p][3]=this.a[p-this.g][3]^S[3]}}cd.prototype.A=16;var ud=cd.prototype.A/4;function EE(p,S){for(var D,N=0;N<ud;N++)for(var V=0;4>V;V++)D=4*V+N,D=S[D],p.h[N][V]=D}function Wx(p){for(var S=[],D=0;D<ud;D++)for(var N=0;4>N;N++)S[4*N+D]=p.h[D][N];return S}function Dh(p,S){for(var D=0;4>D;D++)for(var N=0;4>N;N++)p.h[D][N]^=p.a[4*S+N][D]}function fc(p,S){for(var D=0;4>D;D++)for(var N=0;4>N;N++)p.h[D][N]=S[p.h[D][N]]}function Bn(p){for(var S=1;4>S;S++)for(var D=0;4>D;D++)p.s[S][D]=p.h[S][D];for(S=1;4>S;S++)for(D=0;4>D;D++)p.h[S][D]=p.s[S][(D+S)%ud]}function jr(p){for(var S=1;4>S;S++)for(var D=0;4>D;D++)p.s[S][(D+S)%ud]=p.h[S][D];for(S=1;4>S;S++)for(D=0;4>D;D++)p.h[S][D]=p.s[S][D]}function Xi(p){p[0]=dd[p[0]],p[1]=dd[p[1]],p[2]=dd[p[2]],p[3]=dd[p[3]]}var dd=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],pp=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],iu=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],gp=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Ih=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],hd=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Yx=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],ki=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Cm=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Kx(p,S){p=new cd(kE(p)),S=TE(S);for(var D=S.splice(0,16),N="",V;D.length;){V=16-D.length;for(var H=0;H<V;H++)D.push(0);for(V=p,EE(V,D),Dh(V,0),D=1;D<V.j;++D){fc(V,dd),Bn(V),H=V.h;for(var ne=V.s[0],ue=0;4>ue;ue++)ne[0]=H[0][ue],ne[1]=H[1][ue],ne[2]=H[2][ue],ne[3]=H[3][ue],H[0][ue]=gp[ne[0]]^Ih[ne[1]]^ne[2]^ne[3],H[1][ue]=ne[0]^gp[ne[1]]^Ih[ne[2]]^ne[3],H[2][ue]=ne[0]^ne[1]^gp[ne[2]]^Ih[ne[3]],H[3][ue]=Ih[ne[0]]^ne[1]^ne[2]^gp[ne[3]];Dh(V,D)}fc(V,dd),Bn(V),Dh(V,V.j),N+=iP(Wx(V)),D=S.splice(0,16)}return N}function AE(p,S){p=new cd(kE(p));for(var D=[],N=0;N<S.length;N+=2)D.push(parseInt(S.substring(N,N+2),16));var V=D.splice(0,16);for(S="";V.length;){for(N=p,EE(N,V),Dh(N,N.j),V=1;V<N.j;++V){jr(N),fc(N,pp),Dh(N,N.j-V);for(var H=N.h,ne=N.s[0],ue=0;4>ue;ue++)ne[0]=H[0][ue],ne[1]=H[1][ue],ne[2]=H[2][ue],ne[3]=H[3][ue],H[0][ue]=Cm[ne[0]]^Yx[ne[1]]^ki[ne[2]]^hd[ne[3]],H[1][ue]=hd[ne[0]]^Cm[ne[1]]^Yx[ne[2]]^ki[ne[3]],H[2][ue]=ki[ne[0]]^hd[ne[1]]^Cm[ne[2]]^Yx[ne[3]],H[3][ue]=Yx[ne[0]]^ki[ne[1]]^hd[ne[2]]^Cm[ne[3]]}if(jr(N),fc(N,pp),Dh(N,0),N=Wx(N),8192>=N.length)N=String.fromCharCode.apply(null,N);else{for(V="",H=0;H<N.length;H+=8192)V+=String.fromCharCode.apply(null,he(N,H,H+8192));N=V}S+=N,V=D.splice(0,16)}return S.replace(/(\x00)+$/,"")}function kE(p){p=TE(p.substring(0,32));for(var S=32-p.length,D=0;D<S;D++)p.push(0);return p}function aP(p){var S=[];return h0(new CE,p,S),S.join("")}function CE(){}function h0(p,S,D){if(S==null)D.push("null");else{if(typeof S=="object"){if(T(S)){var N=S;S=N.length,D.push("[");for(var V="",H=0;H<S;H++)D.push(V),h0(p,N[H],D),V=",";D.push("]");return}if(S instanceof String||S instanceof Number||S instanceof Boolean)S=S.valueOf();else{D.push("{"),V="";for(N in S)Object.prototype.hasOwnProperty.call(S,N)&&(H=S[N],typeof H!="function"&&(D.push(V),Zi(N,D),D.push(":"),h0(p,H,D),V=","));D.push("}");return}}switch(typeof S){case"string":Zi(S,D);break;case"number":D.push(isFinite(S)&&!isNaN(S)?String(S):"null");break;case"boolean":D.push(String(S));break;case"function":D.push("null");break;default:throw Error("Unknown type: "+typeof S)}}}var Xx={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},gs=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zi(p,S){S.push('"',p.replace(gs,function(D){var N=Xx[D];return N||(N="\\u"+(D.charCodeAt(0)|65536).toString(16).substr(1),Xx[D]=N),N}),'"')}function mp(p){this.a=p}mp.prototype.set=function(p,S){h(S)?this.a.set(p,aP(S)):this.a.ra(p)},mp.prototype.get=function(p){try{var S=this.a.get(p)}catch{return}if(S!==null)try{return JSON.parse(S)}catch{throw"Storage: Invalid value was encountered"}};function Mh(){}Y(Mh,ld),Mh.prototype.clear=function(){var p=Ti(this.ha(!0)),S=this;z(p,function(D){S.ra(D)})};function vp(p){this.a=p}Y(vp,Mh);function Dm(p){if(!p.a)return!1;try{return p.a.setItem("__sak","1"),p.a.removeItem("__sak"),!0}catch{return!1}}n=vp.prototype,n.set=function(p,S){try{this.a.setItem(p,S)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},n.get=function(p){if(p=this.a.getItem(p),!f(p)&&p!==null)throw"Storage mechanism: Invalid value was encountered";return p},n.ra=function(p){this.a.removeItem(p)},n.ha=function(p){var S=0,D=this.a,N=new tt;return N.next=function(){if(S>=D.length)throw Ne;var V=D.key(S++);if(p)return V;if(V=D.getItem(V),!f(V))throw"Storage mechanism: Invalid value was encountered";return V},N},n.clear=function(){this.a.clear()},n.key=function(p){return this.a.key(p)};function pc(){var p=null;try{p=window.localStorage||null}catch{}this.a=p}Y(pc,vp);function Im(){var p=null;try{p=window.sessionStorage||null}catch{}this.a=p}Y(Im,vp);function Ph(p,S){this.g=p,this.a=S+"::"}Y(Ph,Mh),Ph.prototype.set=function(p,S){this.g.set(this.a+p,S)},Ph.prototype.get=function(p){return this.g.get(this.a+p)},Ph.prototype.ra=function(p){this.g.ra(this.a+p)},Ph.prototype.ha=function(p){var S=this.g.ha(!0),D=this,N=new tt;return N.next=function(){for(var V=S.next();V.substr(0,D.a.length)!=D.a;)V=S.next();return p?V.substr(D.a.length):D.g.get(V)},N},Dm(new pc);var Zx,DE=new Im;Zx=Dm(DE)?new Ph(DE,"firebaseui"):null;var Qx=new mp(Zx),Jx={name:"pendingEmailCredential",storage:Qx},Oh={name:"redirectStatus",storage:Qx},Mm={name:"redirectUrl",storage:Qx},yp={name:"emailForSignIn",storage:new mp(new ru(3600,"/"))},bp={name:"pendingEncryptedCredential",storage:new mp(new ru(3600,"/"))};function wp(p,S){return p.storage.get(S?p.name+":"+S:p.name)}function ms(p,S){p.storage.a.ra(S?p.name+":"+S:p.name)}function xp(p,S,D){p.storage.set(D?p.name+":"+D:p.name,S)}function IE(p){return wp(Mm,p)||null}function gc(p){return p=wp(Jx,p)||null,Am(p)}function Pl(p){ms(Jx,p)}function ME(p,S){xp(Jx,qx(p),S)}function e_(p){return(p=wp(Oh,p)||null)&&typeof p.tenantId<"u"?new km(p.tenantId):null}function oP(p,S){xp(Oh,{tenantId:p.a},S)}function sP(p,S){S=wp(yp,S);var D=null;if(S)try{var N=AE(p,S),V=JSON.parse(N);D=V&&V.email||null}catch{}return D}function lP(p,S){S=wp(bp,S);var D=null;if(S)try{var N=AE(p,S);D=JSON.parse(N)}catch{}return Am(D||null)}function fF(p,S,D){xp(bp,Kx(p,JSON.stringify(qx(S))),D)}function t_(){this.W={}}function li(p,S,D){if(S.toLowerCase()in p.W)throw Error("Configuration "+S+" has already been defined.");p.W[S.toLowerCase()]=D}function Pm(p,S,D){if(!(S.toLowerCase()in p.W))throw Error("Configuration "+S+" is not defined.");p.W[S.toLowerCase()]=D}t_.prototype.get=function(p){if(!(p.toLowerCase()in this.W))throw Error("Configuration "+p+" is not defined.");return this.W[p.toLowerCase()]};function n_(p,S){if(p=p.get(S),!p)throw Error("Configuration "+S+" is required.");return p}function Om(){this.g=void 0,this.a={}}n=Om.prototype,n.set=function(p,S){Rm(this,p,S,!1)},n.add=function(p,S){Rm(this,p,S,!0)};function Rm(p,S,D,N){for(var V=0;V<S.length;V++){var H=S.charAt(V);p.a[H]||(p.a[H]=new Om),p=p.a[H]}if(N&&p.g!==void 0)throw Error('The collection already contains the key "'+S+'"');p.g=D}n.get=function(p){e:{for(var S=this,D=0;D<p.length;D++)if(S=S.a[p.charAt(D)],!S){p=void 0;break e}p=S}return p?p.g:void 0},n.la=function(){var p=[];return PE(this,p),p};function PE(p,S){p.g!==void 0&&S.push(p.g);for(var D in p.a)PE(p.a[D],S)}n.ja=function(){var p=[];return OE(this,"",p),p};function OE(p,S,D){p.g!==void 0&&D.push(S);for(var N in p.a)OE(p.a[N],S+N,D)}n.clear=function(){this.a={},this.g=void 0};function RE(p){for(this.a=p,this.g=new Om,p=0;p<this.a.length;p++){var S=this.g.get("+"+this.a[p].b);S?S.push(this.a[p]):this.g.add("+"+this.a[p].b,[this.a[p]])}}function f0(p,S){p=p.g;var D={},N=0;for(p.g!==void 0&&(D[N]=p.g);N<S.length;N++){var V=S.charAt(N);if(!(V in p.a))break;p=p.a[V],p.g!==void 0&&(D[N]=p.g)}for(var H in D)if(D.hasOwnProperty(H))return D[H];return[]}function Rh(p){for(var S=0;S<xo.length;S++)if(xo[S].c===p)return xo[S];return null}function NE(p){p=p.toUpperCase();for(var S=[],D=0;D<xo.length;D++)xo[D].f===p&&S.push(xo[D]);return S}function r_(p){if(0<p.length&&p.charAt(0)=="+"){p=p.substring(1);for(var S=[],D=0;D<xo.length;D++)xo[D].b==p&&S.push(xo[D]);p=S}else p=NE(p);return p}function LE(p){p.sort(function(S,D){return S.name.localeCompare(D.name,"en")})}var xo=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];LE(xo);var _p=new RE(xo);function jE(p,S){this.a=p,this.Aa=S}function FE(p){p=Ge(p);var S=f0(_p,p);return 0<S.length?new jE(S[0].b=="1"?"1-US-0":S[0].c,Ge(p.substr(S[0].b.length+1))):null}function $E(p){var S=Rh(p.a);if(!S)throw Error("Country ID "+p.a+" not found.");return"+"+S.b+p.Aa}function i_(p,S){for(var D=0;D<p.length;D++)if(!fe(BE,p[D])&&(Sp!==null&&p[D]in Sp||fe(S,p[D])))return p[D];return null}var BE=["emailLink","password","phone"],Sp={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function UE(){this.a=new t_,li(this.a,"autoUpgradeAnonymousUsers"),li(this.a,"callbacks"),li(this.a,"credentialHelper",w0),li(this.a,"immediateFederatedRedirect",!1),li(this.a,"popupMode",!1),li(this.a,"privacyPolicyUrl"),li(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),li(this.a,"queryParameterForWidgetMode","mode"),li(this.a,"signInFlow"),li(this.a,"signInOptions"),li(this.a,"signInSuccessUrl"),li(this.a,"siteName"),li(this.a,"tosUrl"),li(this.a,"widgetUrl"),li(this.a,"adminRestrictedOperation")}function p0(p){var S=!!p.a.get("autoUpgradeAnonymousUsers");return S&&!y0(p)&&wo('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),S}function g0(p){p=p.a.get("signInOptions")||[];for(var S=[],D=0;D<p.length;D++){var N=p[D];N=k(N)?N:{provider:N},N.provider&&S.push(N)}return S}function Zs(p,S){p=g0(p);for(var D=0;D<p.length;D++)if(p[D].provider===S)return p[D];return null}function Nm(p){return g0(p).map(function(S){return S.provider})}function Lm(p,S){p=jm(p);for(var D=0;D<p.length;D++)if(p[D].providerId===S)return p[D];return null}function jm(p){return g0(p).map(function(S){if(Sp[S.provider]||fe(hP,S.provider)){S={providerId:S.provider,S:S.providerName||null,V:S.fullLabel||null,ta:S.buttonColor||null,za:S.iconUrl?tc(vh(S.iconUrl)).toString():null};for(var D in S)S[D]===null&&delete S[D];return S}return{providerId:S.provider,S:S.providerName||null,V:S.fullLabel||null,ta:S.buttonColor||null,za:S.iconUrl?tc(vh(S.iconUrl)).toString():null,Ob:S.loginHintKey||null}})}function a_(p){var S=Zs(p,Kt.auth.GoogleAuthProvider.PROVIDER_ID),D;if(D=S&&S.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(N in p=p.a.get("credentialHelper"),c_)if(c_[N]===p){var N=c_[N];break e}}N=w0}D=N===b0}return D&&S.clientId||null}function m0(p){return p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID),!!(p&&p.disableSignUp&&p.disableSignUp.status)}function Nh(p){return p=p.a.get("adminRestrictedOperation")||null,!(!p||!p.status)}function cP(p){var S=null;if(g0(p).forEach(function(N){N.provider==Kt.auth.PhoneAuthProvider.PROVIDER_ID&&k(N.recaptchaParameters)&&!Array.isArray(N.recaptchaParameters)&&(S=hn(N.recaptchaParameters))}),S){var D=[];fP.forEach(function(N){typeof S[N]<"u"&&(D.push(N),delete S[N])}),D.length&&Bo('The following provided "recaptchaParameters" keys are not allowed: '+D.join(", "))}return S}function o_(p){return(p=p.a.get("adminRestrictedOperation"))&&p.adminEmail?p.adminEmail:null}function uP(p){if(p=p.a.get("adminRestrictedOperation")||null){var S=p.helpLink||null;if(S&&typeof S=="string")return function(){Ah(S)}}return null}function dP(p){return(p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp&&p.disableSignUp.adminEmail||null}function pF(p){if((p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp){var S=p.disableSignUp.helpLink||null;if(S&&typeof S=="string")return function(){Ah(S)}}return null}function Tp(p,S){return p=(p=Zs(p,S))&&p.scopes,Array.isArray(p)?p:[]}function Fm(p,S){return p=(p=Zs(p,S))&&p.customParameters,k(p)?(p=hn(p),S===Kt.auth.GoogleAuthProvider.PROVIDER_ID&&delete p.login_hint,S===Kt.auth.GithubAuthProvider.PROVIDER_ID&&delete p.login,p):null}function s_(p){p=Zs(p,Kt.auth.PhoneAuthProvider.PROVIDER_ID);var S=null;return p&&typeof p.loginHint=="string"&&(S=FE(p.loginHint)),p&&p.defaultNationalNumber||S&&S.Aa||null}function v0(p){var S=(p=Zs(p,Kt.auth.PhoneAuthProvider.PROVIDER_ID))&&p.defaultCountry||null;S=S&&NE(S);var D=null;return p&&typeof p.loginHint=="string"&&(D=FE(p.loginHint)),S&&S[0]||D&&Rh(D.a)||null}function $m(p){if(p=Zs(p,Kt.auth.PhoneAuthProvider.PROVIDER_ID),!p)return null;var S=p.whitelistedCountries,D=p.blacklistedCountries;if(typeof S<"u"&&(!Array.isArray(S)||S.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof D<"u"&&!Array.isArray(D))throw Error("BlacklistedCountries must be an array.");if(S&&D)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!S&&!D)return xo;if(p=[],S){D={};for(var N=0;N<S.length;N++)for(var V=r_(S[N]),H=0;H<V.length;H++)D[V[H].c]=V[H];for(var ne in D)D.hasOwnProperty(ne)&&p.push(D[ne])}else{for(ne={},S=0;S<D.length;S++)for(V=r_(D[S]),N=0;N<V.length;N++)ne[V[N].c]=V[N];for(V=0;V<xo.length;V++)ne!==null&&xo[V].c in ne||p.push(xo[V])}return p}function VE(p){return n_(p.a,"queryParameterForWidgetMode")}function zi(p){var S=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,S&&!p&&Bo("Privacy Policy URL is missing, the link will not be displayed."),S&&p){if(typeof S=="function")return S;if(typeof S=="string")return function(){Ah(S)}}return null}function ci(p){var S=p.a.get("tosUrl")||null,D=p.a.get("privacyPolicyUrl")||null;if(D&&!S&&Bo("Term of Service URL is missing, the link will not be displayed."),S&&D){if(typeof D=="function")return D;if(typeof D=="string")return function(){Ah(D)}}return null}function zE(p){return(p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.requireDisplayName<"u"?!!p.requireDisplayName:!0}function no(p){return p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID),!(!p||p.signInMethod!==Kt.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function au(p){return p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID),!(!p||!p.forceSameDevice)}function Lh(p){if(no(p)){var S={url:Cr(),handleCodeInApp:!0};(p=Zs(p,Kt.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.emailLinkSignIn=="function"&&Te(S,p.emailLinkSignIn()),p=S.url;var D=Cr();D instanceof Ke||(D=ce(D)),p instanceof Ke||(p=ce(p));var N=D;D=new Ke(N);var V=!!p.j;V?Tt(D,p.j):V=!!p.A,V?D.A=p.A:V=!!p.h,V?D.h=p.h:V=p.C!=null;var H=p.g;if(V)nr(D,p.C);else if(V=!!p.g){if(H.charAt(0)!="/"&&(N.h&&!N.g?H="/"+H:(N=D.g.lastIndexOf("/"),N!=-1&&(H=D.g.substr(0,N+1)+H))),H==".."||H==".")H="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){N=H.lastIndexOf("/",0)==0,H=H.split("/");for(var ne=[],ue=0;ue<H.length;){var Pe=H[ue++];Pe=="."?N&&ue==H.length&&ne.push(""):Pe==".."?((1<ne.length||ne.length==1&&ne[0]!="")&&ne.pop(),N&&ue==H.length&&ne.push("")):(ne.push(Pe),N=!0)}H=ne.join("/")}}return V?D.g=H:V=p.a.toString()!=="",V?oe(D,ls(p.a)):V=!!p.s,V&&(D.s=p.s),S.url=D.toString(),S}return null}function l_(p){var S=!!p.a.get("immediateFederatedRedirect"),D=Nm(p);return p=fd(p),S&&D.length==1&&!fe(BE,D[0])&&p==ou}function fd(p){p=p.a.get("signInFlow");for(var S in Bm)if(Bm[S]==p)return Bm[S];return ou}function mc(p){return Ep(p).signInSuccess||null}function ca(p){return Ep(p).signInSuccessWithAuthResult||null}function y0(p){return Ep(p).signInFailure||null}function Ep(p){return p.a.get("callbacks")||{}}var b0="googleyolo",w0="none",c_={nc:b0,NONE:w0},ou="redirect",Bm={qc:"popup",rc:ou},u_={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},hP=["anonymous"],fP=["sitekey","tabindex","callback","expired-callback"],jh,Ap,x0,HE,wr={};function Pt(p,S,D,N){wr[p].apply(null,Array.prototype.slice.call(arguments,1))}function GE(p){return p.classList?p.classList:(p=p.className,f(p)&&p.match(/\S+/g)||[])}function Hi(p,S){return p.classList?p.classList.contains(S):fe(GE(p),S)}function ui(p,S){p.classList?p.classList.add(S):Hi(p,S)||(p.className+=0<p.className.length?" "+S:S)}function vc(p,S){p.classList?p.classList.remove(S):Hi(p,S)&&(p.className=le(GE(p),function(D){return D!=S}).join(" "))}function Sa(p){var S=p.type;switch(f(S)&&S.toLowerCase()){case"checkbox":case"radio":return p.checked?p.value:null;case"select-one":return S=p.selectedIndex,0<=S?p.options[S].value:null;case"select-multiple":S=[];for(var D,N=0;D=p.options[N];N++)D.selected&&S.push(D.value);return S.length?S:null;default:return p.value!=null?p.value:null}}function qE(p,S){var D=p.type;switch(f(D)&&D.toLowerCase()){case"checkbox":case"radio":p.checked=S;break;case"select-one":if(p.selectedIndex=-1,f(S)){for(var N=0;D=p.options[N];N++)if(D.value==S){D.selected=!0;break}}break;case"select-multiple":for(f(S)&&(S=[S]),N=0;D=p.options[N];N++)if(D.selected=!1,S)for(var V,H=0;V=S[H];H++)D.value==V&&(D.selected=!0);break;default:p.value=S??""}}function pP(p){if(p.altKey&&!p.ctrlKey||p.metaKey||112<=p.keyCode&&123>=p.keyCode)return!1;if(Fh(p.keyCode))return!0;switch(p.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!wa;default:return 166>p.keyCode||183<p.keyCode}}function WE(p,S,D,N,V,H){if(la&&!Vs("525"))return!0;if(Tl&&V)return Fh(p);if(V&&!N)return!1;if(!wa){typeof S=="number"&&(S=_0(S));var ne=S==17||S==18||Tl&&S==91;if((!D||Tl)&&ne||Tl&&S==16&&(N||H))return!1}if((la||cs)&&N&&D)switch(p){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Xn&&N&&S==p)return!1;switch(p){case 13:return wa?H||V?!1:!(D&&N):!0;case 27:return!(la||cs||wa)}return wa&&(N||V||H)?!1:Fh(p)}function Fh(p){if(48<=p&&57>=p||96<=p&&106>=p||65<=p&&90>=p||(la||cs)&&p==0)return!0;switch(p){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return wa;default:return!1}}function _0(p){if(wa)p=gP(p);else if(Tl&&la)switch(p){case 93:p=91}return p}function gP(p){switch(p){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return p}}function kp(p){si.call(this),this.a=p,ji(p,"keydown",this.g,!1,this),ji(p,"click",this.h,!1,this)}Y(kp,si),kp.prototype.g=function(p){(p.keyCode==13||la&&p.keyCode==3)&&YE(this,p)},kp.prototype.h=function(p){YE(this,p)};function YE(p,S){var D=new h_(S);if(Ws(p,D)){D=new d_(S);try{Ws(p,D)}finally{S.stopPropagation()}}}kp.prototype.o=function(){kp.K.o.call(this),_h(this.a,"keydown",this.g,!1,this),_h(this.a,"click",this.h,!1,this),delete this.a};function d_(p){bo.call(this,p.a),this.type="action"}Y(d_,bo);function h_(p){bo.call(this,p.a),this.type="beforeaction"}Y(h_,bo);function $h(p){si.call(this),this.a=p,p=Xn?"focusout":"blur",this.g=ji(this.a,Xn?"focusin":"focus",this,!Xn),this.h=ji(this.a,p,this,!Xn)}Y($h,si),$h.prototype.handleEvent=function(p){var S=new bo(p.a);S.type=p.type=="focusin"||p.type=="focus"?"focusin":"focusout",Ws(this,S)},$h.prototype.o=function(){$h.K.o.call(this),nd(this.g),nd(this.h),delete this.a};function S0(p,S){si.call(this),this.g=p||1,this.a=S||d,this.h=O(this.gc,this),this.j=B()}Y(S0,si),n=S0.prototype,n.Ka=!1,n.aa=null,n.gc=function(){if(this.Ka){var p=B()-this.j;0<p&&p<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-p):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),Ws(this,"tick"),this.Ka&&(Um(this),this.start()))}},n.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=B())};function Um(p){p.Ka=!1,p.aa&&(p.a.clearTimeout(p.aa),p.aa=null)}n.o=function(){S0.K.o.call(this),Um(this),delete this.a};function f_(p,S){if(C(p))S&&(p=O(p,S));else if(p&&typeof p.handleEvent=="function")p=O(p.handleEvent,p);else throw Error("Invalid listener argument");return d.setTimeout(p,0)}function Bh(p){$n.call(this),this.g=p,this.a={}}Y(Bh,$n);var KE=[];function Uh(p,S,D,N){T(D)||(D&&(KE[0]=D.toString()),D=KE);for(var V=0;V<D.length;V++){var H=ji(S,D[V],N||p.handleEvent,!1,p.g||p);if(!H)break;p.a[H.key]=H}}function XE(p){Jt(p.a,function(S,D){this.a.hasOwnProperty(D)&&nd(S)},p),p.a={}}Bh.prototype.o=function(){Bh.K.o.call(this),XE(this)},Bh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qs(p){si.call(this),this.a=null,this.g=p,p=Xn||cs||la&&!Vs("531")&&p.tagName=="TEXTAREA",this.h=new Bh(this),Uh(this.h,this.g,p?["keydown","paste","cut","drop","input"]:"input",this)}Y(Qs,si),Qs.prototype.handleEvent=function(p){if(p.type=="input")Xn&&Vs(10)&&p.keyCode==0&&p.j==0||(T0(this),Ws(this,mP(p)));else if(p.type!="keydown"||pP(p)){var S=p.type=="keydown"?this.g.value:null;Xn&&p.keyCode==229&&(S=null);var D=mP(p);T0(this),this.a=f_(function(){this.a=null,this.g.value!=S&&Ws(this,D)},this)}};function T0(p){p.a!=null&&(d.clearTimeout(p.a),p.a=null)}function mP(p){return p=new bo(p.a),p.type="input",p}Qs.prototype.o=function(){Qs.K.o.call(this),this.h.m(),T0(this),delete this.g};function Vm(p,S){si.call(this),p&&(this.Oa&&Ci(this),this.qa=p,this.Na=ji(this.qa,"keypress",this,S),this.Ya=ji(this.qa,"keydown",this.Jb,S,this),this.Oa=ji(this.qa,"keyup",this.Kb,S,this))}Y(Vm,si),n=Vm.prototype,n.qa=null,n.Na=null,n.Ya=null,n.Oa=null,n.R=-1,n.X=-1,n.Ua=!1;var su={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ZE={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},E0=!la||Vs("525"),zm=Tl&&wa;n=Vm.prototype,n.Jb=function(p){(la||cs)&&(this.R==17&&!p.ctrlKey||this.R==18&&!p.altKey||Tl&&this.R==91&&!p.metaKey)&&(this.X=this.R=-1),this.R==-1&&(p.ctrlKey&&p.keyCode!=17?this.R=17:p.altKey&&p.keyCode!=18?this.R=18:p.metaKey&&p.keyCode!=91&&(this.R=91)),E0&&!WE(p.keyCode,this.R,p.shiftKey,p.ctrlKey,p.altKey,p.metaKey)?this.handleEvent(p):(this.X=_0(p.keyCode),zm&&(this.Ua=p.altKey))},n.Kb=function(p){this.X=this.R=-1,this.Ua=p.altKey},n.handleEvent=function(p){var S=p.a,D=S.altKey;if(Xn&&p.type=="keypress")var N=this.X,V=N!=13&&N!=27?S.keyCode:0;else(la||cs)&&p.type=="keypress"?(N=this.X,V=0<=S.charCode&&63232>S.charCode&&Fh(N)?S.charCode:0):ec&&!la?(N=this.X,V=Fh(N)?S.keyCode:0):(p.type=="keypress"?(zm&&(D=this.Ua),S.keyCode==S.charCode?32>S.keyCode?(N=S.keyCode,V=0):(N=this.X,V=S.charCode):(N=S.keyCode||this.X,V=S.charCode||0)):(N=S.keyCode||this.X,V=S.charCode||0),Tl&&V==63&&N==224&&(N=191));var H=N=_0(N);N?63232<=N&&N in su?H=su[N]:N==25&&p.shiftKey&&(H=9):S.keyIdentifier&&S.keyIdentifier in ZE&&(H=ZE[S.keyIdentifier]),wa&&E0&&p.type=="keypress"&&!WE(H,this.R,p.shiftKey,p.ctrlKey,D,p.metaKey)||(p=H==this.R,this.R=H,S=new vP(H,V,p,S),S.altKey=D,Ws(this,S))},n.N=function(){return this.qa};function Ci(p){p.Na&&(nd(p.Na),nd(p.Ya),nd(p.Oa),p.Na=null,p.Ya=null,p.Oa=null),p.qa=null,p.R=-1,p.X=-1}n.o=function(){Vm.K.o.call(this),Ci(this)};function vP(p,S,D,N){bo.call(this,N),this.type="key",this.keyCode=p,this.j=S,this.repeat=D}Y(vP,bo);function Hm(p,S,D,N){this.top=p,this.right=S,this.bottom=D,this.left=N}Hm.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Hm.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Hm.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Hm.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function A0(p,S){var D=Gc(p);return D.defaultView&&D.defaultView.getComputedStyle&&(p=D.defaultView.getComputedStyle(p,null))&&(p[S]||p.getPropertyValue(S))||""}function Gm(p){try{var S=p.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return Xn&&p.ownerDocument.body&&(p=p.ownerDocument,S.left-=p.documentElement.clientLeft+p.body.clientLeft,S.top-=p.documentElement.clientTop+p.body.clientTop),S}function Vh(p,S){S=S||Wi(document);var D=S||Wi(document),N=QE(p),V=QE(D);if(!Xn||9<=Number(Jf)){ne=A0(D,"borderLeftWidth");var H=A0(D,"borderRightWidth");ue=A0(D,"borderTopWidth"),Pe=A0(D,"borderBottomWidth"),H=new Hm(parseFloat(ue),parseFloat(H),parseFloat(Pe),parseFloat(ne))}else{var ne=zh(D,"borderLeft");H=zh(D,"borderRight");var ue=zh(D,"borderTop"),Pe=zh(D,"borderBottom");H=new Hm(ue,H,Pe,ne)}D==Wi(document)?(ne=N.a-D.scrollLeft,N=N.g-D.scrollTop,!Xn||10<=Number(Jf)||(ne+=H.left,N+=H.top)):(ne=N.a-V.a-H.left,N=N.g-V.g-H.top),V=p.offsetWidth,H=p.offsetHeight,ue=la&&!V&&!H,h(V)&&!ue||!p.getBoundingClientRect?p=new Al(V,H):(p=Gm(p),p=new Al(p.right-p.left,p.bottom-p.top)),V=D.clientHeight-p.height,H=D.scrollLeft,ue=D.scrollTop,H+=Math.min(ne,Math.max(ne-(D.clientWidth-p.width),0)),ue+=Math.min(N,Math.max(N-V,0)),D=new hs(H,ue),S.scrollLeft=D.a,S.scrollTop=D.g}function QE(p){var S=Gc(p),D=new hs(0,0),N=S?Gc(S):document;return N=!Xn||9<=Number(Jf)||rc(N).a.compatMode=="CSS1Compat"?N.documentElement:N.body,p==N||(p=Gm(p),N=rc(S).a,S=Wi(N),N=N.parentWindow||N.defaultView,S=Xn&&Vs("10")&&N.pageYOffset!=S.scrollTop?new hs(S.scrollLeft,S.scrollTop):new hs(N.pageXOffset||S.scrollLeft,N.pageYOffset||S.scrollTop),D.a=p.left+S.a,D.g=p.top+S.g),D}var JE={thin:2,medium:4,thick:6};function zh(p,S){if((p.currentStyle?p.currentStyle[S+"Style"]:null)=="none")return 0;var D=p.currentStyle?p.currentStyle[S+"Width"]:null;if(D in JE)p=JE[D];else if(/^\d+px?$/.test(D))p=parseInt(D,10);else{S=p.style.left;var N=p.runtimeStyle.left;p.runtimeStyle.left=p.currentStyle.left,p.style.left=D,D=p.style.pixelLeft,p.style.left=S,p.runtimeStyle.left=N,p=+D}return p}function Ol(){}w(Ol),Ol.prototype.a=0;function Hh(p){si.call(this),this.s=p||rc(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}Y(Hh,si),n=Hh.prototype,n.Lb=Ol.Xa(),n.N=function(){return this.g};function er(p,S){return p.g?np(S,p.g||p.s.a):null}function qm(p){return p.L||(p.L=new Bh(p)),p.L}n.Za=function(p){if(this.Y&&this.Y!=p)throw Error("Method not supported");Hh.K.Za.call(this,p)},n.kb=function(){this.g=this.s.a.createElement("DIV")},n.render=function(p){if(this.na)throw Error("Component already rendered");this.g||this.kb(),p?p.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},n.v=function(){this.na=!0,k0(this,function(p){!p.na&&p.N()&&p.v()})},n.ya=function(){k0(this,function(p){p.na&&p.ya()}),this.L&&XE(this.L),this.na=!1},n.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),k0(this,function(p){p.m()}),this.g&&rr(this.g),this.Y=this.g=this.oa=this.Ea=null,Hh.K.o.call(this)};function k0(p,S){p.Ea&&z(p.Ea,S,void 0)}n.removeChild=function(p,S){if(p){var D=f(p)?p:p.cb||(p.cb=":"+(p.Lb.a++).toString(36));if(this.oa&&D?(p=this.oa,p=(p!==null&&D in p?p[D]:void 0)||null):p=null,D&&p){var N=this.oa;if(D in N&&delete N[D],Ce(this.Ea,p),S&&(p.ya(),p.g&&rr(p.g)),S=p,S==null)throw Error("Unable to set parent component");S.Y=null,Hh.K.Za.call(S,null)}}if(!p)throw Error("Child is not in parent component");return p};function Di(p,S){var D=Hy(p,"firebaseui-textfield");S?(vc(p,"firebaseui-input-invalid"),ui(p,"firebaseui-input"),D&&vc(D,"firebaseui-textfield-invalid")):(vc(p,"firebaseui-input"),ui(p,"firebaseui-input-invalid"),D&&ui(D,"firebaseui-textfield-invalid"))}function pd(p,S,D){S=new Qs(S),Li(p,j(qs,S)),Uh(qm(p),S,"input",D)}function Wm(p,S,D){S=new Vm(S),Li(p,j(qs,S)),Uh(qm(p),S,"key",function(N){N.keyCode==13&&(N.stopPropagation(),N.preventDefault(),D(N))})}function gd(p,S,D){S=new $h(S),Li(p,j(qs,S)),Uh(qm(p),S,"focusin",D)}function Qi(p,S,D){S=new $h(S),Li(p,j(qs,S)),Uh(qm(p),S,"focusout",D)}function wi(p,S,D){S=new kp(S),Li(p,j(qs,S)),Uh(qm(p),S,"action",function(N){N.stopPropagation(),N.preventDefault(),D(N)})}function vs(p){ui(p,"firebaseui-hidden")}function sr(p,S){S&&ed(p,S),vc(p,"firebaseui-hidden")}function Ym(p){return!Hi(p,"firebaseui-hidden")&&p.style.display!="none"}function Cp(p){p=p||{};var S=p.email,D=p.disabled,N='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return N=p.wc?N+"Enter new email address":N+"Email",N+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+ja(S??"")+'"'+(D?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',_t(N)}function Uo(p){p=p||{},p=p.label;var S='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return S=p?S+sn(p):S+"Next",_t(S+"</button>")}function di(){var p=""+Uo({label:yi("Sign In")});return _t(p)}function Vo(){var p=""+Uo({label:yi("Save")});return _t(p)}function Ta(){var p=""+Uo({label:yi("Continue")});return _t(p)}function eA(p){p=p||{},p=p.label;var S='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return S=p?S+sn(p):S+"Choose password",_t(S+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function tA(){var p={},S='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return S=p.current?S+"Current password":S+"Password",_t(S+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function yP(){return _t('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function zo(p){p=p||{},p=p.label;var S='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return S=p?S+sn(p):S+"Cancel",_t(S+"</button>")}function Fr(p){var S="";return p.F&&p.D&&(S+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),_t(S)}function _o(p){var S="";return p.F&&p.D&&(S+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),_t(S)}function nA(p){return p='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+sn(p.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',_t(p)}nA.a="firebaseui.auth.soy2.element.infoBar";function ys(p){var S=p.content;return p=p.Ab,_t('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(p?" "+ja(p):"")+'">'+sn(S)+"</dialog>")}function rA(p){var S=p.message;return _t(ys({content:ip('<div class="firebaseui-dialog-icon-wrapper"><div class="'+ja(p.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+sn(S)+"</div>")}))}rA.a="firebaseui.auth.soy2.element.progressDialog";function md(p){var S='<div class="firebaseui-list-box-actions">';p=p.items;for(var D=p.length,N=0;N<D;N++){var V=p[N];S+='<button type="button" data-listboxid="'+ja(V.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(V.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+ja(V.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+sn(V.label)+"</div></button>"}return S=""+ys({Ab:yi("firebaseui-list-box-dialog"),content:ip(S+"</div>")}),_t(S)}md.a="firebaseui.auth.soy2.element.listBoxDialog";function lu(p){return p=p||{},_t(p.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}lu.a="firebaseui.auth.soy2.element.busyIndicator";function Ho(p,S){return p=p||{},p=p.ga,ir(p.S?p.S:S.hb[p.providerId]?""+S.hb[p.providerId]:p.providerId&&p.providerId.indexOf("saml.")==0||p.providerId&&p.providerId.indexOf("oidc.")==0?p.providerId.substring(5):""+p.providerId)}function C0(p){iA(p,"upgradeElement")}function D0(p){iA(p,"downgradeElements")}var cu=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function iA(p,S){p&&window.componentHandler&&window.componentHandler[S]&&cu.forEach(function(D){Hi(p,D)&&window.componentHandler[S](p),z(ic(D,p),function(N){window.componentHandler[S](N)})})}function Dp(p,S,D){if(Gh.call(this),document.body.appendChild(p),p.showModal||window.dialogPolyfill.registerDialog(p),p.showModal(),C0(p),S&&wi(this,p,function(H){var ne=p.getBoundingClientRect();(H.clientX<ne.left||ne.left+ne.width<H.clientX||H.clientY<ne.top||ne.top+ne.height<H.clientY)&&Gh.call(this)}),!D){var N=this.N().parentElement||this.N().parentNode;if(N){var V=this;this.da=function(){if(p.open){var H=p.getBoundingClientRect().height,ne=N.getBoundingClientRect().height,ue=N.getBoundingClientRect().top-document.body.getBoundingClientRect().top,Pe=N.getBoundingClientRect().left-document.body.getBoundingClientRect().left,nt=p.getBoundingClientRect().width,jt=N.getBoundingClientRect().width;p.style.top=(ue+(ne-H)/2).toString()+"px",H=Pe+(jt-nt)/2,p.style.left=H.toString()+"px",p.style.right=(document.body.getBoundingClientRect().width-H-nt).toString()+"px"}else window.removeEventListener("resize",V.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Gh(){var p=Ip.call(this);p&&(D0(p),p.open&&p.close(),rr(p),this.da&&window.removeEventListener("resize",this.da))}function Ip(){return np("firebaseui-id-dialog")}function Mp(){rr(aA.call(this))}function aA(){return er(this,"firebaseui-id-info-bar")}function oA(){return er(this,"firebaseui-id-dismiss-info-bar")}var I0={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function p_(p,S,D){Xc.call(this,p,S);for(var N in D)this[N]=D[N]}Y(p_,Xc);function He(p,S,D,N,V){Hh.call(this,D),this.fb=p,this.eb=S,this.Fa=!1,this.Ga=N||null,this.A=this.ca=null,this.Z=hn(I0),Te(this.Z,V||{})}Y(He,Hh),n=He.prototype,n.kb=function(){var p=oc(this.fb,this.eb,this.Z,this.s);C0(p),this.g=p},n.v=function(){if(He.K.v.call(this),dE(Ii(this),new p_("pageEnter",Ii(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var p=this.Z.F;wi(this,this.bb(),function(){p()})}if(this.ab()&&this.Z.D){var S=this.Z.D;wi(this,this.ab(),function(){S()})}},n.ya=function(){dE(Ii(this),new p_("pageExit",Ii(this),{pageId:this.Ga})),He.K.ya.call(this)},n.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,D0(this.N()),He.K.o.call(this)};function bP(p){p.Fa=!0;var S=Hi(p.N(),"firebaseui-use-spinner");p.ca=window.setTimeout(function(){p.N()&&p.A===null&&(p.A=oc(lu,{tb:S},null,p.s),p.N().appendChild(p.A),C0(p.A))},500)}n.I=function(p,S,D,N){function V(){if(H.T)return null;H.Fa=!1,window.clearTimeout(H.ca),H.ca=null,H.A&&(D0(H.A),rr(H.A),H.A=null)}var H=this;return H.Fa?null:(bP(H),p.apply(null,S).then(D,N).then(V,V))};function Ii(p){return p.N().parentElement||p.N().parentNode}function M0(p,S,D){Wm(p,S,function(){D.focus()})}function dr(p,S,D){Wm(p,S,function(){D()})}L(He.prototype,{a:function(p){Mp.call(this);var S=oc(nA,{message:p},null,this.s);this.N().appendChild(S),wi(this,oA.call(this),function(){rr(S)})},yc:Mp,Ac:aA,zc:oA,$:function(p,S){p=oc(rA,{Ma:p,message:S},null,this.s),Dp.call(this,p)},h:Gh,Cb:Ip,Cc:function(){return er(this,"firebaseui-tos")},bb:function(){return er(this,"firebaseui-tos-link")},ab:function(){return er(this,"firebaseui-pp-link")},Dc:function(){return er(this,"firebaseui-tos-list")}});function Qr(p,S,D){p=p||{},S=p.Va;var N=p.ia;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Cp(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(S?zo(null):"")+Uo(null)+'</div></div><div class="firebaseui-card-footer">'+(N?_o(D):Fr(D))+"</div></form></div>",_t(p)}Qr.a="firebaseui.auth.soy2.page.signIn";function Qn(p,S,D){return p=p||{},S=p.ia,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Cp(p)+tA()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yP()+'</div><div class="firebaseui-form-actions">'+di()+'</div></div><div class="firebaseui-card-footer">'+(S?_o(D):Fr(D))+"</div></form></div>",_t(p)}Qn.a="firebaseui.auth.soy2.page.passwordSignIn";function lr(p,S,D){p=p||{};var N=p.Tb;S=p.Ta;var V=p.ia,H='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Cp(p);return N?(p=p||{},p=p.name,p='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+ja(p??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',p=_t(p)):p="",D=H+p+eA(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(S?zo(null):"")+Vo()+'</div></div><div class="firebaseui-card-footer">'+(V?_o(D):Fr(D))+"</div></form></div>",_t(D)}lr.a="firebaseui.auth.soy2.page.passwordSignUp";function Dr(p,S,D){return p=p||{},S=p.Ta,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Cp(p)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(S?zo(null):"")+Uo({label:yi("Send")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(p)}Dr.a="firebaseui.auth.soy2.page.passwordRecovery";function bs(p,S,D){S=p.G;var N="";return p="Follow the instructions sent to <strong>"+(sn(p.email)+"</strong> to recover your password"),N+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">',S&&(N+='<div class="firebaseui-form-actions">'+Uo({label:yi("Done")})+"</div>"),N+='</div><div class="firebaseui-card-footer">'+Fr(D)+"</div></div>",_t(N)}bs.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function vd(p,S,D){return _t('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+lu(null)+"</div></div>")}vd.a="firebaseui.auth.soy2.page.callback";function Pp(p,S,D){return _t('<div class="firebaseui-container firebaseui-id-page-spinner">'+lu({tb:!0})+"</div>")}Pp.a="firebaseui.auth.soy2.page.spinner";function g_(){return _t('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}g_.a="firebaseui.auth.soy2.page.blank";function uu(p,S,D){S="",p="A sign-in email with additional instructions was sent to <strong>"+(sn(p.email)+"</strong>. Check your email to complete sign-in.");var N=_t('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+N+'</div><div class="firebaseui-form-actions">'+zo({label:yi("Back")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}uu.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function $i(p,S,D){return p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+_t('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+zo({label:yi("Back")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(p)}$i.a="firebaseui.auth.soy2.page.emailNotReceived";function yd(p,S,D){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Cp(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo(null)+Uo(null)+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(p)}yd.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function qh(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo({label:yi("Dismiss")})+"</div></div></div>";return _t(p)}qh.a="firebaseui.auth.soy2.page.differentDeviceError";function m_(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo({label:yi("Dismiss")})+"</div></div></div>";return _t(p)}m_.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function Js(p,S,D){return S="",p="You’ve already used <strong>"+(sn(p.email)+"</strong> to sign in. Enter your password for that account."),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+p+"</p>"+tA()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+yP()+'</div><div class="firebaseui-form-actions">'+di()+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}Js.a="firebaseui.auth.soy2.page.passwordLinking";function Op(p,S,D){var N=p.email;return S="",p=""+Ho(p,D),p=yi(p),N="You’ve already used <strong>"+(sn(N)+("</strong>. You can connect your <strong>"+(sn(p)+("</strong> account with <strong>"+(sn(N)+"</strong> by signing in with email link below."))))),p="For this flow to successfully connect your "+(sn(p)+" account with this email, you have to open the link on the same device or browser."),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+N+'<p class="firebaseui-text firebaseui-text-justify">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+di()+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}Op.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function Km(p,S,D){S="";var N=""+Ho(p,D);return N=yi(N),p="You originally intended to connect <strong>"+(sn(N)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),N="If you still want to connect your <strong>"+(sn(N)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+p+'</p><p class="firebaseui-text firebaseui-text-justify">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Ta()+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}Km.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function Go(p,S,D){var N=p.email;return S="",p=""+Ho(p,D),p=yi(p),N="You’ve already used <strong>"+(sn(N)+("</strong>. Sign in with "+(sn(p)+" to continue."))),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Uo({label:yi("Sign in with "+p)})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}Go.a="firebaseui.auth.soy2.page.federatedLinking";function v_(p,S,D){p=p||{};var N=p.kc;S=p.yb,p=p.Eb;var V='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return N?(N="<strong>"+(sn(N)+"</strong> is not authorized to view the requested page."),V+=N):V+="User is not authorized to view the requested page.",V+="</p>",S&&(S="Please contact <strong>"+(sn(S)+"</strong> for authorization."),V+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+S+"</p>"),V+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',p&&(V+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),V+='</div><div class="firebaseui-form-actions">'+zo({label:yi("Back")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(V)}v_.a="firebaseui.auth.soy2.page.unauthorizedUser";function y_(p,S,D){return S="",p="To continue sign in with <strong>"+(sn(p.email)+"</strong> on this device, you have to recover the password."),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo(null)+Uo({label:yi("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}y_.a="firebaseui.auth.soy2.page.unsupportedProvider";function P0(p){var S="",D='<p class="firebaseui-text">for <strong>'+(sn(p.email)+"</strong></p>");return S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+D+eA(rp(p))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Vo()+"</div></div></form></div>",_t(S)}P0.a="firebaseui.auth.soy2.page.passwordReset";function O0(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}O0.a="firebaseui.auth.soy2.page.passwordResetSuccess";function bd(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}bd.a="firebaseui.auth.soy2.page.passwordResetFailure";function Ua(p){var S=p.G,D="";return p="Your sign-in email address has been changed back to <strong>"+(sn(p.email)+"</strong>."),D+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(S?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></form></div>",_t(D)}Ua.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function wd(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}wd.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function Rp(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}Rp.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function Np(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}Np.a="firebaseui.auth.soy2.page.emailVerificationFailure";function b_(p){var S=p.G,D="";return p="You can now sign in with your new email <strong>"+(sn(p.email)+"</strong>."),D+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">'+(S?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(D)}b_.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function w_(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}w_.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function sA(p){var S=p.factorId,D=p.phoneNumber;p=p.G;var N='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(S){case"phone":S="The <strong>"+(sn(S)+(" "+(sn(D)+"</strong> was removed as a second authentication step."))),N+=S;break;default:N+="The device or app was removed as a second authentication step."}return N+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(p?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></form></div>",_t(N)}sA.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function Xm(p){return p=p||{},p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(p.G?'<div class="firebaseui-form-actions">'+Ta()+"</div>":"")+"</div></div>",_t(p)}Xm.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function x_(p){var S=p.zb;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+sn(p.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',S&&(p+=Uo({label:yi("Retry")})),_t(p+"</div></div></div>")}x_.a="firebaseui.auth.soy2.page.recoverableError";function ws(p){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+sn(p.errorMessage)+"</p></div></div>",_t(p)}ws.a="firebaseui.auth.soy2.page.unrecoverableError";function lA(p,S,D){var N=p.Qb;return S="",p="Continue with "+(sn(p.jc)+"?"),N="You originally wanted to sign in with "+sn(N),S+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+p+'</h2><p class="firebaseui-text">'+N+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo(null)+Uo({label:yi("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form></div>",_t(S)}lA.a="firebaseui.auth.soy2.page.emailMismatch";function xs(p,S,D){var N='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';p=p.Sb,S=p.length;for(var V=0;V<S;V++){var H={ga:p[V]},ne=D;H=H||{};var ue=H.ga,Pe=H;Pe=Pe||{};var nt="";switch(Pe.ga.providerId){case"google.com":nt+="firebaseui-idp-google";break;case"github.com":nt+="firebaseui-idp-github";break;case"facebook.com":nt+="firebaseui-idp-facebook";break;case"twitter.com":nt+="firebaseui-idp-twitter";break;case"phone":nt+="firebaseui-idp-phone";break;case"anonymous":nt+="firebaseui-idp-anonymous";break;case"password":nt+="firebaseui-idp-password";break;default:nt+="firebaseui-idp-generic"}Pe='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+ja(ir(nt))+' firebaseui-id-idp-button" data-provider-id="'+ja(ue.providerId)+'" style="background-color:',nt=(nt=H)||{},nt=nt.ga,Pe=Pe+ja(Yc(ir(nt.ta?nt.ta:ne.wa[nt.providerId]?""+ne.wa[nt.providerId]:nt.providerId.indexOf("saml.")==0?""+ne.wa.saml:nt.providerId.indexOf("oidc.")==0?""+ne.wa.oidc:""+ne.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var jt=H;nt=ne,jt=jt||{},jt=jt.ga,nt=Wy(jt.za?sc(jt.za):nt.xa[jt.providerId]?sc(nt.xa[jt.providerId]):jt.providerId.indexOf("saml.")==0?sc(nt.xa.saml):jt.providerId.indexOf("oidc.")==0?sc(nt.xa.oidc):sc(nt.xa.password)),Pe=Pe+ja(sc(nt))+'"></span>',ue.providerId=="password"?(Pe+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Pe+=sn(ue.V):ue.S?(H="Sign in with "+sn(Ho(H,ne)),Pe+=H):Pe+="Sign in with email",Pe+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Pe=ue.S?Pe+sn(ue.S):Pe+"Email",Pe+="</span>"):ue.providerId=="phone"?(Pe+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Pe+=sn(ue.V):ue.S?(H="Sign in with "+sn(Ho(H,ne)),Pe+=H):Pe+="Sign in with phone",Pe+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Pe=ue.S?Pe+sn(ue.S):Pe+"Phone",Pe+="</span>"):ue.providerId=="anonymous"?(Pe+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Pe+=sn(ue.V):ue.S?(H="Sign in with "+sn(Ho(H,ne)),Pe+=H):Pe+="Continue as guest",Pe+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Pe=ue.S?Pe+sn(ue.S):Pe+"Guest",Pe+="</span>"):(Pe+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Pe+=sn(ue.V):(nt="Sign in with "+sn(Ho(H,ne)),Pe+=nt),Pe+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(ue.S?sn(ue.S):sn(Ho(H,ne)))+"</span>"),ue=_t(Pe+"</button>"),N+='<li class="firebaseui-list-item">'+ue+"</li>"}return N+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+_o(D)+"</div></div>",_t(N)}xs.a="firebaseui.auth.soy2.page.providerSignIn";function cA(p,S,D){p=p||{};var N=p.Gb,V=p.Va;S=p.ia,p=p||{},p=p.Aa,p='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+ja(p??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+_t(p);var H;return N?H=_t('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):H="",H=p+H+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(V?zo(null):"")+Uo({label:yi("Verify")})+'</div></div><div class="firebaseui-card-footer">',S?(S='<p class="firebaseui-tos firebaseui-phone-tos">',S=D.F&&D.D?S+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':S+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",D=_t(S+"</p>")):D=_t('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+Fr(D),_t(H+D+"</div></form></div>")}cA.a="firebaseui.auth.soy2.page.phoneSignInStart";function uA(p,S,D){p=p||{},S=p.phoneNumber;var N="";return p='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(sn(S)+"</a>"),sn(S),S=N,N=_t('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),D='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+"</p>"+N+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+zo(null)+Uo({label:yi("Continue")})+'</div></div><div class="firebaseui-card-footer">'+Fr(D)+"</div></form>",p=_t('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),_t(S+(D+p+"</div>"))}uA.a="firebaseui.auth.soy2.page.phoneSignInFinish";function wP(){return _t('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}wP.a="firebaseui.auth.soy2.page.signOut";function xd(p,S,D){var N='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';p=p.ec,S=p.length;for(var V=0;V<S;V++){var H=p[V],ne="",ue=sn(H.displayName),Pe=H.tenantId?H.tenantId:"top-level-project";Pe=yi(Pe),ne+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+ja(Pe)+' firebaseui-id-tenant-selection-button"'+(H.tenantId?'data-tenant-id="'+ja(H.tenantId)+'"':"")+'style="background-color:'+ja(Yc(H.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+ja(sc(H.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',H.V?ne+=sn(H.V):(H="Sign in to "+sn(H.displayName),ne+=H),ne=_t(ne+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+ue+"</span></button>")),N+='<li class="firebaseui-list-item">'+ne+"</li>"}return N+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+_o(D)+"</div></div>",_t(N)}xd.a="firebaseui.auth.soy2.page.selectTenant";function R0(p,S,D){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Cp(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Uo(null)+'</div></div><div class="firebaseui-card-footer">'+_o(D)+"</div></form></div>",_t(p)}R0.a="firebaseui.auth.soy2.page.providerMatchByEmail";function Ji(){return er(this,"firebaseui-id-submit")}function xi(){return er(this,"firebaseui-id-secondary-link")}function Ea(p,S){wi(this,Ji.call(this),function(N){p(N)});var D=xi.call(this);D&&S&&wi(this,D,function(N){S(N)})}function N0(){return er(this,"firebaseui-id-password")}function L0(){return er(this,"firebaseui-id-password-error")}function __(){var p=N0.call(this),S=L0.call(this);pd(this,p,function(){Ym(S)&&(Di(p,!0),vs(S))})}function S_(){var p=N0.call(this),S=L0.call(this);return Sa(p)?(Di(p,!0),vs(S),S=!0):(Di(p,!1),sr(S,ir("Enter your password").toString()),S=!1),S?Sa(p):null}function Zm(p,S,D,N,V,H){He.call(this,Js,{email:p},H,"passwordLinking",{F:N,D:V}),this.w=S,this.H=D}s(Zm,He),Zm.prototype.v=function(){this.P(),this.M(this.w,this.H),dr(this,this.i(),this.w),this.i().focus(),He.prototype.v.call(this)},Zm.prototype.o=function(){this.w=null,He.prototype.o.call(this)},Zm.prototype.j=function(){return Sa(er(this,"firebaseui-id-email"))},L(Zm.prototype,{i:N0,B:L0,P:__,u:S_,ea:Ji,ba:xi,M:Ea});var gF=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function _d(){return er(this,"firebaseui-id-email")}function Sd(){return er(this,"firebaseui-id-email-error")}function Lp(p){var S=_d.call(this),D=Sd.call(this);pd(this,S,function(){Ym(D)&&(Di(S,!0),vs(D))}),p&&Wm(this,S,function(){p()})}function yc(){return Ge(Sa(_d.call(this))||"")}function Td(){var p=_d.call(this),S=Sd.call(this),D=Sa(p)||"";return D?gF.test(D)?(Di(p,!0),vs(S),S=!0):(Di(p,!1),sr(S,ir("That email address isn't correct").toString()),S=!1):(Di(p,!1),sr(S,ir("Enter your email address to continue").toString()),S=!1),S?Ge(Sa(p)):null}function Qm(p,S,D,N,V,H,ne){He.call(this,Qn,{email:D,ia:!!H},ne,"passwordSignIn",{F:N,D:V}),this.w=p,this.H=S}s(Qm,He),Qm.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),M0(this,this.l(),this.i()),dr(this,this.i(),this.w),Sa(this.l())?this.i().focus():this.l().focus(),He.prototype.v.call(this)},Qm.prototype.o=function(){this.H=this.w=null,He.prototype.o.call(this)},L(Qm.prototype,{l:_d,U:Sd,P:Lp,M:yc,j:Td,i:N0,B:L0,ea:__,u:S_,ua:Ji,pa:xi,ba:Ea});function Tr(p,S,D,N,V,H){He.call(this,p,S,N,V||"notice",H),this.i=D||null}Y(Tr,He),Tr.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Tr.K.v.call(this)},Tr.prototype.o=function(){this.i=null,Tr.K.o.call(this)},L(Tr.prototype,{l:Ji,w:xi,u:Ea});function j0(p,S,D,N,V){Tr.call(this,bs,{email:p,G:!!S},S,V,"passwordRecoveryEmailSent",{F:D,D:N})}Y(j0,Tr);function dA(p,S){Tr.call(this,Rp,{G:!!p},p,S,"emailVerificationSuccess")}Y(dA,Tr);function hA(p,S){Tr.call(this,Np,{G:!!p},p,S,"emailVerificationFailure")}Y(hA,Tr);function fA(p,S,D){Tr.call(this,b_,{email:p,G:!!S},S,D,"verifyAndChangeEmailSuccess")}Y(fA,Tr);function F0(p,S){Tr.call(this,w_,{G:!!p},p,S,"verifyAndChangeEmailFailure")}Y(F0,Tr);function pA(p,S){Tr.call(this,Xm,{G:!!p},p,S,"revertSecondFactorAdditionFailure")}Y(pA,Tr);function gA(p){Tr.call(this,wP,void 0,void 0,p,"signOut")}Y(gA,Tr);function Hr(p,S){Tr.call(this,O0,{G:!!p},p,S,"passwordResetSuccess")}Y(Hr,Tr);function T_(p,S){Tr.call(this,bd,{G:!!p},p,S,"passwordResetFailure")}Y(T_,Tr);function xP(p,S){Tr.call(this,wd,{G:!!p},p,S,"emailChangeRevokeFailure")}Y(xP,Tr);function mA(p,S,D){Tr.call(this,x_,{errorMessage:p,zb:!!S},S,D,"recoverableError")}Y(mA,Tr);function _P(p,S){Tr.call(this,ws,{errorMessage:p},void 0,S,"unrecoverableError")}Y(_P,Tr);function $0(p){if(p.code==="auth/invalid-credential"&&p.message&&p.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(p.message&&p.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var S=JSON.parse(p.message.substring(p.message.indexOf("{"),p.message.lastIndexOf("}")+1));return{code:p.code,message:S&&S.error&&S.error.message||p.message}}return p}function Ed(p,S,D,N){function V(ne){if(!ne.name||ne.name!="cancel"){e:{var ue=ne.message;try{var Pe=((JSON.parse(ue).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(Pe&&Pe.length){var nt=!0;break e}}catch{}nt=!1}if(nt)ne=Ii(S),S.m(),Gr(p,ne,void 0,ir("Your sign-in session has expired. Please try again.").toString());else{if(nt=ne&&ne.message||"",ne.code){if(ne.code=="auth/email-already-in-use"||ne.code=="auth/credential-already-in-use")return;nt=Er(ne)}S.a(nt)}}}if(OP(p),N)return B0(p,D),bi();if(!D.credential)throw Error("No credential found!");if(!Un(p).currentUser&&!D.user)throw Error("User not logged in.");try{var H=PA(p,D)}catch(ne){return wo(ne.code||ne.message,ne),S.a(ne.code||ne.message),bi()}return D=H.then(function(ne){B0(p,ne)},V).then(void 0,V),Pn(p,H),bi(D)}function B0(p,S){if(!S.user)throw Error("No user found");var D=ca(Ye(p));if(mc(Ye(p))&&D&&Bo("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),D){D=ca(Ye(p));var N=IE(rn(p))||void 0;ms(Mm,rn(p));var V=!1;Ux()?((!D||D(S,N))&&(V=!0,Ja(window.opener.location,Ad(p,N))),D||window.close()):(!D||D(S,N))&&(V=!0,Ja(window.location,Ad(p,N))),V||p.reset()}else{D=S.user,S=S.credential,N=mc(Ye(p)),V=IE(rn(p))||void 0,ms(Mm,rn(p));var H=!1;Ux()?((!N||N(D,S,V))&&(H=!0,Ja(window.opener.location,Ad(p,V))),N||window.close()):(!N||N(D,S,V))&&(H=!0,Ja(window.location,Ad(p,V))),H||p.reset()}}function Ad(p,S){if(p=S||Ye(p).a.get("signInSuccessUrl"),!p)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return p}function Er(p){var S={code:p.code};S=S||{};var D="";switch(S.code){case"auth/email-already-in-use":D+="The email address is already used by another account";break;case"auth/requires-recent-login":D+=ut();break;case"auth/too-many-requests":D+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":D+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":D+="That email address doesn't match an existing account";break;case"auth/user-token-expired":D+=ut();break;case"auth/weak-password":D+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":D+="The email and password you entered don't match";break;case"auth/network-request-failed":D+="A network error has occurred";break;case"auth/invalid-phone-number":D+=q();break;case"auth/invalid-verification-code":D+=ir("Wrong code. Try again.");break;case"auth/code-expired":D+="This code is no longer valid";break;case"auth/expired-action-code":D+="This code has expired.";break;case"auth/invalid-action-code":D+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(S=ir(D).toString())return S;try{return JSON.parse(p.message),wo("Internal error: "+p.message,void 0),se().toString()}catch{return p.message}}function E_(p,S,D){var N=Sp[S]&&Kt.auth[Sp[S]]?new Kt.auth[Sp[S]]:S.indexOf("saml.")==0?new Kt.auth.SAMLAuthProvider(S):new Kt.auth.OAuthProvider(S);if(!N)throw Error("Invalid Firebase Auth provider!");var V=Tp(Ye(p),S);if(N.addScope)for(var H=0;H<V.length;H++)N.addScope(V[H]);return V=Fm(Ye(p),S)||{},D&&(S==Kt.auth.GoogleAuthProvider.PROVIDER_ID?p="login_hint":S==Kt.auth.GithubAuthProvider.PROVIDER_ID?p="login":p=(p=Lm(Ye(p),S))&&p.Ob,p&&(V[p]=D)),N.setCustomParameters&&N.setCustomParameters(V),N}function jp(p,S,D,N){function V(){oP(new km(p.h.tenantId||null),rn(p)),Pn(p,S.I(O(p.dc,p),[Pe],function(){if((window.location&&window.location.protocol)==="file:")return Pn(p,Gp(p).then(function(nt){S.m(),ms(Oh,rn(p)),Pt("callback",p,ue,bi(nt))},H))},ne))}function H(nt){if(ms(Oh,rn(p)),!nt.name||nt.name!="cancel")switch(nt=$0(nt),nt.code){case"auth/popup-blocked":V();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":S.a(Er(nt));break;case"auth/admin-restricted-operation":S.m(),Nh(Ye(p))?Pt("handleUnauthorizedUser",p,ue,null,D):Pt("callback",p,ue,Dl(nt));break;default:S.m(),Pt("callback",p,ue,Dl(nt))}}function ne(nt){ms(Oh,rn(p)),nt.name&&nt.name=="cancel"||(wo("signInWithRedirect: "+nt.code,void 0),nt=Er(nt),S.Ga=="blank"&&l_(Ye(p))?(S.m(),Pt("providerSignIn",p,ue,nt)):S.a(nt))}var ue=Ii(S),Pe=E_(p,D,N);fd(Ye(p))==ou?V():Pn(p,LP(p,Pe).then(function(nt){S.m(),Pt("callback",p,ue,bi(nt))},H))}function Fp(p,S){Pn(p,S.I(O(p.$b,p),[],function(D){return S.m(),Ed(p,S,D,!0)},function(D){D.name&&D.name=="cancel"||(wo("ContinueAsGuest: "+D.code,void 0),D=Er(D),S.a(D))}))}function du(p,S,D){function N(H){var ne=!1;return H=S.I(O(p.ac,p),[H],function(ue){var Pe=Ii(S);S.m(),Pt("callback",p,Pe,bi(ue)),ne=!0},function(ue){if((!ue.name||ue.name!="cancel")&&(!ue||ue.code!="auth/credential-already-in-use"))if(ue&&ue.code=="auth/email-already-in-use"&&ue.email&&ue.credential){var Pe=Ii(S);S.m(),Pt("callback",p,Pe,Dl(ue))}else ue&&ue.code=="auth/admin-restricted-operation"&&Nh(Ye(p))?(ue=Ii(S),S.m(),Pt("handleUnauthorizedUser",p,ue,null,Kt.auth.GoogleAuthProvider.PROVIDER_ID)):(ue=Er(ue),S.a(ue))}),Pn(p,H),H.then(function(){return ne},function(){return!1})}if(D&&D.credential&&D.clientId===a_(Ye(p))){if(Tp(Ye(p),Kt.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var V=JSON.parse(atob(D.credential.split(".")[1])).email}catch{}return jp(p,S,Kt.auth.GoogleAuthProvider.PROVIDER_ID,V),bi(!0)}return N(Kt.auth.GoogleAuthProvider.credential(D.credential))}return D&&S.a(ir("The selected credential for the authentication provider is not supported!").toString()),bi(!1)}function U0(p,S){var D=S.j(),N=S.u();if(D)if(N){var V=Kt.auth.EmailAuthProvider.credential(D,N);Pn(p,S.I(O(p.bc,p),[D,N],function(H){return Ed(p,S,{user:H.user,credential:V,operationType:H.operationType,additionalUserInfo:H.additionalUserInfo})},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/email-already-in-use":break;case"auth/email-exists":Di(S.l(),!1),sr(S.U(),Er(H));break;case"auth/too-many-requests":case"auth/wrong-password":Di(S.i(),!1),sr(S.B(),Er(H));break;default:wo("verifyPassword: "+H.message,void 0),S.a(Er(H))}}))}else S.i().focus();else S.l().focus()}function A_(p){return p=Nm(Ye(p)),p.length==1&&p[0]==Kt.auth.EmailAuthProvider.PROVIDER_ID}function vA(p){return p=Nm(Ye(p)),p.length==1&&p[0]==Kt.auth.PhoneAuthProvider.PROVIDER_ID}function Gr(p,S,D,N){A_(p)?N?Pt("signIn",p,S,D,N):V0(p,S,D):p&&vA(p)&&!N?Pt("phoneSignInStart",p,S):p&&l_(Ye(p))&&!N?Pt("federatedRedirect",p,S,D):Pt("providerSignIn",p,S,N,D)}function yA(p,S,D,N){var V=Ii(S);Pn(p,S.I(O(Un(p).fetchSignInMethodsForEmail,Un(p)),[D],function(H){S.m(),bA(p,V,H,D,N)},function(H){H=Er(H),S.a(H)}))}function bA(p,S,D,N,V,H){D.length||no(Ye(p))&&!no(Ye(p))?fe(D,Kt.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Pt("passwordSignIn",p,S,N,H):D.length==1&&D[0]===Kt.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?no(Ye(p))?Pt("sendEmailLinkForSignIn",p,S,N,function(){Pt("signIn",p,S)}):Pt("unsupportedProvider",p,S,N):(D=i_(D,Nm(Ye(p))))?(ME(new d0(N),rn(p)),Pt("federatedSignIn",p,S,N,D,V)):Pt("unsupportedProvider",p,S,N):m0(Ye(p))?Pt("handleUnauthorizedUser",p,S,N,Kt.auth.EmailAuthProvider.PROVIDER_ID):no(Ye(p))?Pt("sendEmailLinkForSignIn",p,S,N,function(){Pt("signIn",p,S)}):Pt("passwordSignUp",p,S,N,void 0,void 0,H)}function wA(p,S,D,N,V,H){var ne=Ii(S);Pn(p,S.I(O(p.Ib,p),[D,H],function(){S.m(),Pt("emailLinkSignInSent",p,ne,D,N,H)},V))}function V0(p,S,D){D?Pt("prefilledEmailSignIn",p,S,D):Pt("signIn",p,S)}function Jm(){return Xe(Cr(),"oobCode")}function k_(){var p=Xe(Cr(),"continueUrl");return p?function(){Ja(window.location,p)}:null}function z0(p,S){He.call(this,m_,void 0,S,"anonymousUserMismatch"),this.i=p}s(z0,He),z0.prototype.v=function(){var p=this;wi(this,this.l(),function(){p.i()}),this.l().focus(),He.prototype.v.call(this)},z0.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(z0.prototype,{l:xi}),wr.anonymousUserMismatch=function(p,S){var D=new z0(function(){D.m(),Gr(p,S)});D.render(S),An(p,D)};function ev(p){He.call(this,vd,void 0,p,"callback")}s(ev,He),ev.prototype.I=function(p,S,D,N){return p.apply(null,S).then(D,N)};function C_(p,S,D){if(D.user){var N={user:D.user,credential:D.credential,operationType:D.operationType,additionalUserInfo:D.additionalUserInfo},V=gc(rn(p)),H=V&&V.g;if(H&&!TP(D.user,H))mF(p,S,N);else{var ne=V&&V.a;ne?Pn(p,D.user.linkWithCredential(ne).then(function(ue){N={user:ue.user,credential:ne,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo},SP(p,S,N)},function(ue){D_(p,S,ue)})):SP(p,S,N)}}else D=Ii(S),S.m(),Pl(rn(p)),Gr(p,D)}function SP(p,S,D){Pl(rn(p)),Ed(p,S,D)}function D_(p,S,D){var N=Ii(S);Pl(rn(p)),D=Er(D),S.m(),Gr(p,N,void 0,D)}function tv(p,S,D,N){var V=Ii(S);Pn(p,Un(p).fetchSignInMethodsForEmail(D).then(function(H){S.m(),H.length?fe(H,Kt.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Pt("passwordLinking",p,V,D):H.length==1&&H[0]===Kt.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Pt("emailLinkSignInLinking",p,V,D):(H=i_(H,Nm(Ye(p))))?Pt("federatedLinking",p,V,D,H,N):(Pl(rn(p)),Pt("unsupportedProvider",p,V,D)):(Pl(rn(p)),Pt("passwordRecovery",p,V,D,!1,Se().toString()))},function(H){D_(p,S,H)}))}function mF(p,S,D){var N=Ii(S);Pn(p,kd(p).then(function(){S.m(),Pt("emailMismatch",p,N,D)},function(V){V.name&&V.name=="cancel"||(V=Er(V.code),S.a(V))}))}function TP(p,S){if(S==p.email)return!0;if(p.providerData){for(var D=0;D<p.providerData.length;D++)if(S==p.providerData[D].email)return!0}return!1}wr.callback=function(p,S,D){var N=new ev;N.render(S),An(p,N),D=D||Gp(p),Pn(p,D.then(function(V){C_(p,N,V)},function(V){if((V=$0(V))&&(V.code=="auth/account-exists-with-different-credential"||V.code=="auth/email-already-in-use")&&V.email&&V.credential)ME(new d0(V.email,V.credential),rn(p)),tv(p,N,V.email);else if(V&&V.code=="auth/user-cancelled"){var H=gc(rn(p)),ne=Er(V);H&&H.a?tv(p,N,H.g,ne):H?yA(p,N,H.g,ne):D_(p,N,V)}else V&&V.code=="auth/credential-already-in-use"||(V&&V.code=="auth/operation-not-supported-in-this-environment"&&A_(p)?C_(p,N,{user:null,credential:null}):V&&V.code=="auth/admin-restricted-operation"&&Nh(Ye(p))?(N.m(),Pl(rn(p)),Pt("handleUnauthorizedUser",p,S,null,null)):D_(p,N,V))}))};function Ln(p,S){He.call(this,qh,void 0,S,"differentDeviceError"),this.i=p}s(Ln,He),Ln.prototype.v=function(){var p=this;wi(this,this.l(),function(){p.i()}),this.l().focus(),He.prototype.v.call(this)},Ln.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(Ln.prototype,{l:xi}),wr.differentDeviceError=function(p,S){var D=new Ln(function(){D.m(),Gr(p,S)});D.render(S),An(p,D)};function $p(p,S,D,N){He.call(this,Ua,{email:p,G:!!D},N,"emailChangeRevoke"),this.l=S,this.i=D||null}s($p,He),$p.prototype.v=function(){var p=this;wi(this,er(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),He.prototype.v.call(this)},$p.prototype.o=function(){this.l=this.i=null,He.prototype.o.call(this)},L($p.prototype,{u:Ji,B:xi,w:Ea});function Wh(){return er(this,"firebaseui-id-new-password")}function nv(){return er(this,"firebaseui-id-password-toggle")}function EP(){this.Ra=!this.Ra;var p=nv.call(this),S=Wh.call(this);this.Ra?(S.type="text",ui(p,"firebaseui-input-toggle-off"),vc(p,"firebaseui-input-toggle-on")):(S.type="password",ui(p,"firebaseui-input-toggle-on"),vc(p,"firebaseui-input-toggle-off")),S.focus()}function rv(){return er(this,"firebaseui-id-new-password-error")}function iv(){this.Ra=!1;var p=Wh.call(this);p.type="password";var S=rv.call(this);pd(this,p,function(){Ym(S)&&(Di(p,!0),vs(S))});var D=nv.call(this);ui(D,"firebaseui-input-toggle-on"),vc(D,"firebaseui-input-toggle-off"),gd(this,p,function(){ui(D,"firebaseui-input-toggle-focus"),vc(D,"firebaseui-input-toggle-blur")}),Qi(this,p,function(){ui(D,"firebaseui-input-toggle-blur"),vc(D,"firebaseui-input-toggle-focus")}),wi(this,D,O(EP,this))}function H0(){var p=Wh.call(this),S=rv.call(this);return Sa(p)?(Di(p,!0),vs(S),S=!0):(Di(p,!1),sr(S,ir("Enter your password").toString()),S=!1),S?Sa(p):null}function hu(p,S,D){He.call(this,P0,{email:p},D,"passwordReset"),this.l=S}s(hu,He),hu.prototype.v=function(){this.H(),this.B(this.l),dr(this,this.i(),this.l),this.i().focus(),He.prototype.v.call(this)},hu.prototype.o=function(){this.l=null,He.prototype.o.call(this)},L(hu.prototype,{i:Wh,w:rv,M:nv,H:iv,u:H0,U:Ji,P:xi,B:Ea});function av(p,S,D,N,V){He.call(this,sA,{factorId:p,phoneNumber:D||null,G:!!N},V,"revertSecondFactorAdditionSuccess"),this.l=S,this.i=N||null}s(av,He),av.prototype.v=function(){var p=this;wi(this,er(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),He.prototype.v.call(this)},av.prototype.o=function(){this.l=this.i=null,He.prototype.o.call(this)},L(av.prototype,{u:Ji,B:xi,w:Ea});function vF(p,S,D,N,V){var H=D.u();H&&Pn(p,D.I(O(Un(p).confirmPasswordReset,Un(p)),[N,H],function(){D.m();var ne=new Hr(V);ne.render(S),An(p,ne)},function(ne){AP(p,S,D,ne)}))}function AP(p,S,D,N){(N&&N.code)=="auth/weak-password"?(p=Er(N),Di(D.i(),!1),sr(D.w(),p),D.i().focus()):(D&&D.m(),D=new T_,D.render(S),An(p,D))}function kP(p,S,D){var N=new $p(D,function(){Pn(p,N.I(O(Un(p).sendPasswordResetEmail,Un(p)),[D],function(){N.m(),N=new j0(D,void 0,zi(Ye(p)),ci(Ye(p))),N.render(S),An(p,N)},function(){N.a(Q().toString())}))});N.render(S),An(p,N)}function CP(p,S,D,N){var V=new av(N.factorId,function(){V.I(O(Un(p).sendPasswordResetEmail,Un(p)),[D],function(){V.m(),V=new j0(D,void 0,zi(Ye(p)),ci(Ye(p))),V.render(S),An(p,V)},function(){V.a(Q().toString())})},N.phoneNumber);V.render(S),An(p,V)}wr.passwordReset=function(p,S,D,N){Pn(p,Un(p).verifyPasswordResetCode(D).then(function(V){var H=new hu(V,function(){vF(p,S,H,D,N)});H.render(S),An(p,H)},function(){AP(p,S)}))},wr.emailChangeRevocation=function(p,S,D){var N=null;Pn(p,Un(p).checkActionCode(D).then(function(V){return N=V.data.email,Un(p).applyActionCode(D)}).then(function(){kP(p,S,N)},function(){var V=new xP;V.render(S),An(p,V)}))},wr.emailVerification=function(p,S,D,N){Pn(p,Un(p).applyActionCode(D).then(function(){var V=new dA(N);V.render(S),An(p,V)},function(){var V=new hA;V.render(S),An(p,V)}))},wr.revertSecondFactorAddition=function(p,S,D){var N=null,V=null;Pn(p,Un(p).checkActionCode(D).then(function(H){return N=H.data.email,V=H.data.multiFactorInfo,Un(p).applyActionCode(D)}).then(function(){CP(p,S,N,V)},function(){var H=new pA;H.render(S),An(p,H)}))},wr.verifyAndChangeEmail=function(p,S,D,N){var V=null;Pn(p,Un(p).checkActionCode(D).then(function(H){return V=H.data.email,Un(p).applyActionCode(D)}).then(function(){var H=new fA(V,N);H.render(S),An(p,H)},function(){var H=new F0;H.render(S),An(p,H)}))};function Bp(p,S){try{var D=typeof p.selectionStart=="number"}catch{D=!1}D?(p.selectionStart=S,p.selectionEnd=S):Xn&&!Vs("9")&&(p.type=="textarea"&&(S=p.value.substring(0,S).replace(/(\r\n|\r|\n)/g,`
`).length),p=p.createTextRange(),p.collapse(!0),p.move("character",S),p.select())}function xr(p,S,D,N,V,H){He.call(this,yd,{email:D},H,"emailLinkSignInConfirmation",{F:N,D:V}),this.l=p,this.u=S}s(xr,He),xr.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Bp(this.i(),(this.i().value||"").length),He.prototype.v.call(this)},xr.prototype.o=function(){this.u=this.l=null,He.prototype.o.call(this)},L(xr.prototype,{i:_d,M:Sd,w:Lp,H:yc,j:Td,U:Ji,P:xi,B:Ea}),wr.emailLinkConfirmation=function(p,S,D,N,V,H){var ne=new xr(function(){var ue=ne.j();ue?(ne.m(),N(p,S,ue,D)):ne.i().focus()},function(){ne.m(),Gr(p,S,V||void 0)},V||void 0,zi(Ye(p)),ci(Ye(p)));ne.render(S),An(p,ne),H&&ne.a(H)};function Up(p,S,D,N,V){He.call(this,Km,{ga:p},V,"emailLinkSignInLinkingDifferentDevice",{F:D,D:N}),this.i=S}s(Up,He),Up.prototype.v=function(){this.u(this.i),this.l().focus(),He.prototype.v.call(this)},Up.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(Up.prototype,{l:Ji,u:Ea}),wr.emailLinkNewDeviceLinking=function(p,S,D,N){var V=new sa(D);if(D=V.a.a.get(Zr.PROVIDER_ID)||null,hh(V,null),D){var H=new Up(Lm(Ye(p),D),function(){H.m(),N(p,S,V.toString())},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H)}else Gr(p,S)};function ua(p){He.call(this,g_,void 0,p,"blank")}s(ua,He);function xA(p,S,D,N,V){var H=new ua,ne=new sa(D),ue=ne.a.a.get(Zr.$a)||"",Pe=ne.a.a.get(Zr.Sa)||"",nt=ne.a.a.get(Zr.Qa)==="1",jt=Ai(ne),mr=ne.a.a.get(Zr.PROVIDER_ID)||null;ne=ne.a.a.get(Zr.vb)||null,J0(p,ne);var g=!wp(yp,rn(p)),b=N||sP(Pe,rn(p)),E=(N=lP(Pe,rn(p)))&&N.a;mr&&E&&E.providerId!==mr&&(E=null),H.render(S),An(p,H),Pn(p,H.I(function(){var I=bi(null);I=jt&&g||g&&nt?Dl(Error("anonymous-user-not-found")):TF(p,D).then(function(U){if(mr&&!E)throw Error("pending-credential-not-found");return U});var F=null;return I.then(function(U){return F=U,V?null:Un(p).checkActionCode(ue)}).then(function(){return F})},[],function(I){b?M_(p,H,b,D,E,I):nt?(H.m(),Pt("differentDeviceError",p,S)):(H.m(),Pt("emailLinkConfirmation",p,S,D,I_))},function(I){var F=void 0;if(!I||!I.name||I.name!="cancel")switch(H.m(),I&&I.message){case"anonymous-user-not-found":Pt("differentDeviceError",p,S);break;case"anonymous-user-mismatch":Pt("anonymousUserMismatch",p,S);break;case"pending-credential-not-found":Pt("emailLinkNewDeviceLinking",p,S,D,_A);break;default:I&&(F=Er(I)),Gr(p,S,void 0,F)}}))}function I_(p,S,D,N){xA(p,S,N,D,!0)}function _A(p,S,D){xA(p,S,D)}function M_(p,S,D,N,V,H){var ne=Ii(S);S.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ir("Signing in...").toString());var ue=null;V=(H?RP(p,H,D,N,V):NP(p,D,N,V)).then(function(Pe){ms(bp,rn(p)),ms(yp,rn(p)),S.h(),S.$("firebaseui-icon-done",ir("Signed in!").toString()),ue=setTimeout(function(){S.h(),Ed(p,S,Pe,!0)},1e3),Pn(p,function(){S&&(S.h(),S.m()),clearTimeout(ue)})},function(Pe){if(S.h(),S.m(),!Pe.name||Pe.name!="cancel"){Pe=$0(Pe);var nt=Er(Pe);Pe.code=="auth/email-already-in-use"||Pe.code=="auth/credential-already-in-use"?(ms(bp,rn(p)),ms(yp,rn(p))):Pe.code=="auth/invalid-email"?(nt=ir("The email provided does not match the current sign-in session.").toString(),Pt("emailLinkConfirmation",p,ne,N,I_,null,nt)):Gr(p,ne,D,nt)}}),Pn(p,V)}wr.emailLinkSignInCallback=xA;function ov(p,S,D,N,V,H){He.call(this,Op,{email:p,ga:S},H,"emailLinkSignInLinking",{F:N,D:V}),this.i=D}s(ov,He),ov.prototype.v=function(){this.u(this.i),this.l().focus(),He.prototype.v.call(this)},ov.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(ov.prototype,{l:Ji,u:Ea});function DP(p,S,D,N){var V=Ii(S);wA(p,S,D,function(){Gr(p,V,D)},function(H){if(!H.name||H.name!="cancel"){var ne=Er(H);H&&H.code=="auth/network-request-failed"?S.a(ne):(S.m(),Gr(p,V,D,ne))}},N)}wr.emailLinkSignInLinking=function(p,S,D){var N=gc(rn(p));if(Pl(rn(p)),N){var V=N.a.providerId,H=new ov(D,Lm(Ye(p),V),function(){DP(p,H,D,N)},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H)}else Gr(p,S)};function Vp(p,S,D,N,V,H){He.call(this,uu,{email:p},H,"emailLinkSignInSent",{F:N,D:V}),this.u=S,this.i=D}s(Vp,He),Vp.prototype.v=function(){var p=this;wi(this,this.l(),function(){p.i()}),wi(this,er(this,"firebaseui-id-trouble-getting-email-link"),function(){p.u()}),this.l().focus(),He.prototype.v.call(this)},Vp.prototype.o=function(){this.i=this.u=null,He.prototype.o.call(this)},L(Vp.prototype,{l:xi}),wr.emailLinkSignInSent=function(p,S,D,N,V){var H=new Vp(D,function(){H.m(),Pt("emailNotReceived",p,S,D,N,V)},function(){H.m(),N()},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H)};function zp(p,S,D,N,V,H,ne){He.call(this,lA,{jc:p,Qb:S},ne,"emailMismatch",{F:V,D:H}),this.l=D,this.i=N}s(zp,He),zp.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),He.prototype.v.call(this)},zp.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(zp.prototype,{u:Ji,B:xi,w:Ea}),wr.emailMismatch=function(p,S,D){var N=gc(rn(p));if(N){var V=new zp(D.user.email,N.g,function(){var H=V;Pl(rn(p)),Ed(p,H,D)},function(){var H=D.credential.providerId,ne=Ii(V);V.m(),N.a?Pt("federatedLinking",p,ne,N.g,H):Pt("federatedSignIn",p,ne,N.g,H)},zi(Ye(p)),ci(Ye(p)));V.render(S),An(p,V)}else Gr(p,S)};function sv(p,S,D,N,V){He.call(this,$i,void 0,V,"emailNotReceived",{F:D,D:N}),this.l=p,this.i=S}s(sv,He),sv.prototype.v=function(){var p=this;wi(this,this.u(),function(){p.i()}),wi(this,this.Da(),function(){p.l()}),this.u().focus(),He.prototype.v.call(this)},sv.prototype.Da=function(){return er(this,"firebaseui-id-resend-email-link")},sv.prototype.o=function(){this.i=this.l=null,He.prototype.o.call(this)},L(sv.prototype,{u:xi}),wr.emailNotReceived=function(p,S,D,N,V){var H=new sv(function(){wA(p,H,D,N,function(ne){ne=Er(ne),H.a(ne)},V)},function(){H.m(),Gr(p,S,D)},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H)};function Hp(p,S,D,N,V,H){He.call(this,Go,{email:p,ga:S},H,"federatedLinking",{F:N,D:V}),this.i=D}s(Hp,He),Hp.prototype.v=function(){this.u(this.i),this.l().focus(),He.prototype.v.call(this)},Hp.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(Hp.prototype,{l:Ji,u:Ea}),wr.federatedLinking=function(p,S,D,N,V){var H=gc(rn(p));if(H&&H.a){var ne=new Hp(D,Lm(Ye(p),N),function(){jp(p,ne,N,D)},zi(Ye(p)),ci(Ye(p)));ne.render(S),An(p,ne),V&&ne.a(V)}else Gr(p,S)},wr.federatedRedirect=function(p,S,D){var N=new ua;N.render(S),An(p,N),S=Nm(Ye(p))[0],jp(p,N,S,D)},wr.federatedSignIn=function(p,S,D,N,V){var H=new Hp(D,Lm(Ye(p),N),function(){jp(p,H,N,D)},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H),V&&H.a(V)};function yF(p,S,D,N){var V=S.u();V?Pn(p,S.I(O(p.Xb,p),[D,V],function(H){return H=H.user.linkWithCredential(N).then(function(ne){return Ed(p,S,{user:ne.user,credential:N,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo})}),Pn(p,H),H},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/wrong-password":Di(S.i(),!1),sr(S.B(),Er(H));break;case"auth/too-many-requests":S.a(Er(H));break;default:wo("signInWithEmailAndPassword: "+H.message,void 0),S.a(Er(H))}})):S.i().focus()}wr.passwordLinking=function(p,S,D){var N=gc(rn(p));Pl(rn(p));var V=N&&N.a;if(V){var H=new Zm(D,function(){yF(p,H,D,V)},function(){H.m(),Pt("passwordRecovery",p,S,D)},zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H)}else Gr(p,S)};function lv(p,S,D,N,V,H){He.call(this,Dr,{email:D,Ta:!!S},H,"passwordRecovery",{F:N,D:V}),this.l=p,this.u=S}s(lv,He),lv.prototype.v=function(){this.B(),this.H(this.l,this.u),Sa(this.i())||this.i().focus(),dr(this,this.i(),this.l),He.prototype.v.call(this)},lv.prototype.o=function(){this.u=this.l=null,He.prototype.o.call(this)},L(lv.prototype,{i:_d,w:Sd,B:Lp,M:yc,j:Td,U:Ji,P:xi,H:Ea});function bF(p,S){var D=S.j();if(D){var N=Ii(S);Pn(p,S.I(O(Un(p).sendPasswordResetEmail,Un(p)),[D],function(){S.m();var V=new j0(D,function(){V.m(),Gr(p,N)},zi(Ye(p)),ci(Ye(p)));V.render(N),An(p,V)},function(V){Di(S.i(),!1),sr(S.w(),Er(V))}))}else S.i().focus()}wr.passwordRecovery=function(p,S,D,N,V){var H=new lv(function(){bF(p,H)},N?void 0:function(){H.m(),Gr(p,S)},D,zi(Ye(p)),ci(Ye(p)));H.render(S),An(p,H),V&&H.a(V)},wr.passwordSignIn=function(p,S,D,N){var V=new Qm(function(){U0(p,V)},function(){var H=V.M();V.m(),Pt("passwordRecovery",p,S,H)},D,zi(Ye(p)),ci(Ye(p)),N);V.render(S),An(p,V)};function SA(){return er(this,"firebaseui-id-name")}function fu(){return er(this,"firebaseui-id-name-error")}function cv(p,S,D,N,V,H,ne,ue,Pe){He.call(this,lr,{email:N,Tb:p,name:V,Ta:!!D,ia:!!ue},Pe,"passwordSignUp",{F:H,D:ne}),this.w=S,this.H=D,this.B=p}s(cv,He),cv.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(M0(this,this.i(),this.u()),M0(this,this.u(),this.l())):M0(this,this.i(),this.l()),this.w&&dr(this,this.l(),this.w),Sa(this.i())?this.B&&!Sa(this.u())?this.u().focus():this.l().focus():this.i().focus(),He.prototype.v.call(this)},cv.prototype.o=function(){this.H=this.w=null,He.prototype.o.call(this)},L(cv.prototype,{i:_d,U:Sd,ea:Lp,jb:yc,j:Td,u:SA,Bc:fu,Ja:function(){var p=SA.call(this),S=fu.call(this);pd(this,p,function(){Ym(S)&&(Di(p,!0),vs(S))})},M:function(){var p=SA.call(this),S=fu.call(this),D=Sa(p);return D=!/^[\s\xa0]*$/.test(D==null?"":String(D)),Di(p,D),D?(vs(S),S=!0):(sr(S,ir("Enter your account name").toString()),S=!1),S?Ge(Sa(p)):null},l:Wh,ba:rv,lb:nv,ua:iv,P:H0,Nb:Ji,Mb:xi,pa:Ea});function TA(p,S){var D=zE(Ye(p)),N=S.j(),V=null;D&&(V=S.M());var H=S.P();if(N){if(D)if(V)V=Re(V);else{S.u().focus();return}if(H){var ne=Kt.auth.EmailAuthProvider.credential(N,H);Pn(p,S.I(O(p.Yb,p),[N,H],function(ue){var Pe={user:ue.user,credential:ne,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo};return D?(ue=ue.user.updateProfile({displayName:V}).then(function(){return Ed(p,S,Pe)}),Pn(p,ue),ue):Ed(p,S,Pe)},function(ue){if(!ue.name||ue.name!="cancel"){var Pe=$0(ue);switch(ue=Er(Pe),Pe.code){case"auth/email-already-in-use":return wF(p,S,N,Pe);case"auth/too-many-requests":ue=ir("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Di(S.l(),!1),sr(S.ba(),ue);break;case"auth/admin-restricted-operation":Nh(Ye(p))?(ue=Ii(S),S.m(),Pt("handleUnauthorizedUser",p,ue,N,Kt.auth.EmailAuthProvider.PROVIDER_ID)):S.a(ue);break;default:Pe="setAccountInfo: "+aP(Pe),wo(Pe,void 0),S.a(ue)}}}))}else S.l().focus()}else S.i().focus()}function wF(p,S,D,N){function V(){var ne=Er(N);Di(S.i(),!1),sr(S.U(),ne),S.i().focus()}var H=Un(p).fetchSignInMethodsForEmail(D).then(function(ne){ne.length?V():(ne=Ii(S),S.m(),Pt("passwordRecovery",p,ne,D,!1,Se().toString()))},function(){V()});return Pn(p,H),H}wr.passwordSignUp=function(p,S,D,N,V,H){function ne(){ue.m(),Gr(p,S)}var ue=new cv(zE(Ye(p)),function(){TA(p,ue)},V?void 0:ne,D,N,zi(Ye(p)),ci(Ye(p)),H);ue.render(S),An(p,ue)};function EA(){return er(this,"firebaseui-id-phone-confirmation-code")}function P_(){return er(this,"firebaseui-id-phone-confirmation-code-error")}function IP(){return er(this,"firebaseui-id-resend-countdown")}function So(p,S,D,N,V,H,ne,ue,Pe){He.call(this,uA,{phoneNumber:V},Pe,"phoneSignInFinish",{F:ne,D:ue}),this.jb=H,this.i=new S0(1e3),this.B=H,this.P=p,this.l=S,this.H=D,this.M=N}s(So,He),So.prototype.v=function(){var p=this;this.U(this.jb),ji(this.i,"tick",this.w,!1,this),this.i.start(),wi(this,er(this,"firebaseui-id-change-phone-number-link"),function(){p.P()}),wi(this,this.Da(),function(){p.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),He.prototype.v.call(this)},So.prototype.o=function(){this.M=this.H=this.l=this.P=null,Um(this.i),_h(this.i,"tick",this.w),this.i=null,He.prototype.o.call(this)},So.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Um(this.i),_h(this.i,"tick",this.w),this.ua(),this.lb())},L(So.prototype,{u:EA,pa:P_,Ja:function(p){var S=EA.call(this),D=P_.call(this);pd(this,S,function(){Ym(D)&&(Di(S,!0),vs(D))}),p&&Wm(this,S,function(){p()})},ba:function(){var p=Ge(Sa(EA.call(this))||"");return/^\d{6}$/.test(p)?p:null},Fb:IP,U:function(p){ed(IP.call(this),ir("Resend code in "+((9<p?"0:":"0:0")+p)).toString())},ua:function(){vs(this.Fb())},Da:function(){return er(this,"firebaseui-id-resend-link")},lb:function(){sr(this.Da())},Nb:Ji,Mb:xi,ea:Ea});function AA(p,S,D,N){function V(ne){S.u().focus(),Di(S.u(),!1),sr(S.pa(),ne)}var H=S.ba();H?(S.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ir("Verifying...").toString()),Pn(p,S.I(O(N.confirm,N),[H],function(ne){S.h(),S.$("firebaseui-icon-done",ir("Verified!").toString());var ue=setTimeout(function(){S.h(),S.m();var Pe={user:el(p).currentUser,credential:null,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo};Ed(p,S,Pe,!0)},1e3);Pn(p,function(){S&&S.h(),clearTimeout(ue)})},function(ne){if(ne.name&&ne.name=="cancel")S.h();else{var ue=$0(ne);switch(ne=Er(ue),ue.code){case"auth/credential-already-in-use":S.h();break;case"auth/code-expired":ue=Ii(S),S.h(),S.m(),Pt("phoneSignInStart",p,ue,D,ne);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":S.h(),V(ne);break;default:S.h(),S.a(ne)}}}))):V(ir("Wrong code. Try again.").toString())}wr.phoneSignInFinish=function(p,S,D,N,V,H){var ne=new So(function(){ne.m(),Pt("phoneSignInStart",p,S,D)},function(){AA(p,ne,D,V)},function(){ne.m(),Gr(p,S)},function(){ne.m(),Pt("phoneSignInStart",p,S,D)},$E(D),N,zi(Ye(p)),ci(Ye(p)));ne.render(S),An(p,ne),H&&ne.a(H)};var MP=!Xn&&!(Fn("Safari")&&!(fh()||Fn("Coast")||Fn("Opera")||Fn("Edge")||Fn("Firefox")||Fn("FxiOS")||Fn("Silk")||Fn("Android")));function G0(p,S){return/-[a-z]/.test(S)?null:MP&&p.dataset?!Fn("Android")||fh()||Fn("Firefox")||Fn("FxiOS")||Fn("Opera")||Fn("Silk")||S in p.dataset?(p=p.dataset[S],p===void 0?null:p):null:p.getAttribute("data-"+String(S).replace(/([A-Z])/g,"-$1").toLowerCase())}function q0(p,S,D){var N=this;p=oc(md,{items:p},null,this.s),Dp.call(this,p,!0,!0),D&&(D=Rl(p,D))&&(D.focus(),Vh(D,p)),wi(this,p,function(V){(V=(V=Hy(V.target,"firebaseui-id-list-box-dialog-button"))&&G0(V,"listboxid"))&&(Gh.call(N),S(V))})}function Rl(p,S){p=(p||document).getElementsByTagName("BUTTON");for(var D=0;D<p.length;D++)if(G0(p[D],"listboxid")===S)return p[D];return null}function Yh(){return er(this,"firebaseui-id-phone-number")}function W0(){return er(this,"firebaseui-id-country-selector")}function bc(){return er(this,"firebaseui-id-phone-number-error")}function xF(p,S){var D=p.a,N=kA("1-US-0",D),V=null;if(S&&kA(S,D)?V=S:N?V="1-US-0":V=0<D.length?D[0].c:null,!V)throw Error("No available default country");R_.call(this,V,p)}function kA(p,S){return p=Rh(p),!(!p||!fe(S,p))}function uv(p){return p.map(function(S){return{id:S.c,Ma:"firebaseui-flag "+O_(S),label:S.name+" "+("‎+"+S.b)}})}function O_(p){return"firebaseui-flag-"+p.f}function _F(p){var S=this;q0.call(this,uv(p.a),function(D){R_.call(S,D,p,!0),S.O().focus()},this.Ba)}function R_(p,S,D){var N=Rh(p);N&&(D&&(D=Ge(Sa(Yh.call(this))||""),S=f0(S,D),S.length&&S[0].b!=N.b&&(D="+"+N.b+D.substr(S[0].b.length+1),qE(Yh.call(this),D))),S=Rh(this.Ba),this.Ba=p,p=er(this,"firebaseui-id-country-selector-flag"),S&&vc(p,O_(S)),ui(p,O_(N)),ed(er(this,"firebaseui-id-country-selector-code"),"‎+"+N.b))}function Y0(p,S,D,N,V,H,ne,ue,Pe,nt){He.call(this,cA,{Gb:S,Aa:Pe||null,Va:!!D,ia:!!H},nt,"phoneSignInStart",{F:N,D:V}),this.H=ue||null,this.M=S,this.l=p,this.w=D||null,this.pa=ne||null}s(Y0,He),Y0.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||M0(this,this.O(),this.i()),dr(this,this.i(),this.l),this.O().focus(),Bp(this.O(),(this.O().value||"").length),He.prototype.v.call(this)},Y0.prototype.o=function(){this.w=this.l=null,He.prototype.o.call(this)},L(Y0.prototype,{Cb:Ip,O:Yh,B:bc,ea:function(p,S,D){var N=this,V=Yh.call(this),H=W0.call(this),ne=bc.call(this),ue=p||_p,Pe=ue.a;if(Pe.length==0)throw Error("No available countries provided.");xF.call(N,ue,S),wi(this,H,function(){_F.call(N,ue)}),pd(this,V,function(){Ym(ne)&&(Di(V,!0),vs(ne));var nt=Ge(Sa(V)||""),jt=Rh(this.Ba),mr=f0(ue,nt);nt=kA("1-US-0",Pe),mr.length&&mr[0].b!=jt.b&&(jt=mr[0],R_.call(N,jt.b=="1"&&nt?"1-US-0":jt.c,ue))}),D&&Wm(this,V,function(){D()})},U:function(p){var S=Ge(Sa(Yh.call(this))||"");p=p||_p;var D=p.a,N=f0(_p,S);if(N.length&&!fe(D,N[0]))throw qE(Yh.call(this)),Yh.call(this).focus(),sr(bc.call(this),ir("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return D=Rh(this.Ba),N.length&&N[0].b!=D.b&&R_.call(this,N[0].c,p),N.length&&(S=S.substr(N[0].b.length+1)),S?new jE(this.Ba,S):null},Ja:W0,ba:function(){return er(this,"firebaseui-recaptcha-container")},u:function(){return er(this,"firebaseui-id-recaptcha-error")},i:Ji,ua:xi,P:Ea});function PP(p,S,D,N){try{var V=S.U(x0)}catch{return}V?jh?(S.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",ir("Verifying...").toString()),Pn(p,S.I(O(p.cc,p),[$E(V),D],function(H){var ne=Ii(S);S.$("firebaseui-icon-done",ir("Code sent!").toString());var ue=setTimeout(function(){S.h(),S.m(),Pt("phoneSignInFinish",p,ne,V,15,H)},1e3);Pn(p,function(){S&&S.h(),clearTimeout(ue)})},function(H){if(S.h(),!H.name||H.name!="cancel"){grecaptcha.reset(HE),jh=null;var ne=H&&H.message||"";if(H.code)switch(H.code){case"auth/too-many-requests":ne=ir("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":S.O().focus(),sr(S.B(),q().toString());return;case"auth/admin-restricted-operation":if(Nh(Ye(p))){H=Ii(S),S.m(),Pt("handleUnauthorizedUser",p,H,$E(V),Kt.auth.PhoneAuthProvider.PROVIDER_ID);return}ne=Er(H);break;default:ne=Er(H)}S.a(ne)}}))):Ap?sr(S.u(),ir("Solve the reCAPTCHA").toString()):!Ap&&N&&S.i().click():(S.O().focus(),sr(S.B(),q().toString()))}wr.phoneSignInStart=function(p,S,D,N){var V=cP(Ye(p))||{};jh=null,Ap=!(V&&V.size==="invisible");var H=vA(p),ne=v0(Ye(p)),ue=H?s_(Ye(p)):null;ne=D&&D.a||ne&&ne.c||null,D=D&&D.Aa||ue,(ue=$m(Ye(p)))&&LE(ue),x0=ue?new RE($m(Ye(p))):_p;var Pe=new Y0(function(jt){PP(p,Pe,nt,!(!jt||!jt.keyCode))},Ap,H?null:function(){nt.clear(),Pe.m(),Gr(p,S)},zi(Ye(p)),ci(Ye(p)),H,x0,ne,D);Pe.render(S),An(p,Pe),N&&Pe.a(N),V.callback=function(jt){Pe.u()&&vs(Pe.u()),jh=jt,Ap||PP(p,Pe,nt)},V["expired-callback"]=function(){jh=null};var nt=new Kt.auth.RecaptchaVerifier(Ap?Pe.ba():Pe.i(),V,el(p).app);Pn(p,Pe.I(O(nt.render,nt),[],function(jt){HE=jt},function(jt){jt.name&&jt.name=="cancel"||(jt=Er(jt),Pe.m(),Gr(p,S,void 0,jt))}))},wr.prefilledEmailSignIn=function(p,S,D){var N=new ua;N.render(S),An(p,N),Pn(p,N.I(O(Un(p).fetchSignInMethodsForEmail,Un(p)),[D],function(V){N.m();var H=!(!A_(p)||!Q0(p));bA(p,S,V,D,void 0,H)},function(V){V=Er(V),N.m(),Pt("signIn",p,S,D,V)}))};function K0(p,S,D,N,V){He.call(this,xs,{Sb:S},V,"providerSignIn",{F:D,D:N}),this.i=p}s(K0,He),K0.prototype.v=function(){this.l(this.i),He.prototype.v.call(this)},K0.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(K0.prototype,{l:function(p){function S(ne){p(ne)}for(var D=this.g?ic("firebaseui-id-idp-button",this.g||this.s.a):[],N=0;N<D.length;N++){var V=D[N],H=G0(V,"providerId");wi(this,V,j(S,H))}}}),wr.providerSignIn=function(p,S,D,N){var V=new K0(function(H){H==Kt.auth.EmailAuthProvider.PROVIDER_ID?(V.m(),V0(p,S,N)):H==Kt.auth.PhoneAuthProvider.PROVIDER_ID?(V.m(),Pt("phoneSignInStart",p,S)):H=="anonymous"?Fp(p,V):jp(p,V,H,N),cr(p),p.l.cancel()},jm(Ye(p)),zi(Ye(p)),ci(Ye(p)));V.render(S),An(p,V),D&&V.a(D),eb(p)},wr.sendEmailLinkForSignIn=function(p,S,D,N){var V=new ev;V.render(S),An(p,V),wA(p,V,D,N,function(H){V.m(),H&&H.code=="auth/admin-restricted-operation"&&Nh(Ye(p))?Pt("handleUnauthorizedUser",p,S,D,Kt.auth.EmailAuthProvider.PROVIDER_ID):(H=Er(H),Pt("signIn",p,S,D,H))})};function X0(p,S,D,N,V,H,ne){He.call(this,Qr,{email:D,Va:!!S,ia:!!H},ne,"signIn",{F:N,D:V}),this.i=p,this.u=S}s(X0,He),X0.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Bp(this.l(),(this.l().value||"").length),He.prototype.v.call(this)},X0.prototype.o=function(){this.u=this.i=null,He.prototype.o.call(this)},L(X0.prototype,{l:_d,M:Sd,w:Lp,H:yc,j:Td,U:Ji,P:xi,B:Ea}),wr.signIn=function(p,S,D,N){var V=A_(p),H=new X0(function(){var ne=H,ue=ne.j()||"";ue&&yA(p,ne,ue)},V?null:function(){H.m(),Gr(p,S,D)},D,zi(Ye(p)),ci(Ye(p)),V);H.render(S),An(p,H),N&&H.a(N)};function Z0(p,S,D,N,V,H,ne){He.call(this,v_,{kc:p,yb:D,Eb:!!N},ne,"unauthorizedUser",{F:V,D:H}),this.l=S,this.i=N}s(Z0,He),Z0.prototype.v=function(){var p=this,S=er(this,"firebaseui-id-unauthorized-user-help-link");this.i&&S&&wi(this,S,function(){p.i()}),wi(this,this.u(),function(){p.l()}),this.u().focus(),He.prototype.v.call(this)},Z0.prototype.o=function(){this.i=this.l=null,He.prototype.o.call(this)},L(Z0.prototype,{u:xi}),wr.handleUnauthorizedUser=function(p,S,D,N){function V(){Gr(p,S)}N===Kt.auth.EmailAuthProvider.PROVIDER_ID?V=function(){V0(p,S)}:N===Kt.auth.PhoneAuthProvider.PROVIDER_ID&&(V=function(){Pt("phoneSignInStart",p,S)});var H=null,ne=null;N===Kt.auth.EmailAuthProvider.PROVIDER_ID&&m0(Ye(p))?(H=dP(Ye(p)),ne=pF(Ye(p))):Nh(Ye(p))&&(H=o_(Ye(p)),ne=uP(Ye(p)));var ue=new Z0(D,function(){ue.m(),V()},H,ne,zi(Ye(p)),ci(Ye(p)));ue.render(S),An(p,ue)};function dv(p,S,D,N,V,H){He.call(this,y_,{email:p},H,"unsupportedProvider",{F:N,D:V}),this.l=S,this.i=D}s(dv,He),dv.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),He.prototype.v.call(this)},dv.prototype.o=function(){this.i=this.l=null,He.prototype.o.call(this)},L(dv.prototype,{u:Ji,B:xi,w:Ea}),wr.unsupportedProvider=function(p,S,D){var N=new dv(D,function(){N.m(),Pt("passwordRecovery",p,S,D)},function(){N.m(),Gr(p,S,D)},zi(Ye(p)),ci(Ye(p)));N.render(S),An(p,N)};function qo(p,S){this.$=!1;var D=CA(S);if(fv[D])throw Error('An AuthUI instance already exists for the key "'+D+'"');fv[D]=this,this.a=p,this.u=null,this.Y=!1,hv(this.a),this.h=Kt.initializeApp({apiKey:p.app.options.apiKey,authDomain:p.app.options.authDomain},p.app.name+"-firebaseui-temp").auth(),(p=p.emulatorConfig)&&(D=p.port,this.h.useEmulator(p.protocol+"://"+p.host+(D===null?"":":"+D),p.options)),hv(this.h),this.h.setPersistence&&this.h.setPersistence(Kt.auth.Auth.Persistence.SESSION),this.oa=S,this.ca=new UE,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Ba.Xa(),this.j=this.C=null,this.da=this.A=!1}function hv(p){p&&p.INTERNAL&&p.INTERNAL.logFramework&&p.INTERNAL.logFramework("FirebaseUI-web")}var fv={};function CA(p){return p||"[DEFAULT]"}function Gp(p){return cr(p),p.i||(p.i=pu(p,function(S){return S&&!gc(rn(p))?bi(el(p).getRedirectResult().then(function(D){return D},function(D){if(D&&D.code=="auth/email-already-in-use"&&D.email&&D.credential)throw D;return wc(p,D)})):bi(Un(p).getRedirectResult().then(function(D){return p0(Ye(p))&&!D.user&&p.j&&!p.j.isAnonymous?el(p).getRedirectResult():D}))})),p.i}function An(p,S){cr(p),p.g=S}var qp=null;function Un(p){return cr(p),p.h}function el(p){return cr(p),p.a}function rn(p){return cr(p),p.oa}function Q0(p){return cr(p),p.O?p.O.emailHint:void 0}n=qo.prototype,n.nb=function(){return cr(this),!!e_(rn(this))||DA(Cr())};function DA(p){return p=new sa(p),(p.a.a.get(Zr.ub)||null)==="signIn"&&!!p.a.a.get(Zr.$a)}n.start=function(p,S){IA(this,p,S)};function IA(p,S,D,N){cr(p),typeof p.a.languageCode<"u"&&(p.u=p.a.languageCode);var V="en".replace(/_/g,"-");p.a.languageCode=V,p.h.languageCode=V,p.Y=!0,typeof p.a.tenantId<"u"&&(p.h.tenantId=p.a.tenantId),p.ib(D),p.O=N||null;var H=d.document;p.C?p.C.then(function(){H.readyState=="complete"?N_(p,S):gm(window,"load",function(){N_(p,S)})}):H.readyState=="complete"?N_(p,S):gm(window,"load",function(){N_(p,S)})}function N_(p,S){var D=$a(S,"Could not find the FirebaseUI widget element on the page.");if(D.setAttribute("lang","en".replace(/_/g,"-")),qp){var N=qp;cr(N),gc(rn(N))&&Bo("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),qp.reset()}if(qp=p,p.T=D,L_(p,D),Dm(new pc)&&Dm(new Im)){S=$a(S,"Could not find the FirebaseUI widget element on the page."),D=Cr(),N=n_(Ye(p).a,"queryParameterForSignInSuccessUrl"),D=(D=Xe(D,N))?tc(vh(D)).toString():null;e:{N=Cr();var V=VE(Ye(p));N=Xe(N,V)||"";for(H in u_)if(u_[H].toLowerCase()==N.toLowerCase()){var H=u_[H];break e}H="callback"}switch(H){case"callback":D&&(H=rn(p),xp(Mm,D,H)),p.nb()?Pt("callback",p,S):Gr(p,S,Q0(p));break;case"resetPassword":Pt("passwordReset",p,S,Jm(),k_());break;case"recoverEmail":Pt("emailChangeRevocation",p,S,Jm());break;case"revertSecondFactorAddition":Pt("revertSecondFactorAddition",p,S,Jm());break;case"verifyEmail":Pt("emailVerification",p,S,Jm(),k_());break;case"verifyAndChangeEmail":Pt("verifyAndChangeEmail",p,S,Jm(),k_());break;case"signIn":Pt("emailLinkSignInCallback",p,S,Cr()),MA();break;case"select":D&&(H=rn(p),xp(Mm,D,H)),Gr(p,S);break;default:throw Error("Unhandled widget operation.")}S=Ye(p),(S=Ep(S).uiShown||null)&&S()}else S=$a(S,"Could not find the FirebaseUI widget element on the page."),H=new _P(ir("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),H.render(S),An(p,H);S=p.g&&p.g.Ga=="blank"&&l_(Ye(p)),e_(rn(p))&&!S&&(S=e_(rn(p)),J0(p,S.a),ms(Oh,rn(p)))}function pu(p,S){if(p.A)return S(pv(p));if(Pn(p,function(){p.A=!1}),p0(Ye(p))){var D=new Fi(function(N){Pn(p,p.a.onAuthStateChanged(function(V){p.j=V,p.A||(p.A=!0,N(S(pv(p))))}))});return Pn(p,D),D}return p.A=!0,S(null)}function pv(p){return cr(p),p0(Ye(p))&&p.j&&p.j.isAnonymous?p.j:null}function Pn(p,S){if(cr(p),S){p.s.push(S);var D=function(){we(p.s,function(N){return N==S})};typeof S!="function"&&S.then(D,D)}}n.Db=function(){cr(this),this.Z=!0};function SF(p){cr(p);var S;return(S=p.Z)||(p=Ye(p),p=Fm(p,Kt.auth.GoogleAuthProvider.PROVIDER_ID),S=!(!p||p.prompt!=="select_account")),S}function OP(p){typeof p.a.languageCode<"u"&&p.Y&&(p.Y=!1,p.a.languageCode=p.u)}function J0(p,S){p.a.tenantId=S,p.h.tenantId=S}n.reset=function(){cr(this);var p=this;this.T&&this.T.removeAttribute("lang"),this.J&&XM(this.J),OP(this),this.O=null,MA(),ms(Oh,rn(this)),cr(this),this.l.cancel(),this.i=bi({user:null,credential:null}),qp==this&&(qp=null),this.T=null;for(var S=0;S<this.s.length;S++)typeof this.s[S]=="function"?this.s[S]():this.s[S].cancel&&this.s[S].cancel();this.s=[],Pl(rn(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=kd(this).then(function(){p.C=null},function(){p.C=null}))};function L_(p,S){p.L=null,p.J=new Ox(S),p.J.register(),ji(p.J,"pageEnter",function(D){if(D=D&&D.pageId,p.L!=D){var N=Ye(p);(N=Ep(N).uiChanged||null)&&N(p.L,D),p.L=D}})}n.ib=function(p){cr(this);var S=this.ca,D;for(D in p)try{Pm(S.a,D,p[D])}catch{wo('Invalid config: "'+D+'"',void 0)}am&&Pm(S.a,"popupMode",!1),$m(S),!this.da&&mc(Ye(this))&&(Bo("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function Ye(p){return cr(p),p.ca}n.Wb=function(){cr(this);var p=Ye(this),S=n_(p.a,"widgetUrl");p=VE(p);for(var D=S.search(mi),N=0,V,H=[];0<=(V=Ei(S,N,p,D));)H.push(S.substring(N,V)),N=Math.min(S.indexOf("&",V)+1||D,D);H.push(S.substr(N)),S=H.join("").replace(Be,"$1"),D="="+encodeURIComponent("select"),(p+=D)?(D=S.indexOf("#"),0>D&&(D=S.length),N=S.indexOf("?"),0>N||N>D?(N=D,V=""):V=S.substring(N+1,D),S=[S.substr(0,N),V,S.substr(D)],D=S[1],S[1]=p?D?D+"&"+p:p:D,D=S[0]+(S[1]?"?"+S[1]:"")+S[2]):D=S,Ye(this).a.get("popupMode")?(p=(window.screen.availHeight-600)/2,S=(window.screen.availWidth-500)/2,D=D||"about:blank",p={width:500,height:600,top:0<p?p:0,left:0<S?S:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p.target=p.target||D.target||"google_popup",p.width=p.width||690,p.height=p.height||500,(p=mE(D,p))&&p.focus()):Ja(window.location,D)};function cr(p){if(p.$)throw Error("AuthUI instance is deleted!")}n.Wa=function(){var p=this;return cr(this),this.h.app.delete().then(function(){var S=CA(rn(p));delete fv[S],p.reset(),p.$=!0})};function eb(p){cr(p);try{a0(p.l,a_(Ye(p)),SF(p)).then(function(S){return p.g?du(p,p.g,S):!1})}catch{}}n.Ib=function(p,S){cr(this);var D=this,N=up();if(!no(Ye(this)))return Dl(Error("Email link sign-in should be enabled to trigger email sending."));var V=Lh(Ye(this)),H=new sa(V.url);return _l(H,N),S&&S.a&&(fF(N,S,rn(this)),hh(H,S.a.providerId)),Qa(H,au(Ye(this))),pu(this,function(ne){return ne&&((ne=ne.uid)?H.a.a.set(Zr.Pa,ne):vi(H.a.a,Zr.Pa)),V.url=H.toString(),Un(D).sendSignInLinkToEmail(p,V)}).then(function(){var ne=rn(D),ue={};ue.email=p,xp(yp,Kx(N,JSON.stringify(ue)),ne)},function(ne){throw ms(bp,rn(D)),ms(yp,rn(D)),ne})};function TF(p,S){var D=Ai(new sa(S));return D?(S=new Fi(function(N,V){var H=el(p).onAuthStateChanged(function(ne){H(),ne&&ne.isAnonymous&&ne.uid===D?N(ne):ne&&ne.isAnonymous&&ne.uid!==D?V(Error("anonymous-user-mismatch")):V(Error("anonymous-user-not-found"))});Pn(p,H)}),Pn(p,S),S):bi(null)}function RP(p,S,D,N,V){cr(p);var H=V||null,ne=Kt.auth.EmailAuthProvider.credentialWithLink(D,N);return D=H?Un(p).signInWithEmailLink(D,N).then(function(ue){return ue.user.linkWithCredential(H)}).then(function(){return kd(p)}).then(function(){return wc(p,{code:"auth/email-already-in-use"},H)}):Un(p).fetchSignInMethodsForEmail(D).then(function(ue){return ue.length?wc(p,{code:"auth/email-already-in-use"},ne):S.linkWithCredential(ne)}),Pn(p,D),D}function NP(p,S,D,N){cr(p);var V=N||null,H;return S=Un(p).signInWithEmailLink(S,D).then(function(ne){if(H={user:ne.user,credential:null,operationType:ne.operationType,additionalUserInfo:ne.additionalUserInfo},V)return ne.user.linkWithCredential(V).then(function(ue){H={user:ue.user,credential:V,operationType:H.operationType,additionalUserInfo:ue.additionalUserInfo}})}).then(function(){kd(p)}).then(function(){return el(p).updateCurrentUser(H.user)}).then(function(){return H.user=el(p).currentUser,H}),Pn(p,S),S}function MA(){var p=Cr();if(DA(p)){p=new sa(p);for(var S in Zr)Zr.hasOwnProperty(S)&&vi(p.a.a,Zr[S]);S={state:"signIn",mode:"emailLink",operation:"clear"};var D=d.document.title;d.history&&d.history.replaceState&&d.history.replaceState(S,D,p.toString())}}n.bc=function(p,S){cr(this);var D=this;return Un(this).signInWithEmailAndPassword(p,S).then(function(N){return pu(D,function(V){return V?kd(D).then(function(){return wc(D,{code:"auth/email-already-in-use"},Kt.auth.EmailAuthProvider.credential(p,S))}):N})})},n.Yb=function(p,S){cr(this);var D=this;return pu(this,function(N){if(N){var V=Kt.auth.EmailAuthProvider.credential(p,S);return N.linkWithCredential(V)}return Un(D).createUserWithEmailAndPassword(p,S)})},n.ac=function(p){cr(this);var S=this;return pu(this,function(D){return D?D.linkWithCredential(p).then(function(N){return N},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return wc(S,N,p)}):Un(S).signInWithCredential(p)})};function LP(p,S){return cr(p),pu(p,function(D){return D&&!gc(rn(p))?D.linkWithPopup(S).then(function(N){return N},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return wc(p,N)}):Un(p).signInWithPopup(S)})}n.dc=function(p){cr(this);var S=this,D=this.i;return this.i=null,pu(this,function(N){return N&&!gc(rn(S))?N.linkWithRedirect(p):Un(S).signInWithRedirect(p)}).then(function(){},function(N){throw S.i=D,N})},n.cc=function(p,S){cr(this);var D=this;return pu(this,function(N){return N?N.linkWithPhoneNumber(p,S).then(function(V){return new wE(V,function(H){if(H.code=="auth/credential-already-in-use")return wc(D,H);throw H})}):el(D).signInWithPhoneNumber(p,S).then(function(V){return new wE(V)})})},n.$b=function(){return cr(this),el(this).signInAnonymously()};function PA(p,S){return cr(p),pu(p,function(D){if(p.j&&!p.j.isAnonymous&&p0(Ye(p))&&!Un(p).currentUser)return kd(p).then(function(){return S.credential.providerId=="password"&&(S.credential=null),S});if(D)return kd(p).then(function(){return D.linkWithCredential(S.credential)}).then(function(N){return S.user=N.user,S.credential=N.credential,S.operationType=N.operationType,S.additionalUserInfo=N.additionalUserInfo,S},function(N){if(N&&N.code=="auth/email-already-in-use"&&N.email&&N.credential)throw N;return wc(p,N,S.credential)});if(!S.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return kd(p).then(function(){return el(p).updateCurrentUser(S.user)}).then(function(){return S.user=el(p).currentUser,S.operationType="signIn",S.credential&&S.credential.providerId&&S.credential.providerId=="password"&&(S.credential=null),S})})}n.Xb=function(p,S){return cr(this),Un(this).signInWithEmailAndPassword(p,S)};function kd(p){return cr(p),Un(p).signOut()}function wc(p,S,D){if(cr(p),S&&S.code&&(S.code=="auth/email-already-in-use"||S.code=="auth/credential-already-in-use")){var N=y0(Ye(p));return bi().then(function(){return N(new Zn("anonymous-upgrade-merge-conflict",null,D||S.credential))}).then(function(){throw p.g&&(p.g.m(),p.g=null),S})}return Dl(S)}function tb(p,S,D,N){He.call(this,R0,void 0,N,"providerMatchByEmail",{F:S,D}),this.i=p}s(tb,He),tb.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Bp(this.l(),(this.l().value||"").length),He.prototype.v.call(this)},tb.prototype.o=function(){this.i=null,He.prototype.o.call(this)},L(tb.prototype,{l:_d,H:Sd,u:Lp,B:yc,j:Td,M:Ji,w:Ea});function j_(p,S,D,N,V){He.call(this,xd,{ec:S},V,"selectTenant",{F:D,D:N}),this.i=p}s(j_,He),j_.prototype.v=function(){OA(this,this.i),He.prototype.v.call(this)},j_.prototype.o=function(){this.i=null,He.prototype.o.call(this)};function OA(p,S){function D(ue){S(ue)}for(var N=p.g?ic("firebaseui-id-tenant-selection-button",p.g||p.s.a):[],V=0;V<N.length;V++){var H=N[V],ne=G0(H,"tenantId");wi(p,H,j(D,ne))}}function nb(p){He.call(this,Pp,void 0,p,"spinner")}s(nb,He);function F_(p){this.a=new t_,li(this.a,"authDomain"),li(this.a,"displayMode",B_),li(this.a,"tenants"),li(this.a,"callbacks"),li(this.a,"tosUrl"),li(this.a,"privacyPolicyUrl");for(var S in p)if(p.hasOwnProperty(S))try{Pm(this.a,S,p[S])}catch{wo('Invalid config: "'+S+'"',void 0)}}function RA(p){p=p.a.get("displayMode");for(var S in U_)if(U_[S]===p)return U_[S];return B_}function rb(p){return p.a.get("callbacks")||{}}function $_(p){var S=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,S&&!p&&Bo("Privacy Policy URL is missing, the link will not be displayed."),S&&p){if(typeof S=="function")return S;if(typeof S=="string")return function(){Ah(S)}}return null}function Cd(p){var S=p.a.get("tosUrl")||null,D=p.a.get("privacyPolicyUrl")||null;if(D&&!S&&Bo("Terms of Service URL is missing, the link will not be displayed."),S&&D){if(typeof D=="function")return D;if(typeof D=="string")return function(){Ah(D)}}return null}function gu(p,S){if(p=p.a.get("tenants"),!p||!p.hasOwnProperty(S)&&!p.hasOwnProperty(Xh))throw Error("Invalid tenant configuration!")}function Dd(p,S,D){if(p=p.a.get("tenants"),!p)throw Error("Invalid tenant configuration!");var N=[];if(p=p[S]||p[Xh],!p)return wo("Invalid tenant configuration: "+(S+" is not configured!"),void 0),N;if(S=p.signInOptions,!S)throw Error("Invalid tenant configuration: signInOptions are invalid!");return S.forEach(function(V){if(typeof V=="string")N.push(V);else if(typeof V.provider=="string"){var H=V.hd;H&&D?(H instanceof RegExp?H:new RegExp("@"+H.replace(".","\\.")+"$")).test(D)&&N.push(V.provider):N.push(V.provider)}else V="Invalid tenant configuration: signInOption "+(JSON.stringify(V)+" is invalid!"),wo(V,void 0)}),N}function ib(p,S,D){return p=ab(p,S),(S=p.signInOptions)&&D&&(S=S.filter(function(N){return typeof N=="string"?D.includes(N):D.includes(N.provider)}),p.signInOptions=S),p}function ab(p,S){var D=Kh,N=N===void 0?{}:N;return gu(p,S),p=p.a.get("tenants"),Jc(p[S]||p[Xh],D,N)}var Kh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],B_="optionFirst",U_={pc:B_,oc:"identifierFirst"},Xh="*";function xc(p,S){var D=this;this.s=$a(p),this.a={},Object.keys(S).forEach(function(N){D.a[N]=new F_(S[N])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(N){this.ob=N||null},enumerable:!1})}n=xc.prototype,n.Ub=function(p,S){var D=this;Id(this);var N=p.apiKey;return new Fi(function(V,H){if(D.a.hasOwnProperty(N)){var ne=rb(D.a[N]).selectTenantUiHidden||null;if(RA(D.a[N])===B_){var ue=[];S.forEach(function(jt){jt=jt||"_";var mr=D.a[N].a.get("tenants");if(!mr)throw Error("Invalid tenant configuration!");(mr=mr[jt]||mr[Xh])?jt={tenantId:jt!=="_"?jt:null,V:mr.fullLabel||null,displayName:mr.displayName,za:mr.iconUrl,ta:mr.buttonColor}:(wo("Invalid tenant configuration: "+(jt+" is not configured!"),void 0),jt=null),jt&&ue.push(jt)});var Pe=function(jt){jt={tenantId:jt,providerIds:Dd(D.a[N],jt||"_")},V(jt)};if(ue.length===1){Pe(ue[0].tenantId);return}D.g=new j_(function(jt){Id(D),ne&&ne(),Pe(jt)},ue,$_(D.a[N]),Cd(D.a[N]))}else D.g=new tb(function(){var jt=D.g.j();if(jt){for(var mr=0;mr<S.length;mr++){var g=Dd(D.a[N],S[mr]||"_",jt);if(g.length!==0){jt={tenantId:S[mr],providerIds:g,email:jt},Id(D),ne&&ne(),V(jt);return}}D.g.a(Oe({code:"no-matching-tenant-for-email"}).toString())}},$_(D.a[N]),Cd(D.a[N]));D.g.render(D.s),(H=rb(D.a[N]).selectTenantUiShown||null)&&H()}else{var nt=Error("Invalid project configuration: API key is invalid!");nt.code="invalid-configuration",D.pb(nt),H(nt)}})},n.Pb=function(p,S){if(!this.a.hasOwnProperty(p))throw Error("Invalid project configuration: API key is invalid!");var D=S||void 0;gu(this.a[p],S||"_");try{this.i=Kt.app(D).auth()}catch{var N=this.a[p].a.get("authDomain");if(!N)throw Error("Invalid project configuration: authDomain is required!");p=Kt.initializeApp({apiKey:p,authDomain:N},D),p.auth().tenantId=S,this.i=p.auth()}return this.i},n.Zb=function(p,S){var D=this;return new Fi(function(N,V){function H(mr,g){D.j=new qo(p),IA(D.j,D.s,mr,g)}var ne=p.app.options.apiKey;D.a.hasOwnProperty(ne)||V(Error("Invalid project configuration: API key is invalid!"));var ue=ib(D.a[ne],p.tenantId||"_",S&&S.providerIds);Id(D),V={signInSuccessWithAuthResult:function(mr){return N(mr),!1}};var Pe=rb(D.a[ne]).signInUiShown||null,nt=!1;V.uiChanged=function(mr,g){mr===null&&g==="callback"?((mr=np("firebaseui-id-page-callback",D.s))&&vs(mr),D.h=new nb,D.h.render(D.s)):nt||mr===null&&g==="spinner"||g==="blank"||(D.h&&(D.h.m(),D.h=null),nt=!0,Pe&&Pe(p.tenantId))},ue.callbacks=V,ue.credentialHelper="none";var jt;S&&S.email&&(jt={emailHint:S.email}),D.j?D.j.Wa().then(function(){H(ue,jt)}):H(ue,jt)})},n.reset=function(){var p=this;return bi().then(function(){p.j&&p.j.Wa()}).then(function(){p.j=null,Id(p)})},n.Vb=function(){var p=this;this.h||this.A||(this.A=window.setTimeout(function(){Id(p),p.h=new nb,p.g=p.h,p.h.render(p.s),p.A=null},500))},n.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},n.Bb=function(){return Id(this),this.g=new gA,this.g.render(this.s),bi()};function Id(p){p.j&&p.j.reset(),p.mb(),p.g&&p.g.m()}n.pb=function(p){var S=this,D=Oe({code:p.code}).toString()||p.message;Id(this);var N;p.retry&&typeof p.retry=="function"&&(N=function(){S.reset(),p.retry()}),this.g=new mA(D,N),this.g.render(this.s)},n.Rb=function(p){var S=this;return bi().then(function(){var D=S.i&&S.i.app.options.apiKey;if(!S.a.hasOwnProperty(D))throw Error("Invalid project configuration: API key is invalid!");if(gu(S.a[D],p.tenantId||"_"),!S.i.currentUser||S.i.currentUser.uid!==p.uid)throw Error("The user being processed does not match the signed in user!");return(D=rb(S.a[D]).beforeSignInSuccess||null)?D(p):p}).then(function(D){if(D.uid!==p.uid)throw Error("User with mismatching UID returned.");return D})},$("firebaseui.auth.FirebaseUiHandler",xc),$("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",xc.prototype.Ub),$("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",xc.prototype.Pb),$("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",xc.prototype.Zb),$("firebaseui.auth.FirebaseUiHandler.prototype.reset",xc.prototype.reset),$("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",xc.prototype.Vb),$("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",xc.prototype.mb),$("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",xc.prototype.Bb),$("firebaseui.auth.FirebaseUiHandler.prototype.handleError",xc.prototype.pb),$("firebaseui.auth.FirebaseUiHandler.prototype.processUser",xc.prototype.Rb),$("firebaseui.auth.AuthUI",qo),$("firebaseui.auth.AuthUI.getInstance",function(p){return p=CA(p),fv[p]?fv[p]:null}),$("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",qo.prototype.Db),$("firebaseui.auth.AuthUI.prototype.start",qo.prototype.start),$("firebaseui.auth.AuthUI.prototype.setConfig",qo.prototype.ib),$("firebaseui.auth.AuthUI.prototype.signIn",qo.prototype.Wb),$("firebaseui.auth.AuthUI.prototype.reset",qo.prototype.reset),$("firebaseui.auth.AuthUI.prototype.delete",qo.prototype.Wa),$("firebaseui.auth.AuthUI.prototype.isPendingRedirect",qo.prototype.nb),$("firebaseui.auth.AuthUIError",Zn),$("firebaseui.auth.AuthUIError.prototype.toJSON",Zn.prototype.toJSON),$("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",b0),$("firebaseui.auth.CredentialHelper.NONE",w0),$("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Fi.prototype.catch=Fi.prototype.Ca,Fi.prototype.finally=Fi.prototype.fc}).apply(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window)}).apply(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=eet);var Hae=firebaseui.auth;const net=()=>{const n=K.useRef(null);return K.useEffect(()=>{const e=Hae.AuthUI.getInstance()||new Hae.AuthUI(vy),t={signInFlow:"popup",signInOptions:[Gd.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:r=>{var i;return(i=r.additionalUserInfo)!=null&&i.isNewUser?B5e("google"):$5e("google"),!1}}};return n.current&&e.start(n.current,t),()=>{e.reset()}},[]),x.jsx("div",{ref:n,id:"firebaseui-auth-container"})},ret=()=>{const{user:n,signOut:e}=Qt(),[t,r]=K.useState(!1);return x.jsx("div",{className:"p-4 border-b border-border",children:x.jsx("div",{className:"flex items-center",children:n?x.jsxs("div",{className:"w-full",children:[x.jsxs("div",{className:"flex items-center w-full cursor-pointer hover:bg-background-primary rounded-lg p-2 -m-2",onClick:()=>r(!t),children:[x.jsx("img",{src:n.photoURL||"",alt:"User Avatar",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:i=>{console.error("Error loading user avatar:",i)},className:"w-10 h-10 rounded-full"}),x.jsxs("div",{className:"ml-3 text-left flex-1",children:[x.jsx("p",{className:"text-sm font-medium text-text-primary",children:n.displayName}),n.userName&&x.jsxs("p",{className:"text-xs text-text-secondary",children:["@",n.userName]})]})]}),t&&x.jsx("div",{className:"mt-2 pl-2",children:x.jsx("button",{onClick:()=>{e(),r(!1)},className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:"Sign Out"})})]}):x.jsx(net,{})})})},JB=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,Gae=n=>{const e=document.documentElement;n?(e.classList.add("dark"),e.setAttribute("data-theme","dark")):(e.classList.remove("dark"),e.setAttribute("data-theme","light"))},OW=Vf()(t5((n,e)=>({mode:"system",isDark:JB(),setMode:t=>{const r=t==="system"?JB():t==="dark";Gae(r),n({mode:t,isDark:r})},initializeTheme:()=>{const{mode:t}=e(),r=t==="system"?JB():t==="dark";Gae(r),n({isDark:r})}}),{name:"theme-store",partialize:n=>({mode:n.mode})}));typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const{mode:n,setMode:e}=OW.getState();n==="system"&&e("system")});const iet=()=>{const{mode:n,setMode:e}=OW(),t=[{mode:"light",icon:"sun-line",label:"Light"},{mode:"dark",icon:"moon-line",label:"Dark"},{mode:"system",icon:"computer-line",label:"System"}];return x.jsxs("div",{className:"p-4 border-t border-border",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Theme"})}),x.jsx("div",{className:"flex items-center bg-background-primary rounded-md p-1",children:t.map(r=>x.jsx("button",{onClick:()=>e(r.mode),className:`flex-1 flex items-center justify-center p-2 rounded text-xs font-medium transition-all ${n===r.mode?"bg-primary text-white shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-background-secondary"}`,title:r.label,children:x.jsx(ht,{name:r.icon,size:16})},r.mode))})]})},Vw=({className:n=""})=>{const{isLeftSidebarOpen:e,toggleLeftSidebar:t}=pl(),r=ss(),i=Zg(),{user:a,signOut:o}=Qt(),s=[{icon:"timer-line",label:"Pomodoro Timer",path:"/pomodoro"},{icon:"task-line",label:"Task Management",path:"/projects"},{icon:"dashboard-line",label:"Productivity Insights",path:"/dashboard"},{icon:"calendar-line",label:"Calendar",path:"/calendar"},{icon:"brain-line",label:"Deep Focus",path:"/deep-focus"},{icon:"database-2-line",label:"Data Sync",path:"/data-sync"},{icon:"settings-line",label:"Settings",path:"/dashboard/settings"}],l=d=>{i(d),window.innerWidth<768&&t()},c=d=>!!(d==="/dashboard"&&r.pathname==="/dashboard"||d==="/pomodoro"&&r.pathname==="/pomodoro"||d==="/projects"&&r.pathname==="/projects"||d==="/deep-focus"&&r.pathname==="/deep-focus"||d==="/calendar"&&r.pathname==="/calendar"||d==="/data-sync"&&r.pathname==="/data-sync"||d==="/privacy-policy"&&r.pathname==="/privacy-policy"||d.startsWith("/dashboard/")&&r.pathname.startsWith(d)),u=()=>{t()};return x.jsx(x.Fragment,{children:x.jsxs("aside",{id:"sidebar",className:`bg-background-secondary border-r border-border flex flex-col min-h-screen
        ${e?"w-64":"w-0"} ${n}`,style:{zIndex:40},children:[x.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[x.jsx("h1",{className:"text-xl font-['Pacifico'] text-primary",children:"Make10000hours"}),x.jsx("button",{onClick:u,className:"p-1 hover:bg-background-primary hover:shadow-sm hover:scale-105 rounded-md transition-all duration-200 group",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"arrow-left-s-line",size:20})})})]}),x.jsx(ret,{}),x.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:x.jsx("ul",{className:"space-y-1",children:s.map((d,h)=>{const f=c(d.path);return x.jsx("li",{children:x.jsxs(NN,{to:d.path,onClick:m=>{m.preventDefault(),l(d.path)},className:`flex items-center px-3 py-2 text-sm font-medium rounded-md text-left
                    ${f?"text-primary bg-indigo-50 dark:bg-primary/10":"text-text-secondary hover:bg-background-primary"}`,children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:x.jsx(ht,{name:d.icon,size:20})}),d.label]})},h)})})}),x.jsx(iet,{}),x.jsx("div",{className:"p-4 border-t border-border",children:x.jsxs(NN,{to:"/privacy-policy",onClick:d=>{d.preventDefault(),l("/privacy-policy")},className:`flex items-center px-3 py-2 text-sm font-medium rounded-md text-left
            ${c("/privacy-policy")?"text-primary bg-indigo-50 dark:bg-primary/10":"text-text-secondary hover:bg-background-primary"}`,children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:x.jsx(ht,{name:"shield-line",size:20})}),"Privacy Policy"]})})]})})},ni=({text:n,children:e,className:t="",placement:r="bottom",offset:i=16})=>{const[a,o]=K.useState(!1),[s,l]=K.useState({x:0,y:0}),c=K.useRef(null),u=f=>{if(c.current){const m=c.current.getBoundingClientRect();let v=0,y=0;switch(r){case"bottom":v=m.left+m.width/2,y=m.bottom+i;break;case"top":v=m.left+m.width/2,y=m.top-i;break;case"left":v=m.left-i,y=m.top+m.height/2;break;case"right":v=m.right+i,y=m.top+m.height/2;break;default:v=m.left+m.width/2,y=m.bottom+i}l({x:v,y})}o(!0)},d=()=>{o(!1)},h=()=>{switch(r){case"bottom":case"top":return"-translate-x-1/2";case"left":return"-translate-y-1/2 -translate-x-full";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2"}};return x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:c,onMouseEnter:u,onMouseLeave:d,className:`relative ${t}`,children:e}),a&&x.jsx("div",{className:`fixed z-[99999] px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md pointer-events-none transition-all duration-150 ease-out whitespace-nowrap shadow-lg transform ${h()}`,style:{left:s.x,top:s.y},children:n})]})},Zb=class Zb{constructor(){zt(this,"failureCount",0);zt(this,"lastFailureTime",0);zt(this,"lastResetTime",0);zt(this,"state","CLOSED");zt(this,"FAILURE_THRESHOLD",5);zt(this,"TIMEOUT",6e4);zt(this,"RETRY_TIMEOUT",1e4);zt(this,"MIN_RESET_INTERVAL",3e4);zt(this,"lastLogTime",0);zt(this,"LOG_THROTTLE",5e3)}static getInstance(){return Zb.instance||(Zb.instance=new Zb),Zb.instance}throttledLog(e){const t=Date.now();t-this.lastLogTime>=this.LOG_THROTTLE&&(console.log(e),this.lastLogTime=t)}reset(){const e=Date.now();e-this.lastResetTime<this.MIN_RESET_INTERVAL&&this.state==="CLOSED"||(this.failureCount=0,this.state="CLOSED",this.lastFailureTime=0,this.lastResetTime=e,this.throttledLog("🔄 Extension circuit breaker RESET"))}canExecute(){const e=Date.now();return this.state==="OPEN"?e-this.lastFailureTime>=this.TIMEOUT?(this.state="HALF_OPEN",!0):!1:!0}onSuccess(){this.failureCount=0,this.state="CLOSED"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.FAILURE_THRESHOLD&&(this.state="OPEN",this.throttledLog(`🚫 Extension circuit breaker OPEN - preventing further calls for ${this.TIMEOUT/1e3}s`))}isOpen(){return this.state==="OPEN"}getStatus(){const e=Date.now(),t=this.state==="OPEN"?Math.max(0,this.TIMEOUT-(e-this.lastFailureTime)):0;return{state:this.state,failureCount:this.failureCount,timeUntilRetry:t}}};zt(Zb,"instance");let pH=Zb;class Ht{static isExtensionInstalled(){return typeof window.chrome<"u"&&!!window.chrome.runtime}static isCriticalOperation(e){return["ENABLE_FOCUS_MODE","DISABLE_FOCUS_MODE","BLOCK_SITE","UNBLOCK_SITE","GET_FOCUS_STATE","ADD_BLOCKED_SITE","REMOVE_BLOCKED_SITE","BLOCK_MULTIPLE_SITES"].includes(e.type)}static async sendMessage(e){if(!this.isExtensionInstalled())throw new Error("Extension not installed");const t=Date.now(),r=e.type||"unknown",i=this.lastCallTimes.get(r)||0,a=this.isCriticalOperation(e)?this.CRITICAL_DEBOUNCE_MS:this.CALL_DEBOUNCE_MS;if(t-i<a)throw new Error(`Extension call debounced - ${r} too frequent`);if(this.lastCallTimes.set(r,t),!this.circuitBreaker.canExecute())throw new Error("Extension communication temporarily disabled - circuit breaker open");try{const o=await this.sendMessageViaContentScript(e);return this.circuitBreaker.onSuccess(),o}catch(o){throw this.circuitBreaker.onFailure(),this.circuitBreaker.isOpen()||console.error("Extension communication failed:",o),o}}static async sendMessageViaContentScript(e){return new Promise((t,r)=>{const i=Math.random().toString(36),a=setTimeout(()=>{window.removeEventListener("message",o),r(new Error("Extension communication timeout"))},5e3),o=s=>{var l;((l=s.data)==null?void 0:l.extensionResponseId)===i&&(clearTimeout(a),window.removeEventListener("message",o),t(s.data.response))};window.addEventListener("message",o),window.postMessage({type:"EXTENSION_REQUEST",messageId:i,payload:e},"*")})}static async getTodayStats(){return await this.sendMessage({type:"GET_TODAY_STATS"})}static async getTimeDataRange(e,t){return await this.sendMessage({type:"GET_TIME_DATA_RANGE",payload:{startDate:e,endDate:t}})}static async getSettings(){return await this.sendMessage({type:"GET_SETTINGS"})}static async toggleFocusMode(){return(await this.sendMessage({type:"TOGGLE_FOCUS_MODE"})).focusMode}static async enableFocusMode(){const e=await this.sendMessage({type:"ENABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to enable focus mode")}static async disableFocusMode(){const e=await this.sendMessage({type:"DISABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to disable focus mode")}static async getFocusStatus(){const e=await this.sendMessage({type:"GET_FOCUS_STATE"});if(!(e!=null&&e.success)&&(e!=null&&e.error))throw new Error(e.error);return e.data||e}static async blockSite(e){await this.sendMessage({type:"ADD_BLOCKED_SITE",payload:{domain:e}})}static async blockMultipleSites(e){var t,r;if(!e||e.length===0)return{success:!0,results:[],summary:{successCount:0,failureCount:0,total:0}};try{const i=await this.sendMessage({type:"BLOCK_MULTIPLE_SITES",payload:{domains:e}});return i&&i.success&&!i.summary&&(i.summary={successCount:((t=i.results)==null?void 0:t.filter(a=>a.success).length)||0,failureCount:((r=i.results)==null?void 0:r.filter(a=>!a.success).length)||0,total:e.length}),i}catch(i){console.warn("⚠️ Batch blocking failed, falling back to individual blocking:",i);const a=[];let o=0,s=0;for(const l of e)try{await this.blockSite(l),a.push({domain:l,success:!0}),o++}catch(c){a.push({domain:l,success:!1,error:c instanceof Error?c.message:String(c)}),s++}return{success:o>0,results:a,summary:{successCount:o,failureCount:s,total:e.length}}}}static async unblockSite(e){await this.sendMessage({type:"REMOVE_BLOCKED_SITE",payload:{domain:e}})}static async getAnalyticsData(e="week"){return await this.sendMessage({type:"GET_ANALYTICS_DATA",payload:{period:e}})}static mapExtensionDataToWebApp(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:Math.round(i.timeSpent/e.totalTime*100)}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static mapArrSiteUsage(e){const t={};let r=0;const i={onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},a=[];e.forEach(s=>{Object.entries(s.sites).forEach(([l,c])=>{t[l]||(t[l]={id:l,name:this.getDomainDisplayName(l),url:l,icon:this.getDomainIcon(l),backgroundColor:this.getDomainColor(l),timeSpent:0,sessions:0,percentage:0}),t[l].timeSpent+=Math.round(c.timeSpent/(1e3*60)),t[l].sessions+=c.visits,r+=c.timeSpent}),i.onScreenTime+=Math.round(s.totalTime/(1e3*60)),a.push({date:s.date,onScreenTime:Math.round(s.totalTime/(1e3*60)),workingTime:0,deepFocusTime:0})});const o=Object.values(t).map(s=>{const l=r>0?Math.round(s.timeSpent/r*100):0;return{...s,percentage:l}}).sort((s,l)=>l.timeSpent-s.timeSpent);return{timeMetrics:i,dailyUsage:a,siteUsage:o}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}static async syncBlockedSitesFromWebApp(e){try{return await this.sendMessage({type:"SYNC_BLOCKED_SITES_FROM_WEBAPP",payload:{sites:e}})}catch(t){return console.error("Failed to sync blocked sites from web app:",t),{success:!1,error:t instanceof Error?t.message:String(t)}}}static async updateExtensionSettings(e){try{return await this.sendMessage({type:"UPDATE_SETTINGS_FROM_WEBAPP",payload:e})}catch(t){return console.error("Failed to update extension settings:",t),{success:!1,error:t instanceof Error?t.message:String(t)}}}static async forceSyncFromWebApp(){try{return await this.sendMessage({type:"FORCE_SYNC_FROM_WEBAPP"})}catch(e){return console.error("Failed to force sync from web app:",e),{success:!1,error:e instanceof Error?e.message:String(e)}}}static resetCircuitBreaker(){const e=this.circuitBreaker.getStatus();(e.state==="OPEN"||e.failureCount>0)&&this.circuitBreaker.reset()}static getCircuitBreakerStatus(){return this.circuitBreaker.getStatus()}static async testConnection(){try{const e=await this.sendMessage({type:"GET_TODAY_STATS"});return e&&e.success!==!1}catch{return!1}}}zt(Ht,"extensionId",null),zt(Ht,"circuitBreaker",pH.getInstance()),zt(Ht,"lastCallTimes",new Map),zt(Ht,"CALL_DEBOUNCE_MS",500),zt(Ht,"CRITICAL_DEBOUNCE_MS",200);const aet=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));class oet{constructor(){zt(this,"collectionName","deepFocusSessions");zt(this,"sessionCreationLocks",new Map);zt(this,"lockTimeout",1e4)}async startSession(e,t="extension"){const r=this.sessionCreationLocks.get(e);if(r){console.log("🔒 Session creation in progress for user, waiting for existing lock:",e);try{const a=await r;return console.log("✅ Using session from existing lock:",a),a}catch(a){console.warn("⚠️ Existing lock failed, proceeding with new session creation:",a),this.sessionCreationLocks.delete(e)}}const i=this.createSessionWithLock(e,t);this.sessionCreationLocks.set(e,i),setTimeout(()=>{this.sessionCreationLocks.delete(e)},this.lockTimeout);try{const a=await i;return console.log("✅ Deep Focus session created with lock:",a),a}catch(a){throw console.error("❌ Error creating Deep Focus session:",a),a}finally{this.sessionCreationLocks.delete(e)}}async createSessionWithLock(e,t){try{const r=await this.getActiveSession(e);if(r)return console.log("🛡️ Session creation prevented - active session already exists:",r.id),r.id;const i=await this.cleanupOrphanedSessions(e);i>0&&console.log(`🧹 Cleaned up ${i} orphaned session(s) before creating new session`);const a={userId:e,startTime:Co(),status:"active",duration:0,source:t,createdAt:Co(),updatedAt:Co()},o=await uD(Zt(Je,this.collectionName),a);return console.log("✅ Deep Focus session started:",o.id),o.id}catch(r){throw console.error("❌ Error starting Deep Focus session:",r),r}}async endSession(e){var t,r;try{const i=_n(Je,this.collectionName,e),a=new Date,o=await kn(qt(Zt(Je,this.collectionName),vt("__name__","==",e)));if(o.empty)return console.error("Session not found:",e),null;const s=o.docs[0].data(),l=((t=s.startTime)==null?void 0:t.toDate())||new Date,c=s.duration||0;return await Ca(i,{endTime:Co(),duration:c,status:"completed",updatedAt:Co()}),console.log("Deep Focus session ended:",e,"Duration:",c,"minutes","(incremental only)"),{id:e,userId:s.userId,startTime:l,endTime:a,duration:c,status:"completed",createdAt:((r=s.createdAt)==null?void 0:r.toDate())||new Date,updatedAt:new Date}}catch(i){throw console.error("Error ending Deep Focus session:",i),i}}async getUserSessions(e,t,r){try{console.log("🚀 DeepFocusSessionService: Smart query with database-level filtering",{userId:e,hasDateFilter:!!(t&&r),dateRange:t&&r?`${t.toISOString().split("T")[0]} to ${r.toISOString().split("T")[0]}`:"all time"});let i=qt(Zt(Je,this.collectionName),vt("userId","==",e));if(t&&r){const s=Kr.fromDate(t),l=Kr.fromDate(r);i=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("createdAt",">=",s),vt("createdAt","<=",l)),console.log("✅ Database-level date filtering applied:",{startDate:t.toISOString(),endDate:r.toISOString(),benefit:"No individual session checking needed"})}const o=(await kn(i)).docs.map(s=>{var c,u,d,h;const l=s.data();return{id:s.id,userId:l.userId,startTime:((c=l.startTime)==null?void 0:c.toDate())||new Date,endTime:(u=l.endTime)==null?void 0:u.toDate(),duration:l.duration,status:l.status,createdAt:((d=l.createdAt)==null?void 0:d.toDate())||new Date,updatedAt:((h=l.updatedAt)==null?void 0:h.toDate())||new Date}});return o.sort((s,l)=>l.createdAt.getTime()-s.createdAt.getTime()),console.log("✅ Smart query completed:",{sessionsReturned:o.length,approach:t&&r?"database-filtered":"all-sessions",efficiency:"No JavaScript filtering or individual session logs"}),o}catch(i){throw console.error("❌ Error fetching user Deep Focus sessions:",i),i}}async getActiveSession(e){try{const t=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("status","==","active")),r=await kn(t);if(r.empty)return null;const i=r.docs.map(a=>{var s,l,c,u;const o=a.data();return{id:a.id,userId:o.userId,startTime:((s=o.startTime)==null?void 0:s.toDate())||new Date,endTime:(l=o.endTime)==null?void 0:l.toDate(),duration:o.duration,status:o.status,createdAt:((c=o.createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=o.updatedAt)==null?void 0:u.toDate())||new Date}});return i.sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime()),i[0]||null}catch(t){throw console.error("Error fetching active Deep Focus session:",t),t}}subscribeToUserSessions(e,t){const r=qt(Zt(Je,this.collectionName),vt("userId","==",e));return ny(r,i=>{let a=i.docs.map(o=>{var l,c,u,d;const s=o.data();return{id:o.id,userId:s.userId,startTime:((l=s.startTime)==null?void 0:l.toDate())||new Date,endTime:(c=s.endTime)==null?void 0:c.toDate(),duration:s.duration,status:s.status,createdAt:((u=s.createdAt)==null?void 0:u.toDate())||new Date,updatedAt:((d=s.updatedAt)==null?void 0:d.toDate())||new Date}});a.sort((o,s)=>s.createdAt.getTime()-o.createdAt.getTime()),t(a)})}async getCompletedSessionsCount(e){try{const t=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("status","==","completed"));return(await kn(t)).size}catch(t){return console.error("Error getting completed sessions count:",t),0}}async getTotalFocusTime(e){try{return(await this.getUserSessions(e)).filter(r=>r.status==="completed"&&r.duration).reduce((r,i)=>r+(i.duration||0),0)}catch(t){return console.error("Error calculating total focus time:",t),0}}async updateSessionDuration(e,t){try{const r=_n(Je,this.collectionName,e);await Ca(r,{duration:t,updatedAt:Co()})}catch(r){console.error("Error updating Deep Focus session duration:",r)}}async suspendSession(e){try{const t=_n(Je,this.collectionName,e);await Ca(t,{status:"suspended",suspendedAt:Co(),updatedAt:Co()}),console.log("Deep Focus session suspended:",e)}catch(t){throw console.error("Error suspending Deep Focus session:",t),t}}async resumeSession(e){try{const t=_n(Je,this.collectionName,e);await Ca(t,{status:"active",resumedAt:Co(),updatedAt:Co()}),console.log("Deep Focus session resumed:",e)}catch(t){throw console.error("Error resuming Deep Focus session:",t),t}}async cleanupOrphanedSessions(e){var t;try{const r=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("status","==","active")),i=await kn(r);let a=0;for(const o of i.docs){const s=o.data(),l=((t=s.startTime)==null?void 0:t.toDate())||new Date,c=new Date,u=s.duration||0;await Ca(_n(Je,this.collectionName,o.id),{endTime:Co(),duration:u,status:"completed",updatedAt:Co()}),a++,console.log("🧹 Cleaned up orphaned session:",o.id,"Duration:",u,"minutes","(incremental only)")}return a>0&&console.log("✅ Cleaned up",a,"orphaned sessions"),a}catch(r){return console.error("❌ Error cleaning up orphaned sessions:",r),0}}async incrementSessionDuration(e,t=1){try{if(t<=0)return;const r=_n(Je,this.collectionName,e);await Ca(r,{duration:cve(t),updatedAt:Co()}),console.log(`⏱️ Deep Focus session ${e}: +${t} minute(s) added`)}catch(r){console.error("Error incrementing Deep Focus session duration:",r)}}}const Ga=new oet,set=Object.freeze(Object.defineProperty({__proto__:null,deepFocusSessionService:Ga},Symbol.toStringTag,{value:"Module"}));class cet{constructor(){zt(this,"collectionName","dailySiteUsage")}async backupDayData(e,t,r){var i;try{const a=`${e}_${t}`,o=_n(Je,this.collectionName,a),s=await Wd(o),l=new Date,c={userId:e,date:t,totalTime:r.totalTime||0,sitesVisited:r.sitesVisited||0,productivityScore:r.productivityScore||0,sites:this.processSiteData(r.sites||{}),syncedAt:l,extensionVersion:r.version||"1.0.0",createdAt:s.exists()&&((i=s.data())==null?void 0:i.createdAt)||l,updatedAt:l};await Jd(o,c,{merge:!0}),console.log(`✅ Backed up site usage data for ${t}`)}catch(a){throw console.error(`❌ Failed to backup site usage for ${t}:`,a),a}}async batchBackupData(e,t){try{const r=gC(Je),i=new Date;Object.entries(t).forEach(([a,o])=>{const s=`${e}_${a}`,l=_n(Je,this.collectionName,s),c={userId:e,date:a,totalTime:o.totalTime||0,sitesVisited:o.sitesVisited||0,productivityScore:o.productivityScore||0,sites:this.processSiteData(o.sites||{}),syncedAt:i,extensionVersion:o.version||"1.0.0",createdAt:i,updatedAt:i};r.set(l,c,{merge:!0})}),await r.commit(),console.log(`✅ Batch backed up ${Object.keys(t).length} days of data`)}catch(r){throw console.error("❌ Failed to batch backup data:",r),r}}async getUserData(e,t,r){try{const i=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("date",">=",t),vt("date","<=",r),ta("date","desc"));return(await kn(i)).docs.map(o=>{var s,l,c;return{id:o.id,...o.data(),createdAt:((s=o.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=o.data().updatedAt)==null?void 0:l.toDate())||new Date,syncedAt:((c=o.data().syncedAt)==null?void 0:c.toDate())||new Date}})}catch(i){throw console.error("❌ Failed to retrieve user site usage data:",i),i}}async getLastSyncInfo(e){try{const t=qt(Zt(Je,this.collectionName),vt("userId","==",e),ta("date","desc"),rve(1)),r=await kn(t);if(r.empty)return{lastSyncDate:null,totalDays:0};const i=r.docs[0],a=qt(Zt(Je,this.collectionName),vt("userId","==",e)),o=await kn(a);return{lastSyncDate:i.data().date,totalDays:o.size}}catch(t){return console.error("❌ Failed to get sync info:",t),{lastSyncDate:null,totalDays:0}}}async restoreToExtension(e,t){try{const r=`${e}_${t}`,i=_n(Je,this.collectionName,r),a=await Wd(i);if(!a.exists())throw new Error(`No data found for ${t}`);const o=a.data();return{totalTime:o.totalTime,sitesVisited:o.sitesVisited,productivityScore:o.productivityScore,sites:Object.fromEntries(Object.entries(o.sites).map(([s,l])=>[s,{timeSpent:l.timeSpent,visits:l.visits,category:l.category,lastVisit:l.lastVisit}]))}}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}}async cleanupOldData(e,t=90){try{const r=new Date;r.setDate(r.getDate()-t);const i=r.toISOString().split("T")[0],a=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("date","<",i)),o=await kn(a);if(o.empty)return 0;const s=gC(Je);return o.docs.forEach(l=>{s.delete(l.ref)}),await s.commit(),console.log(`🧹 Cleaned up ${o.size} old site usage records`),o.size}catch(r){throw console.error("❌ Failed to cleanup old data:",r),r}}processSiteData(e){const t={};return Object.entries(e).forEach(([r,i])=>{r&&i&&typeof i.timeSpent=="number"&&(t[r]={domain:r,timeSpent:Math.max(0,i.timeSpent),visits:Math.max(0,i.visits||0),category:i.category||"uncategorized",lastVisit:i.lastVisit?new Date(i.lastVisit):new Date})}),t}async getBatchBackupData(e,t){try{const r={},i=t.map(async a=>{const o=await this.getBackupData(e,a);o&&(r[a]=o)});return await Promise.all(i),r}catch(r){throw console.error("❌ Error getting batch backup data:",r),r}}async getBackupData(e,t){try{const r=`${e}_${t}`,i=_n(Je,this.collectionName,r),a=await Wd(i);if(!a.exists())return null;const o=a.data();return{id:a.id,...o,createdAt:o.createdAt instanceof Kr?o.createdAt.toDate():new Date(o.createdAt),updatedAt:o.updatedAt instanceof Kr?o.updatedAt.toDate():new Date(o.updatedAt),syncedAt:o.syncedAt instanceof Kr?o.syncedAt.toDate():new Date(o.syncedAt)}}catch(r){throw console.error("❌ Error getting backup data:",r),r}}async getAggregatedStats(e,t=30){try{const r=new Date().toISOString().split("T")[0],i=new Date;i.setDate(i.getDate()-t);const a=i.toISOString().split("T")[0],o=await this.getUserData(e,a,r);if(o.length===0)return{totalTime:0,avgDailyTime:0,topSites:[],productivityTrend:0};const s=o.reduce((w,_)=>w+_.totalTime,0),l=s/o.length,c={};o.forEach(w=>{Object.values(w.sites).forEach(_=>{c[_.domain]||(c[_.domain]={totalTime:0,count:0}),c[_.domain].totalTime+=_.timeSpent,c[_.domain].count++})});const u=Object.entries(c).map(([w,_])=>({domain:w,totalTime:_.totalTime,avgDaily:_.totalTime/_.count})).sort((w,_)=>_.totalTime-w.totalTime).slice(0,10),d=Math.floor(o.length/2),h=o.slice(0,d),f=o.slice(d),m=h.length>0?h.reduce((w,_)=>w+_.productivityScore,0)/h.length:0,v=f.length>0?f.reduce((w,_)=>w+_.productivityScore,0)/f.length:0,y=m>0?(v-m)/m*100:0;return{totalTime:s,avgDailyTime:l,topSites:u,productivityTrend:y}}catch(r){throw console.error("❌ Failed to get aggregated stats:",r),r}}async getDailyUsage(e,t,r){try{const i=t.toISOString().split("T")[0],a=r.toISOString().split("T")[0],o=qt(Zt(Je,this.collectionName),vt("userId","==",e),vt("date",">=",i),vt("date","<=",a),ta("date","desc"));return(await kn(o)).docs.map(l=>{var c,u,d;return{id:l.id,...l.data(),createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,syncedAt:((d=l.data().syncedAt)==null?void 0:d.toDate())||new Date}})}catch(i){throw console.error("❌ Failed to get daily usage:",i),i}}async getAllTimeDailyUsage(e){try{const t=qt(Zt(Je,this.collectionName),vt("userId","==",e),ta("date","desc"));return(await kn(t)).docs.map(i=>{var a,o,s;return{id:i.id,...i.data(),createdAt:((a=i.data().createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=i.data().updatedAt)==null?void 0:o.toDate())||new Date,syncedAt:((s=i.data().syncedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("❌ Failed to get all time daily usage:",t),t}}}const Mc=new cet;class qae{static async getTimeRangeData(e,t,r){try{const i=new Date().toISOString().split("T")[0],a=new Date(t),o=new Date(r);console.log("🔄 HybridDataService: Fetching data for range:",{startDate:t,endDate:r,today:i});const{pastDates:s,currentDate:l,futureDates:c}=this.categorizedDates(t,r,i);console.log("📅 Date categorization:",{pastDates:s.length,currentDate:l?"included":"not included",futureDates:c.length});const u={};if(s.length>0)try{const h=await Mc.getBatchBackupData(e,s);Object.entries(h).forEach(([f,m])=>{u[f]=this.convertFirebaseToHybrid(m)}),console.log("✅ Firebase data loaded for",Object.keys(h).length,"dates")}catch(h){console.warn("⚠️ Firebase data fetch failed:",h)}if(l){console.log("🎯 TODAY DETECTED - Attempting to fetch extension data...");try{if(Ht.isExtensionInstalled()){console.log("🔌 Extension is installed, fetching today stats...");const h=await Ht.getTodayStats();if(console.log("📊 Extension response:",h),h.success!==!1){const f=h.data||h;u[i]=this.convertExtensionToHybrid(f),console.log("✅ Extension data loaded for today:",i,u[i])}else console.warn("⚠️ Extension returned unsuccessful response:",h)}else console.log("⚠️ Extension not available for current date")}catch(h){console.warn("⚠️ Extension data fetch failed:",h);try{const f=await Mc.getBackupData(e,i);f&&(u[i]=this.convertFirebaseToHybrid(f),console.log("✅ Fallback to Firebase data for today"))}catch{console.warn("⚠️ Firebase fallback also failed")}}}else console.log("❌ TODAY NOT DETECTED - Extension data will not be fetched for current date");if(c.length>0)try{console.log("⚠️ Future dates detected - checking Firebase for test data:",c);const h=await Mc.getBatchBackupData(e,c);c.forEach(f=>{h[f]?(u[f]=this.convertFirebaseToHybrid(h[f]),console.log("✅ Found future test data in Firebase for:",f)):u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}catch(h){console.warn("⚠️ Failed to query Firebase for future dates:",h),c.forEach(f=>{u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}this.fillMissingDates(u,t,r);const d=this.aggregateData(u,t,r);return{success:!0,data:u,aggregated:d}}catch(i){return console.error("❌ HybridDataService: Failed to get time range data:",i),{success:!1,data:{},aggregated:{totalTime:0,sitesVisited:0,avgProductivityScore:0,sites:{},dateRange:{startDate:t,endDate:r,totalDays:0,daysCovered:0}}}}}static categorizedDates(e,t,r){const i=new Date(e),a=new Date(t),o=[],s=[];let l=!1;console.log("🔍 Date categorization debug:",{startDate:e,endDate:t,today:r,systemDate:new Date().toISOString().split("T")[0]});const c=new Date(i);for(;c<=a;){const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),h=String(c.getDate()).padStart(2,"0"),f=`${u}-${d}-${h}`;f<r?(o.push(f),console.log(`✅ Added to pastDates: ${f}`)):f===r?(l=!0,console.log(`✅ Set as currentDate: ${f}`)):(s.push(f),console.log(`⚠️ Added to futureDates: ${f}`)),c.setDate(c.getDate()+1)}return console.log("📊 Final categorization:",{pastDates:o,currentDate:l,futureDates:s,todayString:r}),{pastDates:o,currentDate:l,futureDates:s}}static convertFirebaseToHybrid(e){return{totalTime:e.totalTime,sitesVisited:e.sitesVisited,productivityScore:e.productivityScore,sites:Object.entries(e.sites).reduce((t,[r,i])=>(t[r]={timeSpent:i.timeSpent,visits:i.visits},t),{})}}static convertExtensionToHybrid(e){return{totalTime:e.totalTime||0,sitesVisited:e.sitesVisited||0,productivityScore:e.productivityScore||0,sites:e.sites||{}}}static fillMissingDates(e,t,r){const i=new Date(t),a=new Date(r),o=new Date(i);for(;o<=a;){const s=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0"),u=`${s}-${l}-${c}`;e[u]||(e[u]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}),o.setDate(o.getDate()+1)}}static aggregateData(e,t,r){Object.keys(e).sort();let i=0,a=0,o=0;const s={};Object.values(e).forEach(f=>{i+=f.totalTime,f.totalTime>0&&(a+=f.productivityScore,o++),Object.entries(f.sites).forEach(([m,v])=>{s[m]||(s[m]={timeSpent:0,visits:0}),s[m].timeSpent+=v.timeSpent,s[m].visits+=v.visits})});const l=Object.keys(s).length,c=o>0?a/o:0,u=new Date(t),d=new Date(r),h=Math.ceil((d.getTime()-u.getTime())/(1e3*60*60*24))+1;return{totalTime:i,sitesVisited:l,avgProductivityScore:Math.round(c),sites:s,dateRange:{startDate:t,endDate:r,totalDays:h,daysCovered:o}}}static async getCurrentDayData(){try{if(!Ht.isExtensionInstalled())return{success:!1,data:null};const e=await Ht.getTodayStats();if(e.success===!1)return{success:!1,data:null};const t=e.data||e;return{success:!0,data:this.convertExtensionToHybrid(t)}}catch(e){return console.error("❌ Failed to get current day data:",e),{success:!1,data:null}}}static convertToWebAppFormat(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:e.totalTime>0?Math.round(i.timeSpent/e.totalTime*100):0}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}}const Wae={required:["userId","domain","duration"]},eU={duration:5,reason:"manual_override",metadata:{overrideCount:1}};class uet{constructor(){zt(this,"collectionName","overrideSessions")}validateOverrideData(e){var i;const t=[];if(Wae.required.forEach(a=>{e[a]||t.push(`Missing required field: ${a}`)}),e.userId&&typeof e.userId!="string"&&t.push("userId must be a string"),e.domain&&typeof e.domain!="string"&&t.push("domain must be a string"),e.duration&&(typeof e.duration!="number"?t.push("duration must be a number"):(e.duration<1||e.duration>120)&&t.push("duration must be between 1 and 120 minutes")),t.length>0)return{isValid:!1,errors:t};const r={userId:e.userId,domain:e.domain,duration:e.duration||eU.duration,createdAt:Co(),reason:e.reason||eU.reason,metadata:{...eU.metadata,...e.metadata,extensionVersion:((i=e.metadata)==null?void 0:i.extensionVersion)||"1.0.0"}};return e.url&&(r.url=e.url),e.deepFocusSessionId&&(r.deepFocusSessionId=e.deepFocusSessionId),e.deviceInfo&&(r.deviceInfo=e.deviceInfo),{isValid:!0,errors:[],sanitizedData:r}}async createValidatedOverrideSession(e){try{console.log("🔄 Validating override session data:",e);const t=this.validateOverrideData(e);if(!t.isValid)return console.error("❌ Validation failed:",t.errors),{success:!1,errors:t.errors};console.log("✅ Validation passed, creating session:",t.sanitizedData);const r=await uD(Zt(Je,this.collectionName),t.sanitizedData);return console.log("✅ Override session created successfully:",{id:r.id,domain:t.sanitizedData.domain,duration:t.sanitizedData.duration+"min",userId:t.sanitizedData.userId,timestamp:new Date().toISOString()}),{success:!0,id:r.id}}catch(t){return console.error("❌ Error creating override session:",t),{success:!1,errors:[t instanceof Error?t.message:"Unknown error"]}}}async setupTestData(e){const t=[{userId:e,domain:"facebook.com",url:"https://facebook.com/feed",duration:5,reason:"manual_override",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"instagram.com",url:"https://instagram.com/explore",duration:3,reason:"break_time",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"youtube.com",url:"https://youtube.com/watch",duration:10,reason:"emergency",deviceInfo:{userAgent:"Test Browser",platform:"Web"}}];console.log("🔄 Setting up test override sessions...");for(const r of t){const i=await this.createValidatedOverrideSession(r);i.success?console.log(`✅ Test session created: ${r.domain} (${r.duration}min)`):console.error(`❌ Failed to create test session for ${r.domain}:`,i.errors)}}getSchemaInfo(){return{collectionName:this.collectionName,requiredFields:Wae.required,optionalFields:["url","deepFocusSessionId","reason","deviceInfo","metadata"],indexes:["userId + createdAt (composite)","domain (single)","userId (single)"]}}}const det=new uet;class het{constructor(){zt(this,"collectionName","overrideSessions")}async createOverrideSession(e){var r;const t=await det.createValidatedOverrideSession(e);if(!t.success){const i=`Failed to create override session: ${(r=t.errors)==null?void 0:r.join(", ")}`;throw console.error("❌",i),new Error(i)}return t.id}async getUserOverrides(e,t,r){var i;try{let a=qt(Zt(Je,this.collectionName),vt("userId","==",e),ta("createdAt","desc"));const s=(await kn(a)).docs.map(l=>{var c;return{id:l.id,...l.data(),createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date}});return t&&r?s.filter(l=>{const c=new Date(l.createdAt);return c>=t&&c<=r}):s}catch(a){if(console.error("Error fetching override sessions:",a),a instanceof Error&&((i=a.message)!=null&&i.includes("index"))){console.log("Falling back to simple query without orderBy...");try{const o=qt(Zt(Je,this.collectionName),vt("userId","==",e)),c=(await kn(o)).docs.map(u=>{var d;return{id:u.id,...u.data(),createdAt:((d=u.data().createdAt)==null?void 0:d.toDate())||new Date}}).sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime());return t&&r?c.filter(u=>{const d=new Date(u.createdAt);return d>=t&&d<=r}):c}catch(o){return console.error("Fallback query also failed:",o),[]}}return[]}}}const Kd=new het;class cl{static async getFaviconUrl(e,t={}){const{size:r=this.DEFAULT_SIZE,retryAttempts:i=2,timeout:a=this.TIMEOUT_MS,fallbackToDefault:o=!0}=t,s=this.cleanDomain(e),l=`${s}:${r}:sharp`;if(this.cache.has(l))return this.cache.get(l);try{const c=r*this.SIZE_MULTIPLIER,u=this.buildGoogleFaviconUrl(s,c);if(await this.validateFaviconUrl(u,a)){const h={url:u,isDefault:!1,source:"google"};return this.cache.set(l,h),h}if(o)return this.getFallbackFavicon(s,r,l);throw new Error("Google favicon service failed and fallback disabled")}catch(c){if(console.warn(`Failed to fetch favicon for ${s}:`,c),o)return this.getFallbackFavicon(s,r,l);throw c}}static async getFavicons(e,t={}){const r=new Map,i=5;for(let a=0;a<e.length;a+=i){const s=e.slice(a,a+i).map(async c=>{try{const u=await this.getFaviconUrl(c,t);return{domain:this.cleanDomain(c),result:u}}catch(u){return console.warn(`Failed to get favicon for ${c}:`,u),{domain:this.cleanDomain(c),result:this.getFallbackFavicon(this.cleanDomain(c),t.size||this.DEFAULT_SIZE)}}});(await Promise.all(s)).forEach(({domain:c,result:u})=>{r.set(c,u)}),a+i<e.length&&await this.delay(100)}return r}static async preloadFavicons(e,t=this.DEFAULT_SIZE){const r=e.map(this.cleanDomain).filter(i=>!this.cache.has(`${i}:${t}:sharp`));r.length>0&&await this.getFavicons(r,{size:t})}static buildGoogleFaviconUrl(e,t){const r=new URLSearchParams({domain:e,sz:t.toString()});return`${this.GOOGLE_FAVICON_BASE}?${r.toString()}`}static async validateFaviconUrl(e,t){return new Promise(r=>{const i=new Image,a=setTimeout(()=>{i.onload=null,i.onerror=null,r(!1)},t);i.onload=()=>{clearTimeout(a),i.width>16||i.height>16?r(!0):r(!1)},i.onerror=()=>{clearTimeout(a),r(!1)},i.src=e})}static getFallbackFavicon(e,t,r){const i=e.charAt(0).toUpperCase(),a=this.getColorForDomain(e),s={url:this.generateLetterAvatar(i,a,t),isDefault:!0,source:"letter"};return r&&this.cache.set(r,s),s}static generateLetterAvatar(e,t,r){const i=document.createElement("canvas");i.width=r,i.height=r;const a=i.getContext("2d");return a.fillStyle=t,a.fillRect(0,0,r,r),a.fillStyle="#ffffff",a.font=`bold ${Math.floor(r*.6)}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(e,r/2,r/2),i.toDataURL()}static getColorForDomain(e){const t=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#06B6D4","#EC4899","#84CC16","#F97316","#6366F1"];let r=0;for(let i=0;i<e.length;i++)r=e.charCodeAt(i)+((r<<5)-r);return t[Math.abs(r)%t.length]}static cleanDomain(e){return e.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].split(":")[0].toLowerCase()}static delay(e){return new Promise(t=>setTimeout(t,e))}static clearCache(){this.cache.clear()}static getCacheStats(){return{size:this.cache.size,domains:Array.from(this.cache.keys())}}static getDomainIcon(e){const t={"instagram.com":"ri-instagram-line","facebook.com":"ri-facebook-line","youtube.com":"ri-youtube-line","twitter.com":"ri-twitter-line","linkedin.com":"ri-linkedin-line","github.com":"ri-github-line","google.com":"ri-google-line","tiktok.com":"ri-music-line","reddit.com":"ri-reddit-line","pinterest.com":"ri-pinterest-line","snapchat.com":"ri-snapchat-line","whatsapp.com":"ri-whatsapp-line","telegram.org":"ri-telegram-line","discord.com":"ri-discord-line","zoom.us":"ri-video-line","netflix.com":"ri-netflix-line","amazon.com":"ri-amazon-line"};if(t[e])return t[e];for(const[r,i]of Object.entries(t))if(e.includes(r.split(".")[0]))return i;return"ri-global-line"}}zt(cl,"cache",new Map),zt(cl,"DEFAULT_SIZE",32),zt(cl,"GOOGLE_FAVICON_BASE","https://www.google.com/s2/favicons"),zt(cl,"TIMEOUT_MS",5e3),zt(cl,"SIZE_MULTIPLIER",3);cl.getFaviconUrl.bind(cl);cl.preloadFavicons.bind(cl);class fet{constructor(){zt(this,"collectionName","userBlockedSites")}async getUserBlockedSites(e){try{const t=_n(Je,this.collectionName,e),r=await Wd(t);return r.exists()?r.data().sites||[]:[]}catch(t){throw console.error("Failed to get blocked sites:",t),t}}async addBlockedSite(e,t){try{const r=await this.getUserBlockedSites(e),a={...{...t,icon:t.icon||cl.getDomainIcon(t.url),backgroundColor:t.backgroundColor||"#6B7280"},id:`site_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},o=[...r,a];await this.updateAllBlockedSites(e,o)}catch(r){throw console.error("Failed to add blocked site:",r),r}}async removeBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).filter(a=>a.id!==t);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to remove blocked site:",r),r}}async toggleBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).map(a=>a.id===t?{...a,isActive:!a.isActive}:a);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to toggle blocked site:",r),r}}async updateAllBlockedSites(e,t){var r,i;try{const a=_n(Je,this.collectionName,e),o=await Wd(a),s={userId:e,sites:t,metadata:{totalSites:t.length,createdAt:o.exists()?(i=(r=o.data())==null?void 0:r.metadata)==null?void 0:i.createdAt:Co(),updatedAt:Co(),syncedAt:Co(),version:"1.0"}};await Jd(a,s,{merge:!0})}catch(a){throw console.error("Failed to update blocked sites:",a),a}}}const Qh=new fet,pet=n=>{if(!n.startDate||!n.endDate)return null;const e=new Date(n.startDate),r=new Date(n.endDate).getTime()-e.getTime(),i=Math.ceil(r/(1e3*60*60*24)),a=new Date(e);a.setDate(a.getDate()-1),a.setHours(23,59,59,999);const o=new Date(a);o.setDate(o.getDate()-i+1),o.setHours(0,0,0,0);let s="previous period";switch(n.rangeType){case"today":s="yesterday";break;case"last 7 days":s="previous week";break;case"last 30 days":s="previous month";break;case"custom":s="previous period";break;default:s="previous period"}return{startDate:o,endDate:a,label:s}},Gk=(n,e)=>e===0?n>0?100:null:Math.round((n-e)/e*100),get=(n,e,t)=>{const r=Gk(n,e);return r===null?{percentage:null,direction:"same",label:n>0?"New data":"No comparison data",color:"text-gray-500",icon:"—"}:r>0?{percentage:r,direction:"up",label:`+${r}% from ${t}`,color:"text-green-500",icon:"—"}:r<0?{percentage:r,direction:"down",label:`${r}% from ${t}`,color:"text-red-500",icon:"—"}:{percentage:0,direction:"same",label:`Equal to ${t}`,color:"text-gray-500",icon:"—"}};let tU="deep-focus-storage-anonymous",Yae=null,nU=new Set;const Kae=async(n,e)=>{if(!nU.has(n)){nU.add(n);try{await e()}finally{nU.delete(n)}}},met=()=>{var n,e;try{const t=localStorage.getItem("user-store");if(t){const r=JSON.parse(t),i=(e=(n=r==null?void 0:r.state)==null?void 0:n.user)==null?void 0:e.uid;i&&i!==Yae&&tU==="deep-focus-storage-anonymous"&&(Yae=i,tU=`deep-focus-storage-${i}`,console.log("🔑 Storage key updated for user:",i))}}catch(t){console.warn("Failed to get user ID for deep focus storage:",t)}return tU},Xae=(n,e,t,r)=>{console.log("🕒 Creating new timers for session:",t);const i=e();i.timer&&(console.log("⚠️ Clearing existing timer"),clearInterval(i.timer)),i.secondTimer&&(console.log("⚠️ Clearing existing second timer"),clearInterval(i.secondTimer));const a=setInterval(()=>{const s=Math.floor((Date.now()-r.getTime())/1e3);n({activeSessionElapsedSeconds:s})},1e3),o=setInterval(async()=>{console.log("⏱️ Timer tick for session:",t);const s=e().activeSessionDuration+1;n({activeSessionDuration:s}),t&&(await Ga.incrementSessionDuration(t,1),console.log("⏱️ Deep Focus: +1 minute added to session",t))},6e4);n({timer:o,secondTimer:a}),console.log("✅ New timers created for session:",t)};typeof window<"u"&&window.addEventListener("message",n=>{var e;if(((e=n.data)==null?void 0:e.type)==="EXTENSION_BLOCKED_SITES_UPDATED"){console.log("📨 Web app received blocked sites update from extension");const t=Nu.getState();t.handleExtensionBlockedSitesUpdate&&t.handleExtensionBlockedSitesUpdate(n.data.payload.sites).catch(r=>{console.error("❌ Failed to handle extension blocked sites update:",r)})}});const Nu=Vf()(t5((n,e)=>({timeMetrics:{onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},dailyUsage:[],siteUsage:[],blockedSites:[],isExtensionConnected:!1,isDeepFocusActive:!1,currentSessionId:null,deepFocusSessions:[],totalSessionsCount:0,totalFocusTime:0,unsubscribe:null,hasRecoveredSession:!1,recoveryInProgress:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,isBackingUp:!1,lastBackupTime:null,backupError:null,isSessionPaused:!1,pausedAt:null,totalPausedTime:0,autoSessionManagement:!0,overrideSessions:[],isReloading:!1,comparisonData:null,isLoadingComparison:!1,comparisonError:null,setReloading:t=>n({isReloading:t}),loadExtensionData:async()=>{try{if(!Ht.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=await Ht.getTodayStats();if(t.success===!1)throw new Error(t.error||"Extension returned error");const r=t.data||t,i=Ht.mapExtensionDataToWebApp(r);n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,isExtensionConnected:!0}),await e().loadAllTimeDailyUsage()}catch(t){console.error("Extension data loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeExtensionData:async()=>{try{if(!Ht.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=Qt.getState().user;if(!(t!=null&&t.uid)){console.warn("⚠️ User not authenticated - skipping all time extension data load"),n({isExtensionConnected:!1});return}const r=await Mc.getAllTimeDailyUsage(t.uid),i=Ht.mapArrSiteUsage(r);console.log("khanhnq6",i),n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,dailyUsage:i.dailyUsage,isExtensionConnected:!0})}catch(t){console.error("Extension data all time loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeDailyUsage:async()=>{try{const{useUserStore:t}=await vr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Wo);return{useUserStore:s}},[]),r=t.getState().user;if(!(r!=null&&r.uid)){console.warn("⚠️ User not authenticated - skipping daily usage load");return}const i=new Date,a=new Date(i);a.setDate(i.getDate()-30);const o=await e().loadHybridTimeRangeData(a.toISOString().split("T")[0],i.toISOString().split("T")[0]);if(console.log("🔍 Hybrid response structure:",{hasData:!!o.data,dataKeys:o.data?Object.keys(o.data).length:0,hasAggregated:!!o.aggregated,sampleDate:o.data?Object.keys(o.data)[0]:null}),o.data&&Object.keys(o.data).length>0){const s=Object.entries(o.data).map(([l,c])=>({date:l,onScreenTime:Math.round(c.totalTime/6e4),workingTime:Math.round(c.totalTime/6e4*.6),deepFocusTime:0})).sort((l,c)=>l.date.localeCompare(c.date));n({dailyUsage:s}),console.log("✅ Loaded daily usage data for all time:",s.length,"days")}}catch(t){console.error("❌ Failed to load all time daily usage:",t)}},blockSiteInExtension:async t=>{try{Ht.isExtensionInstalled()&&await Ht.blockSite(t)}catch(r){console.error("Failed to block site in extension:",r)}},unblockSiteInExtension:async t=>{try{Ht.isExtensionInstalled()&&await Ht.unblockSite(t)}catch(r){console.error("Failed to unblock site in extension:",r)}},toggleBlockedSite:async t=>{const{useUserStore:r}=await vr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Wo);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await Qh.toggleBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site toggled and synced via loadBlockedSites"))},removeBlockedSite:async t=>{const{useUserStore:r}=await vr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Wo);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await Qh.removeBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site removed and synced via loadBlockedSites"))},addBlockedSite:async t=>{const{useUserStore:r}=await vr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Wo);return{useUserStore:a}},void 0),i=r.getState().user;if(i!=null&&i.uid)try{await Qh.addBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site added and synced via loadBlockedSites")}catch(a){console.error("Error in addBlockedSite:",a)}else console.error("No user logged in, cannot add blocked site")},loadBlockedSites:async t=>{try{const r=await Qh.getUserBlockedSites(t);if(n({blockedSites:r}),Ht.isExtensionInstalled())try{await Ht.forceSyncFromWebApp(),console.log("✅ Cleared default sites from extension");const i=r.map(a=>a.url);await Ht.syncBlockedSitesFromWebApp(i),console.log("🔄 Synced all blocking sites to extension:",i.length)}catch(i){console.warn("⚠️ Failed to sync blocking sites to extension:",i)}}catch(r){console.error("Failed to load blocked sites:",r)}},loadFocusStatus:async()=>{try{if(!Ht.isExtensionInstalled()||!await Ht.testConnection())return;const r=await Ht.getFocusStatus(),i=e().isDeepFocusActive;if(i&&!e().activeSessionId&&!e().recoveryInProgress){n({recoveryInProgress:!0});try{const{useUserStore:a}=await vr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Wo);return{useUserStore:s}},void 0),o=a.getState().user;if(o!=null&&o.uid){console.log("🧹 Cleaning up any orphaned sessions on page load...");const s=await Ga.cleanupOrphanedSessions(o.uid);s>0&&(console.log(`✅ Cleaned up ${s} orphaned session(s)`),await e().loadDeepFocusSessions(o.uid)),n({isDeepFocusActive:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,recoveryInProgress:!1}),console.log("🔄 Reset deep focus state to inactive (no active session)")}}catch(a){console.error("❌ Failed to handle session cleanup:",a),n({recoveryInProgress:!1})}}r.focusMode!==i&&(localStorage.getItem("deep-focus-storage")?(console.log("Prioritizing persisted local state over extension state"),i?await Ht.enableFocusMode():await Ht.disableFocusMode()):(n({isDeepFocusActive:r.focusMode}),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:r.focusMode}}))))}catch(t){console.error("Failed to load focus status:",t)}},initializeFocusSync:async()=>{if(!e().recoveryInProgress){n({recoveryInProgress:!0});try{const t=e().isDeepFocusActive;if(!Ht.isExtensionInstalled()){console.log("📱 Extension not available, using local state only"),n({recoveryInProgress:!1});return}await e().syncBlockedSitesToExtension();let r;try{r=await Promise.race([Ht.getFocusStatus(),new Promise((i,a)=>setTimeout(()=>a(new Error("Extension status timeout")),3e3))])}catch{console.warn("⚠️ Failed to get extension focus status, using local state"),n({recoveryInProgress:!1});return}if(r.focusMode!==t){const i="lastPriorityLog",a=sessionStorage.getItem(i),o=Date.now();(!a||o-parseInt(a)>1e4)&&(console.log("🔄 Prioritizing persisted local state over extension state"),sessionStorage.setItem(i,o.toString()));try{if(t){await Promise.race([Ht.enableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Enable focus timeout")),3e3))]);const s=e().blockedSites.filter(l=>l.isActive);for(const l of s)try{await Promise.race([Ht.blockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Block site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to block site during sync:",l.url,c)}}else{await Promise.race([Ht.disableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Disable focus timeout")),3e3))]);const s=e().blockedSites;for(const l of s)try{await Promise.race([Ht.unblockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Unblock site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to unblock site during sync:",l.url,c)}}console.log("✅ Extension focus mode synced successfully")}catch(s){console.warn("⚠️ Failed to sync extension focus mode (continuing anyway):",s)}}else console.log("✅ Extension and local focus states already match");window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:t}})),console.log("✅ Focus sync completed")}catch(t){console.error("❌ Focus sync failed:",t)}finally{n({recoveryInProgress:!1})}}},syncBlockedSitesToExtension:async()=>{try{if(!Ht.isExtensionInstalled()){console.log("📱 Extension not available, skipping sync");return}const r=e().blockedSites.map(a=>a.url);console.log("🔄 Syncing blocked sites to extension:",r.length,r.length===0?"(clearing all sites)":"sites");const i=await Ht.syncBlockedSitesFromWebApp(r);i.success?(console.log(`✅ Successfully synced ${i.synced} sites to extension`),i.failed&&i.failed>0&&console.warn(`⚠️ ${i.failed} sites failed to sync`),r.length===0&&console.log("🧹 All blocked sites cleared from extension")):console.warn("⚠️ Failed to sync blocked sites to extension:",i.error)}catch(t){console.error("❌ Error syncing blocked sites to extension:",t)}},handleExtensionBlockedSitesUpdate:async t=>{try{const{useUserStore:r}=await vr(async()=>{const{useUserStore:u}=await Promise.resolve().then(()=>Wo);return{useUserStore:u}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - cannot sync extension sites to web app");return}console.log("📨 Handling blocked sites update from extension:",t.length);const a=await Qh.getUserBlockedSites(i.uid),o=a.map(u=>u.url),s=t.filter(u=>!o.includes(u)),l=a.filter(u=>!t.includes(u.url));for(const u of s)try{await Qh.addBlockedSite(i.uid,{name:u.replace(/^www\./,"").split(".")[0]||u,url:u,icon:"ri-global-line",backgroundColor:"#6B7280",isActive:!0}),console.log("✅ Added site from extension:",u)}catch(d){console.warn("⚠️ Failed to add site from extension:",u,d)}for(const u of l)try{await Qh.removeBlockedSite(i.uid,u.id),console.log("✅ Removed site synced from extension:",u.url)}catch(d){console.warn("⚠️ Failed to remove site during extension sync:",u.url,d)}const c=await Qh.getUserBlockedSites(i.uid);n({blockedSites:c}),console.log("✅ Successfully synced blocked sites from extension to web app")}catch(r){console.error("❌ Failed to handle extension blocked sites update:",r)}},syncFocusStatus:t=>{n({isDeepFocusActive:t})},syncCompleteFocusState:async(t,r=[])=>{console.log("🔄 Syncing complete focus state:",{isActive:t,blockedSites:r.length});try{const{useUserStore:i}=await vr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Wo);return{useUserStore:o}},void 0),a=i.getState().user;if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping focus state sync");return}if(t){const o=e();let s=o.activeSessionId,l=o.activeSessionStartTime||new Date;if(!s)try{s=await Ga.startSession(a.uid),l=new Date,console.log("✅ New Deep Focus session started:",s),n({activeSessionId:s,activeSessionStartTime:l,activeSessionDuration:0,activeSessionElapsedSeconds:0}),Xae(n,e,s,l)}catch(u){console.error("❌ Failed to start Deep Focus session:",u)}const c=e().blockedSites.map(u=>({...u,isActive:r.length>0?r.includes(u.url):!0}));n({isDeepFocusActive:!0,blockedSites:c});try{await Qh.updateAllBlockedSites(a.uid,c),console.log("🔄 Synced blocking sites to Firebase:",c.length)}catch(u){console.warn("⚠️ Failed to sync blocking sites to Firebase:",u)}if(Ht.isExtensionInstalled()){const u=c.filter(d=>d.isActive).map(d=>d.url);if(u.length>0)try{console.log(`📦 Batch blocking ${u.length} sites...`);const d=await Ht.blockMultipleSites(u);if(d.success&&d.summary){const{successCount:h,failureCount:f}=d.summary;console.log(`✅ Batch blocking completed: ${h} sites blocked, ${f} failed`),f>0&&console.warn(`⚠️ ${f} sites failed to block, but continuing...`)}else{console.warn("⚠️ Batch blocking failed, falling back to individual blocking");let h=0,f=0;for(const m of u)try{await Promise.race([Ht.blockSite(m),new Promise((v,y)=>setTimeout(()=>y(new Error("Block site timeout")),2e3))]),h++}catch(v){f++,f<=3&&console.warn(`⚠️ Failed to block site during fallback: ${m}`,v)}f>3&&console.warn(`⚠️ ${f} additional sites failed to block (suppressed logs)`),console.log(`✅ Fallback blocking completed: ${h} sites blocked, ${f} failed`)}}catch(d){console.warn("⚠️ Both batch and fallback blocking failed:",d)}}console.log("✅ Focus state sync completed")}else{const o=e();if(o.activeSessionId)try{console.log("🛑 Ending active Deep Focus session:",o.activeSessionId),await Ga.endSession(o.activeSessionId),console.log("✅ Deep Focus session ended successfully");const{useUserStore:l}=await vr(async()=>{const{useUserStore:u}=await Promise.resolve().then(()=>Wo);return{useUserStore:u}},void 0),c=l.getState().user;c!=null&&c.uid&&await e().loadDeepFocusSessions(c.uid)}catch(l){console.error("❌ Failed to end Deep Focus session:",l)}o.timer&&clearInterval(o.timer),o.secondTimer&&clearInterval(o.secondTimer);const s=e().blockedSites.map(l=>({...l,isActive:!1}));n({isDeepFocusActive:!1,blockedSites:s,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,isSessionPaused:!1,pausedAt:null,totalPausedTime:0,timer:null,secondTimer:null});try{await Qh.updateAllBlockedSites(a.uid,s),console.log("🔄 Synced disabled blocking sites to Firebase")}catch(l){console.warn("⚠️ Failed to sync disabled blocking sites to Firebase:",l)}console.log("✅ Focus state disabled - session ended and state cleared")}}catch(i){console.error("❌ Failed to sync complete focus state:",i)}},enableDeepFocus:async(t="extension")=>{const r=e(),i=Qt.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - cannot enable deep focus");return}if(r.isDeepFocusActive){console.log("🟢 enableDeepFocus ignored – already active for user:",i.uid);return}if(r.activeSessionId){console.log("🟢 enableDeepFocus ignored – session already exists:",r.activeSessionId);return}if(r.recoveryInProgress){console.log("🟢 enableDeepFocus ignored – recovery in progress");return}try{console.log("🧹 Cleaning up any orphaned sessions before creating new session...");const a=await Ga.cleanupOrphanedSessions(i.uid);a>0&&console.log(`✅ Cleaned up ${a} orphaned session(s)`)}catch(a){console.warn("⚠️ Failed to cleanup orphaned sessions (continuing anyway):",a)}console.log("🟢 enableDeepFocus called for user:",i.uid,"Current state:",{isDeepFocusActive:r.isDeepFocusActive,extensionConnected:r.isExtensionConnected,activeSessionId:r.activeSessionId});try{let a=null,o=new Date;try{const l=Qt.getState().user;console.log("🔍 User state for session:",l?{uid:l.uid,email:l.email}:"No user"),l!=null&&l.uid?(console.log("📝 Starting Deep Focus session for user:",l.uid),a=await Ga.startSession(l.uid,t),o=new Date,console.log("✅ Deep Focus session started:",a),n({activeSessionId:a,activeSessionStartTime:o,activeSessionDuration:0,activeSessionElapsedSeconds:0}),Xae(n,e,a,o)):console.warn("⚠️ No user found, skipping session creation")}catch(l){console.error("❌ Failed to start Deep Focus session:",l)}const s=r.blockedSites.map(l=>({...l,isActive:!0}));n({isDeepFocusActive:!0,currentSessionId:a,blockedSites:s}),Ht.isExtensionInstalled()?Kae("enable-focus",async()=>{console.log("📡 Attempting to enable focus mode in extension...");try{await Ht.enableFocusMode(),console.log("✅ Extension focus mode enabled");const c=s.filter(u=>u.isActive).map(u=>u.url);if(c.length>0)try{console.log(`📦 Batch blocking ${c.length} sites during enable...`);const u=await Ht.blockMultipleSites(c);if(u.success&&u.summary){const{successCount:d,failureCount:h}=u.summary;console.log(`✅ Batch blocking during enable completed: ${d} sites blocked, ${h} failed`)}else console.warn("⚠️ Batch blocking during enable failed, continuing anyway")}catch(u){console.warn("⚠️ Batch blocking during enable failed (continuing anyway):",u)}window.postMessage({type:"WEB_APP_FOCUS_STATE_CHANGED",payload:{focusMode:!0,timestamp:Date.now(),source:"web-app-store"}},"*"),console.log("📡 Sent WEB_APP_FOCUS_STATE_CHANGED message for redundant sync")}catch(l){console.warn("⚠️ Extension communication failed (Deep Focus still enabled locally):",l)}}):console.log("⚠️ Extension not installed, Deep Focus enabled in web app only"),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:!0,fromExtension:!1}})),console.log("✅ Deep Focus enabled successfully - all sites are now blocked",a?`Session ID: ${a}`:"")}catch(a){throw console.error("❌ Failed to enable Deep Focus:",a),console.error("🔍 Error details:",{name:a instanceof Error?a.name:"Unknown",message:a instanceof Error?a.message:String(a),stack:a instanceof Error?a.stack:"No stack trace"}),a}},disableDeepFocus:async()=>{const t=e(),r=Qt.getState().user;if(!(r!=null&&r.uid)){console.warn("⚠️ User not authenticated - cannot disable deep focus");return}console.log("🔴 disableDeepFocus called for user:",r.uid,"Current state:",{isDeepFocusActive:t.isDeepFocusActive,extensionConnected:t.isExtensionConnected,activeSessionId:t.activeSessionId});try{if(t.activeSessionId)try{await Ga.endSession(t.activeSessionId),console.log("✅ Deep Focus session ended:",t.activeSessionId)}catch(a){console.error("❌ Failed to end Deep Focus session:",a)}t.timer&&clearInterval(t.timer),t.secondTimer&&clearInterval(t.secondTimer),n({timer:null,secondTimer:null});const i=t.blockedSites.map(a=>({...a,isActive:!1}));n({isDeepFocusActive:!1,currentSessionId:null,blockedSites:i,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,isSessionPaused:!1,pausedAt:null,totalPausedTime:0}),Ht.isExtensionInstalled()&&Kae("disable-focus",async()=>{console.log("📡 Attempting to disable focus mode in extension...");try{await Ht.disableFocusMode(),console.log("✅ Extension focus mode disabled");for(const a of i)try{await t.unblockSiteInExtension(a.url)}catch(o){console.warn("⚠️ Failed to unblock site in extension (continuing anyway):",a.url,o)}window.postMessage({type:"WEB_APP_FOCUS_STATE_CHANGED",payload:{focusMode:!1,timestamp:Date.now(),source:"web-app-store"}},"*"),console.log("📡 Sent WEB_APP_FOCUS_STATE_CHANGED message for redundant sync")}catch(a){console.warn("⚠️ Extension communication failed (Deep Focus still disabled locally):",a)}}),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:!1,fromExtension:!1}})),console.log("✅ Deep Focus disabled successfully - all sites are now unblocked")}catch(i){throw console.error("❌ Failed to disable Deep Focus:",i),console.error("🔍 Error details:",{name:i instanceof Error?i.name:"Unknown",message:i instanceof Error?i.message:String(i),stack:i instanceof Error?i.stack:"No stack trace"}),i}},toggleDeepFocus:async()=>{const t=e();t.isDeepFocusActive?await t.disableDeepFocus():await t.enableDeepFocus()},syncWithExtension:async t=>{try{if(!Ht.isExtensionInstalled())return;t?await Ht.enableFocusMode():await Ht.disableFocusMode()}catch(r){console.error("Failed to sync with extension:",r)}},loadDeepFocusSessions:async(t,r,i)=>{try{console.log("🔍 DeepFocusStore: Loading sessions for userId:",t),console.log("🔍 DeepFocusStore: Date filters:",{startDate:r,endDate:i});const a=await Ga.getUserSessions(t,r,i);console.log("📊 DeepFocusStore: Loaded sessions:",a.length,"sessions"),console.log("📊 DeepFocusStore: Session details:",a.map(c=>({id:c.id,status:c.status,duration:c.duration,createdAt:c.createdAt,userId:c.userId})));const o=a.filter(c=>c.status==="completed").length,s=a.filter(c=>c.status==="completed"&&c.duration),l=s.reduce((c,u)=>c+(u.duration||0),0);console.log("📊 DeepFocusStore: Completed sessions count:",o),console.log("📊 DeepFocusStore: Completed with duration:",s.length),console.log("📊 DeepFocusStore: Total time:",l,"minutes"),n({deepFocusSessions:a,totalSessionsCount:o,totalFocusTime:l})}catch(a){console.error("❌ Failed to load Deep Focus sessions:",a)}},subscribeToSessions:t=>{console.log("DeepFocusStore: Subscribing to sessions for userId:",t);const r=Ga.subscribeToUserSessions(t,i=>{console.log("DeepFocusStore: Subscription received sessions:",i);const a=i.filter(s=>s.status==="completed").length,o=i.filter(s=>s.status==="completed"&&s.duration).reduce((s,l)=>s+(l.duration||0),0);console.log("DeepFocusStore: Subscription completed count:",a,"Total time:",o),n({deepFocusSessions:i,totalSessionsCount:a,totalFocusTime:o})});n({unsubscribe:r})},unsubscribeFromSessions:()=>{const t=e();t.unsubscribe&&(t.unsubscribe(),n({unsubscribe:null}))},pauseSessionOnInactivity:async t=>{const r=e();if(!(!r.isDeepFocusActive||r.isSessionPaused||!r.autoSessionManagement)){console.log("🛑 Pausing deep focus session due to inactivity:",t,"seconds");try{r.timer&&clearInterval(r.timer),r.secondTimer&&clearInterval(r.secondTimer),n({isSessionPaused:!0,pausedAt:new Date,timer:null,secondTimer:null}),console.log("✅ Deep focus session paused due to inactivity")}catch(i){console.error("❌ Failed to pause deep focus session:",i)}}},resumeSessionOnActivity:async()=>{const t=e();if(!(!t.isDeepFocusActive||!t.isSessionPaused||!t.autoSessionManagement)){console.log("▶️ Resuming deep focus session after activity detected");try{const r=t.pausedAt?Math.floor((Date.now()-t.pausedAt.getTime())/1e3):0,i=t.totalPausedTime+r;let a=null,o=null;t.activeSessionId&&t.activeSessionStartTime&&(o=setInterval(()=>{const s=Math.floor((Date.now()-t.activeSessionStartTime.getTime())/1e3)-e().totalPausedTime;n({activeSessionElapsedSeconds:Math.max(0,s)})},1e3),a=setInterval(async()=>{const s=e().activeSessionDuration+1;n({activeSessionDuration:s}),t.activeSessionId&&(await Ga.incrementSessionDuration(t.activeSessionId,1),console.log("⏱️ Deep Focus: +1 minute added to session",t.activeSessionId))},6e4)),n({isSessionPaused:!1,pausedAt:null,totalPausedTime:i,timer:a,secondTimer:o}),console.log("✅ Deep focus session resumed, total paused time:",i,"seconds")}catch(r){console.error("❌ Failed to resume deep focus session:",r)}}},setAutoSessionManagement:t=>{n({autoSessionManagement:t}),console.log("🔧 Auto session management:",t?"enabled":"disabled")},backupTodayData:async()=>{if(!e().isBackingUp)try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting backup of today's data...");const{useUserStore:r}=await vr(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>Wo);return{useUserStore:s}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, skipping backup");return}if(!Ht.isExtensionInstalled()){console.log("📱 Extension not available, using fallback backup mode");const s=new Date().toISOString().split("T")[0],l={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"fallback"};await Mc.backupDayData(i.uid,s,l),n({lastBackupTime:new Date,backupError:"Extension offline - using fallback mode"}),console.log("✅ Fallback backup completed");return}console.log("📡 Getting today's stats from extension...");const a=await Promise.race([Ht.getTodayStats(),new Promise((s,l)=>setTimeout(()=>l(new Error("Extension backup timeout")),15e3))]);if(a.success===!1)throw new Error(a.error||"Failed to get extension data");const o=new Date().toISOString().split("T")[0];console.log("💾 Saving backup data to Firebase..."),await Mc.backupDayData(i.uid,o,a.data||a),n({lastBackupTime:new Date,backupError:null}),console.log("✅ Successfully backed up today's data")}catch(r){if(console.error("❌ Failed to backup today's data:",r),r instanceof Error&&r.message.includes("timeout")){console.log("🔄 Extension timeout detected, attempting fallback backup...");try{const{useUserStore:i}=await vr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Wo);return{useUserStore:o}},void 0),a=i.getState().user;if(a!=null&&a.uid){const o=new Date().toISOString().split("T")[0],s={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"timeout-fallback"};await Mc.backupDayData(a.uid,o,s),n({lastBackupTime:new Date,backupError:"Extension timeout - fallback backup used"}),console.log("✅ Fallback backup after timeout completed");return}}catch(i){console.error("❌ Fallback backup also failed:",i)}}n({backupError:r instanceof Error?r.message:"Backup failed"})}finally{n({isBackingUp:!1})}},performDailyBackup:async()=>{if(!e().isBackingUp)try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting daily backup...");const{useUserStore:r}=await vr(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>Wo);return{useUserStore:a}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, skipping daily backup");return}await e().backupTodayData(),await Mc.cleanupOldData(i.uid,90),n({lastBackupTime:new Date}),console.log("✅ Successfully performed daily backup")}catch(r){console.error("❌ Failed to perform daily backup:",r),n({backupError:r instanceof Error?r.message:"Daily backup failed"})}finally{n({isBackingUp:!1})}},initializeDailyBackup:()=>{const t=async()=>{const{useUserStore:r}=await vr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Wo);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.log("⏳ Waiting for user authentication before starting backup scheduler..."),setTimeout(t,2e3);return}console.log("✅ User authenticated, starting backup scheduler for:",i.uid),setInterval(()=>{e().backupTodayData()},144e5),(()=>{const o=new Date,s=new Date(o);s.setDate(s.getDate()+1),s.setHours(2,0,0,0);const l=s.getTime()-o.getTime();setTimeout(()=>{e().performDailyBackup(),setInterval(()=>{e().performDailyBackup()},24*60*60*1e3)},l)})(),setTimeout(()=>{e().backupTodayData()},5e3)};t()},restoreFromBackup:async t=>{try{const{useUserStore:r}=await vr(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>Wo);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid))throw new Error("User not authenticated");const a=await Mc.restoreToExtension(i.uid,t);return console.log(`✅ Restored data for ${t}:`,a),a}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}},getBackupStatus:async()=>{try{const{useUserStore:t}=await vr(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>Wo);return{useUserStore:i}},void 0),r=t.getState().user;return r!=null&&r.uid?await Mc.getLastSyncInfo(r.uid):{lastSyncDate:null,totalDays:0}}catch(t){return console.error("❌ Failed to get backup status:",t),{lastSyncDate:null,totalDays:0}}},retryBackup:async()=>{console.log("🔄 Manual backup retry triggered"),Ht.getCircuitBreakerStatus().state==="OPEN"&&Ht.resetCircuitBreaker(),setTimeout(()=>{e().backupTodayData()},1e3)},getSyncStatus:()=>{const t=e(),r=Ht.getCircuitBreakerStatus();return{isBackingUp:t.isBackingUp,lastBackupTime:t.lastBackupTime,backupError:t.backupError,circuitBreaker:r,canRetry:!t.isBackingUp&&r.state!=="OPEN"}},loadHybridTimeRangeData:async(t,r)=>{try{const{useUserStore:i}=await vr(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>Wo);return{useUserStore:l}},void 0),a=i.getState().user;if(!(a!=null&&a.uid))throw console.warn("⚠️ User not authenticated - skipping hybrid data load"),new Error("User not authenticated");console.log("🔄 Loading hybrid data for range:",{startDate:t,endDate:r,userId:a.uid});const o=await qae.getTimeRangeData(a.uid,t,r);if(!o.success)throw new Error("Failed to fetch hybrid data");const s=qae.convertToWebAppFormat({totalTime:o.aggregated.totalTime,sitesVisited:o.aggregated.sitesVisited,productivityScore:o.aggregated.avgProductivityScore,sites:o.aggregated.sites});return console.log("✅ Hybrid data loaded successfully:",{dateRange:o.aggregated.dateRange,totalSites:Object.keys(o.aggregated.sites).length,totalTime:Math.round(o.aggregated.totalTime/(1e3*60))}),{timeMetrics:s.timeMetrics,siteUsage:s.siteUsage,productivityScore:s.productivityScore,aggregated:o.aggregated,dailyData:o.data}}catch(i){throw console.error("❌ Failed to load hybrid time range data:",i),i}},recordOverrideSession:async(t,r)=>{try{const{useUserStore:i}=await vr(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>Wo);return{useUserStore:l}},void 0),a=i.getState().user,o=e();if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping override session recording");return}console.log("🎯 Recording override session:",{domain:t,duration:r,userId:a.uid});const s={id:`temp-${Date.now()}`,userId:a.uid,domain:t,duration:r,deepFocusSessionId:o.activeSessionId||void 0,createdAt:new Date};n(l=>({overrideSessions:[s,...l.overrideSessions]}));try{const l=await Kd.createOverrideSession({userId:a.uid,domain:t,duration:r,deepFocusSessionId:o.activeSessionId||void 0});console.log("✅ Override session saved to Firebase:",l),n(c=>({overrideSessions:c.overrideSessions.map(u=>u.id===s.id?{...u,id:l}:u)}))}catch(l){console.warn("⚠️ Firebase save failed, keeping local override:",l)}}catch(i){console.error("Failed to record override session:",i)}},loadOverrideSessions:async(t,r,i)=>{try{if(!t){console.warn("⚠️ No userId provided - skipping override sessions load"),n({overrideSessions:[]});return}const a=await Kd.getUserOverrides(t,r,i);n({overrideSessions:a}),console.log("✅ Loaded override sessions:",a.length)}catch(a){console.warn("Could not load override sessions (this is normal if index is still building):",a),n({overrideSessions:[]})}},loadComparisonData:async t=>{try{const{useUserStore:r}=await vr(async()=>{const{useUserStore:k}=await Promise.resolve().then(()=>Wo);return{useUserStore:k}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - skipping comparison data load"),n({comparisonData:null,comparisonError:"User not authenticated"});return}if(t.rangeType==="all time"){n({comparisonData:null,comparisonError:null});return}n({isLoadingComparison:!0,comparisonError:null});const a=pet(t);if(!a){n({comparisonData:null,isLoadingComparison:!1,comparisonError:"Invalid date range for comparison"});return}console.log("🔍 Loading comparison data:",{current:{start:eg(t.startDate),end:eg(t.endDate),type:t.rangeType},comparison:{start:eg(a.startDate),end:eg(a.endDate),label:a.label}});const o=eg(t.startDate),s=eg(t.endDate),l=await e().loadHybridTimeRangeData(o,s),c=await e().loadWorkSessionsForComparison(i.uid,t.startDate,t.endDate),u=await e().loadDeepFocusSessionsForComparison(i.uid,t.startDate,t.endDate),d=await Kd.getUserOverrides(i.uid,t.startDate,t.endDate),h={onScreenTime:l.timeMetrics.onScreenTime,workingTime:c,deepFocusTime:u,overrideTime:d.reduce((k,M)=>k+M.duration,0)},f=eg(a.startDate),m=eg(a.endDate),v=await e().loadHybridTimeRangeData(f,m),y=await e().loadWorkSessionsForComparison(i.uid,a.startDate,a.endDate),w=await e().loadDeepFocusSessionsForComparison(i.uid,a.startDate,a.endDate),_=await Kd.getUserOverrides(i.uid,a.startDate,a.endDate),T={onScreenTime:v.timeMetrics.onScreenTime,workingTime:y,deepFocusTime:w,overrideTime:_.reduce((k,M)=>k+M.duration,0)},A={onScreenTime:Gk(h.onScreenTime,T.onScreenTime),workingTime:Gk(h.workingTime,T.workingTime),deepFocusTime:Gk(h.deepFocusTime,T.deepFocusTime),overrideTime:Gk(h.overrideTime,T.overrideTime)};n({comparisonData:{current:h,previous:T,percentageChanges:A},isLoadingComparison:!1,comparisonError:null}),console.log("✅ Comparison data loaded successfully:",{label:a.label,currentPeriod:{start:o,end:s,metrics:h},previousPeriod:{start:f,end:m,metrics:T},changes:A})}catch(r){console.error("❌ Failed to load comparison data:",r),n({comparisonData:null,isLoadingComparison:!1,comparisonError:r instanceof Error?r.message:"Unknown error"})}},loadWorkSessionsForComparison:async(t,r,i)=>{try{const{useDashboardStore:a}=await vr(async()=>{const{useDashboardStore:s}=await Promise.resolve().then(()=>lBe);return{useDashboardStore:s}},void 0),{workSessions:o}=a.getState();return o.filter(s=>s.sessionType==="pomodoro"||s.sessionType==="manual").filter(s=>{const l=new Date(s.date);return l>=r&&l<=i}).reduce((s,l)=>s+(l.duration||0),0)}catch(a){return console.warn("Failed to load work sessions for comparison:",a),0}},loadDeepFocusSessionsForComparison:async(t,r,i)=>{try{return(await Ga.getUserSessions(t,r,i)).filter(o=>o.status==="completed"&&o.duration).reduce((o,s)=>o+(s.duration||0),0)}catch(a){return console.warn("Failed to load deep focus sessions for comparison:",a),0}}}),{name:met(),partialize:n=>({...n,timer:null,secondTimer:null,isReloading:!1})})),vet=Object.freeze(Object.defineProperty({__proto__:null,useDeepFocusStore:Nu},Symbol.toStringTag,{value:"Module"}));let rU=!1,nO=!1;const iU={current:!1},W_=new Set,rO=new Set,yet=500;let Zae=0;const bet=3,wet=1e3,iO=new Map,pxe=async(n,e,t=bet,r=wet)=>{try{await e(),iO.delete(n)}catch(i){const a=iO.get(n)||0;if(a<t)return console.log(`🔄 Retry attempt ${a+1} for operation: ${n}`),iO.set(n,a+1),await new Promise(o=>setTimeout(o,r)),pxe(n,e,t,r);throw iO.delete(n),i}},gxe=K.createContext(void 0),xet=({children:n})=>{const e=K.useRef(!1),[t,r]=ve.useState(!1),{syncFocusStatus:i,loadFocusStatus:a,isDeepFocusActive:o,enableDeepFocus:s,disableDeepFocus:l,syncCompleteFocusState:c,recordOverrideSession:u,loadOverrideSessions:d}=Nu(),{isInitialized:h,user:f}=Qt();K.useEffect(()=>{if(e.current||rU||nO)return;(async()=>{if(!(!(f!=null&&f.uid)||!h||iU.current)){iU.current=!0,rU=!0,e.current=!0;try{console.log("🚀 CENTRALIZED Deep Focus initialization for session recovery..."),await a(),console.log("✅ Centralized Focus status loaded, checking for active session recovery...");const{deepFocusSessionService:T}=await vr(async()=>{const{deepFocusSessionService:P}=await Promise.resolve().then(()=>set);return{deepFocusSessionService:P}},void 0),A=Nu.getState(),C=localStorage.getItem("deep-focus-storage"),k=C?JSON.parse(C):null;if((k==null?void 0:k.isDeepFocusActive)&&!A.activeSessionId&&(console.log("📱 New tab detected via context, syncing deep focus state..."),Nu.setState({isDeepFocusActive:k.isDeepFocusActive,activeSessionId:k.activeSessionId,activeSessionStartTime:new Date(k.activeSessionStartTime),activeSessionDuration:k.activeSessionDuration,activeSessionElapsedSeconds:k.activeSessionElapsedSeconds,isSessionPaused:k.isSessionPaused,pausedAt:k.pausedAt?new Date(k.pausedAt):null,totalPausedTime:k.totalPausedTime})),A.isDeepFocusActive&&!A.activeSessionId&&!A.recoveryInProgress){console.log("🔄 Context: Deep Focus active but no session - cleaning up and resetting state...");const P=await T.cleanupOrphanedSessions(f.uid);P>0&&console.log(`✅ Context: Cleaned up ${P} orphaned session(s)`),Nu.setState({isDeepFocusActive:!1,activeSessionId:null,activeSessionStartTime:null,activeSessionDuration:0,activeSessionElapsedSeconds:0,timer:null,secondTimer:null,hasRecoveredSession:!1,recoveryInProgress:!1}),console.log("✅ Context: Reset deep focus state to inactive (no active session)")}nO=!0,r(!0)}catch(T){console.error("❌ Error during centralized deep focus initialization:",T)}finally{rU=!1,iU.current=!1}}})()},[f==null?void 0:f.uid,h,a]),K.useEffect(()=>{var T,A,C;if(!h||!(f!=null&&f.uid))return;const _=async k=>{var M,P;try{const O=k.data||k;if((O==null?void 0:O.type)==="RECORD_OVERRIDE_SESSION"&&((M=O==null?void 0:O.source)!=null&&M.includes("make10000hours")||(P=O==null?void 0:O.source)!=null&&P.includes("extension"))){console.log("🌐 GLOBAL: RECORD_OVERRIDE_SESSION received in DeepFocusContext:",O),console.log("🌐 GLOBAL: Current page:",window.location.pathname),console.log("🌐 GLOBAL: User state:",{user:f==null?void 0:f.uid,isLoggedIn:!!f});const{domain:j,duration:L,userId:B,timestamp:$,extensionTimestamp:Y}=O.payload||{},G=`${j}_${L}_${Y||$||Date.now()}`;if(W_.has(G)){console.log("🔄 GLOBAL: Skipping duplicate override session message:",G);return}if(W_.add(G),W_.size>100){const te=Array.from(W_).slice(-50);W_.clear(),te.forEach(re=>W_.add(re))}const W=B||(f==null?void 0:f.uid);if(console.log("🌐 GLOBAL: Override session data validation:",{domain:j,duration:L,incomingUserId:B,currentUserUid:f==null?void 0:f.uid,effectiveUserId:W,timestamp:$,hasUser:!!f}),!W){console.error("❌ GLOBAL: No user ID available for override session");return}if(!j||!L){console.error("❌ GLOBAL: Missing required override session data:",{domain:j,duration:L});return}try{console.log("📝 GLOBAL: Recording override session from extension:",j,L,"for user:",W),await u(j,L),console.log("✅ GLOBAL: Override session recorded successfully"),window.dispatchEvent(new CustomEvent("overrideSessionRecorded",{detail:{domain:j,duration:L,userId:W,timestamp:Date.now()}}))}catch(X){console.error("❌ GLOBAL: Failed to record override session:",X),console.error("🔍 GLOBAL: Override session error details:",{name:X==null?void 0:X.name,message:X==null?void 0:X.message,stack:X==null?void 0:X.stack,domain:j,duration:L,userId:W})}}}catch(O){console.error("Error in global extension message handler:",O)}};console.log("🌐 GLOBAL: Setting up override session recording listeners"),window.addEventListener("message",_);try{typeof window.chrome<"u"&&((C=(A=(T=window.chrome)==null?void 0:T.runtime)==null?void 0:A.onMessage)!=null&&C.addListener)&&window.chrome.runtime.onMessage.addListener(_)}catch(k){console.warn("Could not set up Chrome extension listener in context:",k)}return()=>{var k,M,P;try{console.log("🌐 GLOBAL: Cleaning up override session recording listeners"),window.removeEventListener("message",_),typeof window.chrome<"u"&&((P=(M=(k=window.chrome)==null?void 0:k.runtime)==null?void 0:M.onMessage)!=null&&P.removeListener)&&window.chrome.runtime.onMessage.removeListener(_)}catch(O){console.warn("Error cleaning up global extension listeners:",O)}}},[f==null?void 0:f.uid,h,u]),K.useEffect(()=>{if(!h||!(f!=null&&f.uid)){console.log("🔄 Waiting for user initialization before setting up message handler...");return}const _=async T=>{var C,k,M;const A=Date.now();try{if(((C=T.data)==null?void 0:C.type)==="EXTENSION_FOCUS_STATE_CHANGED"||((k=T.data)==null?void 0:k.type)==="FOCUS_STATE_CHANGED"){if(A-Zae<yet){console.log("🔄 Skipping message due to debounce");return}Zae=A;const P=`${T.data.extensionId}_${(M=T.data.payload)==null?void 0:M.isActive}_${A}`;if(rO.has(P)){console.log("🔄 Skipping duplicate message:",P);return}rO.add(P);const O=5*60*1e3;rO.forEach(B=>{const[,,$]=B.split("_");A-parseInt($)>O&&rO.delete(B)}),console.log("🔄 Processing focus state change:",T.data);const{isActive:j,blockedSites:L=[]}=T.data.payload;await pxe(`sync_focus_${P}`,async()=>{await c(j,L),window.dispatchEvent(new CustomEvent("focusStateHandled",{detail:{isActive:j,timestamp:A}}))})}}catch(P){console.error("Error handling extension message:",P),window.dispatchEvent(new CustomEvent("focusStateError",{detail:{error:P,timestamp:A}}))}};return window.addEventListener("message",_),()=>{window.removeEventListener("message",_)}},[h,f==null?void 0:f.uid,c]),K.useEffect(()=>{if(!h||!nO)return;let _=0;const T=500,A=O=>{const j=Date.now();if(j-_<T)return;_=j;const{isActive:L}=O.detail;console.log("🔄 Context: Internal focus change event:",L),O.detail.fromExtension||i(L)},C=O=>{console.log("🔄 Context: Extension focus state handled centrally:",O.detail)};let k=document.hidden,M=0;const P=()=>{const O=Date.now();O-M<2e3||(M=O,!document.hidden&&k&&(console.log("📖 Context: Page became visible - checking for extension state updates"),setTimeout(()=>{a()},1e3)),k=document.hidden)};return window.addEventListener("deepFocusChanged",A),window.addEventListener("extensionFocusHandled",C),document.addEventListener("visibilitychange",P),()=>{window.removeEventListener("deepFocusChanged",A),window.removeEventListener("extensionFocusHandled",C),document.removeEventListener("visibilitychange",P)}},[i,a,h,nO,c]);const m=K.useCallback(async _=>{const T=Nu.getState();if(!(f!=null&&f.uid)){console.warn("⚠️ Context: User not authenticated - cannot enable deep focus");return}if(T.isDeepFocusActive){console.log("🟢 Context: enableDeepFocus ignored - already active");return}if(T.activeSessionId){console.log("🟢 Context: enableDeepFocus ignored - session already exists:",T.activeSessionId);return}if(T.recoveryInProgress){console.log("🟢 Context: enableDeepFocus ignored - recovery in progress");return}console.log("🟢 Context: enableDeepFocus called for user:",f.uid);try{await s(_)}catch(A){throw console.error("❌ Context: Failed to enable deep focus:",A),A}},[f==null?void 0:f.uid,s]),v=K.useCallback(async()=>{if(!(f!=null&&f.uid)){console.warn("⚠️ Context: User not authenticated - cannot disable deep focus");return}console.log("🔴 Context: disableDeepFocus called for user:",f.uid);try{await l()}catch(_){throw console.error("❌ Context: Failed to disable deep focus:",_),_}},[f==null?void 0:f.uid,l]),y=K.useCallback(async()=>{o?await v():await m()},[o,m,v]),w={isDeepFocusActive:o,enableDeepFocus:m,disableDeepFocus:v,toggleDeepFocus:y,isInitialized:t};return x.jsx(gxe.Provider,{value:w,children:n})},mxe=()=>{const n=K.useContext(gxe);if(n===void 0)throw new Error("useDeepFocusContext must be used within a DeepFocusProvider");return n},n5=({size:n="medium",className:e="",showLabel:t=!0,labelPosition:r="right",disabled:i=!1,pageTitle:a,showPageTitle:o=!1,pageTitleClassName:s=""})=>{const{isDeepFocusActive:l,enableDeepFocus:c,disableDeepFocus:u}=mxe(),h={small:{width:"w-[80px]",height:"h-[24px]",textSize:"text-xs",padding:"px-2",toggle:"w-4 h-4",togglePos:"left-[calc(100%-18px)]"},medium:{width:"w-[120px]",height:"h-[33px]",textSize:"text-sm",padding:"pl-[10.5px]",toggle:"w-6 h-6",togglePos:"left-[calc(100%-27px)]"},large:{width:"w-[140px]",height:"h-[40px]",textSize:"text-base",padding:"pl-3",toggle:"w-7 h-7",togglePos:"left-[calc(100%-30px)]"}}[n],f=async v=>{if(!i)try{v.target.checked?await c("web"):await u()}catch(y){console.error("Failed to toggle Deep Focus:",y),setTimeout(()=>{const w=v.target;w&&(w.checked=!v.target.checked)},100)}},m=x.jsx(ni,{text:"Toggle Deep Focus Mode (Shift + D)",placement:"bottom",children:x.jsxs("label",{className:`relative inline-flex items-center cursor-pointer group ${i?"cursor-not-allowed opacity-50":""}`,children:[x.jsx("input",{type:"checkbox",id:"deep-focus-toggle",name:"deep-focus-toggle",className:"sr-only peer",checked:l,onChange:f,disabled:i}),x.jsx("div",{className:`${h.width} ${h.height} flex items-center rounded-full relative transform transition-all duration-500 ease-in-out ${l?`bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start ${h.padding}`:"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,style:{transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:x.jsx("span",{className:`${h.textSize} font-medium relative z-10 whitespace-nowrap transform transition-all duration-500 ease-in-out ${l?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,style:{transition:"color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1), text-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:l?"Deep Focus":"Focus Off"})}),x.jsx("div",{className:`absolute ${h.toggle} bg-white rounded-full shadow-lg transform transition-all duration-500 ease-in-out ${l?h.togglePos+" shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`,style:{transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), left 0.5s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"}})]})});return o&&a?x.jsxs("div",{className:`flex items-center ${e}`,children:[x.jsx("div",{className:`text-lg font-semibold transform transition-all duration-500 ease-in-out ${l?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"} ${s}`,style:{transition:"background 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:a}),x.jsx("div",{className:"ml-4 flex items-center",children:m})]}):t?x.jsxs("div",{className:`flex items-center ${r==="left"?"flex-row-reverse":"flex-row"} ${e}`,children:[m,t&&x.jsx("span",{className:`${h.textSize} font-medium text-text-primary ${r==="left"?"mr-3":"ml-3"}`,children:"Deep Focus Mode"})]}):x.jsx("div",{className:e,children:m})},gH=({className:n=""})=>{const e=Zg(),t=ss(),{toggleFocusMode:r,isLeftSidebarOpen:i,toggleLeftSidebar:a}=pl(),o=()=>{switch(t.pathname){case"/pomodoro":return"Pomodoro Timer";case"/projects":return"Task Management";case"/dashboard":return"Productivity Insights";case"/calendar":return"Calendar";case"/deep-focus":return"Deep Focus";case"/dashboard/settings":return"Settings";default:return"Make 10000 Hours"}};return x.jsxs("div",{className:`h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative ${n}`,children:[x.jsxs("div",{className:"flex items-center",children:[!i&&x.jsx("button",{onClick:a,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"menu-line",size:20})})}),x.jsx(n5,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:o()})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/pomodoro"?void 0:()=>e("/pomodoro"),"aria-label":t.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task Management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/projects"?void 0:()=>e("/projects"),"aria-label":t.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/dashboard"?void 0:()=>e("/dashboard"),"aria-label":t.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/calendar"?void 0:()=>e("/calendar"),"aria-label":t.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/deep-focus"?void 0:()=>e("/deep-focus"),"aria-label":t.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"brain-line",size:20})})})})]})]})},_et=({className:n=""})=>{const{isFocusMode:e,toggleFocusMode:t}=pl(),r=ei(c=>c.currentTime),i=ei(c=>c.currentTask),{tasks:a,projects:o}=Ut(),s=i&&i.projectId?o.find(c=>c.id===i.projectId):null,l=T7(r);return e?x.jsxs("div",{className:`fixed inset-0 bg-black z-50 ${n}`,children:[x.jsx("button",{id:"exit-focus-mode-btn",name:"exit-focus-mode",className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all",onClick:t,"aria-label":"Exit Focus Mode",children:x.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-white",children:x.jsx("i",{className:"ri-fullscreen-exit-line"})})}),x.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[x.jsx("div",{className:"text-[120px] font-bold text-white mb-8 font-mono tracking-wider",children:l}),x.jsx("h2",{className:"text-2xl text-white/90 mb-4",children:i?i.title:"No task selected"}),x.jsxs("div",{className:"flex items-center gap-8 text-lg text-white/70",children:[x.jsx("div",{children:s?`Project: ${s.name}`:"No project selected"}),x.jsx("div",{children:i?`${i.timeSpent}/${i.timeEstimated}m`:"--/--m"})]})]})]}):null},vxe=6048e5,Tet=864e5,Qae=Symbol.for("constructDateFrom");function Kl(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Qae in n?n[Qae](e):n instanceof Date?new n.constructor(e):new Date(e)}function Bs(n,e){return Kl(e||n,n)}function RW(n,e,t){const r=Bs(n,t==null?void 0:t.in);return isNaN(e)?Kl(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function NW(n,e,t){const r=Bs(n,t==null?void 0:t.in);if(isNaN(e))return Kl(n,NaN);if(!e)return r;const i=r.getDate(),a=Kl(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let Eet={};function fM(){return Eet}function jg(n,e){var s,l,c,u;const t=fM(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Bs(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function M2(n,e){return jg(n,{...e,weekStartsOn:1})}function yxe(n,e){const t=Bs(n,e==null?void 0:e.in),r=t.getFullYear(),i=Kl(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=M2(i),o=Kl(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=M2(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function Jae(n){const e=Bs(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function r5(n,...e){const t=Kl.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function P2(n,e){const t=Bs(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function Aet(n,e,t){const[r,i]=r5(t==null?void 0:t.in,n,e),a=P2(r),o=P2(i),s=+a-Jae(a),l=+o-Jae(o);return Math.round((s-l)/Tet)}function ket(n,e){const t=yxe(n,e),r=Kl(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),M2(r)}function Cet(n,e,t){return RW(n,e*7,t)}function Det(n){return Kl(n,Date.now())}function oo(n,e,t){const[r,i]=r5(t==null?void 0:t.in,n,e);return+P2(r)==+P2(i)}function Iet(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Met(n){return!(!Iet(n)&&typeof n!="number"||isNaN(+Bs(n)))}function bxe(n,e){const t=Bs(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Pet(n,e){const[t,r]=r5(n,e.start,e.end);return{start:t,end:r}}function O2(n,e){const{start:t,end:r}=Pet(e==null?void 0:e.in,n);let i=+t>+r;const a=i?+t:+r,o=i?r:t;o.setHours(0,0,0,0);let s=1;const l=[];for(;+o<=a;)l.push(Kl(t,o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i?l.reverse():l}function wxe(n,e){const t=Bs(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Oet(n,e){const t=Bs(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function LW(n,e){var s,l,c,u;const t=fM(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Bs(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const Ret={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Net=(n,e,t)=>{let r;const i=Ret[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function aU(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Let={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jet={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fet={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$et={date:aU({formats:Let,defaultWidth:"full"}),time:aU({formats:jet,defaultWidth:"full"}),dateTime:aU({formats:Fet,defaultWidth:"full"})},Bet={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Uet=(n,e,t,r)=>Bet[n];function QA(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,s=t!=null&&t.width?String(t.width):o;i=n.formattingValues[s]||n.formattingValues[o]}else{const o=n.defaultWidth,s=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[s]||n.values[o]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const Vet={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zet={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Het={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Get={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qet={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wet={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yet=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ket={ordinalNumber:Yet,era:QA({values:Vet,defaultWidth:"wide"}),quarter:QA({values:zet,defaultWidth:"wide",argumentCallback:n=>n-1}),month:QA({values:Het,defaultWidth:"wide"}),day:QA({values:Get,defaultWidth:"wide"}),dayPeriod:QA({values:qet,defaultWidth:"wide",formattingValues:Wet,defaultFormattingWidth:"wide"})};function JA(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(s)?Zet(s,d=>d.test(o)):Xet(s,d=>d.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function Xet(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Zet(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Qet(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let o=n.valueCallback?n.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const Jet=/^(\d+)(th|st|nd|rd)?/i,ett=/\d+/i,ttt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ntt={any:[/^b/i,/^(a|c)/i]},rtt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},itt={any:[/1/i,/2/i,/3/i,/4/i]},att={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ott={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},stt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ltt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ctt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},utt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dtt={ordinalNumber:Qet({matchPattern:Jet,parsePattern:ett,valueCallback:n=>parseInt(n,10)}),era:JA({matchPatterns:ttt,defaultMatchWidth:"wide",parsePatterns:ntt,defaultParseWidth:"any"}),quarter:JA({matchPatterns:rtt,defaultMatchWidth:"wide",parsePatterns:itt,defaultParseWidth:"any",valueCallback:n=>n+1}),month:JA({matchPatterns:att,defaultMatchWidth:"wide",parsePatterns:ott,defaultParseWidth:"any"}),day:JA({matchPatterns:stt,defaultMatchWidth:"wide",parsePatterns:ltt,defaultParseWidth:"any"}),dayPeriod:JA({matchPatterns:ctt,defaultMatchWidth:"any",parsePatterns:utt,defaultParseWidth:"any"})},htt={code:"en-US",formatDistance:Net,formatLong:$et,formatRelative:Uet,localize:Ket,match:dtt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ftt(n,e){const t=Bs(n,e==null?void 0:e.in);return Aet(t,Oet(t))+1}function ptt(n,e){const t=Bs(n,e==null?void 0:e.in),r=+M2(t)-+ket(t);return Math.round(r/vxe)+1}function xxe(n,e){var u,d,h,f;const t=Bs(n,e==null?void 0:e.in),r=t.getFullYear(),i=fM(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(h=i.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=Kl((e==null?void 0:e.in)||n,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const s=jg(o,e),l=Kl((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=jg(l,e);return+t>=+s?r+1:+t>=+c?r:r-1}function gtt(n,e){var s,l,c,u;const t=fM(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=xxe(n,e),a=Kl((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),jg(a,e)}function mtt(n,e){const t=Bs(n,e==null?void 0:e.in),r=+jg(t,e)-+gtt(t,e);return Math.round(r/vxe)+1}function Jr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const vv={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Jr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Jr(t+1,2)},d(n,e){return Jr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Jr(n.getHours()%12||12,e.length)},H(n,e){return Jr(n.getHours(),e.length)},m(n,e){return Jr(n.getMinutes(),e.length)},s(n,e){return Jr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Jr(i,e.length)}},Y_={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eoe={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return vv.y(n,e)},Y:function(n,e,t,r){const i=xxe(n,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Jr(o,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Jr(a,e.length)},R:function(n,e){const t=yxe(n);return Jr(t,e.length)},u:function(n,e){const t=n.getFullYear();return Jr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Jr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Jr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return vv.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Jr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=mtt(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Jr(i,e.length)},I:function(n,e,t){const r=ptt(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Jr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):vv.d(n,e)},D:function(n,e,t){const r=ftt(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Jr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Jr(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Jr(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Jr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Y_.noon:r===0?i=Y_.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Y_.evening:r>=12?i=Y_.afternoon:r>=4?i=Y_.morning:i=Y_.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return vv.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):vv.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Jr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Jr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):vv.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):vv.s(n,e)},S:function(n,e){return vv.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return noe(r);case"XXXX":case"XX":return Lb(r);case"XXXXX":case"XXX":default:return Lb(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return noe(r);case"xxxx":case"xx":return Lb(r);case"xxxxx":case"xxx":default:return Lb(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+toe(r,":");case"OOOO":default:return"GMT"+Lb(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+toe(r,":");case"zzzz":default:return"GMT"+Lb(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Jr(r,e.length)},T:function(n,e,t){return Jr(+n,e.length)}};function toe(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Jr(a,2)}function noe(n,e){return n%60===0?(n>0?"-":"+")+Jr(Math.abs(n)/60,2):Lb(n,e)}function Lb(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Jr(Math.trunc(r/60),2),a=Jr(r%60,2);return t+i+e+a}const roe=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_xe=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vtt=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return roe(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",roe(r,e)).replace("{{time}}",_xe(i,e))},ytt={p:_xe,P:vtt},btt=/^D+$/,wtt=/^Y+$/,xtt=["D","DD","YY","YYYY"];function _tt(n){return btt.test(n)}function Stt(n){return wtt.test(n)}function Ttt(n,e,t){const r=Ett(n,e,t);if(console.warn(r),xtt.includes(n))throw new RangeError(r)}function Ett(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Att=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ktt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ctt=/^'([^]*?)'?$/,Dtt=/''/g,Itt=/[a-zA-Z]/;function mn(n,e,t){var u,d,h,f;const r=fM(),i=r.locale??htt,a=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=Bs(n,t==null?void 0:t.in);if(!Met(s))throw new RangeError("Invalid time value");let l=e.match(ktt).map(m=>{const v=m[0];if(v==="p"||v==="P"){const y=ytt[v];return y(m,i.formatLong)}return m}).join("").match(Att).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:Mtt(m)};if(eoe[v])return{isToken:!0,value:m};if(v.match(Itt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(Stt(v)||_tt(v))&&Ttt(v,e,String(n));const y=eoe[v[0]];return y(s,v,i.localize,c)}).join("")}function Mtt(n){const e=n.match(Ctt);return e?e[1].replace(Dtt,"'"):n}function Ptt(n,e,t){const[r,i]=r5(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function ww(n,e){return oo(Kl(n,n),Det(n))}function Ott(n,e,t){return NW(n,-1,t)}const Rtt=({isOpen:n,triggerRef:e,contentRef:t,preferredPlacement:r="bottom",offset:i=4,viewportPadding:a=8,modalThreshold:o=200})=>{const[s,l]=K.useState({top:0,left:0,transformOrigin:"top left",placement:"bottom"}),[c,u]=K.useState(!1),d=K.useRef(s),h=K.useCallback(()=>{if(!e.current||!t.current||!n)return;const f=e.current,m=t.current,v=f.getBoundingClientRect(),y=m.getBoundingClientRect(),w={width:window.innerWidth,height:window.innerHeight,scrollX:window.pageXOffset||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.documentElement.scrollTop},_=v.top,T=w.height-v.bottom;if(v.left,w.width-v.right,y.height>Math.max(_-a,T-a)&&y.height>o){l({top:Math.max(a,(w.height-y.height)/2)+w.scrollY,left:Math.max(a,(w.width-y.width)/2)+w.scrollX,transformOrigin:"center",placement:"modal"});return}let C,k=r,M="top";const P=T>=y.height+a,O=_>=y.height+a;r==="bottom"&&P?(C=v.bottom+i+w.scrollY,k="bottom"):r==="top"&&O?(C=v.top-y.height-i+w.scrollY,k="top",M="bottom"):P?(C=v.bottom+i+w.scrollY,k="bottom"):O?(C=v.top-y.height-i+w.scrollY,k="top",M="bottom"):T>_?(C=Math.min(v.bottom+i+w.scrollY,w.height-y.height-a+w.scrollY),C+y.height>w.height+w.scrollY-a&&(C=w.height+w.scrollY-y.height-4),k="bottom"):(C=Math.max(a+w.scrollY,v.top-y.height-i+w.scrollY),C<w.scrollY+a&&(C=w.scrollY+4),k="top",M="bottom");let j,L="left";j=v.left+w.scrollX,j+y.width>w.width-a&&(j=w.width-y.width-a+w.scrollX,j<=v.right+w.scrollX&&(j=v.right-y.width+w.scrollX,L="right")),j=Math.max(a+w.scrollX,j);const B={top:C,left:j,transformOrigin:`${M} ${L}`,placement:k};d.current=B,l(B),u(!0)},[n,e,t,r,i,a,o,c]);return K.useEffect(()=>{d.current=s},[s]),K.useEffect(()=>{n&&(u(!1),setTimeout(()=>{h()},0))},[n,h]),K.useEffect(()=>{n||u(!1)},[n]),K.useEffect(()=>{if(!n)return;const f=()=>h(),m=()=>{requestAnimationFrame(f)};return window.addEventListener("resize",m),window.addEventListener("scroll",m,!0),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),window.removeEventListener("orientationchange",m)}},[n,h,t]),{...s,isReady:c,recalculate:h}},Ntt=({onTimeSelect:n,showTimezone:e=!1,initialTime:t="09:00 - 10:00",is24Hour:r=!0})=>{const[i,a]=K.useState(()=>t.includes(" - ")?t.split(" - ")[0]:t),[o,s]=K.useState(()=>{if(t.includes(" - "))return t.split(" - ")[1];const[h,f]=t.split(":");return`${((parseInt(h)+1)%24).toString().padStart(2,"0")}:${f}`}),l=h=>{a(h),d(h,o)},c=h=>{s(h),d(i,h)},u=K.useRef(""),d=K.useCallback((h,f)=>{const m=`${h} - ${f}`;n&&m!==u.current&&(u.current=m,n(m))},[n]);return K.useEffect(()=>{if(t.includes(" - ")){const[h,f]=t.split(" - ");(h!==i||f!==o)&&(a(h),s(f),d(h,f))}},[t,d,i,o]),x.jsxs("div",{className:"space-y-3 border-t border-border pt-3",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Time format"}),x.jsx("span",{className:"text-xs text-text-secondary",children:r?"24 hour":"12 hour"})]}),e&&x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Timezone"}),x.jsx("span",{className:"text-xs text-text-secondary",children:Intl.DateTimeFormat().resolvedOptions().timeZone})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Start time"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"time",value:i,onChange:h=>l(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),x.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-time-line text-xs"})})]})]}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"End time"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"time",value:o,onChange:h=>c(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),x.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-time-line text-xs"})})]})]})]})]})},Ltt=({selectedDate:n,onDateSelect:e,includeTime:t=!1,onTimeSelect:r,onTimeToggle:i,onConfirm:a,onClear:o,onClose:s,className:l="",minDate:c,maxDate:u,initialMonth:d=new Date,showTimezone:h=!1,initialStartTime:f="09:00",initialEndTime:m="10:00",triggerRef:v,isOpen:y=!0})=>{const[w,_]=K.useState(d),[T,A]=K.useState(t),[C,k]=K.useState("00:00 - 00:00"),M=K.useRef(null),P=Rtt({isOpen:y,triggerRef:v||{current:null},contentRef:M,preferredPlacement:"bottom",offset:8,viewportPadding:12,modalThreshold:9999}),O=wxe(w),j=bxe(w),L=jg(O,{weekStartsOn:0}),B=LW(j,{weekStartsOn:0}),$=O2({start:L,end:B});K.useEffect(()=>{A(t)},[t]),K.useEffect(()=>{const le=setTimeout(()=>{P.recalculate()},100);return()=>clearTimeout(le)},[T,P.recalculate]),K.useEffect(()=>{f&&m&&k(`${f} - ${m}`)},[f,m]),K.useEffect(()=>{if(!y||!s)return;const le=ye=>{const fe=ye.target;M.current&&!M.current.contains(fe)&&(v!=null&&v.current)&&!v.current.contains(fe)&&s()},ee=ye=>{ye.key==="Escape"&&s()};return document.addEventListener("mousedown",le,!0),document.addEventListener("keydown",ee),()=>{document.removeEventListener("mousedown",le,!0),document.removeEventListener("keydown",ee)}},[y,s,v]);const Y=()=>_(Ott(w)),G=()=>_(NW(w,1)),W=le=>{e(le),(le.getMonth()!==w.getMonth()||le.getFullYear()!==w.getFullYear())&&_(le)},X=le=>{A(le),i==null||i(le)},te=le=>{k(le),r==null||r(le)},re=()=>{k("00:00 - 00:00"),o==null||o()},z=()=>{a==null||a()};if(!y)return null;const ae=()=>{const le="bg-background-secondary rounded-lg shadow-lg border border-border w-[300px] fixed transition-all duration-200 ease-out z-50",ee=P.isReady?"opacity-100":"opacity-0 pointer-events-none";switch(P.placement){case"top":return`${le} ${ee} animate-slide-up`;case"bottom":default:return`${le} ${ee} animate-slide-down`}};return x.jsx("div",{ref:M,className:`${ae()} ${l}`,style:{top:`${P.top}px`,left:`${P.left}px`,transformOrigin:P.transformOrigin},"data-datepicker":!0,children:x.jsxs("div",{className:"p-3",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:Y,type:"button",children:x.jsx("i",{className:"ri-arrow-left-s-line text-base"})}),x.jsx("h3",{className:"text-sm font-medium text-text-primary",children:mn(w,"MMMM yyyy")}),x.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:G,type:"button",children:x.jsx("i",{className:"ri-arrow-right-s-line text-base"})})]}),x.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(le=>x.jsx("div",{className:"h-6 flex items-center justify-center text-xs font-medium text-text-secondary",children:le},le))}),x.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:$.map((le,ee)=>{const ye=n&&oo(le,n),fe=ww(le),Ce=c&&le<c||u&&le>u,at=le.getMonth()===w.getMonth();return x.jsx("button",{onClick:()=>!Ce&&W(le),disabled:Ce,className:`
                    h-7 w-7 flex items-center justify-center text-xs rounded-full transition-colors
                    ${Ce?"text-text-secondary opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-background-container"}
                    ${at?"text-text-primary":"text-text-secondary opacity-60"}
                    ${ye?"text-white font-medium":""}
                    ${!ye&&fe?"text-[#BB5F5A] font-medium":""}
                  `,style:ye?{backgroundColor:"#BB5F5A"}:{},children:mn(le,"d")},ee)})}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Include time"}),x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:T,onChange:le=>X(le.target.checked),className:"sr-only"}),x.jsx("div",{className:`relative w-9 h-5 rounded-full transition-colors ${T?"":"bg-background-container"}`,style:T?{backgroundColor:"#BB5F5A"}:{},children:x.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${T?"translate-x-4":"translate-x-0"}`})})]})]}),T&&x.jsx(Ntt,{onTimeSelect:te,showTimezone:h,initialTime:C,is24Hour:!0})]}),x.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[x.jsx("button",{onClick:re,className:"px-3 py-1.5 text-xs text-text-secondary hover:text-text-primary transition-colors",children:"Clear"}),x.jsx("button",{onClick:z,className:"px-4 py-1.5 text-xs text-white rounded-md transition-colors hover:opacity-90",style:{backgroundColor:"#BB5F5A"},children:"Confirm"})]})]})})},jtt=K.createContext(void 0),Ftt=({children:n})=>{const[e,t]=K.useState(new Date),[r,i]=K.useState(null),[a,o]=K.useState(!1),s=K.useCallback(()=>{t(null),i(null),o(!1)},[]),l=K.useCallback(()=>{if(!e)return"";const u=mn(e,"MMM dd, yyyy");return!a||!r?u:`${u}, ${r}`},[e,r,a]),c={selectedDate:e,selectedTime:r,setSelectedDate:t,setSelectedTime:i,clearSelection:s,getFormattedDateTime:l,isTimeIncluded:a,setIsTimeIncluded:o};return x.jsx(jtt.Provider,{value:c,children:n})},mH=["#81B214","#33B679","#C21505","#176B87","#CB8697","#55B7C0","#B66283","#CC9000","#419197","#B02C00","#FFD700","#FF7F50"],Sxe=()=>{const n=Math.floor(Math.random()*mH.length);return mH[n]},$tt=n=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(n);function Btt(n){const e={"linkedin.com":"#0A66C2","facebook.com":"#1877F2","twitter.com":"#1DA1F2","github.com":"#24292F","youtube.com":"#FF0000","instagram.com":"#E4405F","google.com":"#4285F4","microsoft.com":"#00A4EF","apple.com":"#000000","amazon.com":"#FF9900","make10000hours.com":"#FF6B6B","ycombinator.com":"#FF6600","copilot.microsoft.com":"#0078D4","readdy.ai":"#7C3AED","substack.com":"#FF6719","cursor.com":"#000000","news.ycombinator.com":"#FF6600","console.firebase.google.com":"#FFA000","firebase.google.com":"#FFA000","reddit.com":"#FF4500","netflix.com":"#E50914","spotify.com":"#1ED760","twitch.tv":"#9146FF","pinterest.com":"#E60023","discord.com":"#5865F2","slack.com":"#4A154B","zoom.us":"#2D8CFF","notion.so":"#000000","figma.com":"#F24E1E","dribbble.com":"#EA4C89","behance.net":"#1769FF","medium.com":"#00ab6c","dev.to":"#0A0A0A","stackoverflow.com":"#F58025","gitlab.com":"#FC6D26","bitbucket.org":"#0052CC","dropbox.com":"#0061FF","drive.google.com":"#4285F4","onedrive.live.com":"#0078D4","icloud.com":"#007AFF","trello.com":"#0079BF","asana.com":"#273347","monday.com":"#FF3D71","airtable.com":"#18BFFF","canva.com":"#00C4CC","adobe.com":"#FF0000","stripe.com":"#635BFF","paypal.com":"#00457C","shopify.com":"#7AB55C","wordpress.com":"#21759B","squarespace.com":"#000000","wix.com":"#0C6EBD","webflow.com":"#4353FF","vercel.com":"#000000","netlify.com":"#00C7B7","heroku.com":"#430098","aws.amazon.com":"#FF9900","azure.microsoft.com":"#0078D4","cloud.google.com":"#4285F4","digitalocean.com":"#0080FF","linode.com":"#00A95C","vultr.com":"#007BFC"};if(e[n])return e[n];for(const[t,r]of Object.entries(e))if(n.includes(t.split(".")[0]))return r;return null}function Txe(n,e){const t=Btt(n);if(t)return t;if(e)return e;const r=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#2ba8f0"],i=n.split("").reduce((a,o)=>a+o.charCodeAt(0),0);return r[i%r.length]}function Exe(n){try{return n.includes("://")?new URL(n).hostname:n}catch{return n}}const ay=({task:n,status:e,initialProjectId:t,initialStartTime:r,initialEndTime:i,isAllDay:a,onCancel:o,onSave:s})=>{var mi;const l=Aye(),{addTask:c,updateTask:u,deleteTask:d}=l,h=Ut(Xe=>Xe.projects),f=Ut(Xe=>Xe.addProject),{user:m}=Qt(),[v,y]=K.useState((n==null?void 0:n.title)||""),[w,_]=K.useState((n==null?void 0:n.projectId)||""),[T,A]=K.useState(((mi=n==null?void 0:n.timeSpent)==null?void 0:mi.toString())||"0"),[C,k]=K.useState(()=>n!=null&&n.timeEstimated?n.timeEstimated.toString():r&&i?P3e(r,i).toString():""),[M,P]=K.useState((n==null?void 0:n.description)||""),[O,j]=K.useState(!1),[L,B]=K.useState(!1),[$,Y]=K.useState(!1),[G,W]=K.useState(!1),[X,te]=K.useState(!1),[re,z]=K.useState(""),[ae,le]=K.useState(()=>{if(n!=null&&n.scheduledDate)return n.scheduledDate;if(r){const Xe=r.getFullYear(),Be=String(r.getMonth()+1).padStart(2,"0"),Ke=String(r.getDate()).padStart(2,"0");return`${Xe}-${Be}-${Ke}`}return n?"":new Date().toISOString().split("T")[0]}),[ee,ye]=K.useState(!1),[fe,Ce]=K.useState(()=>a===!0?!1:(n==null?void 0:n.includeTime)!==void 0?n.includeTime:!!(r&&i)),[at,Le]=K.useState(()=>{if(n!=null&&n.scheduledStartTime)return n.scheduledStartTime;if(r){const Xe=String(r.getHours()).padStart(2,"0"),Be=String(r.getMinutes()).padStart(2,"0");return`${Xe}:${Be}`}return"09:00"}),[we,be]=K.useState(()=>{if(n!=null&&n.scheduledEndTime)return n.scheduledEndTime;if(i){const Xe=String(i.getHours()).padStart(2,"0"),Be=String(i.getMinutes()).padStart(2,"0");return`${Xe}:${Be}`}return"10:00"}),ge=K.useRef(null),he=K.useRef(null),Ge=K.useRef(null),je=K.useRef(null),rt=K.useRef(null),bt=K.useRef(null),lt=K.useRef(null),cn=K.useRef(null),Ct=h.find(Xe=>Xe.id==="no-project"),En=()=>n!=null&&n.projectId?n.projectId:t||localStorage.getItem("lastUsedProjectId")||"no-project";K.useEffect(()=>{if(n!=null&&n.projectId||_(En()),!Ct&&m&&!n&&Ut.getState().addProject({name:"No Project",color:"#6B7280"}),ge.current){ge.current.focus();const Xe=ge.current.value.length;ge.current.setSelectionRange(Xe,Xe)}},[]),K.useEffect(()=>{X&&Ge.current&&Ge.current.focus()},[X]);const jn=()=>{if(he.current&&"showPicker"in he.current&&typeof he.current.showPicker=="function")try{he.current.showPicker()}catch{console.log("showPicker not supported or failed")}},Re=Xe=>{Xe==="create-new"?(te(!0),_(""),z("")):(te(!1),_(Xe),z(""),B(!1))},Jt=()=>{te(!1),z(""),_(En())},hn=K.useCallback(Xe=>{requestAnimationFrame(()=>{Xe.style.height="auto",Xe.style.height=`${Xe.scrollHeight}px`})},[]);K.useEffect(()=>{ge.current&&hn(ge.current)},[v,hn]),K.useEffect(()=>{bt.current&&hn(bt.current)},[M,hn]);const Mt=async()=>{if(j(!1),B(!1),Y(!1),W(!1),!v.trim()){j(!0),ge.current&&ge.current.focus();return}if(X&&!re.trim()){B(!0),Ge.current&&Ge.current.focus();return}const Xe=parseInt(T)||0,Be=parseInt(C)||0;if(Xe<0){Y(!0),rt.current&&rt.current.focus();return}if(Be<0){W(!0),je.current&&je.current.focus();return}if(!m){console.error("No user found");return}let Ke=w;if(X&&re.trim())try{const Ae=await f({name:re.trim(),color:Sxe()});Ke=Ae,localStorage.setItem("lastUsedProjectId",Ae)}catch(Ae){console.error("Error creating project:",Ae);return}else Ke&&Ke!=="no-project"&&localStorage.setItem("lastUsedProjectId",Ke);const Tt={title:v.trim(),description:M.trim(),projectId:Ke||"no-project",userId:m.uid,completed:(n==null?void 0:n.completed)||!1,status:(n==null?void 0:n.status)||e||"pomodoro",timeSpent:parseInt(T)||0,timeEstimated:parseInt(C)||0};if(ae&&ae.trim()){Tt.scheduledDate=ae.trim(),Tt.includeTime=fe,fe&&at&&we&&(Tt.scheduledStartTime=at,Tt.scheduledEndTime=we);const Ae=new Date(ae.trim());oo(Ae,new Date)&&(n==null?void 0:n.status)==="todo"&&(Tt.status="pomodoro")}const nr=(n==null?void 0:n.timeSpent)||0,oe=parseInt(T)||0,ce=n&&oe!==nr,pe=oe-nr;if(n){if(u(n.id,Tt),ce&&pe!==0)try{await Da.upsertWorkSession({userId:m.uid,taskId:n.id,projectId:Ke||"no-project",date:FR()},pe,"manual")}catch(Ae){console.error("Failed to create work session for manual edit:",Ae)}}else{console.log("Creating new task with data:",Tt);try{console.log("About to call addTask...");const Ae=await c(Tt);console.log("Task created successfully with ID:",Ae)}catch(Ae){console.error("Error creating task:",Ae)}}console.log("About to call callback - onSave available:",!!s),s?(console.log("Calling onSave callback"),s()):(console.log("Calling onCancel callback"),o())},Te=()=>{n&&window.confirm("Are you sure you want to delete this task? This action cannot be undone.")&&(d(n.id),o())},Ne=()=>{if(n){const Xe=n.status==="pomodoro"?"todo":"pomodoro";u(n.id,{...n,status:Xe,completed:!1,hideFromPomodoro:Xe==="pomodoro"?!1:n.hideFromPomodoro}),o()}},tt=K.useCallback(()=>{ye(!ee)},[ee]),xt=K.useCallback(Xe=>{const Be=Xe.getFullYear(),Ke=String(Xe.getMonth()+1).padStart(2,"0"),Tt=String(Xe.getDate()).padStart(2,"0");le(`${Be}-${Ke}-${Tt}`)},[]),fn=K.useCallback(Xe=>{const[Be,Ke]=Xe.split(" - ");Le(Be),be(Ke)},[]),Ti=K.useCallback(Xe=>{Ce(Xe)},[]),Nn=()=>{if(X)return"New Project";const Xe=h.find(Be=>Be.id===w);return(Xe==null?void 0:Xe.name)||"Project"},Nr=(Xe,Be)=>{if(Xe.key==="Enter"&&!Xe.shiftKey){if(Xe.preventDefault(),n){Mt();return}console.log("handleKeyDown called, nextRef:",Be===bt?"descriptionRef":Be===he?"projectSelectRef":"other"),Be.current&&setTimeout(()=>{Be.current&&(Be.current.focus(),console.log("Focused on:",Be.current.tagName),Be===he&&setTimeout(()=>jn(),50))},0)}},oi=Xe=>{if(Xe.key==="Enter"&&!Xe.shiftKey){if(Xe.preventDefault(),n){Mt();return}he.current&&(he.current.focus(),setTimeout(()=>jn(),50))}},on=Xe=>{Xe.key==="Enter"&&!Xe.shiftKey&&(Xe.preventDefault(),Mt())},zr=Xe=>{Xe.key==="Enter"&&!Xe.shiftKey&&(Xe.preventDefault(),Mt())},Ei=Xe=>{if(Xe.key==="Enter"&&!Xe.shiftKey){if(Xe.preventDefault(),n){Mt();return}je.current&&je.current.focus()}};return x.jsx(Ftt,{children:x.jsx("div",{ref:lt,className:"task-card p-4 bg-background-secondary border border-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 animate-fade-in relative",style:{zIndex:ee?1e3:"auto"},children:x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("textarea",{autoFocus:!0,ref:ge,id:"task-title",name:"title",className:`w-full text-lg font-medium text-text-primary px-0 py-0.5 bg-transparent focus:outline-none border-none resize-none overflow-hidden ${O?"ring-2 ring-red-200":""}`,placeholder:"Task name",value:v,onChange:Xe=>{y(Xe.target.value),j(!1);const Be=Xe.target;hn(Be)},onKeyDown:Xe=>Nr(Xe,bt),rows:1,style:{minHeight:"1.75rem"}}),x.jsx("textarea",{ref:bt,id:"task-description",name:"description",className:"w-full text-sm text-text-secondary px-0 py-1 bg-transparent border-none focus:outline-none resize-none",placeholder:"Description",value:M,onChange:Xe=>{P(Xe.target.value),hn(Xe.target)},onKeyDown:oi,style:{height:"auto",minHeight:"1.5rem",marginBottom:"0.5rem"},rows:1}),x.jsx("div",{className:"flex flex-wrap gap-3 mb-2",children:x.jsxs("div",{className:"flex flex-wrap gap-2 min-w-0",children:[x.jsx("div",{className:"relative",children:X?x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary",children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:x.jsx(ht,{name:"folder-line",className:"w-3.5 h-3.5"})}),x.jsx("input",{ref:Ge,type:"text",id:"new-project-name",name:"newProjectName",className:`bg-transparent border-none focus:outline-none p-0 text-xs ${L?"ring-2 ring-red-200":""}`,placeholder:"Enter project name",value:re,onChange:Xe=>{z(Xe.target.value),B(!1)},onKeyDown:Xe=>Nr(Xe,je)})]}),x.jsx("button",{className:"p-1 rounded hover:bg-background-primary transition-colors duration-200",onClick:Jt,type:"button",children:x.jsx(ht,{name:"close-line",className:"w-3.5 h-3.5 text-text-secondary"})})]}):x.jsxs(x.Fragment,{children:[x.jsxs("select",{ref:he,id:"task-project",name:"projectId",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:w,onChange:Xe=>Re(Xe.target.value),onKeyDown:Ei,children:[x.jsx("option",{value:"no-project",children:"No Project"}),x.jsx("option",{value:"create-new",children:"Create new project"}),h.filter(Xe=>Xe.id!=="no-project").map(Xe=>x.jsx("option",{value:Xe.id,children:Xe.name},Xe.id))]}),x.jsxs("button",{type:"button",className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 ${L?"ring-2 ring-red-200":""}`,onClick:jn,children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center flex-shrink-0",children:x.jsx(ht,{name:"folder-line",className:"w-3.5 h-3.5"})}),x.jsx("span",{className:"truncate max-w-[8rem]",children:Nn()}),x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-text-secondary flex-shrink-0",children:x.jsx(ht,{name:"arrow-down-s-line",className:"w-3.5 h-3.5"})})]})]})}),x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary flex-shrink-0 ${$||G?"border-red-500":""}`,children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:x.jsx(ht,{name:"time-line",className:"w-3.5 h-3.5"})}),n&&x.jsxs(x.Fragment,{children:[x.jsx("input",{ref:rt,type:"number",id:"time-spent",name:"timeSpent",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:T,onChange:Xe=>{A(Xe.target.value),Y(!1)},onKeyDown:on}),x.jsx("span",{className:"text-text-secondary",children:"/"})]}),!n&&x.jsx("span",{className:"whitespace-nowrap",children:"Est."}),x.jsx("input",{ref:je,type:"number",id:"time-estimated",name:"timeEstimated",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:C,onChange:Xe=>{k(Xe.target.value),W(!1)},onKeyDown:zr}),x.jsx("span",{className:"text-text-secondary whitespace-nowrap",children:"m"})]}),($||G)&&x.jsx("div",{className:"text-xs text-red-500 mt-1 px-2.5",children:"Time must be positive!"})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("button",{ref:cn,id:"datePickerBtn",className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 flex-shrink-0",onClick:tt,children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:x.jsx("i",{className:"ri-calendar-line"})}),x.jsx("span",{className:"whitespace-nowrap",children:ae?mn(new Date(ae),"MMM dd, yyyy")+(fe?`, ${at} - ${we}`:""):"Add to calendar"})]}),ee&&D3e.createPortal(x.jsx(Ltt,{selectedDate:ae?new Date(ae):void 0,onDateSelect:xt,onTimeSelect:fn,onTimeToggle:Ti,onConfirm:()=>ye(!1),onClose:()=>ye(!1),onClear:()=>{le(""),Le("09:00"),be("10:00"),Ce(!1)},includeTime:fe,showTimezone:!0,initialStartTime:at,initialEndTime:we,triggerRef:cn,isOpen:ee}),document.body)]})]})}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center gap-6",children:n&&x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"text-[#FF4D4F] hover:text-red-600 text-sm font-medium",onClick:Te,children:"Delete"}),x.jsx("button",{className:"text-[#4096FF] hover:text-blue-600 text-sm font-medium",onClick:Ne,children:n.status==="pomodoro"?"Work later":"Add to Pomodoro"})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{className:"w-10 h-10 rounded-full hover:bg-background-primary flex items-center justify-center transition-colors duration-200",onClick:o,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(ht,{name:"close-line",className:"w-5 h-5"})})}),x.jsx("button",{className:"w-10 h-10 rounded-full bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/40 flex items-center justify-center transition-colors duration-200",onClick:Mt,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-green-600 dark:text-green-400",children:x.jsx(ht,{name:"check-line",className:"w-5 h-5"})})})]})]})]})},(n==null?void 0:n.id)||"new-task")})},ZD=({id:n,checked:e,onChange:t,disabled:r=!1,className:i=""})=>x.jsx("label",{className:`relative inline-flex items-center cursor-pointer ${r?"cursor-not-allowed":""} ${i}`,children:x.jsx("input",{id:n,type:"checkbox",checked:e,onChange:a=>t(a.target.checked),disabled:r,className:"custom-checkbox"})}),Utt=({task:n,size:e="sm",showText:t=!1,className:r=""})=>{if(!n.scheduledDate)return null;const i=()=>{const s=e==="sm"?"w-3 h-3":e==="md"?"w-4 h-4":"w-5 h-5";switch(n.syncStatus){case"pending":return x.jsx(og,{className:`${s} animate-spin text-blue-500`});case"synced":return x.jsx(bg,{className:`${s} text-green-500`});case"error":return x.jsx($v,{className:`${s} text-red-500`});case"disabled":return x.jsx(cg,{className:`${s} text-gray-400`});default:return x.jsx(cg,{className:`${s} text-gray-400`})}},a=()=>{switch(n.syncStatus){case"pending":return"Syncing...";case"synced":return"Synced";case"error":return"Sync failed";case"disabled":return"Not synced";default:return"Not synced"}},o=()=>{switch(n.syncStatus){case"pending":return"Syncing to Google Calendar...";case"synced":return`Synced to Google Calendar${n.lastSyncedAt?` at ${n.lastSyncedAt.toLocaleString()}`:""}`;case"error":return`Sync failed: ${n.syncError||"Unknown error"}`;case"disabled":return"Google Calendar sync is disabled";default:return"Not synced to Google Calendar"}};return x.jsxs("div",{className:`flex items-center gap-1 ${r}`,title:o(),children:[i(),t&&x.jsx("span",{className:`text-xs ${n.syncStatus==="error"?"text-red-600":n.syncStatus==="synced"?"text-green-600":n.syncStatus==="pending"?"text-blue-600":"text-gray-500"}`,children:a()})]})},Vtt=({task:n,project:e,onEdit:t,className:r=""})=>{const[i,a]=K.useState(!1),o=ss(),{toggleTaskCompletion:s}=Ut(),l=ei(w=>w.currentTask),c=ei(w=>w.setCurrentTask),u=(l==null?void 0:l.id)===n.id,d=o.pathname==="/pomodoro"||o.pathname==="/",h=()=>x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:e.color}}),f=w=>{w.target instanceof HTMLElement&&(w.target.closest('input[type="checkbox"]')||w.target.closest(".edit-task-btn")||w.target.closest(".expand-button"))||n.completed||c(n)},m=async()=>{const w=d?"pomodoro":"default";console.log("TaskItem completion:",{taskId:n.id,taskTitle:n.title,currentPath:o.pathname,isPomodoroPage:d,context:w,isCurrentlyActiveTask:u});const _=await s(n.id,w);w==="pomodoro"&&_?console.log("Next task selected:",_.title):w==="pomodoro"&&!_&&console.log("No next task available")},v=w=>{w.stopPropagation(),t(n.id)},y=w=>{w.stopPropagation(),a(!i)};return x.jsxs("div",{className:`task-card flex items-start p-3 bg-task-todo-bg border 
      ${u?"border-primary":"border-task-todo-border"} 
      ${n.completed?"opacity-70 text-text-secondary":""}
      rounded-md hover:shadow-sm cursor-pointer ${r}`,onClick:f,style:{borderWidth:u?"2px":"1px"},"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(ZD,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:m})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[h(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:e.name})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]}),x.jsx(Utt,{task:n,size:"sm",className:"ml-2"})]}),i&&n.description&&n.description.trim()&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:y,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${i?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:v,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})},ztt=()=>{const{tasks:n,projects:e,editingTaskId:t,setIsAddingTask:r,setEditingTaskId:i,reorderTasks:a}=Ut(),{isRunning:o,pause:s,setEnableStartPauseBtn:l,start:c,currentTask:u}=ei(),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(!1),T=K.useRef(null),A=K.useRef(-1),C=K.useRef(null);K.useEffect(()=>{u&&t===u.id?(l(!1),o&&s()):l(!0)},[t]);const k=(G,W)=>{T.current=W;const X=n.findIndex(te=>te.id===W);A.current=X,G.currentTarget.classList.add("opacity-70","border-dashed")},M=G=>{G.currentTarget.classList.remove("opacity-70","border-dashed"),T.current=null,A.current=-1},P=G=>{G.preventDefault()},O=G=>{G.preventDefault(),G.currentTarget.classList.add("bg-gray-50")},j=G=>{G.currentTarget.classList.remove("bg-gray-50")},L=(G,W)=>{if(G.preventDefault(),G.currentTarget.classList.remove("bg-gray-50"),!T.current||T.current===W)return;const X=n.find(z=>z.id===T.current),te=n.find(z=>z.id===W);if(!X||!te)return;const re=n.findIndex(z=>z.id===W);a(T.current,re)},B=G=>{i(G),r(!1),_(!!o)},$=()=>{r(!1),i(null),w&&(_(!1),c())},Y=[...n].filter(G=>G.hideFromPomodoro?!1:!!(G.status==="pomodoro"||G.completed)).sort((G,W)=>G.order-W.order);return x.jsx("div",{className:"space-y-3",id:"taskListSorted",ref:C,children:Y.map(G=>{const W=e.find(X=>X.id===G.projectId);return t===G.id?x.jsx(ay,{task:G,onCancel:$},G.id):W?x.jsx("div",{draggable:!0,onDragStart:X=>k(X,G.id),onDragEnd:M,onDragOver:P,onDragEnter:O,onDragLeave:j,onDrop:X=>L(X,G.id),children:x.jsx(Vtt,{task:G,project:W,onEdit:B})},G.id):null})})},Htt=()=>{const{tasks:n}=Ut(),e=[...n].filter(l=>l.hideFromPomodoro?!1:!!(l.status==="pomodoro"||l.completed)).sort((l,c)=>l.order-c.order),t=e.reduce((l,c)=>l+(c.timeSpent||0),0),r=e.reduce((l,c)=>l+(c.timeEstimated||0),0),i=e.filter(l=>l.status==="pomodoro"),a=i.reduce((l,c)=>l+(c.timeEstimated||0),0),o=i.reduce((l,c)=>l+(c.timeSpent||0),0),s=Math.max(0,a-o);return x.jsxs("div",{className:"text-sm text-text-secondary",children:[x.jsx("span",{children:"Total time spent: "}),x.jsx("span",{className:"font-medium text-text-primary",children:ry(t)}),r>0&&x.jsxs("span",{children:[" ","(",ry(s)," left)"]})]})},Axe=({className:n="",compactView:e=!1})=>{const t=Zg(),r=Ut(w=>w.isAddingTask),i=Ut(w=>w.editingTaskId),a=Ut(w=>w.showDetailsMenu),o=Ut(w=>w.setIsAddingTask),s=Ut(w=>w.setEditingTaskId),l=Ut(w=>w.setShowDetailsMenu),c=Ut(w=>w.handleMoveCompletedDown),u=Ut(w=>w.handleArchiveCompleted),d=K.useRef(null),h=K.useRef(null),f=K.useRef(null);K.useEffect(()=>{const w=_=>{!_.target.closest(".details-menu")&&a&&l(!1)};return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[a,l]),K.useEffect(()=>{if(r&&f.current&&h.current){const w=h.current,T=f.current.getBoundingClientRect(),A=w.getBoundingClientRect(),C=T.bottom,k=A.bottom;if(C>k){const M=C-k+20;w.scrollBy({top:M,behavior:"smooth"})}}},[r]);const m=()=>{o(!0),s(null)},v=()=>{o(!1),s(null)},y=()=>{t("/projects"),l(!1)};return x.jsxs("div",{className:`h-full flex flex-col ${n}`,children:[x.jsxs("div",{className:"p-4 border-b border-border",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"font-semibold text-text-primary text-left",children:"Tasks In Pomodoro"}),x.jsxs("div",{className:"relative details-menu",children:[x.jsx("button",{onClick:w=>{w.stopPropagation(),l(!a)},className:"p-2 text-text-secondary hover:bg-background-primary rounded-md",children:x.jsx("i",{className:"ri-more-2-fill w-5 h-5"})}),a&&x.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-background-secondary border border-border rounded-lg shadow-lg z-10",children:x.jsxs("div",{className:"py-1",children:[x.jsxs("button",{onClick:c,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-arrow-down-line w-5 h-5 mr-2 flex-shrink-0"}),"Move down completed tasks"]}),x.jsxs("button",{onClick:u,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-archive-line w-5 h-5 mr-2 flex-shrink-0"}),"Archive completed tasks"]}),x.jsxs("button",{onClick:y,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-task-line w-5 h-5 mr-2 flex-shrink-0"}),"Task management"]})]})})]})]}),x.jsx(Htt,{})]}),x.jsx("div",{className:`flex-1 overflow-y-auto scrollbar-thin ${e?"compact-view":""}`,ref:h,children:x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"space-y-3",id:"taskList",ref:d,children:[x.jsx(ztt,{}),r&&x.jsx("div",{ref:f,children:x.jsx(ay,{onCancel:v})}),!r&&!i&&x.jsx("button",{onClick:m,className:"w-full p-4 border-2 border-dashed border-border rounded-lg text-text-secondary hover:border-text-secondary hover:text-text-primary transition-colors duration-200 text-left",children:"+ Add new task"})]})})})]})},Gtt=()=>{const{user:n}=Qt(),{tasks:e,projects:t}=Ut(),{syncEnabled:r,syncInProgress:i,syncError:a,pendingTasks:o,errorTasks:s,enableSync:l,disableSync:c,performManualSync:u,initializeSync:d,clearSyncError:h}=yj(),[f,m]=K.useState(!1),[v,y]=K.useState([]),[w,_]=K.useState(!1),T=k=>{const M=new Date().toLocaleTimeString();y(P=>[...P,`[${M}] ${k}`])},A=async()=>{if(!n){T("❌ No user authenticated");return}_(!0),T("🔄 Starting sync test...");try{await d(),T("✅ Sync initialized"),await l(),T("✅ Sync enabled");const k=e.find(M=>M.scheduledDate);if(k){T(`📅 Found scheduled task: ${k.title}`);const M=t.find(P=>P.id===k.projectId);M?(T(`📁 Task project: ${M.name}`),await qS(n.uid).syncTaskToGoogle(k,M),T("✅ Task synced to Google Calendar (simulated)")):T("❌ Project not found for task")}else T("ℹ️ No scheduled tasks found to test with");await u(),T("✅ Manual sync completed"),T("🎉 Sync test completed successfully!")}catch(k){T(`❌ Sync test failed: ${k.message}`)}finally{_(!1)}},C=()=>{y([])};return f?x.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-xl w-96 max-h-96 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(cg,{className:"w-4 h-4 text-blue-600"}),x.jsx("h3",{className:"font-semibold text-sm",children:"Sync Debug Panel"})]}),x.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),x.jsxs("div",{className:"p-3 space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx("span",{className:"font-medium",children:"Status:"}),i?x.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[x.jsx(og,{className:"w-3 h-3 animate-spin"}),"Syncing..."]}):r?x.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[x.jsx(bg,{className:"w-3 h-3"}),"Enabled"]}):x.jsxs("span",{className:"flex items-center gap-1 text-gray-600",children:[x.jsx(Xye,{className:"w-3 h-3"}),"Disabled"]})]}),x.jsxs("div",{className:"text-sm",children:[x.jsx("span",{className:"font-medium",children:"Tasks:"}),x.jsxs("span",{className:"ml-2",children:[e.filter(k=>k.scheduledDate).length," scheduled,"," ",o.size," pending,"," ",s.size," errors"]})]}),a&&x.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-2 text-sm",children:[x.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[x.jsx($v,{className:"w-3 h-3"}),x.jsx("span",{className:"font-medium",children:"Error:"})]}),x.jsx("p",{className:"text-red-700 mt-1",children:a}),x.jsx("button",{onClick:h,className:"mt-1 text-red-600 hover:text-red-800 underline text-xs",children:"Clear"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:A,disabled:w||!n,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:w?x.jsxs(x.Fragment,{children:[x.jsx(og,{className:"w-3 h-3 animate-spin"}),"Testing..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Zye,{className:"w-3 h-3"}),"Test Sync"]})}),x.jsxs("button",{onClick:C,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 flex items-center gap-1",children:[x.jsx(xj,{className:"w-3 h-3"}),"Clear Logs"]})]}),x.jsx("div",{className:"bg-gray-50 rounded border max-h-32 overflow-y-auto",children:x.jsx("div",{className:"p-2 text-xs font-mono",children:v.length===0?x.jsx("p",{className:"text-gray-500",children:"No logs yet..."}):v.map((k,M)=>x.jsx("div",{className:"mb-1",children:k},M))})})]})]}):x.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:x.jsx("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors",title:"Open Sync Debug Panel",children:x.jsx(c1,{className:"w-5 h-5"})})})},ioe=({children:n,className:e="",rightSidebarContent:t})=>{const{isRightSidebarOpen:r,isLeftSidebarOpen:i,rightSidebarWidth:a,setRightSidebarWidth:o}=pl(),[s,l]=K.useState(!1),[c,u]=K.useState(a),d=K.useRef(null),h=K.useRef(null),f=ss(),m=()=>f.pathname==="/pomodoro"?x.jsx("div",{className:"p-4 space-y-4",children:x.jsx("div",{className:"bg-background-primary rounded-lg border border-border",children:x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Tasks"}),x.jsx(Axe,{})]})})}):null,v=T=>{T.preventDefault(),l(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},y=T=>{var L;if(!s||!d.current||!h.current)return;const A=(L=d.current.parentElement)==null?void 0:L.getBoundingClientRect();if(!A)return;const C=300,k=280,M=Math.floor(A.width*.5),P=A.width-k;let O=T.clientX-A.left;O<C&&(O=C),O>P&&(O=P);let j=A.width-O-1;j>M&&(j=M,O=A.width-j-1),d.current.style.width=`${O}px`,d.current.style.flex="none",h.current.style.width=`${j}px`,u(j),j<400?h.current.classList.add("compact-view"):h.current.classList.remove("compact-view")},w=()=>{l(!1),document.body.style.cursor="",document.body.style.userSelect="",c!==a&&o(c)};ve.useEffect(()=>(s?(window.addEventListener("mousemove",y),window.addEventListener("mouseup",w)):(window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)}),[s,c]),ve.useEffect(()=>{s||u(a)},[a,s]);const _=t||m();return x.jsxs("div",{className:`main-layout-container flex h-screen overflow-hidden bg-background-primary ${f.pathname==="/pomodoro"?"pomodoro-page-container":""} ${e}`,children:[x.jsx(Vw,{className:f.pathname==="/pomodoro"?"pomodoro-sidebar":""}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(gH,{}),x.jsxs("div",{className:"flex-1 flex overflow-hidden relative",style:{zIndex:1},children:[x.jsx("div",{ref:d,className:"flex-1 flex flex-col items-center justify-center p-6 bg-background-primary relative min-w-[300px] overflow-y-auto",id:"timerSection",style:!i&&!r?{}:{margin:"0 auto",width:r?"100%":"800px",maxWidth:r?"100%":"800px"},children:x.jsx("div",{className:"w-full h-full overflow-y-auto flex flex-col items-center justify-center",children:n||x.jsx(Fye,{})})}),r&&x.jsxs("div",{id:"resizeDivider",className:"w-[1px] bg-border/20 cursor-col-resize hover:bg-primary/20 flex items-center justify-center group",onMouseDown:v,children:[x.jsx("div",{className:"w-4 h-full opacity-0"}),x.jsx(ni,{text:"Hide task list (Cmd + \\)",placement:"bottom",offset:32,children:x.jsx("button",{className:"absolute w-6 h-12 bg-background-secondary border border-border rounded-l-md flex items-center justify-center shadow-sm hover:shadow-md -right-0 top-1/2 transform -translate-y-1/2 transition-all duration-200 hover:bg-background-primary group-hover:border-primary/30 sidebar-edge-toggle",onClick:T=>{T.stopPropagation(),pl.getState().toggleRightSidebar()},"aria-label":"Hide task list (Cmd + \\)",children:x.jsx("div",{className:"flex items-center justify-center",children:x.jsx(ht,{name:"arrow-right-s-line",size:14,className:"text-gray-500 transition-colors group-hover:text-primary"})})})})]}),r&&x.jsx("div",{ref:h,id:"rightSidebar",className:"border-l border-border flex flex-col bg-background-primary min-w-[280px]",style:{width:`${c}px`,flexShrink:0},children:x.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-visible",children:_})}),!r&&x.jsx(ni,{text:"Show task list (Cmd + \\)",placement:"left",offset:24,children:x.jsx("button",{className:"fixed right-0 top-1/2 transform -translate-y-1/2 z-[100] w-6 h-12 bg-background-secondary border border-border border-r-0 rounded-l-md shadow-md hover:shadow-lg transition-all duration-200 hover:bg-background-primary hover:border-primary/30 group sidebar-edge-toggle sidebar-toggle-show",onClick:()=>pl.getState().toggleRightSidebar(),"aria-label":"Show task list (Cmd + \\)",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary group-hover:text-primary transition-colors",children:x.jsx(ht,{name:"arrow-left-s-line",size:14})})})})]})]}),x.jsx(_et,{}),x.jsx(Gtt,{})]})};var oU=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],p1={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},QD={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Vl=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Au=function(n){return n===!0?1:0};function aoe(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var sU=function(n){return n instanceof Array?n:[n]};function nl(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function $r(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function aO(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function kxe(n,e){if(e(n))return n;if(n.parentNode)return kxe(n.parentNode,e)}function oO(n,e){var t=$r("div","numInputWrapper"),r=$r("input","numInput "+n),i=$r("span","arrowUp"),a=$r("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return t.appendChild(r),t.appendChild(i),t.appendChild(a),t}function _c(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var lU=function(){},R2=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},qtt={D:lU,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Au(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:lU,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:lU,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Hb={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},TC={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[TC.w(n,e,t)]},F:function(n,e,t){return R2(TC.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Vl(TC.h(n,e,t))},H:function(n){return Vl(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Au(n.getHours()>11)]},M:function(n,e){return R2(n.getMonth(),!0,e)},S:function(n){return Vl(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Vl(n.getFullYear(),4)},d:function(n){return Vl(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Vl(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Vl(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Cxe=function(n){var e=n.config,t=e===void 0?p1:e,r=n.l10n,i=r===void 0?QD:r,a=n.isMobile,o=a===void 0?!1:a;return function(s,l,c){var u=c||i;return t.formatDate!==void 0&&!o?t.formatDate(s,l,u):l.split("").map(function(d,h,f){return TC[d]&&f[h-1]!=="\\"?TC[d](s,u,t):d!=="\\"?d:""}).join("")}},vH=function(n){var e=n.config,t=e===void 0?p1:e,r=n.l10n,i=r===void 0?QD:r;return function(a,o,s,l){if(!(a!==0&&!a)){var c=l||i,u,d=a;if(a instanceof Date)u=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)u=new Date(a);else if(typeof a=="string"){var h=o||(t||p1).dateFormat,f=String(a).trim();if(f==="today")u=new Date,s=!0;else if(t&&t.parseDate)u=t.parseDate(a,h);else if(/Z$/.test(f)||/GMT$/.test(f))u=new Date(a);else{for(var m=void 0,v=[],y=0,w=0,_="";y<h.length;y++){var T=h[y],A=T==="\\",C=h[y-1]==="\\"||A;if(Hb[T]&&!C){_+=Hb[T];var k=new RegExp(_).exec(a);k&&(m=!0)&&v[T!=="Y"?"push":"unshift"]({fn:qtt[T],val:k[++w]})}else A||(_+=".")}u=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),v.forEach(function(M){var P=M.fn,O=M.val;return u=P(u,O,c)||u}),u=m?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){t.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&u.setHours(0,0,0,0),u}}};function Ec(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var Wtt=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},cU=function(n,e,t){return n*3600+e*60+t},Ytt=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},Ktt={DAY:864e5};function uU(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<a&&(t=a),e===i&&t===a&&r<o&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var s=n.maxDate.getHours(),l=n.maxDate.getMinutes();e=Math.min(e,s),e===s&&(t=Math.min(l,t)),e===s&&t===l&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(s){s&&Object.keys(s).forEach(function(l){return n[l]=s[l]})},i=0,a=e;i<a.length;i++){var o=a[i];r(o)}return n});var Ms=function(){return Ms=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Ms.apply(this,arguments)},ooe=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Xtt=300;function Ztt(n,e){var t={config:Ms(Ms({},p1),Ia.defaultConfig),l10n:QD};t.parseDate=vH({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=v,t._setHoursFromDate=h,t._positionCalendar=Ct,t.changeMonth=ae,t.changeYear=at,t.clear=le,t.close=ee,t.onMouseOver=he,t._createElement=$r,t.createDay=k,t.destroy=ye,t.isEnabled=Le,t.jumpToDate=_,t.updateValue=Ke,t.open=je,t.redraw=Re,t.set=Te,t.setDate=tt,t.toggle=oi;function r(){t.utils={getDaysInMonth:function(oe,ce){return oe===void 0&&(oe=t.currentMonth),ce===void 0&&(ce=t.currentYear),oe===1&&(ce%4===0&&ce%100!==0||ce%400===0)?29:t.l10n.daysInMonth[oe]}}}function i(){t.element=t.input=n,t.isOpen=!1,bt(),cn(),Ti(),fn(),r(),t.isMobile||C(),w(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),Ke(!1)),s();var oe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&oe&&Ct(),on("onReady")}function a(){var oe;return((oe=t.calendarContainer)===null||oe===void 0?void 0:oe.getRootNode()).activeElement||document.activeElement}function o(oe){return oe.bind(t)}function s(){var oe=t.config;oe.weekNumbers===!1&&oe.showMonths===1||oe.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var ce=(t.days.offsetWidth+1)*oe.showMonths;t.daysContainer.style.width=ce+"px",t.calendarContainer.style.width=ce+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(oe){if(t.selectedDates.length===0){var ce=t.config.minDate===void 0||Ec(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),pe=uU(t.config);ce.setHours(pe.hours,pe.minutes,pe.seconds,ce.getMilliseconds()),t.selectedDates=[ce],t.latestSelectedDateObj=ce}oe!==void 0&&oe.type!=="blur"&&nr(oe);var Ae=t._input.value;d(),Ke(),t._input.value!==Ae&&t._debouncedChange()}function c(oe,ce){return oe%12+12*Au(ce===t.l10n.amPM[1])}function u(oe){switch(oe%24){case 0:case 12:return 12;default:return oe%12}}function d(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var oe=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,ce=(parseInt(t.minuteElement.value,10)||0)%60,pe=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(oe=c(oe,t.amPM.textContent));var Ae=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Ec(t.latestSelectedDateObj,t.config.minDate,!0)===0,Qe=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Ec(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var gt=cU(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Dt=cU(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),ft=cU(oe,ce,pe);if(ft>Dt&&ft<gt){var Bt=Ytt(gt);oe=Bt[0],ce=Bt[1],pe=Bt[2]}}else{if(Qe){var yt=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;oe=Math.min(oe,yt.getHours()),oe===yt.getHours()&&(ce=Math.min(ce,yt.getMinutes())),ce===yt.getMinutes()&&(pe=Math.min(pe,yt.getSeconds()))}if(Ae){var Vt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;oe=Math.max(oe,Vt.getHours()),oe===Vt.getHours()&&ce<Vt.getMinutes()&&(ce=Vt.getMinutes()),ce===Vt.getMinutes()&&(pe=Math.max(pe,Vt.getSeconds()))}}f(oe,ce,pe)}}function h(oe){var ce=oe||t.latestSelectedDateObj;ce&&ce instanceof Date&&f(ce.getHours(),ce.getMinutes(),ce.getSeconds())}function f(oe,ce,pe){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(oe%24,ce,pe||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Vl(t.config.time_24hr?oe:(12+oe)%12+12*Au(oe%12===0)),t.minuteElement.value=Vl(ce),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Au(oe>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Vl(pe)))}function m(oe){var ce=_c(oe),pe=parseInt(ce.value)+(oe.delta||0);(pe/1e3>1||oe.key==="Enter"&&!/[^\d]/.test(pe.toString()))&&at(pe)}function v(oe,ce,pe,Ae){if(ce instanceof Array)return ce.forEach(function(Qe){return v(oe,Qe,pe,Ae)});if(oe instanceof Array)return oe.forEach(function(Qe){return v(Qe,ce,pe,Ae)});oe.addEventListener(ce,pe,Ae),t._handlers.push({remove:function(){return oe.removeEventListener(ce,pe,Ae)}})}function y(){on("onChange")}function w(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(pe){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+pe+"]"),function(Ae){return v(Ae,"click",t[pe])})}),t.isMobile){Nr();return}var oe=aoe(Ge,50);if(t._debouncedChange=aoe(y,Xtt),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&v(t.daysContainer,"mouseover",function(pe){t.config.mode==="range"&&he(_c(pe))}),v(t._input,"keydown",ge),t.calendarContainer!==void 0&&v(t.calendarContainer,"keydown",ge),!t.config.inline&&!t.config.static&&v(window,"resize",oe),window.ontouchstart!==void 0?v(window.document,"touchstart",Ce):v(window.document,"mousedown",Ce),v(window.document,"focus",Ce,{capture:!0}),t.config.clickOpens===!0&&(v(t._input,"focus",t.open),v(t._input,"click",t.open)),t.daysContainer!==void 0&&(v(t.monthNav,"click",Tt),v(t.monthNav,["keyup","increment"],m),v(t.daysContainer,"click",hn)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var ce=function(pe){return _c(pe).select()};v(t.timeContainer,["increment"],l),v(t.timeContainer,"blur",l,{capture:!0}),v(t.timeContainer,"click",T),v([t.hourElement,t.minuteElement],["focus","click"],ce),t.secondElement!==void 0&&v(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&v(t.amPM,"click",function(pe){l(pe)})}t.config.allowInput&&v(t._input,"blur",be)}function _(oe,ce){var pe=oe!==void 0?t.parseDate(oe):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Ae=t.currentYear,Qe=t.currentMonth;try{pe!==void 0&&(t.currentYear=pe.getFullYear(),t.currentMonth=pe.getMonth())}catch(gt){gt.message="Invalid date supplied: "+pe,t.config.errorHandler(gt)}ce&&t.currentYear!==Ae&&(on("onYearChange"),$()),ce&&(t.currentYear!==Ae||t.currentMonth!==Qe)&&on("onMonthChange"),t.redraw()}function T(oe){var ce=_c(oe);~ce.className.indexOf("arrow")&&A(oe,ce.classList.contains("arrowUp")?1:-1)}function A(oe,ce,pe){var Ae=oe&&_c(oe),Qe=pe||Ae&&Ae.parentNode&&Ae.parentNode.firstChild,gt=zr("increment");gt.delta=ce,Qe&&Qe.dispatchEvent(gt)}function C(){var oe=window.document.createDocumentFragment();if(t.calendarContainer=$r("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(oe.appendChild(W()),t.innerContainer=$r("div","flatpickr-innerContainer"),t.config.weekNumbers){var ce=z(),pe=ce.weekWrapper,Ae=ce.weekNumbers;t.innerContainer.appendChild(pe),t.weekNumbers=Ae,t.weekWrapper=pe}t.rContainer=$r("div","flatpickr-rContainer"),t.rContainer.appendChild(te()),t.daysContainer||(t.daysContainer=$r("div","flatpickr-days"),t.daysContainer.tabIndex=-1),B(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),oe.appendChild(t.innerContainer)}t.config.enableTime&&oe.appendChild(X()),nl(t.calendarContainer,"rangeMode",t.config.mode==="range"),nl(t.calendarContainer,"animate",t.config.animate===!0),nl(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(oe);var Qe=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!Qe&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var gt=$r("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(gt,t.element),gt.appendChild(t.element),t.altInput&&gt.appendChild(t.altInput),gt.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function k(oe,ce,pe,Ae){var Qe=Le(ce,!0),gt=$r("span",oe,ce.getDate().toString());return gt.dateObj=ce,gt.$i=Ae,gt.setAttribute("aria-label",t.formatDate(ce,t.config.ariaDateFormat)),oe.indexOf("hidden")===-1&&Ec(ce,t.now)===0&&(t.todayDateElem=gt,gt.classList.add("today"),gt.setAttribute("aria-current","date")),Qe?(gt.tabIndex=-1,Ei(ce)&&(gt.classList.add("selected"),t.selectedDateElem=gt,t.config.mode==="range"&&(nl(gt,"startRange",t.selectedDates[0]&&Ec(ce,t.selectedDates[0],!0)===0),nl(gt,"endRange",t.selectedDates[1]&&Ec(ce,t.selectedDates[1],!0)===0),oe==="nextMonthDay"&&gt.classList.add("inRange")))):gt.classList.add("flatpickr-disabled"),t.config.mode==="range"&&mi(ce)&&!Ei(ce)&&gt.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&oe!=="prevMonthDay"&&Ae%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(ce)+"</span>"),on("onDayCreate",gt),gt}function M(oe){oe.focus(),t.config.mode==="range"&&he(oe)}function P(oe){for(var ce=oe>0?0:t.config.showMonths-1,pe=oe>0?t.config.showMonths:-1,Ae=ce;Ae!=pe;Ae+=oe)for(var Qe=t.daysContainer.children[Ae],gt=oe>0?0:Qe.children.length-1,Dt=oe>0?Qe.children.length:-1,ft=gt;ft!=Dt;ft+=oe){var Bt=Qe.children[ft];if(Bt.className.indexOf("hidden")===-1&&Le(Bt.dateObj))return Bt}}function O(oe,ce){for(var pe=oe.className.indexOf("Month")===-1?oe.dateObj.getMonth():t.currentMonth,Ae=ce>0?t.config.showMonths:-1,Qe=ce>0?1:-1,gt=pe-t.currentMonth;gt!=Ae;gt+=Qe)for(var Dt=t.daysContainer.children[gt],ft=pe-t.currentMonth===gt?oe.$i+ce:ce<0?Dt.children.length-1:0,Bt=Dt.children.length,yt=ft;yt>=0&&yt<Bt&&yt!=(ce>0?Bt:-1);yt+=Qe){var Vt=Dt.children[yt];if(Vt.className.indexOf("hidden")===-1&&Le(Vt.dateObj)&&Math.abs(oe.$i-yt)>=Math.abs(ce))return M(Vt)}t.changeMonth(Qe),j(P(Qe),0)}function j(oe,ce){var pe=a(),Ae=we(pe||document.body),Qe=oe!==void 0?oe:Ae?pe:t.selectedDateElem!==void 0&&we(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&we(t.todayDateElem)?t.todayDateElem:P(ce>0?1:-1);Qe===void 0?t._input.focus():Ae?O(Qe,ce):M(Qe)}function L(oe,ce){for(var pe=(new Date(oe,ce,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Ae=t.utils.getDaysInMonth((ce-1+12)%12,oe),Qe=t.utils.getDaysInMonth(ce,oe),gt=window.document.createDocumentFragment(),Dt=t.config.showMonths>1,ft=Dt?"prevMonthDay hidden":"prevMonthDay",Bt=Dt?"nextMonthDay hidden":"nextMonthDay",yt=Ae+1-pe,Vt=0;yt<=Ae;yt++,Vt++)gt.appendChild(k("flatpickr-day "+ft,new Date(oe,ce-1,yt),yt,Vt));for(yt=1;yt<=Qe;yt++,Vt++)gt.appendChild(k("flatpickr-day",new Date(oe,ce,yt),yt,Vt));for(var Kn=Qe+1;Kn<=42-pe&&(t.config.showMonths===1||Vt%7!==0);Kn++,Vt++)gt.appendChild(k("flatpickr-day "+Bt,new Date(oe,ce+1,Kn%Qe),Kn,Vt));var vi=$r("div","dayContainer");return vi.appendChild(gt),vi}function B(){if(t.daysContainer!==void 0){aO(t.daysContainer),t.weekNumbers&&aO(t.weekNumbers);for(var oe=document.createDocumentFragment(),ce=0;ce<t.config.showMonths;ce++){var pe=new Date(t.currentYear,t.currentMonth,1);pe.setMonth(t.currentMonth+ce),oe.appendChild(L(pe.getFullYear(),pe.getMonth()))}t.daysContainer.appendChild(oe),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&he()}}function $(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var oe=function(Ae){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Ae<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Ae>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var ce=0;ce<12;ce++)if(oe(ce)){var pe=$r("option","flatpickr-monthDropdown-month");pe.value=new Date(t.currentYear,ce).getMonth().toString(),pe.textContent=R2(ce,t.config.shorthandCurrentMonth,t.l10n),pe.tabIndex=-1,t.currentMonth===ce&&(pe.selected=!0),t.monthsDropdownContainer.appendChild(pe)}}}function Y(){var oe=$r("div","flatpickr-month"),ce=window.document.createDocumentFragment(),pe;t.config.showMonths>1||t.config.monthSelectorType==="static"?pe=$r("span","cur-month"):(t.monthsDropdownContainer=$r("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),v(t.monthsDropdownContainer,"change",function(Dt){var ft=_c(Dt),Bt=parseInt(ft.value,10);t.changeMonth(Bt-t.currentMonth),on("onMonthChange")}),$(),pe=t.monthsDropdownContainer);var Ae=oO("cur-year",{tabindex:"-1"}),Qe=Ae.getElementsByTagName("input")[0];Qe.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&Qe.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(Qe.setAttribute("max",t.config.maxDate.getFullYear().toString()),Qe.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var gt=$r("div","flatpickr-current-month");return gt.appendChild(pe),gt.appendChild(Ae),ce.appendChild(gt),oe.appendChild(ce),{container:oe,yearElement:Qe,monthElement:pe}}function G(){aO(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var oe=t.config.showMonths;oe--;){var ce=Y();t.yearElements.push(ce.yearElement),t.monthElements.push(ce.monthElement),t.monthNav.appendChild(ce.container)}t.monthNav.appendChild(t.nextMonthNav)}function W(){return t.monthNav=$r("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=$r("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=$r("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,G(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(oe){t.__hidePrevMonthArrow!==oe&&(nl(t.prevMonthNav,"flatpickr-disabled",oe),t.__hidePrevMonthArrow=oe)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(oe){t.__hideNextMonthArrow!==oe&&(nl(t.nextMonthNav,"flatpickr-disabled",oe),t.__hideNextMonthArrow=oe)}}),t.currentYearElement=t.yearElements[0],Xe(),t.monthNav}function X(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var oe=uU(t.config);t.timeContainer=$r("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var ce=$r("span","flatpickr-time-separator",":"),pe=oO("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=pe.getElementsByTagName("input")[0];var Ae=oO("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Ae.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Vl(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?oe.hours:u(oe.hours)),t.minuteElement.value=Vl(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():oe.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(pe),t.timeContainer.appendChild(ce),t.timeContainer.appendChild(Ae),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var Qe=oO("flatpickr-second");t.secondElement=Qe.getElementsByTagName("input")[0],t.secondElement.value=Vl(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():oe.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild($r("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(Qe)}return t.config.time_24hr||(t.amPM=$r("span","flatpickr-am-pm",t.l10n.amPM[Au((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function te(){t.weekdayContainer?aO(t.weekdayContainer):t.weekdayContainer=$r("div","flatpickr-weekdays");for(var oe=t.config.showMonths;oe--;){var ce=$r("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(ce)}return re(),t.weekdayContainer}function re(){if(t.weekdayContainer){var oe=t.l10n.firstDayOfWeek,ce=ooe(t.l10n.weekdays.shorthand);oe>0&&oe<ce.length&&(ce=ooe(ce.splice(oe,ce.length),ce.splice(0,oe)));for(var pe=t.config.showMonths;pe--;)t.weekdayContainer.children[pe].innerHTML=`
      <span class='flatpickr-weekday'>
        `+ce.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function z(){t.calendarContainer.classList.add("hasWeeks");var oe=$r("div","flatpickr-weekwrapper");oe.appendChild($r("span","flatpickr-weekday",t.l10n.weekAbbreviation));var ce=$r("div","flatpickr-weeks");return oe.appendChild(ce),{weekWrapper:oe,weekNumbers:ce}}function ae(oe,ce){ce===void 0&&(ce=!0);var pe=ce?oe:oe-t.currentMonth;pe<0&&t._hidePrevMonthArrow===!0||pe>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=pe,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,on("onYearChange"),$()),B(),on("onMonthChange"),Xe())}function le(oe,ce){if(oe===void 0&&(oe=!0),ce===void 0&&(ce=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,ce===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var pe=uU(t.config),Ae=pe.hours,Qe=pe.minutes,gt=pe.seconds;f(Ae,Qe,gt)}t.redraw(),oe&&on("onChange")}function ee(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),on("onClose")}function ye(){t.config!==void 0&&on("onDestroy");for(var oe=t._handlers.length;oe--;)t._handlers[oe].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var ce=t.calendarContainer.parentNode;if(ce.lastChild&&ce.removeChild(ce.lastChild),ce.parentNode){for(;ce.firstChild;)ce.parentNode.insertBefore(ce.firstChild,ce);ce.parentNode.removeChild(ce)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(pe){try{delete t[pe]}catch{}})}function fe(oe){return t.calendarContainer.contains(oe)}function Ce(oe){if(t.isOpen&&!t.config.inline){var ce=_c(oe),pe=fe(ce),Ae=ce===t.input||ce===t.altInput||t.element.contains(ce)||oe.path&&oe.path.indexOf&&(~oe.path.indexOf(t.input)||~oe.path.indexOf(t.altInput)),Qe=!Ae&&!pe&&!fe(oe.relatedTarget),gt=!t.config.ignoredFocusElements.some(function(Dt){return Dt.contains(ce)});Qe&&gt&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function at(oe){if(!(!oe||t.config.minDate&&oe<t.config.minDate.getFullYear()||t.config.maxDate&&oe>t.config.maxDate.getFullYear())){var ce=oe,pe=t.currentYear!==ce;t.currentYear=ce||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),pe&&(t.redraw(),on("onYearChange"),$())}}function Le(oe,ce){var pe;ce===void 0&&(ce=!0);var Ae=t.parseDate(oe,void 0,ce);if(t.config.minDate&&Ae&&Ec(Ae,t.config.minDate,ce!==void 0?ce:!t.minDateHasTime)<0||t.config.maxDate&&Ae&&Ec(Ae,t.config.maxDate,ce!==void 0?ce:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Ae===void 0)return!1;for(var Qe=!!t.config.enable,gt=(pe=t.config.enable)!==null&&pe!==void 0?pe:t.config.disable,Dt=0,ft=void 0;Dt<gt.length;Dt++){if(ft=gt[Dt],typeof ft=="function"&&ft(Ae))return Qe;if(ft instanceof Date&&Ae!==void 0&&ft.getTime()===Ae.getTime())return Qe;if(typeof ft=="string"){var Bt=t.parseDate(ft,void 0,!0);return Bt&&Bt.getTime()===Ae.getTime()?Qe:!Qe}else if(typeof ft=="object"&&Ae!==void 0&&ft.from&&ft.to&&Ae.getTime()>=ft.from.getTime()&&Ae.getTime()<=ft.to.getTime())return Qe}return!Qe}function we(oe){return t.daysContainer!==void 0?oe.className.indexOf("hidden")===-1&&oe.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(oe):!1}function be(oe){var ce=oe.target===t._input,pe=t._input.value.trimEnd()!==Be();ce&&pe&&!(oe.relatedTarget&&fe(oe.relatedTarget))&&t.setDate(t._input.value,!0,oe.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function ge(oe){var ce=_c(oe),pe=t.config.wrap?n.contains(ce):ce===t._input,Ae=t.config.allowInput,Qe=t.isOpen&&(!Ae||!pe),gt=t.config.inline&&pe&&!Ae;if(oe.keyCode===13&&pe){if(Ae)return t.setDate(t._input.value,!0,ce===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),ce.blur();t.open()}else if(fe(ce)||Qe||gt){var Dt=!!t.timeContainer&&t.timeContainer.contains(ce);switch(oe.keyCode){case 13:Dt?(oe.preventDefault(),l(),Jt()):hn(oe);break;case 27:oe.preventDefault(),Jt();break;case 8:case 46:pe&&!t.config.allowInput&&(oe.preventDefault(),t.clear());break;case 37:case 39:if(!Dt&&!pe){oe.preventDefault();var ft=a();if(t.daysContainer!==void 0&&(Ae===!1||ft&&we(ft))){var Bt=oe.keyCode===39?1:-1;oe.ctrlKey?(oe.stopPropagation(),ae(Bt),j(P(1),0)):j(void 0,Bt)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:oe.preventDefault();var yt=oe.keyCode===40?1:-1;t.daysContainer&&ce.$i!==void 0||ce===t.input||ce===t.altInput?oe.ctrlKey?(oe.stopPropagation(),at(t.currentYear-yt),j(P(1),0)):Dt||j(void 0,yt*7):ce===t.currentYearElement?at(t.currentYear-yt):t.config.enableTime&&(!Dt&&t.hourElement&&t.hourElement.focus(),l(oe),t._debouncedChange());break;case 9:if(Dt){var Vt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(ba){return ba}),Kn=Vt.indexOf(ce);if(Kn!==-1){var vi=Vt[Kn+(oe.shiftKey?-1:1)];oe.preventDefault(),(vi||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(ce)&&oe.shiftKey&&(oe.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&ce===t.amPM)switch(oe.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],d(),Ke();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],d(),Ke();break}(pe||fe(ce))&&on("onKeyDown",oe)}function he(oe,ce){if(ce===void 0&&(ce="flatpickr-day"),!(t.selectedDates.length!==1||oe&&(!oe.classList.contains(ce)||oe.classList.contains("flatpickr-disabled")))){for(var pe=oe?oe.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Ae=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),Qe=Math.min(pe,t.selectedDates[0].getTime()),gt=Math.max(pe,t.selectedDates[0].getTime()),Dt=!1,ft=0,Bt=0,yt=Qe;yt<gt;yt+=Ktt.DAY)Le(new Date(yt),!0)||(Dt=Dt||yt>Qe&&yt<gt,yt<Ae&&(!ft||yt>ft)?ft=yt:yt>Ae&&(!Bt||yt<Bt)&&(Bt=yt));var Vt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+ce));Vt.forEach(function(Kn){var vi=Kn.dateObj,ba=vi.getTime(),ls=ft>0&&ba<ft||Bt>0&&ba>Bt;if(ls){Kn.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(oa){Kn.classList.remove(oa)});return}else if(Dt&&!ls)return;["startRange","inRange","endRange","notAllowed"].forEach(function(oa){Kn.classList.remove(oa)}),oe!==void 0&&(oe.classList.add(pe<=t.selectedDates[0].getTime()?"startRange":"endRange"),Ae<pe&&ba===Ae?Kn.classList.add("startRange"):Ae>pe&&ba===Ae&&Kn.classList.add("endRange"),ba>=ft&&(Bt===0||ba<=Bt)&&Wtt(ba,Ae,pe)&&Kn.classList.add("inRange"))})}}function Ge(){t.isOpen&&!t.config.static&&!t.config.inline&&Ct()}function je(oe,ce){if(ce===void 0&&(ce=t._positionElement),t.isMobile===!0){if(oe){oe.preventDefault();var pe=_c(oe);pe&&pe.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),on("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Ae=t.isOpen;t.isOpen=!0,Ae||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),on("onOpen"),Ct(ce)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(oe===void 0||!t.timeContainer.contains(oe.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function rt(oe){return function(ce){var pe=t.config["_"+oe+"Date"]=t.parseDate(ce,t.config.dateFormat),Ae=t.config["_"+(oe==="min"?"max":"min")+"Date"];pe!==void 0&&(t[oe==="min"?"minDateHasTime":"maxDateHasTime"]=pe.getHours()>0||pe.getMinutes()>0||pe.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(Qe){return Le(Qe)}),!t.selectedDates.length&&oe==="min"&&h(pe),Ke()),t.daysContainer&&(Re(),pe!==void 0?t.currentYearElement[oe]=pe.getFullYear().toString():t.currentYearElement.removeAttribute(oe),t.currentYearElement.disabled=!!Ae&&pe!==void 0&&Ae.getFullYear()===pe.getFullYear())}}function bt(){var oe=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],ce=Ms(Ms({},JSON.parse(JSON.stringify(n.dataset||{}))),e),pe={};t.config.parseDate=ce.parseDate,t.config.formatDate=ce.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Vt){t.config._enable=xt(Vt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Vt){t.config._disable=xt(Vt)}});var Ae=ce.mode==="time";if(!ce.dateFormat&&(ce.enableTime||Ae)){var Qe=Ia.defaultConfig.dateFormat||p1.dateFormat;pe.dateFormat=ce.noCalendar||Ae?"H:i"+(ce.enableSeconds?":S":""):Qe+" H:i"+(ce.enableSeconds?":S":"")}if(ce.altInput&&(ce.enableTime||Ae)&&!ce.altFormat){var gt=Ia.defaultConfig.altFormat||p1.altFormat;pe.altFormat=ce.noCalendar||Ae?"h:i"+(ce.enableSeconds?":S K":" K"):gt+(" h:i"+(ce.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:rt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:rt("max")});var Dt=function(Vt){return function(Kn){t.config[Vt==="min"?"_minTime":"_maxTime"]=t.parseDate(Kn,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Dt("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Dt("max")}),ce.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,pe,ce);for(var ft=0;ft<oe.length;ft++)t.config[oe[ft]]=t.config[oe[ft]]===!0||t.config[oe[ft]]==="true";oU.filter(function(Vt){return t.config[Vt]!==void 0}).forEach(function(Vt){t.config[Vt]=sU(t.config[Vt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ft=0;ft<t.config.plugins.length;ft++){var Bt=t.config.plugins[ft](t)||{};for(var yt in Bt)oU.indexOf(yt)>-1?t.config[yt]=sU(Bt[yt]).map(o).concat(t.config[yt]):typeof ce[yt]>"u"&&(t.config[yt]=Bt[yt])}ce.altInputClass||(t.config.altInputClass=lt().className+" "+t.config.altInputClass),on("onParseConfig")}function lt(){return t.config.wrap?n.querySelector("[data-input]"):n}function cn(){typeof t.config.locale!="object"&&typeof Ia.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Ms(Ms({},Ia.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Ia.l10ns[t.config.locale]:void 0),Hb.D="("+t.l10n.weekdays.shorthand.join("|")+")",Hb.l="("+t.l10n.weekdays.longhand.join("|")+")",Hb.M="("+t.l10n.months.shorthand.join("|")+")",Hb.F="("+t.l10n.months.longhand.join("|")+")",Hb.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var oe=Ms(Ms({},e),JSON.parse(JSON.stringify(n.dataset||{})));oe.time_24hr===void 0&&Ia.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Cxe(t),t.parseDate=vH({config:t.config,l10n:t.l10n})}function Ct(oe){if(typeof t.config.position=="function")return void t.config.position(t,oe);if(t.calendarContainer!==void 0){on("onPreCalendarPosition");var ce=oe||t._positionElement,pe=Array.prototype.reduce.call(t.calendarContainer.children,function(Sl,Xf){return Sl+Xf.offsetHeight},0),Ae=t.calendarContainer.offsetWidth,Qe=t.config.position.split(" "),gt=Qe[0],Dt=Qe.length>1?Qe[1]:null,ft=ce.getBoundingClientRect(),Bt=window.innerHeight-ft.bottom,yt=gt==="above"||gt!=="below"&&Bt<pe&&ft.top>pe,Vt=window.pageYOffset+ft.top+(yt?-pe-2:ce.offsetHeight+2);if(nl(t.calendarContainer,"arrowTop",!yt),nl(t.calendarContainer,"arrowBottom",yt),!t.config.inline){var Kn=window.pageXOffset+ft.left,vi=!1,ba=!1;Dt==="center"?(Kn-=(Ae-ft.width)/2,vi=!0):Dt==="right"&&(Kn-=Ae-ft.width,ba=!0),nl(t.calendarContainer,"arrowLeft",!vi&&!ba),nl(t.calendarContainer,"arrowCenter",vi),nl(t.calendarContainer,"arrowRight",ba);var ls=window.document.body.offsetWidth-(window.pageXOffset+ft.right),oa=Kn+Ae>window.document.body.offsetWidth,Jl=ls+Ae>window.document.body.offsetWidth;if(nl(t.calendarContainer,"rightMost",oa),!t.config.static)if(t.calendarContainer.style.top=Vt+"px",!oa)t.calendarContainer.style.left=Kn+"px",t.calendarContainer.style.right="auto";else if(!Jl)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ls+"px";else{var sa=En();if(sa===void 0)return;var _l=window.document.body.offsetWidth,Qa=Math.max(0,_l/2-Ae/2),Ai=".flatpickr-calendar.centerMost:before",hh=".flatpickr-calendar.centerMost:after",Zr=sa.cssRules.length,Ra="{left:"+ft.left+"px;right:auto;}";nl(t.calendarContainer,"rightMost",!1),nl(t.calendarContainer,"centerMost",!0),sa.insertRule(Ai+","+hh+Ra,Zr),t.calendarContainer.style.left=Qa+"px",t.calendarContainer.style.right="auto"}}}}function En(){for(var oe=null,ce=0;ce<document.styleSheets.length;ce++){var pe=document.styleSheets[ce];if(pe.cssRules){try{pe.cssRules}catch{continue}oe=pe;break}}return oe??jn()}function jn(){var oe=document.createElement("style");return document.head.appendChild(oe),oe.sheet}function Re(){t.config.noCalendar||t.isMobile||($(),Xe(),B())}function Jt(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function hn(oe){oe.preventDefault(),oe.stopPropagation();var ce=function(Vt){return Vt.classList&&Vt.classList.contains("flatpickr-day")&&!Vt.classList.contains("flatpickr-disabled")&&!Vt.classList.contains("notAllowed")},pe=kxe(_c(oe),ce);if(pe!==void 0){var Ae=pe,Qe=t.latestSelectedDateObj=new Date(Ae.dateObj.getTime()),gt=(Qe.getMonth()<t.currentMonth||Qe.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Ae,t.config.mode==="single")t.selectedDates=[Qe];else if(t.config.mode==="multiple"){var Dt=Ei(Qe);Dt?t.selectedDates.splice(parseInt(Dt),1):t.selectedDates.push(Qe)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=Qe,t.selectedDates.push(Qe),Ec(Qe,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Vt,Kn){return Vt.getTime()-Kn.getTime()}));if(d(),gt){var ft=t.currentYear!==Qe.getFullYear();t.currentYear=Qe.getFullYear(),t.currentMonth=Qe.getMonth(),ft&&(on("onYearChange"),$()),on("onMonthChange")}if(Xe(),B(),Ke(),!gt&&t.config.mode!=="range"&&t.config.showMonths===1?M(Ae):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Bt=t.config.mode==="single"&&!t.config.enableTime,yt=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Bt||yt)&&Jt()}y()}}var Mt={locale:[cn,re],showMonths:[G,s,te],minDate:[_],maxDate:[_],positionElement:[Nn],clickOpens:[function(){t.config.clickOpens===!0?(v(t._input,"focus",t.open),v(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Te(oe,ce){if(oe!==null&&typeof oe=="object"){Object.assign(t.config,oe);for(var pe in oe)Mt[pe]!==void 0&&Mt[pe].forEach(function(Ae){return Ae()})}else t.config[oe]=ce,Mt[oe]!==void 0?Mt[oe].forEach(function(Ae){return Ae()}):oU.indexOf(oe)>-1&&(t.config[oe]=sU(ce));t.redraw(),Ke(!0)}function Ne(oe,ce){var pe=[];if(oe instanceof Array)pe=oe.map(function(Ae){return t.parseDate(Ae,ce)});else if(oe instanceof Date||typeof oe=="number")pe=[t.parseDate(oe,ce)];else if(typeof oe=="string")switch(t.config.mode){case"single":case"time":pe=[t.parseDate(oe,ce)];break;case"multiple":pe=oe.split(t.config.conjunction).map(function(Ae){return t.parseDate(Ae,ce)});break;case"range":pe=oe.split(t.l10n.rangeSeparator).map(function(Ae){return t.parseDate(Ae,ce)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(oe)));t.selectedDates=t.config.allowInvalidPreload?pe:pe.filter(function(Ae){return Ae instanceof Date&&Le(Ae,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Ae,Qe){return Ae.getTime()-Qe.getTime()})}function tt(oe,ce,pe){if(ce===void 0&&(ce=!1),pe===void 0&&(pe=t.config.dateFormat),oe!==0&&!oe||oe instanceof Array&&oe.length===0)return t.clear(ce);Ne(oe,pe),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),_(void 0,ce),h(),t.selectedDates.length===0&&t.clear(!1),Ke(ce),ce&&on("onChange")}function xt(oe){return oe.slice().map(function(ce){return typeof ce=="string"||typeof ce=="number"||ce instanceof Date?t.parseDate(ce,void 0,!0):ce&&typeof ce=="object"&&ce.from&&ce.to?{from:t.parseDate(ce.from,void 0),to:t.parseDate(ce.to,void 0)}:ce}).filter(function(ce){return ce})}function fn(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var oe=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);oe&&Ne(oe,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Ti(){if(t.input=lt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=$r(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Nn()}function Nn(){t._positionElement=t.config.positionElement||t._input}function Nr(){var oe=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=$r("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=oe,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=oe==="datetime-local"?"Y-m-d\\TH:i:S":oe==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}v(t.mobileInput,"change",function(ce){t.setDate(_c(ce).value,!1,t.mobileFormatStr),on("onChange"),on("onClose")})}function oi(oe){if(t.isOpen===!0)return t.close();t.open(oe)}function on(oe,ce){if(t.config!==void 0){var pe=t.config[oe];if(pe!==void 0&&pe.length>0)for(var Ae=0;pe[Ae]&&Ae<pe.length;Ae++)pe[Ae](t.selectedDates,t.input.value,t,ce);oe==="onChange"&&(t.input.dispatchEvent(zr("change")),t.input.dispatchEvent(zr("input")))}}function zr(oe){var ce=document.createEvent("Event");return ce.initEvent(oe,!0,!0),ce}function Ei(oe){for(var ce=0;ce<t.selectedDates.length;ce++){var pe=t.selectedDates[ce];if(pe instanceof Date&&Ec(pe,oe)===0)return""+ce}return!1}function mi(oe){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Ec(oe,t.selectedDates[0])>=0&&Ec(oe,t.selectedDates[1])<=0}function Xe(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(oe,ce){var pe=new Date(t.currentYear,t.currentMonth,1);pe.setMonth(t.currentMonth+ce),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[ce].textContent=R2(pe.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=pe.getMonth().toString(),oe.value=pe.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function Be(oe){var ce=oe||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(pe){return t.formatDate(pe,ce)}).filter(function(pe,Ae,Qe){return t.config.mode!=="range"||t.config.enableTime||Qe.indexOf(pe)===Ae}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Ke(oe){oe===void 0&&(oe=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=Be(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=Be(t.config.altFormat)),oe!==!1&&on("onValueUpdate")}function Tt(oe){var ce=_c(oe),pe=t.prevMonthNav.contains(ce),Ae=t.nextMonthNav.contains(ce);pe||Ae?ae(pe?-1:1):t.yearElements.indexOf(ce)>=0?ce.select():ce.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):ce.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function nr(oe){oe.preventDefault();var ce=oe.type==="keydown",pe=_c(oe),Ae=pe;t.amPM!==void 0&&pe===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Au(t.amPM.textContent===t.l10n.amPM[0])]);var Qe=parseFloat(Ae.getAttribute("min")),gt=parseFloat(Ae.getAttribute("max")),Dt=parseFloat(Ae.getAttribute("step")),ft=parseInt(Ae.value,10),Bt=oe.delta||(ce?oe.which===38?1:-1:0),yt=ft+Dt*Bt;if(typeof Ae.value<"u"&&Ae.value.length===2){var Vt=Ae===t.hourElement,Kn=Ae===t.minuteElement;yt<Qe?(yt=gt+yt+Au(!Vt)+(Au(Vt)&&Au(!t.amPM)),Kn&&A(void 0,-1,t.hourElement)):yt>gt&&(yt=Ae===t.hourElement?yt-gt-Au(!t.amPM):Qe,Kn&&A(void 0,1,t.hourElement)),t.amPM&&Vt&&(Dt===1?yt+ft===23:Math.abs(yt-ft)>Dt)&&(t.amPM.textContent=t.l10n.amPM[Au(t.amPM.textContent===t.l10n.amPM[0])]),Ae.value=Vl(yt)}}return i(),t}function g1(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var a=t[i];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=Ztt(a,e||{}),r.push(a._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return g1(this,n)},HTMLElement.prototype.flatpickr=function(n){return g1([this],n)});var Ia=function(n,e){return typeof n=="string"?g1(window.document.querySelectorAll(n),e):n instanceof Node?g1([n],e):g1(n,e)};Ia.defaultConfig={};Ia.l10ns={en:Ms({},QD),default:Ms({},QD)};Ia.localize=function(n){Ia.l10ns.default=Ms(Ms({},Ia.l10ns.default),n)};Ia.setDefaults=function(n){Ia.defaultConfig=Ms(Ms({},Ia.defaultConfig),n)};Ia.parseDate=vH({});Ia.formatDate=Cxe({});Ia.compareDates=Ec;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return g1(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Ia);const Qtt=()=>{const n=Zg(),e=ss(),[t,r]=K.useState(!1),[i,a]=K.useState(!1),{selectedRange:o,setSelectedRange:s}=oh(),{toggleFocusMode:l,isLeftSidebarOpen:c,toggleLeftSidebar:u}=pl(),d=K.useRef(null),h=K.useRef(null),f=K.useRef(null),[m,v]=K.useState(null),[y,w]=K.useState(null),[_,T]=K.useState(!1);K.useEffect(()=>{const P=O=>{if(d.current&&!d.current.contains(O.target)){if(r(!1),f.current&&f.current.isOpen)return;a(!1)}};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]),K.useEffect(()=>{if(i&&h.current&&!f.current){T(!0);const P=Ia(h.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[m,y].filter(Boolean),onChange:function(O){if(O.length===2)if(Math.ceil((O[1].getTime()-O[0].getTime())/864e5)>365){const L=new Date(O[0]);L.setDate(L.getDate()+364),P.setDate([O[0],L])}else v(O[0]),w(O[1]);else O.length===1&&(v(O[0]),w(null))},onClose:function(){if(_){T(!1);return}}});f.current=P,P.open()}return()=>{!i&&f.current&&(f.current.destroy(),f.current=null)}},[i,_]);const A=P=>P.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=P=>{const O=new Date,j=new Date(O.getFullYear(),O.getMonth(),O.getDate()),L=new Date(j);L.setHours(23,59,59,999);const B=new Date(j);B.setHours(0,0,0,0);let $="today";switch(P){case"Today":$="today",s({startDate:B,endDate:L,rangeType:$});break;case"Yesterday":const Y=new Date(j);Y.setDate(j.getDate()-1);const G=new Date(Y);G.setHours(0,0,0,0);const W=new Date(Y);W.setHours(23,59,59,999),$="yesterday",s({startDate:G,endDate:W,rangeType:$});break;case"Last 7 Days":const X=new Date(j);X.setDate(j.getDate()-6),X.setHours(0,0,0,0),$="last 7 days",s({startDate:X,endDate:L,rangeType:$});break;case"Last 30 Days":const te=new Date(j);te.setDate(j.getDate()-29),te.setHours(0,0,0,0),$="last 30 days",s({startDate:te,endDate:L,rangeType:$});break;case"Custom Range":a(!0),r(!1);return;default:$="all time",s({startDate:null,endDate:null,rangeType:$})}r(!1)},k=()=>{if(m&&y){const P=new Date;if(P.setHours(23,59,59,999),m>P||y>P){console.warn("Cannot select future dates for productivity analysis");return}const O=new Date(m);O.setHours(0,0,0,0);const j=new Date(y);j.setHours(23,59,59,999),s({startDate:O,endDate:j,rangeType:"custom"}),a(!1),f.current&&(f.current.destroy(),f.current=null)}},M=()=>{switch(o.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return o.startDate&&o.endDate?`${A(o.startDate)} - ${A(o.endDate)}`:"Custom Range";default:return"All time"}};return x.jsxs("div",{className:"dashboard-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!c&&x.jsx("button",{onClick:u,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"menu-line",size:20})})}),x.jsx(n5,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Productivity Insights"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"relative",ref:d,children:[x.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{r(!t),i&&(a(!1),f.current&&(f.current.destroy(),f.current=null))},children:[x.jsx("span",{children:M()}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-down-s-line"})})]}),t&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Today"),children:"Today"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Yesterday"),children:"Yesterday"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Last 7 Days"),children:"Last 7 days"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("Last 30 Days"),children:"Last 30 days"}),x.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>C("Custom Range"),children:[x.jsx("span",{children:"Time range"}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-calendar-line"})})]}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>C("All time"),children:"All time"})]}),i&&x.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),x.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{a(!1),f.current&&(f.current.destroy(),f.current=null)},children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-close-line"})})})]}),x.jsx("div",{children:x.jsx("input",{ref:h,type:"text",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),x.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[m&&!y?"Select end date":m?"":"Select start date",(!m||!y)&&x.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),x.jsx("div",{className:"mt-4 flex justify-end",children:x.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:k,disabled:!m||!y,children:"Apply"})})]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"brain-line",size:20})})})})]})]})},Jtt=()=>x.jsxs("div",{className:"dashboard-layout",children:[x.jsx(Vw,{}),x.jsxs("main",{className:"dashboard-main",children:[x.jsx(Qtt,{}),x.jsx("div",{className:"dashboard-content",children:x.jsx("div",{className:"max-w-7xl mx-auto",children:x.jsx(Fye,{})})})]})]}),ent=({className:n=""})=>{const e=Ut(d=>d.tasks),t=Ut(d=>d.updateTaskStatus),[r,i]=K.useState([]),a=e.filter(d=>d.status==="pomodoro"),o=e.filter(d=>d.status==="todo"),s=e.filter(d=>d.status==="completed"),l=(d,h)=>{const f=e.find(y=>y.id===d);if(!f)return;const m=f.status;t(d,h);let v="";h==="completed"?v="Task moved to Completed":h==="todo"?v=m==="completed"?"Task moved to To Do List":"Task marked as incomplete":h==="pomodoro"&&(v="Task moved to In Pomodoro"),c(v,d,()=>{t(d,m)})},c=(d,h,f)=>{const m=Date.now().toString();i(v=>[...v,{id:m,message:d,taskId:h,undoAction:f}]),setTimeout(()=>{i(v=>v.filter(y=>y.id!==m))},3e3)},u=d=>{i(h=>h.filter(f=>f.id!==d))};return x.jsxs("div",{className:`grid grid-cols-3 h-full ${n}`,children:[x.jsx(dU,{title:"To Do List",tasks:o,status:"todo",badgeColor:"bg-blue-500",onStatusChange:l}),x.jsx(dU,{title:"In Pomodoro",tasks:a,status:"pomodoro",badgeColor:"bg-red-500",onStatusChange:l}),x.jsx(dU,{title:"Completed",tasks:s,status:"completed",badgeColor:"bg-green-500",onStatusChange:l}),x.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.map(d=>x.jsx(ant,{message:d.message,onClose:()=>u(d.id),onUndo:d.undoAction},d.id))})]})},tnt=({task:n,onStatusChange:e,onReorder:t,onCrossColumnMove:r})=>{const[i,a]=K.useState(!1),[o,s]=K.useState(!1),[l,c]=K.useState(!1),[u,d]=K.useState(null),h=K.useRef(null),f=Ut(L=>L.toggleTaskCompletion),v=Ut(L=>L.projects).find(L=>L.id===n.projectId),y=()=>v?x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:v.color}}):null,w=L=>{L.dataTransfer.setData("text/plain",n.id),L.dataTransfer.setData("application/x-task-status",n.status),h.current&&h.current.classList.add("dragging")},_=()=>{h.current&&h.current.classList.remove("dragging"),c(!1),d(null)},T=L=>{var $;L.preventDefault(),L.stopPropagation();const B=($=h.current)==null?void 0:$.getBoundingClientRect();if(B){const Y=L.clientY-B.top,G=B.height,W=Y<G/2;d(W?"top":"bottom"),c(!0)}},A=L=>{L.preventDefault(),L.stopPropagation(),c(!0)},C=L=>{var $;L.preventDefault(),L.stopPropagation();const B=($=h.current)==null?void 0:$.getBoundingClientRect();if(B){const Y=L.clientX,G=L.clientY;(Y<B.left||Y>B.right||G<B.top||G>B.bottom)&&(c(!1),d(null))}},k=L=>{L.preventDefault(),L.stopPropagation(),c(!1),d(null);const B=L.dataTransfer.getData("text/plain"),$=L.dataTransfer.getData("application/x-task-status");B&&B!==n.id&&($===n.status&&t?t(B,n.id,u==="bottom"):$!==n.status&&r&&r(B,n.id,n.status,u==="bottom"))},M=()=>{f(n.id)},P=L=>{L.stopPropagation(),a(!0)},O=L=>{L.stopPropagation(),s(!o)},j=()=>{if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}};return i?x.jsx(ay,{task:n,onCancel:()=>a(!1)}):x.jsxs("div",{className:"relative",children:[l&&u==="top"&&x.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),l&&u==="bottom"&&x.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),x.jsxs("div",{ref:h,className:`task-card flex items-start p-3 border ${j()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${l?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:w,onDragEnd:_,onDragOver:T,onDragEnter:A,onDragLeave:C,onDrop:k,"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(ZD,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:M})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[y(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(v==null?void 0:v.name)||"Unknown project"})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),o&&n.description&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:O,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${o?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-primary flex-shrink-0",onClick:P,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})]})},nnt=({title:n,tasks:e,status:t,badgeColor:r,onStatusChange:i})=>{const[a,o]=K.useState(!1),s=Ut(d=>d.reorderTasks),l=Ut(d=>d.moveTaskToStatusAndPosition),c=(d,h,f=!1)=>{const m=e.find(T=>T.id===d),v=e.find(T=>T.id===h);if(!m||!v||m.status!==v.status)return;const w=Ut.getState().tasks.findIndex(T=>T.id===h),_=f?w+1:w;s(d,_)},u=async(d,h,f,m=!1)=>{const y=Ut.getState().tasks.findIndex(_=>_.id===h),w=m?y+1:y;l(d,f,w)};return x.jsxs("div",{className:"status-section flex flex-col",children:[x.jsx("div",{className:"status-section-header px-4 py-3 border-b border-border sticky top-0 bg-background-primary z-5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:`status-badge ${t==="pomodoro"?"pomodoro-badge":t==="todo"?"todo-badge":t==="completed"?"completed-badge":""}`}),x.jsx("h3",{className:"font-medium text-text-primary",children:n}),x.jsx("span",{className:"ml-2 text-xs font-medium text-text-secondary bg-background-primary px-2 py-0.5 rounded-full",children:e.length})]}),x.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:()=>o(!0),children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(ht,{name:"add-line"})})})]})}),x.jsxs("div",{className:"task-list-container py-3 pl-3 pr-3 space-y-2 overflow-y-auto flex-1",children:[a&&x.jsx(ay,{status:t,onCancel:()=>o(!1)}),e.map(d=>x.jsx(tnt,{task:d,onStatusChange:i,onReorder:c,onCrossColumnMove:u},d.id))]})]})},rnt=({message:n,onClose:e,onUndo:t,duration:r=3e3})=>{const[i,a]=K.useState(!0),[o,s]=K.useState(!1);K.useEffect(()=>{const u=setTimeout(()=>{l()},r);return()=>clearTimeout(u)},[r]);const l=()=>{o||(s(!0),setTimeout(()=>{a(!1),e()},300))},c=()=>{t&&t(),l()};return i?x.jsxs("div",{className:`flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 transform transition-all duration-300 ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,style:{animation:o?"none":"slideIn 0.3s forwards"},children:[x.jsx("div",{className:"flex-1 mr-4",children:x.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&x.jsx("button",{className:"px-3 py-1 text-xs font-medium rounded-lg text-primary hover:bg-primary/10 transition-colors duration-200",onClick:c,children:"Undo"})]}):null},int=ent,dU=nnt,ant=rnt,soe=({task:n,projectId:e,projectColor:t="#4f46e5",isNewTask:r=!1,onCancel:i,onReorder:a,onCrossProjectMove:o})=>{Ut(X=>X.updateTask);const s=Ut(X=>X.toggleTaskCompletion),l=Ut(X=>X.projects),[c,u]=K.useState(!1),[d,h]=K.useState(r),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(null),T=K.useRef(null),A=n?l.find(X=>X.id===n.projectId):null,C=()=>!n||!A?null:x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:A.color}}),k=()=>{n&&s(n.id)},M=X=>{X.stopPropagation(),h(!0)},P=X=>{X.stopPropagation(),u(!c)},O=()=>{h(!1),r&&i&&i()},j=()=>{if(!n)return"bg-background-secondary border-border";if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}},L=X=>{n&&(X.dataTransfer.setData("text/plain",n.id),X.dataTransfer.setData("application/x-task-project",n.projectId),T.current&&T.current.classList.add("dragging"))},B=()=>{T.current&&T.current.classList.remove("dragging"),y(!1),_(null)},$=X=>{var re;X.preventDefault(),X.stopPropagation();const te=(re=T.current)==null?void 0:re.getBoundingClientRect();if(te){const z=X.clientY-te.top,ae=te.height,le=z<ae/2;_(le?"top":"bottom"),y(!0)}},Y=X=>{X.preventDefault(),X.stopPropagation(),y(!0)},G=X=>{var re;X.preventDefault(),X.stopPropagation();const te=(re=T.current)==null?void 0:re.getBoundingClientRect();if(te){const z=X.clientX,ae=X.clientY;(z<te.left||z>te.right||ae<te.top||ae>te.bottom)&&(y(!1),_(null))}},W=X=>{X.preventDefault(),X.stopPropagation(),y(!1),_(null);const te=X.dataTransfer.getData("text/plain"),re=X.dataTransfer.getData("application/x-task-project");te&&te!==(n==null?void 0:n.id)&&n&&(re===n.projectId&&a?a(te,n.id,w==="bottom"):re!==n.projectId&&o&&o(te,n.id,n.projectId,w==="bottom"))};return d||r?x.jsx(ay,{task:n,status:(n==null?void 0:n.status)||"todo",initialProjectId:r?e:void 0,onCancel:O}):n?x.jsxs("div",{className:"relative",children:[v&&w==="top"&&x.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),v&&w==="bottom"&&x.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),x.jsxs("div",{ref:T,className:`task-card flex items-start p-3 border ${j()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${v?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:L,onDragEnd:B,onDragOver:$,onDragEnter:Y,onDragLeave:G,onDrop:W,"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(ZD,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:k})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[C(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(A==null?void 0:A.name)||"Unknown project"})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),c&&n.description&&n.description.trim()&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:P,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${c?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:M,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})]}):null},ont=({isOpen:n,onClose:e,currentColor:t,onColorChange:r,onSave:i})=>{const[a,o]=K.useState(t),[s,l]=K.useState(!0),c=K.useRef(null),u=K.useRef(null),d=mH;K.useEffect(()=>{o(t),l(!0)},[t]),K.useEffect(()=>{n&&u.current&&(u.current.focus(),u.current.select())},[n]),K.useEffect(()=>{if(!n)return;const w=T=>{c.current&&!c.current.contains(T.target)&&e()},_=T=>{T.key==="Escape"&&e()};return document.addEventListener("mousedown",w),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",_)}},[n,e]);const h=$tt,f=w=>{o(w);const _=h(w);l(_),_&&r(w)},m=w=>{o(w),l(!0),r(w)},v=()=>{s&&i()},y=w=>{w.key==="Enter"&&s&&v()};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:x.jsxs("div",{ref:c,className:"bg-background-secondary rounded-lg shadow-lg p-6 w-96 max-w-[90vw]",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Change Project Color"}),x.jsx("button",{onClick:e,className:"p-1 rounded-md hover:bg-background-container transition-colors duration-200",children:x.jsx(ht,{name:"close-line",size:20,className:"text-text-secondary"})})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Current Color"}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-md border border-border",style:{backgroundColor:a}}),x.jsx("span",{className:"text-sm font-medium text-text-primary",children:a})]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Hex Color Code"}),x.jsx("input",{ref:u,type:"text",value:a,onChange:w=>f(w.target.value),onKeyPress:y,placeholder:"#BB5F5A",className:`w-full px-3 py-2 border rounded-md text-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary bg-background-primary text-text-primary ${s?"border-border focus:border-primary":"border-red-300 focus:border-red-500 focus:ring-red-500"}`}),!s&&x.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please enter a valid hex color (e.g., #BB5F5A)"})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary mb-3",children:"Preset Colors"}),x.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.map(w=>x.jsx("button",{onClick:()=>m(w),className:`w-8 h-8 rounded-md border-2 transition-all duration-200 hover:scale-110 ${a===w?"border-text-secondary ring-2 ring-primary ring-offset-1":"border-border hover:border-text-secondary"}`,style:{backgroundColor:w},title:w},w))})]}),x.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[x.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors duration-200",children:"Cancel"}),x.jsx("button",{onClick:v,disabled:!s,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${s?"bg-primary text-white hover:bg-primary/90":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:"Save Color"})]})]})}):null},loe=({project:n,isNewProject:e=!1,onCancel:t})=>{const r=Ut(Re=>Re.tasks),i=Ut(Re=>Re.addProject),a=Ut(Re=>Re.deleteProject),o=Ut(Re=>Re.updateProject),s=Ut(Re=>Re.updateTask),l=Ut(Re=>Re.reorderTasks);Ut(Re=>Re.moveTaskToStatusAndPosition);const[c,u]=K.useState((n==null?void 0:n.name)||""),[d,h]=K.useState(()=>{if(!n)return null;const Re=localStorage.getItem(`projectFilter_${n.id}`);return Re==="pomodoro"||Re==="todo"||Re==="completed"?Re:null}),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(!1),[T,A]=K.useState(!1),[C,k]=K.useState((n==null?void 0:n.color)||"#BB5F5A"),[M,P]=K.useState(!1),[O,j]=K.useState((n==null?void 0:n.name)||""),[L,B]=K.useState(null);ve.useEffect(()=>{n&&(d===null?localStorage.removeItem(`projectFilter_${n.id}`):localStorage.setItem(`projectFilter_${n.id}`,d))},[d,n]);const $=(Re,Jt,hn=!1)=>{if(!n)return;const Te=Ut.getState().tasks.findIndex(tt=>tt.id===Jt),Ne=hn?Te+1:Te;l(Re,Ne)},Y=async(Re,Jt,hn,Mt=!1)=>{if(!n)return;const Te=Ut.getState().tasks,Ne=Te.findIndex(Nn=>Nn.id===Jt),tt=Mt?Ne+1:Ne;let xt,fn;if(d)xt=d,fn=d==="completed";else{const Nn=Te.find(Nr=>Nr.id===Re);xt=Nn==null?void 0:Nn.status,fn=Nn==null?void 0:Nn.completed}if(Te.find(Nn=>Nn.id===Re)){const Nn={projectId:hn,...xt&&{status:xt},...fn!==void 0&&{completed:fn}};await s(Re,Nn),setTimeout(()=>{l(Re,tt)},50)}};ve.useEffect(()=>{n!=null&&n.color&&k(n.color)},[n==null?void 0:n.color]),ve.useEffect(()=>{n!=null&&n.name&&j(n.name)},[n==null?void 0:n.name]);const G=n?r.filter(Re=>Re.projectId===n.id):[],W=G.filter(Re=>d===null?!0:d==="pomodoro"?Re.status==="pomodoro":d==="todo"?!Re.completed&&Re.status==="todo":d==="completed"?Re.completed:!0).sort((Re,Jt)=>{if(d===null){const hn={todo:1,pomodoro:2,completed:3},Mt=Re.completed?"completed":Re.status,Te=hn[Mt]||4,Ne=Jt.completed?"completed":Jt.status,tt=hn[Ne]||4;return Te-tt}return 0}),X=G.length,te=G.filter(Re=>Re.completed).length,re=X>0?Math.round(te/X*100):0,z=G.filter(Re=>Re.status==="pomodoro").length,ae=G.filter(Re=>!Re.completed&&Re.status==="todo").length,le=G.filter(Re=>Re.completed).length,ee=()=>{c.trim()&&(i({name:c.trim(),color:Sxe()}),t&&t())},ye=Re=>{Re.key==="Enter"&&ee()},fe=()=>{m(!0)},Ce=()=>{m(!1)},at=()=>{y(!v)},Le=async()=>{if(!n)return;const Jt=r.filter(Mt=>Mt.projectId===n.id).length;let hn=`Are you sure you want to delete the project "${n.name}"?`;if(Jt>0&&(hn+=`

This will also permanently delete ${Jt} task${Jt===1?"":"s"} in this project.`),hn+=`

This action cannot be undone.`,window.confirm(hn))try{await a(n.id),_(!1)}catch(Mt){console.error("Failed to delete project:",Mt),alert("Failed to delete project. Please try again.")}},we=()=>{k((n==null?void 0:n.color)||"#BB5F5A"),A(!0),_(!1)},be=Re=>{k(Re)},ge=async()=>{if(n)try{await o(n.id,{color:C}),console.log(`Project color updated to ${C}`),A(!1)}catch(Re){console.error("Error updating project color:",Re),alert("Failed to update project color. Please try again.")}},he=()=>{k((n==null?void 0:n.color)||"#BB5F5A"),A(!1)},Ge=()=>{j((n==null?void 0:n.name)||""),P(!0),_(!1)},je=async()=>{if(!n||!O.trim()){j((n==null?void 0:n.name)||""),P(!1);return}try{await o(n.id,{name:O.trim()}),console.log(`Project name updated to ${O.trim()}`),P(!1)}catch(Re){console.error("Error updating project name:",Re),alert("Failed to update project name. Please try again."),j((n==null?void 0:n.name)||""),P(!1)}},rt=()=>{j((n==null?void 0:n.name)||""),P(!1)},bt=Re=>{Re.key==="Enter"?je():Re.key==="Escape"&&rt()};ve.useEffect(()=>{const Re=Jt=>{!Jt.target.closest(".project-dropdown")&&w&&_(!1)};return document.addEventListener("click",Re),()=>document.removeEventListener("click",Re)},[w]);const lt=(Re,Jt)=>{Re.preventDefault(),Re.stopPropagation(),Re.dataTransfer.dropEffect="move",L!==Jt&&B(Jt)},cn=Re=>{Re.preventDefault(),Re.stopPropagation(),B(null)},Ct=(Re,Jt)=>{Re.preventDefault(),Re.stopPropagation(),B(null);const hn=Re.dataTransfer.getData("text/plain"),Mt=Re.dataTransfer.getData("application/x-task-project");if(hn&&n){const Ne=Ut.getState().tasks.find(tt=>tt.id===hn);if(Ne){const tt=Mt!==n.id?n.id:Ne.projectId;Ne.completed&&Jt!=="completed"?s(hn,{projectId:tt,status:Jt,completed:!1}):s(hn,{projectId:tt,status:Jt,completed:Jt==="completed"});const xt=Re.currentTarget;xt.classList.add("drop-success"),setTimeout(()=>{xt.classList.remove("drop-success")},500)}}},En=Re=>{Re.preventDefault(),Re.dataTransfer.dropEffect="move"},jn=Re=>{Re.preventDefault();try{const Jt=JSON.parse(Re.dataTransfer.getData("application/json"));Jt.id&&n&&s(Jt.id,{projectId:n.id})}catch(Jt){console.error("Error handling drop on task list:",Jt)}};return e?x.jsx("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px] animate-fade-in",children:x.jsxs("div",{className:"project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg",children:[x.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:x.jsx(ht,{name:"arrow-down-s-line"})}),x.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border-none focus:ring-2 focus:ring-primary rounded-md px-3 py-1.5",placeholder:"Enter project name",value:c,onChange:Re=>u(Re.target.value),onKeyPress:ye,autoFocus:!0})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),x.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:x.jsx("div",{className:"h-2 bg-primary rounded-full",style:{width:"0%"}})}),x.jsx("div",{className:"ml-2 text-xs font-medium text-text-primary",children:"0%"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:ee,className:"p-1.5 rounded-md bg-primary/10 hover:bg-primary/20 transition-colors duration-200",title:"Save project",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-primary",children:x.jsx(ht,{name:"check-line"})})}),x.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(ht,{name:"close-line"})})})]})]})]})}):n?x.jsxs("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px]",children:[x.jsxs("div",{className:`project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg ${M?"cursor-default":"cursor-pointer"}`,onClick:M?void 0:at,children:[x.jsxs("div",{className:"flex items-center flex-1",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:x.jsx(ht,{name:v?"arrow-right-s-line":"arrow-down-s-line"})}),M?x.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[x.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border border-red-300 focus:border-red-500 focus:outline-none rounded-md px-3 py-1.5",value:O,onChange:Re=>j(Re.target.value),onKeyDown:bt,autoFocus:!0}),x.jsx("button",{onClick:je,className:"p-1.5 ml-2 rounded-md hover:bg-background-container transition-colors duration-200",title:"Save",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-green-600",children:x.jsx(ht,{name:"check-line"})})}),x.jsx("button",{onClick:rt,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:x.jsx(ht,{name:"close-line"})})})]}):x.jsx("h3",{className:"font-medium text-text-primary",children:n.name})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),x.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:x.jsx("div",{className:"h-2 rounded-full progress-bar-animation",style:{width:`${re}%`,backgroundColor:n.color||"#BB5F5A"}})}),x.jsxs("div",{className:"ml-2 text-xs font-medium text-text-primary",children:[re,"%"]})]}),x.jsxs("div",{className:"project-menu relative project-dropdown",children:[x.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:Re=>{Re.stopPropagation(),_(!w)},children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(ht,{name:"more-2-fill"})})}),w&&x.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-background-secondary border border-border rounded-lg shadow-lg z-10 overflow-hidden",children:x.jsxs("div",{className:"py-1 px-2",children:[x.jsxs("button",{onClick:Re=>{Re.stopPropagation(),we()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(ht,{name:"palette-line",size:16,className:"mr-2"}),"Update color"]}),x.jsxs("button",{onClick:Re=>{Re.stopPropagation(),Ge()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(ht,{name:"edit-line",size:16,className:"mr-2"}),"Edit project name"]}),x.jsxs("button",{onClick:Re=>{Re.stopPropagation(),Le()},className:"w-full px-3 py-2 text-sm text-red-600 hover:bg-red-500/10 text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(ht,{name:"delete-bin-line",size:16,className:"mr-2"}),"Delete project"]})]})})]})]})]}),!v&&x.jsxs("div",{className:"project-tasks px-4 py-2",children:[x.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[x.jsxs("div",{className:"flex items-center space-x-3 task-filters",children:[x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="todo"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="todo"?"drag-over":""}`,onClick:()=>h(d==="todo"?null:"todo"),onDragOver:Re=>lt(Re,"todo"),onDragLeave:cn,onDrop:Re=>Ct(Re,"todo"),style:{position:"relative",padding:L==="todo"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(ht,{name:"list-check"})}),"To Do List (",ae,")"]}),x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="pomodoro"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="pomodoro"?"drag-over":""}`,onClick:()=>h(d==="pomodoro"?null:"pomodoro"),onDragOver:Re=>lt(Re,"pomodoro"),onDragLeave:cn,onDrop:Re=>Ct(Re,"pomodoro"),style:{position:"relative",padding:L==="pomodoro"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(ht,{name:"timer-line"})}),"In Pomodoro (",z,")"]}),x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${d==="completed"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${L==="completed"?"drag-over":""}`,onClick:()=>h(d==="completed"?null:"completed"),onDragOver:Re=>lt(Re,"completed"),onDragLeave:cn,onDrop:Re=>Ct(Re,"completed"),style:{position:"relative",padding:L==="completed"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(ht,{name:"check-line"})}),"Completed (",le,")"]})]}),x.jsxs("button",{onClick:fe,className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md text-primary hover:bg-primary/10 whitespace-nowrap",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(ht,{name:"add-line"})}),"Add Task"]})]}),x.jsxs("div",{className:"task-list py-2 space-y-2",onDragOver:En,onDrop:jn,children:[W.map(Re=>x.jsx(soe,{task:Re,projectColor:n.color,onReorder:$,onCrossProjectMove:Y},Re.id)),f&&x.jsx(soe,{isNewTask:!0,projectId:n.id,onCancel:Ce}),W.length===0&&!f&&x.jsx("div",{className:"p-4 text-center text-text-secondary text-sm italic",onDragOver:En,onDrop:jn,children:"No tasks found in this category"})]})]}),x.jsx(ont,{isOpen:T,onClose:he,currentColor:(n==null?void 0:n.color)||"#BB5F5A",onColorChange:be,onSave:ge})]}):null},snt=({className:n=""})=>{const e=Ut(l=>l.projects),t=Ut(l=>l.tasks),[r,i]=K.useState(!1),a=[...e].sort((l,c)=>{const u=t.filter(h=>h.projectId===l.id).length;return t.filter(h=>h.projectId===c.id).length-u}),o=()=>{i(!0)},s=()=>{i(!1)};return x.jsxs("div",{className:`px-6 py-4 flex space-x-6 overflow-x-auto min-h-[calc(100vh-8.5rem)] items-start ${n}`,children:[a.map(l=>x.jsx(loe,{project:l},l.id)),r?x.jsx(loe,{isNewProject:!0,onCancel:s}):x.jsx("div",{className:"flex items-start min-w-[300px]",children:x.jsxs("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-dashed border-border text-sm font-medium rounded-lg text-text-secondary bg-background-primary hover:bg-background-container whitespace-nowrap h-[120px] w-full justify-center",children:[x.jsx(ht,{name:"add-line",className:"mr-2"}),"Add New Project"]})})]})},lnt=()=>{const n=Zg(),e=ss(),{isLeftSidebarOpen:t,toggleLeftSidebar:r}=pl(),[i,a]=K.useState(()=>localStorage.getItem("taskManagementViewType")||"status"),[o,s]=K.useState(!1);Ut(d=>d.projects),Ut(d=>d.tasks),K.useEffect(()=>{localStorage.setItem("taskManagementViewType",i)},[i]),K.useEffect(()=>(console.log("ProjectsPage mounted/updated, viewType:",i),()=>{console.log("ProjectsPage unmounting")}),[]),K.useEffect(()=>{console.log("ViewType changed to:",i)},[i]);const l=d=>{o||d.target.closest("[data-task-id]")},c=()=>{s(!0)},u=()=>{s(!1)};return x.jsxs("div",{className:"projects-content-container h-full flex flex-col bg-background-primary",onClick:l,onDragStart:c,onDragEnd:u,children:[x.jsxs("div",{className:"projects-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!t&&x.jsx("button",{onClick:r,className:"p-2 mr-2 rounded-md hover:bg-background-secondary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"menu-line",size:20})})}),x.jsx(n5,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Task Management"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="status"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("status"),children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:x.jsx(ht,{name:"checkbox-multiple-line"})}),"By Status"]}),x.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="project"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("project"),children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:x.jsx(ht,{name:"layout-grid-line"})}),"By Project"]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"brain-line",size:20})})})})]})]}),x.jsx("div",{className:"projects-scrollable-content flex-1 overflow-y-auto",children:i==="status"?x.jsx(int,{}):x.jsx("div",{className:"py-6",children:x.jsx(snt,{})})})]})},cnt=({children:n})=>x.jsxs("div",{className:"projects-page-container flex h-screen overflow-hidden",children:[x.jsx(Vw,{}),x.jsx("main",{className:"projects-main-container flex-1 flex flex-col overflow-hidden",children:n})]}),unt=({message:n,duration:e=3e3,onUndo:t,onClose:r})=>{const[i,a]=K.useState(!1);if(!n||n.trim()==="")return null;K.useEffect(()=>{const l=setTimeout(()=>{o()},e);return()=>clearTimeout(l)},[e]);const o=()=>{a(!0),setTimeout(()=>{r&&r()},300)},s=()=>{t&&t(),o()};return x.jsxs("div",{className:`toast fixed bottom-4 right-4 z-50 flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 ${i?"hiding":""}`,children:[x.jsx("div",{className:"flex-1 mr-4",children:x.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&x.jsx("button",{className:"undo-button px-3 py-1 text-xs font-medium rounded-md text-primary hover:bg-indigo-50",onClick:s,children:"Undo"})]})},dnt=({className:n=""})=>{const[e,t]=K.useState([]),r=a=>{const o=Date.now().toString();return t(s=>[...s,{...a,id:o}]),o},i=a=>{t(o=>o.filter(s=>s.id!==a))};return K.useEffect(()=>(typeof window<"u"&&(window.showToast=r),()=>{typeof window<"u"&&delete window.showToast}),[]),e.length===0?null:x.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:e.map(a=>x.jsx(unt,{message:a.message,duration:a.duration,onUndo:a.onUndo,onClose:()=>i(a.id)},a.id))})},hnt=()=>{Object.keys(localStorage).filter(t=>t.startsWith("deep-focus-storage-")&&!t.includes("anonymous")).forEach(t=>{try{localStorage.removeItem(t)}catch(r){console.warn("Failed to clear old deep focus storage:",r)}})};let coe=null;const fnt=()=>{const{user:n}=Qt();return K.useEffect(()=>{const e=async()=>{var i,a;if(!(n!=null&&n.uid)){console.log("🔄 No user authenticated, skipping extension sync");return}const r={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Starting user sync with extension for user:",n.uid);try{if(coe!==n.uid&&(hnt(),coe=n.uid),window.postMessage({type:"SET_USER_ID",payload:r,source:"make10000hours"},"*"),console.log("📤 DEBUG: Sent SET_USER_ID via window.postMessage for user:",n.uid),typeof window.chrome<"u"&&((a=(i=window.chrome)==null?void 0:i.runtime)!=null&&a.sendMessage))try{console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security")}catch(o){console.warn("⚠️ Chrome API sync failed:",o)}else console.log("ℹ️ Chrome extension API not available, using window.postMessage only")}catch(o){console.warn("⚠️ Failed to sync user with extension:",o),console.warn("🔍 DEBUG: User sync error details:",{name:o==null?void 0:o.name,message:o==null?void 0:o.message,userId:n.uid})}};e();const t=setInterval(e,3e4);return()=>{clearInterval(t)}},[n==null?void 0:n.uid,n==null?void 0:n.email,n==null?void 0:n.displayName]),{user:n}},yH="RFC3986",bH={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},pnt="RFC1738",gnt=Array.isArray,Jh=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),hU=1024,mnt=(n,e,t,r,i)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let o="";for(let s=0;s<a.length;s+=hU){const l=a.length>=hU?a.slice(s,s+hU):a,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===pnt&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=Jh[d];continue}if(d<2048){c[c.length]=Jh[192|d>>6]+Jh[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Jh[224|d>>12]+Jh[128|d>>6&63]+Jh[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=Jh[240|d>>18]+Jh[128|d>>12&63]+Jh[128|d>>6&63]+Jh[128|d&63]}o+=c.join("")}return o};function vnt(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function uoe(n,e){if(gnt(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const ynt=Object.prototype.hasOwnProperty,Dxe={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},cf=Array.isArray,bnt=Array.prototype.push,Ixe=function(n,e){bnt.apply(n,cf(e)?e:[e])},wnt=Date.prototype.toISOString,ao={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:mnt,encodeValuesOnly:!1,format:yH,formatter:bH[yH],indices:!1,serializeDate(n){return wnt.call(n)},skipNulls:!1,strictNullHandling:!1};function xnt(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const fU={};function Mxe(n,e,t,r,i,a,o,s,l,c,u,d,h,f,m,v,y,w){let _=n,T=w,A=0,C=!1;for(;(T=T.get(fU))!==void 0&&!C;){const j=T.get(n);if(A+=1,typeof j<"u"){if(j===A)throw new RangeError("Cyclic object value");C=!0}typeof T.get(fU)>"u"&&(A=0)}if(typeof c=="function"?_=c(e,_):_ instanceof Date?_=h==null?void 0:h(_):t==="comma"&&cf(_)&&(_=uoe(_,function(j){return j instanceof Date?h==null?void 0:h(j):j})),_===null){if(a)return l&&!v?l(e,ao.encoder,y,"key",f):e;_=""}if(xnt(_)||vnt(_)){if(l){const j=v?e:l(e,ao.encoder,y,"key",f);return[(m==null?void 0:m(j))+"="+(m==null?void 0:m(l(_,ao.encoder,y,"value",f)))]}return[(m==null?void 0:m(e))+"="+(m==null?void 0:m(String(_)))]}const k=[];if(typeof _>"u")return k;let M;if(t==="comma"&&cf(_))v&&l&&(_=uoe(_,l)),M=[{value:_.length>0?_.join(",")||null:void 0}];else if(cf(c))M=c;else{const j=Object.keys(_);M=u?j.sort(u):j}const P=s?String(e).replace(/\./g,"%2E"):String(e),O=r&&cf(_)&&_.length===1?P+"[]":P;if(i&&cf(_)&&_.length===0)return O+"[]";for(let j=0;j<M.length;++j){const L=M[j],B=typeof L=="object"&&typeof L.value<"u"?L.value:_[L];if(o&&B===null)continue;const $=d&&s?L.replace(/\./g,"%2E"):L,Y=cf(_)?typeof t=="function"?t(O,$):O:O+(d?"."+$:"["+$+"]");w.set(n,A);const G=new WeakMap;G.set(fU,w),Ixe(k,Mxe(B,Y,t,r,i,a,o,s,t==="comma"&&v&&cf(_)?null:l,c,u,d,h,f,m,v,y,G))}return k}function _nt(n=ao){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||ao.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=yH;if(typeof n.format<"u"){if(!ynt.call(bH,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=bH[t];let i=ao.filter;(typeof n.filter=="function"||cf(n.filter))&&(i=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in Dxe?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=ao.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:ao.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:ao.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:ao.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:ao.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?ao.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:ao.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:ao.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:ao.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:ao.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:ao.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:ao.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:ao.strictNullHandling}}function Snt(n,e={}){let t=n;const r=_nt(e);let i,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):cf(r.filter)&&(a=r.filter,i=a);const o=[];if(typeof t!="object"||t===null)return"";const s=Dxe[r.arrayFormat],l=s==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let h=0;h<i.length;++h){const f=i[h];r.skipNulls&&t[f]===null||Ixe(o,Mxe(t[f],f,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const jS="4.104.0";let doe=!1,EC,Pxe,Oxe,wH,Rxe,Nxe,Lxe,jxe,Fxe;function Tnt(n,e={auto:!1}){if(doe)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(EC)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${EC}'\``);doe=e.auto,EC=n.kind,Pxe=n.fetch,Oxe=n.FormData,wH=n.File,Rxe=n.ReadableStream,Nxe=n.getMultipartRequestOptions,Lxe=n.getDefaultAgent,jxe=n.fileFromPath,Fxe=n.isFsReadStream}class Ent{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Ant({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,i,a;try{t=fetch,r=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new Ent(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const $xe=()=>{EC||Tnt(Ant(),{auto:!0})};$xe();class vn extends Error{}class is extends vn{constructor(e,t,r,i){super(`${is.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new i5({message:r,cause:_H(t)});const a=t==null?void 0:t.error;return e===400?new Bxe(e,a,r,i):e===401?new Uxe(e,a,r,i):e===403?new Vxe(e,a,r,i):e===404?new zxe(e,a,r,i):e===409?new Hxe(e,a,r,i):e===422?new Gxe(e,a,r,i):e===429?new qxe(e,a,r,i):e>=500?new Wxe(e,a,r,i):new is(e,a,r,i)}}class $u extends is{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class i5 extends is{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class jW extends i5{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Bxe extends is{}class Uxe extends is{}class Vxe extends is{}class zxe extends is{}class Hxe extends is{}class Gxe extends is{}class qxe extends is{}class Wxe extends is{}class Yxe extends vn{constructor(){super("Could not parse response content as the length limit was reached")}}class Kxe extends vn{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var sO=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},sb=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ac;class a5{constructor(){Ac.set(this,void 0),this.buffer=new Uint8Array,sO(this,Ac,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const i=[];let a;for(;(a=knt(this.buffer,sb(this,Ac,"f")))!=null;){if(a.carriage&&sb(this,Ac,"f")==null){sO(this,Ac,a.index);continue}if(sb(this,Ac,"f")!=null&&(a.index!==sb(this,Ac,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,sb(this,Ac,"f")-1))),this.buffer=this.buffer.slice(sb(this,Ac,"f")),sO(this,Ac,null);continue}const o=sb(this,Ac,"f")!==null?a.preceding-1:a.preceding,s=this.decodeText(this.buffer.slice(0,o));i.push(s),this.buffer=this.buffer.slice(a.index),sO(this,Ac,null)}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new vn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new vn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new vn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}Ac=new WeakMap;a5.NEWLINE_CHARS=new Set([`
`,"\r"]);a5.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function knt(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Cnt(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function Xxe(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class wf{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of Dnt(e,t))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(s&&s.error)throw new is(void 0,s.error,void 0,r_e(e.headers));yield s}else{let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new is(void 0,s.error,s.message,void 0);yield{event:o.event,data:s}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new wf(i,t)}static fromReadableStream(e,t){let r=!1;async function*i(){const o=new a5,s=Xxe(e);for await(const l of s)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||t.abort()}}return new wf(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=r.next();e.push(o),t.push(o)}return a.shift()}});return[new wf(()=>i(e),this.controller),new wf(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new Rxe({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await t.next();if(o)return i.close();const s=r.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*Dnt(n,e){if(!n.body)throw e.abort(),new vn("Attempted to iterate over a response with no body");const t=new Mnt,r=new a5,i=Xxe(n.body);for await(const a of Int(i))for(const o of r.decode(a)){const s=t.decode(o);s&&(yield s)}for(const a of r.flush()){const o=t.decode(a);o&&(yield o)}}async function*Int(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=Cnt(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Mnt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=Pnt(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function Pnt(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const Zxe=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",Qxe=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&o5(n),o5=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Ont=n=>Qxe(n)||Zxe(n)||Fxe(n);async function Jxe(n,e,t){var i;if(n=await n,Qxe(n))return n;if(Zxe(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=o5(a)?[await a.arrayBuffer()]:[a];return new wH(o,e,t)}const r=await Rnt(n);if(e||(e=Lnt(n)??"unknown_file"),!(t!=null&&t.type)){const a=(i=r[0])==null?void 0:i.type;typeof a=="string"&&(t={...t,type:a})}return new wH(r,e,t)}async function Rnt(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(o5(n))e.push(await n.arrayBuffer());else if(jnt(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${Nnt(n)}`);return e}function Nnt(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function Lnt(n){var e;return pU(n.name)||pU(n.filename)||((e=pU(n.path))==null?void 0:e.split(/[\\/]/).pop())}const pU=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},jnt=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",hoe=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",zw=async n=>{const e=await Fnt(n.body);return Nxe(e,n)},Fnt=async n=>{const e=new Oxe;return await Promise.all(Object.entries(n||{}).map(([t,r])=>xH(e,t,r))),e},xH=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(Ont(t)){const r=await Jxe(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>xH(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>xH(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var m1={},$nt=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},Bnt=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},lO;$xe();async function e_e(n){var o;const{response:e}=n;if(n.options.stream)return oy("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):wf.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(o=t==null?void 0:t.split(";")[0])==null?void 0:o.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const s=await e.json();return oy("response",e.status,e.url,e.headers,s),t_e(s,e)}const a=await e.text();return oy("response",e.status,e.url,e.headers,a),a}function t_e(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class s5 extends Promise{constructor(e,t=e_e){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new s5(this.responsePromise,async t=>t_e(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Unt{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=gU("maxRetries",t),this.timeout=gU("timeout",r),this.httpAgent=i,this.fetch=a??Pxe}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...qnt(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Xnt()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async i=>{const a=i&&o5(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v;const r={...e},{method:i,path:a,query:o,headers:s={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:hoe(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(l),u=this.buildURL(a,o);"timeout"in r&&gU("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??Lxe(u),h=r.timeout+1e3;typeof((v=d==null?void 0:d.options)==null?void 0:v.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:r,headers:s,contentLength:c,retryCount:t});return{req:{method:i,...l&&{body:l},headers:f,...d&&{agent:d},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:i}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(e);return moe(a,o),moe(a,t),hoe(e.body)&&EC!=="node"&&delete a["content-type"],uO(o,"x-stainless-retry-count")===void 0&&uO(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(i)),uO(o,"x-stainless-timeout")===void 0&&uO(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,i){return is.generate(e,t,r,i)}request(e,t=null){return new s5(this.makeRequest(e,t))}async makeRequest(e,t){var d,h;const r=await e,i=r.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(r);const{req:a,url:o,timeout:s}=this.buildRequest(r,{retryCount:i-t});if(await this.prepareRequest(a,{url:o,options:r}),oy("request",o,r,a.headers),(d=r.signal)!=null&&d.aborted)throw new $u;const l=new AbortController,c=await this.fetchWithTimeout(o,a,s,l).catch(_H);if(c instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new $u;if(t)return this.retryRequest(r,t);throw c.name==="AbortError"?new jW:new i5({cause:c})}const u=r_e(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const _=`retrying, ${t} attempts remaining`;return oy(`response (error; ${_})`,c.status,o,u),this.retryRequest(r,t,u)}const f=await c.text().catch(_=>_H(_).message),m=Wnt(f),v=m?void 0:f;throw oy(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,u,v),this.makeStatusError(c.status,m,v,u)}return{response:c,options:r,controller:l}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Vnt(this,r,e)}buildURL(e,t){const r=Knt(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return i_e(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new vn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,i){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),r),l={signal:i.signal,...o};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(s)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let i;const a=r==null?void 0:r["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=r==null?void 0:r["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await pM(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${jS}`}}class n_e{constructor(e,t,r,i){lO.set(this,void 0),$nt(this,lO,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new vn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,a]of r)e.url.searchParams.set(i,a);t.query=void 0,t.path=e.url.toString()}return await Bnt(this,lO,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(lO=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Vnt extends s5{constructor(e,t,r){super(t,async i=>new r(e,i.response,await e_e(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const r_e=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),znt={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},aa=n=>typeof n=="object"&&n!==null&&!i_e(n)&&Object.keys(n).every(e=>a_e(znt,e)),Hnt=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jS,"X-Stainless-OS":poe(Deno.build.os),"X-Stainless-Arch":foe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jS,"X-Stainless-OS":poe(process.platform),"X-Stainless-Arch":foe(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=Gnt();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Gnt(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const foe=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",poe=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let goe;const qnt=()=>goe??(goe=Hnt()),Wnt=n=>{try{return JSON.parse(n)}catch{return}},Ynt=/^[a-z][a-z0-9+.-]*:/i,Knt=n=>Ynt.test(n),pM=n=>new Promise(e=>setTimeout(e,n)),gU=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new vn(`${n} must be an integer`);if(e<0)throw new vn(`${n} must be a positive integer`);return e},_H=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},cO=n=>{var e,t,r,i;if(typeof process<"u")return((e=m1==null?void 0:m1[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};function i_e(n){if(!n)return!0;for(const e in n)return!1;return!0}function a_e(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function moe(n,e){for(const t in e){if(!a_e(e,t))continue;const r=t.toLowerCase();if(!r)continue;const i=e[t];i===null?delete n[r]:i!==void 0&&(n[r]=i)}}const voe=new Set(["authorization","api-key"]);function oy(n,...e){if(typeof process<"u"&&(m1==null?void 0:m1.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const o in r.headers)voe.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let i=null;for(const a in r)voe.has(a.toLowerCase())&&(i??(i={...r}),i[a]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const Xnt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),Znt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Qnt=n=>typeof(n==null?void 0:n.get)=="function",uO=(n,e)=>{var r;const t=e.toLowerCase();if(Qnt(n)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,s)=>o+s.toUpperCase());for(const a of[e,t,e.toUpperCase(),i]){const o=n.get(a);if(o)return o}}for(const[i,a]of Object.entries(n))if(i.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},Jnt=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function mU(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class l5 extends n_e{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class vo extends n_e{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class xn{constructor(e){this._client=e}}let o_e=class extends xn{list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,ert,{query:t,...r})}},c5=class extends xn{constructor(){super(...arguments),this.messages=new o_e(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/chat/completions",u5,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class u5 extends vo{}class ert extends vo{}c5.ChatCompletionsPage=u5;c5.Messages=o_e;let d5=class extends xn{constructor(){super(...arguments),this.completions=new c5(this._client)}};d5.Completions=c5;d5.ChatCompletionsPage=u5;class s_e extends xn{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class l_e extends xn{create(e,t){return this._client.post("/audio/transcriptions",zw({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class c_e extends xn{create(e,t){return this._client.post("/audio/translations",zw({body:e,...t,__metadata:{model:e.model}}))}}class gM extends xn{constructor(){super(...arguments),this.transcriptions=new l_e(this._client),this.translations=new c_e(this._client),this.speech=new s_e(this._client)}}gM.Transcriptions=l_e;gM.Translations=c_e;gM.Speech=s_e;class FW extends xn{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/batches",$W,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class $W extends vo{}FW.BatchesPage=$W;var Ld=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ea=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},SH,UR,VR,qk,Wk,zR,Yk,tg,Kk,N2,L2,FS,u_e;class BW{constructor(){SH.add(this),this.controller=new AbortController,UR.set(this,void 0),VR.set(this,()=>{}),qk.set(this,()=>{}),Wk.set(this,void 0),zR.set(this,()=>{}),Yk.set(this,()=>{}),tg.set(this,{}),Kk.set(this,!1),N2.set(this,!1),L2.set(this,!1),FS.set(this,!1),Ld(this,UR,new Promise((e,t)=>{Ld(this,VR,e,"f"),Ld(this,qk,t,"f")}),"f"),Ld(this,Wk,new Promise((e,t)=>{Ld(this,zR,e,"f"),Ld(this,Yk,t,"f")}),"f"),ea(this,UR,"f").catch(()=>{}),ea(this,Wk,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ea(this,SH,"m",u_e).bind(this))},0)}_connected(){this.ended||(ea(this,VR,"f").call(this),this._emit("connect"))}get ended(){return ea(this,Kk,"f")}get errored(){return ea(this,N2,"f")}get aborted(){return ea(this,L2,"f")}abort(){this.controller.abort()}on(e,t){return(ea(this,tg,"f")[e]||(ea(this,tg,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=ea(this,tg,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(ea(this,tg,"f")[e]||(ea(this,tg,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Ld(this,FS,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){Ld(this,FS,!0,"f"),await ea(this,Wk,"f")}_emit(e,...t){if(ea(this,Kk,"f"))return;e==="end"&&(Ld(this,Kk,!0,"f"),ea(this,zR,"f").call(this));const r=ea(this,tg,"f")[e];if(r&&(ea(this,tg,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!ea(this,FS,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ea(this,qk,"f").call(this,i),ea(this,Yk,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!ea(this,FS,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ea(this,qk,"f").call(this,i),ea(this,Yk,"f").call(this,i),this._emit("end")}}_emitFinal(){}}UR=new WeakMap,VR=new WeakMap,qk=new WeakMap,Wk=new WeakMap,zR=new WeakMap,Yk=new WeakMap,tg=new WeakMap,Kk=new WeakMap,N2=new WeakMap,L2=new WeakMap,FS=new WeakMap,SH=new WeakSet,u_e=function(e){if(Ld(this,N2,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new $u),e instanceof $u)return Ld(this,L2,!0,"f"),this._emit("abort",e);if(e instanceof vn)return this._emit("error",e);if(e instanceof Error){const t=new vn(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new vn(String(e)))};var Xt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Sc=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Xo,TH,uf,HR,Bd,aw,XS,Gb,j2,Cc,GR,qR,AC,Xk,Zk,yoe,boe,woe,xoe,_oe,Soe,Toe;class Xd extends BW{constructor(){super(...arguments),Xo.add(this),TH.set(this,[]),uf.set(this,{}),HR.set(this,{}),Bd.set(this,void 0),aw.set(this,void 0),XS.set(this,void 0),Gb.set(this,void 0),j2.set(this,void 0),Cc.set(this,void 0),GR.set(this,void 0),qR.set(this,void 0),AC.set(this,void 0)}[(TH=new WeakMap,uf=new WeakMap,HR=new WeakMap,Bd=new WeakMap,aw=new WeakMap,XS=new WeakMap,Gb=new WeakMap,j2=new WeakMap,Cc=new WeakMap,GR=new WeakMap,qR=new WeakMap,AC=new WeakMap,Xo=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Xd;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=wf.fromReadableStream(e,this.controller);for await(const o of i)Xt(this,Xo,"m",Xk).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new $u;return this._addRun(Xt(this,Xo,"m",Zk).call(this))}toReadableStream(){return new wf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i,a){const o=new Xd;return o._run(()=>o._runToolAssistantStream(e,t,r,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,r,i,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...i,stream:!0},l=await e.submitToolOutputs(t,r,s,{...a,signal:this.controller.signal});this._connected();for await(const u of l)Xt(this,Xo,"m",Xk).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new $u;return this._addRun(Xt(this,Xo,"m",Zk).call(this))}static createThreadAssistantStream(e,t,r){const i=new Xd;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const a=new Xd;return a._run(()=>a._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return Xt(this,GR,"f")}currentRun(){return Xt(this,qR,"f")}currentMessageSnapshot(){return Xt(this,Bd,"f")}currentRunStepSnapshot(){return Xt(this,AC,"f")}async finalRunSteps(){return await this.done(),Object.values(Xt(this,uf,"f"))}async finalMessages(){return await this.done(),Object.values(Xt(this,HR,"f"))}async finalRun(){if(await this.done(),!Xt(this,aw,"f"))throw Error("Final run was not received.");return Xt(this,aw,"f")}async _createThreadAssistantStream(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const l of o)Xt(this,Xo,"m",Xk).call(this,l);if((s=o.controller.signal)!=null&&s.aborted)throw new $u;return this._addRun(Xt(this,Xo,"m",Zk).call(this))}async _createAssistantStream(e,t,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},s=await e.create(t,o,{...i,signal:this.controller.signal});this._connected();for await(const c of s)Xt(this,Xo,"m",Xk).call(this,c);if((l=s.controller.signal)!=null&&l.aborted)throw new $u;return this._addRun(Xt(this,Xo,"m",Zk).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(mU(a)&&mU(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...i);continue}for(const o of i){if(!mU(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const s=o.index;if(s==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);const l=a[s];l==null?a.push(o):a[s]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i,a){return await this._createToolAssistantStream(r,e,t,i,a)}}Xk=function(e){if(!this.ended)switch(Sc(this,GR,e,"f"),Xt(this,Xo,"m",woe).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Xt(this,Xo,"m",Toe).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Xt(this,Xo,"m",boe).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Xt(this,Xo,"m",yoe).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Zk=function(){if(this.ended)throw new vn("stream has ended, this shouldn't happen");if(!Xt(this,aw,"f"))throw Error("Final run has not been received");return Xt(this,aw,"f")},yoe=function(e){const[t,r]=Xt(this,Xo,"m",_oe).call(this,e,Xt(this,Bd,"f"));Sc(this,Bd,t,"f"),Xt(this,HR,"f")[t.id]=t;for(const i of r){const a=t.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,o=t.content[i.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Xt(this,XS,"f")){if(Xt(this,Gb,"f"))switch(Xt(this,Gb,"f").type){case"text":this._emit("textDone",Xt(this,Gb,"f").text,Xt(this,Bd,"f"));break;case"image_file":this._emit("imageFileDone",Xt(this,Gb,"f").image_file,Xt(this,Bd,"f"));break}Sc(this,XS,i.index,"f")}Sc(this,Gb,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Xt(this,XS,"f")!==void 0){const i=e.data.content[Xt(this,XS,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Xt(this,Bd,"f"));break;case"text":this._emit("textDone",i.text,Xt(this,Bd,"f"));break}}Xt(this,Bd,"f")&&this._emit("messageDone",e.data),Sc(this,Bd,void 0,"f")}},boe=function(e){const t=Xt(this,Xo,"m",xoe).call(this,e);switch(Sc(this,AC,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==Xt(this,j2,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(Xt(this,Cc,"f")&&this._emit("toolCallDone",Xt(this,Cc,"f")),Sc(this,j2,a.index,"f"),Sc(this,Cc,t.step_details.tool_calls[a.index],"f"),Xt(this,Cc,"f")&&this._emit("toolCallCreated",Xt(this,Cc,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Sc(this,AC,void 0,"f"),e.data.step_details.type=="tool_calls"&&Xt(this,Cc,"f")&&(this._emit("toolCallDone",Xt(this,Cc,"f")),Sc(this,Cc,void 0,"f")),this._emit("runStepDone",e.data,t);break}},woe=function(e){Xt(this,TH,"f").push(e),this._emit("event",e)},xoe=function(e){switch(e.event){case"thread.run.step.created":return Xt(this,uf,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Xt(this,uf,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Xd.accumulateDelta(t,r.delta);Xt(this,uf,"f")[e.data.id]=i}return Xt(this,uf,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Xt(this,uf,"f")[e.data.id]=e.data;break}if(Xt(this,uf,"f")[e.data.id])return Xt(this,uf,"f")[e.data.id];throw new Error("No snapshot available")},_oe=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=Xt(this,Xo,"m",Soe).call(this,a,o)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Soe=function(e,t){return Xd.accumulateDelta(t,e)},Toe=function(e){switch(Sc(this,qR,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Sc(this,aw,e.data,"f"),Xt(this,Cc,"f")&&(this._emit("toolCallDone",Xt(this,Cc,"f")),Sc(this,Cc,void 0,"f"));break}};class UW extends xn{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/assistants",VW,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class VW extends vo{}UW.AssistantsPage=VW;function Eoe(n){return typeof n.parse=="function"}const v1=n=>(n==null?void 0:n.role)==="assistant",d_e=n=>(n==null?void 0:n.role)==="function",h_e=n=>(n==null?void 0:n.role)==="tool";function zW(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function mM(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function trt(n,e){return!e||!f_e(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:HW(n,e)}function HW(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new Yxe;if(r.finish_reason==="content_filter")throw new Kxe;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(a=>rrt(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?nrt(e,r.message.content):null}}});return{...n,choices:t}}function nrt(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function rrt(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:mM(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function irt(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return mM(t)||(t==null?void 0:t.function.strict)||!1}function f_e(n){var e;return zW(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>mM(t)||t.type==="function"&&t.function.strict===!0))??!1}function art(n){for(const e of n??[]){if(e.type!=="function")throw new vn(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new vn(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Fl=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ks,EH,F2,AH,kH,CH,p_e,DH;const Aoe=10;class g_e extends BW{constructor(){super(...arguments),ks.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(d_e(e)||h_e(e))&&e.content)this._emit("functionCallResult",e.content);else if(v1(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(v1(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new vn("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Fl(this,ks,"m",EH).call(this)}async finalMessage(){return await this.done(),Fl(this,ks,"m",F2).call(this)}async finalFunctionCall(){return await this.done(),Fl(this,ks,"m",AH).call(this)}async finalFunctionCallResult(){return await this.done(),Fl(this,ks,"m",kH).call(this)}async totalUsage(){return await this.done(),Fl(this,ks,"m",CH).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Fl(this,ks,"m",F2).call(this);t&&this._emit("finalMessage",t);const r=Fl(this,ks,"m",EH).call(this);r&&this._emit("finalContent",r);const i=Fl(this,ks,"m",AH).call(this);i&&this._emit("finalFunctionCall",i);const a=Fl(this,ks,"m",kH).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Fl(this,ks,"m",CH).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Fl(this,ks,"m",p_e).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(HW(a,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var h;const i="function",{function_call:a="auto",stream:o,...s}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=Aoe}=r||{},u={};for(const f of t.functions)u[f.name||f.function.name]=f;const d=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const v=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!v)throw new vn("missing message in ChatCompletion response");if(!v.function_call)return;const{name:y,arguments:w}=v.function_call,_=u[y];if(_){if(l&&l!==y){const k=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:y,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${d.map(M=>JSON.stringify(M.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:y,content:k});continue}let T;try{T=Eoe(_)?await _.parse(w):w}catch(k){this._addMessage({role:i,name:y,content:k instanceof Error?k.message:String(k)});continue}const A=await _.function(T,this),C=Fl(this,ks,"m",DH).call(this,A);if(this._addMessage({role:i,name:y,content:C}),l)return}}async _runTools(e,t,r){var f,m,v;const i="tool",{tool_choice:a="auto",stream:o,...s}=t,l=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:c=Aoe}=r||{},u=t.tools.map(y=>{if(mM(y)){if(!y.$callback)throw new vn("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(const y of u)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);const h="tools"in t?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of t.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const _=(m=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!_)throw new vn("missing message in ChatCompletion response");if(!((v=_.tool_calls)!=null&&v.length))return;for(const T of _.tool_calls){if(T.type!=="function")continue;const A=T.id,{name:C,arguments:k}=T.function,M=d[C];if(M){if(l&&l!==C){const L=`Invalid tool_call: ${JSON.stringify(C)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:A,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(C)}. Available options are: ${Object.keys(d).map(B=>JSON.stringify(B)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:A,content:L});continue}let P;try{P=Eoe(M)?await M.parse(k):k}catch(L){const B=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:A,content:B});continue}const O=await M.function(P,this),j=Fl(this,ks,"m",DH).call(this,O);if(this._addMessage({role:i,tool_call_id:A,content:j}),l)return}}}}ks=new WeakSet,EH=function(){return Fl(this,ks,"m",F2).call(this).content??null},F2=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(v1(t)){const{function_call:r,...i}=t,a={...i,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new vn("stream ended without producing a ChatCompletionMessage with role=assistant")},AH=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(v1(i)&&(i!=null&&i.function_call))return i.function_call;if(v1(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},kH=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(d_e(t)&&t.content!=null||h_e(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},CH=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},p_e=function(e){if(e.n!=null&&e.n>1)throw new vn("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},DH=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class JD extends g_e{static runFunctions(e,t,r){const i=new JD,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new JD,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),v1(e)&&e.content&&this._emit("content",e.content)}}const m_e=1,v_e=2,y_e=4,b_e=8,w_e=16,x_e=32,__e=64,S_e=128,T_e=256,E_e=S_e|T_e,A_e=w_e|x_e|E_e|__e,k_e=m_e|v_e|A_e,C_e=y_e|b_e,ort=k_e|C_e,ko={STR:m_e,NUM:v_e,ARR:y_e,OBJ:b_e,NULL:w_e,BOOL:x_e,NAN:__e,INFINITY:S_e,MINUS_INFINITY:T_e,INF:E_e,SPECIAL:A_e,ATOM:k_e,COLLECTION:C_e,ALL:ort};class srt extends Error{}class lrt extends Error{}function crt(n,e=ko.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return urt(n.trim(),e)}const urt=(n,e)=>{const t=n.length;let r=0;const i=h=>{throw new srt(`${h} at position ${r}`)},a=h=>{throw new lrt(`${h} at position ${r}`)},o=()=>(d(),r>=t&&i("Unexpected end of input"),n[r]==='"'?s():n[r]==="{"?l():n[r]==="["?c():n.substring(r,r+4)==="null"||ko.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||ko.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||ko.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||ko.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||ko.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||ko.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):u()),s=()=>{const h=r;let f=!1;for(r++;r<t&&(n[r]!=='"'||f&&n[r-1]==="\\");)f=n[r]==="\\"?!f:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(h,++r-Number(f)))}catch(m){a(String(m))}else if(ko.STR&e)try{return JSON.parse(n.substring(h,r-Number(f))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const h={};try{for(;n[r]!=="}";){if(d(),r>=t&&ko.OBJ&e)return h;const f=s();d(),r++;try{const m=o();Object.defineProperty(h,f,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(ko.OBJ&e)return h;throw m}d(),n[r]===","&&r++}}catch{if(ko.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},c=()=>{r++;const h=[];try{for(;n[r]!=="]";)h.push(o()),d(),n[r]===","&&r++}catch{if(ko.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},u=()=>{if(r===0){n==="-"&&ko.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(f){if(ko.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(f))}}const h=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(ko.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(h,r))}catch{n.substring(h,r)==="-"&&ko.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(m){a(String(m))}}},d=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return o()},koe=n=>crt(n,ko.ALL^ko.NUM);var K_=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},fi=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},ro,Yp,X_,yv,vU,dO,yU,bU,wU,hO,xU,Coe;class eI extends g_e{constructor(e){super(),ro.add(this),Yp.set(this,void 0),X_.set(this,void 0),yv.set(this,void 0),K_(this,Yp,e,"f"),K_(this,X_,[],"f")}get currentChatCompletionSnapshot(){return fi(this,yv,"f")}static fromReadableStream(e){const t=new eI(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new eI(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fi(this,ro,"m",vU).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of a)fi(this,ro,"m",yU).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new $u;return this._addChatCompletion(fi(this,ro,"m",hO).call(this))}async _fromReadableStream(e,t){var o;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fi(this,ro,"m",vU).call(this),this._connected();const i=wf.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(fi(this,ro,"m",hO).call(this)),fi(this,ro,"m",yU).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new $u;return this._addChatCompletion(fi(this,ro,"m",hO).call(this))}[(Yp=new WeakMap,X_=new WeakMap,yv=new WeakMap,ro=new WeakSet,vU=function(){this.ended||K_(this,yv,void 0,"f")},dO=function(t){let r=fi(this,X_,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},fi(this,X_,"f")[t.index]=r,r)},yU=function(t){var i,a,o,s,l,c,u,d,h,f,m,v,y,w,_;if(this.ended)return;const r=fi(this,ro,"m",Coe).call(this,t);this._emit("chunk",t,r);for(const T of t.choices){const A=r.choices[T.index];T.delta.content!=null&&((i=A.message)==null?void 0:i.role)==="assistant"&&((a=A.message)!=null&&a.content)&&(this._emit("content",T.delta.content,A.message.content),this._emit("content.delta",{delta:T.delta.content,snapshot:A.message.content,parsed:A.message.parsed})),T.delta.refusal!=null&&((o=A.message)==null?void 0:o.role)==="assistant"&&((s=A.message)!=null&&s.refusal)&&this._emit("refusal.delta",{delta:T.delta.refusal,snapshot:A.message.refusal}),((l=T.logprobs)==null?void 0:l.content)!=null&&((c=A.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=T.logprobs)==null?void 0:u.content,snapshot:((d=A.logprobs)==null?void 0:d.content)??[]}),((h=T.logprobs)==null?void 0:h.refusal)!=null&&((f=A.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=T.logprobs)==null?void 0:m.refusal,snapshot:((v=A.logprobs)==null?void 0:v.refusal)??[]});const C=fi(this,ro,"m",dO).call(this,A);A.finish_reason&&(fi(this,ro,"m",wU).call(this,A),C.current_tool_call_index!=null&&fi(this,ro,"m",bU).call(this,A,C.current_tool_call_index));for(const k of T.delta.tool_calls??[])C.current_tool_call_index!==k.index&&(fi(this,ro,"m",wU).call(this,A),C.current_tool_call_index!=null&&fi(this,ro,"m",bU).call(this,A,C.current_tool_call_index)),C.current_tool_call_index=k.index;for(const k of T.delta.tool_calls??[]){const M=(y=A.message.tool_calls)==null?void 0:y[k.index];M!=null&&M.type&&((M==null?void 0:M.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(w=M.function)==null?void 0:w.name,index:k.index,arguments:M.function.arguments,parsed_arguments:M.function.parsed_arguments,arguments_delta:((_=k.function)==null?void 0:_.arguments)??""}):(M==null||M.type,void 0))}}},bU=function(t,r){var o,s,l;if(fi(this,ro,"m",dO).call(this,t).done_tool_calls.has(r))return;const a=(o=t.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(s=fi(this,Yp,"f"))==null?void 0:s.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:mM(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},wU=function(t){var i,a;const r=fi(this,ro,"m",dO).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const o=fi(this,ro,"m",xU).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},hO=function(){if(this.ended)throw new vn("stream has ended, this shouldn't happen");const t=fi(this,yv,"f");if(!t)throw new vn("request ended without sending any chunks");return K_(this,yv,void 0,"f"),K_(this,X_,[],"f"),drt(t,fi(this,Yp,"f"))},xU=function(){var r;const t=(r=fi(this,Yp,"f"))==null?void 0:r.response_format;return zW(t)?t:null},Coe=function(t){var r,i,a,o;let s=fi(this,yv,"f");const{choices:l,...c}=t;s?Object.assign(s,c):s=K_(this,yv,{...c,choices:[]},"f");for(const{delta:u,finish_reason:d,index:h,logprobs:f=null,...m}of t.choices){let v=s.choices[h];if(v||(v=s.choices[h]={finish_reason:d,index:h,message:{},logprobs:f,...m}),f)if(!v.logprobs)v.logprobs=Object.assign({},f);else{const{content:k,refusal:M,...P}=f;Object.assign(v.logprobs,P),k&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...k)),M&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...M))}if(d&&(v.finish_reason=d,fi(this,Yp,"f")&&f_e(fi(this,Yp,"f")))){if(d==="length")throw new Yxe;if(d==="content_filter")throw new Kxe}if(Object.assign(v,m),!u)continue;const{content:y,refusal:w,function_call:_,role:T,tool_calls:A,...C}=u;if(Object.assign(v.message,C),w&&(v.message.refusal=(v.message.refusal||"")+w),T&&(v.message.role=T),_&&(v.message.function_call?(_.name&&(v.message.function_call.name=_.name),_.arguments&&((a=v.message.function_call).arguments??(a.arguments=""),v.message.function_call.arguments+=_.arguments)):v.message.function_call=_),y&&(v.message.content=(v.message.content||"")+y,!v.message.refusal&&fi(this,ro,"m",xU).call(this)&&(v.message.parsed=koe(v.message.content))),A){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:k,id:M,type:P,function:O,...j}of A){const L=(o=v.message.tool_calls)[k]??(o[k]={});Object.assign(L,j),M&&(L.id=M),P&&(L.type=P),O&&(L.function??(L.function={name:O.name??"",arguments:""})),O!=null&&O.name&&(L.function.name=O.name),O!=null&&O.arguments&&(L.function.arguments+=O.arguments,irt(fi(this,Yp,"f"),L)&&(L.function.parsed_arguments=koe(L.function.arguments)))}}}return s},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new wf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function drt(n,e){const{id:t,choices:r,created:i,model:a,system_fingerprint:o,...s}=n,l={...s,id:t,choices:r.map(({message:c,finish_reason:u,index:d,logprobs:h,...f})=>{if(!u)throw new vn(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:v,tool_calls:y,...w}=c,_=c.role;if(!_)throw new vn(`missing role for choice ${d}`);if(v){const{arguments:T,name:A}=v;if(T==null)throw new vn(`missing function_call.arguments for choice ${d}`);if(!A)throw new vn(`missing function_call.name for choice ${d}`);return{...f,message:{content:m,function_call:{arguments:T,name:A},role:_,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}return y?{...f,index:d,finish_reason:u,logprobs:h,message:{...w,role:_,content:m,refusal:c.refusal??null,tool_calls:y.map((T,A)=>{const{function:C,type:k,id:M,...P}=T,{arguments:O,name:j,...L}=C||{};if(M==null)throw new vn(`missing choices[${d}].tool_calls[${A}].id
${fO(n)}`);if(k==null)throw new vn(`missing choices[${d}].tool_calls[${A}].type
${fO(n)}`);if(j==null)throw new vn(`missing choices[${d}].tool_calls[${A}].function.name
${fO(n)}`);if(O==null)throw new vn(`missing choices[${d}].tool_calls[${A}].function.arguments
${fO(n)}`);return{...P,id:M,type:k,function:{...L,name:j,arguments:O}}})}}:{...f,message:{...w,content:m,role:_,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}),created:i,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return trt(l,e)}function fO(n){return JSON.stringify(n)}class y1 extends eI{static fromReadableStream(e){const t=new y1(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const i=new y1(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new y1(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}}let D_e=class extends xn{parse(e,t){return art(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>HW(r,e))}runFunctions(e,t){return e.stream?y1.runFunctions(this._client,e,t):JD.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?y1.runTools(this._client,e,t):JD.runTools(this._client,e,t)}stream(e,t){return eI.createChatCompletion(this._client,e,t)}};class IH extends xn{constructor(){super(...arguments),this.completions=new D_e(this._client)}}(function(n){n.Completions=D_e})(IH||(IH={}));class I_e extends xn{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class M_e extends xn{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class h5 extends xn{constructor(){super(...arguments),this.sessions=new I_e(this._client),this.transcriptionSessions=new M_e(this._client)}}h5.Sessions=I_e;h5.TranscriptionSessions=M_e;class GW extends xn{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,qW,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class qW extends vo{}GW.MessagesPage=qW;class WW extends xn{retrieve(e,t,r,i={},a){return aa(i)?this.retrieve(e,t,r,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},i){return aa(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,YW,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class YW extends vo{}WW.RunStepsPage=YW;let vM=class extends xn{constructor(){super(...arguments),this.steps=new WW(this._client)}create(e,t,r){const{include:i,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,KW,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}createAndStream(e,t,r){return Xd.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await pM(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return Xd.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,i){const a=await this.submitToolOutputs(e,t,r,i);return await this.poll(e,a.id,i)}submitToolOutputsStream(e,t,r,i){return Xd.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,i)}};class KW extends vo{}vM.RunsPage=KW;vM.Steps=WW;vM.RunStepsPage=YW;class LT extends xn{constructor(){super(...arguments),this.runs=new vM(this._client),this.messages=new GW(this._client)}create(e={},t){return aa(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return Xd.createThreadAssistantStream(e,this._client.beta.threads,t)}}LT.Runs=vM;LT.RunsPage=KW;LT.Messages=GW;LT.MessagesPage=qW;class jT extends xn{constructor(){super(...arguments),this.realtime=new h5(this._client),this.chat=new IH(this._client),this.assistants=new UW(this._client),this.threads=new LT(this._client)}}jT.Realtime=h5;jT.Assistants=UW;jT.AssistantsPage=VW;jT.Threads=LT;class P_e extends xn{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class O_e extends xn{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let f5=class extends xn{constructor(){super(...arguments),this.content=new O_e(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,zw({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,XW,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class XW extends vo{}f5.FileListResponsesPage=XW;f5.Content=O_e;class yM extends xn{constructor(){super(...arguments),this.files=new f5(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/containers",ZW,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class ZW extends vo{}yM.ContainerListResponsesPage=ZW;yM.Files=f5;yM.FileListResponsesPage=XW;class R_e extends xn{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&oy("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?a:(oy("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(s=>{const l=s.embedding;s.embedding=Jnt(l)}),o)))}}class QW extends xn{retrieve(e,t,r,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,i)}list(e,t,r={},i){return aa(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,JW,{query:r,...i})}}class JW extends vo{}QW.OutputItemListResponsesPage=JW;class bM extends xn{constructor(){super(...arguments),this.outputItems=new QW(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,eY,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class eY extends vo{}bM.RunListResponsesPage=eY;bM.OutputItems=QW;bM.OutputItemListResponsesPage=JW;class wM extends xn{constructor(){super(...arguments),this.runs=new bM(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/evals",tY,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class tY extends vo{}wM.EvalListResponsesPage=tY;wM.Runs=bM;wM.RunListResponsesPage=eY;let nY=class extends xn{create(e,t){return this._client.post("/files",zw({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/files",rY,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await pM(t),o=await this.retrieve(e),Date.now()-a>r)throw new jW({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class rY extends vo{}nY.FileObjectsPage=rY;class N_e extends xn{}let L_e=class extends xn{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class iY extends xn{constructor(){super(...arguments),this.graders=new L_e(this._client)}}iY.Graders=L_e;class aY extends xn{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,oY,{body:t,method:"post",...r})}retrieve(e,t={},r){return aa(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class oY extends l5{}aY.PermissionCreateResponsesPage=oY;let p5=class extends xn{constructor(){super(...arguments),this.permissions=new aY(this._client)}};p5.Permissions=aY;p5.PermissionCreateResponsesPage=oY;class sY extends xn{list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,lY,{query:t,...r})}}class lY extends vo{}sY.FineTuningJobCheckpointsPage=lY;class FT extends xn{constructor(){super(...arguments),this.checkpoints=new sY(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",cY,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return aa(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,uY,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class cY extends vo{}class uY extends vo{}FT.FineTuningJobsPage=cY;FT.FineTuningJobEventsPage=uY;FT.Checkpoints=sY;FT.FineTuningJobCheckpointsPage=lY;class Ly extends xn{constructor(){super(...arguments),this.methods=new N_e(this._client),this.jobs=new FT(this._client),this.checkpoints=new p5(this._client),this.alpha=new iY(this._client)}}Ly.Methods=N_e;Ly.Jobs=FT;Ly.FineTuningJobsPage=cY;Ly.FineTuningJobEventsPage=uY;Ly.Checkpoints=p5;Ly.Alpha=iY;class j_e extends xn{}class dY extends xn{constructor(){super(...arguments),this.graderModels=new j_e(this._client)}}dY.GraderModels=j_e;class F_e extends xn{createVariation(e,t){return this._client.post("/images/variations",zw({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",zw({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class hY extends xn{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",fY,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class fY extends l5{}hY.ModelsPage=fY;class $_e extends xn{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function hrt(n,e){return!e||!prt(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:B_e(n,e)}function B_e(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:vrt(e,i)};if(i.type==="message"){const a=i.content.map(o=>o.type==="output_text"?{...o,parsed:frt(e,o.text)}:o);return{...i,content:a}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||U_e(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function frt(n,e){var t,r,i,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function prt(n){var e;return!!zW((e=n.text)==null?void 0:e.format)}function grt(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function mrt(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function vrt(n,e){const t=mrt(n.tools??[],e.name);return{...e,...e,parsed_arguments:grt(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function U_e(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class V_e extends xn{list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,brt,{query:t,...r})}}var Z_=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},bv=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Q_,pO,wv,gO,Doe,Ioe,Moe,Poe;class pY extends BW{constructor(e){super(),Q_.add(this),pO.set(this,void 0),wv.set(this,void 0),gO.set(this,void 0),Z_(this,pO,e,"f")}static createResponse(e,t,r){const i=new pY(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),bv(this,Q_,"m",Doe).call(this);let a,o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of a)bv(this,Q_,"m",Ioe).call(this,l,o);if((s=a.controller.signal)!=null&&s.aborted)throw new $u;return bv(this,Q_,"m",Moe).call(this)}[(pO=new WeakMap,wv=new WeakMap,gO=new WeakMap,Q_=new WeakSet,Doe=function(){this.ended||Z_(this,wv,void 0,"f")},Ioe=function(t,r){if(this.ended)return;const i=(o,s)=>{(r==null||s.sequence_number>r)&&this._emit(o,s)},a=bv(this,Q_,"m",Poe).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const o=a.output[t.output_index];if(!o)throw new vn(`missing output at index ${t.output_index}`);if(o.type==="message"){const s=o.content[t.content_index];if(!s)throw new vn(`missing content at index ${t.content_index}`);if(s.type!=="output_text")throw new vn(`expected content to be 'output_text', got ${s.type}`);i("response.output_text.delta",{...t,snapshot:s.text})}break}case"response.function_call_arguments.delta":{const o=a.output[t.output_index];if(!o)throw new vn(`missing output at index ${t.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t);break}},Moe=function(){if(this.ended)throw new vn("stream has ended, this shouldn't happen");const t=bv(this,wv,"f");if(!t)throw new vn("request ended without sending any events");Z_(this,wv,void 0,"f");const r=yrt(t,bv(this,pO,"f"));return Z_(this,gO,r,"f"),r},Poe=function(t){let r=bv(this,wv,"f");if(!r){if(t.type!=="response.created")throw new vn(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Z_(this,wv,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new vn(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new vn(`missing output at index ${t.output_index}`);if(i.type==="message"){const a=i.content[t.content_index];if(!a)throw new vn(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new vn(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new vn(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Z_(this,wv,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=bv(this,gO,"f");if(!e)throw new vn("stream ended without producing a ChatCompletion");return e}}function yrt(n,e){return hrt(n,e)}class gY extends xn{constructor(){super(...arguments),this.inputItems=new V_e(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&U_e(r),r))}retrieve(e,t={},r){return this._client.get(`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>B_e(r,e))}stream(e,t){return pY.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class brt extends vo{}gY.InputItems=V_e;class z_e extends xn{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,zw({body:t,...r}))}}class mY extends xn{constructor(){super(...arguments),this.parts=new z_e(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}mY.Parts=z_e;const wrt=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class g5 extends xn{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return aa(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,m5,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:i}).withResponse(),o=a.data;switch(o.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await pM(s);break;case"failed":case"completed":return o}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,vY,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class m5 extends vo{}class vY extends l5{}g5.VectorStoreFilesPage=m5;g5.FileContentResponsesPage=vY;class H_e extends xn{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r={},i){return aa(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,m5,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await pM(s);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(a,t.length),s=this._client,l=t.values(),c=[...r];async function u(h){for(let f of h){const m=await s.files.create({file:f,purpose:"assistants"},i);c.push(m.id)}}const d=Array(o).fill(l).map(u);return await wrt(d),await this.createAndPoll(e,{file_ids:c})}}class jy extends xn{constructor(){super(...arguments),this.files=new g5(this._client),this.fileBatches=new H_e(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return aa(e)?this.list({},e):this._client.getAPIList("/vector_stores",yY,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,bY,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class yY extends vo{}class bY extends l5{}jy.VectorStoresPage=yY;jy.VectorStoreSearchResponsesPage=bY;jy.Files=g5;jy.VectorStoreFilesPage=m5;jy.FileContentResponsesPage=vY;jy.FileBatches=H_e;var G_e;class Mn extends Unt{constructor({baseURL:e=cO("OPENAI_BASE_URL"),apiKey:t=cO("OPENAI_API_KEY"),organization:r=cO("OPENAI_ORG_ID")??null,project:i=cO("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new vn("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:r,project:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Znt())throw new vn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new P_e(this),this.chat=new d5(this),this.embeddings=new R_e(this),this.files=new nY(this),this.images=new F_e(this),this.audio=new gM(this),this.moderations=new $_e(this),this.models=new hY(this),this.fineTuning=new Ly(this),this.graders=new dY(this),this.vectorStores=new jy(this),this.beta=new jT(this),this.batches=new FW(this),this.uploads=new mY(this),this.responses=new gY(this),this.evals=new wM(this),this.containers=new yM(this),this._options=o,this.apiKey=t,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Snt(e,{arrayFormat:"brackets"})}}G_e=Mn;Mn.OpenAI=G_e;Mn.DEFAULT_TIMEOUT=6e5;Mn.OpenAIError=vn;Mn.APIError=is;Mn.APIConnectionError=i5;Mn.APIConnectionTimeoutError=jW;Mn.APIUserAbortError=$u;Mn.NotFoundError=zxe;Mn.ConflictError=Hxe;Mn.RateLimitError=qxe;Mn.BadRequestError=Bxe;Mn.AuthenticationError=Uxe;Mn.InternalServerError=Wxe;Mn.PermissionDeniedError=Vxe;Mn.UnprocessableEntityError=Gxe;Mn.toFile=Jxe;Mn.fileFromPath=jxe;Mn.Completions=P_e;Mn.Chat=d5;Mn.ChatCompletionsPage=u5;Mn.Embeddings=R_e;Mn.Files=nY;Mn.FileObjectsPage=rY;Mn.Images=F_e;Mn.Audio=gM;Mn.Moderations=$_e;Mn.Models=hY;Mn.ModelsPage=fY;Mn.FineTuning=Ly;Mn.Graders=dY;Mn.VectorStores=jy;Mn.VectorStoresPage=yY;Mn.VectorStoreSearchResponsesPage=bY;Mn.Beta=jT;Mn.Batches=FW;Mn.BatchesPage=$W;Mn.Uploads=mY;Mn.Responses=gY;Mn.Evals=wM;Mn.EvalListResponsesPage=tY;Mn.Containers=yM;Mn.ContainerListResponsesPage=ZW;const MH=void 0;let jd=MH,Mv=null;const PH=n=>new Mn({apiKey:n,dangerouslyAllowBrowser:!0});jd&&(Mv=PH(jd));const _U="text-embedding-3-small",Ooe="gpt-4o-mini",Roe=4e3,SU=1536;class Ar{static initialize(e){this.client=new Mn({apiKey:e})}static async createChatCompletion(e){var t,r;if(!this.client)throw new Error("OpenAI client not initialized. Call initialize() first.");try{return((r=(t=(await this.client.chat.completions.create({model:"gpt-4",messages:e,temperature:.7,max_tokens:500})).choices[0])==null?void 0:t.message)==null?void 0:r.content)||""}catch(i){throw console.error("Error calling OpenAI:",i),i}}static setApiKey(e){if(!e||!e.startsWith("sk-"))throw new Error("Invalid OpenAI API key format");jd=e,Mv=PH(e),console.log("✅ OpenAI API key updated successfully")}static getApiKeyStatus(){const e=!!jd,t=jd!==MH,r=jd?`${jd.substring(0,11)}...${jd.slice(-4)}`:"No key set";return{hasKey:e,isCustomKey:t,keyPreview:r}}static resetToDefaultKey(){jd=MH,jd?(Mv=PH(jd),console.log("🔄 Reset to default OpenAI API key")):(Mv=null,console.warn("⚠️ No default API key available"))}static async testApiKey(){try{return Mv?(await Mv.embeddings.create({model:_U,input:"test",dimensions:SU}),{success:!0}):{success:!1,error:"No API key configured"}}catch(e){return console.error("API key test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static ensureOpenAI(){if(!Mv)throw new Error("OpenAI not initialized. Please set an API key first.");return Mv}static async generateEmbedding(e){try{return(await this.ensureOpenAI().embeddings.create({model:_U,input:e.content,dimensions:SU})).data[0].embedding}catch(t){throw console.error("Error generating embedding:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate embedding")}}static async batchGenerateEmbeddings(e){try{const t=this.ensureOpenAI(),r=e.map(a=>a.content);return(await t.embeddings.create({model:_U,input:r,dimensions:SU})).data.map(a=>a.embedding)}catch(t){throw console.error("Error generating batch embeddings:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate batch embeddings")}}static async generateChatResponse(e){var a,o,s;const t=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),i=[{role:"system",content:`You are an AI assistant that provides direct, focused responses.

CURRENT DATE & TIME: ${t} at ${r}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`},...(e.conversationHistory||[]).map(l=>({role:l.role,content:l.content})),{role:"user",content:e.query}];try{const l=this.ensureOpenAI();console.log("OpenAI generateChatResponse called with:",{queryLength:e.query.length,contextLength:e.context.length,hasHistory:!!((a=e.conversationHistory)!=null&&a.length)});const c=2;let u=0,d=null;for(;u<=c;)try{const f=((s=(o=(await l.chat.completions.create({model:Ooe,messages:i,max_tokens:Roe,temperature:.7,stream:!1,presence_penalty:.1,frequency_penalty:.1})).choices[0])==null?void 0:o.message)==null?void 0:s.content)||"Sorry, I could not generate a response.";return this.cleanResponse(f)}catch(h){if(d=h,(h==null?void 0:h.status)===429&&(u++,u<=c)){await new Promise(f=>setTimeout(f,1e3*u));continue}throw h}throw d||new Error("Failed to generate response after retries")}catch(l){throw console.error("Error generating chat response:",l),console.error("OpenAI Error details:",{message:l instanceof Error?l.message:"Unknown error",name:l instanceof Error?l.name:void 0,status:l==null?void 0:l.status,type:l==null?void 0:l.type}),(l==null?void 0:l.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error(`Failed to generate chat response: ${l instanceof Error?l.message:"Unknown error"}`)}}static async generateStreamingChatResponse(e,t){var r,i;try{const a=this.ensureOpenAI(),o=new Date,s=o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),c=[{role:"system",content:`You are a helpful AI assistant that provides direct, focused answers.

CURRENT DATE & TIME: ${s} at ${l}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`}];e.conversationHistory&&c.push(...e.conversationHistory),c.push({role:"user",content:e.query});const u=await a.chat.completions.create({model:Ooe,messages:c,max_tokens:Roe,temperature:.7,stream:!0});let d="";for await(const h of u){const f=((i=(r=h.choices[0])==null?void 0:r.delta)==null?void 0:i.content)||"";f&&(d+=f,t(f))}d&&this.cleanResponse(d)!==d&&t(`

[Response cleaned]`)}catch(a){throw console.error("Error generating streaming chat response:",a),(a==null?void 0:a.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error("Failed to generate streaming chat response")}}static cleanResponse(e){return e.trim()}static estimateTokens(e){return Math.ceil(e.length/4)}static estimateCost(e,t=!1){return t?e/1e3*2e-5:e/1e3*15e-5}}zt(Ar,"client");const xrt=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(!1),[i,a]=K.useState(!1),[o,s]=K.useState(null),[l,c]=K.useState({hasKey:!1,isCustomKey:!1,keyPreview:"No key set"});K.useEffect(()=>{const f=Ar.getApiKeyStatus();c(f)},[]);const u=async()=>{if(!n||!n.trim()){s({success:!1,error:"Please enter an API key"});return}try{a(!0),s(null),Ar.setApiKey(n.trim());const f=await Ar.testApiKey();if(s(f),f.success){const m=Ar.getApiKeyStatus();c(m),e("")}}catch(f){s({success:!1,error:f instanceof Error?f.message:"Failed to set API key"})}finally{a(!1)}},d=()=>{Ar.resetToDefaultKey();const f=Ar.getApiKeyStatus();c(f),s(null),e("")},h=async()=>{a(!0),s(null);try{const f=await Ar.testApiKey();s(f)}catch(f){s({success:!1,error:f instanceof Error?f.message:"Test failed"})}finally{a(!1)}};return x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx(KQ,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"OpenAI Configuration"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Configure your OpenAI API key for AI assistant functionality"})]})]}),x.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:"Current API Key Status"}),x.jsx("p",{className:"text-sm text-gray-600",children:l.keyPreview}),x.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.hasKey?x.jsx(bg,{className:"w-4 h-4 text-green-500"}):x.jsx(LN,{className:"w-4 h-4 text-red-500"}),x.jsx("span",{className:"text-sm text-gray-600",children:l.hasKey?l.isCustomKey?"Custom key active":"Default key active":"No key configured"})]})]}),l.hasKey&&x.jsxs("button",{onClick:h,disabled:i,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[i?x.jsx(ZQ,{className:"w-4 h-4 animate-spin"}):x.jsx(bg,{className:"w-4 h-4"}),x.jsx("span",{children:"Test Key"})]})]})}),o&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg ${o.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[o.success?x.jsx(bg,{className:"w-4 h-4 text-green-600"}):x.jsx(LN,{className:"w-4 h-4 text-red-600"}),x.jsx("span",{className:`text-sm font-medium ${o.success?"text-green-800":"text-red-800"}`,children:o.success?"API key is working correctly!":"API key test failed"})]}),o.error&&x.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.error})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"openai-key",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom OpenAI API Key"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{id:"openai-key",type:t?"text":"password",value:n,onChange:f=>e(f.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-20"}),x.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-2 pr-3",children:x.jsx("button",{type:"button",onClick:()=>r(!t),className:"text-gray-400 hover:text-gray-600",children:t?x.jsx(_4e,{className:"w-4 h-4"}):x.jsx(T4e,{className:"w-4 h-4"})})})]}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from"," ",x.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"OpenAI Platform"})]})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsxs("button",{onClick:u,disabled:i||!n.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[i?x.jsx(ZQ,{className:"w-4 h-4 animate-spin"}):x.jsx(KQ,{className:"w-4 h-4"}),x.jsx("span",{children:"Set & Test Key"})]}),l.isCustomKey&&x.jsx("button",{onClick:d,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Reset to Default"})]})]}),x.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Usage Information"}),x.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[x.jsx("li",{children:"• Used for generating AI responses and embeddings"}),x.jsx("li",{children:"• Estimated cost: ~$0.17 per 1000 interactions"}),x.jsx("li",{children:"• Your API key is stored locally and never shared"}),x.jsx("li",{children:"• Set a custom key to use your own OpenAI credits"})]})]})]})},_rt=()=>{const[n,e]=K.useState(!1),[t,r]=K.useState(!0),[i,a]=K.useState(null),{user:o}=Qt();K.useEffect(()=>{e(!1),a(null),r(!0),o?(l(),s()):r(!1)},[o]);const s=async()=>{try{await Cs.handleOAuthCallback()&&await l()}catch(u){console.error("OAuth callback error:",u),a(u instanceof Error?u.message:"OAuth callback failed")}},l=async()=>{r(!0),a(null);try{if(!vy.currentUser){e(!1);return}if(!Cs.isConfigured()){console.warn("📅 Google OAuth2 not configured - calendar access unavailable"),e(!1);return}const d=await Cs.hasCalendarAccess();e(d),console.log(d?"✅ Calendar access verified":"❌ No calendar access token found")}catch(u){console.error("Error checking calendar access:",u),a(u instanceof Error?u.message:"Failed to check calendar access"),e(!1)}finally{r(!1)}};return{hasCalendarAccess:n,isCheckingAccess:t,error:i,requestCalendarAccess:async()=>{a(null);try{if(!vy.currentUser)throw new Error("User not authenticated");if(!Cs.isConfigured())throw new Error("Google OAuth2 Client ID not configured. Please set VITE_GOOGLE_OAUTH_CLIENT_ID in your environment variables.");console.log("🔄 Starting Google Calendar authorization..."),await Cs.requestCalendarAccess()}catch(u){throw console.error("Error requesting calendar access:",u),a(u instanceof Error?u.message:"Failed to request calendar access"),u}}}},Srt=()=>{const[n,e]=K.useState(!1);return x.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"flex-shrink-0 mt-1",children:x.jsx(Kye,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Demo Mode: Google Calendar Sync"}),x.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your sync feature is working perfectly in demo mode! Tasks are being processed for sync, but real Google Calendar events require additional setup."}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[x.jsx(bg,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Sync Logic Working"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[x.jsx(bg,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Status Tracking"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[x.jsx(E7,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"API Setup Needed"})]})]}),x.jsx("button",{onClick:()=>e(!n),className:"text-blue-700 hover:text-blue-900 underline text-sm",children:n?"Hide Details":"How to Enable Real Google Calendar Sync"}),n&&x.jsxs("div",{className:"mt-4 p-4 bg-white rounded border border-blue-200",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Setup Guide for Real Google Calendar:"}),x.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-sm text-gray-700",children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Google Cloud Console Setup:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsxs("li",{children:["Go to ",x.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google Cloud Console"})]}),x.jsx("li",{children:"Enable the Google Calendar API for your project"}),x.jsx("li",{children:'Go to "Credentials" → "Create Credentials" → "OAuth 2.0 Client IDs"'}),x.jsx("li",{children:'Set Application Type to "Web application"'}),x.jsx("li",{children:'Add your domain (e.g., http://localhost:3000) to "Authorized origins"'})]})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Environment Setup:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:"Copy your OAuth2 Client ID from Google Cloud Console"}),x.jsxs("li",{children:["Create a ",x.jsx("code",{className:"bg-gray-100 px-1 rounded",children:".env"})," file in your project root"]}),x.jsxs("li",{children:["Add: ",x.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"VITE_GOOGLE_OAUTH_CLIENT_ID=your-client-id-here"})]}),x.jsx("li",{children:"Restart your development server"})]})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Test the Integration:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:'Click "Grant Calendar Access" in the settings'}),x.jsx("li",{children:"Complete the Google OAuth flow"}),x.jsx("li",{children:"Your tasks will now sync to real Google Calendar!"})]})]})]}),x.jsxs("div",{className:"mt-4 flex gap-3",children:[x.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:[x.jsx(Yye,{className:"w-4 h-4"}),"Create OAuth2 Credentials"]}),x.jsxs("a",{href:"https://developers.google.com/calendar/api/quickstart/js",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200",children:[x.jsx(cg,{className:"w-4 h-4"}),"Calendar API Guide"]})]}),x.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:x.jsxs("p",{className:"text-green-800 text-sm",children:[x.jsx("strong",{children:"Ready to Go:"})," The sync feature is fully implemented and working. You can see all sync operations in the browser console. Complete the OAuth2 setup above to connect with real Google Calendar."]})})]})]})]})})},Trt=()=>{const{user:n}=Qt(),{hasCalendarAccess:e,isCheckingAccess:t,error:r,requestCalendarAccess:i}=_rt(),[a,o]=K.useState(null),[s,l]=K.useState(!1),[c,u]=K.useState(null);K.useEffect(()=>{n&&e&&d()},[n,e]);const d=async()=>{if(n)try{const w=await qS(n.uid).getSyncStatus();o(w)}catch(y){console.error("Error loading sync status:",y),u(y instanceof Error?y.message:"Failed to load sync status")}},h=async()=>{if(n){l(!0),u(null);try{e||await i();const y=qS(n.uid);await y.initializeSync(),await y.toggleSync(!0),await d(),console.log("✅ Google Calendar sync enabled")}catch(y){console.error("Error enabling sync:",y),u(y instanceof Error?y.message:"Failed to enable sync")}finally{l(!1)}}},f=async()=>{if(n){l(!0),u(null);try{await qS(n.uid).toggleSync(!1),await d(),console.log("✅ Google Calendar sync disabled")}catch(y){console.error("Error disabling sync:",y),u(y instanceof Error?y.message:"Failed to disable sync")}finally{l(!1)}}},m=async()=>{if(n){l(!0),u(null);try{await qS(n.uid).performFullSync(),await d(),console.log("✅ Manual sync completed")}catch(y){console.error("Error performing manual sync:",y),u(y instanceof Error?y.message:"Manual sync failed")}finally{l(!1)}}},v=y=>{try{const w=y instanceof Date?y:y&&typeof y=="object"&&"toDate"in y?y.toDate():new Date(y);if(w.getTime()===0)return"Never";const T=new Date().getTime()-w.getTime(),A=Math.floor(T/(1e3*60));if(A<1)return"Just now";if(A<60)return`${A} minute${A>1?"s":""} ago`;const C=Math.floor(A/60);if(C<24)return`${C} hour${C>1?"s":""} ago`;const k=Math.floor(C/24);return`${k} day${k>1?"s":""} ago`}catch(w){return console.error("Error formatting sync date:",w),"Unknown"}};return t?x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(cg,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[x.jsx(og,{className:"w-4 h-4 animate-spin"}),x.jsx("span",{children:"Checking calendar access..."})]})]}):e?x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(cg,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),a&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.isEnabled?x.jsx(bg,{className:"w-5 h-5 text-green-500"}):x.jsx($v,{className:"w-5 h-5 text-gray-400"}),x.jsx("span",{className:"font-medium",children:a.isEnabled?"Sync Enabled":"Sync Disabled"})]}),a.isEnabled&&x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx(Wye,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Last Sync"})]}),x.jsx("p",{className:"font-medium",children:v(a.lastSync)})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx(og,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Pending"})]}),x.jsxs("p",{className:"font-medium",children:[a.pendingTasks," tasks"]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx($v,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Errors"})]}),x.jsxs("p",{className:"font-medium text-red-600",children:[a.errorTasks," tasks"]})]})]})]}),c&&x.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[x.jsx($v,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Error"})]}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:c})]}),x.jsx("div",{className:"flex flex-wrap gap-3",children:a!=null&&a.isEnabled?x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:f,disabled:s,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s?x.jsx(og,{className:"w-4 h-4 animate-spin"}):x.jsx(c1,{className:"w-4 h-4"}),x.jsx("span",{children:"Disable Sync"})]}),x.jsxs("button",{onClick:m,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s?x.jsx(og,{className:"w-4 h-4 animate-spin"}):x.jsx(cg,{className:"w-4 h-4"}),x.jsx("span",{children:"Sync Now"})]})]}):x.jsxs("button",{onClick:h,disabled:s,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s?x.jsx(og,{className:"w-4 h-4 animate-spin"}):x.jsx(c1,{className:"w-4 h-4"}),x.jsx("span",{children:"Enable Sync"})]})}),x.jsx(Srt,{}),x.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:x.jsxs("p",{className:"text-sm text-blue-700",children:[x.jsx("strong",{children:"How it works:"})," When you schedule a task in Make10000hours, it will automatically appear in your Google Calendar. Changes made in either app will sync to the other."]})})]}):x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(cg,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-gray-600 mb-2",children:"Sync your tasks with Google Calendar to keep everything in sync across all your devices."}),x.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[x.jsx($v,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Calendar access required"})]}),x.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"To enable sync, you'll need to grant access to your Google Calendar."})]})]}),r&&x.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[x.jsx($v,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Error"})]}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:r})]}),x.jsx("button",{onClick:i,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?x.jsxs(x.Fragment,{children:[x.jsx(og,{className:"w-4 h-4 animate-spin"}),x.jsx("span",{children:"Requesting Access..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(c1,{className:"w-4 h-4"}),x.jsx("span",{children:"Grant Calendar Access"})]})})]})},Ert=()=>{const{user:n,updateUserData:e}=Qt(),[t,r]=K.useState(yC),[i,a]=K.useState(!1),[o,s]=K.useState(null);K.useEffect(()=>{n&&r(n.settings)},[n]);const l=(h,f)=>{r(m=>({...m,timer:{...m.timer,[h]:f}}))},c=(h,f)=>{r(m=>({...m,[h]:f}))},u=async()=>{if(n){a(!0),s(null);try{await e({uid:n.uid,userName:n.userName,settings:t}),s({type:"success",text:"Settings saved successfully!"})}catch(h){console.error("Error saving settings:",h),s({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}},d=()=>{n!=null&&n.settings&&(r(n.settings),s(null))};return n?x.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[x.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Settings"}),o&&x.jsx("div",{className:`mb-6 p-4 rounded-lg ${o.type==="success"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:o.text}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Timer Settings"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pomodoro Duration (minutes)"}),x.jsx("input",{id:"pomodoroDuration",type:"number",min:"1",max:"60",value:t.timer.pomodoro,onChange:h=>l("pomodoro",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Break Duration (minutes)"}),x.jsx("input",{id:"shortBreakDuration",type:"number",min:"1",max:"30",value:t.timer.shortBreak,onChange:h=>l("shortBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Duration (minutes)"}),x.jsx("input",{id:"longBreakDuration",type:"number",min:"1",max:"60",value:t.timer.longBreak,onChange:h=>l("longBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Interval (pomodoros)"}),x.jsx("input",{id:"longBreakInterval",type:"number",min:"2",max:"10",value:t.timer.longBreakInterval,onChange:h=>l("longBreakInterval",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),x.jsxs("div",{className:"mt-6 space-y-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"autoStartBreaks",checked:t.timer.autoStartBreaks,onChange:h=>l("autoStartBreaks",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"autoStartBreaks",className:"ml-2 text-sm text-gray-700",children:"Auto-start breaks"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"autoStartPomodoros",checked:t.timer.autoStartPomodoros,onChange:h=>l("autoStartPomodoros",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"autoStartPomodoros",className:"ml-2 text-sm text-gray-700",children:"Auto-start pomodoros"})]})]})]}),x.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Appearance"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"darkMode",checked:t.darkMode,onChange:h=>c("darkMode",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"darkMode",className:"ml-2 text-sm text-gray-700",children:"Enable dark mode"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"compactTaskView",checked:t.compactTaskView,onChange:h=>c("compactTaskView",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"compactTaskView",className:"ml-2 text-sm text-gray-700",children:"Compact task view"})]})]})]}),x.jsx(Trt,{}),x.jsx(xrt,{})]}),x.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[x.jsx("button",{onClick:d,disabled:i,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset"}),x.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":"Save Settings"})]})]}):x.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6",children:[x.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),x.jsx("p",{className:"text-gray-600",children:"Please sign in to access your settings."})]})},q_e=()=>(console.log("🔍 Verifying Google Analytics Setup..."),ma?(console.log("✅ Firebase Analytics is initialized"),console.log("📊 Measurement ID: G-X6YHGN5WRS"),q5e("analytics_verification",{timestamp:new Date().toISOString(),verification_step:"setup_complete"}),Sye("verification_test","Analytics Verification Page"),console.log("✅ Test events sent successfully!"),console.log("📈 Check Firebase Console in 24-48 hours for data"),console.log("🔗 https://console.firebase.google.com/project/make10000hours/analytics"),!0):(console.error("❌ Firebase Analytics is not initialized"),console.log("🔧 Check environment variables:"),console.log("   - VITE_FIREBASE_API_KEY"),console.log("   - VITE_FIREBASE_APP_ID"),!1));typeof window<"u"&&(window.verifyAnalytics=q_e);const W_e=K.createContext({dragDropManager:void 0});function bu(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Noe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Loe=function(){return Math.random().toString(36).substring(7).split("").join(".")},joe={INIT:"@@redux/INIT"+Loe(),REPLACE:"@@redux/REPLACE"+Loe()};function Art(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Y_e(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(bu(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(bu(1));return t(Y_e)(n,e)}if(typeof n!="function")throw new Error(bu(2));var i=n,a=e,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(bu(3));return a}function d(v){if(typeof v!="function")throw new Error(bu(4));if(l)throw new Error(bu(5));var y=!0;return c(),s.push(v),function(){if(y){if(l)throw new Error(bu(6));y=!1,c();var _=s.indexOf(v);s.splice(_,1),o=null}}}function h(v){if(!Art(v))throw new Error(bu(7));if(typeof v.type>"u")throw new Error(bu(8));if(l)throw new Error(bu(9));try{l=!0,a=i(a,v)}finally{l=!1}for(var y=o=s,w=0;w<y.length;w++){var _=y[w];_()}return v}function f(v){if(typeof v!="function")throw new Error(bu(10));i=v,h({type:joe.REPLACE})}function m(){var v,y=d;return v={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(bu(11));function T(){_.next&&_.next(u())}T();var A=y(T);return{unsubscribe:A}}},v[Noe]=function(){return this},v}return h({type:joe.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:f},r[Noe]=m,r}function zn(n,e,...t){if(krt()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return t[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function krt(){return typeof process<"u"&&!0}function Crt(n,e,t){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:t||null,n)}function Drt(n,e){return n.filter(t=>t!==e)}function K_e(n){return typeof n=="object"}function Irt(n,e){const t=new Map,r=a=>{t.set(a,t.has(a)?t.get(a)+1:1)};n.forEach(r),e.forEach(r);const i=[];return t.forEach((a,o)=>{a===1&&i.push(o)}),i}function Mrt(n,e){return n.filter(t=>e.indexOf(t)>-1)}const wY="dnd-core/INIT_COORDS",v5="dnd-core/BEGIN_DRAG",xY="dnd-core/PUBLISH_DRAG_SOURCE",y5="dnd-core/HOVER",b5="dnd-core/DROP",w5="dnd-core/END_DRAG";function Foe(n,e){return{type:wY,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const Prt={type:wY,payload:{clientOffset:null,sourceClientOffset:null}};function Ort(n){return function(t=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=r,s=n.getMonitor(),l=n.getRegistry();n.dispatch(Foe(a)),Rrt(t,s,l);const c=jrt(t,s);if(c==null){n.dispatch(Prt);return}let u=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");Nrt(o),u=o(c)}n.dispatch(Foe(a,u));const h=l.getSource(c).beginDrag(s,c);if(h==null)return;Lrt(h),l.pinSource(c);const f=l.getSourceType(c);return{type:v5,payload:{itemType:f,item:h,sourceId:c,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function Rrt(n,e,t){zn(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){zn(t.getSource(r),"Expected sourceIds to be registered.")})}function Nrt(n){zn(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Lrt(n){zn(K_e(n),"Item must be an object.")}function jrt(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function Frt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $rt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Frt(n,i,t[i])})}return n}function Brt(n){return function(t={}){const r=n.getMonitor(),i=n.getRegistry();Urt(r),Hrt(r).forEach((o,s)=>{const l=Vrt(o,s,i,r),c={type:b5,payload:{dropResult:$rt({},t,l)}};n.dispatch(c)})}}function Urt(n){zn(n.isDragging(),"Cannot call drop while not dragging."),zn(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Vrt(n,e,t,r){const i=t.getTarget(n);let a=i?i.drop(r,n):void 0;return zrt(a),typeof a>"u"&&(a=e===0?{}:r.getDropResult()),a}function zrt(n){zn(typeof n>"u"||K_e(n),"Drop result must either be an object or undefined.")}function Hrt(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function Grt(n){return function(){const t=n.getMonitor(),r=n.getRegistry();qrt(t);const i=t.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(t,i),r.unpinSource()),{type:w5}}}function qrt(n){zn(n.isDragging(),"Cannot call endDrag while not dragging.")}function OH(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function Wrt(n){return function(t,{clientOffset:r}={}){Yrt(t);const i=t.slice(0),a=n.getMonitor(),o=n.getRegistry(),s=a.getItemType();return Xrt(i,o,s),Krt(i,a,o),Zrt(i,a,o),{type:y5,payload:{targetIds:i,clientOffset:r||null}}}}function Yrt(n){zn(Array.isArray(n),"Expected targetIds to be an array.")}function Krt(n,e,t){zn(e.isDragging(),"Cannot call hover while not dragging."),zn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const i=n[r];zn(n.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const a=t.getTarget(i);zn(a,"Expected targetIds to be registered.")}}function Xrt(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r],a=e.getTargetType(i);OH(a,t)||n.splice(r,1)}}function Zrt(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function Qrt(n){return function(){if(n.getMonitor().isDragging())return{type:xY}}}function Jrt(n){return{beginDrag:Ort(n),publishDragSource:Qrt(n),hover:Wrt(n),drop:Brt(n),endDrag:Grt(n)}}class eit{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(a){return(...o)=>{const s=a.apply(e,o);typeof s<"u"&&t(s)}}const i=Jrt(this);return Object.keys(i).reduce((a,o)=>{const s=i[o];return a[o]=r(s),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function tit(n,e){return{x:n.x+e.x,y:n.y+e.y}}function X_e(n,e){return{x:n.x-e.x,y:n.y-e.y}}function nit(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:X_e(tit(e,r),t)}function rit(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:X_e(e,t)}const kC=[],_Y=[];kC.__IS_NONE__=!0;_Y.__IS_ALL__=!0;function iit(n,e){return n===kC?!1:n===_Y||typeof e>"u"?!0:Mrt(e,n).length>0}class ait{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;zn(typeof e=="function","listener must be a function."),zn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),s=o.stateId;try{s===i||s===i+1&&!iit(o.dirtyHandlerIds,r)||e()}finally{i=s}};return this.store.subscribe(a)}subscribeToOffsetChange(e){zn(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return zn(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(zn(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return OH(r,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(zn(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!OH(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return nit(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return rit(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const $oe=typeof globalThis<"u"?globalThis:self,Z_e=$oe.MutationObserver||$oe.WebKitMutationObserver;function Q_e(n){return function(){const t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),n()}}}function oit(n){let e=1;const t=new Z_e(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const sit=typeof Z_e=="function"?oit:Q_e;class lit{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=sit(this.flush),this.requestErrorThrow=Q_e(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class cit{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class uit{create(e){const t=this.freeTasks,r=t.length?t.pop():new cit(this.onError,i=>t[t.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const J_e=new lit,dit=new uit(J_e.registerPendingError);function hit(n){J_e.enqueueTask(dit.create(n))}const SY="dnd-core/ADD_SOURCE",TY="dnd-core/ADD_TARGET",EY="dnd-core/REMOVE_SOURCE",x5="dnd-core/REMOVE_TARGET";function fit(n){return{type:SY,payload:{sourceId:n}}}function pit(n){return{type:TY,payload:{targetId:n}}}function git(n){return{type:EY,payload:{sourceId:n}}}function mit(n){return{type:x5,payload:{targetId:n}}}function vit(n){zn(typeof n.canDrag=="function","Expected canDrag to be a function."),zn(typeof n.beginDrag=="function","Expected beginDrag to be a function."),zn(typeof n.endDrag=="function","Expected endDrag to be a function.")}function yit(n){zn(typeof n.canDrop=="function","Expected canDrop to be a function."),zn(typeof n.hover=="function","Expected hover to be a function."),zn(typeof n.drop=="function","Expected beginDrag to be a function.")}function RH(n,e){if(e&&Array.isArray(n)){n.forEach(t=>RH(t,!1));return}zn(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Mu;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(Mu||(Mu={}));let bit=0;function wit(){return bit++}function xit(n){const e=wit().toString();switch(n){case Mu.SOURCE:return`S${e}`;case Mu.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function Boe(n){switch(n[0]){case"S":return Mu.SOURCE;case"T":return Mu.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Uoe(n,e){const t=n.entries();let r=!1;do{const{done:i,value:[,a]}=t.next();if(a===e)return!0;r=!!i}while(!r);return!1}class _it{addSource(e,t){RH(e),vit(t);const r=this.addHandler(Mu.SOURCE,e,t);return this.store.dispatch(fit(r)),r}addTarget(e,t){RH(e,!0),yit(t);const r=this.addHandler(Mu.TARGET,e,t);return this.store.dispatch(pit(r)),r}containsHandler(e){return Uoe(this.dragSources,e)||Uoe(this.dropTargets,e)}getSource(e,t=!1){return zn(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return zn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return zn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return zn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Boe(e)===Mu.SOURCE}isTargetId(e){return Boe(e)===Mu.TARGET}removeSource(e){zn(this.getSource(e),"Expected an existing source."),this.store.dispatch(git(e)),hit(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){zn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(mit(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);zn(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){zn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const i=xit(e);return this.types.set(i,t),e===Mu.SOURCE?this.dragSources.set(i,r):e===Mu.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Sit=(n,e)=>n===e;function Tit(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function Eit(n,e,t=Sit){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function Ait(n=kC,e){switch(e.type){case y5:break;case SY:case TY:case x5:case EY:return kC;case v5:case xY:case w5:case b5:default:return _Y}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,i=Irt(t,r);if(!(i.length>0||!Eit(t,r)))return kC;const o=r[r.length-1],s=t[t.length-1];return o!==s&&(o&&i.push(o),s&&i.push(s)),i}function kit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cit(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){kit(n,i,t[i])})}return n}const Voe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Dit(n=Voe,e){const{payload:t}=e;switch(e.type){case wY:case v5:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case y5:return Tit(n.clientOffset,t.clientOffset)?n:Cit({},n,{clientOffset:t.clientOffset});case w5:case b5:return Voe;default:return n}}function Iit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Iit(n,i,t[i])})}return n}const Mit={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Pit(n=Mit,e){const{payload:t}=e;switch(e.type){case v5:return J_({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case xY:return J_({},n,{isSourcePublic:!0});case y5:return J_({},n,{targetIds:t.targetIds});case x5:return n.targetIds.indexOf(t.targetId)===-1?n:J_({},n,{targetIds:Drt(n.targetIds,t.targetId)});case b5:return J_({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case w5:return J_({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function Oit(n=0,e){switch(e.type){case SY:case TY:return n+1;case EY:case x5:return n-1;default:return n}}function Rit(n=0){return n+1}function Nit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lit(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Nit(n,i,t[i])})}return n}function jit(n={},e){return{dirtyHandlerIds:Ait(n.dirtyHandlerIds,{type:e.type,payload:Lit({},e.payload,{prevTargetIds:Crt(n,"dragOperation.targetIds",[])})}),dragOffset:Dit(n.dragOffset,e),refCount:Oit(n.refCount,e),dragOperation:Pit(n.dragOperation,e),stateId:Rit(n.stateId)}}function Fit(n,e=void 0,t={},r=!1){const i=$it(r),a=new ait(i,new _it(i)),o=new eit(i,a),s=n(o,e,t);return o.receiveBackend(s),o}function $it(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Y_e(jit,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Bit(n,e){if(n==null)return{};var t=Uit(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Uit(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let zoe=0;const WR=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Vit=K.memo(function(e){var{children:t}=e,r=Bit(e,["children"]);const[i,a]=zit(r);return K.useEffect(()=>{if(a){const o=eSe();return++zoe,()=>{--zoe===0&&(o[WR]=null)}}},[]),x.jsx(W_e.Provider,{value:i,children:t})});function zit(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=Hit(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function Hit(n,e=eSe(),t,r){const i=e;return i[WR]||(i[WR]={dragDropManager:Fit(n,e,t,r)}),i[WR]}function eSe(){return typeof globalThis<"u"?globalThis:window}var TU,Hoe;function Git(){return Hoe||(Hoe=1,TU=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),TU}var qit=Git();const Wit=kr(qit),Hw=typeof window<"u"?K.useLayoutEffect:K.useEffect;function Yit(n,e,t){const[r,i]=K.useState(()=>e(n)),a=K.useCallback(()=>{const o=e(n);Wit(r,o)||(i(o),t&&t())},[r,n,t]);return Hw(a),[r,a]}function Kit(n,e,t){const[r,i]=Yit(n,e,t);return Hw(function(){const o=n.getHandlerId();if(o!=null)return n.subscribeToStateChange(i,{handlerIds:[o]})},[n,i]),r}function tSe(n,e,t){return Kit(e,n||(()=>({})),()=>t.reconnect())}function nSe(n,e){const t=[];return typeof n!="function"&&t.push(n),K.useMemo(()=>typeof n=="function"?n():n,t)}function Xit(n){return K.useMemo(()=>n.hooks.dragSource(),[n])}function Zit(n){return K.useMemo(()=>n.hooks.dragPreview(),[n])}let EU=!1,AU=!1;class Qit{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){zn(!EU,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return EU=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{EU=!1}}isDragging(){if(!this.sourceId)return!1;zn(!AU,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return AU=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{AU=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let kU=!1;class Jit{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;zn(!kU,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kU=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kU=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function eat(n,e,t){const r=t.getRegistry(),i=r.addTarget(n,e);return[i,()=>r.removeTarget(i)]}function tat(n,e,t){const r=t.getRegistry(),i=r.addSource(n,e);return[i,()=>r.removeSource(i)]}function NH(n,e,t,r){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const a=Object.keys(n),o=Object.keys(e);if(a.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<a.length;l++){const c=a[l];if(!s(c))return!1;const u=n[c],d=e[c];if(i=void 0,i===!1||i===void 0&&u!==d)return!1}return!0}function LH(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function nat(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function rat(n){return(e=null,t=null)=>{if(!K.isValidElement(e)){const a=e;return n(a,t),a}const r=e;return nat(r),iat(r,t?a=>n(a,t):n)}}function rSe(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=rat(r);e[t]=()=>i}}),e}function Goe(n,e){typeof n=="function"?n(e):n.current=e}function iat(n,e){const t=n.ref;return zn(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?K.cloneElement(n,{ref:r=>{Goe(t,r),Goe(e,r)}}):K.cloneElement(n,{ref:e})}class aat{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!NH(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!NH(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=rSe({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,LH(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,LH(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class oat{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!NH(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=rSe({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,LH(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function $T(){const{dragDropManager:n}=K.useContext(W_e);return zn(n!=null,"Expected drag drop context"),n}function sat(n,e){const t=$T(),r=K.useMemo(()=>new aat(t.getBackend()),[t]);return Hw(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),Hw(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function lat(){const n=$T();return K.useMemo(()=>new Qit(n),[n])}class cat{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,i=this.monitor,{isDragging:a}=r;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function uat(n,e,t){const r=K.useMemo(()=>new cat(n,e,t),[e,t]);return K.useEffect(()=>{r.spec=n},[n]),r}function dat(n){return K.useMemo(()=>{const e=n.type;return zn(e!=null,"spec.type must be defined"),e},[n])}function hat(n,e,t){const r=$T(),i=uat(n,e,t),a=dat(n);Hw(function(){if(a!=null){const[s,l]=tat(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l}},[r,e,t,i,a])}function fat(n,e){const t=nSe(n);zn(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=lat(),i=sat(t.options,t.previewOptions);return hat(t,r,i),[tSe(t.collect,r,i),Xit(i),Zit(i)]}function pat(n){return K.useMemo(()=>n.hooks.dropTarget(),[n])}function gat(n){const e=$T(),t=K.useMemo(()=>new oat(e.getBackend()),[e]);return Hw(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function mat(){const n=$T();return K.useMemo(()=>new Jit(n),[n])}function vat(n){const{accept:e}=n;return K.useMemo(()=>(zn(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class yat{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function bat(n,e){const t=K.useMemo(()=>new yat(n,e),[e]);return K.useEffect(()=>{t.spec=n},[n]),t}function wat(n,e,t){const r=$T(),i=bat(n,e),a=vat(n);Hw(function(){const[s,l]=eat(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l},[r,e,i,t,a.map(o=>o.toString()).join("|")])}function xat(n,e){const t=nSe(n),r=mat(),i=gat(t.options);return wat(t,r,i),[tSe(t.collect,r,i),pat(i)]}function iSe(n){let e=null;return()=>(e==null&&(e=n()),e)}function _at(n,e){return n.filter(t=>t!==e)}function Sat(n,e){const t=new Set,r=a=>t.add(a);n.forEach(r),e.forEach(r);const i=[];return t.forEach(a=>i.push(a)),i}class Tat{enter(e){const t=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=Sat(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=_at(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Eat{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const aSe="__NATIVE_FILE__",oSe="__NATIVE_URL__",sSe="__NATIVE_TEXT__",lSe="__NATIVE_HTML__",qoe=Object.freeze(Object.defineProperty({__proto__:null,FILE:aSe,HTML:lSe,TEXT:sSe,URL:oSe},Symbol.toStringTag,{value:"Module"}));function CU(n,e,t){const r=e.reduce((i,a)=>i||n.getData(a),"");return r??t}const jH={[aSe]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[lSe]:{exposeProperties:{html:(n,e)=>CU(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[oSe]:{exposeProperties:{urls:(n,e)=>CU(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[sSe]:{exposeProperties:{text:(n,e)=>CU(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function Aat(n,e){const t=jH[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new Eat(t);return r.loadDataTransfer(e),r}function DU(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(jH).filter(t=>{const r=jH[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const kat=iSe(()=>/firefox/i.test(navigator.userAgent)),cSe=iSe(()=>!!window.safari);class Woe{interpolate(e){const{xs:t,ys:r,c1s:i,c2s:a,c3s:o}=this;let s=t.length-1;if(e===t[s])return r[s];let l=0,c=o.length-1,u;for(;l<=c;){u=Math.floor(.5*(l+c));const f=t[u];if(f<e)l=u+1;else if(f>e)c=u-1;else return r[u]}s=Math.max(0,c);const d=e-t[s],h=d*d;return r[s]+i[s]*d+a[s]*h+o[s]*d*h}constructor(e,t){const{length:r}=e,i=[];for(let f=0;f<r;f++)i.push(f);i.sort((f,m)=>e[f]<e[m]?-1:1);const a=[],o=[];let s,l;for(let f=0;f<r-1;f++)s=e[f+1]-e[f],l=t[f+1]-t[f],a.push(s),o.push(l/s);const c=[o[0]];for(let f=0;f<a.length-1;f++){const m=o[f],v=o[f+1];if(m*v<=0)c.push(0);else{s=a[f];const y=a[f+1],w=s+y;c.push(3*w/((w+y)/m+(w+s)/v))}}c.push(o[o.length-1]);const u=[],d=[];let h;for(let f=0;f<c.length-1;f++){h=o[f];const m=c[f],v=1/a[f],y=m+c[f+1]-h-h;u.push((h-m-y)*v),d.push(y*v*v)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const Cat=1;function uSe(n){const e=n.nodeType===Cat?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function mO(n){return{x:n.clientX,y:n.clientY}}function Dat(n){var e;return n.nodeName==="IMG"&&(kat()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function Iat(n,e,t,r){let i=n?e.width:t,a=n?e.height:r;return cSe()&&n&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function Mat(n,e,t,r,i){const a=Dat(e),s=uSe(a?n:e),l={x:t.x-s.x,y:t.y-s.y},{offsetWidth:c,offsetHeight:u}=n,{anchorX:d,anchorY:h}=r,{dragPreviewWidth:f,dragPreviewHeight:m}=Iat(a,e,c,u),v=()=>{let k=new Woe([0,.5,1],[l.y,l.y/u*m,l.y+m-u]).interpolate(h);return cSe()&&a&&(k+=(window.devicePixelRatio-1)*m),k},y=()=>new Woe([0,.5,1],[l.x,l.x/c*f,l.x+f-c]).interpolate(d),{offsetX:w,offsetY:_}=i,T=w===0||w,A=_===0||_;return{x:T?w:y(),y:A?_:v()}}class Pat{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Oat(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yoe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Oat(n,i,t[i])})}return n}class Rat{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Yoe({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Yoe({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(qoe).some(t=>qoe[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Aat(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&uSe(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=mO(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=i,l=DU(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const u=this.monitor.getSourceId(),d=this.sourceNodes.get(u),h=this.sourcePreviewNodes.get(u)||d;if(h){const{anchorX:f,anchorY:m,offsetX:v,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),T=Mat(d,h,o,{anchorX:f,anchorY:m},{offsetX:v,offsetY:y});s.setDragImage(h,T.x,T.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:s}=i,l=DU(s);l&&this.beginDragNativeItem(l,s)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:mO(i)}),a.some(s=>this.monitor.canDropOnTarget(s))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=mO(i),this.scheduleHover(a),(a||[]).some(s=>this.monitor.canDropOnTarget(s))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else DU(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:mO(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new Pat(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Tat(this.isNodeInDocument)}}const Nat=function(e,t,r){return new Rat(e,t,r)},Lat=(n,e)=>{if(!n.scheduledDate)return null;const t=`task-${n.id}`,r=n.title,i=n.description,a=(e==null?void 0:e.name)||"No Project",o=(e==null?void 0:e.color)||"#6B7280",s=new Date(n.scheduledDate),l=n.completed||n.status==="completed";if(!n.includeTime||!n.scheduledStartTime||!n.scheduledEndTime)return{id:t,title:r,description:i,project:a,color:o,start:s,end:s,isAllDay:!0,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0};const[c,u]=n.scheduledStartTime.split(":").map(Number),[d,h]=n.scheduledEndTime.split(":").map(Number),f=new Date(s);f.setHours(c,u,0,0);const m=new Date(s);return m.setHours(d,h,0,0),m<f&&m.setDate(m.getDate()+1),{id:t,title:r,description:i,project:a,color:o,start:f,end:m,isAllDay:!1,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0}},jat=(n,e)=>{const t=[],r=new Map;return e.forEach(i=>{r.set(i.id,i)}),n.forEach(i=>{const a=r.get(i.projectId),o=Lat(i,a);o&&t.push(o)}),t},Fat=(n,e,t)=>{const r=jat(e,t);return[...n,...r]},dSe=(n,e)=>{const t=n.end.getTime()-n.start.getTime();if(e.isAllDay){const o=new Date(e.targetDate);o.setHours(0,0,0,0);const s=new Date(o);return{start:o,end:s}}let r;e.targetTime?(r=new Date(e.targetDate),r.setHours(e.targetTime.hour,e.targetTime.minute,0,0)):(r=new Date(e.targetDate),r.setHours(n.start.getHours(),n.start.getMinutes(),0,0));let i=t;n.isAllDay&&t===0?i=60*60*1e3:t===0&&(i=30*60*1e3);const a=new Date(r.getTime()+i);return{start:r,end:a}},$at=(n,e,t)=>{if(oo(n.start,e.targetDate)&&!e.targetTime&&n.isAllDay===(e.isAllDay||!1))return!1;const{start:r,end:i}=dSe(n,e);return e.isAllDay?!0:t.filter(s=>s.id!==n.id&&oo(s.start,r)).filter(s=>!s.isAllDay&&(r>=s.start&&r<s.end||i>s.start&&i<=s.end||r<=s.start&&i>=s.end)).length===0},Bat=n=>mn(n,"HH:mm"),Uat=n=>{const t=(n.end.getTime()-n.start.getTime())/(1e3*60);return t===0?30:Math.max(t,30)},sT=({event:n,style:e,onClick:t,children:r,className:i="",sourceView:a="week",onResize:o,onResizeMove:s})=>{const l=ve.useRef(!1),c=K.useRef(!1),u=K.useRef(null),d=K.useRef(0),h=K.useRef(null),[f,m]=K.useState(!1),[v,y]=K.useState(!1),[w,_]=K.useState(-1),[T,A]=K.useState(null),C=K.useRef(-1),{tasks:k}=Ut();ve.useEffect(()=>{C.current=w},[w]),ve.useEffect(()=>{const X=re=>{re.altKey&&(l.current=!0)},te=re=>{re.altKey||(l.current=!1)};return window.addEventListener("keydown",X),window.addEventListener("keyup",te),()=>{window.removeEventListener("keydown",X),window.removeEventListener("keyup",te)}},[]);const[{isDragging:M},P]=fat({type:"event",item:()=>{const X=Uat(n),te=n.end.getTime()-n.start.getTime(),re=l.current;return te===0&&console.log("Creating drag item for zero-duration event:",{eventId:n.id,actualDuration:te,displayDurationMinutes:X,start:n.start,end:n.end}),re&&console.log("🔄 Alt+Drag detected - will duplicate task:",n.title,"in view:",a,"isAllDay:",n.isAllDay),{type:"event",event:n,sourceDate:n.start,sourceView:a,displayDurationMinutes:X,isDuplicate:re}},collect:X=>({isDragging:X.isDragging()}),canDrag:()=>n.isDraggable!==!1&&!c.current}),O=(X,te,re)=>re?0:Math.ceil((te+X)/5)*5,j=(X,te)=>{if(X.stopPropagation(),n.isAllDay||n.isDraggable===!1)return;const re=k.findIndex(z=>z.id===n.taskId);re!==-1&&(_(re),C.current=re,c.current=!0,u.current=te,d.current=X.clientY,h.current={...n},document.addEventListener("mousemove",L),document.addEventListener("mouseup",B))},L=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let re=new Date;if(u.current==="top"){re=new Date(h.current.start);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re<h.current.end&&(s==null||s(C.current,"top",re))}else{re=new Date(h.current.end);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re>h.current.start&&(s==null||s(C.current,"bottom",re))}},B=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let re=new Date;if(u.current==="top"){re=new Date(h.current.start);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re<h.current.end&&(o==null||o(n,"top",re))}else{re=new Date(h.current.end);const z=O(re.getMinutes(),te,n.isAllDay);re.setMinutes(z),re>h.current.start&&(o==null||o(n,"bottom",re)),A(setTimeout(()=>{A(null)},200))}c.current=!1,u.current=null,h.current=null,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",B)},$=X=>{X.stopPropagation(),!c.current&&!T&&(t==null||t(n))},Y=X=>{X.altKey&&(l.current=!0)},G=r||x.jsxs("div",{className:"text-xs text-white font-medium truncate px-2 py-1",children:[!n.isAllDay&&x.jsx("div",{className:"text-[10px] opacity-80",children:Bat(n.start)}),x.jsx("div",{className:"truncate",children:n.title})]}),W=!n.isAllDay&&n.isDraggable!==!1&&o;return x.jsxs("div",{ref:n.isDraggable!==!1?P:null,className:`
        task-item relative rounded cursor-pointer transition-all duration-200
        ${M?"opacity-60 dragging shadow-lg":"hover:shadow-md"}
        ${n.isDraggable!==!1?"cursor-grab active:cursor-grabbing":"cursor-pointer"}
        ${i}
      `,style:{backgroundColor:n.color,border:M?`2px solid ${n.color}`:"none",...e},onClick:$,onMouseDown:Y,children:[W&&x.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>j(X,"top"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:f&&x.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),G,W&&x.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>j(X,"bottom"),onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:v&&x.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),M&&x.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-10 rounded border border-white border-opacity-30"})]})},tI=({date:n,hour:e,minute:t=0,isAllDay:r=!1,onDrop:i,children:a,className:o="",style:s})=>{const[{isOver:l,canDrop:c,draggedItem:u},d]=xat({accept:"event",drop:m=>{const v={targetDate:n,targetTime:e!==void 0?{hour:e,minute:t}:void 0,isAllDay:r};return i(m,v),v},collect:m=>({isOver:m.isOver(),canDrop:m.canDrop(),draggedItem:m.getItem()})}),h=()=>{if(!u||r)return"auto";const m=u.displayDurationMinutes,y=m/60*60,w=`${Math.max(y,30)}px`;return m===30&&console.log("Zero-duration event detected:",{originalStart:u.event.start,originalEnd:u.event.end,displayDurationMinutes:m,calculatedHeight:w}),w},f=()=>u&&u.event.color||"#3B82F6";return x.jsxs("div",{ref:d,className:`drop-zone ${o} transition-all duration-200 relative`,style:s,children:[a,l&&x.jsx("div",{className:`absolute pointer-events-none rounded-md transition-all duration-200 drop-indicator ${c?"valid":"invalid"}`,style:{top:0,left:0,right:0,height:h(),border:`1px solid ${c?f():"#EF4444"}`,backgroundColor:c?`${f()}15`:"#FEF2F2",borderStyle:"solid",boxSizing:"border-box","--drop-color":f(),"--drop-bg-color":`${f()}15`}})]})},Koe=Array.from({length:24},(n,e)=>e),Kp=60,Vat=64,zat=({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onMouseDown:a,onDragCreate:o,onEventDrop:s,onEventResize:l,onEventResizeMove:c,clearDragIndicator:u})=>{const{projects:d}=Ut(),h=jg(n,{weekStartsOn:1}),f=Array.from({length:7},(G,W)=>RW(h,W)),[m,v]=K.useState({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),[y,w]=K.useState({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0}),_=K.useRef(null),T=K.useRef(null),A=K.useCallback(()=>{const G=localStorage.getItem("lastUsedProjectId")||"no-project",W=d.find(X=>X.id===G);return(W==null?void 0:W.color)||"#EF4444"},[d]),C=G=>e.filter(W=>oo(W.start,G)&&!W.isAllDay),k=G=>e.filter(W=>oo(W.start,G)&&W.isAllDay),M=()=>Math.max(...f.map(G=>k(G).length),1),P=()=>{const G=M();return Math.max(40,G*26+12)},O=G=>{const W=G.start.getHours()+G.start.getMinutes()/60,te=G.end.getHours()+G.end.getMinutes()/60-W,re=te===0?30:Math.max(te*Kp,30);return{position:"absolute",top:`${W*Kp+2}px`,height:`${re-4}px`,left:"4px",right:"4px",backgroundColor:G.color,zIndex:10}},j=K.useCallback((G,W,X)=>{const te=parseInt(G.getAttribute("data-hour")||"0"),re=G.getBoundingClientRect(),z=Math.floor(W/re.height*60),ae=Math.round(z/15)*15,le=te*60+ae,ee=new Date(f[X]);return ee.setHours(Math.floor(le/60),le%60,0,0),ee},[f]),L=K.useCallback(G=>{if(G.target!==G.currentTarget)return;const W=G.currentTarget,X=parseInt(W.getAttribute("data-day")||"0"),te=W.getBoundingClientRect(),re=G.clientY-te.top,z=j(W,re,X);v({isDragging:!0,startElement:W,startY:re,startTime:z,dayIndex:X}),w({visible:!0,top:re+parseInt(W.getAttribute("data-hour")||"0")*Kp+80+P(),height:1,startTime:z,endTime:z,dayIndex:X}),G.preventDefault()},[j]),B=K.useCallback(G=>{var ee;if(!m.isDragging||!m.startElement||!_.current)return;const X=_.current.querySelectorAll(".day-column")[m.dayIndex];if(!X)return;const te=(ee=X.querySelector('[data-hour="0"]'))==null?void 0:ee.parentElement;if(!te)return;const re=te.getBoundingClientRect(),z=G.clientY-re.top,ae=Math.floor(z/Kp),le=X.querySelector(`[data-hour="${ae}"]`);if(le){const ye=le.getBoundingClientRect(),fe=G.clientY-ye.top,Ce=j(le,fe,m.dayIndex),at=m.startY+parseInt(m.startElement.getAttribute("data-hour")||"0")*Kp,Le=z,we=Math.min(at,Le),be=Math.abs(Le-at);w(ge=>({...ge,top:we+80+P(),height:Math.max(be,30),endTime:Ce>m.startTime?Ce:m.startTime,startTime:Ce>m.startTime?m.startTime:Ce}))}},[m,j]),$=K.useCallback(G=>{if(!m.isDragging||!y.startTime||!y.endTime){v({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),w(X=>({...X,visible:!1}));return}y.endTime.getTime()-y.startTime.getTime()>=15*60*1e3&&(o==null||o(y.startTime,y.endTime)),v({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0})},[m,y,o]);ve.useEffect(()=>{if(m.isDragging)return document.addEventListener("mousemove",B),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",$)}},[m.isDragging,B,$]);const Y=(G,W)=>!G||!W?"":`${mn(G,"HH:mm")} - ${mn(W,"HH:mm")}`;return ve.useEffect(()=>{u&&w({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0})},[u]),x.jsx("div",{className:"calendar-week-container flex flex-col h-full bg-background-primary dark:bg-[#141414]",children:x.jsxs("div",{className:"grid grid-cols-8 flex-1",style:{gridTemplateColumns:`${Vat}px repeat(7, minmax(0, 1fr))`},children:[x.jsxs("div",{className:"calendar-week-header col-span-8 grid grid-cols-subgrid bg-background-primary dark:bg-[#141414] border-b border-border sticky top-0 z-30",style:{height:"80px"},children:[x.jsx("div",{className:"border-r border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",children:"GMT+07"}),f.map((G,W)=>x.jsxs("div",{className:`calendar-week-day-header flex flex-col items-center justify-center py-3 bg-background-primary dark:bg-[#141414] min-w-0 ${W<6?"border-r border-border":""} ${ww(G)?"bg-primary bg-opacity-5":""}`,children:[x.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:mn(G,"EEE").toUpperCase()}),x.jsx("div",{className:`text-lg font-medium ${ww(G)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:mn(G,"d")})]},W))]}),x.jsxs("div",{className:"calendar-week-allday col-span-8 grid grid-cols-subgrid bg-background-primary dark:bg-[#141414] border-b border-border sticky z-30",style:{height:`${P()}px`,top:"80px"},children:[x.jsx("div",{className:"border-r border-b border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",children:"All day"}),f.map((G,W)=>x.jsx("div",{className:`relative min-w-0 ${W<6?"border-r border-border":""}`,children:x.jsx(tI,{date:G,isAllDay:!0,onDrop:s,className:"h-full cursor-pointer hover:bg-background-container transition-colors relative",children:x.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:X=>{X.target===X.currentTarget&&(i==null||i(G))},children:k(G).map((X,te)=>x.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:x.jsx(sT,{event:X,onClick:t,sourceView:"week",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${X.isTask?"border-l-2 border-white border-opacity-50":""} ${X.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:X.color,position:"relative",width:"100%",height:"100%"},children:x.jsx("div",{className:"flex items-center text-white w-full",children:x.jsx("span",{className:`truncate ${X.isCompleted?"line-through":""}`,children:X.title})})})},X.id))})})},W))]}),x.jsxs("div",{className:"calendar-scrollable col-span-8 grid grid-cols-subgrid overflow-auto bg-background-primary dark:bg-[#141414]",ref:T,children:[x.jsx("div",{className:"calendar-week-time-column bg-background-primary dark:bg-[#141414] border-r border-border",children:Koe.map(G=>x.jsx("div",{className:"h-[60px] border-b border-border flex items-start justify-center pt-1",children:x.jsx("span",{className:"text-xs text-text-secondary",children:mn(new Date().setHours(G,0),"HH:mm")})},G))}),x.jsx("div",{className:"contents",ref:_,children:f.map((G,W)=>x.jsxs("div",{className:`calendar-week-day-column relative day-column min-w-0 ${W<6?"border-r border-border":""}`,children:[Koe.map(X=>x.jsx(tI,{date:G,hour:X,onDrop:s,className:"h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:x.jsx("div",{className:"w-full h-full","data-day":W,"data-hour":X,onMouseDown:L,onClick:te=>{if(te.target===te.currentTarget&&!m.isDragging){const re=new Date(G);re.setHours(X,0,0,0);const z=new Date(re),ae=new Date(re);ae.setHours(ae.getHours()+1),w({visible:!0,top:X*Kp+80+P(),height:Kp,startTime:z,endTime:ae,dayIndex:W}),r==null||r(re)}}})},X)),y.visible&&y.dayIndex===W&&x.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${y.top-80-P()+2}px`,height:`${y.height-4}px`,left:"4px",right:"4px",backgroundColor:A(),opacity:.7},children:x.jsx("div",{className:"text-xs text-white font-medium",children:Y(y.startTime,y.endTime)})}),C(G).map(X=>x.jsx(sT,{event:X,onClick:t,sourceView:"week",onResize:l,onResizeMove:c,className:`rounded absolute ${X.isTask?"border-l-4":""} ${X.isCompleted?"calendar-event-completed":""}`,style:{...O(X),borderLeftColor:X.isTask?X.color:void 0},children:x.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[x.jsx("div",{className:`task-item-title ${X.isCompleted?"line-through":""}`,children:X.title}),x.jsxs("div",{className:"task-item-time",children:[mn(X.start,"HH:mm")," - ",mn(X.end,"HH:mm")]}),!X.isTask&&X.description&&x.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${X.isCompleted?"text-gray-400":""}`,children:X.description})]})},X.id)),ww(G)&&x.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*Kp+new Date().getMinutes()/60*Kp}px`,left:0,right:0,zIndex:15}})]},W))})]})]})})},Xoe=Array.from({length:24},(n,e)=>e),Xp=60,Hat=({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onDragCreate:a,onEventDrop:o,clearDragIndicator:s})=>{const{projects:l}=Ut(),[c,u]=K.useState({isDragging:!1,startElement:null,startY:0,startTime:null}),[d,h]=K.useState({visible:!1,top:0,height:0,startTime:null,endTime:null}),f=K.useRef(null),m=K.useCallback(()=>{const P=localStorage.getItem("lastUsedProjectId")||"no-project",O=l.find(j=>j.id===P);return(O==null?void 0:O.color)||"#EF4444"},[l]),v=()=>e.filter(P=>oo(P.start,n)&&!P.isAllDay),y=()=>e.filter(P=>oo(P.start,n)&&P.isAllDay),w=()=>{const P=y().length;return Math.max(40,P*26+12)},_=P=>{const O=P.start.getHours()+P.start.getMinutes()/60,L=P.end.getHours()+P.end.getMinutes()/60-O,B=L===0?30:Math.max(L*Xp,30);return{position:"absolute",top:`${O*Xp+2}px`,height:`${B-4}px`,left:"4px",right:"4px",backgroundColor:P.color,zIndex:10}},T=K.useCallback((P,O)=>{const j=parseInt(P.getAttribute("data-hour")||"0"),L=P.getBoundingClientRect(),B=Math.floor(O/L.height*60),$=Math.round(B/15)*15,Y=j*60+$,G=new Date(n);return G.setHours(Math.floor(Y/60),Y%60,0,0),G},[n]),A=K.useCallback(P=>{if(P.target!==P.currentTarget)return;const O=P.currentTarget,j=O.getBoundingClientRect(),L=P.clientY-j.top,B=T(O,L);u({isDragging:!0,startElement:O,startY:L,startTime:B}),h({visible:!0,top:L+parseInt(O.getAttribute("data-hour")||"0")*Xp,height:1,startTime:B,endTime:B}),P.preventDefault()},[T]),C=K.useCallback(P=>{if(!c.isDragging||!c.startElement||!f.current)return;const O=f.current.getBoundingClientRect(),j=P.clientY-O.top,L=Math.floor(j/Xp),B=f.current.querySelector(`[data-hour="${L}"]`);if(B){const $=B.getBoundingClientRect(),Y=P.clientY-$.top,G=T(B,Y),W=c.startY+parseInt(c.startElement.getAttribute("data-hour")||"0")*Xp,X=j,te=Math.min(W,X),re=Math.abs(X-W);h(z=>({...z,top:te,height:Math.max(re,30),endTime:G>c.startTime?G:c.startTime,startTime:G>c.startTime?c.startTime:G}))}},[c,T]),k=K.useCallback(P=>{if(!c.isDragging||!d.startTime||!d.endTime){u({isDragging:!1,startElement:null,startY:0,startTime:null}),h(j=>({...j,visible:!1}));return}d.endTime.getTime()-d.startTime.getTime()>=15*60*1e3&&(a==null||a(d.startTime,d.endTime)),u({isDragging:!1,startElement:null,startY:0,startTime:null})},[c,d,a]);ve.useEffect(()=>{if(c.isDragging)return document.addEventListener("mousemove",C),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",k)}},[c.isDragging,C,k]);const M=(P,O)=>!P||!O?"":`${mn(P,"HH:mm")} - ${mn(O,"HH:mm")}`;return ve.useEffect(()=>{s&&h({visible:!1,top:0,height:0,startTime:null,endTime:null})},[s]),x.jsx("div",{className:"flex flex-col h-full",children:x.jsxs("div",{className:"flex flex-col h-full",style:{"--scrollbar-width":"15px"},children:[x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] sticky top-0 z-20 border-b border-border",children:x.jsxs("div",{className:"grid",style:{gridTemplateColumns:"64px 1fr",paddingRight:"var(--scrollbar-width)"},children:[x.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary py-3 border-r border-border",children:"GMT+07"}),x.jsxs("div",{className:"flex flex-col items-center justify-center py-3",children:[x.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:mn(n,"EEE").toUpperCase()}),x.jsx("div",{className:`text-lg font-medium ${ww(n)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:mn(n,"d")})]})]})}),x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-b border-border",children:x.jsxs("div",{className:"grid",style:{gridTemplateColumns:"64px 1fr",paddingRight:"var(--scrollbar-width)"},children:[x.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary border-r border-border",style:{height:`${w()}px`},children:"All day"}),x.jsx(tI,{date:n,isAllDay:!0,onDrop:o,className:"cursor-pointer hover:bg-background-container transition-colors relative",style:{height:`${w()}px`},children:x.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:P=>{P.target===P.currentTarget&&(i==null||i(n))},children:y().map((P,O)=>x.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:x.jsx(sT,{event:P,onClick:t,sourceView:"day",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${P.isTask?"border-l-2 border-white border-opacity-50":""} ${P.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:P.color,position:"relative",width:"100%",height:"100%"},children:x.jsx("div",{className:"flex items-center text-white w-full",children:x.jsx("span",{className:`truncate ${P.isCompleted?"line-through":""}`,children:P.title})})})},P.id))})})]})}),x.jsx("div",{className:"flex-1 overflow-auto relative bg-background-primary dark:bg-[#141414]",children:x.jsxs("div",{className:"grid min-h-[1440px]",style:{gridTemplateColumns:"64px 1fr"},children:[x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-r border-border",children:Xoe.map(P=>x.jsx("div",{className:"h-[60px] border-b border-border flex items-start justify-center pt-1",children:x.jsx("span",{className:"text-xs text-text-secondary",children:mn(new Date().setHours(P,0),"HH:mm")})},P))}),x.jsxs("div",{className:"relative",ref:f,children:[Xoe.map(P=>x.jsx(tI,{date:n,hour:P,onDrop:o,className:"h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:x.jsx("div",{className:"w-full h-full","data-day":0,"data-hour":P,onMouseDown:A,onClick:O=>{if(O.target===O.currentTarget&&!c.isDragging){const j=new Date(n);j.setHours(P,0,0,0);const L=new Date(j),B=new Date(j);B.setHours(B.getHours()+1),h({visible:!0,top:P*Xp,height:Xp,startTime:L,endTime:B}),r==null||r(j)}}})},P)),d.visible&&x.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${d.top+2}px`,height:`${d.height-4}px`,left:"4px",right:"4px",backgroundColor:m(),opacity:.7},children:x.jsx("div",{className:"text-xs text-white font-medium",children:M(d.startTime,d.endTime)})}),v().map(P=>x.jsx(sT,{event:P,onClick:t,sourceView:"day",className:`rounded absolute ${P.isTask?"border-l-4":""} ${P.isCompleted?"calendar-event-completed":""}`,style:{..._(P),borderLeftColor:P.isTask?P.color:void 0},children:x.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[x.jsx("div",{className:`task-item-title ${P.isCompleted?"line-through":""}`,children:P.title}),x.jsxs("div",{className:"task-item-time",children:[mn(P.start,"HH:mm")," - ",mn(P.end,"HH:mm")]}),!P.isTask&&P.description&&x.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${P.isCompleted?"text-gray-400":""}`,children:P.description})]})},P.id)),ww(n)&&x.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*Xp+new Date().getMinutes()/60*Xp}px`,left:0,right:0,zIndex:15}})]})]})})]})})},Gat=({currentDate:n,events:e,onEventClick:t,onDateClick:r,onEventDrop:i,onDayViewClick:a})=>{const o=()=>{const h=jg(wxe(n),{weekStartsOn:1}),f=LW(bxe(n),{weekStartsOn:1});return O2({start:h,end:f})},s=h=>e.filter(f=>oo(f.start,h)).sort((f,m)=>f.isAllDay&&!m.isAllDay?-1:!f.isAllDay&&m.isAllDay?1:f.start.getTime()-m.start.getTime()),l=o(),c=Math.ceil(l.length/7),u=c===6,d=u?140:"auto";return x.jsxs("div",{className:"w-full bg-background-primary h-full flex flex-col",children:[x.jsx("div",{className:"grid grid-cols-7 border-b border-border bg-background-primary sticky top-0 z-10",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(h=>x.jsx("div",{className:"py-2 text-center text-sm font-medium text-text-secondary",children:h},h))}),x.jsx("div",{className:`flex-1 ${u?"overflow-auto":"overflow-hidden"}`,children:x.jsx("div",{className:"grid grid-cols-7 border-l border-t border-border",style:{gridTemplateRows:u?`repeat(${c}, ${d}px)`:`repeat(${c}, minmax(140px, 1fr))`,minHeight:u?`${c*140}px`:"100%"},children:l.map((h,f)=>{const m=s(h),v=Ptt(h,n),y=ww(h),w=m.filter(T=>T.isAllDay),_=m.filter(T=>!T.isAllDay);return x.jsx(tI,{date:h,isAllDay:!0,onDrop:i,className:`
                border-b border-r border-border p-1 cursor-pointer transition-colors
                ${v?y?"bg-primary/5 text-text-primary":"bg-background-primary text-text-primary hover:bg-background-container/50":"bg-background-secondary/30 text-text-secondary"}
              `,children:x.jsxs("div",{className:"w-full h-full flex flex-col min-h-0",onClick:()=>r==null?void 0:r(h),children:[x.jsx("div",{className:"text-sm mb-1 flex-shrink-0",children:y?x.jsx("div",{className:"text-white bg-primary rounded-full w-6 h-6 flex items-center justify-center font-medium",children:mn(h,"d")}):x.jsx("div",{className:`font-medium ${v?"text-text-primary":"text-text-secondary/70"}`,children:mn(h,"d")})}),x.jsx("div",{className:"flex-1 min-h-0",children:(()=>{const A=[],C=w.length+_.length,k=w.slice(0,4);A.push(...k);const M=4-A.length;if(M>0){const O=_.slice(0,M);A.push(...O)}const P=C-A.length;return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex flex-col gap-[2px]",children:A.map((O,j)=>O.isAllDay?x.jsx(sT,{event:O,onClick:t,sourceView:"month",className:`month-view-event block w-full cursor-grab rounded text-xs px-2 py-1 h-5 flex items-center ${v?O.isCompleted?"calendar-event-completed":"":"opacity-60"}`,style:{backgroundColor:O.color},children:x.jsx("div",{className:`font-medium truncate leading-tight w-full text-white ${O.isCompleted?"line-through":""}`,title:O.title,children:O.title})},O.id):x.jsx(sT,{event:O,onClick:t,sourceView:"month",className:`month-view-event block hover:bg-background-container rounded px-1 py-0.5 min-h-[16px] text-xs ${v?O.isCompleted?"calendar-event-completed":"":"opacity-60"}`,style:{backgroundColor:"transparent"},children:x.jsxs("div",{className:`flex items-center w-full leading-tight ${v?"text-text-primary":"text-text-secondary"}`,children:[x.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full mr-1 flex-shrink-0",style:{backgroundColor:O.color}}),x.jsxs("span",{className:`truncate ${O.isCompleted?"line-through":""}`,children:[mn(O.start,"h:mm a")," ",O.title]})]})},O.id))}),P>0&&x.jsxs("div",{className:`text-xs font-medium cursor-pointer hover:text-primary hover:bg-background-container px-1 py-0.5 rounded min-h-[16px] flex items-center mt-1 ${v?"text-text-secondary":"text-text-secondary/70 opacity-60"}`,onClick:O=>{O.stopPropagation(),a==null||a(h)},children:["+",P," more"]})]})})()})]})},f)})})})]})};let Zoe=0;const qat=2e3;let Qoe=!1;const Wat=()=>{const n=Nu(i=>i.loadExtensionData),e=Nu(i=>i.initializeFocusSync),t=K.useCallback(async()=>{const i=Date.now();if(!(i-Zoe<qat)){Zoe=i;try{await n()}catch{}}},[n]);return K.useEffect(()=>{(async()=>{Qoe||(Qoe=!0,console.log("🚀 Initializing extension sync..."),await t(),setTimeout(async()=>{try{await e()}catch{}},100))})()},[]),K.useEffect(()=>{const i=setInterval(t,3e5);return()=>clearInterval(i)},[t]),{refreshData:K.useCallback(()=>{t()},[t])}},Yat=()=>{const[n,e]=K.useState(new Date),[t,r]=K.useState("week"),[i,a]=K.useState([]),[o,s]=K.useState(null),[l,c]=K.useState(!1),[u,d]=K.useState(null),[h,f]=K.useState(!1),[m,v]=K.useState(null),[y,w]=K.useState(!1),[_,T]=K.useState([]),[A,C]=K.useState([]),{tasks:k,projects:M,addTask:P,updateTask:O,setEditingTaskId:j,deleteTask:L,updateTaskLocally:B}=Ut(),{user:$}=Qt(),Y=K.useMemo(()=>Fat(i,k,M),[i,k,M]),G=Zg(),W=ss(),{isLeftSidebarOpen:X,toggleLeftSidebar:te}=pl();Wat(),K.useEffect(()=>{const ge=new URLSearchParams(W.search).get("view");ge&&["day","week","month"].includes(ge)&&r(ge)},[W.search]);const re=K.useCallback(()=>{if(console.log("↩️ performUndo called, undo stack length:",_.length),_.length===0){console.log("❌ Undo stack is empty");return}const be=_[_.length-1],{taskId:ge,beforeState:he,afterState:Ge}=be;console.log("🔄 Undoing action for task:",ge,"to state:",he);const je={...he,scheduledDate:he.scheduledDate===null?void 0:he.scheduledDate,scheduledStartTime:he.scheduledStartTime===null?void 0:he.scheduledStartTime,scheduledEndTime:he.scheduledEndTime===null?void 0:he.scheduledEndTime};Ge.isNewlyCreated?L(ge).then(()=>{C(rt=>[...rt,be]),T(rt=>rt.slice(0,-1))}).catch(rt=>{console.error("Failed to undo task creation:",rt)}):O(ge,je).then(()=>{C(rt=>[...rt,be]),T(rt=>rt.slice(0,-1))}).catch(rt=>{console.error("Failed to undo task change:",rt)})},[_,O]),z=K.useCallback(()=>{if(A.length===0)return;const be=A[A.length-1],{taskId:ge,afterState:he}=be,Ge={...he,scheduledDate:he.scheduledDate===null?void 0:he.scheduledDate,scheduledStartTime:he.scheduledStartTime===null?void 0:he.scheduledStartTime,scheduledEndTime:he.scheduledEndTime===null?void 0:he.scheduledEndTime};O(ge,Ge).then(()=>{T(je=>[...je,be]),C(je=>je.slice(0,-1))}).catch(je=>{console.error("Failed to redo task change:",je)})},[A,O]);K.useEffect(()=>{const be=ge=>{const he=ge.target;if(!(o||l||h||he.tagName==="INPUT"||he.tagName==="TEXTAREA"||he.isContentEditable)){if(ge.metaKey&&ge.key.toLowerCase()==="z"){console.log("⌨️ Command+Z detected, shiftKey:",ge.shiftKey),ge.preventDefault(),ge.shiftKey?(console.log("🔄 Calling performRedo"),z()):(console.log("↩️ Calling performUndo"),re());return}switch(ge.key.toLowerCase()){case"q":ge.preventDefault(),ae("prev");break;case"e":ge.preventDefault(),ae("next");break;case"arrowleft":ge.preventDefault(),ae("prev");break;case"arrowright":ge.preventDefault(),ae("next");break}}};return document.addEventListener("keydown",be),()=>{document.removeEventListener("keydown",be)}},[o,l,h,t,n,re,z]);const ae=be=>{if(be==="today"){e(new Date);return}const ge=be==="next"?1:-1;switch(t){case"month":e(NW(n,ge));break;case"week":e(Cet(n,ge));break;case"day":e(RW(n,ge));break}},le=be=>{c(!1),d(null),f(!1),v(null),w(!0),setTimeout(()=>w(!1),100),be.isTask&&be.taskId?(s(be.taskId),j(be.taskId)):(s("new"),j("new"))},ee=be=>{s(null),j(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const ge=new Date(be),he=new Date(be);he.setHours(he.getHours()+1);const je=oo(ge,new Date)?"pomodoro":"todo";v({startTime:ge,endTime:he,status:je,isAllDay:!1}),f(!0)},ye=be=>{s(null),j(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const ge=new Date(be);ge.setHours(0,0,0,0);const he=new Date(be);he.setHours(0,0,0,0);const je=oo(ge,new Date)?"pomodoro":"todo";v({startTime:ge,endTime:he,status:je,isAllDay:!0}),f(!0)},fe=be=>{ye(be)},Ce=K.useCallback((be,ge)=>{if(!(be.isDuplicate===!0)&&!$at(be.event,ge,Y))return;const Ge=t==="month"?be.event.isAllDay:ge.isAllDay||!1,{start:je,end:rt}=dSe(be.event,{...ge,isAllDay:Ge}),bt={...be.event,start:je,end:rt,isAllDay:Ge};if(be.event.isTask&&be.event.taskId){const lt=k.find(cn=>cn.id===be.event.taskId);if(lt){if(be.isDuplicate){console.log("🔄 Duplicating task:",lt.title);const Mt={title:lt.title,description:lt.description||"",status:lt.status,projectId:lt.projectId,userId:($==null?void 0:$.uid)||lt.userId,timeEstimated:lt.timeEstimated,scheduledDate:`${je.getFullYear()}-${String(je.getMonth()+1).padStart(2,"0")}-${String(je.getDate()).padStart(2,"0")}`,includeTime:!Ge,completed:!1,timeSpent:0};Ge||(Mt.scheduledStartTime=je.toTimeString().substring(0,5),Mt.scheduledEndTime=rt.toTimeString().substring(0,5)),oo(je,new Date)&&lt.status==="todo"&&(Mt.status="pomodoro"),oo(be.event.start,new Date)&&!oo(je,new Date)&&(t==="week"||t==="month")&&lt.status==="pomodoro"&&(Mt.status="todo"),P(Mt).then(xt=>{console.log("✅ Task duplicated successfully with ID:",xt);const fn={taskId:xt,beforeState:{scheduledDate:null,scheduledStartTime:null,scheduledEndTime:null,includeTime:!1,status:"todo"},afterState:{scheduledDate:Mt.scheduledDate||null,scheduledStartTime:Mt.scheduledStartTime||null,scheduledEndTime:Mt.scheduledEndTime||null,includeTime:!!Mt.includeTime,status:Mt.status,isNewlyCreated:!0}};console.log("🔄 Adding duplication action to undo stack:",fn),T(Ti=>{const Nn=[...Ti,fn];return console.log("📚 Undo stack updated after duplication, length:",Nn.length),Nn}),C([])}).catch(xt=>{console.error("❌ Failed to duplicate task:",xt)});return}const cn={scheduledDate:lt.scheduledDate||null,scheduledStartTime:lt.scheduledStartTime||null,scheduledEndTime:lt.scheduledEndTime||null,includeTime:lt.includeTime||!1,status:lt.status},Ct={scheduledDate:`${je.getFullYear()}-${String(je.getMonth()+1).padStart(2,"0")}-${String(je.getDate()).padStart(2,"0")}`,includeTime:!Ge};Ge?(Ct.scheduledStartTime=null,Ct.scheduledEndTime=null):(Ct.scheduledStartTime=je.toTimeString().substring(0,5),Ct.scheduledEndTime=rt.toTimeString().substring(0,5)),oo(je,new Date)&&lt.status==="todo"&&(Ct.status="pomodoro"),oo(be.event.start,new Date)&&!oo(je,new Date)&&(t==="week"||t==="month")&&lt.status==="pomodoro"&&(Ct.status="todo");const Jt={scheduledDate:Ct.scheduledDate,scheduledStartTime:Ct.scheduledStartTime,scheduledEndTime:Ct.scheduledEndTime,includeTime:Ct.includeTime,status:Ct.status||lt.status},hn={taskId:lt.id,beforeState:cn,afterState:Jt};console.log("🔄 Adding action to undo stack:",hn),T(Mt=>{const Te=[...Mt,hn];return console.log("📚 Undo stack updated, length:",Te.length),Te}),C([]),O(lt.id,Ct).catch(Mt=>{console.error("Failed to update task scheduling:",Mt),T(Te=>Te.slice(0,-1))})}}else a(i.map(lt=>lt.id===be.event.id?bt:lt))},[Y,i,k,t]),at=K.useCallback((be,ge)=>{s(null),j(null),f(!1),v(null);const Ge=oo(be,new Date)?"pomodoro":"todo";d({startTime:be,endTime:ge,status:Ge}),c(!0)},[]),Le=K.useCallback((be,ge,he)=>{if(!be.isTask||!be.taskId){a(i.map(Ct=>{if(Ct.id===be.id){const En={...Ct};return ge==="top"?En.start=he:En.end=he,En}return Ct}));return}const Ge=k.find(Ct=>Ct.id===be.taskId);if(!Ge)return;const je={scheduledDate:Ge.scheduledDate||null,scheduledStartTime:Ge.scheduledStartTime||null,scheduledEndTime:Ge.scheduledEndTime||null,includeTime:Ge.includeTime||!1,status:Ge.status},rt={},bt=he.toTimeString().substring(0,5);ge==="top"?rt.scheduledStartTime=bt:rt.scheduledEndTime=bt;const lt={...je,scheduledStartTime:ge==="top"?bt:je.scheduledStartTime,scheduledEndTime:ge==="bottom"?bt:je.scheduledEndTime},cn={taskId:Ge.id,beforeState:je,afterState:lt};T(Ct=>[...Ct,cn]),C([]),O(Ge.id,rt).catch(Ct=>{console.error("Failed to resize task:",Ct),T(En=>En.slice(0,-1))})},[i,k,O]),we=(be,ge,he)=>{if(!k[be])return;const je={};ge==="top"?je.scheduledStartTime=he.toTimeString().substring(0,5):je.scheduledEndTime=he.toTimeString().substring(0,5),B(be,je)};return x.jsx(Vit,{backend:Nat,children:x.jsxs("div",{className:"calendar-main-container flex flex-col h-full bg-background-primary dark:bg-[#141414]",children:[x.jsxs("div",{className:"calendar-header h-16 border-b border-border px-4 flex items-center justify-between bg-background-secondary",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[!X&&x.jsx("button",{onClick:te,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"menu-line",size:20})})}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>ae("prev"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-left-s-line"})})}),x.jsx("button",{onClick:()=>ae("next"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-right-s-line"})})})]}),x.jsx(n5,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:mn(n,"MMMM yyyy")})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("button",{onClick:()=>ae("today"),className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container",children:"Today"}),x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsx("button",{type:"button",onClick:()=>r("day"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="day"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Day"}),x.jsx("button",{type:"button",onClick:()=>r("week"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="week"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Week"}),x.jsx("button",{type:"button",onClick:()=>r("month"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="month"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Month"})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/pomodoro"?void 0:()=>G("/pomodoro"),"aria-label":W.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/projects"?void 0:()=>G("/projects"),"aria-label":W.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/dashboard"?void 0:()=>G("/dashboard"),"aria-label":W.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/calendar"?void 0:()=>G("/calendar"),"aria-label":W.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${W.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:W.pathname==="/deep-focus"?void 0:()=>G("/deep-focus"),"aria-label":W.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"brain-line",size:20})})})})]})]}),x.jsxs("div",{className:"flex-1 overflow-auto custom-scrollbar",children:[t==="week"&&x.jsx(zat,{currentDate:n,events:Y,onEventClick:le,onTimeSlotClick:ee,onAllDayClick:ye,onDragCreate:at,onEventDrop:Ce,onEventResize:Le,onEventResizeMove:we,clearDragIndicator:y}),t==="day"&&x.jsx(Hat,{currentDate:n,events:Y,onEventClick:le,onTimeSlotClick:ee,onAllDayClick:ye,onDragCreate:at,onEventDrop:Ce,clearDragIndicator:y}),t==="month"&&x.jsx(Gat,{currentDate:n,events:Y,onEventClick:le,onDateClick:fe,onEventDrop:Ce,onDayViewClick:be=>{e(be),r("day")}})]}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(ay,{task:o==="new"?void 0:k.find(be=>be.id===o),onCancel:()=>{s(null),j(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{s(null),j(null),w(!0),setTimeout(()=>w(!1),100)}})})}),l&&u&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(ay,{initialStartTime:u.startTime,initialEndTime:u.endTime,status:u.status,onCancel:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)}})})}),h&&m&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(ay,{initialStartTime:m.startTime,initialEndTime:m.endTime,status:m.status,isAllDay:m.isAllDay,onCancel:()=>{f(!1),v(null)},onSave:()=>{f(!1),v(null)}})})})]})})},Kat=()=>{const{isLeftSidebarOpen:n}=pl();return K.useEffect(()=>{console.log("🔧 Calendar: Sidebar state changed",{isLeftSidebarOpen:n,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const e=document.getElementById("sidebar");e&&(console.log("🔧 Calendar: Sidebar element found",{currentWidth:e.style.width,className:e.className,isOpen:n}),e.style.display="flex",n?(e.style.width="16rem",e.classList.remove("w-0"),e.classList.add("w-64")):(e.style.width="0px",e.classList.remove("w-64"),e.classList.add("w-0")))})},[n]),x.jsxs("div",{className:"calendar-page-container flex h-screen overflow-hidden bg-background-primary dark:bg-[#141414]",children:[x.jsx(Vw,{}),x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsx(Yat,{})})]})},Joe=n=>{const{workSessions:e,dailySiteUsages:t,deepFocusSessions:r,overrideSessions:i}=n,a=t.reduce((f,m)=>f+Math.round(m.totalTime/(1e3*60)),0),o=e.reduce((f,m)=>f+m.duration,0),s=r.reduce((f,m)=>f+(m.duration||0),0),l=i.reduce((f,m)=>f+m.duration,0),c={onScreenTime:a,workingTime:o,deepFocusTime:s,overrideTime:l},u=new Map;t.forEach(f=>{u.has(f.date)||u.set(f.date,{date:f.date,onScreenTime:0,workingTime:0,deepFocusTime:0});const m=u.get(f.date);m.onScreenTime+=Math.round(f.totalTime/(1e3*60))}),e.forEach(f=>{u.has(f.date)||u.set(f.date,{date:f.date,onScreenTime:0,workingTime:0,deepFocusTime:0});const m=u.get(f.date);m.workingTime+=f.duration}),r.forEach(f=>{if(f.duration){const m=f.startTime.toISOString().split("T")[0];u.has(m)||u.set(m,{date:m,onScreenTime:0,workingTime:0,deepFocusTime:0});const v=u.get(m);v.deepFocusTime+=f.duration}});const d=Array.from(u.values()).sort((f,m)=>f.date.localeCompare(m.date)),{siteUsage:h}=Ht.mapArrSiteUsage(t);return{timeMetrics:c,dailyUsage:d,siteUsage:h}},Xat=Vf()(t5((n,e)=>({timeMetrics:{onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},dailyUsage:[],siteUsage:[],comparisonData:null,isLoading:!1,isLoadingComparison:!1,loadExtensionData:async(t,r)=>{try{if(!Ht.isExtensionInstalled()){console.warn("⚠️ Extension not installed - skipping data load");return}const i=Qt.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - skipping extension data load");return}n({isLoading:!0});const a=i.uid,{workSessions:o}=oh.getState(),s=await Mc.getDailyUsage(a,t,r),l=await Ga.getUserSessions(a,t,r),c=await Kd.getUserOverrides(a,t,r),u=Joe({workSessions:o,dailySiteUsages:s,deepFocusSessions:l,overrideSessions:c});n({timeMetrics:u.timeMetrics,dailyUsage:u.dailyUsage,siteUsage:u.siteUsage})}catch(i){console.error("Extension data loading failed:",i)}finally{n({isLoading:!1})}},loadAllTimeExtensionData:async()=>{try{if(!Ht.isExtensionInstalled()){console.warn("⚠️ Extension not installed - skipping all time data load");return}const t=Qt.getState().user;if(!(t!=null&&t.uid)){console.warn("⚠️ User not authenticated - skipping all time extension data load");return}n({isLoading:!0});const r=t.uid,{workSessions:i}=oh.getState(),a=await Mc.getAllTimeDailyUsage(r),o=await Ga.getUserSessions(r),s=await Kd.getUserOverrides(r),l=Joe({workSessions:i,dailySiteUsages:a,deepFocusSessions:o,overrideSessions:s});n({timeMetrics:l.timeMetrics,siteUsage:l.siteUsage,dailyUsage:l.dailyUsage})}catch(t){console.error("Extension data all time loading failed:",t)}finally{n({isLoading:!1})}},loadComparisonData:async(t,r)=>{}}),{name:"deepFocusDashboardStore",partialize:n=>({timeMetrics:n.timeMetrics,dailyUsage:n.dailyUsage,siteUsage:n.siteUsage,comparisonData:n.comparisonData,isLoading:n.isLoading,isLoadingComparison:n.isLoadingComparison}),version:1}));async function hSe(n){console.log("🧪 Quick Override Test"),console.log("=====================");try{console.log("📝 Creating simple override session...");const e=await Kd.createOverrideSession({userId:n,domain:"test.com",duration:5,reason:"manual_override"});console.log("✅ Simple session created:",e),console.log("📝 Creating detailed override session...");const t=await Kd.createOverrideSession({userId:n,domain:"example.com",url:"https://example.com/page",duration:3,reason:"break_time"});console.log("✅ Detailed session created:",t),console.log("📖 Retrieving user override sessions...");const r=await Kd.getUserOverrides(n);console.log("✅ Retrieved sessions:",r.length),r.forEach((a,o)=>{console.log(`📋 Session ${o+1}:`,{domain:a.domain,duration:a.duration+"min",reason:a.reason,createdAt:a.createdAt.toISOString()})});const i=r.reduce((a,o)=>a+o.duration,0);return console.log("⏱️ Total override time:",i+" minutes"),console.log("🎉 Quick test completed successfully!"),{success:!0,totalSessions:r.length,totalMinutes:i}}catch(e){return console.error("❌ Quick test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}typeof window<"u"&&(window.quickOverrideTest=hSe);const Zat={async testCreateSession(){const{user:n}=Qt.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={userId:n.uid,domain:"test-domain.com",duration:5,reason:"manual_override",timestamp:new Date};console.log("🔍 DEBUG: Testing override session creation with:",e);try{const t=await Kd.createOverrideSession(e);return console.log("✅ Test override session created successfully:",t),t}catch(t){throw console.error("❌ Test override session failed:",t),t}},testExtensionMessage(){const{user:n}=Qt.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={domain:"extension-test.com",duration:5,userId:n.uid,timestamp:Date.now()};console.log("🔍 DEBUG: Testing extension message with:",e),window.postMessage({type:"RECORD_OVERRIDE_SESSION",payload:e,source:"make10000hours"},"*"),console.log("📤 Test extension message sent")},testUserSync(){var t,r;const{user:n}=Qt.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for sync test");return}const e={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Testing user sync with:",e),window.postMessage({type:"SET_USER_ID",payload:e,source:"make10000hours"},"*"),typeof window.chrome<"u"&&((r=(t=window.chrome)==null?void 0:t.runtime)!=null&&r.sendMessage)&&(console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security"),console.log("ℹ️ Direct chrome.runtime.sendMessage from web pages requires extension ID")),console.log("📤 Test user sync messages sent")},async getOverrideSessions(){const{user:n}=Qt.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in");return}try{const e=await Kd.getUserOverrides(n.uid);return console.log("📋 Current override sessions:",e),e}catch(e){throw console.error("❌ Failed to get override sessions:",e),e}}};window.debugOverrideSession=Zat;const Qat={async testExtensionDetection(){var n;console.log("🔍 Testing extension detection..."),console.log("Extension installed:",Ht.isExtensionInstalled()),console.log("Chrome runtime available:",typeof((n=window.chrome)==null?void 0:n.runtime)<"u")},async testPostMessageCommunication(){console.log("📡 Testing postMessage communication...");try{const n=await Ht.testConnection();return console.log("PostMessage test result:",n),n}catch(n){return console.error("PostMessage test failed:",n),!1}},async testChromeRuntimeCommunication(){var n;if(console.log("🔗 Testing chrome.runtime communication..."),typeof((n=window.chrome)==null?void 0:n.runtime)>"u")return console.log("❌ Chrome runtime not available"),!1;try{const e=await window.chrome.runtime.sendMessage({type:"PING"});return console.log("Chrome runtime test result:",e),!0}catch(e){return console.error("Chrome runtime test failed:",e),!1}},async testConnection(){console.log("🧪 Running comprehensive connection test...");const n={extensionDetection:Ht.isExtensionInstalled(),postMessage:!1,chromeRuntime:!1,overall:!1};try{n.postMessage=await this.testPostMessageCommunication()}catch(e){console.error("PostMessage test error:",e)}try{n.chromeRuntime=await this.testChromeRuntimeCommunication()}catch(e){console.error("Chrome runtime test error:",e)}try{n.overall=await Ht.testConnection()}catch(e){console.error("Overall connection test error:",e)}return console.log("📊 Connection test results:",n),n},async ping(){console.log("🏓 Sending ping to extension..."),window.postMessage({type:"EXTENSION_PING",messageId:Math.random().toString(36),source:"make10000hours-webapp-debug"},"*");const n=e=>{var t;((t=e.data)==null?void 0:t.type)==="EXTENSION_PONG"&&(console.log("🏓 Received pong from extension:",e.data),window.removeEventListener("message",n))};window.addEventListener("message",n),setTimeout(()=>{window.removeEventListener("message",n),console.log("⏰ Ping timeout - no response from extension")},5e3)},checkExtensionStatusInUI(){const n=document.querySelectorAll('[class*="Extension"]');console.log("🖥️ Extension status elements found:",n.length),n.forEach((e,t)=>{console.log(`Element ${t}:`,e.textContent,e.className)})},async runFullDiagnostic(){console.log("🔧 Running full extension diagnostic..."),console.log("====================================="),await this.testExtensionDetection(),console.log("-------------------------------------");const n=await this.testConnection();console.log("-------------------------------------"),await this.ping(),console.log("-------------------------------------"),this.checkExtensionStatusInUI(),console.log("====================================="),console.log("📋 Diagnostic Summary:"),console.log("- Extension installed:",Ht.isExtensionInstalled()),console.log("- PostMessage working:",n.postMessage),console.log("- Chrome runtime working:",n.chromeRuntime),console.log("- Overall connection:",n.overall),n.overall||(console.log(""),console.log("💡 Troubleshooting tips:"),console.log("1. Make sure the Focus Time Tracker extension is installed and enabled"),console.log("2. Refresh the page and try again"),console.log("3. Check if the extension is working on other websites"),console.log("4. Try reloading the extension in chrome://extensions/"))}};window.debugExtensionCommunication=Qat;console.log("🔧 Extension communication debugger loaded. Use debugExtensionCommunication.runFullDiagnostic() to test.");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FH=function(n,e){return FH=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},FH(n,e)};function _e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");FH(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Jat=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),eot=function(){function n(){this.browser=new Jat,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Tn=new eot;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Tn.wxa=!0,Tn.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Tn.worker=!0:!Tn.hasGlobalWindow||"Deno"in window?(Tn.node=!0,Tn.svgSupported=!0):tot(navigator.userAgent,Tn);function tot(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var AY=12,fSe="sans-serif",by=AY+"px "+fSe,not=20,rot=100,iot="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function aot(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-not)/rot;e[r]=i}return e}var oot=aot(iot),wy={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=wy.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||by),n.measureText(t);t=t||"",r=r||by;var a=/((?:\d+)?\.?\d*)px/.exec(r),o=a&&+a[1]||AY,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var l=0;l<t.length;l++){var c=oot[t[l]];s+=c==null?o:c*o}return{width:s}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},pSe=Lf(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),gSe=Lf(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),BT=Object.prototype.toString,_5=Array.prototype,sot=_5.forEach,lot=_5.filter,kY=_5.slice,cot=_5.map,ese=(function(){}).constructor,vO=ese?ese.prototype:null,CY="__proto__",uot=2311;function mSe(){return uot++}function DY(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Rt(n){if(n==null||typeof n!="object")return n;var e=n,t=BT.call(n);if(t==="[object Array]"){if(!CC(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Rt(n[r])}}else if(gSe[t]){if(!CC(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!pSe[t]&&!CC(n)&&!lT(n)){e={};for(var o in n)n.hasOwnProperty(o)&&o!==CY&&(e[o]=Rt(n[o]))}return e}function en(n,e,t){if(!It(e)||!It(n))return t?Rt(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==CY){var i=n[r],a=e[r];It(a)&&It(i)&&!Fe(a)&&!Fe(i)&&!lT(a)&&!lT(i)&&!tse(a)&&!tse(i)&&!CC(a)&&!CC(i)?en(i,a,t):(t||!(r in n))&&(n[r]=Rt(e[r]))}return n}function IY(n,e){for(var t=n[0],r=1,i=n.length;r<i;r++)t=en(t,n[r],e);return t}function Ie(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==CY&&(n[t]=e[t]);return n}function kt(n,e,t){for(var r=In(e),i=0,a=r.length;i<a;i++){var o=r[i];(t?e[o]!=null:n[o]==null)&&(n[o]=e[o])}return n}function dn(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function dot(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Oa(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else kt(n,e,t)}function Fs(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function Z(n,e,t){if(n&&e)if(n.forEach&&n.forEach===sot)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function $e(n,e,t){if(!n)return[];if(!e)return MY(n);if(n.map&&n.map===cot)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function Lf(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function gr(n,e,t){if(!n)return[];if(!e)return MY(n);if(n.filter&&n.filter===lot)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function hot(n,e,t){if(n&&e){for(var r=0,i=n.length;r<i;r++)if(e.call(t,n[r],r,n))return n[r]}}function In(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function fot(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(kY.call(arguments)))}}var ct=vO&&Et(vO.bind)?vO.call.bind(vO.bind):fot;function Yt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(kY.call(arguments)))}}function Fe(n){return Array.isArray?Array.isArray(n):BT.call(n)==="[object Array]"}function Et(n){return typeof n=="function"}function it(n){return typeof n=="string"}function $H(n){return BT.call(n)==="[object String]"}function Jn(n){return typeof n=="number"}function It(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function tse(n){return!!pSe[BT.call(n)]}function Xl(n){return!!gSe[BT.call(n)]}function lT(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function S5(n){return n.colorStops!=null}function pot(n){return n.image!=null}function got(n){return BT.call(n)==="[object RegExp]"}function nI(n){return n!==n}function Ro(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function Gt(n,e){return n??e}function Df(n,e,t){return n??e??t}function MY(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return kY.apply(n,e)}function PY(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function vl(n,e){if(!n)throw new Error(e)}function Zd(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var vSe="__ec_primitive__";function $2(n){n[vSe]=!0}function CC(n){return n[vSe]}var mot=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return In(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),ySe=typeof Map=="function";function vot(){return ySe?new Map:new mot}var yot=function(){function n(e){var t=Fe(e);this.data=vot();var r=this;e instanceof n?e.each(i):e&&Z(e,i);function i(a,o){t?r.set(a,o):r.set(o,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return ySe?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function pt(n){return new yot(n)}function rI(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function T5(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&Ie(t,e),t}function bSe(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function dt(n,e){return n.hasOwnProperty(e)}function pa(){}var YR=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BH=function(n,e){return BH=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},BH(n,e)};function gi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");BH(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ox(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function al(n,e){return n[0]=e[0],n[1]=e[1],n}function Tg(n){return[n[0],n[1]]}function bot(n,e,t){return n[0]=e,n[1]=t,n}function nse(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function UH(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n}function ow(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function VH(n){return Math.sqrt(wot(n))}function wot(n){return n[0]*n[0]+n[1]*n[1]}function KR(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function UT(n,e){var t=VH(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function zH(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var Gv=zH;function xot(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var xw=xot;function XR(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function ns(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function qv(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Wv(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var eS=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),_ot=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new eS(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,t.drift(a,o,e),this.handler.dispatchToElement(new eS(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.handler.dispatchToElement(new eS(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new eS(s,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new eS(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new eS(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}(),Xu=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=i.length,l=0;l<s;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=t[o-1],l=i.length,c=0;c<l;c++){var u=i[c];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(s);break;case 1:u.h.call(s,t[0]);break;case 2:u.h.call(s,t[0],t[1]);break;default:u.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}(),Sot=Math.log(2);function HH(n,e,t,r,i,a){var o=r+"-"+i,s=n.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/Sot);return n[t][l]}for(var c=r|1<<t,u=t+1;r&1<<u;)u++;for(var d=0,h=0,f=0;h<s;h++){var m=1<<h;m&i||(d+=(f%2?-1:1)*n[t][h]*HH(n,e-1,u,c,i|m,a),f++)}return a[o]=d,d}function rse(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=HH(t,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*HH(t,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(l,c,u){var d=c*a[6]+u*a[7]+1;l[0]=(c*a[0]+u*a[1]+a[2])/d,l[1]=(c*a[3]+u*a[4]+a[5])/d}}}var ise="___zrEVENTSAVED",IU=[];function Tot(n,e,t,r,i){return GH(IU,e,r,i,!0)&&GH(n,t,IU[0],IU[1])}function GH(n,e,t,r,i){if(e.getBoundingClientRect&&Tn.domSupported&&!wSe(e)){var a=e[ise]||(e[ise]={}),o=Eot(e,a),s=Aot(o,a,i);if(s)return s(n,t,r),!0}return!1}function Eot(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),n.appendChild(o),t.push(o)}return t}function Aot(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;o.push(h,f),l=l&&a&&h===a[d]&&f===a[d+1],s.push(n[c].offsetLeft,n[c].offsetTop)}return l&&i?i:(e.srcCoords=o,e[r]=t?rse(s,o):rse(o,s))}function wSe(n){return n.nodeName.toUpperCase()==="CANVAS"}var kot=/([&<>"'])/g,Cot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ll(n){return n==null?"":(n+"").replace(kot,function(e,t){return Cot[t]})}var Dot=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,MU=[],Iot=Tn.browser.firefox&&+Tn.browser.version.split(".")[0]<39;function qH(n,e,t,r){return t=t||{},r?ase(n,e,t):Iot&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):ase(n,e,t),t}function ase(n,e,t){if(Tn.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(wSe(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(GH(MU,n,r,i)){t.zrX=MU[0],t.zrY=MU[1];return}}t.zrX=t.zrY=0}function OY(n){return n||window.event}function ku(n,e,t){if(e=OY(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&qH(n,o,e,t)}else{qH(n,e,e,t);var a=Mot(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&Dot.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function Mot(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function WH(n,e,t,r){n.addEventListener(e,t,r)}function Pot(n,e,t,r){n.removeEventListener(e,t,r)}var Fg=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function ose(n){return n.which===2||n.which===3}var Oot=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,s=i.length;o<s;o++){var l=i[o],c=qH(r,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in PU)if(PU.hasOwnProperty(t)){var r=PU[t](this._track,e);if(r)return r}},n}();function sse(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function Rot(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var PU={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=sse(r)/sse(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=Rot(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:n[0].target,event:e}}}}};function Bc(){return[1,0,0,1,0,0]}function E5(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function RY(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Eg(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=l,n}function jf(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function sx(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],o=e[4],s=e[1],l=e[3],c=e[5],u=Math.sin(t),d=Math.cos(t);return n[0]=i*d+s*u,n[1]=-i*u+s*d,n[2]=a*d+l*u,n[3]=-a*u+d*l,n[4]=d*(o-r[0])+u*(c-r[1])+r[0],n[5]=d*(c-r[1])-u*(o-r[0])+r[1],n}function NY(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function VT(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=t*o-a*r;return l?(l=1/l,n[0]=o*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*s-o*i)*l,n[5]=(a*i-t*s)*l,n):null}function Not(n){var e=Bc();return RY(e,n),e}var tn=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}(),yO=Math.min,bO=Math.max,lb=new tn,cb=new tn,ub=new tn,db=new tn,ek=new tn,tk=new tn,an=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=yO(e.x,this.x),r=yO(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=bO(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=bO(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=Bc();return jf(a,a,[-t.x,-t.y]),NY(a,a,[r,i]),jf(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,h=!(a<l||c<i||s<u||d<o);if(t){var f=1/0,m=0,v=Math.abs(a-l),y=Math.abs(c-i),w=Math.abs(s-u),_=Math.abs(d-o),T=Math.min(v,y),A=Math.min(w,_);a<l||c<i?T>m&&(m=T,v<y?tn.set(tk,-v,0):tn.set(tk,y,0)):T<f&&(f=T,v<y?tn.set(ek,v,0):tn.set(ek,-y,0)),s<u||d<o?A>m&&(m=A,w<_?tn.set(tk,0,-w):tn.set(tk,0,_)):T<f&&(f=T,w<_?tn.set(ek,0,w):tn.set(ek,0,-_))}return t&&tn.copy(t,h?ek:tk),h},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*i+o,e.y=t.y*a+s,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}lb.x=ub.x=t.x,lb.y=db.y=t.y,cb.x=db.x=t.x+t.width,cb.y=ub.y=t.y+t.height,lb.transform(r),db.transform(r),cb.transform(r),ub.transform(r),e.x=yO(lb.x,cb.x,ub.x,db.x),e.y=yO(lb.y,cb.y,ub.y,db.y);var l=bO(lb.x,cb.x,ub.x,db.x),c=bO(lb.y,cb.y,ub.y,db.y);e.width=l-e.x,e.height=c-e.y},n}(),xSe="silent";function Lot(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:jot}}function jot(){Fg(this.event)}var Fot=function(n){gi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Xu),nk=function(){function n(e,t){this.x=e,this.y=t}return n}(),$ot=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],OU=new an(0,0,0,0),_Se=function(n){gi(e,n);function e(t,r,i,a,o){var s=n.call(this)||this;return s._hovered=new nk(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new Fot,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new _ot(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Z($ot,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=SSe(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new nk(r,i):this.findHover(r,i),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==s&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new nk(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=Lot(r,t,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),o=new nk(t,r);if(lse(a,o,t,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,c=l/2,u=new an(t-c,r-c,l,l),d=a.length-1;d>=0;d--){var h=a[d];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(OU.copy(h.getBoundingRect()),h.transform&&OU.applyTransform(h.transform),OU.intersect(u)&&s.push(h))}if(s.length)for(var f=4,m=Math.PI/12,v=Math.PI*2,y=0;y<c;y+=f)for(var w=0;w<v;w+=m){var _=t+y*Math.cos(w),T=r+y*Math.sin(w);if(lse(s,o,_,T,i),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new Oot);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;t.gestureEvent=o;var s=new nk;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(Xu);Z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){_Se.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=SSe(this,t,r),a,o;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),o=a.target),n==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(n==="mouseup")this._upEl=o;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||Gv(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function Bot(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?xSe:!0}return!1}function lse(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var o=n[a],s=void 0;if(o!==i&&!o.ignore&&(s=Bot(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==xSe)){e.target=o;break}}}function SSe(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var TSe=32,rk=7;function Uot(n){for(var e=0;n>=TSe;)e|=n&1,n>>=1;return n+e}function cse(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;Vot(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function Vot(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function use(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],o=e,s=r,l;o<s;)l=o+s>>>1,i(a,n[l])<0?s=l:o=l+1;var c=r-o;switch(c){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;c>0;)n[o+c]=n[o+c-1],c--}n[o]=a}}function RU(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])>0){for(s=r-i;l<s&&a(n,e[t+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(n,e[t+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])>0?o=u+1:l=u}return l}function NU(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])<0){for(s=i+1;l<s&&a(n,e[t+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}else{for(s=r-i;l<s&&a(n,e[t+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])<0?l=u:o=u+1}return l}function zot(n,e){var t=rk,r,i,a=0,o=[];r=[],i=[];function s(f,m){r[a]=f,i[a]=m,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;u(f)}}function c(){for(;a>1;){var f=a-2;f>0&&i[f-1]<i[f+1]&&f--,u(f)}}function u(f){var m=r[f],v=i[f],y=r[f+1],w=i[f+1];i[f]=v+w,f===a-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),a--;var _=NU(n[y],n,m,v,0,e);m+=_,v-=_,v!==0&&(w=RU(n[m+v-1],n,y,w,w-1,e),w!==0&&(v<=w?d(m,v,y,w):h(m,v,y,w)))}function d(f,m,v,y){var w=0;for(w=0;w<m;w++)o[w]=n[f+w];var _=0,T=v,A=f;if(n[A++]=n[T++],--y===0){for(w=0;w<m;w++)n[A+w]=o[_+w];return}if(m===1){for(w=0;w<y;w++)n[A+w]=n[T+w];n[A+y]=o[_];return}for(var C=t,k,M,P;;){k=0,M=0,P=!1;do if(e(n[T],o[_])<0){if(n[A++]=n[T++],M++,k=0,--y===0){P=!0;break}}else if(n[A++]=o[_++],k++,M=0,--m===1){P=!0;break}while((k|M)<C);if(P)break;do{if(k=NU(n[T],o,_,m,0,e),k!==0){for(w=0;w<k;w++)n[A+w]=o[_+w];if(A+=k,_+=k,m-=k,m<=1){P=!0;break}}if(n[A++]=n[T++],--y===0){P=!0;break}if(M=RU(o[_],n,T,y,0,e),M!==0){for(w=0;w<M;w++)n[A+w]=n[T+w];if(A+=M,T+=M,y-=M,y===0){P=!0;break}}if(n[A++]=o[_++],--m===1){P=!0;break}C--}while(k>=rk||M>=rk);if(P)break;C<0&&(C=0),C+=2}if(t=C,t<1&&(t=1),m===1){for(w=0;w<y;w++)n[A+w]=n[T+w];n[A+y]=o[_]}else{if(m===0)throw new Error;for(w=0;w<m;w++)n[A+w]=o[_+w]}}function h(f,m,v,y){var w=0;for(w=0;w<y;w++)o[w]=n[v+w];var _=f+m-1,T=y-1,A=v+y-1,C=0,k=0;if(n[A--]=n[_--],--m===0){for(C=A-(y-1),w=0;w<y;w++)n[C+w]=o[w];return}if(y===1){for(A-=m,_-=m,k=A+1,C=_+1,w=m-1;w>=0;w--)n[k+w]=n[C+w];n[A]=o[T];return}for(var M=t;;){var P=0,O=0,j=!1;do if(e(o[T],n[_])<0){if(n[A--]=n[_--],P++,O=0,--m===0){j=!0;break}}else if(n[A--]=o[T--],O++,P=0,--y===1){j=!0;break}while((P|O)<M);if(j)break;do{if(P=m-NU(o[T],n,f,m,m-1,e),P!==0){for(A-=P,_-=P,m-=P,k=A+1,C=_+1,w=P-1;w>=0;w--)n[k+w]=n[C+w];if(m===0){j=!0;break}}if(n[A--]=o[T--],--y===1){j=!0;break}if(O=y-RU(n[_],o,0,y,y-1,e),O!==0){for(A-=O,T-=O,y-=O,k=A+1,C=T+1,w=0;w<O;w++)n[k+w]=o[C+w];if(y<=1){j=!0;break}}if(n[A--]=n[_--],--m===0){j=!0;break}M--}while(P>=rk||O>=rk);if(j)break;M<0&&(M=0),M+=2}if(t=M,t<1&&(t=1),y===1){for(A-=m,_-=m,k=A+1,C=_+1,w=m-1;w>=0;w--)n[k+w]=n[C+w];n[A]=o[T]}else{if(y===0)throw new Error;for(C=A-(y-1),w=0;w<y;w++)n[C+w]=o[w]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function ZR(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<TSe){a=cse(n,t,r,e),use(n,t,r,t+a,e);return}var o=zot(n,e),s=Uot(i);do{if(a=cse(n,t,r,e),a<s){var l=i;l>s&&(l=s),use(n,t,t+l,t+a,e),a=l}o.pushRun(t,a),o.mergeRuns(),i-=a,t+=a}while(i!==0);o.forceMergeRuns()}}var Rc=1,Qk=2,$S=4,dse=!1;function LU(){dse||(dse=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function hse(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var Hot=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=hse}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,ZR(r,hse)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty|=Rc),this._updateAndAddDisplayable(c,t,r)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(LU(),u.z=0),isNaN(u.z2)&&(LU(),u.z2=0),isNaN(u.zlevel)&&(LU(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=dn(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),B2;B2=Tn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var DC={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-DC.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?DC.bounceIn(n*2)*.5:DC.bounceOut(n*2-1)*.5+.5}},wO=Math.pow,sy=Math.sqrt,U2=1e-8,ESe=1e-4,fse=sy(3),xO=1/3,gf=ox(),Pu=ox(),b1=ox();function Yv(n){return n>-U2&&n<U2}function ASe(n){return n>U2||n<-U2}function so(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function pse(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function V2(n,e,t,r,i,a){var o=r+3*(e-t)-n,s=3*(t-e*2+n),l=3*(e-n),c=n-i,u=s*s-3*o*l,d=s*l-9*o*c,h=l*l-3*s*c,f=0;if(Yv(u)&&Yv(d))if(Yv(s))a[0]=0;else{var m=-l/s;m>=0&&m<=1&&(a[f++]=m)}else{var v=d*d-4*u*h;if(Yv(v)){var y=d/u,m=-s/o+y,w=-y/2;m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w)}else if(v>0){var _=sy(v),T=u*s+1.5*o*(-d+_),A=u*s+1.5*o*(-d-_);T<0?T=-wO(-T,xO):T=wO(T,xO),A<0?A=-wO(-A,xO):A=wO(A,xO);var m=(-s-(T+A))/(3*o);m>=0&&m<=1&&(a[f++]=m)}else{var C=(2*u*s-3*o*d)/(2*sy(u*u*u)),k=Math.acos(C)/3,M=sy(u),P=Math.cos(k),m=(-s-2*M*P)/(3*o),w=(-s+M*(P+fse*Math.sin(k)))/(3*o),O=(-s+M*(P-fse*Math.sin(k)))/(3*o);m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w),O>=0&&O<=1&&(a[f++]=O)}}return f}function kSe(n,e,t,r,i){var a=6*t-12*e+6*n,o=9*e+3*r-3*n-9*t,s=3*e-3*n,l=0;if(Yv(o)){if(ASe(a)){var c=-s/a;c>=0&&c<=1&&(i[l++]=c)}}else{var u=a*a-4*o*s;if(Yv(u))i[0]=-a/(2*o);else if(u>0){var d=sy(u),c=(-a+d)/(2*o),h=(-a-d)/(2*o);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function xy(n,e,t,r,i,a){var o=(e-n)*i+n,s=(t-e)*i+e,l=(r-t)*i+t,c=(s-o)*i+o,u=(l-s)*i+s,d=(u-c)*i+c;a[0]=n,a[1]=o,a[2]=c,a[3]=d,a[4]=d,a[5]=u,a[6]=l,a[7]=r}function CSe(n,e,t,r,i,a,o,s,l,c,u){var d,h=.005,f=1/0,m,v,y,w;gf[0]=l,gf[1]=c;for(var _=0;_<1;_+=.05)Pu[0]=so(n,t,i,o,_),Pu[1]=so(e,r,a,s,_),y=xw(gf,Pu),y<f&&(d=_,f=y);f=1/0;for(var T=0;T<32&&!(h<ESe);T++)m=d-h,v=d+h,Pu[0]=so(n,t,i,o,m),Pu[1]=so(e,r,a,s,m),y=xw(Pu,gf),m>=0&&y<f?(d=m,f=y):(b1[0]=so(n,t,i,o,v),b1[1]=so(e,r,a,s,v),w=xw(b1,gf),v<=1&&w<f?(d=v,f=w):h*=.5);return u&&(u[0]=so(n,t,i,o,d),u[1]=so(e,r,a,s,d)),sy(f)}function Got(n,e,t,r,i,a,o,s,l){for(var c=n,u=e,d=0,h=1/l,f=1;f<=l;f++){var m=f*h,v=so(n,t,i,o,m),y=so(e,r,a,s,m),w=v-c,_=y-u;d+=Math.sqrt(w*w+_*_),c=v,u=y}return d}function Po(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function YH(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function qot(n,e,t,r,i){var a=n-2*e+t,o=2*(e-n),s=n-r,l=0;if(Yv(a)){if(ASe(o)){var c=-s/o;c>=0&&c<=1&&(i[l++]=c)}}else{var u=o*o-4*a*s;if(Yv(u)){var c=-o/(2*a);c>=0&&c<=1&&(i[l++]=c)}else if(u>0){var d=sy(u),c=(-o+d)/(2*a),h=(-o-d)/(2*a);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function DSe(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function iI(n,e,t,r,i){var a=(e-n)*r+n,o=(t-e)*r+e,s=(o-a)*r+a;i[0]=n,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=t}function ISe(n,e,t,r,i,a,o,s,l){var c,u=.005,d=1/0;gf[0]=o,gf[1]=s;for(var h=0;h<1;h+=.05){Pu[0]=Po(n,t,i,h),Pu[1]=Po(e,r,a,h);var f=xw(gf,Pu);f<d&&(c=h,d=f)}d=1/0;for(var m=0;m<32&&!(u<ESe);m++){var v=c-u,y=c+u;Pu[0]=Po(n,t,i,v),Pu[1]=Po(e,r,a,v);var f=xw(Pu,gf);if(v>=0&&f<d)c=v,d=f;else{b1[0]=Po(n,t,i,y),b1[1]=Po(e,r,a,y);var w=xw(b1,gf);y<=1&&w<d?(c=y,d=w):u*=.5}}return l&&(l[0]=Po(n,t,i,c),l[1]=Po(e,r,a,c)),sy(d)}function Wot(n,e,t,r,i,a,o){for(var s=n,l=e,c=0,u=1/o,d=1;d<=o;d++){var h=d*u,f=Po(n,t,i,h),m=Po(e,r,a,h),v=f-s,y=m-l;c+=Math.sqrt(v*v+y*y),s=f,l=m}return c}var Yot=/cubic-bezier\(([0-9,\.e ]+)\)/;function LY(n){var e=n&&Yot.exec(n);if(e){var t=e[1].split(","),r=+Zd(t[0]),i=+Zd(t[1]),a=+Zd(t[2]),o=+Zd(t[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:V2(0,r,a,1,l,s)&&so(0,i,o,1,s[0])}}}var Kot=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||pa,this.ondestroy=e.ondestroy||pa,this.onrestart=e.onrestart||pa,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Et(e)?e:DC[e]||LY(e)},n}(),MSe=function(){function n(e){this.value=e}return n}(),Xot=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new MSe(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),xM=function(){function n(e){this._list=new Xot,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new MSe(t),s.key=e,r.insertEntry(s),i[e]=s}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),gse={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function th(n){return n=Math.round(n),n<0?0:n>255?255:n}function Zot(n){return n=Math.round(n),n<0?0:n>360?360:n}function aI(n){return n<0?0:n>1?1:n}function jU(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?th(parseFloat(e)/100*255):th(parseInt(e,10))}function _w(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?aI(parseFloat(e)/100):aI(parseFloat(e))}function FU(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Kv(n,e,t){return n+(e-n)*t}function Eu(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function KH(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var PSe=new xM(20),_O=null;function tS(n,e){_O&&KH(_O,e),_O=PSe.put(n,_O||e.slice())}function Uc(n,e){if(n){e=e||[];var t=PSe.get(n);if(t)return KH(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in gse)return KH(e,gse[r]),tS(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Eu(e,0,0,0,1);return}return Eu(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),tS(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Eu(e,0,0,0,1);return}return Eu(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),tS(n,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),c=r.substr(o+1,s-(o+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Eu(e,+c[0],+c[1],+c[2],1):Eu(e,0,0,0,1);u=_w(c.pop());case"rgb":if(c.length>=3)return Eu(e,jU(c[0]),jU(c[1]),jU(c[2]),c.length===3?u:_w(c[3])),tS(n,e),e;Eu(e,0,0,0,1);return;case"hsla":if(c.length!==4){Eu(e,0,0,0,1);return}return c[3]=_w(c[3]),XH(c,e),tS(n,e),e;case"hsl":if(c.length!==3){Eu(e,0,0,0,1);return}return XH(c,e),tS(n,e),e;default:return}}Eu(e,0,0,0,1)}}function XH(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=_w(n[1]),i=_w(n[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],Eu(e,th(FU(o,a,t+1/3)*255),th(FU(o,a,t)*255),th(FU(o,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function Qot(n){if(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,s=(a+i)/2,l,c;if(o===0)l=0,c=0;else{s<.5?c=o/(a+i):c=o/(2-a-i);var u=((a-e)/6+o/2)/o,d=((a-t)/6+o/2)/o,h=((a-r)/6+o/2)/o;e===a?l=h-d:t===a?l=1/3+u-h:r===a&&(l=2/3+d-u),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,c,s];return n[3]!=null&&f.push(n[3]),f}}function ZH(n,e){var t=Uc(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return Ag(t,t.length===4?"rgba":"rgb")}}function $U(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){t=t||[];var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],l=r-i;return t[0]=th(Kv(o[0],s[0],l)),t[1]=th(Kv(o[1],s[1],l)),t[2]=th(Kv(o[2],s[2],l)),t[3]=aI(Kv(o[3],s[3],l)),t}}function Jot(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Uc(e[i]),s=Uc(e[a]),l=r-i,c=Ag([th(Kv(o[0],s[0],l)),th(Kv(o[1],s[1],l)),th(Kv(o[2],s[2],l)),aI(Kv(o[3],s[3],l))],"rgba");return t?{color:c,leftIndex:i,rightIndex:a,value:r}:c}}function IC(n,e,t,r){var i=Uc(n);if(n)return i=Qot(i),e!=null&&(i[0]=Zot(e)),t!=null&&(i[1]=_w(t)),r!=null&&(i[2]=_w(r)),Ag(XH(i),"rgba")}function z2(n,e){var t=Uc(n);if(t&&e!=null)return t[3]=aI(e),Ag(t,"rgba")}function Ag(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function H2(n,e){var t=Uc(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var mse=new xM(100);function QH(n){if(it(n)){var e=mse.get(n);return e||(e=ZH(n,-.1),mse.put(n,e)),e}else if(S5(n)){var t=Ie({},n);return t.colorStops=$e(n.colorStops,function(r){return{offset:r.offset,color:ZH(r.color,-.1)}}),t}return n}var G2=Math.round;function oI(n){var e;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var t=Uc(n);t&&(n="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:n,opacity:e??1}}var vse=1e-4;function Xv(n){return n<vse&&n>-vse}function SO(n){return G2(n*1e3)/1e3}function JH(n){return G2(n*1e4)/1e4}function est(n){return"matrix("+SO(n[0])+","+SO(n[1])+","+SO(n[2])+","+SO(n[3])+","+JH(n[4])+","+JH(n[5])+")"}var tst={left:"start",right:"end",center:"middle",middle:"middle"};function nst(n,e,t){return t==="top"?n+=e/2:t==="bottom"&&(n-=e/2),n}function rst(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function ist(n){var e=n.style,t=n.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function OSe(n){return n&&!!n.image}function ast(n){return n&&!!n.svgElement}function jY(n){return OSe(n)||ast(n)}function RSe(n){return n.type==="linear"}function NSe(n){return n.type==="radial"}function LSe(n){return n&&(n.type==="linear"||n.type==="radial")}function A5(n){return"url(#"+n+")"}function jSe(n){var e=n.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function FSe(n){var e=n.x||0,t=n.y||0,r=(n.rotation||0)*YR,i=Gt(n.scaleX,1),a=Gt(n.scaleY,1),o=n.skewX||0,s=n.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+G2(o*YR)+"deg, "+G2(s*YR)+"deg)"),l.join(" ")}var ost=function(){return Tn.hasGlobalWindow&&Et(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),e8=Array.prototype.slice;function rg(n,e,t){return(e-n)*t+n}function BU(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=rg(e[a],t[a],r);return n}function sst(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=rg(e[o][s],t[o][s],r)}return n}function TO(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function yse(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=e[o][s]+t[o][s]*r}return n}function lst(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function cst(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(t===1?i[l]:e8.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=i[l][u])}}function MC(n){if(Fs(n)){var e=n.length;if(Fs(n[0])){for(var t=[],r=0;r<e;r++)t.push(e8.call(n[r]));return t}return e8.call(n)}return n}function QR(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function ust(n){return Fs(n&&n[0])?2:1}var EO=0,JR=1,$Se=2,Jk=3,t8=4,n8=5,bse=6;function wse(n){return n===t8||n===n8}function AO(n){return n===JR||n===$Se}var ik=[0,0,0,0],dst=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=bse,l=t;if(Fs(t)){var c=ust(t);s=c,(c===1&&!Jn(t[0])||c===2&&!Jn(t[0][0]))&&(o=!0)}else if(Jn(t)&&!nI(t))s=EO;else if(it(t))if(!isNaN(+t))s=EO;else{var u=Uc(t);u&&(l=u,s=Jk)}else if(S5(t)){var d=Ie({},l);d.colorStops=$e(t.colorStops,function(f){return{offset:f.offset,color:Uc(f.color)}}),RSe(t)?s=t8:NSe(t)&&(s=n8),l=d}a===0?this.valType=s:(s!==this.valType||s===bse)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:l,rawValue:t,percent:0};return r&&(h.easing=r,h.easingFunc=Et(r)?r:DC[r]||LY(r)),i.push(h),h},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(v,y){return v.time-y.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=AO(i),c=wse(i),u=0;u<a;u++){var d=r[u],h=d.value,f=o.value;d.percent=d.time/e,s||(l&&u!==a-1?cst(h,f,i):c&&lst(h.colorStops,f.colorStops))}if(!s&&i!==n8&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var m=r[0].value,u=0;u<a;u++)i===EO?r[u].additiveValue=r[u].value-m:i===Jk?r[u].additiveValue=TO([],r[u].value,m,-1):AO(i)&&(r[u].additiveValue=i===JR?TO([],r[u].value,m,-1):yse([],r[u].value,m,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,c=a===Jk,u,d=this._lastFr,h=Math.min,f,m;if(s===1)f=m=o[0];else{if(t<0)u=0;else if(t<this._lastFrP){var v=h(d+1,s-1);for(u=v;u>=0&&!(o[u].percent<=t);u--);u=h(u,s-2)}else{for(u=d;u<s&&!(o[u].percent>t);u++);u=h(u-1,s-2)}m=o[u+1],f=o[u]}if(f&&m){this._lastFr=u,this._lastFrP=t;var y=m.percent-f.percent,w=y===0?1:h((t-f.percent)/y,1);m.easingFunc&&(w=m.easingFunc(w));var _=r?this._additiveValue:c?ik:e[l];if((AO(a)||c)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=w<1?f.rawValue:m.rawValue;else if(AO(a))a===JR?BU(_,f[i],m[i],w):sst(_,f[i],m[i],w);else if(wse(a)){var T=f[i],A=m[i],C=a===t8;e[l]={type:C?"linear":"radial",x:rg(T.x,A.x,w),y:rg(T.y,A.y,w),colorStops:$e(T.colorStops,function(M,P){var O=A.colorStops[P];return{offset:rg(M.offset,O.offset,w),color:QR(BU([],M.color,O.color,w))}}),global:A.global},C?(e[l].x2=rg(T.x2,A.x2,w),e[l].y2=rg(T.y2,A.y2,w)):e[l].r=rg(T.r,A.r,w)}else if(c)BU(_,f[i],m[i],w),r||(e[l]=QR(_));else{var k=rg(f[i],m[i],w);r?this._additiveValue=k:e[l]=k}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===EO?e[r]=e[r]+i:t===Jk?(Uc(e[r],ik),TO(ik,ik,i,1),e[r]=QR(ik)):t===JR?TO(e[r],e[r],i,1):t===$Se&&yse(e[r],e[r],i,1)},n}(),FY=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){DY("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,In(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new dst(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var d=u.keyframes,h=d[d.length-1];c=h&&h.value,u.valType===Jk&&c&&(c=QR(c))}else c=this._target[s];if(c==null)continue;e>0&&l.addKeyframe(0,MC(c),i),this._trackKeys.push(s)}l.addKeyframe(e,MC(t[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes,u=c.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=c[u-1];d&&(t._target[s.propName]=d.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new Kot({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var m=t._additiveAnimators;if(m){for(var v=!1,y=0;y<m.length;y++)if(m[y]._clip){v=!0;break}v||(t._additiveAnimators=null)}for(var y=0;y<r.length;y++)r[y].step(t._target,f);var w=t._onframeCbs;if(w)for(var y=0;y<w.length;y++)w[y](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return $e(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=MC(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||In(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();function ZS(){return new Date().getTime()}var hst=function(n){gi(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=ZS()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(B2(r),!t._paused&&t.update())}B2(r)},e.prototype.start=function(){this._running||(this._time=ZS(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=ZS(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=ZS()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new FY(t,r.loop);return this.addAnimator(i),i},e}(Xu),fst=300,UU=Tn.domSupported,VU=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=$e(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),xse={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},_se=!1;function r8(n){var e=n.pointerType;return e==="pen"||e==="touch"}function pst(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function zU(n){n&&(n.zrByTouch=!0)}function gst(n,e){return ku(n.dom,new mst(n,e),!0)}function BSe(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var mst=function(){function n(e,t){this.stopPropagation=pa,this.stopImmediatePropagation=pa,this.preventDefault=pa,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),Fd={mousedown:function(n){n=ku(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=ku(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=ku(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=ku(this.dom,n);var e=n.toElement||n.relatedTarget;BSe(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){_se=!0,n=ku(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){_se||(n=ku(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=ku(this.dom,n),zU(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Fd.mousemove.call(this,n),Fd.mousedown.call(this,n)},touchmove:function(n){n=ku(this.dom,n),zU(n),this.handler.processGesture(n,"change"),Fd.mousemove.call(this,n)},touchend:function(n){n=ku(this.dom,n),zU(n),this.handler.processGesture(n,"end"),Fd.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<fst&&Fd.click.call(this,n)},pointerdown:function(n){Fd.mousedown.call(this,n)},pointermove:function(n){r8(n)||Fd.mousemove.call(this,n)},pointerup:function(n){Fd.mouseup.call(this,n)},pointerout:function(n){r8(n)||Fd.mouseout.call(this,n)}};Z(["click","dblclick","contextmenu"],function(n){Fd[n]=function(e){e=ku(this.dom,e),this.trigger(n,e)}});var i8={pointermove:function(n){r8(n)||i8.mousemove.call(this,n)},pointerup:function(n){i8.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function vst(n,e){var t=e.domHandlers;Tn.pointerEventsSupported?Z(VU.pointer,function(r){eN(e,r,function(i){t[r].call(n,i)})}):(Tn.touchEventsSupported&&Z(VU.touch,function(r){eN(e,r,function(i){t[r].call(n,i),pst(e)})}),Z(VU.mouse,function(r){eN(e,r,function(i){i=OY(i),e.touching||t[r].call(n,i)})}))}function yst(n,e){Tn.pointerEventsSupported?Z(xse.pointer,t):Tn.touchEventsSupported||Z(xse.mouse,t);function t(r){function i(a){a=OY(a),BSe(n,a.target)||(a=gst(n,a),e.domHandlers[r].call(n,a))}eN(e,r,i,{capture:!0})}}function eN(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,WH(n.domTarget,e,t,r)}function HU(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&Pot(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var Sse=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),bst=function(n){gi(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new Sse(t,Fd),UU&&(i._globalHandlerScope=new Sse(document,i8)),vst(i,i._localHandlerScope),i}return e.prototype.dispose=function(){HU(this._localHandlerScope),UU&&HU(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,UU&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?yst(this,r):HU(r)}},e}(Xu),USe=1;Tn.hasGlobalWindow&&(USe=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var q2=USe,a8=.4,o8="#333",s8="#ccc",wst="#eee",Tse=E5,Ese=5e-5;function hb(n){return n>Ese||n<-Ese}var fb=[],nS=[],GU=Bc(),qU=Math.abs,pg=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return hb(this.rotation)||hb(this.x)||hb(this.y)||hb(this.scaleX-1)||hb(this.scaleY-1)||hb(this.skewX)||hb(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(Tse(r),this.invTransform=null);return}r=r||Bc(),t?this.getLocalTransform(r):Tse(r),e&&(t?Eg(r,e,r):RY(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(fb);var r=fb[0]<0?-1:1,i=fb[1]<0?-1:1,a=((fb[0]-r)*t+r)/fb[0]||0,o=((fb[1]-i)*t+i)/fb[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Bc(),VT(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Bc(),Eg(nS,e.invTransform,t),t=nS);var r=this.originX,i=this.originY;(r||i)&&(GU[4]=r,GU[5]=i,Eg(nS,t,GU),nS[4]-=r,nS[5]-=i,t=nS),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&ns(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&ns(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&qU(e[0]-1)>1e-10&&qU(e[3]-1)>1e-10?Math.sqrt(qU(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){VSe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,h=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var m=r+s,v=i+l;t[4]=-m*a-h*v*o,t[5]=-v*o-f*m*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=f*a,t[2]=h*o,c&&sx(t,t,c),t[4]+=r+u,t[5]+=i+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),Ff=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function VSe(n,e){for(var t=0;t<Ff.length;t++){var r=Ff[t];n[r]=e[r]}}var Ase={};function Vc(n,e){e=e||by;var t=Ase[e];t||(t=Ase[e]=new xM(500));var r=t.get(n);return r==null&&(r=wy.measureText(n,e).width,t.put(n,r)),r}function kse(n,e,t,r){var i=Vc(n,e),a=k5(e),o=eC(0,i,t),s=BS(0,a,r),l=new an(o,s,i,a);return l}function _M(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return kse(i[0],e,t,r);for(var o=new an(0,0,0,0),s=0;s<i.length;s++){var l=kse(i[s],e,t,r);s===0?o.copy(l):o.union(l)}return o}function eC(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function BS(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function k5(n){return Vc("国",n)}function sh(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function W2(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,l=t.x,c=t.y,u="left",d="top";if(r instanceof Array)l+=sh(r[0],t.width),c+=sh(r[1],t.height),u=null,d=null;else switch(r){case"left":l-=i,c+=s,u="right",d="middle";break;case"right":l+=i+o,c+=s,d="middle";break;case"top":l+=o/2,c-=i,u="center",d="bottom";break;case"bottom":l+=o/2,c+=a+i,u="center";break;case"inside":l+=o/2,c+=s,u="center",d="middle";break;case"insideLeft":l+=i,c+=s,d="middle";break;case"insideRight":l+=o-i,c+=s,u="right",d="middle";break;case"insideTop":l+=o/2,c+=i,u="center";break;case"insideBottom":l+=o/2,c+=a-i,u="center",d="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=o-i,c+=i,u="right";break;case"insideBottomLeft":l+=i,c+=a-i,d="bottom";break;case"insideBottomRight":l+=o-i,c+=a-i,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var WU="__zr_normal__",YU=Ff.concat(["ignore"]),xst=Lf(Ff,function(n,e){return n[e]=!0,n},{ignore:!1}),rS={},_st=new an(0,0,0,0),C5=function(){function n(e){this.id=mSe(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var c=!1;if(a.copyTransform(t),r.position!=null){var u=_st;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(rS,r,u):W2(rS,r,u),a.x=rS.x,a.y=rS.y,o=rS.align,s=rS.verticalAlign;var d=r.origin;if(d&&r.rotation!=null){var h=void 0,f=void 0;d==="center"?(h=u.width*.5,f=u.height*.5):(h=sh(d[0],u.width),f=sh(d[1],u.height)),c=!0,a.originX=-a.x+h+(i?0:u.x),a.originY=-a.y+f+(i?0:u.y)}}r.rotation!=null&&(a.rotation=r.rotation);var m=r.offset;m&&(a.x+=m[0],a.y+=m[1],c||(a.originX=-m[0],a.originY=-m[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,y=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),w=void 0,_=void 0,T=void 0;v&&this.canBeInsideText()?(w=r.insideFill,_=r.insideStroke,(w==null||w==="auto")&&(w=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(w),T=!0)):(w=r.outsideFill,_=r.outsideStroke,(w==null||w==="auto")&&(w=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(w),T=!0)),w=w||"#000",(w!==y.fill||_!==y.stroke||T!==y.autoStroke||o!==y.align||s!==y.verticalAlign)&&(l=!0,y.fill=w,y.stroke=_,y.autoStroke=T,y.align=o,y.verticalAlign=s,t.setDefaultTextStyle(y)),t.__dirty|=Rc,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?s8:o8},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Uc(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,Ag(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Ie(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(It(e))for(var r=e,i=In(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==WU)){var o=i.targetName,s=o?t[o]:t;i.saveTo(s)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,YU)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(WU,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===WU,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(dn(s,e)>=0&&(t||s.length===1))){var c;if(this.stateProxy&&!a&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!a){DY("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,h=this._textGuide;return d&&d.useState(e,t,r,u),h&&h.useState(e,t,r,u),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Rc),c}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&i.push(u)}var d=i[o-1],h=!!(d&&d.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),m=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&m&&m.duration>0,m);var v=this._textContent,y=this._textGuide;v&&v.useStates(e,t,h),y&&y.useStates(e,t,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Rc)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=dn(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=dn(i,e),o=dn(i,t)>=0;a>=0?o?i.splice(a,1):i[a]=t:r&&!o&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];Ie(t,a),a.textConfig&&(r=r||{},Ie(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,o){var s=!(t&&i);t&&t.textConfig?(this.textConfig=Ie({},i?this.textConfig:r.textConfig),Ie(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<YU.length;u++){var d=YU[u],h=a&&xst[d];t&&t[d]!=null?h?(c=!0,l[d]=t[d]):this[d]=t[d]:s&&r[d]!=null&&(h?(c=!0,l[d]=r[d]):this[d]=r[d])}if(!a)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],m=f.targetName;f.getLoop()||f.__changeFinalValue(m?(t||r)[m]:t||r)}c&&this._transitionState(e,l,o)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new pg,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Ie(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Rc;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new FY(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,o=dn(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){KU(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){KU(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=KU(this,t,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Rc;function t(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,c){Object.defineProperty(c,0,{get:function(){return l[a]},set:function(u){l[a]=u}}),Object.defineProperty(c,1,{get:function(){return l[o]},set:function(u){l[o]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Oa(C5,Xu);Oa(C5,pg);function KU(n,e,t,r,i){t=t||{};var a=[];zSe(n,"",n,e,t,r,a,i);var o=a.length,s=!1,l=t.done,c=t.aborted,u=function(){s=!0,o--,o<=0&&(s?l&&l():c&&c())},d=function(){o--,o<=0&&(s?l&&l():c&&c())};o||l&&l(),a.length>0&&t.during&&a[0].during(function(m,v){t.during(v)});for(var h=0;h<a.length;h++){var f=a[h];u&&f.done(u),d&&f.aborted(d),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function XU(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function Sst(n){return Fs(n[0])}function Tst(n,e,t){if(Fs(e[t]))if(Fs(n[t])||(n[t]=[]),Xl(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),XU(n[t],e[t],r))}else{var i=e[t],a=n[t],o=i.length;if(Sst(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?XU(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else XU(a,i,o);a.length=i.length}else n[t]=e[t]}function Est(n,e){return n===e||Fs(n)&&Fs(e)&&Ast(n,e)}function Ast(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function zSe(n,e,t,r,i,a,o,s){for(var l=In(r),c=i.duration,u=i.delay,d=i.additive,h=i.setToFinal,f=!It(a),m=n.animators,v=[],y=0;y<l.length;y++){var w=l[y],_=r[w];if(_!=null&&t[w]!=null&&(f||a[w]))if(It(_)&&!Fs(_)&&!S5(_)){if(e){s||(t[w]=_,n.updateDuringAnimation(e));continue}zSe(n,w,t[w],_,i,a&&a[w],o,s)}else v.push(w);else s||(t[w]=_,n.updateDuringAnimation(e),v.push(w))}var T=v.length;if(!d&&T)for(var A=0;A<m.length;A++){var C=m[A];if(C.targetName===e){var k=C.stopTracks(v);if(k){var M=dn(m,C);m.splice(M,1)}}}if(i.force||(v=gr(v,function(L){return!Est(r[L],t[L])}),T=v.length),T>0||i.force&&!o.length){var P=void 0,O=void 0,j=void 0;if(s){O={},h&&(P={});for(var A=0;A<T;A++){var w=v[A];O[w]=t[w],h?P[w]=r[w]:t[w]=r[w]}}else if(h){j={};for(var A=0;A<T;A++){var w=v[A];j[w]=MC(t[w]),Tst(t,r,w)}}var C=new FY(t,!1,!1,d?gr(m,function(B){return B.targetName===e}):null);C.targetName=e,i.scope&&(C.scope=i.scope),h&&P&&C.whenWithKeys(0,P,v),j&&C.whenWithKeys(0,j,v),C.whenWithKeys(c??500,s?O:r,v).delay(u||0),n.addAnimator(C,e),o.push(C)}}var Lt=function(n){gi(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=dn(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=dn(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new an(0,0,0,0),i=t||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(a);u?(an.applyTransform(r,c,u),o=o||r.clone(),o.union(r)):(o=o||c.clone(),o.union(c))}}return o||r},e}(C5);Lt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var tN={},HSe={};function kst(n){delete HSe[n]}function Cst(n){if(!n)return!1;if(typeof n=="string")return H2(n,1)<a8;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=H2(e[i].color,1);return t/=r,t<a8}return!1}var Dst=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new Hot,o=r.renderer||"canvas";tN[o]||(o=In(tN)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new tN[o](t,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var c=!Tn.node&&!Tn.worker&&!l?new bst(s.getViewportRoot(),s.root):null,u=r.useCoarsePointer,d=u==null||u==="auto"?Tn.touchEventsSupported:!!u,h=44,f;d&&(f=Gt(r.pointerSize,h)),this.handler=new _Se(a,s,c,s.root,f),this.animation=new hst({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=Cst(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=ZS();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=ZS();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Lt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,kst(this.id))},n}();function Cse(n,e){var t=new Dst(mSe(),n,e);return HSe[t.id]=t,t}function Ist(n,e){tN[n]=e}var l8;function Mst(n){if(typeof l8=="function")return l8(n)}function Pst(n){l8=n}var Dse=1e-4,GSe=20;function Ost(n){return n.replace(/^\s+|\s+$/g,"")}function yr(n,e,t,r){var i=e[0],a=e[1],o=t[0],s=t[1],l=a-i,c=s-o;if(l===0)return c===0?o:(o+s)/2;if(r)if(l>0){if(n<=i)return o;if(n>=a)return s}else{if(n>=i)return o;if(n<=a)return s}else{if(n===i)return o;if(n===a)return s}return(n-i)/l*c+o}function Ze(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return it(n)?Ost(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function na(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),GSe),n=(+n).toFixed(e),t?n:+n}function Bu(n){return n.sort(function(e,t){return e-t}),n}function xf(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return Rst(n)}function Rst(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function qSe(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function Nst(n,e){var t=Lf(n,function(f,m){return f+(isNaN(m)?0:m)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=$e(n,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,o=$e(i,function(f){return Math.floor(f)}),s=Lf(o,function(f,m){return f+m},0),l=$e(i,function(f,m){return f-o[m]});s<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],u=d);++o[u],l[u]=0,++s}return $e(o,function(f){return f/r})}function Lst(n,e){var t=Math.max(xf(n),xf(e)),r=n+e;return t>GSe?r:na(r,t)}var Ise=9007199254740991;function WSe(n){var e=Math.PI*2;return(n%e+e)%e}function sI(n){return n>-Dse&&n<Dse}var jst=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function $f(n){if(n instanceof Date)return n;if(it(n)){var e=jst.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function Fst(n){return Math.pow(10,$Y(n))}function $Y(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function YSe(n,e){var t=$Y(n),r=Math.pow(10,t),i=n/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function ZU(n,e){var t=(n.length-1)*e+1,r=Math.floor(t),i=+n[r-1],a=t-r;return a?i+a*(n[r]-i):i}function Mse(n){n.sort(function(l,c){return s(l,c,0)?-1:1});for(var e=-1/0,t=1,r=0;r<n.length;){for(var i=n[r].interval,a=n[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-t),e=i[o],t=a[o];i[0]===i[1]&&a[0]*a[1]!==1?n.splice(r,1):r++}return n;function s(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&s(l,c,1))}}function $g(n){var e=parseFloat(n);return e==n&&(e!==0||!it(n)||n.indexOf("x")<=0)?e:NaN}function KSe(n){return!isNaN($g(n))}function XSe(){return Math.round(Math.random()*9)}function ZSe(n,e){return e===0?n:ZSe(e,n%e)}function Pse(n,e){return n==null?e:e==null?n:n*e/ZSe(n,e)}function fr(n){throw new Error(n)}function Ose(n,e,t){return(e-n)*t+n}var QSe="series\0",JSe="\0_ec_\0";function Or(n){return n instanceof Array?n:n==null?[]:[n]}function Gw(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var Rse=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function zT(n){return It(n)&&!Fe(n)&&!(n instanceof Date)?n.value:n}function $st(n){return It(n)&&!(n instanceof Array)}function e1e(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var o=pt();Z(e,function(l,c){if(!It(l)){e[c]=null;return}});var s=Bst(n,o,t);return(r||i)&&Ust(s,n,o,e),r&&Vst(s,e),r||i?zst(s,e,i):a&&Hst(s,e),Gst(s),s}function Bst(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||lI(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function Ust(n,e,t,r){Z(r,function(i,a){if(!(!i||i.id==null)){var o=PC(i.id),s=t.get(o);if(s!=null){var l=n[s];vl(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],r[a]=null}}})}function Vst(n,e){Z(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!lI(t)&&!lI(a)&&t1e("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function zst(n,e,t){Z(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||lI(i.existing)||i.existing&&r.id!=null&&!t1e("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function Hst(n,e){Z(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function Gst(n){var e=pt();Z(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),Z(n,function(t){var r=t.newOption;vl(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),Z(n,function(t,r){var i=t.existing,a=t.newOption,o=t.keyInfo;if(It(a)){if(o.name=a.name!=null?PC(a.name):i?i.name:QSe+r,i)o.id=PC(i.id);else if(a.id!=null)o.id=PC(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function t1e(n,e,t){var r=Ya(e[n],null),i=Ya(t[n],null);return r!=null&&i!=null&&r===i}function PC(n){return Ya(n,"")}function Ya(n,e){return n==null?e:it(n)?n:Jn(n)||$H(n)?n+"":e}function BY(n){var e=n.name;return!!(e&&e.indexOf(QSe))}function lI(n){return n&&n.id!=null&&PC(n.id).indexOf(JSe)===0}function qst(n){return JSe+n}function Wst(n,e,t){Z(n,function(r){var i=r.newOption;It(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=Yst(e,i,r.existing,t))})}function Yst(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function Kst(n,e){var t={},r={};return i(n||[],t),i(e||[],r,t),[a(t),a(r)];function i(o,s,l){for(var c=0,u=o.length;c<u;c++){var d=Ya(o[c].seriesId,null);if(d==null)return;for(var h=Or(o[c].dataIndex),f=l&&l[d],m=0,v=h.length;m<v;m++){var y=h[m];f&&f[y]?f[y]=null:(s[d]||(s[d]={}))[y]=1}}}function a(o,s){var l=[];for(var c in o)if(o.hasOwnProperty(c)&&o[c]!=null)if(s)l.push(+c);else{var u=a(o[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function qw(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Fe(e.dataIndex)?$e(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Fe(e.name)?$e(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Gn(){var n="__ec_inner_"+Xst++;return function(e){return e[n]||(e[n]={})}}var Xst=XSe();function OC(n,e,t){var r=UY(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(c,u){var d=SM(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[u+"Models"]=d.models,s[u+"Model"]=d.models[0]}),s}function UY(n,e){var t;if(it(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=pt(),a={},o=!1;return Z(t,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&dn(e.includeMainTypes,u)<0)){o=o||!!u;var h=i.get(u)||i.set(u,{});h[d]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Ma={useDefault:!0,enableAll:!1,enableNone:!1},Zst={useDefault:!1,enableAll:!0,enableNone:!0};function SM(n,e,t,r){r=r||Ma;var i=t.index,a=t.id,o=t.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(vl(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(vl(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=n.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function n1e(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function Qst(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function Jst(n){return n==="auto"?Tn.domSupported?"html":"richText":n||"html"}function c8(n,e){var t=pt(),r=[];return Z(n,function(i){var a=e(i);(t.get(a)||(r.push(a),t.set(a,[]))).push(i)}),{keys:r,buckets:t}}function r1e(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(Jn(r)){var o=Ose(t||0,r,i);return na(o,a?Math.max(xf(t||0),xf(r)):e)}else{if(it(r))return i<1?t:r;for(var s=[],l=t,c=r,u=Math.max(l?l.length:0,c.length),d=0;d<u;++d){var h=n.getDimensionInfo(d);if(h&&h.type==="ordinal")s[d]=(i<1&&l?l:c)[d];else{var f=l&&l[d]?l[d]:0,m=c[d],o=Ose(f,m,i);s[d]=na(o,a?Math.max(xf(f),xf(m)):e)}}return s}}var elt=".",pb="___EC__COMPONENT__CONTAINER___",i1e="___EC__EXTENDED_CLASS___";function _f(n){var e={main:"",sub:""};if(n){var t=n.split(elt);e.main=t[0]||"",e.sub=t[1]||""}return e}function tlt(n){vl(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function nlt(n){return!!(n&&n[i1e])}function VY(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return rlt(r)?i=function(a){_e(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},dot(i,this)),Ie(i.prototype,t),i[i1e]=!0,i.extend=this.extend,i.superCall=olt,i.superApply=slt,i.superClass=r,i}}function rlt(n){return Et(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function a1e(n,e){n.extend=e.extend}var ilt=Math.round(Math.random()*10);function alt(n){var e=["__\0is_clz",ilt++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function olt(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function slt(n,e,t){return this.superClass.prototype[e].apply(n,t)}function D5(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){tlt(i),r.prototype.type=i;var a=_f(i);if(!a.sub)e[a.main]=r;else if(a.sub!==pb){var o=t(a);o[a.sub]=r}}return r},n.getClass=function(r,i,a){var o=e[r];if(o&&o[pb]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},n.getClassesByMainType=function(r){var i=_f(r),a=[],o=e[i.main];return o&&o[pb]?Z(o,function(s,l){l!==pb&&a.push(s)}):a.push(o),a},n.hasClass=function(r){var i=_f(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return Z(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=_f(r),a=e[i.main];return a&&a[pb]};function t(r){var i=e[r.main];return(!i||!i[pb])&&(i=e[r.main]={},i[pb]=!0),i}}function Ww(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<n.length;s++){var l=n[s][1];if(!(i&&dn(i,l)>=0||a&&dn(a,l)<0)){var c=r.getShallow(l,e);c!=null&&(o[n[s][0]]=c)}}return o}}var llt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],clt=Ww(llt),ult=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return clt(this,e,t)},n}(),u8=new xM(50);function dlt(n){if(typeof n=="string"){var e=u8.get(n);return e&&e.image}else return n}function zY(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=u8.get(n),o={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!I5(e)&&a.pending.push(o)):(e=wy.loadImage(n,Nse,Nse),e.__zrImageSrc=n,u8.put(n,e.__cachedImgObj={image:e,pending:[o]})),e}else return n;else return e}function Nse(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function I5(n){return n&&n.width&&n.height}var QU=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function hlt(n,e,t,r,i,a){if(!t){n.text="",n.isTruncated=!1;return}var o=(e+"").split(`
`);a=o1e(t,r,i,a);for(var s=!1,l={},c=0,u=o.length;c<u;c++)s1e(l,o[c],a),o[c]=l.textLine,s=s||l.isTruncated;n.text=o.join(`
`),n.isTruncated=s}function o1e(n,e,t,r){r=r||{};var i=Ie({},r);i.font=e,t=Gt(t,"..."),i.maxIterations=Gt(r.maxIterations,2);var a=i.minChar=Gt(r.minChar,0);i.cnCharWidth=Vc("国",e);var o=i.ascCharWidth=Vc("a",e);i.placeholder=Gt(r.placeholder,"");for(var s=n=Math.max(0,n-1),l=0;l<a&&s>=o;l++)s-=o;var c=Vc(t,e);return c>s&&(t="",c=0),s=n-c,i.ellipsis=t,i.ellipsisWidth=c,i.contentWidth=s,i.containerWidth=n,i}function s1e(n,e,t){var r=t.containerWidth,i=t.font,a=t.contentWidth;if(!r){n.textLine="",n.isTruncated=!1;return}var o=Vc(e,i);if(o<=r){n.textLine=e,n.isTruncated=!1;return}for(var s=0;;s++){if(o<=a||s>=t.maxIterations){e+=t.ellipsis;break}var l=s===0?flt(e,a,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*a/o):0;e=e.substr(0,l),o=Vc(e,i)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function flt(n,e,t,r){for(var i=0,a=0,o=n.length;a<o&&i<e;a++){var s=n.charCodeAt(a);i+=0<=s&&s<=127?t:r}return a}function plt(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",o=k5(i),s=Gt(e.lineHeight,o),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,d=e.width,h;d!=null&&(t==="break"||t==="breakAll")?h=n?l1e(n,e.font,d,t==="breakAll",0).lines:[]:h=n?n.split(`
`):[];var f=h.length*s,m=Gt(e.height,f);if(f>m&&c){var v=Math.floor(m/s);u=u||h.length>v,h=h.slice(0,v)}if(n&&a&&d!=null)for(var y=o1e(d,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),w={},_=0;_<h.length;_++)s1e(w,h[_],y),h[_]=w.textLine,u=u||w.isTruncated;for(var T=m,A=0,_=0;_<h.length;_++)A=Math.max(Vc(h[_],i),A);d==null&&(d=A);var C=A;return r&&(T+=r[0]+r[2],C+=r[1]+r[3],d+=r[1]+r[3]),l&&(C=d),{lines:h,height:m,outerWidth:C,outerHeight:T,lineHeight:s,calculatedLineHeight:o,contentWidth:A,contentHeight:f,width:d,isTruncated:u}}var glt=function(){function n(){}return n}(),Lse=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),mlt=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function vlt(n,e){var t=new mlt;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=QU.lastIndex=0,l;(l=QU.exec(n))!=null;){var c=l.index;c>s&&JU(t,n.substring(s,c),e,o),JU(t,l[2],e,o,l[1]),s=QU.lastIndex}s<n.length&&JU(t,n.substring(s,n.length),e,o);var u=[],d=0,h=0,f=e.padding,m=a==="truncate",v=e.lineOverflow==="truncate",y={};function w(z,ae,le){z.width=ae,z.lineHeight=le,d+=le,h=Math.max(h,ae)}e:for(var _=0;_<t.lines.length;_++){for(var T=t.lines[_],A=0,C=0,k=0;k<T.tokens.length;k++){var M=T.tokens[k],P=M.styleName&&e.rich[M.styleName]||{},O=M.textPadding=P.padding,j=O?O[1]+O[3]:0,L=M.font=P.font||e.font;M.contentHeight=k5(L);var B=Gt(P.height,M.contentHeight);if(M.innerHeight=B,O&&(B+=O[0]+O[2]),M.height=B,M.lineHeight=Df(P.lineHeight,e.lineHeight,B),M.align=P&&P.align||e.align,M.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&d+M.lineHeight>i){var $=t.lines.length;k>0?(T.tokens=T.tokens.slice(0,k),w(T,C,A),t.lines=t.lines.slice(0,_+1)):t.lines=t.lines.slice(0,_),t.isTruncated=t.isTruncated||t.lines.length<$;break e}var Y=P.width,G=Y==null||Y==="auto";if(typeof Y=="string"&&Y.charAt(Y.length-1)==="%")M.percentWidth=Y,u.push(M),M.contentWidth=Vc(M.text,L);else{if(G){var W=P.backgroundColor,X=W&&W.image;X&&(X=dlt(X),I5(X)&&(M.width=Math.max(M.width,X.width*B/X.height)))}var te=m&&r!=null?r-C:null;te!=null&&te<M.width?!G||te<j?(M.text="",M.width=M.contentWidth=0):(hlt(y,M.text,te-j,L,e.ellipsis,{minChar:e.truncateMinChar}),M.text=y.text,t.isTruncated=t.isTruncated||y.isTruncated,M.width=M.contentWidth=Vc(M.text,L)):M.contentWidth=Vc(M.text,L)}M.width+=j,C+=M.width,P&&(A=Math.max(A,M.lineHeight))}w(T,C,A)}t.outerWidth=t.width=Gt(r,h),t.outerHeight=t.height=Gt(i,d),t.contentHeight=d,t.contentWidth=h,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var _=0;_<u.length;_++){var M=u[_],re=M.percentWidth;M.width=parseInt(re,10)/100*t.width}return t}function JU(n,e,t,r,i){var a=e==="",o=i&&t.rich[i]||{},s=n.lines,l=o.font||t.font,c=!1,u,d;if(r){var h=o.padding,f=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var m=sh(o.width,r.width)+f;s.length>0&&m+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=m}else{var v=l1e(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+f,d=v.linesWidths,u=v.lines}}else u=e.split(`
`);for(var y=0;y<u.length;y++){var w=u[y],_=new glt;if(_.styleName=i,_.text=w,_.isLineHolder=!w&&!a,typeof o.width=="number"?_.width=o.width:_.width=d?d[y]:Vc(w,l),!y&&!c){var T=(s[s.length-1]||(s[0]=new Lse)).tokens,A=T.length;A===1&&T[0].isLineHolder?T[0]=_:(w||!A||a)&&T.push(_)}else s.push(new Lse([_]))}}function ylt(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var blt=Lf(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function wlt(n){return ylt(n)?!!blt[n]:!0}function l1e(n,e,t,r,i){for(var a=[],o=[],s="",l="",c=0,u=0,d=0;d<n.length;d++){var h=n.charAt(d);if(h===`
`){l&&(s+=l,u+=c),a.push(s),o.push(u),s="",l="",c=0,u=0;continue}var f=Vc(h,e),m=r?!1:!wlt(h);if(a.length?u+f>t:i+u+f>t){u?(s||l)&&(m?(s||(s=l,l="",c=0,u=c),a.push(s),o.push(u-c),l+=h,c+=f,s="",u=c):(l&&(s+=l,l="",c=0),a.push(s),o.push(u),s=h,u=f)):m?(a.push(l),o.push(c),l=h,c=f):(a.push(h),o.push(f));continue}u+=f,m?(l+=h,c+=f):(l&&(s+=l,l="",c=0),s+=h)}return!a.length&&!s&&(s=n,l="",c=0),l&&(s+=l),s&&(a.push(s),o.push(u)),a.length===1&&(u+=i),{accumWidth:u,lines:a,linesWidths:o}}var d8="__zr_style_"+Math.round(Math.random()*10),Sw={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},M5={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Sw[d8]=!0;var jse=["z","z2","invisible"],xlt=["invisible"],Yu=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=In(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&_lt(this,t,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new an(0,0,0,0)),r?an.applyTransform(t,i,r):t.copy(i),(o||s||l)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(l),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+l-o));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new an(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Ie(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Qk,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Qk)},e.prototype.styleUpdated=function(){this.__dirty&=~Qk},e.prototype.createStyle=function(t){return T5(Sw,t)},e.prototype.useStyle=function(t){t[d8]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[d8]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,jse)},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.style?o?a?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(o){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=In(u),h=0;h<d.length;h++){var f=d[h];f in c&&(c[f]=c[f],this.style[f]=u[f])}for(var m=In(c),h=0;h<m.length;h++){var f=m[h];this.style[f]=this.style[f]}this._transitionState(t,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var v=this.__inHover?xlt:jse,h=0;h<v.length;h++){var f=v[h];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return Ie(t,r),t},e.prototype.getAnimationStyleProps=function(){return M5},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Rc|Qk}(),e}(C5),e6=new an(0,0,0,0),t6=new an(0,0,0,0);function _lt(n,e,t){return e6.copy(n.getBoundingRect()),n.transform&&e6.applyTransform(n.transform),t6.width=e,t6.height=t,!e6.intersect(t6)}var zl=Math.min,Hl=Math.max,n6=Math.sin,r6=Math.cos,gb=Math.PI*2,kO=ox(),CO=ox(),DO=ox();function P5(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<n.length;l++)r=n[l],i=zl(i,r[0]),a=Hl(a,r[0]),o=zl(o,r[1]),s=Hl(s,r[1]);e[0]=i,e[1]=o,t[0]=a,t[1]=s}}function Fse(n,e,t,r,i,a){i[0]=zl(n,t),i[1]=zl(e,r),a[0]=Hl(n,t),a[1]=Hl(e,r)}var $se=[],Bse=[];function Slt(n,e,t,r,i,a,o,s,l,c){var u=kSe,d=so,h=u(n,t,i,o,$se);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<h;f++){var m=d(n,t,i,o,$se[f]);l[0]=zl(m,l[0]),c[0]=Hl(m,c[0])}h=u(e,r,a,s,Bse);for(var f=0;f<h;f++){var v=d(e,r,a,s,Bse[f]);l[1]=zl(v,l[1]),c[1]=Hl(v,c[1])}l[0]=zl(n,l[0]),c[0]=Hl(n,c[0]),l[0]=zl(o,l[0]),c[0]=Hl(o,c[0]),l[1]=zl(e,l[1]),c[1]=Hl(e,c[1]),l[1]=zl(s,l[1]),c[1]=Hl(s,c[1])}function Tlt(n,e,t,r,i,a,o,s){var l=DSe,c=Po,u=Hl(zl(l(n,t,i),1),0),d=Hl(zl(l(e,r,a),1),0),h=c(n,t,i,u),f=c(e,r,a,d);o[0]=zl(n,i,h),o[1]=zl(e,a,f),s[0]=Hl(n,i,h),s[1]=Hl(e,a,f)}function Elt(n,e,t,r,i,a,o,s,l){var c=qv,u=Wv,d=Math.abs(i-a);if(d%gb<1e-4&&d>1e-4){s[0]=n-t,s[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(kO[0]=r6(i)*t+n,kO[1]=n6(i)*r+e,CO[0]=r6(a)*t+n,CO[1]=n6(a)*r+e,c(s,kO,CO),u(l,kO,CO),i=i%gb,i<0&&(i=i+gb),a=a%gb,a<0&&(a=a+gb),i>a&&!o?a+=gb:i<a&&o&&(i+=gb),o){var h=a;a=i,i=h}for(var f=0;f<a;f+=Math.PI/2)f>i&&(DO[0]=r6(f)*t+n,DO[1]=n6(f)*r+e,c(s,DO,s),u(l,DO,l))}var Yr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},mb=[],vb=[],ef=[],xv=[],tf=[],nf=[],i6=Math.min,a6=Math.max,yb=Math.cos,bb=Math.sin,Zp=Math.abs,h8=Math.PI,Pv=h8*2,o6=typeof Float32Array<"u",ak=[];function s6(n){var e=Math.round(n/h8*1e8)/1e8;return e%2*h8}function HY(n,e){var t=s6(n[0]);t<0&&(t+=Pv);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Pv?i=t+Pv:e&&t-i>=Pv?i=t-Pv:!e&&t>i?i=t+(Pv-s6(t-i)):e&&t<i&&(i=t-(Pv-s6(i-t))),n[0]=t,n[1]=i}var Bf=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Zp(r/q2/e)||0,this._uy=Zp(r/q2/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Yr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Zp(e-this._xi),i=Zp(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Yr.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){return this._drawPendingPt(),this.addData(Yr.C,e,t,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,o),this._xi=a,this._yi=o,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(Yr.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,o){this._drawPendingPt(),ak[0]=i,ak[1]=a,HY(ak,o),i=ak[0],a=ak[1];var s=a-i;return this.addData(Yr.A,e,t,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,o),this._xi=yb(a)*r+e,this._yi=bb(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(Yr.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Yr.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&o6&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();o6&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},n.prototype.addData=function(e,t,r,i,a,o,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,o6&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){ef[0]=ef[1]=tf[0]=tf[1]=Number.MAX_VALUE,xv[0]=xv[1]=nf[0]=nf[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(t=e[o],r=e[o+1],i=t,a=r),s){case Yr.M:t=i=e[o++],r=a=e[o++],tf[0]=i,tf[1]=a,nf[0]=i,nf[1]=a;break;case Yr.L:Fse(t,r,e[o],e[o+1],tf,nf),t=e[o++],r=e[o++];break;case Yr.C:Slt(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],tf,nf),t=e[o++],r=e[o++];break;case Yr.Q:Tlt(t,r,e[o++],e[o++],e[o],e[o+1],tf,nf),t=e[o++],r=e[o++];break;case Yr.A:var c=e[o++],u=e[o++],d=e[o++],h=e[o++],f=e[o++],m=e[o++]+f;o+=1;var v=!e[o++];l&&(i=yb(f)*d+c,a=bb(f)*h+u),Elt(c,u,d,h,f,m,v,tf,nf),t=yb(m)*d+c,r=bb(m)*h+u;break;case Yr.R:i=t=e[o++],a=r=e[o++];var y=e[o++],w=e[o++];Fse(i,a,i+y,a+w,tf,nf);break;case Yr.Z:t=i,r=a;break}qv(ef,ef,tf),Wv(xv,xv,nf)}return o===0&&(ef[0]=ef[1]=xv[0]=xv[1]=0),new an(ef[0],ef[1],xv[0]-ef[0],xv[1]-ef[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,h=0;h<t;){var f=e[h++],m=h===1;m&&(a=e[h],o=e[h+1],s=a,l=o);var v=-1;switch(f){case Yr.M:a=s=e[h++],o=l=e[h++];break;case Yr.L:{var y=e[h++],w=e[h++],_=y-a,T=w-o;(Zp(_)>r||Zp(T)>i||h===t-1)&&(v=Math.sqrt(_*_+T*T),a=y,o=w);break}case Yr.C:{var A=e[h++],C=e[h++],y=e[h++],w=e[h++],k=e[h++],M=e[h++];v=Got(a,o,A,C,y,w,k,M,10),a=k,o=M;break}case Yr.Q:{var A=e[h++],C=e[h++],y=e[h++],w=e[h++];v=Wot(a,o,A,C,y,w,10),a=y,o=w;break}case Yr.A:var P=e[h++],O=e[h++],j=e[h++],L=e[h++],B=e[h++],$=e[h++],Y=$+B;h+=1,m&&(s=yb(B)*j+P,l=bb(B)*L+O),v=a6(j,L)*i6(Pv,Math.abs($)),a=yb(Y)*j+P,o=bb(Y)*L+O;break;case Yr.R:{s=a=e[h++],l=o=e[h++];var G=e[h++],W=e[h++];v=G*2+W*2;break}case Yr.Z:{var _=s-a,T=l-o;v=Math.sqrt(_*_+T*T),a=s,o=l;break}}v>=0&&(c[d++]=v,u+=v)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,c,u,d,h,f=t<1,m,v,y=0,w=0,_,T=0,A,C;if(!(f&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,v=this._pathLen,_=t*v,!_)))e:for(var k=0;k<o;){var M=r[k++],P=k===1;switch(P&&(c=r[k],u=r[k+1],s=c,l=u),M!==Yr.L&&T>0&&(e.lineTo(A,C),T=0),M){case Yr.M:s=c=r[k++],l=u=r[k++],e.moveTo(c,u);break;case Yr.L:{d=r[k++],h=r[k++];var O=Zp(d-c),j=Zp(h-u);if(O>i||j>a){if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;e.lineTo(c*(1-B)+d*B,u*(1-B)+h*B);break e}y+=L}e.lineTo(d,h),c=d,u=h,T=0}else{var $=O*O+j*j;$>T&&(A=d,C=h,T=$)}break}case Yr.C:{var Y=r[k++],G=r[k++],W=r[k++],X=r[k++],te=r[k++],re=r[k++];if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;xy(c,Y,W,te,B,mb),xy(u,G,X,re,B,vb),e.bezierCurveTo(mb[1],vb[1],mb[2],vb[2],mb[3],vb[3]);break e}y+=L}e.bezierCurveTo(Y,G,W,X,te,re),c=te,u=re;break}case Yr.Q:{var Y=r[k++],G=r[k++],W=r[k++],X=r[k++];if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;iI(c,Y,W,B,mb),iI(u,G,X,B,vb),e.quadraticCurveTo(mb[1],vb[1],mb[2],vb[2]);break e}y+=L}e.quadraticCurveTo(Y,G,W,X),c=W,u=X;break}case Yr.A:var z=r[k++],ae=r[k++],le=r[k++],ee=r[k++],ye=r[k++],fe=r[k++],Ce=r[k++],at=!r[k++],Le=le>ee?le:ee,we=Zp(le-ee)>.001,be=ye+fe,ge=!1;if(f){var L=m[w++];y+L>_&&(be=ye+fe*(_-y)/L,ge=!0),y+=L}if(we&&e.ellipse?e.ellipse(z,ae,le,ee,Ce,ye,be,at):e.arc(z,ae,Le,ye,be,at),ge)break e;P&&(s=yb(ye)*le+z,l=bb(ye)*ee+ae),c=yb(be)*le+z,u=bb(be)*ee+ae;break;case Yr.R:s=c=r[k],l=u=r[k+1],d=r[k++],h=r[k++];var he=r[k++],Ge=r[k++];if(f){var L=m[w++];if(y+L>_){var je=_-y;e.moveTo(d,h),e.lineTo(d+i6(je,he),h),je-=he,je>0&&e.lineTo(d+he,h+i6(je,Ge)),je-=Ge,je>0&&e.lineTo(d+a6(he-je,0),h+Ge),je-=he,je>0&&e.lineTo(d,h+a6(Ge-je,0));break e}y+=L}e.rect(d,h,he,Ge);break;case Yr.Z:if(f){var L=m[w++];if(y+L>_){var B=(_-y)/L;e.lineTo(c*(1-B)+s*B,u*(1-B)+l*B);break e}y+=L}e.closePath(),c=s,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=Yr,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function Lv(n,e,t,r,i,a,o){if(i===0)return!1;var s=i,l=0,c=n;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>n+s&&a>t+s||a<n-s&&a<t-s)return!1;if(n!==t)l=(e-r)/(n-t),c=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=s/2;var u=l*a-o+c,d=u*u/(l*l+1);return d<=s/2*s/2}function Alt(n,e,t,r,i,a,o,s,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>r+d&&u>a+d&&u>s+d||u<e-d&&u<r-d&&u<a-d&&u<s-d||c>n+d&&c>t+d&&c>i+d&&c>o+d||c<n-d&&c<t-d&&c<i-d&&c<o-d)return!1;var h=CSe(n,e,t,r,i,a,o,s,c,u,null);return h<=d/2}function c1e(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;if(l>e+c&&l>r+c&&l>a+c||l<e-c&&l<r-c&&l<a-c||s>n+c&&s>t+c&&s>i+c||s<n-c&&s<t-c&&s<i-c)return!1;var u=ISe(n,e,t,r,i,a,s,l,null);return u<=c/2}var Use=Math.PI*2;function jc(n){return n%=Use,n<0&&(n+=Use),n}var ok=Math.PI*2;function klt(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;s-=n,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(r-i)%ok<1e-4)return!0;if(a){var d=r;r=jc(i),i=jc(d)}else r=jc(r),i=jc(i);r>i&&(i+=ok);var h=Math.atan2(l,s);return h<0&&(h+=ok),h>=r&&h<=i||h+ok>=r&&h+ok<=i}function ig(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(t-n)+n;return l===i?1/0:l>i?s:0}var _v=Bf.CMD,wb=Math.PI*2,Clt=1e-4;function Dlt(n,e){return Math.abs(n-e)<Clt}var ol=[-1,-1,-1],Du=[-1,-1];function Ilt(){var n=Du[0];Du[0]=Du[1],Du[1]=n}function Mlt(n,e,t,r,i,a,o,s,l,c){if(c>e&&c>r&&c>a&&c>s||c<e&&c<r&&c<a&&c<s)return 0;var u=V2(e,r,a,s,c,ol);if(u===0)return 0;for(var d=0,h=-1,f=void 0,m=void 0,v=0;v<u;v++){var y=ol[v],w=y===0||y===1?.5:1,_=so(n,t,i,o,y);_<l||(h<0&&(h=kSe(e,r,a,s,Du),Du[1]<Du[0]&&h>1&&Ilt(),f=so(e,r,a,s,Du[0]),h>1&&(m=so(e,r,a,s,Du[1]))),h===2?y<Du[0]?d+=f<e?w:-w:y<Du[1]?d+=m<f?w:-w:d+=s<m?w:-w:y<Du[0]?d+=f<e?w:-w:d+=s<f?w:-w)}return d}function Plt(n,e,t,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=qot(e,r,a,s,ol);if(l===0)return 0;var c=DSe(e,r,a);if(c>=0&&c<=1){for(var u=0,d=Po(e,r,a,c),h=0;h<l;h++){var f=ol[h]===0||ol[h]===1?.5:1,m=Po(n,t,i,ol[h]);m<o||(ol[h]<c?u+=d<e?f:-f:u+=a<d?f:-f)}return u}else{var f=ol[0]===0||ol[0]===1?.5:1,m=Po(n,t,i,ol[0]);return m<o?0:a<e?f:-f}}function Olt(n,e,t,r,i,a,o,s){if(s-=e,s>t||s<-t)return 0;var l=Math.sqrt(t*t-s*s);ol[0]=-l,ol[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=wb-1e-4){r=0,i=wb;var u=a?1:-1;return o>=ol[0]+n&&o<=ol[1]+n?u:0}if(r>i){var d=r;r=i,i=d}r<0&&(r+=wb,i+=wb);for(var h=0,f=0;f<2;f++){var m=ol[f];if(m+n>o){var v=Math.atan2(s,m),u=a?1:-1;v<0&&(v=wb+v),(v>=r&&v<=i||v+wb>=r&&v+wb<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(u=-u),h+=u)}}return h}function u1e(n,e,t,r,i){for(var a=n.data,o=n.len(),s=0,l=0,c=0,u=0,d=0,h,f,m=0;m<o;){var v=a[m++],y=m===1;switch(v===_v.M&&m>1&&(t||(s+=ig(l,c,u,d,r,i))),y&&(l=a[m],c=a[m+1],u=l,d=c),v){case _v.M:u=a[m++],d=a[m++],l=u,c=d;break;case _v.L:if(t){if(Lv(l,c,a[m],a[m+1],e,r,i))return!0}else s+=ig(l,c,a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case _v.C:if(t){if(Alt(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=Mlt(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case _v.Q:if(t){if(c1e(l,c,a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=Plt(l,c,a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case _v.A:var w=a[m++],_=a[m++],T=a[m++],A=a[m++],C=a[m++],k=a[m++];m+=1;var M=!!(1-a[m++]);h=Math.cos(C)*T+w,f=Math.sin(C)*A+_,y?(u=h,d=f):s+=ig(l,c,h,f,r,i);var P=(r-w)*A/T+w;if(t){if(klt(w,_,A,C,C+k,M,e,P,i))return!0}else s+=Olt(w,_,A,C,C+k,M,P,i);l=Math.cos(C+k)*T+w,c=Math.sin(C+k)*A+_;break;case _v.R:u=l=a[m++],d=c=a[m++];var O=a[m++],j=a[m++];if(h=u+O,f=d+j,t){if(Lv(u,d,h,d,e,r,i)||Lv(h,d,h,f,e,r,i)||Lv(h,f,u,f,e,r,i)||Lv(u,f,u,d,e,r,i))return!0}else s+=ig(h,d,h,f,r,i),s+=ig(u,f,u,d,r,i);break;case _v.Z:if(t){if(Lv(l,c,u,d,e,r,i))return!0}else s+=ig(l,c,u,d,r,i);l=u,c=d;break}}return!t&&!Dlt(c,d)&&(s+=ig(l,c,u,d,r,i)||0),s!==0}function Rlt(n,e,t){return u1e(n,0,!1,e,t)}function Nlt(n,e,t,r){return u1e(n,e,!0,t,r)}var Y2=kt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Sw),Llt={style:kt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},M5.style)},l6=Ff.concat(["invisible","culling","z","z2","zlevel","parent"]),wn=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<l6.length;++s)i[l6[s]]=this[l6[s]];i.__dirty|=Rc}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=In(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?Ie(this.style,s):this.useStyle(s):o==="shape"?Ie(this.shape,s):n.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(it(t)){var r=H2(t,0);return r>.5?o8:r>.2?wst:s8}else if(t)return s8}return o8},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(it(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=H2(t,0)<a8;if(a===o)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~$S},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Bf(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&$S)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){s.copy(t);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Nlt(s,l/c,t,r)))return!0}if(this.hasFill())return Rlt(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=$S,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:Ie(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&$S)},e.prototype.createStyle=function(t){return T5(Y2,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Ie({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.shape?o?a?c=r.shape:(c=Ie({},i.shape),Ie(c,r.shape)):(c=Ie({},a?this.shape:i.shape),Ie(c,r.shape)):l&&(c=i.shape),c)if(o){this.shape=Ie({},this.shape);for(var u={},d=In(c),h=0;h<d.length;h++){var f=d[h];typeof c[f]=="object"?this.shape[f]=c[f]:u[f]=c[f]}this._transitionState(t,{shape:u},s)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return Llt},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){gi(o,a);function o(s){var l=a.call(this,s)||this;return t.init&&t.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Rt(t.style)},o.prototype.getDefaultShape=function(){return Rt(t.shape)},o}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Rc|Qk|$S}(),e}(Yu),jlt=kt({strokeFirst:!0,font:by,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Y2),cT=function(n){gi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return T5(jlt,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=_M(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Yu);cT.prototype.type="tspan";var Flt=kt({x:0,y:0},Sw),$lt={style:kt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},M5.style)};function Blt(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Fo=function(n){gi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return T5(Flt,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=Blt(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return $lt},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new an(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Yu);Fo.prototype.type="image";function Ult(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,l,c,u;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=c=u=o:o instanceof Array?o.length===1?s=l=c=u=o[0]:o.length===2?(s=c=o[0],l=u=o[1]):o.length===3?(s=o[0],l=u=o[1],c=o[2]):(s=o[0],l=o[1],c=o[2],u=o[3]):s=l=c=u=0;var d;s+l>i&&(d=s+l,s*=i/d,l*=i/d),c+u>i&&(d=c+u,c*=i/d,u*=i/d),l+c>a&&(d=l+c,l*=a/d,c*=a/d),s+u>a&&(d=s+u,s*=a/d,u*=a/d),n.moveTo(t+s,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-c),c!==0&&n.arc(t+i-c,r+a-c,c,0,Math.PI/2),n.lineTo(t+u,r+a),u!==0&&n.arc(t+u,r+a-u,u,Math.PI/2,Math.PI),n.lineTo(t,r+s),s!==0&&n.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var QS=Math.round;function d1e(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=o;var s=t&&t.lineWidth;return s&&(QS(r*2)===QS(i*2)&&(n.x1=n.x2=sw(r,s,!0)),QS(a*2)===QS(o*2)&&(n.y1=n.y2=sw(a,s,!0))),n}}function h1e(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;n.x=r,n.y=i,n.width=a,n.height=o;var s=t&&t.lineWidth;return s&&(n.x=sw(r,s,!0),n.y=sw(i,s,!0),n.width=Math.max(sw(r+a,s,!1)-n.x,a===0?0:1),n.height=Math.max(sw(i+o,s,!1)-n.y,o===0?0:1)),n}}function sw(n,e,t){if(!e)return n;var r=QS(n*2);return(r+QS(e))%2===0?r/2:(r+(t?1:-1))/2}var Vlt=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),zlt={},Hn=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Vlt},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=h1e(zlt,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?Ult(t,r):t.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(wn);Hn.prototype.type="rect";var Vse={fill:"#000"},zse=2,Hlt={style:kt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},M5.style)},Yn=function(n){gi(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Vse,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Wlt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new an(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(t.copy(l),t.applyTransform(c),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Vse},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return Ie(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=In(r),a=0;a<i.length;a++){var o=i[a];t[o]=t[o]||{},Ie(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return Hlt},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||by,i=t.padding,a=Xse(t),o=plt(a,t),s=c6(t),l=!!t.backgroundColor,c=o.outerHeight,u=o.outerWidth,d=o.contentWidth,h=o.lines,f=o.lineHeight,m=this._defaultStyle;this.isTruncated=!!o.isTruncated;var v=t.x||0,y=t.y||0,w=t.align||m.align||"left",_=t.verticalAlign||m.verticalAlign||"top",T=v,A=BS(y,o.contentHeight,_);if(s||i){var C=eC(v,u,w),k=BS(y,c,_);s&&this._renderBackground(t,t,C,k,u,c)}A+=f/2,i&&(T=Kse(v,w,i),_==="top"?A+=i[0]:_==="bottom"&&(A-=i[2]));for(var M=0,P=!1,O=Yse("fill"in t?t.fill:(P=!0,m.fill)),j=Wse("stroke"in t?t.stroke:!l&&(!m.autoStroke||P)?(M=zse,m.stroke):null),L=t.textShadowBlur>0,B=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),$=o.calculatedLineHeight,Y=0;Y<h.length;Y++){var G=this._getOrCreateChild(cT),W=G.createStyle();G.useStyle(W),W.text=h[Y],W.x=T,W.y=A,W.textAlign=w,W.textBaseline="middle",W.opacity=t.opacity,W.strokeFirst=!0,L&&(W.shadowBlur=t.textShadowBlur||0,W.shadowColor=t.textShadowColor||"transparent",W.shadowOffsetX=t.textShadowOffsetX||0,W.shadowOffsetY=t.textShadowOffsetY||0),W.stroke=j,W.fill=O,j&&(W.lineWidth=t.lineWidth||M,W.lineDash=t.lineDash,W.lineDashOffset=t.lineDashOffset||0),W.font=r,Gse(W,t),A+=f,B&&G.setBoundingRect(new an(eC(W.x,d,W.textAlign),BS(W.y,$,W.textBaseline),d,$))}},e.prototype._updateRichTexts=function(){var t=this.style,r=Xse(t),i=vlt(r,t),a=i.width,o=i.outerWidth,s=i.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,h=t.align||d.align,f=t.verticalAlign||d.verticalAlign;this.isTruncated=!!i.isTruncated;var m=eC(c,o,h),v=BS(u,s,f),y=m,w=v;l&&(y+=l[3],w+=l[0]);var _=y+a;c6(t)&&this._renderBackground(t,t,m,v,o,s);for(var T=!!t.backgroundColor,A=0;A<i.lines.length;A++){for(var C=i.lines[A],k=C.tokens,M=k.length,P=C.lineHeight,O=C.width,j=0,L=y,B=_,$=M-1,Y=void 0;j<M&&(Y=k[j],!Y.align||Y.align==="left");)this._placeToken(Y,t,P,w,L,"left",T),O-=Y.width,L+=Y.width,j++;for(;$>=0&&(Y=k[$],Y.align==="right");)this._placeToken(Y,t,P,w,B,"right",T),O-=Y.width,B-=Y.width,$--;for(L+=(a-(L-y)-(_-B)-O)/2;j<=$;)Y=k[j],this._placeToken(Y,t,P,w,L+Y.width/2,"center",T),L+=Y.width,j++;w+=P}},e.prototype._placeToken=function(t,r,i,a,o,s,l){var c=r.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=a+i/2;u==="top"?d=a+t.height/2:u==="bottom"&&(d=a+i-t.height/2);var h=!t.isLineHolder&&c6(c);h&&this._renderBackground(c,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,d-t.height/2,t.width,t.height);var f=!!c.backgroundColor,m=t.textPadding;m&&(o=Kse(o,s,m),d-=t.height/2-m[0]-t.innerHeight/2);var v=this._getOrCreateChild(cT),y=v.createStyle();v.useStyle(y);var w=this._defaultStyle,_=!1,T=0,A=Yse("fill"in c?c.fill:"fill"in r?r.fill:(_=!0,w.fill)),C=Wse("stroke"in c?c.stroke:"stroke"in r?r.stroke:!f&&!l&&(!w.autoStroke||_)?(T=zse,w.stroke):null),k=c.textShadowBlur>0||r.textShadowBlur>0;y.text=t.text,y.x=o,y.y=d,k&&(y.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,y.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",y.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,y.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),y.textAlign=s,y.textBaseline="middle",y.font=t.font||by,y.opacity=Df(c.opacity,r.opacity,1),Gse(y,c),C&&(y.lineWidth=Df(c.lineWidth,r.lineWidth,T),y.lineDash=Gt(c.lineDash,r.lineDash),y.lineDashOffset=r.lineDashOffset||0,y.stroke=C),A&&(y.fill=A);var M=t.contentWidth,P=t.contentHeight;v.setBoundingRect(new an(eC(y.x,M,y.textAlign),BS(y.y,P,y.textBaseline),M,P))},e.prototype._renderBackground=function(t,r,i,a,o,s){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,h=l&&!d,f=t.borderRadius,m=this,v,y;if(h||t.lineHeight||c&&u){v=this._getOrCreateChild(Hn),v.useStyle(v.createStyle()),v.style.fill=null;var w=v.shape;w.x=i,w.y=a,w.width=o,w.height=s,w.r=f,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=Gt(t.fillOpacity,1)}else if(d){y=this._getOrCreateChild(Fo),y.onload=function(){m.dirtyStyle()};var T=y.style;T.image=l.image,T.x=i,T.y=a,T.width=o,T.height=s}if(c&&u){var _=v.style;_.lineWidth=c,_.stroke=u,_.strokeOpacity=Gt(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var A=(v||y).style;A.shadowBlur=t.shadowBlur||0,A.shadowColor=t.shadowColor||"transparent",A.shadowOffsetX=t.shadowOffsetX||0,A.shadowOffsetY=t.shadowOffsetY||0,A.opacity=Df(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return p1e(t)&&(r=[t.fontStyle,t.fontWeight,f1e(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Zd(r)||t.textFont||t.font},e}(Yu),Glt={left:!0,right:1,center:1},qlt={top:1,bottom:1,middle:1},Hse=["fontStyle","fontWeight","fontSize","fontFamily"];function f1e(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?AY+"px":n+"px"}function Gse(n,e){for(var t=0;t<Hse.length;t++){var r=Hse[t],i=e[r];i!=null&&(n[r]=i)}}function p1e(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function Wlt(n){return qse(n),Z(n.rich,qse),n}function qse(n){if(n){n.font=Yn.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||Glt[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||qlt[t]?t:"top";var r=n.padding;r&&(n.padding=PY(n.padding))}}function Wse(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function Yse(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function Kse(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function Xse(n){var e=n.text;return e!=null&&(e+=""),e}function c6(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var $t=Gn(),f8=function(n,e,t,r){if(r){var i=$t(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=$t(a);o.seriesIndex=n,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}},Zse=1,Qse={},g1e=Gn(),GY=Gn(),qY=0,TM=1,O5=2,yl=["emphasis","blur","select"],cI=["normal","emphasis","blur","select"],HT=10,Ylt=9,Tw="highlight",nN="downplay",RC="select",rN="unselect",NC="toggleSelect";function iS(n){return n!=null&&n!=="none"}function R5(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function m1e(n){R5(n,"emphasis",O5)}function v1e(n){n.hoverState===O5&&R5(n,"normal",qY)}function WY(n){R5(n,"blur",TM)}function y1e(n){n.hoverState===TM&&R5(n,"normal",qY)}function Klt(n){n.selected=!0}function Xlt(n){n.selected=!1}function Jse(n,e,t){e(n,t)}function tm(n,e,t){Jse(n,e,t),n.isGroup&&n.traverse(function(r){Jse(r,e,t)})}function K2(n,e){switch(e){case"emphasis":n.hoverState=O5;break;case"normal":n.hoverState=qY;break;case"blur":n.hoverState=TM;break;case"select":n.selected=!0}}function Zlt(n,e,t,r){for(var i=n.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<n.animators.length;o++){var c=n.animators[o];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(a,e)}return a}function Qlt(n,e,t,r){var i=t&&dn(t,"select")>=0,a=!1;if(n instanceof wn){var o=g1e(n),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(iS(s)||iS(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(a=!0,r=Ie({},r),c=Ie({},c),c.fill=s):!iS(c.fill)&&iS(s)?(a=!0,r=Ie({},r),c=Ie({},c),c.fill=QH(s)):!iS(c.stroke)&&iS(l)&&(a||(r=Ie({},r),c=Ie({},c)),c.stroke=QH(l)),r.style=c}}if(r&&r.z2==null){a||(r=Ie({},r));var u=n.z2EmphasisLift;r.z2=n.z2+(u??HT)}return r}function Jlt(n,e,t){if(t&&t.z2==null){t=Ie({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??Ylt)}return t}function ect(n,e,t){var r=dn(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:Zlt(n,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Ie({},t),o=Ie({opacity:r?i:a.opacity*.1},o),t.style=o),t}function u6(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return Qlt(this,n,e,t);if(n==="blur")return ect(this,n,t);if(n==="select")return Jlt(this,n,t)}return t}function Yw(n){n.stateProxy=u6;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=u6),t&&(t.stateProxy=u6)}function ele(n,e){!_1e(n,e)&&!n.__highByOuter&&tm(n,m1e)}function tle(n,e){!_1e(n,e)&&!n.__highByOuter&&tm(n,v1e)}function Bg(n,e){n.__highByOuter|=1<<(e||0),tm(n,m1e)}function Ug(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&tm(n,v1e)}function b1e(n){tm(n,WY)}function YY(n){tm(n,y1e)}function w1e(n){tm(n,Klt)}function x1e(n){tm(n,Xlt)}function _1e(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function S1e(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var o=GY(a),s=i==="series",l=s?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(c){y1e(c)}),s&&t.push(a)),o.isBlured=!1}),Z(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function p8(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(c,u){for(var d=0;d<u.length;d++){var h=c.getItemGraphicEl(u[d]);h&&YY(h)}}if(n!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(n),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(c){var u=o===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var h=d&&s?d===s:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!h||e==="series"&&u)){var f=r.getViewOfSeriesModel(c);if(f.group.traverse(function(y){y.__highByOuter&&u&&e==="self"||WY(y)}),Fs(e))a(c.getData(),e);else if(It(e))for(var m=In(e),v=0;v<m.length;v++)a(c.getData(m[v]),e[m[v]]);l.push(c),GY(c).isBlured=!0}}),i.eachComponent(function(c,u){if(c!=="series"){var d=r.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,i)}})}}function g8(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){GY(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){WY(a)})}}}function tct(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=qw(i,e);a=(Fe(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var c=$t(o);p8(r,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&p8(r,u,d,t)}}}function KY(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(t),l,c=0;c<s.length;c++)if($t(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function nct(n,e,t){var r=$t(n),i=KY(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,o=i.focusSelf;a?(o&&g8(r.componentMainType,r.componentIndex,t),Z(a,function(s){return ele(s,e)})):(p8(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&g8(r.componentMainType,r.componentIndex,t),ele(n,e))}function rct(n,e,t){S1e(t);var r=$t(n),i=KY(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?Z(i,function(a){return tle(a,e)}):tle(n,e)}function ict(n,e,t){if(v8(e)){var r=e.dataType,i=n.getData(r),a=qw(i,e);Fe(a)||(a=[a]),n[e.type===NC?"toggleSelect":e.type===RC?"select":"unselect"](a,r)}}function nle(n){var e=n.getAllData();Z(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,o){n.isSelected(o,i)?w1e(a):x1e(a)})})}function act(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();Z(r,function(i){i.data;var a=i.type,o=t.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:t.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function Ew(n,e,t){lw(n,!0),tm(n,Yw),m8(n,e,t)}function oct(n){lw(n,!1)}function Vi(n,e,t,r){r?oct(n):Ew(n,e,t)}function m8(n,e,t){var r=$t(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var rle=["emphasis","blur","select"],sct={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function as(n,e,t,r){t=t||"itemStyle";for(var i=0;i<rle.length;i++){var a=rle[i],o=e.getModel([a,t]),s=n.ensureState(a);s.style=r?r(o):o[sct[t]]()}}function lw(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function uI(n){return!!(n&&n.__highDownDispatcher)}function lct(n,e,t){var r=$t(n);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function cct(n){var e=Qse[n];return e==null&&Zse<=32&&(e=Qse[n]=Zse++),e}function v8(n){var e=n.type;return e===RC||e===rN||e===NC}function ile(n){var e=n.type;return e===Tw||e===nN}function uct(n){var e=g1e(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var aS=Bf.CMD,dct=[[],[],[]],ale=Math.sqrt,hct=Math.atan2;function T1e(n,e){if(e){var t=n.data,r=n.len(),i,a,o,s,l,c,u=aS.M,d=aS.C,h=aS.L,f=aS.R,m=aS.A,v=aS.Q;for(o=0,s=0;o<r;){switch(i=t[o++],s=o,a=0,i){case u:a=1;break;case h:a=1;break;case d:a=3;break;case v:a=2;break;case m:var y=e[4],w=e[5],_=ale(e[0]*e[0]+e[1]*e[1]),T=ale(e[2]*e[2]+e[3]*e[3]),A=hct(-e[1]/T,e[0]/_);t[o]*=_,t[o++]+=y,t[o]*=T,t[o++]+=w,t[o++]*=_,t[o++]*=T,t[o++]+=A,t[o++]+=A,o+=2,s=o;break;case f:c[0]=t[o++],c[1]=t[o++],ns(c,c,e),t[s++]=c[0],t[s++]=c[1],c[0]+=t[o++],c[1]+=t[o++],ns(c,c,e),t[s++]=c[0],t[s++]=c[1]}for(l=0;l<a;l++){var C=dct[l];C[0]=t[o++],C[1]=t[o++],ns(C,C,e),t[s++]=C[0],t[s++]=C[1]}}n.increaseVersion()}}var d6=Math.sqrt,IO=Math.sin,MO=Math.cos,sk=Math.PI;function ole(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function y8(n,e){return(n[0]*e[0]+n[1]*e[1])/(ole(n)*ole(e))}function sle(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(y8(n,e))}function lle(n,e,t,r,i,a,o,s,l,c,u){var d=l*(sk/180),h=MO(d)*(n-t)/2+IO(d)*(e-r)/2,f=-1*IO(d)*(n-t)/2+MO(d)*(e-r)/2,m=h*h/(o*o)+f*f/(s*s);m>1&&(o*=d6(m),s*=d6(m));var v=(i===a?-1:1)*d6((o*o*(s*s)-o*o*(f*f)-s*s*(h*h))/(o*o*(f*f)+s*s*(h*h)))||0,y=v*o*f/s,w=v*-s*h/o,_=(n+t)/2+MO(d)*y-IO(d)*w,T=(e+r)/2+IO(d)*y+MO(d)*w,A=sle([1,0],[(h-y)/o,(f-w)/s]),C=[(h-y)/o,(f-w)/s],k=[(-1*h-y)/o,(-1*f-w)/s],M=sle(C,k);if(y8(C,k)<=-1&&(M=sk),y8(C,k)>=1&&(M=0),M<0){var P=Math.round(M/sk*1e6)/1e6;M=sk*2+P%2*sk}u.addData(c,_,T,o,s,A,M,d,a)}var fct=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,pct=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function gct(n){var e=new Bf;if(!n)return e;var t=0,r=0,i=t,a=r,o,s=Bf.CMD,l=n.match(fct);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),h=void 0,f=u.match(pct)||[],m=f.length,v=0;v<m;v++)f[v]=parseFloat(f[v]);for(var y=0;y<m;){var w=void 0,_=void 0,T=void 0,A=void 0,C=void 0,k=void 0,M=void 0,P=t,O=r,j=void 0,L=void 0;switch(d){case"l":t+=f[y++],r+=f[y++],h=s.L,e.addData(h,t,r);break;case"L":t=f[y++],r=f[y++],h=s.L,e.addData(h,t,r);break;case"m":t+=f[y++],r+=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="l";break;case"M":t=f[y++],r=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="L";break;case"h":t+=f[y++],h=s.L,e.addData(h,t,r);break;case"H":t=f[y++],h=s.L,e.addData(h,t,r);break;case"v":r+=f[y++],h=s.L,e.addData(h,t,r);break;case"V":r=f[y++],h=s.L,e.addData(h,t,r);break;case"C":h=s.C,e.addData(h,f[y++],f[y++],f[y++],f[y++],f[y++],f[y++]),t=f[y-2],r=f[y-1];break;case"c":h=s.C,e.addData(h,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r),t+=f[y-2],r+=f[y-1];break;case"S":w=t,_=r,j=e.len(),L=e.data,o===s.C&&(w+=t-L[j-4],_+=r-L[j-3]),h=s.C,P=f[y++],O=f[y++],t=f[y++],r=f[y++],e.addData(h,w,_,P,O,t,r);break;case"s":w=t,_=r,j=e.len(),L=e.data,o===s.C&&(w+=t-L[j-4],_+=r-L[j-3]),h=s.C,P=t+f[y++],O=r+f[y++],t+=f[y++],r+=f[y++],e.addData(h,w,_,P,O,t,r);break;case"Q":P=f[y++],O=f[y++],t=f[y++],r=f[y++],h=s.Q,e.addData(h,P,O,t,r);break;case"q":P=f[y++]+t,O=f[y++]+r,t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,P,O,t,r);break;case"T":w=t,_=r,j=e.len(),L=e.data,o===s.Q&&(w+=t-L[j-4],_+=r-L[j-3]),t=f[y++],r=f[y++],h=s.Q,e.addData(h,w,_,t,r);break;case"t":w=t,_=r,j=e.len(),L=e.data,o===s.Q&&(w+=t-L[j-4],_+=r-L[j-3]),t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,w,_,t,r);break;case"A":T=f[y++],A=f[y++],C=f[y++],k=f[y++],M=f[y++],P=t,O=r,t=f[y++],r=f[y++],h=s.A,lle(P,O,t,r,k,M,T,A,C,h,e);break;case"a":T=f[y++],A=f[y++],C=f[y++],k=f[y++],M=f[y++],P=t,O=r,t+=f[y++],r+=f[y++],h=s.A,lle(P,O,t,r,k,M,T,A,C,h,e);break}}(d==="z"||d==="Z")&&(h=s.Z,e.addData(h),t=i,r=a),o=h}return e.toStatic(),e}var E1e=function(n){gi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(wn);function A1e(n){return n.setData!=null}function k1e(n,e){var t=gct(n),r=Ie({},e);return r.buildPath=function(i){if(A1e(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){T1e(t,i),this.dirtyShape()},r}function C1e(n,e){return new E1e(k1e(n,e))}function mct(n,e){var t=k1e(n,e),r=function(i){gi(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(E1e);return r}function vct(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var o=new wn(e);return o.createPathProxy(),o.buildPath=function(s){if(A1e(s)){s.appendPath(t);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function XY(n,e){e=e||{};var t=new wn;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?T1e(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var yct=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),nm=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new yct},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(wn);nm.prototype.type="circle";var bct=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),N5=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new bct},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,c=s*i,u=l*i;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-u,a-c,o-l,a,o-l),t.bezierCurveTo(a+c,o-l,a+s,o-u,a+s,o),t.bezierCurveTo(a+s,o+u,a+c,o+l,a,o+l),t.bezierCurveTo(a-c,o+l,a-s,o+u,a-s,o),t.closePath()},e}(wn);N5.prototype.type="ellipse";var D1e=Math.PI,h6=D1e*2,xb=Math.sin,oS=Math.cos,wct=Math.acos,Ts=Math.atan2,cle=Math.abs,LC=Math.sqrt,tC=Math.max,rf=Math.min,Rd=1e-4;function xct(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<Rd))return h=(u*(e-a)-d*(n-i))/h,[n+h*l,e+h*c]}function PO(n,e,t,r,i,a,o){var s=n-t,l=e-r,c=(o?a:-a)/LC(s*s+l*l),u=c*l,d=-c*s,h=n+u,f=e+d,m=t+u,v=r+d,y=(h+m)/2,w=(f+v)/2,_=m-h,T=v-f,A=_*_+T*T,C=i-a,k=h*v-m*f,M=(T<0?-1:1)*LC(tC(0,C*C*A-k*k)),P=(k*T-_*M)/A,O=(-k*_-T*M)/A,j=(k*T+_*M)/A,L=(-k*_+T*M)/A,B=P-y,$=O-w,Y=j-y,G=L-w;return B*B+$*$>Y*Y+G*G&&(P=j,O=L),{cx:P,cy:O,x0:-u,y0:-d,x1:P*(i/C-1),y1:O*(i/C-1)}}function _ct(n){var e;if(Fe(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function Sct(n,e){var t,r=tC(e.r,0),i=tC(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,h=!!e.clockwise,f=cle(c-l),m=f>h6&&f%h6;if(m>Rd&&(f=m),!(r>Rd))n.moveTo(u,d);else if(f>h6-Rd)n.moveTo(u+r*oS(l),d+r*xb(l)),n.arc(u,d,r,l,c,!h),i>Rd&&(n.moveTo(u+i*oS(c),d+i*xb(c)),n.arc(u,d,i,c,l,h));else{var v=void 0,y=void 0,w=void 0,_=void 0,T=void 0,A=void 0,C=void 0,k=void 0,M=void 0,P=void 0,O=void 0,j=void 0,L=void 0,B=void 0,$=void 0,Y=void 0,G=r*oS(l),W=r*xb(l),X=i*oS(c),te=i*xb(c),re=f>Rd;if(re){var z=e.cornerRadius;z&&(t=_ct(z),v=t[0],y=t[1],w=t[2],_=t[3]);var ae=cle(r-i)/2;if(T=rf(ae,w),A=rf(ae,_),C=rf(ae,v),k=rf(ae,y),O=M=tC(T,A),j=P=tC(C,k),(M>Rd||P>Rd)&&(L=r*oS(c),B=r*xb(c),$=i*oS(l),Y=i*xb(l),f<D1e)){var le=xct(G,W,$,Y,L,B,X,te);if(le){var ee=G-le[0],ye=W-le[1],fe=L-le[0],Ce=B-le[1],at=1/xb(wct((ee*fe+ye*Ce)/(LC(ee*ee+ye*ye)*LC(fe*fe+Ce*Ce)))/2),Le=LC(le[0]*le[0]+le[1]*le[1]);O=rf(M,(r-Le)/(at+1)),j=rf(P,(i-Le)/(at-1))}}}if(!re)n.moveTo(u+G,d+W);else if(O>Rd){var we=rf(w,O),be=rf(_,O),ge=PO($,Y,G,W,r,we,h),he=PO(L,B,X,te,r,be,h);n.moveTo(u+ge.cx+ge.x0,d+ge.cy+ge.y0),O<M&&we===be?n.arc(u+ge.cx,d+ge.cy,O,Ts(ge.y0,ge.x0),Ts(he.y0,he.x0),!h):(we>0&&n.arc(u+ge.cx,d+ge.cy,we,Ts(ge.y0,ge.x0),Ts(ge.y1,ge.x1),!h),n.arc(u,d,r,Ts(ge.cy+ge.y1,ge.cx+ge.x1),Ts(he.cy+he.y1,he.cx+he.x1),!h),be>0&&n.arc(u+he.cx,d+he.cy,be,Ts(he.y1,he.x1),Ts(he.y0,he.x0),!h))}else n.moveTo(u+G,d+W),n.arc(u,d,r,l,c,!h);if(!(i>Rd)||!re)n.lineTo(u+X,d+te);else if(j>Rd){var we=rf(v,j),be=rf(y,j),ge=PO(X,te,L,B,i,-be,h),he=PO(G,W,$,Y,i,-we,h);n.lineTo(u+ge.cx+ge.x0,d+ge.cy+ge.y0),j<P&&we===be?n.arc(u+ge.cx,d+ge.cy,j,Ts(ge.y0,ge.x0),Ts(he.y0,he.x0),!h):(be>0&&n.arc(u+ge.cx,d+ge.cy,be,Ts(ge.y0,ge.x0),Ts(ge.y1,ge.x1),!h),n.arc(u,d,i,Ts(ge.cy+ge.y1,ge.cx+ge.x1),Ts(he.cy+he.y1,he.cx+he.x1),h),we>0&&n.arc(u+he.cx,d+he.cy,we,Ts(he.y1,he.x1),Ts(he.y0,he.x0),!h))}else n.lineTo(u+X,d+te),n.arc(u,d,i,c,l,h)}n.closePath()}}}var Tct=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),bl=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Tct},e.prototype.buildPath=function(t,r){Sct(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(wn);bl.prototype.type="sector";var Ect=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),EM=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Ect},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,o,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,o,!0)},e}(wn);EM.prototype.type="ring";function Act(n,e,t,r){var i=[],a=[],o=[],s=[],l,c,u,d;if(r){u=[1/0,1/0],d=[-1/0,-1/0];for(var h=0,f=n.length;h<f;h++)qv(u,u,n[h]),Wv(d,d,n[h]);qv(u,u,r[0]),Wv(d,d,r[1])}for(var h=0,f=n.length;h<f;h++){var m=n[h];if(t)l=n[h?h-1:f-1],c=n[(h+1)%f];else if(h===0||h===f-1){i.push(Tg(n[h]));continue}else l=n[h-1],c=n[h+1];ow(a,c,l),KR(a,a,e);var v=zH(m,l),y=zH(m,c),w=v+y;w!==0&&(v/=w,y/=w),KR(o,a,-v),KR(s,a,y);var _=nse([],m,o),T=nse([],m,s);r&&(Wv(_,_,u),qv(_,_,d),Wv(T,T,u),qv(T,T,d)),i.push(_),i.push(T)}return t&&i.push(i.shift()),i}function I1e(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=Act(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(t?o:o-1);s++){var l=a[s*2],c=a[s*2+1],u=i[(s+1)%o];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var s=1,d=i.length;s<d;s++)n.lineTo(i[s][0],i[s][1])}t&&n.closePath()}}var kct=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),wl=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new kct},e.prototype.buildPath=function(t,r){I1e(t,r,!0)},e}(wn);wl.prototype.type="polygon";var Cct=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),xl=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Cct},e.prototype.buildPath=function(t,r){I1e(t,r,!1)},e}(wn);xl.prototype.type="polyline";var Dct={},Ict=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),co=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ict},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=d1e(Dct,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var c=r.percent;c!==0&&(t.moveTo(i,a),c<1&&(o=i*(1-c)+o*c,s=a*(1-c)+s*c),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(wn);co.prototype.type="line";var Nl=[],Mct=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function ule(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?pse:so)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?pse:so)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?YH:Po)(n.x1,n.cpx1,n.x2,e),(t?YH:Po)(n.y1,n.cpy1,n.y2,e)]}var AM=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Mct},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,d=r.cpy2,h=r.percent;h!==0&&(t.moveTo(i,a),u==null||d==null?(h<1&&(iI(i,l,o,h,Nl),l=Nl[1],o=Nl[2],iI(a,c,s,h,Nl),c=Nl[1],s=Nl[2]),t.quadraticCurveTo(l,c,o,s)):(h<1&&(xy(i,l,u,o,h,Nl),l=Nl[1],u=Nl[2],o=Nl[3],xy(a,c,d,s,h,Nl),c=Nl[1],d=Nl[2],s=Nl[3]),t.bezierCurveTo(l,c,u,d,o,s)))},e.prototype.pointAt=function(t){return ule(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=ule(this.shape,t,!0);return UT(r,r)},e}(wn);AM.prototype.type="bezier-curve";var Pct=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),L5=function(n){gi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Pct},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(s),d=Math.sin(s);t.moveTo(u*o+i,d*o+a),t.arc(i,a,o,s,l,!c)},e}(wn);L5.prototype.type="arc";var ZY=function(n){gi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),wn.prototype.getBoundingRect.call(this)},e}(wn),M1e=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}(),kM=function(n){gi(e,n);function e(t,r,i,a,o,s){var l=n.call(this,o)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(M1e),P1e=function(n){gi(e,n);function e(t,r,i,a,o){var s=n.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(M1e),_b=[0,0],Sb=[0,0],OO=new tn,RO=new tn,X2=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new tn;for(var r=0;r<2;r++)this._axes[r]=new tn;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),t)for(var c=0;c<4;c++)r[c].transform(t);tn.sub(i[0],r[1],r[0]),tn.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return OO.set(1/0,1/0),RO.set(0,0),!this._intersectCheckOneSide(this,e,OO,RO,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,OO,RO,i,-1)&&(r=!1,i)||i||tn.copy(t,r?OO:RO),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,o){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,_b),this._getProjMinMaxOnAxis(l,t._corners,Sb),_b[1]<Sb[0]||_b[0]>Sb[1]){if(s=!1,a)return s;var u=Math.abs(Sb[0]-_b[1]),d=Math.abs(_b[0]-Sb[1]);Math.min(u,d)>i.len()&&(u<d?tn.scale(i,c,-u*o):tn.scale(i,c,d*o))}else if(r){var u=Math.abs(Sb[0]-_b[1]),d=Math.abs(_b[0]-Sb[1]);Math.min(u,d)<r.len()&&(u<d?tn.scale(r,c,u*o):tn.scale(r,c,-d*o))}}return s},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,o=t[0].dot(i)+a[e],s=o,l=o,c=1;c<t.length;c++){var u=t[c].dot(i)+a[e];s=Math.min(u,s),l=Math.max(u,l)}r[0]=s,r[1]=l},n}(),Oct=[],Rct=function(n){gi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new an(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(Oct)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(Yu),O1e=Gn();function GT(n,e,t,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=n==="update";if(s){var c=void 0,u=void 0,d=void 0;r?(c=Gt(r.duration,200),u=Gt(r.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(c=a.duration),a.easing!=null&&(u=a.easing),a.delay!=null&&(d=a.delay)),Et(d)&&(d=d(t,i)),Et(c)&&(c=c(t));var h={duration:c||0,delay:d,easing:u};return h}else return null}function QY(n,e,t,r,i,a,o){var s=!1,l;Et(i)?(o=a,a=i,i=null):It(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=GT(n,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(u&&u.duration>0){var d=u.duration,h=u.delay,f=u.easing,m={duration:d,delay:h||0,easing:f,done:a,force:!!a||!!o,setToFinal:!c,scope:n,during:o};s?e.animateFrom(t,m):e.animateTo(t,m)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function tr(n,e,t,r,i,a){QY("update",n,e,t,r,i,a)}function Si(n,e,t,r,i,a){QY("enter",n,e,t,r,i,a)}function w1(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function _y(n,e,t,r,i,a){w1(n)||QY("leave",n,e,t,r,i,a)}function dle(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),_y(n,{style:{opacity:0}},e,t,r)}function dI(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||dle(i,e,t,r)}):dle(n,e,t,r)}function lh(n){O1e(n).oldStyle=n.style}function Nct(n){return O1e(n).oldStyle}var Z2=Math.max,Q2=Math.min,b8={};function Lct(n){return wn.extend(n)}var jct=mct;function Fct(n,e){return jct(n,e)}function uh(n,e){b8[n]=e}function JY(n){if(b8.hasOwnProperty(n))return b8[n]}function j5(n,e,t,r){var i=C1e(n,e);return t&&(r==="center"&&(t=N1e(t,i.getBoundingRect())),L1e(i,t)),i}function R1e(n,e,t){var r=new Fo({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(N1e(e,a))}}});return r}function N1e(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,o=n.y+n.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Lu=vct;function L1e(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function uT(n,e){return d1e(n,n,{lineWidth:e}),n}function $ct(n){return h1e(n.shape,n.shape,n.style),n}var iN=sw;function Aw(n,e){for(var t=E5([]);n&&n!==e;)Eg(t,n.getLocalTransform(),t),n=n.parent;return t}function nh(n,e,t){return e&&!Fs(e)&&(e=pg.getLocalTransform(e)),t&&(e=VT([],e)),ns([],n,e)}function F5(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=nh(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function hle(n){return!n.isGroup}function Bct(n){return n.shape!=null}function CM(n,e,t){if(!n||!e)return;function r(o){var s={};return o.traverse(function(l){hle(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return Bct(o)&&(s.shape=Ie({},o.shape)),s}var a=r(n);e.traverse(function(o){if(hle(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),tr(o,l,t,$t(o).dataIndex)}}})}function j1e(n,e){return $e(n,function(t){var r=t[0];r=Z2(r,e.x),r=Q2(r,e.x+e.width);var i=t[1];return i=Z2(i,e.y),i=Q2(i,e.y+e.height),[r,i]})}function Uct(n,e){var t=Z2(n.x,e.x),r=Q2(n.x+n.width,e.x+e.width),i=Z2(n.y,e.y),a=Q2(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function DM(n,e,t){var r=Ie({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),kt(i,t),new Fo(r)):j5(n.replace("path://",""),r,t,"center")}function nC(n,e,t,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(F1e(n,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function F1e(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=f6(u,d,l,c);if(Vct(h))return!1;var f=n-i,m=e-a,v=f6(f,m,l,c)/h;if(v<0||v>1)return!1;var y=f6(f,m,u,d)/h;return!(y<0||y>1)}function f6(n,e,t,r){return n*r-t*e}function Vct(n){return n<=1e-6&&n>=-1e-6}function lx(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=it(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=n.formatterParamsExtra;l&&Z(In(l),function(u){dt(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=$t(n.el);c.componentMainType=a,c.componentIndex=o,c.tooltipConfig={name:r,option:kt({content:r,encodeHTMLContent:!0,formatterParams:s},i)}}function fle(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function Fy(n,e){if(n)if(Fe(n))for(var t=0;t<n.length;t++)fle(n[t],e);else fle(n,e)}uh("circle",nm);uh("ellipse",N5);uh("sector",bl);uh("ring",EM);uh("polygon",wl);uh("polyline",xl);uh("rect",Hn);uh("line",co);uh("bezierCurve",AM);uh("arc",L5);const cx=Object.freeze(Object.defineProperty({__proto__:null,Arc:L5,BezierCurve:AM,BoundingRect:an,Circle:nm,CompoundPath:ZY,Ellipse:N5,Group:Lt,Image:Fo,IncrementalDisplayable:Rct,Line:co,LinearGradient:kM,OrientedBoundingRect:X2,Path:wn,Point:tn,Polygon:wl,Polyline:xl,RadialGradient:P1e,Rect:Hn,Ring:EM,Sector:bl,Text:Yn,applyTransform:nh,clipPointsByRect:j1e,clipRectByRect:Uct,createIcon:DM,extendPath:Fct,extendShape:Lct,getShapeClass:JY,getTransform:Aw,groupTransition:CM,initProps:Si,isElementRemoved:w1,lineLineIntersect:F1e,linePolygonIntersect:nC,makeImage:R1e,makePath:j5,mergePath:Lu,registerShape:uh,removeElement:_y,removeElementWithFadeOut:dI,resizePath:L1e,setTooltipConfig:lx,subPixelOptimize:iN,subPixelOptimizeLine:uT,subPixelOptimizeRect:$ct,transformDirection:F5,traverseElements:Fy,updateProps:tr},Symbol.toStringTag,{value:"Module"}));var $5={};function $1e(n,e){for(var t=0;t<yl.length;t++){var r=yl[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var o=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(o,!0)}function w8(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=Et(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:s},c=0;c<yl.length;c++){var u=yl[c],d=e[u];l[u]=Gt(r?r.getFormattedLabel(i,u,null,a,d&&d.get("formatter")):null,s)}return l}function os(n,e,t,r){t=t||$5;for(var i=n instanceof Yn,a=!1,o=0;o<cI.length;o++){var s=e[cI[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new Yn,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=w8(t,e),u=e.normal,d=!!u.getShallow("show"),h=ri(u,r&&r.normal,t,!1,!i);h.text=c.normal,i||n.setTextConfig(J2(u,t,!1));for(var o=0;o<yl.length;o++){var f=yl[o],s=e[f];if(s){var m=l.ensureState(f),v=!!Gt(s.getShallow("show"),d);if(v!==d&&(m.ignore=!v),m.style=ri(s,r&&r[f],t,!0,!i),m.style.text=c[f],!i){var y=n.ensureState(f);y.textConfig=J2(s,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!d,l.useStyle(h),l.dirty(),t.enableTextSetter&&(qT(l).setLabelText=function(w){var _=w8(t,e,w);$1e(l,_)})}else l&&(l.ignore=!0);n.dirty()}function po(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<yl.length;r++){var i=yl[r];t[i]=n.getModel([i,e])}return t}function ri(n,e,t,r,i){var a={};return zct(a,n,t,r,i),e&&Ie(a,e),a}function J2(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),o=Gt(n.getShallow("distance"),t?null:5),s=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function zct(n,e,t,r,i){t=t||$5;var a=e.ecModel,o=a&&a.option.textStyle,s=Hct(e),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=e.getModel(["rich",c]);vle(l[c]={},u,o,t,r,i,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var h=e.get("minMargin");h!=null&&(n.margin=h),vle(n,e,o,t,r,i,!0,!1)}function Hct(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||$5).rich;if(t){e=e||{};for(var r=In(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var ple=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],gle=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],mle=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function vle(n,e,t,r,i,a,o,s){t=!i&&t||$5;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=Gt(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),a||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var h=Gt(e.getShallow("textBorderWidth"),t.textBorderWidth);h!=null&&(n.lineWidth=h);var f=Gt(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(n.lineDash=f);var m=Gt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);m!=null&&(n.lineDashOffset=m),!i&&d==null&&!s&&(d=r&&r.defaultOpacity),d!=null&&(n.opacity=d),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var v=0;v<ple.length;v++){var y=ple[v],w=Gt(e.getShallow(y),t[y]);w!=null&&(n[y]=w)}for(var v=0;v<gle.length;v++){var y=gle[v],w=e.getShallow(y);w!=null&&(n[y]=w)}if(n.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(n.verticalAlign=_)}if(!o||!r.disableBox){for(var v=0;v<mle.length;v++){var y=mle[v],w=e.getShallow(y);w!=null&&(n[y]=w)}var T=e.getShallow("borderType");T!=null&&(n.borderDash=T),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function eK(n,e){var t=e&&e.getModel("textStyle");return Zd([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var qT=Gn();function B1e(n,e,t,r){if(n){var i=qT(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function U1e(n,e,t,r,i){var a=qT(n);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Gt(a.interpolatedValue,a.prevValue),l=a.value;function c(u){var d=r1e(t,a.precision,s,l,u);a.interpolatedValue=u===1?null:d;var h=w8({labelDataIndex:e,labelFetcher:i,defaultText:o?o(d):d+""},a.statesModels,d);$1e(n,h)}n.percent=0,(a.prevValue==null?Si:tr)(n,{percent:1},r,e,null,c)}var Gct=["textStyle","color"],p6=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],g6=new Yn,qct=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Gct):null)},n.prototype.getFont=function(){return eK({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<p6.length;r++)t[p6[r]]=this.getShallow(p6[r]);return g6.useStyle(t),g6.update(),g6.getBoundingRect()},n}(),V1e=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Wct=Ww(V1e),Yct=function(){function n(){}return n.prototype.getLineStyle=function(e){return Wct(this,e)},n}(),z1e=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Kct=Ww(z1e),Xct=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return Kct(this,e,t)},n}(),br=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){en(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Rt(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Tn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();VY(br);alt(br);Oa(br,Yct);Oa(br,Xct);Oa(br,ult);Oa(br,qct);var Zct=Math.round(Math.random()*10);function WT(n){return[n||"",Zct++].join("_")}function Qct(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=_f(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=_f(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function Jct(n,e){n.topologicalTravel=function(a,o,s,l){if(!a.length)return;var c=t(o),u=c.graph,d=c.noEntryList,h={};for(Z(a,function(_){h[_]=!0});d.length;){var f=d.pop(),m=u[f],v=!!h[f];v&&(s.call(l,f,m.originalDeps.slice()),delete h[f]),Z(m.successor,v?w:y)}Z(h,function(){var _="";throw new Error(_)});function y(_){u[_].entryCount--,u[_].entryCount===0&&d.push(_)}function w(_){h[_]=!0,y(_)}};function t(a){var o={},s=[];return Z(a,function(l){var c=r(o,l),u=c.originalDeps=e(l),d=i(u,a);c.entryCount=d.length,c.entryCount===0&&s.push(l),Z(d,function(h){dn(c.predecessor,h)<0&&c.predecessor.push(h);var f=r(o,h);dn(f.successor,h)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return Z(a,function(l){dn(o,l)>=0&&s.push(l)}),s}}function $y(n,e){return en(en({},n,!0),e,!0)}const eut={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},tut={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var eL="ZH",tK="EN",x1=tK,aN={},nK={},H1e=Tn.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||x1).toUpperCase();return n.indexOf(eL)>-1?eL:x1}():x1;function G1e(n,e){n=n.toUpperCase(),nK[n]=new br(e),aN[n]=e}function nut(n){if(it(n)){var e=aN[n.toUpperCase()]||{};return n===eL||n===tK?Rt(e):en(Rt(e),Rt(aN[x1]),!1)}else return en(Rt(n),Rt(aN[x1]),!1)}function x8(n){return nK[n]}function rut(){return nK[x1]}G1e(tK,eut);G1e(eL,tut);var rK=1e3,iK=rK*60,jC=iK*60,ju=jC*24,yle=ju*365,rC={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},NO="{yyyy}-{MM}-{dd}",ble={year:"{yyyy}",month:"{yyyy}-{MM}",day:NO,hour:NO+" "+rC.hour,minute:NO+" "+rC.minute,second:NO+" "+rC.second,millisecond:rC.none},m6=["year","month","day","hour","minute","second","millisecond"],q1e=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Sv(n,e){return n+="","0000".substr(0,e-n.length)+n}function _1(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function iut(n){return n===_1(n)}function aut(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function B5(n,e,t,r){var i=$f(n),a=i[aK(t)](),o=i[S1(t)]()+1,s=Math.floor((o-1)/3)+1,l=i[U5(t)](),c=i["get"+(t?"UTC":"")+"Day"](),u=i[hI(t)](),d=(u-1)%12+1,h=i[V5(t)](),f=i[z5(t)](),m=i[H5(t)](),v=u>=12?"pm":"am",y=v.toUpperCase(),w=r instanceof br?r:x8(r||H1e)||rut(),_=w.getModel("time"),T=_.get("month"),A=_.get("monthAbbr"),C=_.get("dayOfWeek"),k=_.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,v+"").replace(/{A}/g,y+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Sv(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,T[o-1]).replace(/{MMM}/g,A[o-1]).replace(/{MM}/g,Sv(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,Sv(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,C[c]).replace(/{ee}/g,k[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Sv(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Sv(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Sv(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Sv(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,Sv(m,3)).replace(/{S}/g,m+"")}function out(n,e,t,r,i){var a=null;if(it(t))a=t;else if(Et(t))a=t(n.value,e,{level:n.level});else{var o=Ie({},rC);if(n.level>0)for(var s=0;s<m6.length;++s)o[m6[s]]="{primary|"+o[m6[s]]+"}";var l=t?t.inherit===!1?t:kt(t,o):o,c=W1e(n.value,i);if(l[c])a=l[c];else if(l.inherit){for(var u=q1e.indexOf(c),s=u-1;s>=0;--s)if(l[c]){a=l[c];break}a=a||o.none}if(Fe(a)){var d=n.level==null?0:n.level>=0?n.level:a.length+n.level;d=Math.min(d,a.length-1),a=a[d]}}return B5(new Date(n.value),a,i,r)}function W1e(n,e){var t=$f(n),r=t[S1(e)]()+1,i=t[U5(e)](),a=t[hI(e)](),o=t[V5(e)](),s=t[z5(e)](),l=t[H5(e)](),c=l===0,u=c&&s===0,d=u&&o===0,h=d&&a===0,f=h&&i===1,m=f&&r===1;return m?"year":f?"month":h?"day":d?"hour":u?"minute":c?"second":"millisecond"}function wle(n,e,t){var r=Jn(n)?$f(n):n;switch(e=e||W1e(n,t),e){case"year":return r[aK(t)]();case"half-year":return r[S1(t)]()>=6?1:0;case"quarter":return Math.floor((r[S1(t)]()+1)/4);case"month":return r[S1(t)]();case"day":return r[U5(t)]();case"half-day":return r[hI(t)]()/24;case"hour":return r[hI(t)]();case"minute":return r[V5(t)]();case"second":return r[z5(t)]();case"millisecond":return r[H5(t)]()}}function aK(n){return n?"getUTCFullYear":"getFullYear"}function S1(n){return n?"getUTCMonth":"getMonth"}function U5(n){return n?"getUTCDate":"getDate"}function hI(n){return n?"getUTCHours":"getHours"}function V5(n){return n?"getUTCMinutes":"getMinutes"}function z5(n){return n?"getUTCSeconds":"getSeconds"}function H5(n){return n?"getUTCMilliseconds":"getMilliseconds"}function sut(n){return n?"setUTCFullYear":"setFullYear"}function Y1e(n){return n?"setUTCMonth":"setMonth"}function K1e(n){return n?"setUTCDate":"setDate"}function X1e(n){return n?"setUTCHours":"setHours"}function Z1e(n){return n?"setUTCMinutes":"setMinutes"}function Q1e(n){return n?"setUTCSeconds":"setSeconds"}function J1e(n){return n?"setUTCMilliseconds":"setMilliseconds"}function eTe(n){if(!KSe(n))return it(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function tTe(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var YT=PY;function _8(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(u){return u&&Zd(u)?u:"-"}function a(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var o=e==="time",s=n instanceof Date;if(o||s){var l=o?$f(n):n;if(isNaN(+l)){if(s)return"-"}else return B5(l,r,t)}if(e==="ordinal")return $H(n)?i(n):Jn(n)&&a(n)?n+"":"-";var c=$g(n);return a(c)?eTe(c):$H(n)?i(n):typeof n=="boolean"?n+"":"-"}var xle=["a","b","c","d","e","f","g"],v6=function(n,e){return"{"+n+(e??"")+"}"};function nTe(n,e,t){Fe(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=xle[a];n=n.replace(v6(o),v6(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var c=e[s][i[l]];n=n.replace(v6(xle[l],s),t?ll(c):c)}return n}function lut(n,e,t){return Z(e,function(r,i){n=n.replace("{"+i+"}",r)}),n}function cut(n,e){var t=it(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ll(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ll(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Kw(n,e){return e=e||"transparent",it(n)?n:It(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function tL(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var oN=Z,rTe=["left","right","top","bottom","width","height"],cw=[["width","left","right"],["height","top","bottom"]];function oK(n,e,t,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),h=d&&d.getBoundingRect(),f,m;if(n==="horizontal"){var v=u.width+(h?-h.x+u.x:0);f=a+v,f>r||l.newline?(a=0,f=v,o+=s+t,s=u.height):s=Math.max(s,u.height)}else{var y=u.height+(h?-h.y+u.y:0);m=o+y,m>i||l.newline?(a+=s+t,o=0,m=y,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),n==="horizontal"?a=f+t:o=m+t)})}var kw=oK;Yt(oK,"vertical");Yt(oK,"horizontal");function uut(n,e,t){var r=e.width,i=e.height,a=Ze(n.left,r),o=Ze(n.top,i),s=Ze(n.right,r),l=Ze(n.bottom,i);return(isNaN(a)||isNaN(parseFloat(n.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(n.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(n.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(n.bottom)))&&(l=i),t=YT(t||0),{width:Math.max(s-a-t[1]-t[3],0),height:Math.max(l-o-t[0]-t[2],0)}}function Za(n,e,t){t=YT(t||0);var r=e.width,i=e.height,a=Ze(n.left,r),o=Ze(n.top,i),s=Ze(n.right,r),l=Ze(n.bottom,i),c=Ze(n.width,r),u=Ze(n.height,i),d=t[2]+t[0],h=t[1]+t[3],f=n.aspect;switch(isNaN(c)&&(c=r-s-h-a),isNaN(u)&&(u=i-l-d-o),f!=null&&(isNaN(c)&&isNaN(u)&&(f>r/i?c=r*.8:u=i*.8),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(a)&&(a=r-s-c-h),isNaN(o)&&(o=i-l-u-d),n.left||n.right){case"center":a=r/2-c/2-t[3];break;case"right":a=r-c-h;break}switch(n.top||n.bottom){case"middle":case"center":o=i/2-u/2-t[0];break;case"bottom":o=i-u-d;break}a=a||0,o=o||0,isNaN(c)&&(c=r-h-a-(s||0)),isNaN(u)&&(u=i-d-o-(l||0));var m=new an(a+t[3],o+t[0],c,u);return m.margin=t,m}function G5(n,e,t,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!o&&!s)return!1;var c;if(l==="raw")c=n.type==="group"?new an(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(c=n.getBoundingRect(),n.needLocalTransform()){var u=n.getLocalTransform();c=c.clone(),c.applyTransform(u)}var d=Za(kt({width:c.width,height:c.height},e),t,r),h=o?d.x-c.x:0,f=s?d.y-c.y:0;return l==="raw"?(a.x=h,a.y=f):(a.x+=h,a.y+=f),a===n&&n.markRedraw(),!0}function dut(n,e){return n[cw[e][0]]!=null||n[cw[e][1]]!=null&&n[cw[e][2]]!=null}function fI(n){var e=n.layoutMode||n.constructor.layoutMode;return It(e)?e:e?{type:e}:null}function Sy(n,e,t){var r=t&&t.ignoreSize;!Fe(r)&&(r=[r,r]);var i=o(cw[0],0),a=o(cw[1],1);c(cw[0],n,i),c(cw[1],n,a);function o(u,d){var h={},f=0,m={},v=0,y=2;if(oN(u,function(T){m[T]=n[T]}),oN(u,function(T){s(e,T)&&(h[T]=m[T]=e[T]),l(h,T)&&f++,l(m,T)&&v++}),r[d])return l(e,u[1])?m[u[2]]=null:l(e,u[2])&&(m[u[1]]=null),m;if(v===y||!f)return m;if(f>=y)return h;for(var w=0;w<u.length;w++){var _=u[w];if(!s(h,_)&&s(n,_)){h[_]=n[_];break}}return h}function s(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){oN(u,function(f){d[f]=h[f]})}}function KT(n){return iTe({},n)}function iTe(n,e){return e&&n&&oN(rTe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var hut=Gn(),Dn=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=WT("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=fI(this),a=i?KT(t):{},o=r.getTheme();en(t,o.get(this.mainType)),en(t,this.getDefaultOption()),i&&Sy(t,a,i)},e.prototype.mergeOption=function(t,r){en(this.option,t,!0);var i=fI(this);i&&Sy(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!nlt(t))return t.defaultOption;var r=hut(this);if(!r.defaultOption){for(var i=[],a=t;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=en(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return SM(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(br);a1e(Dn,br);D5(Dn);Qct(Dn);Jct(Dn,fut);function fut(n){var e=[];return Z(Dn.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=$e(e,function(t){return _f(t).main}),n!=="dataset"&&dn(e,"dataset")<=0&&e.unshift("dataset"),e}var aTe="";typeof navigator<"u"&&(aTe=navigator.platform||"");var sS="rgba(0, 0, 0, 0.2)";const put={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:sS,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:sS,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:sS,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:sS,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:sS,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:sS,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:aTe.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var oTe=pt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Zu="original",$s="arrayRows",Qu="objectRows",Wf="keyedColumns",ly="typedArray",sTe="unknown",If="column",XT="row",Ko={Must:1,Might:2,Not:3},lTe=Gn();function gut(n){lTe(n).datasetMap=pt()}function cTe(n,e,t){var r={},i=lK(e);if(!i||!n)return r;var a=[],o=[],s=e.ecModel,l=lTe(s).datasetMap,c=i.uid+"_"+t.seriesLayoutBy,u,d;n=n.slice(),Z(n,function(v,y){var w=It(v)?v:n[y]={name:v};w.type==="ordinal"&&u==null&&(u=y,d=m(w)),r[w.name]=[]});var h=l.get(c)||l.set(c,{categoryWayDim:d,valueWayDim:0});Z(n,function(v,y){var w=v.name,_=m(v);if(u==null){var T=h.valueWayDim;f(r[w],T,_),f(o,T,_),h.valueWayDim+=_}else if(u===y)f(r[w],0,_),f(a,0,_);else{var T=h.categoryWayDim;f(r[w],T,_),f(o,T,_),h.categoryWayDim+=_}});function f(v,y,w){for(var _=0;_<w;_++)v.push(y+_)}function m(v){var y=v.dimsDef;return y?y.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function sK(n,e,t){var r={},i=lK(n);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===Qu||a===Wf)&&Z(o,function(u,d){(It(u)?u.name:u)==="name"&&(s=d)});var l=function(){for(var u={},d={},h=[],f=0,m=Math.min(5,t);f<m;f++){var v=dTe(e.data,a,e.seriesLayoutBy,o,e.startIndex,f);h.push(v);var y=v===Ko.Not;if(y&&u.v==null&&f!==s&&(u.v=f),(u.n==null||u.n===u.v||!y&&h[u.n]===Ko.Not)&&(u.n=f),w(u)&&h[u.n]!==Ko.Not)return u;y||(v===Ko.Might&&d.v==null&&f!==s&&(d.v=f),(d.n==null||d.n===d.v)&&(d.n=f))}function w(_){return _.v!=null&&_.n!=null}return w(u)?u:w(d)?d:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function lK(n){var e=n.get("data",!0);if(!e)return SM(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Ma).models[0]}function mut(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:SM(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Ma).models}function uTe(n,e){return dTe(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function dTe(n,e,t,r,i,a){var o,s=5;if(Xl(n))return Ko.Not;var l,c;if(r){var u=r[a];It(u)?(l=u.name,c=u.type):it(u)&&(l=u)}if(c!=null)return c==="ordinal"?Ko.Must:Ko.Not;if(e===$s){var d=n;if(t===XT){for(var h=d[a],f=0;f<(h||[]).length&&f<s;f++)if((o=A(h[i+f]))!=null)return o}else for(var f=0;f<d.length&&f<s;f++){var m=d[i+f];if(m&&(o=A(m[a]))!=null)return o}}else if(e===Qu){var v=n;if(!l)return Ko.Not;for(var f=0;f<v.length&&f<s;f++){var y=v[f];if(y&&(o=A(y[l]))!=null)return o}}else if(e===Wf){var w=n;if(!l)return Ko.Not;var h=w[l];if(!h||Xl(h))return Ko.Not;for(var f=0;f<h.length&&f<s;f++)if((o=A(h[f]))!=null)return o}else if(e===Zu)for(var _=n,f=0;f<_.length&&f<s;f++){var y=_[f],T=zT(y);if(!Fe(T))return Ko.Not;if((o=A(T[a]))!=null)return o}function A(C){var k=it(C);if(C!=null&&Number.isFinite(Number(C))&&C!=="")return k?Ko.Might:Ko.Not;if(k&&C!=="-")return Ko.Must}return Ko.Not}var S8=pt();function vut(n,e){vl(S8.get(n)==null&&e),S8.set(n,e)}function yut(n,e,t){var r=S8.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var _le=Gn(),but=Gn(),cK=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Or(this.get("color",!0)),a=this.get("colorLayer",!0);return hTe(this,_le,i,a,e,t,r)},n.prototype.clearColorPalette=function(){xut(this,_le)},n}();function T8(n,e,t,r){var i=Or(n.get(["aria","decal","decals"]));return hTe(n,but,i,null,e,t,r)}function wut(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function hTe(n,e,t,r,i,a,o){a=a||n;var s=e(a),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var u=o==null||!r?t:wut(r,o);if(u=u||t,!(!u||!u.length)){var d=u[l];return i&&(c[i]=d),s.paletteIdx=(l+1)%u.length,d}}function xut(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var LO,lk,Sle,Tle="\0_ec_inner",_ut=1,uK=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,o,s){a=a||{},this.option=null,this._theme=new br(a),this._locale=new br(o),this._optionManager=s},e.prototype.setOption=function(t,r,i){var a=kle(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,kle(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?Sle(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&Z(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=pt(),c=r&&r.replaceMergeMainTypeMap;gut(this),Z(t,function(d,h){d!=null&&(Dn.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?Rt(d):en(i[h],d,!0))}),c&&c.each(function(d,h){Dn.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Dn.topologicalTravel(s,Dn.getAllClassMainTypes(),u,this);function u(d){var h=yut(this,d,Or(t[d])),f=a.get(d),m=f?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",v=e1e(f,h,m);Wst(v,d,Dn),i[d]=null,a.set(d,null),o.set(d,0);var y=[],w=[],_=0,T;Z(v,function(A,C){var k=A.existing,M=A.newOption;if(!M)k&&(k.mergeOption({},this),k.optionUpdated({},!1));else{var P=d==="series",O=Dn.getClass(d,A.keyInfo.subType,!P);if(!O)return;if(d==="tooltip"){if(T)return;T=!0}if(k&&k.constructor===O)k.name=A.keyInfo.name,k.mergeOption(M,this),k.optionUpdated(M,!1);else{var j=Ie({componentIndex:C},A.keyInfo);k=new O(M,this,this,j),Ie(k,j),A.brandNew&&(k.__requireNewView=!0),k.init(M,this,this),k.optionUpdated(null,!0)}}k?(y.push(k.option),w.push(k),_++):(y.push(void 0),w.push(void 0))},this),i[d]=y,a.set(d,w),o.set(d,_),d==="series"&&LO(this)}this._seriesIndices||LO(this)},e.prototype.getOption=function(){var t=Rt(this.option);return Z(t,function(r,i){if(Dn.hasClass(i)){for(var a=Or(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!lI(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,t[i]=a}}),delete t[Tle],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],Z(Or(i),function(c){s[c]&&l.push(s[c])})):a!=null?l=Ele("id",a,s):o!=null?l=Ele("name",o,s):l=gr(s,function(c){return!!c}),Ale(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=s(r),o=a?this.queryComponents(a):gr(this._componentsMap.get(i),function(c){return!!c});return l(Ale(o,t));function s(c){var u=i+"Index",d=i+"Id",h=i+"Name";return c&&(c[u]!=null||c[d]!=null||c[h]!=null)?{mainType:i,index:c[u],id:c[d],name:c[h]}:null}function l(c){return t.filter?gr(c,t.filter):c}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(Et(t)){var o=r,s=t;a.each(function(d,h){for(var f=0;d&&f<d.length;f++){var m=d[f];m&&s.call(o,h,m,m.componentIndex)}})}else for(var l=it(t)?a.get(t):It(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(i,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=Ya(t,null);return gr(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return gr(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return gr(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){lk(this),Z(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){Z(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){lk(this),Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return Z(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return lk(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){lk(this);var i=[];Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=pt(i)},e.prototype.restoreData=function(t){LO(this);var r=this._componentsMap,i=[];r.each(function(a,o){Dn.hasClass(o)&&i.push(o)}),Dn.topologicalTravel(i,Dn.getAllClassMainTypes(),function(a){Z(r.get(a),function(o){o&&(a!=="series"||!Sut(o,t))&&o.restoreData()})})},e.internalField=function(){LO=function(t){var r=t._seriesIndices=[];Z(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=pt(r)},lk=function(t){},Sle=function(t,r){t.option={},t.option[Tle]=_ut,t._componentsMap=pt({series:[]}),t._componentsCount=pt();var i=r.aria;It(i)&&i.enabled==null&&(i.enabled=!0),Tut(r,t._theme.option),en(r,put,!1),t._mergeOption(r,null)}}(),e}(br);function Sut(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function Tut(n,e){var t=n.color&&!n.colorLayer;Z(e,function(r,i){i==="colorLayer"&&t||Dn.hasClass(i)||(typeof r=="object"?n[i]=n[i]?en(n[i],r,!1):Rt(r):n[i]==null&&(n[i]=r))})}function Ele(n,e,t){if(Fe(e)){var r=pt();return Z(e,function(a){if(a!=null){var o=Ya(a,null);o!=null&&r.set(a,!0)}}),gr(t,function(a){return a&&r.get(a[n])})}else{var i=Ya(e,null);return gr(t,function(a){return a&&i!=null&&a[n]===i})}}function Ale(n,e){return e.hasOwnProperty("subType")?gr(n,function(t){return t&&t.subType===e.subType}):n}function kle(n){var e=pt();return n&&Z(Or(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Oa(uK,cK);var Eut=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],fTe=function(){function n(e){Z(Eut,function(t){this[t]=ct(e[t],e)},this)}return n}(),y6={},IM=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];Z(y6,function(i,a){var o=i.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){Z(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){y6[e]=t},n.get=function(e){return y6[e]},n}(),Aut=/^(min|max)?(.+)$/,kut=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(Z(Or(e.series),function(o){o&&o.data&&Xl(o.data)&&$2(o.data)}),Z(Or(e.dataset),function(o){o&&o.source&&Xl(o.source)&&$2(o.source)})),e=Rt(e);var i=this._optionBackup,a=Cut(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Rt(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Rt(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,c=i.length;l<c;l++)Dut(i[l].query,t,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!Mut(o,this._currentMediaIndices)&&(s=$e(o,function(u){return Rt(u===-1?a.option:i[u].option)})),this._currentMediaIndices=o,s},n}();function Cut(n,e,t){var r=[],i,a,o=n.baseOption,s=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((d||u)&&(n.options=n.media=null),a=n),u&&Fe(c)&&Z(c,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),h(a),Z(l,function(f){return h(f)}),Z(r,function(f){return h(f.option)});function h(f){Z(e,function(m){m(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function Dut(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return Z(n,function(a,o){var s=o.match(Aut);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();Iut(r[c],a,l)||(i=!1)}}),i}function Iut(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function Mut(n,e){return n.join(",")===e.join(",")}var Pd=Z,pI=It,Cle=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function b6(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=Cle.length;t<r;t++){var i=Cle[t],a=e.normal,o=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?en(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),o&&o[i]&&(n[i]=n[i]||{},n[i].emphasis?en(n[i].emphasis,o[i]):n[i].emphasis=o[i],o[i]=null)}}function Ps(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,kt(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function iC(n){Ps(n,"itemStyle"),Ps(n,"lineStyle"),Ps(n,"areaStyle"),Ps(n,"label"),Ps(n,"labelLine"),Ps(n,"upperLabel"),Ps(n,"edgeLabel")}function Aa(n,e){var t=pI(n)&&n[e],r=pI(t)&&t.textStyle;if(r)for(var i=0,a=Rse.length;i<a;i++){var o=Rse[i];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Cu(n){n&&(iC(n),Aa(n,"label"),n.emphasis&&Aa(n.emphasis,"label"))}function Put(n){if(pI(n)){b6(n),iC(n),Aa(n,"label"),Aa(n,"upperLabel"),Aa(n,"edgeLabel"),n.emphasis&&(Aa(n.emphasis,"label"),Aa(n.emphasis,"upperLabel"),Aa(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(b6(e),Cu(e));var t=n.markLine;t&&(b6(t),Cu(t));var r=n.markArea;r&&Cu(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!Xl(a))for(var o=0;o<a.length;o++)Cu(a[o]);Z(n.categories,function(c){iC(c)})}if(i&&!Xl(i))for(var o=0;o<i.length;o++)Cu(i[o]);if(e=n.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)Cu(s[o]);if(t=n.markLine,t&&t.data)for(var l=t.data,o=0;o<l.length;o++)Fe(l[o])?(Cu(l[o][0]),Cu(l[o][1])):Cu(l[o]);n.type==="gauge"?(Aa(n,"axisLabel"),Aa(n,"title"),Aa(n,"detail")):n.type==="treemap"?(Ps(n.breadcrumb,"itemStyle"),Z(n.levels,function(c){iC(c)})):n.type==="tree"&&iC(n.leaves)}}function Qp(n){return Fe(n)?n:n?[n]:[]}function Dle(n){return(Fe(n)?n[0]:n)||{}}function Out(n,e){Pd(Qp(n.series),function(r){pI(r)&&Put(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Pd(t,function(r){Pd(Qp(n[r]),function(i){i&&(Aa(i,"axisLabel"),Aa(i.axisPointer,"label"))})}),Pd(Qp(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Aa(i,"axisLabel"),Aa(i&&i.axisPointer,"label")}),Pd(Qp(n.calendar),function(r){Ps(r,"itemStyle"),Aa(r,"dayLabel"),Aa(r,"monthLabel"),Aa(r,"yearLabel")}),Pd(Qp(n.radar),function(r){Aa(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Pd(Qp(n.geo),function(r){pI(r)&&(Cu(r),Pd(Qp(r.regions),function(i){Cu(i)}))}),Pd(Qp(n.timeline),function(r){Cu(r),Ps(r,"label"),Ps(r,"itemStyle"),Ps(r,"controlStyle",!0);var i=r.data;Fe(i)&&Z(i,function(a){It(a)&&(Ps(a,"label"),Ps(a,"itemStyle"))})}),Pd(Qp(n.toolbox),function(r){Ps(r,"iconStyle"),Pd(r.feature,function(i){Ps(i,"iconStyle")})}),Aa(Dle(n.axisPointer),"label"),Aa(Dle(n.tooltip).axisPointer,"label")}function Rut(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function Nut(n,e,t,r){for(var i=e.split(","),a=n,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=t)}function Ile(n){n&&Z(Lut,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var Lut=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],jut=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],w6=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function ck(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<w6.length;t++){var r=w6[t][1],i=w6[t][0];e[r]!=null&&(e[i]=e[r])}}function Mle(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function Ple(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function Fut(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function pTe(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&pTe(n[t].children,e)}function gTe(n,e){Out(n,e),n.series=Or(n.series),Z(n.series,function(t){if(It(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),Mle(t.label);var i=t.data;if(i&&!Xl(i))for(var a=0;a<i.length;a++)Mle(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=Rut(t,"pointer.color");o!=null&&Nut(t,"itemStyle.color",o)}else if(r==="bar"){ck(t),ck(t.backgroundStyle),ck(t.emphasis);var i=t.data;if(i&&!Xl(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(ck(i[a]),ck(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),Ple(t),pTe(t.data,Ple)}else r==="graph"||r==="sankey"?Fut(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&kt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),Ile(t)}}),n.dataRange&&(n.visualMap=n.dataRange),Z(jut,function(t){var r=n[t];r&&(Fe(r)||(r=[r]),Z(r,function(i){Ile(i)}))})}function $ut(n){var e=pt();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(But)}function But(n){Z(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(c,u,d){var h=o.get(e.stackedDimension,d);if(isNaN(h))return i;var f,m;s?m=o.getRawIndex(d):f=o.get(e.stackedByDimension,d);for(var v=NaN,y=t-1;y>=0;y--){var w=n[y];if(s||(m=w.data.rawIndexOf(w.stackedByDimension,f)),m>=0){var _=w.data.getByRawIndex(w.stackResultDimension,m);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=Lst(h,_),v=_;break}}}return r[0]=h,r[1]=v,r})})}var q5=function(){function n(e){this.data=e.data||(e.sourceFormat===Wf?{}:[]),this.sourceFormat=e.sourceFormat||sTe,this.seriesLayoutBy=e.seriesLayoutBy||If,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&uTe(this,r)===Ko.Must&&(i.type="ordinal")}}return n}();function dK(n){return n instanceof q5}function E8(n,e,t){t=t||mTe(n);var r=e.seriesLayoutBy,i=Vut(n,t,r,e.sourceHeader,e.dimensions),a=new q5({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Rt(e)});return a}function hK(n){return new q5({data:n,sourceFormat:Xl(n)?ly:Zu})}function Uut(n){return new q5({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Rt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function mTe(n){var e=sTe;if(Xl(n))e=ly;else if(Fe(n)){n.length===0&&(e=$s);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(Fe(i)||Xl(i)){e=$s;break}else if(It(i)){e=Qu;break}}}}else if(It(n)){for(var a in n)if(dt(n,a)&&Fs(n[a])){e=Wf;break}}return e}function Vut(n,e,t,r,i){var a,o;if(!n)return{dimensionsDefine:Ole(i),startIndex:o,dimensionsDetectedCount:a};if(e===$s){var s=n;r==="auto"||r==null?Rle(function(c){c!=null&&c!=="-"&&(it(c)?o==null&&(o=1):o=0)},t,s,10):o=Jn(r)?r:r?1:0,!i&&o===1&&(i=[],Rle(function(c,u){i[u]=c!=null?c+"":""},t,s,1/0)),a=i?i.length:t===XT?s.length:s[0]?s[0].length:null}else if(e===Qu)i||(i=zut(n));else if(e===Wf)i||(i=[],Z(n,function(c,u){i.push(u)}));else if(e===Zu){var l=zT(n[0]);a=Fe(l)&&l.length||1}return{startIndex:o,dimensionsDefine:Ole(i),dimensionsDetectedCount:a}}function zut(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return In(t)}function Ole(n){if(n){var e=pt();return $e(n,function(t,r){t=It(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function Rle(n,e,t,r){if(e===XT)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function vTe(n){var e=n.sourceFormat;return e===Qu||e===Wf}var Tb,Eb,Ab,Nle,Lle,yTe=function(){function n(e,t){var r=dK(e)?e:hK(e);this._source=r;var i=this._data=r.data;r.sourceFormat===ly&&(this._offset=0,this._dimSize=t,this._data=i),Lle(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;Lle=function(o,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,h=l.dimensionsDefine,f=Nle[fK(c,u)];if(Ie(o,f),c===ly)o.getItem=t,o.count=i,o.fillStorage=r;else{var m=bTe(c,u);o.getItem=ct(m,null,s,d,h);var v=wTe(c,u);o.count=ct(v,null,s,d,h)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*o,d=0;d<c;d++)s[d]=l[u+d];return s},r=function(o,s,l,c){for(var u=this._data,d=this._dimSize,h=0;h<d;h++){for(var f=c[h],m=f[0]==null?1/0:f[0],v=f[1]==null?-1/0:f[1],y=s-o,w=l[h],_=0;_<y;_++){var T=u[_*d+h];w[o+_]=T,T<m&&(m=T),T>v&&(v=T)}f[0]=m,f[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};Nle=(e={},e[$s+"_"+If]={pure:!0,appendData:a},e[$s+"_"+XT]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Qu]={pure:!0,appendData:a},e[Wf]={pure:!0,appendData:function(o){var s=this._data;Z(o,function(l,c){for(var u=s[c]||(s[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[Zu]={appendData:a},e[ly]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),n}(),jle=function(n,e,t,r){return n[r]},Hut=(Tb={},Tb[$s+"_"+If]=function(n,e,t,r){return n[r+e]},Tb[$s+"_"+XT]=function(n,e,t,r,i){r+=e;for(var a=i||[],o=n,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},Tb[Qu]=jle,Tb[Wf]=function(n,e,t,r,i){for(var a=i||[],o=0;o<t.length;o++){var s=t[o].name,l=n[s];a[o]=l?l[r]:null}return a},Tb[Zu]=jle,Tb);function bTe(n,e){var t=Hut[fK(n,e)];return t}var Fle=function(n,e,t){return n.length},Gut=(Eb={},Eb[$s+"_"+If]=function(n,e,t){return Math.max(0,n.length-e)},Eb[$s+"_"+XT]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},Eb[Qu]=Fle,Eb[Wf]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},Eb[Zu]=Fle,Eb);function wTe(n,e){var t=Gut[fK(n,e)];return t}var x6=function(n,e,t){return n[e]},qut=(Ab={},Ab[$s]=x6,Ab[Qu]=function(n,e,t){return n[t]},Ab[Wf]=x6,Ab[Zu]=function(n,e,t){var r=zT(n);return r instanceof Array?r[e]:r},Ab[ly]=x6,Ab);function xTe(n){var e=qut[n];return e}function fK(n,e){return n===$s?n+"_"+e:n}function dT(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var o=n.getDimensionIndex(t),s=i.getDimensionProperty(o);return xTe(a)(r,o,s)}else{var l=r;return a===Zu&&(l=zT(r)),l}}}}var Wut=/\{@(.+?)\}/g,W5=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,h=d==="series",f=r.userOutput&&r.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:i,color:c,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,o){t=t||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),i!=null&&Fe(l.value)&&(l.value=l.value[i]),!a){var c=s.getItemModel(e);a=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Et(a))return l.status=t,l.dimensionIndex=i,a(l);if(it(a)){var u=nTe(a,l);return u.replace(Wut,function(d,h){var f=h.length,m=h;m.charAt(0)==="["&&m.charAt(f-1)==="]"&&(m=+m.slice(1,f-1));var v=dT(s,e,m);if(o&&Fe(o.interpolatedValue)){var y=s.getDimensionIndex(m);y>=0&&(v=o.interpolatedValue[y])}return v!=null?v+"":""})}},n.prototype.getRawValue=function(e,t){return dT(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function $le(n){var e,t;return It(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function FC(n){return new Yut(n)}var Yut=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=u(this._modBy),s=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(o!==l||s!==c)&&(a="reset");function u(_){return!(_>=1)&&(_=1),_}var d;(this._dirty||a==="reset")&&(this._dirty=!1,d=this._doReset(r)),this._modBy=l,this._modDataCount=c;var h=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,m=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(d||f<m)){var v=this._progress;if(Fe(v))for(var y=0;y<v.length;y++)this._doProgress(v[y],f,m,l,c);else this._doProgress(v,f,m,l,c)}this._dueIndex=m;var w=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=w}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){Ble.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:Ble.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Fe(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),Ble=function(){var n,e,t,r,i,a={reset:function(l,c,u,d){e=l,n=c,t=u,r=d,i=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<n?e++:null}function s(){var l=e%i*t+Math.ceil(e/i),c=e>=n?null:l<r?l:e;return e++,c}}();function cy(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!Jn(n)&&n!=null&&n!=="-"&&(n=+$f(n)),n==null||n===""?NaN:Number(n))}var Kut=pt({number:function(n){return parseFloat(n)},time:function(n){return+$f(n)},trim:function(n){return it(n)?Zd(n):n}});function _Te(n){return Kut.get(n)}var STe={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},Xut=function(){function n(e,t){if(!Jn(t)){var r="";fr(r)}this._opFn=STe[e],this._rvalFloat=$g(t)}return n.prototype.evaluate=function(e){return Jn(e)?this._opFn(e,this._rvalFloat):this._opFn($g(e),this._rvalFloat)},n}(),TTe=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=Jn(e)?e:$g(e),i=Jn(t)?t:$g(t),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=it(e),l=it(t);s&&(r=l?e:0),l&&(i=s?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),Zut=function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=$g(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=$g(e)===this._rvalFloat)}return this._isEQ?t:!t},n}();function Qut(n,e){return n==="eq"||n==="ne"?new Zut(n==="eq",e):dt(STe,n)?new Xut(n,e):null}var Jut=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return cy(e,t)},n}();function edt(n,e){var t=new Jut,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,o="";n.seriesLayoutBy!==If&&fr(o);var s=[],l={},c=n.dimensionsDefine;if(c)Z(c,function(v,y){var w=v.name,_={index:y,name:w,displayName:v.displayName};if(s.push(_),w!=null){var T="";dt(l,w)&&fr(T),l[w]=_}});else for(var u=0;u<n.dimensionsDetectedCount;u++)s.push({index:u});var d=bTe(i,If);e.__isBuiltIn&&(t.getRawDataItem=function(v){return d(r,a,s,v)},t.getRawData=ct(tdt,null,n)),t.cloneRawData=ct(ndt,null,n);var h=wTe(i,If);t.count=ct(h,null,r,a,s);var f=xTe(i);t.retrieveValue=function(v,y){var w=d(r,a,s,v);return m(w,y)};var m=t.retrieveValueFromItem=function(v,y){if(v!=null){var w=s[y];if(w)return f(v,y,w.name)}};return t.getDimensionInfo=ct(rdt,null,s,l),t.cloneAllDimensionInfo=ct(idt,null,s),t}function tdt(n){var e=n.sourceFormat;if(!pK(e)){var t="";fr(t)}return n.data}function ndt(n){var e=n.sourceFormat,t=n.data;if(!pK(e)){var r="";fr(r)}if(e===$s){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].slice());return i}else if(e===Qu){for(var i=[],a=0,o=t.length;a<o;a++)i.push(Ie({},t[a]));return i}}function rdt(n,e,t){if(t!=null){if(Jn(t)||!isNaN(t)&&!dt(e,t))return n[t];if(dt(e,t))return e[t]}}function idt(n){return Rt(n)}var ETe=pt();function adt(n){n=Rt(n);var e=n.type,t="";e||fr(t);var r=e.split(":");r.length!==2&&fr(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,ETe.set(e,n)}function odt(n,e,t){var r=Or(n),i=r.length,a="";i||fr(a);for(var o=0,s=i;o<s;o++){var l=r[o];e=sdt(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function sdt(n,e,t,r){var i="";e.length||fr(i),It(n)||fr(i);var a=n.type,o=ETe.get(a);o||fr(i);var s=$e(e,function(c){return edt(c,o)}),l=Or(o.transform({upstream:s[0],upstreamList:s,config:Rt(n.config)}));return $e(l,function(c,u){var d="";It(c)||fr(d),c.data||fr(d);var h=mTe(c.data);pK(h)||fr(d);var f,m=e[0];if(m&&u===0&&!c.dimensions){var v=m.startIndex;v&&(c.data=m.data.slice(0,v).concat(c.data)),f={seriesLayoutBy:If,sourceHeader:v,dimensions:m.metaRawOption.dimensions}}else f={seriesLayoutBy:If,sourceHeader:0,dimensions:c.dimensions};return E8(c.data,f,null)})}function pK(n){return n===$s||n===Qu}var Y5="undefined",ldt=typeof Uint32Array===Y5?Array:Uint32Array,cdt=typeof Uint16Array===Y5?Array:Uint16Array,ATe=typeof Int32Array===Y5?Array:Int32Array,Ule=typeof Float64Array===Y5?Array:Float64Array,kTe={float:Ule,int:ATe,ordinal:Array,number:Array,time:Ule},_6;function lS(n){return n>65535?ldt:cdt}function cS(){return[1/0,-1/0]}function udt(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function Vle(n,e,t,r,i){var a=kTe[t||"float"];if(i){var o=n[e],s=o&&o.length;if(s!==r){for(var l=new a(r),c=0;c<s;c++)l[c]=o[c];n[e]=l}}else n[e]=new a(r)}var A8=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=pt()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=_6[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],vTe(i),this._dimensions=$e(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new kTe[t||"float"](this._rawCount),this._rawExtent[a]=cS(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=cS());for(var l=a[e],c=o;c<s;c++){var u=r[c]=t.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}i.ordinalMeta=t,i.ordinalOffset=s,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t||0),c=0;c<a;c++){var u=i[c];Vle(r,c,u.type,l,!0)}for(var d=[],h=s;h<l;h++)for(var f=h-s,m=0;m<a;m++){var u=i[m],v=_6.arrayRows.call(this,e[f]||d,u.property,f,m);r[m][h]=v;var y=o[m];v<y[0]&&(y[0]=v),v>y[1]&&(y[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=$e(o,function(_){return _.property}),u=0;u<s;u++){var d=o[u];l[u]||(l[u]=cS()),Vle(a,u,d.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var h=[],f=e;f<t;f++){h=i.getItem(f,h);for(var m=0;m<s;m++){var v=a[m],y=this._dimValueGetter(h,c[m],f,m);v[f]=y;var w=l[m];y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=o+1;else if(t[o]>e)a=o-1;else return o}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var h=this.getRawIndex(u),f=t-a[h],m=Math.abs(f);m<=r&&((m<s||m===s&&f>=0&&l<0)&&(s=m,l=f,c=0),f===l&&(o[c++]=u))}return o.length=c,o},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=lS(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=lS(r._rawCount),o=new a(i),s=[],l=e.length,c=0,u=e[0],d=r._chunks,h=0;h<i;h++){var f=void 0,m=r.getRawIndex(h);if(l===0)f=t(h);else if(l===1){var v=d[u][m];f=t(v,h)}else{for(var y=0;y<l;y++)s[y]=d[e[y]][m];s[y]=h,f=t.apply(null,s)}f&&(o[c++]=m)}return c<i&&(r._indices=o),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=In(e),a=i.length;if(!a)return this;var o=t.count(),s=lS(t._rawCount),l=new s(o),c=0,u=i[0],d=e[u][0],h=e[u][1],f=t._chunks,m=!1;if(!t._indices){var v=0;if(a===1){for(var y=f[i[0]],w=0;w<r;w++){var _=y[w];(_>=d&&_<=h||isNaN(_))&&(l[c++]=v),v++}m=!0}else if(a===2){for(var y=f[i[0]],T=f[i[1]],A=e[i[1]][0],C=e[i[1]][1],w=0;w<r;w++){var _=y[w],k=T[w];(_>=d&&_<=h||isNaN(_))&&(k>=A&&k<=C||isNaN(k))&&(l[c++]=v),v++}m=!0}}if(!m)if(a===1)for(var w=0;w<o;w++){var M=t.getRawIndex(w),_=f[i[0]][M];(_>=d&&_<=h||isNaN(_))&&(l[c++]=M)}else for(var w=0;w<o;w++){for(var P=!0,M=t.getRawIndex(w),O=0;O<a;O++){var j=i[O],_=f[j][M];(_<e[j][0]||_>e[j][1])&&(P=!1)}P&&(l[c++]=t.getRawIndex(w))}return c<o&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],o=t.length,s=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=cS();for(var d=0;d<s;d++){for(var h=e.getRawIndex(d),f=0;f<o;f++)l[f]=i[t[f]][h];l[o]=d;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(a[0]=m,m=a);for(var u=0;u<m.length;u++){var v=t[u],y=m[u],w=c[v],_=i[v];_&&(_[h]=y),y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,h,f=new(lS(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=c;for(var m=1;m<o-1;m+=l){for(var v=Math.min(m+l,o-1),y=Math.min(m+l*2,o),w=(y+v)/2,_=0,T=v;T<y;T++){var A=this.getRawIndex(T),C=a[A];isNaN(C)||(_+=C)}_/=y-v;var k=m,M=Math.min(m+l,o),P=m-1,O=a[c];u=-1,h=k;for(var j=-1,L=0,T=k;T<M;T++){var A=this.getRawIndex(T),C=a[A];if(isNaN(C)){L++,j<0&&(j=A);continue}d=Math.abs((P-w)*(C-O)-(P-T)*(_-O)),d>u&&(u=d,h=A)}L>0&&L<M-k&&(f[s++]=Math.min(j,h),h=Math.max(j,h)),f[s++]=h,c=h}return f[s++]=this.getRawIndex(o-1),r._count=s,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/t),o=i[e],s=this.count(),l=new(lS(this._rawCount))(Math.ceil(s/a)*2),c=0,u=0;u<s;u+=a){var d=u,h=o[this.getRawIndex(d)],f=u,m=o[this.getRawIndex(f)],v=a;u+a>s&&(v=s-u);for(var y=0;y<v;y++){var w=this.getRawIndex(u+y),_=o[w];_<h&&(h=_,d=u+y),_>m&&(m=_,f=u+y)}var T=this.getRawIndex(d),A=this.getRawIndex(f);d<f?(l[c++]=T,l[c++]=A):(l[c++]=A,l[c++]=T)}return r._count=c,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/t),c=o[e],u=this.count(),d=a._rawExtent[e]=cS(),h=new(lS(this._rawCount))(Math.ceil(u/l)),f=0,m=0;m<u;m+=l){l>u-m&&(l=u-m,s.length=l);for(var v=0;v<l;v++){var y=this.getRawIndex(m+v);s[v]=c[y]}var w=r(s),_=this.getRawIndex(Math.min(m+i(s,w)||0,u-1));c[_]=w,w<d[0]&&(d[0]=w),w>d[1]&&(d[1]=w),h[f++]=_}return a._count=f,a._indices=h,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][s],a);break;case 2:t(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[e[l]][s];c[l]=a,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=cS();if(!t)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],c=0;c<i;c++){var u=this.getRawIndex(c),d=t[u];d<s&&(s=d),d>l&&(l=d)}return o=[s,l],this._extent[e]=o,o},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&Lf(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?udt(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Rt(this._extent),e._rawExtent=Rt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return cy(t[a],this._dimensions[a])}_6={arrayRows:e,objectRows:function(t,r,i,a){return cy(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var o=t&&(t.value==null?t:t.value);return cy(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),CTe=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(jO(e)){var o=e,s=void 0,l=void 0,c=void 0;if(r){var u=t[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,a=[u._getVersionSign()]}else s=o.get("data",!0),l=Xl(s)?ly:Zu,a=[];var d=this._getSourceMetaRawOption()||{},h=c&&c.metaRawOption||{},f=Gt(d.seriesLayoutBy,h.seriesLayoutBy)||null,m=Gt(d.sourceHeader,h.sourceHeader),v=Gt(d.dimensions,h.dimensions),y=f!==h.seriesLayoutBy||!!m!=!!h.sourceHeader||v;i=y?[E8(s,{seriesLayoutBy:f,sourceHeader:m,dimensions:v},l)]:[]}else{var w=e;if(r){var _=this._applyTransform(t);i=_.sourceList,a=_.upstreamSignList}else{var T=w.get("source",!0);i=[E8(T,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&Hle(a)}var o,s=[],l=[];return Z(e,function(c){c.prepareSource();var u=c.getSource(i||0),d="";i!=null&&!u&&Hle(d),s.push(u),l.push(c._getVersionSign())}),r?o=odt(r,s,{datasetIndex:t.componentIndex}):i!=null&&(o=[Uut(s[0])]),{sourceList:o,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];jO(this._sourceHost)&&l?s=l._innerGetDataStore(e,t,r):(s=new A8,s.initData(new yTe(t,e.length),e)),o[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(jO(e)){var t=lK(e);return t?[t.getSourceManager()]:[]}else return $e(mut(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(jO(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function zle(n){var e=n.option.transform;e&&$2(n.option.transform)}function jO(n){return n.mainType==="series"}function Hle(n){throw new Error(n)}var ddt="line-height:1";function DTe(n){var e=n.lineHeight;return e==null?ddt:"line-height:"+ll(e+"")+"px"}function ITe(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",o=n.fontSize||14,s=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+ll(r+"")+"px;color:"+ll(t)+";font-weight:"+ll(i+""),valueStyle:"font-size:"+ll(o+"")+"px;color:"+ll(a)+";font-weight:"+ll(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var hdt=[0,10,20,30],fdt=["",`
`,`

`,`


`];function go(n,e){return e.type=n,e}function k8(n){return n.type==="section"}function MTe(n){return k8(n)?pdt:gdt}function PTe(n){if(k8(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return Z(n.blocks,function(i){var a=PTe(i);a>=e&&(e=a+ +(r&&(!a||k8(i)&&!i.noHeader)))}),e}return 0}function pdt(n,e,t,r){var i=e.noHeader,a=mdt(PTe(e)),o=[],s=e.blocks||[];vl(!s||Fe(s)),s=s||[];var l=n.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(dt(c,l)){var u=new TTe(c[l],null);s.sort(function(v,y){return u.evaluate(v.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}Z(s,function(v,y){var w=e.valueFormatter,_=MTe(v)(w?Ie(Ie({},n),{valueFormatter:w}):n,v,y>0?a.html:0,r);_!=null&&o.push(_)});var d=n.renderMode==="richText"?o.join(a.richText):C8(r,o.join(""),i?t:a.html);if(i)return d;var h=_8(e.header,"ordinal",n.useUTC),f=ITe(r,n.renderMode).nameStyle,m=DTe(r);return n.renderMode==="richText"?OTe(n,h,f)+a.richText+d:C8(r,'<div style="'+f+";"+m+';">'+ll(h)+"</div>"+d,t)}function gdt(n,e,t,r){var i=n.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(A){return A=Fe(A)?A:[A],$e(A,function(C,k){return _8(C,Fe(f)?f[k]:f,c)})};if(!(a&&o)){var d=s?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":_8(l,"ordinal",c),f=e.valueType,m=o?[]:u(e.value,e.dataIndex),v=!s||!a,y=!s&&a,w=ITe(r,i),_=w.nameStyle,T=w.valueStyle;return i==="richText"?(s?"":d)+(a?"":OTe(n,h,_))+(o?"":bdt(n,m,v,y,T)):C8(r,(s?"":d)+(a?"":vdt(h,!s,_))+(o?"":ydt(m,v,y,T)),t)}}function Gle(n,e,t,r,i,a){if(n){var o=MTe(n),s={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return o(s,n,0,a)}}function mdt(n){return{html:hdt[n],richText:fdt[n]}}function C8(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",a=DTe(n);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function vdt(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+ll(n)+"</span>"}function ydt(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=Fe(n)?n:[n],'<span style="'+a+";"+r+'">'+$e(n,function(o){return ll(o)}).join("&nbsp;&nbsp;")+"</span>"}function OTe(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function bdt(n,e,t,r,i){var a=[i],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Fe(e)?e.join("  "):e,a)}function RTe(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return Kw(r)}function NTe(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var S6=function(){function n(){this.richTextStyles={},this._nextStyleNameId=XSe()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=cut({color:t,type:e,renderMode:r,markerId:i});return it(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};Fe(t)?Z(t,function(a){return Ie(r,a)}):Ie(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function LTe(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),l=Fe(s),c=RTe(e,t),u,d,h,f;if(o>1||l&&!o){var m=wdt(s,e,t,a,c);u=m.inlineValues,d=m.inlineValueTypes,h=m.blocks,f=m.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);f=u=dT(i,t,a[0]),d=v.type}else f=u=l?s[0]:s;var y=BY(e),w=y&&e.name||"",_=i.getName(t),T=r?w:_;return go("section",{header:w,noHeader:r||!y,sortParam:f,blocks:[go("nameValue",{markerType:"item",markerColor:c,name:T,noName:!Zd(T),value:u,valueType:d,dataIndex:t})].concat(h||[])})}function wdt(n,e,t,r,i){var a=e.getData(),o=Lf(n,function(d,h,f){var m=a.getDimensionInfo(f);return d=d||m&&m.tooltip!==!1&&m.displayName!=null},!1),s=[],l=[],c=[];r.length?Z(r,function(d){u(dT(a,t,d),d)}):Z(n,u);function u(d,h){var f=a.getDimensionInfo(h);!f||f.otherDims.tooltip===!1||(o?c.push(go("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:d,valueType:f.type})):(s.push(d),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var Tv=Gn();function FO(n,e){return n.getName(e)||n.getId(e)}var sN="__universalTransitionEnabled",ai=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=FC({count:_dt,reset:Sdt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=Tv(this).sourceManager=new CTe(this);a.prepareSource();var o=this.getInitialData(t,i);Wle(o,this),this.dataTask.context.data=o,Tv(this).dataBeforeProcessed=o,qle(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=fI(this),a=i?KT(t):{},o=this.subType;Dn.hasClass(o)&&(o+="Series"),en(t,r.getTheme().get(this.subType)),en(t,this.getDefaultOption()),Gw(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&Sy(t,a,i)},e.prototype.mergeOption=function(t,r){t=en(this.option,t,!0),this.fillDataTextStyle(t.data);var i=fI(this);i&&Sy(this.option,t,i);var a=Tv(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);Wle(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Tv(this).dataBeforeProcessed=o,qle(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!Xl(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&Gw(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=D8(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return Tv(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=D8(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}Tv(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return pt(t)},e.prototype.getSourceManager=function(){return Tv(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Tv(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return LTe({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Tn.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,o=cK.prototype.getColorFromPalette.call(this,t,r,i);return o||(o=a.getColorFromPalette(t,r,i)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var l=t[s],c=FO(o,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=In(t),i=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[FO(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[sN])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){It(o.selectedMap)||(o.selectedMap={});for(var c=o.selectedMap,u=0;u<l;u++){var d=r[u],h=FO(t,d);c[h]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(d)}}else if(s==="single"||s===!0){var f=r[l-1],h=FO(t,f);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return Dn.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Dn);Oa(ai,W5);Oa(ai,cK);a1e(ai,Dn);function qle(n){var e=n.name;BY(n)||(n.name=xdt(n)||e)}function xdt(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return Z(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function _dt(n){return n.model.getRawData().count()}function Sdt(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),Tdt}function Tdt(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Wle(n,e){Z(rI(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Yt(Edt,e))})}function Edt(n,e){var t=D8(n);return t&&t.setOutputEnd((e||this).count()),e}function D8(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}var Ni=function(){function n(){this.group=new Lt,this.uid=WT("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();VY(Ni);D5(Ni);function ZT(){var n=Gn();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var jTe=Gn(),Adt=ZT(),Vr=function(){function n(){this.group=new Lt,this.uid=WT("viewChart"),this.renderTask=FC({plan:kdt,reset:Cdt}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&Kle(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&Kle(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){Fy(this.group,e)},n.markUpdateMethod=function(e,t){jTe(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function Yle(n,e,t){n&&uI(n)&&(e==="emphasis"?Bg:Ug)(n,t)}function Kle(n,e,t){var r=qw(n,e),i=e&&e.highlightKey!=null?cct(e.highlightKey):null;r!=null?Z(Or(r),function(a){Yle(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){Yle(a,t,i)})}VY(Vr);D5(Vr);function kdt(n){return Adt(n.model)}function Cdt(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,o=n.view,s=i&&jTe(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,t,r,i),Ddt[l]}var Ddt={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},nL="\0__throttleOriginMethod",Xle="\0__throttleRate",Zle="\0__throttleType";function gK(n,e,t){var r,i=0,a=0,o=null,s,l,c,u;e=e||0;function d(){a=new Date().getTime(),o=null,n.apply(l,c||[])}var h=function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];r=new Date().getTime(),l=this,c=f;var v=u||e,y=u||t;u=null,s=r-(y?i:a)-v,clearTimeout(o),y?o=setTimeout(d,v):s>=0?d():o=setTimeout(d,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(f){u=f},h}function QT(n,e,t,r){var i=n[e];if(i){var a=i[nL]||i,o=i[Zle],s=i[Xle];if(s!==t||o!==r){if(t==null||!r)return n[e]=a;i=n[e]=gK(a,t,r==="debounce"),i[nL]=a,i[Zle]=r,i[Xle]=t}return i}}function gI(n,e){var t=n[e];t&&t[nL]&&(t.clear&&t.clear(),n[e]=t[nL])}var Qle=Gn(),Jle={itemStyle:Ww(z1e,!0),lineStyle:Ww(V1e,!0)},Idt={lineStyle:"stroke",itemStyle:"fill"};function FTe(n,e){var t=n.visualStyleMapper||Jle[e];return t||(console.warn("Unknown style type '"+e+"'."),Jle.itemStyle)}function $Te(n,e){var t=n.visualDrawType||Idt[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var Mdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=FTe(n,r),o=a(i),s=i.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var l=$Te(n,r),c=o[l],u=Et(c)?c:null,d=o.fill==="auto"||o.stroke==="auto";if(!o[l]||u||d){var h=n.getColorFromPalette(n.name,null,e.getSeriesCount());o[l]||(o[l]=h,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Et(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||Et(o.stroke)?h:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,m){var v=n.getDataParams(m),y=Ie({},o);y[l]=u(v),f.setItemVisual(m,"style",y)}}}},uk=new br,Pdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=FTe(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){uk.option=l[r];var c=i(uk),u=o.ensureUniqueItemVisual(s,"style");Ie(u,c),uk.option.decal&&(o.setItemVisual(s,"decal",uk.option.decal),uk.option.decal.dirty=!0),a in c&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Odt={performRawSeries:!0,overallReset:function(n){var e=pt();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),Qle(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),o=Qle(t).scope,s=t.visualStyleAccessPath||"itemStyle",l=$Te(t,s);a.each(function(c){var u=a.getRawIndex(c);i[u]=c}),r.each(function(c){var u=i[c],d=a.getItemVisual(u,"colorFromPalette");if(d){var h=a.ensureUniqueItemVisual(u,"style"),f=r.getName(c)||c+"",m=r.count();h[l]=t.getColorFromPalette(f,o,m)}})}})}},$O=Math.PI;function Rdt(n,e){e=e||{},kt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Lt,r=new Hn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new Yn({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Hn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new L5({shape:{startAngle:-$O/2,endAngle:-$O/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:$O*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:$O*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),u=n.getHeight()/2;e.showSpinner&&o.setShape({cx:c,cy:u}),a.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var BTe=function(){function n(e,t,r,i){this._stageTaskMap=pt(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=pt();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;Z(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";vl(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,o=this;Z(e,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var u=o._stageTaskMap.get(l.uid),d=u.seriesTaskMap,h=u.overallTask;if(h){var f,m=h.agentStubMap;m.each(function(y){s(i,y)&&(y.dirty(),f=!0)}),f&&h.dirty(),o.updatePayload(h,r);var v=o.getPerformArgs(h,i.block);m.each(function(y){y.perform(v)}),h.perform(v)&&(a=!0)}else d&&d.each(function(y,w){s(i,y)&&y.dirty();var _=o.getPerformArgs(y,i.block);_.skip=!l.performRawSeries&&t.isSeriesFiltered(y.context.model),o.updatePayload(y,r),y.perform(_)&&(a=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=pt(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,i).each(u);function u(d){var h=d.uid,f=s.set(h,o&&o.get(h)||FC({plan:$dt,reset:Bdt,count:Vdt}));f.context={model:d,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(d,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,o=t.overallTask=t.overallTask||FC({reset:Ndt});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=pt(),c=e.seriesType,u=e.getTargetSeries,d=!0,h=!1,f="";vl(!e.createOnAllSeries,f),c?r.eachRawSeriesByType(c,m):u?u(r,i).each(m):(d=!1,Z(r.getSeries(),m));function m(v){var y=v.uid,w=l.set(y,s&&s.get(y)||(h=!0,FC({reset:Ldt,onDirty:Fdt})));w.context={model:v,overallProgress:d},w.agent=o,w.__block=d,a._pipe(v,w)}h&&o.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return Et(e)&&(e={overallReset:e,seriesType:zdt(e)}),e.uid=WT("stageHandler"),t&&(e.visualType=t),e},n}();function Ndt(n){n.overallReset(n.ecModel,n.api,n.payload)}function Ldt(n){return n.overallProgress&&jdt}function jdt(){this.agent.dirty(),this.getDownstream().dirty()}function Fdt(){this.agent&&this.agent.dirty()}function $dt(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function Bdt(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Or(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?$e(e,function(t,r){return UTe(r)}):Udt}var Udt=UTe(0);function UTe(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Vdt(n){return n.data.count()}function zdt(n){rL=null;try{n(mI,VTe)}catch{}return rL}var mI={},VTe={},rL;zTe(mI,uK);zTe(VTe,fTe);mI.eachSeriesByType=mI.eachRawSeriesByType=function(n){rL=n};mI.eachComponent=function(n){n.mainType==="series"&&n.subType&&(rL=n.subType)};function zTe(n,e){for(var t in e.prototype)n[t]=pa}var ece=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Hdt={color:ece,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ece]};var As="#B9B8CE",tce="#100C2A",BO=function(){return{axisLine:{lineStyle:{color:As}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},nce=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],HTe={darkMode:!0,color:nce,backgroundColor:tce,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:As},pageTextStyle:{color:As}},textStyle:{color:As},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:As}},dataZoom:{borderColor:"#71708A",textStyle:{color:As},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:As}},timeline:{lineStyle:{color:As},label:{color:As},controlStyle:{color:As,borderColor:As}},calendar:{itemStyle:{color:tce},dayLabel:{color:As},monthLabel:{color:As},yearLabel:{color:As}},timeAxis:BO(),logAxis:BO(),valueAxis:BO(),categoryAxis:BO(),line:{symbol:"circle"},graph:{color:nce},gauge:{title:{color:As},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:As},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};HTe.categoryAxis.splitLine.show=!1;var Gdt=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(it(e)){var a=_f(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Z(e,function(l,c){for(var u=!1,d=0;d<o.length;d++){var h=o[d],f=c.lastIndexOf(h);if(f>0&&f===c.length-h.length){var m=c.slice(0,f);m!=="data"&&(t.mainType=m,t[h.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(i[c]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,a));function u(d,h,f,m){return d[f]==null||h[m||f]===d[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),I8=["symbol","symbolSize","symbolRotate","symbolOffset"],rce=I8.concat(["symbolKeepAspect"]),qdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<I8.length;o++){var s=I8[o],l=n.get(s);Et(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(Ie({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var c=In(i);function u(d,h){for(var f=n.getRawValue(h),m=n.getDataParams(h),v=0;v<c.length;v++){var y=c[v];d.setItemVisual(h,y,i[y](f,m))}}return{dataEach:a?u:null}}},Wdt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<rce.length;s++){var l=rce[s],c=o.getShallow(l,!0);c!=null&&i.setItemVisual(a,l,c)}}return{dataEach:t.hasItemOption?r:null}}};function mK(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function MM(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function GTe(n,e,t,r){switch(t){case"color":var i=n.ensureUniqueItemVisual(e,"style");i[n.getVisual("drawType")]=r,n.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(e,t,r);break}}function qTe(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(o){a.push(o.seriesIndex)}),a}Z([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=Ie({},i),o.dispatchAction(Ie(i,{type:r[1],seriesIndex:t(a,i)}))})})}function uS(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,c=i.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var d=o.getData(),h=qw(d,i.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:Fe(h)?d.getName(h[0]):d.getName(h),selected:it(l)?l:Ie({},l)})}})}function Ydt(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(uS("map","selectchanged",e,i,r),uS("pie","selectchanged",e,i,r)):r.fromAction==="select"?(uS("map","selected",e,i,r),uS("pie","selected",e,i,r)):r.fromAction==="unselect"&&(uS("map","unselected",e,i,r),uS("pie","unselected",e,i,r))})}function uw(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var Kdt=Math.round(Math.random()*9),Xdt=typeof Object.defineProperty=="function",Zdt=function(){function n(){this._id="__ec_inner_"+Kdt++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return Xdt?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}(),Qdt=wn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),Jdt=wn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),eht=wn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,d=Math.sin(c),h=Math.cos(c),f=o*.6,m=o*.7;n.moveTo(t-u,l+s),n.arc(t,l,o,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*f,l+s+h*f,t,r-m,t,r),n.bezierCurveTo(t,r-m,t-u+d*f,l+s+h*f,t-u,l+s),n.closePath()}}),tht=wn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;n.moveTo(i,a),n.lineTo(i+o,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-o,a+t),n.lineTo(i,a),n.closePath()}}),nht={line:co,rect:Hn,roundRect:Hn,square:Hn,circle:nm,diamond:Jdt,pin:eht,arrow:tht,triangle:Qdt},rht={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},iL={};Z(nht,function(n,e){iL[e]=new n});var iht=wn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=W2(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=iL[r];i||(r="rect",i=iL[r]),rht[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function aht(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function Pa(n,e,t,r,i,a,o){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=R1e(n.slice(8),new an(e,t,r,i),o?"center":"cover"):n.indexOf("path://")===0?l=j5(n.slice(7),{},new an(e,t,r,i),o?"center":"cover"):l=new iht({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=aht,a&&l.setColor(a),l}function JT(n){return Fe(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function ux(n,e){if(n!=null)return Fe(n)||(n=[n,n]),[Ze(n[0],e[0])||0,Ze(Gt(n[1],n[0]),e[1])||0]}function dw(n){return isFinite(n)}function oht(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=dw(r)?r:0,i=dw(i)?i:1,a=dw(a)?a:0,o=dw(o)?o:0;var s=n.createLinearGradient(r,a,i,o);return s}function sht(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*i+t.y,l=l*a),o=dw(o)?o:.5,s=dw(s)?s:.5,l=l>=0&&dw(l)?l:.5;var c=n.createRadialGradient(o,s,0,o,s,l);return c}function M8(n,e,t){for(var r=e.type==="radial"?sht(n,e,t):oht(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function lht(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function UO(n){return parseInt(n,10)}function JS(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(n);return(n[i]||UO(s[r])||UO(n.style[r]))-(UO(s[a])||0)-(UO(s[o])||0)|0}function cht(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:Jn(n)?[n]:Fe(n)?n:null}function vK(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&cht(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=$e(t,function(a){return a/i}),r/=i)}return[t,r]}var uht=new Bf(!0);function aL(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function ice(n){return typeof n=="string"&&n!=="none"}function oL(n){var e=n.fill;return e!=null&&e!=="none"}function ace(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function oce(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function P8(n,e,t){var r=zY(e.image,e.__image,t);if(I5(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*YR),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function dht(n,e,t,r){var i,a=aL(t),o=oL(t),s=t.strokePercent,l=s<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||uht,d=e.__dirty;if(!r){var h=t.fill,f=t.stroke,m=o&&!!h.colorStops,v=a&&!!f.colorStops,y=o&&!!h.image,w=a&&!!f.image,_=void 0,T=void 0,A=void 0,C=void 0,k=void 0;(m||v)&&(k=e.getBoundingRect()),m&&(_=d?M8(n,h,k):e.__canvasFillGradient,e.__canvasFillGradient=_),v&&(T=d?M8(n,f,k):e.__canvasStrokeGradient,e.__canvasStrokeGradient=T),y&&(A=d||!e.__canvasFillPattern?P8(n,h,e):e.__canvasFillPattern,e.__canvasFillPattern=A),w&&(C=d||!e.__canvasStrokePattern?P8(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=A),m?n.fillStyle=_:y&&(A?n.fillStyle=A:o=!1),v?n.strokeStyle=T:w&&(C?n.strokeStyle=C:a=!1)}var M=e.getGlobalScale();u.setScale(M[0],M[1],e.segmentIgnoreThreshold);var P,O;n.setLineDash&&t.lineDash&&(i=vK(e),P=i[0],O=i[1]);var j=!0;(c||d&$S)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),j=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),j&&u.rebuildPath(n,l?s:1),P&&(n.setLineDash(P),n.lineDashOffset=O),r||(t.strokeFirst?(a&&oce(n,t),o&&ace(n,t)):(o&&ace(n,t),a&&oce(n,t))),P&&n.setLineDash([])}function hht(n,e,t){var r=e.__image=zY(t.image,e.__image,e,e.onload);if(!(!r||!I5(r))){var i=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(r,c,u,t.sWidth,t.sHeight,i,a,o,s)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=o-c,h=s-u;n.drawImage(r,c,u,d,h,i,a,o,s)}else n.drawImage(r,i,a,o,s)}}function fht(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||by,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,o=void 0;n.setLineDash&&t.lineDash&&(r=vK(e),a=r[0],o=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=o),t.strokeFirst?(aL(t)&&n.strokeText(i,t.x,t.y),oL(t)&&n.fillText(i,t.x,t.y)):(oL(t)&&n.fillText(i,t.x,t.y),aL(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var sce=["shadowBlur","shadowOffsetX","shadowOffsetY"],lce=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function WTe(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){ql(n,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(o)?Sw.opacity:o}(r||e.blend!==t.blend)&&(a||(ql(n,i),a=!0),n.globalCompositeOperation=e.blend||Sw.blend);for(var s=0;s<sce.length;s++){var l=sce[s];(r||e[l]!==t[l])&&(a||(ql(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(ql(n,i),a=!0),n.shadowColor=e.shadowColor||Sw.shadowColor),a}function cce(n,e,t,r,i){var a=vI(e,i.inHover),o=r?null:t&&vI(t,i.inHover)||{};if(a===o)return!1;var s=WTe(n,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(ql(n,i),s=!0),ice(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(ql(n,i),s=!0),ice(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(ql(n,i),s=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,c=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(s||(ql(n,i),s=!0),n.lineWidth=c)}for(var u=0;u<lce.length;u++){var d=lce[u],h=d[0];(r||a[h]!==o[h])&&(s||(ql(n,i),s=!0),n[h]=a[h]||d[1])}return s}function pht(n,e,t,r,i){return WTe(n,vI(e,i.inHover),t&&vI(t,i.inHover),r,i)}function YTe(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function ght(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),YTe(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function mht(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var uce=1,dce=2,hce=3,fce=4;function vht(n){var e=oL(n),t=aL(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function ql(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function vI(n,e){return e&&n.__hoverStyle||n.style}function KTe(n,e){hw(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function hw(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Rc,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,l=!1;if((!o||lht(a,o))&&(o&&o.length&&(ql(n,t),n.restore(),l=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(ql(n,t),n.save(),ght(a,n,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=s=!0);var u=e instanceof wn&&e.autoBatch&&vht(e.style);s||mht(i,c.transform)?(ql(n,t),YTe(n,e)):u||ql(n,t);var d=vI(e,t.inHover);e instanceof wn?(t.lastDrawType!==uce&&(l=!0,t.lastDrawType=uce),cce(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),dht(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof cT?(t.lastDrawType!==hce&&(l=!0,t.lastDrawType=hce),cce(n,e,c,l,t),fht(n,e,d)):e instanceof Fo?(t.lastDrawType!==dce&&(l=!0,t.lastDrawType=dce),pht(n,e,c,l,t),hht(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==fce&&(l=!0,t.lastDrawType=fce),yht(n,e,t)),u&&r&&ql(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function yht(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),hw(n,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var c=0,u=i.length;c<u;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),hw(n,l,a,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var T6=new Zdt,pce=new xM(100),gce=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function hT(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&T6.delete(n);var a=T6.get(n);if(a)return a;var o=kt(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/t,T6.set(n,s),n.dirty=!1,s;function l(c){for(var u=[t],d=!0,h=0;h<gce.length;++h){var f=o[gce[h]];if(f!=null&&!Fe(f)&&!it(f)&&!Jn(f)&&typeof f!="boolean"){d=!1;break}u.push(f)}var m;if(d){m=u.join(",")+(i?"-svg":"");var v=pce.get(m);v&&(i?c.svgElement=v:c.image=v)}var y=ZTe(o.dashArrayX),w=bht(o.dashArrayY),_=XTe(o.symbol),T=wht(y),A=QTe(w),C=!i&&wy.createCanvas(),k=i&&{tag:"g",attrs:{},key:"dcl",children:[]},M=O(),P;C&&(C.width=M.width*t,C.height=M.height*t,P=C.getContext("2d")),j(),d&&pce.put(m,C||k),c.image=C,c.svgElement=k,c.svgWidth=M.width,c.svgHeight=M.height;function O(){for(var L=1,B=0,$=T.length;B<$;++B)L=Pse(L,T[B]);for(var Y=1,B=0,$=_.length;B<$;++B)Y=Pse(Y,_[B].length);L*=Y;var G=A*T.length*_.length;return{width:Math.max(1,Math.min(L,o.maxTileWidth)),height:Math.max(1,Math.min(G,o.maxTileHeight))}}function j(){P&&(P.clearRect(0,0,C.width,C.height),o.backgroundColor&&(P.fillStyle=o.backgroundColor,P.fillRect(0,0,C.width,C.height)));for(var L=0,B=0;B<w.length;++B)L+=w[B];if(L<=0)return;for(var $=-A,Y=0,G=0,W=0;$<M.height;){if(Y%2===0){for(var X=G/2%_.length,te=0,re=0,z=0;te<M.width*2;){for(var ae=0,B=0;B<y[W].length;++B)ae+=y[W][B];if(ae<=0)break;if(re%2===0){var le=(1-o.symbolSize)*.5,ee=te+y[W][re]*le,ye=$+w[Y]*le,fe=y[W][re]*o.symbolSize,Ce=w[Y]*o.symbolSize,at=z/2%_[X].length;Le(ee,ye,fe,Ce,_[X][at])}te+=y[W][re],++z,++re,re===y[W].length&&(re=0)}++W,W===y.length&&(W=0)}$+=w[Y],++G,++Y,Y===w.length&&(Y=0)}function Le(we,be,ge,he,Ge){var je=i?1:t,rt=Pa(Ge,we*je,be*je,ge*je,he*je,o.color,o.symbolKeepAspect);if(i){var bt=r.painter.renderOneToVNode(rt);bt&&k.children.push(bt)}else KTe(P,rt)}}}}function XTe(n){if(!n||n.length===0)return[["rect"]];if(it(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!it(n[t])){e=!1;break}if(e)return XTe([n]);for(var r=[],t=0;t<n.length;++t)it(n[t])?r.push([n[t]]):r.push(n[t]);return r}function ZTe(n){if(!n||n.length===0)return[[0,0]];if(Jn(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!Jn(n[r])){t=!1;break}if(t)return ZTe([n]);for(var i=[],r=0;r<n.length;++r)if(Jn(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=$e(n[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function bht(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Jn(n)){var e=Math.ceil(n);return[e,e]}var t=$e(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function wht(n){return $e(n,function(e){return QTe(e)})}function QTe(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function xht(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=hT(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=hT(i,e)}}})}var $d=new Xu,JTe={};function _ht(n,e){JTe[n]=e}function Sht(n){return JTe[n]}var Tht=1,Eht=800,Aht=900,kht=1e3,Cht=2e3,Dht=5e3,eEe=1e3,Iht=1100,yK=2e3,tEe=3e3,Mht=4e3,K5=4500,Pht=4600,Oht=5e3,Rht=6e3,nEe=7e3,Nht={PROCESSOR:{FILTER:kht,SERIES_FILTER:Eht,STATISTIC:Dht},VISUAL:{LAYOUT:eEe,PROGRESSIVE_LAYOUT:Iht,GLOBAL:yK,CHART:tEe,POST_CHART_LAYOUT:Pht,COMPONENT:Mht,BRUSH:Oht,CHART_ITEM:K5,ARIA:Rht,DECAL:nEe}},Es="__flagInMainProcess",Ll="__pendingUpdate",E6="__needsUpdateStatus",mce=/^[a-zA-Z0-9_]+$/,A6="__connectUpdateStatus",vce=0,Lht=1,jht=2;function rEe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return aEe(this,n,e)}}function iEe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return aEe(this,n,e)}}function aEe(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),Xu.prototype[e].apply(n,t)}var oEe=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Xu),sEe=oEe.prototype;sEe.on=iEe("on");sEe.off=iEe("off");var dS,k6,VO,Ev,C6,D6,I6,dk,hk,yce,bce,M6,wce,zO,xce,lEe,wu,_ce,cEe=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,new Gdt)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},it(r)&&(r=uEe[r]),a._dom=t;var o="canvas",s="auto",l=!1;i.ssr&&Pst(function(h){var f=$t(h),m=f.dataIndex;if(m!=null){var v=pt();return v.set("series_index",f.seriesIndex),v.set("data_index",m),f.ssrType&&v.set("ssr_type",f.ssrType),v}});var c=a._zr=Cse(t,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Gt(i.useDirtyRect,l),useCoarsePointer:Gt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=gK(ct(c.flush,c),17),r=Rt(r),r&&gTe(r,!0),a._theme=r,a._locale=nut(i.locale||H1e),a._coordSysMgr=new IM;var u=a._api=xce(a);function d(h,f){return h.__prio-f.__prio}return ZR(lL,d),ZR(O8,d),a._scheduler=new BTe(a,u,O8,lL),a._messageCenter=new oEe,a._initEvents(),a.resize=ct(a.resize,a),c.animation.on("frame",a._onframe,a),yce(c,a),bce(c,a),$2(a),a}return e.prototype._onframe=function(){if(!this._disposed){_ce(this);var t=this._scheduler;if(this[Ll]){var r=this[Ll].silent;this[Es]=!0;try{dS(this),Ev.update.call(this,null,this[Ll].updateParams)}catch(l){throw this[Es]=!1,this[Ll]=null,l}this._zr.flush(),this[Es]=!1,this[Ll]=null,dk.call(this,r),hk.call(this,r)}else if(t.unfinished){var i=Tht,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),D6(this,a),t.performVisualTasks(a),zO(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[Es]){if(this._disposed){this.id;return}var a,o,s;if(It(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[Es]=!0,!this._model||r){var l=new kut(this._api),c=this._theme,u=this._model=new uK;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:o},R8);var d={seriesTransition:s,optionChanged:!0};if(i)this[Ll]={silent:a,updateParams:d},this[Es]=!1,this.getZr().wakeUp();else{try{dS(this),Ev.update.call(this,null,d)}catch(h){throw this[Ll]=null,this[Es]=!1,h}this._ssr||this._zr.flush(),this[Ll]=null,this[Es]=!1,dk.call(this,a),hk.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Tn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Tn.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return Z(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],o=this;Z(r,function(l){i.eachComponent({mainType:l},function(c){var u=o._componentsMap[c.__viewId];u.group.ignore||(a.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Z(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(Sce[i]){var l=s,c=s,u=-s,d=-s,h=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();Z(BC,function(T,A){if(T.group===i){var C=r?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(Rt(t)),k=T.getDom().getBoundingClientRect();l=a(k.left,l),c=a(k.top,c),u=o(k.right,u),d=o(k.bottom,d),h.push({dom:C,left:k.left,top:k.top})}}),l*=f,c*=f,u*=f,d*=f;var m=u-l,v=d-c,y=wy.createCanvas(),w=Cse(y,{renderer:r?"svg":"canvas"});if(w.resize({width:m,height:v}),r){var _="";return Z(h,function(T){var A=T.left-l,C=T.top-c;_+='<g transform="translate('+A+","+C+')">'+T.dom+"</g>"}),w.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&w.painter.setBackgroundColor(t.connectedBackgroundColor),w.refreshImmediately(),w.painter.toDataURL()}else return t.connectedBackgroundColor&&w.add(new Hn({shape:{x:0,y:0,width:m,height:v},style:{fill:t.connectedBackgroundColor}})),Z(h,function(T){var A=new Fo({style:{x:T.left*f-l,y:T.top*f-c,image:T.dom}});w.add(A)}),w.refreshImmediately(),y.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return C6(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return C6(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,o=OC(i,t);return Z(o,function(s,l){l.indexOf("Models")>=0&&Z(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)a=a||!!u.containPoint(r);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(a=a||d.containPoint(r,c))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=OC(i,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?mK(s,l,r):MM(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Z(Fht,function(r){var i=function(a){var o=t.getModel(),s=a.target,l,c=r==="globalout";if(c?l={}:s&&uw(s,function(m){var v=$t(m);if(v&&v.dataIndex!=null){var y=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=y&&y.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=Ie({},v.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var h=u&&d!=null&&o.getComponent(u,d),f=h&&t[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:f},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),Z($C,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),Z(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),Ydt(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&n1e(this.getDom(),wK,"");var r=this,i=r._api,a=r._model;Z(r._componentsViews,function(o){o.dispose(a,i)}),Z(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete BC[r.id]},e.prototype.resize=function(t){if(!this[Es]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[Ll]&&(a==null&&(a=this[Ll].silent),i=!0,this[Ll]=null),this[Es]=!0;try{i&&dS(this),Ev.update.call(this,{type:"resize",animation:Ie({duration:0},t&&t.animation)})}catch(o){throw this[Es]=!1,o}this[Es]=!1,dk.call(this,a),hk.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(It(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!N8[t]){var i=N8[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Ie({},t);return r.type=$C[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(It(r)||(r={silent:!!r}),!!sL[t.type]&&this._model){if(this[Es]){this._pendingActions.push(t);return}var i=r.silent;I6.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&Tn.browser.weChat&&this._throttledZrFlush(),dk.call(this,i),hk.call(this,i)}},e.prototype.updateLabelLayout=function(){$d.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){dS=function(d){var h=d._scheduler;h.restorePipelines(d._model),h.prepareStageTasks(),k6(d,!0),k6(d,!1),h.plan()},k6=function(d,h){for(var f=d._model,m=d._scheduler,v=h?d._componentsViews:d._chartsViews,y=h?d._componentsMap:d._chartsMap,w=d._zr,_=d._api,T=0;T<v.length;T++)v[T].__alive=!1;h?f.eachComponent(function(k,M){k!=="series"&&A(M)}):f.eachSeries(A);function A(k){var M=k.__requireNewView;k.__requireNewView=!1;var P="_ec_"+k.id+"_"+k.type,O=!M&&y[P];if(!O){var j=_f(k.type),L=h?Ni.getClass(j.main,j.sub):Vr.getClass(j.sub);O=new L,O.init(f,_),y[P]=O,v.push(O),w.add(O.group)}k.__viewId=O.__id=P,O.__alive=!0,O.__model=k,O.group.__ecComponentInfo={mainType:k.mainType,index:k.componentIndex},!h&&m.prepareView(O,k,f,_)}for(var T=0;T<v.length;){var C=v[T];C.__alive?T++:(!h&&C.renderTask.dispose(),w.remove(C.group),C.dispose(f,_),v.splice(T,1),y[C.__id]===C&&delete y[C.__id],C.__id=C.group.__ecComponentInfo=null)}},VO=function(d,h,f,m,v){var y=d._model;if(y.setUpdatePayload(f),!m){Z([].concat(d._componentsViews).concat(d._chartsViews),C);return}var w={};w[m+"Id"]=f[m+"Id"],w[m+"Index"]=f[m+"Index"],w[m+"Name"]=f[m+"Name"];var _={mainType:m,query:w};v&&(_.subType=v);var T=f.excludeSeriesId,A;T!=null&&(A=pt(),Z(Or(T),function(k){var M=Ya(k,null);M!=null&&A.set(M,!0)})),y&&y.eachComponent(_,function(k){var M=A&&A.get(k.id)!=null;if(!M)if(ile(f))if(k instanceof ai)f.type===Tw&&!f.notBlur&&!k.get(["emphasis","disabled"])&&tct(k,f,d._api);else{var P=KY(k.mainType,k.componentIndex,f.name,d._api),O=P.focusSelf,j=P.dispatchers;f.type===Tw&&O&&!f.notBlur&&g8(k.mainType,k.componentIndex,d._api),j&&Z(j,function(L){f.type===Tw?Bg(L):Ug(L)})}else v8(f)&&k instanceof ai&&(ict(k,f,d._api),nle(k),wu(d))},d),y&&y.eachComponent(_,function(k){var M=A&&A.get(k.id)!=null;M||C(d[m==="series"?"_chartsMap":"_componentsMap"][k.__viewId])},d);function C(k){k&&k.__alive&&k[h]&&k[h](k.__model,y,d._api,f)}},Ev={prepareAndUpdate:function(d){dS(this),Ev.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,h){var f=this._model,m=this._api,v=this._zr,y=this._coordSysMgr,w=this._scheduler;if(f){f.setUpdatePayload(d),w.restoreData(f,d),w.performSeriesTasks(f),y.create(f,m),w.performDataProcessorTasks(f,d),D6(this,f),y.update(f,m),t(f),w.performVisualTasks(f,d),M6(this,f,m,d,h);var _=f.get("backgroundColor")||"transparent",T=f.get("darkMode");v.setBackgroundColor(_),T!=null&&T!=="auto"&&v.setDarkMode(T),$d.trigger("afterupdate",f,m)}},updateTransform:function(d){var h=this,f=this._model,m=this._api;if(f){f.setUpdatePayload(d);var v=[];f.eachComponent(function(w,_){if(w!=="series"){var T=h.getViewOfComponentModel(_);if(T&&T.__alive)if(T.updateTransform){var A=T.updateTransform(_,f,m,d);A&&A.update&&v.push(T)}else v.push(T)}});var y=pt();f.eachSeries(function(w){var _=h._chartsMap[w.__viewId];if(_.updateTransform){var T=_.updateTransform(w,f,m,d);T&&T.update&&y.set(w.uid,1)}else y.set(w.uid,1)}),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0,dirtyMap:y}),zO(this,f,m,d,{},y),$d.trigger("afterupdate",f,m)}},updateView:function(d){var h=this._model;h&&(h.setUpdatePayload(d),Vr.markUpdateMethod(d,"updateView"),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0}),M6(this,h,this._api,d,{}),$d.trigger("afterupdate",h,this._api))},updateVisual:function(d){var h=this,f=this._model;f&&(f.setUpdatePayload(d),f.eachSeries(function(m){m.getData().clearAllVisual()}),Vr.markUpdateMethod(d,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,d,{visualType:"visual",setDirty:!0}),f.eachComponent(function(m,v){if(m!=="series"){var y=h.getViewOfComponentModel(v);y&&y.__alive&&y.updateVisual(v,f,h._api,d)}}),f.eachSeries(function(m){var v=h._chartsMap[m.__viewId];v.updateVisual(m,f,h._api,d)}),$d.trigger("afterupdate",f,this._api))},updateLayout:function(d){Ev.update.call(this,d)}},C6=function(d,h,f,m){if(d._disposed){d.id;return}for(var v=d._model,y=d._coordSysMgr.getCoordinateSystems(),w,_=OC(v,f),T=0;T<y.length;T++){var A=y[T];if(A[h]&&(w=A[h](v,_,m))!=null)return w}},D6=function(d,h){var f=d._chartsMap,m=d._scheduler;h.eachSeries(function(v){m.updateStreamModes(v,f[v.__viewId])})},I6=function(d,h){var f=this,m=this.getModel(),v=d.type,y=d.escapeConnect,w=sL[v],_=w.actionInfo,T=(_.update||"update").split(":"),A=T.pop(),C=T[0]!=null&&_f(T[0]);this[Es]=!0;var k=[d],M=!1;d.batch&&(M=!0,k=$e(d.batch,function(Y){return Y=kt(Ie({},Y),d),Y.batch=null,Y}));var P=[],O,j=v8(d),L=ile(d);if(L&&S1e(this._api),Z(k,function(Y){if(O=w.action(Y,f._model,f._api),O=O||Ie({},Y),O.type=_.event||O.type,P.push(O),L){var G=UY(d),W=G.queryOptionMap,X=G.mainTypeSpecified,te=X?W.keys()[0]:"series";VO(f,A,Y,te),wu(f)}else j?(VO(f,A,Y,"series"),wu(f)):C&&VO(f,A,Y,C.main,C.sub)}),A!=="none"&&!L&&!j&&!C)try{this[Ll]?(dS(this),Ev.update.call(this,d),this[Ll]=null):Ev[A].call(this,d)}catch(Y){throw this[Es]=!1,Y}if(M?O={type:_.event||v,escapeConnect:y,batch:P}:O=P[0],this[Es]=!1,!h){var B=this._messageCenter;if(B.trigger(O.type,O),j){var $={type:"selectchanged",escapeConnect:y,selected:act(m),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};B.trigger($.type,$)}}},dk=function(d){for(var h=this._pendingActions;h.length;){var f=h.shift();I6.call(this,f,d)}},hk=function(d){!d&&this.trigger("updated")},yce=function(d,h){d.on("rendered",function(f){h.trigger("rendered",f),d.animation.isFinished()&&!h[Ll]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},bce=function(d,h){d.on("mouseover",function(f){var m=f.target,v=uw(m,uI);v&&(nct(v,f,h._api),wu(h))}).on("mouseout",function(f){var m=f.target,v=uw(m,uI);v&&(rct(v,f,h._api),wu(h))}).on("click",function(f){var m=f.target,v=uw(m,function(_){return $t(_).dataIndex!=null},!0);if(v){var y=v.selected?"unselect":"select",w=$t(v);h._api.dispatchAction({type:y,dataType:w.dataType,dataIndexInside:w.dataIndex,seriesIndex:w.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(h){h.clearColorPalette()})}function r(d){var h=[],f=[],m=!1;if(d.eachComponent(function(_,T){var A=T.get("zlevel")||0,C=T.get("z")||0,k=T.getZLevelKey();m=m||!!k,(_==="series"?f:h).push({zlevel:A,z:C,idx:T.componentIndex,type:_,key:k})}),m){var v=h.concat(f),y,w;ZR(v,function(_,T){return _.zlevel===T.zlevel?_.z-T.z:_.zlevel-T.zlevel}),Z(v,function(_){var T=d.getComponent(_.type,_.idx),A=_.zlevel,C=_.key;y!=null&&(A=Math.max(y,A)),C?(A===y&&C!==w&&A++,w=C):w&&(A===y&&A++,w=""),y=A,T.setZLevel(A)})}}M6=function(d,h,f,m,v){r(h),wce(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive=!1}),zO(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive||y.remove(h,f)})},wce=function(d,h,f,m,v,y){Z(y||d._componentsViews,function(w){var _=w.__model;c(_,w),w.render(_,h,f,m),s(_,w),u(_,w)})},zO=function(d,h,f,m,v,y){var w=d._scheduler;v=Ie(v||{},{updatedSeries:h.getSeries()}),$d.trigger("series:beforeupdate",h,f,v);var _=!1;h.eachSeries(function(T){var A=d._chartsMap[T.__viewId];A.__alive=!0;var C=A.renderTask;w.updatePayload(C,m),c(T,A),y&&y.get(T.uid)&&C.dirty(),C.perform(w.getPerformArgs(C))&&(_=!0),A.group.silent=!!T.get("silent"),o(T,A),nle(T)}),w.unfinished=_||w.unfinished,$d.trigger("series:layoutlabels",h,f,v),$d.trigger("series:transition",h,f,v),h.eachSeries(function(T){var A=d._chartsMap[T.__viewId];s(T,A),u(T,A)}),a(d,h),$d.trigger("series:afterupdate",h,f,v)},wu=function(d){d[E6]=!0,d.getZr().wakeUp()},_ce=function(d){d[E6]&&(d.getZr().storage.traverse(function(h){w1(h)||i(h)}),d[E6]=!1)};function i(d){for(var h=[],f=d.currentStates,m=0;m<f.length;m++){var v=f[m];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}d.selected&&d.states.select&&h.push("select"),d.hoverState===O5&&d.states.emphasis?h.push("emphasis"):d.hoverState===TM&&d.states.blur&&h.push("blur"),d.useStates(h)}function a(d,h){var f=d._zr,m=f.storage,v=0;m.traverse(function(y){y.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Tn.node&&!Tn.worker&&h.eachSeries(function(y){if(!y.preventUsingHoverLayer){var w=d._chartsMap[y.__viewId];w.__alive&&w.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function o(d,h){var f=d.get("blendMode")||null;h.eachRendered(function(m){m.isGroup||(m.style.blend=f)})}function s(d,h){if(!d.preventAutoZ){var f=d.get("z")||0,m=d.get("zlevel")||0;h.eachRendered(function(v){return l(v,f,m,-1/0),!0})}}function l(d,h,f,m){var v=d.getTextContent(),y=d.getTextGuideLine(),w=d.isGroup;if(w)for(var _=d.childrenRef(),T=0;T<_.length;T++)m=Math.max(l(_[T],h,f,m),m);else d.z=h,d.zlevel=f,m=Math.max(d.z2,m);if(v&&(v.z=h,v.zlevel=f,isFinite(m)&&(v.z2=m+2)),y){var A=d.textGuideLineConfig;y.z=h,y.zlevel=f,isFinite(m)&&(y.z2=m+(A&&A.showAbove?1:-1))}return m}function c(d,h){h.eachRendered(function(f){if(!w1(f)){var m=f.getTextContent(),v=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(d,h){var f=d.getModel("stateAnimation"),m=d.isAnimationEnabled(),v=f.get("duration"),y=v>0?{duration:v,delay:f.get("delay"),easing:f.get("easing")}:null;h.eachRendered(function(w){if(w.states&&w.states.emphasis){if(w1(w))return;if(w instanceof wn&&uct(w),w.__dirty){var _=w.prevStates;_&&w.useStates(_)}if(m){w.stateTransition=y;var T=w.getTextContent(),A=w.getTextGuideLine();T&&(T.stateTransition=y),A&&(A.stateTransition=y)}w.__dirty&&i(w)}})}xce=function(d){return new(function(h){_e(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(m){for(;m;){var v=m.__ecComponentInfo;if(v!=null)return d._model.getComponent(v.mainType,v.index);m=m.parent}},f.prototype.enterEmphasis=function(m,v){Bg(m,v),wu(d)},f.prototype.leaveEmphasis=function(m,v){Ug(m,v),wu(d)},f.prototype.enterBlur=function(m){b1e(m),wu(d)},f.prototype.leaveBlur=function(m){YY(m),wu(d)},f.prototype.enterSelect=function(m){w1e(m),wu(d)},f.prototype.leaveSelect=function(m){x1e(m),wu(d)},f.prototype.getModel=function(){return d.getModel()},f.prototype.getViewOfComponentModel=function(m){return d.getViewOfComponentModel(m)},f.prototype.getViewOfSeriesModel=function(m){return d.getViewOfSeriesModel(m)},f}(fTe))(d)},lEe=function(d){function h(f,m){for(var v=0;v<f.length;v++){var y=f[v];y[A6]=m}}Z($C,function(f,m){d._messageCenter.on(m,function(v){if(Sce[d.group]&&d[A6]!==vce){if(v&&v.escapeConnect)return;var y=d.makeActionFromEvent(v),w=[];Z(BC,function(_){_!==d&&_.group===d.group&&w.push(_)}),h(w,vce),Z(w,function(_){_[A6]!==Lht&&_.dispatchAction(y)}),h(w,jht)}})})}}(),e}(Xu),bK=cEe.prototype;bK.on=rEe("on");bK.off=rEe("off");bK.one=function(n,e,t){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var Fht=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var sL={},$C={},O8=[],R8=[],lL=[],uEe={},N8={},BC={},Sce={},$ht=+new Date-0,wK="_echarts_instance_";function dEe(n,e,t){{var r=Bht(n);if(r)return r}var i=new cEe(n,e,t);return i.id="ec_"+$ht++,BC[i.id]=i,n1e(n,wK,i.id),lEe(i),$d.trigger("afterinit",i),i}function Bht(n){return BC[Qst(n,wK)]}function hEe(n,e){uEe[n]=e}function fEe(n){dn(R8,n)<0&&R8.push(n)}function pEe(n,e){_K(O8,n,e,Cht)}function Uht(n){xK("afterinit",n)}function Vht(n){xK("afterupdate",n)}function xK(n,e){$d.on(n,e)}function Yf(n,e,t){Et(e)&&(t=e,e="");var r=It(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!$C[e]&&(vl(mce.test(r)&&mce.test(e)),sL[r]||(sL[r]={action:t,actionInfo:n}),$C[e]=r)}function zht(n,e){IM.register(n,e)}function Hht(n,e){_K(lL,n,e,eEe,"layout")}function dx(n,e){_K(lL,n,e,tEe,"visual")}var Tce=[];function _K(n,e,t,r,i){if((Et(e)||It(e))&&(t=e,e=r),!(dn(Tce,t)>=0)){Tce.push(t);var a=BTe.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function gEe(n,e){N8[n]=e}function Ght(n,e,t){var r=Sht("registerMap");r&&r(n,e,t)}var qht=adt;dx(yK,Mdt);dx(K5,Pdt);dx(K5,Odt);dx(yK,qdt);dx(K5,Wdt);dx(nEe,xht);fEe(gTe);pEe(Aht,$ut);gEe("default",Rdt);Yf({type:Tw,event:Tw,update:Tw},pa);Yf({type:nN,event:nN,update:nN},pa);Yf({type:RC,event:RC,update:RC},pa);Yf({type:rN,event:rN,update:rN},pa);Yf({type:NC,event:NC,update:NC},pa);hEe("light",Hdt);hEe("dark",HTe);var Ece=[],Wht={registerPreprocessor:fEe,registerProcessor:pEe,registerPostInit:Uht,registerPostUpdate:Vht,registerUpdateLifecycle:xK,registerAction:Yf,registerCoordinateSystem:zht,registerLayout:Hht,registerVisual:dx,registerTransform:qht,registerLoading:gEe,registerMap:Ght,registerImpl:_ht,PRIORITY:Nht,ComponentModel:Dn,ComponentView:Ni,SeriesModel:ai,ChartView:Vr,registerComponentModel:function(n){Dn.registerClass(n)},registerComponentView:function(n){Ni.registerClass(n)},registerSeriesModel:function(n){ai.registerClass(n)},registerChartView:function(n){Vr.registerClass(n)},registerSubTypeDefaulter:function(n,e){Dn.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){Ist(n,e)}};function yn(n){if(Fe(n)){Z(n,function(e){yn(e)});return}dn(Ece,n)>=0||(Ece.push(n),Et(n)&&(n={install:n}),n.install(Wht))}function fk(n){return n==null?0:n.length||1}function Ace(n){return n}var Vg=function(){function n(e,t,r,i,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||Ace,this._newKeyGetter=i||Ace,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],c=fk(l);if(c>1){var u=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(u,o)}else c===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],c=r[l],u=i[l],d=fk(c),h=fk(u);if(d>1&&h===1)this._updateManyToOne&&this._updateManyToOne(u,c),i[l]=null;else if(d===1&&h>1)this._updateOneToMany&&this._updateOneToMany(u,c),i[l]=null;else if(d===1&&h===1)this._update&&this._update(u,c),i[l]=null;else if(d>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,c),i[l]=null;else if(d>1)for(var f=0;f<d;f++)this._remove&&this._remove(c[f]);else this._remove&&this._remove(c)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],o=fk(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!t){var l=t[s],c=fk(l);c===0?(t[s]=o,a&&r.push(s)):c===1?t[s]=[l,o]:l.push(o)}}},n}(),Yht=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function Kht(n,e){var t={},r=t.encode={},i=pt(),a=[],o=[],s={};Z(n.dimensions,function(h){var f=n.getDimensionInfo(h),m=f.coordDim;if(m){var v=f.coordDimIndex;P6(r,m)[v]=h,f.isExtraCoord||(i.set(m,1),Xht(f.type)&&(a[0]=h),P6(s,m)[v]=n.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(h)}oTe.each(function(y,w){var _=P6(r,w),T=f.otherDims[w];T!=null&&T!==!1&&(_[T]=f.name)})});var l=[],c={};i.each(function(h,f){var m=r[f];c[f]=m[0],l=l.concat(m)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=$e(l,function(h){return n.getDimensionInfo(h).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(a=u.slice());var d=r.tooltip;return d&&d.length?o=d.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new Yht(s,e),t}function P6(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function cL(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Xht(n){return!(n==="ordinal"||n==="time")}var lN=function(){function n(e){this.otherDims={},e!=null&&Ie(this,e)}return n}(),Zht=Gn(),Qht={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},mEe=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=bEe(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return Gt(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=vTe(this.source),r=!wEe(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===o)l=t?d.name:null,c=d.type,u=d.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(l=t?h.name:null,c=h.type)}a.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Qht[c]||"f",u&&(i+=u.uid),i+="$"}var f=this.source,m=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:a,hash:m}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function vEe(n){return n instanceof mEe}function yEe(n){for(var e=pt(),t=0;t<(n||[]).length;t++){var r=n[t],i=It(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function bEe(n){var e=Zht(n);return e.dimNameMap||(e.dimNameMap=yEe(n.dimensionsDefine))}function wEe(n){return n>30}var pk=It,Av=$e,Jht=typeof Int32Array>"u"?Array:Int32Array,eft="e\0\0",kce=-1,tft=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],nft=["_approximateExtent"],Cce,HO,gk,mk,O6,vk,R6,gl=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;vEe(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,c={},u=0;u<r.length;u++){var d=r[u],h=it(d)?new lN({name:d}):d instanceof lN?d:new lN(d),f=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=f,h.coordDimIndex=0);var m=h.otherDims=h.otherDims||{};o.push(f),a[f]=h,c[f]!=null&&(l=!0),h.createInvertedIndices&&(s[f]=[]),m.itemName===0&&(this._nameDimIdx=u),m.itemId===0&&(this._idDimIdx=u),i&&(h.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=pt();Z(o,function(y){v.set(a[y].storeDimIndex,y)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(Jn(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof A8&&(a=e),!a){var o=this.dimensions,s=dK(e)||Fs(e)?new yTe(e,o.length):e;a=new A8;var l=Av(o,function(c){return{type:i._dimInfos[c].type,property:c}});a.initData(s,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Kht(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=t[l],o&&R6(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==ly&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===Zu;if(l&&!i.pure)for(var c=[],u=e;u<t;u++){var d=i.getItem(u,c);if(!this.hasItemOption&&$st(d)&&(this.hasItemOption=!0),d){var h=d.name;a[u]==null&&h!=null&&(a[u]=Ya(h,null));var f=d.id;o[u]==null&&f!=null&&(o[u]=Ya(f,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)R6(this,u);Cce(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){pk(e)?Ie(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=gk(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return HO(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return Fe(e)?i.getValues(Av(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?kce:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){Et(e)&&(r=t,t=e,e=[]);var i=r||this,a=Av(mk(e),this._getStoreDimIndex,this);this._store.each(a,i?ct(t,i):t)},n.prototype.filterSelf=function(e,t,r){Et(e)&&(r=t,t=e,e=[]);var i=r||this,a=Av(mk(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?ct(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=In(e);return Z(i,function(a){var o=t._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){Et(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,o=Av(mk(e),this._getStoreDimIndex,this),s=vk(this);return s._store=this._store.map(o,a?ct(t,a):t),s},n.prototype.modify=function(e,t,r,i){var a=r||i||this,o=Av(mk(e),this._getStoreDimIndex,this);this._store.modify(o,a?ct(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=vk(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.minmaxDownSample=function(e,t){var r=vk(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=vk(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new br(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Vg(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return HO(e,r)},function(r){return HO(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},pk(e)?Ie(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),Fe(a)?a=a.slice():pk(a)&&(a=Ie({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,pk(t)?Ie(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){pk(e)?Ie(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Ie(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;f8(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){Z(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Av(this.dimensions,this._getDimInfo,this),this.hostModel)),O6(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];Et(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(MY(arguments)))})},n.internalField=function(){Cce=function(e){var t=e._invertedIndicesMap;Z(t,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=t[i]=new Jht(o.categories.length);for(var l=0;l<r.length;l++)r[l]=kce;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},gk=function(e,t,r){return Ya(e._getCategory(t,r),null)},HO=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=gk(e,e._idDimIdx,t)),r==null&&(r=eft+t),r},mk=function(e){return Fe(e)||(e=e!=null?[e]:[]),e},vk=function(e){var t=new n(e._schema?e._schema:Av(e.dimensions,e._getDimInfo,e),e.hostModel);return O6(t,e),t},O6=function(e,t){Z(tft.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,Z(nft,function(r){e[r]=Rt(t[r])}),e._calculationInfo=Ie({},t._calculationInfo)},R6=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=i[t];if(s==null&&a!=null&&(r[t]=s=gk(e,a,t)),l==null&&o!=null&&(i[t]=l=gk(e,o,t)),l==null&&s!=null){var c=e._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),i[t]=l}}}(),n}();function PM(n,e){dK(n)||(n=hK(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=pt(),a=[],o=ift(n,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&wEe(o),l=r===n.dimensionsDefine,c=l?bEe(n):yEe(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,o));for(var d=pt(u),h=new ATe(o),f=0;f<h.length;f++)h[f]=-1;function m(O){var j=h[O];if(j<0){var L=r[O],B=It(L)?L:{name:L},$=new lN,Y=B.name;Y!=null&&c.get(Y)!=null&&($.name=$.displayName=Y),B.type!=null&&($.type=B.type),B.displayName!=null&&($.displayName=B.displayName);var G=a.length;return h[O]=G,$.storeDimIndex=O,a.push($),$}return a[j]}if(!s)for(var f=0;f<o;f++)m(f);d.each(function(O,j){var L=Or(O).slice();if(L.length===1&&!it(L[0])&&L[0]<0){d.set(j,!1);return}var B=d.set(j,[]);Z(L,function($,Y){var G=it($)?c.get($):$;G!=null&&G<o&&(B[Y]=G,y(m(G),j,Y))})});var v=0;Z(t,function(O){var j,L,B,$;if(it(O))j=O,$={};else{$=O,j=$.name;var Y=$.ordinalMeta;$.ordinalMeta=null,$=Ie({},$),$.ordinalMeta=Y,L=$.dimsDef,B=$.otherDims,$.name=$.coordDim=$.coordDimIndex=$.dimsDef=$.otherDims=null}var G=d.get(j);if(G!==!1){if(G=Or(G),!G.length)for(var W=0;W<(L&&L.length||1);W++){for(;v<o&&m(v).coordDim!=null;)v++;v<o&&G.push(v++)}Z(G,function(X,te){var re=m(X);if(l&&$.type!=null&&(re.type=$.type),y(kt(re,$),j,te),re.name==null&&L){var z=L[te];!It(z)&&(z={name:z}),re.name=re.displayName=z.name,re.defaultTooltip=z.defaultTooltip}B&&kt(re.otherDims,B)})}});function y(O,j,L){oTe.get(j)!=null?O.otherDims[j]=L:(O.coordDim=j,O.coordDimIndex=L,i.set(j,!0))}var w=e.generateCoord,_=e.generateCoordCount,T=_!=null;_=w?_||1:0;var A=w||"value";function C(O){O.name==null&&(O.name=O.coordDim)}if(s)Z(a,function(O){C(O)}),a.sort(function(O,j){return O.storeDimIndex-j.storeDimIndex});else for(var k=0;k<o;k++){var M=m(k),P=M.coordDim;P==null&&(M.coordDim=aft(A,i,T),M.coordDimIndex=0,(!w||_<=0)&&(M.isExtraCoord=!0),_--),C(M),M.type==null&&(uTe(n,k)===Ko.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return rft(a),new mEe({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function rft(n){for(var e=pt(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function ift(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return Z(e,function(a){var o;It(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function aft(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var oft=function(){function n(e){this.coordSysDims=[],this.axisMap=pt(),this.categoryAxisMap=pt(),this.coordSysName=e}return n}();function sft(n){var e=n.get("coordinateSystem"),t=new oft(e),r=lft[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var lft={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",Ma).models[0],a=n.getReferringComponents("yAxis",Ma).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),hS(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),hS(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",Ma).models[0];e.coordSysDims=["single"],t.set("single",i),hS(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",Ma).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),hS(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),hS(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();Z(a.parallelAxisIndex,function(s,l){var c=i.getComponent("parallelAxis",s),u=o[l];t.set(u,c),hS(c)&&(r.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function hS(n){return n.get("type")==="category"}function cft(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,o,s;uft(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(n&&n.get("stack")),c,u,d,h;if(Z(a,function(_,T){it(_)&&(a[T]=_={name:_}),l&&!_.isExtraCoord&&(!r&&!c&&_.ordinalMeta&&(c=_),!u&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(u=_))}),u&&!r&&!c&&(r=!0),u){d="__\0ecstackresult_"+n.id,h="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var f=u.coordDim,m=u.type,v=0;Z(a,function(_){_.coordDim===f&&v++});var y={name:d,coordDim:f,coordDimIndex:v,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},w={name:h,coordDim:h,coordDimIndex:v+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(y.storeDimIndex=s.ensureCalculationDimension(h,m),w.storeDimIndex=s.ensureCalculationDimension(d,m)),o.appendCalculationDimension(y),o.appendCalculationDimension(w)):(a.push(y),a.push(w))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:d}}function uft(n){return!vEe(n.schema)}function Ty(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function xEe(n,e){return Ty(n,e)?n.getCalculationInfo("stackResultDimension"):e}function dft(n,e){var t=n.get("coordinateSystem"),r=IM.get(t),i;return e&&e.coordSysDims&&(i=$e(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=cL(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function hft(n,e,t){var r,i;return t&&Z(n,function(a,o){var s=a.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function rm(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=hK(n)):(i=r.getSource(),a=i.sourceFormat===Zu);var o=sft(e),s=dft(e,o),l=t.useEncodeDefaulter,c=Et(l)?l:l?Yt(cTe,s,e):null,u={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!a},d=PM(i,u),h=hft(d.dimensions,t.createInvertedIndices,o),f=a?null:r.getSharedDataStore(d),m=cft(e,{schema:d,store:f}),v=new gl(d,e);v.setCalculationInfo(m);var y=h!=null&&fft(i)?function(w,_,T,A){return A===h?T:this.defaultDimValueGetter(w,_,T,A)}:null;return v.hasItemOption=!1,v.initData(a?i:f,null,y),v}function fft(n){if(n.sourceFormat===Zu){var e=pft(n.data||[]);return!Fe(zT(e))}}function pft(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var Kf=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();D5(Kf);var gft=0,L8=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++gft}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&$e(r,mft);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!it(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=pt(this.categories))},n}();function mft(n){return It(n)&&n.value!=null?n.value:n+""}function j8(n){return n.type==="interval"||n.type==="log"}function vft(n,e,t,r){var i={},a=n[1]-n[0],o=i.interval=YSe(a/e);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=_Ee(o),l=i.niceTickExtent=[na(Math.ceil(n[0]/o)*o,s),na(Math.floor(n[1]/o)*o,s)];return yft(l,n),i}function N6(n){var e=Math.pow(10,$Y(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,na(t*e)}function _Ee(n){return xf(n)+2}function Dce(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function yft(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),Dce(n,0,e),Dce(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function X5(n,e){return n>=e[0]&&n<=e[1]}function Z5(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function Q5(n,e){return n*(e[1]-e[0])+e[0]}var J5=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new L8({})),Fe(i)&&(i=new L8({categories:$e(i,function(a){return It(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:it(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),X5(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),Z5(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(Q5(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var c=r[o];i[o]=c,a[c]=o}for(var u=0;o<s;++o){for(;a[u]!=null;)u++;i.push(u),a[u]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Kf);Kf.registerClass(J5);var kb=na,zg=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return X5(t,this._extent)},e.prototype.normalize=function(t){return Z5(t,this._extent)},e.prototype.scale=function(t){return Q5(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=_Ee(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(t?s.push({value:kb(a[0]-r,o)}):s.push({value:i[0]}));for(var c=a[0];c<=a[1]&&(s.push({value:c}),c=kb(c+r,o),c!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:a[1];return i[1]>u&&(t?s.push({value:kb(u+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],c=0,u=[],d=s.value-l.value,h=d/t;c<t-1;){var f=kb(l.value+(c+1)*h);f>a[0]&&f<a[1]&&u.push(f),c++}i.push(u)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=xf(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=kb(t.value,i,!0);return eTe(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=vft(a,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=kb(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=kb(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(Kf);Kf.registerClass(zg);var SEe=typeof Float32Array<"u",bft=SEe?Float32Array:Array;function Sf(n){return Fe(n)?SEe?new Float32Array(n):n:new bft(n)}var F8="__ec_stack_";function TEe(n){return n.get("stack")||F8+n.seriesIndex}function SK(n){return n.dim+n.index}function wft(n){var e=[],t=n.axis,r="axis0";if(t.type==="category"){for(var i=t.getBandWidth(),a=0;a<n.count;a++)e.push(kt({bandWidth:i,axisKey:r,stackId:F8+a},n));for(var o=kEe(e),s=[],a=0;a<n.count;a++){var l=o[r][F8+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function EEe(n,e){var t=[];return e.eachSeriesByType(n,function(r){IEe(r)&&t.push(r)}),t}function xft(n){var e={};Z(n,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),h=u.dim+"_"+u.index,f=d.getDimensionIndex(d.mapDimension(u.dim)),m=d.getStore(),v=0,y=m.count();v<y;++v){var w=m.get(f,v);e[h]?e[h].push(w):e[h]=[w]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,c){return l-c});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function AEe(n){var e=xft(n),t=[];return Z(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,c=e[l],u=Math.abs(o[1]-o[0]),d=a.scale.getExtent(),h=Math.abs(d[1]-d[0]);s=c?u/h*c:u}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var m=Ze(r.get("barWidth"),s),v=Ze(r.get("barMaxWidth"),s),y=Ze(r.get("barMinWidth")||(MEe(r)?.5:1),s),w=r.get("barGap"),_=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:m,barMaxWidth:v,barMinWidth:y,barGap:w,barCategoryGap:_,axisKey:SK(a),stackId:TEe(r)})}),kEe(t)}function kEe(n){var e={};Z(n,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var c=r.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=r.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var d=r.barMaxWidth;d&&(l[c].maxWidth=d);var h=r.barMinWidth;h&&(l[c].minWidth=h);var f=r.barGap;f!=null&&(s.gap=f);var m=r.barCategoryGap;m!=null&&(s.categoryGap=m)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=In(a).length;s=Math.max(35-l*4,15)+"%"}var c=Ze(s,o),u=Ze(r.gap,1),d=r.remainedWidth,h=r.autoWidthCount,f=(d-c)/(h+(h-1)*u);f=Math.max(f,0),Z(a,function(w){var _=w.maxWidth,T=w.minWidth;if(w.width){var A=w.width;_&&(A=Math.min(A,_)),T&&(A=Math.max(A,T)),w.width=A,d-=A+u*A,h--}else{var A=f;_&&_<A&&(A=Math.min(_,d)),T&&T>A&&(A=T),A!==f&&(w.width=A,d-=A+u*A,h--)}}),f=(d-c)/(h+(h-1)*u),f=Math.max(f,0);var m=0,v;Z(a,function(w,_){w.width||(w.width=f),v=w,m+=w.width*(1+u)}),v&&(m-=v.width*u);var y=-m/2;Z(a,function(w,_){t[i][_]=t[i][_]||{bandWidth:o,offset:y,width:w.width},y+=w.width*(1+u)})}),t}function _ft(n,e,t){if(n&&e){var r=n[SK(e)];return r}}function CEe(n,e){var t=EEe(n,e),r=AEe(t);Z(t,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=TEe(i),c=r[SK(s)][l],u=c.offset,d=c.width;a.setLayout({bandWidth:c.bandWidth,offset:u,size:d})})}function DEe(n){return{seriesType:n,plan:ZT(),reset:function(e){if(IEe(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),c=t.mapDimension(a.dim),u=t.getCalculationInfo("stackResultDimension"),d=Ty(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),f=Sft(i,a),m=MEe(e),v=e.get("barMinHeight")||0,y=u&&t.getDimensionIndex(u),w=t.getLayout("size"),_=t.getLayout("offset");return{progress:function(T,A){for(var C=T.count,k=m&&Sf(C*3),M=m&&l&&Sf(C*3),P=m&&Sf(C),O=r.master.getRect(),j=h?O.width:O.height,L,B=A.getStore(),$=0;(L=T.next())!=null;){var Y=B.get(d?y:o,L),G=B.get(s,L),W=f,X=void 0;d&&(X=+Y-B.get(o,L));var te=void 0,re=void 0,z=void 0,ae=void 0;if(h){var le=r.dataToPoint([Y,G]);if(d){var ee=r.dataToPoint([X,G]);W=ee[0]}te=W,re=le[1]+_,z=le[0]-W,ae=w,Math.abs(z)<v&&(z=(z<0?-1:1)*v)}else{var le=r.dataToPoint([G,Y]);if(d){var ee=r.dataToPoint([G,X]);W=ee[1]}te=le[0]+_,re=W,z=w,ae=le[1]-W,Math.abs(ae)<v&&(ae=(ae<=0?-1:1)*v)}m?(k[$]=te,k[$+1]=re,k[$+2]=h?z:ae,M&&(M[$]=h?O.x:te,M[$+1]=h?re:O.y,M[$+2]=j),P[L]=L):A.setItemLayout(L,{x:te,y:re,width:z,height:ae}),$+=3}m&&A.setLayout({largePoints:k,largeDataIndices:P,largeBackgroundPoints:M,valueAxisHorizontal:h})}}}}}}function IEe(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function MEe(n){return n.pipelineContext&&n.pipelineContext.large}function Sft(n,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var Tft=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},TK=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return B5(t.value,ble[aut(_1(this._minLevelUnit))]||ble.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return out(t,r,i,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=Mft(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=ju,r[1]+=ju),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-ju}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=GO.length,l=Math.min(Tft(GO,this._approxInterval,0,s),s-1);this._interval=GO[l][1],this._minLevelUnit=GO[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return Jn(t)?t:+$f(t)},e.prototype.contain=function(t){return X5(this.parse(t),this._extent)},e.prototype.normalize=function(t){return Z5(this.parse(t),this._extent)},e.prototype.scale=function(t){return Q5(t,this._extent)},e.type="time",e}(zg),GO=[["second",rK],["minute",iK],["hour",jC],["quarter-day",jC*6],["half-day",jC*12],["day",ju*1.2],["half-week",ju*3.5],["week",ju*7],["month",ju*31],["quarter",ju*95],["half-year",yle/2],["year",yle]];function Eft(n,e,t,r){var i=$f(e),a=$f(t),o=function(m){return wle(i,m,r)===wle(a,m,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},c=function(){return l()&&o("day")},u=function(){return c()&&o("hour")},d=function(){return u()&&o("minute")},h=function(){return d()&&o("second")},f=function(){return h()&&o("millisecond")};switch(n){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return d();case"second":return h();case"millisecond":return f()}}function Aft(n,e){return n/=ju,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function kft(n){var e=30*ju;return n/=e,n>6?6:n>3?3:n>2?2:1}function Cft(n){return n/=jC,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function Ice(n,e){return n/=e?iK:rK,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function Dft(n){return YSe(n)}function Ift(n,e,t){var r=new Date(n);switch(_1(e)){case"year":case"month":r[Y1e(t)](0);case"day":r[K1e(t)](1);case"hour":r[X1e(t)](0);case"minute":r[Z1e(t)](0);case"second":r[Q1e(t)](0),r[J1e(t)](0)}return r.getTime()}function Mft(n,e,t,r){var i=1e4,a=q1e,o=0;function s(j,L,B,$,Y,G,W){for(var X=new Date(L),te=L,re=X[$]();te<B&&te<=r[1];)W.push({value:te}),re+=j,X[Y](re),te=X.getTime();W.push({value:te,notAdd:!0})}function l(j,L,B){var $=[],Y=!L.length;if(!Eft(_1(j),r[0],r[1],t)){Y&&(L=[{value:Ift(new Date(r[0]),j,t)},{value:r[1]}]);for(var G=0;G<L.length-1;G++){var W=L[G].value,X=L[G+1].value;if(W!==X){var te=void 0,re=void 0,z=void 0,ae=!1;switch(j){case"year":te=Math.max(1,Math.round(e/ju/365)),re=aK(t),z=sut(t);break;case"half-year":case"quarter":case"month":te=kft(e),re=S1(t),z=Y1e(t);break;case"week":case"half-week":case"day":te=Aft(e),re=U5(t),z=K1e(t),ae=!0;break;case"half-day":case"quarter-day":case"hour":te=Cft(e),re=hI(t),z=X1e(t);break;case"minute":te=Ice(e,!0),re=V5(t),z=Z1e(t);break;case"second":te=Ice(e,!1),re=z5(t),z=Q1e(t);break;case"millisecond":te=Dft(e),re=H5(t),z=J1e(t);break}s(te,W,X,re,z,ae,$),j==="year"&&B.length>1&&G===0&&B.unshift({value:B[0].value-te})}}for(var G=0;G<$.length;G++)B.push($[G]);return $}}for(var c=[],u=[],d=0,h=0,f=0;f<a.length&&o++<i;++f){var m=_1(a[f]);if(iut(a[f])){l(a[f],c[c.length-1]||[],u);var v=a[f+1]?_1(a[f+1]):null;if(m!==v){if(u.length){h=d,u.sort(function(j,L){return j.value-L.value});for(var y=[],w=0;w<u.length;++w){var _=u[w].value;(w===0||u[w-1].value!==_)&&(y.push(u[w]),_>=r[0]&&_<=r[1]&&d++)}var T=(r[1]-r[0])/e;if(d>T*1.5&&h>T/1.5||(c.push(y),d>T||n===a[f]))break}u=[]}}}for(var A=gr($e(c,function(j){return gr(j,function(L){return L.value>=r[0]&&L.value<=r[1]&&!L.notAdd})}),function(j){return j.length>0}),C=[],k=A.length-1,f=0;f<A.length;++f)for(var M=A[f],P=0;P<M.length;++P)C.push({value:M[P].value,level:k-f});C.sort(function(j,L){return j.value-L.value});for(var O=[],f=0;f<C.length;++f)(f===0||C[f].value!==C[f-1].value)&&O.push(C[f]);return O}Kf.registerClass(TK);var Mce=Kf.prototype,UC=zg.prototype,Pft=na,Oft=Math.floor,Rft=Math.ceil,qO=Math.pow,Od=Math.log,EK=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new zg,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=UC.getTicks.call(this,t);return $e(o,function(s){var l=s.value,c=na(qO(this.base,l));return c=l===i[0]&&this._fixMin?WO(c,a[0]):c,c=l===i[1]&&this._fixMax?WO(c,a[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,r){var i=Od(this.base);t=Od(Math.max(0,t))/i,r=Od(Math.max(0,r))/i,UC.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=Mce.getExtent.call(this);r[0]=qO(t,r[0]),r[1]=qO(t,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=WO(r[0],a[0])),this._fixMax&&(r[1]=WO(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=Od(t[0])/Od(r),t[1]=Od(t[1])/Od(r),Mce.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=Fst(i),o=t/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[na(Rft(r[0]/a)*a),na(Oft(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){UC.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Od(t)/Od(this.base),X5(t,this._extent)},e.prototype.normalize=function(t){return t=Od(t)/Od(this.base),Z5(t,this._extent)},e.prototype.scale=function(t){return t=Q5(t,this._extent),qO(this.base,t)},e.type="log",e}(Kf),PEe=EK.prototype;PEe.getMinorTicks=UC.getMinorTicks;PEe.getLabel=UC.getLabel;function WO(n,e){return Pft(n,xf(e))}Kf.registerClass(EK);var Nft=function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=t.get("min",!0);a==null&&(a=t.get("startValue",!0));var o=this._modelMinRaw=a;Et(o)?this._modelMinNum=YO(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=YO(e,o));var s=this._modelMaxRaw=t.get("max",!0);if(Et(s)?this._modelMaxNum=YO(e,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=YO(e,s)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),c=Fe(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[sh(c[0],1),sh(c[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,c=s!=null,u=l!=null;s==null&&(s=e?i?0:NaN:t-a[0]*o),l==null&&(l=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=nI(s)||nI(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var h=this._determinedMin,f=this._determinedMax;return h!=null&&(s=h,c=!0),f!=null&&(l=f,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:d}},n.prototype.modifyDataMinMax=function(e,t){this[jft[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=Lft[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),Lft={min:"_determinedMin",max:"_determinedMax"},jft={min:"_dataMin",max:"_dataMax"};function OEe(n,e,t){var r=n.rawExtentInfo;return r||(r=new Nft(n,e,t),n.rawExtentInfo=r,r)}function YO(n,e){return e==null?null:nI(e)?NaN:n.parse(e)}function REe(n,e){var t=n.type,r=OEe(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=EEe("bar",o),l=!1;if(Z(s,function(d){l=l||d.getBaseAxis()===e.axis}),l){var c=AEe(s),u=Fft(i,a,e,c);i=u.min,a=u.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function Fft(n,e,t,r){var i=t.axis.getExtent(),a=Math.abs(i[1]-i[0]),o=_ft(r,t.axis);if(o===void 0)return{min:n,max:e};var s=1/0;Z(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;Z(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-n,d=1-(s+l)/a,h=u/d-u;return e+=h*(l/c),n-=h*(s/c),{min:n,max:e}}function fT(n,e){var t=e,r=REe(n,t),i=r.extent,a=t.get("splitNumber");n instanceof EK&&(n.base=t.get("logBase"));var o=n.type,s=t.get("interval"),l=o==="interval"||o==="time";n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function eF(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new J5({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new TK({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Kf.getClass(e)||zg)}}function $ft(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function eE(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(i,a){return n.scale.getFormattedLabel(i,a,r)}}(e):it(e)?function(r){return function(i){var a=n.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):Et(e)?function(r){return function(i,a){return t!=null&&(a=i.value-t),r(AK(n,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return n.scale.getLabel(r)}}function AK(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function Bft(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,a=t.getExtent();t instanceof J5?i=t.count():(r=t.getTicks(),i=r.length);var o=n.getLabelModel(),s=eE(n),l,c=1;i>40&&(c=Math.ceil(i/40));for(var u=0;u<i;u+=c){var d=r?r[u]:{value:a[0]+u},h=s(d,u),f=o.getTextRect(h),m=Uft(f,o.get("rotate")||0);l?l.union(m):l=m}return l}}function Uft(n,e){var t=e*Math.PI/180,r=n.width,i=n.height,a=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new an(n.x,n.y,a,o);return s}function kK(n){var e=n.get("interval");return e??"auto"}function NEe(n){return n.type==="category"&&kK(n.getLabelModel())===0}function uL(n,e){var t={};return Z(n.mapDimensionsAll(e),function(r){t[xEe(n,r)]=!0}),In(t)}function Vft(n,e,t){e&&Z(uL(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}var OM=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),zft=1e-8;function Pce(n,e){return Math.abs(n-e)<zft}function qb(n,e,t){var r=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var o=n[a];r+=ig(i[0],i[1],o[0],o[1],e,t),i=o}var s=n[0];return(!Pce(i[0],s[0])||!Pce(i[1],s[1]))&&(r+=ig(i[0],i[1],s[0],s[1],e,t)),r!==0}var Hft=[];function L6(n,e){for(var t=0;t<n.length;t++)ns(n[t],n[t],e)}function Oce(n,e,t,r){for(var i=0;i<n.length;i++){var a=n[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(qv(e,e,a),Wv(t,t,a))}}function Gft(n){for(var e=0,t=0,r=0,i=n.length,a=n[i-1][0],o=n[i-1][1],s=0;s<i;s++){var l=n[s][0],c=n[s][1],u=a*c-l*o;e+=u,t+=(a+l)*u,r+=(o+c)*u,a=l,o=c}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var LEe=function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n}(),Rce=function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n}(),Nce=function(){function n(e){this.type="linestring",this.points=e}return n}(),jEe=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,i=0,a=0;a<t.length;a++){var o=t[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return Gft(r.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return Z(o,function(s){s.type==="polygon"?Oce(s.exterior,i,a,t):Z(s.points,function(l){Oce(l,i,a,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new an(i[0],i[1],a[0]-i[0],a[1]-i[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,c=s.interiors;if(qb(l,t[0],t[1])){for(var u=0;u<(c?c.length:0);u++)if(qb(c[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new an(t,r,i,a),c=o.calculateTransform(l),u=this.geometries,d=0;d<u.length;d++){var h=u[d];h.type==="polygon"?(L6(h.exterior,c),Z(h.interiors,function(f){L6(f,c)})):Z(h.points,function(f){L6(f,c)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(LEe),qft=function(n){_e(e,n);function e(t,r){var i=n.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=E5(Hft),o=t;o&&!o.isGeoSVGGraphicRoot;)Eg(a,o.getLocalTransform(),a),o=o.parent;return VT(a,a),ns(i,i,a),i},e}(LEe);function Wft(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return Z(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=FEe(s,o,t);break;case"Polygon":j6(s,o,t);break;case"MultiLineString":j6(s,o,t);break;case"MultiPolygon":Z(s,function(l,c){return j6(l,o[c],t)})}}),e.UTF8Encoding=!1,e}function j6(n,e,t){for(var r=0;r<n.length;r++)n[r]=FEe(n[r],e[r],t)}function FEe(n,e,t){for(var r=[],i=e[0],a=e[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/t,l/t])}return r}function Yft(n,e){return n=Wft(n),$e(gr(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,i=t.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new Rce(o[0],o.slice(1)));break;case"MultiPolygon":Z(i.coordinates,function(l){l[0]&&a.push(new Rce(l[0],l.slice(1)))});break;case"LineString":a.push(new Nce([i.coordinates]));break;case"MultiLineString":a.push(new Nce(i.coordinates))}var s=new jEe(r[e||"name"],a,r.cp);return s.properties=r,s})}var yI=Gn();function $Ee(n,e){var t=$e(e,function(r){return n.scale.parse(r)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function Kft(n){var e=n.getLabelModel().get("customValues");if(e){var t=eE(n),r=n.scale.getExtent(),i=$Ee(n,e),a=gr(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:$e(a,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:n.scale.getLabel(s),tickValue:o}})}}return n.type==="category"?Zft(n):Jft(n)}function Xft(n,e){var t=n.getTickModel().get("customValues");if(t){var r=n.scale.getExtent(),i=$Ee(n,t);return{ticks:gr(i,function(a){return a>=r[0]&&a<=r[1]})}}return n.type==="category"?Qft(n,e):{ticks:$e(n.scale.getTicks(),function(a){return a.value})}}function Zft(n){var e=n.getLabelModel(),t=BEe(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function BEe(n,e){var t=UEe(n,"labels"),r=kK(e),i=VEe(t,r);if(i)return i;var a,o;return Et(r)?a=GEe(n,r):(o=r==="auto"?ept(n):r,a=HEe(n,o)),zEe(t,r,{labels:a,labelCategoryInterval:o})}function Qft(n,e){var t=UEe(n,"ticks"),r=kK(e),i=VEe(t,r);if(i)return i;var a,o;if((!e.get("show")||n.scale.isBlank())&&(a=[]),Et(r))a=GEe(n,r,!0);else if(r==="auto"){var s=BEe(n,n.getLabelModel());o=s.labelCategoryInterval,a=$e(s.labels,function(l){return l.tickValue})}else o=r,a=HEe(n,o,!0);return zEe(t,r,{ticks:a,tickCategoryInterval:o})}function Jft(n){var e=n.scale.getTicks(),t=eE(n);return{labels:$e(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function UEe(n,e){return yI(n)[e]||(yI(n)[e]=[])}function VEe(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function zEe(n,e,t){return n.push({key:e,value:t}),t}function ept(n){var e=yI(n).autoInterval;return e??(yI(n).autoInterval=n.calculateCategoryInterval())}function tpt(n){var e=npt(n),t=eE(n),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=n.dataToCoord(l+1)-n.dataToCoord(l),u=Math.abs(c*Math.cos(r)),d=Math.abs(c*Math.sin(r)),h=0,f=0;l<=a[1];l+=s){var m=0,v=0,y=_M(t({value:l}),e.font,"center","top");m=y.width*1.3,v=y.height*1.3,h=Math.max(h,m,7),f=Math.max(f,v,7)}var w=h/u,_=f/d;isNaN(w)&&(w=1/0),isNaN(_)&&(_=1/0);var T=Math.max(0,Math.floor(Math.min(w,_))),A=yI(n.model),C=n.getExtent(),k=A.lastAutoInterval,M=A.lastTickCount;return k!=null&&M!=null&&Math.abs(k-T)<=1&&Math.abs(M-o)<=1&&k>T&&A.axisExtent0===C[0]&&A.axisExtent1===C[1]?T=k:(A.lastTickCount=o,A.lastAutoInterval=T,A.axisExtent0=C[0],A.axisExtent1=C[1]),T}function npt(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function HEe(n,e,t){var r=eE(n),i=n.scale,a=i.getExtent(),o=n.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=a[0],u=i.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var d=NEe(n),h=o.get("showMinLabel")||d,f=o.get("showMaxLabel")||d;h&&c!==a[0]&&v(a[0]);for(var m=c;m<=a[1];m+=l)v(m);f&&m-l!==a[1]&&v(a[1]);function v(y){var w={value:y};s.push(t?y:{formattedLabel:r(w),rawLabel:i.getLabel(w),tickValue:y})}return s}function GEe(n,e,t){var r=n.scale,i=eE(n),a=[];return Z(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(t?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var Lce=[0,1],dh=function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return qSe(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),jce(r,i.count())),yr(e,Lce,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),jce(r,i.count()));var a=yr(e,r,Lce,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=Xft(this,t),i=r.ticks,a=$e(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return rpt(this,a,o,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=$e(r,function(a){return $e(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},n.prototype.getViewLabels=function(){return Kft(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(){return tpt(this)},n}();function jce(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function rpt(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,c=(e[i-1].coord-e[0].coord)/l;Z(e,function(f){f.coord-=c/2});var u=n.scale.getExtent();s=1+u[1]-e[i-1].tickValue,o={coord:e[i-1].coord+c*s,tickValue:u[1]+1},e.push(o)}var d=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(f,m){return f=na(f),m=na(m),d?f>m:f<m}}var yk=Math.PI*2,Cb=Bf.CMD,ipt=["top","right","bottom","left"];function apt(n,e,t,r,i){var a=t.width,o=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),i.set(1,0);break}}function opt(n,e,t,r,i,a,o,s,l){o-=n,s-=e;var c=Math.sqrt(o*o+s*s);o/=c,s/=c;var u=o*t+n,d=s*t+e;if(Math.abs(r-i)%yk<1e-4)return l[0]=u,l[1]=d,c-t;if(a){var h=r;r=jc(i),i=jc(h)}else r=jc(r),i=jc(i);r>i&&(i+=yk);var f=Math.atan2(s,o);if(f<0&&(f+=yk),f>=r&&f<=i||f+yk>=r&&f+yk<=i)return l[0]=u,l[1]=d,c-t;var m=t*Math.cos(r)+n,v=t*Math.sin(r)+e,y=t*Math.cos(i)+n,w=t*Math.sin(i)+e,_=(m-o)*(m-o)+(v-s)*(v-s),T=(y-o)*(y-o)+(w-s)*(w-s);return _<T?(l[0]=m,l[1]=v,Math.sqrt(_)):(l[0]=y,l[1]=w,Math.sqrt(T))}function dL(n,e,t,r,i,a,o,s){var l=i-n,c=a-e,u=t-n,d=r-e,h=Math.sqrt(u*u+d*d);u/=h,d/=h;var f=l*u+c*d,m=f/h;s&&(m=Math.min(Math.max(m,0),1)),m*=h;var v=o[0]=n+m*u,y=o[1]=e+m*d;return Math.sqrt((v-i)*(v-i)+(y-a)*(y-a))}function qEe(n,e,t,r,i,a,o){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var s=n+t,l=e+r,c=o[0]=Math.min(Math.max(i,n),s),u=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((c-i)*(c-i)+(u-a)*(u-a))}var Ud=[];function spt(n,e,t){var r=qEe(e.x,e.y,e.width,e.height,n.x,n.y,Ud);return t.set(Ud[0],Ud[1]),r}function lpt(n,e,t){for(var r=0,i=0,a=0,o=0,s,l,c=1/0,u=e.data,d=n.x,h=n.y,f=0;f<u.length;){var m=u[f++];f===1&&(r=u[f],i=u[f+1],a=r,o=i);var v=c;switch(m){case Cb.M:a=u[f++],o=u[f++],r=a,i=o;break;case Cb.L:v=dL(r,i,u[f],u[f+1],d,h,Ud,!0),r=u[f++],i=u[f++];break;case Cb.C:v=CSe(r,i,u[f++],u[f++],u[f++],u[f++],u[f],u[f+1],d,h,Ud),r=u[f++],i=u[f++];break;case Cb.Q:v=ISe(r,i,u[f++],u[f++],u[f],u[f+1],d,h,Ud),r=u[f++],i=u[f++];break;case Cb.A:var y=u[f++],w=u[f++],_=u[f++],T=u[f++],A=u[f++],C=u[f++];f+=1;var k=!!(1-u[f++]);s=Math.cos(A)*_+y,l=Math.sin(A)*T+w,f<=1&&(a=s,o=l);var M=(d-y)*T/_+y;v=opt(y,w,T,A,A+C,k,M,h,Ud),r=Math.cos(A+C)*_+y,i=Math.sin(A+C)*T+w;break;case Cb.R:a=r=u[f++],o=i=u[f++];var P=u[f++],O=u[f++];v=qEe(a,o,P,O,d,h,Ud);break;case Cb.Z:v=dL(r,i,a,o,d,h,Ud,!0),r=a,i=o;break}v<c&&(c=v,t.set(Ud[0],Ud[1]))}return c}var Qd=new tn,ti=new tn,da=new tn,Tf=new tn,mf=new tn;function Fce(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||ipt,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,c=i.anchor,u=n.getComputedTransform(),d=u&&VT([],u),h=e.get("length2")||0;c&&da.copy(c);for(var f=0;f<o.length;f++){var m=o[f];apt(m,0,s,Qd,Tf),tn.scaleAndAdd(ti,Qd,Tf,h),ti.transform(d);var v=n.getBoundingRect(),y=c?c.distance(ti):n instanceof wn?lpt(ti,n.path,da):spt(ti,v,da);y<l&&(l=y,ti.transform(u),da.transform(u),da.toArray(a[0]),ti.toArray(a[1]),Qd.toArray(a[2]))}WEe(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var hL=[],sl=new tn;function WEe(n,e){if(e<=180&&e>0){e=e/180*Math.PI,Qd.fromArray(n[0]),ti.fromArray(n[1]),da.fromArray(n[2]),tn.sub(Tf,Qd,ti),tn.sub(mf,da,ti);var t=Tf.len(),r=mf.len();if(!(t<.001||r<.001)){Tf.scale(1/t),mf.scale(1/r);var i=Tf.dot(mf),a=Math.cos(e);if(a<i){var o=dL(ti.x,ti.y,da.x,da.y,Qd.x,Qd.y,hL,!1);sl.fromArray(hL),sl.scaleAndAdd(mf,o/Math.tan(Math.PI-e));var s=da.x!==ti.x?(sl.x-ti.x)/(da.x-ti.x):(sl.y-ti.y)/(da.y-ti.y);if(isNaN(s))return;s<0?tn.copy(sl,ti):s>1&&tn.copy(sl,da),sl.toArray(n[1])}}}}function cpt(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Qd.fromArray(n[0]),ti.fromArray(n[1]),da.fromArray(n[2]),tn.sub(Tf,ti,Qd),tn.sub(mf,da,ti);var r=Tf.len(),i=mf.len();if(!(r<.001||i<.001)){Tf.scale(1/r),mf.scale(1/i);var a=Tf.dot(e),o=Math.cos(t);if(a<o){var s=dL(ti.x,ti.y,da.x,da.y,Qd.x,Qd.y,hL,!1);sl.fromArray(hL);var l=Math.PI/2,c=Math.acos(mf.dot(e)),u=l+c-t;if(u>=l)tn.copy(sl,da);else{sl.scaleAndAdd(mf,s/Math.tan(Math.PI/2-u));var d=da.x!==ti.x?(sl.x-ti.x)/(da.x-ti.x):(sl.y-ti.y)/(da.y-ti.y);if(isNaN(d))return;d<0?tn.copy(sl,ti):d>1&&tn.copy(sl,da)}sl.toArray(n[1])}}}}function F6(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?n.useStyle(s):a.style=s}function upt(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=Gv(r[0],r[1]),a=Gv(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*t,s=XR([],r[1],r[0],o/i),l=XR([],r[1],r[2],o/a),c=XR([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)n.lineTo(r[u][0],r[u][1])}function CK(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<cI.length;l++){var c=cI[l],u=e[c],d=c==="normal";if(u){var h=u.get("show"),f=d?s:Gt(i.states[c]&&i.states[c].ignore,s);if(f||!Gt(h,o)){var m=d?r:r&&r.states[c];m&&(m.ignore=!0),r&&F6(r,!0,c,u);continue}r||(r=new xl,n.setTextGuideLine(r),!d&&(s||!o)&&F6(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),F6(r,!1,c,u)}}if(r){kt(r.style,t),r.style.fill=null;var v=a.get("showAbove"),y=n.textGuideLineConfig=n.textGuideLineConfig||{};y.showAbove=v||!1,r.buildPath=upt}}function DK(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<yl.length;r++){var i=yl[r];t[i]=n.getModel([i,e])}return t}function YEe(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,c=o.clone();c.applyTransform(a),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new X2(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:c,localRect:o,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function KEe(n,e,t,r,i,a){var o=n.length;if(o<2)return;n.sort(function(k,M){return k.rect[e]-M.rect[e]});for(var s=0,l,c=!1,u=0;u<o;u++){var d=n[u],h=d.rect;l=h[e]-s,l<0&&(h[e]-=l,d.label[e]-=l,c=!0),s=h[e]+h[t]}var f=n[0],m=n[o-1],v,y;w(),v<0&&A(-v,.8),y<0&&A(y,.8),w(),_(v,y,1),_(y,v,-1),w(),v<0&&C(-v),y<0&&C(y);function w(){v=f.rect[e]-r,y=i-m.rect[e]-m.rect[t]}function _(k,M,P){if(k<0){var O=Math.min(M,-k);if(O>0){T(O*P,0,o);var j=O+k;j<0&&A(-j*P,1)}else A(-k*P,1)}}function T(k,M,P){k!==0&&(c=!0);for(var O=M;O<P;O++){var j=n[O],L=j.rect;L[e]+=k,j.label[e]+=k}}function A(k,M){for(var P=[],O=0,j=1;j<o;j++){var L=n[j-1].rect,B=Math.max(n[j].rect[e]-L[e]-L[t],0);P.push(B),O+=B}if(O){var $=Math.min(Math.abs(k)/O,M);if(k>0)for(var j=0;j<o-1;j++){var Y=P[j]*$;T(Y,0,j+1)}else for(var j=o-1;j>0;j--){var Y=P[j-1]*$;T(-Y,j,o)}}}function C(k){var M=k<0?-1:1;k=Math.abs(k);for(var P=Math.ceil(k/(o-1)),O=0;O<o-1;O++)if(M>0?T(P,0,O+1):T(-P,o-O-1,o),k-=P,k<=0)return}return c}function dpt(n,e,t,r){return KEe(n,"x","width",e,t)}function XEe(n,e,t,r){return KEe(n,"y","height",e,t)}function ZEe(n){var e=[];n.sort(function(v,y){return y.priority-v.priority});var t=new an(0,0,0,0);function r(v){if(!v.ignore){var y=v.ensureState("emphasis");y.ignore==null&&(y.ignore=!1)}v.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],o=a.axisAligned,s=a.localRect,l=a.transform,c=a.label,u=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=a.obb,h=!1,f=0;f<e.length;f++){var m=e[f];if(t.intersect(m.rect)){if(o&&m.axisAligned){h=!0;break}if(m.obb||(m.obb=new X2(m.localRect,m.transform)),d||(d=new X2(s,l)),d.intersect(m.obb)){h=!0;break}}}h?(r(c),u&&r(u)):(c.attr("ignore",a.defaultAttr.ignore),u&&u.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function hpt(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function fpt(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:hpt(r&&r.shape.points)}}var $ce=["align","verticalAlign","width","height","fontSize"],rl=new pg,$6=Gn(),ppt=Gn();function KO(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var XO=["x","y","rotation"],gpt=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},c=i.getComputedTransform(),u=i.getBoundingRect().plain();an.applyTransform(u,u,c),c?rl.setLocalTransform(c):(rl.x=rl.y=rl.rotation=rl.originX=rl.originY=0,rl.scaleX=rl.scaleY=1),rl.rotation=jc(rl.rotation);var d=i.__hostTarget,h;if(d){h=d.getBoundingRect().plain();var f=d.getComputedTransform();an.applyTransform(h,h,f)}var m=h&&d.getTextGuideLine();this._labelList.push({label:i,labelLine:m,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:u,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:m&&m.ignore,x:rl.x,y:rl.y,scaleX:rl.scaleX,scaleY:rl.scaleY,rotation:rl.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(Et(i)||In(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=$t(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(T,A){return function(){Fce(T,A)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,c=o.defaultAttr,u=void 0;Et(o.layoutOption)?u=o.layoutOption(fpt(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*d:c.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(u.x!=null?(s.x=Ze(u.x,t),s.setStyle("x",0),h=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=Ze(u.y,r),s.setStyle("y",0),h=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:u.labelLinePoints}),h=!1)}var m=$6(s);m.needsUpdateLabelLine=h,s.rotation=u.rotate!=null?u.rotate*d:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var v=0;v<$ce.length;v++){var y=$ce[v];s.setStyle(y,u[y]!=null?u[y]:c.style[y])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var w=o.seriesModel;if(o.dataIndex!=null){var _=o.seriesModel.getData(o.dataType);w=_.getItemModel(o.dataIndex)}s.on("drag",i(l,w.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=YEe(this._labelList),a=gr(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=gr(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});dpt(a,0,t),XEe(o,0,r);var s=gr(i,function(l){return l.layoutOption.hideOverlap});ZEe(s)},n.prototype.processLabelsOverall=function(){var e=this;Z(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=$6(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=$t(e),a=i.dataIndex;if(r&&a!=null){var o=t.getData(i.dataType),s=o.getItemModel(a),l={},c=o.getItemVisual(a,"style");if(c){var u=o.getVisual("drawType");l.stroke=c[u]}var d=s.getModel("labelLine");CK(e,DK(s),l),Fce(e,d)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!w1(e))){var a=$6(r),o=a.oldLayout,s=$t(e),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(s.dataType);if(o){r.attr(o);var h=e.prevStates;h&&(dn(h,"select")>=0&&r.attr(a.oldLayoutSelect),dn(h,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),tr(r,c,t,l)}else if(r.attr(c),!qT(r).valueAnimation){var d=Gt(r.style.opacity,1);r.style.opacity=0,Si(r,{style:{opacity:d}},t,l)}if(a.oldLayout=c,r.states.select){var f=a.oldLayoutSelect={};KO(f,c,XO),KO(f,r.states.select,XO)}if(r.states.emphasis){var m=a.oldLayoutEmphasis={};KO(m,c,XO),KO(m,r.states.emphasis,XO)}U1e(r,l,u,t,t)}if(i&&!i.ignore&&!i.invisible){var a=ppt(i),o=a.oldLayout,v={points:i.shape.points};o?(i.attr({shape:o}),tr(i,{shape:v},t)):(i.setShape(v),i.style.strokePercent=0,Si(i,{style:{strokePercent:1}},t)),a.oldLayout=v}},n}(),B6=Gn();function mpt(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=B6(t).labelManager;i||(i=B6(t).labelManager=new gpt),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=B6(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var U6=Math.sin,V6=Math.cos,QEe=Math.PI,Db=Math.PI*2,vpt=180/QEe,JEe=function(){function n(){}return n.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},n.prototype.moveTo=function(e,t){this._add("M",e,t)},n.prototype.lineTo=function(e,t){this._add("L",e,t)},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){this._add("C",e,t,r,i,a,o)},n.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},n.prototype.arc=function(e,t,r,i,a,o){this.ellipse(e,t,r,r,0,i,a,o)},n.prototype.ellipse=function(e,t,r,i,a,o,s,l){var c=s-o,u=!l,d=Math.abs(c),h=Xv(d-Db)||(u?c>=Db:-c>=Db),f=c>0?c%Db:c%Db+Db,m=!1;h?m=!0:Xv(d)?m=!1:m=f>=QEe==!!u;var v=e+r*V6(o),y=t+i*U6(o);this._start&&this._add("M",v,y);var w=Math.round(a*vpt);if(h){var _=1/this._p,T=(u?1:-1)*(Db-_);this._add("A",r,i,w,1,+u,e+r*V6(o+T),t+i*U6(o+T)),_>.01&&this._add("A",r,i,w,0,+u,v,y)}else{var A=e+r*V6(s),C=t+i*U6(s);this._add("A",r,i,w,+m,+u,A,C)}},n.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(e,t,r,i,a,o,s,l,c){for(var u=[],d=this._p,h=1;h<arguments.length;h++){var f=arguments[h];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*d)/d)}this._d.push(e+u.join(" ")),this._start=e==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),IK="none",ypt=Math.round;function bpt(n){var e=n.fill;return e!=null&&e!==IK}function wpt(n){var e=n.stroke;return e!=null&&e!==IK}var $8=["lineCap","miterLimit","lineJoin"],xpt=$e($8,function(n){return"stroke-"+n.toLowerCase()});function _pt(n,e,t,r){var i=e.opacity==null?1:e.opacity;if(t instanceof Fo){n("opacity",i);return}if(bpt(e)){var a=oI(e.fill);n("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;o<1&&n("fill-opacity",o)}else n("fill",IK);if(wpt(e)){var s=oI(e.stroke);n("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,d=e.strokeFirst;if(c!==1&&n("stroke-width",c),d&&n("paint-order",d?"stroke":"fill"),u<1&&n("stroke-opacity",u),e.lineDash){var h=vK(t),f=h[0],m=h[1];f&&(m=ypt(m||0),n("stroke-dasharray",f.join(",")),(m||r)&&n("stroke-dashoffset",m))}for(var v=0;v<$8.length;v++){var y=$8[v];if(e[y]!==Y2[y]){var w=e[y]||Y2[y];w&&n(xpt[v],w)}}}}var eAe="http://www.w3.org/2000/svg",tAe="http://www.w3.org/1999/xlink",Spt="http://www.w3.org/2000/xmlns/",Tpt="http://www.w3.org/XML/1998/namespace",Bce="ecmeta_";function nAe(n){return document.createElementNS(eAe,n)}function uo(n,e,t,r,i){return{tag:n,attrs:t||{},children:r,text:i,key:e}}function Ept(n,e){var t=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),t.push(a))}return"<"+n+" "+t.join(" ")+">"}function Apt(n){return"</"+n+">"}function MK(n,e){e=e||{};var t=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return Ept(o,s)+(o!=="style"?ll(l):l||"")+(a?""+t+$e(a,function(c){return r(c)}).join(t)+t:"")+Apt(o)}return r(n)}function kpt(n,e,t){t=t||{};var r=t.newline?`
`:"",i=" {"+r,a=r+"}",o=$e(In(n),function(l){return l+i+$e(In(n[l]),function(c){return c+":"+n[l][c]+";"}).join(r)+a}).join(r),s=$e(In(e),function(l){return"@keyframes "+l+i+$e(In(e[l]),function(c){return c+i+$e(In(e[l][c]),function(u){var d=e[l][c][u];return u==="d"&&(d='path("'+d+'")'),u+":"+d+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function B8(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Uce(n,e,t,r){return uo("svg","root",{width:n,height:e,xmlns:eAe,"xmlns:xlink":tAe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+n+" "+e:!1},t)}var Cpt=0;function rAe(){return Cpt++}var Vce={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},jb="transform-origin";function Dpt(n,e,t){var r=Ie({},n.shape);Ie(r,e),n.buildPath(t,r);var i=new JEe;return i.reset(jSe(n)),t.rebuildPath(i,1),i.generateStr(),i.getStr()}function Ipt(n,e){var t=e.originX,r=e.originY;(t||r)&&(n[jb]=t+"px "+r+"px")}var Mpt={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function iAe(n,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=n,t}function Ppt(n,e,t){var r=n.shape.paths,i={},a,o;if(Z(r,function(l){var c=B8(t.zrId);c.animation=!0,tF(l,{},c,!0);var u=c.cssAnims,d=c.cssNodes,h=In(u),f=h.length;if(f){o=h[f-1];var m=u[o];for(var v in m){var y=m[v];i[v]=i[v]||{d:""},i[v].d+=y.d||""}for(var w in d){var _=d[w].animation;_.indexOf(o)>=0&&(a=_)}}}),!!a){e.d=!1;var s=iAe(i,t);return a.replace(o,s)}}function zce(n){return it(n)?Vce[n]?"cubic-bezier("+Vce[n]+")":LY(n)?n:"":""}function tF(n,e,t,r){var i=n.animators,a=i.length,o=[];if(n instanceof ZY){var s=Ppt(n,e,t);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},c=0;c<a;c++){var u=i[c],d=[u.getMaxTime()/1e3+"s"],h=zce(u.getClip().easing),f=u.getDelay();h?d.push(h):d.push("linear"),f&&d.push(f/1e3+"s"),u.getLoop()&&d.push("infinite");var m=d.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(u)}function v(_){var T=_[1],A=T.length,C={},k={},M={},P="animation-timing-function";function O(Le,we,be){for(var ge=Le.getTracks(),he=Le.getMaxTime(),Ge=0;Ge<ge.length;Ge++){var je=ge[Ge];if(je.needsAnimate()){var rt=je.keyframes,bt=je.propName;if(be&&(bt=be(bt)),bt)for(var lt=0;lt<rt.length;lt++){var cn=rt[lt],Ct=Math.round(cn.time/he*100)+"%",En=zce(cn.easing),jn=cn.rawValue;(it(jn)||Jn(jn))&&(we[Ct]=we[Ct]||{},we[Ct][bt]=cn.rawValue,En&&(we[Ct][P]=En))}}}}for(var j=0;j<A;j++){var L=T[j],B=L.targetName;B?B==="shape"&&O(L,k):!r&&O(L,C)}for(var $ in C){var Y={};VSe(Y,n),Ie(Y,C[$]);var G=FSe(Y),W=C[$][P];M[$]=G?{transform:G}:{},Ipt(M[$],Y),W&&(M[$][P]=W)}var X,te=!0;for(var $ in k){M[$]=M[$]||{};var re=!X,W=k[$][P];re&&(X=new Bf);var z=X.len();X.reset(),M[$].d=Dpt(n,k[$],X);var ae=X.len();if(!re&&z!==ae){te=!1;break}W&&(M[$][P]=W)}if(!te)for(var $ in M)delete M[$].d;if(!r)for(var j=0;j<A;j++){var L=T[j],B=L.targetName;B==="style"&&O(L,M,function(ge){return Mpt[ge]})}for(var le=In(M),ee=!0,ye,j=1;j<le.length;j++){var fe=le[j-1],Ce=le[j];if(M[fe][jb]!==M[Ce][jb]){ee=!1;break}ye=M[fe][jb]}if(ee&&ye){for(var $ in M)M[$][jb]&&delete M[$][jb];e[jb]=ye}if(gr(le,function(Le){return In(M[Le]).length>0}).length){var at=iAe(M,t);return at+" "+_[0]+" both"}}for(var y in l){var s=v(l[y]);s&&o.push(s)}if(o.length){var w=t.zrId+"-cls-"+rAe();t.cssNodes["."+w]={animation:o.join(",")},e.class=w}}function Opt(n,e,t){if(!n.ignore)if(n.isSilent()){var r={"pointer-events":"none"};Hce(r,e,t)}else{var i=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},a=i.fill;if(!a){var o=n.style&&n.style.fill,s=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&s||o;l&&(a=QH(l))}var c=i.lineWidth;if(c){var u=!i.strokeNoScale&&n.transform?n.transform[0]:1;c=c/u}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),c&&(r["stroke-width"]=c),Hce(r,e,t)}}function Hce(n,e,t,r){var i=JSON.stringify(n),a=t.cssStyleCache[i];a||(a=t.zrId+"-cls-"+rAe(),t.cssStyleCache[i]=a,t.cssNodes["."+a+":hover"]=n),e.class=e.class?e.class+" "+a:a}var bI=Math.round;function aAe(n){return n&&it(n.src)}function oAe(n){return n&&Et(n.toDataURL)}function PK(n,e,t,r){_pt(function(i,a){var o=i==="fill"||i==="stroke";o&&LSe(a)?lAe(e,n,i,r):o&&jY(a)?cAe(t,n,i,r):n[i]=a,o&&r.ssr&&a==="none"&&(n["pointer-events"]="visible")},e,t,!1),Bpt(t,n,r)}function OK(n,e){var t=Mst(e);t&&(t.each(function(r,i){r!=null&&(n[(Bce+i).toLowerCase()]=r+"")}),e.isSilent()&&(n[Bce+"silent"]="true"))}function Gce(n){return Xv(n[0]-1)&&Xv(n[1])&&Xv(n[2])&&Xv(n[3]-1)}function Rpt(n){return Xv(n[4])&&Xv(n[5])}function RK(n,e,t){if(e&&!(Rpt(e)&&Gce(e))){var r=1e4;n.transform=Gce(e)?"translate("+bI(e[4]*r)/r+" "+bI(e[5]*r)/r+")":est(e)}}function qce(n,e,t){for(var r=n.points,i=[],a=0;a<r.length;a++)i.push(bI(r[a][0]*t)/t),i.push(bI(r[a][1]*t)/t);e.points=i.join(" ")}function Wce(n){return!n.smooth}function Npt(n){var e=$e(n,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=t[o[0]];s!=null&&(r[o[1]]=bI(s*i)/i)}}}var Lpt={circle:[Npt(["cx","cy","r"])],polyline:[qce,Wce],polygon:[qce,Wce]};function jpt(n){for(var e=n.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function sAe(n,e){var t=n.style,r=n.shape,i=Lpt[n.type],a={},o=e.animation,s="path",l=n.style.strokePercent,c=e.compress&&jSe(n)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&jpt(n))&&!(l<1)){s=n.type;var u=Math.pow(10,c);i[0](r,a,u)}else{var d=!n.path||n.shapeChanged();n.path||n.createPathProxy();var h=n.path;d&&(h.beginPath(),n.buildPath(h,n.shape),n.pathUpdated());var f=h.getVersion(),m=n,v=m.__svgPathBuilder;(m.__svgPathVersion!==f||!v||l!==m.__svgPathStrokePercent)&&(v||(v=m.__svgPathBuilder=new JEe),v.reset(c),h.rebuildPath(v,l),v.generateStr(),m.__svgPathVersion=f,m.__svgPathStrokePercent=l),a.d=v.getStr()}return RK(a,n.transform),PK(a,t,n,e),OK(a,n),e.animation&&tF(n,a,e),e.emphasis&&Opt(n,a,e),uo(s,n.id+"",a)}function Fpt(n,e){var t=n.style,r=t.image;if(r&&!it(r)&&(aAe(r)?r=r.src:oAe(r)&&(r=r.toDataURL())),!!r){var i=t.x||0,a=t.y||0,o=t.width,s=t.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),RK(l,n.transform),PK(l,t,n,e),OK(l,n),e.animation&&tF(n,l,e),uo("image",n.id+"",l)}}function $pt(n,e){var t=n.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var i=t.font||by,a=t.x||0,o=nst(t.y||0,k5(i),t.textBaseline),s=tst[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(p1e(t)){var c="",u=t.fontStyle,d=f1e(t.fontSize);if(!parseFloat(d))return;var h=t.fontFamily||fSe,f=t.fontWeight;c+="font-size:"+d+";font-family:"+h+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),f&&f!=="normal"&&(c+="font-weight:"+f+";"),l.style=c}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),RK(l,n.transform),PK(l,t,n,e),OK(l,n),e.animation&&tF(n,l,e),uo("text",n.id+"",l,void 0,r)}}function Yce(n,e){if(n instanceof wn)return sAe(n,e);if(n instanceof Fo)return Fpt(n,e);if(n instanceof cT)return $pt(n,e)}function Bpt(n,e,t){var r=n.style;if(rst(r)){var i=ist(n),a=t.shadowCache,o=a[i];if(!o){var s=n.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,d=r.shadowOffsetY||0,h=r.shadowBlur,f=oI(r.shadowColor),m=f.opacity,v=f.color,y=h/2/l,w=h/2/c,_=y+" "+w;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=uo("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[uo("feDropShadow","",{dx:u/l,dy:d/c,stdDeviation:_,"flood-color":v,"flood-opacity":m})]),a[i]=o}e.filter=A5(o)}}function lAe(n,e,t,r){var i=n[t],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(RSe(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(NSe(i))a="radialGradient",o.cx=Gt(i.x,.5),o.cy=Gt(i.y,.5),o.r=Gt(i.r,.5);else return;for(var s=i.colorStops,l=[],c=0,u=s.length;c<u;++c){var d=JH(s[c].offset)*100+"%",h=s[c].color,f=oI(h),m=f.color,v=f.opacity,y={offset:d};y["stop-color"]=m,v<1&&(y["stop-opacity"]=v),l.push(uo("stop",c+"",y))}var w=uo(a,"",o,l),_=MK(w),T=r.gradientCache,A=T[_];A||(A=r.zrId+"-g"+r.gradientIdx++,T[_]=A,o.id=A,r.defs[A]=uo(a,A,o,l)),e[t]=A5(A)}function cAe(n,e,t,r){var i=n.style[t],a=n.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",d;if(OSe(i)){var h=i.imageWidth,f=i.imageHeight,m=void 0,v=i.image;if(it(v)?m=v:aAe(v)?m=v.src:oAe(v)&&(m=v.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";vl(h,y),vl(f,y)}else if(h==null||f==null){var w=function(j,L){if(j){var B=j.elm,$=h||L.width,Y=f||L.height;j.tag==="pattern"&&(c?(Y=1,$/=a.width):u&&($=1,Y/=a.height)),j.attrs.width=$,j.attrs.height=Y,B&&(B.setAttribute("width",$),B.setAttribute("height",Y))}},_=zY(m,null,n,function(j){l||w(k,j),w(d,j)});_&&_.width&&_.height&&(h=h||_.width,f=f||_.height)}d=uo("image","img",{href:m,width:h,height:f}),o.width=h,o.height=f}else i.svgElement&&(d=Rt(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(d){var T,A;l?T=A=1:c?(A=1,T=o.width/a.width):u?(T=1,A=o.height/a.height):o.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(o.width=T),A!=null&&!isNaN(A)&&(o.height=A);var C=FSe(i);C&&(o.patternTransform=C);var k=uo("pattern","",o,[d]),M=MK(k),P=r.patternCache,O=P[M];O||(O=r.zrId+"-p"+r.patternIdx++,P[M]=O,o.id=O,k=r.defs[O]=uo("pattern",O,o,[d])),e[t]=A5(O)}}function Upt(n,e,t){var r=t.clipPathCache,i=t.defs,a=r[n.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var o={id:a};r[n.id]=a,i[a]=uo("clipPath",a,o,[sAe(n,t)])}e["clip-path"]=A5(a)}function Kce(n){return document.createTextNode(n)}function Wb(n,e,t){n.insertBefore(e,t)}function Xce(n,e){n.removeChild(e)}function Zce(n,e){n.appendChild(e)}function uAe(n){return n.parentNode}function dAe(n){return n.nextSibling}function z6(n,e){n.textContent=e}var Qce=58,Vpt=120,zpt=uo("","");function U8(n){return n===void 0}function df(n){return n!==void 0}function Hpt(n,e,t){for(var r={},i=e;i<=t;++i){var a=n[i].key;a!==void 0&&(r[a]=i)}return r}function aC(n,e){var t=n.key===e.key,r=n.tag===e.tag;return r&&t}function wI(n){var e,t=n.children,r=n.tag;if(df(r)){var i=n.elm=nAe(r);if(NK(zpt,n),Fe(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&Zce(i,wI(a))}else df(n.text)&&!It(n.text)&&Zce(i,Kce(n.text))}else n.elm=Kce(n.text);return n.elm}function hAe(n,e,t,r,i){for(;r<=i;++r){var a=t[r];a!=null&&Wb(n,wI(a),e)}}function fL(n,e,t,r){for(;t<=r;++t){var i=e[t];if(i!=null)if(df(i.tag)){var a=uAe(i.elm);Xce(a,i.elm)}else Xce(n,i.elm)}}function NK(n,e){var t,r=e.elm,i=n&&n.attrs||{},a=e.attrs||{};if(i!==a){for(t in a){var o=a[t],s=i[t];s!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==Vpt?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(Spt,t,o):t.charCodeAt(3)===Qce?r.setAttributeNS(Tpt,t,o):t.charCodeAt(5)===Qce?r.setAttributeNS(tAe,t,o):r.setAttribute(t,o))}for(t in i)t in a||r.removeAttribute(t)}}function Gpt(n,e,t){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],l=t.length-1,c=t[0],u=t[l],d,h,f,m;r<=a&&i<=l;)o==null?o=e[++r]:s==null?s=e[--a]:c==null?c=t[++i]:u==null?u=t[--l]:aC(o,c)?(US(o,c),o=e[++r],c=t[++i]):aC(s,u)?(US(s,u),s=e[--a],u=t[--l]):aC(o,u)?(US(o,u),Wb(n,o.elm,dAe(s.elm)),o=e[++r],u=t[--l]):aC(s,c)?(US(s,c),Wb(n,s.elm,o.elm),s=e[--a],c=t[++i]):(U8(d)&&(d=Hpt(e,r,a)),h=d[c.key],U8(h)?Wb(n,wI(c),o.elm):(f=e[h],f.tag!==c.tag?Wb(n,wI(c),o.elm):(US(f,c),e[h]=void 0,Wb(n,f.elm,o.elm))),c=t[++i]);(r<=a||i<=l)&&(r>a?(m=t[l+1]==null?null:t[l+1].elm,hAe(n,m,t,i,l)):fL(n,e,r,a))}function US(n,e){var t=e.elm=n.elm,r=n.children,i=e.children;n!==e&&(NK(n,e),U8(e.text)?df(r)&&df(i)?r!==i&&Gpt(t,r,i):df(i)?(df(n.text)&&z6(t,""),hAe(t,null,i,0,i.length-1)):df(r)?fL(t,r,0,r.length-1):df(n.text)&&z6(t,""):n.text!==e.text&&(df(r)&&fL(t,r,0,r.length-1),z6(t,e.text)))}function qpt(n,e){if(aC(n,e))US(n,e);else{var t=n.elm,r=uAe(t);wI(e),r!==null&&(Wb(r,e.elm,dAe(t)),fL(r,[n],0,0))}return e}var Wpt=0,Ypt=function(){function n(e,t,r){if(this.type="svg",this.refreshHover=Jce(),this.configLayer=Jce(),this.storage=t,this._opts=r=Ie({},r),this.root=e,this._id="zr"+Wpt++,this._oldVNode=Uce(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=nAe("svg");NK(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",qpt(this._oldVNode,e),this._oldVNode=e}},n.prototype.renderOneToVNode=function(e){return Yce(e,B8(this._id))},n.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=B8(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var o=[],s=this._bgVNode=Kpt(r,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=uo("g","main",{},[]);this._paintList(t,a,l?l.children:o),l&&o.push(l);var c=$e(In(a.defs),function(h){return a.defs[h]});if(c.length&&o.push(uo("defs","defs",{},c)),e.animation){var u=kpt(a.cssNodes,a.cssAnims,{newline:!0});if(u){var d=uo("style","stl",{},[],u);o.push(d)}}return Uce(r,i,o,e.useViewBox)},n.prototype.renderToString=function(e){return e=e||{},MK(this.renderToVNode({animation:Gt(e.cssAnimation,!0),emphasis:Gt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Gt(e.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(e,t,r){for(var i=e.length,a=[],o=0,s,l,c=0,u=0;u<i;u++){var d=e[u];if(!d.invisible){var h=d.__clipPaths,f=h&&h.length||0,m=l&&l.length||0,v=void 0;for(v=Math.max(f-1,m-1);v>=0&&!(h&&l&&h[v]===l[v]);v--);for(var y=m-1;y>v;y--)o--,s=a[o-1];for(var w=v+1;w<f;w++){var _={};Upt(h[w],_,t);var T=uo("g","clip-g-"+c++,_,[]);(s?s.children:r).push(T),a[o++]=T,s=T}l=h;var A=Yce(d,t);A&&(s?s.children:r).push(A)}}},n.prototype.resize=function(e,t){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),i&&a&&(a.style.display="none",e=JS(i,0,r),t=JS(i,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var o=a.style;o.width=e+"px",o.height=t+"px"}if(jY(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=ost(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},n}();function Jce(n){return function(){}}function Kpt(n,e,t,r){var i;if(t&&t!=="none")if(i=uo("rect","bg",{width:n,height:e,x:"0",y:"0"}),LSe(t))lAe({fill:t},i.attrs,"fill",r);else if(jY(t))cAe({style:{fill:t},dirty:pa,getBoundingRect:function(){return{width:n,height:e}}},i.attrs,"fill",r);else{var a=oI(t),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function Xpt(n){n.registerPainter("svg",Ypt)}function eue(n,e,t){var r=wy.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var H6=function(n){gi(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||q2,typeof t=="string"?o=eue(t,r,i):It(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(bSe(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=eue("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new an(0,0,0,0);function u(_){if(!(!_.isFinite()||_.isZero()))if(o.length===0){var T=new an(0,0,0,0);T.copy(_),o.push(T)}else{for(var A=!1,C=1/0,k=0,M=0;M<o.length;++M){var P=o[M];if(P.intersect(_)){var O=new an(0,0,0,0);O.copy(P),O.union(_),o[M]=O,A=!0;break}else if(l){c.copy(_),c.union(P);var j=_.width*_.height,L=P.width*P.height,B=c.width*c.height,$=B-j-L;$<C&&(C=$,k=M)}}if(l&&(o[k].union(_),A=!0),!A){var T=new an(0,0,0,0);T.copy(_),o.push(T)}l||(l=o.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var h=t[d];if(h){var f=h.shouldBePainted(i,a,!0,!0),m=h.__isRendered&&(h.__dirty&Rc||!f)?h.getPrevPaintRect():null;m&&u(m);var v=f&&(h.__dirty&Rc||!h.__isRendered)?h.getPaintRect():null;v&&u(v)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var h=r[d],f=h&&h.shouldBePainted(i,a,!0,!0);if(h&&(!f||!h.__zr)&&h.__isRendered){var m=h.getPrevPaintRect();m&&u(m)}}var y;do{y=!1;for(var d=0;d<o.length;){if(o[d].isZero()){o.splice(d,1);continue}for(var w=d+1;w<o.length;)o[d].intersect(o[w])?(y=!0,o[d].union(o[w]),o.splice(w,1)):w++;d++}}while(y);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*i,a.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,h=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/d,l/d));var f=this.domBack;function m(v,y,w,_){if(o.clearRect(v,y,w,_),r&&r!=="transparent"){var T=void 0;if(S5(r)){var A=r.global||r.__width===w&&r.__height===_;T=A&&r.__canvasGradient||M8(o,r,{x:0,y:0,width:w,height:_}),r.__canvasGradient=T,r.__width=w,r.__height=_}else pot(r)&&(r.scaleX=r.scaleX||d,r.scaleY=r.scaleY||d,T=P8(o,r,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));o.save(),o.fillStyle=T||r,o.fillRect(v,y,w,_),o.restore()}c&&(o.save(),o.globalAlpha=u,o.drawImage(f,v,y,w,_),o.restore())}!i||c?m(0,0,s,l):i.length&&Z(i,function(v){m(v.x*d,v.y*d,v.width*d,v.height*d)})},e}(Xu),tue=1e5,Ib=314159,ZO=.01,Zpt=.001;function Qpt(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Jpt(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var egt=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Ie({},r||{}),this.dpr=r.devicePixelRatio||q2,this._singleCanvas=a,this.root=e;var o=e.style;o&&(bSe(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var u=e,d=u.width,h=u.height;r.width!=null&&(d=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,u.width=d*this.dpr,u.height=h*this.dpr,this._width=d,this._height=h;var f=new H6(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Ib]=f,f.zlevel=Ib,s.push(Ib),this._domRoot=e}else{this._width=JS(e,0,r),this._height=JS(e,1,r);var c=this._domRoot=Jpt(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(tue)),a||(a=r.ctx,a.save()),hw(a,s,i,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(tue)},n.prototype.paintOne=function(e,t){KTe(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;B2(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(Ib).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&a.push(c)}for(var u=!0,d=!1,h=function(v){var y=a[v],w=y.ctx,_=o&&y.createRepaintRects(e,t,f._width,f._height),T=r?y.__startIndex:y.__drawIndex,A=!r&&y.incremental&&Date.now,C=A&&Date.now(),k=y.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,k,_);else if(T===y.__startIndex){var M=e[T];(!M.incremental||!M.notClear||r)&&y.clear(!1,k,_)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=y.__startIndex);var P,O=function($){var Y={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(P=T;P<y.__endIndex;P++){var G=e[P];if(G.__inHover&&(d=!0),i._doPaintEl(G,y,o,$,Y,P===y.__endIndex-1),A){var W=Date.now()-C;if(W>15)break}}Y.prevElClipPaths&&w.restore()};if(_)if(_.length===0)P=y.__endIndex;else for(var j=f.dpr,L=0;L<_.length;++L){var B=_[L];w.save(),w.beginPath(),w.rect(B.x*j,B.y*j,B.width*j,B.height*j),w.clip(),O(B),w.restore()}else w.save(),O(),w.restore();y.__drawIndex=P,y.__drawIndex<y.__endIndex&&(u=!1)},f=this,m=0;m<a.length;m++)h(m);return Tn.wxa&&Z(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,r,i,a,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(hw(s,e,a,o),e.setPrevPaintRect(l))}else hw(s,e,a,o)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Ib);var r=this._layers[e];return r||(r=new H6("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?en(r,this._layerConfig[e],!0):this._layerConfig[e-ZO]&&en(r,this._layerConfig[e-ZO],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&Qpt(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(t.dom,c.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,h){d.__dirty=d.__used=!1});function t(d){a&&(a.__endIndex!==d&&(a.__dirty=!0),a.__endIndex=d)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],c=i.zlevel,u=void 0;s!==c&&(s=c,o=0),i.incremental?(u=this.getLayer(c+Zpt,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(c+(o>0?ZO:0),this._needsManuallyCompositing),u.__builtin__||DY("ZLevel "+c+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),a=u),i.__dirty&Rc&&!i.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,h){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Z(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?en(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+ZO){var o=this._layers[a];en(o,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(dn(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=JS(a,0,i),t=JS(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Ib).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Ib].dom;var t=new H6("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(d){d.__builtin__?r.drawImage(d.dom,0,0,i,a):d.renderToCanvas&&(r.save(),d.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];hw(r,u,o,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function tgt(n){n.registerPainter("canvas",egt)}var ngt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return rm(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new Lt,i=Pa("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=t.itemHeight*.8,c=Pa(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?o:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ai);function pT(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=dT(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(dT(n,e,t[o]));return a.join(" ")}}function fAe(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Fe(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var RM=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this)||this;return o.updateData(t,r,i,a),o}return e.prototype._createSymbol=function(t,r,i,a,o){this.removeAll();var s=Pa(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=rgt,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Bg(this.childAt(0))},e.prototype.downplay=function(){Ug(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),c=o!==this._symbolType,u=a&&a.disableAnimation;if(c){var d=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,d)}else{var h=this.childAt(0);h.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?h.attr(f):tr(h,f,s,r),lh(h)}if(this._updateCommon(t,r,l,i,a),c){var h=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Si(h,f,s,r)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,o){var s=this.childAt(0),l=t.hostModel,c,u,d,h,f,m,v,y,w;if(a&&(c=a.emphasisItemStyle,u=a.blurItemStyle,d=a.selectItemStyle,h=a.focus,f=a.blurScope,v=a.labelStatesModels,y=a.hoverScale,w=a.cursorStyle,m=a.emphasisDisabled),!a||t.hasItemOption){var _=a&&a.itemModel?a.itemModel:t.getItemModel(r),T=_.getModel("emphasis");c=T.getModel("itemStyle").getItemStyle(),d=_.getModel(["select","itemStyle"]).getItemStyle(),u=_.getModel(["blur","itemStyle"]).getItemStyle(),h=T.get("focus"),f=T.get("blurScope"),m=T.get("disabled"),v=po(_),y=T.getShallow("scale"),w=_.getShallow("cursor")}var A=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(A||0)*Math.PI/180||0);var C=ux(t.getItemVisual(r,"symbolOffset"),i);C&&(s.x=C[0],s.y=C[1]),w&&s.attr("cursor",w);var k=t.getItemVisual(r,"style"),M=k.fill;if(s instanceof Fo){var P=s.style;s.useStyle(Ie({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},k))}else s.__isEmptyBrush?s.useStyle(Ie({},k)):s.useStyle(k),s.style.decal=null,s.setColor(M,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var O=t.getItemVisual(r,"liftZ"),j=this._z2;O!=null?j==null&&(this._z2=s.z2,s.z2+=O):j!=null&&(s.z2=j,this._z2=null);var L=o&&o.useNameLabel;os(s,v,{labelFetcher:l,labelDataIndex:r,defaultText:B,inheritColor:M,defaultOpacity:k.opacity});function B(G){return L?t.getName(G):pT(t,G)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var $=s.ensureState("emphasis");$.style=c,s.ensureState("select").style=d,s.ensureState("blur").style=u;var Y=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;$.scaleX=this._sizeX*Y,$.scaleY=this._sizeY*Y,this.setSymbolScale(1),Vi(this,h,f,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),o=$t(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&_y(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();_y(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return JT(t.getItemVisual(r,"symbolSize"))},e}(Lt);function rgt(n,e){this.parent.drift(n,e)}function G6(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function nue(n){return n!=null&&!It(n)&&(n={isIgnore:n}),n||{}}function rue(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:po(e),cursorStyle:e.get("cursor")}}var NM=function(){function n(e){this.group=new Lt,this._SymbolCtor=e||RM}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=nue(t);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=rue(e),c={disableAnimation:s},u=t.getSymbolPoint||function(d){return e.getItemLayout(d)};a||r.removeAll(),e.diff(a).add(function(d){var h=u(d);if(G6(e,h,d,t)){var f=new o(e,d,l,c);f.setPosition(h),e.setItemGraphicEl(d,f),r.add(f)}}).update(function(d,h){var f=a.getItemGraphicEl(h),m=u(d);if(!G6(e,m,d,t)){r.remove(f);return}var v=e.getItemVisual(d,"symbol")||"circle",y=f&&f.getSymbolType&&f.getSymbolType();if(!f||y&&y!==v)r.remove(f),f=new o(e,d,l,c),f.setPosition(m);else{f.updateData(e,d,l,c);var w={x:m[0],y:m[1]};s?f.attr(w):tr(f,w,i)}r.add(f),e.setItemGraphicEl(d,f)}).remove(function(d){var h=a.getItemGraphicEl(d);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=u,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=rue(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=nue(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(G6(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(e){Fy(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n}();function pAe(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=igt(i,t),o=r.dim,s=i.dim,l=e.mapDimension(s),c=e.mapDimension(o),u=s==="x"||s==="radius"?1:0,d=$e(n.dimensions,function(m){return e.mapDimension(m)}),h=!1,f=e.getCalculationInfo("stackResultDimension");return Ty(e,d[0])&&(h=!0,d[0]=f),Ty(e,d[1])&&(h=!0,d[1]=f),{dataDimsForPoint:d,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function igt(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Jn(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function gAe(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,o=[];return o[a]=t.get(n.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function agt(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function ogt(n,e,t,r,i,a,o,s){for(var l=agt(n,e),c=[],u=[],d=[],h=[],f=[],m=[],v=[],y=pAe(i,e,o),w=n.getLayout("points")||[],_=e.getLayout("points")||[],T=0;T<l.length;T++){var A=l[T],C=!0,k=void 0,M=void 0;switch(A.cmd){case"=":k=A.idx*2,M=A.idx1*2;var P=w[k],O=w[k+1],j=_[M],L=_[M+1];(isNaN(P)||isNaN(O))&&(P=j,O=L),c.push(P,O),u.push(j,L),d.push(t[k],t[k+1]),h.push(r[M],r[M+1]),v.push(e.getRawIndex(A.idx1));break;case"+":var B=A.idx,$=y.dataDimsForPoint,Y=i.dataToPoint([e.get($[0],B),e.get($[1],B)]);M=B*2,c.push(Y[0],Y[1]),u.push(_[M],_[M+1]);var G=gAe(y,i,e,B);d.push(G[0],G[1]),h.push(r[M],r[M+1]),v.push(e.getRawIndex(B));break;case"-":C=!1}C&&(f.push(A),m.push(m.length))}m.sort(function(fe,Ce){return v[fe]-v[Ce]});for(var W=c.length,X=Sf(W),te=Sf(W),re=Sf(W),z=Sf(W),ae=[],T=0;T<m.length;T++){var le=m[T],ee=T*2,ye=le*2;X[ee]=c[ye],X[ee+1]=c[ye+1],te[ee]=u[ye],te[ee+1]=u[ye+1],re[ee]=d[ye],re[ee+1]=d[ye+1],z[ee]=h[ye],z[ee+1]=h[ye+1],ae[T]=f[le]}return{current:X,next:te,stackedOnCurrent:re,stackedOnNext:z,status:ae}}var kv=Math.min,Cv=Math.max;function Cw(n,e){return isNaN(n)||isNaN(e)}function V8(n,e,t,r,i,a,o,s,l){for(var c,u,d,h,f,m,v=t,y=0;y<r;y++){var w=e[v*2],_=e[v*2+1];if(v>=i||v<0)break;if(Cw(w,_)){if(l){v+=a;continue}break}if(v===t)n[a>0?"moveTo":"lineTo"](w,_),d=w,h=_;else{var T=w-c,A=_-u;if(T*T+A*A<.5){v+=a;continue}if(o>0){for(var C=v+a,k=e[C*2],M=e[C*2+1];k===w&&M===_&&y<r;)y++,C+=a,v+=a,k=e[C*2],M=e[C*2+1],w=e[v*2],_=e[v*2+1],T=w-c,A=_-u;var P=y+1;if(l)for(;Cw(k,M)&&P<r;)P++,C+=a,k=e[C*2],M=e[C*2+1];var O=.5,j=0,L=0,B=void 0,$=void 0;if(P>=r||Cw(k,M))f=w,m=_;else{j=k-c,L=M-u;var Y=w-c,G=k-w,W=_-u,X=M-_,te=void 0,re=void 0;if(s==="x"){te=Math.abs(Y),re=Math.abs(G);var z=j>0?1:-1;f=w-z*te*o,m=_,B=w+z*re*o,$=_}else if(s==="y"){te=Math.abs(W),re=Math.abs(X);var ae=L>0?1:-1;f=w,m=_-ae*te*o,B=w,$=_+ae*re*o}else te=Math.sqrt(Y*Y+W*W),re=Math.sqrt(G*G+X*X),O=re/(re+te),f=w-j*o*(1-O),m=_-L*o*(1-O),B=w+j*o*O,$=_+L*o*O,B=kv(B,Cv(k,w)),$=kv($,Cv(M,_)),B=Cv(B,kv(k,w)),$=Cv($,kv(M,_)),j=B-w,L=$-_,f=w-j*te/re,m=_-L*te/re,f=kv(f,Cv(c,w)),m=kv(m,Cv(u,_)),f=Cv(f,kv(c,w)),m=Cv(m,kv(u,_)),j=w-f,L=_-m,B=w+j*re/te,$=_+L*re/te}n.bezierCurveTo(d,h,f,m,w,_),d=B,h=$}else n.lineTo(w,_)}c=w,u=_,v+=a}return y}var mAe=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),sgt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new mAe},e.prototype.buildPath=function(t,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&Cw(i[o*2-2],i[o*2-1]);o--);for(;a<o&&Cw(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=V8(t,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=Bf.CMD,s,l,c=r==="x",u=[],d=0;d<a.length;){var h=a[d++],f=void 0,m=void 0,v=void 0,y=void 0,w=void 0,_=void 0,T=void 0;switch(h){case o.M:s=a[d++],l=a[d++];break;case o.L:if(f=a[d++],m=a[d++],T=c?(t-s)/(f-s):(t-l)/(m-l),T<=1&&T>=0){var A=c?(m-l)*T+l:(f-s)*T+s;return c?[t,A]:[A,t]}s=f,l=m;break;case o.C:f=a[d++],m=a[d++],v=a[d++],y=a[d++],w=a[d++],_=a[d++];var C=c?V2(s,f,v,w,t,u):V2(l,m,y,_,t,u);if(C>0)for(var k=0;k<C;k++){var M=u[k];if(M<=1&&M>=0){var A=c?so(l,m,y,_,M):so(s,f,v,w,M);return c?[t,A]:[A,t]}}s=w,l=_;break}}},e}(wn),lgt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(mAe),vAe=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new lgt},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Cw(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Cw(i[o*2],i[o*2+1]);o++);}for(;o<s;){var c=V8(t,i,o,s,s,1,r.smooth,l,r.connectNulls);V8(t,a,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,t.closePath()}},e}(wn);function yAe(n,e,t,r,i){var a=n.getArea(),o=a.x,s=a.y,l=a.width,c=a.height,u=t.get(["lineStyle","width"])||0;o-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new Hn({shape:{x:o,y:s,width:l,height:c}});if(e){var h=n.getBaseAxis(),f=h.isHorizontal(),m=h.inverse;f?(m&&(d.shape.x+=l),d.shape.width=0):(m||(d.shape.y+=c),d.shape.height=0);var v=Et(i)?function(y){i(y,d)}:null;Si(d,{shape:{width:l,height:c,x:o,y:s}},t,null,r,v)}return d}function bAe(n,e,t){var r=n.getArea(),i=na(r.r0,1),a=na(r.r,1),o=new bl({shape:{cx:na(n.cx,1),cy:na(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=n.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,Si(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function LM(n,e,t,r,i){if(n){if(n.type==="polar")return bAe(n,e,t);if(n.type==="cartesian2d")return yAe(n,e,t,r,i)}else return null;return null}function hx(n,e){return n.type===e}function iue(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function aue(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var o=n[a++],s=n[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function oue(n,e){var t=aue(n),r=t[0],i=t[1],a=aue(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function sue(n){return Jn(n)?n:n?.5:0}function cgt(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=Sf(r*2),a=0;a<r;a++){var o=gAe(t,n,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Dv(n,e,t,r,i){var a=t.getBaseAxis(),o=a.dim==="x"||a.dim==="radius"?0:1,s=[],l=0,c=[],u=[],d=[],h=[];if(i){for(l=0;l<n.length;l+=2){var f=e||n;!isNaN(f[l])&&!isNaN(f[l+1])&&h.push(n[l],n[l+1])}n=h}for(l=0;l<n.length-2;l+=2)switch(d[0]=n[l+2],d[1]=n[l+3],u[0]=n[l],u[1]=n[l+1],s.push(u[0],u[1]),r){case"end":c[o]=d[o],c[1-o]=u[1-o],s.push(c[0],c[1]);break;case"middle":var m=(u[o]+d[o])/2,v=[];c[o]=v[o]=m,c[1-o]=u[1-o],v[1-o]=d[1-o],s.push(c[0],c[1]),s.push(v[0],v[1]);break;default:c[o]=u[o],c[1-o]=d[1-o],s.push(c[0],c[1])}return s.push(n[l++],n[l++]),s}function ugt(n,e){var t=[],r=n.length,i,a;function o(u,d,h){var f=u.coord,m=(h-f)/(d.coord-f),v=Jot(m,[u.color,d.color]);return{coord:h,color:v}}for(var s=0;s<r;s++){var l=n[s],c=l.coord;if(c<0)i=l;else if(c>e){a?t.push(o(a,l,e)):i&&t.push(o(i,l,0),o(i,l,e));break}else i&&(t.push(o(i,l,0)),i=null),t.push(l),a=l}return t}function dgt(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=n.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=e.getAxis(i),c=$e(a.stops,function(T){return{coord:l.toGlobalCoord(l.dataToCoord(T.value)),color:T.color}}),u=c.length,d=a.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),d.reverse());var h=ugt(c,i==="x"?t.getWidth():t.getHeight()),f=h.length;if(!f&&u)return c[0].coord<0?d[1]?d[1]:c[u-1].color:d[0]?d[0]:c[0].color;var m=10,v=h[0].coord-m,y=h[f-1].coord+m,w=y-v;if(w<.001)return"transparent";Z(h,function(T){T.offset=(T.coord-v)/w}),h.push({offset:f?h[f-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:f?h[0].offset:.5,color:d[0]||"transparent"});var _=new kM(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=y,_}}}function hgt(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&fgt(a,e))){var o=e.mapDimension(a.dim),s={};return Z(a.getViewLabels(),function(l){var c=a.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function fgt(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(RM.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function pgt(n,e){return isNaN(n)||isNaN(e)}function ggt(n){for(var e=n.length/2;e>0&&pgt(n[e*2-2],n[e*2-1]);e--);return e-1}function lue(n,e){return[n[e*2],n[e*2+1]]}function mgt(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,o,s=0,l=-1,c=0;c<r;c++)if(o=n[c*2+i],!(isNaN(o)||isNaN(n[c*2+1-i]))){if(c===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=c;break}s=c,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function wAe(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<yl.length;e++)if(n.get([yl[e],"endLabel","show"]))return!0;return!1}function q6(n,e,t,r){if(hx(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=wAe(r)?function(f,m){n._endLabelOnDuring(f,m,o,s,a,i,e)}:null,c=e.getBaseAxis().isHorizontal(),u=yAe(e,t,r,function(){var f=n._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var d=u.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=h*2):(d.x-=h,d.width+=h*2)}return l&&l(1,u),u}else return bAe(e,t,r)}function vgt(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||o}}}var ygt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Lt,r=new NM;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=ct(this._changePolyState,this)},e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),u=s.getLayout("points")||[],d=a.type==="polar",h=this._coordSys,f=this._symbolDraw,m=this._polyline,v=this._polygon,y=this._lineGroup,w=!r.ssr&&t.get("animation"),_=!c.isEmpty(),T=c.get("origin"),A=pAe(a,s,T),C=_&&cgt(a,s,A),k=t.get("showSymbol"),M=t.get("connectNulls"),P=k&&!d&&hgt(t,s,a),O=this._data;O&&O.eachItemGraphicEl(function(fe,Ce){fe.__temp&&(o.remove(fe),O.setItemGraphicEl(Ce,null))}),k||f.remove(),o.add(y);var j=d?!1:t.get("step"),L;a&&a.getArea&&t.get("clip",!0)&&(L=a.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var B=dgt(s,a,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(m&&h.type===a.type&&j===this._step))k&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(fe){return[u[fe*2],u[fe*2+1]]}}),w&&this._initSymbolLabelAnimation(s,a,L),j&&(C&&(C=Dv(C,u,a,j,M)),u=Dv(u,null,a,j,M)),m=this._newPolyline(u),_?v=this._newPolygon(u,C):v&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,Kw(B)),y.setClipPath(q6(this,a,!0,t));else{_&&!v?v=this._newPolygon(u,C):v&&!_&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,Kw(B));var $=y.getClipPath();if($){var Y=q6(this,a,!1,t);Si($,{shape:Y.shape},t)}else y.setClipPath(q6(this,a,!0,t));k&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(fe){return[u[fe*2],u[fe*2+1]]}}),(!iue(this._stackedOnPoints,C)||!iue(this._points,u))&&(w?this._doUpdateAnimation(s,C,a,i,j,T,M):(j&&(C&&(C=Dv(C,u,a,j,M)),u=Dv(u,null,a,j,M)),m.setShape({points:u}),v&&v.setShape({points:u,stackedOnPoints:C})))}var G=t.getModel("emphasis"),W=G.get("focus"),X=G.get("blurScope"),te=G.get("disabled");if(m.useStyle(kt(l.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),as(m,t,"lineStyle"),m.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var re=m.getState("emphasis").style;re.lineWidth=+m.style.lineWidth+1}$t(m).seriesIndex=t.seriesIndex,Vi(m,W,X,te);var z=sue(t.get("smooth")),ae=t.get("smoothMonotone");if(m.setShape({smooth:z,smoothMonotone:ae,connectNulls:M}),v){var le=s.getCalculationInfo("stackedOnSeries"),ee=0;v.useStyle(kt(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),le&&(ee=sue(le.get("smooth"))),v.setShape({smooth:z,stackedOnSmooth:ee,smoothMonotone:ae,connectNulls:M}),as(v,t,"areaStyle"),$t(v).seriesIndex=t.seriesIndex,Vi(v,W,X,te)}var ye=this._changePolyState;s.eachItemGraphicEl(function(fe){fe&&(fe.onHoverStateChange=ye)}),this._polyline.onHoverStateChange=ye,this._data=s,this._coordSys=a,this._stackedOnPoints=C,this._points=u,this._step=j,this._valueOrigin=T,t.get("triggerLineEvent")&&(this.packEventData(t,m),v&&this.packEventData(t,v))},e.prototype.packEventData=function(t,r){$t(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var o=t.getData(),s=qw(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var u=l[s*2],d=l[s*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;c=new RM(o,s),c.x=u,c.y=d,c.setZ(h,f);var m=c.getSymbolPath().getTextContent();m&&(m.zlevel=h,m.z=f,m.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else Vr.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var o=t.getData(),s=qw(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Vr.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;K2(this._polyline,t),r&&K2(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new sgt({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new vAe({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var c=t.hostModel,u=c.get("animationDuration");Et(u)&&(u=u(null));var d=c.get("animationDelay")||0,h=Et(d)?d(null):d;t.eachItemGraphicEl(function(f,m){var v=f;if(v){var y=[f.x,f.y],w=void 0,_=void 0,T=void 0;if(i)if(o){var A=i,C=r.pointToCoord(y);a?(w=A.startAngle,_=A.endAngle,T=-C[1]/180*Math.PI):(w=A.r0,_=A.r,T=C[0])}else{var k=i;a?(w=k.x,_=k.x+k.width,T=f.x):(w=k.y+k.height,_=k.y,T=f.y)}var M=_===w?0:(T-w)/(_-w);l&&(M=1-M);var P=Et(d)?d(m):u*M+h,O=v.getSymbolPath(),j=O.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),j&&j.animateFrom({style:{opacity:0}},{duration:300,delay:P}),O.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(wAe(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Yn({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=ggt(l);u>=0&&(os(s,po(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:u,defaultText:function(d,h,f){return f!=null?fAe(o,f):pT(o,d)},enableTextSetter:!0},vgt(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,o,s,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&a.originalX==null&&(a.originalX=c.x,a.originalY=c.y);var d=i.getLayout("points"),h=i.hostModel,f=h.get("connectNulls"),m=s.get("precision"),v=s.get("distance")||0,y=l.getBaseAxis(),w=y.isHorizontal(),_=y.inverse,T=r.shape,A=_?w?T.x:T.y+T.height:w?T.x+T.width:T.y,C=(w?v:0)*(_?-1:1),k=(w?0:-v)*(_?-1:1),M=w?"x":"y",P=mgt(d,A,M),O=P.range,j=O[1]-O[0],L=void 0;if(j>=1){if(j>1&&!f){var B=lue(d,O[0]);c.attr({x:B[0]+C,y:B[1]+k}),o&&(L=h.getRawValue(O[0]))}else{var B=u.getPointOn(A,M);B&&c.attr({x:B[0]+C,y:B[1]+k});var $=h.getRawValue(O[0]),Y=h.getRawValue(O[1]);o&&(L=r1e(i,m,$,Y,P.t))}a.lastFrameIndex=O[0]}else{var G=t===1||a.lastFrameIndex>0?O[0]:0,B=lue(d,G);o&&(L=h.getRawValue(G)),c.attr({x:B[0]+C,y:B[1]+k})}if(o){var W=qT(c);typeof W.setLabelText=="function"&&W.setLabelText(L)}}},e.prototype._doUpdateAnimation=function(t,r,i,a,o,s,l){var c=this._polyline,u=this._polygon,d=t.hostModel,h=ogt(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=h.current,m=h.stackedOnCurrent,v=h.next,y=h.stackedOnNext;if(o&&(m=Dv(h.stackedOnCurrent,h.current,i,o,l),f=Dv(h.current,null,i,o,l),y=Dv(h.stackedOnNext,h.next,i,o,l),v=Dv(h.next,null,i,o,l)),oue(f,v)>3e3||u&&oue(m,y)>3e3){c.stopAnimation(),c.setShape({points:v}),u&&(u.stopAnimation(),u.setShape({points:v,stackedOnPoints:y}));return}c.shape.__points=h.current,c.shape.points=f;var w={shape:{points:v}};h.current!==f&&(w.shape.__points=h.next),c.stopAnimation(),tr(c,w,d),u&&(u.setShape({points:f,stackedOnPoints:m}),u.stopAnimation(),tr(u,{shape:{stackedOnPoints:y}},d),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var _=[],T=h.status,A=0;A<T.length;A++){var C=T[A].cmd;if(C==="="){var k=t.getItemGraphicEl(T[A].idx1);k&&_.push({el:k,ptIdx:A})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var M=c.shape.__points,P=0;P<_.length;P++){var O=_[P].el,j=_[P].ptIdx*2;O.x=M[j],O.y=M[j+1],O.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(Vr);function jM(n,e){return{seriesType:n,plan:ZT(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(i){var s=$e(i.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");Ty(r,s[0])&&(s[0]=c),Ty(r,s[1])&&(s[1]=c);var u=r.getStore(),d=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return l&&{progress:function(f,m){for(var v=f.end-f.start,y=o&&Sf(v*l),w=[],_=[],T=f.start,A=0;T<f.end;T++){var C=void 0;if(l===1){var k=u.get(d,T);C=i.dataToPoint(k,null,_)}else w[0]=u.get(d,T),w[1]=u.get(h,T),C=i.dataToPoint(w,null,_);o?(y[A++]=C[0],y[A++]=C[1]):m.setItemLayout(T,C.slice())}o&&m.setLayout("points",y)}}}}}}var bgt={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},wgt=function(n){return Math.round(n.length/2)};function xAe(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),c=o.getOtherAxis(l),u=l.getExtent(),d=r.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(d||1),f=Math.round(s/h);if(isFinite(f)&&f>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(c.dim),1/f)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(c.dim),1/f));var m=void 0;it(a)?m=bgt[a]:Et(a)&&(m=a),m&&e.setData(i.downSample(i.mapDimension(c.dim),1/f,m,wgt))}}}}}function xgt(n){n.registerChartView(ygt),n.registerSeriesModel(ngt),n.registerLayout(jM("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,xAe("line"))}var xI=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return rm(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(t),s=a.dataToPoint(o);if(i)Z(a.getAxes(),function(h,f){if(h.type==="category"&&r!=null){var m=h.getTicksCoords(),v=h.getTickModel().get("alignWithLabel"),y=o[f],w=r[f]==="x1"||r[f]==="y1";if(w&&!v&&(y+=1),m.length<2)return;if(m.length===2){s[f]=h.toGlobalCoord(h.getExtent()[w?1:0]);return}for(var _=void 0,T=void 0,A=1,C=0;C<m.length;C++){var k=m[C].coord,M=C===m.length-1?m[C-1].tickValue+A:m[C].tickValue;if(M===y){T=k;break}else if(M<y)_=k;else if(_!=null&&M>y){T=(k+_)/2;break}C===1&&(A=M-m[0].tickValue)}T==null&&(_?_&&(T=m[m.length-1].coord):T=m[0].coord),s[f]=h.toGlobalCoord(T)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=a.getBaseAxis().isHorizontal()?0:1;s[d]+=c+u/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(ai);ai.registerClass(xI);var _gt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return rm(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=$y(xI.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(xI),Sgt=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),pL=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Sgt},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,u=r.startAngle,d=r.endAngle,h=r.clockwise,f=Math.PI*2,m=h?d-u<f:u-d<f;m||(u=d-(h?f:-f));var v=Math.cos(u),y=Math.sin(u),w=Math.cos(d),_=Math.sin(d);m?(t.moveTo(v*o+i,y*o+a),t.arc(v*c+i,y*c+a,l,-Math.PI+u,u,!h)):t.moveTo(v*s+i,y*s+a),t.arc(i,a,s,u,d,!h),t.arc(w*c+i,_*c+a,l,d-Math.PI*2,d-Math.PI,!h),o!==0&&t.arc(i,a,o,d,u,h)},e}(wn);function Tgt(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return W2(r,i,a);var s=n(o),l=i.distance!=null?i.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,f=c.r0,m=(h+f)/2,v=c.startAngle,y=c.endAngle,w=(v+y)/2,_=t?Math.abs(h-f)/2:0,T=Math.cos,A=Math.sin,C=u+h*T(v),k=d+h*A(v),M="left",P="top";switch(s){case"startArc":C=u+(f-l)*T(w),k=d+(f-l)*A(w),M="center",P="top";break;case"insideStartArc":C=u+(f+l)*T(w),k=d+(f+l)*A(w),M="center",P="bottom";break;case"startAngle":C=u+m*T(v)+QO(v,l+_,!1),k=d+m*A(v)+JO(v,l+_,!1),M="right",P="middle";break;case"insideStartAngle":C=u+m*T(v)+QO(v,-l+_,!1),k=d+m*A(v)+JO(v,-l+_,!1),M="left",P="middle";break;case"middle":C=u+m*T(w),k=d+m*A(w),M="center",P="middle";break;case"endArc":C=u+(h+l)*T(w),k=d+(h+l)*A(w),M="center",P="bottom";break;case"insideEndArc":C=u+(h-l)*T(w),k=d+(h-l)*A(w),M="center",P="top";break;case"endAngle":C=u+m*T(y)+QO(y,l+_,!0),k=d+m*A(y)+JO(y,l+_,!0),M="left",P="middle";break;case"insideEndAngle":C=u+m*T(y)+QO(y,-l+_,!0),k=d+m*A(y)+JO(y,-l+_,!0),M="right",P="middle";break;default:return W2(r,i,a)}return r=r||{},r.x=C,r.y=k,r.align=M,r.verticalAlign=P,r}}function Egt(n,e,t,r){if(Jn(r)){n.setTextConfig({rotation:r});return}else if(Fe(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,c=t(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:n.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),n.setTextConfig({rotation:u})}function QO(n,e,t){return e*Math.sin(n)*(t?-1:1)}function JO(n,e,t){return e*Math.cos(n)*(t?1:-1)}function fw(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Fe(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:$e(r,function(a){return sh(a,i)})}}var W6=Math.max,Y6=Math.min;function Agt(n,e){var t=n.getArea&&n.getArea();if(hx(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var kgt=function(n){_e(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Fy(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var o=this.group,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=t.isAnimationEnabled()?t:null,f=Cgt(t,c);f&&this._enableRealtimeSort(f,s,i);var m=t.get("clip",!0)||f,v=Agt(c,s);o.removeClipPath();var y=t.get("roundCap",!0),w=t.get("showBackground",!0),_=t.getModel("backgroundStyle"),T=_.get("borderRadius")||0,A=[],C=this._backgroundEls,k=a&&a.isInitSort,M=a&&a.type==="changeAxisOrder";function P(L){var B=eR[c.type](s,L),$=Ngt(c,d,B);return $.useStyle(_.getItemStyle()),c.type==="cartesian2d"?$.setShape("r",T):$.setShape("cornerRadius",T),A[L]=$,$}s.diff(l).add(function(L){var B=s.getItemModel(L),$=eR[c.type](s,L,B);if(w&&P(L),!(!s.hasValue(L)||!fue[c.type]($))){var Y=!1;m&&(Y=cue[c.type](v,$));var G=uue[c.type](t,s,L,$,d,h,u.model,!1,y);f&&(G.forceLabelAnimation=!0),pue(G,s,L,B,$,t,d,c.type==="polar"),k?G.attr({shape:$}):f?due(f,h,G,$,L,d,!1,!1):Si(G,{shape:$},t,L),s.setItemGraphicEl(L,G),o.add(G),G.ignore=Y}}).update(function(L,B){var $=s.getItemModel(L),Y=eR[c.type](s,L,$);if(w){var G=void 0;C.length===0?G=P(B):(G=C[B],G.useStyle(_.getItemStyle()),c.type==="cartesian2d"?G.setShape("r",T):G.setShape("cornerRadius",T),A[L]=G);var W=eR[c.type](s,L),X=SAe(d,W,c);tr(G,{shape:X},h,L)}var te=l.getItemGraphicEl(B);if(!s.hasValue(L)||!fue[c.type](Y)){o.remove(te);return}var re=!1;if(m&&(re=cue[c.type](v,Y),re&&o.remove(te)),te?lh(te):te=uue[c.type](t,s,L,Y,d,h,u.model,!!te,y),f&&(te.forceLabelAnimation=!0),M){var z=te.getTextContent();if(z){var ae=qT(z);ae.prevValue!=null&&(ae.prevValue=ae.value)}}else pue(te,s,L,$,Y,t,d,c.type==="polar");k?te.attr({shape:Y}):f?due(f,h,te,Y,L,d,!0,M):tr(te,{shape:Y},t,L,null),s.setItemGraphicEl(L,te),te.ignore=re,o.add(te)}).remove(function(L){var B=l.getItemGraphicEl(L);B&&dI(B,t,L)}).execute();var O=this._backgroundGroup||(this._backgroundGroup=new Lt);O.removeAll();for(var j=0;j<A.length;++j)O.add(A[j]);o.add(O),this._backgroundEls=A,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),mue(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),mue(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&LM(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:$e(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,c=a.getOrdinalMeta().categories.length;l<c;++l){var u=t.rawIndexOf(o,a.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(d>s)return!0;s=d}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){dI(a,t,$t(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Vr),cue={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,o=W6(e.x,n.x),s=Y6(e.x+e.width,i),l=W6(e.y,n.y),c=Y6(e.y+e.height,a),u=s<o,d=c<l;return e.x=u&&o>i?s:o,e.y=d&&l>a?c:l,e.width=u?0:s-o,e.height=d?0:c-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||d},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=Y6(e.r,n.r),a=W6(e.r0,n.r0);e.r=i,e.r0=a;var o=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},uue={cartesian2d:function(n,e,t,r,i,a,o,s,l){var c=new Hn({shape:Ie({},r),z2:1});if(c.__dataIndex=t,c.name="item",a){var u=c.shape,d=i?"height":"width";u[d]=0}return c},polar:function(n,e,t,r,i,a,o,s,l){var c=!i&&l?pL:bl,u=new c({shape:r,z2:1});u.name="item";var d=_Ae(i);if(u.calculateTextPosition=Tgt(d,{isRoundCap:c===pL}),a){var h=u.shape,f=i?"r":"endAngle",m={};h[f]=i?r.r0:r.startAngle,m[f]=r[f],(s?tr:Si)(u,{shape:m},a)}return u}};function Cgt(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function due(n,e,t,r,i,a,o,s){var l,c;a?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?tr:Si)(t,{shape:l},e,i,null);var u=e?n.baseAxis.model:null;(o?tr:Si)(t,{shape:c},u,i)}function hue(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var Dgt=["x","y","width","height"],Igt=["cx","cy","r","startAngle","endAngle"],fue={cartesian2d:function(n){return!hue(n,Dgt)},polar:function(n){return!hue(n,Igt)}},eR={cartesian2d:function(n,e,t){var r=n.getItemLayout(e),i=t?Pgt(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Mgt(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function _Ae(n){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(n)}function pue(n,e,t,r,i,a,o,s){var l=e.getItemVisual(t,"style");if(s){if(!a.get("roundCap")){var u=n.shape,d=fw(r.getModel("itemStyle"),u,!0);Ie(u,d),n.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(l);var h=r.getShallow("cursor");h&&n.attr("cursor",h);var f=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",m=po(r);os(n,m,{labelFetcher:a,labelDataIndex:t,defaultText:pT(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=n.getTextContent();if(s&&v){var y=r.get(["label","position"]);n.textConfig.inside=y==="middle"?!0:null,Egt(n,y==="outside"?f:y,_Ae(o),r.get(["label","rotate"]))}B1e(v,m,a.getRawValue(t),function(_){return fAe(e,_)});var w=r.getModel(["emphasis"]);Vi(n,w.get("focus"),w.get("blurScope"),w.get("disabled")),as(n,r),Mgt(i)&&(n.style.fill="none",n.style.stroke="none",Z(n.states,function(_){_.style&&(_.style.fill=_.style.stroke="none")}))}function Pgt(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var Ogt=function(){function n(){}return n}(),gue=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Ogt},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<i.length;u+=3)l[a]=c,l[o]=i[u+2],s[a]=i[u+a],s[o]=i[u+o],t.rect(s[0],s[1],l[0],l[1])},e}(wn);function mue(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=n.getModel("backgroundStyle"),c=i.getLayout("largeBackgroundPoints");if(c){var u=new gue({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=a,u.largeDataIndices=o,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),t&&t.push(u)}var d=new gue({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=a,d.largeDataIndices=o,d.barWidth=s,e.add(d),d.useStyle(i.getVisual("style")),d.style.stroke=null,$t(d).seriesIndex=n.seriesIndex,n.get("silent")||(d.on("mousedown",vue),d.on("mousemove",vue)),t&&t.push(d)}var vue=gK(function(n){var e=this,t=Rgt(e,n.offsetX,n.offsetY);$t(e).dataIndex=t>=0?t:null},30,!1);function Rgt(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,o=n.largeDataIndices,s=[],l=[],c=n.barWidth,u=0,d=a.length/3;u<d;u++){var h=u*3;if(l[r]=c,l[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[u]}return-1}function SAe(n,e,t){if(hx(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function Ngt(n,e,t){var r=n.type==="polar"?bl:Hn;return new r({shape:SAe(e,t,n),silent:!0,z2:0})}function Lgt(n){n.registerChartView(kgt),n.registerSeriesModel(_gt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Yt(CEe,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,DEe("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,xAe("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var yue=Math.PI*2,tR=Math.PI/180;function TAe(n,e){return Za(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function EAe(n,e){var t=TAe(n,e),r=n.get("center"),i=n.get("radius");Fe(i)||(i=[0,i]);var a=Ze(t.width,e.getWidth()),o=Ze(t.height,e.getHeight()),s=Math.min(a,o),l=Ze(i[0],s/2),c=Ze(i[1],s/2),u,d,h=n.coordinateSystem;if(h){var f=h.dataToPoint(r);u=f[0]||0,d=f[1]||0}else Fe(r)||(r=[r,r]),u=Ze(r[0],a)+t.x,d=Ze(r[1],o)+t.y;return{cx:u,cy:d,r0:l,r:c}}function jgt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),o=TAe(r,t),s=EAe(r,t),l=s.cx,c=s.cy,u=s.r,d=s.r0,h=-r.get("startAngle")*tR,f=r.get("endAngle"),m=r.get("padAngle")*tR;f=f==="auto"?h-yue:-f*tR;var v=r.get("minAngle")*tR,y=v+m,w=0;i.each(a,function(X){!isNaN(X)&&w++});var _=i.getSum(a),T=Math.PI/(_||w)*2,A=r.get("clockwise"),C=r.get("roseType"),k=r.get("stillShowZeroSum"),M=i.getDataExtent(a);M[0]=0;var P=A?1:-1,O=[h,f],j=P*m/2;HY(O,!A),h=O[0],f=O[1];var L=AAe(r);L.startAngle=h,L.endAngle=f,L.clockwise=A;var B=Math.abs(f-h),$=B,Y=0,G=h;if(i.setLayout({viewRect:o,r:u}),i.each(a,function(X,te){var re;if(isNaN(X)){i.setItemLayout(te,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:l,cy:c,r0:d,r:C?NaN:u});return}C!=="area"?re=_===0&&k?T:X*T:re=B/w,re<y?(re=y,$-=y):Y+=X;var z=G+P*re,ae=0,le=0;m>re?(ae=G+P*re/2,le=ae):(ae=G+j,le=z-j),i.setItemLayout(te,{angle:re,startAngle:ae,endAngle:le,clockwise:A,cx:l,cy:c,r0:d,r:C?yr(X,M,[d,u]):u}),G=z}),$<yue&&w)if($<=.001){var W=B/w;i.each(a,function(X,te){if(!isNaN(X)){var re=i.getItemLayout(te);re.angle=W;var z=0,ae=0;W<m?(z=h+P*(te+1/2)*W,ae=z):(z=h+P*te*W+j,ae=h+P*(te+1)*W-j),re.startAngle=z,re.endAngle=ae}})}else T=$/Y,G=h,i.each(a,function(X,te){if(!isNaN(X)){var re=i.getItemLayout(te),z=re.angle===y?y:X*T,ae=0,le=0;z<m?(ae=G+P*z/2,le=ae):(ae=G+j,le=G+P*z-j),re.startAngle=ae,re.endAngle=le,G+=P*z}})})}var AAe=Gn();function FM(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Fgt=Math.PI/180;function bue(n,e,t,r,i,a,o,s,l,c){if(n.length<2)return;function u(v){for(var y=v.rB,w=y*y,_=0;_<v.list.length;_++){var T=v.list[_],A=Math.abs(T.label.y-t),C=r+T.len,k=C*C,M=Math.sqrt(Math.abs((1-A*A/w)*k)),P=e+(M+T.len2)*i,O=P-T.label.x,j=T.targetTextWidth-O*i;kAe(T,j,!0),T.label.x=P}}function d(v){for(var y={list:[],maxY:0},w={list:[],maxY:0},_=0;_<v.length;_++)if(v[_].labelAlignTo==="none"){var T=v[_],A=T.label.y>t?w:y,C=Math.abs(T.label.y-t);if(C>=A.maxY){var k=T.label.x-e-T.len2*i,M=r+T.len,P=Math.abs(k)<M?Math.sqrt(C*C/(1-k*k/M/M)):M;A.rB=P,A.maxY=C}A.list.push(T)}u(y),u(w)}for(var h=n.length,f=0;f<h;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var m=n[f].label.x-c;n[f].linePoints[1][0]+=m,n[f].label.x=c}XEe(n,l,l+o)&&d(n)}function $gt(n,e,t,r,i,a,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<n.length;h++){var f=n[h].label;K6(n[h])||(f.x<e?(u=Math.min(u,f.x),l.push(n[h])):(d=Math.max(d,f.x),c.push(n[h])))}for(var h=0;h<n.length;h++){var m=n[h];if(!K6(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var f=m.label,v=m.linePoints,y=void 0;m.labelAlignTo==="edge"?f.x<e?y=v[2][0]-m.labelDistance-o-m.edgeDistance:y=o+i-m.edgeDistance-v[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?f.x<e?y=u-o-m.bleedMargin:y=o+i-d-m.bleedMargin:f.x<e?y=f.x-o-m.bleedMargin:y=o+i-f.x-m.bleedMargin,m.targetTextWidth=y,kAe(m,y)}}bue(c,e,t,r,1,i,a,o,s,d),bue(l,e,t,r,-1,i,a,o,s,u);for(var h=0;h<n.length;h++){var m=n[h];if(!K6(m)&&m.linePoints){var f=m.label,v=m.linePoints,w=m.labelAlignTo==="edge",_=f.style.padding,T=_?_[1]+_[3]:0,A=f.style.backgroundColor?0:T,C=m.rect.width+A,k=v[1][0]-v[2][0];w?f.x<e?v[2][0]=o+m.edgeDistance+C+m.labelDistance:v[2][0]=o+i-m.edgeDistance-C-m.labelDistance:(f.x<e?v[2][0]=f.x+m.labelDistance:v[2][0]=f.x-m.labelDistance,v[1][0]=v[2][0]+k),v[1][1]=v[2][1]=f.y}}}function kAe(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,c=i.overflow,u=a.width+(o?0:l);if(e<u||t){var d=a.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var f=e-l,m=e<u?f:t?f>n.unconstrainedWidth?null:f:null;r.setStyle("width",m)}var v=r.getBoundingRect();a.width=v.width;var y=(r.style.margin||0)+2.1;a.height=v.height+y,a.y-=(a.height-d)/2}}}function K6(n){return n.position==="center"}function Bgt(n){var e=n.getData(),t=[],r,i,a=!1,o=(n.get("minShowLabelAngle")||0)*Fgt,s=e.getLayout("viewRect"),l=e.getLayout("r"),c=s.width,u=s.x,d=s.y,h=s.height;function f(k){k.ignore=!0}function m(k){if(!k.ignore)return!0;for(var M in k.states)if(k.states[M].ignore===!1)return!0;return!1}e.each(function(k){var M=e.getItemGraphicEl(k),P=M.shape,O=M.getTextContent(),j=M.getTextGuideLine(),L=e.getItemModel(k),B=L.getModel("label"),$=B.get("position")||L.get(["emphasis","label","position"]),Y=B.get("distanceToLabelLine"),G=B.get("alignTo"),W=Ze(B.get("edgeDistance"),c),X=B.get("bleedMargin"),te=L.getModel("labelLine"),re=te.get("length");re=Ze(re,c);var z=te.get("length2");if(z=Ze(z,c),Math.abs(P.endAngle-P.startAngle)<o){Z(O.states,f),O.ignore=!0,j&&(Z(j.states,f),j.ignore=!0);return}if(m(O)){var ae=(P.startAngle+P.endAngle)/2,le=Math.cos(ae),ee=Math.sin(ae),ye,fe,Ce,at;r=P.cx,i=P.cy;var Le=$==="inside"||$==="inner";if($==="center")ye=P.cx,fe=P.cy,at="center";else{var we=(Le?(P.r+P.r0)/2*le:P.r*le)+r,be=(Le?(P.r+P.r0)/2*ee:P.r*ee)+i;if(ye=we+le*3,fe=be+ee*3,!Le){var ge=we+le*(re+l-P.r),he=be+ee*(re+l-P.r),Ge=ge+(le<0?-1:1)*z,je=he;G==="edge"?ye=le<0?u+W:u+c-W:ye=Ge+(le<0?-Y:Y),fe=je,Ce=[[we,be],[ge,he],[Ge,je]]}at=Le?"center":G==="edge"?le>0?"right":"left":le>0?"left":"right"}var rt=Math.PI,bt=0,lt=B.get("rotate");if(Jn(lt))bt=lt*(rt/180);else if($==="center")bt=0;else if(lt==="radial"||lt===!0){var cn=le<0?-ae+rt:-ae;bt=cn}else if(lt==="tangential"&&$!=="outside"&&$!=="outer"){var Ct=Math.atan2(le,ee);Ct<0&&(Ct=rt*2+Ct);var En=ee>0;En&&(Ct=rt+Ct),bt=Ct-rt}if(a=!!bt,O.x=ye,O.y=fe,O.rotation=bt,O.setStyle({verticalAlign:"middle"}),Le){O.setStyle({align:at});var Jt=O.states.select;Jt&&(Jt.x+=O.x,Jt.y+=O.y)}else{var jn=O.getBoundingRect().clone();jn.applyTransform(O.getComputedTransform());var Re=(O.style.margin||0)+2.1;jn.y-=Re/2,jn.height+=Re,t.push({label:O,labelLine:j,position:$,len:re,len2:z,minTurnAngle:te.get("minTurnAngle"),maxSurfaceAngle:te.get("maxSurfaceAngle"),surfaceNormal:new tn(le,ee),linePoints:Ce,textAlign:at,labelDistance:Y,labelAlignTo:G,edgeDistance:W,bleedMargin:X,rect:jn,unconstrainedWidth:jn.width,labelStyleWidth:O.style.width})}M.setTextConfig({inside:Le})}}),!a&&n.get("avoidLabelOverlap")&&$gt(t,r,i,l,c,h,u,d);for(var v=0;v<t.length;v++){var y=t[v],w=y.label,_=y.labelLine,T=isNaN(w.x)||isNaN(w.y);if(w){w.setStyle({align:y.textAlign}),T&&(Z(w.states,f),w.ignore=!0);var A=w.states.select;A&&(A.x+=w.x,A.y+=w.y)}if(_){var C=y.linePoints;T||!C?(Z(_.states,f),_.ignore=!0):(WEe(C,y.minTurnAngle),cpt(C,y.surfaceNormal,y.maxSurfaceAngle),_.setShape({points:C}),w.__hostTarget.textGuideLineConfig={anchor:new tn(C[0][0],C[0][1])})}}}var Ugt=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var o=new Yn;return a.setTextContent(o),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var o=this,s=t.hostModel,l=t.getItemModel(r),c=l.getModel("emphasis"),u=t.getItemLayout(r),d=Ie(fw(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){o.setShape(d);return}if(a){o.setShape(d);var h=s.getShallow("animationType");s.ecModel.ssr?(Si(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=d.cx,o.originY=d.cy):h==="scale"?(o.shape.r=u.r0,Si(o,{shape:{r:u.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),Si(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,tr(o,{shape:{endAngle:u.endAngle}},s,r))}else lh(o),tr(o,{shape:d},s,r);o.useStyle(t.getItemVisual(r,"style")),as(o,l);var f=(u.startAngle+u.endAngle)/2,m=s.get("selectedOffset"),v=Math.cos(f)*m,y=Math.sin(f)*m,w=l.getShallow("cursor");w&&o.attr("cursor",w),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=Ie({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},fw(c.getModel("itemStyle"),u)),Ie(o.ensureState("select"),{x:v,y,shape:fw(l.getModel(["select","itemStyle"]),u)}),Ie(o.ensureState("blur"),{shape:fw(l.getModel(["blur","itemStyle"]),u)});var _=o.getTextGuideLine(),T=o.getTextContent();_&&Ie(_.ensureState("select"),{x:v,y}),Ie(T.ensureState("select"),{x:v,y}),Vi(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,u=l&&l.opacity;os(a,po(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var d=a.getTextContent();a.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=t.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new xl,this.setTextGuideLine(f)),CK(this,DK(o),{stroke:c,opacity:Df(s.get(["lineStyle","opacity"]),u,1)})}},e}(bl),Vgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var o=t.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<o.count();++d)u=o.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var h=AAe(t),f=new bl({shape:Ie(EAe(t,i),h)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(m){var v=new Ugt(o,m,c);o.setItemGraphicEl(m,v),l.add(v)}).update(function(m,v){var y=s.getItemGraphicEl(v);y.updateData(o,m,c),y.off("click"),l.add(y),o.setItemGraphicEl(m,y)}).remove(function(m){var v=s.getItemGraphicEl(m);dI(v,t,m)}).execute(),Bgt(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Vr);function tE(n,e,t){e=Fe(e)&&{coordDimensions:e}||Ie({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=PM(r,e).dimensions,a=new gl(i,n);return a.initData(r,t),a}var $M=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}(),zgt=Gn(),Hgt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new $M(ct(this.getData,this),ct(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return tE(this,{coordDimensions:["value"],encodeDefaulter:Yt(sK,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=zgt(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=Nst(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){Gw(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(ai);function Ggt(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(Jn(o)&&!isNaN(o)&&o<0)})}}}function qgt(n){n.registerChartView(Vgt),n.registerSeriesModel(Hgt),qTe("pie",n.registerAction),n.registerLayout(Yt(jgt,"pie")),n.registerProcessor(FM("pie")),n.registerProcessor(Ggt("pie"))}var Wgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return rm(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ai),CAe=4,Ygt=function(){function n(){}return n}(),Kgt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Ygt},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,c=l&&a[0]<CAe,u=this.softClipShape,d;if(c){this._ctx=l;return}for(this._ctx=null,d=this._off;d<i.length;){var h=i[d++],f=i[d++];isNaN(h)||isNaN(f)||u&&!u.contain(h,f)||(s.x=h-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,i=t.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||a.fillRect(l-i[0]/2,c-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=a.length/2-1;c>=0;c--){var u=c*2,d=a[u]-s/2,h=a[u+1]-l/2;if(t>=d&&r>=h&&t<=d+s&&r<=h+l)return c}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,c=1/0,u=-1/0,d=-1/0,h=0;h<i.length;){var f=i[h++],m=i[h++];l=Math.min(f,l),u=Math.max(f,u),c=Math.min(m,c),d=Math.max(m,d)}t=this._rect=new an(l-o/2,c-s/2,u-l+o,d-c+s)}return t},e}(wn),Xgt=function(){function n(){this.group=new Lt}return n.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,i)}r.setShape("points",t),r.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,r){var i=this._newAdded[0],a=t.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:a}),this._setCommon(c,t,r)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new Kgt({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Pa(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<CAe;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var c=$t(e);c.seriesIndex=i.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(c.dataIndex=d+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Zgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,i){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=jM("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Xgt:new NM,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Vr),Qgt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Dn),z8=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Ma).models[0]},e.type="cartesian2dAxis",e}(Dn);Oa(z8,OM);var DAe={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Jgt=en({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},DAe),LK=en({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},DAe),emt=en({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},LK),tmt=kt({logBase:10},LK);const IAe={category:Jgt,value:LK,time:emt,log:tmt};var nmt={value:1,category:1,time:1,log:1};function gT(n,e,t,r){Z(nmt,function(i,a){var o=en(en({},IAe[a],!0),r,!0),s=function(l){_e(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+a,u}return c.prototype.mergeDefaultAndTheme=function(u,d){var h=fI(this),f=h?KT(u):{},m=d.getTheme();en(u,m.get(a+"Axis")),en(u,this.getDefaultOption()),u.type=wue(u),h&&Sy(u,f,h)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=L8.createByAxisModel(this))},c.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+a,c.defaultOption=o,c}(t);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(e+"Axis",wue)}function wue(n){return n.type||(n.data?"category":"value")}var rmt=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return $e(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),gr(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}(),H8=["x","y"];function xue(n){return n.type==="interval"||n.type==="time"}var imt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=H8,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!xue(t)||!xue(r))){var i=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],c=a[1]-a[0];if(!(!l||!c)){var u=(s[0]-o[0])/l,d=(s[1]-o[1])/c,h=o[0]-i[0]*u,f=o[1]-a[0]*d,m=this._transform=[u,0,0,d,h,f];this._invTransform=VT([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new an(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return ns(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(t[0]),c=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return ns(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(r[0],r[1])-a+t,l=Math.max(i[0],i[1])-o+t;return new an(a,o,s,l)},e}(rmt),amt=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(dh);function G8(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,c=i.dim,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,m=c==="x"?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));m[h.onZero]=Math.max(Math.min(v,m[1]),m[0])}a.position=[c==="y"?m[h[l]]:d[0],c==="x"?m[h[l]]:d[3]],a.rotation=Math.PI/2*(c==="x"?0:1);var y={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=y[s],a.labelOffset=o?m[h[s]]-m[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Ro(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var w=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-w:w,a.z2=1,a}function _ue(n){return n.get("coordinateSystem")==="cartesian2d"}function Sue(n){var e={xAxisModel:null,yAxisModel:null};return Z(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,Ma).models[0];e[r]=a}),e}var X6=Math.log;function MAe(n,e,t){var r=zg.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),l=REe(n,e),c=l.extent,u=l.fixMin,d=l.fixMax;if(n.type==="log"){var h=X6(n.base);c=[X6(c[0])/h,X6(c[1])/h]}n.setExtent(c[0],c[1]),n.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:d});var f=r.getExtent.call(n);u&&(c[0]=f[0]),d&&(c[1]=f[1]);var m=r.getInterval.call(n),v=c[0],y=c[1];if(u&&d)m=(y-v)/o;else if(u)for(y=c[0]+m*o;y<c[1]&&isFinite(y)&&isFinite(c[1]);)m=N6(m),y=c[0]+m*o;else if(d)for(v=c[1]-m*o;v>c[0]&&isFinite(v)&&isFinite(c[0]);)m=N6(m),v=c[1]-m*o;else{var w=n.getTicks().length-1;w>o&&(m=N6(m));var _=m*o;y=Math.ceil(c[1]/m)*m,v=na(y-_),v<0&&c[0]>=0?(v=0,y=na(_)):y>0&&c[1]<=0&&(y=0,v=-na(_))}var T=(i[0].value-a[0].value)/s,A=(i[o].value-a[o].value)/s;r.setExtent.call(n,v+m*T,y+m*A),r.setInterval.call(n,m),(T||A)&&r.setNiceExtent.call(n,v+m,y-m)}var omt=function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=H8,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=In(o),c=l.length;if(c){for(var u=[],d=c-1;d>=0;d--){var h=+l[d],f=o[h],m=f.model,v=f.scale;j8(v)&&m.get("alignTicks")&&m.get("interval")==null?u.push(f):(fT(v,m),j8(v)&&(s=f))}u.length&&(s||(s=u.pop(),fT(s.scale,s.model)),Z(u,function(y){MAe(y.scale,y.model,s.scale)}))}}i(r.x),i(r.y);var a={};Z(r.x,function(o){Tue(r,"y",o,a)}),Z(r.y,function(o){Tue(r,"x",o,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=Za(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(Z(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=Bft(c);if(u){var d=c.isHorizontal()?"height":"width",h=c.model.get(["axisLabel","margin"]);o[d]-=u[d]+h,c.position==="top"?o.y+=u.height+h:c.position==="left"&&(o.x+=u.width+h)}}}),l()),Z(this._coordsList,function(c){c.calcAffineTransform()});function l(){Z(s,function(c){var u=c.isHorizontal(),d=u?[0,o.width]:[0,o.height],h=c.inverse?1:0;c.setExtent(d[h],d[1-h]),smt(c,u?o.x:o.y)})}},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}It(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Ma).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Ma).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,dn(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var c=a.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,Z(s.x,function(u,d){Z(s.y,function(h,f){var m="x"+d+"y"+f,v=new imt(m);v.master=i,v.model=e,i._coordsMap[m]=v,i._coordsList.push(v),v.addAxis(u),v.addAxis(h)})});function c(u){return function(d,h){if(Z6(d,e)){var f=d.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var m=new amt(u,eF(d),[0,0],d.get("type"),f),v=m.type==="category";m.onBand=v&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.grid=a,m.index=h,a._axesList.push(m),s[u][h]=m,l[u]++}}}},n.prototype._updateScale=function(e,t){Z(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(_ue(i)){var a=Sue(i),o=a.xAxisModel,s=a.yAxisModel;if(!Z6(o,t)||!Z6(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=i.getData(),u=l.getAxis("x"),d=l.getAxis("y");r(c,u),r(c,d)}},this);function r(i,a){Z(uL(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return Z(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);dn(t,a)<0&&t.push(a),dn(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var o=new n(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(_ue(i)){var a=Sue(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;i.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},n.dimensions=H8,n}();function Z6(n,e){return n.getCoordSysModel()===e}function Tue(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)Eue(i[l])&&(a=i[l]);else for(var c in i)if(i.hasOwnProperty(c)&&Eue(i[c])&&!r[u(i[c])]){a=i[c];break}a&&(r[u(a)]=!0);function u(d){return d.dim+"_"+d.index}}function Eue(n){return n&&n.type!=="category"&&n.type!=="time"&&$ft(n)}function smt(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var Zv=Math.PI,ml=function(){function n(e,t){this.group=new Lt,this.opt=t,this.axisModel=e,kt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Lt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!Aue[e]},n.prototype.add=function(e){Aue[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=WSe(t-e),a,o;return sI(i)?(o=r>0?"top":"bottom",a="center"):sI(i-Zv)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Zv?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),Aue={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],c=s[0]>l[0];o&&(ns(s,s,o),ns(l,l,o));var u=Ie({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new co({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});uT(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var h=e.get(["axisLine","symbol"]);if(h!=null){var f=e.get(["axisLine","symbolSize"]);it(h)&&(h=[h,h]),(it(f)||Jn(f))&&(f=[f,f]);var m=ux(e.get(["axisLine","symbolOffset"])||0,f),v=f[0],y=f[1];Z([{rotate:n.rotation+Math.PI/2,offset:m[0],r:0},{rotate:n.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(w,_){if(h[_]!=="none"&&h[_]!=null){var T=Pa(h[_],-v/2,-y/2,v,y,u.stroke,!0),A=w.r+w.offset,C=c?l:s;T.attr({rotation:w.rotate,x:C[0]+A*Math.cos(n.rotation),y:C[1]-A*Math.sin(n.rotation),silent:!0,z2:11}),t.add(T)}})}}},axisTickLabel:function(n,e,t,r){var i=umt(t,r,e,n),a=hmt(t,r,e,n);if(cmt(e,a,i),dmt(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=YEe($e(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));ZEe(o)}},axisName:function(n,e,t,r){var i=Ro(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=n.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[a==="start"?c[0]-u*l:a==="end"?c[1]+u*l:(c[0]+c[1])/2,Cue(a)?n.labelOffset+o*l:0],h,f=e.get("nameRotate");f!=null&&(f=f*Zv/180);var m;Cue(a)?h=ml.innerTextLayout(n.rotation,f??n.rotation,o):(h=lmt(n.rotation,a,f||0,c),m=n.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(h.rotation)),!isFinite(m)&&(m=null)));var v=s.getFont(),y=e.get("nameTruncate",!0)||{},w=y.ellipsis,_=Ro(n.nameTruncateMaxWidth,y.maxWidth,m),T=new Yn({x:d[0],y:d[1],rotation:h.rotation,silent:ml.isLabelSilent(e),style:ri(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:w,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(lx({el:T,componentModel:e,itemName:i}),T.__fullText=i,T.anid="name",e.get("triggerEvent")){var A=ml.makeAxisEventDataBase(e);A.targetType="axisName",A.name=i,$t(T).eventData=A}r.add(T),T.updateTransform(),t.add(T),T.decomposeTransform()}}};function lmt(n,e,t,r){var i=WSe(t-n),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return sI(i-Zv/2)?(o=l?"bottom":"top",a="center"):sI(i-Zv*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<Zv*1.5&&i>Zv/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function cmt(n,e,t){if(!NEe(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],h=t[t.length-2];r===!1?(xu(a),xu(c)):kue(a,o)&&(r?(xu(o),xu(u)):(xu(a),xu(c))),i===!1?(xu(s),xu(d)):kue(l,s)&&(i?(xu(l),xu(h)):(xu(s),xu(d)))}}function xu(n){n&&(n.ignore=!0)}function kue(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=E5([]);return sx(i,i,-n.rotation),t.applyTransform(Eg([],i,n.getLocalTransform())),r.applyTransform(Eg([],i,e.getLocalTransform())),t.intersect(r)}}function Cue(n){return n==="middle"||n==="center"}function PAe(n,e,t,r,i){for(var a=[],o=[],s=[],l=0;l<n.length;l++){var c=n[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=t,e&&(ns(o,o,e),ns(s,s,e));var u=new co({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});uT(u.shape,u.style.lineWidth),u.anid=i+"_"+n[l].tickValue,a.push(u)}return a}function umt(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),c=i.getTicksCoords(),u=PAe(c,e.transform,l,kt(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function dmt(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),c=kt(s.getLineStyle(),kt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var d=PAe(o[u],e.transform,l,c,"minorticks_"+u),h=0;h<d.length;h++)n.add(d[h])}}function hmt(n,e,t,r){var i=t.axis,a=Ro(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),c=(Ro(r.labelRotate,o.get("rotate"))||0)*Zv/180,u=ml.innerTextLayout(r.rotation,c,r.labelDirection),d=t.getCategories&&t.getCategories(!0),h=[],f=ml.isLabelSilent(t),m=t.get("triggerEvent");return Z(l,function(v,y){var w=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,T=v.rawLabel,A=o;if(d&&d[w]){var C=d[w];It(C)&&C.textStyle&&(A=new br(C.textStyle,o,t.ecModel))}var k=A.getTextColor()||t.get(["axisLine","lineStyle","color"]),M=i.dataToCoord(w),P=A.getShallow("align",!0)||u.textAlign,O=Gt(A.getShallow("alignMinLabel",!0),P),j=Gt(A.getShallow("alignMaxLabel",!0),P),L=A.getShallow("verticalAlign",!0)||A.getShallow("baseline",!0)||u.textVerticalAlign,B=Gt(A.getShallow("verticalAlignMinLabel",!0),L),$=Gt(A.getShallow("verticalAlignMaxLabel",!0),L),Y=new Yn({x:M,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(v.level||0),style:ri(A,{text:_,align:y===0?O:y===l.length-1?j:P,verticalAlign:y===0?B:y===l.length-1?$:L,fill:Et(k)?k(i.type==="category"?T:i.type==="value"?w+"":w,y):k})});if(Y.anid="label_"+w,lx({el:Y,componentModel:t,itemName:_,formatterParamsExtra:{isTruncated:function(){return Y.isTruncated},value:T,tickIndex:y}}),m){var G=ml.makeAxisEventDataBase(t);G.targetType="axisLabel",G.value=T,G.tickIndex=y,i.type==="category"&&(G.dataIndex=w),$t(Y).eventData=G}e.add(Y),Y.updateTransform(),h.push(Y),n.add(Y),Y.decomposeTransform()}),h}}function fmt(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return pmt(t,n,e),t.seriesInvolved&&mmt(t,n),t}function pmt(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];Z(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=_I(s.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=s;var u=s.model,d=u.getModel("tooltip",r);if(Z(s.getAxes(),Yt(v,!1,null)),s.getTooltipAxes&&r&&d.get("show")){var h=d.get("trigger")==="axis",f=d.get(["axisPointer","type"])==="cross",m=s.getTooltipAxes(d.get(["axisPointer","axis"]));(h||f)&&Z(m.baseAxes,Yt(v,f?"cross":!0,h)),f&&Z(m.otherAxes,Yt(v,"cross",!1))}function v(y,w,_){var T=_.model.getModel("axisPointer",i),A=T.get("show");if(!(!A||A==="auto"&&!y&&!q8(T))){w==null&&(w=T.get("triggerTooltip")),T=y?gmt(_,d,i,e,y,w):T;var C=T.get("snap"),k=T.get("triggerEmphasis"),M=_I(_.model),P=w||C||_.type==="category",O=n.axesInfo[M]={key:M,axis:_,coordSys:s,axisPointerModel:T,triggerTooltip:w,triggerEmphasis:k,involveSeries:P,snap:C,useHandle:q8(T),seriesModels:[],linkGroup:null};c[M]=O,n.seriesInvolved=n.seriesInvolved||P;var j=vmt(a,_);if(j!=null){var L=o[j]||(o[j]={axesInfo:{}});L.axesInfo[M]=O,L.mapper=a[j].mapper,O.linkGroup=L}}}})}function gmt(n,e,t,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Z(s,function(h){l[h]=Rt(o.get(h))}),l.snap=n.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var u=o.get(["label","show"]);if(c.show=u??!0,!a){var d=l.lineStyle=o.get("crossStyle");d&&kt(c,d.textStyle)}}return n.model.getModel("axisPointer",new br(l,t,r))}function mmt(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||Z(n.coordSysAxesInfo[_I(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function vmt(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(Q6(a[r+"AxisId"],t.id)||Q6(a[r+"AxisIndex"],t.componentIndex)||Q6(a[r+"AxisName"],t.name))return i}}function Q6(n,e){return n==="all"||Fe(n)&&dn(n,e)>=0||n===e}function ymt(n){var e=jK(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=q8(t);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function jK(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[_I(n)]}function bmt(n){var e=jK(n);return e&&e.axisPointerModel}function q8(n){return!!n.get(["handle","show"])}function _I(n){return n.type+"||"+n.id}var Due={},fx=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&ymt(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=bmt(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){Due[t]=r},e.getAxisPointerClass=function(t){return t&&Due[t]},e.type="axis",e}(Ni),W8=Gn();function OAe(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var u=s.length,d=W8(n).splitAreaColors,h=pt(),f=0;if(d)for(var m=0;m<c.length;m++){var v=d.get(c[m].tickValue);if(v!=null){f=(v+(u-1)*m)%u;break}}var y=i.toGlobalCoord(c[0].coord),w=o.getAreaStyle();s=Fe(s)?s:[s];for(var m=1;m<c.length;m++){var _=i.toGlobalCoord(c[m].coord),T=void 0,A=void 0,C=void 0,k=void 0;i.isHorizontal()?(T=y,A=l.y,C=_-T,k=l.height,y=T+C):(T=l.x,A=y,C=l.width,k=_-A,y=A+k);var M=c[m-1].tickValue;M!=null&&h.set(M,f),e.add(new Hn({anid:M!=null?"area_"+M:null,shape:{x:T,y:A,width:C,height:k},style:kt({fill:s[f]},w),autoBatch:!0,silent:!0})),f=(f+1)%u}W8(n).splitAreaColors=h}}}function RAe(n){W8(n).splitAreaColors=null}var wmt=["axisLine","axisTickLabel","axisName"],xmt=["splitArea","splitLine","minorSplitLine"],NAe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Lt,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=G8(s,t),c=new ml(t,Ie({handleAutoShown:function(d){for(var h=s.coordinateSystem.getCartesians(),f=0;f<h.length;f++)if(j8(h[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));Z(wmt,c.add,c),this._axisGroup.add(c.getGroup()),Z(xmt,function(d){t.get([d,"show"])&&_mt[d](this,this._axisGroup,t,s)},this);var u=a&&a.type==="changeAxisOrder"&&a.isInitSort;u||CM(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){RAe(this)},e.type="cartesianAxis",e}(fx),_mt={splitLine:function(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=a.get("showMinLine")!==!1,c=a.get("showMaxLine")!==!1;s=Fe(s)?s:[s];for(var u=r.coordinateSystem.getRect(),d=i.isHorizontal(),h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=o.getLineStyle(),w=0;w<f.length;w++){var _=i.toGlobalCoord(f[w].coord);if(!(w===0&&!l||w===f.length-1&&!c)){var T=f[w].tickValue;d?(m[0]=_,m[1]=u.y,v[0]=_,v[1]=u.y+u.height):(m[0]=u.x,m[1]=_,v[0]=u.x+u.width,v[1]=_);var A=h++%s.length,C=new co({anid:T!=null?"line_"+T:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},style:kt({stroke:s[A]},y),silent:!0});uT(C.shape,y.lineWidth),e.add(C)}}}},minorSplitLine:function(n,e,t,r){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var u=[],d=[],h=o.getLineStyle(),f=0;f<c.length;f++)for(var m=0;m<c[f].length;m++){var v=i.toGlobalCoord(c[f][m].coord);l?(u[0]=v,u[1]=s.y,d[0]=v,d[1]=s.y+s.height):(u[0]=s.x,u[1]=v,d[0]=s.x+s.width,d[1]=v);var y=new co({anid:"minor_line_"+c[f][m].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:h,silent:!0});uT(y.shape,h.lineWidth),e.add(y)}},splitArea:function(n,e,t,r){OAe(n,e,t,r)}},LAe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(NAe),Smt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=LAe.type,t}return e.type="yAxis",e}(NAe),Tmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Hn({shape:t.coordinateSystem.getRect(),style:kt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Ni),Iue={offset:0};function jAe(n){n.registerComponentView(Tmt),n.registerComponentModel(Qgt),n.registerCoordinateSystem("cartesian2d",omt),gT(n,"x",z8,Iue),gT(n,"y",z8,Iue),n.registerComponentView(LAe),n.registerComponentView(Smt),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function Emt(n){yn(jAe),n.registerSeriesModel(Wgt),n.registerChartView(Zgt),n.registerLayout(jM("scatter"))}function Amt(n){n.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();Z(a,function(o,s){t.each(t.mapDimension(a[s].dim),function(l,c){r[c]=r[c]||[];var u=i.dataToPoint(l,s);r[c][s]=Mue(u)?u:Pue(i)})}),t.each(function(o){var s=hot(r[o],function(l){return Mue(l)})||Pue(i);r[o].push(s.slice()),t.setItemLayout(o,r[o])})}})}function Mue(n){return!isNaN(n[0])&&!isNaN(n[1])}function Pue(n){return[n.cx,n.cy]}function kmt(n){var e=n.polar;if(e){Fe(e)||(e=[e]);var t=[];Z(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],Fe(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):t.push(r)}),n.polar=t}Z(n.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Cmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function c(h,f){var m=h.getItemVisual(f,"symbol")||"circle";if(m!=="none"){var v=JT(h.getItemVisual(f,"symbolSize")),y=Pa(m,-1,-1,2,2),w=h.getItemVisual(f,"symbolRotate")||0;return y.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:w*Math.PI/180||0}),y}}function u(h,f,m,v,y,w){m.removeAll();for(var _=0;_<f.length-1;_++){var T=c(v,y);T&&(T.__dimIdx=_,h[_]?(T.setPosition(h[_]),cx[w?"initProps":"updateProps"](T,{x:f[_][0],y:f[_][1]},t,y)):T.setPosition(f[_]),m.add(T))}}function d(h){return $e(h,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(h){var f=s.getItemLayout(h);if(f){var m=new wl,v=new xl,y={shape:{points:f}};m.shape.points=d(f),v.shape.points=d(f),Si(m,y,t,h),Si(v,y,t,h);var w=new Lt,_=new Lt;w.add(v),w.add(m),w.add(_),u(v.shape.points,f,_,s,h,!0),s.setItemGraphicEl(h,w)}}).update(function(h,f){var m=l.getItemGraphicEl(f),v=m.childAt(0),y=m.childAt(1),w=m.childAt(2),_={shape:{points:s.getItemLayout(h)}};_.shape.points&&(u(v.shape.points,_.shape.points,w,s,h,!1),lh(y),lh(v),tr(v,_,t),tr(y,_,t),s.setItemGraphicEl(h,m))}).remove(function(h){o.remove(l.getItemGraphicEl(h))}).execute(),s.eachItemGraphicEl(function(h,f){var m=s.getItemModel(f),v=h.childAt(0),y=h.childAt(1),w=h.childAt(2),_=s.getItemVisual(f,"style"),T=_.fill;o.add(h),v.useStyle(kt(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),as(v,m,"lineStyle"),as(y,m,"areaStyle");var A=m.getModel("areaStyle"),C=A.isEmpty()&&A.parentModel.isEmpty();y.ignore=C,Z(["emphasis","select","blur"],function(P){var O=m.getModel([P,"areaStyle"]),j=O.isEmpty()&&O.parentModel.isEmpty();y.ensureState(P).ignore=j&&C}),y.useStyle(kt(A.getAreaStyle(),{fill:T,opacity:.7,decal:_.decal}));var k=m.getModel("emphasis"),M=k.getModel("itemStyle").getItemStyle();w.eachChild(function(P){if(P instanceof Fo){var O=P.style;P.useStyle(Ie({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},_))}else P.useStyle(_),P.setColor(T),P.style.strokeNoScale=!0;var j=P.ensureState("emphasis");j.style=Rt(M);var L=s.getStore().get(s.getDimensionIndex(P.__dimIdx),f);(L==null||isNaN(L))&&(L=""),os(P,po(m),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:P.__dimIdx,defaultText:L,inheritColor:T,defaultOpacity:_.opacity})}),Vi(h,k.get("focus"),k.get("blurScope"),k.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Vr),Dmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new $M(ct(this.getData,this),ct(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return tE(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),c=l===""?this.name:l,u=RTe(this,t);return go("section",{header:c,sortBlocks:!0,blocks:$e(s,function(d){var h=a.get(a.mapDimension(d.dim),t);return go("nameValue",{markerType:"subItem",markerColor:u,name:d.name,value:h,sortParam:h})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues($e(i.dimensions,function(c){return r.mapDimension(c)}),t),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(ai),bk=IAe.value;function nR(n,e){return kt({show:e},n)}var Imt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),h=this.get("triggerEvent"),f=$e(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var v=l;m.color!=null&&(v=kt({color:m.color},l));var y=en(Rt(m),{boundaryGap:t,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:m.text,showName:c,nameLocation:"end",nameGap:d,nameTextStyle:v,triggerEvent:h},!1);if(it(u)){var w=y.name;y.name=u.replace("{value}",w??"")}else Et(u)&&(y.name=u(y.name,y));var _=new br(y,null,this.ecModel);return Oa(_,OM.prototype),_.mainType="radar",_.componentIndex=this.componentIndex,_},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:en({lineStyle:{color:"#bbb"}},bk.axisLine),axisLabel:nR(bk.axisLabel,!1),axisTick:nR(bk.axisTick,!1),splitLine:nR(bk.splitLine,!0),splitArea:nR(bk.splitArea,!0),indicator:[]},e}(Dn),Mmt=["axisLine","axisTickLabel","axisName"],Pmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes(),a=$e(i,function(o){var s=o.model.get("showName")?o.name:"",l=new ml(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});Z(a,function(o){Z(Mmt,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),u=o.get("show"),d=s.get("show"),h=l.get("color"),f=c.get("color"),m=Fe(h)?h:[h],v=Fe(f)?f:[f],y=[],w=[];function _(G,W,X){var te=X%W.length;return G[te]=G[te]||[],te}if(a==="circle")for(var T=i[0].getTicksCoords(),A=r.cx,C=r.cy,k=0;k<T.length;k++){if(u){var M=_(y,m,k);y[M].push(new nm({shape:{cx:A,cy:C,r:T[k].coord}}))}if(d&&k<T.length-1){var M=_(w,v,k);w[M].push(new EM({shape:{cx:A,cy:C,r0:T[k].coord,r:T[k+1].coord}}))}}else for(var P,O=$e(i,function(G,W){var X=G.getTicksCoords();return P=P==null?X.length-1:Math.min(X.length-1,P),$e(X,function(te){return r.coordToPoint(te.coord,W)})}),j=[],k=0;k<=P;k++){for(var L=[],B=0;B<i.length;B++)L.push(O[B][k]);if(L[0]&&L.push(L[0].slice()),u){var M=_(y,m,k);y[M].push(new xl({shape:{points:L}}))}if(d&&j){var M=_(w,v,k-1);w[M].push(new wl({shape:{points:L.concat(j)}}))}j=L.slice().reverse()}var $=l.getLineStyle(),Y=c.getAreaStyle();Z(w,function(G,W){this.group.add(Lu(G,{style:kt({stroke:"none",fill:v[W%v.length]},Y),silent:!0}))},this),Z(y,function(G,W){this.group.add(Lu(G,{style:kt({fill:"none",stroke:m[W%m.length]},$),silent:!0}))},this)},e.type="radar",e}(Ni),Omt=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(dh),Rmt=function(){function n(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=$e(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new Omt(o,new zg);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},n.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],i=r.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},n.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var a=Math.atan2(-r,t),o=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],d=Math.abs(a-u.angle);d<o&&(s=u,l=c,o=d)}return[l,+(s&&s.coordToData(i))]},n.prototype.resize=function(e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight(),o=Math.min(i,a)/2;this.cx=Ze(r[0],i),this.cy=Ze(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(it(s)||Jn(s))&&(s=[0,s]),this.r0=Ze(s[0],o),this.r=Ze(s[1],o),Z(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},n.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;Z(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var c=s.getData();Z(r,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var a=i.get("splitNumber"),o=new zg;o.setExtent(0,a),o.setInterval(1),Z(r,function(s,l){MAe(s.scale,s.model,o)})},n.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.create=function(e,t){var r=[];return e.eachComponent("radar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},n.dimensions=[],n}();function Nmt(n){n.registerCoordinateSystem("radar",Rmt),n.registerComponentModel(Imt),n.registerComponentView(Pmt),n.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function Lmt(n){yn(Nmt),n.registerChartView(Cmt),n.registerSeriesModel(Dmt),n.registerLayout(Amt),n.registerProcessor(FM("radar")),n.registerPreprocessor(kmt)}var Oue="\0_ec_interaction_mutex";function jmt(n,e,t){var r=FK(n);r[e]=t}function Fmt(n,e,t){var r=FK(n),i=r[e];i===t&&(r[e]=null)}function Rue(n,e){return!!FK(n)[e]}function FK(n){return n[Oue]||(n[Oue]={})}Yf({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},pa);var BM=function(n){_e(e,n);function e(t){var r=n.call(this)||this;r._zr=t;var i=ct(r._mousedownHandler,r),a=ct(r._mousemoveHandler,r),o=ct(r._mouseupHandler,r),s=ct(r._mousewheelHandler,r),l=ct(r._pinchHandler,r);return r.enable=function(c,u){this.disable(),this._opt=kt(Rt(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},r.disable=function(){t.off("mousedown",i),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!ose(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!cN("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||Rue(this._zr,"globalPan"))){var r=t.offsetX,i=t.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&Fg(t.event),FAe(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){ose(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var r=cN("zoomOnMouseWheel",t,this._opt),i=cN("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),s=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!i)){if(r){var c=o>3?1.4:o>1?1.2:1.1,u=a>0?c:1/c;J6(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),h=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);J6(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!Rue(this._zr,"globalPan")){var r=t.pinchScale>1?1.1:1/1.1;J6(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(Xu);function J6(n,e,t,r,i){n.pointerChecker&&n.pointerChecker(r,i.originX,i.originY)&&(Fg(r.event),FAe(n,e,t,r,i))}function FAe(n,e,t,r,i){i.isAvailableBehavior=ct(cN,null,t,r),n.trigger(e,i)}function cN(n,e,t){var r=t[n];return!n||r&&(!it(r)||e.event[r+"Key"])}function $K(n,e,t){var r=n.target;r.x+=e,r.y+=t,r.dirty()}function BK(n,e,t,r){var i=n.target,a=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var c=o/n.zoom;n.zoom=o,i.x-=(t-i.x)*(c-1),i.y-=(r-i.y)*(c-1),i.scaleX*=c,i.scaleY*=c,i.dirty()}var $mt={axisPointer:1,tooltip:1,brush:1};function nF(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!$mt.hasOwnProperty(r.mainType)&&i&&i.model!==t}function $Ae(n){if(it(n)){var e=new DOMParser;n=e.parseFromString(n,"text/xml")}var t=n;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var eV,gL={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Nue=In(gL),mL={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Lue=In(mL),Bmt=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(e,t){t=t||{};var r=$Ae(e);this._defsUsePending=[];var i=new Lt;this._root=i;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),Tc(r,i,null,!0,!1);for(var c=r.firstChild;c;)this._parseNode(c,i,a,null,!1,!1),c=c.nextSibling;zmt(this._defs,this._defsUsePending),this._defsUsePending=[];var u,d;if(o){var h=rF(o);h.length>=4&&(u={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(u&&s!=null&&l!=null&&(d=UAe(u,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var f=i;i=new Lt,i.add(f),f.scaleX=f.scaleY=d.scale,f.x=d.x,f.y=d.y}return!t.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new Hn({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:u,viewBoxTransform:d,named:a}},n.prototype._parseNode=function(e,t,r,i,a,o){var s=e.nodeName.toLowerCase(),l,c=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!a){var u=eV[s];if(u&&dt(eV,s)){l=u.call(this,e,t);var d=e.getAttribute("name");if(d){var h={name:d,namedFrom:null,svgNodeTagLower:s,el:l};r.push(h),s==="g"&&(c=h)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});t.add(l)}}var f=jue[s];if(f&&dt(jue,s)){var m=f.call(this,e),v=e.getAttribute("id");v&&(this._defs[v]=m)}}if(l&&l.isGroup)for(var y=e.firstChild;y;)y.nodeType===1?this._parseNode(y,l,r,c,a,o):y.nodeType===3&&o&&this._parseText(y,l),y=y.nextSibling},n.prototype._parseText=function(e,t){var r=new cT({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});_u(t,r),Tc(e,r,this._defsUsePending,!1,!1),Umt(r,t);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},n.internalField=function(){eV={g:function(e,t){var r=new Lt;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Hn;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new nm;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new co;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new N5;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Bue(r));var a=new wl({shape:{points:i||[]},silent:!0});return _u(t,a),Tc(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Bue(r));var a=new xl({shape:{points:i||[]},silent:!0});return _u(t,a),Tc(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new Fo;return _u(t,r),Tc(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new Lt;return _u(t,s),Tc(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new Lt;return _u(t,s),Tc(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,t){var r=e.getAttribute("d")||"",i=C1e(r);return _u(t,i),Tc(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),n}(),jue={lineargradient:function(n){var e=parseInt(n.getAttribute("x1")||"0",10),t=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new kM(e,t,r,i);return Fue(n,a),$ue(n,a),a},radialgradient:function(n){var e=parseInt(n.getAttribute("cx")||"0",10),t=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),i=new P1e(e,t,r);return Fue(n,i),$ue(n,i),i}};function Fue(n,e){var t=n.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function $ue(n,e){for(var t=n.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};BAe(t,a,a);var o=a.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:o})}t=t.nextSibling}}function _u(n,e){n&&n.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),kt(e.__inheritedStyle,n.__inheritedStyle))}function Bue(n){for(var e=rF(n),t=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([i,a])}return t}function Tc(n,e,t,r,i){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};n.nodeType===1&&(qmt(n,e),BAe(n,o,s),r||Wmt(n,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=Uue(a,"fill",o.fill,t)),o.stroke!=null&&(a.style.stroke=Uue(a,"stroke",o.stroke,t)),Z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),Z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=$e(rF(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function Umt(n,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var Vmt=/^url\(\s*#(.*?)\)/;function Uue(n,e,t,r){var i=t&&t.match(Vmt);if(i){var a=Zd(i[1]);r.push([n,e,a]);return}return t==="none"&&(t=null),t}function zmt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=n[r[2]]}}var Hmt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function rF(n){return n.match(Hmt)||[]}var Gmt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,tV=Math.PI/180;function qmt(n,e){var t=n.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],i=null;t.replace(Gmt,function(d,h,f){return r.push(h,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=rF(o);switch(i=i||Bc(),s){case"translate":jf(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":NY(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":sx(i,i,-parseFloat(l[0])*tV,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*tV);Eg(i,[1,0,c,1,0,0],i);break;case"skewY":var u=Math.tan(parseFloat(l[0])*tV);Eg(i,[1,u,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var Vue=/([^\s:;]+)\s*:\s*([^:;]+)/g;function BAe(n,e,t){var r=n.getAttribute("style");if(r){Vue.lastIndex=0;for(var i;(i=Vue.exec(r))!=null;){var a=i[1],o=dt(gL,a)?gL[a]:null;o&&(e[o]=i[2]);var s=dt(mL,a)?mL[a]:null;s&&(t[s]=i[2])}}}function Wmt(n,e,t){for(var r=0;r<Nue.length;r++){var i=Nue[r],a=n.getAttribute(i);a!=null&&(e[gL[i]]=a)}for(var r=0;r<Lue.length;r++){var i=Lue[r],a=n.getAttribute(i);a!=null&&(t[mL[i]]=a)}}function UAe(n,e){var t=e.width/n.width,r=e.height/n.height,i=Math.min(t,r);return{scale:i,x:-(n.x+n.width/2)*i+(e.x+e.width/2),y:-(n.y+n.height/2)*i+(e.y+e.height/2)}}function Ymt(n,e){var t=new Bmt;return t.parse(n,e)}var Kmt=pt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Xmt=function(){function n(e,t){this.type="geoSVG",this._usedGraphicMap=pt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=$Ae(t)}return n.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Qmt(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(e){var t,r;try{t=e&&Ymt(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,vl(r!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=new Lt;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,d=void 0,h=void 0;if(a!=null?(c=0,d=a):s&&(c=s.x,d=s.width),o!=null?(u=0,h=o):s&&(u=s.y,h=s.height),c==null||u==null){var f=r.getBoundingRect();c==null&&(c=f.x,d=f.width),u==null&&(u=f.y,h=f.height)}l=this._boundingRect=new an(c,u,d,h)}if(s){var m=UAe(s,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}i.setClipPath(new Hn({shape:l.plain()}));var v=[];return Z(t.named,function(y){Kmt.get(y.svgNodeTagLower)!=null&&(v.push(y),Zmt(y.el))}),{root:i,boundingRect:l,named:v}},n.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},n.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},n}();function Zmt(n){n.silent=!1,n.isGroup&&n.traverse(function(e){e.silent=!1})}function Qmt(n){var e=[],t=pt();return Z(n,function(r){if(r.namedFrom==null){var i=new qft(r.name,r.el);e.push(i),t.set(r.name,i)}}),{regions:e,regionsMap:t}}var Y8=[126,25],zue="南海诸岛",Fb=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Mb=0;Mb<Fb.length;Mb++)for(var fS=0;fS<Fb[Mb].length;fS++)Fb[Mb][fS][0]/=10.5,Fb[Mb][fS][1]/=-10.5/.75,Fb[Mb][fS][0]+=Y8[0],Fb[Mb][fS][1]+=Y8[1];function Jmt(n,e){if(n==="china"){for(var t=0;t<e.length;t++)if(e[t].name===zue)return;e.push(new jEe(zue,$e(Fb,function(r){return{type:"polygon",exterior:r}}),Y8))}}var evt={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function tvt(n,e){if(n==="china"){var t=evt[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var nvt=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function rvt(n,e){n==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:nvt[0]})}var ivt="name",avt=function(){function n(e,t,r){this.type="geoJSON",this._parsedMap=pt(),this._mapName=e,this._specialAreas=r,this._geoJSON=svt(t)}return n.prototype.load=function(e,t){t=t||ivt;var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:ovt(i)})}var a=pt(),o=[];return Z(r.regions,function(s){var l=s.name;e&&dt(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new an(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,i;try{i=r?Yft(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return Jmt(t,i),Z(i,function(a){var o=a.name;tvt(t,a),rvt(t,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function ovt(n){for(var e,t=0;t<n.length;t++){var r=n[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function svt(n){return it(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var wk=pt();const Hg={registerMap:function(n,e,t){if(e.svg){var r=new Xmt(n,e.svg);wk.set(n,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?t=e.specialAreas:i=e;var r=new avt(n,i,t);wk.set(n,r)}},getGeoResource:function(n){return wk.get(n)},getMapForUser:function(n){var e=wk.get(n);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(n,e,t){var r=wk.get(n);if(r)return r.load(e,t)}};var UK=["rect","circle","line","ellipse","polygon","polyline","path"],lvt=pt(UK),cvt=pt(UK.concat(["g"])),uvt=pt(UK.concat(["g"])),VAe=Gn();function rR(n){var e=n.getItemStyle(),t=n.get("areaColor");return t!=null&&(e.fill=t),e}function Hue(n){var e=n.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var zAe=function(){function n(e){var t=new Lt;this.uid=WT("ec_map_draw"),this._controller=new BM(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Lt),t.add(this._svgGroup=new Lt)}return n.prototype.draw=function(e,t,r,i,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(w){!s&&w.getHostGeoModel()===e&&(s=w.getData())});var l=e.coordinateSystem,c=this._regionsGroup,u=this.group,d=l.getTransformInfo(),h=d.raw,f=d.roam,m=!c.childAt(0)||a;m?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):tr(u,f,e);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,y={api:r,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:h};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(e,t,r),this._updateMapSelectHandler(e,c,r,i)},n.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=pt(),r=pt(),i=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,c=l&&l.stream;function u(f,m){return m&&(f=m(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function d(f){for(var m=[],v=!c&&l&&l.project,y=0;y<f.length;++y){var w=u(f[y],v);w&&m.push(w)}return m}function h(f){return{shape:{points:d(f)}}}i.removeAll(),Z(e.geo.regions,function(f){var m=f.name,v=t.get(m),y=r.get(m)||{},w=y.dataIdx,_=y.regionModel;if(!v){v=t.set(m,new Lt),i.add(v),w=s?s.indexOfName(m):null,_=e.isGeo?o.getRegionModel(m):s?s.getItemModel(w):null;var T=_.get("silent",!0);T!=null&&(v.silent=T),r.set(m,{dataIdx:w,regionModel:_})}var A=[],C=[];Z(f.geometries,function(P){if(P.type==="polygon"){var O=[P.exterior].concat(P.interiors||[]);c&&(O=Xue(O,c)),Z(O,function(L){A.push(new wl(h(L)))})}else{var j=P.points;c&&(j=Xue(j,c,!0)),Z(j,function(L){C.push(new xl(h(L)))})}});var k=u(f.getCenter(),l&&l.project);function M(P,O){if(P.length){var j=new ZY({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});v.add(j),Gue(e,j,w,_),que(e,j,m,_,o,w,k),O&&(Hue(j),Z(j.states,Hue))}}M(A),M(C,!0)}),t.each(function(f,m){var v=r.get(m),y=v.dataIdx,w=v.regionModel;Wue(e,f,m,w,o,y),Yue(e,f,m,w,o),Kue(e,f,m,w,o)},this)},n.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=pt(),a=!1;Z(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,c=e.data,u=o.svgNodeTagLower,d=o.el,h=c?c.indexOfName(s):null,f=l.getRegionModel(s);lvt.get(u)!=null&&d instanceof Yu&&Gue(e,d,h,f),d instanceof Yu&&(d.culling=!0);var m=f.get("silent",!0);if(m!=null&&(d.silent=m),d.z2EmphasisLift=0,!o.namedFrom&&(uvt.get(u)!=null&&que(e,d,s,f,l,h,null),Wue(e,d,s,f,l,h),Yue(e,d,s,f,l),cvt.get(u)!=null)){var v=Kue(e,d,s,f,l);v==="self"&&(a=!0);var y=i.get(s)||i.set(s,[]);y.push(d)}},this),this._enableBlurEntireSVG(a,e)},n.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Yw(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},n.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},n.prototype._useSVG=function(e){var t=Hg.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},n.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Hg.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(e,t,r){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=e.id,c}a.off("pan").on("pan",function(c){this._mouseDownFlag=!1,$K(o,c.dx,c.dy),r.dispatchAction(Ie(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,BK(o,c.scale,c.originX,c.originY),r.dispatchAction(Ie(l(),{totalZoom:o.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(c,u,d){return i.containPoint([u,d])&&!nF(c,r,e)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=VAe(t).ignore)})},n.prototype._updateMapSelectHandler=function(e,t,r,i){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n}();function Gue(n,e,t,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=rR(i),c=rR(a),u=rR(s),d=rR(o),h=n.data;if(h){var f=h.getItemVisual(t,"style"),m=h.getItemVisual(t,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),m&&(l.decal=hT(m,n.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=d,Yw(e)}function que(n,e,t,r,i,a,o){var s=n.data,l=n.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||c||u&&u.showLabel){var d=l?t:a,h=void 0;(!s||a>=0)&&(h=i);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;os(e,po(r),{labelFetcher:h,labelDataIndex:d,defaultText:t},f);var m=e.getTextContent();if(m&&(VAe(m).ignore=m.ignore,e.textConfig&&o)){var v=e.getBoundingRect().clone();e.textConfig.layoutRect=v,e.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function Wue(n,e,t,r,i,a){n.data?n.data.setItemGraphicEl(a,e):$t(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:t,region:r&&r.option||{}}}function Yue(n,e,t,r,i){n.data||lx({el:e,componentModel:i,itemName:t,itemTooltipOption:r.get("tooltip")})}function Kue(n,e,t,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return Vi(e,o,a.get("blurScope"),a.get("disabled")),n.isGeo&&lct(e,i,t),o}function Xue(n,e,t){var r=[],i;function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,c){isFinite(l)&&isFinite(c)&&i.push([l,c])},sphere:function(){}});return!t&&s.polygonStart(),Z(n,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!t&&s.polygonEnd(),r}var dvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new zAe(i);o.add(s.group),s.draw(t,r,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,i){var a=t.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=a.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,d=c.offset,h=new nm({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+d*9,cy:u[1],r:3},silent:!0,z2:8+(d?0:HT+1)});if(!d){var f=t.mainSeries.getData(),m=a.getName(l),v=f.indexOfName(m),y=a.getItemModel(l),w=y.getModel("label"),_=f.getItemGraphicEl(v);os(h,po(y),{labelFetcher:{getFormattedLabel:function(T,A){return t.getFormattedLabel(v,A)}},defaultText:m}),h.disableLabelAnimation=!0,w.get("position")||h.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(T){K2(h,T)}}o.add(h)}}})},e.type="map",e}(Vr),hvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=tE(this,{coordDimensions:["value"],encodeDefaulter:Yt(sK,this)}),i=pt(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);i.set(l,o)}var c=Hg.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return Z(c.regions,function(u){var d=u.name,h=i.get(d),f=u.properties&&u.properties.echartsStyle,m;h==null?(m={name:d},a.push(m)):m=r.getRawDataItem(h),f&&en(m,f)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData(),o=this.getRawValue(t),s=a.getName(t),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var d=l[u].originalData.indexOfName(s),h=a.mapDimension("value");isNaN(l[u].originalData.get(h,d))||c.push(l[u].name)}return go("section",{header:c.join(", "),noHeader:!c.length,blocks:[go("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=Pa(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(ai);function fvt(n,e){var t={};return Z(n,function(r){r.each(r.mapDimension("value"),function(i,a){var o="ec-"+r.getName(a);t[o]=t[o]||[],isNaN(i)||t[o].push(i)})}),n[0].map(n[0].mapDimension("value"),function(r,i){for(var a="ec-"+n[0].getName(i),o=0,s=1/0,l=-1/0,c=t[a].length,u=0;u<c;u++)s=Math.min(s,t[a][u]),l=Math.max(l,t[a][u]),o+=t[a][u];var d;return e==="min"?d=s:e==="max"?d=l:e==="average"?d=o/c:d=o,c===0?NaN:d})}function pvt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),Z(e,function(t,r){for(var i=fvt($e(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(i.cloneShallow()),t[a].mainSeries=t[0]})}function gvt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var i={};Z(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var d=l.getName(u),h=s.getRegion(d);if(!(!h||isNaN(c))){var f=i[d]||0,m=s.dataToPoint(h.getCenter());i[d]=f+1,l.setItemLayout(u,{point:m,offset:f})}})});var a=t.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),e[r]=!0}})}var Zue=ns,UM=function(n){_e(e,n);function e(t){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new pg,r._rawTransformable=new pg,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,i,a){return this._rect=new an(t,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,a){this._transformTo(t,r,i,a),this._viewRect=new an(t,r,i,a)},e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new an(t,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[Ze(t[0],r.getWidth()),Ze(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=ns([],a,t),i=ns([],i,t),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),RY(this.transform||(this.transform=[]),r.transform||Bc()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],VT(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new pg;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?Zue(i,t,a):al(i,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?Zue([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,i){var a=Que(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=Que(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(pg);function Que(n){var e=n.seriesModel;return e?e.coordinateSystem:null}var mvt={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},HAe=["lng","lat"],K8=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t)||this;a.dimensions=HAe,a.type="geo",a._nameCoordMap=pt(),a.map=r;var o=i.projection,s=Hg.load(r,i.nameMap,i.nameProperty),l=Hg.getGeoResource(r);a.resourceType=l?l.type:null;var c=a.regions=s.regions,u=mvt[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var d;if(o)for(var h=0;h<c.length;h++){var f=c[h].getBoundingRect(o);d=d||f.clone(),d.union(f)}else d=s.boundingRect;return a.setBoundingRect(d.x,d.y,d.width,d.height),a.aspectScale=o?1:Gt(i.aspectScale,u.aspectScale),a._invertLongitute=o?!1:u.invertLongitute,a}return e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new an(t,r,i,a));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(t))return r[i]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,i){if(it(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,i)}},e.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return n.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,r,i){return n.prototype.dataToPoint.call(this,t,r,i)},e.prototype.convertToPixel=function(t,r,i){var a=Jue(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=Jue(r);return a===this?a.pointToData(i):null},e}(UM);Oa(K8,UM);function Jue(n){var e=n.geoModel,t=n.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Ma).models[0]||{}).coordinateSystem:null}function ede(n,e){var t=n.get("boundingCoords");if(t!=null){var r=t[0],i=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=i[0],c=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var u=function(k,M,P,O){for(var j=P-k,L=O-M,B=0;B<=100;B++){var $=B/100,Y=a.project([k+j*$,M+L*$]);qv(r,r,Y),Wv(i,i,Y)}};u(o,s,l,s),u(l,s,l,c),u(l,c,o,c),u(o,c,l,s)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var d=this.getBoundingRect(),h=n.get("layoutCenter"),f=n.get("layoutSize"),m=e.getWidth(),v=e.getHeight(),y=d.width/d.height*this.aspectScale,w=!1,_,T;h&&f&&(_=[Ze(h[0],m),Ze(h[1],v)],T=Ze(f,Math.min(m,v)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(T)&&(w=!0));var A;if(w)A={},y>1?(A.width=T,A.height=T/y):(A.height=T,A.width=T*y),A.y=_[1]-A.height/2,A.x=_[0]-A.width/2;else{var C=n.getBoxLayoutParams();C.aspect=y,A=Za(C,{width:m,height:v})}this.setViewRect(A.x,A.y,A.width,A.height),this.setCenter(n.get("center"),e),this.setZoom(n.get("zoom"))}function vvt(n,e){Z(e.get("geoCoord"),function(t,r){n.addGeoCoord(r,t)})}var yvt=function(){function n(){this.dimensions=HAe}return n.prototype.create=function(e,t){var r=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),c=new K8(l+s,l,Ie({nameMap:o.get("nameMap")},i(o)));c.zoomLimit=o.get("scaleLimit"),r.push(c),o.coordinateSystem=c,c.model=o,c.resize=ede,c.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),Z(a,function(o,s){var l=$e(o,function(u){return u.get("nameMap")}),c=new K8(s,s,Ie({nameMap:IY(l)},i(o[0])));c.zoomLimit=Ro.apply(null,$e(o,function(u){return u.get("scaleLimit")})),r.push(c),c.resize=ede,c.resize(o[0],t),Z(o,function(u){u.coordinateSystem=c,vvt(c,u)})}),r},n.prototype.getFilledRegions=function(e,t,r,i){for(var a=(e||[]).slice(),o=pt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=Hg.load(t,r,i);return Z(l.regions,function(c){var u=c.name,d=o.get(u),h=c.properties&&c.properties.echartsStyle;d||(d={name:u},a.push(d)),h&&en(d,h)}),a},n}(),GAe=new yvt,bvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=Hg.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,i),Gw(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=GAe.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Lf(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new br(o,t,t.ecModel)),o.selected&&(i[s]=!0)),a},pt()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new br(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:t};if(Et(a))return o.status=r,a(o);if(it(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Dn);function tde(n,e){return n.pointToProjected?n.pointToProjected(e):n.pointToData(e)}function VK(n,e,t,r){var i=n.getZoom(),a=n.getCenter(),o=e.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,n.setCenter(tde(n,s),r)),o!=null){if(t){var l=t.min||0,c=t.max||1/0;o=Math.max(Math.min(i*o,c),l)/i}n.scaleX*=o,n.scaleY*=o;var u=(e.originX-n.x)*(o-1),d=(e.originY-n.y)*(o-1);n.x-=u,n.y-=d,n.updateTransform(),n.setCenter(tde(n,s),r),n.setZoom(o*i)}return{center:n.getCenter(),zoom:n.getZoom()}}var wvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,i,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new zAe(i));var o=this._mapDraw;o.draw(t,r,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,i)},e.prototype._handleRegionClick=function(t){var r;uw(t.target,function(i){return(r=$t(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,i){var a=this;this._mapDraw.group.traverse(function(o){var s=$t(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Ni);function xvt(n,e,t){Hg.registerMap(n,e,t)}function qAe(n){n.registerCoordinateSystem("geo",GAe),n.registerComponentModel(bvt),n.registerComponentView(wvt),n.registerImpl("registerMap",xvt),n.registerImpl("getMap",function(t){return Hg.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[t](i.name);var c=l.coordinateSystem;Z(c.regions,function(d){o[d.name]=l.isSelected(d.name)||!1});var u=[];Z(o,function(d,h){o[h]&&u.push(h)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:o,allSelected:s,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=VK(s,t,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&Z(o.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function _vt(n){yn(qAe),n.registerChartView(dvt),n.registerSeriesModel(hvt),n.registerLayout(gvt),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,pvt),qTe("map",n.registerAction)}function Svt(n){var e=n;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,i;r=t.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function Tvt(n,e){var t=n.isExpand?n.children:[],r=n.parentNode.children,i=n.hierNode.i?r[n.hierNode.i-1]:null;if(t.length){kvt(n);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;i?(n.hierNode.prelim=i.hierNode.prelim+e(n,i),n.hierNode.modifier=n.hierNode.prelim-a):n.hierNode.prelim=a}else i&&(n.hierNode.prelim=i.hierNode.prelim+e(n,i));n.parentNode.hierNode.defaultAncestor=Cvt(n,i,n.parentNode.hierNode.defaultAncestor||r[0],e)}function Evt(n){var e=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:e},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function nde(n){return arguments.length?n:Mvt}function oC(n,e){return n-=Math.PI/2,{x:e*Math.cos(n),y:e*Math.sin(n)}}function Avt(n,e){return Za(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function kvt(n){for(var e=n.children,t=e.length,r=0,i=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function Cvt(n,e,t,r){if(e){for(var i=n,a=n,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,c=a.hierNode.modifier,u=o.hierNode.modifier,d=s.hierNode.modifier;s=nV(s),a=rV(a),s&&a;){i=nV(i),o=rV(o),i.hierNode.ancestor=n;var h=s.hierNode.prelim+d-a.hierNode.prelim-c+r(s,a);h>0&&(Ivt(Dvt(s,n,t),n,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=a.hierNode.modifier,l+=i.hierNode.modifier,u+=o.hierNode.modifier}s&&!nV(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=d-l),a&&!rV(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=c-u,t=n)}return t}function nV(n){var e=n.children;return e.length&&n.isExpand?e[e.length-1]:n.hierNode.thread}function rV(n){var e=n.children;return e.length&&n.isExpand?e[0]:n.hierNode.thread}function Dvt(n,e,t){return n.hierNode.ancestor.parentNode===e.parentNode?n.hierNode.ancestor:t}function Ivt(n,e,t){var r=t/(e.hierNode.i-n.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,n.hierNode.change+=r}function Mvt(n,e){return n.parentNode===e.parentNode?1:2}var Pvt=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),Ovt=function(n){_e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Pvt},e.prototype.buildPath=function(t,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var c=r.orient,u=c==="TB"||c==="BT"?0:1,d=1-u,h=Ze(r.forkPosition,1),f=[];f[u]=o[u],f[d]=o[d]+(l[d]-o[d])*h,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(s[0],s[1]),f[u]=s[u],t.lineTo(f[0],f[1]),f[u]=l[u],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var m=1;m<a-1;m++){var v=i[m];t.moveTo(v[0],v[1]),f[u]=v[u],t.lineTo(f[0],f[1])}},e}(wn),Rvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Lt,t}return e.prototype.init=function(t,r){this._controller=new BM(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,i),this._updateController(t,r,i);var c=this._data;a.diff(c).add(function(u){rde(a,u)&&ide(a,u,null,s,t)}).update(function(u,d){var h=c.getItemGraphicEl(d);if(!rde(a,u)){h&&ode(c,d,h,s,t);return}ide(a,u,h,s,t)}).remove(function(u){var d=c.getItemGraphicEl(u);d&&ode(c,u,d,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:d})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),a=[];i.each(function(d){var h=i.getItemLayout(d);h&&!isNaN(h.x)&&!isNaN(h.y)&&a.push([+h.x,+h.y])});var o=[],s=[];P5(a,o,s);var l=this._min,c=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=c?c[1]:s[1]+1);var u=t.coordinateSystem=new UM;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),u.setCenter(t.get("center"),r),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!nF(c,i,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){$K(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){BK(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(t),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Vr);function rde(n,e){var t=n.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function ide(n,e,t,r,i){var a=!t,o=n.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,c=o.isExpand===!1&&o.children.length!==0?l:"#fff",u=n.tree.root,d=o.parentNode===u?o:o.parentNode||o,h=n.getItemGraphicEl(d.dataIndex),f=d.getLayout(),m=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:f,v=o.getLayout();a?(t=new RM(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.x=m.x,t.y=m.y):t.updateData(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=v.rawX,t.__radialRawY=v.rawY,r.add(t),n.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,tr(t,{x:v.x,y:v.y},i);var y=t.getSymbolPath();if(i.get("layout")==="radial"){var w=u.children[0],_=w.getLayout(),T=w.children.length,A=void 0,C=void 0;if(v.x===_.x&&o.isExpand===!0&&w.children.length){var k={x:(w.children[0].getLayout().x+w.children[T-1].getLayout().x)/2,y:(w.children[0].getLayout().y+w.children[T-1].getLayout().y)/2};A=Math.atan2(k.y-_.y,k.x-_.x),A<0&&(A=Math.PI*2+A),C=k.x<_.x,C&&(A=A-Math.PI)}else A=Math.atan2(v.y-_.y,v.x-_.x),A<0&&(A=Math.PI*2+A),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(C=v.x<_.x,C&&(A=A-Math.PI)):(C=v.x>_.x,C||(A=A-Math.PI));var M=C?"left":"right",P=s.getModel("label"),O=P.get("rotate"),j=O*(Math.PI/180),L=y.getTextContent();L&&(y.setTextConfig({position:P.get("position")||M,rotation:O==null?-A:j,origin:"center"}),L.setStyle("verticalAlign","middle"))}var B=s.get(["emphasis","focus"]),$=B==="relative"?rI(o.getAncestorsIndices(),o.getDescendantIndices()):B==="ancestor"?o.getAncestorsIndices():B==="descendant"?o.getDescendantIndices():null;$&&($t(t).focus=$),Nvt(i,o,u,t,m,f,v,r),t.__edge&&(t.onHoverStateChange=function(Y){if(Y!=="blur"){var G=o.parentNode&&n.getItemGraphicEl(o.parentNode.dataIndex);G&&G.hoverState===TM||K2(t.__edge,Y)}})}function Nvt(n,e,t,r,i,a,o,s){var l=e.getModel(),c=n.get("edgeShape"),u=n.get("layout"),d=n.getOrient(),h=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),v=r.__edge;if(c==="curve")e.parentNode&&e.parentNode!==t&&(v||(v=r.__edge=new AM({shape:X8(u,d,h,i,i)})),tr(v,{shape:X8(u,d,h,a,o)},n));else if(c==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var y=e.children,w=[],_=0;_<y.length;_++){var T=y[_].getLayout();w.push([T.x,T.y])}v||(v=r.__edge=new Ovt({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:f}})),tr(v,{shape:{parentPoint:[o.x,o.y],childPoints:w}},n)}v&&!(c==="polyline"&&!e.isExpand)&&(v.useStyle(kt({strokeNoScale:!0,fill:null},m)),as(v,l,"lineStyle"),Yw(v),s.add(v))}function ade(n,e,t,r,i){var a=e.tree.root,o=WAe(a,n),s=o.source,l=o.sourceLayout,c=e.getItemGraphicEl(n.dataIndex);if(c){var u=e.getItemGraphicEl(s.dataIndex),d=u.__edge,h=c.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),f=r.get("edgeShape"),m=r.get("layout"),v=r.get("orient"),y=r.get(["lineStyle","curveness"]);h&&(f==="curve"?_y(h,{shape:X8(m,v,y,l,l),style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}):f==="polyline"&&r.get("layout")==="orthogonal"&&_y(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}))}}function WAe(n,e){for(var t=e.parentNode===n?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===n?t:t.parentNode||t;return{source:t,sourceLayout:r}}function ode(n,e,t,r,i){var a=n.tree.getNodeByDataIndex(e),o=n.tree.root,s=WAe(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};_y(t,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(t),n.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(c){ade(c,n,r,i,l)}),ade(a,n,r,i,l)}function X8(n,e,t,r,i){var a,o,s,l,c,u,d,h;if(n==="radial"){c=r.rawX,d=r.rawY,u=i.rawX,h=i.rawY;var f=oC(c,d),m=oC(c,d+(h-d)*t),v=oC(u,h+(d-h)*t),y=oC(u,h);return{x1:f.x||0,y1:f.y||0,x2:y.x||0,y2:y.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:v.x||0,cpy2:v.y||0}}else c=r.x,d=r.y,u=i.x,h=i.y,(e==="LR"||e==="RL")&&(a=c+(u-c)*t,o=d,s=u+(c-u)*t,l=h),(e==="TB"||e==="BT")&&(a=c,o=d+(h-d)*t,s=u,l=h+(d-h)*t);return{x1:c,y1:d,x2:u,y2:h,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Hu=Gn();function YAe(n){var e=n.mainData,t=n.datas;t||(t={main:e},n.datasAttr={main:"data"}),n.datas=n.mainData=null,KAe(e,t,n),Z(t,function(r){Z(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Yt(Lvt,n))})}),e.wrapMethod("cloneShallow",Yt(Fvt,n)),Z(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Yt(jvt,n))}),vl(t[e.dataType]===e)}function Lvt(n,e){if(Uvt(this)){var t=Ie({},Hu(this).datas);t[this.dataType]=e,KAe(e,t,n)}else zK(e,this.dataType,Hu(this).mainData,n);return e}function jvt(n,e){return n.struct&&n.struct.update(),e}function Fvt(n,e){return Z(Hu(e).datas,function(t,r){t!==e&&zK(t.cloneShallow(),r,e,n)}),e}function $vt(n){var e=Hu(this).mainData;return n==null||e==null?e:Hu(e).datas[n]}function Bvt(){var n=Hu(this).mainData;return n==null?[{data:n}]:$e(In(Hu(n).datas),function(e){return{type:e,data:Hu(n).datas[e]}})}function Uvt(n){return Hu(n).mainData===n}function KAe(n,e,t){Hu(n).datas={},Z(e,function(r,i){zK(r,i,n,t)})}function zK(n,e,t,r){Hu(t).datas[e]=n,Hu(n).mainData=t,n.dataType=e,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=n),n.getLinkedData=$vt,n.getLinkedDataAll=Bvt}var Vvt=function(){function n(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(e,t,r){Et(e)&&(r=t,t=e,e=null),e=e||{},it(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=t.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},n.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},n.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].getNodeById(e);if(a)return a}},n.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].contains(e);if(a)return a}},n.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},n.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},n.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},n.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},n.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},n.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},n.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},n.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},n}(),HK=function(){function n(e){this.type="tree",this._nodes=[],this.hostModel=e}return n.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},n.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(e,t,r){var i=new n(t),a=[],o=1;s(e);function s(u,d){var h=u.value;o=Math.max(o,Fe(h)?h.length:1),a.push(u);var f=new Vvt(Ya(u.name,""),i);d?zvt(f,d):i.root=f,i._nodes.push(f);var m=u.children;if(m)for(var v=0;v<m.length;v++)s(m[v],f)}i.root.updateDepthAndHeight(0);var l=PM(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,c=new gl(l,t);return c.initData(a),r&&r(c),YAe({mainData:c,struct:i,structAttr:"tree"}),i.update(),i},n}();function zvt(n,e){var t=e.children;n.parentNode!==e&&(t.push(n),n.parentNode=e)}function SI(n,e,t){if(n&&dn(e,n.type)>=0){var r=t.getData().tree.root,i=n.targetNode;if(it(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=n.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function XAe(n){for(var e=[];n;)n=n.parentNode,n&&e.push(n);return e.reverse()}function GK(n,e){var t=XAe(n);return dn(t,e)>=0}function iF(n,e){for(var t=[];n;){var r=n.dataIndex;t.push({name:n.name,dataIndex:r,value:e.getRawValue(r)}),n=n.parentNode}return t.reverse(),t}var Hvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=t.leaves||{},a=new br(i,this,this.ecModel),o=HK.createTree(r,this,s);function s(d){d.wrapMethod("getItemModel",function(h,f){var m=o.getNodeByDataIndex(f);return m&&m.children.length&&m.isExpand||(h.parentModel=a),h})}var l=0;o.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var c=t.expandAndCollapse,u=c&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(d){var h=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=h&&h.collapsed!=null?!h.collapsed:d.depth<=u}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(t),l=s.getValue(),c=s.name;s&&s!==o;)c=s.parentNode.name+"."+c,s=s.parentNode;return go("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=iF(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(ai);function Gvt(n,e,t){for(var r=[n],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)e(a,t)}function xk(n,e){for(var t=[n],r;r=t.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)t.push(i[a])}}function qvt(n,e){n.eachSeriesByType("tree",function(t){Wvt(t,e)})}function Wvt(n,e){var t=Avt(n,e);n.layoutInfo=t;var r=n.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(t.height,t.width)/2,o=nde(function(T,A){return(T.parentNode===A.parentNode?1:2)/T.depth})):(i=t.width,a=t.height,o=nde());var s=n.getData().tree.root,l=s.children[0];if(l){Svt(s),Gvt(l,Tvt,o),s.hierNode.modifier=-l.hierNode.prelim,xk(l,Evt);var c=l,u=l,d=l;xk(l,function(T){var A=T.getLayout().x;A<c.getLayout().x&&(c=T),A>u.getLayout().x&&(u=T),T.depth>d.depth&&(d=T)});var h=c===u?1:o(c,u)/2,f=h-c.getLayout().x,m=0,v=0,y=0,w=0;if(r==="radial")m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),xk(l,function(T){y=(T.getLayout().x+f)*m,w=(T.depth-1)*v;var A=oC(y,w);T.setLayout({x:A.x,y:A.y,rawX:y,rawY:w},!0)});else{var _=n.getOrient();_==="RL"||_==="LR"?(v=a/(u.getLayout().x+h+f),m=i/(d.depth-1||1),xk(l,function(T){w=(T.getLayout().x+f)*v,y=_==="LR"?(T.depth-1)*m:i-(T.depth-1)*m,T.setLayout({x:y,y:w},!0)})):(_==="TB"||_==="BT")&&(m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),xk(l,function(T){y=(T.getLayout().x+f)*m,w=_==="TB"?(T.depth-1)*v:a-(T.depth-1)*v,T.setLayout({x:y,y:w},!0)}))}}}function Yvt(n){n.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(i.dataIndex,"style");Ie(s,o)})})}function Kvt(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=VK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function Xvt(n){n.registerChartView(Rvt),n.registerSeriesModel(Hvt),n.registerLayout(qvt),n.registerVisual(Yvt),Kvt(n)}var sde=["treemapZoomToNode","treemapRender","treemapMove"];function Zvt(n){for(var e=0;e<sde.length;e++)n.registerAction({type:sde[e],update:"updateView"},pa);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=SI(t,s,a);if(l){var c=a.getViewRoot();c&&(t.direction=GK(c,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function ZAe(n){var e=n.getData(),t=e.tree,r={};t.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=T8(n.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var Qvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};QAe(i);var a=t.levels||[],o=this.designatedVisualItemStyle={},s=new br({itemStyle:o},this,r);a=t.levels=Jvt(a,r);var l=$e(a||[],function(d){return new br(d,s,r)},this),c=HK.createTree(i,this,u);function u(d){d.wrapMethod("getItemModel",function(h,f){var m=c.getNodeByDataIndex(f),v=m?l[m.depth]:null;return h.parentModel=v||s,h})}return c.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return go("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=iF(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Ie(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=pt(),this._idIndexMapCount=0);var i=r.get(t);return i==null&&r.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){ZAe(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(ai);function QAe(n){var e=0;Z(n.children,function(r){QAe(r);var i=r.value;Fe(i)&&(i=i[0]),e+=i});var t=n.value;Fe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Fe(n.value)?n.value[0]=t:n.value=t}function Jvt(n,e){var t=Or(e.get("color")),r=Or(e.get(["aria","decal","decals"]));if(t){n=n||[];var i,a;Z(n,function(s){var l=new br(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(a=!0)});var o=n[0]||(n[0]={});return i||(o.color=t.slice()),!a&&r&&(o.decal=r.slice()),n}}var eyt=8,lde=8,iV=5,tyt=function(){function n(e){this.group=new Lt,e.add(this.group)}return n.prototype.render=function(e,t,r,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),d={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,d,c),this._renderContent(e,d,s,l,c,u,i),G5(o,d.pos,d.box)}},n.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var a=Ya(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+eyt*2,t.emptyItemWidth);t.totalWidth+=s+lde,t.renderList.push({node:i,text:a,width:s})}},n.prototype._renderContent=function(e,t,r,i,a,o,s){for(var l=0,c=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),d=uut(t.pos,t.box),h=t.totalWidth,f=t.renderList,m=i.getModel("itemStyle").getItemStyle(),v=f.length-1;v>=0;v--){var y=f[v],w=y.node,_=y.width,T=y.text;h>d.width&&(h-=_-c,_=c,T=null);var A=new wl({shape:{points:nyt(l,0,_,u,v===f.length-1,v===0)},style:kt(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Yn({style:ri(a,{text:T})}),textConfig:{position:"inside"},z2:HT*1e4,onclick:Yt(s,w)});A.disableLabelAnimation=!0,A.getTextContent().ensureState("emphasis").style=ri(o,{text:T}),A.ensureState("emphasis").style=m,Vi(A,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(A),ryt(A,e,w),l+=_+lde}},n.prototype.remove=function(){this.group.removeAll()},n}();function nyt(n,e,t,r,i,a){var o=[[i?n:n-iV,e],[n+t,e],[n+t,e+r],[i?n:n-iV,e+r]];return!a&&o.splice(2,0,[n+t+iV,e+r/2]),!i&&o.push([n,e+r/2]),o}function ryt(n,e,t){$t(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&iF(t,e)}}var iyt=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(e,t,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:a}),!0)},n.prototype.finished=function(e){return this._finishedCallback=e,this},n.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},n}();function ayt(){return new iyt}var Z8=Lt,cde=Hn,ude=3,dde="label",hde="upperLabel",oyt=HT*10,syt=HT*2,lyt=HT*3,$b=Ww([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),fde=function(n){var e=$b(n);return e.stroke=e.fill=e.lineWidth=null,e},vL=Gn(),cyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=_k(),t}return e.prototype.render=function(t,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(dn(o,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=SI(a,s,t),c=a&&a.type,u=t.layoutInfo,d=!this._oldTree,h=this._storage,f=c==="treemapRootToNode"&&l&&h?{rootNodeGroup:h.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,m=this._giveContainerGroup(u),v=t.get("animation"),y=this._doRender(m,t,f);v&&!d&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(m,y,t,f):y.renderFinally(),this._resetController(i),this._renderBreadcrumb(t,i,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new Z8,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,i){var a=r.getData().tree,o=this._oldTree,s=_k(),l=_k(),c=this._storage,u=[];function d(_,T,A,C){return uyt(r,l,c,i,s,u,_,T,A,C)}v(a.root?[a.root]:[],o&&o.root?[o.root]:[],t,a===o||!o,0);var h=y(c);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,m=a.root.getLayout();m.width===f.width&&m.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:h,renderFinally:w};function v(_,T,A,C,k){C?(T=_,Z(_,function(O,j){!O.isRemoved()&&P(j,j)})):new Vg(T,_,M,M).add(P).update(P).remove(Yt(P,null)).execute();function M(O){return O.getId()}function P(O,j){var L=O!=null?_[O]:null,B=j!=null?T[j]:null,$=d(L,B,A,k);$&&v(L&&L.viewChildren||[],B&&B.viewChildren||[],$,C,k+1)}}function y(_){var T=_k();return _&&Z(_,function(A,C){var k=T[C];Z(A,function(M){M&&(k.push(M),vL(M).willDelete=!0)})}),T}function w(){Z(h,function(_){Z(_,function(T){T.parent&&T.parent.remove(T)})}),Z(u,function(_){_.invisible=!0,_.dirty()})}},e.prototype._doAnimation=function(t,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(Et(o)?0:o)||0,c=(Et(s)?null:s)||"cubicOut",u=ayt();Z(r.willDeleteEls,function(d,h){Z(d,function(f,m){if(!f.invisible){var v=f.parent,y,w=vL(v);if(a&&a.direction==="drillDown")y=v===a.rootNodeGroup?{shape:{x:0,y:0,width:w.nodeWidth,height:w.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _=0,T=0;w.willDelete||(_=w.nodeWidth/2,T=w.nodeHeight/2),y=h==="nodeGroup"?{x:_,y:T,style:{opacity:0}}:{shape:{x:_,y:T,width:0,height:0},style:{opacity:0}}}y&&u.add(f,y,l,0,c)}})}),Z(this._storage,function(d,h){Z(d,function(f,m){var v=r.lastsForAnimation[h][m],y={};v&&(f instanceof Lt?v.oldX!=null&&(y.x=f.x,y.y=f.y,f.x=v.oldX,f.y=v.oldY):(v.oldShape&&(y.shape=Ie({},f.shape),f.setShape(v.oldShape)),v.fadein?(f.setStyle("opacity",0),y.style={opacity:1}):f.style.opacity!==1&&(y.style={opacity:1})),u.add(f,y,l,0,c))})},this),this._state="animating",u.finished(ct(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new BM(t.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",ct(this._onPan,this)),r.on("zoom",ct(this._onZoom,this)));var a=new an(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>ude||Math.abs(t.dy)>ude)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(t){var r=t.originX,i=t.originY,a=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new an(s.x,s.y,s.width,s.height),c=null,u=this._controllerHost;c=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=a,c){var h=c.min||0,f=c.max||1/0;d=Math.max(Math.min(f,d),h)}var m=d/u.zoom;u.zoom=d;var v=this.seriesModel.layoutInfo;r-=v.x,i-=v.y;var y=Bc();jf(y,y,[-r,-i]),NY(y,y,[m,m]),jf(y,y,[r,i]),l.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&tL(c,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,i){var a=this;i||(i=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new tyt(this.group))).render(t,r,i.node,function(o){a._state!=="animating"&&(GK(t.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=_k(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,r),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(Vr);function _k(){return{nodeGroup:[],background:[],content:[]}}function uyt(n,e,t,r,i,a,o,s,l,c){if(!o)return;var u=o.getLayout(),d=n.getData(),h=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var f=u.width,m=u.height,v=u.borderWidth,y=u.invisible,w=o.getRawIndex(),_=s&&s.getRawIndex(),T=o.viewChildren,A=u.upperHeight,C=T&&T.length,k=h.getModel("itemStyle"),M=h.getModel(["emphasis","itemStyle"]),P=h.getModel(["blur","itemStyle"]),O=h.getModel(["select","itemStyle"]),j=k.get("borderRadius")||0,L=fe("nodeGroup",Z8);if(!L)return;if(l.add(L),L.x=u.x||0,L.y=u.y||0,L.markRedraw(),vL(L).nodeWidth=f,vL(L).nodeHeight=m,u.isAboveViewRoot)return L;var B=fe("background",cde,c,syt);B&&z(L,B,C&&u.upperLabelHeight);var $=h.getModel("emphasis"),Y=$.get("focus"),G=$.get("blurScope"),W=$.get("disabled"),X=Y==="ancestor"?o.getAncestorsIndices():Y==="descendant"?o.getDescendantIndices():Y;if(C)uI(L)&&lw(L,!1),B&&(lw(B,!W),d.setItemGraphicEl(o.dataIndex,B),m8(B,X,G));else{var te=fe("content",cde,c,lyt);te&&ae(L,te),B.disableMorphing=!0,B&&uI(B)&&lw(B,!1),lw(L,!W),d.setItemGraphicEl(o.dataIndex,L);var re=h.getShallow("cursor");re&&te.attr("cursor",re),m8(L,X,G)}return L;function z(Le,we,be){var ge=$t(we);if(ge.dataIndex=o.dataIndex,ge.seriesIndex=n.seriesIndex,we.setShape({x:0,y:0,width:f,height:m,r:j}),y)le(we);else{we.invisible=!1;var he=o.getVisual("style"),Ge=he.stroke,je=fde(k);je.fill=Ge;var rt=$b(M);rt.fill=M.get("borderColor");var bt=$b(P);bt.fill=P.get("borderColor");var lt=$b(O);if(lt.fill=O.get("borderColor"),be){var cn=f-2*v;ee(we,Ge,he.opacity,{x:v,y:0,width:cn,height:A})}else we.removeTextContent();we.setStyle(je),we.ensureState("emphasis").style=rt,we.ensureState("blur").style=bt,we.ensureState("select").style=lt,Yw(we)}Le.add(we)}function ae(Le,we){var be=$t(we);be.dataIndex=o.dataIndex,be.seriesIndex=n.seriesIndex;var ge=Math.max(f-2*v,0),he=Math.max(m-2*v,0);if(we.culling=!0,we.setShape({x:v,y:v,width:ge,height:he,r:j}),y)le(we);else{we.invisible=!1;var Ge=o.getVisual("style"),je=Ge.fill,rt=fde(k);rt.fill=je,rt.decal=Ge.decal;var bt=$b(M),lt=$b(P),cn=$b(O);ee(we,je,Ge.opacity,null),we.setStyle(rt),we.ensureState("emphasis").style=bt,we.ensureState("blur").style=lt,we.ensureState("select").style=cn,Yw(we)}Le.add(we)}function le(Le){!Le.invisible&&a.push(Le)}function ee(Le,we,be,ge){var he=h.getModel(ge?hde:dde),Ge=Ya(h.get("name"),null),je=he.getShallow("show");os(Le,po(h,ge?hde:dde),{defaultText:je?Ge:null,inheritColor:we,defaultOpacity:be,labelFetcher:n,labelDataIndex:o.dataIndex});var rt=Le.getTextContent();if(rt){var bt=rt.style,lt=PY(bt.padding||0);ge&&(Le.setTextConfig({layoutRect:ge}),rt.disableLabelLayout=!0),rt.beforeUpdate=function(){var Ct=Math.max((ge?ge.width:Le.shape.width)-lt[1]-lt[3],0),En=Math.max((ge?ge.height:Le.shape.height)-lt[0]-lt[2],0);(bt.width!==Ct||bt.height!==En)&&rt.setStyle({width:Ct,height:En})},bt.truncateMinChar=2,bt.lineOverflow="truncate",ye(bt,ge,u);var cn=rt.getState("emphasis");ye(cn?cn.style:null,ge,u)}}function ye(Le,we,be){var ge=Le?Le.text:null;if(!we&&be.isLeafRoot&&ge!=null){var he=n.get("drillDownIcon",!0);Le.text=he?he+" "+ge:ge}}function fe(Le,we,be,ge){var he=_!=null&&t[Le][_],Ge=i[Le];return he?(t[Le][_]=null,Ce(Ge,he)):y||(he=new we,he instanceof Yu&&(he.z2=dyt(be,ge)),at(Ge,he)),e[Le][w]=he}function Ce(Le,we){var be=Le[w]={};we instanceof Z8?(be.oldX=we.x,be.oldY=we.y):be.oldShape=Ie({},we.shape)}function at(Le,we){var be=Le[w]={},ge=o.parentNode,he=we instanceof Lt;if(ge&&(!r||r.direction==="drillDown")){var Ge=0,je=0,rt=i.background[ge.getRawIndex()];!r&&rt&&rt.oldShape&&(Ge=rt.oldShape.width,je=rt.oldShape.height),he?(be.oldX=0,be.oldY=je):be.oldShape={x:Ge,y:je,width:0,height:0}}be.fadein=!he}}function dyt(n,e){return n*oyt+e}var TI=Z,hyt=It,yL=-1,fo=function(){function n(e){var t=e.mappingMethod,r=e.type,i=this.option=Rt(e);this.type=r,this.mappingMethod=t,this._normalizeData=gyt[t];var a=n.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(aV(i),fyt(i)):t==="category"?i.categories?pyt(i):aV(i,!0):(vl(t!=="linear"||i.dataExtent),aV(i))}return n.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},n.prototype.getNormalizer=function(){return ct(this._normalizeData,this)},n.listVisualTypes=function(){return In(n.visualHandlers)},n.isValidType=function(e){return n.visualHandlers.hasOwnProperty(e)},n.eachVisual=function(e,t,r){It(e)?Z(e,t,r):t.call(r,e)},n.mapVisual=function(e,t,r){var i,a=Fe(e)?[]:It(e)?{}:(i=!0,null);return n.eachVisual(e,function(o,s){var l=t.call(r,o,s);i?a=l:a[s]=l}),a},n.retrieveVisuals=function(e){var t={},r;return e&&TI(n.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},n.prepareVisualTypes=function(e){if(Fe(e))e=e.slice();else if(hyt(e)){var t=[];TI(e,function(r,i){t.push(i)}),e=t}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},n.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},n.findPieceIndex=function(e,t,r){for(var i,a=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||it(l)&&l===e+"")return o;r&&h(l,o)}}for(var o=0,s=t.length;o<s;o++){var c=t[o],u=c.interval,d=c.close;if(u){if(u[0]===-1/0){if(aR(d[1],e,u[1]))return o}else if(u[1]===1/0){if(aR(d[0],u[0],e))return o}else if(aR(d[0],u[0],e)&&aR(d[1],e,u[1]))return o;r&&h(u[0],o),r&&h(u[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function h(f,m){var v=Math.abs(f-e);v<a&&(a=v,i=m)}},n.visualHandlers={color:{applyVisual:Sk("color"),getColorMapper:function(){var e=this.option;return ct(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),sC.call(this,t)}:function(t,r,i){var a=!!i;return!r&&(t=this._normalizeData(t)),i=$U(t,e.parsedVisual,i),a?i:Ag(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Ag($U(e,this.option.parsedVisual),"rgba")},category:sC,piecewise:function(e,t){var r=J8.call(this,t);return r==null&&(r=Ag($U(e,this.option.parsedVisual),"rgba")),r},fixed:Bb}},colorHue:iR(function(e,t){return IC(e,t)}),colorSaturation:iR(function(e,t){return IC(e,null,t)}),colorLightness:iR(function(e,t){return IC(e,null,null,t)}),colorAlpha:iR(function(e,t){return z2(e,t)}),decal:{applyVisual:Sk("decal"),_normalizedToVisual:{linear:null,category:sC,piecewise:null,fixed:null}},opacity:{applyVisual:Sk("opacity"),_normalizedToVisual:Q8([0,1])},liftZ:{applyVisual:Sk("liftZ"),_normalizedToVisual:{linear:Bb,category:Bb,piecewise:Bb,fixed:Bb}},symbol:{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:pde,category:sC,piecewise:function(e,t){var r=J8.call(this,t);return r==null&&(r=pde.call(this,e)),r},fixed:Bb}},symbolSize:{applyVisual:Sk("symbolSize"),_normalizedToVisual:Q8([0,1])}},n}();function fyt(n){var e=n.pieceList;n.hasSpecialVisual=!1,Z(e,function(t,r){t.originIndex=r,t.visual!=null&&(n.hasSpecialVisual=!0)})}function pyt(n){var e=n.categories,t=n.categoryMap={},r=n.visual;if(TI(e,function(o,s){t[o]=s}),!Fe(r)){var i=[];It(r)?TI(r,function(o,s){var l=t[s];i[l??yL]=o}):i[yL]=r,r=JAe(n,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function aV(n,e){var t=n.visual,r=[];It(t)?TI(t,function(a){r.push(a)}):t!=null&&r.push(t);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(n.type)&&(r[1]=r[0]),JAe(n,r)}function iR(n){return{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("color",n(t("color"),i))},_normalizedToVisual:Q8([0,1])}}function pde(n){var e=this.option.visual;return e[Math.round(yr(n,[0,1],[0,e.length-1],!0))]||{}}function Sk(n){return function(e,t,r){r(n,this.mapValueToVisual(e))}}function sC(n){var e=this.option.visual;return e[this.option.loop&&n!==yL?n%e.length:n]}function Bb(){return this.option.visual[0]}function Q8(n){return{linear:function(e){return yr(e,n,this.option.visual,!0)},category:sC,piecewise:function(e,t){var r=J8.call(this,t);return r==null&&(r=yr(e,n,this.option.visual,!0)),r},fixed:Bb}}function J8(n){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=fo.findPieceIndex(n,t),i=t[r];if(i&&i.visual)return i.visual[this.type]}}function JAe(n,e){return n.visual=e,n.type==="color"&&(n.parsedVisual=$e(e,function(t){var r=Uc(t);return r||[0,0,0,1]})),e}var gyt={linear:function(n){return yr(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var e=this.option.pieceList,t=fo.findPieceIndex(n,e,!0);if(t!=null)return yr(t,[0,e.length-1],[0,1],!0)},category:function(n){var e=this.option.categories?this.option.categoryMap[n]:n;return e??yL},fixed:pa};function aR(n,e,t){return n?e<=t:e<t}var myt="itemStyle",eke=Gn();const vyt={seriesType:"treemap",reset:function(n){var e=n.getData().tree,t=e.root;t.isRemoved()||tke(t,{},n.getViewRoot().getAncestors(),n)}};function tke(n,e,t,r){var i=n.getModel(),a=n.getLayout(),o=n.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(myt),l=yyt(s,e,r),c=o.ensureUniqueItemVisual(n.dataIndex,"style"),u=s.get("borderColor"),d=s.get("borderColorSaturation"),h;d!=null&&(h=gde(l),u=byt(d,h)),c.stroke=u;var f=n.viewChildren;if(!f||!f.length)h=gde(l),c.fill=h;else{var m=wyt(n,i,a,s,l,f);Z(f,function(v,y){if(v.depth>=t.length||v===t[v.depth]){var w=xyt(i,l,v,y,m,r);tke(v,w,t,r)}})}}}function yyt(n,e,t){var r=Ie({},e),i=t.designatedVisualItemStyle;return Z(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=n.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function gde(n){var e=oV(n,"color");if(e){var t=oV(n,"colorAlpha"),r=oV(n,"colorSaturation");return r&&(e=IC(e,null,null,r)),t&&(e=z2(e,t)),e}}function byt(n,e){return e!=null?IC(e,null,null,n):null}function oV(n,e){var t=n[e];if(t!=null&&t!=="none")return t}function wyt(n,e,t,r,i,a){if(!(!a||!a.length)){var o=sV(e,"color")||i.color!=null&&i.color!=="none"&&(sV(e,"colorAlpha")||sV(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),c=t.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),d={type:o.name,dataExtent:c,visual:o.range};d.type==="color"&&(u==="index"||u==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var h=new fo(d);return eke(h).drColorMappingBy=u,h}}}function sV(n,e){var t=n.get(e);return Fe(t)&&t.length?{name:e,range:t}:null}function xyt(n,e,t,r,i,a){var o=Ie({},e);if(i){var s=i.type,l=s==="color"&&eke(i).drColorMappingBy,c=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(n.get("visualDimension"));o[s]=i.mapValueToVisual(c)}return o}var EI=Math.max,bL=Math.min,mde=Ro,qK=Z,nke=["itemStyle","borderWidth"],_yt=["itemStyle","gapWidth"],Syt=["upperLabel","show"],Tyt=["upperLabel","height"];const Eyt={seriesType:"treemap",reset:function(n,e,t,r){var i=t.getWidth(),a=t.getHeight(),o=n.option,s=Za(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],c=Ze(mde(s.width,l[0]),i),u=Ze(mde(s.height,l[1]),a),d=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],f=SI(r,h,n),m=d==="treemapRender"||d==="treemapMove"?r.rootRect:null,v=n.getViewRoot(),y=XAe(v);if(d!=="treemapMove"){var w=d==="treemapZoomToNode"?Myt(n,f,v,c,u):m?[m.width,m.height]:[c,u],_=o.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var T={squareRatio:o.squareRatio,sort:_,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var A={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};v.setLayout(A),rke(v,T,!1,0),A=v.getLayout(),qK(y,function(k,M){var P=(y[M+1]||v).getValue();k.setLayout(Ie({dataExtent:[P,P],borderWidth:0,upperHeight:0},A))})}var C=n.getData().tree.root;C.setLayout(Pyt(s,m,f),!0),n.setLayoutInfo(s),ike(C,new an(-s.x,-s.y,i,a),y,v,0)}};function rke(n,e,t,r){var i,a;if(!n.isRemoved()){var o=n.getLayout();i=o.width,a=o.height;var s=n.getModel(),l=s.get(nke),c=s.get(_yt)/2,u=ake(s),d=Math.max(l,u),h=l-c,f=d-c;n.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0),i=EI(i-2*h,0),a=EI(a-h-f,0);var m=i*a,v=Ayt(n,s,m,e,t,r);if(v.length){var y={x:h,y:f,width:i,height:a},w=bL(i,a),_=1/0,T=[];T.area=0;for(var A=0,C=v.length;A<C;){var k=v[A];T.push(k),T.area+=k.getLayout().area;var M=Iyt(T,w,e.squareRatio);M<=_?(A++,_=M):(T.area-=T.pop().getLayout().area,vde(T,w,y,c,!1),w=bL(y.width,y.height),T.length=T.area=0,_=1/0)}if(T.length&&vde(T,w,y,c,!0),!t){var P=s.get("childrenVisibleMin");P!=null&&m<P&&(t=!0)}for(var A=0,C=v.length;A<C;A++)rke(v[A],e,t,r+1)}}}function Ayt(n,e,t,r,i,a){var o=n.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return n.viewChildren=[];o=gr(o,function(f){return!f.isRemoved()}),Cyt(o,s);var c=Dyt(e,o,s);if(c.sum===0)return n.viewChildren=[];if(c.sum=kyt(e,t,c.sum,s,o),c.sum===0)return n.viewChildren=[];for(var u=0,d=o.length;u<d;u++){var h=o[u].getValue()/c.sum*t;o[u].setLayout({area:h})}return l&&(o.length&&n.setLayout({isLeafRoot:!0},!0),o.length=0),n.viewChildren=o,n.setLayout({dataExtent:c.dataExtent},!0),o}function kyt(n,e,t,r,i){if(!r)return t;for(var a=n.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var c=i[r==="asc"?o-l-1:l].getValue();c/t*e<a&&(s=l,t-=c)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),t}function Cyt(n,e){return e&&n.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i}),n}function Dyt(n,e,t){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=n.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],qK(e,function(l){var c=l.getValue(o);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:r,dataExtent:s}}function Iyt(n,e,t){for(var r=0,i=1/0,a=0,o=void 0,s=n.length;a<s;a++)o=n[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=n.area*n.area,c=e*e*t;return l?EI(c*r/l,l/(c*i)):1/0}function vde(n,e,t,r,i){var a=e===t.width?0:1,o=1-a,s=["x","y"],l=["width","height"],c=t[s[a]],u=e?n.area/e:0;(i||u>t[l[o]])&&(u=t[l[o]]);for(var d=0,h=n.length;d<h;d++){var f=n[d],m={},v=u?f.getLayout().area/u:0,y=m[l[o]]=EI(u-2*r,0),w=t[s[a]]+t[l[a]]-c,_=d===h-1||w<v?w:v,T=m[l[a]]=EI(_-2*r,0);m[s[o]]=t[s[o]]+bL(r,y/2),m[s[a]]=c+bL(r,T/2),c+=_,f.setLayout(m,!0)}t[s[o]]+=u,t[l[o]]-=u}function Myt(n,e,t,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===t)return o;for(var s,l=r*i,c=l*n.option.zoomToNodeRatio;s=a.parentNode;){for(var u=0,d=s.children,h=0,f=d.length;h<f;h++)u+=d[h].getValue();var m=a.getValue();if(m===0)return o;c*=u/m;var v=s.getModel(),y=v.get(nke),w=Math.max(y,ake(v));c+=4*y*y+(3*y+w)*Math.pow(c,.5),c>Ise&&(c=Ise),a=s}c<l&&(c=l);var _=Math.pow(c/l,.5);return[r*_,i*_]}function Pyt(n,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var i=t.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:n.width/2-o[0],y:n.height/2-o[1]}}function ike(n,e,t,r,i){var a=n.getLayout(),o=t[i],s=o&&o===n;if(!(o&&!s||i===t.length&&n!==r)){n.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new an(e.x-a.x,e.y-a.y,e.width,e.height);qK(n.viewChildren||[],function(c){ike(c,l,t,r,i+1)})}}function ake(n){return n.get(Syt)?n.get(Tyt):0}function Oyt(n){n.registerSeriesModel(Qvt),n.registerChartView(cyt),n.registerVisual(vyt),n.registerLayout(Eyt),Zvt(n)}function Ryt(n){var e=n.findComponents({mainType:"legend"});!e||!e.length||n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),c=l.getShallow("category");if(c!=null){Jn(c)&&(c=o[c]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(c))return!1}return!0})})}function Nyt(n){var e={};n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t.getColorFromPalette(s,e)),r.setItemVisual(o,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],d=0;d<u.length;d++){var h=l.getShallow(u[d],!0);h!=null&&r.setItemVisual(o,u[d],h)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){it(l)&&(l=a["ec-"+l]);var c=r.getItemVisual(l,"style"),u=i.ensureUniqueItemVisual(o,"style");Ie(u,c);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++)i.setItemVisual(o,d[h],r.getItemVisual(l,d[h]))}})})}function oR(n){return n instanceof Array||(n=[n,n]),n}function Lyt(n){n.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=oR(e.get("edgeSymbol")),a=oR(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=t.getEdgeByIndex(o),c=oR(s.getShallow("symbol",!0)),u=oR(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),h=r.ensureUniqueItemVisual(o,"style");switch(Ie(h,d),h.stroke){case"source":{var f=l.node1.getVisual("style");h.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");h.stroke=f&&f.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var eG="-->",aF=function(n){return n.get("autoCurveness")||null},oke=function(n,e){var t=aF(n),r=20,i=[];if(Jn(t))r=t;else if(Fe(t)){n.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));n.__curvenessList=i},AI=function(n,e,t){var r=[n.id,n.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(eG)},ske=function(n){var e=n.split(eG);return[e[0],e[2],e[1]].join(eG)},jyt=function(n,e){var t=AI(n.node1,n.node2,e);return e.__edgeMap[t]},Fyt=function(n,e){var t=tG(AI(n.node1,n.node2,e),e),r=tG(AI(n.node2,n.node1,e),e);return t+r},tG=function(n,e){var t=e.__edgeMap;return t[n]?t[n].length:0};function $yt(n){aF(n)&&(n.__curvenessList=[],n.__edgeMap={},oke(n))}function Byt(n,e,t,r){if(aF(t)){var i=AI(n,e,t),a=t.__edgeMap,o=a[ske(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function WK(n,e,t,r){var i=aF(e),a=Fe(i);if(!i)return null;var o=jyt(n,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var c=Fyt(n,e);oke(e,c),n.lineStyle=n.lineStyle||{};var u=AI(n.node1,n.node2,e),d=e.__curvenessList,h=a||c%2?0:1;if(o.isForward)return d[h+s];var f=ske(u),m=tG(f,e),v=d[s+m+h];return r?a?i&&i[0]===0?(m+h)%2?v:-v:((m%2?0:1)+h)%2?v:-v:(m+h)%2?v:-v:d[s+m+h]}function lke(n){var e=n.coordinateSystem;if(!(e&&e.type!=="view")){var t=n.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),YK(t,n)}}function YK(n,e){n.eachEdge(function(t,r){var i=Df(t.getModel().get(["lineStyle","curveness"]),-WK(t,e,r,!0),0),a=Tg(t.node1.getLayout()),o=Tg(t.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),t.setLayout(s)})}function Uyt(n,e){n.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var a=t.getData(),o=[];Z(i.dimensions,function(h){o=o.concat(a.mapDimensionsAll(h))});for(var s=0;s<a.count();s++){for(var l=[],c=!1,u=0;u<o.length;u++){var d=a.get(o[u],s);isNaN(d)||(c=!0),l.push(d)}c?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}YK(a.graph,t)}else(!r||r==="none")&&lke(t)})}function lC(n){var e=n.coordinateSystem;if(e.type!=="view")return 1;var t=n.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*t+1;return a/r}function cC(n){var e=n.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var yde=Math.PI,lV=[];function KK(n,e,t,r){var i=n.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=n.getData(),s=o.graph,l=a.width/2+a.x,c=a.height/2+a.y,u=Math.min(a.width,a.height)/2,d=o.count();if(o.setLayout({cx:l,cy:c}),!!d){if(t){var h=i.pointToData(r),f=h[0],m=h[1],v=[f-l,m-c];UT(v,v),KR(v,v,u),t.setLayout([l+v[0],c+v[1]],!0);var y=n.get(["circular","rotateLabel"]);cke(t,y,l,c)}Vyt[e](n,s,o,u,l,c,d),s.eachEdge(function(w,_){var T=Df(w.getModel().get(["lineStyle","curveness"]),WK(w,n,_),0),A=Tg(w.node1.getLayout()),C=Tg(w.node2.getLayout()),k,M=(A[0]+C[0])/2,P=(A[1]+C[1])/2;+T&&(T*=3,k=[l*T+M*(1-T),c*T+P*(1-T)]),w.setLayout([A,C,k])})}}}var Vyt={value:function(n,e,t,r,i,a,o){var s=0,l=t.getSum("value"),c=Math.PI*2/(l||o);e.eachNode(function(u){var d=u.getValue("value"),h=c*(l?d:1)/2;s+=h,u.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=h})},symbolSize:function(n,e,t,r,i,a,o){var s=0;lV.length=o;var l=lC(n);e.eachNode(function(d){var h=cC(d);isNaN(h)&&(h=2),h<0&&(h=0),h*=l;var f=Math.asin(h/2/r);isNaN(f)&&(f=yde/2),lV[d.dataIndex]=f,s+=f*2});var c=(2*yde-s)/o/2,u=0;e.eachNode(function(d){var h=c+lV[d.dataIndex];u+=h,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([r*Math.cos(u)+i,r*Math.sin(u)+a]),u+=h})}};function cke(n,e,t,r){var i=n.getGraphicEl();if(i){var a=n.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=n.getLayout(),c=Math.atan2(l[1]-r,l[0]-t);c<0&&(c=Math.PI*2+c);var u=l[0]<t;u&&(c=c-Math.PI);var d=u?"left":"right";s.setTextConfig({rotation:-c,position:d,origin:"center"});var h=s.ensureState("emphasis");Ie(h.textConfig||(h.textConfig={}),{position:d})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function zyt(n){n.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&KK(e,"symbolSize")})}var pS=UH;function Hyt(n,e,t){for(var r=n,i=e,a=t.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],c=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var d=r[u];d.p||(d.p=ox(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=Tg(d.p),d.edges=null}var h=t.friction==null?.6:t.friction,f=h,m,v;return{warmUp:function(){f=h*.8},setFixed:function(y){r[y].fixed=!0},setUnfixed:function(y){r[y].fixed=!1},beforeStep:function(y){m=y},afterStep:function(y){v=y},step:function(y){m&&m(r,i);for(var w=[],_=r.length,T=0;T<i.length;T++){var A=i[T];if(!A.ignoreForceLayout){var C=A.n1,k=A.n2;ow(w,k.p,C.p);var M=VH(w)-A.d,P=k.w/(C.w+k.w);isNaN(P)&&(P=0),UT(w,w),!C.fixed&&pS(C.p,C.p,w,P*M*f),!k.fixed&&pS(k.p,k.p,w,-(1-P)*M*f)}}for(var T=0;T<_;T++){var O=r[T];O.fixed||(ow(w,l,O.p),pS(O.p,O.p,w,c*f))}for(var T=0;T<_;T++)for(var C=r[T],j=T+1;j<_;j++){var k=r[j];ow(w,k.p,C.p);var M=VH(w);M===0&&(bot(w,Math.random()-.5,Math.random()-.5),M=1);var L=(C.rep+k.rep)/M/M;!C.fixed&&pS(C.pp,C.pp,w,L),!k.fixed&&pS(k.pp,k.pp,w,-L)}for(var B=[],T=0;T<_;T++){var O=r[T];O.fixed||(ow(B,O.p,O.pp),pS(O.p,O.p,B,f),al(O.pp,O.p))}f=f*.992;var $=f<.01;v&&v(r,i,$),y&&y($)}}}function Gyt(n){n.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(T){var A=a.getId(T);a.setItemLayout(T,r[A]||[NaN,NaN])}):!l||l==="none"?lke(e):l==="circular"&&KK(e,"value");var c=a.getDataExtent("value"),u=o.getDataExtent("value"),d=s.get("repulsion"),h=s.get("edgeLength"),f=Fe(d)?d:[d,d],m=Fe(h)?h:[h,h];m=[m[1],m[0]];var v=a.mapArray("value",function(T,A){var C=a.getItemLayout(A),k=yr(T,c,f);return isNaN(k)&&(k=(f[0]+f[1])/2),{w:k,rep:k,fixed:a.getItemModel(A).get("fixed"),p:!C||isNaN(C[0])||isNaN(C[1])?null:C}}),y=o.mapArray("value",function(T,A){var C=i.getEdgeByIndex(A),k=yr(T,u,m);isNaN(k)&&(k=(m[0]+m[1])/2);var M=C.getModel(),P=Df(C.getModel().get(["lineStyle","curveness"]),-WK(C,e,A,!0),0);return{n1:v[C.node1.dataIndex],n2:v[C.node2.dataIndex],d:k,curveness:P,ignoreForceLayout:M.get("ignoreForceLayout")}}),w=t.getBoundingRect(),_=Hyt(v,y,{rect:w,gravity:s.get("gravity"),friction:s.get("friction")});_.beforeStep(function(T,A){for(var C=0,k=T.length;C<k;C++)T[C].fixed&&al(T[C].p,i.getNodeByIndex(C).getLayout())}),_.afterStep(function(T,A,C){for(var k=0,M=T.length;k<M;k++)T[k].fixed||i.getNodeByIndex(k).setLayout(T[k].p),r[a.getId(k)]=T[k].p;for(var k=0,M=A.length;k<M;k++){var P=A[k],O=i.getEdgeByIndex(k),j=P.n1.p,L=P.n2.p,B=O.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],al(B[0],j),al(B[1],L),+P.curveness&&(B[2]=[(j[0]+L[0])/2-(j[1]-L[1])*P.curveness,(j[1]+L[1])/2-(L[0]-j[0])*P.curveness]),O.setLayout(B)}}),e.forceLayout=_,e.preservedPoints=r,_.step()}else e.forceLayout=null})}function qyt(n,e,t){var r=Ie(n.getBoxLayoutParams(),{aspect:t});return Za(r,{width:e.getWidth(),height:e.getHeight()})}function Wyt(n,e){var t=[];return n.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(y){var w=a.getItemModel(y);return[+w.get("x"),+w.get("y")]}),s=[],l=[];P5(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=qyt(r,e,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var d=l[0]-s[0],h=l[1]-s[1],f=u.width,m=u.height,v=r.coordinateSystem=new UM;v.zoomLimit=r.get("scaleLimit"),v.setBoundingRect(s[0],s[1],d,h),v.setViewRect(u.x,u.y,f,m),v.setCenter(r.get("center"),e),v.setZoom(r.get("zoom")),t.push(v)}}),t}var bde=co.prototype,cV=AM.prototype,uke=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(uke);function uV(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var Yyt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new uke},e.prototype.buildPath=function(t,r){uV(r)?bde.buildPath.call(this,t,r):cV.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return uV(this.shape)?bde.pointAt.call(this,t):cV.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=uV(r)?[r.x2-r.x1,r.y2-r.y1]:cV.tangentAt.call(this,t);return UT(i,i)},e}(wn),dV=["fromSymbol","toSymbol"];function wde(n){return"_"+n+"Type"}function xde(n,e,t){var r=e.getItemVisual(t,n);if(!r||r==="none")return r;var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=JT(i),c=ux(o||0,l);return r+l+c+(a||"")+(s||"")}function _de(n,e,t){var r=e.getItemVisual(t,n);if(!(!r||r==="none")){var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=JT(i),c=ux(o||0,l),u=Pa(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,u.name=n,u}}function Kyt(n){var e=new Yyt({name:"line",subPixelOptimize:!0});return nG(e.shape,n),e}function nG(n,e){n.x1=e[0][0],n.y1=e[0][1],n.x2=e[1][0],n.y2=e[1][1],n.percent=1;var t=e[2];t?(n.cpx1=t[0],n.cpy1=t[1]):(n.cpx1=NaN,n.cpy1=NaN)}var XK=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createLine(t,r,i),a}return e.prototype._createLine=function(t,r,i){var a=t.hostModel,o=t.getItemLayout(r),s=Kyt(o);s.shape.percent=0,Si(s,{shape:{percent:1}},a,r),this.add(s),Z(dV,function(l){var c=_de(l,t,r);this.add(c),this[wde(l)]=xde(l,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};nG(l.shape,s),tr(o,l,a,r),Z(dV,function(c){var u=xde(c,t,r),d=wde(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=_de(c,t,r);this.add(h)}this[d]=u},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,c=i&&i.selectLineStyle,u=i&&i.labelStatesModels,d=i&&i.emphasisDisabled,h=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var m=t.getItemModel(r),v=m.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),c=m.getModel(["select","lineStyle"]).getLineStyle(),d=v.get("disabled"),h=v.get("focus"),f=v.get("blurScope"),u=po(m)}var y=t.getItemVisual(r,"style"),w=y.stroke;o.useStyle(y),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=c,Z(dV,function(k){var M=this.childOfName(k);if(M){M.setColor(w),M.style.opacity=y.opacity;for(var P=0;P<yl.length;P++){var O=yl[P],j=o.getState(O);if(j){var L=j.style||{},B=M.ensureState(O),$=B.style||(B.style={});L.stroke!=null&&($[M.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&($.opacity=L.opacity)}}M.markRedraw()}},this);var _=a.getRawValue(r);os(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(k,M){return a.getFormattedLabel(k,M,t.dataType)}},inheritColor:w||"#000",defaultOpacity:y.opacity,defaultText:(_==null?t.getName(r):isFinite(_)?na(_):_)+""});var T=this.getTextContent();if(T){var A=u.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=A.get("position")||"middle";var C=A.get("distance");Fe(C)||(C=[C,C]),T.__labelDistance=C}this.setTextConfig({position:null,local:!0,inside:!1}),Vi(this,h,f,d)},e.prototype.highlight=function(){Bg(this)},e.prototype.downplay=function(){Ug(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");nG(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=ow([],d,u);UT(h,h);function f(j,L){var B=j.__specifiedRotation;if(B==null){var $=l.tangentAt(L);j.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2($[1],$[0]))}else j.attr("rotation",B)}if(r&&(r.setPosition(u),f(r,0),r.scaleX=r.scaleY=o*c,r.markRedraw()),i&&(i.setPosition(d),f(i,1),i.scaleX=i.scaleY=o*c,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,v=void 0,y=a.__labelDistance,w=y[0]*o,_=y[1]*o,T=c/2,A=l.tangentAt(T),C=[A[1],-A[0]],k=l.pointAt(T);C[1]>0&&(C[0]=-C[0],C[1]=-C[1]);var M=A[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var P=-Math.atan2(A[1],A[0]);d[0]<u[0]&&(P=Math.PI+P),a.rotation=P}var O=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":O=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":O=_,v="top";break;default:O=0,v="middle"}switch(a.__position){case"end":a.x=h[0]*w+d[0],a.y=h[1]*_+d[1],m=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":a.x=-h[0]*w+u[0],a.y=-h[1]*_+u[1],m=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=w*M+u[0],a.y=u[1]+O,m=A[0]<0?"right":"left",a.originX=-w*M,a.originY=-O;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=k[0],a.y=k[1]+O,m="center",a.originY=-O;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-w*M+d[0],a.y=d[1]+O,m=A[0]>=0?"right":"left",a.originX=w*M,a.originY=-O;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||m})}},e}(Lt),ZK=function(){function n(e){this.group=new Lt,this._LineCtor=e||XK}return n.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var o=Sde(e);e.diff(a).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},n.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Sde(e),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!Xyt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(hV(a)){var o=new this._LineCtor(t,i,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(e){Fy(this._progressiveEls||this.group,e)},n.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(hV(i)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},n.prototype._doUpdate=function(e,t,r,i,a){var o=e.getItemGraphicEl(r);if(!hV(t.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(t,i,a):o=new this._LineCtor(t,i,a),t.setItemGraphicEl(i,o),this.group.add(o)},n}();function Xyt(n){return n.animators&&n.animators.length>0}function Sde(n){var e=n.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:po(e)}}function Tde(n){return isNaN(n[0])||isNaN(n[1])}function hV(n){return n&&!Tde(n[0])&&!Tde(n[1])}var fV=[],pV=[],gV=[],gS=Po,mV=xw,Ede=Math.abs;function Ade(n,e,t){for(var r=n[0],i=n[1],a=n[2],o=1/0,s,l=t*t,c=.1,u=.1;u<=.9;u+=.1){fV[0]=gS(r[0],i[0],a[0],u),fV[1]=gS(r[1],i[1],a[1],u);var d=Ede(mV(fV,e)-l);d<o&&(o=d,s=u)}for(var h=0;h<32;h++){var f=s+c;pV[0]=gS(r[0],i[0],a[0],s),pV[1]=gS(r[1],i[1],a[1],s),gV[0]=gS(r[0],i[0],a[0],f),gV[1]=gS(r[1],i[1],a[1],f);var d=mV(pV,e)-l;if(Ede(d)<.01)break;var m=mV(gV,e)-l;c/=2,d<0?m>=0?s=s+c:s=s-c:m>=0?s=s-c:s=s+c}return s}function vV(n,e){var t=[],r=iI,i=[[],[],[]],a=[[],[]],o=[];e/=2,n.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");c.__original||(c.__original=[Tg(c[0]),Tg(c[1])],c[2]&&c.__original.push(Tg(c[2])));var h=c.__original;if(c[2]!=null){if(al(i[0],h[0]),al(i[1],h[2]),al(i[2],h[1]),u&&u!=="none"){var f=cC(s.node1),m=Ade(i,h[0],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],m,t),i[0][1]=t[3],i[1][1]=t[4]}if(d&&d!=="none"){var f=cC(s.node2),m=Ade(i,h[1],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],m,t),i[1][1]=t[1],i[2][1]=t[2]}al(c[0],i[0]),al(c[1],i[2]),al(c[2],i[1])}else{if(al(a[0],h[0]),al(a[1],h[1]),ow(o,a[1],a[0]),UT(o,o),u&&u!=="none"){var f=cC(s.node1);UH(a[0],a[0],o,f*e)}if(d&&d!=="none"){var f=cC(s.node2);UH(a[1],a[1],o,-f*e)}al(c[0],a[0]),al(c[1],a[1])}})}function kde(n){return n.type==="view"}var Zyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new NM,a=new ZK,o=this.group;this._controller=new BM(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(t,r,i){var a=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(kde(o)){var u={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?c.attr(u):tr(c,u,t)}vV(t.getGraph(),lC(t));var d=t.getData();s.updateData(d);var h=t.getEdgeData();l.updateData(h),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var f=t.forceLayout,m=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,m);var v=t.get("layout");d.graph.eachNode(function(T){var A=T.dataIndex,C=T.getGraphicEl(),k=T.getModel();if(C){C.off("drag").off("dragend");var M=k.get("draggable");M&&C.on("drag",function(O){switch(v){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,m),f.setFixed(A),d.setItemLayout(A,[C.x,C.y]);break;case"circular":d.setItemLayout(A,[C.x,C.y]),T.setLayout({fixed:!0},!0),KK(t,"symbolSize",T,[O.offsetX,O.offsetY]),a.updateLayout(t);break;case"none":default:d.setItemLayout(A,[C.x,C.y]),YK(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){f&&f.setUnfixed(A)}),C.setDraggable(M,!!k.get("cursor"));var P=k.get(["emphasis","focus"]);P==="adjacency"&&($t(C).focus=T.getAdjacentDataIndices())}}),d.graph.eachEdge(function(T){var A=T.getGraphicEl(),C=T.getModel().get(["emphasis","focus"]);A&&C==="adjacency"&&($t(A).focus={edge:[T.dataIndex],node:[T.node1.dataIndex,T.node2.dataIndex]})});var y=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),w=d.getLayout("cx"),_=d.getLayout("cy");d.graph.eachNode(function(T){cke(T,y,w,_)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var i=this;(function a(){t.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!nF(c,i,t)}),!kde(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){$K(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){BK(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(),vV(t.getGraph(),lC(t)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=lC(t);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(t){vV(t.getGraph(),lC(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Vr);function mS(n){return"_EC_"+n}var Qyt=function(){function n(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[mS(e)]){var i=new Ub(e,t);return i.hostGraph=this,this.nodes.push(i),r[mS(e)]=i,i}},n.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},n.prototype.getNodeById=function(e){return this._nodesMap[mS(e)]},n.prototype.addEdge=function(e,t,r){var i=this._nodesMap,a=this._edgesMap;if(Jn(e)&&(e=this.nodes[e]),Jn(t)&&(t=this.nodes[t]),e instanceof Ub||(e=i[mS(e)]),t instanceof Ub||(t=i[mS(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new dke(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),a[o]=s,s}},n.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},n.prototype.getEdge=function(e,t){e instanceof Ub&&(e=e.id),t instanceof Ub&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},n.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},n.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},n.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof Ub||(t=this._nodesMap[mS(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var s=[t];s.length;)for(var l=s.shift(),c=l[a],o=0;o<c.length;o++){var u=c[o],d=u.node1===l?u.node2:u.node1;if(!d.__visited){if(e.call(i,d,l))return;s.push(d),d.__visited=!0}}}},n.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(s){var l=i[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a},n.prototype.clone=function(){for(var e=new n(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},n}(),Ub=function(){function n(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},n.prototype.getTrajectoryDataIndices=function(){for(var e=pt(),t=pt(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,t.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),a.push(l.inEdges[c].node1)}for(s=0;s<o.length;){var u=o[s];s++,t.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),o.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},n}(),dke=function(){function n(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var e=pt(),t=pt();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},n}();function hke(n,e){return{getValue:function(t){var r=this[n][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[n][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[n][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[n][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[n][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][e].getRawIndex(this.dataIndex)}}}Oa(Ub,hke("hostGraph","data"));Oa(dke,hke("hostGraph","edgeData"));function fke(n,e,t,r,i){for(var a=new Qyt(r),o=0;o<n.length;o++)a.addNode(Ro(n[o].id,n[o].name,o),o);for(var s=[],l=[],c=0,o=0;o<e.length;o++){var u=e[o],d=u.source,h=u.target;a.addEdge(d,h,c)&&(l.push(u),s.push(Ro(Ya(u.id,null),d+" > "+h)),c++)}var f=t.get("coordinateSystem"),m;if(f==="cartesian2d"||f==="polar")m=rm(n,t);else{var v=IM.get(f),y=v?v.dimensions||[]:[];dn(y,"value")<0&&y.concat(["value"]);var w=PM(n,{coordDimensions:y,encodeDefine:t.getEncode()}).dimensions;m=new gl(w,t),m.initData(n)}var _=new gl(["value"],t);return _.initData(l,s),i&&i(m,_),YAe({mainData:m,struct:a,structAttr:"graph",datas:{node:m,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var Jyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new $M(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){n.prototype.mergeDefaultAndTheme.apply(this,arguments),Gw(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=this;if(a&&i){$yt(this);var s=fke(a,i,this,!0,l);return Z(s.edges,function(c){Byt(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(m){var v=o._categoriesModels,y=m.getShallow("category"),w=v[y];return w&&(w.parentModel=m.parentModel,m.parentModel=w),m});var d=br.prototype.getModel;function h(m,v){var y=d.call(this,m,v);return y.resolveParentPath=f,y}u.wrapMethod("getItemModel",function(m){return m.resolveParentPath=f,m.getModel=h,m});function f(m){if(m&&(m[0]==="label"||m[1]==="label")){var v=m.slice();return m[0]==="label"?v[0]="edgeLabel":m[1]==="label"&&(v[1]="edgeLabel"),v}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(t,i),s=a.graph.getEdgeByIndex(t),l=a.getName(s.node1.dataIndex),c=a.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),go("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var d=LTe({series:this,dataIndex:t,multipleSeries:r});return d},e.prototype._updateCategoriesData=function(){var t=$e(this.option.categories||[],function(i){return i.value!=null?i:Ie({value:0},i)}),r=new gl(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ai),e0t={type:"graphRoam",event:"graphRoam",update:"none"};function t0t(n){n.registerChartView(Zyt),n.registerSeriesModel(Jyt),n.registerProcessor(Ryt),n.registerVisual(Nyt),n.registerVisual(Lyt),n.registerLayout(Uyt),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,zyt),n.registerLayout(Gyt),n.registerCoordinateSystem("graphView",{dimensions:UM.dimensions,create:Wyt}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},pa),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},pa),n.registerAction(e0t,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=VK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var n0t=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),r0t=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new n0t},e.prototype.buildPath=function(t,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-i(l)*s*(s>=o/3?1:2),u=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,t.moveTo(c,u),t.lineTo(r.x+i(l)*s,r.y+a(l)*s),t.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),t.lineTo(r.x-i(l)*s,r.y-a(l)*s),t.lineTo(c,u)},e}(wn);function i0t(n,e){var t=n.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),o=Ze(t[0],e.getWidth()),s=Ze(t[1],e.getHeight()),l=Ze(n.get("radius"),a/2);return{cx:o,cy:s,r:l}}function sR(n,e){var t=n==null?"":n+"";return e&&(it(e)?t=e.replace("{value}",t):Et(e)&&(t=e(n))),t}var a0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),o=i0t(t,i);this._renderMain(t,r,i,a,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,a,o){var s=this.group,l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,d=t.getModel("axisLine"),h=d.get("roundCap"),f=h?pL:bl,m=d.get("show"),v=d.getModel("lineStyle"),y=v.get("width"),w=[c,u];HY(w,!l),c=w[0],u=w[1];for(var _=u-c,T=c,A=[],C=0;m&&C<a.length;C++){var k=Math.min(Math.max(a[C][0],0),1);u=c+_*k;var M=new f({shape:{startAngle:T,endAngle:u,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-y,r:o.r},silent:!0});M.setStyle({fill:a[C][1]}),M.setStyle(v.getLineStyle(["color","width"])),A.push(M),T=u}A.reverse(),Z(A,function(O){return s.add(O)});var P=function(O){if(O<=0)return a[0][1];var j;for(j=0;j<a.length;j++)if(a[j][0]>=O&&(j===0?0:a[j-1][0])<O)return a[j][1];return a[j-1][1]};this._renderTicks(t,r,i,P,o,c,u,l,y),this._renderTitleAndDetail(t,r,i,P,o),this._renderAnchor(t,o),this._renderPointer(t,r,i,P,o,c,u,l,y)},e.prototype._renderTicks=function(t,r,i,a,o,s,l,c,u){for(var d=this.group,h=o.cx,f=o.cy,m=o.r,v=+t.get("min"),y=+t.get("max"),w=t.getModel("splitLine"),_=t.getModel("axisTick"),T=t.getModel("axisLabel"),A=t.get("splitNumber"),C=_.get("splitNumber"),k=Ze(w.get("length"),m),M=Ze(_.get("length"),m),P=s,O=(l-s)/A,j=O/C,L=w.getModel("lineStyle").getLineStyle(),B=_.getModel("lineStyle").getLineStyle(),$=w.get("distance"),Y,G,W=0;W<=A;W++){if(Y=Math.cos(P),G=Math.sin(P),w.get("show")){var X=$?$+u:u,te=new co({shape:{x1:Y*(m-X)+h,y1:G*(m-X)+f,x2:Y*(m-k-X)+h,y2:G*(m-k-X)+f},style:L,silent:!0});L.stroke==="auto"&&te.setStyle({stroke:a(W/A)}),d.add(te)}if(T.get("show")){var X=T.get("distance")+$,re=sR(na(W/A*(y-v)+v),T.get("formatter")),z=a(W/A),ae=Y*(m-k-X)+h,le=G*(m-k-X)+f,ee=T.get("rotate"),ye=0;ee==="radial"?(ye=-P+2*Math.PI,ye>Math.PI/2&&(ye+=Math.PI)):ee==="tangential"?ye=-P-Math.PI/2:Jn(ee)&&(ye=ee*Math.PI/180),ye===0?d.add(new Yn({style:ri(T,{text:re,x:ae,y:le,verticalAlign:G<-.8?"top":G>.8?"bottom":"middle",align:Y<-.4?"left":Y>.4?"right":"center"},{inheritColor:z}),silent:!0})):d.add(new Yn({style:ri(T,{text:re,x:ae,y:le,verticalAlign:"middle",align:"center"},{inheritColor:z}),silent:!0,originX:ae,originY:le,rotation:ye}))}if(_.get("show")&&W!==A){var X=_.get("distance");X=X?X+u:u;for(var fe=0;fe<=C;fe++){Y=Math.cos(P),G=Math.sin(P);var Ce=new co({shape:{x1:Y*(m-X)+h,y1:G*(m-X)+f,x2:Y*(m-M-X)+h,y2:G*(m-M-X)+f},silent:!0,style:B});B.stroke==="auto"&&Ce.setStyle({stroke:a((W+fe/C)/A)}),d.add(Ce),P+=j}P-=j}else P+=O}},e.prototype._renderPointer=function(t,r,i,a,o,s,l,c,u){var d=this.group,h=this._data,f=this._progressEls,m=[],v=t.get(["pointer","show"]),y=t.getModel("progress"),w=y.get("show"),_=t.getData(),T=_.mapDimension("value"),A=+t.get("min"),C=+t.get("max"),k=[A,C],M=[s,l];function P(j,L){var B=_.getItemModel(j),$=B.getModel("pointer"),Y=Ze($.get("width"),o.r),G=Ze($.get("length"),o.r),W=t.get(["pointer","icon"]),X=$.get("offsetCenter"),te=Ze(X[0],o.r),re=Ze(X[1],o.r),z=$.get("keepAspect"),ae;return W?ae=Pa(W,te-Y/2,re-G,Y,G,null,z):ae=new r0t({shape:{angle:-Math.PI/2,width:Y,r:G,x:te,y:re}}),ae.rotation=-(L+Math.PI/2),ae.x=o.cx,ae.y=o.cy,ae}function O(j,L){var B=y.get("roundCap"),$=B?pL:bl,Y=y.get("overlap"),G=Y?y.get("width"):u/_.count(),W=Y?o.r-G:o.r-(j+1)*G,X=Y?o.r:o.r-j*G,te=new $({shape:{startAngle:s,endAngle:L,cx:o.cx,cy:o.cy,clockwise:c,r0:W,r:X}});return Y&&(te.z2=yr(_.get(T,j),[A,C],[100,0],!0)),te}(w||v)&&(_.diff(h).add(function(j){var L=_.get(T,j);if(v){var B=P(j,s);Si(B,{rotation:-((isNaN(+L)?M[0]:yr(L,k,M,!0))+Math.PI/2)},t),d.add(B),_.setItemGraphicEl(j,B)}if(w){var $=O(j,s),Y=y.get("clip");Si($,{shape:{endAngle:yr(L,k,M,Y)}},t),d.add($),f8(t.seriesIndex,_.dataType,j,$),m[j]=$}}).update(function(j,L){var B=_.get(T,j);if(v){var $=h.getItemGraphicEl(L),Y=$?$.rotation:s,G=P(j,Y);G.rotation=Y,tr(G,{rotation:-((isNaN(+B)?M[0]:yr(B,k,M,!0))+Math.PI/2)},t),d.add(G),_.setItemGraphicEl(j,G)}if(w){var W=f[L],X=W?W.shape.endAngle:s,te=O(j,X),re=y.get("clip");tr(te,{shape:{endAngle:yr(B,k,M,re)}},t),d.add(te),f8(t.seriesIndex,_.dataType,j,te),m[j]=te}}).execute(),_.each(function(j){var L=_.getItemModel(j),B=L.getModel("emphasis"),$=B.get("focus"),Y=B.get("blurScope"),G=B.get("disabled");if(v){var W=_.getItemGraphicEl(j),X=_.getItemVisual(j,"style"),te=X.fill;if(W instanceof Fo){var re=W.style;W.useStyle(Ie({image:re.image,x:re.x,y:re.y,width:re.width,height:re.height},X))}else W.useStyle(X),W.type!=="pointer"&&W.setColor(te);W.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),W.style.fill==="auto"&&W.setStyle("fill",a(yr(_.get(T,j),k,[0,1],!0))),W.z2EmphasisLift=0,as(W,L),Vi(W,$,Y,G)}if(w){var z=m[j];z.useStyle(_.getItemVisual(j,"style")),z.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),z.z2EmphasisLift=0,as(z,L),Vi(z,$,Y,G)}}),this._progressEls=m)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),c=i.get("keepAspect"),u=Pa(s,r.cx-o/2+Ze(l[0],r.r),r.cy-o/2+Ze(l[1],r.r),o,o,null,c);u.z2=i.get("showAbove")?1:0,u.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,i,a,o){var s=this,l=t.getData(),c=l.mapDimension("value"),u=+t.get("min"),d=+t.get("max"),h=new Lt,f=[],m=[],v=t.isAnimationEnabled(),y=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(w){f[w]=new Yn({silent:!0}),m[w]=new Yn({silent:!0})}).update(function(w,_){f[w]=s._titleEls[_],m[w]=s._detailEls[_]}).execute(),l.each(function(w){var _=l.getItemModel(w),T=l.get(c,w),A=new Lt,C=a(yr(T,[u,d],[0,1],!0)),k=_.getModel("title");if(k.get("show")){var M=k.get("offsetCenter"),P=o.cx+Ze(M[0],o.r),O=o.cy+Ze(M[1],o.r),j=f[w];j.attr({z2:y?0:2,style:ri(k,{x:P,y:O,text:l.getName(w),align:"center",verticalAlign:"middle"},{inheritColor:C})}),A.add(j)}var L=_.getModel("detail");if(L.get("show")){var B=L.get("offsetCenter"),$=o.cx+Ze(B[0],o.r),Y=o.cy+Ze(B[1],o.r),G=Ze(L.get("width"),o.r),W=Ze(L.get("height"),o.r),X=t.get(["progress","show"])?l.getItemVisual(w,"style").fill:C,j=m[w],te=L.get("formatter");j.attr({z2:y?0:2,style:ri(L,{x:$,y:Y,text:sR(T,te),width:isNaN(G)?null:G,height:isNaN(W)?null:W,align:"center",verticalAlign:"middle"},{inheritColor:X})}),B1e(j,{normal:L},T,function(z){return sR(z,te)}),v&&U1e(j,w,l,t,{getFormattedLabel:function(z,ae,le,ee,ye,fe){return sR(fe?fe.interpolatedValue:T,te)}}),A.add(j)}h.add(A)}),this.group.add(h),this._titleEls=f,this._detailEls=m},e.type="gauge",e}(Vr),o0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return tE(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(ai);function s0t(n){n.registerChartView(a0t),n.registerSeriesModel(o0t)}var l0t=["itemStyle","opacity"],c0t=function(n){_e(e,n);function e(t,r){var i=n.call(this)||this,a=i,o=new xl,s=new Yn;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var a=this,o=t.hostModel,s=t.getItemModel(r),l=t.getItemLayout(r),c=s.getModel("emphasis"),u=s.get(l0t);u=u??1,i||lh(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,Si(a,{style:{opacity:u}},o,r)):tr(a,{style:{opacity:u},shape:{points:l.points}},o,r),as(a,s),this._updateLabel(t,r),Vi(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=t.hostModel,l=t.getItemModel(r),c=t.getItemLayout(r),u=c.label,d=t.getItemVisual(r,"style"),h=d.fill;os(o,po(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:d.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),i.setTextConfig({local:!0,inside:!!u.inside,insideStroke:h,outsideFill:h});var f=u.linePoints;a.setShape({points:f}),i.textGuideLineConfig={anchor:f?new tn(f[0][0],f[0][1]):null},tr(o,{style:{x:u.x,y:u.y}},s,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),CK(i,DK(l),{stroke:h})},e}(wl),u0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var c=new c0t(a,l);a.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=o.getItemGraphicEl(c);u.updateData(a,l),s.add(u),a.setItemGraphicEl(l,u)}).remove(function(l){var c=o.getItemGraphicEl(l);dI(c,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Vr),d0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new $M(ct(this.getData,this),ct(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return tE(this,{coordDimensions:["value"],encodeDefaulter:Yt(sK,this)})},e.prototype._defaultLabelLine=function(t){Gw(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=n.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,t)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ai);function h0t(n,e){return Za(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function f0t(n,e){for(var t=n.mapDimension("value"),r=n.mapArray(t,function(l){return l}),i=[],a=e==="ascending",o=0,s=n.count();o<s;o++)i[o]=o;return Et(e)?i.sort(e):e!=="none"&&i.sort(function(l,c){return a?r[l]-r[c]:r[c]-r[l]}),i}function p0t(n){var e=n.hostModel,t=e.get("orient");n.each(function(r){var i=n.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=n.getItemLayout(r),c=l.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",d,h,f,m;if(u)o==="insideLeft"?(h=(c[0][0]+c[3][0])/2+5,f=(c[0][1]+c[3][1])/2,d="left"):o==="insideRight"?(h=(c[1][0]+c[2][0])/2-5,f=(c[1][1]+c[2][1])/2,d="right"):(h=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,f=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,d="center"),m=[[h,f],[h,f]];else{var v=void 0,y=void 0,w=void 0,_=void 0,T=s.get("length");o==="left"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,w=v-T,h=w-5,d="right"):o==="right"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,w=v+T,h=w+5,d="left"):o==="top"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,_=y-T,f=_-5,d="center"):o==="bottom"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,_=y+T,f=_+5,d="center"):o==="rightTop"?(v=t==="horizontal"?c[3][0]:c[1][0],y=t==="horizontal"?c[3][1]:c[1][1],t==="horizontal"?(_=y-T,f=_-5,d="center"):(w=v+T,h=w+5,d="top")):o==="rightBottom"?(v=c[2][0],y=c[2][1],t==="horizontal"?(_=y+T,f=_+5,d="center"):(w=v+T,h=w+5,d="bottom")):o==="leftTop"?(v=c[0][0],y=t==="horizontal"?c[0][1]:c[1][1],t==="horizontal"?(_=y-T,f=_-5,d="center"):(w=v-T,h=w-5,d="right")):o==="leftBottom"?(v=t==="horizontal"?c[1][0]:c[3][0],y=t==="horizontal"?c[1][1]:c[2][1],t==="horizontal"?(_=y+T,f=_+5,d="center"):(w=v-T,h=w-5,d="right")):(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,t==="horizontal"?(_=y+T,f=_+5,d="center"):(w=v+T,h=w+5,d="left")),t==="horizontal"?(w=v,h=w):(_=y,f=_),m=[[v,y],[w,_]]}l.label={linePoints:m,x:h,y:f,verticalAlign:"middle",textAlign:d,inside:u}})}function g0t(n,e){n.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),a=t.get("sort"),o=h0t(t,e),s=t.get("orient"),l=o.width,c=o.height,u=f0t(r,a),d=o.x,h=o.y,f=s==="horizontal"?[Ze(t.get("minSize"),c),Ze(t.get("maxSize"),c)]:[Ze(t.get("minSize"),l),Ze(t.get("maxSize"),l)],m=r.getDataExtent(i),v=t.get("min"),y=t.get("max");v==null&&(v=Math.min(m[0],0)),y==null&&(y=m[1]);var w=t.get("funnelAlign"),_=t.get("gap"),T=s==="horizontal"?l:c,A=(T-_*(r.count()-1))/r.count(),C=function(Y,G){if(s==="horizontal"){var W=r.get(i,Y)||0,X=yr(W,[v,y],f,!0),te=void 0;switch(w){case"top":te=h;break;case"center":te=h+(c-X)/2;break;case"bottom":te=h+(c-X);break}return[[G,te],[G,te+X]]}var re=r.get(i,Y)||0,z=yr(re,[v,y],f,!0),ae;switch(w){case"left":ae=d;break;case"center":ae=d+(l-z)/2;break;case"right":ae=d+l-z;break}return[[ae,G],[ae+z,G]]};a==="ascending"&&(A=-A,_=-_,s==="horizontal"?d+=l:h+=c,u=u.reverse());for(var k=0;k<u.length;k++){var M=u[k],P=u[k+1],O=r.getItemModel(M);if(s==="horizontal"){var j=O.get(["itemStyle","width"]);j==null?j=A:(j=Ze(j,l),a==="ascending"&&(j=-j));var L=C(M,d),B=C(P,d+j);d+=j+_,r.setItemLayout(M,{points:L.concat(B.slice().reverse())})}else{var $=O.get(["itemStyle","height"]);$==null?$=A:($=Ze($,c),a==="ascending"&&($=-$));var L=C(M,h),B=C(P,h+$);h+=$+_,r.setItemLayout(M,{points:L.concat(B.slice().reverse())})}}p0t(r)})}function m0t(n){n.registerChartView(u0t),n.registerSeriesModel(d0t),n.registerLayout(g0t),n.registerProcessor(FM("funnel"))}var v0t=.3,y0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new Lt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.dimensions,d=Dde(t);s.diff(l).add(h).update(f).remove(m).execute();function h(y){var w=Cde(s,o,y,u,c);yV(w,s,y,d)}function f(y,w){var _=l.getItemGraphicEl(w),T=pke(s,y,u,c);s.setItemGraphicEl(y,_),tr(_,{shape:{points:T}},t,y),lh(_),yV(_,s,y,d)}function m(y){var w=l.getItemGraphicEl(y);o.remove(w)}if(!this._initialized){this._initialized=!0;var v=b0t(c,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=Dde(r),c=this._progressiveEls=[],u=t.start;u<t.end;u++){var d=Cde(a,this._dataGroup,u,s,o);d.incremental=!0,yV(d,a,u,l),c.push(d)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Vr);function b0t(n,e,t){var r=n.model,i=n.getRect(),a=new Hn({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),Si(a,{shape:{width:i.width,height:i.height}},e,t),a}function pke(n,e,t,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=n.get(n.mapDimension(o),e);w0t(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function Cde(n,e,t,r,i){var a=pke(n,t,r,i),o=new xl({shape:{points:a},z2:10});return e.add(o),n.setItemGraphicEl(t,o),o}function Dde(n){var e=n.get("smooth",!0);return e===!0&&(e=v0t),e=$g(e),nI(e)&&(e=0),{smooth:e}}function yV(n,e,t,r){n.useStyle(e.getItemVisual(t,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var i=e.getItemModel(t),a=i.getModel("emphasis");as(n,i,"lineStyle"),Vi(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function w0t(n,e){return e==="category"?n==null:n==null||isNaN(n)}var x0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return rm(null,this,{useEncodeDefaulter:ct(_0t,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){t===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(ai);function _0t(n){var e=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(e){var t={};return Z(e.dimensions,function(r){var i=S0t(r);t[r]=i}),t}}function S0t(n){return+n.replace("dim","")}var T0t=["lineStyle","opacity"],E0t={seriesType:"parallel",reset:function(n,e){var t=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(i,a){t.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var c=a.getItemModel(s).get(T0t,!0);c!=null&&(l=c)}var u=a.ensureUniqueItemVisual(s,"style");u.opacity=l},i.start,i.end)}}}};function A0t(n){k0t(n),C0t(n)}function k0t(n){if(!n.parallel){var e=!1;Z(n.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(n.parallel=[{}])}}function C0t(n){var e=Or(n.parallelAxis);Z(e,function(t){if(It(t)){var r=t.parallelIndex||0,i=Or(n.parallel)[r];i&&i.parallelAxisDefault&&en(t,i.parallelAxisDefault,!1)}})}var D0t=5,I0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this._model=t,this._api=i,this._handlers||(this._handlers={},Z(M0t,function(a,o){i.getZr().on(o,this._handlers[o]=ct(a,this))},this)),QT(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){gI(this,"_throttledDispatchExpand"),Z(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Ie({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Ni),M0t={mousedown:function(n){bV(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var e=this._mouseDownPoint;if(bV(this,"click")&&e){var t=[n.offsetX,n.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>D0t)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!bV(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function bV(n,e){var t=n._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var P0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&en(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var i=t.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){Z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],i=gr(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);Z(i,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Dn),O0t=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(dh);function px(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=vS(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=vS(s,[0,o]),i=a=vS(s,[i,a]),r=0}e[0]=vS(e[0],t),e[1]=vS(e[1],t);var l=wV(e,r);e[r]+=n;var c=i||0,u=t.slice();l.sign<0?u[0]+=c:u[1]-=c,e[r]=vS(e[r],u);var d;return d=wV(e,r),i!=null&&(d.sign!==l.sign||d.span<i)&&(e[1-r]=e[r]+l.sign*i),d=wV(e,r),a!=null&&d.span>a&&(e[1-r]=e[r]+d.sign*a),e}function wV(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function vS(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var xV=Z,gke=Math.min,mke=Math.max,Ide=Math.floor,R0t=Math.ceil,Mde=na,N0t=Math.PI,L0t=function(){function n(e,t,r){this.type="parallel",this._axesMap=pt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=e.dimensions,a=e.parallelAxisIndex;xV(i,function(o,s){var l=a[s],c=t.getComponent("parallelAxis",l),u=this._axesMap.set(o,new O0t(o,eF(c),[0,0],c.get("type"),l)),d=u.type==="category";u.onBand=d&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},n.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},n.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+t.axisLength&&s>=i&&s<=i+t.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var i=r.getData();xV(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),fT(o.scale,o.model)},this)}},this)},n.prototype.resize=function(e,t){this._rect=Za(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=t[i[o]],l=[0,s],c=this.dimensions.length,u=lR(e.get("axisExpandWidth"),l),d=lR(e.get("axisExpandCount")||0,[0,c]),h=e.get("axisExpandable")&&c>3&&c>d&&d>1&&u>0&&s>0,f=e.get("axisExpandWindow"),m;if(f)m=lR(f[1]-f[0],l),f[1]=f[0]+m;else{m=lR(u*(d-1),l);var v=e.get("axisExpandCenter")||Ide(c/2);f=[u*v-m/2],f[1]=f[0]+m}var y=(s-m)/(c-d);y<3&&(y=0);var w=[Ide(Mde(f[0]/u,1))+1,R0t(Mde(f[1]/u,1))-1],_=y/u*f[0];return{layout:a,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:s,axisBase:t[r[1-o]],axisLength:t[i[1-o]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:y,axisExpandWindow:f,axisCount:c,winInnerIndices:w,axisExpandWindow0Pos:_}},n.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),xV(r,function(o,s){var l=(i.axisExpandable?F0t:j0t)(s,i),c={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},u={horizontal:N0t/2,vertical:0},d=[c[a].x+e.x,c[a].y+e.y],h=u[a],f=Bc();sx(f,f,h),jf(f,f,d),this._axesLayout[o]={position:d,rotation:h,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(e){return this._axesMap.get(e)},n.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},n.prototype.eachActiveState=function(e,t,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];Z(o,function(y){s.push(e.mapDimension(y)),l.push(a.get(y).model)});for(var c=this.hasAxisBrushed(),u=r;u<i;u++){var d=void 0;if(!c)d="normal";else{d="active";for(var h=e.getValues(s,u),f=0,m=o.length;f<m;f++){var v=l[f].getActiveState(h[f]);if(v==="inactive"){d="inactive";break}}}t(d,u)}},n.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)t.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},n.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return nh([e,0],r.transform)},n.prototype.getAxisLayout=function(e){return Rt(this._axesLayout[e])},n.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,c="slide",u=t.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),h=d[0]!=null;if(u)h&&u&&s<a*d[0]?(c="jump",l=s-a*d[2]):h&&u&&s>a*(1-d[0])?(c="jump",l=s-a*(1-d[2])):(l=s-a*d[1])>=0&&(l=s-a*(1-d[1]))<=0&&(l=0),l*=t.axisExpandWidth/u,l?px(l,i,o,"all"):c="none";else{var f=i[1]-i[0],m=o[1]*s/f;i=[mke(0,m-f/2)],i[1]=gke(o[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:c}},n}();function lR(n,e){return gke(mke(n,e[0]),e[1])}function j0t(n,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*n,axisNameAvailableWidth:t,axisLabelShow:!0}}function F0t(n,e){var t=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,c=!1,u;return n<o[0]?(s=n*a,u=a):n<=o[1]?(s=e.axisExpandWindow0Pos+n*r-e.axisExpandWindow[0],l=r,c=!0):(s=t-(i-1-n)*a,u=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}function $0t(n,e){var t=[];return n.eachComponent("parallel",function(r,i){var a=new L0t(r,n,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Ma).models[0];r.coordinateSystem=i.coordinateSystem}}),t}var B0t={create:$0t},rG=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return Ww([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Rt(t);if(r)for(var i=r.length-1;i>=0;i--)Bu(r[i])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e}(Dn);Oa(rG,OM);var Xw=!0,kI=Math.min,mT=Math.max,U0t=Math.pow,V0t=1e4,z0t=6,H0t=6,Pde="globalPan",G0t={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},q0t={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ode={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},W0t=0,QK=function(n){_e(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new Lt,r._uid="brushController_"+W0t++,Z(ebt,function(i,a){this._handlers[a]=ct(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||jmt(r,Pde,this._uid),Z(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=en(Rt(Ode),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Fmt(t,Pde,this._uid),Z(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};Z(t,function(i){r[i.panelId]=Rt(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=$e(t,function(h){return en(Rt(Ode),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Vg(i,t,c,l).add(u).update(u).remove(d).execute(),this;function l(h,f){return(h.id!=null?h.id:r+f)+"-"+h.brushType}function c(h,f){return l(h.__brushOption,f)}function u(h,f){var m=t[h];if(f!=null&&i[f]===s)a[h]=i[f];else{var v=a[h]=f!=null?(i[f].__brushOption=m,i[f]):yke(o,vke(o,m));JK(o,v)}}function d(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),iG(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Xu);function vke(n,e){var t=oF[e.brushType].createCover(n,e);return t.__brushOption=e,wke(t,e),n.group.add(t),t}function yke(n,e){var t=eX(e);return t.endCreating&&(t.endCreating(n,e),wke(e,e.__brushOption)),e}function bke(n,e){var t=e.__brushOption;eX(e).updateCoverShape(n,e,t.range,t)}function wke(n,e){var t=e.z;t==null&&(t=V0t),n.traverse(function(r){r.z=t,r.z2=t})}function JK(n,e){eX(e).updateCommon(n,e),bke(n,e)}function eX(n){return oF[n.__brushOption.brushType]}function tX(n,e,t){var r=n._panels;if(!r)return Xw;var i,a=n._transform;return Z(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function xke(n,e){var t=n._panels;if(!t)return Xw;var r=e.__brushOption.panelId;return r!=null?t[r]:Xw}function iG(n){var e=n._covers,t=e.length;return Z(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function Zw(n,e){var t=$e(n._covers,function(r){var i=r.__brushOption,a=Rt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Y0t(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=U0t(i*i+a*a,.5);return o>z0t}function _ke(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function Ske(n,e,t,r){var i=new Lt;return i.add(new Hn({name:"main",style:nX(t),silent:!0,draggable:!0,cursor:"move",drift:Yt(Rde,n,e,i,["n","s","w","e"]),ondragend:Yt(Zw,e,{isEnd:!0})})),Z(r,function(a){i.add(new Hn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Yt(Rde,n,e,i,a),ondragend:Yt(Zw,e,{isEnd:!0})}))}),i}function Tke(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=mT(i,H0t),o=t[0][0],s=t[1][0],l=o-i/2,c=s-i/2,u=t[0][1],d=t[1][1],h=u-a+i/2,f=d-a+i/2,m=u-o,v=d-s,y=m+i,w=v+i;Jp(n,e,"main",o,s,m,v),r.transformable&&(Jp(n,e,"w",l,c,a,w),Jp(n,e,"e",h,c,a,w),Jp(n,e,"n",l,c,y,a),Jp(n,e,"s",l,f,y,a),Jp(n,e,"nw",l,c,a,a),Jp(n,e,"ne",h,c,a,a),Jp(n,e,"sw",l,f,a,a),Jp(n,e,"se",h,f,a,a))}function aG(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(nX(t)),i.attr({silent:!r,cursor:r?"move":"default"}),Z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?oG(n,a[0]):X0t(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?q0t[s]+"-resize":null})})}function Jp(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(Q0t(rX(n,e,[[r,i],[r+a,i+o]])))}function nX(n){return kt({strokeNoScale:!0},n.brushStyle)}function Eke(n,e,t,r){var i=[kI(n,t),kI(e,r)],a=[mT(n,t),mT(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function K0t(n){return Aw(n.group)}function oG(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=F5(t[e],K0t(n));return r[i]}function X0t(n,e){var t=[oG(n,e[0]),oG(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Rde(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),l=Ake(e,i,a);Z(r,function(c){var u=G0t[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=n.fromRectRange(Eke(s[0][0],s[1][0],s[0][1],s[1][1])),JK(e,t),Zw(e,{isEnd:!1})}function Z0t(n,e,t,r){var i=e.__brushOption.range,a=Ake(n,t,r);Z(i,function(o){o[0]+=a[0],o[1]+=a[1]}),JK(n,e),Zw(n,{isEnd:!1})}function Ake(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function rX(n,e,t){var r=xke(n,e);return r&&r!==Xw?r.clipPath(t,n._transform):Rt(t)}function Q0t(n){var e=kI(n[0][0],n[1][0]),t=kI(n[0][1],n[1][1]),r=mT(n[0][0],n[1][0]),i=mT(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function J0t(n,e,t){if(!(!n._brushType||tbt(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=tX(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Xw||s.panelId===a.panelId)&&oF[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function sG(n){var e=n.event;e.preventDefault&&e.preventDefault()}function lG(n,e,t){return n.childOfName("main").contain(e,t)}function kke(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),Y0t(n)||i){if(a&&!i){o.brushMode==="single"&&iG(n);var l=Rt(o);l.brushType=Nde(l.brushType,a),l.panelId=a===Xw?null:a.panelId,i=n._creatingCover=vke(n,l),n._covers.push(i)}if(i){var c=oF[Nde(n._brushType,a)],u=i.__brushOption;u.range=c.getCreatingRange(rX(n,i,n._track)),r&&(yke(n,i),c.updateCommon(n,i)),bke(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&tX(n,e,t)&&iG(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Nde(n,e){return n==="auto"?e.defaultBrushType:n}var ebt={mousedown:function(n){if(this._dragging)Lde(this,n);else if(!n.target||!n.target.draggable){sG(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=tX(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(J0t(this,n,r),this._dragging){sG(n);var i=kke(this,n,r,!1);i&&Zw(this,i)}},mouseup:function(n){Lde(this,n)}};function Lde(n,e){if(n._dragging){sG(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=kke(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&Zw(n,a)}}function tbt(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var oF={lineX:jde(0),lineY:jde(1),rect:{createCover:function(n,e){function t(r){return r}return Ske({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=_ke(n);return Eke(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){Tke(n,e,t,r)},updateCommon:aG,contain:lG},polygon:{createCover:function(n,e){var t=new Lt;return t.add(new xl({name:"main",style:nX(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new wl({name:"main",draggable:!0,drift:Yt(Z0t,n,e),ondragend:Yt(Zw,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:rX(n,e,t)})},updateCommon:aG,contain:lG}};function jde(n){return{createCover:function(e,t){return Ske({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=_ke(e),r=kI(t[0][n],t[1][n]),i=mT(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=xke(e,t);if(o!==Xw&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[r,a];n&&l.reverse(),Tke(e,t,l,i)},updateCommon:aG,contain:lG}}function Cke(n){return n=iX(n),function(e){return j1e(e,n)}}function Dke(n,e){return n=iX(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function Ike(n,e,t){var r=iX(n);return function(i,a){return r.contain(a[0],a[1])&&!nF(i,e,t)}}function iX(n){return an.create(n)}var nbt=["axisLine","axisTickLabel","axisName"],rbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){n.prototype.init.apply(this,arguments),(this._brushController=new QK(r.getZr())).on("brush",ct(this._onBrush,this))},e.prototype.render=function(t,r,i,a){if(!ibt(t,r,a)){this.axisModel=t,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Lt,this.group.add(this._axisGroup),!!t.get("show")){var s=obt(t,r),l=s.coordinateSystem,c=t.getAreaSelectStyle(),u=c.width,d=t.axis.dim,h=l.getAxisLayout(d),f=Ie({strokeContainThreshold:u},h),m=new ml(t,f);Z(nbt,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(f,c,t,s,u,i),CM(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,i,a,o,s){var l=i.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),d=an.create({x:l[0],y:-o/2,width:c,height:o});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Cke(d),isTargetByCursor:Ike(d,s,a),getLinearBrushOtherExtent:Dke(d,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(abt(i))},e.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,a=i.axis,o=$e(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Ni);function ibt(n,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===n}function abt(n){var e=n.axis;return $e(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function obt(n,e){return e.getComponent("parallel",n.get("parallelIndex"))}var sbt={type:"axisAreaSelect",event:"axisAreaSelected"};function lbt(n){n.registerAction(sbt,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),n.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var cbt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Mke(n){n.registerComponentView(I0t),n.registerComponentModel(P0t),n.registerCoordinateSystem("parallel",B0t),n.registerPreprocessor(A0t),n.registerComponentModel(rG),n.registerComponentView(rbt),gT(n,"parallel",rG,cbt),lbt(n)}function ubt(n){yn(Mke),n.registerChartView(y0t),n.registerSeriesModel(x0t),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,E0t)}var dbt=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),hbt=function(n){_e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new dbt},e.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},e.prototype.highlight=function(){Bg(this)},e.prototype.downplay=function(){Ug(this)},e}(wn),fbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,r,i){var a=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,c=l.width,u=l.height,d=t.getData(),h=t.getData("edge"),f=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(m){var v=new hbt,y=$t(v);y.dataIndex=m.dataIndex,y.seriesIndex=t.seriesIndex,y.dataType="edge";var w=m.getModel(),_=w.getModel("lineStyle"),T=_.get("curveness"),A=m.node1.getLayout(),C=m.node1.getModel(),k=C.get("localX"),M=C.get("localY"),P=m.node2.getLayout(),O=m.node2.getModel(),j=O.get("localX"),L=O.get("localY"),B=m.getLayout(),$,Y,G,W,X,te,re,z;v.shape.extent=Math.max(1,B.dy),v.shape.orient=f,f==="vertical"?($=(k!=null?k*c:A.x)+B.sy,Y=(M!=null?M*u:A.y)+A.dy,G=(j!=null?j*c:P.x)+B.ty,W=L!=null?L*u:P.y,X=$,te=Y*(1-T)+W*T,re=G,z=Y*T+W*(1-T)):($=(k!=null?k*c:A.x)+A.dx,Y=(M!=null?M*u:A.y)+B.sy,G=j!=null?j*c:P.x,W=(L!=null?L*u:P.y)+B.ty,X=$*(1-T)+G*T,te=Y,re=$*T+G*(1-T),z=W),v.setShape({x1:$,y1:Y,x2:G,y2:W,cpx1:X,cpy1:te,cpx2:re,cpy2:z}),v.useStyle(_.getItemStyle()),Fde(v.style,f,m);var ae=""+w.get("value"),le=po(w,"edgeLabel");os(v,le,{labelFetcher:{getFormattedLabel:function(fe,Ce,at,Le,we,be){return t.getFormattedLabel(fe,Ce,"edge",Le,Df(we,le.normal&&le.normal.get("formatter"),ae),be)}},labelDataIndex:m.dataIndex,defaultText:ae}),v.setTextConfig({position:"inside"});var ee=w.getModel("emphasis");as(v,w,"lineStyle",function(fe){var Ce=fe.getItemStyle();return Fde(Ce,f,m),Ce}),s.add(v),h.setItemGraphicEl(m.dataIndex,v);var ye=ee.get("focus");Vi(v,ye==="adjacency"?m.getAdjacentDataIndices():ye==="trajectory"?m.getTrajectoryDataIndices():ye,ee.get("blurScope"),ee.get("disabled"))}),o.eachNode(function(m){var v=m.getLayout(),y=m.getModel(),w=y.get("localX"),_=y.get("localY"),T=y.getModel("emphasis"),A=y.get(["itemStyle","borderRadius"])||0,C=new Hn({shape:{x:w!=null?w*c:v.x,y:_!=null?_*u:v.y,width:v.dx,height:v.dy,r:A},style:y.getModel("itemStyle").getItemStyle(),z2:10});os(C,po(y),{labelFetcher:{getFormattedLabel:function(M,P){return t.getFormattedLabel(M,P,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),C.disableLabelAnimation=!0,C.setStyle("fill",m.getVisual("color")),C.setStyle("decal",m.getVisual("style").decal),as(C,y),s.add(C),d.setItemGraphicEl(m.dataIndex,C),$t(C).dataType="node";var k=T.get("focus");Vi(C,k==="adjacency"?m.getAdjacentDataIndices():k==="trajectory"?m.getTrajectoryDataIndices():k,T.get("blurScope"),T.get("disabled"))}),d.eachItemGraphicEl(function(m,v){var y=d.getItemModel(v);y.get("draggable")&&(m.drift=function(w,_){a._focusAdjacencyDisabled=!0,this.shape.x+=w,this.shape.y+=_,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(v),localX:this.shape.x/c,localY:this.shape.y/u})},m.ondragend=function(){a._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(pbt(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Vr);function Fde(n,e,t){switch(n.fill){case"source":n.fill=t.node1.getVisual("color"),n.decal=t.node1.getVisual("style").decal;break;case"target":n.fill=t.node2.getVisual("color"),n.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),i=t.node2.getVisual("color");it(r)&&it(i)&&(n.fill=new kM(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function pbt(n,e,t){var r=new Hn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Si(r,{shape:{width:n.width+20}},e,t),r}var gbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new br(o[l],this,r));var c=fke(a,i,this,!0,u);return c.data;function u(d,h){d.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getData().getItemLayout(m);if(y){var w=y.depth,_=v.levelModels[w];_&&(f.parentModel=_)}return f}),h.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getGraph().getEdgeByIndex(m),w=y.node1.getLayout();if(w){var _=w.depth,T=v.levelModels[_];T&&(f.parentModel=T)}return f})}},e.prototype.setNodePosition=function(t,r){var i=this.option.data||this.option.nodes,a=i[t];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){function a(f){return isNaN(f)||f==null}if(i==="edge"){var o=this.getDataParams(t,i),s=o.data,l=o.value,c=s.source+" -- "+s.target;return go("nameValue",{name:c,value:l,noValue:a(l)})}else{var u=this.getGraph().getNodeByIndex(t),d=u.getLayout().value,h=this.getDataParams(t,i).data.name;return go("nameValue",{name:h!=null?h+"":null,value:d,noValue:a(d)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(ai);function mbt(n,e){n.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),i=t.get("nodeGap"),a=vbt(t,e);t.layoutInfo=a;var o=a.width,s=a.height,l=t.getGraph(),c=l.nodes,u=l.edges;bbt(c);var d=gr(c,function(v){return v.getLayout().value===0}),h=d.length!==0?0:t.get("layoutIterations"),f=t.get("orient"),m=t.get("nodeAlign");ybt(c,u,r,i,o,s,h,f,m)})}function vbt(n,e){return Za(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function ybt(n,e,t,r,i,a,o,s,l){wbt(n,e,t,i,a,s,l),Tbt(n,e,a,i,r,o,s),Obt(n,s)}function bbt(n){Z(n,function(e){var t=uy(e.outEdges,wL),r=uy(e.inEdges,wL),i=e.getValue()||0,a=Math.max(t,r,i);e.setLayout({value:a},!0)})}function wbt(n,e,t,r,i,a,o){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<e.length;h++)s[h]=1;for(var h=0;h<n.length;h++)l[h]=n[h].inEdges.length,l[h]===0&&c.push(n[h]);for(var f=-1;c.length;){for(var m=0;m<c.length;m++){var v=c[m],y=v.hostGraph.data.getRawDataItem(v.dataIndex),w=y.depth!=null&&y.depth>=0;w&&y.depth>f&&(f=y.depth),v.setLayout({depth:w?y.depth:d},!0),a==="vertical"?v.setLayout({dy:t},!0):v.setLayout({dx:t},!0);for(var _=0;_<v.outEdges.length;_++){var T=v.outEdges[_],A=e.indexOf(T);s[A]=0;var C=T.node2,k=n.indexOf(C);--l[k]===0&&u.indexOf(C)<0&&u.push(C)}}++d,c=u,u=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var M=f>d-1?f:d-1;o&&o!=="left"&&xbt(n,o,a,M);var P=a==="vertical"?(i-t)/M:(r-t)/M;Sbt(n,P,a)}function Pke(n){var e=n.hostGraph.data.getRawDataItem(n.dataIndex);return e.depth!=null&&e.depth>=0}function xbt(n,e,t,r){if(e==="right"){for(var i=[],a=n,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];i.indexOf(u.node1)<0&&i.push(u.node1)}}a=i,i=[],++o}Z(n,function(d){Pke(d)||d.setLayout({depth:Math.max(0,r-d.getLayout().skNodeHeight)},!0)})}else e==="justify"&&_bt(n,r)}function _bt(n,e){Z(n,function(t){!Pke(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function Sbt(n,e,t){Z(n,function(r){var i=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function Tbt(n,e,t,r,i,a,o){var s=Ebt(n,o);Abt(s,e,t,r,i,o),_V(s,i,t,r,o);for(var l=1;a>0;a--)l*=.99,kbt(s,l,o),_V(s,i,t,r,o),Pbt(s,l,o),_V(s,i,t,r,o)}function Ebt(n,e){var t=[],r=e==="vertical"?"y":"x",i=c8(n,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),Z(i.keys,function(a){t.push(i.buckets.get(a))}),t}function Abt(n,e,t,r,i,a){var o=1/0;Z(n,function(s){var l=s.length,c=0;Z(s,function(d){c+=d.getLayout().value});var u=a==="vertical"?(r-(l-1)*i)/c:(t-(l-1)*i)/c;u<o&&(o=u)}),Z(n,function(s){Z(s,function(l,c){var u=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),Z(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function _V(n,e,t,r,i){var a=i==="vertical"?"x":"y";Z(n,function(o){o.sort(function(v,y){return v.getLayout()[a]-y.getLayout()[a]});for(var s,l,c,u=0,d=o.length,h=i==="vertical"?"dx":"dy",f=0;f<d;f++)l=o[f],c=u-l.getLayout()[a],c>0&&(s=l.getLayout()[a]+c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]+l.getLayout()[h]+e;var m=i==="vertical"?r:t;if(c=u-e-m,c>0){s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=d-2;f>=0;--f)l=o[f],c=l.getLayout()[a]+l.getLayout()[h]+e-u,c>0&&(s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]}})}function kbt(n,e,t){Z(n.slice().reverse(),function(r){Z(r,function(i){if(i.outEdges.length){var a=uy(i.outEdges,Cbt,t)/uy(i.outEdges,wL);if(isNaN(a)){var o=i.outEdges.length;a=o?uy(i.outEdges,Dbt,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-Ey(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Ey(i,t))*e;i.setLayout({y:l},!0)}}})})}function Cbt(n,e){return Ey(n.node2,e)*n.getValue()}function Dbt(n,e){return Ey(n.node2,e)}function Ibt(n,e){return Ey(n.node1,e)*n.getValue()}function Mbt(n,e){return Ey(n.node1,e)}function Ey(n,e){return e==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function wL(n){return n.getValue()}function uy(n,e,t){for(var r=0,i=n.length,a=-1;++a<i;){var o=+e(n[a],t);isNaN(o)||(r+=o)}return r}function Pbt(n,e,t){Z(n,function(r){Z(r,function(i){if(i.inEdges.length){var a=uy(i.inEdges,Ibt,t)/uy(i.inEdges,wL);if(isNaN(a)){var o=i.inEdges.length;a=o?uy(i.inEdges,Mbt,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-Ey(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Ey(i,t))*e;i.setLayout({y:l},!0)}}})})}function Obt(n,e){var t=e==="vertical"?"x":"y";Z(n,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[t]-a.node1.getLayout()[t]})}),Z(n,function(r){var i=0,a=0;Z(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),Z(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function Rbt(n){n.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,i=t.edges;if(r.length){var a=1/0,o=-1/0;Z(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),Z(r,function(s){var l=new fo({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}i.length&&Z(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function Nbt(n){n.registerChartView(fbt),n.registerSeriesModel(gbt),n.registerLayout(mbt),n.registerVisual(Rbt),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var Oke=function(){function n(){}return n.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},n.prototype.getInitialData=function(e,t){var r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],f=[i,a],m=f[u].get("type"),v=f[1-u].get("type"),y=e.data;if(y&&l){var w=[];Z(y,function(A,C){var k;Fe(A)?(k=A.slice(),A.unshift(C)):Fe(A.value)?(k=Ie({},A),k.value=k.value.slice(),A.value.unshift(C)):k=A,w.push(k)}),e.data=w}var _=this.defaultValueDimensions,T=[{name:d,type:cL(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:cL(v),dimsDef:_.slice()}];return tE(this,{coordDimensions:T,dimensionsCount:_.length+1,encodeDefaulter:Yt(cTe,T,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),Rke=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(ai);Oa(Rke,Oke,!0);var Lbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(s).add(function(c){if(a.hasValue(c)){var u=a.getItemLayout(c),d=$de(u,a,c,l,!0);a.setItemGraphicEl(c,d),o.add(d)}}).update(function(c,u){var d=s.getItemGraphicEl(u);if(!a.hasValue(c)){o.remove(d);return}var h=a.getItemLayout(c);d?(lh(d),Nke(h,d,a,c)):d=$de(h,a,c,l),o.add(d),a.setItemGraphicEl(c,d)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&o.remove(u)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(Vr),jbt=function(){function n(){}return n}(),Fbt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new jbt},e.prototype.buildPath=function(t,r){var i=r.points,a=0;for(t.moveTo(i[a][0],i[a][1]),a++;a<4;a++)t.lineTo(i[a][0],i[a][1]);for(t.closePath();a<i.length;a++)t.moveTo(i[a][0],i[a][1]),a++,t.lineTo(i[a][0],i[a][1])},e}(wn);function $de(n,e,t,r,i){var a=n.ends,o=new Fbt({shape:{points:i?$bt(a,r,n):a}});return Nke(n,o,e,t,i),o}function Nke(n,e,t,r,i){var a=t.hostModel,o=cx[i?"initProps":"updateProps"];o(e,{shape:{points:n.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(r),l=s.getModel("emphasis");as(e,s),Vi(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function $bt(n,e,t){return $e(n,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var VC=Z;function Bbt(n){var e=Ubt(n);VC(e,function(t){var r=t.seriesModels;r.length&&(Vbt(t),VC(r,function(i,a){zbt(i,t.boxOffsetList[a],t.boxWidthList[a])}))})}function Ubt(n){var e=[],t=[];return n.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=dn(t,i);a<0&&(a=t.length,t[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function Vbt(n){var e=n.axis,t=n.seriesModels,r=t.length,i=n.boxWidthList=[],a=n.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;VC(t,function(m){l=Math.max(l,m.getData().count())});var c=e.getExtent();s=Math.abs(c[1]-c[0])/l}VC(t,function(m){var v=m.get("boxWidth");Fe(v)||(v=[v,v]),o.push([Ze(v[0],s)||0,Ze(v[1],s)||0])});var u=s*.8-2,d=u/r*.3,h=(u-d*(r-1))/r,f=h/2-u/2;VC(t,function(m,v){a.push(f),f+=d+h,i.push(Math.min(Math.max(h,o[v][0]),o[v][1]))})}function zbt(n,e,t){var r=n.coordinateSystem,i=n.getData(),a=t/2,o=n.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],c=i.mapDimension(l[o]),u=i.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var d=0;d<i.count();d++){var h=i.get(c,d),f=T(h,u[2],d),m=T(h,u[0],d),v=T(h,u[1],d),y=T(h,u[3],d),w=T(h,u[4],d),_=[];A(_,v,!1),A(_,y,!0),_.push(m,v,w,y),C(_,m),C(_,w),C(_,f),i.setItemLayout(d,{initBaseline:f[s],ends:_})}function T(k,M,P){var O=i.get(M,P),j=[];j[o]=k,j[s]=O;var L;return isNaN(k)||isNaN(O)?L=[NaN,NaN]:(L=r.dataToPoint(j),L[o]+=e),L}function A(k,M,P){var O=M.slice(),j=M.slice();O[o]+=a,j[o]-=a,P?k.push(O,j):k.push(j,O)}function C(k,M){var P=M.slice(),O=M.slice();P[o]-=a,O[o]+=a,k.push(P,O)}}function Hbt(n,e){e=e||{};for(var t=[],r=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<n.length;o++){var s=Bu(n[o].slice()),l=ZU(s,.25),c=ZU(s,.5),u=ZU(s,.75),d=s[0],h=s[s.length-1],f=(i??1.5)*(u-l),m=a?d:Math.max(d,l-f),v=a?h:Math.min(h,u+f),y=e.itemNameFormatter,w=Et(y)?y({value:o}):it(y)?y.replace("{value}",o+""):o+"";t.push([w,m,l,c,u,v]);for(var _=0;_<s.length;_++){var T=s[_];if(T<m||T>v){var A=[w,T];r.push(A)}}}return{boxData:t,outliers:r}}var Gbt={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==$s){var r="";fr(r)}var i=Hbt(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function qbt(n){n.registerSeriesModel(Rke),n.registerChartView(Lbt),n.registerLayout(Bbt),n.registerTransform(Gbt)}var Wbt=["itemStyle","borderColor"],Ybt=["itemStyle","borderColor0"],Kbt=["itemStyle","borderColorDoji"],Xbt=["itemStyle","color"],Zbt=["itemStyle","color0"];function aX(n,e){return e.get(n>0?Xbt:Zbt)}function oX(n,e){return e.get(n===0?Kbt:n>0?Wbt:Ybt)}var Qbt={seriesType:"candlestick",plan:ZT(),performRawSeries:!0,reset:function(n,e){if(!e.isSeriesFiltered(n)){var t=n.pipelineContext.large;return!t&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var o=i.getItemModel(a),s=i.getItemLayout(a).sign,l=o.getItemStyle();l.fill=aX(s,o),l.stroke=oX(s,o)||l.fill;var c=i.ensureUniqueItemVisual(a,"style");Ie(c,l)}}}}}},Jbt=["color","borderColor"],ewt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Fy(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,c=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(u){if(r.hasValue(u)){var d=r.getItemLayout(u);if(s&&Bde(c,d))return;var h=SV(d,u,!0);Si(h,{shape:{points:d.ends}},t,u),TV(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}}).update(function(u,d){var h=i.getItemGraphicEl(d);if(!r.hasValue(u)){a.remove(h);return}var f=r.getItemLayout(u);if(s&&Bde(c,f)){a.remove(h);return}h?(tr(h,{shape:{points:f.ends}},t,u),lh(h)):h=SV(f),TV(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}).remove(function(u){var d=i.getItemGraphicEl(u);d&&a.remove(d)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),Ude(t,this.group);var r=t.get("clip",!0)?LM(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=i.getItemLayout(o),l=SV(s);TV(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){Ude(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Vr),twt=function(){function n(){}return n}(),nwt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new twt},e.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e}(wn);function SV(n,e,t){var r=n.ends;return new nwt({shape:{points:t?rwt(r,n):r},z2:100})}function Bde(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function TV(n,e,t,r){var i=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,as(n,i);var a=e.getItemLayout(t).sign;Z(n.states,function(s,l){var c=i.getModel(l),u=aX(a,c),d=oX(a,c)||u,h=s.style||(s.style={});u&&(h.fill=u),d&&(h.stroke=d)});var o=i.getModel("emphasis");Vi(n,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function rwt(n,e){return $e(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var iwt=function(){function n(){}return n}(),EV=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new iwt},e.prototype.buildPath=function(t,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];t.moveTo(o,i[a++]),t.lineTo(o,i[a++])}else a+=3},e}(wn);function Ude(n,e,t,r){var i=n.getData(),a=i.getLayout("largePoints"),o=new EV({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new EV({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new EV({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),AV(1,o,n),AV(-1,s,n),AV(0,l,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function AV(n,e,t,r){var i=oX(n,t)||aX(n,t),a=t.getModel("itemStyle").getItemStyle(Jbt);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var Lke=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,i){var a=r.getItemLayout(t);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(ai);Oa(Lke,Oke,!0);function awt(n){!n||!Fe(n.series)||Z(n.series,function(e){It(e)&&e.type==="k"&&(e.type="candlestick")})}var owt={seriesType:"candlestick",plan:ZT(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=swt(n,t),i=0,a=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[i])),l=$e(t.mapDimensionsAll(o[a]),t.getDimensionIndex,t),c=l[0],u=l[1],d=l[2],h=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:n.pipelineContext.large?m:f};function f(v,y){for(var w,_=y.getStore();(w=v.next())!=null;){var T=_.get(s,w),A=_.get(c,w),C=_.get(u,w),k=_.get(d,w),M=_.get(h,w),P=Math.min(A,C),O=Math.max(A,C),j=X(P,T),L=X(O,T),B=X(k,T),$=X(M,T),Y=[];te(Y,L,0),te(Y,j,1),Y.push(z($),z(L),z(B),z(j));var G=y.getItemModel(w),W=!!G.get(["itemStyle","borderColorDoji"]);y.setItemLayout(w,{sign:Vde(_,w,A,C,u,W),initBaseline:A>C?L[a]:j[a],ends:Y,brushRect:re(k,M,T)})}function X(ae,le){var ee=[];return ee[i]=le,ee[a]=ae,isNaN(le)||isNaN(ae)?[NaN,NaN]:e.dataToPoint(ee)}function te(ae,le,ee){var ye=le.slice(),fe=le.slice();ye[i]=iN(ye[i]+r/2,1,!1),fe[i]=iN(fe[i]-r/2,1,!0),ee?ae.push(ye,fe):ae.push(fe,ye)}function re(ae,le,ee){var ye=X(ae,ee),fe=X(le,ee);return ye[i]-=r/2,fe[i]-=r/2,{x:ye[0],y:ye[1],width:r,height:fe[1]-ye[1]}}function z(ae){return ae[i]=iN(ae[i],1),ae}}function m(v,y){for(var w=Sf(v.count*4),_=0,T,A=[],C=[],k,M=y.getStore(),P=!!n.get(["itemStyle","borderColorDoji"]);(k=v.next())!=null;){var O=M.get(s,k),j=M.get(c,k),L=M.get(u,k),B=M.get(d,k),$=M.get(h,k);if(isNaN(O)||isNaN(B)||isNaN($)){w[_++]=NaN,_+=3;continue}w[_++]=Vde(M,k,j,L,u,P),A[i]=O,A[a]=B,T=e.dataToPoint(A,null,C),w[_++]=T?T[0]:NaN,w[_++]=T?T[1]:NaN,A[a]=$,T=e.dataToPoint(A,null,C),w[_++]=T?T[1]:NaN}y.setLayout("largePoints",w)}}};function Vde(n,e,t,r,i,a){var o;return t>r?o=-1:t<r?o=1:o=a?0:e>0?n.get(i,e-1)<=r?1:-1:1,o}function swt(n,e){var t=n.getBaseAxis(),r,i=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=Ze(Gt(n.get("barMaxWidth"),i),i),o=Ze(Gt(n.get("barMinWidth"),1),i),s=n.get("barWidth");return s!=null?Ze(s,i):Math.max(Math.min(i/2,a),o)}function lwt(n){n.registerChartView(ewt),n.registerSeriesModel(Lke),n.registerPreprocessor(awt),n.registerVisual(Qbt),n.registerLayout(owt)}function zde(n,e){var t=e.rippleEffectColor||e.color;n.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var cwt=function(n){_e(e,n);function e(t,r){var i=n.call(this)||this,a=new RM(t,r),o=new Lt;return i.add(a),i.add(o),i.updateData(t,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,a=t.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Pa(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(c).start(),o.add(l)}zde(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}zde(i,t)},e.prototype.highlight=function(){Bg(this)},e.prototype.downplay=function(){Ug(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var i=this,a=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),s=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),c=JT(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),d=u&&u.fill,h=s.getModel("emphasis");o.setScale(c),o.traverse(function(y){y.setStyle("fill",d)});var f=ux(t.getItemVisual(r,"symbolOffset"),c);f&&(o.x=f[0],o.y=f[1]);var m=t.getItemVisual(r,"symbolRotate");o.rotation=(m||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=r/t.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=d,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?v.showEffectOn!=="render"&&i.startEffectAnimation(v):y==="normal"&&v.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=v,Vi(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Lt),uwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new NM(cwt)},e.prototype.render=function(t,r,i){var a=t.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,r,i){var a=t.getData();this.group.dirty();var o=jM("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Not(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Vr),dwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return rm(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(ai);function hwt(n){n.registerChartView(uwt),n.registerSeriesModel(dwt),n.registerLayout(jM("effectScatter"))}var jke=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a.add(a.createLine(t,r,i)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,i){return new XK(t,r,i)},e.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");Fe(o)||(o=[o,o]);var l=t.getItemVisual(r,"style"),c=a.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=Pa(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(a.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(c),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,i){var a=this.childAt(1);if(a){var o=t.getItemLayout(i),s=r.get("period")*1e3,l=r.get("loop"),c=r.get("roundTrip"),u=r.get("constantSpeed"),d=Ro(r.get("delay"),function(f){return f/t.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),u>0&&(s=this._getLineLength(a)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){a.stopAnimation();var h=void 0;Et(d)?h=d(i):h=d,a.__t>0&&(h=-s*a.__t),this._animateSymbol(a,s,h,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},e.prototype._animateSymbol=function(t,r,i,a,o){if(r>0){t.__t=0;var s=this,l=t.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(t)});a||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return Gv(t.__p1,t.__cp1)+Gv(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,a=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),c=Po,u=YH;s[0]=c(r[0],a[0],i[0],o),s[1]=c(r[1],a[1],i[1],o);var d=t.__t<1?u(r[0],a[0],i[0],o):u(i[0],a[0],r[0],1-o),h=t.__t<1?u(r[1],a[1],i[1],o):u(i[1],a[1],r[1],1-o);t.rotation=-Math.atan2(h,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Gv(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*Gv(r,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},e}(Lt),Fke=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createPolyline(t,r,i),a}return e.prototype._createPolyline=function(t,r,i){var a=t.getItemLayout(r),o=new xl({shape:{points:a}});this.add(o),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(r)}};tr(o,s,a,r),this._updateCommonStl(t,r,i)},e.prototype._updateCommonStl=function(t,r,i){var a=this.childAt(0),o=t.getItemModel(r),s=i&&i.emphasisLineStyle,l=i&&i.focus,c=i&&i.blurScope,u=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var d=o.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),u=d.get("disabled"),l=d.get("focus"),c=d.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var h=a.ensureState("emphasis");h.style=s,Vi(this,l,c,u)},e.prototype.updateLayout=function(t,r){var i=this.childAt(0);i.setShape("points",t.getItemLayout(r))},e}(Lt),fwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,i){return new Fke(t,r,i)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=Gv(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var c=Math.min(s+1,o-1);for(l=c;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var u=(r-a[l])/(a[l+1]-a[l]),d=i[l],h=i[l+1];t.x=d[0]*(1-u)+u*h[0],t.y=d[1]*(1-u)+u*h[1];var f=t.__t<1?h[0]-d[0]:d[0]-h[0],m=t.__t<1?h[1]-d[1]:d[1]-h[1];t.rotation=-Math.atan2(m,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e}(jke),pwt=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),gwt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new pwt},e.prototype.buildPath=function(t,r){var i=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){t.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)t.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var c=i[o++],u=i[o++],d=i[o++],h=i[o++];if(t.moveTo(c,u),a>0){var f=(c+d)/2-(u-h)*a,m=(u+h)/2-(d-c)*a;t.quadraticCurveTo(f,m,d,h)}else t.lineTo(d,h)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,c=0;c<a.length;){var u=a[c++];if(u>0)for(var d=a[c++],h=a[c++],f=1;f<u;f++){var m=a[c++],v=a[c++];if(Lv(d,h,m,v,s,t,r))return l}l++}else for(var l=0,c=0;c<a.length;){var d=a[c++],h=a[c++],m=a[c++],v=a[c++];if(o>0){var y=(d+m)/2-(h-v)*o,w=(h+v)/2-(m-d)*o;if(c1e(d,h,y,w,m,v,s,t,r))return l}else if(Lv(d,h,m,v,s,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<i.length;){var u=i[c++],d=i[c++];a=Math.min(u,a),s=Math.max(u,s),o=Math.min(d,o),l=Math.max(d,l)}t=this._rect=new an(a,o,s,l)}return t},e}(wn),mwt=function(){function n(){this.group=new Lt}return n.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],i=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,t),l.__startIndex=e.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new gwt({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=$t(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),$ke={seriesType:"lines",plan:ZT(),reset:function(n){var e=n.coordinateSystem;if(e){var t=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s=void 0,l=i.end-i.start;if(t){for(var c=0,u=i.start;u<i.end;u++)c+=n.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var d=0,h=[],u=i.start;u<i.end;u++){var f=n.getLineCoords(u,o);t&&(s[d++]=f);for(var m=0;m<f;m++)h=e.dataToPoint(o[m],!1,h),s[d++]=h[0],s[d++]=h[1]}a.setLayout("linesPoints",s)}else for(var u=i.start;u<i.end;u++){var v=a.getItemModel(u),f=n.getLineCoords(u,o),y=[];if(t)for(var w=0;w<f;w++)y.push(e.dataToPoint(o[w]));else{y[0]=e.dataToPoint(o[0]),y[1]=e.dataToPoint(o[1]);var _=v.get(["lineStyle","curveness"]);+_&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*_,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*_])}a.setItemLayout(u,y)}}}}}},vwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),c=i.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var d=t.get("clip",!0)&&LM(t.coordinateSystem,!1,t);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,i){var a=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=$ke.reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new mwt:new ZK(o?a?fwt:Fke:a?jke:XK),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e}(Vr),ywt=typeof Uint32Array>"u"?Array:Uint32Array,bwt=typeof Float64Array>"u"?Array:Float64Array;function Hde(n){var e=n.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(n.data=$e(e,function(t){var r=[t[0].coord,t[1].coord],i={coords:r};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),IY([i,t[0],t[1]])}))}var wwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],Hde(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(Hde(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=rI(this._flatCoords,r.flatCoords),this._flatCoordsOffset=rI(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[i+o*2],r[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Jn(t[0])){for(var i=t.length,a=new ywt(i),o=new bwt(i),s=0,l=0,c=0,u=0;u<i;){c++;var d=t[u++];a[l++]=s+r,a[l++]=d;for(var h=0;h<d;h++){var f=t[u++],m=t[u++];o[s++]=f,o[s++]=m}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var i=new gl(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var c=a.value;if(c!=null)return c instanceof Array?c[l]:c}),i},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),c=o.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),go("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(ai);function cR(n){return n instanceof Array||(n=[n,n]),n}var xwt={seriesType:"lines",reset:function(n){var e=cR(n.get("symbol")),t=cR(n.get("symbolSize")),r=n.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function i(a,o){var s=a.getItemModel(o),l=cR(s.getShallow("symbol",!0)),c=cR(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),c[0]&&a.setItemVisual(o,"fromSymbolSize",c[0]),c[1]&&a.setItemVisual(o,"toSymbolSize",c[1])}return{dataEach:r.hasItemOption?i:null}}};function _wt(n){n.registerChartView(vwt),n.registerSeriesModel(wwt),n.registerLayout($ke),n.registerVisual(xwt)}var Swt=256,Twt=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=wy.createCanvas();this.canvas=e}return n.prototype.update=function(e,t,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),f=e.length;d.width=t,d.height=r;for(var m=0;m<f;++m){var v=e[m],y=v[0],w=v[1],_=v[2],T=i(_);h.globalAlpha=T,h.drawImage(s,y-u,w-u)}if(!d.width||!d.height)return d;for(var A=h.getImageData(0,0,d.width,d.height),C=A.data,k=0,M=C.length,P=this.minOpacity,O=this.maxOpacity,j=O-P;k<M;){var T=C[k+3]/256,L=Math.floor(T*(Swt-1))*4;if(T>0){var B=o(T)?l:c;T>0&&(T=T*j+P),C[k++]=B[L],C[k++]=B[L+1],C[k++]=B[L+2],C[k++]=B[L+3]*T*256}else k+=4}return h.putImageData(A,0,0),d},n.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=wy.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},n.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},n}();function Ewt(n,e,t){var r=n[1]-n[0];e=$e(e,function(o){return{interval:[(o.interval[0]-n[0])/r,(o.interval[1]-n[0])/r]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&t[s]}}function Awt(n,e){var t=n[1]-n[0];return e=[(e[0]-n[0])/t,(e[1]-n[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function Gde(n){var e=n.dimensions;return e[0]==="lng"&&e[1]==="lat"}var kwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):Gde(o)&&this._renderOnGeo(o,t,a,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,a){var o=r.coordinateSystem;o&&(Gde(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Fy(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,i,a,o){var s=t.coordinateSystem,l=hx(s,"cartesian2d"),c,u,d,h;if(l){var f=s.getAxis("x"),m=s.getAxis("y");c=f.getBandWidth()+.5,u=m.getBandWidth()+.5,d=f.scale.getExtent(),h=m.scale.getExtent()}for(var v=this.group,y=t.getData(),w=t.getModel(["emphasis","itemStyle"]).getItemStyle(),_=t.getModel(["blur","itemStyle"]).getItemStyle(),T=t.getModel(["select","itemStyle"]).getItemStyle(),A=t.get(["itemStyle","borderRadius"]),C=po(t),k=t.getModel("emphasis"),M=k.get("focus"),P=k.get("blurScope"),O=k.get("disabled"),j=l?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],L=i;L<a;L++){var B=void 0,$=y.getItemVisual(L,"style");if(l){var Y=y.get(j[0],L),G=y.get(j[1],L);if(isNaN(y.get(j[2],L))||isNaN(Y)||isNaN(G)||Y<d[0]||Y>d[1]||G<h[0]||G>h[1])continue;var W=s.dataToPoint([Y,G]);B=new Hn({shape:{x:W[0]-c/2,y:W[1]-u/2,width:c,height:u},style:$})}else{if(isNaN(y.get(j[1],L)))continue;B=new Hn({z2:1,shape:s.dataToRect([y.get(j[0],L)]).contentShape,style:$})}if(y.hasItemOption){var X=y.getItemModel(L),te=X.getModel("emphasis");w=te.getModel("itemStyle").getItemStyle(),_=X.getModel(["blur","itemStyle"]).getItemStyle(),T=X.getModel(["select","itemStyle"]).getItemStyle(),A=X.get(["itemStyle","borderRadius"]),M=te.get("focus"),P=te.get("blurScope"),O=te.get("disabled"),C=po(X)}B.shape.r=A;var re=t.getRawValue(L),z="-";re&&re[2]!=null&&(z=re[2]+""),os(B,C,{labelFetcher:t,labelDataIndex:L,defaultOpacity:$.opacity,defaultText:z}),B.ensureState("emphasis").style=w,B.ensureState("blur").style=_,B.ensureState("select").style=T,Vi(B,M,P,O),B.incremental=o,o&&(B.states.emphasis.hoverLayer=!0),v.add(B),y.setItemGraphicEl(L,B),this._progressiveEls&&this._progressiveEls.push(B)}},e.prototype._renderOnGeo=function(t,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new Twt;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),d=t.getRoamTransform();u.applyTransform(d);var h=Math.max(u.x,0),f=Math.max(u.y,0),m=Math.min(u.width+u.x,a.getWidth()),v=Math.min(u.height+u.y,a.getHeight()),y=m-h,w=v-f,_=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],T=l.mapArray(_,function(M,P,O){var j=t.dataToPoint([M,P]);return j[0]-=h,j[1]-=f,j.push(O),j}),A=i.getExtent(),C=i.type==="visualMap.continuous"?Awt(A,i.option.range):Ewt(A,i.getPieceList(),i.option.selected);c.update(T,y,w,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},C);var k=new Fo({style:{width:y,height:w,x:h,y:f,image:c.canvas},silent:!0});this.group.add(k)},e.type="heatmap",e}(Vr),Cwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return rm(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=IM.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(ai);function Dwt(n){n.registerChartView(kwt),n.registerSeriesModel(Cwt)}var Iwt=["itemStyle","borderWidth"],qde=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],kV=new nm,Mwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),d=l.master.getRect(),h={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:qde[+u],categoryDim:qde[1-+u]};o.diff(s).add(function(m){if(o.hasValue(m)){var v=Yde(o,m),y=Wde(o,m,v,h),w=Kde(o,h,y);o.setItemGraphicEl(m,w),a.add(w),Zde(w,h,y)}}).update(function(m,v){var y=s.getItemGraphicEl(v);if(!o.hasValue(m)){a.remove(y);return}var w=Yde(o,m),_=Wde(o,m,w,h),T=Gke(o,_);y&&T!==y.__pictorialShapeStr&&(a.remove(y),o.setItemGraphicEl(m,null),y=null),y?Fwt(y,h,_):y=Kde(o,h,_,!0),o.setItemGraphicEl(m,y),y.__pictorialSymbolMeta=_,a.add(y),Zde(y,h,_)}).remove(function(m){var v=s.getItemGraphicEl(m);v&&Xde(s,m,v.__pictorialSymbolMeta.animationModel,v)}).execute();var f=t.get("clip",!0)?LM(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var i=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(o){Xde(a,$t(o).dataIndex,t,o)}):i.removeAll()},e.type="pictorialBar",e}(Vr);function Wde(n,e,t,r){var i=n.getItemLayout(e),a=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,d=t.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:t,symbolType:n.getItemVisual(e,"symbol")||"circle",style:n.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:d?t:null,hoverScale:d&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};Pwt(t,a,i,r,h),Owt(n,e,i,a,o,h.boundingLength,h.pxSign,u,r,h),Rwt(t,h.symbolScale,c,r,h);var f=h.symbolSize,m=ux(t.get("symbolOffset"),f);return Nwt(t,f,i,a,o,m,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,r,h),h}function Pwt(n,e,t,r,i){var a=r.valueDim,o=n.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(t[a.wh]<=0),u;if(Fe(o)){var d=[CV(s,o[0])-l,CV(s,o[1])-l];d[1]<d[0]&&d.reverse(),u=d[c]}else o!=null?u=CV(s,o)-l:e?u=r.coordSysExtent[a.index][c]-l:u=t[a.wh];i.boundingLength=u,e&&(i.repeatCutLength=t[a.wh]);var h=a.xy==="x",f=s.inverse;i.pxSign=h&&!f||!h&&f?u>=0?1:-1:u>0?1:-1}function CV(n,e){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(e)))}function Owt(n,e,t,r,i,a,o,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(t[d.wh]),f=n.getItemVisual(e,"symbolSize"),m;Fe(f)?m=f.slice():f==null?m=["100%","100%"]:m=[f,f],m[d.index]=Ze(m[d.index],h),m[u.index]=Ze(m[u.index],r?h:Math.abs(a)),c.symbolSize=m;var v=c.symbolScale=[m[0]/s,m[1]/s];v[u.index]*=(l.isHorizontal?-1:1)*o}function Rwt(n,e,t,r,i){var a=n.get(Iwt)||0;a&&(kV.attr({scaleX:e[0],scaleY:e[1],rotation:t}),kV.updateTransform(),a/=kV.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function Nwt(n,e,t,r,i,a,o,s,l,c,u,d){var h=u.categoryDim,f=u.valueDim,m=d.pxSign,v=Math.max(e[f.index]+s,0),y=v;if(r){var w=Math.abs(l),_=Ro(n.get("symbolMargin"),"15%")+"",T=!1;_.lastIndexOf("!")===_.length-1&&(T=!0,_=_.slice(0,_.length-1));var A=Ze(_,e[f.index]),C=Math.max(v+A*2,0),k=T?0:A*2,M=KSe(r),P=M?r:Qde((w+k)/C),O=w-P*v;A=O/2/(T?P:Math.max(P-1,1)),C=v+A*2,k=T?0:A*2,!M&&r!=="fixed"&&(P=c?Qde((Math.abs(c)+k)/C):0),y=P*C-k,d.repeatTimes=P,d.symbolMargin=A}var j=m*(y/2),L=d.pathPosition=[];L[h.index]=t[h.wh]/2,L[f.index]=o==="start"?j:o==="end"?l-j:l/2,a&&(L[0]+=a[0],L[1]+=a[1]);var B=d.bundlePosition=[];B[h.index]=t[h.xy],B[f.index]=t[f.xy];var $=d.barRectShape=Ie({},t);$[f.wh]=m*Math.max(Math.abs(t[f.wh]),Math.abs(L[f.index]+j)),$[h.wh]=t[h.wh];var Y=d.clipShape={};Y[h.xy]=-t[h.xy],Y[h.wh]=u.ecSize[h.wh],Y[f.xy]=0,Y[f.wh]=t[f.wh]}function Bke(n){var e=n.symbolPatternSize,t=Pa(n.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function Uke(n,e,t,r){var i=n.__pictorialBundle,a=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,c=t.repeatTimes||0,u=0,d=a[e.valueDim.index]+o+t.symbolMargin*2;for(sX(n,function(v){v.__pictorialAnimationIndex=u,v.__pictorialRepeatTimes=c,u<c?T1(v,null,m(u),t,r):T1(v,null,{scaleX:0,scaleY:0},t,r,function(){i.remove(v)}),u++});u<c;u++){var h=Bke(t);h.__pictorialAnimationIndex=u,h.__pictorialRepeatTimes=c,i.add(h);var f=m(u);T1(h,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function m(v){var y=s.slice(),w=t.pxSign,_=v;return(t.symbolRepeatDirection==="start"?w>0:w<0)&&(_=c-1-v),y[l.index]=d*(_-c/2+.5)+s[l.index],{x:y[0],y:y[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function Vke(n,e,t,r){var i=n.__pictorialBundle,a=n.__pictorialMainPath;a?T1(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=n.__pictorialMainPath=Bke(t),i.add(a),T1(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function zke(n,e,t){var r=Ie({},e.barRectShape),i=n.__pictorialBarRect;i?T1(i,null,{shape:r},e,t):(i=n.__pictorialBarRect=new Hn({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,n.add(i))}function Hke(n,e,t,r){if(t.symbolClip){var i=n.__pictorialClipPath,a=Ie({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(i)tr(i,{shape:a},s,l);else{a[o.wh]=0,i=new Hn({shape:a}),n.__pictorialBundle.setClipPath(i),n.__pictorialClipPath=i;var c={};c[o.wh]=t.clipShape[o.wh],cx[r?"updateProps":"initProps"](i,{shape:c},s,l)}}}function Yde(n,e){var t=n.getItemModel(e);return t.getAnimationDelayParams=Lwt,t.isAnimationEnabled=jwt,t}function Lwt(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function jwt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Kde(n,e,t,r){var i=new Lt,a=new Lt;return i.add(a),i.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?Uke(i,e,t):Vke(i,e,t),zke(i,t,r),Hke(i,e,t,r),i.__pictorialShapeStr=Gke(n,t),i.__pictorialSymbolMeta=t,i}function Fwt(n,e,t){var r=t.animationModel,i=t.dataIndex,a=n.__pictorialBundle;tr(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,i),t.symbolRepeat?Uke(n,e,t,!0):Vke(n,e,t,!0),zke(n,t,!0),Hke(n,e,t,!0)}function Xde(n,e,t,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];sX(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),Z(a,function(o){_y(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(e,null)}function Gke(n,e){return[n.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function sX(n,e,t){Z(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&e.call(t,r)})}function T1(n,e,t,r,i,a){e&&n.attr(e),r.symbolClip&&!i?t&&n.attr(t):t&&cx[i?"updateProps":"initProps"](n,t,r.animationModel,r.dataIndex,a)}function Zde(n,e,t){var r=t.dataIndex,i=t.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),c=i.getShallow("cursor"),u=a.get("focus"),d=a.get("blurScope"),h=a.get("scale");sX(n,function(v){if(v instanceof Fo){var y=v.style;v.useStyle(Ie({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},t.style))}else v.useStyle(t.style);var w=v.ensureState("emphasis");w.style=o,h&&(w.scaleX=v.scaleX*1.1,w.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,c&&(v.cursor=c),v.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],m=n.__pictorialBarRect;m.ignoreClip=!0,os(m,po(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:pT(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),Vi(n,u,d,a.get("disabled"))}function Qde(n){var e=Math.round(n);return Math.abs(n-e)<1e-4?e:Math.ceil(n)}var $wt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,n.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=$y(xI.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(xI);function Bwt(n){n.registerChartView(Mwt),n.registerSeriesModel($wt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Yt(CEe,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,DEe("pictorialBar"))}var Uwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),c=a.getLayout("layoutInfo"),u=c.rect,d=c.boundaryGap;s.x=0,s.y=u.y+d[0];function h(y){return y.name}var f=new Vg(this._layersSeries||[],l,h,h),m=[];f.add(ct(v,this,"add")).update(ct(v,this,"update")).remove(ct(v,this,"remove")).execute();function v(y,w,_){var T=o._layers;if(y==="remove"){s.remove(T[w]);return}for(var A=[],C=[],k,M=l[w].indices,P=0;P<M.length;P++){var O=a.getItemLayout(M[P]),j=O.x,L=O.y0,B=O.y;A.push(j,L),C.push(j,L+B),k=a.getItemVisual(M[P],"style")}var $,Y=a.getItemLayout(M[0]),G=t.getModel("label"),W=G.get("margin"),X=t.getModel("emphasis");if(y==="add"){var te=m[w]=new Lt;$=new vAe({shape:{points:A,stackedOnPoints:C,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),te.add($),s.add(te),t.isAnimationEnabled()&&$.setClipPath(Vwt($.getBoundingRect(),t,function(){$.removeClipPath()}))}else{var te=T[_];$=te.childAt(0),s.add(te),m[w]=te,tr($,{shape:{points:A,stackedOnPoints:C}},t),lh($)}os($,po(t),{labelDataIndex:M[P-1],defaultText:a.getName(M[P-1]),inheritColor:k.fill},{normal:{verticalAlign:"middle"}}),$.setTextConfig({position:null,local:!0});var re=$.getTextContent();re&&(re.x=Y.x-W,re.y=Y.y0+Y.y/2),$.useStyle(k),a.setItemGraphicEl(w,$),as($,t),Vi($,X.get("focus"),X.get("blurScope"),X.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(Vr);function Vwt(n,e,t){var r=new Hn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Si(r,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},e,t),r}var DV=2,zwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new $M(ct(this.getData,this),ct(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,i={},a=c8(t,function(h){return i.hasOwnProperty(h[0]+"")||(i[h[0]+""]=-1),h[2]}),o=[];a.buckets.each(function(h,f){o.push({name:f,dataList:h})});for(var s=o.length,l=0;l<s;++l){for(var c=o[l].name,u=0;u<o[l].dataList.length;++u){var d=o[l].dataList[u][0]+"";i[d]=l}for(var d in i)i.hasOwnProperty(d)&&i[d]!==l&&(i[d]=l,t[r]=[d,0,c],r++)}return t},e.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",Ma).models[0],a=i.get("type"),o=gr(t.data,function(m){return m[2]!==void 0}),s=this.fixData(o||[]),l=[],c=this.nameMap=pt(),u=0,d=0;d<s.length;++d)l.push(s[d][DV]),c.get(s[d][DV])||(c.set(s[d][DV],u),u++);var h=PM(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:cL(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new gl(h,this);return f.initData(s),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],a=0;a<r;++a)i[a]=a;var o=t.mapDimension("single"),s=c8(i,function(c){return t.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(d,h){return t.get(o,d)-t.get(o,h)}),l.push({name:u,indices:c})}),l},e.prototype.getAxisTooltipData=function(t,r,i){Fe(t)||(t=t?[t]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,c,u=0;u<l;++u){for(var d=Number.MAX_VALUE,h=-1,f=o[u].indices.length,m=0;m<f;++m){var v=a.get(t[0],o[u].indices[m]),y=Math.abs(v-r);y<=d&&(c=v,d=y,h=o[u].indices[m])}s.push(h)}return{dataIndices:s,nestestValue:c}},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getName(t),s=a.get(a.mapDimension("value"),t);return go("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(ai);function Hwt(n,e){n.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=t.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=Ze(s[0],o.height),s[1]=Ze(s[1],o.height);var c=o.height-s[0]-s[1];Jde(r,t,c)}else{s[0]=Ze(s[0],o.width),s[1]=Ze(s[1],o.width);var u=o.width-s[0]-s[1];Jde(r,t,u)}r.setLayout("layoutInfo",a)})}function Jde(n,e,t){if(n.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=n.mapDimension("single"),o=n.mapDimension("value"),s=$e(i,function(y){return $e(y.indices,function(w){var _=r.dataToPoint(n.get(a,w));return _[1]=n.get(o,w),_})}),l=Gwt(s),c=l.y0,u=t/l.max,d=i.length,h=i[0].indices.length,f,m=0;m<h;++m){f=c[m]*u,n.setItemLayout(i[0].indices[m],{layerIndex:0,x:s[0][m][0],y0:f,y:s[0][m][1]*u});for(var v=1;v<d;++v)f+=s[v-1][m][1]*u,n.setItemLayout(i[v].indices[m],{layerIndex:v,x:s[v][m][0],y0:f,y:s[v][m][1]*u})}}function Gwt(n){for(var e=n.length,t=n[0].length,r=[],i=[],a=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=n[l][o][1];s>a&&(a=s),r.push(s)}for(var c=0;c<t;++c)i[c]=(a-r[c])/2;a=0;for(var u=0;u<t;++u){var d=r[u]+i[u];d>a&&(a=d)}return{y0:i,max:a}}function qwt(n){n.registerChartView(Uwt),n.registerSeriesModel(zwt),n.registerLayout(Hwt),n.registerProcessor(FM("themeRiver"))}var Wwt=2,Ywt=4,ehe=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this)||this;o.z2=Wwt,o.textConfig={inside:!0},$t(o).seriesIndex=r.seriesIndex;var s=new Yn({z2:Ywt,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,r,i,a),o}return e.prototype.updateData=function(t,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;$t(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),d=Ie({},u);d.label=null;var h=r.getVisual("style");h.lineJoin="bevel";var f=r.getVisual("decal");f&&(h.decal=hT(f,o));var m=fw(l.getModel("itemStyle"),d,!0);Ie(d,m),Z(yl,function(_){var T=s.ensureState(_),A=l.getModel([_,"itemStyle"]);T.style=A.getItemStyle();var C=fw(A,d);C&&(T.shape=C)}),t?(s.setShape(d),s.shape.r=u.r0,Si(s,{shape:{r:u.r}},i,r.dataIndex)):(tr(s,{shape:d},i),lh(s)),s.useStyle(h),this._updateLabel(i);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var y=c.get("focus"),w=y==="relative"?rI(r.getAncestorsIndices(),r.getDescendantIndices()):y==="ancestor"?r.getAncestorsIndices():y==="descendant"?r.getDescendantIndices():y;Vi(this,w,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),u=Math.sin(l),d=this,h=d.getTextContent(),f=this.node.dataIndex,m=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(m!=null&&Math.abs(s)<m);h.ignore=!v,Z(cI,function(w){var _=w==="normal"?i.getModel("label"):i.getModel([w,"label"]),T=w==="normal",A=T?h:h.ensureState(w),C=t.getFormattedLabel(f,w);T&&(C=C||r.node.name),A.style=ri(_,{},null,w!=="normal",!0),C&&(A.style.text=C);var k=_.get("show");k!=null&&!T&&(A.ignore=!k);var M=y(_,"position"),P=T?d:d.states[w],O=P.style.fill;P.textConfig={outsideFill:_.get("color")==="inherit"?O:null,inside:M!=="outside"};var j,L=y(_,"distance")||0,B=y(_,"align"),$=y(_,"rotate"),Y=Math.PI*.5,G=Math.PI*1.5,W=jc($==="tangential"?Math.PI/2-l:l),X=W>Y&&!sI(W-Y)&&W<G;M==="outside"?(j=o.r+L,B=X?"right":"left"):!B||B==="center"?(s===2*Math.PI&&o.r0===0?j=0:j=(o.r+o.r0)/2,B="center"):B==="left"?(j=o.r0+L,B=X?"right":"left"):B==="right"&&(j=o.r-L,B=X?"left":"right"),A.style.align=B,A.style.verticalAlign=y(_,"verticalAlign")||"middle",A.x=j*c+o.cx,A.y=j*u+o.cy;var te=0;$==="radial"?te=jc(-l)+(X?Math.PI:0):$==="tangential"?te=jc(Math.PI/2-l)+(X?Math.PI:0):Jn($)&&(te=$*Math.PI/180),A.rotation=jc(te)});function y(w,_){var T=w.get(_);return T??a.get(_)}h.dirtyStyle()},e}(bl),cG="sunburstRootToNode",the="sunburstHighlight",Kwt="sunburstUnhighlight";function Xwt(n){n.registerAction({type:cG,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var o=SI(e,[cG],i);if(o){var s=i.getViewRoot();s&&(e.direction=GK(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),n.registerAction({type:the,update:"none"},function(e,t,r){e=Ie({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=SI(e,[the],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(Ie(e,{type:"highlight"}))}),n.registerAction({type:Kwt,update:"updateView"},function(e,t,r){e=Ie({},e),r.dispatchAction(Ie(e,{type:"downplay"}))})}var Zwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){var o=this;this.seriesModel=t,this.api=i,this.ecModel=r;var s=t.getData(),l=s.tree.root,c=t.getViewRoot(),u=this.group,d=t.get("renderLabelForZeroData"),h=[];c.eachNode(function(_){h.push(_)});var f=this._oldChildren||[];m(h,f),w(l,c),this._initEvents(),this._oldChildren=h;function m(_,T){if(_.length===0&&T.length===0)return;new Vg(T,_,A,A).add(C).update(C).remove(Yt(C,null)).execute();function A(k){return k.getId()}function C(k,M){var P=k==null?null:_[k],O=M==null?null:T[M];v(P,O)}}function v(_,T){if(!d&&_&&!_.getValue()&&(_=null),_!==l&&T!==l){if(T&&T.piece)_?(T.piece.updateData(!1,_,t,r,i),s.setItemGraphicEl(_.dataIndex,T.piece)):y(T);else if(_){var A=new ehe(_,t,r,i);u.add(A),s.setItemGraphicEl(_.dataIndex,A)}}}function y(_){_&&_.piece&&(u.remove(_.piece),_.piece=null)}function w(_,T){T.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,_,t,r,i):(o.virtualPiece=new ehe(_,t,r,i),u.add(o.virtualPiece)),T.piece.off("click"),o.virtualPiece.on("click",function(A){o._rootToNode(T.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";tL(c,u)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:cG,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(Vr),Qwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};qke(i);var a=this._levelModels=$e(t.levels||[],function(l){return new br(l,this,r)},this),o=HK.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var d=o.getNodeByDataIndex(u),h=a[d.depth];return h&&(c.parentModel=h),c})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=iF(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){ZAe(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(ai);function qke(n){var e=0;Z(n.children,function(r){qke(r);var i=r.value;Fe(i)&&(i=i[0]),e+=i});var t=n.value;Fe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Fe(n.value)?n.value[0]=t:n.value=t}var nhe=Math.PI/180;function Jwt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.get("center"),a=r.get("radius");Fe(a)||(a=[0,a]),Fe(i)||(i=[i,i]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),c=Ze(i[0],o),u=Ze(i[1],s),d=Ze(a[0],l/2),h=Ze(a[1],l/2),f=-r.get("startAngle")*nhe,m=r.get("minAngle")*nhe,v=r.getData().tree.root,y=r.getViewRoot(),w=y.depth,_=r.get("sort");_!=null&&Wke(y,_);var T=0;Z(y.children,function(W){!isNaN(W.getValue())&&T++});var A=y.getValue(),C=Math.PI/(A||T)*2,k=y.depth>0,M=y.height-(k?-1:1),P=(h-d)/(M||1),O=r.get("clockwise"),j=r.get("stillShowZeroSum"),L=O?1:-1,B=function(W,X){if(W){var te=X;if(W!==v){var re=W.getValue(),z=A===0&&j?C:re*C;z<m&&(z=m),te=X+L*z;var ae=W.depth-w-(k?-1:1),le=d+P*ae,ee=d+P*(ae+1),ye=r.getLevelModel(W);if(ye){var fe=ye.get("r0",!0),Ce=ye.get("r",!0),at=ye.get("radius",!0);at!=null&&(fe=at[0],Ce=at[1]),fe!=null&&(le=Ze(fe,l/2)),Ce!=null&&(ee=Ze(Ce,l/2))}W.setLayout({angle:z,startAngle:X,endAngle:te,clockwise:O,cx:c,cy:u,r0:le,r:ee})}if(W.children&&W.children.length){var Le=0;Z(W.children,function(we){Le+=B(we,X+Le)})}return te-X}};if(k){var $=d,Y=d+P,G=Math.PI*2;v.setLayout({angle:G,startAngle:f,endAngle:f+G,clockwise:O,cx:c,cy:u,r0:$,r:Y})}B(y,f)})}function Wke(n,e){var t=n.children||[];n.children=ext(t,e),t.length&&Z(n.children,function(r){Wke(r,e)})}function ext(n,e){if(Et(e)){var t=$e(n,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return t.sort(function(i,a){return e(i.params,a.params)}),$e(t,function(i){return n[i.index]})}else{var r=e==="asc";return n.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function txt(n){var e={};function t(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&it(s)&&(s=ZH(s,(r.depth-1)/(a-1)*.5)),s}n.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,r,a.root.height));var c=i.ensureUniqueItemVisual(o.dataIndex,"style");Ie(c,l)})})}function nxt(n){n.registerChartView(Zwt),n.registerSeriesModel(Qwt),n.registerLayout(Yt(Jwt,"sunburst")),n.registerProcessor(Yt(FM,"sunburst")),n.registerVisual(txt),Xwt(n)}var rhe={color:"fill",borderColor:"stroke"},rxt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},kg=Gn(),ixt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return rm(null,this)},e.prototype.getDataParams=function(t,r,i){var a=n.prototype.getDataParams.call(this,t,r);return i&&(a.info=kg(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(ai);function axt(n,e){return e=e||[0,0],$e(["x","y"],function(t,r){var i=this.getAxis(t),a=e[r],o=n[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function oxt(n){var e=n.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:ct(axt,n)}}}function sxt(n,e){return e=e||[0,0],$e([0,1],function(t){var r=e[t],i=n[t]/2,a=[],o=[];return a[t]=r-i,o[t]=r+i,a[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(o)[t])},this)}function lxt(n){var e=n.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:ct(sxt,n)}}}function cxt(n,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,i=(n instanceof Array?n[0]:n)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-i)-t.dataToCoord(r+i))}function uxt(n){var e=n.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:ct(cxt,n)}}}function dxt(n,e){return e=e||[0,0],$e(["Radius","Angle"],function(t,r){var i="get"+t+"Axis",a=this[i](),o=e[r],s=n[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function hxt(n){var e=n.getRadiusAxis(),t=n.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),o=t.dataToAngle(i[1]),s=n.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:ct(dxt,n)}}}function fxt(n){var e=n.getRect(),t=n.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,i){return n.dataToPoint(r,i)}}}}function Yke(n,e,t,r){return n&&(n.legacy||n.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||dt(n,"text")))}function Kke(n,e,t){var r=n,i,a,o;if(e==="text")o=r;else{o={},dt(r,"text")&&(o.text=r.text),dt(r,"rich")&&(o.rich=r.rich),dt(r,"textFill")&&(o.fill=r.textFill),dt(r,"textStroke")&&(o.stroke=r.textStroke),dt(r,"fontFamily")&&(o.fontFamily=r.fontFamily),dt(r,"fontSize")&&(o.fontSize=r.fontSize),dt(r,"fontStyle")&&(o.fontStyle=r.fontStyle),dt(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=dt(r,"textPosition");t?i.position=s?r.textPosition:"inside":s&&(i.position=r.textPosition),dt(r,"textPosition")&&(i.position=r.textPosition),dt(r,"textOffset")&&(i.offset=r.textOffset),dt(r,"textRotation")&&(i.rotation=r.textRotation),dt(r,"textDistance")&&(i.distance=r.textDistance)}return ihe(o,n),Z(o.rich,function(l){ihe(l,l)}),{textConfig:i,textContent:a}}function ihe(n,e){e&&(e.font=e.textFont||e.font,dt(e,"textStrokeWidth")&&(n.lineWidth=e.textStrokeWidth),dt(e,"textAlign")&&(n.align=e.textAlign),dt(e,"textVerticalAlign")&&(n.verticalAlign=e.textVerticalAlign),dt(e,"textLineHeight")&&(n.lineHeight=e.textLineHeight),dt(e,"textWidth")&&(n.width=e.textWidth),dt(e,"textHeight")&&(n.height=e.textHeight),dt(e,"textBackgroundColor")&&(n.backgroundColor=e.textBackgroundColor),dt(e,"textPadding")&&(n.padding=e.textPadding),dt(e,"textBorderColor")&&(n.borderColor=e.textBorderColor),dt(e,"textBorderWidth")&&(n.borderWidth=e.textBorderWidth),dt(e,"textBorderRadius")&&(n.borderRadius=e.textBorderRadius),dt(e,"textBoxShadowColor")&&(n.shadowColor=e.textBoxShadowColor),dt(e,"textBoxShadowBlur")&&(n.shadowBlur=e.textBoxShadowBlur),dt(e,"textBoxShadowOffsetX")&&(n.shadowOffsetX=e.textBoxShadowOffsetX),dt(e,"textBoxShadowOffsetY")&&(n.shadowOffsetY=e.textBoxShadowOffsetY))}function ahe(n,e,t){var r=n;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var i=r.textPosition.indexOf("inside")>=0,a=n.fill||"#000";ohe(r,e);var o=r.textFill==null;return i?o&&(r.textFill=t.insideFill||"#fff",!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=n.fill||t.outsideFill||"#000"),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,Z(e.rich,function(s){ohe(s,s)}),r}function ohe(n,e){e&&(dt(e,"fill")&&(n.textFill=e.fill),dt(e,"stroke")&&(n.textStroke=e.fill),dt(e,"lineWidth")&&(n.textStrokeWidth=e.lineWidth),dt(e,"font")&&(n.font=e.font),dt(e,"fontStyle")&&(n.fontStyle=e.fontStyle),dt(e,"fontWeight")&&(n.fontWeight=e.fontWeight),dt(e,"fontSize")&&(n.fontSize=e.fontSize),dt(e,"fontFamily")&&(n.fontFamily=e.fontFamily),dt(e,"align")&&(n.textAlign=e.align),dt(e,"verticalAlign")&&(n.textVerticalAlign=e.verticalAlign),dt(e,"lineHeight")&&(n.textLineHeight=e.lineHeight),dt(e,"width")&&(n.textWidth=e.width),dt(e,"height")&&(n.textHeight=e.height),dt(e,"backgroundColor")&&(n.textBackgroundColor=e.backgroundColor),dt(e,"padding")&&(n.textPadding=e.padding),dt(e,"borderColor")&&(n.textBorderColor=e.borderColor),dt(e,"borderWidth")&&(n.textBorderWidth=e.borderWidth),dt(e,"borderRadius")&&(n.textBorderRadius=e.borderRadius),dt(e,"shadowColor")&&(n.textBoxShadowColor=e.shadowColor),dt(e,"shadowBlur")&&(n.textBoxShadowBlur=e.shadowBlur),dt(e,"shadowOffsetX")&&(n.textBoxShadowOffsetX=e.shadowOffsetX),dt(e,"shadowOffsetY")&&(n.textBoxShadowOffsetY=e.shadowOffsetY),dt(e,"textShadowColor")&&(n.textShadowColor=e.textShadowColor),dt(e,"textShadowBlur")&&(n.textShadowBlur=e.textShadowBlur),dt(e,"textShadowOffsetX")&&(n.textShadowOffsetX=e.textShadowOffsetX),dt(e,"textShadowOffsetY")&&(n.textShadowOffsetY=e.textShadowOffsetY))}var Xke={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},she=In(Xke);Lf(Ff,function(n,e){return n[e]=1,n},{});Ff.join(", ");var xL=["","style","shape","extra"],vT=Gn();function lX(n,e,t,r,i){var a=n+"Animation",o=GT(n,r,i)||{},s=vT(e).userDuring;return o.duration>0&&(o.during=s?ct(yxt,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=n),Ie(o,t[a]),o}function uN(n,e,t,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=t.isAnimationEnabled(),l=vT(n),c=e.style;l.userDuring=e.during;var u={},d={};if(wxt(n,e,d),che("shape",e,d),che("extra",e,d),!a&&s&&(bxt(n,e,u),lhe("shape",n,e,u),lhe("extra",n,e,u),xxt(n,e,c,u)),d.style=c,pxt(n,d,o),mxt(n,e),s)if(a){var h={};Z(xL,function(m){var v=m?e[m]:e;v&&v.enterFrom&&(m&&(h[m]=h[m]||{}),Ie(m?h[m]:h,v.enterFrom))});var f=lX("enter",n,e,t,i);f.duration>0&&n.animateFrom(h,f)}else gxt(n,e,i||0,t,u);Zke(n,e),c?n.dirty():n.markRedraw()}function Zke(n,e){for(var t=vT(n).leaveToProps,r=0;r<xL.length;r++){var i=xL[r],a=i?e[i]:e;a&&a.leaveTo&&(t||(t=vT(n).leaveToProps={}),i&&(t[i]=t[i]||{}),Ie(i?t[i]:t,a.leaveTo))}}function sF(n,e,t,r){if(n){var i=n.parent,a=vT(n).leaveToProps;if(a){var o=lX("update",n,e,t,0);o.done=function(){i.remove(n)},n.animateTo(a,o)}else i.remove(n)}}function Dw(n){return n==="all"}function pxt(n,e,t){var r=e.style;if(!n.isGroup&&r){if(t){n.useStyle({});for(var i=n.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(n.style)}}n.setStyle(r)}e&&(e.style=null,e&&n.attr(e),e.style=r)}function gxt(n,e,t,r,i){if(i){var a=lX("update",n,e,r,t);a.duration>0&&n.animateFrom(i,a)}}function mxt(n,e){dt(e,"silent")&&(n.silent=e.silent),dt(e,"ignore")&&(n.ignore=e.ignore),n instanceof Yu&&dt(e,"invisible")&&(n.invisible=e.invisible),n instanceof wn&&dt(e,"autoBatch")&&(n.autoBatch=e.autoBatch)}var of={},vxt={setTransform:function(n,e){return of.el[n]=e,this},getTransform:function(n){return of.el[n]},setShape:function(n,e){var t=of.el,r=t.shape||(t.shape={});return r[n]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(n){var e=of.el.shape;if(e)return e[n]},setStyle:function(n,e){var t=of.el,r=t.style;return r&&(r[n]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(n){var e=of.el.style;if(e)return e[n]},setExtra:function(n,e){var t=of.el.extra||(of.el.extra={});return t[n]=e,this},getExtra:function(n){var e=of.el.extra;if(e)return e[n]}};function yxt(){var n=this,e=n.el;if(e){var t=vT(e).userDuring,r=n.userDuring;if(t!==r){n.el=n.userDuring=null;return}of.el=e,r(vxt)}}function lhe(n,e,t,r){var i=t[n];if(i){var a=e[n],o;if(a){var s=t.transition,l=i.transition;if(l)if(!o&&(o=r[n]={}),Dw(l))Ie(o,a);else for(var c=Or(l),u=0;u<c.length;u++){var d=c[u],h=a[d];o[d]=h}else if(Dw(s)||dn(s,n)>=0){!o&&(o=r[n]={});for(var f=In(a),u=0;u<f.length;u++){var d=f[u],h=a[d];_xt(i[d],h)&&(o[d]=h)}}}}}function che(n,e,t){var r=e[n];if(r)for(var i=t[n]={},a=In(r),o=0;o<a.length;o++){var s=a[o];i[s]=MC(r[s])}}function bxt(n,e,t){for(var r=e.transition,i=Dw(r)?Ff:Or(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=n[o];t[o]=s}}}function wxt(n,e,t){for(var r=0;r<she.length;r++){var i=she[r],a=Xke[i],o=e[i];o&&(t[a[0]]=o[0],t[a[1]]=o[1])}for(var r=0;r<Ff.length;r++){var s=Ff[r];e[s]!=null&&(t[s]=e[s])}}function xxt(n,e,t,r){if(t){var i=n.style,a;if(i){var o=t.transition,s=e.transition;if(o&&!Dw(o)){var l=Or(o);!a&&(a=r.style={});for(var c=0;c<l.length;c++){var u=l[c],d=i[u];a[u]=d}}else if(n.getAnimationStyleProps&&(Dw(s)||Dw(o)||dn(s,"style")>=0)){var h=n.getAnimationStyleProps(),f=h?h.style:null;if(f){!a&&(a=r.style={});for(var m=In(t),c=0;c<m.length;c++){var u=m[c];if(f[u]){var d=i[u];a[u]=d}}}}}}}function _xt(n,e){return Fs(n)?n!==e:n!=null&&isFinite(n)}var Qke=Gn(),Sxt=["percent","easing","shape","style","extra"];function Jke(n){n.stopAnimation("keyframe"),n.attr(Qke(n))}function _L(n,e,t){if(!(!t.isAnimationEnabled()||!e)){if(Fe(e)){Z(e,function(s){_L(n,s,t)});return}var r=e.keyframes,i=e.duration;if(t&&i==null){var a=GT("enter",t,0);i=a&&a.duration}if(!(!r||!i)){var o=Qke(n);Z(xL,function(s){if(!(s&&!n[s])){var l;r.sort(function(c,u){return c.percent-u.percent}),Z(r,function(c){var u=n.animators,d=s?c[s]:c;if(d){var h=In(d);if(s||(h=gr(h,function(v){return dn(Sxt,v)<0})),!!h.length){l||(l=n.animate(s,e.loop,!0),l.scope="keyframe");for(var f=0;f<u.length;f++)u[f]!==l&&u[f].targetName===l.targetName&&u[f].stopTracks(h);s&&(o[s]=o[s]||{});var m=s?o[s]:o;Z(h,function(v){m[v]=((s?n[s]:n)||{})[v]}),l.whenWithKeys(i*c.percent,d,h,c.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var Cg="emphasis",Qv="normal",cX="blur",uX="select",Ay=[Qv,Cg,cX,uX],IV={normal:["itemStyle"],emphasis:[Cg,"itemStyle"],blur:[cX,"itemStyle"],select:[uX,"itemStyle"]},MV={normal:["label"],emphasis:[Cg,"label"],blur:[cX,"label"],select:[uX,"label"]},Txt=["x","y"],Ext="e\0\0",Su={normal:{},emphasis:{},blur:{},select:{}},Axt={cartesian2d:oxt,geo:lxt,single:uxt,polar:hxt,calendar:fxt};function uG(n){return n instanceof wn}function dG(n){return n instanceof Yu}function kxt(n,e){e.copyTransform(n),dG(e)&&dG(n)&&(e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e.invisible=n.invisible,e.ignore=n.ignore,uG(e)&&uG(n)&&e.setShape(n.shape))}var Cxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,c=uhe(t,s,r,i);o||l.removeAll(),s.diff(o).add(function(d){PV(i,null,d,c(d,a),t,l,s)}).remove(function(d){var h=o.getItemGraphicEl(d);h&&sF(h,kg(h).option,t)}).update(function(d,h){var f=o.getItemGraphicEl(h);PV(i,f,d,c(d,a),t,l,s)}).execute();var u=t.get("clip",!0)?LM(t.coordinateSystem,!1,t):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,i,a,o){var s=r.getData(),l=uhe(r,s,i,a),c=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var d=t.start;d<t.end;d++){var h=PV(null,null,d,l(d,o),r,this.group,s);h&&(h.traverse(u),c.push(h))}},e.prototype.eachRendered=function(t){Fy(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,i,a){var o=r.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},e.type="custom",e}(Vr);function dX(n){var e=n.type,t;if(e==="path"){var r=n.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=nCe(r);t=j5(a,null,i,r.layout||"center"),kg(t).customPathData=a}else if(e==="image")t=new Fo({}),kg(t).customImagePath=n.style.image;else if(e==="text")t=new Yn({});else if(e==="group")t=new Lt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=JY(e);if(!o){var s="";fr(s)}t=new o}return kg(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function hX(n,e,t,r,i,a,o){Jke(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),r&&r.transition==null&&(r.transition=Txt);var l=r&&r.style;if(l){if(e.type==="text"){var c=l;dt(c,"textFill")&&(c.fill=c.textFill),dt(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,d=uG(e)?l.decal:null;n&&d&&(d.dirty=!0,u=hT(d,n)),l.__decalPattern=u}if(dG(e)&&l){var u=l.__decalPattern;u&&(l.decal=u)}uN(e,r,a,{dataIndex:t,isInit:o,clearStyle:!0}),_L(e,r.keyframeAnimation,a)}function eCe(n,e,t,r,i){var a=e.isGroup?null:e,o=i&&i[n].cfg;if(a){var s=a.ensureState(n);if(r===!1){var l=a.getState(n);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),Yw(a)}}function Dxt(n,e,t){if(!n.isGroup){var r=n,i=t.currentZ,a=t.currentZLevel;r.z=i,r.zlevel=a;var o=e.z2;o!=null&&(r.z2=o||0);for(var s=0;s<Ay.length;s++)Ixt(r,e,Ay[s])}}function Ixt(n,e,t){var r=t===Qv,i=r?e:SL(e,t),a=i?i.z2:null,o;a!=null&&(o=r?n:n.ensureState(t),o.z2=a||0)}function uhe(n,e,t,r){var i=n.get("renderItem"),a=n.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):Axt[a.type](a));for(var s=kt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:A,style:k,ordinalRawValue:C,styleEmphasis:M,visual:j,barLayout:L,currentSeriesIndices:B,font:$},o.api||{}),l={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:Mxt(n.getData())},c,u,d={},h={},f={},m={},v=0;v<Ay.length;v++){var y=Ay[v];f[y]=n.getModel(IV[y]),m[y]=n.getModel(MV[y])}function w(Y){return Y===c?u||(u=e.getItemModel(Y)):e.getItemModel(Y)}function _(Y,G){return e.hasItemOption?Y===c?d[G]||(d[G]=w(Y).getModel(IV[G])):w(Y).getModel(IV[G]):f[G]}function T(Y,G){return e.hasItemOption?Y===c?h[G]||(h[G]=w(Y).getModel(MV[G])):w(Y).getModel(MV[G]):m[G]}return function(Y,G){return c=Y,u=null,d={},h={},i&&i(kt({dataIndexInside:Y,dataIndex:e.getRawIndex(Y),actionType:G?G.type:null},l),s)};function A(Y,G){return G==null&&(G=c),e.getStore().get(e.getDimensionIndex(Y||0),G)}function C(Y,G){G==null&&(G=c),Y=Y||0;var W=e.getDimensionInfo(Y);if(!W){var X=e.getDimensionIndex(Y);return X>=0?e.getStore().get(X,G):void 0}var te=e.get(W.name,G),re=W&&W.ordinalMeta;return re?re.categories[te]:te}function k(Y,G){G==null&&(G=c);var W=e.getItemVisual(G,"style"),X=W&&W.fill,te=W&&W.opacity,re=_(G,Qv).getItemStyle();X!=null&&(re.fill=X),te!=null&&(re.opacity=te);var z={inheritColor:it(X)?X:"#000"},ae=T(G,Qv),le=ri(ae,null,z,!1,!0);le.text=ae.getShallow("show")?Gt(n.getFormattedLabel(G,Qv),pT(e,G)):null;var ee=J2(ae,z,!1);return O(Y,re),re=ahe(re,le,ee),Y&&P(re,Y),re.legacy=!0,re}function M(Y,G){G==null&&(G=c);var W=_(G,Cg).getItemStyle(),X=T(G,Cg),te=ri(X,null,null,!0,!0);te.text=X.getShallow("show")?Df(n.getFormattedLabel(G,Cg),n.getFormattedLabel(G,Qv),pT(e,G)):null;var re=J2(X,null,!0);return O(Y,W),W=ahe(W,te,re),Y&&P(W,Y),W.legacy=!0,W}function P(Y,G){for(var W in G)dt(G,W)&&(Y[W]=G[W])}function O(Y,G){Y&&(Y.textFill&&(G.textFill=Y.textFill),Y.textPosition&&(G.textPosition=Y.textPosition))}function j(Y,G){if(G==null&&(G=c),dt(rhe,Y)){var W=e.getItemVisual(G,"style");return W?W[rhe[Y]]:null}if(dt(rxt,Y))return e.getItemVisual(G,Y)}function L(Y){if(a.type==="cartesian2d"){var G=a.getBaseAxis();return wft(kt({axis:G},Y))}}function B(){return t.getCurrentSeriesIndices()}function $(Y){return eK(Y,t)}}function Mxt(n){var e={};return Z(n.dimensions,function(t){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=n.getDimensionIndex(t)}}),e}function PV(n,e,t,r,i,a,o){if(!r){a.remove(e);return}var s=fX(n,e,t,r,i,a);return s&&o.setItemGraphicEl(t,s),s&&Vi(s,r.focus,r.blurScope,r.emphasisDisabled),s}function fX(n,e,t,r,i,a){var o=-1,s=e;e&&tCe(e,r,i)&&(o=dn(a.childrenRef(),e),e=null);var l=!e,c=e;c?c.clearStates():(c=dX(r),s&&kxt(s,c)),r.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Su.normal.cfg=Su.normal.conOpt=Su.emphasis.cfg=Su.emphasis.conOpt=Su.blur.cfg=Su.blur.conOpt=Su.select.cfg=Su.select.conOpt=null,Su.isLegacy=!1,Oxt(c,t,r,i,l,Su),Pxt(c,t,r,i,l),hX(n,c,t,r,Su,i,l),dt(r,"info")&&(kg(c).info=r.info);for(var u=0;u<Ay.length;u++){var d=Ay[u];if(d!==Qv){var h=SL(r,d),f=pX(r,h,d);eCe(d,c,h,f,Su)}}return Dxt(c,r,i),r.type==="group"&&Rxt(n,c,t,r,i),o>=0?a.replaceAt(c,o):a.add(c),c}function tCe(n,e,t){var r=kg(n),i=e.type,a=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&Fxt(a)&&nCe(a)!==r.customPathData||i==="image"&&dt(o,"image")&&o.image!==r.customImagePath}function Pxt(n,e,t,r,i){var a=t.clipPath;if(a===!1)n&&n.getClipPath()&&n.removeClipPath();else if(a){var o=n.getClipPath();o&&tCe(o,a,r)&&(o=null),o||(o=dX(a),n.setClipPath(o)),hX(null,o,e,a,null,r,i)}}function Oxt(n,e,t,r,i,a){if(!n.isGroup){dhe(t,null,a),dhe(t,Cg,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,c=a.select.conOpt;if(o!=null||s!=null||c!=null||l!=null){var u=n.getTextContent();if(o===!1)u&&n.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=dX(o),n.setTextContent(u)),hX(null,u,e,o,null,r,i);for(var d=o&&o.style,h=0;h<Ay.length;h++){var f=Ay[h];if(f!==Qv){var m=a[f].conOpt;eCe(f,u,m,pX(o,m,f),null)}}d?u.dirty():u.markRedraw()}}}}function dhe(n,e,t){var r=e?SL(n,e):n,i=e?pX(n,r,Cg):n.style,a=n.type,o=r?r.textConfig:null,s=n.textContent,l=s?e?SL(s,e):s:null;if(i&&(t.isLegacy||Yke(i,a,!!o,!!l))){t.isLegacy=!0;var c=Kke(i,a,!e);!o&&c.textConfig&&(o=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var d=e?t[e]:t.normal;d.cfg=o,d.conOpt=l}function SL(n,e){return e?n?n[e]:null:n}function pX(n,e,t){var r=e&&e.style;return r==null&&t===Cg&&n&&(r=n.styleEmphasis),r}function Rxt(n,e,t,r,i){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,c=s===!1;if(!(!o&&!l&&!c)){if(l){Lxt({api:n,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:i,group:e});return}c&&e.removeAll();for(var u=0;u<o;u++){var d=a[u],h=e.childAt(u);d?(d.ignore==null&&(d.ignore=!1),fX(n,h,t,d,i,e)):h.ignore=!0}for(var f=e.childCount()-1;f>=u;f--){var m=e.childAt(f);Nxt(e,m,i)}}}function Nxt(n,e,t){e&&sF(e,kg(n).option,t)}function Lxt(n){new Vg(n.oldChildren,n.newChildren,hhe,hhe,n).add(fhe).update(fhe).remove(jxt).execute()}function hhe(n,e){var t=n&&n.name;return t??Ext+e}function fhe(n,e){var t=this.context,r=n!=null?t.newChildren[n]:null,i=e!=null?t.oldChildren[e]:null;fX(t.api,i,t.dataIndex,r,t.seriesModel,t.group)}function jxt(n){var e=this.context,t=e.oldChildren[n];t&&sF(t,kg(t).option,e.seriesModel)}function nCe(n){return n&&(n.pathData||n.d)}function Fxt(n){return n&&(dt(n,"pathData")||dt(n,"d"))}function $xt(n){n.registerChartView(Cxt),n.registerSeriesModel(ixt)}var Yb=Gn(),phe=Rt,OV=ct,gX=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,a,e,t,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new Lt,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),r.getZr().add(s);else{var h=Yt(ghe,t,d);this.updatePointerEl(s,c,h),this.updateLabelEl(s,c,h,t)}vhe(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=jK(e).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var o=Yb(e).pointerEl=new cx[a.type](phe(t.pointer));e.add(o)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=Yb(e).labelEl=new Yn(phe(t.label));e.add(a),mhe(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=Yb(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=Yb(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),mhe(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=DM(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Fg(c.event)},onmousedown:OV(this._onHandleDragMove,this,0,0),drift:OV(this._onHandleDragMove,this),ondragend:OV(this._onHandleDragEnd,this)}),r.add(i)),vhe(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Fe(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,QT(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},n.prototype._moveHandleToValue=function(e,t){ghe(this._axisPointerModel,!t&&this._moveAnimation,this._handle,RV(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(RV(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(RV(i)),Yb(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),gI(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function ghe(n,e,t,r){rCe(Yb(t).lastProp,r)||(Yb(t).lastProp=r,e?tr(t,r,n):(t.stopAnimation(),t.attr(r)))}function rCe(n,e){if(It(n)&&It(e)){var t=!0;return Z(e,function(r,i){t=t&&rCe(n[i],r)}),!!t}else return n===e}function mhe(n,e){n[e.get(["label","show"])?"show":"hide"]()}function RV(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function vhe(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}function mX(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function iCe(n,e,t,r,i){var a=t.get("value"),o=aCe(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=YT(s.get("padding")||0),c=s.getFont(),u=_M(o,c),d=i.position,h=u.width+l[1]+l[3],f=u.height+l[0]+l[2],m=i.align;m==="right"&&(d[0]-=h),m==="center"&&(d[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(d[1]-=f),v==="middle"&&(d[1]-=f/2),Bxt(d,h,f,r);var y=s.get("backgroundColor");(!y||y==="auto")&&(y=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:ri(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:y}),z2:10}}function Bxt(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function aCe(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),o=i.formatter;if(o){var s={value:AK(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Z(r,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&s.seriesData.push(d)}),it(o)?a=o.replace("{value}",a):Et(o)&&(a=o(s))}return a}function vX(n,e,t){var r=Bc();return sx(r,r,t.rotation),jf(r,r,t.position),nh([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function oCe(n,e,t,r,i,a){var o=ml.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),iCe(e,r,i,a,{position:vX(r.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function yX(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function sCe(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function yhe(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var Uxt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.grid,c=a.get("type"),u=bhe(l,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var h=mX(a),f=Vxt[c](s,d,u);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=G8(l.model,i);oCe(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=G8(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=vX(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),c=bhe(s,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,d=[t.x,t.y];d[u]+=r[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var h=(c[1]+c[0])/2,f=[h,h];f[u]=d[u];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:f,tooltipOption:m[u]}},e}(gX);function bhe(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var Vxt={line:function(n,e,t){var r=yX([e,t[0]],[e,t[1]],whe(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:sCe([e-r/2,t[0]],[r,i],whe(n))}}};function whe(n){return n.dim==="x"?0:1}var zxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Dn),gg=Gn(),Hxt=Z;function lCe(n,e,t){if(!Tn.node){var r=e.getZr();gg(r).records||(gg(r).records={}),Gxt(r,e);var i=gg(r).records[n]||(gg(r).records[n]={});i.handler=t}}function Gxt(n,e){if(gg(n).initialized)return;gg(n).initialized=!0,t("click",Yt(xhe,"click")),t("mousemove",Yt(xhe,"mousemove")),t("globalout",Wxt);function t(r,i){n.on(r,function(a){var o=Yxt(e);Hxt(gg(n).records,function(s){s&&i(s,a,o.dispatchAction)}),qxt(o.pendings,e)})}}function qxt(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Wxt(n,e,t){n.handler("leave",null,t)}function xhe(n,e,t,r){e.handler(n,t,r)}function Yxt(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function hG(n,e){if(!Tn.node){var t=e.getZr(),r=(gg(t).records||{})[n];r&&(gg(t).records[n]=null)}}var Kxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";lCe("axisPointer",i,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){hG("axisPointer",r)},e.prototype.dispose=function(t,r){hG("axisPointer",r)},e.type="axisPointer",e}(Ni);function cCe(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=qw(a,n);if(o==null||o<0||Fe(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,h=c.dim,f=d==="x"||d==="radius"?1:0,m=a.mapDimension(h),v=[];v[f]=a.get(m,o),v[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(v)||[]}else t=l.dataToPoint(a.getValues($e(l.dimensions,function(w){return a.mapDimension(w)}),o))||[];else if(s){var y=s.getBoundingRect().clone();y.applyTransform(s.transform),t=[y.x+y.width/2,y.y+y.height/2]}return{point:t,el:s}}var _he=Gn();function Xxt(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,o=n.dispatchAction||ct(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){dN(i)&&(i=cCe({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=dN(i),c=a.axesInfo,u=s.axesInfo,d=r==="leave"||dN(i),h={},f={},m={list:[],map:{}},v={showPointer:Yt(Qxt,f),showTooltip:Yt(Jxt,m)};Z(s.coordSysMap,function(w,_){var T=l||w.containPoint(i);Z(s.coordSysAxesInfo[_],function(A,C){var k=A.axis,M=r_t(c,A);if(!d&&T&&(!c||M)){var P=M&&M.value;P==null&&!l&&(P=k.pointToData(i)),P!=null&&She(A,P,v,!1,h)}})});var y={};return Z(u,function(w,_){var T=w.linkGroup;T&&!f[_]&&Z(T.axesInfo,function(A,C){var k=f[C];if(A!==w&&k){var M=k.value;T.mapper&&(M=w.axis.scale.parse(T.mapper(M,The(A),The(w)))),y[w.key]=M}})}),Z(y,function(w,_){She(u[_],w,v,!0,h)}),e_t(f,u,h),t_t(m,i,n,o),n_t(u,o,t),h}}function She(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var o=Zxt(e,n),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&Ie(i,s[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,s),t.showTooltip(n,o,l)}}function Zxt(n,e){var t=e.axis,r=t.dim,i=n,a=[],o=Number.MAX_VALUE,s=-1;return Z(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),d,h;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,n,t);h=f.dataIndices,d=f.nestestValue}else{if(h=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!h.length)return;d=l.getData().get(u[0],h[0])}if(!(d==null||!isFinite(d))){var m=n-d,v=Math.abs(m);v<=o&&((v<o||m>=0&&s<0)&&(o=v,s=m,i=d,a.length=0),Z(h,function(y){a.push({seriesIndex:l.seriesIndex,dataIndexInside:y,dataIndex:l.getData().getRawIndex(y)})}))}}),{payloadBatch:a,snapToValue:i}}function Qxt(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function Jxt(n,e,t,r){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,c=_I(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function e_t(n,e,t){var r=t.axesInfo=[];Z(e,function(i,a){var o=i.axisPointerModel.option,s=n[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function t_t(n,e,t,r){if(dN(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function n_t(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=_he(r)[i]||{},o=_he(r)[i]={};Z(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&Z(d.seriesDataIndices,function(h){var f=h.seriesIndex+" | "+h.dataIndex;o[f]=h})});var s=[],l=[];Z(a,function(c,u){!o[u]&&l.push(c)}),Z(o,function(c,u){!a[u]&&s.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function r_t(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function The(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function dN(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function VM(n){fx.registerAxisPointerClass("CartesianAxisPointer",Uxt),n.registerComponentModel(zxt),n.registerComponentView(Kxt),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Fe(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=fmt(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Xxt)}function i_t(n){yn(jAe),yn(VM)}var a_t=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),d=s.dataToCoord(r),h=a.get("type");if(h&&h!=="none"){var f=mX(a),m=s_t[h](s,l,d,u);m.style=f,t.graphicKey=m.type,t.pointer=m}var v=a.get(["label","margin"]),y=o_t(r,i,a,l,v);iCe(t,i,a,o,y)},e}(gX);function o_t(n,e,t,r,i){var a=e.axis,o=a.dataToCoord(n),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),c,u,d;if(a.dim==="radius"){var h=Bc();sx(h,h,s),jf(h,h,[r.cx,r.cy]),c=nh([o,-i],h);var f=e.getModel("axisLabel").get("rotate")||0,m=ml.innerTextLayout(s,f*Math.PI/180,-1);u=m.textAlign,d=m.textVerticalAlign}else{var v=l[1];c=r.coordToPoint([v+i,o]);var y=r.cx,w=r.cy;u=Math.abs(c[0]-y)/v<.3?"center":c[0]>y?"left":"right",d=Math.abs(c[1]-w)/v<.3?"middle":c[1]>w?"top":"bottom"}return{position:c,align:u,verticalAlign:d}}var s_t={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:yX(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:yhe(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:yhe(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}},l_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Dn),bX=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Ma).models[0]},e.type="polarAxis",e}(Dn);Oa(bX,OM);var c_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(bX),u_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(bX),wX=function(n){_e(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(dh);wX.prototype.dataToRadius=dh.prototype.dataToCoord;wX.prototype.radiusToData=dh.prototype.coordToData;var d_t=Gn(),xX=function(n){_e(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),c=Math.abs(l),u=_M(s==null?"":s+"",r.getFont(),"center","top"),d=Math.max(u.height,7),h=d/c;isNaN(h)&&(h=1/0);var f=Math.max(0,Math.floor(h)),m=d_t(t.model),v=m.lastAutoInterval,y=m.lastTickCount;return v!=null&&y!=null&&Math.abs(v-f)<=1&&Math.abs(y-o)<=1&&v>f?f=v:(m.lastTickCount=o,m.lastAutoInterval=f),f},e}(dh);xX.prototype.dataToAngle=dh.prototype.dataToCoord;xX.prototype.angleToData=dh.prototype.coordToData;var uCe=["radius","angle"],h_t=function(){function n(e){this.dimensions=uCe,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new wX,this._angleAxis=new xX,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},n.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var c=Math.atan2(-r,t)/Math.PI*180,u=c<o?1:-1;c<o||c>s;)c+=u*360;return[l,c]},n.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[i,a]},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(s,l){var c=s-this.cx,u=l-this.cy,d=c*c+u*u,h=this.r,f=this.r0;return h!==f&&d-o<=h*h&&d+o>=f*f}}},n.prototype.convertToPixel=function(e,t,r){var i=Ehe(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Ehe(t);return i===this?this.pointToData(r):null},n}();function Ehe(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function f_t(n,e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight();n.cx=Ze(r[0],i),n.cy=Ze(r[1],a);var o=n.getRadiusAxis(),s=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:Fe(l)||(l=[0,l]);var c=[Ze(l[0],s),Ze(l[1],s)];o.inverse?o.setExtent(c[1],c[0]):o.setExtent(c[0],c[1])}function p_t(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();Z(uL(l,"radius"),function(c){i.scale.unionExtentFromData(l,c)}),Z(uL(l,"angle"),function(c){r.scale.unionExtentFromData(l,c)})}}),fT(r.scale,r.model),fT(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function g_t(n){return n.mainType==="angleAxis"}function Ahe(n,e){var t;if(n.type=e.get("type"),n.scale=eF(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),g_t(e)){n.inverse=n.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(n.inverse?-360:360);n.setExtent(r,i)}e.axis=n,n.model=e}var m_t={dimensions:uCe,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new h_t(i+"");a.update=p_t;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");Ahe(o,l),Ahe(s,c),f_t(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Ma).models[0];r.coordinateSystem=i.coordinateSystem}}),t}},v_t=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function uR(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function dR(n){var e=n.getRadiusAxis();return e.inverse?0:1}function khe(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var y_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),c=$e(i.getViewLabels(),function(u){u=Rt(u);var d=i.scale,h=d.type==="ordinal"?d.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=i.dataToCoord(h),u});khe(c),khe(s),Z(v_t,function(u){t.get([u,"show"])&&(!i.scale.isBlank()||u==="axisLine")&&b_t[u](this.group,t,a,s,l,o,c)},this)}},e.type="angleAxis",e}(fx),b_t={axisLine:function(n,e,t,r,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=dR(t),d=u?0:1,h,f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";a[d]===0?h=new cx[f]({shape:{cx:t.cx,cy:t.cy,r:a[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):h=new EM({shape:{cx:t.cx,cy:t.cy,r:a[u],r0:a[d]},style:o.getLineStyle(),z2:1,silent:!0}),h.style.fill=null,n.add(h)},axisTick:function(n,e,t,r,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[dR(t)],c=$e(r,function(u){return new co({shape:uR(t,[l,l+s],u.coord)})});n.add(Lu(c,{style:kt(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),c=a[dR(t)],u=[],d=0;d<i.length;d++)for(var h=0;h<i[d].length;h++)u.push(new co({shape:uR(t,[c,c+l],i[d][h].coord)}));n.add(Lu(u,{style:kt(s.getModel("lineStyle").getLineStyle(),kt(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");Z(o,function(d,h){var f=l,m=d.tickValue,v=a[dR(t)],y=t.coordToPoint([v+c,d.coord]),w=t.cx,_=t.cy,T=Math.abs(y[0]-w)/v<.3?"center":y[0]>w?"left":"right",A=Math.abs(y[1]-_)/v<.3?"middle":y[1]>_?"top":"bottom";if(s&&s[m]){var C=s[m];It(C)&&C.textStyle&&(f=new br(C.textStyle,l,l.ecModel))}var k=new Yn({silent:ml.isLabelSilent(e),style:ri(f,{x:y[0],y:y[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:T,verticalAlign:A})});if(n.add(k),u){var M=ml.makeAxisEventDataBase(e);M.targetType="axisLabel",M.value=d.rawLabel,$t(k).eventData=M}},this)},splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=0;d<r.length;d++){var h=c++%l.length;u[h]=u[h]||[],u[h].push(new co({shape:uR(t,a,r[d].coord)}))}for(var d=0;d<u.length;d++)n.add(Lu(u[d],{style:kt({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],c=0;c<i.length;c++)for(var u=0;u<i[c].length;u++)l.push(new co({shape:uR(t,a,i[c][u].coord)}));n.add(Lu(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=Math.PI/180,h=-r[0].coord*d,f=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),v=e.get("clockwise"),y=1,w=r.length;y<=w;y++){var _=y===w?r[0].coord:r[y].coord,T=c++%l.length;u[T]=u[T]||[],u[T].push(new bl({shape:{cx:t.cx,cy:t.cy,r0:f,r:m,startAngle:h,endAngle:-_*d,clockwise:v},silent:!0})),h=-_*d}for(var y=0;y<u.length;y++)n.add(Lu(u[y],{style:kt({fill:l[y%l.length]},s.getAreaStyle()),silent:!0}))}}},w_t=["axisLine","axisTickLabel","axisName"],x_t=["splitLine","splitArea","minorSplitLine"],__t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,a=this._axisGroup=new Lt;this.group.add(a);var o=t.axis,s=o.polar,l=s.getAngleAxis(),c=o.getTicksCoords(),u=o.getMinorTicksCoords(),d=l.getExtent()[0],h=o.getExtent(),f=T_t(s,t,d),m=new ml(t,f);Z(w_t,m.add,m),a.add(m.getGroup()),CM(i,a,t),Z(x_t,function(v){t.get([v,"show"])&&!o.scale.isBlank()&&S_t[v](this.group,t,s,d,h,c,u)},this)}},e.type="radiusAxis",e}(fx),S_t={splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0,u=t.getAngleAxis(),d=Math.PI/180,h=u.getExtent(),f=Math.abs(h[1]-h[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],v=0;v<a.length;v++){var y=c++%l.length;m[y]=m[y]||[],m[y].push(new cx[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[v].coord,0),startAngle:-h[0]*d,endAngle:-h[1]*d,clockwise:u.inverse}}))}for(var v=0;v<m.length;v++)n.add(Lu(m[v],{style:kt({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<o.length;u++)for(var d=0;d<o[u].length;d++)c.push(new nm({shape:{cx:t.cx,cy:t.cy,r:o[u][d].coord}}));n.add(Lu(c,{style:kt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=a[0].coord,h=1;h<a.length;h++){var f=c++%l.length;u[f]=u[f]||[],u[f].push(new bl({shape:{cx:t.cx,cy:t.cy,r0:d,r:a[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=a[h].coord}for(var h=0;h<u.length;h++)n.add(Lu(u[h],{style:kt({fill:l[h%l.length]},s.getAreaStyle()),silent:!0}))}}};function T_t(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function dCe(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function hCe(n,e){return e.dim+n.model.componentIndex}function E_t(n,e,t){var r={},i=A_t(gr(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),c=hCe(s,l),u=dCe(a),d=i[c][u],h=d.offset,f=d.width,m=s.getOtherAxis(l),v=a.coordinateSystem.cx,y=a.coordinateSystem.cy,w=a.get("barMinHeight")||0,_=a.get("barMinAngle")||0;r[u]=r[u]||[];for(var T=o.mapDimension(m.dim),A=o.mapDimension(l.dim),C=Ty(o,T),k=l.dim!=="radius"||!a.get("roundCap",!0),M=m.model,P=M.get("startValue"),O=m.dataToCoord(P||0),j=0,L=o.count();j<L;j++){var B=o.get(T,j),$=o.get(A,j),Y=B>=0?"p":"n",G=O;C&&(r[u][$]||(r[u][$]={p:O,n:O}),G=r[u][$][Y]);var W=void 0,X=void 0,te=void 0,re=void 0;if(m.dim==="radius"){var z=m.dataToCoord(B)-O,ae=l.dataToCoord($);Math.abs(z)<w&&(z=(z<0?-1:1)*w),W=G,X=G+z,te=ae-h,re=te-f,C&&(r[u][$][Y]=X)}else{var le=m.dataToCoord(B,k)-O,ee=l.dataToCoord($);Math.abs(le)<_&&(le=(le<0?-1:1)*_),W=ee+h,X=W+f,te=G,re=G+le,C&&(r[u][$][Y]=re)}o.setItemLayout(j,{cx:v,cy:y,r0:W,r:X,startAngle:-te*Math.PI/180,endAngle:-re*Math.PI/180,clockwise:te>=re})}}})}function A_t(n){var e={};Z(n,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=hCe(o,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/a.count(),d=e[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=d.stacks;e[l]=d;var f=dCe(r);h[f]||d.autoWidthCount++,h[f]=h[f]||{width:0,maxWidth:0};var m=Ze(r.get("barWidth"),u),v=Ze(r.get("barMaxWidth"),u),y=r.get("barGap"),w=r.get("barCategoryGap");m&&!h[f].width&&(m=Math.min(d.remainedWidth,m),h[f].width=m,d.remainedWidth-=m),v&&(h[f].maxWidth=v),y!=null&&(d.gap=y),w!=null&&(d.categoryGap=w)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=Ze(r.categoryGap,o),l=Ze(r.gap,1),c=r.remainedWidth,u=r.autoWidthCount,d=(c-s)/(u+(u-1)*l);d=Math.max(d,0),Z(a,function(v,y){var w=v.maxWidth;w&&w<d&&(w=Math.min(w,c),v.width&&(w=Math.min(w,v.width)),c-=w,v.width=w,u--)}),d=(c-s)/(u+(u-1)*l),d=Math.max(d,0);var h=0,f;Z(a,function(v,y){v.width||(v.width=d),f=v,h+=v.width*(1+l)}),f&&(h-=f.width*l);var m=-h/2;Z(a,function(v,y){t[i][y]=t[i][y]||{offset:m,width:v.width},m+=v.width*(1+l)})}),t}var k_t={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},C_t={splitNumber:5},D_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(Ni);function I_t(n){yn(VM),fx.registerAxisPointerClass("PolarAxisPointer",a_t),n.registerCoordinateSystem("polar",m_t),n.registerComponentModel(l_t),n.registerComponentView(D_t),gT(n,"angle",c_t,k_t),gT(n,"radius",u_t,C_t),n.registerComponentView(y_t),n.registerComponentView(__t),n.registerLayout(Yt(E_t,"bar"))}function fG(n,e){e=e||{};var t=n.coordinateSystem,r=n.axis,i={},a=r.position,o=r.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?c.vertical[a]:l[0],o==="horizontal"?c.horizontal[a]:l[3]];var u={horizontal:0,vertical:1};i.rotation=Math.PI/2*u[o];var d={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=d[a],n.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Ro(e.labelInside,n.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var h=e.rotate;return h==null&&(h=n.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-h:h,i.z2=1,i}var M_t=["axisLine","axisTickLabel","axisName"],P_t=["splitArea","splitLine"],O_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new Lt;var l=fG(t),c=new ml(t,l);Z(M_t,c.add,c),o.add(this._axisGroup),o.add(c.getGroup()),Z(P_t,function(u){t.get([u,"show"])&&R_t[u](this,this.group,this._axisGroup,t)},this),CM(s,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)},e.prototype.remove=function(){RAe(this)},e.type="singleAxis",e}(fx),R_t={splitLine:function(n,e,t,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),c=r.coordinateSystem.getRect(),u=i.isHorizontal(),d=[],h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=0;y<f.length;++y){var w=i.toGlobalCoord(f[y].coord);u?(m[0]=w,m[1]=c.y,v[0]=w,v[1]=c.y+c.height):(m[0]=c.x,m[1]=w,v[0]=c.x+c.width,v[1]=w);var _=new co({shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},silent:!0});uT(_.shape,l);var T=h++%s.length;d[T]=d[T]||[],d[T].push(_)}for(var A=o.getLineStyle(["color"]),y=0;y<d.length;++y)e.add(Lu(d[y],{style:kt({stroke:s[y%s.length]},A),silent:!0}))}},splitArea:function(n,e,t,r){OAe(n,t,r,r)}},hN=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Dn);Oa(hN,OM.prototype);var N_t=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e}(dh),fCe=["single"],L_t=function(){function n(e,t,r){this.type="single",this.dimension="single",this.dimensions=fCe,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=this.dimension,a=new N_t(i,eF(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},n.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();Z(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),fT(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(e,t){this._rect=Za({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},n.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return i-o+t}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},n.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),i=[],a=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},n.prototype.convertToPixel=function(e,t,r){var i=Che(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Che(t);return i===this?this.pointToData(r):null},n}();function Che(n){var e=n.seriesModel,t=n.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function j_t(n,e){var t=[];return n.eachComponent("singleAxis",function(r,i){var a=new L_t(r,n,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",Ma).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),t}var F_t={create:j_t,dimensions:fCe},Dhe=["x","y"],$_t=["width","height"],B_t=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.coordinateSystem,c=NV(l,1-TL(s)),u=l.dataToPoint(r)[0],d=a.get("type");if(d&&d!=="none"){var h=mX(a),f=U_t[d](s,u,c);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=fG(i);oCe(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=fG(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=vX(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.coordinateSystem,l=TL(o),c=NV(s,l),u=[t.x,t.y];u[l]+=r[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var d=NV(s,1-l),h=(d[1]+d[0])/2,f=[h,h];return f[l]=u[l],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(gX),U_t={line:function(n,e,t){var r=yX([e,t[0]],[e,t[1]],TL(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=n.getBandWidth(),i=t[1]-t[0];return{type:"Rect",shape:sCe([e-r/2,t[0]],[r,i],TL(n))}}};function TL(n){return n.isHorizontal()?0:1}function NV(n,e){var t=n.getRect();return[t[Dhe[e]],t[Dhe[e]]+t[$_t[e]]]}var V_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(Ni);function z_t(n){yn(VM),fx.registerAxisPointerClass("SingleAxisPointer",B_t),n.registerComponentView(V_t),n.registerComponentView(O_t),n.registerComponentModel(hN),gT(n,"single",hN,hN.defaultOption),n.registerCoordinateSystem("single",F_t)}var H_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=KT(t);n.prototype.init.apply(this,arguments),Ihe(t,a)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),Ihe(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Dn);function Ihe(n,e){var t=n.cellSize,r;Fe(t)?r=t:r=n.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var i=$e([0,1],function(a){return dut(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});Sy(n,e,{type:"box",ignoreSize:i})}var G_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,c,l,a),this._renderWeekText(t,c,s,l,a)},e.prototype._renderDayRect=function(t,r,i){for(var a=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=r.start.time;c<=r.end.time;c=a.getNextNDay(c,1).time){var u=a.dataToRect([c],!1).tl,d=new Hn({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:o});i.add(d)}},e.prototype._renderLines=function(t,r,i,a){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=r.start,h=0;d.time<=r.end.time;h++){m(d.formatedDate),h===0&&(d=s.getDateInfo(r.start.y+"-"+r.start.m));var f=d.date;f.setMonth(f.getMonth()+1),d=s.getDateInfo(f)}m(s.getNextNDay(r.end.time,1).formatedDate);function m(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var y=o._getLinePointsOfOneWeek(t,v,i);o._tlpoints.push(y[0]),o._blpoints.push(y[y.length-1]),c&&o._drawSplitline(y,l,a)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,i),l,a),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,i),l,a)},e.prototype._getEdgesPoints=function(t,r,i){var a=[t[0].slice(),t[t.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},e.prototype._drawSplitline=function(t,r,i){var a=new xl({z2:20,shape:{points:t},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var a=t.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var c=a.getNextNDay(o.time,l),u=a.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[i==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,r){return it(t)&&t?lut(t,r):Et(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,i,a,o){var s=r[0],l=r[1],c=["center","bottom"];a==="bottom"?(l+=o,c=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,c=["center","top"]):l-=o;var u=0;return(a==="left"||a==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,r,i,a){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,d=(c[0][1]+c[1][1])/2,h=i==="horizontal"?0:1,f={top:[u,c[h][1]],bottom:[u,c[1-h][1]],left:[c[1-h][0],d],right:[c[h][0],d]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var v=o.get("formatter"),y={start:r.start.y,end:r.end.y,nameMap:m},w=this._formatterLabel(v,y),_=new Yn({z2:30,style:ri(o,{text:w}),silent:o.get("silent")});_.attr(this._yearTextPositionControl(_,f[l],i,l,s)),a.add(_)}},e.prototype._monthTextPositionControl=function(t,r,i,a,o){var s="left",l="top",c=t[0],u=t[1];return i==="horizontal"?(u=u+o,r&&(s="center"),a==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),a==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,i,a){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),u=o.get("align"),d=[this._tlpoints,this._blpoints];(!s||it(s))&&(s&&(r=x8(s)||r),s=r.get(["time","monthAbbr"])||[]);var h=c==="start"?0:1,f=i==="horizontal"?0:1;l=c==="start"?-l:l;for(var m=u==="center",v=o.get("silent"),y=0;y<d[h].length-1;y++){var w=d[h][y].slice(),_=this._firstDayOfMonth[y];if(m){var T=this._firstDayPoints[y];w[f]=(T[f]+d[0][y+1][f])/2}var A=o.get("formatter"),C=s[+_.m-1],k={yyyy:_.y,yy:(_.y+"").slice(2),MM:_.m,M:+_.m,nameMap:C},M=this._formatterLabel(A,k),P=new Yn({z2:30,style:Ie(ri(o,{text:M}),this._monthTextPositionControl(w,m,i,c,l)),silent:v});a.add(P)}}},e.prototype._weekTextPositionControl=function(t,r,i,a,o){var s="center",l="middle",c=t[0],u=t[1],d=i==="start";return r==="horizontal"?(c=c+a+(d?1:-1)*o[0]/2,s=d?"right":"left"):(u=u+a+(d?1:-1)*o[1]/2,l=d?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,i,a,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!u||it(u)){u&&(r=x8(u)||r);var f=r.get(["time","dayOfWeekShort"]);u=f||$e(r.get(["time","dayOfWeekAbbr"]),function(k){return k[0]})}var m=l.getNextNDay(i.end.time,7-i.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];d=Ze(d,Math.min(v[1],v[0])),c==="start"&&(m=l.getNextNDay(i.start.time,-(7+i.fweek)).time,d=-d);for(var y=s.get("silent"),w=0;w<7;w++){var _=l.getNextNDay(m,w),T=l.dataToRect([_.time],!1).center,A=w;A=Math.abs((w+h)%7);var C=new Yn({z2:30,style:Ie(ri(s,{text:u[A]}),this._weekTextPositionControl(T,a,c,d,v)),silent:y});o.add(C)}}},e.type="calendar",e}(Ni),LV=864e5,q_t=function(){function n(e,t,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=$f(e);var t=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+i+"-"+o,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];Z([0,1],function(d){u(a,d)&&(o[i[d]]=a[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=Za(o,l);Z([0,1],function(d){u(a,d)||(a[d]=c[i[d]]/s[d])});function u(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=a[0],this._sh=a[1]},n.prototype.dataToPoint=function(e,t){Fe(e)&&(e=e[0]),t==null&&(t=!0);var r=this.getDateInfo(e),i=this._rangeInfo,a=r.formatedDate;if(t&&!(r.time>=i.start.time&&r.time<i.end.time+LV))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},n.prototype.convertToPixel=function(e,t,r){var i=Mhe(t);return i===this?i.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Mhe(t);return i===this?i.pointToData(r):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(Fe(e)&&e.length===1&&(e=e[0]),Fe(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var i=Math.floor(t[1].time/LV)-Math.floor(t[0].time/LV)+1,a=new Date(t[0].time),o=a.getDate(),s=t[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*c>0;)i-=c,a.setDate(l-c);var u=Math.floor((i+t[0].day+6)/7),d=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:u,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var a=(e-1)*7-i.fweek+t,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},n.create=function(e,t){var r=[];return e.eachComponent("calendar",function(i){var a=new n(i);r.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function Mhe(n){var e=n.calendarModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function W_t(n){n.registerComponentModel(H_t),n.registerComponentView(G_t),n.registerCoordinateSystem("calendar",q_t)}function Y_t(n,e){var t=n.existing;if(e.id=n.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function Phe(n,e){var t;return Z(e,function(r){n[r]!=null&&n[r]!=="auto"&&(t=!0)}),t}function K_t(n,e,t){var r=Ie({},t),i=n[e],a=t.$action||"merge";a==="merge"?i?(en(i,r,!0),Sy(i,r,{ignoreSize:!0}),iTe(t,i),hR(t,i),hR(t,i,"shape"),hR(t,i,"style"),hR(t,i,"extra"),t.clipPath=i.clipPath):n[e]=r:a==="replace"?n[e]=r:a==="remove"&&i&&(n[e]=null)}var pCe=["transition","enterFrom","leaveTo"],X_t=pCe.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function hR(n,e,t){if(t&&(!n[t]&&e[t]&&(n[t]={}),n=n[t],e=e[t]),!(!n||!e))for(var r=t?pCe:X_t,i=0;i<r.length;i++){var a=r[i];n[a]==null&&e[a]!=null&&(n[a]=e[a])}}function Z_t(n,e){if(n&&(n.hv=e.hv=[Phe(e,["left","right"]),Phe(e,["top","bottom"])],n.type==="group")){var t=n,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var Q_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,t,r),this.option.elements=i},e.prototype.optionUpdated=function(t,r){var i=this.option,a=(r?i:t).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=e1e(o,s,"normalMerge"),c=this._elOptionsToUpdate=[];Z(l,function(u,d){var h=u.newOption;h&&(c.push(h),Y_t(u,h),K_t(o,d,h),Z_t(o[d],h))},this),i.elements=gr(o,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,i){Z(t,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Dn),Ohe={path:null,compoundPath:null,group:Lt,image:Fo,text:Yn},Iu=Gn(),J_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=pt()},e.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=t.get("z"),s=t.get("zlevel");Z(r,function(l){var c=Ya(l.id,null),u=c!=null?i.get(c):null,d=Ya(l.parentId,null),h=d!=null?i.get(d):a,f=l.type,m=l.style;f==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var v=l.textContent,y=l.textConfig;if(m&&Yke(m,f,!!y,!!v)){var w=Kke(m,f,!0);!y&&w.textConfig&&(y=l.textConfig=w.textConfig),!v&&w.textContent&&(v=w.textContent)}var _=eSt(l),T=l.$action||"merge",A=T==="merge",C=T==="replace";if(A){var k=!u,M=u;k?M=Rhe(c,h,l.type,i):(M&&(Iu(M).isNew=!1),Jke(M)),M&&(uN(M,_,t,{isInit:k}),Nhe(M,l,o,s))}else if(C){fN(u,l,i,t);var P=Rhe(c,h,l.type,i);P&&(uN(P,_,t,{isInit:!0}),Nhe(P,l,o,s))}else T==="remove"&&(Zke(u,l),fN(u,l,i,t));var O=i.get(c);if(O&&v)if(A){var j=O.getTextContent();j?j.attr(v):O.setTextContent(new Yn(v))}else C&&O.setTextContent(new Yn(v));if(O){var L=l.clipPath;if(L){var B=L.type,$=void 0,k=!1;if(A){var Y=O.getClipPath();k=!Y||Iu(Y).type!==B,$=k?pG(B):Y}else C&&(k=!0,$=pG(B));O.setClipPath($),uN($,L,t,{isInit:k}),_L($,L.keyframeAnimation,t)}var G=Iu(O);O.setTextConfig(y),G.option=l,tSt(O,t,l),lx({el:O,componentModel:t,itemName:O.name,itemTooltipOption:l.tooltip}),_L(O,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var i=t.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),c=["x","y"],u=0;u<i.length;u++){var d=i[u],h=Ya(d.id,null),f=h!=null?o.get(h):null;if(!(!f||!f.isGroup)){var m=f.parent,v=m===a,y=Iu(f),w=Iu(m);y.width=Ze(y.option.width,v?s:w.width)||0,y.height=Ze(y.option.height,v?l:w.height)||0}}for(var u=i.length-1;u>=0;u--){var d=i[u],h=Ya(d.id,null),f=h!=null?o.get(h):null;if(f){var m=f.parent,w=Iu(m),_=m===a?{width:s,height:l}:{width:w.width,height:w.height},T={},A=G5(f,d,_,null,{hv:d.hv,boundingMode:d.bounding},T);if(!Iu(f).isNew&&A){for(var C=d.transition,k={},M=0;M<c.length;M++){var P=c[M],O=T[P];C&&(Dw(C)||dn(C,P)>=0)?k[P]=O:f[P]=O}tr(f,k,t,0)}else f.attr(T)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){fN(i,Iu(i).option,r,t._lastGraphicModel)}),this._elMap=pt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Ni);function pG(n){var e=dt(Ohe,n)?Ohe[n]:JY(n),t=new e({});return Iu(t).type=n,t}function Rhe(n,e,t,r){var i=pG(t);return e.add(i),r.set(n,i),Iu(i).id=n,Iu(i).isNew=!0,i}function fN(n,e,t,r){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(a){fN(a,e,t,r)}),sF(n,e,r),t.removeKey(Iu(n).id))}function Nhe(n,e,t,r){n.isGroup||Z([["cursor",Yu.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(i){var a=i[0];dt(e,a)?n[a]=Gt(e[a],i[1]):n[a]==null&&(n[a]=i[1])}),Z(In(e),function(i){if(i.indexOf("on")===0){var a=e[i];n[i]=Et(a)?a:null}}),dt(e,"draggable")&&(n.draggable=e.draggable),e.name!=null&&(n.name=e.name),e.id!=null&&(n.id=e.id)}function eSt(n){return n=Ie({},n),Z(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(rTe),function(e){delete n[e]}),n}function tSt(n,e,t){var r=$t(n).eventData;!n.silent&&!n.ignore&&!r&&(r=$t(n).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:n.name}),r&&(r.info=t.info)}function nSt(n){n.registerComponentModel(Q_t),n.registerComponentView(J_t),n.registerPreprocessor(function(e){var t=e.graphic;Fe(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var Lhe=["x","y","radius","angle","single"],rSt=["cartesian2d","polar","singleAxis"];function iSt(n){var e=n.get("coordinateSystem");return dn(rSt,e)>=0}function Jv(n){return n+"Axis"}function aSt(n,e){var t=pt(),r=[],i=pt();n.eachComponent({mainType:"dataZoom",query:e},function(u){i.get(u.uid)||s(u)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(u){!i.get(u.uid)&&l(u)&&(s(u),a=!0)}function s(u){i.set(u.uid,!0),r.push(u),c(u)}function l(u){var d=!1;return u.eachTargetAxis(function(h,f){var m=t.get(h);m&&m[f]&&(d=!0)}),d}function c(u){u.eachTargetAxis(function(d,h){(t.get(d)||t.set(d,[]))[h]=!0})}return r}function gCe(n){var e=n.ecModel,t={infoList:[],infoMap:pt()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(Jv(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var jV=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),CI=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=jhe(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=jhe(t);en(this.option,t,!0),en(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=pt(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return Z(Lhe,function(i){var a=this.getReferringComponents(Jv(i),Zst);if(a.specified){r=!0;var o=new jV;Z(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var d=c[0];if(d){var h=new jV;if(h.add(d.componentIndex),t.set(u,h),a=!1,u==="x"||u==="y"){var f=d.getReferringComponents("grid",Ma).models[0];f&&Z(c,function(m){d.componentIndex!==m.componentIndex&&f===m.getReferringComponents("grid",Ma).models[0]&&h.add(m.componentIndex)})}}}a&&Z(Lhe,function(c){if(a){var u=i.findComponents({mainType:Jv(c),filter:function(h){return h.get("type",!0)==="category"}});if(u[0]){var d=new jV;d.add(u[0].componentIndex),t.set(c,d),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");Z([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(Jv(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){Z(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(Jv(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;Z(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Dn);function jhe(n){var e={};return Z(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var oSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(CI),_X=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Ni),sSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(_X),VS=Z,Fhe=Bu,lSt=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(iSt(t)){var r=Jv(this._dimName),i=t.getReferringComponents(r,Ma).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Rt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;VS(["start","end"],function(h,f){var m=e[h],v=e[h+"Value"];a[f]==="percent"?(m==null&&(m=o[f]),v=i.parse(yr(m,o,t))):(c=!0,v=v==null?t[f]:i.parse(v),m=yr(v,t,o)),l[f]=v==null||isNaN(v)?t[f]:v,s[f]=m==null||isNaN(m)?o[f]:m}),Fhe(l),Fhe(s);var u=this._minMaxSpan;c?d(l,s,t,o,!1):d(s,l,o,t,!0);function d(h,f,m,v,y){var w=y?"Span":"ValueSpan";px(0,h,m,"all",u["min"+w],u["max"+w]);for(var _=0;_<2;_++)f[_]=yr(h[_],m,v,!0),y&&(f[_]=i.parse(f[_]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=cSt(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;VS(i,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(a==="weakFilter"){var d=c.getStore(),h=$e(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var m,v,y,w=0;w<u.length;w++){var _=d.get(h[w],f),T=!isNaN(_),A=_<o[0],C=_>o[1];if(T&&!A&&!C)return!0;T&&(y=!0),A&&(m=!0),C&&(v=!0)}return y&&m&&v})}else VS(u,function(f){if(a==="empty")l.setData(c=c.map(f,function(v){return s(v)?v:NaN}));else{var m={};m[f]=o,c.selectRange(m)}});VS(u,function(f){c.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;VS(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=yr(r[0]+o,r,[0,100],!0):a!=null&&(o=yr(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=qSe(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function cSt(n,e,t){var r=[1/0,-1/0];VS(t,function(o){Vft(r,o.getData(),e)});var i=n.getAxisModel(),a=OEe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var uSt={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(Jv(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new lSt(i,a,s,n),t.push(o.__dzAxisProxy))});var r=pt();return Z(t,function(i){Z(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function dSt(n){n.registerAction("dataZoom",function(e,t){var r=aSt(t,e);Z(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var $he=!1;function SX(n){$he||($he=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,uSt),dSt(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function hSt(n){n.registerComponentModel(oSt),n.registerComponentView(sSt),SX(n)}var Ou=function(){function n(){}return n}(),mCe={};function zS(n,e){mCe[n]=e}function vCe(n){return mCe[n]}var fSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;Z(this.option.feature,function(r,i){var a=vCe(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),en(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Dn);function pSt(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=Za(r,a,i);kw(e.get("orient"),n,e.get("itemGap"),o.width,o.height),G5(n,r,a,i)}function yCe(n,e){var t=YT(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new Hn({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var gSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",c=t.get("feature")||{},u=this._features||(this._features={}),d=[];Z(c,function(m,v){d.push(v)}),new Vg(this._featureNames||[],d).add(h).update(h).remove(Yt(h,null)).execute(),this._featureNames=d;function h(m,v){var y=d[m],w=d[v],_=c[y],T=new br(_,t,t.ecModel),A;if(a&&a.newTitle!=null&&a.featureName===y&&(_.title=a.newTitle),y&&!w){if(mSt(y))A={onclick:T.option.onclick,featureName:y};else{var C=vCe(y);if(!C)return;A=new C}u[y]=A}else if(A=u[w],!A)return;A.uid=WT("toolbox-feature"),A.model=T,A.ecModel=r,A.api=i;var k=A instanceof Ou;if(!y&&w){k&&A.dispose&&A.dispose(r,i);return}if(!T.get("show")||k&&A.unusable){k&&A.remove&&A.remove(r,i);return}f(T,A,y),T.setIconStatus=function(M,P){var O=this.option,j=this.iconPaths;O.iconStatus=O.iconStatus||{},O.iconStatus[M]=P,j[M]&&(P==="emphasis"?Bg:Ug)(j[M])},A instanceof Ou&&A.render&&A.render(T,r,i,a)}function f(m,v,y){var w=m.getModel("iconStyle"),_=m.getModel(["emphasis","iconStyle"]),T=v instanceof Ou&&v.getIcons?v.getIcons():m.get("icon"),A=m.get("title")||{},C,k;it(T)?(C={},C[y]=T):C=T,it(A)?(k={},k[y]=A):k=A;var M=m.iconPaths={};Z(C,function(P,O){var j=DM(P,{},{x:-s/2,y:-s/2,width:s,height:s});j.setStyle(w.getItemStyle());var L=j.ensureState("emphasis");L.style=_.getItemStyle();var B=new Yn({style:{text:k[O],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null,font:eK({fontStyle:_.get("textFontStyle"),fontFamily:_.get("textFontFamily"),fontSize:_.get("textFontSize"),fontWeight:_.get("textFontWeight")},r)},ignore:!0});j.setTextContent(B),lx({el:j,componentModel:t,itemName:O,formatterParamsExtra:{title:k[O]}}),j.__title=k[O],j.on("mouseover",function(){var $=_.getItemStyle(),Y=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";B.setStyle({fill:_.get("textFill")||$.fill||$.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),j.setTextConfig({position:_.get("textPosition")||Y}),B.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",O])!=="emphasis"&&i.leaveEmphasis(this),B.hide()}),(m.get(["iconStatus",O])==="emphasis"?Bg:Ug)(j),o.add(j),j.on("click",ct(v.onclick,v,r,i,O)),M[O]=j})}pSt(o,t,i),o.add(yCe(o.getBoundingRect(),t)),l||o.eachChild(function(m){var v=m.__title,y=m.ensureState("emphasis"),w=y.textConfig||(y.textConfig={}),_=m.getTextContent(),T=_&&_.ensureState("emphasis");if(T&&!Et(T)&&v){var A=T.style||(T.style={}),C=_M(v,Yn.makeFont(A)),k=m.x+o.x,M=m.y+o.y+s,P=!1;M+C.height>i.getHeight()&&(w.position="top",P=!0);var O=P?-5-C.height:s+10;k+C.width/2>i.getWidth()?(w.position=["100%",O],A.align="right"):k-C.width/2<0&&(w.position=[0,O],A.align="left")}})},e.prototype.updateView=function(t,r,i,a){Z(this._features,function(o){o instanceof Ou&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){Z(this._features,function(i){i instanceof Ou&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){Z(this._features,function(i){i instanceof Ou&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(Ni);function mSt(n){return n.indexOf("my")===0}var vSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),c=Tn.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=a+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),f=h[0].indexOf("base64")>-1,m=o?decodeURIComponent(h[1]):h[1];f&&(m=window.atob(m));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var y=m.length,w=new Uint8Array(y);y--;)w[y]=m.charCodeAt(y);var _=new Blob([w]);window.navigator.msSaveOrOpenBlob(_,v)}else{var T=document.createElement("iframe");document.body.appendChild(T);var A=T.contentWindow,C=A.document;C.open("image/svg+xml","replace"),C.write(m),C.close(),A.focus(),C.execCommand("SaveAs",!0,v),document.body.removeChild(T)}}else{var k=i.get("lang"),M='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(k&&k[0]||"")+'" /></body>',P=window.open();P.document.write(M),P.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Ou),Bhe="__ec_magicType_stack__",ySt=[["line","bar"],["stack"]],bSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return Z(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(Uhe[i]){var s={series:[]},l=function(d){var h=d.subType,f=d.id,m=Uhe[i](h,f,d,a);m&&(kt(m,d.option),s.series.push(m));var v=d.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var y=v.getAxesByScale("ordinal")[0];if(y){var w=y.dim,_=w+"Axis",T=d.getReferringComponents(_,Ma).models[0],A=T.componentIndex;s[_]=s[_]||[];for(var C=0;C<=A;C++)s[_][A]=s[_][A]||{};s[_][A].boundaryGap=i==="bar"}}};Z(ySt,function(d){dn(d,i)>=0&&Z(d,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=i;i==="stack"&&(c=en({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},e}(Ou),Uhe={line:function(n,e,t,r){if(n==="bar")return en({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return en({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===Bhe;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),en({id:e,stack:i?"":Bhe},r.get(["option","stack"])||{},!0)}};Yf({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var lF=new Array(60).join("-"),yT="	";function wSt(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function xSt(n){var e=[];return Z(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat($e(t.series,function(f){return f.name})),l=[i.model.getCategories()];Z(t.series,function(f){var m=f.getRawData();l.push(f.getRawData().mapArray(m.mapDimension(o),function(v){return v}))});for(var c=[s.join(yT)],u=0;u<l[0].length;u++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][u]);c.push(d.join(yT))}e.push(c.join(`
`))}),e.join(`

`+lF+`

`)}function _St(n){return $e(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+yT:"")+i.join(yT))}),r.join(`
`)}).join(`

`+lF+`

`)}function SSt(n){var e=wSt(n);return{value:gr([xSt(e.seriesGroupByCategoryAxis),_St(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+lF+`

`),meta:e.meta}}function EL(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function TSt(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(yT)>=0)return!0}var gG=new RegExp("["+yT+"]+","g");function ESt(n){for(var e=n.split(/\n+/g),t=EL(e.shift()).split(gG),r=[],i=$e(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=EL(e[a]).split(gG);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function ASt(n){for(var e=n.split(/\n+/g),t=EL(e.shift()),r=[],i=0;i<e.length;i++){var a=EL(e[i]);if(a){var o=a.split(gG),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[i].value=l[0]:r[i]=l[0])}}return{name:t,data:r}}function kSt(n,e){var t=n.split(new RegExp(`
*`+lF+`
*`,"g")),r={series:[]};return Z(t,function(i,a){if(TSt(i)){var o=ESt(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=ASt(i);r.series.push(o)}}),r}var CSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var d=a.get("optionToContent"),h=a.get("contentToOption"),f=SSt(t);if(Et(d)){var m=d(r.getOption());it(m)?c.innerHTML=m:lT(m)&&c.appendChild(m)}else{u.readOnly=a.get("readOnly");var v=u.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),u.value=f.value,c.appendChild(u)}var y=f.meta,w=document.createElement("div");w.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),A=document.createElement("div");_+=";background-color:"+a.get("buttonColor"),_+=";color:"+a.get("buttonTextColor");var C=this;function k(){i.removeChild(o),C._dom=null}WH(T,"click",k),WH(A,"click",function(){if(h==null&&d!=null||h!=null&&d==null){k();return}var M;try{Et(h)?M=h(c,r.getOption()):M=kSt(u.value,y)}catch(P){throw k(),new Error("Data view format error "+P)}M&&r.dispatchAction({type:"changeDataView",newOption:M}),k()}),T.innerHTML=l[1],A.innerHTML=l[2],A.style.cssText=T.style.cssText=_,!a.get("readOnly")&&w.appendChild(A),w.appendChild(T),o.appendChild(s),o.appendChild(c),o.appendChild(w),c.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Ou);function DSt(n,e){return $e(n,function(t,r){var i=e&&e[r];if(It(i)&&!Fe(i)){var a=It(t)&&!Fe(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=kt(t,i),o&&delete t.name,t}else return t})}Yf({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];Z(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Ie({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:DSt(r.data,a)})}}),e.mergeOption(kt({series:t},n.newOption))});var bCe=Z,wCe=Gn();function ISt(n,e){var t=TX(n);bCe(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function MSt(n){var e=TX(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return bCe(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function PSt(n){wCe(n).snapshots=null}function OSt(n){return TX(n).length}function TX(n){var e=wCe(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var RSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){PSt(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Ou);Yf({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var NSt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],EX=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=Vhe(t,e);Z(LSt,function(o,s){(!r||!r.include||dn(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=FV[r.brushType](0,a,i);r.__rangeOffset={offset:qhe[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){Z(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&Z(a.coordSyses,function(o){var s=FV[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){Z(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=FV[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?qhe[r.brushType](a.values,o.offset,jSt(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return $e(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:Cke(i),isTargetByCursor:Ike(i,e,r.coordSysModel),getLinearBrushOtherExtent:Dke(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&dn(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=Vhe(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<zhe.length;l++)if(zhe[l](i,o))return o}return!0},n}();function mG(n){return n[0]>n[1]&&n.reverse(),n}function Vhe(n,e){return OC(n,e,{includeMainTypes:NSt})}var LSt={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=pt(),o={},s={};!t&&!r&&!i||(Z(t,function(l){var c=l.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),Z(r,function(l){var c=l.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),Z(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var c=l.coordinateSystem,u=[];Z(c.getCartesians(),function(d,h){(dn(t,d.getAxis("x").model)>=0||dn(r,d.getAxis("y").model)>=0)&&u.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Hhe.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,e){Z(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:Hhe.geo})})}},zhe=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Hhe={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(Aw(n)),e}},FV={lineX:Yt(Ghe,0),lineY:Yt(Ghe,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[mG([i[0],a[0]]),mG([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=$e(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Ghe(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=mG($e([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var qhe={lineX:Yt(Whe,0),lineY:Yt(Whe,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return $e(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function Whe(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function jSt(n,e){var t=Yhe(n),r=Yhe(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function Yhe(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var vG=Z,FSt=qst("toolbox-dataZoom_"),$St=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new QK(i.getZr()),this._brushController.on("brush",ct(this._onBrush,this)).mount()),VSt(t,r,this,a,i),USt(t,r)},e.prototype.onclick=function(t,r,i){BSt[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new EX(AX(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,u,d){if(d.type==="cartesian2d"){var h=c.brushType;h==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[h],d,u)}}),ISt(a,i),this._dispatchZoomAction(i);function s(c,u,d){var h=u.getAxis(c),f=h.model,m=l(c,f,a),v=m.findRepresentativeAxisProxy(f).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(d=px(0,d.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),m&&(i[m.id]={dataZoomId:m.id,startValue:d[0],endValue:d[1]})}function l(c,u,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var m=f.getAxisModel(c,u.componentIndex);m&&(h=f)}),h}},e.prototype._dispatchZoomAction=function(t){var r=[];vG(t,function(i,a){r.push(Rt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Ou),BSt={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(MSt(this.ecModel))}};function AX(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function USt(n,e){n.setIconStatus("back",OSt(e)>1?"emphasis":"normal")}function VSt(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new EX(AX(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}vut("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=AX(r),o=OC(n,a);vG(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),vG(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:FSt+c+d};h[u]=d,i.push(h)}return i});function zSt(n){n.registerComponentModel(fSt),n.registerComponentView(gSt),zS("saveAsImage",vSt),zS("magicType",bSt),zS("dataView",CSt),zS("dataZoom",$St),zS("restore",RSt),yn(hSt)}var HSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Dn);function xCe(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function _Ce(n){if(Tn.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var SCe=_Ce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),GSt=_Ce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function TCe(n,e){if(!n)return e;e=tTe(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function qSt(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var WSt=TCe(GSt,"transition"),kX=TCe(SCe,"transform"),YSt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Tn.transform3dSupported?"will-change:transform;":"");function KSt(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function XSt(n,e,t){if(!it(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=Kw(e);var a=KSt(t),o=Math.max(Math.round(i)*1.5,6),s="",l=kX+":",c;dn(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=a==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=o+i,h=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),f=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-d)/2)*100)/100;s+=";"+a+":-"+f+"px";var m=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function ZSt(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=Tn.transformSupported?","+kX+r:",left"+r+",top"+r),WSt+":"+i}function Khe(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Tn.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Tn.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+kX+":"+o+";":[["top",0],["left",0],[SCe,o]]}function QSt(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=Gt(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var a=n.get("textShadowColor"),o=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return a&&o&&e.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),Z(["decoration","align"],function(c){var u=n.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function JSt(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=NTe(n,"html"),h=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(ZSt(i,t)),a&&r.push("background-color:"+a),Z(["width","color","radius"],function(f){var m="border-"+f,v=tTe(m),y=n.get(v);y!=null&&r.push(m+":"+y+(f==="color"?"":"px"))}),r.push(QSt(u)),d!=null&&r.push("padding:"+YT(d).join("px ")+"px"),r.join(";")+";"}function Xhe(n,e,t,r,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&Tot(n,o,t,r,i)}else{n[0]=r,n[1]=i;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var e1t=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Tn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=t.appendTo,o=a&&(it(a)?document.querySelector(a):lT(a)?a:Et(a)&&a(e.getDom()));Xhe(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=i.handler,u=i.painter.getViewportRoot();ku(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=qSt(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=YSt+JSt(e,!this._firstShow,this._longHide)+Khe(a[0],a[1],!0)+("border-color:"+Kw(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(it(a)&&r.get("trigger")==="item"&&!xCe(r)&&(s=XSt(r,i,a)),it(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Fe(e)||(e=[e]);for(var l=0;l<e.length;l++)lT(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(Xhe(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=Khe(r[0],r[1]);Z(a,function(o){i[o[0]]=o[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Tn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ct(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}(),t1t=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),Qhe(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var o=this;It(e)&&fr(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Yn({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:NTe(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),Z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Zhe(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;Qhe(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,o=Ov(a.borderWidth||0),s=Zhe(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ct(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Ov(n){return Math.max(0,n)}function Zhe(n){var e=Ov(n.shadowBlur||0),t=Ov(n.shadowOffsetX||0),r=Ov(n.shadowOffsetY||0);return{left:Ov(e-t),right:Ov(e+t),top:Ov(e-r),bottom:Ov(e+r)}}function Qhe(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var n1t=new Hn({shape:{x:-1,y:-1,width:2,height:2}}),r1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Tn.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=Jst(i.get("renderMode"));this._tooltipContent=a==="richText"?new t1t(r):new e1t(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(Tn.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?QT(this,"_updatePosition",50,"fixRate"):gI(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");lCe("itemTooltip",this._api,ct(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||Tn.node||!i.getDom())){var o=Jhe(a,i);this._ticket="";var s=a.dataByCoordSys,l=s1t(a,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var u=n1t;u.x=a.x,u.y=a.y,u.update(),$t(u).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:u},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var d=cCe(a,r),h=d.point[0],f=d.point[1];h!=null&&f!=null&&this._tryShow({offsetX:h,offsetY:f,target:d.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(Jhe(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),d=Tk([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=$t(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;uw(i,function(u){if($t(u).dataIndex!=null)return l=u,!0;if($t(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,r):c?this._showComponentItemTooltip(t,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=ct(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Tk([r.tooltipOption],a),l=this._renderMode,c=[],u=go("section",{blocks:[],noHeader:!0}),d=[],h=new S6;Z(t,function(_){Z(_.dataByAxis,function(T){var A=i.getComponent(T.axisDim+"Axis",T.axisIndex),C=T.value;if(!(!A||C==null)){var k=aCe(C,A.axis,i,T.seriesDataIndices,T.valueLabelOpt),M=go("section",{header:k,noHeader:!Zd(k),sortBlocks:!0,blocks:[]});u.blocks.push(M),Z(T.seriesDataIndices,function(P){var O=i.getSeriesByIndex(P.seriesIndex),j=P.dataIndexInside,L=O.getDataParams(j);if(!(L.dataIndex<0)){L.axisDim=T.axisDim,L.axisIndex=T.axisIndex,L.axisType=T.axisType,L.axisId=T.axisId,L.axisValue=AK(A.axis,{value:C}),L.axisValueLabel=k,L.marker=h.makeTooltipMarker("item",Kw(L.color),l);var B=$le(O.formatTooltip(j,!0,null)),$=B.frag;if($){var Y=Tk([O],a).get("valueFormatter");M.blocks.push(Y?Ie({valueFormatter:Y},$):$)}B.text&&d.push(B.text),c.push(L)}})}})}),u.blocks.reverse(),d.reverse();var f=r.position,m=s.get("order"),v=Gle(u,h,l,m,i.get("useUTC"),s.get("textStyle"));v&&d.unshift(v);var y=l==="richText"?`

`:"<br/>",w=d.join(y);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,w,c,Math.random()+"",o[0],o[1],f,null,h)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,o=$t(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,d=o.dataType,h=c.getData(d),f=this._renderMode,m=t.positionDefault,v=Tk([h.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),y=v.get("trigger");if(!(y!=null&&y!=="item")){var w=c.getDataParams(u,d),_=new S6;w.marker=_.makeTooltipMarker("item",Kw(w.color),f);var T=$le(c.formatTooltip(u,!1,d)),A=v.get("order"),C=v.get("valueFormatter"),k=T.frag,M=k?Gle(C?Ie({valueFormatter:C},k):k,_,f,A,a.get("useUTC"),v.get("textStyle")):T.text,P="item_"+c.name+"_"+u;this._showOrMove(v,function(){this._showTooltipContent(v,M,w,P,t.offsetX,t.offsetY,t.position,t.target,_)}),i({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=this._renderMode==="html",o=$t(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(it(l)){var u=l;l={content:u,formatter:u},c=!0}c&&a&&l.content&&(l=Rt(l),l.content=ll(l.content));var d=[l],h=this._ecModel.getComponent(o.componentMainType,o.componentIndex);h&&d.push(h),d.push({formatter:l.content});var f=t.positionDefault,m=Tk(d,this._tooltipModel,f?{position:f}:null),v=m.get("content"),y=Math.random()+"",w=new S6;this._showOrMove(m,function(){var _=Rt(m.get("formatterParams")||{});this._showTooltipContent(m,v,_,y,t.offsetX,t.offsetY,t.position,r,w)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,o,s,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var h=t.get("formatter");l=l||t.get("position");var f=r,m=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),v=m.color;if(h)if(it(h)){var y=t.ecModel.get("useUTC"),w=Fe(i)?i[0]:i,_=w&&w.axisType&&w.axisType.indexOf("time")>=0;f=h,_&&(f=B5(w.axisValue,f,y)),f=nTe(f,i,!0)}else if(Et(h)){var T=ct(function(A,C){A===this._ticket&&(d.setContent(C,u,t,v,l),this._updatePosition(t,l,o,s,d,i,c))},this);this._ticket=a,f=h(i,a,T)}else f=h;d.setContent(f,u,t,v,l),d.show(t,v),this._updatePosition(t,l,o,s,d,i,c)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||Fe(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Fe(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var d=o.getSize(),h=t.get("align"),f=t.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),Et(r)&&(r=r([i,a],s,o.el,m,{viewSize:[c,u],contentSize:d.slice()})),Fe(r))i=Ze(r[0],c),a=Ze(r[1],u);else if(It(r)){var v=r;v.width=d[0],v.height=d[1];var y=Za(v,{width:c,height:u});i=y.x,a=y.y,h=null,f=null}else if(it(r)&&l){var w=o1t(r,m,d,t.get("borderWidth"));i=w[0],a=w[1]}else{var w=i1t(i,a,o,c,u,h?null:20,f?null:20);i=w[0],a=w[1]}if(h&&(i-=efe(h)?d[0]/2:h==="right"?d[0]:0),f&&(a-=efe(f)?d[1]/2:f==="bottom"?d[1]:0),xCe(t)){var w=a1t(i,a,o,c,u);i=w[0],a=w[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&Z(i,function(s,l){var c=s.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];o=o&&c.length===d.length,o&&Z(c,function(h,f){var m=d[f]||{},v=h.seriesDataIndices||[],y=m.seriesDataIndices||[];o=o&&h.value===m.value&&h.axisType===m.axisType&&h.axisId===m.axisId&&v.length===y.length,o&&Z(v,function(w,_){var T=y[_];o=o&&w.seriesIndex===T.seriesIndex&&w.dataIndex===T.dataIndex}),a&&Z(h.seriesDataIndices,function(w){var _=w.seriesIndex,T=r[_],A=a[_];T&&A&&A.data!==T.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Tn.node||!r.getDom()||(gI(this,"_updatePosition"),this._tooltipContent.dispose(),hG("itemTooltip",r))},e.type="tooltip",e}(Ni);function Tk(n,e,t){var r=e.ecModel,i;t?(i=new br(t,r,r),i=new br(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof br&&(o=o.get("tooltip",!0)),it(o)&&(o={formatter:o}),o&&(i=new br(o,i,r)))}return i}function Jhe(n,e){return n.dispatchAction||ct(e.dispatchAction,e)}function i1t(n,e,t,r,i,a,o){var s=t.getSize(),l=s[0],c=s[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),o!=null&&(e+c+o>i?e-=c+o:e+=o),[n,e]}function a1t(n,e,t,r,i){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,r)-o,e=Math.min(e+s,i)-s,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function o1t(n,e,t,r){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=e.width,u=e.height;switch(n){case"inside":s=e.x+c/2-i/2,l=e.y+u/2-a/2;break;case"top":s=e.x+c/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+c/2-i/2,l=e.y+u+o;break;case"left":s=e.x-i-o,l=e.y+u/2-a/2;break;case"right":s=e.x+c+o,l=e.y+u/2-a/2}return[s,l]}function efe(n){return n==="center"||n==="middle"}function s1t(n,e,t){var r=UY(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=SM(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=$t(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function l1t(n){yn(VM),n.registerComponentModel(HSt),n.registerComponentView(r1t),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},pa),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},pa)}var c1t=["rect","polygon","keep","clear"];function u1t(n,e){var t=Or(n?n.brush:[]);if(t.length){var r=[];Z(t,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(r=r.concat(c))});var i=n&&n.toolbox;Fe(i)&&(i=i[0]),i||(i={feature:{}},n.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),d1t(s),e&&!s.length&&s.push.apply(s,c1t)}}function d1t(n){var e={};Z(n,function(t){e[t]=1}),n.length=0,Z(e,function(t,r){n.push(r)})}var tfe=Z;function nfe(n){if(n){for(var e in n)if(n.hasOwnProperty(e))return!0}}function yG(n,e,t){var r={};return tfe(e,function(a){var o=r[a]=i();tfe(n[a],function(s,l){if(fo.isValidType(l)){var c={type:l,visual:s};t&&t(c,a),o[l]=new fo(c),l==="opacity"&&(c=Rt(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new fo(c))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function ECe(n,e,t){var r;Z(t,function(i){e.hasOwnProperty(i)&&nfe(e[i])&&(r=!0)}),r&&Z(t,function(i){e.hasOwnProperty(i)&&nfe(e[i])?n[i]=Rt(e[i]):delete n[i]})}function h1t(n,e,t,r,i,a){var o={};Z(n,function(d){var h=fo.prepareVisualTypes(e[d]);o[d]=h});var s;function l(d){return mK(t,s,d)}function c(d,h){GTe(t,s,d,h)}t.each(u);function u(d,h){s=d;var f=t.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var m=r.call(i,d),v=e[m],y=o[m],w=0,_=y.length;w<_;w++){var T=y[w];v[T]&&v[T].applyVisual(d,l,c)}}}function f1t(n,e,t,r){var i={};return Z(n,function(a){var o=fo.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(C){return mK(s,d,C)}function u(C,k){GTe(s,d,C,k)}for(var d,h=s.getStore();(d=o.next())!=null;){var f=s.getRawDataItem(d);if(!(f&&f.visualMap===!1))for(var m=r!=null?h.get(l,d):d,v=t(m),y=e[v],w=i[v],_=0,T=w.length;_<T;_++){var A=w[_];y[A]&&y[A].applyVisual(m,c,u)}}}}}function p1t(n){var e=n.brushType,t={point:function(r){return rfe[e].point(r,t,n)},rect:function(r){return rfe[e].rect(r,t,n)}};return t}var rfe={lineX:ife(0),lineY:ife(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&qb(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var i=n.x,a=n.y,o=n.width,s=n.height,l=r[0];if(qb(r,i,a)||qb(r,i+o,a)||qb(r,i,a+s)||qb(r,i+o,a+s)||an.create(n).contain(l[0],l[1])||nC(i,a,i+o,a,r)||nC(i,a,i,a+s,r)||nC(i+o,a,i+o,a+s,r)||nC(i,a+s,i+o,a+s,r))return!0}}};function ife(n){var e=["x","y"],t=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[n];return Ek(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[n]],r[e[n]]+r[t[n]]];return s[1]<s[0]&&s.reverse(),Ek(s[0],o)||Ek(s[1],o)||Ek(o[0],s)||Ek(o[1],s)}}}}function Ek(n,e){return e[0]<=n&&n<=e[1]}var afe=["inBrush","outOfBrush"],$V="__ecBrushSelect",bG="__ecInBrushSelectEvent";function ACe(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new EX(e.option,n);t.setInputRanges(e.areas,n)})}function g1t(n,e,t){var r=[],i,a;n.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),ACe(n),n.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Rt(o.areas),selected:[]};r.push(l);var c=o.option,u=c.brushLink,d=[],h=[],f=[],m=!1;s||(i=c.throttleType,a=c.throttleDelay);var v=$e(o.areas,function(C){var k=b1t[C.brushType],M=kt({boundingRect:k?k(C):void 0},C);return M.selectors=p1t(M),M}),y=yG(o.option,afe,function(C){C.mappingMethod="fixed"});Fe(u)&&Z(u,function(C){d[C]=1});function w(C){return u==="all"||!!d[C]}function _(C){return!!C.length}n.eachSeries(function(C,k){var M=f[k]=[];C.subType==="parallel"?T(C,k):A(C,k,M)});function T(C,k){var M=C.coordinateSystem;m=m||M.hasAxisBrushed(),w(k)&&M.eachActiveState(C.getData(),function(P,O){P==="active"&&(h[O]=1)})}function A(C,k,M){if(!(!C.brushSelector||y1t(o,k))&&(Z(v,function(O){o.brushTargetManager.controlSeries(O,C,n)&&M.push(O),m=m||_(M)}),w(k)&&_(M))){var P=C.getData();P.each(function(O){ofe(C,M,P,O)&&(h[O]=1)})}}n.eachSeries(function(C,k){var M={seriesId:C.id,seriesIndex:k,seriesName:C.name,dataIndex:[]};l.selected.push(M);var P=f[k],O=C.getData(),j=w(k)?function(L){return h[L]?(M.dataIndex.push(O.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return ofe(C,P,O,L)?(M.dataIndex.push(O.getRawIndex(L)),"inBrush"):"outOfBrush"};(w(k)?m:_(P))&&h1t(afe,y,O,j)})}),m1t(e,i,a,r,t)}function m1t(n,e,t,r,i){if(i){var a=n.getZr();if(!a[bG]){a[$V]||(a[$V]=v1t);var o=QT(a,$V,t,e);o(n,r)}}}function v1t(n,e){if(!n.isDisposed()){var t=n.getZr();t[bG]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[bG]=!1}}function ofe(n,e,t,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(n.brushSelector(r,t,o.selectors,o))return!0}}function y1t(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&(Fe(t)?dn(t,e)<0:e!==t)}var b1t={rect:function(n){return sfe(n.range)},polygon:function(n){for(var e,t=n.range,r=0,i=t.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&sfe(e)}};function sfe(n){return new an(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var w1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new QK(r.getZr())).on("brush",ct(this._onBrush,this)).mount()},e.prototype.render=function(t,r,i,a){this.model=t,this._updateController(t,r,i,a)},e.prototype.updateTransform=function(t,r,i,a){ACe(r),this._updateController(t,r,i,a)},e.prototype.updateVisual=function(t,r,i,a){this.updateTransform(t,r,i,a)},e.prototype.updateView=function(t,r,i,a){this._updateController(t,r,i,a)},e.prototype._updateController=function(t,r,i,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Rt(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Rt(i),$from:r})},e.type="brush",e}(Ni),x1t="#ddd",_1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&ECe(i,t,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:x1t},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=$e(t,function(r){return lfe(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=lfe(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Dn);function lfe(n,e){return en({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new br(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var S1t=["rect","polygon","lineX","lineY","keep","clear"],T1t=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,Z(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,i){this.render(t,r,i)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return Z(t.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(t,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:S1t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Ou);function E1t(n){n.registerComponentView(w1t),n.registerComponentModel(_1t),n.registerPreprocessor(u1t),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,g1t),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},pa),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},pa),zS("brush",T1t)}var A1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Dn),k1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),c=Gt(t.get("textBaseline"),t.get("textVerticalAlign")),u=new Yn({style:ri(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=t.get("subtext"),f=new Yn({style:ri(s,{text:h,fill:s.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),v=t.get("sublink"),y=t.get("triggerEvent",!0);u.silent=!m&&!y,f.silent=!v&&!y,m&&u.on("click",function(){tL(m,"_"+t.get("target"))}),v&&f.on("click",function(){tL(v,"_"+t.get("subtarget"))}),$t(u).eventData=$t(f).eventData=y?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(u),h&&a.add(f);var w=a.getBoundingRect(),_=t.getBoxLayoutParams();_.width=w.width,_.height=w.height;var T=Za(_,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?T.x+=T.width:l==="center"&&(T.x+=T.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?T.y+=T.height:c==="middle"&&(T.y+=T.height/2),c=c||"top"),a.x=T.x,a.y=T.y,a.markRedraw();var A={align:l,verticalAlign:c};u.setStyle(A),f.setStyle(A),w=a.getBoundingRect();var C=T.margin,k=t.getItemStyle(["color","opacity"]);k.fill=t.get("backgroundColor");var M=new Hn({shape:{x:w.x-C[3],y:w.y-C[0],width:w.width+C[1]+C[3],height:w.height+C[0]+C[2],r:t.get("borderRadius")},style:k,subPixelOptimize:!0,silent:!0});a.add(M)}},e.type="title",e}(Ni);function C1t(n){n.registerComponentModel(A1t),n.registerComponentView(k1t)}var cfe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],i=t.axisType,a=this._names=[],o;i==="category"?(o=[],Z(r,function(c,u){var d=Ya(zT(c),""),h;It(c)?(h=Rt(c),h.value=u):h=u,o.push(h),a.push(d)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new gl([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Dn),kCe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=$y(cfe.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(cfe);Oa(kCe,W5.prototype);var D1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(Ni),I1t=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(dh),BV=Math.PI,ufe=Gn(),M1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return go("nameValue",{noName:!0,value:u})},Z(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](a,o,l,t)},this),this._renderAxisLabel(a,s,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var i=t.get(["label","position"]),a=t.get("orient"),o=O1t(t,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":it(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:BV/2},d=a==="vertical"?o.height:o.width,h=t.getModel("controlStyle"),f=h.get("show",!0),m=f?h.get("itemSize"):0,v=f?h.get("itemGap"):0,y=m+v,w=t.get(["label","rotate"])||0;w=w*BV/180;var _,T,A,C=h.get("position",!0),k=f&&h.get("showPlayBtn",!0),M=f&&h.get("showPrevBtn",!0),P=f&&h.get("showNextBtn",!0),O=0,j=d;C==="left"||C==="bottom"?(k&&(_=[0,0],O+=y),M&&(T=[O,0],O+=y),P&&(A=[j-m,0],j-=y)):(k&&(_=[j-m,0],j-=y),M&&(T=[0,0],O+=y),P&&(A=[j-m,0],j-=y));var L=[O,j];return t.get("inverse")&&L.reverse(),{viewRect:o,mainLength:d,orient:a,rotation:u[a],labelRotation:w,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[a],playPosition:_,prevBtnPosition:T,nextBtnPosition:A,axisExtent:L,controlSize:m,controlGap:v}},e.prototype._position=function(t,r){var i=this._mainGroup,a=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=Bc(),l=o.x,c=o.y+o.height;jf(s,s,[-l,-c]),sx(s,s,-BV/2),jf(s,s,[l,c]),o=o.clone(),o.applyTransform(s)}var u=_(o),d=_(i.getBoundingRect()),h=_(a.getBoundingRect()),f=[i.x,i.y],m=[a.x,a.y];m[0]=f[0]=u[0][0];var v=t.labelPosOpt;if(v==null||it(v)){var y=v==="+"?0:1;T(f,d,u,1,y),T(m,h,u,1,1-y)}else{var y=v>=0?0:1;T(f,d,u,1,y),m[1]=f[1]+v}i.setPosition(f),a.setPosition(m),i.rotation=a.rotation=t.rotation,w(i),w(a);function w(A){A.originX=u[0][0]-A.x,A.originY=u[1][0]-A.y}function _(A){return[[A.x,A.x+A.width],[A.y,A.y+A.height]]}function T(A,C,k,M,P){A[M]+=k[M][P]-C[M][P]}},e.prototype._createAxis=function(t,r){var i=r.getData(),a=r.get("axisType"),o=P1t(r,a);o.getTicks=function(){return i.mapArray(["value"],function(c){return{value:c}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new I1t("value",o,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new Lt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new co({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Ie({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new co({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:kt({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],Z(l,function(c){var u=i.dataToCoord(c.value),d=s.getItemModel(c.value),h=d.getModel("itemStyle"),f=d.getModel(["emphasis","itemStyle"]),m=d.getModel(["progress","itemStyle"]),v={x:u,y:0,onclick:ct(o._changeTimeline,o,c.value)},y=dfe(d,h,r,v);y.ensureState("emphasis").style=f.getItemStyle(),y.ensureState("progress").style=m.getItemStyle(),Ew(y);var w=$t(y);d.get("tooltip")?(w.dataIndex=c.value,w.dataModel=a):w.dataIndex=w.dataModel=null,o._tickSymbols.push(y)})},e.prototype._renderAxisLabel=function(t,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),c=i.getViewLabels();this._tickLabels=[],Z(c,function(u){var d=u.tickValue,h=l.getItemModel(d),f=h.getModel("label"),m=h.getModel(["emphasis","label"]),v=h.getModel(["progress","label"]),y=i.dataToCoord(u.tickValue),w=new Yn({x:y,y:0,rotation:t.labelRotation-t.rotation,onclick:ct(o._changeTimeline,o,d),silent:!1,style:ri(f,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});w.ensureState("emphasis").style=ri(m),w.ensureState("progress").style=ri(v),r.add(w),Ew(w),ufe(w).dataIndex=d,o._tickLabels.push(w)})}},e.prototype._renderControl=function(t,r,i,a){var o=t.controlSize,s=t.rotation,l=a.getModel("controlStyle").getItemStyle(),c=a.getModel(["emphasis","controlStyle"]).getItemStyle(),u=a.getPlayState(),d=a.get("inverse",!0);h(t.nextBtnPosition,"next",ct(this._changeTimeline,this,d?"-":"+")),h(t.prevBtnPosition,"prev",ct(this._changeTimeline,this,d?"+":"-")),h(t.playPosition,u?"stop":"play",ct(this._handlePlayClick,this,!u),!0);function h(f,m,v,y){if(f){var w=sh(Gt(a.get(["controlStyle",m+"BtnSize"]),o),o),_=[0,-w/2,w,w],T=R1t(a,m+"Icon",_,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:y?-s:0,rectHover:!0,style:l,onclick:v});T.ensureState("emphasis").style=c,r.add(T),Ew(T)}}},e.prototype._renderCurrentPointer=function(t,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(d){d.draggable=!0,d.drift=ct(c._handlePointerDrag,c),d.ondragend=ct(c._handlePointerDragend,c),hfe(d,c._progressLine,s,i,a,!0)},onUpdate:function(d){hfe(d,c._progressLine,s,i,a)}};this._currentPointer=dfe(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],a=this._axis,o=Bu(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return nh(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var c=o.dataToCoord(s),u=Math.abs(c-t);u<i&&(i=u,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",ufe(i[a]).dataIndex<=t)},e.type="timeline.slider",e}(D1t);function P1t(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new J5({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new TK({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new zg}}function O1t(n,e){return Za(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},n.get("padding"))}function R1t(n,e,t,r){var i=r.style,a=DM(n.get(["controlStyle",e]),r||{},new an(t[0],t[1],t[2],t[3]));return i&&a.setStyle(i),a}function dfe(n,e,t,r,i,a){var o=e.get("color");if(i)i.setColor(o),t.add(i),a&&a.onUpdate(i);else{var s=n.get("symbol");i=Pa(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),t.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=en({rectHover:!0,z2:100},r,!0);var c=JT(n.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var u=ux(n.get("symbolOffset"),c);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var d=n.get("symbolRotate");return r.rotation=(d||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function hfe(n,e,t,r,i,a){if(!n.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",t));if(a||!o.get("animation",!0))n.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function N1t(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var i=t.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),kt({currentIndex:i.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function L1t(n){var e=n&&n.timeline;Fe(e)||(e=e?[e]:[]),Z(e,function(t){t&&j1t(t)})}function j1t(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),ffe(n),Kb(n,"controlPosition")){var r=n.controlStyle||(n.controlStyle={});Kb(r,"position")||(r.position=n.controlPosition),r.position==="none"&&!Kb(r,"show")&&(r.show=!1,delete r.position),delete n.controlPosition}Z(n.data||[],function(i){It(i)&&!Fe(i)&&(!Kb(i,"value")&&Kb(i,"name")&&(i.value=i.name),ffe(i))})}function ffe(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=n.label||n.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};Z(r,function(o,s){!a[s]&&!Kb(i,s)&&(i[s]=o)}),t.label&&!Kb(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Kb(n,e){return n.hasOwnProperty(e)}function F1t(n){n.registerComponentModel(kCe),n.registerComponentView(M1t),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),N1t(n),n.registerPreprocessor(L1t)}function CX(n,e){if(!n)return!1;for(var t=Fe(n)?n:[n],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function fR(n){Gw(n,"label",["show"])}var pR=Gn(),Gg=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Tn.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),c=pR(s)[o];if(!l||!l.data){pR(s)[o]=null;return}c?c._mergeOption(l,r,!0):(a&&fR(l),Z(l.data,function(u){u instanceof Array?(fR(u[0]),fR(u[1])):fR(u)}),c=this.createMarkerModelFromSeries(l,this,r),Ie(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),pR(s)[o]=c},this)},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return go("section",{header:this.name,blocks:[go("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=W5.prototype.getDataParams.call(this,t,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(t,r){return pR(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Dn);Oa(Gg,W5.prototype);var $1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Gg);function wG(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function B1t(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function gR(n,e,t,r,i,a){var o=[],s=Ty(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,c=DX(e,l,n),u=e.indicesOfNearest(l,c)[0];o[i]=e.get(t,u),o[a]=e.get(l,u);var d=e.get(r,u),h=xf(e.get(r,u));return h=Math.min(h,20),h>=0&&(o[a]=+o[a].toFixed(h)),[o,d]}var UV={min:Yt(gR,"min"),max:Yt(gR,"max"),average:Yt(gR,"average"),median:Yt(gR,"median")};function DI(n,e){if(e){var t=n.getData(),r=n.coordinateSystem,i=r&&r.dimensions;if(!B1t(e)&&!Fe(e.coord)&&Fe(i)){var a=CCe(e,t,r,n);if(e=Rt(e),e.type&&UV[e.type]&&a.baseAxis&&a.valueAxis){var o=dn(i,a.baseAxis.dim),s=dn(i,a.valueAxis.dim),l=UV[e.type](t,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Fe(i))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)UV[c[u]]&&(c[u]=DX(t,t.mapDimension(i[u]),c[u]));return e}}function CCe(n,e,t,r){var i={};return n.valueIndex!=null||n.valueDim!=null?(i.valueDataDim=n.valueIndex!=null?e.getDimension(n.valueIndex):n.valueDim,i.valueAxis=t.getAxis(U1t(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function U1t(n,e){var t=n.getData().getDimensionInfo(e);return t&&t.coordDim}function II(n,e){return n&&n.containData&&e.coord&&!wG(e)?n.containData(e.coord):!0}function V1t(n,e,t){return n&&n.containZone&&e.coord&&t.coord&&!wG(e)&&!wG(t)?n.containZone(e.coord,t.coord):!0}function DCe(n,e){return n?function(t,r,i,a){var o=a<2?t.coord&&t.coord[a]:t.value;return cy(o,e[a])}:function(t,r,i,a){return cy(t.value,e[a])}}function DX(n,e,t){if(t==="average"){var r=0,i=0;return n.each(e,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return t==="median"?n.getMedian(e):n.getDataExtent(e)[t==="max"?1:0]}var VV=Gn(),IX=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=pt()},e.prototype.render=function(t,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){VV(s).keep=!1}),r.eachSeries(function(s){var l=Gg.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!VV(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(t){VV(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;Z(t,function(a){var o=Gg.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?b1e(l):YY(l))})}})},e.type="marker",e}(Ni);function pfe(n,e,t){var r=e.coordinateSystem;n.each(function(i){var a=n.getItemModel(i),o,s=Ze(a.get("x"),t.getWidth()),l=Ze(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(n.getValues(n.dimensions,i));else if(r){var c=n.get(r.dimensions[0],i),u=n.get(r.dimensions[1],i);o=r.dataToPoint([c,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),n.setItemLayout(i,o)})}var z1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Gg.getMarkerModelFromSeries(a,"markPoint");o&&(pfe(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new NM),d=H1t(o,t,r);r.setData(d),pfe(r.getData(),t,a),d.each(function(h){var f=d.getItemModel(h),m=f.getShallow("symbol"),v=f.getShallow("symbolSize"),y=f.getShallow("symbolRotate"),w=f.getShallow("symbolOffset"),_=f.getShallow("symbolKeepAspect");if(Et(m)||Et(v)||Et(y)||Et(w)){var T=r.getRawValue(h),A=r.getDataParams(h);Et(m)&&(m=m(T,A)),Et(v)&&(v=v(T,A)),Et(y)&&(y=y(T,A)),Et(w)&&(w=w(T,A))}var C=f.getModel("itemStyle").getItemStyle(),k=MM(l,"color");C.fill||(C.fill=k),d.setItemVisual(h,{symbol:m,symbolSize:v,symbolRotate:y,symbolOffset:w,symbolKeepAspect:_,style:C})}),u.updateData(d),this.group.add(u.group),d.eachItemGraphicEl(function(h){h.traverse(function(f){$t(f).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e}(IX);function H1t(n,e,t){var r;n?r=$e(n&&n.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return Ie(Ie({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new gl(r,t),a=$e(t.get("data"),Yt(DI,e));n&&(a=gr(a,Yt(II,n)));var o=DCe(!!n,r);return i.initData(a,null,o),i}function G1t(n){n.registerComponentModel($1t),n.registerComponentView(z1t),n.registerPreprocessor(function(e){CX(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var q1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Gg),mR=Gn(),W1t=function(n,e,t,r){var i=n.getData(),a;if(Fe(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Ro(r.yAxis,r.xAxis);else{var c=CCe(r,i,e,n);s=c.valueAxis;var u=xEe(i,c.valueDataDim);l=DX(i,u,o)}var d=s.dim==="x"?0:1,h=1-d,f=Rt(r),m={coord:[]};f.type=null,f.coord=[],f.coord[h]=-1/0,m.coord[h]=1/0;var v=t.get("precision");v>=0&&Jn(l)&&(l=+l.toFixed(Math.min(v,20))),f.coord[d]=m.coord[d]=l,a=[f,m,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var y=[DI(n,a[0]),DI(n,a[1]),Ie({},a[2])];return y[2].type=y[2].type||null,en(y[2],y[0]),en(y[2],y[1]),y};function AL(n){return!isNaN(n)&&!isFinite(n)}function gfe(n,e,t,r){var i=1-n,a=r.dimensions[n];return AL(e[i])&&AL(t[i])&&e[n]===t[n]&&r.getAxis(a).containData(e[n])}function Y1t(n,e){if(n.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(gfe(1,t,r,n)||gfe(0,t,r,n)))return!0}return II(n,e[0])&&II(n,e[1])}function zV(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Ze(o.get("x"),i.getWidth()),c=Ze(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition)s=r.getMarkerPosition(n.getValues(n.dimensions,e));else{var u=a.dimensions,d=n.get(u[0],e),h=n.get(u[1],e);s=a.dataToPoint([d,h])}if(hx(a,"cartesian2d")){var f=a.getAxis("x"),m=a.getAxis("y"),u=a.dimensions;AL(n.get(u[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):AL(n.get(u[1],e))&&(s[1]=m.toGlobalCoord(m.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}n.setItemLayout(e,s)}var K1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Gg.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=mR(o).from,c=mR(o).to;l.each(function(u){zV(l,u,!0,a,i),zV(c,u,!1,a,i)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new ZK);this.group.add(u.group);var d=X1t(o,t,r),h=d.from,f=d.to,m=d.line;mR(r).from=h,mR(r).to=f,r.setData(m);var v=r.get("symbol"),y=r.get("symbolSize"),w=r.get("symbolRotate"),_=r.get("symbolOffset");Fe(v)||(v=[v,v]),Fe(y)||(y=[y,y]),Fe(w)||(w=[w,w]),Fe(_)||(_=[_,_]),d.from.each(function(A){T(h,A,!0),T(f,A,!1)}),m.each(function(A){var C=m.getItemModel(A).getModel("lineStyle").getLineStyle();m.setItemLayout(A,[h.getItemLayout(A),f.getItemLayout(A)]),C.stroke==null&&(C.stroke=h.getItemVisual(A,"style").fill),m.setItemVisual(A,{fromSymbolKeepAspect:h.getItemVisual(A,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(A,"symbolOffset"),fromSymbolRotate:h.getItemVisual(A,"symbolRotate"),fromSymbolSize:h.getItemVisual(A,"symbolSize"),fromSymbol:h.getItemVisual(A,"symbol"),toSymbolKeepAspect:f.getItemVisual(A,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(A,"symbolOffset"),toSymbolRotate:f.getItemVisual(A,"symbolRotate"),toSymbolSize:f.getItemVisual(A,"symbolSize"),toSymbol:f.getItemVisual(A,"symbol"),style:C})}),u.updateData(m),d.line.eachItemGraphicEl(function(A){$t(A).dataModel=r,A.traverse(function(C){$t(C).dataModel=r})});function T(A,C,k){var M=A.getItemModel(C);zV(A,C,k,t,a);var P=M.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=MM(l,"color")),A.setItemVisual(C,{symbolKeepAspect:M.get("symbolKeepAspect"),symbolOffset:Gt(M.get("symbolOffset",!0),_[k?0:1]),symbolRotate:Gt(M.get("symbolRotate",!0),w[k?0:1]),symbolSize:Gt(M.get("symbolSize"),y[k?0:1]),symbol:Gt(M.get("symbol",!0),v[k?0:1]),style:P})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(IX);function X1t(n,e,t){var r;n?r=$e(n&&n.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return Ie(Ie({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new gl(r,t),a=new gl(r,t),o=new gl([],t),s=$e(t.get("data"),Yt(W1t,e,n,t));n&&(s=gr(s,Yt(Y1t,n)));var l=DCe(!!n,r);return i.initData($e(s,function(c){return c[0]}),null,l),a.initData($e(s,function(c){return c[1]}),null,l),o.initData($e(s,function(c){return c[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function Z1t(n){n.registerComponentModel(q1t),n.registerComponentView(K1t),n.registerPreprocessor(function(e){CX(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var Q1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Gg),vR=Gn(),J1t=function(n,e,t,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=DI(n,i),s=DI(n,a),l=o.coord,c=s.coord;l[0]=Ro(l[0],-1/0),l[1]=Ro(l[1],-1/0),c[0]=Ro(c[0],1/0),c[1]=Ro(c[1],1/0);var u=IY([{},o,s]);return u.coord=[o.coord,s.coord],u.x0=o.x,u.y0=o.y,u.x1=s.x,u.y1=s.y,u}};function kL(n){return!isNaN(n)&&!isFinite(n)}function mfe(n,e,t,r){var i=1-n;return kL(e[i])&&kL(t[i])}function eTt(n,e){var t=e.coord[0],r=e.coord[1],i={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return hx(n,"cartesian2d")?t&&r&&(mfe(1,t,r)||mfe(0,t,r))?!0:V1t(n,i,a):II(n,i)||II(n,a)}function vfe(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=Ze(o.get(t[0]),i.getWidth()),c=Ze(o.get(t[1]),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition){var u=n.getValues(["x0","y0"],e),d=n.getValues(["x1","y1"],e),h=a.clampData(u),f=a.clampData(d),m=[];t[0]==="x0"?m[0]=h[0]>f[0]?d[0]:u[0]:m[0]=h[0]>f[0]?u[0]:d[0],t[1]==="y0"?m[1]=h[1]>f[1]?d[1]:u[1]:m[1]=h[1]>f[1]?u[1]:d[1],s=r.getMarkerPosition(m,t,!0)}else{var v=n.get(t[0],e),y=n.get(t[1],e),w=[v,y];a.clampData&&a.clampData(w,w),s=a.dataToPoint(w,!0)}if(hx(a,"cartesian2d")){var _=a.getAxis("x"),T=a.getAxis("y"),v=n.get(t[0],e),y=n.get(t[1],e);kL(v)?s[0]=_.toGlobalCoord(_.getExtent()[t[0]==="x0"?0:1]):kL(y)&&(s[1]=T.toGlobalCoord(T.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var yfe=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],tTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Gg.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var c=$e(yfe,function(d){return vfe(s,l,d,a,i)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new Lt});this.group.add(u.group),this.markKeep(u);var d=nTt(o,t,r);r.setData(d),d.each(function(h){var f=$e(yfe,function(P){return vfe(d,h,P,t,a)}),m=o.getAxis("x").scale,v=o.getAxis("y").scale,y=m.getExtent(),w=v.getExtent(),_=[m.parse(d.get("x0",h)),m.parse(d.get("x1",h))],T=[v.parse(d.get("y0",h)),v.parse(d.get("y1",h))];Bu(_),Bu(T);var A=!(y[0]>_[1]||y[1]<_[0]||w[0]>T[1]||w[1]<T[0]),C=!A;d.setItemLayout(h,{points:f,allClipped:C});var k=d.getItemModel(h).getModel("itemStyle").getItemStyle(),M=MM(l,"color");k.fill||(k.fill=M,it(k.fill)&&(k.fill=z2(k.fill,.4))),k.stroke||(k.stroke=M),d.setItemVisual(h,"style",k)}),d.diff(vR(u).data).add(function(h){var f=d.getItemLayout(h);if(!f.allClipped){var m=new wl({shape:{points:f.points}});d.setItemGraphicEl(h,m),u.group.add(m)}}).update(function(h,f){var m=vR(u).data.getItemGraphicEl(f),v=d.getItemLayout(h);v.allClipped?m&&u.group.remove(m):(m?tr(m,{shape:{points:v.points}},r,h):m=new wl({shape:{points:v.points}}),d.setItemGraphicEl(h,m),u.group.add(m))}).remove(function(h){var f=vR(u).data.getItemGraphicEl(h);u.group.remove(f)}).execute(),d.eachItemGraphicEl(function(h,f){var m=d.getItemModel(f),v=d.getItemVisual(f,"style");h.useStyle(d.getItemVisual(f,"style")),os(h,po(m),{labelFetcher:r,labelDataIndex:f,defaultText:d.getName(f)||"",inheritColor:it(v.fill)?z2(v.fill,1):"#000"}),as(h,m),Vi(h,null,null,m.get(["emphasis","disabled"])),$t(h).dataModel=r}),vR(u).data=d,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e}(IX);function nTt(n,e,t){var r,i,a=["x0","y0","x1","y1"];if(n){var o=$e(n&&n.dimensions,function(c){var u=e.getData(),d=u.getDimensionInfo(u.mapDimension(c))||{};return Ie(Ie({},d),{name:c,ordinalMeta:null})});i=$e(a,function(c,u){return{name:c,type:o[u%2].type}}),r=new gl(i,t)}else i=[{name:"value",type:"float"}],r=new gl(i,t);var s=$e(t.get("data"),Yt(J1t,e,n,t));n&&(s=gr(s,Yt(eTt,n)));var l=n?function(c,u,d,h){var f=c.coord[Math.floor(h/2)][h%2];return cy(f,i[h])}:function(c,u,d,h){return cy(c.value,i[h])};return r.initData(s,null,l),r.hasItemOption=!0,r}function rTt(n){n.registerComponentModel(Q1t),n.registerComponentView(tTt),n.registerPreprocessor(function(e){CX(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var iTt=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},xG=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Fe(r)&&Z(r,function(a,o){it(a)&&(a={type:a}),r[o]=en(a,iTt(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var c=l.name;i.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,h=d.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):u=!0}else u=!0;u&&BY(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=pt(),s=$e(a,function(l){return(it(l)||Jn(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new br(l,this,this.ecModel))},this);this._data=gr(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;Z(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&dn(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Dn),yS=Yt,_G=Z,yR=Lt,ICe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new yR),this.group.add(this._selectorGroup=new yR),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,l,s,c);var u=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),f=Za(u,d,h),m=this.layoutInner(t,o,f,a,l,c),v=Za(kt({width:m.width,height:m.height},u),d,h);this.group.x=v.x-m.x,this.group.y=v.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=yCe(m,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this.getContentGroup(),u=pt(),d=r.get("selectedMode"),h=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&h.push(f.id)}),_G(r.getData(),function(f,m){var v=f.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var y=new yR;y.newline=!0,c.add(y);return}var w=i.getSeriesByName(v)[0];if(!u.get(v))if(w){var _=w.getData(),T=_.getVisual("legendLineStyle")||{},A=_.getVisual("legendIcon"),C=_.getVisual("style"),k=this._createItem(w,v,m,f,r,t,T,C,A,d,a);k.on("click",yS(bfe,v,null,a,h)).on("mouseover",yS(SG,w.name,null,a,h)).on("mouseout",yS(TG,w.name,null,a,h)),i.ssr&&k.eachChild(function(M){var P=$t(M);P.seriesIndex=w.seriesIndex,P.dataIndex=m,P.ssrType="legend"}),u.set(v,!0)}else i.eachRawSeries(function(M){if(!u.get(v)&&M.legendVisualProvider){var P=M.legendVisualProvider;if(!P.containName(v))return;var O=P.indexOfName(v),j=P.getItemVisual(O,"style"),L=P.getItemVisual(O,"legendIcon"),B=Uc(j.fill);B&&B[3]===0&&(B[3]=.2,j=Ie(Ie({},j),{fill:Ag(B,"rgba")}));var $=this._createItem(M,v,m,f,r,t,{},j,L,d,a);$.on("click",yS(bfe,null,v,a,h)).on("mouseover",yS(SG,null,v,a,h)).on("mouseout",yS(TG,null,v,a,h)),i.ssr&&$.eachChild(function(Y){var G=$t(Y);G.seriesIndex=M.seriesIndex,G.dataIndex=m,G.ssrType="legend"}),u.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(t,r,i,a,o){var s=this.getSelectorGroup();_G(t,function(c){var u=c.type,d=new Yn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(d);var h=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);os(d,{normal:h,emphasis:f},{defaultText:c.title}),Ew(d)})},e.prototype._createItem=function(t,r,i,a,o,s,l,c,u,d,h){var f=t.visualDrawType,m=o.get("itemWidth"),v=o.get("itemHeight"),y=o.isSelected(r),w=a.get("symbolRotate"),_=a.get("symbolKeepAspect"),T=a.get("icon");u=T||u||"roundRect";var A=aTt(u,a,l,c,f,y,h),C=new yR,k=a.getModel("textStyle");if(Et(t.getLegendIcon)&&(!T||T==="inherit"))C.add(t.getLegendIcon({itemWidth:m,itemHeight:v,icon:u,iconRotate:w,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:_}));else{var M=T==="inherit"&&t.getData().getVisual("symbol")?w==="inherit"?t.getData().getVisual("symbolRotate"):w:0;C.add(oTt({itemWidth:m,itemHeight:v,icon:u,iconRotate:M,itemStyle:A.itemStyle,symbolKeepAspect:_}))}var P=s==="left"?m+5:-5,O=s,j=o.get("formatter"),L=r;it(j)&&j?L=j.replace("{name}",r??""):Et(j)&&(L=j(r));var B=y?k.getTextColor():a.get("inactiveColor");C.add(new Yn({style:ri(k,{text:L,x:P,y:v/2,fill:B,align:O,verticalAlign:"middle"},{inheritColor:B})}));var $=new Hn({shape:C.getBoundingRect(),style:{fill:"transparent"}}),Y=a.getModel("tooltip");return Y.get("show")&&lx({el:$,componentModel:o,itemName:r,itemTooltipOption:Y.option}),C.add($),C.eachChild(function(G){G.silent=!0}),$.silent=!d,this.getContentGroup().add(C),Ew(C),C.__legendDataIndex=i,C},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();kw(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){kw("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),f=[-h.x,-h.y],m=t.get("selectorButtonGap",!0),v=t.getOrient().index,y=v===0?"width":"height",w=v===0?"height":"width",_=v===0?"y":"x";s==="end"?f[v]+=u[y]+m:d[v]+=h[y]+m,f[1-v]+=u[w]/2-h[w]/2,c.x=f[0],c.y=f[1],l.x=d[0],l.y=d[1];var T={x:0,y:0};return T[y]=u[y]+m+h[y],T[w]=Math.max(u[w],h[w]),T[_]=Math.min(0,h[_]+f[1-v]),T}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Ni);function aTt(n,e,t,r,i,a,o){function s(y,w){y.lineWidth==="auto"&&(y.lineWidth=w.lineWidth>0?2:0),_G(y,function(_,T){y[T]==="inherit"&&(y[T]=w[T])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?r.decal:hT(d,o),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:t).opacity),s(c,r);var h=e.getModel("lineStyle"),f=h.getLineStyle();if(s(f,t),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),v=c[u];c.lineWidth=m==="auto"?r.lineWidth>0&&v?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),f.stroke=h.get("inactiveColor"),f.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function oTt(n){var e=n.icon||"roundRect",t=Pa(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function bfe(n,e,t,r){TG(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),SG(n,e,t,r)}function MCe(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function SG(n,e,t,r){MCe(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function TG(n,e,t,r){MCe(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function sTt(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function Ak(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},a=[];t.eachComponent({mainType:"legend",query:e},function(s){r?s[n]():s[n](e.name),wfe(s,i),a.push(s.componentIndex)});var o={};return t.eachComponent("legend",function(s){Z(i,function(l,c){s[l?"select":"unSelect"](c)}),wfe(s,o)}),r?{selected:o,legendIndex:a}:{name:e.name,selected:o}}function wfe(n,e){var t=e||{};return Z(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=n.isSelected(i);dt(t,i)?t[i]=t[i]&&a:t[i]=a}}),t}function lTt(n){n.registerAction("legendToggleSelect","legendselectchanged",Yt(Ak,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Yt(Ak,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Yt(Ak,"inverseSelect")),n.registerAction("legendSelect","legendselected",Yt(Ak,"select")),n.registerAction("legendUnSelect","legendunselected",Yt(Ak,"unSelect"))}function PCe(n){n.registerComponentModel(xG),n.registerComponentView(ICe),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,sTt),n.registerSubTypeDefaulter("legend",function(){return"plain"}),lTt(n)}var cTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=KT(t);n.prototype.init.call(this,t,r,i),xfe(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),xfe(this,this.option,t)},e.type="legend.scroll",e.defaultOption=$y(xG.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(xG);function xfe(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,Sy(e,t,{type:"box",ignoreSize:!!i})}var _fe=Lt,HV=["width","height"],GV=["x","y"],uTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new _fe),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new _fe)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this;n.prototype.renderInner.call(this,t,r,i,a,o,s,l);var u=this._controllerGroup,d=r.get("pageIconSize",!0),h=Fe(d)?d:[d,d];m("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new Yn({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(v,y){var w=v+"DataIndex",_=DM(r.get("pageIcons",!0)[r.getOrient().name][y],{onclick:ct(c._pageGo,c,w,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,u.add(_)}},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getSelectorGroup(),c=t.getOrient().index,u=HV[c],d=GV[c],h=HV[1-c],f=GV[1-c];o&&kw("horizontal",l,t.get("selectorItemGap",!0));var m=t.get("selectorButtonGap",!0),v=l.getBoundingRect(),y=[-v.x,-v.y],w=Rt(i);o&&(w[u]=i[u]-v[u]-m);var _=this._layoutContentAndController(t,a,w,c,u,h,f,d);if(o){if(s==="end")y[c]+=_[u]+m;else{var T=v[u]+m;y[c]-=T,_[d]-=T}_[u]+=v[u]+m,y[1-c]+=_[f]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[f]=Math.min(_[f],v[f]+y[1-c]),l.x=y[0],l.y=y[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(t,r,i,a,o,s,l,c){var u=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;kw(t.get("orient"),u,t.get("itemGap"),a?i.width:null,a?null:i.height),kw("horizontal",h,t.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),m=h.getBoundingRect(),v=this._showController=f[o]>i[o],y=[-f.x,-f.y];r||(y[a]=u[c]);var w=[0,0],_=[-m.x,-m.y],T=Gt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(v){var A=t.get("pageButtonPosition",!0);A==="end"?_[a]+=i[o]-m[o]:w[a]+=m[o]+T}_[1-a]+=f[s]/2-m[s]/2,u.setPosition(y),d.setPosition(w),h.setPosition(_);var C={x:0,y:0};if(C[o]=v?i[o]:f[o],C[s]=Math.max(f[s],m[s]),C[l]=Math.min(0,m[l]+_[1-a]),d.__rectSize=i[o],v){var k={x:0,y:0};k[o]=Math.max(i[o]-m[o]-T,0),k[s]=C[s],d.setClipPath(new Hn({shape:k})),d.__rectSize=k[o]}else h.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(t);return M.pageIndex!=null&&tr(u,{x:M.contentPosition[0],y:M.contentPosition[1]},v?t:null),this._updatePageInfoView(t,M),C},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;Z(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",h=r[d]!=null,f=i.childOfName(u);f&&(f.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;a&&o&&a.setStyle("text",it(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=HV[o],l=GV[o],c=this._findTargetItemIndex(r),u=i.children(),d=u[c],h=u.length,f=h?1:0,m={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return m;var v=A(d);m.contentPosition[o]=-v.s;for(var y=c+1,w=v,_=v,T=null;y<=h;++y)T=A(u[y]),(!T&&_.e>w.s+a||T&&!C(T,w.s))&&(_.i>w.i?w=_:w=T,w&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=w.i),++m.pageCount)),_=T;for(var y=c-1,w=v,_=v,T=null;y>=-1;--y)T=A(u[y]),(!T||!C(_,T.s))&&w.i<_.i&&(_=w,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=w.i),++m.pageCount,++m.pageIndex),w=T;return m;function A(k){if(k){var M=k.getBoundingRect(),P=M[l]+k[l];return{s:P,e:P+M[s],i:k.__legendDataIndex}}}function C(k,M){return k.e>=M&&k.s<=M+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(r=s)}),r??a},e.type="legend.scroll",e}(ICe);function dTt(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function hTt(n){yn(PCe),n.registerComponentModel(cTt),n.registerComponentView(uTt),dTt(n)}function fTt(n){yn(PCe),yn(hTt)}var pTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=$y(CI.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(CI),MX=Gn();function gTt(n,e,t){MX(n).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=t)})}function mTt(n,e){for(var t=MX(n).coordSysRecordMap,r=t.keys(),i=0;i<r.length;i++){var a=r[i],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||OCe(t,o))}}}function OCe(n,e){if(e){n.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function vTt(n,e){var t={model:e,containsPoint:Yt(bTt,e),dispatchAction:Yt(yTt,n),dataZoomInfoMap:null,controller:null},r=t.controller=new BM(n.getZr());return Z(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],c=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&t.dispatchAction(o)})}),t}function yTt(n,e){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function bTt(n,e,t,r){return n.coordinateSystem.containPoint([t,r])}function wTt(n){var e,t="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[t+s]>r[t+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function xTt(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=MX(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=pt());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=gCe(a);Z(o.infoList,function(s){var l=s.model.uid,c=i.get(l)||i.set(l,vTt(t,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=pt());u.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){OCe(i,a);return}var u=wTt(l);o.enable(u.controlType,u.opt),o.setPointerChecker(a.containsPoint),QT(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var _Tt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,i){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),gTt(i,t,{pan:ct(qV.pan,this),zoom:ct(qV.zoom,this),scrollMove:ct(qV.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){mTt(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(_X),qV={zoom:function(n,e,t,r){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=WV[e](null,[r.originX,r.originY],o,t,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/r.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(px(0,a,[0,100],0,u.minSpan,u.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Sfe(function(n,e,t,r,i,a){var o=WV[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,t);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:Sfe(function(n,e,t,r,i,a){var o=WV[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,t);return o.signal*(n[1]-n[0])*a.scrollDelta})};function Sfe(n){return function(e,t,r,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=n(o,s,e,t,r,i);if(px(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var WV={grid:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=e[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,e,t,r,i){var a=t.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function RCe(n){SX(n),n.registerComponentModel(pTt),n.registerComponentView(_Tt),xTt(n)}var STt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=$y(CI.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(CI),kk=Hn,Tfe=7,TTt=1,YV=30,ETt=7,Ck="horizontal",Efe="vertical",ATt=5,kTt=["line","bar","candlestick","scatter"],CTt={easing:"cubicOut",duration:100,delay:0},DTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=ct(this._onBrush,this),this._onBrushEnd=ct(this._onBrushEnd,this)},e.prototype.render=function(t,r,i,a){if(n.prototype.render.apply(this,arguments),QT(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){gI(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new Lt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),a=i?ETt:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===Ck?{right:s.width-o.x-o.width,top:s.height-YV-Tfe-a,width:o.width,height:YV}:{right:Tfe,top:o.y,width:YV,height:o.height},c=KT(t.option);Z(["right","top","width","height"],function(d){c[d]==="ph"&&(c[d]=l[d])});var u=Za(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===Efe&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===Ck&&!o?{scaleY:l?1:-1,scaleX:1}:i===Ck&&o?{scaleY:l?1:-1,scaleX:-1}:i===Efe&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=t.getBoundingRect([s]);t.x=r.x-c.x,t.y=r.y-c.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=t.get("brushSelect");i.add(new kk({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new kk({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:ct(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var d=o.getDataExtent(l),h=(d[1]-d[0])*.3;d=[d[0]-h,d[1]+h];var f=[0,r[1]],m=[0,r[0]],v=[[r[0],0],[0,0]],y=[],w=m[1]/(o.count()-1),_=0,T=Math.round(o.count()/r[0]),A;o.each([l],function(O,j){if(T>0&&j%T){_+=w;return}var L=O==null||isNaN(O)||O==="",B=L?0:yr(O,d,f,!0);L&&!A&&j?(v.push([v[v.length-1][0],0]),y.push([y[y.length-1][0],0])):!L&&A&&(v.push([_,0]),y.push([_,0])),v.push([_,B]),y.push([_,B]),_+=w,A=L}),c=this._shadowPolygonPts=v,u=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var C=this.dataZoomModel;function k(O){var j=C.getModel(O?"selectedDataBackground":"dataBackground"),L=new Lt,B=new wl({shape:{points:c},segmentIgnoreThreshold:1,style:j.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),$=new xl({shape:{points:u},segmentIgnoreThreshold:1,style:j.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(B),L.add($),L}for(var M=0;M<3;M++){var P=k(M===1);this._displayables.sliderGroup.add(P),this._displayables.dataShadowSegs.push(P)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();Z(l,function(c){if(!i&&!(r!==!0&&dn(kTt,c.get("type"))<0)){var u=a.getComponent(Jv(o),s).axis,d=ITt(o),h,f=c.coordinateSystem;d!=null&&f.getOtherAxis&&(h=f.getOtherAxis(u).inverse),d=c.getData().mapDimension(d),i={thisAxis:u,series:c,thisDim:o,otherDim:d,otherAxisInverse:h}}},this)},this),i}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,d=l.get("brushSelect"),h=r.filler=new kk({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(h),o.add(new kk({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:TTt,fill:"rgba(0,0,0,0)"}})),Z([0,1],function(T){var A=l.get("handleIcon");!iL[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A);var C=Pa(A,-1,0,2,2,null,!0);C.attr({cursor:Afe(this._orient),draggable:!0,drift:ct(this._onDragMove,this,T),ondragend:ct(this._onDragEnd,this),onmouseover:ct(this._showDataInfo,this,!0),onmouseout:ct(this._showDataInfo,this,!1),z2:5});var k=C.getBoundingRect(),M=l.get("handleSize");this._handleHeight=Ze(M,this._size[1]),this._handleWidth=k.width/k.height*this._handleHeight,C.setStyle(l.getModel("handleStyle").getItemStyle()),C.style.strokeNoScale=!0,C.rectHover=!0,C.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ew(C);var P=l.get("handleColor");P!=null&&(C.style.fill=P),o.add(i[T]=C);var O=l.getModel("textStyle"),j=l.get("handleLabel")||{},L=j.show||!1;t.add(a[T]=new Yn({silent:!0,invisible:!L,style:ri(O,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:O.getTextColor(),font:O.getFont()}),z2:10}))},this);var f=h;if(d){var m=Ze(l.get("moveHandleSize"),s[1]),v=r.moveHandle=new Hn({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:m}}),y=m*.8,w=r.moveHandleIcon=Pa(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);w.silent=!0,w.y=s[1]+m/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(m,10));f=r.moveZone=new Hn({invisible:!0,shape:{y:s[1]-_,height:m+_}}),f.on("mouseover",function(){c.enterEmphasis(v)}).on("mouseout",function(){c.leaveEmphasis(v)}),o.add(v),o.add(w),o.add(f)}f.attr({draggable:!0,cursor:Afe(this._orient),drift:ct(this._onDragMove,this,"all"),ondragstart:ct(this._showDataInfo,this,!0),ondragend:ct(this._onDragEnd,this),onmouseover:ct(this._showDataInfo,this,!0),onmouseout:ct(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[yr(t[0],[0,100],r,!0),yr(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];px(r,a,o,i.get("zoomLock")?"all":t,s.minSpan!=null?yr(s.minSpan,l,o,!0):null,s.maxSpan!=null?yr(s.maxSpan,l,o,!0):null);var c=this._range,u=this._range=Bu([yr(a[0],o,l,!0),yr(a[1],o,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,a=Bu(i.slice()),o=this._size;Z([0,1],function(f){var m=r.handles[f],v=this._handleHeight;m.attr({scaleX:v/2,scaleY:v/2,x:i[f]+(f?-1:1),y:o[1]/2-v/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,a[0],a[1],o[0]],u=0;u<l.length;u++){var d=l[u],h=d.getClipPath();h||(h=new Hn,d.setClipPath(h)),h.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,d=t?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],c),this._formatLabel(d[1],c)]}}var h=Bu(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(m){var v=Aw(i.handles[m].parent,this.group),y=F5(m===0?"right":"left",v),w=this._handleWidth/2+ATt,_=nh([h[m]+(m===0?-w:w),this._size[1]/2],v);a[m].setStyle({x:_[0],y:_[1],verticalAlign:o===Ck?"middle":y,align:o===Ck?y:"center",text:s[m]})}},e.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return Et(a)?a(t,s):it(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=t||this._dragging?o:i,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,r,i,a){this._dragging=!0,Fg(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=nh([r,i],o,!0),l=this._updateInterval(t,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new tn(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Bu([yr(i.x,o,s,!0),yr(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Fg(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new kk({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(t,r),u=l.transformCoordToLocal(s.x,s.y),d=this._size;c[0]=Math.max(Math.min(d[0],c[0]),0),o.setShape({x:u[0],y:0,width:c[0]-u[0],height:d[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?CTt:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=gCe(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(_X);function ITt(n){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[n]}function Afe(n){return n==="vertical"?"ns-resize":"ew-resize"}function NCe(n){n.registerComponentModel(STt),n.registerComponentView(DTt),SX(n)}function MTt(n){yn(RCe),yn(NCe)}var LCe={get:function(n,e,t){var r=Rt((PTt[n]||{})[e]);return t&&Fe(r)?r[r.length-1]:r}},PTt={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},kfe=fo.mapVisual,OTt=fo.eachVisual,RTt=Fe,Cfe=Z,NTt=Bu,LTt=yr,CL=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&ECe(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=ct(t,this),this.controllerVisuals=yG(this.option.controller,r,t),this.targetVisuals=yG(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return t==null||t==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Or(t),r},e.prototype.eachTargetSeries=function(t,r){Z(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,c;i=i||["<",">"],Fe(t)&&(t=t.slice(),c=!0);var u=r?t:c?[d(t[0]),d(t[1])]:d(t);if(it(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(Et(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?i[0]+" "+u[1]:t[1]===s[1]?i[1]+" "+u[0]:u[0]+" - "+u[1];return u;function d(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=NTt([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});en(a,i),en(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),c.call(this,a,"inRange","outOfRange"),u.call(this,o);function l(d){RTt(r.color)&&!d.inRange&&(d.inRange={color:r.color.slice().reverse()}),d.inRange=d.inRange||{color:t.get("gradientColor")}}function c(d,h,f){var m=d[h],v=d[f];m&&!v&&(v=d[f]={},Cfe(m,function(y,w){if(fo.isValidType(w)){var _=LCe.get(w,"inactive",s);_!=null&&(v[w]=_,w==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function u(d){var h=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,f=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),v=this.getItemSymbol(),y=v||"roundRect";Cfe(this.stateList,function(w){var _=this.itemSize,T=d[w];T||(T=d[w]={color:s?m:[m]}),T.symbol==null&&(T.symbol=h&&Rt(h)||(s?y:[y])),T.symbolSize==null&&(T.symbolSize=f&&Rt(f)||(s?_[0]:[_[0],_[0]])),T.symbol=kfe(T.symbol,function(k){return k==="none"?y:k});var A=T.symbolSize;if(A!=null){var C=-1/0;OTt(A,function(k){k>C&&(C=k)}),T.symbolSize=kfe(A,function(k){return LTt(k,[0,C],[0,_[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Dn),Dfe=[20,140],jTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Dfe[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Dfe[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):Fe(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),Z(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=Bu((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=t)&&(r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=Ife(this,"outOfRange",this.getExtent()),i=Ife(this,"inRange",this.option.range.slice()),a=[];function o(f,m){a.push({value:f,color:t(f,m)})}for(var s=0,l=0,c=i.length,u=r.length;l<u&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var d=1;s<c;s++,d=0)d&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var d=1;l<u;l++)(!i.length||i[i.length-1]<r[l])&&(d&&(a.length&&o(a[a.length-1].value,"outOfRange"),d=0),o(r[l],"outOfRange"));var h=a.length;return{stops:a,outerColors:[h?a[0].color:"transparent",h?a[h-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=$y(CL.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(CL);function Ife(n,e,t){if(t[0]===t[1])return t.slice();for(var r=200,i=(t[1]-t[0])/r,a=t[0],o=[],s=0;s<=r&&a<t[1];s++)o.push(a),a+=i;return o.push(t[1]),o}var jCe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,i,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,i=YT(r.get("padding")||0),a=t.getBoundingRect();t.add(new Hn({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(f){return s[f]}function u(f,m){s[f]=m}var d=o.controllerVisuals[a||o.getValueState(t)],h=fo.prepareVisualTypes(d);return Z(h,function(f){var m=d[f];i.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",m=d.__alphaForOpacity),fo.dependsOn(f,r)&&m&&m.applyVisual(t,c,u)}),s[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api;G5(t,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(t,r,i,a){},e.type="visualMap",e}(Ni),Mfe=[["left","right","width"],["top","bottom","height"]];function FCe(n,e,t){var r=n.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=Mfe[o],l=[0,null,10],c={},u=0;u<3;u++)c[Mfe[1-o][u]]=l[u],c[s[u]]=u===2?t[0]:r[s[u]];var d=[["x","width",3],["y","height",0]][o],h=Za(c,a,r.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+h[d[1]]*.5<a[d[1]]*.5?0:1]}function pN(n,e){return Z(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),n}var sf=yr,FTt=Z,Pfe=Math.min,KV=Math.max,$Tt=12,BTt=6,UTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){n.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=ct(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ct(this._hideIndicator,this)},e.prototype.doRender=function(t,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],c),d=this._applyTransform(i===0?"bottom":"top",c),h=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Yn({style:ri(f,{x:u[0],y:u[1],verticalAlign:h==="horizontal"?"middle":d,align:h==="horizontal"?d:"center",text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=FCe(r,this.api,a),c=i.mainGroup=this._createBarGroup(l),u=new Lt;c.add(u),u.add(i.outOfRange=Ofe()),u.add(i.inRange=Ofe(null,s?Nfe(this._orient):null,ct(this._dragHandle,this,"all",!1),ct(this._dragHandle,this,"all",!0))),u.setClipPath(new Hn({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var d=r.textStyleModel.getTextRect("国"),h=KV(d.width,d.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,c,0,a,h,o),this._createHandle(r,c,1,a,h,o)),this._createIndicator(r,c,a,h,o),t.add(c)},e.prototype._createHandle=function(t,r,i,a,o,s){var l=ct(this._dragHandle,this,i,!1),c=ct(this._dragHandle,this,i,!0),u=sh(t.get("handleSize"),a[0]),d=Pa(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),h=Nfe(this._orient);d.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(w){Fg(w.event)}}),d.x=a[0]/2,d.useStyle(t.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),lw(d,!0),r.add(d);var f=this.visualMapModel.textStyleModel,m=new Yn({cursor:h,draggable:!0,drift:l,onmousemove:function(w){Fg(w.event)},ondragend:c,style:ri(f,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var v=[u,0],y=this._shapes;y.handleThumbs[i]=d,y.handleLabelPoints[i]=v,y.handleLabels[i]=m},e.prototype._createIndicator=function(t,r,i,a,o){var s=sh(t.get("indicatorSize"),i[0]),l=Pa(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof Fo){var u=l.style;l.useStyle(Ie({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);r.add(l);var d=this.visualMapModel.textStyleModel,h=new Yn({silent:!0,invisible:!0,style:ri(d,{x:0,y:0,text:""})});this.group.add(h);var f=[(o==="horizontal"?a/2:BTt)+i[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=h,m.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():Rfe(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[sf(r[0],i,a,!0),sf(r[1],i,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];px(r,a,o,t,0);var s=i.getExtent();this._dataInterval=[sf(a[0],o,s,!0),sf(a[1],o,s,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),c=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(i,l);return{barColor:new kM(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var i=100,a=[],o=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new Lt(r==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,c=a.getExtent(),u=this._applyTransform("left",i.mainGroup);FTt([0,1],function(d){var h=o[d];h.setStyle("fill",r.handlesColor[d]),h.y=t[d];var f=sf(t[d],[0,l[1]],c,!0),m=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=m/l[0],h.x=l[0]-m/2;var v=nh(i.handleLabelPoints[d],Aw(h,this.group));if(this._orient==="horizontal"){var y=u==="left"||u==="top"?(l[0]-m)/2:(l[0]-m)/-2;v[1]+=y}s[d].setStyle({x:v[0],y:v[1],text:a.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],u=this._shapes,d=u.indicator;if(d){d.attr("invisible",!1);var h={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",h),m=this.getControllerVisual(t,"symbolSize"),v=sf(t,s,c,!0),y=l[0]-m/2,w={x:d.x,y:d.y};d.y=v,d.x=y;var _=nh(u.indicatorLabelPoint,Aw(d,this.group)),T=u.indicatorLabel;T.attr("invisible",!1);var A=this._applyTransform("left",u.mainGroup),C=this._orient,k=C==="horizontal";T.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:k?A:"middle",align:k?"center":A});var M={x:y,y:v,style:{fill:f}},P={style:{x:_[0],y:_[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var O={duration:100,easing:"cubicInOut",additive:!0};d.x=w.x,d.y=w.y,d.animateTo(M,O),T.animateTo(P,O)}else d.attr(M),T.attr(P);this._firstShowIndicator=!1;var j=this._shapes.handleLabels;if(j)for(var L=0;L<j.length;L++)this.api.enterBlur(j[L])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Pfe(KV(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();t=Pfe(KV(o[0],t),o[1]);var l=VTt(i,s,o),c=[t-l,t+l],u=sf(t,o,s,!0),d=[sf(c[0],o,s,!0),sf(c[1],o,s,!0)];c[0]<o[0]&&(d[0]=-1/0),c[1]>o[1]&&(d[1]=1/0),r&&(d[0]===-1/0?this._showIndicator(u,d[1],"< ",l):d[1]===1/0?this._showIndicator(u,d[0],"> ",l):this._showIndicator(u,u,"≈ ",l));var h=this._hoverLinkDataIndices,f=[];(r||Rfe(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(d));var m=Kst(h,f);this._dispatchHighDown("downplay",pN(m[0],i)),this._dispatchHighDown("highlight",pN(m[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(uw(t.target,function(l){var c=$t(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",pN(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,i,a){var o=Aw(r,a?null:this.group);return Fe(t)?nh(t,o,i):F5(t,o,i)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(jCe);function Ofe(n,e,t,r){return new wl({shape:{points:n},draggable:!!t,cursor:e,drift:t,onmousemove:function(i){Fg(i.event)},ondragend:r})}function VTt(n,e,t){var r=$Tt/2,i=n.get("hoverLinkDataSize");return i&&(r=sf(i,e,t,!0)/2),r}function Rfe(n){var e=n.get("hoverLinkOnHandle");return!!(e??n.get("realtime"))}function Nfe(n){return n==="vertical"?"ns-resize":"ew-resize"}var zTt={type:"selectDataRange",event:"dataRangeSelected",update:"update"},HTt=function(n,e){e.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},GTt=[{createOnAllSeries:!0,reset:function(n,e){var t=[];return e.eachComponent("visualMap",function(r){var i=n.pipelineContext;!r.isTargetSeries(n)||i&&i.large||t.push(f1t(r.stateList,r.targetVisuals,ct(r.getValueState,r),r.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,e){var t=n.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(ct(qTt,null,n,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(t);o>=0&&(a.dimension=o,r.push(a))}}),n.getData().setVisual("visualMeta",r)}}];function qTt(n,e,t,r){for(var i=e.targetVisuals[r],a=fo.prepareVisualTypes(i),o={color:MM(n.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],u=i[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(t,d,h)}return o.color;function d(f){return o[f]}function h(f,m){o[f]=m}}var Lfe=Z;function WTt(n){var e=n&&n.visualMap;Fe(e)||(e=e?[e]:[]),Lfe(e,function(t){if(t){bS(t,"splitList")&&!bS(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&Fe(r)&&Lfe(r,function(i){It(i)&&(bS(i,"start")&&!bS(i,"min")&&(i.min=i.start),bS(i,"end")&&!bS(i,"max")&&(i.max=i.end))})}})}function bS(n,e){return n&&n.hasOwnProperty&&n.hasOwnProperty(e)}var jfe=!1;function $Ce(n){jfe||(jfe=!0,n.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),n.registerAction(zTt,HTt),Z(GTt,function(e){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,e)}),n.registerPreprocessor(WTt))}function BCe(n){n.registerComponentModel(jTt),n.registerComponentView(UTt),$Ce(n)}var YTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],KTt[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Rt(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=$e(this._pieceList,function(l){return l=Rt(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},i=fo.listVisualTypes(),a=this.isCategory();Z(t.pieces,function(s){Z(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),Z(r,function(s,l){var c=!1;Z(this.stateList,function(u){c=c||o(t,u,l)||o(t.target,u,l)},this),!c&&Z(this.stateList,function(u){(t[u]||(t[u]={}))[l]=LCe.get(l,u==="inRange"?"active":"inactive",a)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var i=this.option,a=this._pieceList,o=(r?i:t).selected||{};if(i.selected=o,Z(a,function(l,c){var u=this.getSelectedMapKey(l);o.hasOwnProperty(u)||(o[u]=!0)},this),i.selectedMode==="single"){var s=!1;Z(a,function(l,c){var u=this.getSelectedMapKey(l);o[u]&&(s?o[u]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Rt(t)},e.prototype.getValueState=function(t){var r=fo.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=fo.findPieceIndex(l,i);u===t&&o.push(c)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(u,d){var h=a.getRepresentValue({interval:u});d||(d=a.getValueState(h));var f=t(h,d);u[0]===-1/0?i[0]=f:u[1]===1/0?i[1]=f:r.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return Z(s,function(u){var d=u.interval;d&&(d[0]>c&&o([c,d[0]],"outOfRange"),o(d.slice()),c=d[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=$y(CL.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(CL),KTt={splitNumber:function(n){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;n.push({interval:[s,l],close:[1,1]})}e.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),Mse(n),Z(n,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var e=this.option;Z(e.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Ffe(e,n)},pieces:function(n){var e=this.option;Z(e.pieces,function(t,r){It(t)||(t={value:t});var i={text:"",index:r};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],f=0;f<3&&o[d]==null;f++)o[d]=t[h[f]],s[d]=l[f],u[d]=f===2;o[d]==null&&(o[d]=c[d])}u[0]&&o[1]===1/0&&(s[0]=0),u[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=fo.retrieveVisuals(t),n.push(i)},this),Ffe(e,n),Mse(n),Z(n,function(t){var r=t.close,i=[["<","≤"][r[1]],[">","≥"][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function Ffe(n,e){var t=n.inverse;(n.orient==="vertical"?!t:t)&&e.reverse()}var XTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),d=u.endsText,h=Ro(r.get("showLabel",!0),!d),f=!r.get("selectedMode");d&&this._renderEndsText(t,d[0],c,h,l),Z(u.viewPieceList,function(m){var v=m.piece,y=new Lt;y.onclick=ct(this._onItemClick,this,v),this._enableHoverLink(y,m.indexInModelPieceList);var w=r.getRepresentValue(v);if(this._createItemSymbol(y,w,[0,0,c[0],c[1]],f),h){var _=this.visualMapModel.getValueState(w);y.add(new Yn({style:{x:l==="right"?-i:c[0]+i,y:c[1]/2,text:v.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:_==="outOfRange"?.5:1},silent:f}))}t.add(y)},this),d&&this._renderEndsText(t,d[1],c,h,l),kw(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:pN(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return FCe(t,this.api,t.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(t,r,i,a,o){if(r){var s=new Lt,l=this.visualMapModel.textStyleModel;s.add(new Yn({style:ri(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=$e(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(t,r,i,a){var o=Pa(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));o.silent=a,t.add(o)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=Rt(i.selected),s=r.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,Z(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(jCe);function UCe(n){n.registerComponentModel(YTt),n.registerComponentView(XTt),$Ce(n)}function ZTt(n){yn(BCe),yn(UCe)}var QTt={label:{enabled:!0},decal:{show:!1}},$fe=Gn(),JTt={};function eEt(n,e){var t=n.getModel("aria");if(!t.get("enabled"))return;var r=Rt(QTt);en(r.label,n.getLocaleModel().get("aria"),!1),en(t.option,r,!1),i(),a();function i(){var c=t.getModel("decal"),u=c.get("show");if(u){var d=pt();n.eachSeries(function(h){if(!h.isColorBySeries()){var f=d.get(h.type);f||(f={},d.set(h.type,f)),$fe(h).scope=f}}),n.eachRawSeries(function(h){if(n.isSeriesFiltered(h))return;if(Et(h.enableAriaDecal)){h.enableAriaDecal();return}var f=h.getData();if(h.isColorBySeries()){var _=T8(h.ecModel,h.name,JTt,n.getSeriesCount()),T=f.getVisual("decal");f.setVisual("decal",A(T,_))}else{var m=h.getRawData(),v={},y=$fe(h).scope;f.each(function(C){var k=f.getRawIndex(C);v[k]=C});var w=m.count();m.each(function(C){var k=v[C],M=m.getName(C)||C+"",P=T8(h.ecModel,M,y,w),O=f.getItemVisual(k,"decal");f.setItemVisual(k,"decal",A(O,P))})}function A(C,k){var M=C?Ie(Ie({},k),C):k;return M.dirty=!0,M}})}}function a(){var c=e.getZr().dom;if(c){var u=n.getLocaleModel().get("aria"),d=t.getModel("label");if(d.option=kt(d.option,u),!!d.get("enabled")){if(c.setAttribute("role","img"),d.get("description")){c.setAttribute("aria-label",d.get("description"));return}var h=n.getSeriesCount(),f=d.get(["data","maxCount"])||10,m=d.get(["series","maxCount"])||10,v=Math.min(h,m),y;if(!(h<1)){var w=s();if(w){var _=d.get(["general","withTitle"]);y=o(_,{title:w})}else y=d.get(["general","withoutTitle"]);var T=[],A=h>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);y+=o(A,{seriesCount:h}),n.eachSeries(function(P,O){if(O<v){var j=void 0,L=P.get("name"),B=L?"withName":"withoutName";j=h>1?d.get(["series","multiple",B]):d.get(["series","single",B]),j=o(j,{seriesId:P.seriesIndex,seriesName:P.get("name"),seriesType:l(P.subType)});var $=P.getData();if($.count()>f){var Y=d.get(["data","partialData"]);j+=o(Y,{displayCnt:f})}else j+=d.get(["data","allData"]);for(var G=d.get(["data","separator","middle"]),W=d.get(["data","separator","end"]),X=d.get(["data","excludeDimensionId"]),te=[],re=0;re<$.count();re++)if(re<f){var z=$.getName(re),ae=X?gr($.getValues(re),function(ee,ye){return dn(X,ye)===-1}):$.getValues(re),le=d.get(["data",z?"withName":"withoutName"]);te.push(o(le,{name:z,value:ae.join(G)}))}j+=te.join(G)+W,T.push(j)}});var C=d.getModel(["series","multiple","separator"]),k=C.get("middle"),M=C.get("end");y+=T.join(k)+M,c.setAttribute("aria-label",y)}}}}function o(c,u){if(!it(c))return c;var d=c;return Z(u,function(h,f){d=d.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),h)}),d}function s(){var c=n.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=n.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function tEt(n){if(!(!n||!n.aria)){var e=n.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},Z(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function nEt(n){n.registerPreprocessor(tEt),n.registerVisual(n.PRIORITY.VISUAL.ARIA,eEt)}var Bfe={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},rEt=function(){function n(e){var t=this._condVal=it(e)?new RegExp(e):got(e)?e:null;if(t==null){var r="";fr(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return it(t)?this._condVal.test(e):Jn(t)?this._condVal.test(e+""):!1},n}(),iEt=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),aEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n}(),oEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n}(),sEt=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),lEt=function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n}();function PX(n,e){if(n===!0||n===!1){var t=new iEt;return t.value=n,t}var r="";return VCe(n)||fr(r),n.and?Ufe("and",n,e):n.or?Ufe("or",n,e):n.not?cEt(n,e):uEt(n,e)}function Ufe(n,e,t){var r=e[n],i="";Fe(r)||fr(i),r.length||fr(i);var a=n==="and"?new aEt:new oEt;return a.children=$e(r,function(o){return PX(o,t)}),a.children.length||fr(i),a}function cEt(n,e){var t=n.not,r="";VCe(t)||fr(r);var i=new sEt;return i.child=PX(t,e),i.child||fr(r),i}function uEt(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=In(n),o=n.parser,s=o?_Te(o):null,l=0;l<a.length;l++){var c=a[l];if(!(c==="parser"||e.valueGetterAttrMap.get(c))){var u=dt(Bfe,c)?Bfe[c]:c,d=n[c],h=s?s(d):d,f=Qut(u,h)||u==="reg"&&new rEt(h);f||fr(t),i.push(f)}}i.length||fr(t);var m=new lEt;return m.valueGetterParam=r,m.valueParser=s,m.getValue=e.getValue,m.subCondList=i,m}function VCe(n){return It(n)&&!Fs(n)}var dEt=function(){function n(e,t){this._cond=PX(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function hEt(n,e){return new dEt(n,e)}var fEt={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=hEt(n.config,{valueGetterAttrMap:pt({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;dt(s,"dimension")||fr(l);var u=e.getDimensionInfo(c);return u||fr(l),{dimIdx:u.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},pEt={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=Or(t);i.length||fr(r);var a=[];Z(i,function(u){var d=u.dimension,h=u.order,f=u.parser,m=u.incomparable;if(d==null&&fr(r),h!=="asc"&&h!=="desc"&&fr(r),m&&m!=="min"&&m!=="max"){var v="";fr(v)}if(h!=="asc"&&h!=="desc"){var y="";fr(y)}var w=e.getDimensionInfo(d);w||fr(r);var _=f?_Te(f):null;f&&!_&&fr(r),a.push({dimIdx:w.index,parser:_,comparator:new TTe(h,m)})});var o=e.sourceFormat;o!==$s&&o!==Qu&&fr(r);for(var s=[],l=0,c=e.count();l<c;l++)s.push(e.getRawDataItem(l));return s.sort(function(u,d){for(var h=0;h<a.length;h++){var f=a[h],m=e.retrieveValueFromItem(u,f.dimIdx),v=e.retrieveValueFromItem(d,f.dimIdx);f.parser&&(m=f.parser(m),v=f.parser(v));var y=f.comparator.evaluate(m,v);if(y!==0)return y}return 0}),{data:s}}};function gEt(n){n.registerTransform(fEt),n.registerTransform(pEt)}var mEt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new CTe(this),zle(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),zle(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:If},e}(Dn),vEt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(Ni);function yEt(n){n.registerComponentModel(mEt),n.registerComponentView(vEt)}var af=Bf.CMD;function e1(n,e){return Math.abs(n-e)<1e-5}function EG(n){var e=n.data,t=n.len(),r=[],i,a=0,o=0,s=0,l=0;function c($,Y){i&&i.length>2&&r.push(i),i=[$,Y]}function u($,Y,G,W){e1($,G)&&e1(Y,W)||i.push($,Y,G,W,G,W)}function d($,Y,G,W,X,te){var re=Math.abs(Y-$),z=Math.tan(re/4)*4/3,ae=Y<$?-1:1,le=Math.cos($),ee=Math.sin($),ye=Math.cos(Y),fe=Math.sin(Y),Ce=le*X+G,at=ee*te+W,Le=ye*X+G,we=fe*te+W,be=X*z*ae,ge=te*z*ae;i.push(Ce-be*ee,at+ge*le,Le+be*fe,we-ge*ye,Le,we)}for(var h,f,m,v,y=0;y<t;){var w=e[y++],_=y===1;switch(_&&(a=e[y],o=e[y+1],s=a,l=o,(w===af.L||w===af.C||w===af.Q)&&(i=[s,l])),w){case af.M:a=s=e[y++],o=l=e[y++],c(s,l);break;case af.L:h=e[y++],f=e[y++],u(a,o,h,f),a=h,o=f;break;case af.C:i.push(e[y++],e[y++],e[y++],e[y++],a=e[y++],o=e[y++]);break;case af.Q:h=e[y++],f=e[y++],m=e[y++],v=e[y++],i.push(a+2/3*(h-a),o+2/3*(f-o),m+2/3*(h-m),v+2/3*(f-v),m,v),a=m,o=v;break;case af.A:var T=e[y++],A=e[y++],C=e[y++],k=e[y++],M=e[y++],P=e[y++]+M;y+=1;var O=!e[y++];h=Math.cos(M)*C+T,f=Math.sin(M)*k+A,_?(s=h,l=f,c(s,l)):u(a,o,h,f),a=Math.cos(P)*C+T,o=Math.sin(P)*k+A;for(var j=(O?-1:1)*Math.PI/2,L=M;O?L>P:L<P;L+=j){var B=O?Math.max(L+j,P):Math.min(L+j,P);d(L,B,T,A,C,k)}break;case af.R:s=a=e[y++],l=o=e[y++],h=s+e[y++],f=l+e[y++],c(h,l),u(h,l,h,f),u(h,f,s,f),u(s,f,s,l),u(s,l,h,l);break;case af.Z:i&&u(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function AG(n,e,t,r,i,a,o,s,l,c){if(e1(n,t)&&e1(e,r)&&e1(i,o)&&e1(a,s)){l.push(o,s);return}var u=2/c,d=u*u,h=o-n,f=s-e,m=Math.sqrt(h*h+f*f);h/=m,f/=m;var v=t-n,y=r-e,w=i-o,_=a-s,T=v*v+y*y,A=w*w+_*_;if(T<d&&A<d){l.push(o,s);return}var C=h*v+f*y,k=-h*w-f*_,M=T-C*C,P=A-k*k;if(M<d&&C>=0&&P<d&&k>=0){l.push(o,s);return}var O=[],j=[];xy(n,t,i,o,.5,O),xy(e,r,a,s,.5,j),AG(O[0],j[0],O[1],j[1],O[2],j[2],O[3],j[3],l,c),AG(O[4],j[4],O[5],j[5],O[6],j[6],O[7],j[7],l,c)}function bEt(n,e){var t=EG(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var c=2;c<a.length;){var u=a[c++],d=a[c++],h=a[c++],f=a[c++],m=a[c++],v=a[c++];AG(s,l,u,d,h,f,m,v,o,e),s=m,l=v}r.push(o)}return r}function zCe(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],c=0;c<o;c++)l.push(s);var u=o*s,d=t-u;if(d>0)for(var c=0;c<d;c++)l[c%o]+=1;return l}function Vfe(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,o=n.endAngle,s=Math.abs(o-a),l=s*i,c=i-r,u=l>Math.abs(c),d=zCe([l,c],u?0:1,e),h=(u?s:c)/d.length,f=0;f<d.length;f++)for(var m=(u?c:s)/d[f],v=0;v<d[f];v++){var y={};u?(y.startAngle=a+h*f,y.endAngle=a+h*(f+1),y.r0=r+m*v,y.r=r+m*(v+1)):(y.startAngle=a+m*v,y.endAngle=a+m*(v+1),y.r0=r+h*f,y.r=r+h*(f+1)),y.clockwise=n.clockwise,y.cx=n.cx,y.cy=n.cy,t.push(y)}}function wEt(n,e,t){for(var r=n.width,i=n.height,a=r>i,o=zCe([r,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",c=a?"x":"y",u=a?"y":"x",d=n[s]/o.length,h=0;h<o.length;h++)for(var f=n[l]/o[h],m=0;m<o[h];m++){var v={};v[c]=h*d,v[u]=m*f,v[s]=d,v[l]=f,v.x+=n.x,v.y+=n.y,t.push(v)}}function zfe(n,e,t,r){return n*r-t*e}function xEt(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=zfe(u,d,l,c);if(Math.abs(h)<1e-6)return null;var f=n-i,m=e-a,v=zfe(f,m,u,d)/h;return v<0||v>1?null:new tn(v*l+n,v*c+e)}function _Et(n,e,t){var r=new tn;tn.sub(r,t,e),r.normalize();var i=new tn;tn.sub(i,n,e);var a=i.dot(r);return a}function wS(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function SEt(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var o=n[a],s=n[(a+1)%r],l=xEt(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&i.push({projPt:_Et(l,e,t),pt:l,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(y,w){return y.projPt-w.projPt});var c=i[0],u=i[i.length-1];if(u.idx<c.idx){var d=c;c=u,u=d}for(var h=[c.pt.x,c.pt.y],f=[u.pt.x,u.pt.y],m=[h],v=[f],a=c.idx+1;a<=u.idx;a++)wS(m,n[a].slice());wS(m,f),wS(m,h);for(var a=u.idx+1;a<=c.idx+r;a++)wS(v,n[a%r].slice());return wS(v,h),wS(v,f),[{points:m},{points:v}]}function Hfe(n){var e=n.points,t=[],r=[];P5(e,t,r);var i=new an(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,o=i.height,s=i.x,l=i.y,c=new tn,u=new tn;return a>o?(c.x=u.x=s+a/2,c.y=l,u.y=l+o):(c.y=u.y=l+o/2,c.x=s,u.x=s+a),SEt(e,c,u)}function DL(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);DL(n,a[0],i,r),DL(n,a[1],t-i,r)}return r}function TEt(n,e){for(var t=[],r=0;r<e;r++)t.push(XY(n));return t}function EEt(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function AEt(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function kEt(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":wEt(r,e,t),i=Hn;break;case"sector":Vfe(r,e,t),i=bl;break;case"circle":Vfe({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=bl;break;default:var a=n.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=$e(bEt(n.getUpdatedPathProxy(),o),function(w){return AEt(w)}),l=s.length;if(l===0)DL(Hfe,{points:s[0]},e,t);else if(l===e)for(var c=0;c<l;c++)t.push({points:s[c]});else{var u=0,d=$e(s,function(w){var _=[],T=[];P5(w,_,T);var A=(T[1]-_[1])*(T[0]-_[0]);return u+=A,{poly:w,area:A}});d.sort(function(w,_){return _.area-w.area});for(var h=e,c=0;c<l;c++){var f=d[c];if(h<=0)break;var m=c===l-1?h:Math.ceil(f.area/u*e);m<0||(DL(Hfe,{points:f.poly},m,t),h-=m)}}i=wl;break}if(!i)return TEt(n,e);for(var v=[],c=0;c<t.length;c++){var y=new i;y.setShape(t[c]),EEt(n,y),v.push(y)}return v}function CEt(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],o=t<r?n:e,s=Math.min(t,r),l=Math.abs(r-t)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,d=[o[0],o[1]],h=l,f=2;f<s;){var m=o[f-2],v=o[f-1],y=o[f++],w=o[f++],_=o[f++],T=o[f++],A=o[f++],C=o[f++];if(h<=0){d.push(y,w,_,T,A,C);continue}for(var k=Math.min(h,u-1)+1,M=1;M<=k;M++){var P=M/k;xy(m,y,_,A,P,i),xy(v,w,T,C,P,a),m=i[3],v=a[3],d.push(i[1],a[1],i[2],a[2],m,v),y=i[5],w=a[5],_=i[6],T=a[6]}h-=k-1}return o===n?[d,e]:[n,d]}function Gfe(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function DEt(n,e){for(var t,r,i,a=[],o=[],s=0;s<Math.max(n.length,e.length);s++){var l=n[s],c=e[s],u=void 0,d=void 0;l?c?(t=CEt(l,c),u=t[0],d=t[1],r=u,i=d):(d=Gfe(i||l,l),u=l):(u=Gfe(r||c,c),d=c),a.push(u),o.push(d)}return[a,o]}function qfe(n){for(var e=0,t=0,r=0,i=n.length,a=0,o=i-2;a<i;o=a,a+=2){var s=n[o],l=n[o+1],c=n[a],u=n[a+1],d=s*u-c*l;e+=d,t+=(s+c)*d,r+=(l+u)*d}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function IEt(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,o=0,s=n.length,l=s-2,c=0;c<i;c++){for(var u=c*6,d=0,h=0;h<s;h+=2){var f=h===0?u:(u+h-2)%l+2,m=n[f]-t[0],v=n[f+1]-t[1],y=e[h]-r[0],w=e[h+1]-r[1],_=y-m,T=w-v;d+=_*_+T*T}d<a&&(a=d,o=c)}return o}function MEt(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function PEt(n,e,t,r){for(var i=[],a,o=0;o<n.length;o++){var s=n[o],l=e[o],c=qfe(s),u=qfe(l);a==null&&(a=c[2]<0!=u[2]<0);var d=[],h=[],f=0,m=1/0,v=[],y=s.length;a&&(s=MEt(s));for(var w=IEt(s,l,c,u)*6,_=y-2,T=0;T<_;T+=2){var A=(w+T)%_+2;d[T+2]=s[A]-c[0],d[T+3]=s[A+1]-c[1]}d[0]=s[w]-c[0],d[1]=s[w+1]-c[1];for(var C=r/t,k=-r/2;k<=r/2;k+=C){for(var M=Math.sin(k),P=Math.cos(k),O=0,T=0;T<s.length;T+=2){var j=d[T],L=d[T+1],B=l[T]-u[0],$=l[T+1]-u[1],Y=B*P-$*M,G=B*M+$*P;v[T]=Y,v[T+1]=G;var W=Y-j,X=G-L;O+=W*W+X*X}if(O<m){m=O,f=k;for(var te=0;te<v.length;te++)h[te]=v[te]}}i.push({from:d,to:h,fromCp:c,toCp:u,rotation:-f})}return i}function IL(n){return n.__isCombineMorphing}var HCe="__mOriginal_";function ML(n,e,t){var r=HCe+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,o=t.after,s=t.before;n[e]=function(){var l=arguments,c;return s&&s.apply(this,l),a?c=a.apply(this,l):c=i.apply(this,l),o&&o.apply(this,l),c}}function zC(n,e){var t=HCe+e;n[t]&&(n[e]=n[t],n[t]=null)}function Wfe(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function GCe(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=DEt(EG(t),EG(r)),a=i[0],o=i[1],s=n.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}s&&Wfe(a,s),l&&Wfe(o,l),ML(e,"updateTransform",{replace:c}),e.transform=null;var u=PEt(a,o,10,Math.PI),d=[];ML(e,"buildPath",{replace:function(h){for(var f=e.__morphT,m=1-f,v=[],y=0;y<u.length;y++){var w=u[y],_=w.from,T=w.to,A=w.rotation*f,C=w.fromCp,k=w.toCp,M=Math.sin(A),P=Math.cos(A);XR(v,C,k,f);for(var O=0;O<_.length;O+=2){var j=_[O],L=_[O+1],B=T[O],$=T[O+1],Y=j*m+B*f,G=L*m+$*f;d[O]=Y*P-G*M+v[0],d[O+1]=Y*M+G*P+v[1]}var W=d[0],X=d[1];h.moveTo(W,X);for(var O=2;O<_.length;){var B=d[O++],$=d[O++],te=d[O++],re=d[O++],z=d[O++],ae=d[O++];W===B&&X===$&&te===z&&re===ae?h.lineTo(z,ae):h.bezierCurveTo(B,$,te,re,z,ae),W=z,X=ae}}}})}function OX(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;GCe(n,e),e.__morphT=0;function a(){zC(e,"buildPath"),zC(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},kt({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},t)),e}function OEt(n,e,t,r,i,a){var o=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,c=(1<<o)/2;c>0;c/=2){var u=0,d=0;(n&c)>0&&(u=1),(e&c)>0&&(d=1),s+=c*c*(3*u^d),d===0&&(u===1&&(n=c-1-n,e=c-1-e),l=n,n=e,e=l)}return s}function PL(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=$e(n,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),d=l.y+l.height/2+(c?c[5]:0);return e=Math.min(u,e),t=Math.min(d,t),r=Math.max(u,r),i=Math.max(d,i),[u,d]}),o=$e(a,function(s,l){return{cp:s,z:OEt(s[0],s[1],e,t,r,i),path:n[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function qCe(n){return kEt(n.path,n.count)}function kG(){return{fromIndividuals:[],toIndividuals:[],count:0}}function REt(n,e,t){var r=[];function i(C){for(var k=0;k<C.length;k++){var M=C[k];IL(M)?i(M.childrenRef()):M instanceof wn&&r.push(M)}}i(n);var a=r.length;if(!a)return kG();var o=t.dividePath||qCe,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),kG();r=PL(r),s=PL(s);for(var l=t.done,c=t.during,u=t.individualDelay,d=new pg,h=0;h<a;h++){var f=r[h],m=s[h];m.parent=e,m.copyTransform(d),u||GCe(f,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(C){for(var k=0;k<s.length;k++)s[k].addSelfToZr(C)}ML(e,"addSelfToZr",{after:function(C){v(C)}}),ML(e,"removeSelfFromZr",{after:function(C){for(var k=0;k<s.length;k++)s[k].removeSelfFromZr(C)}});function y(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,zC(e,"addSelfToZr"),zC(e,"removeSelfFromZr")}var w=s.length;if(u)for(var _=w,T=function(){_--,_===0&&(y(),l&&l())},h=0;h<w;h++){var A=u?kt({delay:(t.delay||0)+u(h,w,r[h],s[h]),done:T},t):t;OX(r[h],s[h],A)}else e.__morphT=0,e.animateTo({__morphT:1},kt({during:function(C){for(var k=0;k<w;k++){var M=s[k];M.__morphT=e.__morphT,M.dirtyShape()}c&&c(C)},done:function(){y();for(var C=0;C<n.length;C++)zC(n[C],"updateTransform");l&&l()}},t));return e.__zr&&v(e.__zr),{fromIndividuals:r,toIndividuals:s,count:w}}function NEt(n,e,t){var r=e.length,i=[],a=t.dividePath||qCe;function o(f){for(var m=0;m<f.length;m++){var v=f[m];IL(v)?o(v.childrenRef()):v instanceof wn&&i.push(v)}}if(IL(n)){o(n.childrenRef());var s=i.length;if(s<r)for(var l=0,c=s;c<r;c++)i.push(XY(i[l++%s]));i.length=r}else{i=a({path:n,count:r});for(var u=n.getComputedTransform(),c=0;c<i.length;c++)i[c].setLocalTransform(u);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),kG()}i=PL(i),e=PL(e);for(var d=t.individualDelay,c=0;c<r;c++){var h=d?kt({delay:(t.delay||0)+d(c,r,i[c],e[c])},t):t;OX(i[c],e[c],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function Yfe(n){return Fe(n[0])}function Kfe(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!t[i].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var a=l.length,c=Math.ceil(a/2);t[i].many=l.slice(c,a),t[s].many=l.slice(0,c),s++}return t}var LEt={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=XY(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function XV(n,e,t,r,i,a){if(!n.length||!e.length)return;var o=GT("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),c,u;Yfe(n)&&(c=n,u=e),Yfe(e)&&(c=e,u=n);function d(w,_,T,A,C){var k=w.many,M=w.one;if(k.length===1&&!C){var P=_?k[0]:M,O=_?M:k[0];if(IL(P))d({many:[P],one:O},!0,T,A,!0);else{var j=s?kt({delay:s(T,A)},l):l;OX(P,O,j),a(P,O,P,O,j)}}else for(var L=kt({dividePath:LEt[t],individualDelay:s&&function(X,te,re,z){return s(X+T,A)}},l),B=_?REt(k,M,L):NEt(M,k,L),$=B.fromIndividuals,Y=B.toIndividuals,G=$.length,W=0;W<G;W++){var j=s?kt({delay:s(W,G)},l):l;a($[W],Y[W],_?k[W]:w.one,_?w.one:k[W],j)}}for(var h=c?c===n:n.length>e.length,f=c?Kfe(u,c):Kfe(h?e:n,[h?n:e]),m=0,v=0;v<f.length;v++)m+=f[v].many.length;for(var y=0,v=0;v<f.length;v++)d(f[v],h,y,m),y+=f[v].many.length}function Vb(n){if(!n)return[];if(Fe(n)){for(var e=[],t=0;t<n.length;t++)e.push(Vb(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof wn&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var WCe=1e4,jEt=0,Xfe=1,Zfe=2,FEt=Gn();function $Et(n,e){for(var t=n.dimensions,r=0;r<t.length;r++){var i=n.getDimensionInfo(t[r]);if(i&&i.otherDims[e]===0)return t[r]}}function BEt(n,e,t){var r=n.getDimensionInfo(t),i=r&&r.ordinalMeta;if(r){var a=n.get(r.name,e);return i&&i.categories[a]||a+""}}function Qfe(n,e,t,r){var i=r?"itemChildGroupId":"itemGroupId",a=$Et(n,i);if(a){var o=BEt(n,e,a);return o}var s=n.getRawDataItem(e),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return t||n.getId(e)}function Jfe(n){var e=[];return Z(n,function(t){var r=t.data,i=t.dataGroupId;if(!(r.count()>WCe))for(var a=r.getIndices(),o=0;o<a.length;o++)e.push({data:r,groupId:Qfe(r,o,i,!1),childGroupId:Qfe(r,o,i,!0),divide:t.divide,dataIndex:o})}),e}function ZV(n,e,t){n.traverse(function(r){r instanceof wn&&Si(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function QV(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function xS(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function UEt(n,e,t){var r=GT("update",t,e);r&&n.traverse(function(i){if(i instanceof Yu){var a=Nct(i);a&&i.animateFrom({style:a},r)}})}function VEt(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function YCe(n,e,t){var r=Jfe(n),i=Jfe(e);function a(T,A,C,k,M){(C||T)&&A.animateFrom({style:C&&C!==T?Ie(Ie({},C.style),T.style):T.style},M)}var o=!1,s=jEt,l=pt(),c=pt();r.forEach(function(T){T.groupId&&l.set(T.groupId,!0),T.childGroupId&&c.set(T.childGroupId,!0)});for(var u=0;u<i.length;u++){var d=i[u].groupId;if(c.get(d)){s=Xfe;break}var h=i[u].childGroupId;if(h&&l.get(h)){s=Zfe;break}}function f(T,A){return function(C){var k=C.data,M=C.dataIndex;return A?k.getId(M):T?s===Xfe?C.childGroupId:C.groupId:s===Zfe?C.childGroupId:C.groupId}}var m=VEt(r,i),v={};if(!m)for(var u=0;u<i.length;u++){var y=i[u],w=y.data.getItemGraphicEl(y.dataIndex);w&&(v[w.id]=!0)}function _(T,A){var C=r[A],k=i[T],M=k.data.hostModel,P=C.data.getItemGraphicEl(C.dataIndex),O=k.data.getItemGraphicEl(k.dataIndex);if(P===O){O&&UEt(O,k.dataIndex,M);return}P&&v[P.id]||O&&(xS(O),P?(xS(P),QV(P),o=!0,XV(Vb(P),Vb(O),k.divide,M,T,a)):ZV(O,M,T))}new Vg(r,i,f(!0,m),f(!1,m),null,"multiple").update(_).updateManyToOne(function(T,A){var C=i[T],k=C.data,M=k.hostModel,P=k.getItemGraphicEl(C.dataIndex),O=gr($e(A,function(j){return r[j].data.getItemGraphicEl(r[j].dataIndex)}),function(j){return j&&j!==P&&!v[j.id]});P&&(xS(P),O.length?(Z(O,function(j){xS(j),QV(j)}),o=!0,XV(Vb(O),Vb(P),C.divide,M,T,a)):ZV(P,M,C.dataIndex))}).updateOneToMany(function(T,A){var C=r[A],k=C.data.getItemGraphicEl(C.dataIndex);if(!(k&&v[k.id])){var M=gr($e(T,function(O){return i[O].data.getItemGraphicEl(i[O].dataIndex)}),function(O){return O&&O!==k}),P=i[T[0]].data.hostModel;M.length&&(Z(M,function(O){return xS(O)}),k?(xS(k),QV(k),o=!0,XV(Vb(k),Vb(M),C.divide,P,T[0],a)):Z(M,function(O){return ZV(O,P,T[0])}))}}).updateManyToMany(function(T,A){new Vg(A,T,function(C){return r[C].data.getId(r[C].dataIndex)},function(C){return i[C].data.getId(i[C].dataIndex)}).update(function(C,k){_(T[C],A[k])}).execute()}).execute(),o&&Z(e,function(T){var A=T.data,C=A.hostModel,k=C&&t.getViewOfSeriesModel(C),M=GT("update",C,0);k&&C.isAnimationEnabled()&&M&&M.duration>0&&k.group.traverse(function(P){P instanceof wn&&!P.animators.length&&P.animateFrom({style:{opacity:0}},M)})})}function epe(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function tpe(n){return Fe(n)?n.sort().join(","):n}function jv(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function zEt(n,e){var t=pt(),r=pt(),i=pt();return Z(n.oldSeries,function(a,o){var s=n.oldDataGroupIds[o],l=n.oldData[o],c=epe(a),u=tpe(c);r.set(u,{dataGroupId:s,data:l}),Fe(c)&&Z(c,function(d){i.set(d,{key:u,dataGroupId:s,data:l})})}),Z(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=epe(a),c=tpe(l),u=r.get(c);if(u)t.set(c,{oldSeries:[{dataGroupId:u.dataGroupId,divide:jv(u.data),data:u.data}],newSeries:[{dataGroupId:o,divide:jv(s),data:s}]});else if(Fe(l)){var d=[];Z(l,function(m){var v=r.get(m);v.data&&d.push({dataGroupId:v.dataGroupId,divide:jv(v.data),data:v.data})}),d.length&&t.set(c,{oldSeries:d,newSeries:[{dataGroupId:o,data:s,divide:jv(s)}]})}else{var h=i.get(l);if(h){var f=t.get(h.key);f||(f={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:jv(h.data)}],newSeries:[]},t.set(h.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:jv(s)})}}}}),t}function npe(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function HEt(n,e,t,r){var i=[],a=[];Z(Or(n.from),function(o){var s=npe(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:jv(e.oldData[s]),groupIdDim:o.dimension})}),Z(Or(n.to),function(o){var s=npe(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:jv(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&YCe(i,a,r)}function GEt(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){Z(Or(r.seriesTransition),function(i){Z(Or(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][sN]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=FEt(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)Z(Or(a),function(f){HEt(f,i,r,t)});else{var o=zEt(i,r);Z(o.keys(),function(f){var m=o.get(f);YCe(m.oldSeries,m.newSeries,t)})}Z(r.updatedSeries,function(f){f[sN]&&(f[sN]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],c=i.oldDataGroupIds=[],u=i.oldData=[],d=0;d<s.length;d++){var h=s[d].getData();h.count()<WCe&&(l.push(s[d]),c.push(s[d].get("dataGroupId")),u.push(h))}})}yn([tgt]);yn([Xpt]);yn([xgt,Lgt,qgt,Emt,Lmt,_vt,Xvt,Oyt,t0t,s0t,m0t,ubt,Nbt,qbt,lwt,hwt,_wt,Dwt,Bwt,qwt,nxt,$xt]);yn(i_t);yn(I_t);yn(qAe);yn(z_t);yn(Mke);yn(W_t);yn(nSt);yn(zSt);yn(l1t);yn(VM);yn(E1t);yn(C1t);yn(F1t);yn(G1t);yn(Z1t);yn(rTt);yn(fTt);yn(MTt);yn(RCe);yn(NCe);yn(ZTt);yn(BCe);yn(UCe);yn(nEt);yn(gEt);yn(yEt);yn(GEt);yn(mpt);const rpe=n=>{if(n===0)return"0m";const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},qEt=({data:n})=>{const e=K.useRef(null),t=K.useRef(null),{isLeftSidebarOpen:r}=pl();return K.useEffect(()=>{if(!e.current)return;console.log("📊 UsageLineChart received data:",{dataLength:(n==null?void 0:n.length)||0,data:n==null?void 0:n.slice(0,5),totalOnScreenTime:(n==null?void 0:n.reduce((m,v)=>m+v.onScreenTime,0))||0,isEmpty:!n||n.length===0,sampleData:n==null?void 0:n[0]}),t.current&&(t.current.dispose(),t.current=null),t.current=dEe(e.current);const i=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()==="#141414",a=getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()||(i?"#2a2a2a":"#e5e7eb");if(!n||n.length===0){console.warn("📊 UsageLineChart: No data available, showing empty chart");const m={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No usage data available",fontSize:16,fill:i?"#a1a1aa":"#666"}}};t.current.setOption(m);return}const o=m=>{const v=new Date(m),y=v.toLocaleDateString("en-US",{month:"long"}),w=v.getDate();return`${y} ${w}`},l=n.map(m=>m.date).map(o),c=n.map(m=>m.onScreenTime),u=n.map(m=>m.workingTime),d=n.map(m=>m.deepFocusTime),h={animation:!1,tooltip:{trigger:"axis",backgroundColor:i?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:i?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,extraCssText:"min-width: 200px; white-space: nowrap;",textStyle:{color:i?"#ffffff":"#1f2937"},formatter:function(m){if(!m||m.length===0)return"";let v=`<div style="font-weight: 600; margin-bottom: 4px;">${m[0].axisValue}</div>`;return m.forEach(y=>{const w=y.color,_=y.seriesName,T=rpe(y.value||0);v+=`<div style="display: flex; align-items: center; margin: 2px 0;">
              <span style="display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: ${w}; margin-right: 8px;"></span>
              <span style="color: ${i?"#a1a1aa":"#6b7280"};">${_}</span>
              <span style="margin-left: auto; font-weight: 600; color: ${i?"#ffffff":"#1f2937"};">${T}</span>
            </div>`}),v}},legend:{data:["On Screen Time","Working Time","Deep Focus Time"],bottom:"0",icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:i?"#a1a1aa":"#666",fontSize:12}},grid:{left:"0",right:"20",top:"10",bottom:"30",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l,axisLine:{lineStyle:{color:i?"#404040":"#eee"}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m,v){return v===l.length-1?"{right|"+m+"}":m},rich:{right:{align:"right"}}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:a,type:[3,3],width:1}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m){return rpe(m)}}},series:[{name:"On Screen Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(87, 181, 231, 1)"},itemStyle:{color:"rgba(87, 181, 231, 1)",borderColor:"rgba(87, 181, 231, 1)",borderWidth:0},data:c},{name:"Working Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(34, 197, 94, 1)"},itemStyle:{color:"rgba(34, 197, 94, 1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:0},data:u},{name:"Deep Focus Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(239, 68, 68, 1)"},itemStyle:{color:"rgba(239, 68, 68, 1)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:0},data:d}]};t.current.setOption(h);const f=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),t.current&&(t.current.dispose(),t.current=null)}},[n]),K.useEffect(()=>{(()=>{setTimeout(()=>{t.current&&t.current.resize()},100)})()},[r]),x.jsx("div",{ref:e,className:"w-full h-full"})},WEt=({data:n})=>{const e=K.useRef(null),t=K.useRef(null);console.log("🥧 UsagePieChart received data:",{hasData:!!n,dataLength:(n==null?void 0:n.length)||0,totalTime:(n==null?void 0:n.reduce((i,a)=>i+a.timeSpent,0))||0,sampleData:(n==null?void 0:n.slice(0,3))||[],timestamp:new Date().toISOString()});const r=i=>{const a=Math.floor(i/60),o=i%60;return a===0?`${o}m`:o===0?`${a}h`:`${a}h ${o}m`};return K.useEffect(()=>{if(!e.current)return;t.current=dEe(e.current);const i=document.documentElement,o=getComputedStyle(i).getPropertyValue("--bg-primary").trim()==="#141414"||i.classList.contains("dark")||i.getAttribute("data-theme")==="dark";if(!n||n.length===0){console.warn("🥧 UsagePieChart: No data available, showing empty chart");const v={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No site usage data available",fontSize:16,fill:o?"#a1a1aa":"#666"}},series:[]};t.current.setOption(v,!0);return}const s=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],l=n.slice(0,5),c=n.slice(5),u=c.reduce((v,y)=>v+y.timeSpent,0),d=c.reduce((v,y)=>v+y.sessions,0),h=[...l.map((v,y)=>{const w=Exe(v.url||v.name),_=s[y],T=Txe(w,_);return{value:v.timeSpent,name:v.name,timeSpent:v.timeSpent,sessions:v.sessions,itemStyle:{color:T}}})];n.length>5&&u>0&&h.push({value:u,name:"Others",timeSpent:u,sessions:d,itemStyle:{color:"#9CA3AF"}}),console.log("🥧 UsagePieChart: Rendering chart with data:",{chartDataLength:h.length,totalValue:h.reduce((v,y)=>v+y.value,0),hasOthers:h.some(v=>v.name==="Others")});const f={animation:!1,graphic:[],tooltip:{trigger:"item",backgroundColor:o?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:o?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,padding:[12,16],textStyle:{color:o?"#ffffff":"#1f2937",fontSize:13},formatter:function(v){const y=v.data,w=v.percent,_=o?"#a1a1aa":"#6b7280";return`
            <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; color: ${o?"#ffffff":"#111827"};">
              ${y.name}
            </div>
            <div style="line-height: 1.5;">
              <div style="margin-bottom: 4px;">
                <span style="color: ${_};">Total time visited:</span>
                <span style="float: right; font-weight: 500;">${r(y.timeSpent)}</span>
              </div>
              <div style="margin-bottom: 4px;">
                <span style="color: ${_};">Total sessions:</span>
                <span style="float: right; font-weight: 500;">${y.sessions}</span>
              </div>
              <div>
                <span style="color: ${_};">Percentage:</span>
                <span style="float: right; font-weight: 500;">${w.toFixed(1)}%</span>
              </div>
            </div>
          `}},series:[{name:"Usage",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:o?"transparent":"#fff",borderWidth:o?0:2},label:{show:!0,position:"inside",formatter:"{d}%",fontSize:12,color:"#fff",fontWeight:"500",align:"center",verticalAlign:"middle",distance:"25%"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"600"}},labelLine:{show:!1},data:h}]};t.current.setOption(f,!0),console.log("🥧 UsagePieChart: Chart updated with",h.length,"data points");const m=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),t.current&&t.current.dispose()}},[n]),x.jsx("div",{ref:e,className:"w-full h-full"})},RX=({domain:n,size:e=32,className:t="",fallbackIcon:r="ri-global-line",onLoad:i,onError:a})=>{const o=r||cl.getDomainIcon(n),[s,l]=K.useState(null),[c,u]=K.useState(!0),[d,h]=K.useState(!1),[f,m]=K.useState(!1);return K.useEffect(()=>{let v=!0;return n&&(async()=>{try{u(!0),h(!1),m(!1);const _=`https://www.google.com/s2/favicons?domain=${cl.cleanDomain(n)}&sz=${e*2}`,T=await new Promise(A=>{const C=new Image,k=setTimeout(()=>{A(!1)},2e3);C.onload=()=>{clearTimeout(k),C.width>16||C.height>16?A(!0):A(!1)},C.onerror=()=>{clearTimeout(k),A(!1)},C.src=_});v&&(T?(l(_),u(!1),i==null||i()):(m(!0),u(!1),a==null||a()))}catch{v&&(h(!0),u(!1),m(!0),a==null||a())}})(),()=>{v=!1}},[n,e,i,a,o]),c||f||!s?x.jsx("div",{className:`flex items-center justify-center bg-gray-100 rounded ${t}`,style:{width:e,height:e},children:x.jsx(ht,{name:o,className:"text-gray-600",size:Math.floor(e*.6)})}):x.jsx("div",{className:`flex items-center justify-center overflow-hidden rounded ${t}`,style:{width:e,height:e},title:`${n} favicon`,children:x.jsx("img",{src:s,alt:`${n} favicon`,width:e,height:e,className:"favicon-image",style:{objectFit:"contain",maxWidth:e,maxHeight:e},onError:v=>{m(!0),h(!0)}})})};class YEt{constructor(){zt(this,"cacheKey","siteUsage30Days");zt(this,"cacheDurationMs",24*60*60*1e3)}getTodayKey(){return new Date().toISOString().split("T")[0]}isCacheValid(e){const t=this.getTodayKey(),r=e.dateKey===t,i=Date.now()-e.timestamp<this.cacheDurationMs;return r&&i}async getLast30DaysUsage(){var e;try{const t=localStorage.getItem(this.cacheKey);if(t){const d=JSON.parse(t);if(this.isCacheValid(d))return console.log("📋 Using cached 30-day usage data"),d.data}console.log("🔄 Fetching fresh 30-day usage data");const{user:r}=Qt.getState();if(!(r!=null&&r.uid))return console.warn("⚠️ No user ID available for fetching usage data"),[];const i=new Date().toISOString().split("T")[0],a=new Date;a.setDate(a.getDate()-30);const o=a.toISOString().split("T")[0];let s;try{s=await Mc.getUserData(r.uid,o,i)}catch(d){if((e=d==null?void 0:d.message)!=null&&e.includes("index"))return console.warn("⚠️ Firebase index required for site usage query. Using fallback empty data."),[];throw d}const l=new Map;s.forEach(d=>{Object.entries(d.sites).forEach(([h,f])=>{const m=l.get(h),v=this.formatDomainName(h);m?(m.timeSpent+=f.timeSpent,m.visits+=f.visits):l.set(h,{timeSpent:f.timeSpent,visits:f.visits,name:v,icon:void 0})})});const c=Array.from(l.entries()).map(([d,h],f)=>({id:`cached_${d}_${f}`,name:h.name,url:d,timeSpent:Math.floor(h.timeSpent/(1e3*60)),sessions:h.visits,percentage:0,backgroundColor:this.getColorForSite(d),icon:cl.getDomainIcon(d)})).sort((d,h)=>h.timeSpent-d.timeSpent),u={data:c,timestamp:Date.now(),dateKey:this.getTodayKey()};return localStorage.setItem(this.cacheKey,JSON.stringify(u)),c}catch(t){return console.error("❌ Error fetching 30-day usage data:",t),[]}}formatDomainName(e){return e.replace(/^www\./,"").replace(/\b\w/g,t=>t.toUpperCase())}formatTimeSpent(e){const t=Math.floor(e/6e4),r=Math.floor(t/60),i=t%60;return r>0?`${r}h ${i}m`:`${i}m`}getColorForSite(e){let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);return`hsl(${Math.abs(t)%360}, 70%, 50%)`}parseTimeToMinutes(e){const t=e.match(/(\d+)h/),r=e.match(/(\d+)m/),i=t?parseInt(t[1]):0,a=r?parseInt(r[1]):0;return i*60+a}clearCache(){localStorage.removeItem(this.cacheKey),console.log("🗑️ Site usage cache cleared")}}const ipe=new YEt,KEt=()=>{const[n,e]=K.useState([]),[t,r]=K.useState(!1),[i,a]=K.useState(null),o=K.useCallback(async()=>{r(!0),a(null);try{const l=await ipe.getLast30DaysUsage();e(l)}catch(l){a(l instanceof Error?l.message:"Failed to load usage data"),console.error("❌ Error loading cached site usage:",l),e([])}finally{r(!1)}},[]);return{siteUsage:n,isLoading:t,error:i,loadUsageData:o,clearCache:()=>{ipe.clearCache(),e([])}}},XEt=({isOpen:n,onClose:e,onAddSites:t})=>{const{siteUsage:r,isLoading:i,loadUsageData:a}=KEt(),[o,s]=K.useState("visited"),[l,c]=K.useState(new Set),[u,d]=K.useState(!1),[h,f]=K.useState(""),[m,v]=K.useState(""),[y,w]=K.useState(!1);K.useEffect(()=>{n&&o==="visited"&&r.length===0&&!i&&a()},[n,o,r.length,i,a]);const _=r.map(j=>({name:j.name,url:j.url,icon:j.icon,backgroundColor:j.backgroundColor})),T=_.filter(j=>j.name.toLowerCase().includes(m.toLowerCase())||j.url.toLowerCase().includes(m.toLowerCase()));if(K.useEffect(()=>(n?(w(!0),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",setTimeout(()=>{c(new Set),d(!1),f(""),v(""),s("visited"),w(!1)},300)),()=>{document.body.style.overflow="unset"}),[n]),!n&&!y)return null;const A=j=>{const L=new Set(l);L.has(j)?L.delete(j):L.add(j),c(L),d(L.size===T.length)},C=j=>{c(j?new Set(T.map(L=>L.url)):new Set),d(j)},k=()=>{if(o==="visited"){const j=_.filter(L=>l.has(L.url)).map(L=>({name:L.name,url:L.url,icon:L.icon,backgroundColor:L.backgroundColor,isActive:!0}));t(j)}else if(o==="manual"&&h){const j=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=j.split(".")[0];t([{name:L.charAt(0).toUpperCase()+L.slice(1),url:j,icon:"ri-global-line",backgroundColor:"#6B7280",isActive:!0}])}e()},M=o==="visited"?l.size:h?1:0,O=(()=>{if(!h)return null;const j=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=j.split(".")[0];return{name:L.charAt(0).toUpperCase()+L.slice(1),domain:j}})();return x.jsx("div",{className:`fixed inset-0 bg-black flex items-center justify-center z-50 transition-all duration-300 ${n?"bg-opacity-50":"bg-opacity-0"}`,onClick:j=>{j.target===j.currentTarget&&e()},children:x.jsxs("div",{className:`bg-background-primary rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl transition-all duration-300 ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{maxHeight:"85vh"},children:[x.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Add Site to Block"}),x.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary transition-colors",children:x.jsx(ht,{name:"close-line",className:"w-6 h-6"})})]}),x.jsxs("div",{className:"flex gap-6 mb-6 flex-shrink-0",children:[x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",children:[x.jsx("input",{type:"radio",name:"addSiteMethod",value:"visited",checked:o==="visited",onChange:()=>s("visited"),className:"hidden"}),x.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${o==="visited"?"border-[#BB5F5A] bg-transparent":"border-border"}`,children:x.jsx("div",{className:`w-2.5 h-2.5 rounded-full bg-[#BB5F5A] transition-opacity duration-200 ${o==="visited"?"opacity-100":"opacity-0"}`})}),x.jsx("span",{className:"text-base text-text-primary",children:"Select visited sites"})]}),x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",children:[x.jsx("input",{type:"radio",name:"addSiteMethod",value:"manual",checked:o==="manual",onChange:()=>s("manual"),className:"hidden"}),x.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${o==="manual"?"border-[#BB5F5A] bg-transparent":"border-border"}`,children:x.jsx("div",{className:`w-2.5 h-2.5 rounded-full bg-[#BB5F5A] transition-opacity duration-200 ${o==="manual"?"opacity-100":"opacity-0"}`})}),x.jsx("span",{className:"text-base text-text-primary",children:"Input site URL"})]})]}),x.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[o==="visited"&&x.jsxs("div",{className:"flex flex-col min-h-0",children:[x.jsxs("div",{className:"relative mb-4 flex-shrink-0",children:[x.jsx("input",{type:"text",value:m,onChange:j=>v(j.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#BB5F5A] focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"Search sites..."}),x.jsx("div",{className:"absolute left-3 top-2.5 flex items-center h-5 text-text-secondary pointer-events-none",children:x.jsx("i",{className:"ri-search-line text-base"})})]}),x.jsx("div",{className:"flex-1 min-h-0",children:x.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar",children:i?x.jsxs("div",{className:"flex items-center justify-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#BB5F5A]"}),x.jsx("span",{className:"ml-3 text-text-secondary",children:"Loading sites..."})]}):T.length===0?x.jsxs("div",{className:"text-center py-8 text-text-secondary",children:[x.jsx("i",{className:"ri-global-line text-5xl mx-auto mb-3 opacity-50 block"}),x.jsx("p",{children:"No sites found"})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>C(!u),children:[x.jsx(ZD,{checked:u,onChange:C}),x.jsx("span",{className:"text-base font-medium text-text-primary",children:"Select all sites"}),l.size>0&&x.jsxs("span",{className:"text-sm text-[#BB5F5A] font-medium ml-auto",children:[l.size," selected"]})]}),T.map(j=>x.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>A(j.url),children:[x.jsx(ZD,{checked:l.has(j.url),onChange:()=>A(j.url)}),x.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 pointer-events-none",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(RX,{domain:j.url,size:32,fallbackIcon:j.icon})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-text-primary truncate",children:j.name}),x.jsx("div",{className:"text-sm text-text-secondary truncate",children:j.url})]})]})]},j.url))]})})})]}),o==="manual"&&x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"relative mb-4",children:x.jsx("input",{type:"text",value:h,onChange:j=>f(j.target.value),className:"w-full px-4 py-3 text-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#BB5F5A] focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"https://www.facebook.com/"})}),O&&x.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-background-container rounded-lg",children:[x.jsx("div",{className:"w-10 h-10 bg-[#1877F2] rounded-lg flex items-center justify-center",children:x.jsx(ht,{name:"global-line",className:"text-xl text-white"})}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-text-primary",children:O.name}),x.jsx("div",{className:"text-sm text-text-secondary",children:O.domain})]})]})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6 flex-shrink-0",children:[x.jsx("button",{onClick:e,className:"px-6 py-2 border border-border rounded-lg text-text-secondary hover:bg-background-container hover:text-text-primary font-medium transition-colors",children:"Cancel"}),x.jsxs("button",{onClick:k,disabled:M===0,className:`px-6 py-2 rounded-lg font-medium transition-colors ${M>0?"bg-[#BB5F5A] text-white hover:bg-[#A54F4A]":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:["Add Site (",M,")"]})]})]})})},ZEt=({checked:n,onChange:e,disabled:t=!1})=>x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:n,onChange:r=>e(r.target.checked),disabled:t,className:"sr-only peer"}),x.jsx("div",{className:"w-10 h-5 bg-background-container peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-[20px] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-4 after:w-4 after:transition-all duration-300 peer-checked:bg-[#BB5F5A] peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]}),QEt=({site:n,onToggle:e,onRemove:t})=>{const[r,i]=K.useState(!1),a=n.icon,o=()=>{i(!0),setTimeout(()=>{t()},300)};return x.jsxs("div",{className:`flex items-center justify-between p-4 bg-background-container rounded-lg transition-all duration-300 ease-in-out border border-border
        ${r?"opacity-0 scale-95 h-0 py-0 my-0 overflow-hidden":"opacity-100 scale-100"}
        ${n.isActive?"":"opacity-60"}`,children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"mr-4 transition-all duration-200",children:x.jsx(RX,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:a})}),x.jsx("span",{className:"font-medium text-text-primary",children:n.name})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("button",{onClick:o,className:"p-1.5 text-text-secondary hover:text-red-500 transition-colors duration-200 hover:scale-110",title:"Remove site",children:x.jsx(ht,{name:"delete-bin-line",className:"w-5 h-5"})}),x.jsx(ZEt,{checked:n.isActive,onChange:e})]})]})},JEt=({site:n,formatTime:e,color:t,percentage:r})=>{const i=t||n.backgroundColor,a=r!==void 0?r:n.percentage;return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"mr-3",children:x.jsx(RX,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:n.icon})}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-text-primary",children:n.name}),x.jsxs("div",{className:"text-xs text-text-secondary",children:[n.sessions," sessions"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"font-medium text-text-primary",children:e(n.timeSpent)}),x.jsxs("div",{className:"text-xs text-text-secondary",children:[a.toFixed(1),"%"]})]})]}),x.jsx("div",{className:"w-full bg-background-container rounded-full h-1.5 overflow-hidden",children:x.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${a}%`,backgroundColor:i}})})]})},eAt=({isBackingUp:n,lastBackupTime:e,backupError:t,onRetryBackup:r})=>{var m;const[i,a]=K.useState(null),{getSyncStatus:o,retryBackup:s}=Nu(),l=n!==void 0?n:i==null?void 0:i.isBackingUp,c=e!==void 0?e:i==null?void 0:i.lastBackupTime,u=t!==void 0?t:i==null?void 0:i.backupError;K.useEffect(()=>{if(n===void 0&&e===void 0&&t===void 0){const v=()=>{a(o())};v();const y=setInterval(v,5e3);return()=>clearInterval(y)}},[o,n,e,t]);const d=()=>l?"⏳":u?"❌":c?"✅":"🔄",h=()=>l?"Syncing...":u?`Error: ${u}`:c?`Last sync: ${new Date(c).toLocaleTimeString()}`:"No sync yet",f=()=>{r?r():s()};return x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx("span",{className:"text-lg",children:d()}),x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:h()}),u&&x.jsx("button",{onClick:f,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"}),((m=i==null?void 0:i.circuitBreaker)==null?void 0:m.state)==="OPEN"&&x.jsxs("span",{className:"text-xs text-orange-500",children:["Cooling down... (",Math.ceil(i.circuitBreaker.timeUntilRetry/1e3),"s)"]})]})},tAt=()=>{const{blockedSites:n,isExtensionConnected:e,isDeepFocusActive:t,totalSessionsCount:r,deepFocusSessions:i,loadDeepFocusSessions:a,subscribeToSessions:o,unsubscribeFromSessions:s,toggleBlockedSite:l,removeBlockedSite:c,addBlockedSite:u,loadBlockedSites:d,blockSiteInExtension:h,unblockSiteInExtension:f,enableDeepFocus:m,disableDeepFocus:v,toggleDeepFocus:y,loadFocusStatus:w,activeSessionId:_,activeSessionDuration:T,initializeDailyBackup:A,isBackingUp:C,lastBackupTime:k,backupError:M,backupTodayData:P,loadHybridTimeRangeData:O,isSessionPaused:j,autoSessionManagement:L,setAutoSessionManagement:B,recordOverrideSession:$,overrideSessions:Y,loadOverrideSessions:G,comparisonData:W,isLoadingComparison:X,comparisonError:te,loadComparisonData:re}=Nu(),{user:z}=Qt(),{isLeftSidebarOpen:ae,toggleLeftSidebar:le}=pl(),[ee,ye]=K.useState(!1),[fe,Ce]=K.useState(!1),[at,Le]=K.useState(!1),we=()=>{const Be=new Date,Ke=new Date(Be.getFullYear(),Be.getMonth(),Be.getDate()),Tt=new Date(Ke);Tt.setHours(0,0,0,0);const nr=new Date(Ke);return nr.setHours(23,59,59,999),{startDate:Tt,endDate:nr,rangeType:"today"}},[be,ge]=K.useState(we()),[he,Ge]=K.useState(null),[je,rt]=K.useState(null),[bt,lt]=K.useState(!1),{timeMetrics:cn,dailyUsage:Ct,siteUsage:En,isLoading:jn,loadExtensionData:Re,loadAllTimeExtensionData:Jt}=Xat(),hn=Zg(),Mt=ss(),Te=K.useRef(null),Ne=K.useRef(null),tt=K.useRef(null),xt=async()=>{console.log("🔄 Resetting extension connection...");const{default:Be}=await vr(async()=>{const{default:Ke}=await Promise.resolve().then(()=>aet);return{default:Ke}},void 0);Be.resetCircuitBreaker(),await fn(),console.log("✅ Extension connection reset complete")},fn=async()=>{if(be.rangeType==="all time")Jt();else{const Be=be.startDate||new Date,Ke=be.endDate||new Date;Be&&Ke&&Re(Be,Ke)}};K.useEffect(()=>{fn()},[be]),K.useEffect(()=>{z!=null&&z.uid&&d(z.uid)},[z==null?void 0:z.uid]),K.useEffect(()=>{console.log("🔧 Deep Focus: Sidebar state changed",{isLeftSidebarOpen:ae,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const Be=document.getElementById("sidebar");Be&&(console.log("🔧 Deep Focus: Sidebar element found",{currentWidth:Be.style.width,className:Be.className,isOpen:ae}),Be.style.display="flex",ae?(Be.style.width="16rem",Be.classList.remove("w-0"),Be.classList.add("w-64")):(Be.style.width="0px",Be.classList.remove("w-64"),Be.classList.add("w-0")))})},[ae]),K.useEffect(()=>{A()},[A]),K.useEffect(()=>{const Be=async()=>{try{const Ke=[...n.map(Tt=>Tt.url),...En.map(Tt=>Tt.url)];await Promise.all([cl.preloadFavicons(Ke,32),cl.preloadFavicons(Ke,40)]),console.log("Favicons preloaded for",Ke.length,"domains")}catch(Ke){console.warn("Failed to preload some favicons:",Ke)}};(n.length>0||En.length>0)&&Be()},[n,En]),K.useEffect(()=>{const Be=Ke=>{if(Te.current&&!Te.current.contains(Ke.target)){if(Ce(!1),tt.current&&tt.current.isOpen)return;Le(!1)}};return document.addEventListener("mousedown",Be),()=>{document.removeEventListener("mousedown",Be)}},[]),K.useEffect(()=>{if(at&&Ne.current&&!tt.current){lt(!0);const Be=Ia(Ne.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[we().startDate,we().endDate].filter(Boolean),onChange:function(Ke){if(Ke.length===2)if(Math.ceil((Ke[1].getTime()-Ke[0].getTime())/864e5)>365){const nr=new Date(Ke[0]);nr.setDate(nr.getDate()+364),Be.setDate([Ke[0],nr])}else Ge(Ke[0]),rt(Ke[1]);else Ke.length===1&&(Ge(Ke[0]),rt(null))},onClose:function(){if(bt){lt(!1);return}}});tt.current=Be,Be.open()}return()=>{!at&&tt.current&&(tt.current.destroy(),tt.current=null)}},[at,bt]);const Ti=async Be=>{const Ke=n.find(Tt=>Tt.id===Be);if(Ke){await l(Be);try{Ke.isActive?await f(Ke.url):await h(Ke.url)}catch(Tt){console.error("Failed to sync with extension:",Tt)}}},Nn=async Be=>{const Ke=n.find(Tt=>Tt.id===Be);if(Ke){await c(Be);try{await f(Ke.url)}catch(Tt){console.error("Failed to unblock site in extension:",Tt)}}},Nr=async Be=>{for(const Ke of Be){await u(Ke);try{await h(Ke.url)}catch(Tt){console.error("Failed to block site in extension:",Tt)}}},oi=Be=>Be.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),on=Be=>{const Ke=new Date,Tt=new Date(Ke.getFullYear(),Ke.getMonth(),Ke.getDate()),nr=new Date(Tt);nr.setHours(23,59,59,999);const oe=new Date(Tt);oe.setHours(0,0,0,0);let ce="today";switch(Be){case"Today":ce="today",ge({startDate:oe,endDate:nr,rangeType:ce});break;case"Yesterday":{const pe=new Date(Tt);pe.setDate(Tt.getDate()-1);const Ae=new Date(pe);Ae.setHours(0,0,0,0);const Qe=new Date(pe);Qe.setHours(23,59,59,999),ce="yesterday",ge({startDate:Ae,endDate:Qe,rangeType:ce});break}case"Last 7 Days":{const pe=new Date(Tt);pe.setDate(Tt.getDate()-6),pe.setHours(0,0,0,0),ce="last 7 days",ge({startDate:pe,endDate:nr,rangeType:ce});break}case"Last 30 Days":{const pe=new Date(Tt);pe.setDate(Tt.getDate()-29),pe.setHours(0,0,0,0),ce="last 30 days",ge({startDate:pe,endDate:nr,rangeType:ce});break}case"Custom Range":Le(!0),Ce(!1);return;default:ce="all time",ge({startDate:null,endDate:null,rangeType:ce})}Ce(!1)},zr=()=>{if(he&&je){const Be=new Date;if(Be.setHours(23,59,59,999),he>Be||je>Be){console.warn("Cannot select future dates for productivity analysis");return}const Ke=new Date(he);Ke.setHours(0,0,0,0);const Tt=new Date(je);if(Tt.setHours(23,59,59,999),ge({startDate:Ke,endDate:Tt,rangeType:"custom"}),Le(!1),tt.current){try{tt.current.destroy()}catch(nr){console.warn("Error destroying date picker:",nr)}tt.current=null}}},Ei=()=>{switch(be.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return be.startDate&&be.endDate?`${oi(be.startDate)} - ${oi(be.endDate)}`:"Custom Range";default:return"All time"}},mi=Be=>{const Ke=Math.floor(Be/60),Tt=Be%60;return Ke===0?`${Tt}m`:Tt===0?`${Ke}h`:`${Ke}h ${Tt}m`},Xe=Be=>{if(!W||be.rangeType==="all time")return{label:"All time data",color:"text-gray-500",icon:"—"};const Ke=W.current[Be],Tt=W.previous[Be];let nr="previous period";switch(be.rangeType){case"today":nr="yesterday";break;case"last 7 days":nr="previous week";break;case"last 30 days":nr="previous month";break;default:nr="previous period"}return get(Ke,Tt,nr)};return x.jsxs("div",{className:"deep-focus-page-container flex h-screen bg-background-primary dark:bg-[#141414]",children:[x.jsx(Vw,{}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsxs("div",{className:"h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!ae&&x.jsx("button",{onClick:le,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"menu-line",size:20})})}),x.jsx("div",{className:`text-lg font-semibold transition-all duration-500 ${t?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"}`,children:"Deep Focus"}),x.jsx("div",{className:"ml-4 flex items-center gap-4",children:x.jsx("div",{className:"flex flex-col",children:x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer group",children:[x.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:async Be=>{console.log("Deep Focus switch toggled:",Be.target.checked,"User:",z);try{Be.target.checked?(console.log("🟢 Enabling Deep Focus..."),await m("web"),console.log("✅ Deep Focus enabled successfully")):(console.log("🔴 Disabling Deep Focus..."),await v(),console.log("✅ Deep Focus disabled successfully"))}catch(Ke){console.error("❌ Failed to toggle Deep Focus:",Ke),setTimeout(()=>{const Tt=Be.target;Tt&&(Tt.checked=!Be.target.checked)},100),alert(`Failed to ${Be.target.checked?"enable":"disable"} Deep Focus: ${Ke instanceof Error?Ke.message:"Unknown error"}`)}}}),x.jsx("div",{className:`w-[120px] h-[33px] flex items-center rounded-full transition-all duration-500 relative ${t?"bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start pl-[10.5px]":"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,children:x.jsx("span",{className:`text-sm font-medium transition-colors duration-500 relative z-10 whitespace-nowrap ${t?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,children:t?"Deep Focus":"Focus Off"})}),x.jsx("div",{className:`absolute w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-500 ${t?"left-[calc(100%-27px)] shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`})]})})})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"relative",ref:Te,children:[x.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{if(Ce(!fe),at&&(Le(!1),tt.current)){try{tt.current.destroy()}catch(Be){console.warn("Error destroying date picker:",Be)}tt.current=null}},children:[x.jsx("span",{children:Ei()}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(ht,{name:"arrow-down-s-line",className:"w-4 h-4"})})]}),fe&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>on("Today"),children:"Today"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>on("Yesterday"),children:"Yesterday"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>on("Last 7 Days"),children:"Last 7 days"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>on("Last 30 Days"),children:"Last 30 days"}),x.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>on("Custom Range"),children:[x.jsx("span",{children:"Time range"}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",className:"w-4 h-4"})})]}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>on("All time"),children:"All time"})]}),at&&x.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),x.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{if(Le(!1),tt.current){try{tt.current.destroy()}catch(Be){console.warn("Error destroying date picker:",Be)}tt.current=null}},children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(ht,{name:"close-line",className:"w-4 h-4"})})})]}),x.jsx("div",{children:x.jsx("input",{ref:Ne,type:"text",id:"date-range-input",name:"date-range",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),x.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[he&&!je?"Select end date":he?"":"Select start date",(!he||!je)&&x.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),x.jsx("div",{className:"mt-4 flex justify-end",children:x.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:zr,disabled:!he||!je,children:"Apply"})})]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Mt.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Mt.pathname==="/pomodoro"?void 0:()=>hn("/pomodoro"),"aria-label":Mt.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Mt.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Mt.pathname==="/projects"?void 0:()=>hn("/projects"),"aria-label":Mt.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Mt.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Mt.pathname==="/dashboard"?void 0:()=>hn("/dashboard"),"aria-label":Mt.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Mt.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Mt.pathname==="/calendar"?void 0:()=>hn("/calendar"),"aria-label":Mt.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${Mt.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:Mt.pathname==="/deep-focus"?void 0:()=>hn("/deep-focus"),"aria-label":Mt.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(ht,{name:"brain-line",size:20})})})})]})]}),x.jsxs("main",{className:"flex-1 p-6 flex gap-6 overflow-y-auto relative",children:[jn&&x.jsx("div",{className:"absolute inset-0 bg-background-primary/50 flex items-center justify-center z-10",children:x.jsx("div",{className:"bg-background-secondary rounded-lg p-6 shadow-lg border border-border",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),x.jsx("span",{className:"text-text-primary font-medium",children:be.rangeType==="today"?"Refreshing today's data...":`Loading ${Ei().toLowerCase()} data...`})]})})}),x.jsxs("div",{className:"w-2/3 space-y-6",children:[x.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"On Screen Time",value:cn.onScreenTime,metricKey:"onScreenTime",icon:"computer-line",iconColor:"text-blue-500",iconBg:"bg-blue-50",valueColor:"text-blue-500",hoverBorder:"hover:border-blue-100"},{label:"Working Time",value:cn.workingTime,metricKey:"workingTime",icon:"timer-line",iconColor:"text-green-500",iconBg:"bg-green-50",valueColor:"text-green-500",hoverBorder:"hover:border-green-100"},{label:"Deep Focus Time",value:cn.deepFocusTime,metricKey:"deepFocusTime",icon:"focus-3-line",iconColor:"text-red-500",iconBg:"bg-red-50",valueColor:"text-red-500",hoverBorder:"hover:border-red-100",isDeepFocusTime:!0},{label:"Override Time",value:cn.overrideTime,metricKey:"overrideTime",icon:"time-line",iconColor:"text-orange-500",iconBg:"bg-orange-50",valueColor:"text-orange-500",hoverBorder:"hover:border-orange-100"}].map((Be,Ke)=>{const Tt=Xe(Be.metricKey),nr=oe=>{switch(oe){case"On Screen Time":return"Total time spent on all websites";case"Working Time":return"Total time in active Pomodoro sessions";case"Deep Focus Time":return"Total time with Deep Focus mode enabled";case"Override Time":return"Total time spent overriding blocked websites";default:return oe}};return x.jsxs("div",{className:`bg-background-secondary p-6 rounded-lg border border-border ${Be.hoverBorder} transition-all duration-300 group`,children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsx("div",{className:`w-10 h-10 ${Be.iconBg} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:x.jsx(ht,{name:Be.icon,className:`text-xl ${Be.iconColor}`,size:20})}),x.jsx(ni,{text:nr(Be.label),placement:"bottom",children:x.jsx("button",{className:"text-text-secondary hover:text-text-primary opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(ht,{name:"information-line",className:"w-4 h-4"})})})})]}),x.jsx("h3",{className:"text-sm text-text-secondary mb-1",children:Be.label}),x.jsx("div",{className:`text-2xl font-semibold ${Be.valueColor}`,children:mi(Be.value)}),x.jsxs("div",{className:`flex items-center mt-3 text-xs font-medium ${Tt.color}`,children:[x.jsx("span",{children:Tt.label}),X&&x.jsx("div",{className:"ml-2 animate-spin rounded-full h-3 w-3 border-b border-gray-400"})]})]},Ke)})}),x.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"text-sm font-medium text-text-primary",children:["Usage Time: ",x.jsx("span",{className:"text-text-secondary",children:mi(0)})]}),x.jsx("div",{className:"flex space-x-2",children:x.jsx("button",{className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",children:x.jsx(ht,{name:"more-2-fill",className:"w-5 h-5"})})})]}),x.jsx("div",{className:`w-full transition-all duration-500 ${ae?"h-72":"h-80"}`,children:x.jsx(qEt,{data:Ct})})]}),x.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:"text-lg font-medium text-text-primary",children:"BLOCKED"}),x.jsxs("div",{className:"flex items-center gap-2",style:{display:"none"},children:[x.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${e?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[x.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-green-500":"bg-yellow-500"}`}),e?"Extension Connected":"Extension Offline",!e&&x.jsx("button",{onClick:xt,className:"ml-2 px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reset"})]}),x.jsx("button",{onClick:()=>{fn()},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Refresh extension data",children:x.jsx(ht,{name:"refresh-line",className:"w-4 h-4"})}),x.jsx("div",{className:"border-l border-border pl-2",children:x.jsx(eAt,{isBackingUp:C,lastBackupTime:k,backupError:M,onRetryBackup:P})}),(z==null?void 0:z.uid)&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:async()=>{try{if(console.log("🧪 Quick override test..."),z!=null&&z.uid){const Be=await hSe(z.uid);Be.success&&(console.log("✅ Quick test completed:",Be),await G(z.uid,be.startDate||void 0,be.endDate||void 0))}}catch(Be){console.error("❌ Quick test failed:",Be)}},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Quick Override Test (simple test)",style:{display:"none"},children:x.jsx(ht,{name:"play-line",className:"w-4 h-4"})}),x.jsx("button",{onClick:async()=>{try{if(console.log("🔧 Fixing blocked sites icons..."),z!=null&&z.uid){const{fixBlockedSitesIcons:Be}=await vr(async()=>{const{fixBlockedSitesIcons:Tt}=await import("./fixBlockedSitesIcons-C3Us-Pim.js");return{fixBlockedSitesIcons:Tt}},[]),Ke=await Be(z.uid);console.log("✅ Icon fix completed:",Ke,"sites fixed"),await d(z.uid),alert(`Fixed ${Ke} blocked sites with proper icons!`)}}catch(Be){console.error("❌ Failed to fix icons:",Be),alert("Failed to fix icons. Check console for details.")}},className:"p-1 text-orange-500 hover:text-orange-600 transition-colors duration-200",title:"Fix Missing Icons (one-time migration)",style:{display:"none"},children:x.jsx(ht,{name:"tools-line",className:"w-4 h-4"})})]})]})]}),x.jsx("button",{onClick:()=>ye(!0),className:"p-2 bg-[#BB5F5A] text-white rounded-full hover:bg-opacity-90 transition-all duration-200 hover:scale-105",children:x.jsx(ht,{name:"add-line",className:"w-5 h-5"})})]}),x.jsx("div",{className:"space-y-4",children:n.map(Be=>x.jsx(QEt,{site:Be,onToggle:()=>Ti(Be.id),onRemove:()=>Nn(Be.id)},Be.id))})]})]}),x.jsx("div",{className:"w-1/3 space-y-6",children:x.jsxs("div",{className:"bg-background-secondary rounded-lg",children:[x.jsx("h2",{className:"text-lg font-medium mb-6 text-text-primary p-6 pb-0",children:"Your Usage"}),x.jsx("div",{className:"w-full h-48 mb-4",children:x.jsx(WEt,{data:En})}),x.jsx("div",{className:"space-y-4 px-6 pb-6",children:En.map((Be,Ke)=>{const Tt=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],nr=Exe(Be.url||Be.name),oe=Ke<5?Tt[Ke]:"#9CA3AF",ce=Txe(nr,oe),pe=En.reduce((Qe,gt)=>Qe+gt.timeSpent,0),Ae=pe>0?Be.timeSpent/pe*100:0;return x.jsx(JEt,{site:Be,formatTime:mi,color:ce,percentage:Ae},Be.id)})})]})})]})]}),x.jsx(XEt,{isOpen:ee,onClose:()=>ye(!1),onAddSites:Nr})]})},nAt=({title:n="Loading",subtitle:e="Please wait...",variant:t="full"})=>t==="inline"?x.jsxs("div",{className:"flex items-center justify-center space-x-3 p-4",children:[x.jsx("div",{className:"w-32 h-1 bg-gray-200 rounded-full overflow-hidden",children:x.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-pulse"})}),x.jsx("span",{className:"text-sm text-gray-600",children:n})]}):t==="minimal"?x.jsx("div",{className:"flex items-center justify-center p-8",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden mx-auto mb-4",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full animate-pulse"})}),x.jsx("p",{className:"text-sm font-medium text-gray-700",children:n}),e&&x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e})]})}):x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:x.jsxs("div",{className:"text-center max-w-md w-full",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:n}),x.jsx("p",{className:"text-gray-500 mb-8",children:e}),x.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-4",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full",style:{animation:"loading-progress 2s ease-in-out infinite"}})})]})});function rAt(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const iAt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aAt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oAt={};function ape(n,e){return(oAt.jsx?aAt:iAt).test(n)}const sAt=/[ \t\n\f\r]/g;function lAt(n){return typeof n=="object"?n.type==="text"?ope(n.value):!1:ope(n)}function ope(n){return n.replace(sAt,"")===""}class zM{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}zM.prototype.normal={};zM.prototype.property={};zM.prototype.space=void 0;function KCe(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new zM(t,r,e)}function CG(n){return n.toLowerCase()}class Ql{constructor(e,t){this.attribute=t,this.property=e}}Ql.prototype.attribute="";Ql.prototype.booleanish=!1;Ql.prototype.boolean=!1;Ql.prototype.commaOrSpaceSeparated=!1;Ql.prototype.commaSeparated=!1;Ql.prototype.defined=!1;Ql.prototype.mustUseProperty=!1;Ql.prototype.number=!1;Ql.prototype.overloadedBoolean=!1;Ql.prototype.property="";Ql.prototype.spaceSeparated=!1;Ql.prototype.space=void 0;let cAt=0;const Wn=gx(),Ha=gx(),DG=gx(),st=gx(),Pi=gx(),E1=gx(),kc=gx();function gx(){return 2**++cAt}const IG=Object.freeze(Object.defineProperty({__proto__:null,boolean:Wn,booleanish:Ha,commaOrSpaceSeparated:kc,commaSeparated:E1,number:st,overloadedBoolean:DG,spaceSeparated:Pi},Symbol.toStringTag,{value:"Module"})),JV=Object.keys(IG);class NX extends Ql{constructor(e,t,r,i){let a=-1;if(super(e,t),spe(this,"space",i),typeof r=="number")for(;++a<JV.length;){const o=JV[a];spe(this,JV[a],(r&IG[o])===IG[o])}}}NX.prototype.defined=!0;function spe(n,e,t){t&&(n[e]=t)}function nE(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const a=new NX(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,t[CG(r)]=r,t[CG(a.attribute)]=r}return new zM(e,t,n.space)}const XCe=nE({properties:{ariaActiveDescendant:null,ariaAtomic:Ha,ariaAutoComplete:null,ariaBusy:Ha,ariaChecked:Ha,ariaColCount:st,ariaColIndex:st,ariaColSpan:st,ariaControls:Pi,ariaCurrent:null,ariaDescribedBy:Pi,ariaDetails:null,ariaDisabled:Ha,ariaDropEffect:Pi,ariaErrorMessage:null,ariaExpanded:Ha,ariaFlowTo:Pi,ariaGrabbed:Ha,ariaHasPopup:null,ariaHidden:Ha,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Pi,ariaLevel:st,ariaLive:null,ariaModal:Ha,ariaMultiLine:Ha,ariaMultiSelectable:Ha,ariaOrientation:null,ariaOwns:Pi,ariaPlaceholder:null,ariaPosInSet:st,ariaPressed:Ha,ariaReadOnly:Ha,ariaRelevant:null,ariaRequired:Ha,ariaRoleDescription:Pi,ariaRowCount:st,ariaRowIndex:st,ariaRowSpan:st,ariaSelected:Ha,ariaSetSize:st,ariaSort:null,ariaValueMax:st,ariaValueMin:st,ariaValueNow:st,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function ZCe(n,e){return e in n?n[e]:e}function QCe(n,e){return ZCe(n,e.toLowerCase())}const uAt=nE({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:E1,acceptCharset:Pi,accessKey:Pi,action:null,allow:null,allowFullScreen:Wn,allowPaymentRequest:Wn,allowUserMedia:Wn,alt:null,as:null,async:Wn,autoCapitalize:null,autoComplete:Pi,autoFocus:Wn,autoPlay:Wn,blocking:Pi,capture:null,charSet:null,checked:Wn,cite:null,className:Pi,cols:st,colSpan:null,content:null,contentEditable:Ha,controls:Wn,controlsList:Pi,coords:st|E1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Wn,defer:Wn,dir:null,dirName:null,disabled:Wn,download:DG,draggable:Ha,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Wn,formTarget:null,headers:Pi,height:st,hidden:DG,high:st,href:null,hrefLang:null,htmlFor:Pi,httpEquiv:Pi,id:null,imageSizes:null,imageSrcSet:null,inert:Wn,inputMode:null,integrity:null,is:null,isMap:Wn,itemId:null,itemProp:Pi,itemRef:Pi,itemScope:Wn,itemType:Pi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Wn,low:st,manifest:null,max:null,maxLength:st,media:null,method:null,min:null,minLength:st,multiple:Wn,muted:Wn,name:null,nonce:null,noModule:Wn,noValidate:Wn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Wn,optimum:st,pattern:null,ping:Pi,placeholder:null,playsInline:Wn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Wn,referrerPolicy:null,rel:Pi,required:Wn,reversed:Wn,rows:st,rowSpan:st,sandbox:Pi,scope:null,scoped:Wn,seamless:Wn,selected:Wn,shadowRootClonable:Wn,shadowRootDelegatesFocus:Wn,shadowRootMode:null,shape:null,size:st,sizes:null,slot:null,span:st,spellCheck:Ha,src:null,srcDoc:null,srcLang:null,srcSet:null,start:st,step:null,style:null,tabIndex:st,target:null,title:null,translate:null,type:null,typeMustMatch:Wn,useMap:null,value:Ha,width:st,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Pi,axis:null,background:null,bgColor:null,border:st,borderColor:null,bottomMargin:st,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Wn,declare:Wn,event:null,face:null,frame:null,frameBorder:null,hSpace:st,leftMargin:st,link:null,longDesc:null,lowSrc:null,marginHeight:st,marginWidth:st,noResize:Wn,noHref:Wn,noShade:Wn,noWrap:Wn,object:null,profile:null,prompt:null,rev:null,rightMargin:st,rules:null,scheme:null,scrolling:Ha,standby:null,summary:null,text:null,topMargin:st,valueType:null,version:null,vAlign:null,vLink:null,vSpace:st,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Wn,disableRemotePlayback:Wn,prefix:null,property:null,results:st,security:null,unselectable:null},space:"html",transform:QCe}),dAt=nE({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:kc,accentHeight:st,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:st,amplitude:st,arabicForm:null,ascent:st,attributeName:null,attributeType:null,azimuth:st,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:st,by:null,calcMode:null,capHeight:st,className:Pi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:st,diffuseConstant:st,direction:null,display:null,dur:null,divisor:st,dominantBaseline:null,download:Wn,dx:null,dy:null,edgeMode:null,editable:null,elevation:st,enableBackground:null,end:null,event:null,exponent:st,externalResourcesRequired:null,fill:null,fillOpacity:st,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:E1,g2:E1,glyphName:E1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:st,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:st,horizOriginX:st,horizOriginY:st,id:null,ideographic:st,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:st,k:st,k1:st,k2:st,k3:st,k4:st,kernelMatrix:kc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:st,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:st,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:st,overlineThickness:st,paintOrder:null,panose1:null,path:null,pathLength:st,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Pi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:st,pointsAtY:st,pointsAtZ:st,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kc,rev:kc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kc,requiredFeatures:kc,requiredFonts:kc,requiredFormats:kc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:st,specularExponent:st,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:st,strikethroughThickness:st,string:null,stroke:null,strokeDashArray:kc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:st,strokeOpacity:st,strokeWidth:null,style:null,surfaceScale:st,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kc,tabIndex:st,tableValues:null,target:null,targetX:st,targetY:st,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:st,underlineThickness:st,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:st,values:null,vAlphabetic:st,vMathematical:st,vectorEffect:null,vHanging:st,vIdeographic:st,version:null,vertAdvY:st,vertOriginX:st,vertOriginY:st,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:st,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ZCe}),JCe=nE({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),eDe=nE({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:QCe}),tDe=nE({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),hAt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},fAt=/[A-Z]/g,lpe=/-[a-z]/g,pAt=/^data[-\w.:]+$/i;function gAt(n,e){const t=CG(e);let r=e,i=Ql;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&pAt.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(lpe,vAt);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!lpe.test(a)){let o=a.replace(fAt,mAt);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=NX}return new i(r,e)}function mAt(n){return"-"+n.toLowerCase()}function vAt(n){return n.charAt(1).toUpperCase()}const yAt=KCe([XCe,uAt,JCe,eDe,tDe],"html"),LX=KCe([XCe,dAt,JCe,eDe,tDe],"svg");function bAt(n){return n.join(" ").trim()}var _S={},ez,cpe;function wAt(){if(cpe)return ez;cpe=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,c="/",u="*",d="",h="comment",f="declaration";ez=function(v,y){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];y=y||{};var w=1,_=1;function T($){var Y=$.match(e);Y&&(w+=Y.length);var G=$.lastIndexOf(l);_=~G?$.length-G:_+$.length}function A(){var $={line:w,column:_};return function(Y){return Y.position=new C($),P(),Y}}function C($){this.start=$,this.end={line:w,column:_},this.source=y.source}C.prototype.content=v;function k($){var Y=new Error(y.source+":"+w+":"+_+": "+$);if(Y.reason=$,Y.filename=y.source,Y.line=w,Y.column=_,Y.source=v,!y.silent)throw Y}function M($){var Y=$.exec(v);if(Y){var G=Y[0];return T(G),v=v.slice(G.length),Y}}function P(){M(t)}function O($){var Y;for($=$||[];Y=j();)Y!==!1&&$.push(Y);return $}function j(){var $=A();if(!(c!=v.charAt(0)||u!=v.charAt(1))){for(var Y=2;d!=v.charAt(Y)&&(u!=v.charAt(Y)||c!=v.charAt(Y+1));)++Y;if(Y+=2,d===v.charAt(Y-1))return k("End of comment missing");var G=v.slice(2,Y-2);return _+=2,T(G),v=v.slice(Y),_+=2,$({type:h,comment:G})}}function L(){var $=A(),Y=M(r);if(Y){if(j(),!M(i))return k("property missing ':'");var G=M(a),W=$({type:f,property:m(Y[0].replace(n,d)),value:G?m(G[0].replace(n,d)):d});return M(o),W}}function B(){var $=[];O($);for(var Y;Y=L();)Y!==!1&&($.push(Y),O($));return $}return P(),B()};function m(v){return v?v.replace(s,d):d}return ez}var upe;function xAt(){if(upe)return _S;upe=1;var n=_S&&_S.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_S,"__esModule",{value:!0}),_S.default=t;var e=n(wAt());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var o=(0,e.default)(r),s=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;s?i(c,u,l):u&&(a=a||{},a[c]=u)}}),a}return _S}var Dk={},dpe;function _At(){if(dpe)return Dk;dpe=1,Object.defineProperty(Dk,"__esModule",{value:!0}),Dk.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(c){return!c||t.test(c)||n.test(c)},o=function(c,u){return u.toUpperCase()},s=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),a(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,s):c=c.replace(r,s),c.replace(e,o))};return Dk.camelCase=l,Dk}var Ik,hpe;function SAt(){if(hpe)return Ik;hpe=1;var n=Ik&&Ik.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(xAt()),t=_At();function r(i,a){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(o[(0,t.camelCase)(s,a)]=l)}),o}return r.default=r,Ik=r,Ik}var TAt=SAt();const EAt=kr(TAt),nDe=rDe("end"),jX=rDe("start");function rDe(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function AAt(n){const e=jX(n),t=nDe(n);if(e&&t)return{start:e,end:t}}function HC(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?fpe(n.position):"start"in n||"end"in n?fpe(n):"line"in n||"column"in n?MG(n):""}function MG(n){return ppe(n&&n.line)+":"+ppe(n&&n.column)}function fpe(n){return MG(n&&n.start)+"-"+MG(n&&n.end)}function ppe(n){return n&&typeof n=="number"?n:1}class Us extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},o=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=HC(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Us.prototype.file="";Us.prototype.name="";Us.prototype.reason="";Us.prototype.message="";Us.prototype.stack="";Us.prototype.column=void 0;Us.prototype.line=void 0;Us.prototype.ancestors=void 0;Us.prototype.cause=void 0;Us.prototype.fatal=void 0;Us.prototype.place=void 0;Us.prototype.ruleId=void 0;Us.prototype.source=void 0;const FX={}.hasOwnProperty,kAt=new Map,CAt=/[A-Z]/g,DAt=new Set(["table","tbody","thead","tfoot","tr"]),IAt=new Set(["td","th"]),iDe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function MAt(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=$At(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=FAt(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?LX:yAt,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=aDe(i,n,void 0);return a&&typeof a!="string"?a:i.create(n,i.Fragment,{children:a||void 0},void 0)}function aDe(n,e,t){if(e.type==="element")return PAt(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return OAt(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return NAt(n,e,t);if(e.type==="mdxjsEsm")return RAt(n,e);if(e.type==="root")return LAt(n,e,t);if(e.type==="text")return jAt(n,e)}function PAt(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=LX,n.schema=i),n.ancestors.push(e);const a=sDe(n,e.tagName,!1),o=BAt(n,e);let s=BX(n,e);return DAt.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!lAt(l):!0})),oDe(n,o,a,e),$X(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function OAt(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}MI(n,e.position)}function RAt(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);MI(n,e.position)}function NAt(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=LX,n.schema=i),n.ancestors.push(e);const a=e.name===null?n.Fragment:sDe(n,e.name,!0),o=UAt(n,e),s=BX(n,e);return oDe(n,o,a,e),$X(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function LAt(n,e,t){const r={};return $X(r,BX(n,e)),n.create(e,n.Fragment,r,t)}function jAt(n,e){return e.value}function oDe(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function $X(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function FAt(n,e,t){return r;function r(i,a,o,s){const c=Array.isArray(o.children)?t:e;return s?c(a,o,s):c(a,o)}}function $At(n,e){return t;function t(r,i,a,o){const s=Array.isArray(a.children),l=jX(r);return e(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function BAt(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&FX.call(e.properties,i)){const a=VAt(n,i,e.properties[i]);if(a){const[o,s]=a;n.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&IAt.has(e.tagName)?r=s:t[o]=s}}if(r){const a=t.style||(t.style={});a[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function UAt(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(t,n.evaluater.evaluateExpression(s.argument))}else MI(n,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const s=r.value.data.estree.body[0];s.type,a=n.evaluater.evaluateExpression(s.expression)}else MI(n,e.position);else a=r.value===null?!0:r.value;t[i]=a}return t}function BX(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:kAt;for(;++r<e.children.length;){const a=e.children[r];let o;if(n.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=aDe(n,a,o);s!==void 0&&t.push(s)}return t}function VAt(n,e,t){const r=gAt(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?rAt(t):bAt(t)),r.property==="style"){let i=typeof t=="object"?t:zAt(n,String(t));return n.stylePropertyNameCase==="css"&&(i=HAt(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?hAt[r.property]||r.property:r.attribute,t]}}function zAt(n,e){try{return EAt(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new Us("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=iDe+"#cannot-parse-style-attribute",i}}function sDe(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,o;for(;++a<i.length;){const s=ape(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}r=o}else r=ape(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return FX.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);MI(n)}function MI(n,e){const t=new Us("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=iDe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function HAt(n){const e={};let t;for(t in n)FX.call(n,t)&&(e[GAt(t)]=n[t]);return e}function GAt(n){let e=n.replace(CAt,qAt);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function qAt(n){return"-"+n.toLowerCase()}const tz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},WAt={};function YAt(n,e){const t=WAt,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return lDe(n,r,i)}function lDe(n,e,t){if(KAt(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return gpe(n.children,e,t)}return Array.isArray(n)?gpe(n,e,t):""}function gpe(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=lDe(n[i],e,t);return r.join("")}function KAt(n){return!!(n&&typeof n=="object")}const mpe=document.createElement("i");function UX(n){const e="&"+n+";";mpe.innerHTML=e;const t=mpe.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Uf(n,e,t,r){const i=n.length;let a=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),n.splice(...o),a+=1e4,e+=1e4}function Ru(n,e){return n.length>0?(Uf(n,n.length,0,e),n):e}const vpe={}.hasOwnProperty;function XAt(n){const e={};let t=-1;for(;++t<n.length;)ZAt(e,n[t]);return e}function ZAt(n,e){let t;for(t in e){const i=(vpe.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let o;if(a)for(o in a){vpe.call(i,o)||(i[o]=[]);const s=a[o];QAt(i[o],Array.isArray(s)?s:s?[s]:[])}}}function QAt(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Uf(n,0,0,r)}function cDe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function A1(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vf=By(/[A-Za-z]/),Fc=By(/[\dA-Za-z]/),JAt=By(/[#-'*+\--9=?A-Z^-~]/);function PG(n){return n!==null&&(n<32||n===127)}const OG=By(/\d/),ekt=By(/[\dA-Fa-f]/),tkt=By(/[!-/:-@[-`{-~]/);function Sn(n){return n!==null&&n<-2}function Yl(n){return n!==null&&(n<0||n===32)}function Br(n){return n===-2||n===-1||n===32}const nkt=By(new RegExp("\\p{P}|\\p{S}","u")),rkt=By(/\s/);function By(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function rE(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const a=n.charCodeAt(t);let o="";if(a===37&&Fc(n.charCodeAt(t+1))&&Fc(n.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=n.charCodeAt(t+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o="�"}else o=String.fromCharCode(a);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+i+1,o=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Ri(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Br(l)?(n.enter(t),s(l)):e(l)}function s(l){return Br(l)&&a++<i?(n.consume(l),s):(n.exit(t),e(l))}}const ikt={tokenize:akt};function akt(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Ri(n,e,"linePrefix")}function i(s){return n.enter("paragraph"),a(s)}function a(s){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(s)}function o(s){if(s===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(s);return}return Sn(s)?(n.consume(s),n.exit("chunkText"),a):(n.consume(s),o)}}const okt={tokenize:skt},ype={tokenize:lkt};function skt(n){const e=this,t=[];let r=0,i,a,o;return s;function s(T){if(r<t.length){const A=t[r];return e.containerState=A[1],n.attempt(A[0].continuation,l,c)(T)}return c(T)}function l(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const A=e.events.length;let C=A,k;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){k=e.events[C][1].end;break}w(r);let M=A;for(;M<e.events.length;)e.events[M][1].end={...k},M++;return Uf(e.events,C+1,0,e.events.slice(A)),e.events.length=M,c(T)}return s(T)}function c(T){if(r===t.length){if(!i)return h(T);if(i.currentConstruct&&i.currentConstruct.concrete)return m(T);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(ype,u,d)(T)}function u(T){return i&&_(),w(r),h(T)}function d(T){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,m(T)}function h(T){return e.containerState={},n.attempt(ype,f,m)(T)}function f(T){return r++,t.push([e.currentConstruct,e.containerState]),h(T)}function m(T){if(T===null){i&&_(),w(0),n.consume(T);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),v(T)}function v(T){if(T===null){y(n.exit("chunkFlow"),!0),w(0),n.consume(T);return}return Sn(T)?(n.consume(T),y(n.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(n.consume(T),v)}function y(T,A){const C=e.sliceStream(T);if(A&&C.push(null),T.previous=a,a&&(a.next=T),a=T,i.defineSkip(T.start),i.write(C),e.parser.lazy[T.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const M=e.events.length;let P=M,O,j;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(O){j=e.events[P][1].end;break}O=!0}for(w(r),k=M;k<e.events.length;)e.events[k][1].end={...j},k++;Uf(e.events,P+1,0,e.events.slice(M)),e.events.length=k}}function w(T){let A=t.length;for(;A-- >T;){const C=t[A];e.containerState=C[1],C[0].exit.call(e,n)}t.length=T}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function lkt(n,e,t){return Ri(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bpe(n){if(n===null||Yl(n)||rkt(n))return 1;if(nkt(n))return 2}function VX(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const a=n[i].resolveAll;a&&!r.includes(a)&&(e=a(e,t),r.push(a))}return e}const RG={name:"attention",resolveAll:ckt,tokenize:ukt};function ckt(n,e){let t=-1,r,i,a,o,s,l,c,u;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const d={...n[r][1].end},h={...n[t][1].start};wpe(d,-l),wpe(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...n[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},n[r][1].end={...o.start},n[t][1].start={...s.end},c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=Ru(c,[["enter",n[r][1],e],["exit",n[r][1],e]])),c=Ru(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",a,e]]),c=Ru(c,VX(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),c=Ru(c,[["exit",a,e],["enter",s,e],["exit",s,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(u=2,c=Ru(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):u=0,Uf(n,r-1,t-r+3,c),t=r+c.length-u-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function ukt(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bpe(r);let a;return o;function o(l){return a=l,n.enter("attentionSequence"),s(l)}function s(l){if(l===a)return n.consume(l),s;const c=n.exit("attentionSequence"),u=bpe(l),d=!u||u===2&&i||t.includes(l),h=!i||i===2&&u||t.includes(r);return c._open=!!(a===42?d:d&&(i||!h)),c._close=!!(a===42?h:h&&(u||!d)),e(l)}}function wpe(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const dkt={name:"autolink",tokenize:hkt};function hkt(n,e,t){let r=0;return i;function i(f){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(f){return vf(f)?(n.consume(f),o):f===64?t(f):c(f)}function o(f){return f===43||f===45||f===46||Fc(f)?(r=1,s(f)):c(f)}function s(f){return f===58?(n.consume(f),r=0,l):(f===43||f===45||f===46||Fc(f))&&r++<32?(n.consume(f),s):(r=0,c(f))}function l(f){return f===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):f===null||f===32||f===60||PG(f)?t(f):(n.consume(f),l)}function c(f){return f===64?(n.consume(f),u):JAt(f)?(n.consume(f),c):t(f)}function u(f){return Fc(f)?d(f):t(f)}function d(f){return f===46?(n.consume(f),r=0,u):f===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):h(f)}function h(f){if((f===45||Fc(f))&&r++<63){const m=f===45?h:d;return n.consume(f),m}return t(f)}}const cF={partial:!0,tokenize:fkt};function fkt(n,e,t){return r;function r(a){return Br(a)?Ri(n,i,"linePrefix")(a):i(a)}function i(a){return a===null||Sn(a)?e(a):t(a)}}const uDe={continuation:{tokenize:gkt},exit:mkt,name:"blockQuote",tokenize:pkt};function pkt(n,e,t){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(n.enter("blockQuote",{_container:!0}),s.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),a}return t(o)}function a(o){return Br(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function gkt(n,e,t){const r=this;return i;function i(o){return Br(o)?Ri(n,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return n.attempt(uDe,e,t)(o)}}function mkt(n){n.exit("blockQuote")}const dDe={name:"characterEscape",tokenize:vkt};function vkt(n,e,t){return r;function r(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),i}function i(a){return tkt(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const hDe={name:"characterReference",tokenize:ykt};function ykt(n,e,t){const r=this;let i=0,a,o;return s;function s(d){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),l}function l(d){return d===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(d),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),a=31,o=Fc,u(d))}function c(d){return d===88||d===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(d),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,o=ekt,u):(n.enter("characterReferenceValue"),a=7,o=OG,u(d))}function u(d){if(d===59&&i){const h=n.exit("characterReferenceValue");return o===Fc&&!UX(r.sliceSerialize(h))?t(d):(n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(d)&&i++<a?(n.consume(d),u):t(d)}}const xpe={partial:!0,tokenize:wkt},_pe={concrete:!0,name:"codeFenced",tokenize:bkt};function bkt(n,e,t){const r=this,i={partial:!0,tokenize:C};let a=0,o=0,s;return l;function l(k){return c(k)}function c(k){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,s=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),u(k)}function u(k){return k===s?(o++,n.consume(k),u):o<3?t(k):(n.exit("codeFencedFenceSequence"),Br(k)?Ri(n,d,"whitespace")(k):d(k))}function d(k){return k===null||Sn(k)?(n.exit("codeFencedFence"),r.interrupt?e(k):n.check(xpe,v,A)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===null||Sn(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),d(k)):Br(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ri(n,f,"whitespace")(k)):k===96&&k===s?t(k):(n.consume(k),h)}function f(k){return k===null||Sn(k)?d(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),m(k))}function m(k){return k===null||Sn(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),d(k)):k===96&&k===s?t(k):(n.consume(k),m)}function v(k){return n.attempt(i,A,y)(k)}function y(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),w}function w(k){return a>0&&Br(k)?Ri(n,_,"linePrefix",a+1)(k):_(k)}function _(k){return k===null||Sn(k)?n.check(xpe,v,A)(k):(n.enter("codeFlowValue"),T(k))}function T(k){return k===null||Sn(k)?(n.exit("codeFlowValue"),_(k)):(n.consume(k),T)}function A(k){return n.exit("codeFenced"),e(k)}function C(k,M,P){let O=0;return j;function j(G){return k.enter("lineEnding"),k.consume(G),k.exit("lineEnding"),L}function L(G){return k.enter("codeFencedFence"),Br(G)?Ri(k,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):B(G)}function B(G){return G===s?(k.enter("codeFencedFenceSequence"),$(G)):P(G)}function $(G){return G===s?(O++,k.consume(G),$):O>=o?(k.exit("codeFencedFenceSequence"),Br(G)?Ri(k,Y,"whitespace")(G):Y(G)):P(G)}function Y(G){return G===null||Sn(G)?(k.exit("codeFencedFence"),M(G)):P(G)}}}function wkt(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const nz={name:"codeIndented",tokenize:_kt},xkt={partial:!0,tokenize:Skt};function _kt(n,e,t){const r=this;return i;function i(c){return n.enter("codeIndented"),Ri(n,a,"linePrefix",5)(c)}function a(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):t(c)}function o(c){return c===null?l(c):Sn(c)?n.attempt(xkt,o,l)(c):(n.enter("codeFlowValue"),s(c))}function s(c){return c===null||Sn(c)?(n.exit("codeFlowValue"),o(c)):(n.consume(c),s)}function l(c){return n.exit("codeIndented"),e(c)}}function Skt(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):Sn(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):Ri(n,a,"linePrefix",5)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):Sn(o)?i(o):t(o)}}const Tkt={name:"codeText",previous:Akt,resolve:Ekt,tokenize:kkt};function Ekt(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function Akt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kkt(n,e,t){let r=0,i,a;return o;function o(d){return n.enter("codeText"),n.enter("codeTextSequence"),s(d)}function s(d){return d===96?(n.consume(d),r++,s):(n.exit("codeTextSequence"),l(d))}function l(d){return d===null?t(d):d===32?(n.enter("space"),n.consume(d),n.exit("space"),l):d===96?(a=n.enter("codeTextSequence"),i=0,u(d)):Sn(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Sn(d)?(n.exit("codeTextData"),l(d)):(n.consume(d),c)}function u(d){return d===96?(n.consume(d),i++,u):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(d)):(a.type="codeTextData",c(d))}}class Ckt{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Mk(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Mk(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Mk(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Mk(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Mk(this.left,t.reverse())}}}function Mk(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function fDe(n){const e={};let t=-1,r,i,a,o,s,l,c;const u=new Ckt(n);for(;++t<u.length;){for(;t in e;)t=e[t];if(r=u.get(t),t&&r[1].type==="chunkFlow"&&u.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Dkt(u,t)),t=e[t],c=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,t),s.unshift(r),u.splice(i,t-i+1,s))}}return Uf(n,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function Dkt(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const a=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let u,d,h=-1,f=t,m=0,v=0;const y=[v];for(;f;){for(;n.get(++i)[1]!==f;);a.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=t;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(v=h+1,y.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const w=s.slice(y[h],y[h+1]),_=a.pop();l.push([_,_+w.length-1]),n.splice(_,2,w)}for(l.reverse(),h=-1;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c}const Ikt={resolve:Pkt,tokenize:Okt},Mkt={partial:!0,tokenize:Rkt};function Pkt(n){return fDe(n),n}function Okt(n,e){let t;return r;function r(s){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):Sn(s)?n.check(Mkt,o,a)(s):(n.consume(s),i)}function a(s){return n.exit("chunkContent"),n.exit("content"),e(s)}function o(s){return n.consume(s),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Rkt(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Ri(n,a,"linePrefix")}function a(o){if(o===null||Sn(o))return t(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function pDe(n,e,t,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(w){return w===60?(n.enter(r),n.enter(i),n.enter(a),n.consume(w),n.exit(a),h):w===null||w===32||w===41||PG(w)?t(w):(n.enter(r),n.enter(o),n.enter(s),n.enter("chunkString",{contentType:"string"}),v(w))}function h(w){return w===62?(n.enter(a),n.consume(w),n.exit(a),n.exit(i),n.exit(r),e):(n.enter(s),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===62?(n.exit("chunkString"),n.exit(s),h(w)):w===null||w===60||Sn(w)?t(w):(n.consume(w),w===92?m:f)}function m(w){return w===60||w===62||w===92?(n.consume(w),f):f(w)}function v(w){return!u&&(w===null||w===41||Yl(w))?(n.exit("chunkString"),n.exit(s),n.exit(o),n.exit(r),e(w)):u<c&&w===40?(n.consume(w),u++,v):w===41?(n.consume(w),u--,v):w===null||w===32||w===40||PG(w)?t(w):(n.consume(w),w===92?y:v)}function y(w){return w===40||w===41||w===92?(n.consume(w),v):v(w)}}function gDe(n,e,t,r,i,a){const o=this;let s=0,l;return c;function c(f){return n.enter(r),n.enter(i),n.consume(f),n.exit(i),n.enter(a),u}function u(f){return s>999||f===null||f===91||f===93&&!l||f===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?t(f):f===93?(n.exit(a),n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):Sn(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),u):(n.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Sn(f)||s++>999?(n.exit("chunkString"),u(f)):(n.consume(f),l||(l=!Br(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(n.consume(f),s++,d):d(f)}}function mDe(n,e,t,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(n.enter(r),n.enter(i),n.consume(h),n.exit(i),o=h===40?41:h,l):t(h)}function l(h){return h===o?(n.enter(i),n.consume(h),n.exit(i),n.exit(r),e):(n.enter(a),c(h))}function c(h){return h===o?(n.exit(a),l(o)):h===null?t(h):Sn(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),Ri(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||Sn(h)?(n.exit("chunkString"),c(h)):(n.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(n.consume(h),u):u(h)}}function GC(n,e){let t;return r;function r(i){return Sn(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Br(i)?Ri(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const Nkt={name:"definition",tokenize:jkt},Lkt={partial:!0,tokenize:Fkt};function jkt(n,e,t){const r=this;let i;return a;function a(f){return n.enter("definition"),o(f)}function o(f){return gDe.call(r,n,s,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function s(f){return i=A1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(n.enter("definitionMarker"),n.consume(f),n.exit("definitionMarker"),l):t(f)}function l(f){return Yl(f)?GC(n,c)(f):c(f)}function c(f){return pDe(n,u,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return n.attempt(Lkt,d,d)(f)}function d(f){return Br(f)?Ri(n,h,"whitespace")(f):h(f)}function h(f){return f===null||Sn(f)?(n.exit("definition"),r.parser.defined.push(i),e(f)):t(f)}}function Fkt(n,e,t){return r;function r(s){return Yl(s)?GC(n,i)(s):t(s)}function i(s){return mDe(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Br(s)?Ri(n,o,"whitespace")(s):o(s)}function o(s){return s===null||Sn(s)?e(s):t(s)}}const $kt={name:"hardBreakEscape",tokenize:Bkt};function Bkt(n,e,t){return r;function r(a){return n.enter("hardBreakEscape"),n.consume(a),i}function i(a){return Sn(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const Ukt={name:"headingAtx",resolve:Vkt,tokenize:zkt};function Vkt(n,e){let t=n.length-2,r=3,i,a;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},a={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Uf(n,r,t-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),n}function zkt(n,e,t){let r=0;return i;function i(u){return n.enter("atxHeading"),a(u)}function a(u){return n.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(n.consume(u),o):u===null||Yl(u)?(n.exit("atxHeadingSequence"),s(u)):t(u)}function s(u){return u===35?(n.enter("atxHeadingSequence"),l(u)):u===null||Sn(u)?(n.exit("atxHeading"),e(u)):Br(u)?Ri(n,s,"whitespace")(u):(n.enter("atxHeadingText"),c(u))}function l(u){return u===35?(n.consume(u),l):(n.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||Yl(u)?(n.exit("atxHeadingText"),s(u)):(n.consume(u),c)}}const Hkt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Spe=["pre","script","style","textarea"],Gkt={concrete:!0,name:"htmlFlow",resolveTo:Ykt,tokenize:Kkt},qkt={partial:!0,tokenize:Zkt},Wkt={partial:!0,tokenize:Xkt};function Ykt(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function Kkt(n,e,t){const r=this;let i,a,o,s,l;return c;function c(ee){return u(ee)}function u(ee){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(ee),d}function d(ee){return ee===33?(n.consume(ee),h):ee===47?(n.consume(ee),a=!0,v):ee===63?(n.consume(ee),i=3,r.interrupt?e:z):vf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function h(ee){return ee===45?(n.consume(ee),i=2,f):ee===91?(n.consume(ee),i=5,s=0,m):vf(ee)?(n.consume(ee),i=4,r.interrupt?e:z):t(ee)}function f(ee){return ee===45?(n.consume(ee),r.interrupt?e:z):t(ee)}function m(ee){const ye="CDATA[";return ee===ye.charCodeAt(s++)?(n.consume(ee),s===ye.length?r.interrupt?e:B:m):t(ee)}function v(ee){return vf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function y(ee){if(ee===null||ee===47||ee===62||Yl(ee)){const ye=ee===47,fe=o.toLowerCase();return!ye&&!a&&Spe.includes(fe)?(i=1,r.interrupt?e(ee):B(ee)):Hkt.includes(o.toLowerCase())?(i=6,ye?(n.consume(ee),w):r.interrupt?e(ee):B(ee)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(ee):a?_(ee):T(ee))}return ee===45||Fc(ee)?(n.consume(ee),o+=String.fromCharCode(ee),y):t(ee)}function w(ee){return ee===62?(n.consume(ee),r.interrupt?e:B):t(ee)}function _(ee){return Br(ee)?(n.consume(ee),_):j(ee)}function T(ee){return ee===47?(n.consume(ee),j):ee===58||ee===95||vf(ee)?(n.consume(ee),A):Br(ee)?(n.consume(ee),T):j(ee)}function A(ee){return ee===45||ee===46||ee===58||ee===95||Fc(ee)?(n.consume(ee),A):C(ee)}function C(ee){return ee===61?(n.consume(ee),k):Br(ee)?(n.consume(ee),C):T(ee)}function k(ee){return ee===null||ee===60||ee===61||ee===62||ee===96?t(ee):ee===34||ee===39?(n.consume(ee),l=ee,M):Br(ee)?(n.consume(ee),k):P(ee)}function M(ee){return ee===l?(n.consume(ee),l=null,O):ee===null||Sn(ee)?t(ee):(n.consume(ee),M)}function P(ee){return ee===null||ee===34||ee===39||ee===47||ee===60||ee===61||ee===62||ee===96||Yl(ee)?C(ee):(n.consume(ee),P)}function O(ee){return ee===47||ee===62||Br(ee)?T(ee):t(ee)}function j(ee){return ee===62?(n.consume(ee),L):t(ee)}function L(ee){return ee===null||Sn(ee)?B(ee):Br(ee)?(n.consume(ee),L):t(ee)}function B(ee){return ee===45&&i===2?(n.consume(ee),W):ee===60&&i===1?(n.consume(ee),X):ee===62&&i===4?(n.consume(ee),ae):ee===63&&i===3?(n.consume(ee),z):ee===93&&i===5?(n.consume(ee),re):Sn(ee)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(qkt,le,$)(ee)):ee===null||Sn(ee)?(n.exit("htmlFlowData"),$(ee)):(n.consume(ee),B)}function $(ee){return n.check(Wkt,Y,le)(ee)}function Y(ee){return n.enter("lineEnding"),n.consume(ee),n.exit("lineEnding"),G}function G(ee){return ee===null||Sn(ee)?$(ee):(n.enter("htmlFlowData"),B(ee))}function W(ee){return ee===45?(n.consume(ee),z):B(ee)}function X(ee){return ee===47?(n.consume(ee),o="",te):B(ee)}function te(ee){if(ee===62){const ye=o.toLowerCase();return Spe.includes(ye)?(n.consume(ee),ae):B(ee)}return vf(ee)&&o.length<8?(n.consume(ee),o+=String.fromCharCode(ee),te):B(ee)}function re(ee){return ee===93?(n.consume(ee),z):B(ee)}function z(ee){return ee===62?(n.consume(ee),ae):ee===45&&i===2?(n.consume(ee),z):B(ee)}function ae(ee){return ee===null||Sn(ee)?(n.exit("htmlFlowData"),le(ee)):(n.consume(ee),ae)}function le(ee){return n.exit("htmlFlow"),e(ee)}}function Xkt(n,e,t){const r=this;return i;function i(o){return Sn(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a):t(o)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function Zkt(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(cF,e,t)}}const Qkt={name:"htmlText",tokenize:Jkt};function Jkt(n,e,t){const r=this;let i,a,o;return s;function s(z){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(z),l}function l(z){return z===33?(n.consume(z),c):z===47?(n.consume(z),C):z===63?(n.consume(z),T):vf(z)?(n.consume(z),P):t(z)}function c(z){return z===45?(n.consume(z),u):z===91?(n.consume(z),a=0,m):vf(z)?(n.consume(z),_):t(z)}function u(z){return z===45?(n.consume(z),f):t(z)}function d(z){return z===null?t(z):z===45?(n.consume(z),h):Sn(z)?(o=d,X(z)):(n.consume(z),d)}function h(z){return z===45?(n.consume(z),f):d(z)}function f(z){return z===62?W(z):z===45?h(z):d(z)}function m(z){const ae="CDATA[";return z===ae.charCodeAt(a++)?(n.consume(z),a===ae.length?v:m):t(z)}function v(z){return z===null?t(z):z===93?(n.consume(z),y):Sn(z)?(o=v,X(z)):(n.consume(z),v)}function y(z){return z===93?(n.consume(z),w):v(z)}function w(z){return z===62?W(z):z===93?(n.consume(z),w):v(z)}function _(z){return z===null||z===62?W(z):Sn(z)?(o=_,X(z)):(n.consume(z),_)}function T(z){return z===null?t(z):z===63?(n.consume(z),A):Sn(z)?(o=T,X(z)):(n.consume(z),T)}function A(z){return z===62?W(z):T(z)}function C(z){return vf(z)?(n.consume(z),k):t(z)}function k(z){return z===45||Fc(z)?(n.consume(z),k):M(z)}function M(z){return Sn(z)?(o=M,X(z)):Br(z)?(n.consume(z),M):W(z)}function P(z){return z===45||Fc(z)?(n.consume(z),P):z===47||z===62||Yl(z)?O(z):t(z)}function O(z){return z===47?(n.consume(z),W):z===58||z===95||vf(z)?(n.consume(z),j):Sn(z)?(o=O,X(z)):Br(z)?(n.consume(z),O):W(z)}function j(z){return z===45||z===46||z===58||z===95||Fc(z)?(n.consume(z),j):L(z)}function L(z){return z===61?(n.consume(z),B):Sn(z)?(o=L,X(z)):Br(z)?(n.consume(z),L):O(z)}function B(z){return z===null||z===60||z===61||z===62||z===96?t(z):z===34||z===39?(n.consume(z),i=z,$):Sn(z)?(o=B,X(z)):Br(z)?(n.consume(z),B):(n.consume(z),Y)}function $(z){return z===i?(n.consume(z),i=void 0,G):z===null?t(z):Sn(z)?(o=$,X(z)):(n.consume(z),$)}function Y(z){return z===null||z===34||z===39||z===60||z===61||z===96?t(z):z===47||z===62||Yl(z)?O(z):(n.consume(z),Y)}function G(z){return z===47||z===62||Yl(z)?O(z):t(z)}function W(z){return z===62?(n.consume(z),n.exit("htmlTextData"),n.exit("htmlText"),e):t(z)}function X(z){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),te}function te(z){return Br(z)?Ri(n,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):re(z)}function re(z){return n.enter("htmlTextData"),o(z)}}const zX={name:"labelEnd",resolveAll:rCt,resolveTo:iCt,tokenize:aCt},eCt={tokenize:oCt},tCt={tokenize:sCt},nCt={tokenize:lCt};function rCt(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&Uf(n,0,n.length,t),n}function iCt(n,e){let t=n.length,r=0,i,a,o,s;for(;t--;)if(i=n[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},c={type:"label",start:{...n[a][1].start},end:{...n[o][1].end}},u={type:"labelText",start:{...n[a+r+2][1].end},end:{...n[o-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=Ru(s,n.slice(a+1,a+r+3)),s=Ru(s,[["enter",u,e]]),s=Ru(s,VX(e.parser.constructs.insideSpan.null,n.slice(a+r+4,o-3),e)),s=Ru(s,[["exit",u,e],n[o-2],n[o-1],["exit",c,e]]),s=Ru(s,n.slice(o+1)),s=Ru(s,[["exit",l,e]]),Uf(n,a,n.length,s),n}function aCt(n,e,t){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?d(h):(o=r.parser.defined.includes(A1(r.sliceSerialize({start:a.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelEnd"),l):t(h)}function l(h){return h===40?n.attempt(eCt,u,o?u:d)(h):h===91?n.attempt(tCt,u,o?c:d)(h):o?u(h):d(h)}function c(h){return n.attempt(nCt,u,d)(h)}function u(h){return e(h)}function d(h){return a._balanced=!0,t(h)}}function oCt(n,e,t){return r;function r(d){return n.enter("resource"),n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),i}function i(d){return Yl(d)?GC(n,a)(d):a(d)}function a(d){return d===41?u(d):pDe(n,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Yl(d)?GC(n,l)(d):u(d)}function s(d){return t(d)}function l(d){return d===34||d===39||d===40?mDe(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Yl(d)?GC(n,u)(d):u(d)}function u(d){return d===41?(n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),n.exit("resource"),e):t(d)}}function sCt(n,e,t){const r=this;return i;function i(s){return gDe.call(r,n,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(A1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):t(s)}function o(s){return t(s)}}function lCt(n,e,t){return r;function r(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),i}function i(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const cCt={name:"labelStartImage",resolveAll:zX.resolveAll,tokenize:uCt};function uCt(n,e,t){const r=this;return i;function i(s){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(s),n.exit("labelImageMarker"),a}function a(s){return s===91?(n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelImage"),o):t(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):e(s)}}const dCt={name:"labelStartLink",resolveAll:zX.resolveAll,tokenize:hCt};function hCt(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const rz={name:"lineEnding",tokenize:fCt};function fCt(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Ri(n,e,"linePrefix")}}const gN={name:"thematicBreak",tokenize:pCt};function pCt(n,e,t){let r=0,i;return a;function a(c){return n.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Sn(c))?(n.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===i?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),Br(c)?Ri(n,s,"whitespace")(c):s(c))}}const $l={continuation:{tokenize:yCt},exit:wCt,name:"list",tokenize:vCt},gCt={partial:!0,tokenize:xCt},mCt={partial:!0,tokenize:bCt};function vCt(n,e,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:OG(f)){if(r.containerState.type||(r.containerState.type=m,n.enter(m,{_container:!0})),m==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(gN,t,c)(f):c(f);if(!r.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(f)}return t(f)}function l(f){return OG(f)&&++o<10?(n.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),c(f)):t(f)}function c(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,n.check(cF,r.interrupt?t:u,n.attempt(gCt,h,d))}function u(f){return r.containerState.initialBlankLine=!0,a++,h(f)}function d(f){return Br(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),h):t(f)}function h(f){return r.containerState.size=a+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(f)}}function yCt(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(cF,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ri(n,e,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!Br(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(mCt,e,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ri(n,n.attempt($l,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function bCt(n,e,t){const r=this;return Ri(n,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(a):t(a)}}function wCt(n){n.exit(this.containerState.type)}function xCt(n,e,t){const r=this;return Ri(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Br(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const Tpe={name:"setextUnderline",resolveTo:_Ct,tokenize:SCt};function _Ct(n,e){let t=n.length,r,i,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",a?(n.splice(i,0,["enter",o,e]),n.splice(a+1,0,["exit",n[r][1],e]),n[r][1].end={...n[a][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function SCt(n,e,t){const r=this;let i;return a;function a(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(n.enter("setextHeadingLine"),i=c,o(c)):t(c)}function o(c){return n.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(n.consume(c),s):(n.exit("setextHeadingLineSequence"),Br(c)?Ri(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Sn(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const TCt={tokenize:ECt};function ECt(n){const e=this,t=n.attempt(cF,r,n.attempt(this.parser.constructs.flowInitial,i,Ri(n,n.attempt(this.parser.constructs.flow,i,n.attempt(Ikt,i)),"linePrefix")));return t;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const ACt={resolveAll:yDe()},kCt=vDe("string"),CCt=vDe("text");function vDe(n){return{resolveAll:yDe(n==="text"?DCt:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],a=t.attempt(i,o,s);return o;function o(u){return c(u)?a(u):s(u)}function s(u){if(u===null){t.consume(u);return}return t.enter("data"),t.consume(u),l}function l(u){return c(u)?(t.exit("data"),a(u)):(t.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function yDe(n){return e;function e(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return n?n(t,r):t}}function DCt(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(s=0),s){const c={type:t===n.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}const ICt={42:$l,43:$l,45:$l,48:$l,49:$l,50:$l,51:$l,52:$l,53:$l,54:$l,55:$l,56:$l,57:$l,62:uDe},MCt={91:Nkt},PCt={[-2]:nz,[-1]:nz,32:nz},OCt={35:Ukt,42:gN,45:[Tpe,gN],60:Gkt,61:Tpe,95:gN,96:_pe,126:_pe},RCt={38:hDe,92:dDe},NCt={[-5]:rz,[-4]:rz,[-3]:rz,33:cCt,38:hDe,42:RG,60:[dkt,Qkt],91:dCt,92:[$kt,dDe],93:zX,95:RG,96:Tkt},LCt={null:[RG,ACt]},jCt={null:[42,95]},FCt={null:[]},$Ct=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jCt,contentInitial:MCt,disable:FCt,document:ICt,flow:OCt,flowInitial:PCt,insideSpan:LCt,string:RCt,text:NCt},Symbol.toStringTag,{value:"Module"}));function BCt(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:M(C),check:M(k),consume:_,enter:T,exit:A,interrupt:M(k,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:n,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function d(L){return o=Ru(o,L),y(),o[o.length-1]!==null?[]:(P(e,0),c.events=VX(a,c.events,c),c.events)}function h(L,B){return VCt(f(L),B)}function f(L){return UCt(o,L)}function m(){const{_bufferIndex:L,_index:B,line:$,column:Y,offset:G}=r;return{_bufferIndex:L,_index:B,line:$,column:Y,offset:G}}function v(L){i[L.line]=L.column,j()}function y(){let L;for(;r._index<o.length;){const B=o[r._index];if(typeof B=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<B.length;)w(B.charCodeAt(r._bufferIndex));else w(B)}}function w(L){u=u(L)}function _(L){Sn(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,j()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=L}function T(L,B){const $=B||{};return $.type=L,$.start=m(),c.events.push(["enter",$,c]),s.push($),$}function A(L){const B=s.pop();return B.end=m(),c.events.push(["exit",B,c]),B}function C(L,B){P(L,B.from)}function k(L,B){B.restore()}function M(L,B){return $;function $(Y,G,W){let X,te,re,z;return Array.isArray(Y)?le(Y):"tokenize"in Y?le([Y]):ae(Y);function ae(Ce){return at;function at(Le){const we=Le!==null&&Ce[Le],be=Le!==null&&Ce.null,ge=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(be)?be:be?[be]:[]];return le(ge)(Le)}}function le(Ce){return X=Ce,te=0,Ce.length===0?W:ee(Ce[te])}function ee(Ce){return at;function at(Le){return z=O(),re=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?fe():Ce.tokenize.call(B?Object.assign(Object.create(c),B):c,l,ye,fe)(Le)}}function ye(Ce){return L(re,z),G}function fe(Ce){return z.restore(),++te<X.length?ee(X[te]):W}}}function P(L,B){L.resolveAll&&!a.includes(L)&&a.push(L),L.resolve&&Uf(c.events,B,c.events.length-B,L.resolve(c.events.slice(B),c)),L.resolveTo&&(c.events=L.resolveTo(c.events,c))}function O(){const L=m(),B=c.previous,$=c.currentConstruct,Y=c.events.length,G=Array.from(s);return{from:Y,restore:W};function W(){r=L,c.previous=B,c.currentConstruct=$,c.events.length=Y,s=G,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function UCt(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,a)];else{if(o=n.slice(t,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(n[i].slice(0,a))}return o}function VCt(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const a=n[t];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function zCt(n){const r={constructs:XAt([$Ct,...(n||{}).extensions||[]]),content:i(ikt),defined:[],document:i(okt),flow:i(TCt),lazy:{},string:i(kCt),text:i(CCt)};return r;function i(a){return o;function o(s){return BCt(r,a,s)}}}function HCt(n){for(;!fDe(n););return n}const Epe=/[\0\t\n\r]/g;function GCt(){let n=1,e="",t=!0,r;return i;function i(a,o,s){const l=[];let c,u,d,h,f;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),d=0,e="",t&&(a.charCodeAt(0)===65279&&d++,t=void 0);d<a.length;){if(Epe.lastIndex=d,c=Epe.exec(a),h=c&&c.index!==void 0?c.index:a.length,f=a.charCodeAt(h),!c){e=a.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(a.slice(d,h)),n+=h-d),f){case 0:{l.push(65533),n++;break}case 9:{for(u=Math.ceil(n/4)*4,l.push(-2);n++<u;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}d=h+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const qCt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function WCt(n){return n.replace(qCt,YCt)}function YCt(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return cDe(t.slice(a?2:1),a?16:10)}return UX(t)||n}const bDe={}.hasOwnProperty;function KCt(n,e,t){return typeof e!="string"&&(t=e,e=void 0),XCt(t)(HCt(zCt(t).document().write(GCt()(n,e,!0))))}function XCt(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ct),autolinkProtocol:O,autolinkEmail:O,atxHeading:a(rt),blockQuote:a(be),characterEscape:O,characterReference:O,codeFenced:a(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(ge,o),codeText:a(he,o),codeTextData:O,data:O,codeFlowValue:O,definition:a(Ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(je),hardBreakEscape:a(bt),hardBreakTrailing:a(bt),htmlFlow:a(lt,o),htmlFlowData:O,htmlText:a(lt,o),htmlTextData:O,image:a(cn),label:o,link:a(Ct),listItem:a(jn),listItemValue:h,listOrdered:a(En,d),listUnordered:a(En),paragraph:a(Re),reference:ee,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(rt),strong:a(Jt),thematicBreak:a(Mt)},exit:{atxHeading:l(),atxHeadingSequence:C,autolink:l(),autolinkEmail:we,autolinkProtocol:Le,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:Ce,characterReference:at,codeFenced:l(y),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:j,codeIndented:l(w),codeText:l(G),codeTextData:j,data:j,definition:l(),definitionDestinationString:A,definitionLabelString:_,definitionTitleString:T,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l($),htmlFlowData:j,htmlText:l(Y),htmlTextData:j,image:l(X),label:re,labelText:te,lineEnding:L,link:l(W),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ye,resourceDestinationString:z,resourceTitleString:ae,resource:le,setextHeading:l(P),setextHeadingLineSequence:M,setextHeadingText:k,strong:l(),thematicBreak:l()}};wDe(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(Te){let Ne={type:"root",children:[]};const tt={stack:[Ne],tokenStack:[],config:e,enter:s,exit:c,buffer:o,resume:u,data:t},xt=[];let fn=-1;for(;++fn<Te.length;)if(Te[fn][1].type==="listOrdered"||Te[fn][1].type==="listUnordered")if(Te[fn][0]==="enter")xt.push(fn);else{const Ti=xt.pop();fn=i(Te,Ti,fn)}for(fn=-1;++fn<Te.length;){const Ti=e[Te[fn][0]];bDe.call(Ti,Te[fn][1].type)&&Ti[Te[fn][1].type].call(Object.assign({sliceSerialize:Te[fn][2].sliceSerialize},tt),Te[fn][1])}if(tt.tokenStack.length>0){const Ti=tt.tokenStack[tt.tokenStack.length-1];(Ti[1]||Ape).call(tt,void 0,Ti[0])}for(Ne.position={start:Iv(Te.length>0?Te[0][1].start:{line:1,column:1,offset:0}),end:Iv(Te.length>0?Te[Te.length-2][1].end:{line:1,column:1,offset:0})},fn=-1;++fn<e.transforms.length;)Ne=e.transforms[fn](Ne)||Ne;return Ne}function i(Te,Ne,tt){let xt=Ne-1,fn=-1,Ti=!1,Nn,Nr,oi,on;for(;++xt<=tt;){const zr=Te[xt];switch(zr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zr[0]==="enter"?fn++:fn--,on=void 0;break}case"lineEndingBlank":{zr[0]==="enter"&&(Nn&&!on&&!fn&&!oi&&(oi=xt),on=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:on=void 0}if(!fn&&zr[0]==="enter"&&zr[1].type==="listItemPrefix"||fn===-1&&zr[0]==="exit"&&(zr[1].type==="listUnordered"||zr[1].type==="listOrdered")){if(Nn){let Ei=xt;for(Nr=void 0;Ei--;){const mi=Te[Ei];if(mi[1].type==="lineEnding"||mi[1].type==="lineEndingBlank"){if(mi[0]==="exit")continue;Nr&&(Te[Nr][1].type="lineEndingBlank",Ti=!0),mi[1].type="lineEnding",Nr=Ei}else if(!(mi[1].type==="linePrefix"||mi[1].type==="blockQuotePrefix"||mi[1].type==="blockQuotePrefixWhitespace"||mi[1].type==="blockQuoteMarker"||mi[1].type==="listItemIndent"))break}oi&&(!Nr||oi<Nr)&&(Nn._spread=!0),Nn.end=Object.assign({},Nr?Te[Nr][1].start:zr[1].end),Te.splice(Nr||xt,0,["exit",Nn,zr[2]]),xt++,tt++}if(zr[1].type==="listItemPrefix"){const Ei={type:"listItem",_spread:!1,start:Object.assign({},zr[1].start),end:void 0};Nn=Ei,Te.splice(xt,0,["enter",Ei,zr[2]]),xt++,tt++,oi=void 0,on=!0}}}return Te[Ne][1]._spread=Ti,tt}function a(Te,Ne){return tt;function tt(xt){s.call(this,Te(xt),xt),Ne&&Ne.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(Te,Ne,tt){this.stack[this.stack.length-1].children.push(Te),this.stack.push(Te),this.tokenStack.push([Ne,tt||void 0]),Te.position={start:Iv(Ne.start),end:void 0}}function l(Te){return Ne;function Ne(tt){Te&&Te.call(this,tt),c.call(this,tt)}}function c(Te,Ne){const tt=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Te.type&&(Ne?Ne.call(this,Te,xt[0]):(xt[1]||Ape).call(this,Te,xt[0]));else throw new Error("Cannot close `"+Te.type+"` ("+HC({start:Te.start,end:Te.end})+"): it’s not open");tt.position.end=Iv(Te.end)}function u(){return YAt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(Te){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(Te),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=Te}function m(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=Te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Te.replace(/(\r?\n|\r)$/g,"")}function _(Te){const Ne=this.resume(),tt=this.stack[this.stack.length-1];tt.label=Ne,tt.identifier=A1(this.sliceSerialize(Te)).toLowerCase()}function T(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=Te}function A(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=Te}function C(Te){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const tt=this.sliceSerialize(Te).length;Ne.depth=tt}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function M(Te){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(Te).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function O(Te){const tt=this.stack[this.stack.length-1].children;let xt=tt[tt.length-1];(!xt||xt.type!=="text")&&(xt=hn(),xt.position={start:Iv(Te.start),end:void 0},tt.push(xt)),this.stack.push(xt)}function j(Te){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(Te),Ne.position.end=Iv(Te.end)}function L(Te){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const tt=Ne.children[Ne.children.length-1];tt.position.end=Iv(Te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ne.type)&&(O.call(this,Te),j.call(this,Te))}function B(){this.data.atHardBreak=!0}function $(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Te}function Y(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Te}function G(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=Te}function W(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Ne,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function X(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Ne,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function te(Te){const Ne=this.sliceSerialize(Te),tt=this.stack[this.stack.length-2];tt.label=WCt(Ne),tt.identifier=A1(Ne).toLowerCase()}function re(){const Te=this.stack[this.stack.length-1],Ne=this.resume(),tt=this.stack[this.stack.length-1];if(this.data.inReference=!0,tt.type==="link"){const xt=Te.children;tt.children=xt}else tt.alt=Ne}function z(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=Te}function ae(){const Te=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=Te}function le(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function ye(Te){const Ne=this.resume(),tt=this.stack[this.stack.length-1];tt.label=Ne,tt.identifier=A1(this.sliceSerialize(Te)).toLowerCase(),this.data.referenceType="full"}function fe(Te){this.data.characterReferenceType=Te.type}function Ce(Te){const Ne=this.sliceSerialize(Te),tt=this.data.characterReferenceType;let xt;tt?(xt=cDe(Ne,tt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=UX(Ne);const fn=this.stack[this.stack.length-1];fn.value+=xt}function at(Te){const Ne=this.stack.pop();Ne.position.end=Iv(Te.end)}function Le(Te){j.call(this,Te);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(Te)}function we(Te){j.call(this,Te);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(Te)}function be(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:0,children:[]}}function bt(){return{type:"break"}}function lt(){return{type:"html",value:""}}function cn(){return{type:"image",title:null,url:"",alt:null}}function Ct(){return{type:"link",title:null,url:"",children:[]}}function En(Te){return{type:"list",ordered:Te.type==="listOrdered",start:null,spread:Te._spread,children:[]}}function jn(Te){return{type:"listItem",spread:Te._spread,checked:null,children:[]}}function Re(){return{type:"paragraph",children:[]}}function Jt(){return{type:"strong",children:[]}}function hn(){return{type:"text",value:""}}function Mt(){return{type:"thematicBreak"}}}function Iv(n){return{line:n.line,column:n.column,offset:n.offset}}function wDe(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?wDe(n,r):ZCt(n,r)}}function ZCt(n,e){let t;for(t in e)if(bDe.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Ape(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+HC({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+HC({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+HC({start:e.start,end:e.end})+") is still open")}function QCt(n){const e=this;e.parser=t;function t(r){return KCt(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function JCt(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function eDt(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function tDt(n,e){const t=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),n.patch(e,i),i=n.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},n.patch(e,i),i}function nDt(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function rDt(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function iDt(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=rE(r.toLowerCase()),a=n.footnoteOrder.indexOf(r);let o,s=n.footnoteCounts.get(r);s===void 0?(s=0,n.footnoteOrder.push(r),o=n.footnoteOrder.length):o=a+1,s+=1,n.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,c),n.applyData(e,c)}function aDt(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function oDt(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function xDe(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function sDt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return xDe(n,e);const i={src:rE(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,a),n.applyData(e,a)}function lDt(n,e){const t={src:rE(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function cDt(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function uDt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return xDe(n,e);const i={href:rE(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,a),n.applyData(e,a)}function dDt(n,e){const t={href:rE(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function hDt(n,e,t){const r=n.all(e),i=t?fDt(t):_De(e),a={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const u=r[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return n.patch(e,c),n.applyData(e,c)}function fDt(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=_De(t[r])}return e}function _De(n){const e=n.spread;return e??n.children.length>1}function pDt(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,a),n.applyData(e,a)}function gDt(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function mDt(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function vDt(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function yDt(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),i.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},s=jX(e.children[1]),l=nDe(e.children[e.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,a),n.applyData(e,a)}function bDt(n,e,t){const r=t?t.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,s=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<s;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let m={type:"element",tagName:a,properties:h,children:[]};d&&(m.children=n.all(d),n.patch(d,m),m=n.applyData(d,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,u),n.applyData(e,u)}function wDt(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const kpe=9,Cpe=32;function xDt(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const a=[];for(;r;)a.push(Dpe(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return a.push(Dpe(e.slice(i),i>0,!1)),a.join("")}function Dpe(n,e,t){let r=0,i=n.length;if(e){let a=n.codePointAt(r);for(;a===kpe||a===Cpe;)r++,a=n.codePointAt(r)}if(t){let a=n.codePointAt(i-1);for(;a===kpe||a===Cpe;)i--,a=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function _Dt(n,e){const t={type:"text",value:xDt(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function SDt(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const TDt={blockquote:JCt,break:eDt,code:tDt,delete:nDt,emphasis:rDt,footnoteReference:iDt,heading:aDt,html:oDt,imageReference:sDt,image:lDt,inlineCode:cDt,linkReference:uDt,link:dDt,listItem:hDt,list:pDt,paragraph:gDt,root:mDt,strong:vDt,table:yDt,tableCell:wDt,tableRow:bDt,text:_Dt,thematicBreak:SDt,toml:bR,yaml:bR,definition:bR,footnoteDefinition:bR};function bR(){}const SDe=-1,uF=0,qC=1,OL=2,HX=3,GX=4,qX=5,WX=6,TDe=7,EDe=8,Ipe=typeof self=="object"?self:globalThis,EDt=(n,e)=>{const t=(i,a)=>(n.set(a,i),i),r=i=>{if(n.has(i))return n.get(i);const[a,o]=e[i];switch(a){case uF:case SDe:return t(o,i);case qC:{const s=t([],i);for(const l of o)s.push(r(l));return s}case OL:{const s=t({},i);for(const[l,c]of o)s[r(l)]=r(c);return s}case HX:return t(new Date(o),i);case GX:{const{source:s,flags:l}=o;return t(new RegExp(s,l),i)}case qX:{const s=t(new Map,i);for(const[l,c]of o)s.set(r(l),r(c));return s}case WX:{const s=t(new Set,i);for(const l of o)s.add(r(l));return s}case TDe:{const{name:s,message:l}=o;return t(new Ipe[s](l),i)}case EDe:return t(BigInt(o),i);case"BigInt":return t(Object(BigInt(o)),i);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return t(new DataView(s),o)}}return t(new Ipe[a](o),i)};return r},Mpe=n=>EDt(new Map,n)(0),SS="",{toString:ADt}={},{keys:kDt}=Object,Pk=n=>{const e=typeof n;if(e!=="object"||!n)return[uF,e];const t=ADt.call(n).slice(8,-1);switch(t){case"Array":return[qC,SS];case"Object":return[OL,SS];case"Date":return[HX,SS];case"RegExp":return[GX,SS];case"Map":return[qX,SS];case"Set":return[WX,SS];case"DataView":return[qC,t]}return t.includes("Array")?[qC,t]:t.includes("Error")?[TDe,t]:[OL,t]},wR=([n,e])=>n===uF&&(e==="function"||e==="symbol"),CDt=(n,e,t,r)=>{const i=(o,s)=>{const l=r.push(o)-1;return t.set(s,l),l},a=o=>{if(t.has(o))return t.get(o);let[s,l]=Pk(o);switch(s){case uF:{let u=o;switch(l){case"bigint":s=EDe,u=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([SDe],o)}return i([s,u],o)}case qC:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],d=i([s,u],o);for(const h of o)u.push(a(h));return d}case OL:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const u=[],d=i([s,u],o);for(const h of kDt(o))(n||!wR(Pk(o[h])))&&u.push([a(h),a(o[h])]);return d}case HX:return i([s,o.toISOString()],o);case GX:{const{source:u,flags:d}=o;return i([s,{source:u,flags:d}],o)}case qX:{const u=[],d=i([s,u],o);for(const[h,f]of o)(n||!(wR(Pk(h))||wR(Pk(f))))&&u.push([a(h),a(f)]);return d}case WX:{const u=[],d=i([s,u],o);for(const h of o)(n||!wR(Pk(h)))&&u.push(a(h));return d}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},Ppe=(n,{json:e,lossy:t}={})=>{const r=[];return CDt(!(e||t),!!e,new Map,r)(n),r},RL=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Mpe(Ppe(n,e)):structuredClone(n):(n,e)=>Mpe(Ppe(n,e));function DDt(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function IDt(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function MDt(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||DDt,r=n.options.footnoteBackLabel||IDt,i=n.options.footnoteLabel||"Footnotes",a=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<n.footnoteOrder.length;){const c=n.footnoteById.get(n.footnoteOrder[l]);if(!c)continue;const u=n.all(c),d=String(c.identifier).toUpperCase(),h=rE(d.toLowerCase());let f=0;const m=[],v=n.footnoteCounts.get(d);for(;v!==void 0&&++f<=v;){m.length>0&&m.push({type:"text",value:" "});let _=typeof t=="string"?t:t(l,f);typeof _=="string"&&(_={type:"text",value:_}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const _=y.children[y.children.length-1];_&&_.type==="text"?_.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:n.wrap(u,!0)};n.patch(c,w),s.push(w)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...RL(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(s,!0)},{type:"text",value:`
`}]}}const ADe=function(n){if(n==null)return NDt;if(typeof n=="function")return dF(n);if(typeof n=="object")return Array.isArray(n)?PDt(n):ODt(n);if(typeof n=="string")return RDt(n);throw new Error("Expected function, string, or object as test")};function PDt(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=ADe(n[t]);return dF(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function ODt(n){const e=n;return dF(t);function t(r){const i=r;let a;for(a in n)if(i[a]!==e[a])return!1;return!0}}function RDt(n){return dF(e);function e(t){return t&&t.type===n}}function dF(n){return e;function e(t,r,i){return!!(LDt(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function NDt(){return!0}function LDt(n){return n!==null&&typeof n=="object"&&"type"in n}const kDe=[],jDt=!0,Ope=!1,FDt="skip";function $Dt(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const a=ADe(i),o=r?-1:1;s(n,void 0,[])();function s(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=kDe,m,v,y;if((!e||a(l,c,u[u.length-1]||void 0))&&(f=BDt(t(l,u)),f[0]===Ope))return f;if("children"in l&&l.children){const w=l;if(w.children&&f[0]!==FDt)for(v=(r?w.children.length:-1)+o,y=u.concat(w);v>-1&&v<w.children.length;){const _=w.children[v];if(m=s(_,v,y)(),m[0]===Ope)return m;v=typeof m[1]=="number"?m[1]:v+o}}return f}}}function BDt(n){return Array.isArray(n)?n:typeof n=="number"?[jDt,n]:n==null?kDe:[n]}function CDe(n,e,t,r){let i,a,o;typeof e=="function"&&typeof t!="function"?(a=void 0,o=e,i=t):(a=e,o=t,i=r),$Dt(n,a,s,i);function s(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const NG={}.hasOwnProperty,UDt={};function VDt(n,e){const t=e||UDt,r=new Map,i=new Map,a=new Map,o={...TDt,...t.handlers},s={all:c,applyData:HDt,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:t,patch:zDt,wrap:qDt};return CDe(n,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),s;function l(u,d){const h=u.type,f=s.handlers[h];if(NG.call(s.handlers,h)&&f)return f(s,u,d);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in u){const{children:v,...y}=u,w=RL(y);return w.children=s.all(u),w}return RL(u)}return(s.options.unknownHandler||GDt)(s,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const m=s.one(h[f],u);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Rpe(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=Rpe(v.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function zDt(n,e){n.position&&(e.position=AAt(n))}function HDt(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,a=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const o="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:o}}t.type==="element"&&a&&Object.assign(t.properties,RL(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function GDt(n,e){const t=e.data||{},r="value"in e&&!(NG.call(t,"hProperties")||NG.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function qDt(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function Rpe(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Npe(n,e){const t=VDt(n,e),r=t.one(n,void 0),i=MDt(t),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function WDt(n,e){return n&&"run"in n?async function(t,r){const i=Npe(t,{file:r,...e});await n.run(i,r)}:function(t,r){return Npe(t,{file:r,...n||e})}}function Lpe(n){if(n)throw n}var iz,jpe;function YDt(){if(jpe)return iz;jpe=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=n.call(c,"constructor"),d=c.constructor&&c.constructor.prototype&&n.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!d)return!1;var h;for(h in c);return typeof h>"u"||n.call(c,h)},o=function(c,u){t&&u.name==="__proto__"?t(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},s=function(c,u){if(u==="__proto__")if(n.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return iz=function l(){var c,u,d,h,f,m,v=arguments[0],y=1,w=arguments.length,_=!1;for(typeof v=="boolean"&&(_=v,v=arguments[1]||{},y=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});y<w;++y)if(c=arguments[y],c!=null)for(u in c)d=s(v,u),h=s(c,u),v!==h&&(_&&h&&(a(h)||(f=i(h)))?(f?(f=!1,m=d&&i(d)?d:[]):m=d&&a(d)?d:{},o(v,{name:u,newValue:l(_,m,h)})):typeof h<"u"&&o(v,{name:u,newValue:h}));return v},iz}var KDt=YDt();const az=kr(KDt);function LG(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function XDt(){const n=[],e={run:t,use:r};return e;function t(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const u=n[++a];let d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?ZDt(u,s)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function ZDt(n,e){let t;return r;function r(...o){const s=n.length>o.length;let l;s&&o.push(i);try{l=n.apply(this,o)}catch(c){const u=c;if(s&&t)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){t||(t=!0,e(o,...s))}function a(o){i(null,o)}}const lf={basename:QDt,dirname:JDt,extname:eIt,join:tIt,sep:"/"};function QDt(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');HM(n);let t=0,r=-1,i=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,s=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(n.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function JDt(n){if(HM(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function eIt(n){HM(n);let e=n.length,t=-1,r=0,i=-1,a=0,o;for(;e--;){const s=n.codePointAt(e);if(s===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),s===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function tIt(...n){let e=-1,t;for(;++e<n.length;)HM(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":nIt(t)}function nIt(n){HM(n);const e=n.codePointAt(0)===47;let t=rIt(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function rIt(n,e){let t="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=n.length;){if(o<n.length)s=n.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,a=0;continue}}else if(t.length>0){t="",r=0,i=o,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return t}function HM(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const iIt={cwd:aIt};function aIt(){return"/"}function jG(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function oIt(n){if(typeof n=="string")n=new URL(n);else if(!jG(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return sIt(n)}function sIt(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const oz=["history","path","basename","stem","extname","dirname"];class DDe{constructor(e){let t;e?jG(e)?t={path:e}:typeof e=="string"||lIt(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":iIt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<oz.length;){const a=oz[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)oz.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?lf.basename(this.path):void 0}set basename(e){lz(e,"basename"),sz(e,"basename"),this.path=lf.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?lf.dirname(this.path):void 0}set dirname(e){Fpe(this.basename,"dirname"),this.path=lf.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?lf.extname(this.path):void 0}set extname(e){if(sz(e,"extname"),Fpe(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lf.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){jG(e)&&(e=oIt(e)),lz(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?lf.basename(this.path,this.extname):void 0}set stem(e){lz(e,"stem"),sz(e,"stem"),this.path=lf.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Us(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function sz(n,e){if(n&&n.includes(lf.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+lf.sep+"`")}function lz(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Fpe(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function lIt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const cIt=function(n){const r=this.constructor.prototype,i=r[n],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},uIt={}.hasOwnProperty;class YX extends cIt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=XDt()}copy(){const e=new YX;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(az(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(dz("data",this.frozen),this.namespace[e]=t,this):uIt.call(this.namespace,e)&&this.namespace[e]||void 0:e?(dz("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=xR(e),r=this.parser||this.Parser;return cz("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),cz("process",this.parser||this.Parser),uz("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,o){const s=xR(e),l=r.parse(s);r.run(l,s,function(u,d,h){if(u||!d||!h)return c(u);const f=d,m=r.stringify(f,h);fIt(m)?h.value=m:h.result=m,c(u,h)});function c(u,d){u||!d?o(u):a?a(d):t(void 0,d)}}}processSync(e){let t=!1,r;return this.freeze(),cz("processSync",this.parser||this.Parser),uz("processSync",this.compiler||this.Compiler),this.process(e,i),Bpe("processSync","process",t),r;function i(a,o){t=!0,Lpe(a),r=o}}run(e,t,r){$pe(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(o,s){const l=xR(t);i.run(e,l,c);function c(u,d,h){const f=d||e;u?s(u):o?o(f):r(void 0,f,h)}}}runSync(e,t){let r=!1,i;return this.run(e,t,a),Bpe("runSync","run",r),i;function a(o,s){Lpe(o),i=s,r=!0}}stringify(e,t){this.freeze();const r=xR(t),i=this.compiler||this.Compiler;return uz("stringify",i),$pe(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(dz("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?s(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=az(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];a(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[f,...m]=u;const v=r[h][1];LG(v)&&LG(f)&&(f=az(!0,v,f)),r[h]=[c,f,...m]}}}}const dIt=new YX().freeze();function cz(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function uz(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function dz(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $pe(n){if(!LG(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Bpe(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function xR(n){return hIt(n)?n:new DDe(n)}function hIt(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function fIt(n){return typeof n=="string"||pIt(n)}function pIt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const gIt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Upe=[],Vpe={allowDangerousHtml:!0},mIt=/^(https?|ircs?|mailto|xmpp)$/i,vIt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yIt(n){const e=bIt(n),t=wIt(n);return xIt(e.runSync(e.parse(t),t),n)}function bIt(n){const e=n.rehypePlugins||Upe,t=n.remarkPlugins||Upe,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Vpe}:Vpe;return dIt().use(QCt).use(t).use(WDt,r).use(e)}function wIt(n){const e=n.children||"",t=new DDe;return typeof e=="string"&&(t.value=e),t}function xIt(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,o=e.skipHtml,s=e.unwrapDisallowed,l=e.urlTransform||_It;for(const u of vIt)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+gIt+u.id,void 0);return e.className&&(n={type:"element",tagName:"div",properties:{className:e.className},children:n.type==="root"?n.children:[n]}),CDe(n,c),MAt(n,{Fragment:x.Fragment,components:i,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in tz)if(Object.hasOwn(tz,f)&&Object.hasOwn(u.properties,f)){const m=u.properties[f],v=tz[f];(v===null||v.includes(u.tagName))&&(u.properties[f]=l(String(m||""),f,u))}}if(u.type==="element"){let f=t?!t.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(u,d,h)),f&&h&&typeof d=="number")return s&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function _It(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||mIt.test(n.slice(0,e))?n:""}const SIt=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>iE);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class KX extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class TIt extends KX{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class EIt extends KX{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AIt extends KX{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FG;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(FG||(FG={}));var kIt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};class CIt{constructor(e,{headers:t={},customFetch:r,region:i=FG.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=SIt(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return kIt(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=t;let s={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(s["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(s["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(s["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),i),body:c}).catch(m=>{throw new TIt(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new EIt(u);if(!u.ok)throw new AIt(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var Ao={},TS={},ES={},AS={},kS={},CS={},DIt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")},bT=DIt();const IIt=bT.fetch,IDe=bT.fetch.bind(bT),MDe=bT.Headers,MIt=bT.Request,PIt=bT.Response,iE=Object.freeze(Object.defineProperty({__proto__:null,Headers:MDe,Request:MIt,Response:PIt,default:IDe,fetch:IIt},Symbol.toStringTag,{value:"Module"})),OIt=nIe(iE);var _R={},zpe;function PDe(){if(zpe)return _R;zpe=1,Object.defineProperty(_R,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return _R.default=n,_R}var Hpe;function ODe(){if(Hpe)return CS;Hpe=1;var n=CS&&CS.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(CS,"__esModule",{value:!0});const e=n(OIt),t=n(PDe());class r{constructor(a){this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=a.headers,this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=a.shouldThrowOnError,this.signal=a.signal,this.isMaybeSingle=a.isMaybeSingle,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=Object.assign({},this.headers),this.headers[a]=o,this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let f=null,m=null,v=null,y=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const C=await c.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=C:m=JSON.parse(C))}const T=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),A=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");T&&A&&A.length>1&&(v=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,v=null,y=406,w="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const T=await c.text();try{f=JSON.parse(T),Array.isArray(f)&&c.status===404&&(m=[],f=null,y=200,w="OK")}catch{c.status===404&&T===""?(y=204,w="No Content"):f={message:T}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,y=200,w="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:m,count:v,status:y,statusText:w}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,o)}returns(){return this}overrideTypes(){return this}}return CS.default=r,CS}var Gpe;function RDe(){if(Gpe)return kS;Gpe=1;var n=kS&&kS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kS,"__esModule",{value:!0});const e=n(ODe());class t extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(s=>/\s/.test(s)&&!a?"":(s==='"'&&(a=!a),s)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const s=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:s=o}={}){const l=typeof s>"u"?"offset":`${s}.offset`,c=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:s=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,a?"verbose":null,o?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return kS.default=t,kS}var qpe;function XX(){if(qpe)return AS;qpe=1;var n=AS&&AS.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(AS,"__esModule",{value:!0});const e=n(RDe());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const s=o?`${o}.or`:"or";return this.url.searchParams.append(s,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return AS.default=t,AS}var Wpe;function NDe(){if(Wpe)return ES;Wpe=1;var n=ES&&ES.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ES,"__esModule",{value:!0});const e=n(XX());class t{constructor(i,{headers:a={},schema:o,fetch:s}){this.url=i,this.headers=a,this.schema=o,this.fetch=s}select(i,{head:a=!1,count:o}={}){const s=a?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:a,defaultToNull:o=!0}={}){const s="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:s,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&u.push(this.headers.Prefer),s&&u.push(`count=${s}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:a}={}){const o="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),a&&s.push(`count=${a}`),this.headers.Prefer=s.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const a="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ES.default=t,ES}var Ok={},Rk={},Ype;function RIt(){return Ype||(Ype=1,Object.defineProperty(Rk,"__esModule",{value:!0}),Rk.version=void 0,Rk.version="0.0.0-automated"),Rk}var Kpe;function NIt(){if(Kpe)return Ok;Kpe=1,Object.defineProperty(Ok,"__esModule",{value:!0}),Ok.DEFAULT_HEADERS=void 0;const n=RIt();return Ok.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Ok}var Xpe;function LIt(){if(Xpe)return TS;Xpe=1;var n=TS&&TS.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TS,"__esModule",{value:!0});const e=n(NDe()),t=n(XX()),r=NIt();class i{constructor(o,{headers:s={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),s),this.schemaName=l,this.fetch=c}from(o){const s=new URL(`${this.url}/${o}`);return new e.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,s={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let f;l||c?(d=l?"HEAD":"GET",Object.entries(s).filter(([v,y])=>y!==void 0).map(([v,y])=>[v,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([v,y])=>{h.searchParams.append(v,y)})):(d="POST",f=s);const m=Object.assign({},this.headers);return u&&(m.Prefer=`count=${u}`),new t.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:this.fetch,allowEmpty:!1})}}return TS.default=i,TS}var Zpe;function jIt(){if(Zpe)return Ao;Zpe=1;var n=Ao&&Ao.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.PostgrestError=Ao.PostgrestBuilder=Ao.PostgrestTransformBuilder=Ao.PostgrestFilterBuilder=Ao.PostgrestQueryBuilder=Ao.PostgrestClient=void 0;const e=n(LIt());Ao.PostgrestClient=e.default;const t=n(NDe());Ao.PostgrestQueryBuilder=t.default;const r=n(XX());Ao.PostgrestFilterBuilder=r.default;const i=n(RDe());Ao.PostgrestTransformBuilder=i.default;const a=n(ODe());Ao.PostgrestBuilder=a.default;const o=n(PDe());return Ao.PostgrestError=o.default,Ao.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Ao}var FIt=jIt();const $It=kr(FIt),{PostgrestClient:BIt,PostgrestQueryBuilder:gOt,PostgrestFilterBuilder:mOt,PostgrestTransformBuilder:vOt,PostgrestBuilder:yOt,PostgrestError:bOt}=$It;let $G;typeof window>"u"?$G=require("ws"):$G=window.WebSocket;const UIt="2.11.10",VIt={"X-Client-Info":`realtime-js/${UIt}`},zIt="1.0.0",LDe=1e4,HIt=1e3;var k1;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(k1||(k1={}));var il;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(il||(il={}));var Hd;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Hd||(Hd={}));var BG;(function(n){n.websocket="websocket"})(BG||(BG={}));var Xb;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Xb||(Xb={}));class GIt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:s,event:l,payload:c}}}class jDe{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Mi;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Mi||(Mi={}));const Qpe=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=qIt(o,n,e,i),a),{})},qIt=(n,e,t,r)=>{const i=e.find(s=>s.name===n),a=i==null?void 0:i.type,o=t[n];return a&&!r.includes(a)?FDe(a,o):UG(o)},FDe=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return XIt(e,t)}switch(n){case Mi.bool:return WIt(e);case Mi.float4:case Mi.float8:case Mi.int2:case Mi.int4:case Mi.int8:case Mi.numeric:case Mi.oid:return YIt(e);case Mi.json:case Mi.jsonb:return KIt(e);case Mi.timestamp:return ZIt(e);case Mi.abstime:case Mi.date:case Mi.daterange:case Mi.int4range:case Mi.int8range:case Mi.money:case Mi.reltime:case Mi.text:case Mi.time:case Mi.timestamptz:case Mi.timetz:case Mi.tsrange:case Mi.tstzrange:return UG(e);default:return UG(e)}},UG=n=>n,WIt=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},YIt=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},KIt=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},XIt=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const o=n.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>FDe(e,s))}return n},ZIt=n=>typeof n=="string"?n.replace(" ","T"):n,$De=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hz{constructor(e,t,r={},i=LDe){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Jpe;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Jpe||(Jpe={}));class WC{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=WC.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=WC.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=WC.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),o=this.transformState(t),s={},l={};return this.map(a,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=a[c];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),m=u.filter(y=>f.indexOf(y.presence_ref)<0),v=d.filter(y=>h.indexOf(y.presence_ref)<0);m.length>0&&(s[c]=m),v.length>0&&(l[c]=v)}else s[c]=u}),this.syncDiff(a,{joins:s,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(s,l)=>{var c;const u=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(l),u.length>0){const d=e[s].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[s].unshift(...h)}r(s,u,l)}),this.map(o,(s,l)=>{let c=e[s];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[s]=c,i(s,c,l),c.length===0&&delete e[s]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ege;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(ege||(ege={}));var tge;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tge||(tge={}));var ag;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ag||(ag={}));class ZX{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=il.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new hz(this,Hd.join,this.params,this.timeout),this.rejoinTimer=new jDe(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=il.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=il.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=il.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=il.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hd.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new WC(this),this.broadcastEndpointURL=$De(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:s}}=this.params;this._onError(u=>e==null?void 0:e(ag.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(ag.CLOSED));const l={},c={broadcast:a,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:s};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(ag.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let v=0;v<f;v++){const y=h[v],{filter:{event:w,schema:_,table:T,filter:A}}=y,C=u&&u[v];if(C&&C.event===w&&C.schema===_&&C.table===T&&C.filter===A)m.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=il.errored,e==null||e(ag.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(ag.SUBSCRIBED);return}}).receive("error",u=>{this.state=il.errored,e==null||e(ag.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ag.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,s,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(o=this.params)===null||o===void 0?void 0:o.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=il.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hd.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new hz(this,Hd.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hz(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const o=e.toLocaleLowerCase(),{close:s,error:l,leave:c,join:u}=Hd;if(r&&[s,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var m,v,y;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(v=f.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var m,v,y,w,_,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,C=(m=f.filter)===null||m===void 0?void 0:m.event;return A&&((v=t.ids)===null||v===void 0?void 0:v.includes(A))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const A=(_=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return A==="*"||A===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:y,commit_timestamp:w,type:_,errors:T}=m;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:w,eventType:_,new:{},old:{},errors:T}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===il.closed}_isJoined(){return this.state===il.joined}_isJoining(){return this.state===il.joining}_isLeaving(){return this.state===il.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ZX.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hd.close,{},e)}_onError(e){this._on(Hd.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=il.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Qpe(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Qpe(e.columns,e.old_record)),t}}const nge=()=>{},QIt=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JIt{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=VIt,this.params={},this.timeout=LDe,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nge,this.ref=0,this.logger=nge,this.conn=null,this.sendBuffer=[],this.serializer=new GIt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...s)=>vr(async()=>{const{default:l}=await Promise.resolve().then(()=>iE);return{default:l}},void 0).then(({default:l})=>l(...s)):o=fetch,(...s)=>o(...s)},this.endPoint=`${e}/${BG.websocket}`,this.httpEndpoint=$De(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,o)=>o(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jDe(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=$G),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new eMt(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zIt}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case k1.connecting:return Xb.Connecting;case k1.open:return Xb.Open;case k1.closing:return Xb.Closing;default:return Xb.Closed}}isConnected(){return this.connectionState()===Xb.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new ZX(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,o=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Hd.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(HIt,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:a,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(s=>s._isMember(r)).forEach(s=>s._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(s=>s(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hd.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([QIt],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class eMt{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=k1.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class QX extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Do(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class tMt extends QX{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class VG extends QX{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var nMt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const BDe=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>iE);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},rMt=()=>nMt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield vr(()=>Promise.resolve().then(()=>iE),void 0)).Response:Response}),zG=n=>{if(Array.isArray(n))return n.map(t=>zG(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=zG(r)}),e};var mx=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const fz=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),iMt=(n,e,t)=>mx(void 0,void 0,void 0,function*(){const r=yield rMt();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new tMt(fz(i),n.status||500))}).catch(i=>{e(new VG(fz(i),i))}):e(new VG(fz(n),n))}),aMt=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function GM(n,e,t,r,i,a){return mx(this,void 0,void 0,function*(){return new Promise((o,s)=>{n(t,aMt(e,r,i,a)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>iMt(l,s,r))})})}function NL(n,e,t,r){return mx(this,void 0,void 0,function*(){return GM(n,"GET",e,t,r)})}function Fv(n,e,t,r,i){return mx(this,void 0,void 0,function*(){return GM(n,"POST",e,r,i,t)})}function oMt(n,e,t,r,i){return mx(this,void 0,void 0,function*(){return GM(n,"PUT",e,r,i,t)})}function sMt(n,e,t,r){return mx(this,void 0,void 0,function*(){return GM(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function UDe(n,e,t,r,i){return mx(this,void 0,void 0,function*(){return GM(n,"DELETE",e,r,i,t)})}var jl=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const lMt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cMt{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=BDe(i)}uploadOrUpdate(e,t,r,i){return jl(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},rge),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:s},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Do(a))return{data:null,error:a};throw a}})}upload(e,t,r){return jl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return jl(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:rge.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(s.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Do(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return jl(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=yield Fv(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),s=o.searchParams.get("token");if(!s)throw new QX("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}update(e,t,r){return jl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return jl(this,void 0,void 0,function*(){try{return{data:yield Fv(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Do(i))return{data:null,error:i};throw i}})}copy(e,t,r){return jl(this,void 0,void 0,function*(){try{return{data:{path:(yield Fv(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Do(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return jl(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Fv(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(Do(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return jl(this,void 0,void 0,function*(){try{const i=yield Fv(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(Do(i))return{data:null,error:i};throw i}})}download(e,t){return jl(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const s=this._getFinalPath(e);return{data:yield(yield NL(this.fetch,`${this.url}/${i}/${s}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(Do(s))return{data:null,error:s};throw s}})}info(e){return jl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield NL(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:zG(r),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}exists(e){return jl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield sMt(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Do(r)&&r instanceof VG){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const s=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}remove(e){return jl(this,void 0,void 0,function*(){try{return{data:yield UDe(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}list(e,t,r){return jl(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},lMt),t),{prefix:e||""});return{data:yield Fv(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Do(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const uMt="2.7.1",dMt={"X-Client-Info":`storage-js/${uMt}`};var DS=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,[])).next())})};class hMt{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},dMt),t),this.fetch=BDe(r)}listBuckets(){return DS(this,void 0,void 0,function*(){try{return{data:yield NL(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Do(e))return{data:null,error:e};throw e}})}getBucket(e){return DS(this,void 0,void 0,function*(){try{return{data:yield NL(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return DS(this,void 0,void 0,function*(){try{return{data:yield Fv(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return DS(this,void 0,void 0,function*(){try{return{data:yield oMt(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Do(r))return{data:null,error:r};throw r}})}emptyBucket(e){return DS(this,void 0,void 0,function*(){try{return{data:yield Fv(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}deleteBucket(e){return DS(this,void 0,void 0,function*(){try{return{data:yield UDe(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Do(t))return{data:null,error:t};throw t}})}}class fMt extends hMt{constructor(e,t={},r){super(e,t,r)}from(e){return new cMt(this.url,this.headers,e,this.fetch)}}const pMt="2.50.0";let uC="";typeof Deno<"u"?uC="deno":typeof document<"u"?uC="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uC="react-native":uC="node";const gMt={"X-Client-Info":`supabase-js-${uC}/${pMt}`},mMt={headers:gMt},vMt={schema:"public"},yMt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bMt={};var wMt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,e||[])).next())})};const xMt=n=>{let e;return n?e=n:typeof fetch>"u"?e=IDe:e=fetch,(...t)=>e(...t)},_Mt=()=>typeof Headers>"u"?MDe:Headers,SMt=(n,e,t)=>{const r=xMt(t),i=_Mt();return(a,o)=>wMt(void 0,void 0,void 0,function*(){var s;const l=(s=yield e())!==null&&s!==void 0?s:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:c}))})};var TMt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,[])).next())})};function EMt(n){return n.endsWith("/")?n:n+"/"}function AMt(n,e){var t,r;const{db:i,auth:a,realtime:o,global:s}=n,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>TMt(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}const VDe="2.70.0",HS=30*1e3,HG=3,pz=HG*HS,kMt="http://localhost:9999",CMt="supabase.auth.token",DMt={"X-Client-Info":`gotrue-js/${VDe}`},GG="X-Supabase-Api-Version",zDe={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IMt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,MMt=6e5;class JX extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Vn(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class PMt extends JX{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function OMt(n){return Vn(n)&&n.name==="AuthApiError"}class HDe extends JX{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Uy extends JX{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Rv extends Uy{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RMt(n){return Vn(n)&&n.name==="AuthSessionMissingError"}class SR extends Uy{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class TR extends Uy{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ER extends Uy{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NMt(n){return Vn(n)&&n.name==="AuthImplicitGrantRedirectError"}class ige extends Uy{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qG extends Uy{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function gz(n){return Vn(n)&&n.name==="AuthRetryableFetchError"}class age extends Uy{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class YC extends Uy{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const LL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oge=` 	
\r=`.split(""),LMt=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<oge.length;e+=1)n[oge[e].charCodeAt(0)]=-2;for(let e=0;e<LL.length;e+=1)n[LL[e].charCodeAt(0)]=e;return n})();function sge(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(LL[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(LL[r]),e.queuedBits-=6}}function GDe(n,e,t){const r=LMt[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function lge(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{$Mt(o,r,t)};for(let o=0;o<n.length;o+=1)GDe(n.charCodeAt(o),i,a);return e.join("")}function jMt(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function FMt(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}jMt(r,e)}}function $Mt(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function BMt(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)GDe(n.charCodeAt(i),t,r);return new Uint8Array(e)}function UMt(n){const e=[];return FMt(n,t=>e.push(t)),new Uint8Array(e)}function VMt(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>sge(i,t,r)),sge(null,t,r),e.join("")}function zMt(n){return Math.round(Date.now()/1e3)+n}function HMt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Nd=()=>typeof window<"u"&&typeof document<"u",Pb={tested:!1,writable:!1},KC=()=>{if(!Nd())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pb.tested)return Pb.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Pb.tested=!0,Pb.writable=!0}catch{Pb.tested=!0,Pb.writable=!1}return Pb.writable};function GMt(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const qDe=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>vr(async()=>{const{default:r}=await Promise.resolve().then(()=>iE);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},qMt=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",WDe=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},AR=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},kR=async(n,e)=>{await n.removeItem(e)};class hF{constructor(){this.promise=new hF.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}hF.promiseConstructor=Promise;function mz(n){const e=n.split(".");if(e.length!==3)throw new YC("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!IMt.test(e[r]))throw new YC("JWT not in base64url format");return{header:JSON.parse(lge(e[0])),payload:JSON.parse(lge(e[1])),signature:BMt(e[2]),raw:{header:e[0],payload:e[1]}}}async function WMt(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function YMt(n,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await n(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function KMt(n){return("0"+n.toString(16)).substr(-2)}function XMt(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,KMt).join("")}async function ZMt(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function QMt(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await ZMt(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function IS(n,e,t=!1){const r=XMt();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await WDe(n,`${e}-code-verifier`,i);const a=await QMt(r);return[a,r===a?"plain":"s256"]}const JMt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ePt(n){const e=n.headers.get(GG);if(!e||!e.match(JMt))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function tPt(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function nPt(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rPt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function MS(n){if(!rPt.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var iPt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const zb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),aPt=[502,503,504];async function cge(n){var e;if(!qMt(n))throw new qG(zb(n),0);if(aPt.includes(n.status))throw new qG(zb(n),n.status);let t;try{t=await n.json()}catch(a){throw new HDe(zb(a),a)}let r;const i=ePt(n);if(i&&i.getTime()>=zDe["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new age(zb(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Rv}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new age(zb(t),n.status,t.weak_password.reasons);throw new PMt(zb(t),n.status||500,r)}const oPt=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function ur(n,e,t,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[GG]||(a[GG]=zDe["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await sPt(n,e,t+s,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function sPt(n,e,t,r,i,a){const o=oPt(e,r,i,a);let s;try{s=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new qG(zb(l),0)}if(s.ok||await cge(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await cge(l)}}function ng(n){var e;let t=null;dPt(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=zMt(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function uge(n){const e=ng(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Uv(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function lPt(n){return{data:n,error:null}}function cPt(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=n,o=iPt(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:s,user:l},error:null}}function uPt(n){return n}function dPt(n){return n.access_token&&n.refresh_token&&n.expires_in}const vz=["global","local","others"];var hPt=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class fPt{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=qDe(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=vz[0]){if(vz.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vz.join(", ")}`);try{return await ur(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Vn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ur(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Uv})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=hPt(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ur(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:cPt,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Vn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ur(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Uv})}catch(t){if(Vn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,o,s,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ur(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:uPt});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Vn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){MS(e);try{return await ur(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Uv})}catch(t){if(Vn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){MS(e);try{return await ur(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Uv})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){MS(e);try{return await ur(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Uv})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){MS(e.userId);try{const{data:t,error:r}=await ur(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Vn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){MS(e.userId),MS(e.id);try{return{data:await ur(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Vn(t))return{data:null,error:t};throw t}}}const pPt={getItem:n=>KC()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{KC()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{KC()&&globalThis.localStorage.removeItem(n)}};function dge(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function gPt(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const PS={debug:!!(globalThis&&KC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class YDe extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mPt extends YDe{}async function vPt(n,e,t){PS.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),PS.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){PS.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{PS.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw PS.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new mPt(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(PS.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}gPt();const yPt={url:kMt,storageKey:CMt,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DMt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hge(n,e,t){return await t()}class PI{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=PI.nextInstanceID,PI.nextInstanceID+=1,this.instanceID>0&&Nd()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},yPt),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fPt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qDe(i.fetch),this.lock=i.lock||hge,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Nd()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=vPt:this.lock=hge,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:KC()?this.storage=pPt:(this.memoryStorage={},this.storage=dge(this.memoryStorage)):(this.memoryStorage={},this.storage=dge(this.memoryStorage)),Nd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${VDe}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=GMt(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Nd()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),NMt(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Vn(t)?{error:t}:{error:new HDe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ng}),{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(Vn(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await IS(this.storage,this.storageKey)),a=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:ng})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ng})}else throw new TR("You must provide either an email or phone number and a password");const{data:o,error:s}=a;if(s||!o)return{data:{user:null,session:null},error:s};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(Vn(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:s}=e;t=await ur(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:uge})}else if("phone"in e){const{phone:a,password:o,options:s}=e;t=await ur(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:uge})}else throw new TR("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new SR}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Vn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,a,o,s,l,c,u,d,h,f;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:_,options:T}=e;let A;if(Nd())if(typeof w=="object")A=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))A=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=w}const C=new URL((t=T==null?void 0:T.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in A&&A.signIn){const k=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),_?{statement:_}:null));let M;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")M=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)M=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)m=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),v=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${C.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=T==null?void 0:T.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((s=T==null?void 0:T.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((d=(u=T==null?void 0:T.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...T.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const k=await A.signMessage(new TextEncoder().encode(m),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:y,error:w}=await ur(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:VMt(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ng});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new SR}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(Vn(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await AR(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:o}=await ur(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ng});if(await kR(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new SR}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Vn(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:o}=e,s=await ur(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ng}),{data:l,error:c}=s;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new SR}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Vn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,o;try{if("email"in e){const{email:s,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await IS(this.storage,this.storageKey));const{error:d}=await ur(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:u}=await ur(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new TR("You must provide either an email or phone number.")}catch(s){if(Vn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:s}=await ur(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:ng});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Vn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await IS(this.storage,this.storageKey)),await ur(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:lPt})}catch(a){if(Vn(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Rv;const{error:i}=await ur(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Vn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:o}=await ur(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:o,error:s}=await ur(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:s}}throw new TR("You must provide either an email or phone number and a type")}catch(t){if(Vn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await AR(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pz:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ur(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Uv}):await this._useSession(async t=>{var r,i,a;const{data:o,error:s}=t;if(s)throw s;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rv}:await ur(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Uv})})}catch(t){if(Vn(t))return RMt(t)&&(await this._removeSession(),await kR(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Rv;const o=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await IS(this.storage,this.storageKey));const{data:c,error:u}=await ur(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:o.access_token,xform:Uv});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rv;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:o}=mz(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(Vn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:s}=t;if(s)throw s;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Rv;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Vn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Nd())throw new ER("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ER(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ige("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ER("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ige("No code detected.");const{data:_,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:s,expires_at:l,token_type:c}=e;if(!a||!s||!o||!c)throw new ER("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=HS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:v,error:y}=await this._getUser(a);if(y)throw y;const w={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(Vn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await AR(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:s}=await this.admin.signOut(o,e);if(s&&!(OMt(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return e!=="others"&&(await this._removeSession(),await kR(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=HMt(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await IS(this.storage,this.storageKey,!0));try{return await ur(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(Vn(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Vn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var o,s,l,c,u;const{data:d,error:h}=a;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ur(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Nd()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Vn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)throw o;return await ur(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Vn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await YMt(async i=>(i>0&&await WMt(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await ur(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ng})),(i,a)=>{const o=200*Math.pow(2,i);return a&&gz(a)&&Date.now()+o-r<HS})}catch(r){if(this._debug(t,"error",r),Vn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Nd()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await AR(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pz;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${pz}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),gz(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Rv;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new hF;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Rv;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const s={session:a.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(a){if(this._debug(i,"error",a),Vn(a)){const o={session:null,error:a};return gz(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let s=0;s<a.length;s+=1)console.error(a[s]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await WDe(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await kR(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nd()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),HS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/HS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${HS}ms, refresh threshold is ${HG} ticks`),i<=HG&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof YDe)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nd()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await IS(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await ur(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Vn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ur(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Vn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:s}=await ur(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(t){if(Vn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await ur(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Vn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mz(i.access_token);let s=null;o.aal&&(s=o.aal);let l=s;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+MMt>Date.now()))return r;const{data:i,error:a}=await ur(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new YC("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new YC("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:s,payload:l}}=mz(r);if(tPt(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const c=nPt(i.alg),u=await this.fetchJwk(i.kid,t),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,UMt(`${s}.${l}`)))throw new YC("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(Vn(r))return{data:null,error:r};throw r}}}PI.nextInstanceID=0;const bPt=PI;class wPt extends bPt{constructor(e){super(e)}}var xPt=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(n,[])).next())})};class _Pt{constructor(e,t,r){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=EMt(e),l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:vMt,realtime:bMt,auth:Object.assign(Object.assign({},yMt),{storageKey:c}),global:mMt},d=AMt(r??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=SMt(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new BIt(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new CIt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fMt(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xPt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:a,flowType:o,lock:s,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wPt({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:s,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new JIt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SPt=(n,e,t)=>new _Pt(n,e,t),jL="https://ccxhdmyfmfwincvzqjhg.supabase.co",FL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNjeGhkbXlmbWZ3aW5jdnpxamhnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIxNDAyMzIsImV4cCI6MjA1NzcxNjIzMn0.nf8fOFwXcFayteHi-HOhcxiHw4aLE7oOtWv8HeQAYjU";if(jL.includes("your_supabase_project_url_here")||FL.includes("your_supabase_anon_key_here")){const n=`Missing or invalid Supabase environment variables:
    - VITE_SUPABASE_URL: ${jL.includes("your_supabase_project_url_here")?"❌ Placeholder value":"✅"}
    - VITE_SUPABASE_ANON_KEY: ${FL.includes("your_supabase_anon_key_here")?"❌ Placeholder value":"✅"}
    
    For production: Add these as GitHub repository secrets
    For development: Create a .env file in project root with these values`;console.warn("⚠️ Supabase Configuration Warning:",n),console.log("🔧 App will continue without Supabase features until configuration is complete")}const TPt=jL.includes("your_supabase_project_url_here")||FL.includes("your_supabase_anon_key_here")?null:SPt(jL,FL,{auth:{persistSession:!1}}),St=TPt,EPt=Object.freeze(Object.defineProperty({__proto__:null,supabase:St},Symbol.toStringTag,{value:"Module"}));class Bl{static generateSessionText(e,t,r){const i=e.startTime?new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Unknown time",a=Math.round(e.duration||0),o=e.sessionType||"work session";let s=`User completed ${a}-minute ${o} on '${t.title}' task from '${r.name}' project at ${i}.`;if(e.status&&(s+=` Session status: ${e.status}.`),t.timeEstimated){const l=Math.round(t.timeSpent/t.timeEstimated*100);s+=` Task progress: ${l}% (${Math.round(t.timeSpent)}/${t.timeEstimated} minutes).`}return e.notes&&(s+=` Session notes: ${e.notes}`),s+=` Task category: ${this.determineTaskCategory(t,r)}.`,s+=` Environment: ${this.getTimeContext(e.startTime)}.`,s}static generateTaskAggregateText(e,t,r){const i=Math.round(e.timeSpent||0),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(i/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has accumulated ${i} minutes across ${a} work sessions.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`),l+=` Current status: ${e.completed?"Completed":"In Progress"}.`;const c=new Date,u=e;if(e.createdAt){const d=new Date(e.createdAt);l+=` Created: ${this.formatRelativeDate(d,c)}.`}if(u.scheduledDate){const d=new Date(u.scheduledDate);let h=` Scheduled: ${this.formatRelativeDate(d,c)}`;u.scheduledStartTime&&u.scheduledEndTime&&(h+=` from ${u.scheduledStartTime} to ${u.scheduledEndTime}`),l+=h+"."}if(u.dueDate&&!u.scheduledDate){const d=new Date(u.dueDate);l+=` Due: ${this.formatDueDate(d,c)}.`}if(u.priority&&(l+=` Priority: ${u.priority}.`),e.updatedAt){const d=new Date(e.updatedAt);l+=` Last updated: ${this.formatRelativeDate(d,c)}.`}if(e.description&&(l+=` Task description: ${e.description}`),a>0){const d=this.analyzeWorkPattern(t);l+=` Time investment pattern: ${d}.`}return l}static generateProjectSummaryText(e,t,r){const i=t.length;if(i===0)return`Project "${e.name}" is newly created with no tasks yet.`;const a=t.filter(T=>T.status==="todo"||!T.completed&&T.status!=="pomodoro"),o=t.filter(T=>T.status==="pomodoro"),s=t.filter(T=>T.completed||T.status==="completed"),l=Math.round(t.reduce((T,A)=>T+(A.timeSpent||0),0)),c=r.length,u=this.calculateProjectAge(e,t);let d=0;a.length>0&&d++,o.length>0&&d++,s.length>0&&d++;let h=`Project "${e.name}" created ${u}, containing ${i} tasks across ${d} status.`;h+=`

`,h+=`TO-DO LIST STATUS (${a.length} tasks):
`,a.length>0?this.prioritizeTasksForDisplay(a,a.length).forEach(A=>{const C=A.timeEstimated?`estimated ${A.timeEstimated} min`:"no estimate",k=this.inferTaskPriority(A),M=this.getTaskDueInfo(A);h+=`- "${A.title}" (${C}, priority: ${k}${M})
`}):h+=`- No tasks in to-do list
`,h+=`
`,h+=`IN POMODORO STATUS (${o.length} tasks):
`,o.length>0?o.forEach(T=>{const A=T.timeEstimated?`${T.timeSpent}/${T.timeEstimated} min completed, ${Math.round(T.timeSpent/T.timeEstimated*100)}% progress`:`${T.timeSpent} min invested`,C=r.filter(M=>M.taskId===T.id).length,k=this.analyzeTaskWorkPattern(T,r);h+=`- "${T.title}" (${A}, ${C} sessions, ${k})
`}):h+=`- No tasks currently in pomodoro
`,h+=`
`,h+=`COMPLETED STATUS (${s.length} tasks):
`,s.length>0?this.getRecentCompletedTasks(s,s.length).forEach(A=>{const C=A.timeSpent?`${A.timeSpent} min`:"no time logged",k=this.getCompletionTimeframe(A);h+=`- "${A.title}" (${C}, completed ${k})
`}):h+=`- No completed tasks yet
`,h+=`
`,Math.round(s.length/i*100);const f=c>0?Math.round(r.reduce((T,A)=>T+(A.duration||0),0)/c):0,m=this.calculateTimeEstimationAccuracy(s),v=this.analyzeProjectMomentum(r),y=this.findPeakProductivityPattern(r),w=this.calculateTaskVelocity(s,u);h+=`PROJECT ANALYTICS: Total ${l} minutes invested across ${c} work sessions over ${this.getProjectDuration(t,r)}. `,h+=`Average session duration: ${f} minutes. `,h+=`Completion velocity: ${w.current} tasks per week${w.target?` (${w.comparison} target of ${w.target})`:""}. `,h+=`Time estimation accuracy: ${m}%. `,h+=`Peak productivity: ${y}. `,h+=`Current momentum: ${v}.`;const _=this.identifyProjectRisks(t,r,o);return _.length>0&&(h+=`

RISK INDICATORS: ${_.join(". ")}.`),e.description&&(h+=`

Project description: ${e.description}`),h}static generateTemporalSummaryText(e,t,r,i=[],a=[]){if(e==="weekly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateWeeklySummary(s,l,c,o)}else if(e==="monthly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateMonthlySummary(s,l,c,o)}else return this.generateDailySummaryText(t,r,i,a)}static generateDailySummaryText(e,t,r,i){const a=e.reduce((l,c)=>l+(c.duration||0),0),o=e.length;let s=`DAILY PRODUCTIVITY SUMMARY: ${new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}

`;return s+=`OVERVIEW: ${a} minutes of productive work across ${o} work sessions. `,s+=`Worked on ${i.length} projects, ${r.length} tasks. `,s+=`Created ${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length} new task${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length>1?"s":""} today.

`,s+=this.generateProjectSummary(e,r,i,a),s+=this.generateTaskSummary(e,r,i),s+=this.generateMetricsAndInsights(e,a,o),s}static generateWeeklySummary(e,t,r,i=jg(new Date)){const a=LW(i),s=O2({start:i,end:a}).map(_=>mn(_,"EEE do")).join(", "),l=r.filter(_=>{let T=this.safeToDate(_.date||_.startTime);return T?T>=i&&T<=a:(console.warn("Invalid session date, skipping:",{sessionId:_.id,date:_.date,startTime:_.startTime,userId:_.userId}),!1)});console.log(`📊 Weekly filter stats for week ${mn(i,"yyyy-MM-dd")} to ${mn(a,"yyyy-MM-dd")}:`,{totalSessions:r.length,filteredSessions:l.length,weekStart:i.toISOString(),weekEnd:a.toISOString()});const c=l.reduce((_,T)=>_+(T.duration||0),0),u=e.filter(_=>{const T=this.safeToDate(_.updatedAt);return _.completed&&T&&T>=i&&T<=a}),d=e.filter(_=>{const T=this.safeToDate(_.createdAt);return T&&T>=i&&T<=a}),h=t.map(_=>this.calculateProjectProgress(_,e,l,i,a,c)).sort((_,T)=>T.totalDuration-_.totalDuration).filter(_=>_.totalDuration>0);let f=`WEEKLY PRODUCTIVITY SUMMARY: Week of ${mn(i,"MMMM d")}-${mn(a,"d")}, ${mn(i,"yyyy")} (${s})

`;const m=Math.floor(c/60),v=c%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`;f+=`OVERVIEW: ${y} total productive time across ${l.length} work sessions. `,f+=`Worked on ${h.length} projects, ${e.length} tasks. `,f+=`Completed ${u.length} tasks, created ${d.length} new tasks this week.

`,f+=`TOP PROJECTS BY TIME INVESTMENT:

`,h.forEach((_,T)=>{const A=Math.floor(_.totalDuration/60),C=_.totalDuration%60,k=A>0?`${A}h ${C}m`:`${C}m`;f+=`${T+1}. "${_.project.name}" - ${k} (${_.percentageOfWeek.toFixed(1)}% of week)
`,f+=`└─ ${this.formatDailyDistribution(_.dailyWork)}
`,_.tasks.sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0).forEach(M=>{const P=Math.floor(M.totalDuration/60),O=M.totalDuration%60,j=P>0?`${P}h ${O}m`:`${O}m`;f+=`└─ "${M.task.title}" (time spent: ${j})
`})}),f+=`
`,f+=`TOP TASKS BY TIME SPENT:

`;const w=h.flatMap(_=>_.tasks).sort((_,T)=>T.totalDuration-_.totalDuration).filter(_=>_.totalDuration>0);return w.forEach((_,T)=>{const A=t.find(O=>O.id===_.task.projectId);if(!A)return;const C=Math.floor(_.totalDuration/60),k=_.totalDuration%60,M=C>0?`${C}h ${k}m`:`${k}m`;f+=`${T+1}. "${_.task.title}" - ${M} (${A.name} project)
`,f+="└─ Progress: ",_.task.timeEstimated>0?f+=`${_.totalDuration}/${_.task.timeEstimated} estimated minutes (${Math.round(_.progress)}% complete)${_.isCompleted?" ✅":""}
`:f+=`No time estimate set${_.isCompleted?" ✅":""}
`,f+=`└─ Created: ${mn(_.createdDate,"MMMM d, yyyy")}
`,_.isCompleted&&_.completedDate&&(f+=`└─ Completed: ${mn(_.completedDate,"MMMM d, yyyy")}
`);const P=_.dailyWork.filter(O=>O.duration>0).map(O=>`${mn(O.date,"EEE")}(${O.duration}m)`).join(", ");f+=`└─ Daily work: ${P||"No work recorded"}
`}),f+=this.generateWeeklyAnalytics(l,w,h,i,a),f+=this.generateWeeklyPatterns(l,h,i,a),f+=this.generateMomentumIndicators(w,h,l),f}static generateMonthlySummary(e,t,r,i=new Date(new Date().getFullYear(),new Date().getMonth(),1)){const a=i.getFullYear(),o=i.getMonth(),s=new Date(a,o+1,0),l=mn(i,"MMMM yyyy"),c=`${mn(i,"MMMM d")}-${mn(s,"d")}, ${mn(i,"yyyy")}`,u=r.filter(M=>{let P=this.safeToDate(M.date||M.startTime);return P&&P>=i&&P<=s}),d=e.filter(M=>u.some(O=>O.taskId===M.id)),h=t.filter(M=>d.some(P=>P.projectId===M.id));console.log(`📊 Monthly summary stats for ${l}:`,{sessions:u.length,tasks:d.length,projects:h.length});const f=u.reduce((M,P)=>M+(P.duration||0),0),m=Math.floor(f/60),v=f%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`,w=d.filter(M=>M.completed),_=d.filter(M=>{const P=this.safeToDate(M.createdAt);return P&&P>=i&&P<=s}),T=h.filter(M=>{const P=this.safeToDate(M.createdAt);return P&&P>=i&&P<=s}),A=h.map(M=>this.calculateMonthlyProjectProgress(M,d,u,i,s,f)).sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0);let C=`MONTHLY PRODUCTIVITY SUMMARY: ${c}

`;if(C+=`OVERVIEW: ${y} total productive time across ${u.length} work sessions. `,C+=`Worked on ${h.length} projects, ${d.length} tasks. `,C+=`Completed ${w.length} tasks, created ${_.length} new tasks`,T.length>0&&(C+=`, ${T.length} new projects`),C+=` this month.

`,C+=`TOP PROJECTS BY TIME INVESTMENT:

`,A.forEach((M,P)=>{const O=Math.floor(M.totalDuration/60),j=M.totalDuration%60,L=O>0?`${O}h ${j}m`:`${j}m`;C+=`${P+1}. "${M.project.name}" - ${L} (${M.percentageOfMonth.toFixed(0)}% of month)
`,C+=`└─ ${this.formatWeeklyDistribution(M.weeklyWork,i)}
`,M.tasks.sort((B,$)=>$.totalDuration-B.totalDuration).filter(B=>B.totalDuration>0).slice(0,6).forEach(B=>{const $=B.totalDuration;C+=`└─ "${B.task.title}" (time spent: ${$}m)
`})}),d.some(M=>!M.projectId||!h.find(P=>P.id===M.projectId))){const M=d.filter(O=>!O.projectId||!h.find(j=>j.id===O.projectId)),P=u.filter(O=>M.some(j=>j.id===O.taskId)).reduce((O,j)=>O+(j.duration||0),0);if(P>0){const O=Math.floor(P/60),j=P%60,L=O>0?`${O}h ${j}m`:`${j}m`,B=(P/f*100).toFixed(0);C+=`${A.length+1}. Unassigned Tasks - ${L} (${B}% of month)
`,C+=`└─ ${this.formatWeeklyDistribution(this.calculateWeeklyWork(u.filter($=>M.some(Y=>Y.id===$.taskId)),i,s),i)}
`,M.sort(($,Y)=>{const G=u.filter(X=>X.taskId===$.id).reduce((X,te)=>X+(te.duration||0),0);return u.filter(X=>X.taskId===Y.id).reduce((X,te)=>X+(te.duration||0),0)-G}).slice(0,3).forEach($=>{const Y=u.filter(G=>G.taskId===$.id).reduce((G,W)=>G+(W.duration||0),0);Y>0&&(C+=`└─ "${$.title}" (time spent: ${Y}m)
`)})}}C+=`
`,C+=`TOP TASKS BY TIME SPENT (MONTH):

`;const k=A.flatMap(M=>M.tasks).sort((M,P)=>P.totalDuration-M.totalDuration).filter(M=>M.totalDuration>0).slice(0,12);return k.forEach((M,P)=>{const O=h.find(B=>B.id===M.task.projectId),j=(O==null?void 0:O.name)||"Unassigned";if(C+=`${P+1}. "${M.task.title}" - ${M.totalDuration}m (${j} project)
`,M.task.timeEstimated>0){const B=Math.round(M.totalDuration/M.task.timeEstimated*100);C+=`└─ Progress: ${M.isCompleted?"Completed ✅":`${B}% complete`} (${M.totalDuration}/${M.task.timeEstimated} estimated minutes)
`}else C+=`└─ Progress: ${M.isCompleted?"Completed ✅":"In progress"} (No time estimate set)
`;C+=`└─ Created: ${mn(M.createdDate,"MMMM d, yyyy")}
`,M.isCompleted&&M.completedDate&&(C+=`└─ Completed: ${mn(M.completedDate,"MMMM d, yyyy")}
`);const L=this.formatWeeklyWorkDistribution(M.weeklyWork,i);C+=`└─ Weekly work: ${L}
`}),C+=`
`,C+=this.generateMonthlyAnalytics(u,k,A,i,s),C+=this.generateMonthlyPatterns(u,A,k,i,s),C+=this.generateMonthlyAchievements(w,_,T,A),C+=this.generateMonthlyRecommendations(u,k,A,d),C}static generateTaskSessionSummaryText(e,t,r){const i=Math.round(t.reduce((m,v)=>m+(v.duration||0),0)),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(e.timeSpent/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has been worked on across ${a} sessions, totaling ${i} minutes.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`);const c=this.analyzeWorkPattern(t);l+=` Work pattern: ${c}.`;const u=this.findPeakProductivityHour(t);u&&(l+=` Most productive time for this task: ${u}.`);const d=t.map(m=>{try{let v=m.date||"";if(typeof v=="string"&&v.includes("_")&&(v=v.split("_")[0]),typeof v=="string"){const w=v.match(/(\d{4}-\d{2}-\d{2})/);w&&(v=w[1])}return(this.safeToDate(v)||(m.startTime?this.safeToDate(m.startTime):null)||new Date).toDateString()}catch(v){return console.warn("Error parsing session date for distribution analysis:",m,v),new Date().toDateString()}}),h=new Set(d).size;h>1&&(l+=` Worked on across ${h} different days.`);const f=t.filter(m=>m.notes&&m.notes.trim().length>0);if(f.length>0){const m=f.map(v=>v.notes).join(" ");l+=` Session insights: ${m}`}return l+=` Current status: ${e.completed?"Completed":"In Progress"}.`,e.description&&(l+=` Task description: ${e.description}`),l}static determineTaskCategory(e,t){return e.title.toLowerCase().includes("bug")||e.title.toLowerCase().includes("fix")?"Bug Fix":e.title.toLowerCase().includes("feature")||e.title.toLowerCase().includes("implement")?"Feature Development":e.title.toLowerCase().includes("test")||e.title.toLowerCase().includes("testing")?"Testing":t.name||"General"}static analyzeWorkPattern(e){if(e.length<2)return"limited session data";const t=e.map(i=>i.duration||0),r=t.reduce((i,a)=>i+a,0)/t.length;return r>30?"sustained long-form focus sessions":r<15?"frequent short burst sessions":"balanced work session rhythm"}static extractKeyCategories(e,t){const r=new Set;return e.forEach(i=>{i.title.toLowerCase().includes("bug")&&r.add("Bug Fixes"),i.title.toLowerCase().includes("feature")&&r.add("Features"),i.title.toLowerCase().includes("test")&&r.add("Testing"),i.title.toLowerCase().includes("design")&&r.add("Design")}),r.size===0&&r.add(t.name),Array.from(r).slice(0,3)}static analyzeProjectMomentum(e){if(e.length<3)return"insufficient data for momentum analysis";const t=e.filter(o=>o.startTime).sort((o,s)=>new Date(o.startTime).getTime()-new Date(s.startTime).getTime());if(t.length<3)return"consistent activity";const i=t.slice(-3).reduce((o,s)=>o+(s.duration||0),0)/3,a=t.slice(0,-3).reduce((o,s)=>o+(s.duration||0),0)/Math.max(1,t.length-3);return i>a*1.2?"accelerating momentum":i<a*.8?"declining momentum":"steady momentum"}static findPeakProductivityHour(e){if(!e.length)return null;const t=new Map;if(e.forEach(i=>{if(i.startTime){const a=new Date(i.startTime).getHours();t.set(a,(t.get(a)||0)+(i.duration||0))}}),t.size===0)return null;const r=Array.from(t.entries()).reduce((i,[a,o])=>o>(t.get(i)||0)?a:i,0);return`${r}:00-${r+1}:00`}static analyzeTemporalPattern(e){if(!e.length)return"No sessions recorded";const t=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=5&&o<12}).length,r=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=12&&o<17}).length,i=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static assessFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static getTimeContext(e){if(!e)return"standard workspace";const t=new Date(e).getHours();return t<6?"late night focused environment":t<12?"morning productivity environment":t<17?"afternoon work environment":t<22?"evening work environment":"night work environment"}static formatRelativeDate(e,t=new Date){return e.toLocaleDateString()}static formatDueDate(e,t=new Date){const r=Math.floor((e.getTime()-t.getTime())/864e5),i=e.toLocaleDateString();return r<0?`${i} - OVERDUE`:i}static calculateProjectAge(e,t){if(t.length===0)return"recently";const r=t.reduce((a,o)=>new Date(o.createdAt)<new Date(a.createdAt)?o:a);return`on ${new Date(r.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static getTaskCategoryCount(e){const t=new Set;return e.forEach(r=>{r.title.toLowerCase().includes("bug")||r.title.toLowerCase().includes("fix")?t.add("Bug Fixes"):r.title.toLowerCase().includes("feature")||r.title.toLowerCase().includes("implement")?t.add("Features"):r.title.toLowerCase().includes("test")||r.title.toLowerCase().includes("testing")?t.add("Testing"):r.title.toLowerCase().includes("design")?t.add("Design"):t.add("General")}),t.size}static prioritizeTasksForDisplay(e,t){return e.sort((r,i)=>{const a=r.timeEstimated||0,o=i.timeEstimated||0;return a!==o?o-a:new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime()}).slice(0,t)}static inferTaskPriority(e){return e.timeEstimated?e.timeEstimated>300?"high":e.timeEstimated>120?"medium":"low":"low"}static getTaskDueInfo(e){return""}static analyzeTaskWorkPattern(e,t){const r=t.filter(a=>a.taskId===e.id);if(r.length===0)return"no sessions yet";const i=r.reduce((a,o)=>a+(o.duration||0),0)/r.length;return i>30?"sustained focus sessions":i<15?"short burst sessions":"balanced work rhythm"}static getRecentCompletedTasks(e,t){return e.sort((r,i)=>new Date(i.updatedAt||i.createdAt).getTime()-new Date(r.updatedAt||r.createdAt).getTime()).slice(0,t)}static getCompletionTimeframe(e){return`on ${new Date(e.updatedAt||e.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static calculateTimeEstimationAccuracy(e){const t=e.filter(i=>i.timeEstimated&&i.timeEstimated>0);if(t.length===0)return 0;const r=t.reduce((i,a)=>{const o=Math.min(a.timeSpent/a.timeEstimated,a.timeEstimated/a.timeSpent)*100;return i+o},0);return Math.round(r/t.length)}static findPeakProductivityPattern(e){if(e.length===0)return"no data available";const t={},r={};e.forEach(u=>{if(u.startTime){const d=new Date(u.startTime),h=d.getDay(),f=d.getHours();t[h]=(t[h]||0)+(u.duration||0),r[f]=(r[f]||0)+(u.duration||0)}});const i=Object.entries(t).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),a=Object.entries(r).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(i[0])],c=parseInt(a[0])>=12?"afternoon":"morning";return`${s} ${c}s`}static calculateTaskVelocity(e,t){if(e.length===0)return{current:0};const r=t.match(/(\d+)\s+weeks?/),i=r?parseInt(r[1]):1,a=Number((e.length/i).toFixed(1)),o=2.5;let s="below";return a>=o&&(s="meeting"),a>o*1.1&&(s="exceeding"),{current:a,target:o,comparison:s}}static getProjectDuration(e,t){if(e.length===0)return"no duration data";const r=[...e.map(l=>new Date(l.createdAt)),...t.map(l=>l.startTime?new Date(l.startTime):new Date)].filter(l=>l);if(r.length===0)return"no duration data";const i=new Date(Math.min(...r.map(l=>l.getTime()))),a=new Date(Math.max(...r.map(l=>l.getTime()))),o=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s=a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o===s?`since ${o}`:`from ${o} to ${s}`}static identifyProjectRisks(e,t,r){const i=[],a=r.filter(l=>l.timeEstimated?l.timeSpent>l.timeEstimated*1.2:!1);a.length>0&&i.push(`${a.length} task${a.length>1?"s":""} behind schedule`),t.filter(l=>l.startTime?(Date.now()-new Date(l.startTime).getTime())/(1e3*60*60*24)<=7:!1).length===0&&t.length>0&&i.push("No recent activity in past week");const s=e.filter(l=>l.completed);return e.length>5&&s.length/e.length<.3&&i.push("Low completion rate, recommend schedule review"),i}static generateDailyInsights(e,t,r,i){const a=[],o=r/i;o<15&&a.push(`Short session durations (${Math.round(o)}-minute average) suggest frequent task switching`);const s=t.filter(l=>{if(!l.timeEstimated||!l.timeSpent)return!1;const c=l.timeSpent/l.timeEstimated;return c>.3&&c<.8});if(s.length>0){const l=s[0];l.timeEstimated&&l.timeSpent&&a.push(`The ${Math.round(l.timeSpent/l.timeEstimated*100)}% progress on "${l.title}" makes it a good completion candidate for tomorrow`)}return e.some(l=>!l.projectId)&&a.push("Consider consolidating unassigned tasks into proper projects for better focus"),a.join(". ")}static generateProgressBar(e){const r=Math.round(e/100*20),i=20-r;return"█".repeat(r)+"░".repeat(i)}static parseSessionDate(e){try{if(e.startTime){const t=new Date(e.startTime);if(!isNaN(t.getTime()))return t}if(e.date){let t=e.date;if(typeof t=="string"&&t.includes("_")&&(t=t.split("_")[0]),typeof t=="string"){const i=t.match(/(\d{4}-\d{2}-\d{2})/);i&&(t=i[1])}const r=new Date(t);if(!isNaN(r.getTime()))return new Date(mn(r,"yyyy-MM-dd"));if(typeof t=="string"&&t.match(/^\d{4}-W\d{1,2}$/)){const i=this.parseISOWeekDate(t);if(i&&!isNaN(i.getTime()))return i}}return console.warn("No valid date found in session:",e),null}catch(t){return console.warn("Error parsing session date:",e,t),null}}static parseISOWeekDate(e){try{const[t,r]=e.split("-W").map(Number);if(!t||!r||r<1||r>53)return console.warn("Invalid ISO week format:",e),null;const i=new Date(t,0,1);for(;i.getDay()!==1;)i.setDate(i.getDate()+1);return i.setDate(i.getDate()+(r-1)*7),isNaN(i.getTime())?null:i}catch(t){return console.warn("Error parsing ISO week date:",e,t),null}}static isWithinTimeframe(e,t,r){try{if(!e)return!1;let i;const a=new Date(t);if(!isNaN(a.getTime()))i=a;else if(t.match(/^\d{4}-W\d{1,2}$/)){const o=this.parseISOWeekDate(t);if(!o)return!1;i=o}else throw new Error("Invalid reference date format");if(isNaN(i.getTime()))throw new Error("Invalid reference date");if(r==="weekly"){const o=i.getDay(),s=i.getDate()-o+(o===0?-6:1);i=new Date(i.setDate(s));const l=new Date(i);l.setDate(l.getDate()+6);const c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else if(r==="monthly"){const o=i.getMonth(),s=i.getFullYear();i=new Date(s,o,1);const l=new Date(s,o+1,0),c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()}catch(i){return console.error("Error checking timeframe:",i),!1}}static getOrdinalSuffix(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static generateProjectSummary(e,t,r,i){let a=`TOP PROJECTS BY TIME INVESTMENT:

`;const o=new Map;return e.forEach(l=>{var u;const c=(u=t.find(d=>d.id===l.taskId))==null?void 0:u.projectId;c&&o.set(c,(o.get(c)||0)+(l.duration||0))}),Array.from(o.entries()).sort((l,c)=>c[1]-l[1]).forEach(([l,c],u)=>{const d=r.find(w=>w.id===l),h=l==="unassigned"?"Unassigned Tasks":(d==null?void 0:d.name)||"Unknown Project",f=Math.round(c/i*100),m=Math.floor(c/60),v=c%60,y=m>0?`${m}h ${v}m`:`${v}m`;a+=`${u+1}. "${h}" - ${y} (${f}% of total time)
`}),a}static generateTaskSummary(e,t,r){let i=`TOP TASKS BY TIME SPENT:

`;const a=new Map;return e.forEach(s=>{s.taskId&&a.set(s.taskId,(a.get(s.taskId)||0)+(s.duration||0))}),Array.from(a).sort((s,l)=>l[1]-s[1]).map(([s,l])=>({taskId:s,duration:l})).forEach(({taskId:s,duration:l},c)=>{const u=t.find(h=>h.id===s),d=r.find(h=>h.id===(u==null?void 0:u.projectId));if(u){const h=Math.floor(l/60),f=l%60,m=h>0?`${h}h ${f}m`:`${f}m`;i+=`${c+1}. "${u.title}" - ${m} (${(d==null?void 0:d.name)||"Unassigned"} project)
`}}),i}static generateMetricsAndInsights(e,t,r){const i=t/r;let a=`PRODUCTIVITY METRICS:
`;return a+=`- Total Productive Time: ${Math.floor(t/60)}h ${t%60}m
`,a+=`- Session Count: ${r} work sessions
`,a+=`- Average Session: ~${Math.round(i)} minutes
`,a+=`- Session Distribution: ${this.analyzeTimeOfDayDistribution(e)}
`,a+=`- Focus Quality: ${this.analyzeFocusQuality(e)}

`,a}static analyzeTimeOfDayDistribution(e){if(e.length===0)return"No sessions recorded";const t=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=5&&o<12}).length,r=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=12&&o<17}).length,i=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static analyzeFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static formatDayHeader(e){return mn(e,"EEE do")}static formatMinutes(e){const t=Math.floor(e/60),r=e%60;return t>0?`${t} hours ${r} minutes`:`${r} minutes`}static formatDailyWork(e){return e.map(t=>`${mn(t.date,"EEE")}: ${t.duration}m`).join(", ")}static calculateDailyWork(e,t,r,i){return O2({start:t,end:r}).map(o=>{const s=e.filter(l=>{try{const c=l.date||l.startTime;if(!c)return!1;let u=c;if(typeof u=="string"){u.includes("_")&&(u=u.split("_")[0]);const m=u.match(/(\d{4}-\d{2}-\d{2})/);m&&(u=m[1])}const d=this.safeToDate(u);if(!d)return console.warn("Invalid session date in calculateDailyWork:",{original:c,cleaned:u}),!1;const h=mn(d,"yyyy-MM-dd"),f=mn(o,"yyyy-MM-dd");return h===f&&(!i||i(l))}catch(c){return console.warn("Error processing session in calculateDailyWork:",l,c),!1}});return{date:o,duration:s.reduce((l,c)=>l+(c.duration||0),0),sessions:s.length}})}static calculateProjectProgress(e,t,r,i,a,o){const s=r.filter(f=>t.some(m=>m.projectId===e.id&&m.id===f.taskId)),l=this.calculateDailyWork(s,i,a),c=l.reduce((f,m)=>f+m.duration,0),u=o>0?c/o*100:0,h=t.filter(f=>f.projectId===e.id).map(f=>this.calculateTaskProgress(f,e,r,i,a));return{project:e,tasks:h,dailyWork:l,totalDuration:c,percentageOfWeek:u}}static calculateTaskProgress(e,t,r,i,a){const o=r.filter(h=>h.taskId===e.id),s=this.calculateDailyWork(o,i,a),l=s.reduce((h,f)=>h+f.duration,0),c=e.timeEstimated>0?l/e.timeEstimated*100:0;let u,d;try{u=new Date(e.createdAt),isNaN(u.getTime())&&(console.warn("Invalid task createdAt date, using current date:",e),u=new Date)}catch(h){console.warn("Error parsing task createdAt, using current date:",e,h),u=new Date}try{e.completed&&e.updatedAt&&(d=new Date(e.updatedAt),isNaN(d.getTime())&&(console.warn("Invalid task updatedAt date, ignoring completion date:",e),d=void 0))}catch(h){console.warn("Error parsing task updatedAt, ignoring completion date:",e,h),d=void 0}return{task:e,project:t,dailyWork:s,totalDuration:l,progress:c,isCompleted:e.completed,createdDate:u,completedDate:d}}static formatDailyDistribution(e){return e.map(t=>`${mn(t.date,"EEE")}: ${t.duration}m`).join(", ")}static safeToDate(e){try{if(!e)return null;if(typeof e=="object"&&typeof e.toDate=="function"&&(e=e.toDate()),e instanceof Date)return isNaN(e.getTime())?null:e;if(typeof e=="number"||/^\d+$/.test(e)){const t=new Date(Number(e));return isNaN(t.getTime())?null:t}if(typeof e=="string"){let t=e;if(t.includes("_")&&(t=t.split("_")[0]),/^\d{4}-W\d{1,2}$/.test(t)){const a=this.parseISOWeekDate(t);return a&&!isNaN(a.getTime())?a:null}const r=t.match(/(\d{4}-\d{2}-\d{2})/);r&&(t=r[1]);const i=new Date(t);return isNaN(i.getTime())?null:i}return null}catch{return null}}static generateWeeklyAnalytics(e,t,r,i,a){let o=`

WEEKLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateDailyWork(e,i,a);s.filter(C=>C.duration>0);const l=s.reduce((C,k)=>k.duration>C.duration?k:C,s[0]),c=s.reduce((C,k)=>k.duration<C.duration&&k.duration>0?k:C,s.find(C=>C.duration>0)||s[0]);if(o+=`- Most Productive Day: ${mn(l.date,"EEE")} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,c&&c.duration>0)o+=`- Least Productive Day: ${mn(c.date,"EEE")} (${this.formatMinutes(c.duration)})
`;else{const C=s.filter(k=>k.duration===0);if(C.length>0){const k=C.map(M=>mn(M.date,"EEE")).join(" & ");o+=`- Least Productive Day: ${k} (planned rest days)
`}}const u=s.filter(C=>![0,6].includes(C.date.getDay())),d=u.length>0?Math.round(u.reduce((C,k)=>C+k.duration,0)/u.length):0;o+=`- Average Daily Time: ${d} minutes (weekdays only)
`;const h=e.length>0?Math.round(e.reduce((C,k)=>C+k.duration,0)/e.length*10)/10:0;o+=`- Average Session Duration: ${h} minutes
`;const f=t.filter(C=>C.isCompleted).length,m=t.length>0?Math.round(f/t.length*100):0;o+=`- Task Completion Rate: ${m}% (${f}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const v=t.filter(C=>C.createdDate>=i&&C.createdDate<=a).length,y=r.filter(C=>{const k=C.project.createdAt;return k&&k>=i&&k<=a}).length;let w=`- Task Creation Activity: ${v} new tasks`;y>0&&(w+=`, ${y} new project${y>1?"s":""} created`),o+=w+`
`;const _=t.filter(C=>C.task.timeEstimated>0),T=_.filter(C=>Math.abs(C.totalDuration-C.task.timeEstimated)/C.task.timeEstimated<=.1),A=_.length>0?Math.round(T.length/_.length*100):0;return o+=`- Time Estimation Accuracy: ${A}% of completed tasks within 10% of estimate
`,o}static generateWeeklyPatterns(e,t,r,i){let a=`
WEEKLY PATTERNS:

`;const o=this.calculateDailyWork(e,r,i),s=o.filter(v=>![0,6].includes(v.date.getDay())),l=o.filter(v=>[0,6].includes(v.date.getDay())),c=s.reduce((v,y)=>v+y.duration,0),u=l.reduce((v,y)=>v+y.duration,0);c>0&&u===0?a+=`- Strong Mon-Fri productivity pattern (no weekend work)
`:c>u*3?a+=`- Weekday-focused productivity pattern (limited weekend work)
`:a+=`- Consistent work pattern across all days
`;const d=o.reduce((v,y)=>y.duration>v.duration?y:v);d.duration>0&&(a+=`- Mid-week peak on ${mn(d.date,"EEE")} (${this.formatMinutes(d.duration)})
`);const h=t.find(v=>v.totalDuration>0);h&&(a+=`- Consistent focus on ${h.project.name} project (${h.percentageOfWeek.toFixed(0)}% of total time)
`);const f=t.filter(v=>v.totalDuration>0);f.length>1?a+=`- Project diversification: ${f.length} active projects maintained
`:f.length===1&&(a+=`- Single-project focus maintained throughout week
`);const m=e.filter(v=>v.startTime);if(m.length>0){const v=m.filter(w=>{const _=w.startTime.getHours();return _>=6&&_<12}).reduce((w,_)=>w+_.duration,0),y=m.filter(w=>{const _=w.startTime.getHours();return _>=12&&_<18}).reduce((w,_)=>w+_.duration,0);v>y*1.5?a+=`- Morning-heavy work pattern based on session timing
`:y>v*1.5?a+=`- Afternoon-focused work pattern based on session timing
`:a+=`- Balanced morning-afternoon work distribution
`}return a}static generateMomentumIndicators(e,t,r){let i=`
MOMENTUM INDICATORS: `;const a=e.filter(u=>u.progress>=60),o=e.filter(u=>u.isCompleted),s=t.filter(u=>u.dailyWork.filter(h=>h.duration>0).length>=3),l=[];if(a.length>0&&l.push(`Good progress momentum with ${Math.round(a.reduce((u,d)=>u+d.progress,0)/a.length)}% completion on ${a.length} major tasks`),s.length>0){const u=s[0];l.push(`"${u.project.name}" project showing strong consistency`)}o.length>0&&l.push(`${o.length} task completion${o.length>1?"s":""} demonstrate good follow-through`);const c=e.filter(u=>u.progress>=80&&!u.isCompleted);return c.length>0&&l.push(`Ready to push ${c.length} tasks across completion threshold next week`),l.length===0?i+="Building momentum with steady progress across active tasks and projects.":i+=l.join(". ")+".",i}static calculateMonthlyProjectProgress(e,t,r,i,a,o){const s=t.filter(f=>f.projectId===e.id),l=r.filter(f=>f.projectId===e.id),c=l.reduce((f,m)=>f+(m.duration||0),0),u=o>0?c/o*100:0,d=this.calculateWeeklyWork(l,i,a),h=s.map(f=>this.calculateMonthlyTaskProgress(f,e,r,i,a));return{project:e,tasks:h,weeklyWork:d,totalDuration:c,percentageOfMonth:u}}static calculateMonthlyTaskProgress(e,t,r,i,a){const o=r.filter(f=>f.taskId===e.id),s=o.reduce((f,m)=>f+(m.duration||0),0),l=e.timeEstimated>0?s/e.timeEstimated*100:0,c=e.completed,u=this.safeToDate(e.createdAt)||new Date,d=c&&this.safeToDate(e.updatedAt)||void 0,h=this.calculateWeeklyWork(o,i,a);return{task:e,project:t,weeklyWork:h,totalDuration:s,progress:l,isCompleted:c,createdDate:u,completedDate:d}}static calculateWeeklyWork(e,t,r){const i={},a=new Date(t);for(;a<=r;){const o=this.getWeekKeyFromDate(a),s=this.getWeekStart(a);i[o]||(i[o]={week:o,weekStart:s,duration:0,sessions:0}),a.setDate(a.getDate()+7)}return e.forEach(o=>{const s=this.safeToDate(o.date||o.startTime);if(!s)return;const l=this.getWeekKeyFromDate(s);i[l]&&(i[l].duration+=o.duration||0,i[l].sessions+=1)}),Object.values(i).sort((o,s)=>o.weekStart.getTime()-s.weekStart.getTime())}static getWeekKeyFromDate(e){const t=this.getWeekStart(e);return mn(t,"MM/dd")}static getWeekStart(e){const t=new Date(e),r=t.getDay(),i=t.getDate()-r+(r===0?-6:1);return t.setDate(i),t.setHours(0,0,0,0),t}static formatWeeklyDistribution(e,t){return e.map(r=>{const i=Math.floor(r.duration/60),a=r.duration%60,o=i>0?`${i}h ${a}m`:`${a}m`;return`Week ${r.week}: ${o}`}).join(", ")}static formatWeeklyWorkDistribution(e,t){return e.filter(r=>r.duration>0).map(r=>`Week ${r.week}(${r.duration}m)`).join(", ")||"No work recorded"}static generateMonthlyAnalytics(e,t,r,i,a){let o=`MONTHLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateWeeklyWork(e,i,a),l=s.reduce((C,k)=>k.duration>C.duration?k:C,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date}),c=s.reduce((C,k)=>k.duration<C.duration&&k.duration>0?k:C,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});o+=`- Most Productive Week: Week ${l.week} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,o+=`- Least Productive Week: Week ${c.week} (${this.formatMinutes(c.duration)}${c.duration===0?" - planned rest":""})
`;const u=this.analyzeDayOfWeekPattern(e),d=Object.entries(u).reduce((C,[k,M])=>M.avgDuration>C[1].avgDuration?[k,M]:C,Object.entries(u)[0]||["None",{avgDuration:0}]),h=Object.entries(u).reduce((C,[k,M])=>M.avgDuration<C[1].avgDuration?[k,M]:C,Object.entries(u)[0]||["None",{avgDuration:0}]);o+=`- Most Productive Day Type: ${d[0]} (average ${Math.round(d[1].avgDuration)}m per session)
`,o+=`- Least Productive Day Type: ${h[0]} ${h[1].avgDuration===0?"(planned rest day)":`(average ${Math.round(h[1].avgDuration)}m per session)`}
`,Math.ceil((a.getTime()-i.getTime())/(1e3*60*60*24));const f=e.filter(C=>{const k=this.safeToDate(C.date||C.startTime);return k&&k.getDay()>=1&&k.getDay()<=5}),m=e.filter(C=>{const k=this.safeToDate(C.date||C.startTime);return k&&(k.getDay()===0||k.getDay()===6)}),v=f.length>0?Math.round(f.reduce((C,k)=>C+(k.duration||0),0)/f.length):0,y=m.length>0?Math.round(m.reduce((C,k)=>C+(k.duration||0),0)/m.length):0;o+=`- Average Daily Time: ${v} minutes (weekdays), ${y} minutes (weekends)
`;const w=e.length>0?e.reduce((C,k)=>C+(k.duration||0),0)/e.length:0;o+=`- Average Session Duration: ${w.toFixed(1)} minutes
`;const _=t.filter(C=>C.isCompleted).length,T=t.length>0?Math.round(_/t.length*100):0;o+=`- Task Completion Rate: ${T}% (${_}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const A=this.calculateMonthlyEstimationAccuracy(t);return o+=`- Time Estimation Accuracy: ${A}% of completed tasks within 15% of estimate

`,o}static analyzeDayOfWeekPattern(e){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={};return t.forEach(i=>{r[i]={totalDuration:0,sessionCount:0,avgDuration:0}}),e.forEach(i=>{const a=this.safeToDate(i.date||i.startTime);if(!a)return;const o=t[a.getDay()];r[o].totalDuration+=i.duration||0,r[o].sessionCount+=1}),Object.keys(r).forEach(i=>{const a=r[i];a.avgDuration=a.sessionCount>0?a.totalDuration/a.sessionCount:0}),r}static calculateMonthlyEstimationAccuracy(e){const t=e.filter(i=>i.isCompleted&&i.task.timeEstimated>0);if(t.length===0)return 0;const r=t.filter(i=>Math.abs(i.totalDuration-i.task.timeEstimated)/i.task.timeEstimated<=.15);return Math.round(r.length/t.length*100)}static generateMonthlyPatterns(e,t,r,i,a){let o=`MONTHLY PATTERNS & INSIGHTS:

`;const s=e.filter(_=>{const T=this.safeToDate(_.date||_.startTime);return T&&T.getDay()>=1&&T.getDay()<=5}).length,l=e.filter(_=>{const T=this.safeToDate(_.date||_.startTime);return T&&(T.getDay()===0||T.getDay()===6)}).length;l===0?o+=`- Strong weekday productivity with strategic weekend rest
`:o+=`- Balanced weekday/weekend approach (${s} weekday vs ${l} weekend sessions)
`;const c=this.calculateWeeklyWork(e,i,a),u=c.reduce((_,T)=>T.duration>_.duration?T:_,c[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});if(u.duration>0){const _=Math.floor(u.duration/60),T=u.duration%60,A=_>0?`${_}h ${T}m`:`${T}m`;o+=`- Mid-month productivity peak (Week ${u.week}) with ${A}
`}const d=t[0];d&&d.percentageOfMonth>30&&(o+=`- Consistent ${d.project.name} focus (${d.percentageOfMonth.toFixed(0)}% of total time) showing strong learning commitment
`);const h=r.filter(_=>_.isCompleted),f=r.length>0?h.length/r.length*100:0;f>30?o+=`- Excellent task completion follow-through (${Math.round(f)}% completion rate)
`:f>15&&(o+=`- Good task completion momentum (${Math.round(f)}% completion rate)
`),t.length>=3&&(o+=`- Project diversification balanced with deep focus areas
`);const m=r.filter(_=>_.createdDate<new Date(i.getTime()+14*24*60*60*1e3)),v=r.filter(_=>_.createdDate>=new Date(i.getTime()+14*24*60*60*1e3)),y=this.calculateMonthlyEstimationAccuracy(m),w=this.calculateMonthlyEstimationAccuracy(v);return w>y&&w>80&&(o+=`- Improved time estimation accuracy throughout month (early: ${y}%, late: ${w}%)
`),o+`
`}static generateMonthlyAchievements(e,t,r,i){let a=`ACHIEVEMENT HIGHLIGHTS:
`;const o=i.find(d=>d.project.name.toLowerCase().includes("learn")||d.project.name.toLowerCase().includes("study")||d.project.name.toLowerCase().includes("course"));if(o&&o.percentageOfMonth>20){const d=Math.round(o.percentageOfMonth);a+=`✅ Major Learning: "${o.project.name}" curriculum focus (${d}% of time investment)
`}const s=e.filter(d=>d.title.toLowerCase().includes("implement")||d.title.toLowerCase().includes("build")||d.title.toLowerCase().includes("develop")||d.title.toLowerCase().includes("create"));s.length>0&&(a+=`✅ Development Milestone: ${s[0].title} completed
`);const l=e.filter(d=>d.title.toLowerCase().includes("write")||d.title.toLowerCase().includes("blog")||d.title.toLowerCase().includes("article")||d.title.toLowerCase().includes("post"));l.length>0&&(a+=`✅ Content Creation: ${l.length} technical ${l.length===1?"post":"posts"} published
`);const c=e.filter(d=>d.title.toLowerCase().includes("docker")||d.title.toLowerCase().includes("kubernetes")||d.title.toLowerCase().includes("aws")||d.title.toLowerCase().includes("learn"));return c.length>0&&(a+=`✅ Skills Expansion: ${c[0].title} foundation established
`),e.filter(d=>d.title.toLowerCase().includes("contribute")||d.title.toLowerCase().includes("open source")||d.title.toLowerCase().includes("github")).length>0&&(a+=`✅ Open Source: First meaningful contribution to React ecosystem
`),a+`
`}static generateMonthlyRecommendations(e,t,r,i){let a=`RISK FACTORS & RECOMMENDATIONS:
`;const o=i.filter(y=>!y.projectId||!r.find(w=>w.project.id===y.projectId));o.length>0&&(a+=`⚠️ Unassigned tasks present (${o.length}) - maintain project organization
`);const s=this.analyzeDayOfWeekPattern(e),l=Object.entries(s).reduce((y,[w,_])=>_.avgDuration>y[1].avgDuration?[w,_]:y,Object.entries(s)[0]||["None",{avgDuration:0}]);l[1].avgDuration>0&&(a+=`💡 ${l[0]} productivity peak suggests optimal deep work scheduling
`),this.calculateWeeklyWork(e,new Date,new Date).filter(y=>y.duration>0).length>=3&&(a+=`💡 Consistent weekly momentum pattern - consider monthly sprint cycles
`),this.calculateMonthlyEstimationAccuracy(t)>80&&(a+=`💡 Time estimation improving - maintain estimation discipline
`),a+=`
`;const h=t.filter(y=>y.isCompleted).length,f=t.filter(y=>!y.isCompleted&&y.totalDuration>0).length;let m="NEXT MONTH MOMENTUM: ";h>=3&&(m+=`Excellent foundation with ${h} major completions ready. `);const v=r[0];return v&&(m+=`Strong learning velocity in ${v.project.name} ecosystem. `),f>0?m+="Ready for advanced feature development phase with proven productivity patterns and estimation accuracy.":m+="Ready to establish new productivity patterns and project momentum.",a+m}}class WG{static async createMultiLevelChunks(e){console.log(`🔄 Creating multi-level chunks for user: ${e}`);const t=await this.getUserData(e),{sessions:r,tasks:i,projects:a}=t;console.log(`📊 Data fetched - Sessions: ${r.length}, Tasks: ${i.length}, Projects: ${a.length}`),this.validateUserData(r,i,a);const o=[],s=await this.createMonthlyTemporalChunks(r,i,a,e);o.push(...s);const l=await this.createWeeklyTemporalChunks(r,i,a,e);o.push(...l);const c=await this.createDailyTemporalChunks(r,i,a,e);o.push(...c);const u=await this.createProjectSummaryChunks(a,i,r,e);o.push(...u);const d=await this.createTaskAggregateChunks(i,r,a,e);o.push(...d);const h=await this.createSessionChunks(r,i,a,e);return o.push(...h),console.log(`✅ Created ${o.length} total chunks with priority: Monthly → Weekly → Daily → Project → Task → Session`),o}static async getUserData(e){try{const t=qt(Zt(Je,"tasks"),vt("userId","==",e)),i=(await kn(t)).docs.map(d=>{var f,m;const h=d.data();return{id:d.id,title:h.title||h.text||"Untitled Task",description:h.description||h.notes||"",projectId:h.projectId||"",completed:h.completed||!1,status:h.status||(h.completed?"completed":"active"),timeSpent:h.timeSpent||0,timeEstimated:h.timeEstimated||0,userId:h.userId,createdAt:((f=h.createdAt)==null?void 0:f.toDate())||new Date,updatedAt:((m=h.updatedAt)==null?void 0:m.toDate())||new Date,order:h.order??0}}),a=qt(Zt(Je,"workSessions"),vt("userId","==",e)),s=(await kn(a)).docs.map(d=>{var w,_,T,A;const h=d.data(),f=(w=h.startTime)!=null&&w.toDate?h.startTime.toDate():void 0,m=(_=h.createdAt)!=null&&_.toDate?h.createdAt.toDate():new Date,v=(T=h.updatedAt)!=null&&T.toDate?h.updatedAt.toDate():new Date,y=(Bl.safeToDate(f||h.date)||new Date).toISOString().split("T")[0];return{id:d.id,taskId:h.taskId||"",projectId:h.projectId||"",duration:h.duration||0,sessionType:h.sessionType||"work",startTime:f,endTime:(A=h.endTime)==null?void 0:A.toDate(),notes:h.notes||"",status:h.status||"completed",userId:h.userId,date:h.date||y,createdAt:m,updatedAt:v}}),l=qt(Zt(Je,"projects"),vt("userId","==",e)),u=(await kn(l)).docs.map(d=>{const h=d.data();return{id:d.id,name:h.name||"Untitled Project",color:h.color||"#3498db",description:h.description||"",userId:h.userId}});return{sessions:s,tasks:i,projects:u}}catch(t){return console.error("❌ Error loading user data:",t),{sessions:[],tasks:[],projects:[]}}}static async createSessionChunks(e,t,r,i){const a=[],o=e.reduce((s,l)=>(s[l.taskId]||(s[l.taskId]=[]),s[l.taskId].push(l),s),{});for(const[s,l]of Object.entries(o)){const c=t.find(h=>h.id===s),u=r.find(h=>h.id===(c==null?void 0:c.projectId));if(!c||!u||l.length===0)continue;const d=Bl.generateTaskSessionSummaryText(c,l,u);a.push({id:`task_sessions_${c.id}`,content:d,content_type:"task_sessions",originalContent:JSON.stringify({task:c,sessions:l}),metadata:{chunkType:"task_sessions",chunkLevel:6,sourceIds:[c.id,...l.map(h=>h.id)],created:new Date().toISOString(),entities:{taskId:c.id,projectId:u.id,sessionIds:l.map(h=>h.id),userId:i},analytics:{duration:l.reduce((h,f)=>h+f.duration,0),sessionCount:l.length,productivity:this.calculateTaskSessionsProductivity(l,c),completionRate:c.timeEstimated?Math.round(c.timeSpent/c.timeEstimated*100):0}},chunkIndex:0,tokenCount:Ar.estimateTokens(d)})}return a}static getMostCommonTimeSlot(e){const r=e.map(i=>this.getTimeSlot(i.startTime)).reduce((i,a)=>(i[a]=(i[a]||0)+1,i),{});return Object.entries(r).reduce((i,a)=>r[i[0]]>r[a[0]]?i:a)[0]}static calculateTaskSessionsProductivity(e,t){if(e.length===0)return .5;const r=e.reduce((a,o)=>a+this.calculateSessionProductivity(o,t),0)/e.length,i=e.length>3?.1:0;return Math.max(0,Math.min(1,r+i))}static async createTaskAggregateChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.taskId===o.id),l=r.find(u=>u.id===o.projectId);if(!l)continue;const c=Bl.generateTaskAggregateText(o,s,l);a.push({id:`task_aggregate_${o.id}`,content:c,content_type:"task_aggregate",originalContent:JSON.stringify({task:o,sessions:s}),metadata:{chunkType:"task_aggregate",chunkLevel:5,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{taskId:o.id,projectId:l.id,sessionIds:s.map(u=>u.id),userId:i},analytics:{duration:o.timeSpent,sessionCount:s.length,completionRate:o.timeEstimated?Math.round(o.timeSpent/o.timeEstimated*100):0,productivity:this.calculateTaskProductivity(o,s)}},chunkIndex:0,tokenCount:Ar.estimateTokens(c)})}return a}static async createProjectSummaryChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.projectId===o.id),l=r.filter(u=>u.projectId===o.id);if(s.length===0)continue;const c=Bl.generateProjectSummaryText(o,s,l);a.push({id:`project_summary_${o.id}`,content:c,content_type:"project_summary",originalContent:JSON.stringify({project:o,tasks:s,sessions:l}),metadata:{chunkType:"project_summary",chunkLevel:4,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{projectId:o.id,sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:s.reduce((u,d)=>u+d.timeSpent,0),sessionCount:l.length,completionRate:Math.round(s.filter(u=>u.completed).length/s.length*100),productivity:this.calculateProjectProductivity(s,l)}},chunkIndex:0,tokenCount:Ar.estimateTokens(c)})}return a}static async createMonthlyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByMonth(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseMonthKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing monthly chunk for month ${s}:`,{monthStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Bl.generateTemporalSummaryText("monthly",l,c.toISOString(),u,d);a.push({id:`monthly_${s}`,content:h,content_type:"monthly_summary",originalContent:JSON.stringify({month:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:1,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`monthly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l),tasksCreated:u.length,projectsWorkedOn:d.length}},chunkIndex:0,tokenCount:Ar.estimateTokens(h)})}),a}static async createWeeklyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByWeek(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseWeekKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing weekly chunk for week ${s}:`,{weekStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Bl.generateTemporalSummaryText("weekly",l,c.toISOString(),u,d);a.push({id:`weekly_${s}`,content:h,content_type:"weekly_summary",originalContent:JSON.stringify({week:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:2,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`weekly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:Ar.estimateTokens(h)})}),a}static async createDailyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByDate(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=Bl.generateTemporalSummaryText("daily",l,s,t,r);a.push({id:`daily_${s}`,content:c,content_type:"daily_summary",originalContent:JSON.stringify({date:s,sessions:l}),metadata:{chunkType:"temporal_pattern",chunkLevel:3,sourceIds:l.map(u=>u.id),timeframe:`daily_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:l.reduce((u,d)=>u+(d.duration||0),0),sessionCount:l.length,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:Ar.estimateTokens(c)})}),a}static getTimeSlot(e){if(!e)return"unknown";const t=new Date(e).getHours();return t<6?"late_night":t<12?"morning":t<17?"afternoon":t<22?"evening":"night"}static calculateSessionProductivity(e,t){let r=.5;return e.status==="completed"&&(r+=.3),e.duration>=25&&(r+=.2),t.timeEstimated&&e.duration<=t.timeEstimated*.5&&(r-=.2),Math.max(0,Math.min(1,r))}static calculateTaskProductivity(e,t){if(t.length===0)return .5;let i=t.reduce((a,o)=>a+this.calculateSessionProductivity(o,e),0)/t.length;return e.completed&&(i+=.2),e.timeEstimated&&e.timeSpent<=e.timeEstimated*1.2&&(i+=.1),Math.max(0,Math.min(1,i))}static calculateProjectProductivity(e,t){if(e.length===0)return .5;const r=e.filter(a=>a.completed).length/e.length,i=e.reduce((a,o)=>{const s=t.filter(l=>l.taskId===o.id);return a+this.calculateTaskProductivity(o,s)},0)/e.length;return r*.6+i*.4}static calculateTemporalProductivity(e){if(e.length===0)return .5;const r=e.filter(o=>o.status==="completed").length/e.length,i=e.reduce((o,s)=>o+s.duration,0)/e.length,a=Math.min(1,i/30);return r*.7+a*.3}static groupSessionsByDate(e){console.log(`📊 Grouping ${e.length} sessions by date...`);const t=e.reduce((i,a)=>{const s=(Bl.safeToDate(a.date||a.startTime)||new Date).toISOString().split("T")[0];return i[s]||(i[s]=[]),i[s].push(a),i},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} days:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static groupSessionsByWeek(e){console.log(`📊 Grouping ${e.length} sessions by week...`);const t=e.reduce((i,a)=>{try{const o=Bl.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getWeekKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for weekly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} weeks:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static getWeekKey(e){const t=e.getFullYear(),r=this.getWeekNumber(e);return`${t}-W${r.toString().padStart(2,"0")}`}static getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const i=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)}static parseWeekKey(e){const t=e.match(/(\d{4})-W(\d{2})/);if(!t)return console.warn("Invalid week key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2]),a=new Date(r,0,1),o=(i-1)*7,s=new Date(a.getTime()+o*24*60*60*1e3),l=s.getDay(),c=l===0?-6:1-l;return s.setDate(s.getDate()+c),s}static groupSessionsByMonth(e){console.log(`📊 Grouping ${e.length} sessions by month...`);const t=e.reduce((i,a)=>{try{const o=Bl.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getMonthKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for monthly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} months:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`).join(", ")),t}static getMonthKey(e){const t=e.getFullYear(),r=e.getMonth()+1;return`${t}-${r.toString().padStart(2,"0")}`}static parseMonthKey(e){const t=e.match(/(\d{4})-(\d{2})/);if(!t)return console.warn("Invalid month key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2])-1;return new Date(r,i,1)}static validateUserData(e,t,r){console.log("🔍 Validating user data...");const i=e.filter(c=>c.duration>0&&c.taskId),a=e.filter(c=>Bl.safeToDate(c.date||c.startTime)!==null);console.log("📊 Session validation:",{total:e.length,withDuration:i.length,withValidDates:a.length,sampleDates:e.slice(0,3).map(c=>({id:c.id,date:c.date,startTime:c.startTime}))});const o=t.filter(c=>r.some(u=>u.id===c.projectId));console.log("📊 Task validation:",{total:t.length,withValidProjects:o.length,sampleTasks:t.slice(0,3).map(c=>({id:c.id,title:c.title,projectId:c.projectId,timeSpent:c.timeSpent}))}),console.log("📊 Project validation:",{total:r.length,sampleProjects:r.slice(0,3).map(c=>({id:c.id,name:c.name}))});const s=e.filter(c=>t.some(u=>u.id===c.taskId)),l=e.filter(c=>r.some(u=>u.id===c.projectId));console.log("🔗 Cross-reference validation:",{sessionsWithValidTasks:s.length,sessionsWithValidProjects:l.length}),i.length===0&&console.warn("⚠️  No valid sessions found! This will result in empty weekly summaries."),a.length===0&&console.warn("⚠️  No sessions with valid dates found! Date filtering will fail.")}}class Uu{static classifyQuery(e){const t=e.toLowerCase();let r="general",i=.3,a=[];const o=this.TASK_PRIORITY_PATTERNS.filter(_=>_.test(t)),s=this.PROJECT_FOCUS_PATTERNS.filter(_=>_.test(t)),l=this.SUMMARY_INSIGHTS_PATTERNS.filter(_=>_.test(t)),c=/\b(task|tasks|todo|to-do)\b/i.test(t),u=/\b(project|projects)\b/i.test(t),d=/\b(list|show|give\s+me|tell\s+me|what|which)\b/i.test(t),h=/\b(in\s+the\s+|from\s+|for\s+)["']?[a-zA-Z0-9\s]+["']?\s*(project|tasks?)/i.test(t),f=Math.max(o.length,s.length,l.length);f>0?o.length>0&&o.length>=f?(r="task_priority",i=Math.min(.95,.5+o.length*.15),a.push("task_management"),h&&c&&(i=Math.min(.95,i+.2))):s.length>0&&s.length>=f?(r="project_focus",i=Math.min(.95,.5+s.length*.15),a.push("project_management")):l.length>0&&(r="summary_insights",i=Math.min(.95,.5+l.length*.15),a.push("analytics")):c&&d?(r="task_priority",i=.6,a.push("task_management"),h&&(i=.75)):u&&d?(r="project_focus",i=.65,a.push("project_management")):(c||u)&&(r=c?"task_priority":"project_focus",i=.45,a.push(c?"task_management":"project_management")),s.length>0&&r!=="project_focus"&&a.push("project_management"),l.length>0&&r!=="summary_insights"&&a.push("analytics");const m=e.split(/\s+/).length,v=a.length>1;let y="prioritized";v&&m>10?y="comprehensive":(i<.7||v)&&(y="balanced");const w=this.CONTENT_TYPE_MAPPINGS[r];return console.log("🔍 Query Classification Debug:",{query:e.substring(0,100),taskMatches:o.length,projectMatches:s.length,summaryMatches:l.length,hasTaskKeywords:c,hasProjectKeywords:u,hasListingKeywords:d,hasSpecificProject:h,primaryIntent:r,confidence:i.toFixed(2),secondaryIntents:a,mixingStrategy:y,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)]}),{primaryIntent:r,secondaryIntents:a,confidence:i,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)],suggestedChunkTypes:this.mapContentTypesToChunkTypes(w),mixingStrategy:y}}static mapContentTypesToChunkTypes(e){const t={task_aggregate:"task_aggregate",task_sessions:"task_sessions",project_summary:"project_summary",daily_summary:"temporal_pattern",weekly_summary:"temporal_pattern",monthly_summary:"temporal_pattern",session:"session"},r=[...e.primary,...e.secondary,...e.tertiary];return[...new Set(r.map(i=>t[i]||i))]}static getOptimalSourceMix(e,t,r=20){const{mixingStrategy:i,suggestedContentTypes:a}=e,o=this.groupSourcesByContentType(t,a);switch(i){case"prioritized":return this.selectPrioritizedSources(o,a,r);case"balanced":return this.selectBalancedSources(o,a,r);case"comprehensive":return this.selectComprehensiveSources(o,a,r);default:return this.selectPrioritizedSources(o,a,r)}}static groupSourcesByContentType(e,t){const r={};return t.forEach(i=>{r[i]=[]}),e.forEach(i=>{var o;const a=i.content_type||((o=i.metadata)==null?void 0:o.chunkType)||"unknown";t.includes(a)?r[a].push(i):(r.other||(r.other=[]),r.other.push(i))}),Object.keys(r).forEach(i=>{r[i].sort((a,o)=>{const s=a.similarity_score||a.relevanceScore||0;return(o.similarity_score||o.relevanceScore||0)-s})}),r}static selectPrioritizedSources(e,t,r){const i=[],a=[.4,.25,.2,.15];t.forEach((s,l)=>{if(i.length>=r)return;const c=e[s]||[],u=a[l]||.1,d=Math.ceil(r*u),h=c.slice(0,d);i.push(...h)});const o=r-i.length;if(o>0){const s=new Set(i.map(c=>c.id)),l=Object.values(e).flat().filter(c=>!s.has(c.id)).sort((c,u)=>{const d=c.similarity_score||c.relevanceScore||c.final_score||0;return(u.similarity_score||u.relevanceScore||u.final_score||0)-d});i.push(...l.slice(0,o))}return console.log(`📊 Prioritized selection: ${i.length}/${r} sources distributed across ${t.length} content types`),i.slice(0,r)}static selectBalancedSources(e,t,r){const i=[],a=Math.max(3,Math.floor(r*.15)),o=Math.max(a,Math.floor(r/t.length));t.forEach(l=>{const c=e[l]||[];i.push(...c.slice(0,Math.min(o,c.length)))});const s=r-i.length;if(s>0){const l=new Set(i.map(u=>u.id)),c=Object.values(e).flat().filter(u=>!l.has(u.id)).sort((u,d)=>{const h=u.similarity_score||u.relevanceScore||u.final_score||0;return(d.similarity_score||d.relevanceScore||d.final_score||0)-h});i.push(...c.slice(0,s))}return console.log(`📊 Balanced selection: ${i.length} sources (~${o} per type)`),i.slice(0,r)}static selectComprehensiveSources(e,t,r){var d;const i=[],a=Object.keys(e),o=[...new Set([...t,...a])],s=Math.max(2,Math.floor(r*.1)),l=Math.max(s*2,Math.floor(r*.3));o.forEach(h=>{const f=e[h]||[];if(f.length>0){const m=Math.min(s,f.length);i.push(...f.slice(0,m))}});const c=r-i.length;if(c>0){const h=new Set(i.map(y=>y.id)),f=Object.values(e).flat().filter(y=>!h.has(y.id)).sort((y,w)=>{const _=y.similarity_score||y.relevanceScore||y.final_score||0;return(w.similarity_score||w.relevanceScore||w.final_score||0)-_}),m={};i.forEach(y=>{var _;const w=y.content_type||((_=y.metadata)==null?void 0:_.chunkType)||"unknown";m[w]=(m[w]||0)+1});const v=[];for(const y of f){if(v.length>=c)break;const w=y.content_type||((d=y.metadata)==null?void 0:d.chunkType)||"unknown",_=m[w]||0;_<l&&(v.push(y),m[w]=_+1)}i.push(...v)}const u=this.getTypeDistribution(i);return console.log(`📊 Comprehensive selection: ${i.length} sources across ${Object.keys(u).length} content types`),console.log(`📊 Distribution: ${Object.entries(u).map(([h,f])=>`${h}(${f})`).join(", ")}`),i.slice(0,r)}static getTypeDistribution(e){return e.reduce((t,r)=>{var a;const i=r.content_type||((a=r.metadata)==null?void 0:a.chunkType)||"unknown";return t[i]=(t[i]||0)+1,t},{})}static async selectBestContentTypesWithAI(e,t){try{const r=this.buildContentTypeSelectionPrompt(e,{}),i=await Ar.generateChatResponse({query:r,context:`User Query: "${e}"`,conversationHistory:[]});return this.parseAIContentTypeResponse(i)}catch(r){console.error("AI content type selection failed:",r);const i=this.classifyQuery(e);return this.convertClassificationToAIFormat(i)}}static buildContentTypeSelectionPrompt(e,t){return`You are an expert content type selector for a productivity tracking system. Your goal is to select the content types that will provide the most comprehensive and relevant data to answer the user's question.

USER QUERY: "${e}"

AVAILABLE CONTENT TYPES WITH REAL SAMPLE DATA:

1. MONTHLY_SUMMARY (Level 1 - Highest priority, most comprehensive):
MONTHLY PRODUCTIVITY SUMMARY: June 1-30, 2025

OVERVIEW: 138 hours 32 minutes total productive time across 1537 work sessions. Worked on 8 projects, 109 tasks. Completed 98 tasks, created 108 new tasks this month.

TOP PROJECTS BY TIME INVESTMENT:
1. "Make10000hours" - 64h 5m (46% of month)
└─ Week 05/26: 0m, Week 06/02: 30h 56m, Week 06/09: 23h 53m, Week 06/16: 9h 16m, Week 06/23: 0m
└─ "Focus Mode - Front End Design & Building" (time spent: 262m)
└─ "Go hard on AI DB & BE & Logic set up, just use random UI for AI" (time spent: 228m)
└─ "Calendar improvement - Drag & Drop" (time spent: 218m)

2. "AI" - 46h 22m (33% of month)
└─ Week 05/26: 0m, Week 06/02: 7h 36m, Week 06/09: 16h 10m, Week 06/16: 22h 36m, Week 06/23: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (time spent: 497m)
└─ "Optimize lại cái synthetic text chunking" (time spent: 438m)
└─ "Components in the AI EconomyEconomy" (time spent: 364m)

3. "Make10000hours-Bugfixing" - 10h 2m (7% of month)
4. "Lifework" - 9h 10m (7% of month)
5. "Zalopay" - 2h 5m (1% of month)

TOP TASKS BY TIME INVESTMENT:
1. "Research về các công ty founded by YC trong năm 2024-2025" - 497m (8h 17m)
2. "Optimize lại cái synthetic text chunking" - 438m (7h 18m)
3. "Components in the AI EconomyEconomy" - 364m (6h 4m)

PRODUCTIVITY ANALYTICS:
- Average daily productive time: 4h 37m
- Most productive day: Wednesday, June 11 (8h 53m)
- Least productive day: Multiple days (0m)
- Peak productivity time: 10:00-12:00 (19% of total time)
- Task completion rate: 89.9% (98/109 tasks)
- Average task duration: 76 minutes
- Project focus distribution: 46% Make10000hours, 33% AI, 21% Others

ACHIEVEMENTS THIS MONTH:
✅ Completed major AI optimization sprint (438m invested)
✅ Built focus mode frontend (262m)
✅ Enhanced calendar functionality (218m)
✅ Research milestone reached (497m on YC research)

RISK FACTORS & INSIGHTS:
⚠️ 11 incomplete tasks may impact next month's velocity
⚠️ Zero productivity on final week suggests potential burnout
📈 Strong momentum in weeks 2-4 with consistent 20+ hour weeks

2. WEEKLY_SUMMARY (Level 2 - Weekly overviews):
WEEKLY PRODUCTIVITY SUMMARY: Week of June 16-21, 2025

OVERVIEW: 33 hours 10 minutes total productive time across 364 work sessions. Worked on 4 projects, 19 tasks. Completed 19 tasks, created 17 new tasks this week.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 22h 36m (68.1% of week)
└─ Monday 06/16: 7h 41m, Tuesday 06/17: 5h 3m, Wednesday 06/18: 6h 50m, Thursday 06/19: 3h 2m, Friday 06/20: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (daily: 461m → 363m → 410m → 182m)
└─ "Components in the AI EconomyEconomy" (daily: 0m → 120m → 0m → 0m)

2. "Make10000hours" - 9h 16m (27.9% of week)
└─ "Mang cái Calendar vào My project & Optimize UI" (time spent: 199m)
└─ "Calendar improvement - Drag & Drop" (time spent: 157m)

3. "Lifework" - 1h 8m (3.4% of week)
4. "Zalopay" - 11m (0.6% of week)

DAILY MOMENTUM ANALYSIS:
- Monday: Peak performance (7h 41m) - deep research focus
- Tuesday: Strong continuation (5h 3m) - balanced project work
- Wednesday: Sustained effort (6h 50m) - research completion
- Thursday: Declining momentum (3h 2m) - task wrap-up
- Friday: No activity (0m) - momentum break

TASK COMPLETION VELOCITY:
- Tasks completed: 19 (100% completion rate this week)
- Average task completion time: 104 minutes
- Fastest completion: 5 minutes
- Longest task: 461 minutes
- Daily completion pattern: 5→4→6→4→0 tasks

FOCUS QUALITY INDICATORS:
- Average session length: 5.5 minutes
- Longest focus session: 45 minutes (research work)
- Session efficiency: 73% (based on time estimation accuracy)
- Context switching: Moderate (4 projects active)

3. DAILY_SUMMARY (Level 3 - Daily breakdowns):
DAILY PRODUCTIVITY SUMMARY: Wednesday, June 11, 2025

OVERVIEW: 533 minutes (8h 53m) of productive work across 91 work sessions. Worked on 13 projects, 176 tasks. Created 0 new tasks today.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 461m (86.5% of total time)
└─ "Research về các công ty founded by YC trong năm 2024-2025" (410 minutes across 32 sessions)
└─ "Components in the AI EconomyEconomy" (31 minutes across 8 sessions)
└─ "Optimize lại cái synthetic text chunking" (20 minutes across 4 sessions)

2. "Make10000hours" - 71m (13.3% of time)
└─ "Focus Mode - Front End Design & Building" (35 minutes)
└─ "Mang cái Calendar vào My project & Optimize UI" (36 minutes)

3. "Lifework" - 1m (0.2% of time)

HOURLY BREAKDOWN:
10:00-11:00: 95m (Research peak)
11:00-12:00: 87m (Sustained research)
14:00-15:00: 82m (Post-lunch productivity)
15:00-16:00: 76m (Afternoon focus)
09:00-10:00: 65m (Morning startup)
16:00-17:00: 45m (Late afternoon)
17:00-18:00: 38m (Evening wrap-up)
12:00-13:00: 35m (Pre-lunch completion)
08:00-09:00: 10m (Early start)

SESSION QUALITY METRICS:
- Average session duration: 5.9 minutes
- Longest session: 28 minutes (deep research)
- Shortest session: 1 minute (quick tasks)
- Session breaks: 67 breaks averaging 3.2 minutes
- Focus efficiency: 89% (estimated vs actual time)

TASK COMPLETION DETAILS:
✅ "Research về các công ty founded by YC" - 410m (exceeded estimate by 15%)
✅ "Focus Mode frontend work" - 35m (met estimate exactly)
✅ "Calendar UI optimization" - 36m (under estimate by 10%)
⏳ 173 other tasks tracked but not actively worked on

PRODUCTIVITY INSIGHTS:
📈 Peak performance day this week
🎯 Single-project focus (86% on AI research)
⚡ High session count indicates good momentum
🔄 Minimal context switching optimized flow

4. PROJECT_SUMMARY (Level 4 - Rich project overviews):
Project "AI" created on Monday, May 26, 2025, containing 27 tasks across 3 statuses.

BACKLOG STATUS (8 tasks):
- "Build a Claude-3.5-Sonnet-like competitor model" (estimated 600 min, priority: high)
- "Research xem giờ nếu muốn build cái AI chat bot cho product của mình thì cần phải làm gì" (estimated 240 min, priority: medium)
- "AI Tool to help startup build their MVP faster" (estimated 180 min, priority: medium)
- "Optimize lại cách con AI của mình Retrieve Data" (estimated 120 min, priority: medium)

IN-PROGRESS STATUS (2 tasks):
- "Components in the AI EconomyEconomy" (364 min spent, estimated 180 min, 202% progress, priority: high)
- "Optimize lại cái synthetic text chunking" (438 min spent, estimated 300 min, 146% progress, priority: high)

COMPLETED STATUS (17 tasks):
- "Research về các công ty founded by YC trong năm 2024-2025" (497 min, completed June 19, 2025)
- "On Finding AI Startup Idea" (34 min, completed June 19, 2025)
- "Build an AI Agent to help startup get accepted to YC" (25 min, completed June 5, 2025)

PROJECT ANALYTICS:
Total time invested: 46h 22m across 447 work sessions
Average session duration: 6.2 minutes
Task completion rate: 63% (17/27 tasks completed)
Time estimation accuracy: 127% (tasks taking 27% longer than estimated)
Project velocity: 2.4 tasks completed per week
Risk level: MEDIUM (2 overrunning tasks, 8 unstarted tasks)

COMPLETION VELOCITY TRENDS:
- Week 1 (May 26-June 1): 3 tasks completed
- Week 2 (June 2-8): 5 tasks completed
- Week 3 (June 9-15): 4 tasks completed  
- Week 4 (June 16-22): 5 tasks completed
- Trend: Consistent 4-5 tasks/week velocity

TIME INVESTMENT PATTERNS:
Monday-Friday: 89% of project time
Weekend work: 11% of project time
Peak hours: 10:00-12:00 (31% of project time)
Research-heavy: 67% time on research tasks
Implementation: 33% time on building tasks

PROJECT HEALTH INDICATORS:
✅ Strong weekly completion velocity
✅ Consistent time investment
⚠️ Time estimation challenges (27% overrun)
⚠️ Growing backlog (8 unstarted tasks)
📈 High engagement (447 sessions)

5. TASK_AGGREGATE (Level 5 - Comprehensive task details):
Task 'Research về các công ty founded by YC trong năm 2024-2025' from project 'AI' has accumulated 497 minutes (8h 17m) across 47 work sessions. 

TASK DETAILS:
- Average session duration: 10.6 minutes
- Progress: 207% of estimated 240 minutes (overran by 257 minutes)
- Current status: Completed on Thursday, June 19, 2025
- Created: Monday, June 16, 2025
- Priority: High
- Last updated: Thursday, June 19, 2025

TIME INVESTMENT PATTERN: Intensive focused research with daily progression
Daily breakdown:
- June 16: 461 minutes (26 sessions) - Initial deep dive
- June 17: 36 minutes (4 sessions) - Follow-up research  
- June 18: 0 minutes - No work
- June 19: 0 minutes - Task completion/wrap-up

SESSION ANALYTICS:
- Longest session: 34 minutes (deep research phase)
- Shortest session: 1 minute (quick notes)
- Session frequency: High intensity over 4 days
- Break patterns: Frequent short breaks (2-5 minutes)
- Focus quality: Excellent (sustained 400+ minute days)

ESTIMATION ACCURACY:
- Original estimate: 240 minutes (4 hours)
- Actual time: 497 minutes (8h 17m)
- Variance: +257 minutes (+107% overrun)
- Learning: Research tasks require 2x time estimates

COMPLETION FACTORS:
✅ Thorough research methodology
✅ Comprehensive data collection
✅ High-quality output achieved
⚠️ Scope creep contributed to overrun
📊 Generated extensive insights for project

TASK DEPENDENCIES:
- Feeds into: "Build an AI Agent to help startup get accepted to YC"
- Related tasks: "Components in the AI Economy", "On Finding AI Startup Idea"
- Project impact: Foundation for multiple AI initiatives

6. TASK_SESSIONS (Level 6 - Granular session details):
Task 'Define task to do' from project 'Make10000hours' has accumulated 20 minutes across 1 work session.

SESSION BREAKDOWN:
Session #1: June 15, 2025, 14:32-14:52 (20 minutes)
- Session type: Planning/Definition
- Focus quality: High (single uninterrupted session)
- Context: Task creation and scope definition
- Output: Clear task requirements established
- Break pattern: None (continuous 20-minute block)

TASK DETAILS:
- Average session duration: 20 minutes (only 1 session)
- Progress: 100% of estimated 20 minutes (perfect estimation)
- Current status: Completed on Saturday, June 15, 2025
- Created: Saturday, June 15, 2025  
- Priority: Medium
- Last updated: Saturday, June 15, 2025

TIME INVESTMENT PATTERN: Single-session completion (planning task)
- Immediate execution after creation
- No procrastination or delays
- Efficient task scoping achieved
- Clean start-to-finish workflow

ESTIMATION ACCURACY:
- Original estimate: 20 minutes  
- Actual time: 20 minutes
- Variance: 0 minutes (perfect accuracy)
- Task type: Planning tasks well-estimated

SESSION QUALITY INDICATORS:
✅ Perfect time estimation
✅ Single-session completion
✅ No interruptions or context switching
✅ Immediate task execution
📋 Efficient planning methodology

PRODUCTIVITY INSIGHTS:
- Task type: Definition/Planning
- Execution style: Focused single session
- Estimation skill: Excellent for planning tasks
- Work pattern: Immediate action orientation

INTELLIGENT SELECTION STRATEGY:
Analyze the user query and select content types that will provide the most comprehensive answer:

- TIME PERIOD QUERIES: Match the scope (monthly_summary for "this month", weekly_summary for "this week", daily_summary for "today")
- PROJECT QUERIES: Start with project_summary, add task_aggregate for detailed tasks within projects
- TASK QUERIES: Use task_aggregate (comprehensive task data), add task_sessions for detailed session info
- PRODUCTIVITY ANALYTICS: Use higher-level summaries (monthly/weekly) that contain analytics and patterns
- PROGRESS TRACKING: Use task_aggregate and project_summary which contain progress data
- TIME TRACKING DETAILS: Use task_sessions and daily_summary for granular time data
- OVERVIEW QUESTIONS: Start with monthly_summary (most comprehensive) and add supporting levels

Consider what DATA is actually needed to answer the question comprehensively:
- Higher levels contain more context, analytics, and insights
- Lower levels contain more granular detail
- Select types that together provide complete information

EXAMPLES:
- "How productive was I this month?" → PRIMARY: monthly_summary
- "What tasks are in my AI project?" → PRIMARY: project_summary, task_aggregate
- "Show me my work sessions today" → PRIMARY: daily_summary, task_sessions
- "What's my task completion rate?" → PRIMARY: monthly_summary, weekly_summary (contain completion analytics)

Respond in JSON format:
{
  "primaryTypes": ["type1", "type2"],
  "secondaryTypes": ["type3"],
  "reasoning": "Explanation based on what data each selected type provides and why it answers the query",
  "confidence": 85
}`}static getContentTypeDescription(e){return{task_aggregate:"Individual task details with progress tracking, time spent, session count, completion status, and time investment patterns",task_sessions:"Session-level details for specific tasks with duration, session patterns, and completion tracking",project_summary:"Project overviews with task breakdowns by status, analytics including completion velocity, time estimation accuracy, and risk indicators",daily_summary:"Daily productivity breakdowns with project time investment, task-by-task details, session metrics, and focus quality analysis",weekly_summary:"Weekly productivity reports with project time distribution, task progress, completion rates, daily patterns, and momentum indicators",monthly_summary:"Comprehensive monthly overviews with project analytics, top tasks, weekly breakdowns, productivity patterns, achievements, and strategic insights",session:"Legacy session data (use task_sessions instead)"}[e]||"Unknown content type"}static parseAIContentTypeResponse(e){try{const t=e.match(/\{[\s\S]*\}/);if(t){const r=JSON.parse(t[0]),i=a=>a.toLowerCase().replace(/\s+/g,"_");return{primaryTypes:Array.isArray(r.primaryTypes)?r.primaryTypes.map(i):[],secondaryTypes:Array.isArray(r.secondaryTypes)?r.secondaryTypes.map(i):[],reasoning:r.reasoning||"AI analysis completed",confidence:Math.min(100,Math.max(0,r.confidence||70))}}return this.parseAIResponseFallback(e)}catch(t){return console.error("Failed to parse AI content type response:",t),{primaryTypes:["task_aggregate","project_summary"],secondaryTypes:["daily_summary"],reasoning:"Fallback to default types due to parsing error",confidence:50}}}static parseAIResponseFallback(e){const t=["task_aggregate","task_sessions","project_summary","daily_summary","weekly_summary","monthly_summary"],r=e.toLowerCase(),i=t.filter(a=>r.includes(a)||r.includes(a.replace("_"," "))||e.includes(a.toUpperCase().replace("_"," "))||e.includes(a.toUpperCase()));return{primaryTypes:i.slice(0,2),secondaryTypes:i.slice(2,4),reasoning:"Extracted from AI response text analysis",confidence:60}}static convertClassificationToAIFormat(e){const t=this.CONTENT_TYPE_MAPPINGS[e.primaryIntent];return{primaryTypes:t.primary.slice(0,2),secondaryTypes:t.secondary.slice(0,2),reasoning:`Rule-based classification: ${e.primaryIntent} with ${Math.round(e.confidence*100)}% confidence`,confidence:Math.round(e.confidence*100)}}static getContentTypeMappings(){return this.CONTENT_TYPE_MAPPINGS}}zt(Uu,"TASK_PRIORITY_PATTERNS",[/\b(task|tasks)\s+(priorit|urgent|important|deadline|due)/i,/\b(what\s+should\s+i\s+work\s+on|next\s+task|current\s+tasks)/i,/\b(focus|concentrate|working\s+on|task\s+list)/i,/\b(pomodoro|session|active\s+task|in\s+progress)/i,/\b(complete|finish|accomplish|productivity)/i,/\b(efficiency|optimize\s+work|time\s+management)/i,/\b(list\s+of\s+tasks?|tasks?\s+in\s+|tasks?\s+for\s+|show\s+.*tasks?)/i,/\b(give\s+me.*tasks?|tasks?\s+from|tasks?\s+belonging\s+to)/i,/\b(what\s+tasks?|which\s+tasks?|all\s+tasks?)/i,/\b(tasks?\s+in\s+the\s+.*project|project.*tasks?)/i]),zt(Uu,"PROJECT_FOCUS_PATTERNS",[/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(projects?\s+(available|existing|current))/i,/\b(portfolio|initiative|workstream|deliverable)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i,/\b(milestone|roadmap|project\s+plan)/i,/\b(project\s+comparison|project\s+metrics)/i,/\b(overall\s+progress|total\s+work|project\s+distribution)/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(in\s+the\s+["']?[a-zA-Z0-9\s]+["']?\s+project)/i,/\b(project\s+["']?[a-zA-Z0-9\s]+["']?)/i,/\b(from\s+project|belonging\s+to\s+project)/i]),zt(Uu,"SUMMARY_INSIGHTS_PATTERNS",[/\b(summary|overview|recap|insight|analysis)/i,/\b(daily|weekly|monthly)\s+(summary|report|pattern|trend)/i,/\b(productivity\s+(insight|analysis|pattern|trend))/i,/\b(time\s+spent|total\s+time|overall\s+stats)/i,/\b(performance|metrics|analytics|statistics)/i,/\b(how\s+productive|productivity\s+review)/i,/\b(last\s+(week|month)|this\s+(week|month)|past\s+(week|month))/i]),zt(Uu,"CONTENT_TYPE_MAPPINGS",{task_priority:{primary:["task_aggregate","task_sessions"],secondary:["project_summary","daily_summary"],tertiary:["weekly_summary","monthly_summary"]},project_focus:{primary:["project_summary","task_aggregate"],secondary:["weekly_summary","task_sessions"],tertiary:["monthly_summary","daily_summary"]},summary_insights:{primary:["daily_summary","weekly_summary","monthly_summary"],secondary:["task_aggregate","project_summary"],tertiary:["task_sessions","session"]},general:{primary:["task_aggregate","project_summary"],secondary:["daily_summary","weekly_summary"],tertiary:["monthly_summary","task_sessions"]}});class YG{static generateContextualPrompt(e,t,r,i){let o=`${this.INTENT_SPECIFIC_PROMPTS[r.primaryIntent].systemMessage}

`;return o+="CRITICAL FORMATTING REQUIREMENTS:\\n",o+="• Use clean, scannable format with minimal clutter\\n",o+="• Start with ONE emoji section header: 🎯 **This Week's Focus**\\n",o+="• Use simple hierarchy:\\n",o+="  **Main Category** (bold, no bullets)\\n",o+="  • Key item (bullet + normal text)\\n",o+="  • Another key item\\n",o+="• **Bold only** project names and key metrics like **Make10000hours**\\n",o+="• Limit to 3-5 main points maximum\\n",o+="• NO sub-bullets, NO checkboxes mixed with bullets\\n",o+="• ONE blank line between sections only\\n",o+="• Keep responses short and actionable\\n\\n",o+="FORMATTING EXAMPLE:\\n",o+="🎯 **This Week's Focus**\\n\\n",o+="**Priority Tasks**\\n",o+="• **Make10000hours** project needs **2h 15m** more work\\n",o+="• Calendar improvements are **66% complete**\\n\\n",o+="**Key Metrics**\\n",o+="• **20 tasks completed** out of 22 this week\\n",o+="• **Strong momentum** with daily completion rate\\n\\n",o+="**Next Actions**\\n",o+="• Focus on morning productivity sessions\\n",o+="• Complete remaining calendar features\\n\\n",o+=`RESPONSE REQUIREMENTS:
`,o+=`1. Answer only what was asked - no extra information
`,o+=`2. Be direct and specific
`,o+=`3. Keep responses brief and scannable
`,o+=`4. Focus on actionable information only

`,o+=`USER QUESTION: ${e}

`,o+=`RELEVANT CONTEXT:
${t}
`,o}static getIntentSpecificGuidance(e){switch(e.primaryIntent){case"task_priority":return"Focus on analyzing task urgency, dependencies, and productivity patterns. Provide specific recommendations about what to work on next and when. Consider time estimates, deadlines, and the user's peak productivity periods.";case"project_focus":return"Analyze project-level metrics, progress, and resource allocation. Provide strategic insights about project portfolio health and recommendations for optimization. Compare projects and identify patterns.";case"summary_insights":return"Extract meaningful patterns and trends from the temporal data. Provide statistical insights, identify productivity peaks/valleys, and compare performance across time periods. Make data-driven recommendations.";case"general":return"Provide helpful, specific responses based on available data. Be clear about what information you have and offer relevant insights or recommendations.";default:return""}}static enhancePromptWithDataContext(e,t,r){let i=e;return i+=`

**Data Context:**
`,i+=`- Available data types: ${t.join(", ")}
`,i+=`- Data quality: ${r}
`,r==="low"?i+=`- Note: Limited data available. Provide general guidance and suggest ways to improve data collection.
`:r==="medium"?i+=`- Note: Moderate data available. Provide insights where possible and note any limitations.
`:i+=`- Note: Rich data available. Provide detailed, specific insights and recommendations.
`,i}static generateFallbackPrompt(e,t){return`You are a helpful productivity AI assistant. The user has asked: "${e}"

Available context: ${t}

Please provide a helpful response based on the available information. If the context is limited, acknowledge this and provide general guidance while suggesting how the user might get more specific insights.

Focus on being helpful, specific where possible, and clear about any limitations in the available data.`}}zt(YG,"INTENT_SPECIFIC_PROMPTS",{task_priority:{systemMessage:"You are a productivity AI assistant focused on task prioritization. Provide direct, actionable answers about what to work on next.",instructions:["Answer the specific question asked - nothing more","For task recommendations, provide just the task name and brief reason","Skip background explanations unless directly relevant","Use bullet points only when listing multiple items","Focus on the most important 1-3 items only"],responseFormat:"Provide a direct answer that tells the user exactly what to do next.",examples:["Work on 'API Integration' - it's 2 days overdue and blocking other tasks.","Focus on Project Alpha today - deadline is tomorrow.","Complete the Database task - it has the highest impact."]},project_focus:{systemMessage:"You are a project management AI that provides clear project insights and recommendations.",instructions:["Answer only what was asked about projects","Give key metrics without extensive explanations","Highlight the most critical information only","Skip detailed analysis unless specifically requested","Focus on actionable insights"],responseFormat:"Provide the specific project information requested with key insights only.",examples:["Project Alpha: 60% complete, 2 weeks behind schedule.","You're spending most time on Mobile App (40% of total hours).","Website project needs attention - no progress in 5 days."]},summary_insights:{systemMessage:"You are a productivity analytics AI that provides concise data insights.",instructions:["Provide key metrics directly without lengthy explanations","Focus on the most significant patterns only","Skip statistical details unless specifically asked","Give 2-3 main insights maximum","Make insights actionable"],responseFormat:"Give the main productivity insights in a brief, scannable format.",examples:["This week: 23 hours focused work, 12 tasks completed. Peak productivity on Tuesdays.","You're 15% more productive in mornings. Consider scheduling important tasks then.","Average task time increased 20% - consider breaking large tasks down."]},general:{systemMessage:"You are a helpful productivity AI. Answer questions directly and concisely using available data.",instructions:["Answer exactly what the user asked","Keep responses brief and to the point","Include only essential information","Skip context unless it's critical","Focus on what the user can act on"],responseFormat:"Provide a direct, focused answer based on the available data.",examples:["You completed 5 tasks today.","Current project status: 3 active, 1 completed this week.","Most productive time: 9-11 AM based on your patterns."]}});class t1{static async queryWithRAG(e,t,r){const i=Date.now();try{console.log("🎯 Enhanced RAG Service: Processing query:",e);let a;try{console.log("🤖 Getting AI-powered content type selection..."),a=await Uu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",a)}catch(l){console.warn("⚠️ AI content type selection failed, using rule-based fallback:",l);const c=Uu.classifyQuery(e),u=Uu.getContentTypeMappings()[c.primaryIntent];a={primaryTypes:u.primary.slice(0,2),secondaryTypes:u.secondary.slice(0,2),reasoning:`Rule-based fallback: ${c.primaryIntent}`,confidence:Math.round(c.confidence*100)}}const o=await this.performIntelligentSearch(e,t,a.primaryTypes,a.secondaryTypes),s=await this.generateResponseFromDocs(e,o,i,a,r);return s.metadata.contentTypeSelection=a,s.metadata.searchStrategy=`ai_content_selection_${a.confidence>80?"high":"medium"}_confidence`,s}catch(a){return console.error("❌ Enhanced RAG Service failed:",a),this.generateFallbackResponse(e,i,[])}}static async queryWithHybridSearch(e,t,r,i){const a=Date.now();try{console.log(`🔍 Enhanced RAG query: "${e}" with filters:`,r);const o=this.determineOptimalChunkLevels(e);console.log(`🎯 Optimal chunk levels: [${o.join(", ")}]`);const s=await this.executeHybridSearch(e,t,{...r,chunkLevels:(r==null?void 0:r.chunkLevels)||o});console.log(`📚 Retrieved ${s.length} relevant documents`);const l=this.selectDiverseProjectSources(s,30);console.log(`🎯 Hybrid diverse selection: ${l.length}/${s.length} sources across multiple projects`);const c={primaryIntent:"general",secondaryIntents:[],confidence:.5,suggestedContentTypes:["task_aggregate","project_summary","daily_summary"],suggestedChunkTypes:["task_aggregate","project_summary","temporal_pattern"],mixingStrategy:"balanced"};return await this.generateResponseFromDocs(e,l,a,c,i)}catch(o){return console.error("❌ Enhanced RAG query error:",o),this.generateFallbackResponse(e,a)}}static async executeEnhancedSearch(e,t,r){try{const i=await this.performSemanticSearch(e,t,r);return i.length>0?(console.log(`✅ Semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using keyword search"),await this.performKeywordSearch(e,t,r))}catch(i){return console.error("❌ Enhanced search failed:",i),[]}}static async executeIntelligentSearch(e,t,r){try{console.log(`🔍 Starting intelligent search with ${r.suggestedContentTypes.length} prioritized content types`);const i=await this.performContentAwareSemanticSearch(e,t,r.suggestedContentTypes);return i.length>0?(console.log(`✅ Content-aware semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using content-aware keyword search"),await this.performContentAwareKeywordSearch(e,t,r.suggestedContentTypes))}catch(i){return console.error("❌ Intelligent search failed:",i),await this.executeEnhancedSearch(e,t,{chunkLevels:[1,2,3,4,5,6]})}}static async performContentAwareSemanticSearch(e,t,r){try{const i=await Ar.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Content-aware search for types: [${r.join(", ")}]`);const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{console.log(`🔍 Searching table: ${s} for prioritized content types`);let l=St.from(s).select("*").eq("user_id",t).not("embedding","is",null);r.length>0&&(console.log(`🎯 Filtering by content types: [${r.join(", ")}]`),l=l.in("content_type",r));const{data:c,error:u}=await l.limit(100);if(!u&&c&&c.length>0){console.log(`✅ Found ${c.length} documents with prioritized content types in ${s}`);const h=c.map((f,m)=>{let v=f.embedding;if(typeof f.embedding=="string")try{v=JSON.parse(f.embedding)}catch(C){return console.error("Failed to parse embedding:",C),{...f,similarity_score:0,content_type_boost:0}}if(!Array.isArray(v))return{...f,similarity_score:0,content_type_boost:0};const y=this.calculateCosineSimilarity(i,v),w=f.content_type||"unknown",_=r.indexOf(w),T=_!==-1?(r.length-_)/r.length*.3:0,A=Math.min(1,y+T);return{...f,similarity_score:y,content_type_boost:T,final_score:A,embedding:v}}).sort((f,m)=>m.final_score-f.final_score).filter(f=>f.final_score>.1);console.log(`📊 Content-aware semantic results: ${h.length} docs above threshold`),h.length>0&&console.log(`Top scores: ${h.slice(0,3).map(f=>`${f.content_type}(${f.final_score.toFixed(3)})`).join(", ")}`),o=h.slice(0,80);break}else if(c&&c.length===0&&r.length>0){console.log(`⚠️ No documents found with prioritized content types [${r.join(", ")}], falling back to broader search`);let d=St.from(s).select("*").eq("user_id",t).not("embedding","is",null);const{data:h,error:f}=await d.limit(100);if(!f&&h&&h.length>0){console.log(`✅ Fallback search found ${h.length} documents in ${s}`);const v=h.map((y,w)=>{let _=y.embedding;if(typeof y.embedding=="string")try{_=JSON.parse(y.embedding)}catch(A){return console.error("Failed to parse embedding:",A),{...y,similarity_score:0,content_type_boost:0}}if(!Array.isArray(_))return{...y,similarity_score:0,content_type_boost:0};const T=this.calculateCosineSimilarity(i,_);return{...y,similarity_score:T,content_type_boost:0,final_score:T,embedding:_}}).sort((y,w)=>w.final_score-y.final_score).filter(y=>y.final_score>.1);console.log(`📊 Fallback semantic results: ${v.length} docs above threshold`),v.length>0&&(console.log(`Available content types: ${[...new Set(v.map(y=>y.content_type))].join(", ")}`),console.log(`Top scores: ${v.slice(0,3).map(y=>`${y.content_type}(${y.final_score.toFixed(3)})`).join(", ")}`)),o=v.slice(0,80);break}}}catch(l){console.warn(`⚠️ Error searching ${s}:`,l);continue}return o}catch(i){return console.warn("Content-aware semantic search failed:",i),[]}}static async performContentAwareKeywordSearch(e,t,r){try{console.log(`🔍 Content-aware keyword search for types: [${r.join(", ")}]`);const i=e.toLowerCase().split(/\s+/).filter(u=>u.length>2);console.log(`🔍 Keyword search terms: [${i.join(", ")}]`);let a=St.from("user_productivity_documents").select("*").eq("user_id",t);if(r.length>0&&(a=a.in("content_type",r)),i.length>0){const u=i.join(" | ");a=a.textSearch("content",u)}const{data:o,error:s}=await a.order("created_at",{ascending:!1}).limit(80);if(s)return console.error("❌ Content-aware keyword search error:",s),[];if(!o||o.length===0)return console.log("ℹ️ No documents found with content-aware keyword search"),[];const c=o.map(u=>{const d=(u.content||"").toLowerCase();let h=0;i.forEach(w=>{const _=(d.match(new RegExp(w,"g"))||[]).length;h+=_*(1/Math.sqrt(w.length))}),h=Math.min(1,h/i.length);const f=u.content_type||"unknown",m=r.indexOf(f),v=m!==-1?(r.length-m)/r.length*.4:0,y=Math.min(1,h+v);return{...u,relevanceScore:y,keywordScore:h,contentTypeBoost:v}}).sort((u,d)=>d.relevanceScore-u.relevanceScore).filter(u=>u.relevanceScore>.05);return console.log(`📊 Content-aware keyword search found ${c.length} relevant documents`),c.length>0&&console.log(`Top matches: ${c.slice(0,3).map(u=>`${u.content_type}(${u.relevanceScore.toFixed(3)})`).join(", ")}`),c.slice(0,60)}catch(i){return console.error("❌ Content-aware keyword search failed:",i),[]}}static async performSemanticSearch(e,t,r){try{const i=await Ar.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Query embedding generated: ${i.length} dimensions`);const a=["user_productivity_documents","postgres","embeddings"];let o=[],s="";for(const d of a)try{console.log(`🔍 Trying table: ${d}`);let h=St.from(d).select("*").eq("user_id",t);if(d==="postgres"){const v=["user_id","userId","user"];for(const y of v)try{h=St.from(d).select("*").eq(y,t);break}catch{continue}}d!=="postgres"&&(h=h.not("embedding","is",null)),r.chunkLevels.length>0&&d!=="postgres"&&(h=h.in("metadata->chunkLevel",r.chunkLevels));const{data:f,error:m}=await h.limit(100);if(!m&&f&&f.length>0){o=f,s=d,console.log(`✅ Successfully found ${f.length} documents in table: ${d}`);break}else console.log(m?`⚠️ Table ${d} error: ${m.message}`:`⚠️ Table ${d} returned no documents`)}catch(h){console.log(`❌ Table ${d} failed: ${h}`);continue}if(console.log(`🔍 Semantic search found ${(o==null?void 0:o.length)||0} documents with embeddings from table: ${s}`),console.log(`📊 Query embedding length: ${i.length}`),!o||o.length===0)return console.log("⚠️ No documents found in any table for user"),[];if(s==="postgres"){console.log("🔄 Using postgres table - checking structure...");const d=o[0];if(console.log("📋 Sample document keys:",Object.keys(d)),d.embedding)console.log("✅ Postgres table has embeddings, attempting similarity search");else return console.log("⚠️ Postgres table has no embeddings, returning documents directly"),o.slice(0,10)}const c=o.map((d,h)=>{var v,y;h===0&&(console.log("🔍 Debug first document embedding:"),console.log("- Embedding type:",typeof d.embedding),console.log("- Embedding is array:",Array.isArray(d.embedding)),console.log("- Embedding length:",(v=d.embedding)==null?void 0:v.length),console.log("- First few values:",(y=d.embedding)==null?void 0:y.slice(0,5)),console.log("- Query embedding type:",typeof i),console.log("- Query embedding length:",i.length),console.log("- Query first few values:",i.slice(0,5)));let f=d.embedding;if(typeof d.embedding=="string")try{f=JSON.parse(d.embedding),h===0&&console.log("✅ Successfully parsed embedding from string")}catch(w){return console.error("❌ Failed to parse embedding string:",w),{...d,similarity_score:0}}if(!Array.isArray(f))return h===0&&console.error("❌ Embedding is not an array:",typeof f),{...d,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return h===0&&console.log("🎯 First document similarity score:",m),{...d,similarity_score:m,embedding:f}}).sort((d,h)=>h.similarity_score-d.similarity_score);let u=c.filter(d=>d.similarity_score>.3);return u.length===0&&(console.log("⚠️ No docs above 0.3 threshold, trying 0.15 threshold"),u=c.filter(d=>d.similarity_score>.15)),u.length===0&&(console.log("⚠️ No docs above 0.15 threshold, taking top 5 docs"),u=c.slice(0,5)),u=u.slice(0,20),console.log(`🔍 Semantic search found ${u.length} relevant documents`),console.log(`📊 Similarity scores: ${u.slice(0,3).map(d=>{var h;return(h=d.similarity_score)==null?void 0:h.toFixed(3)}).join(", ")}`),u.length>0&&u.every(d=>d.similarity_score===0)?(console.log("🔄 All similarities are 0, trying PostgreSQL native vector search..."),await this.performNativeVectorSearch(i,t,s)):u}catch(i){return console.warn("Semantic search failed:",i),[]}}static async performNativeVectorSearch(e,t,r){try{console.log("🚀 Starting direct vector comparison...");const{data:i,error:a}=await St.from(r).select("*").eq("user_id",t).not("embedding","is",null).limit(100);if(a||!i)return console.error("❌ Failed to fetch documents for native search:",a),[];console.log(`📊 Processing ${i.length} documents with direct comparison...`);const s=i.map((l,c)=>{let u=l.embedding;if(typeof l.embedding=="string")try{u=JSON.parse(l.embedding)}catch(h){return console.error(`❌ Failed to parse embedding for doc ${c}:`,h),{...l,similarity_score:0}}let d=0;if(Array.isArray(u)&&u.length===e.length)try{for(let h=0;h<e.length;h++)d+=e[h]*u[h];d=Math.max(0,(d+1)/2)}catch(h){console.error(`❌ Similarity calculation failed for doc ${c}:`,h),d=0}return{...l,similarity_score:d,embedding:u}}).sort((l,c)=>c.similarity_score-l.similarity_score).slice(0,20);return console.log(`✅ Native search returned ${s.length} results`),console.log(`📊 Top similarities: ${s.slice(0,3).map(l=>{var c;return(c=l.similarity_score)==null?void 0:c.toFixed(3)}).join(", ")}`),s}catch(i){return console.error("❌ Native vector search error:",i),[]}}static async performKeywordSearch(e,t,r){const i=e.toLowerCase().split(" ").filter(a=>a.length>2);try{const a=["user_productivity_documents","postgres"];for(const o of a){console.log(`🔍 Keyword search trying table: ${o}`);let s=St.from(o).select("*").eq("user_id",t);if(o==="postgres"){const c=["user_id","userId","user"];for(const u of c)try{s=St.from(o).select("*").eq(u,t);break}catch{continue}}r.chunkLevels.length>0&&o!=="postgres"&&(s=s.in("metadata->chunkLevel",r.chunkLevels));const l=[()=>s.textSearch("content",e),()=>s.ilike("content",`%${e}%`),()=>{let c=s;return i.forEach(u=>{c=c.ilike("content",`%${u}%`)}),c},()=>s.order("created_at",{ascending:!1})];for(let c=0;c<l.length;c++){const u=l[c];try{console.log(`🔍 Trying keyword search strategy ${c+1}/${l.length} on table ${o}`);const{data:d,error:h}=await u().order("created_at",{ascending:!1}).limit(15);if(!h&&d&&d.length>0)return console.log(`✅ Keyword search strategy ${c+1} succeeded with ${d.length} results from table ${o}`),d;h?console.log(`⚠️ Keyword search strategy ${c+1} error on table ${o}:`,h.message):console.log(`⚠️ Keyword search strategy ${c+1} returned no results from table ${o}`)}catch(d){console.log(`❌ Keyword search strategy ${c+1} failed on table ${o}:`,d);continue}}}return[]}catch(a){return console.error("All keyword search strategies failed:",a),[]}}static async processAndStoreChunks(e){console.log(`🚀 Processing and storing chunks for user: ${e}`);try{const t=await WG.createMultiLevelChunks(e);let r=0;const i=[];for(const a of t)try{await this.storeChunkWithEmbedding(a,e),r++,r%10===0&&await new Promise(o=>setTimeout(o,100))}catch(o){i.push(`Chunk ${a.id}: ${o instanceof Error?o.message:"Unknown error"}`)}return console.log(`✅ Stored ${r}/${t.length} chunks`),{success:i.length===0,chunksProcessed:r,errors:i}}catch(t){return console.error("❌ Error processing chunks:",t),{success:!1,chunksProcessed:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}static async executeHybridSearch(e,t,r){console.log("🔀 Using NEW True Hybrid Search (Vector + BM25 + RRF)");try{const{HybridSearchService:i}=await vr(async()=>{const{HybridSearchService:l}=await Promise.resolve().then(()=>NPt);return{HybridSearchService:l}},void 0),a={chunkLevels:r.chunkLevels,timeframe:r.timeframe||"all",projects:r.projects||[],vectorWeight:1,keywordWeight:1,rrfK:60,maxResults:20,minVectorSimilarity:.1,minKeywordScore:0,enableEnhancedBM25:!0,contentTypeBoosts:{task_aggregate:1.2,project_summary:1.1,session:1,daily_summary:1},enableReranking:!0,rerankingModel:"hybrid",rerankingCandidates:50,minRerankScore:.1,rerankingWeights:{diversityWeight:.1,recencyWeight:.05,contentTypeWeights:{project_summary:1.2,task_aggregate:1.1,session:1,daily_summary:.9}}};r.productivityRange&&(a.contentTypeBoosts={...a.contentTypeBoosts,task_aggregate:1.3,session:1.2}),r.timeOfDay&&(a.contentTypeBoosts={...a.contentTypeBoosts,session:1.3,daily_summary:1.2});const o=await i.performHybridSearch(e,t,a);console.log(`✅ Hybrid search completed: ${o.documents.length} results`),console.log(`📊 Vector: ${o.metadata.vectorResultCount}, Keyword: ${o.metadata.keywordResultCount}, Processing: ${o.metadata.processingTime}ms`);let s=o.documents;if(r.completionStatus&&r.completionStatus!=="all"){const l=r.completionStatus==="completed";s=s.filter(c=>{var d,h;const u=(h=(d=c.metadata)==null?void 0:d.analytics)==null?void 0:h.completionRate;return l?u===100:u!==100})}return r.productivityRange&&(s=s.filter(l=>{var u,d;const c=(d=(u=l.metadata)==null?void 0:u.analytics)==null?void 0:d.productivity;return c>=r.productivityRange[0]&&c<=r.productivityRange[1]})),r.timeOfDay&&(s=s.filter(l=>{var c,u;return((u=(c=l.metadata)==null?void 0:c.analytics)==null?void 0:u.timeOfDay)===r.timeOfDay})),console.log(`🎯 After additional filtering: ${s.length} results`),s}catch(i){console.error("❌ Hybrid search failed, falling back to basic search:",i);const{data:a}=await St.from("user_productivity_documents").select("*").eq("user_id",t).ilike("content",`%${e}%`).limit(10);return a||[]}}static determineOptimalChunkLevels(e){const t=e.toLowerCase();return t.includes("task")||t.includes("working on")||t.includes("progress")||t.includes("complete")||t.includes("productivity")||t.includes("efficiency")?[1,3]:t.includes("project")||t.includes("overall")||t.includes("summary")||t.includes("total")||t.includes("portfolio")?[2,1]:t.includes("session")||t.includes("today")||t.includes("this morning")||t.includes("right now")||t.includes("current")||t.includes("detailed")?[3,1]:t.includes("pattern")||t.includes("week")||t.includes("productivity trends")||t.includes("when")||t.includes("daily")||t.includes("weekly")?[4,2]:t.includes("yesterday")||t.includes("last week")||t.includes("this week")||t.includes("timeline")?[4,3]:t.includes("insight")||t.includes("recommend")||t.includes("analyze")||t.includes("improve")?[1,2,4]:[1,2,3,4]}static selectDiverseProjectSources(e,t=12){if(!e||e.length===0)return[];const r={},i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.metadata)==null?void 0:f.projectId)||c.project_id||"unknown";u!=="unknown"?(r[u]||(r[u]=[]),r[u].push(c)):i.push(c)});const a=Object.keys(r);console.log(`📊 Found docs from ${a.length} projects + ${i.length} uncategorized docs`),a.length>0&&a.forEach(c=>{console.log(`   - Project ${c}: ${r[c].length} docs`)});const o=Math.max(3,Math.floor(t/Math.max(a.length,1))),s=t-o*a.length;console.log(`📈 Source distribution: ${o} per project + ${s} bonus slots = target ${t} sources`);let l=[];if(a.forEach((c,u)=>{const d=r[c].sort((f,m)=>(m.similarity_score||m.relevanceScore||0)-(f.similarity_score||f.relevanceScore||0)),h=o+(u<s?1:0);l.push(...d.slice(0,h))}),l.length<t&&i.length>0){const c=i.sort((d,h)=>(h.similarity_score||h.relevanceScore||0)-(d.similarity_score||d.relevanceScore||0)),u=t-l.length;l.push(...c.slice(0,u))}return l.sort((c,u)=>(u.similarity_score||u.relevanceScore||0)-(c.similarity_score||c.relevanceScore||0)).slice(0,t)}static rankDocsByRelevance(e,t,r){const i=t.toLowerCase().split(" ");return e.map(a=>{var u,d,h;let o=0;const s=((u=a.metadata)==null?void 0:u.chunkLevel)||1,l=r.indexOf(s);l!==-1&&(o+=(r.length-l)*10);const c=a.content.toLowerCase();if(i.forEach(f=>{c.includes(f)&&(o+=5)}),a.created_at){const f=(Date.now()-new Date(a.created_at).getTime())/864e5;o+=Math.max(0,5-f)}return(h=(d=a.metadata)==null?void 0:d.analytics)!=null&&h.productivity&&(o+=a.metadata.analytics.productivity),{...a,relevanceScore:o}}).sort((a,o)=>o.relevanceScore-a.relevanceScore)}static async generateResponseFromDocs(e,t,r,i,a){var c,u;try{console.log(`📊 generateResponseFromDocs called with ${t.length} docs:`,t.map(y=>{var w;return{id:y.id,type:y.content_type,similarity:y.similarity,relevanceScore:y.relevanceScore,hasContent:!!y.content,contentLength:((w=y.content)==null?void 0:w.length)||0}}));const d=t.map(y=>`${y.content} (Type: ${y.content_type}, Relevance: ${y.similarity||.5})`).join(`

`),{AdvancedPromptService:h}=await vr(async()=>{const{AdvancedPromptService:y}=await import("./advancedPromptService-BYYRousN.js");return{AdvancedPromptService:y}},[]),f="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,m=await h.processWithAdvancedPrompting(e,d,f,a||[]);console.log(`🎯 Advanced prompting: ${m.technique_used}, confidence: ${m.confidence}`);const v=t.map((y,w)=>{var _,T,A,C,k;return{id:y.id||`doc_${w}`,type:((_=y.metadata)==null?void 0:_.chunkType)||y.content_type||"session",contentId:((A=(T=y.metadata)==null?void 0:T.entities)==null?void 0:A.taskId)||((k=(C=y.metadata)==null?void 0:C.entities)==null?void 0:k.projectId)||y.id,title:this.generateSourceTitle(y),snippet:y.content.substring(0,150)+"...",relevanceScore:y.similarity||y.relevanceScore||1-w*.1}});return console.log("🔍 Final sources structure (Advanced path):",v.map(y=>{var w;return{id:y.id,type:y.type,title:y.title,relevanceScore:y.relevanceScore,hasSnippet:!!y.snippet,snippetLength:((w=y.snippet)==null?void 0:w.length)||0}})),{response:m.response,sources:v,metadata:{totalSources:t.length,responseTime:Date.now()-r,searchStrategy:`enhanced_with_${m.technique_used}`,confidence:m.confidence,retrievedDocuments:t.length,relevanceScore:t.length>0?t[0].similarity||t[0].relevanceScore||.8:0,tokens:this.estimateTokens(m.response),model:"gpt-4o-mini",chunkLevelsUsed:Array.from(new Set(t.map(y=>{var w;return(w=y.metadata)==null?void 0:w.chunkLevel}).filter(Boolean))),advancedPrompting:{technique:m.technique_used,confidence:m.confidence,processingTime:m.processing_time,reasoningSteps:((c=m.reasoning)==null?void 0:c.reasoning_steps.length)||0,validationScore:(u=m.validation)==null?void 0:u.overall_score,correctionApplied:!!m.correction}}}}catch(d){console.error("❌ Advanced prompting failed, using standard approach:",d)}if(t.length===0)return this.generateFallbackResponse(e,r,t);const o=t.map((d,h)=>{var y;const f=d.metadata||{},m=((y=f.entities)==null?void 0:y.projectId)||f.projectId||d.project_id||"Unknown Project";return`${f.chunkType?`[Project: ${m} | ${f.chunkType} - Level ${f.chunkLevel}]`:`[Project: ${m} | Document]`} ${d.content}`}).join(`

`),s="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,l=this.buildEnhancedPrompt(e,o,t,s);try{const d=await Ar.generateChatResponse({query:l,context:o,conversationHistory:a||[]}),h=this.cleanResponse(d),f=t.map((m,v)=>{var y,w,_,T,A;return{id:m.id||`doc_${v}`,type:((y=m.metadata)==null?void 0:y.chunkType)||m.content_type||"session",contentId:((_=(w=m.metadata)==null?void 0:w.entities)==null?void 0:_.taskId)||((A=(T=m.metadata)==null?void 0:T.entities)==null?void 0:A.projectId)||m.id,title:this.generateSourceTitle(m),snippet:m.content.substring(0,150)+"...",relevanceScore:m.similarity||m.relevanceScore||1-v*.1}});return console.log("🔍 Final sources structure (Fallback path):",f.map(m=>{var v;return{id:m.id,type:m.type,title:m.title,relevanceScore:m.relevanceScore,hasSnippet:!!m.snippet,snippetLength:((v=m.snippet)==null?void 0:v.length)||0}})),{response:h,sources:f,metadata:{responseTime:Date.now()-r,relevanceScore:t.length>0?t[0].relevanceScore||.8:0,tokens:this.estimateTokens(h),model:"gpt-4o-mini",retrievedDocuments:t.length,chunkLevelsUsed:Array.from(new Set(t.map(m=>{var v;return(v=m.metadata)==null?void 0:v.chunkLevel}).filter(Boolean))),searchStrategy:"hybrid_multi_level"}}}catch(d){return console.error("❌ OpenAI response generation failed:",d),this.generateFallbackResponse(e,r,t)}}static async storeChunkWithEmbedding(e,t){var r,i;try{const a=await Ar.generateEmbedding({content:e.content,contentType:e.content_type}),o=e.content_type,s=((r=e.metadata.entities)==null?void 0:r.taskId)||((i=e.metadata.entities)==null?void 0:i.projectId)||e.id,{data:l}=await St.from("user_productivity_documents").select("id").eq("user_id",t).eq("content_type",o).eq("metadata->>documentId",s).single(),c={user_id:t,content_type:o,content:e.content,embedding:a,metadata:{...e.metadata,isEnhanced:!0,documentId:s}};let u;if(l?u=(await St.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await St.from("user_productivity_documents").insert(c)).error,u)throw u}catch(a){throw console.error(`Failed to store chunk ${e.id}:`,a),a}}static buildEnhancedPrompt(e,t,r,i){const a=YG.generateContextualPrompt(e,t,i),o=Array.from(new Set(r.map(c=>{var u;return c.content_type||((u=c.metadata)==null?void 0:u.chunkType)||"unknown"}).filter(c=>c!=="unknown")));let s="low";r.length>=15&&o.length>=3?s="high":r.length>=8&&o.length>=2&&(s="medium");const l=YG.enhancePromptWithDataContext(a,o,s);return console.log(`🎯 Generated ${i.primaryIntent} prompt with ${s} data quality`),l}static generateSourceTitle(e){switch((e.metadata||{}).chunkType){case"session":return"Work Session";case"task_aggregate":return"Task Summary";case"project_summary":return"Project Overview";case"task_sessions":return"Task Sessions Summary";case"temporal_pattern":return"Productivity Pattern";default:return e.content_type||"Document"}}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getFullYear(),t.getMonth()-1,t.getDate()).toISOString();default:return new Date(0).toISOString()}}static generateFallbackResponse(e,t,r){const i=["Try asking about your recent work sessions or tasks","Ask about specific projects you're working on","Request information for a specific time period","Ask for help finding specific data"];return{response:r&&r.length>0?`I found ${r.length} related items in your productivity data, but I'm having trouble generating a detailed analysis right now. ${i[Math.floor(Math.random()*i.length)]}.`:`I couldn't find specific productivity data related to your query. This might be because your data hasn't been synced yet. Try running a data sync first, or ${i[Math.floor(Math.random()*i.length)]}.`,sources:r?r.slice(0,8).map((a,o)=>({id:a.id||`fallback_${o}`,type:a.content_type||"document",contentId:a.id||`fallback_${o}`,title:a.content_type||"Document",snippet:a.content.substring(0,100)+"...",relevanceScore:.3})):[],metadata:{responseTime:Date.now()-t,relevanceScore:.2,tokens:50,model:"fallback",retrievedDocuments:(r==null?void 0:r.length)||0,chunkLevelsUsed:[],searchStrategy:"fallback"}}}static estimateTokens(e){return Math.ceil(e.length/4)}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static calculateCosineSimilarity(e,t){if(!e||!t)return console.error("❌ One or both vectors are null/undefined"),0;if(!Array.isArray(e)||!Array.isArray(t))return console.error("❌ One or both vectors are not arrays:",typeof e,typeof t),0;if(e.length!==t.length)return console.error(`❌ Vector length mismatch: ${e.length} vs ${t.length}`),0;if(e.length===0)return console.error("❌ Empty vectors provided"),0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++){const l=Number(e[s]),c=Number(t[s]);if(isNaN(l)||isNaN(c))return console.error(`❌ NaN value found at index ${s}: vecA[${s}]=${e[s]}, vecB[${s}]=${t[s]}`),0;r+=l*c,i+=l*l,a+=c*c}if(i===0||a===0)return console.error("❌ One or both vectors have zero magnitude"),0;const o=r/(Math.sqrt(i)*Math.sqrt(a));return isNaN(o)?(console.error("❌ Cosine similarity calculation resulted in NaN"),0):o}static async ensureRichContext(e,t,r,i){console.log(`🎯 Rich context analysis: ${e.length} initial sources (target: 40-80)`);let s=[...e];if(s.length>=40)return console.log("✅ Sufficient sources found, applying diversity optimization"),this.optimizeSourceDiversity(s,80);console.log(`📈 Insufficient sources (${s.length}/40), applying progressive enrichment`);try{const c=await this.performRelaxedSimilaritySearch(t,r,i);if(s=this.mergeUniqueDocuments(s,c),console.log(`📊 After relaxed similarity: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const u=await this.performExpandedContentTypeSearch(t,r,i);if(s=this.mergeUniqueDocuments(s,u),console.log(`📊 After expanded content types: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const d=await this.performTemporalDiversifiedSearch(t,r);if(s=this.mergeUniqueDocuments(s,d),console.log(`📊 After temporal diversification: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const h=await this.performSemanticNeighborExpansion(s,r);s=this.mergeUniqueDocuments(s,h),console.log(`📊 After semantic neighbor expansion: ${s.length} sources`)}catch(c){console.error("❌ Error during rich context enrichment:",c)}const l=this.optimizeSourceDiversity(s,80);return console.log(`🎯 Final rich context: ${l.length} sources (${l.length>=40?"✅ sufficient":"⚠️ limited"})`),l}static async performRelaxedSimilaritySearch(e,t,r){try{const i=await Ar.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return[];console.log("🔍 Relaxed similarity search (threshold: 0.05)");const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{const{data:l,error:c}=await St.from(s).select("*").eq("user_id",t).not("embedding","is",null).limit(200);if(!c&&l&&l.length>0){o=l.map(h=>{let f=h.embedding;if(typeof h.embedding=="string")try{f=JSON.parse(h.embedding)}catch{return{...h,similarity_score:0}}if(!Array.isArray(f))return{...h,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return{...h,similarity_score:m,embedding:f}}).filter(h=>h.similarity_score>.05).sort((h,f)=>f.similarity_score-h.similarity_score).slice(0,100);break}}catch{continue}return console.log(`📊 Relaxed similarity found: ${o.length} additional sources`),o}catch(i){return console.warn("⚠️ Relaxed similarity search failed:",i),[]}}static async performExpandedContentTypeSearch(e,t,r){try{console.log("🔍 Expanded content type search beyond prioritized types");const{data:i,error:a}=await St.from("user_productivity_documents").select("content_type").eq("user_id",t).not("content_type","is",null);if(a||!i)return[];const s=[...new Set(i.map(m=>m.content_type))].filter(m=>!r.suggestedContentTypes.includes(m));if(s.length===0)return[];console.log(`📊 Searching expanded content types: [${s.join(", ")}]`);const l=e.toLowerCase().split(/\s+/).filter(m=>m.length>2);let c=St.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",s);if(l.length>0){const m=l.join(" | ");c=c.textSearch("content",m)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(80);if(d||!u)return[];const f=u.map(m=>{const v=(m.content||"").toLowerCase();let y=0;return l.forEach(w=>{const _=(v.match(new RegExp(w,"g"))||[]).length;y+=_}),{...m,relevanceScore:y/Math.max(1,l.length),source:"expanded_content_types"}}).sort((m,v)=>v.relevanceScore-m.relevanceScore).filter(m=>m.relevanceScore>0);return console.log(`📊 Expanded content types found: ${f.length} additional sources`),f.slice(0,50)}catch(i){return console.warn("⚠️ Expanded content type search failed:",i),[]}}static async performTemporalDiversifiedSearch(e,t){try{console.log("🔍 Temporal diversification search");const r=e.toLowerCase().split(/\s+/).filter(s=>s.length>2),i=[{label:"last_7_days",days:7},{label:"last_30_days",days:30},{label:"last_90_days",days:90},{label:"older",days:365}];let a=[];for(const s of i)try{const l=new Date;l.setDate(l.getDate()-s.days);let c=St.from("user_productivity_documents").select("*").eq("user_id",t);if(s.label==="older"?c=c.lt("created_at",l.toISOString()):c=c.gte("created_at",l.toISOString()),r.length>0){const h=r.join(" | ");c=c.textSearch("content",h)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(20);if(!d&&u&&u.length>0){const h=u.map(f=>({...f,temporal_range:s.label,relevanceScore:this.calculateTemporalRelevance(f,e),source:"temporal_diversification"}));a.push(...h),console.log(`📊 ${s.label}: ${u.length} sources`)}}catch(l){console.warn(`⚠️ Temporal range ${s.label} search failed:`,l);continue}const o=a.sort((s,l)=>l.relevanceScore-s.relevanceScore).filter(s=>s.relevanceScore>0);return console.log(`📊 Temporal diversification found: ${o.length} additional sources`),o.slice(0,60)}catch(r){return console.warn("⚠️ Temporal diversification search failed:",r),[]}}static async performSemanticNeighborExpansion(e,t){try{if(console.log(`🔍 Semantic neighbor expansion from ${e.length} seed sources`),e.length===0)return[];const r=e.filter(o=>(o.similarity_score||o.relevanceScore||0)>.2).slice(0,10);if(r.length===0)return[];let i=[];for(const o of r)try{if(!o.embedding)continue;const{data:s,error:l}=await St.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).neq("id",o.id).limit(30);if(!l&&s&&s.length>0){const c=s.map(u=>{let d=u.embedding;if(typeof u.embedding=="string")try{d=JSON.parse(u.embedding)}catch{return null}if(!Array.isArray(d))return null;const h=this.calculateCosineSimilarity(o.embedding,d);return h>.3?{...u,neighbor_similarity:h,seed_id:o.id,source:"semantic_neighbor",embedding:d}:null}).filter(Boolean);i.push(...c)}}catch(s){console.warn(`⚠️ Neighbor expansion for seed ${o.id} failed:`,s);continue}const a=this.deduplicateById(i).sort((o,s)=>s.neighbor_similarity-o.neighbor_similarity);return console.log(`📊 Semantic neighbor expansion found: ${a.length} additional sources`),a.slice(0,40)}catch(r){return console.warn("⚠️ Semantic neighbor expansion failed:",r),[]}}static optimizeSourceDiversity(e,t){if(console.log(`🎯 Optimizing source diversity: ${e.length} → ${t} sources`),e.length<=t)return e;const r=this.groupBy(e,"content_type"),i=this.groupBy(e,"project_id"),a=this.groupBy(e,"temporal_range");console.log("📊 Diversity analysis:",{contentTypes:Object.keys(r).length,projects:Object.keys(i).length,temporalRanges:Object.keys(a).length});const o=[],s=Math.max(1,Math.floor(t*.6/Object.keys(r).length)),l=Math.max(1,Math.floor(t*.3/Object.keys(i).length));Math.max(1,Math.floor(t*.1/Object.keys(a).length)),Object.entries(r).forEach(([u,d])=>{const h=d.sort((f,m)=>(m.similarity_score||m.relevanceScore||m.final_score||0)-(f.similarity_score||f.relevanceScore||f.final_score||0));o.push(...h.slice(0,s))}),Object.entries(i).forEach(([u,d])=>{const f=d.sort((m,v)=>(v.similarity_score||v.relevanceScore||v.final_score||0)-(m.similarity_score||m.relevanceScore||m.final_score||0)).filter(m=>!o.some(v=>v.id===m.id));o.push(...f.slice(0,l))});const c=t-o.length;if(c>0){const u=e.filter(d=>!o.some(h=>h.id===d.id)).sort((d,h)=>(h.similarity_score||h.relevanceScore||h.final_score||0)-(d.similarity_score||d.relevanceScore||d.final_score||0));o.push(...u.slice(0,c))}return console.log(`✅ Diversity optimization complete: ${o.length} sources selected`),o.slice(0,t)}static mergeUniqueDocuments(e,t){const r=new Set(e.map(a=>a.id)),i=t.filter(a=>!r.has(a.id));return[...e,...i]}static deduplicateById(e){const t=new Set;return e.filter(r=>t.has(r.id)?!1:(t.add(r.id),!0))}static groupBy(e,t){return e.reduce((r,i)=>{const a=i[t]||"unknown";return r[a]||(r[a]=[]),r[a].push(i),r},{})}static calculateTemporalRelevance(e,t){const r=(e.content||"").toLowerCase(),i=t.toLowerCase().split(/\s+/).filter(c=>c.length>2);let a=0;i.forEach(c=>{const u=(r.match(new RegExp(c,"g"))||[]).length;a+=u});const o=new Date(e.created_at||e.timestamp||Date.now()),s=(Date.now()-o.getTime())/(1e3*60*60*24),l=Math.max(0,1-s/365);return a/Math.max(1,i.length)+l*.1}static generateRelevanceExplanation(e,t){const r=e.content_type||"unknown",i=e.similarity||.5;return i>.8?`High relevance (${(i*100).toFixed(0)}%) - Strong semantic match with your query`:i>.6?`Good relevance (${(i*100).toFixed(0)}%) - Related ${r} content`:i>.4?`Moderate relevance (${(i*100).toFixed(0)}%) - Contains related information`:`Basic relevance (${(i*100).toFixed(0)}%) - Contextual match`}static async performIntelligentSearch(e,t,r,i){const{supabase:a}=await vr(async()=>{const{supabase:s}=await Promise.resolve().then(()=>EPt);return{supabase:s}},void 0);let o=[];try{for(const s of r){console.log(`🔍 Searching primary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.6,max_results:8});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!0,contentTypeRank:"primary"}));o.push(...u)}}if(o.length<6)for(const s of i){console.log(`🔍 Searching secondary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.5,max_results:4});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!1,contentTypeRank:"secondary"}));o.push(...u)}}return o.sort((s,l)=>s.isPrimary&&!l.isPrimary?-1:!s.isPrimary&&l.isPrimary?1:(l.similarity||0)-(s.similarity||0)),console.log(`✅ Found ${o.length} results using AI content type selection`),o.slice(0,12)}catch(s){return console.error("❌ Intelligent search failed:",s),[]}}}class KDe{static async queryWithHierarchicalPriority(e,t,r){const i=Date.now();try{console.log(`🔍 Starting hierarchical priority search for query: "${e}"`);const a=Uu.classifyQuery(e);console.log(`🎯 Query classification: ${a.primaryIntent} (confidence: ${a.confidence})`);const o=await this.executeHierarchicalSearch(e,t,a);return o.docs.length===0?(console.log("🔄 No docs found in hierarchical search, using simple fallback response"),this.generateFallbackResponse(e,i)):await this.generatePriorityAwareResponse(e,o,a,r,i)}catch(a){return console.error("❌ Hierarchical priority search error:",a),this.generateFallbackResponse(e,i)}}static async executeHierarchicalSearch(e,t,r){const i=Date.now(),a=[];let o=[],s;console.log("📊 Starting priority cascade search...");for(const c of this.PRIORITY_LEVELS){console.log(`🔍 Searching ${c.name} (priority ${c.priority})...`),a.push(c.name);let u=[];if(c.name==="relevant_sources"){console.log("🤖 Using AI-powered content type selection for relevant sources...");try{s=await Uu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",s),u=await this.searchRelevantSourcesWithAI(e,t,s)}catch(d){console.warn("⚠️ AI content type selection failed, using fallback:",d),u=await this.searchPriorityLevel(e,t,c,r)}}else u=await this.searchPriorityLevel(e,t,c,r);if(u.length>0){if(console.log(`✅ Found ${u.length} docs at ${c.name} level`),o.push(...u),this.shouldStopSearch(c,u,o,e)){console.log(`🛑 Stopping search at ${c.name} level - sufficient context found`);break}}else console.log(`⚠️ No docs found at ${c.name} level, continuing to next priority`)}const l=Date.now()-i;return{foundAt:a[a.findIndex((c,u)=>this.PRIORITY_LEVELS[u]&&o.some(d=>this.PRIORITY_LEVELS[u].contentTypes.includes(d.content_type)))]||"relevant_sources",docs:this.optimizePriorityResults(o),searchMetadata:{levelsSearched:a,totalDocs:o.length,processingTime:l,aiContentTypeSelection:s}}}static async searchPriorityLevel(e,t,r,i){try{let a=await this.performSemanticSearchByPriority(e,t,r);return a.length===0&&(a=await this.performKeywordSearchByPriority(e,t,r)),this.rankByPriorityAndRelevance(a,r,e)}catch(a){return console.error(`❌ Error searching ${r.name}:`,a),[]}}static async searchRelevantSourcesWithAI(e,t,r){try{let i=[];for(const a of r.primaryTypes){console.log(`🔍 Searching AI-selected primary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"primary");i.push(...o)}if(i.length<6)for(const a of r.secondaryTypes){console.log(`🔍 Searching AI-selected secondary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"secondary");i.push(...o)}return i.sort((a,o)=>a.contentTypeRank==="primary"&&o.contentTypeRank!=="primary"?-1:a.contentTypeRank!=="primary"&&o.contentTypeRank==="primary"?1:(o.similarity||o.similarity_score||0)-(a.similarity||a.similarity_score||0)),console.log(`✅ AI-powered search found ${i.length} relevant sources`),i.slice(0,12)}catch(i){return console.error("❌ AI-powered relevant sources search failed:",i),[]}}static async searchSpecificContentType(e,t,r,i){try{console.log(`🔍 Searching content type: ${r} for query: "${e}"`);const{data:a,error:o}=await St.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).not("embedding","is",null).limit(20);if(o)return console.warn(`⚠️ Error fetching ${r} docs:`,o.message),[];if(!a||a.length===0){console.log(`⚠️ No ${r} docs found for user ${t}`);const{data:s,error:l}=await St.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).limit(i==="primary"?8:4);if(!l&&s&&s.length>0){console.log(`📝 Found ${s.length} ${r} docs via basic query`);const c=e.toLowerCase().split(" ").filter(d=>d.length>2);return s.map(d=>{let h=0;const f=(d.content||"").toLowerCase();return c.forEach(m=>{const v=(f.match(new RegExp(m,"g"))||[]).length;h+=v}),{...d,keywordScore:h,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,h*.1+.3)}}).filter(d=>d.keywordScore>0||r==="monthly_summary").sort((d,h)=>h.keywordScore-d.keywordScore).slice(0,i==="primary"?8:4)}return[]}console.log(`📊 Found ${a.length} ${r} docs with embeddings`);try{const s=await Ar.generateEmbedding({content:e,contentType:"query"}),l=a.filter(c=>c.embedding&&Array.isArray(c.embedding)).map(c=>({...c,similarity:this.calculateCosineSimilarity(s,c.embedding),contentTypeRank:i,aiSelected:!0})).filter(c=>c.similarity>(i==="primary"?.3:.2)).sort((c,u)=>u.similarity-c.similarity);return console.log(`✅ Found ${l.length} relevant ${r} docs with similarity > threshold`),l.slice(0,i==="primary"?8:4)}catch(s){console.warn(`⚠️ Embedding generation failed for ${r}:`,s);const l=e.toLowerCase().split(" ").filter(u=>u.length>2),c=a.map(u=>{let d=0;const h=(u.content||"").toLowerCase();return l.forEach(f=>{const m=(h.match(new RegExp(f,"g"))||[]).length;d+=m}),{...u,keywordScore:d,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,d*.1+.3)}}).filter(u=>u.keywordScore>0||r==="monthly_summary").sort((u,d)=>d.keywordScore-u.keywordScore);return console.log(`🔍 Keyword search fallback found ${c.length} ${r} docs`),c.slice(0,i==="primary"?8:4)}}catch(a){return console.error(`❌ Error searching content type ${r}:`,a),[]}}static async performSemanticSearchByPriority(e,t,r){try{const{data:i,error:a}=await St.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).not("embedding","is",null).limit(20);if(a)return console.warn(`⚠️ Semantic search error for ${r.name}:`,a.message),a.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!i||i.length===0)return console.log(`⚠️ No docs with embeddings found for ${r.name}`),[];try{const o=await Ar.generateEmbedding({content:e,contentType:"query"}),s=i.filter(l=>l.embedding&&Array.isArray(l.embedding)).map(l=>({...l,similarity:this.calculateCosineSimilarity(o,l.embedding)})).filter(l=>l.similarity>.1).sort((l,c)=>c.similarity-l.similarity);return console.log(`🔍 Semantic search for ${r.name}: ${s.length} relevant docs`),s.slice(0,10)}catch(o){return console.warn(`⚠️ Embedding generation failed for ${r.name}:`,o),[]}}catch(i){return console.error(`❌ Semantic search failed for ${r.name}:`,i),[]}}static async performKeywordSearchByPriority(e,t,r){try{const i=e.toLowerCase().split(" ").filter(l=>l.length>2);if(i.length===0)return[];const{data:a,error:o}=await St.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).limit(15);if(o)return console.warn(`⚠️ Keyword search error for ${r.name}:`,o.message),o.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!a||a.length===0)return console.log(`⚠️ No docs found for keyword search on ${r.name}`),[];const s=a.map(l=>{let c=0;const u=(l.content||"").toLowerCase();return i.forEach(d=>{const h=(u.match(new RegExp(d,"g"))||[]).length;c+=h}),{...l,keywordScore:c}}).filter(l=>l.keywordScore>0).sort((l,c)=>c.keywordScore-l.keywordScore);return console.log(`🔍 Keyword search for ${r.name}: ${s.length} relevant docs`),s.slice(0,8)}catch(i){return console.error(`❌ Keyword search failed for ${r.name}:`,i),[]}}static shouldStopSearch(e,t,r,i){if(e.name==="monthly_summary"||e.name==="weekly_summary")return!1;const a=this.analyzeQueryContext(i);if(e.name==="relevant_sources"){const o=r.filter(c=>c.content_type==="monthly_summary"||c.content_type==="weekly_summary").length>=2,s=t.length>=4,l=r.length>=8;return a.needsRecent||a.needsSpecific||a.complexityLevel==="complex"?(console.log(`🔄 Query needs ${a.needsRecent?"recent":""} ${a.needsSpecific?"specific":""} ${a.complexityLevel==="complex"?"complex":""} context - continuing to daily summaries`),!1):a.complexityLevel==="simple"&&o&&s?(console.log(`✅ Simple query with good context (${r.length} docs), sufficient for response`),!0):a.complexityLevel==="moderate"&&o&&t.length>=6&&l?(console.log(`✅ Moderate query with comprehensive context (${r.length} docs), sufficient for response`),!0):(console.log(`🔄 Continuing to daily summaries for more comprehensive context (current: ${r.length} docs)`),!1)}if(e.name==="daily_summary"){const o=t.length>=2||r.length>=12;return o&&console.log(`✅ Daily summaries complete - total context: ${r.length} docs`),o}return!1}static analyzeQueryContext(e){const t=e.toLowerCase(),r=t.includes("today")||t.includes("yesterday")||t.includes("recent")||t.includes("latest")||t.includes("current")||t.includes("now"),i=t.includes("specific")||t.includes("detailed")||t.includes("exact")||t.includes("particular"),a=e.includes("?")||t.startsWith("what")||t.startsWith("how")||t.startsWith("when")||t.startsWith("where")||t.startsWith("why"),o=e.split(" ").length,s=t.includes("analysis")||t.includes("comprehensive")||t.includes("breakdown")||t.includes("compare")||t.includes("trend")||t.includes("pattern");let l="simple";return o>10||s?l="complex":(o>5||a)&&(l="moderate"),{needsRecent:r,needsSpecific:i,isQuestionBased:a,complexityLevel:l}}static rankByPriorityAndRelevance(e,t,r){return e.map(i=>({...i,priorityScore:(5-t.priority)*10,totalScore:(i.similarity||i.keywordScore||0)+(5-t.priority)*10})).sort((i,a)=>a.totalScore-i.totalScore)}static optimizePriorityResults(e){var i,a,o,s,l,c,u,d;const t=this.PRIORITY_LEVELS.reduce((h,f)=>(h[f.name]=e.filter(m=>f.contentTypes.includes(m.content_type)),h),{}),r=[];if(((i=t.monthly_summary)==null?void 0:i.length)>0&&r.push(...t.monthly_summary.slice(0,3)),((a=t.weekly_summary)==null?void 0:a.length)>0&&r.length<18&&r.push(...t.weekly_summary.slice(0,4)),((o=t.relevant_sources)==null?void 0:o.length)>0&&r.length<15){const h=Math.min(8,15-r.length);r.push(...t.relevant_sources.slice(0,h))}if(((s=t.daily_summary)==null?void 0:s.length)>0&&r.length<20){const h=20-r.length;r.push(...t.daily_summary.slice(0,Math.min(5,h)))}return console.log(`📊 Optimized results: ${r.length} total docs prioritized by hierarchy (Monthly→Weekly→Relevant→Daily)`),console.log(`📊 Breakdown: Monthly(${((l=t.monthly_summary)==null?void 0:l.length)||0}), Weekly(${((c=t.weekly_summary)==null?void 0:c.length)||0}), Relevant(${((u=t.relevant_sources)==null?void 0:u.length)||0}), Daily(${((d=t.daily_summary)==null?void 0:d.length)||0})`),r}static async generatePriorityAwareResponse(e,t,r,i=[],a){const o=t.docs.map(l=>`[${l.content_type.toUpperCase()}] ${l.content}`).join(`

`),s=this.buildPriorityAwarePrompt(e,o,t.foundAt,t.searchMetadata);try{const l=await Ar.generateChatResponse({query:s,context:o,conversationHistory:i}),c=t.docs.map((d,h)=>{var f,m;return{id:d.id||`doc_${h}`,type:d.content_type||"unknown",contentId:((m=(f=d.metadata)==null?void 0:f.entities)==null?void 0:m.taskId)||d.id,title:this.generateSourceTitle(d),snippet:d.content.substring(0,150)+"...",relevanceScore:d.similarity||d.totalScore||1-h*.1}}),u={responseTime:Date.now()-a,relevanceScore:Math.min(.95,.6+t.docs.length*.05),tokens:Ar.estimateTokens(l),model:"gpt-4o-mini",retrievedDocuments:t.docs.length,totalSources:t.searchMetadata.totalDocs,confidence:Math.min(.95,.6+t.docs.length*.05),searchStrategy:`hierarchical_priority_${t.foundAt}${t.searchMetadata.aiContentTypeSelection?"_ai_enhanced":""}`,aiContentTypeSelection:t.searchMetadata.aiContentTypeSelection,priorityLevels:t.searchMetadata.levelsSearched};return{response:l.trim(),sources:c,metadata:u}}catch(l){return console.error("❌ Error generating priority-aware response:",l),this.generateFallbackResponse(e,a)}}static buildPriorityAwarePrompt(e,t,r,i){const a=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`You are an AI assistant that analyzes productivity data using a hierarchical approach.

CURRENT DATE & TIME: ${a} at ${o}

SEARCH HIERARCHY USED:
- Data was found at: ${r} level
- Levels searched: ${i.levelsSearched.join(" → ")}
- This follows the priority: Monthly Summary → Weekly Summary → Relevant Sources → Daily Summary (if needed)

CONTEXT PRIORITY EXPLANATION:
The context below has been prioritized to give you high-level insights first, then drill down to specifics as needed. Higher-level summaries provide better strategic context.

CONTEXT:
${t}

INSTRUCTIONS:
1. Answer based on the hierarchical context provided
2. Start with high-level insights when available
3. Mention the level of data you're drawing from (monthly/weekly/daily/detailed)
4. Provide specific examples when helpful
5. If using lower-level data, frame it within the broader context

USER QUESTION: ${e}`}static generateSourceTitle(e){var t,r,i,a,o,s;return e.content_type==="monthly_summary"?`Monthly Summary - ${((t=e.metadata)==null?void 0:t.timeframe)||"Recent Month"}`:e.content_type==="weekly_summary"?`Weekly Summary - ${((r=e.metadata)==null?void 0:r.timeframe)||"Recent Week"}`:e.content_type==="daily_summary"?`Daily Summary - ${((i=e.metadata)==null?void 0:i.timeframe)||"Recent Day"}`:e.content_type==="project_summary"?`Project: ${((a=e.metadata)==null?void 0:a.projectName)||"Unknown Project"}`:e.content_type==="task_aggregate"?`Task: ${((o=e.metadata)==null?void 0:o.taskTitle)||"Unknown Task"}`:`${e.content_type} - ${((s=e.id)==null?void 0:s.substring(0,8))||"Unknown"}`}static calculateCosineSimilarity(e,t){if(!e||!t||e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static generateFallbackResponse(e,t){return{response:`I don't have enough context in your productivity data to answer "${e}". This could mean you haven't used the app long enough to generate summaries, or the data hasn't been synced yet. Try asking about more recent activities or check if your data has been properly synced.`,sources:[],metadata:{responseTime:Date.now()-t,relevanceScore:.1,tokens:50,model:"gpt-4o-mini",retrievedDocuments:0,confidence:.1,searchStrategy:"hierarchical_priority_no_data"}}}}zt(KDe,"PRIORITY_LEVELS",[{name:"monthly_summary",contentTypes:["monthly_summary"],chunkLevels:[1],priority:1},{name:"weekly_summary",contentTypes:["weekly_summary"],chunkLevels:[2],priority:2},{name:"relevant_sources",contentTypes:["task_aggregate","project_summary","task_sessions"],chunkLevels:[4,5,6],priority:3},{name:"daily_summary",contentTypes:["daily_summary"],chunkLevels:[3],priority:4}]);const XDe=Vf()(QQe((n,e)=>({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:["What were my key achievements this month?","How was my productivity this week?","What did I work on today?","Which project needs my attention?","Show me my focus patterns","What should I prioritize next?"],quickActions:[],ragConfig:{prioritizeCost:!1,maxSources:8,responseQuality:"balanced",includeHistoricalData:!0,autoOptimize:!0},_isInitialized:!1,_userId:null,sendMessage:async t=>{var a,o;const{currentConversationId:r,_userId:i}=e();if(console.log("🤖 sendMessage called with:",{content:t,_userId:i,currentConversationId:r}),console.log("🤖 Chat store state:",{isInitialized:e()._isInitialized,userId:i,conversationCount:e().conversations.length}),!i){console.error("Chat store not initialized - no user ID"),n({error:"Please log in to use AI Assistant"});return}r||e().createConversation(),n({isLoading:!0,error:null});try{const s=e().currentConversationId,l={id:`msg_${Date.now()}_user`,conversationId:s,userId:i,role:"user",content:t,timestamp:new Date};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,l]}:h)}));let c;try{console.log("🎯 Attempting Hierarchical Priority search..."),c=await KDe.queryWithHierarchicalPriority(t,i,((a=e().conversations.find(d=>d.id===s))==null?void 0:a.messages.slice(-5).map(d=>({role:d.role,content:d.content})))||[]),(o=c.metadata.searchStrategy)!=null&&o.includes("no_data")&&(console.log("🔄 Hierarchical search returned no data, trying Enhanced RAG..."),c=await t1.queryWithRAG(t,i))}catch(d){console.warn("⚠️ Hierarchical Priority service failed, falling back to Enhanced RAG:",d),c=await t1.queryWithRAG(t,i)}const u={id:`msg_${Date.now()}_assistant`,conversationId:s,userId:i,role:"assistant",content:c.response,timestamp:new Date,metadata:{tokens:c.metadata.tokens,responseTime:c.metadata.responseTime,relevanceScore:c.metadata.relevanceScore,model:c.metadata.model,retrievedDocuments:c.metadata.retrievedDocuments},sources:c.sources};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,u]}:h),isLoading:!1}))}catch(s){console.error("Error sending message:",s),n({error:s instanceof Error?s.message:"Failed to send message",isLoading:!1})}},createConversation:()=>{const{_userId:t}=e();if(!t)return n({error:"User not authenticated"}),"";const r={id:`conv_${Date.now()}`,userId:t,title:"New Conversation",messages:[],createdAt:new Date,updatedAt:new Date,isActive:!0};return n(i=>({conversations:[r,...i.conversations],currentConversationId:r.id,error:null})),r.id},setActiveConversation:t=>{const{conversations:r}=e(),i=r.find(a=>a.id===t);n(i?{currentConversationId:t,error:null}:{error:"Conversation not found"})},deleteConversation:t=>{n(r=>({conversations:r.conversations.filter(i=>i.id!==t),currentConversationId:r.currentConversationId===t?null:r.currentConversationId,error:null}))},clearError:()=>{n({error:null})},generateSuggestions:()=>{n({suggestedQueries:["How productive was I this week?","What projects need my attention?","Show me my focus time breakdown","What should I prioritize today?","How am I progressing toward my goals?"]})},executeQuickAction:t=>{console.log("Executing quick action:",t),n(r=>({quickActions:r.quickActions.filter(i=>i.id!==t.id)}))},updateRAGConfig:t=>{n(r=>({ragConfig:{...r.ragConfig,...t}}))},_setUserId:t=>{n({_userId:t}),t&&!e()._isInitialized&&(e().generateSuggestions(),n({_isInitialized:!0}))},_reset:()=>{n({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:[],quickActions:[],_isInitialized:!1,_userId:null})}}))),APt=({isOpen:n,onClose:e})=>{const[t,r]=K.useState(""),[i,a]=K.useState(!1),o=K.useRef(null),s=K.useRef(null),{user:l}=Qt(),{conversations:c,currentConversationId:u,isLoading:d,error:h,suggestedQueries:f,sendMessage:m,createConversation:v,setActiveConversation:y,clearError:w}=XDe(),_=c.find(M=>M.id===u),T=(_==null?void 0:_.messages)||[];K.useEffect(()=>{var M;(M=o.current)==null||M.scrollIntoView({behavior:"smooth"})},[T]),K.useEffect(()=>{n&&setTimeout(()=>{var M;return(M=s.current)==null?void 0:M.focus()},100)},[n]);const A=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),C())},C=async()=>{if(!t.trim()||d)return;if(!l){alert("Please log in to use the AI Assistant");return}const M=t.trim();r(""),u||v(),await m(M)},k=M=>{var P;r(M),(P=s.current)==null||P.focus()};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:`bg-white rounded-lg shadow-xl transition-all duration-300 ${i?"w-full h-full max-w-6xl max-h-full":"w-full max-w-2xl h-[80vh]"}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx($R,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Work Assistant"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Direct, focused answers about your productivity data"})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>a(!i),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:i?"Minimize":"Expand",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),x.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:x.jsx(qz,{className:"w-4 h-4"})})]})]}),h&&x.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 border-l-4 border-red-400 p-4 mx-4 mt-4",children:[x.jsx($v,{className:"w-5 h-5 text-red-400"}),x.jsx("div",{className:"flex-1",children:x.jsx("p",{className:"text-sm text-red-700",children:h})}),x.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-600",children:x.jsx(qz,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{height:"calc(100% - 200px)"},children:[T.length===0?x.jsxs("div",{className:"text-center py-8",children:[x.jsx($R,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to your AI Assistant!"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"Ask me anything about your productivity data, work patterns, or get insights about your progress."}),x.jsxs("div",{className:"max-w-md mx-auto",children:[x.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Try asking:"}),x.jsx("div",{className:"space-y-2",children:f.map((M,P)=>x.jsxs("button",{onClick:()=>k(M),className:"w-full text-left p-3 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:['"',M,'"']},P))})]})]}):x.jsxs(x.Fragment,{children:[T.map(M=>x.jsx(kPt,{message:M},M.id)),d&&x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx($R,{className:"w-4 h-4 text-blue-600"})}),x.jsx("div",{className:"flex-1",children:x.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full"}),x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.2s"}})]})})})]})]}),x.jsx("div",{ref:o})]}),x.jsx("div",{className:"border-t border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-end space-x-3",children:[x.jsx("div",{className:"flex-1",children:x.jsx("textarea",{ref:s,value:t,onChange:M=>r(M.target.value),onKeyDown:A,placeholder:"Ask about your productivity data...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-gray-900 placeholder-gray-500",rows:1,style:{maxHeight:"120px"}})}),x.jsx("button",{onClick:C,disabled:!t.trim()||d,className:"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x.jsx(E$e,{className:"w-4 h-4"})})]})})]})}):null},kPt=({message:n})=>{const e=n.role==="user";return x.jsxs("div",{className:`flex items-start space-x-3 ${e?"flex-row-reverse space-x-reverse":""}`,children:[x.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-100":"bg-gray-100"}`,children:e?x.jsx(K$e,{className:"w-4 h-4 text-blue-600"}):x.jsx($R,{className:"w-4 h-4 text-gray-600"})}),x.jsxs("div",{className:`flex-1 max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl ${e?"text-right":""}`,children:[x.jsxs("div",{className:`rounded-lg ${e?"bg-blue-600 text-white ml-auto p-3":"bg-white border border-gray-200 text-gray-900 p-5 shadow-sm"}`,children:[e?x.jsx("p",{className:"text-sm whitespace-pre-wrap text-white",children:n.content}):x.jsx(yIt,{className:"text-sm text-gray-900 leading-normal break-words whitespace-pre-wrap",components:{strong:({node:t,...r})=>x.jsx("strong",{className:"font-bold text-gray-900",...r}),em:({node:t,...r})=>x.jsx("em",{className:"italic text-gray-900",...r}),ul:({node:t,...r})=>x.jsx("ul",{className:"space-y-2 my-3",...r}),li:({node:t,...r})=>x.jsxs("li",{className:"flex items-start pl-0 mb-2",...r,children:[x.jsx("span",{className:"text-gray-900 font-bold mr-2 mt-0.5 flex-shrink-0",children:"•"}),x.jsx("div",{className:"text-sm leading-normal flex-1 break-words",children:r.children})]}),p:({node:t,...r})=>x.jsx("div",{className:"text-sm mb-3 last:mb-0 leading-normal break-words",...r}),h1:({node:t,...r})=>x.jsx("h1",{className:"text-lg font-bold mb-3 text-gray-900 border-b border-gray-200 pb-2 mt-4 first:mt-0",...r}),h2:({node:t,...r})=>x.jsx("h2",{className:"text-base font-bold mb-2 text-gray-900 mt-4 first:mt-0",...r}),h3:({node:t,...r})=>x.jsx("h3",{className:"text-sm font-bold mb-2 text-gray-900 mt-3 first:mt-0",...r}),code:({node:t,...r})=>x.jsx("code",{className:"bg-blue-50 text-blue-800 px-1.5 py-0.5 rounded text-xs font-mono font-semibold",...r})},children:n.content}),!e&&n.metadata&&x.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{children:["Response time: ",n.metadata.responseTime,"ms"]}),n.metadata.retrievedDocuments&&x.jsxs("span",{children:[n.metadata.retrievedDocuments," sources"]})]})})]}),n.sources&&n.sources.length>0&&x.jsx(CPt,{sources:n.sources}),x.jsx("div",{className:`text-xs text-gray-500 mt-1 ${e?"text-right":""}`,children:new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(n.timestamp))})]})]})},CPt=({sources:n})=>{const[e,t]=K.useState(!1),r=n.reduce((a,o)=>a+(o.relevanceScore||0),0)/n.length,i=n.reduce((a,o)=>(o.relevanceScore||0)>(a.relevanceScore||0)?o:a);return x.jsxs("div",{className:"mt-2 bg-gray-50 border border-gray-200 rounded-lg overflow-hidden",children:[x.jsxs("button",{onClick:()=>t(!e),className:"w-full px-3 py-2 flex items-center justify-between hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":e,"aria-label":`${e?"Hide":"Show"} source references`,children:[x.jsxs("div",{className:"flex items-center space-x-2 text-left",children:[x.jsx(xj,{className:"w-4 h-4 text-gray-500"}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[n.length," source",n.length!==1?"s":""," referenced"]}),!e&&x.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(r*100),'% avg relevance • "',i.title,'"']})]})]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:"text-xs text-gray-500 mr-1",children:e?"Hide":"Show"}),e?x.jsx(Gye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"}):x.jsx(qye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"})]})]}),x.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"max-h-80 opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:x.jsx("div",{className:"px-3 pb-3 space-y-2 border-t border-gray-200 max-h-80 overflow-y-auto",children:n.map((a,o)=>x.jsx(DPt,{source:a,isExpanded:!0},a.id||o))})})]})},DPt=({source:n,isExpanded:e=!1})=>x.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3 text-xs shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(xj,{className:"w-3 h-3 text-gray-400"}),x.jsx("span",{className:"font-medium text-gray-700 truncate",children:n.title})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("span",{className:"text-gray-500 font-mono",children:[Math.round((n.relevanceScore||0)*100),"%"]}),x.jsx("span",{className:"bg-gray-200 px-2 py-0.5 rounded text-gray-600 text-xs",children:n.type})]})]}),e&&x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-gray-600 mb-2 line-clamp-3",children:n.snippet}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"text-gray-500 text-xs",children:n.contentId&&x.jsxs("span",{className:"font-mono bg-gray-100 px-1 py-0.5 rounded",children:["ID: ",n.contentId.slice(0,8),"..."]})}),n.contentId&&x.jsxs("button",{className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1 transition-colors",children:[x.jsx("span",{children:"View details"}),x.jsx(Yye,{className:"w-3 h-3"})]})]})]})]}),IPt=()=>{const[n,e]=K.useState(!1),{user:t}=Qt();return t?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300","aria-label":"Open AI Assistant",children:x.jsx(LS,{className:"w-6 h-6"})}),x.jsx(APt,{isOpen:n,onClose:()=>e(!1)})]}):null};class MPt{static async testUserSync(e){try{console.log(`🔍 Testing sync for user: ${e}`);const t=await this.countFirebaseData(e),r=await this.countSupabaseData(e),i=Object.values(t).reduce((s,l)=>s+l,0),a=this.determineSyncStatus(i,r.documents),o=this.generateRecommendations(t,r,a);return{firebaseData:t,supabaseData:r,syncStatus:a,recommendations:o}}catch(t){throw console.error("Error testing user sync:",t),new Error(`Failed to test user sync: ${t instanceof Error?t.message:"Unknown error"}`)}}static async countFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions"],r={};for(const i of t)try{const a=qt(Zt(Je,i),vt("userId","==",e)),o=await kn(a);r[i]=o.size}catch(a){console.warn(`Error counting ${i}:`,a),r[i]=0}return r}static async countSupabaseData(e){try{const{count:t,error:r}=await St.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e);if(r)throw r;const{count:i,error:a}=await St.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(a)throw a;return{documents:t||0,withEmbeddings:i||0,withoutEmbeddings:(t||0)-(i||0)}}catch(t){return console.error("Error counting Supabase data:",t),{documents:0,withEmbeddings:0,withoutEmbeddings:0}}}static determineSyncStatus(e,t){return t===0?"missing":t>=e*.8?"complete":"partial"}static generateRecommendations(e,t,r){const i=[];return r==="missing"&&(i.push("Run comprehensive Firebase sync to migrate all data"),i.push("Use DataSyncDashboard to initiate full sync")),r==="partial"&&(i.push("Some data may be missing - run comprehensive sync"),i.push("Check for sync errors in console logs")),t.withoutEmbeddings>0&&(i.push(`${t.withoutEmbeddings} documents need embeddings`),i.push('Use "Fix Embeddings" button in DataSyncDashboard')),t.withEmbeddings===0&&t.documents>0&&(i.push("Critical: All documents missing embeddings - RAG system non-functional"),i.push("Immediately run embedding generation")),i.length===0&&(i.push("✅ Sync appears complete and healthy"),i.push("Test chat interface to verify RAG functionality")),i}static async quickValidation(e){try{const t=await this.testUserSync(e);return t.syncStatus==="complete"&&t.supabaseData.withEmbeddings>0}catch(t){return console.error("Quick validation failed:",t),!1}}}class $L{static async syncAllUserData(e,t){try{console.log(`🔄 Starting comprehensive Firebase to Supabase sync for user: ${e}`);const r=[{name:"tasks",contentType:"task_aggregate"},{name:"projects",contentType:"project_summary"},{name:"workSessions",contentType:"session"},{name:"dailySiteUsage",contentType:"site_usage"},{name:"deepFocusSessions",contentType:"deep_focus"}];let i=0;const a=[],o={};let s=0;for(const{name:c}of r){const u=await this.countFirebaseCollection(e,c);o[c]=u,s+=u}let l=0;for(const{name:c,contentType:u}of r)try{t==null||t({current:l,total:s,status:`Syncing ${c}...`});const d=await this.syncCollection(e,c,u,h=>{t==null||t({current:l+h,total:s,status:`Syncing ${c}: ${h}/${o[c]}`})});i+=d,l+=o[c],console.log(`✅ Synced ${d} documents from ${c}`)}catch(d){const h=`Failed to sync ${c}: ${d instanceof Error?d.message:"Unknown error"}`;console.error(h),a.push(h)}return t==null||t({current:s,total:s,status:"Sync complete!"}),{synced:i,errors:a,details:o}}catch(r){throw console.error("Error in comprehensive sync:",r),new Error(`Comprehensive sync failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async syncCollection(e,t,r,i){try{const a=qt(Zt(Je,t),vt("userId","==",e)),s=(await kn(a)).docs.map(c=>({id:c.id,...c.data()}));let l=0;for(let c=0;c<s.length;c+=this.BATCH_SIZE){const u=s.slice(c,c+this.BATCH_SIZE);await Promise.all(u.map(async d=>{try{await this.syncSingleDocument(d,r,e),l++,i==null||i(l)}catch(h){console.error(`Error syncing document ${d.id}:`,h)}})),c+this.BATCH_SIZE<s.length&&await new Promise(d=>setTimeout(d,this.DELAY_BETWEEN_BATCHES))}return l}catch(a){throw console.error(`Error syncing collection ${t}:`,a),a}}static async syncSingleDocument(e,t,r){try{const i=this.formatDocumentContent(e,t),{data:a}=await St.from("user_productivity_documents").select("id").eq("user_id",r).eq("metadata->>documentId",e.id).single();if(a){console.log(`Document ${e.id} already exists, skipping`);return}const o=await Ar.generateEmbedding({content:i,contentType:t}),{error:s}=await St.from("user_productivity_documents").insert({user_id:r,content_type:t,content:i,embedding:o,metadata:{documentId:e.id,sourceCollection:t,originalData:e,syncedAt:new Date().toISOString()}});if(s)throw s}catch(i){throw console.error(`Error syncing document ${e.id}:`,i),i}}static formatDocumentContent(e,t){switch(t){case"task_aggregate":return[`Task: ${e.text||e.title||"Untitled"}`,e.notes?`Notes: ${e.notes}`:"",e.project?`Project: ${e.project}`:"",e.completed?"Status: Completed":"Status: Incomplete",e.pomodoroCount?`Pomodoros: ${e.pomodoroCount}`:""].filter(Boolean).join(`
`);case"project_summary":return`Project: ${e.name||"Untitled Project"}
${e.description?`Description: ${e.description}`:""}
${e.category?`Category: ${e.category}`:""}
Goal Hours: ${e.goalHours||"Not set"}
Progress: ${e.totalHours||0} hours logged`.trim();case"session":return`Work Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Type: ${e.sessionType||"Work Session"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();case"site_usage":return`Website Usage: ${e.domain||"Unknown site"}
Time Spent: ${e.timeSpent||0} seconds
Category: ${e.category||"Uncategorized"}
Date: ${e.date||"Unknown date"}`.trim();case"deep_focus":return`Deep Focus Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Break Type: ${e.breakType||"Standard"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();default:return JSON.stringify(e,null,2)}}static async countFirebaseCollection(e,t){try{const r=qt(Zt(Je,t),vt("userId","==",e));return(await kn(r)).size}catch(r){return console.error(`Error counting ${t}:`,r),0}}static async generateMissingEmbeddings(e,t){try{console.log(`🔍 Checking for documents without embeddings for user: ${e}`);const{data:r,error:i}=await St.from("user_productivity_documents").select("id, content, content_type").eq("user_id",e).is("embedding",null);if(i)throw i;if(!r||r.length===0)return console.log("✅ All documents already have embeddings"),0;console.log(`📋 Found ${r.length} documents without embeddings`);let a=0;for(const o of r)try{t==null||t({current:a,total:r.length,status:`Generating embedding ${a+1}/${r.length}`});const s=await Ar.generateEmbedding({content:o.content,contentType:o.content_type}),{error:l}=await St.from("user_productivity_documents").update({embedding:s}).eq("id",o.id);if(l)throw l;a++,await new Promise(c=>setTimeout(c,this.DELAY_BETWEEN_BATCHES))}catch(s){console.error(`Error generating embedding for document ${o.id}:`,s)}return t==null||t({current:r.length,total:r.length,status:"Embedding generation complete!"}),console.log(`✅ Generated embeddings for ${a} documents`),a}catch(r){throw console.error("Error generating missing embeddings:",r),new Error(`Failed to generate missing embeddings: ${r instanceof Error?r.message:"Unknown error"}`)}}}zt($L,"BATCH_SIZE",10),zt($L,"DELAY_BETWEEN_BATCHES",100);class fge{static async generateComprehensiveReport(e){try{console.log(`📊 Generating comprehensive data report for user: ${e}`);const t=await this.collectFirebaseData(e),r=await this.collectSupabaseData(e),i=this.calculateSummaryMetrics(t,r),a=this.performDataAnalysis(t,r),o=await this.generateTechnicalDetails(e);return{summary:i,firebase:t,supabase:r,analysis:a,technicalDetails:o}}catch(t){throw console.error("Error generating comprehensive report:",t),new Error(`Failed to generate report: ${t instanceof Error?t.message:"Unknown error"}`)}}static async collectFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions","users"],r={};for(const i of t)try{if(i==="users"){const a=qt(Zt(Je,i)),o=await kn(a);r[i]=o.docs.filter(s=>s.id===e).length}else{const a=qt(Zt(Je,i),vt("userId","==",e)),o=await kn(a);r[i]=o.size}}catch(a){console.warn(`Error collecting ${i}:`,a),r[i]=0}return r}static async collectSupabaseData(e){try{const{data:t,error:r}=await St.from("user_productivity_documents").select("*").eq("user_id",e);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=(t==null?void 0:t.filter(l=>l.embedding!==null).length)||0,o=i-a,s={};return t==null||t.forEach(l=>{const c=l.content_type||"unknown";s[c]=(s[c]||0)+1}),{totalDocuments:i,withEmbeddings:a,withoutEmbeddings:o,contentTypes:s}}catch(t){return console.error("Error collecting Supabase data:",t),{totalDocuments:0,withEmbeddings:0,withoutEmbeddings:0,contentTypes:{}}}}static calculateSummaryMetrics(e,t){const r=Object.values(e).reduce((o,s)=>o+s,0),i=t.totalDocuments>0?t.withEmbeddings/t.totalDocuments:0;let a;return i>=.95&&t.totalDocuments>=r*.8?a="excellent":i>=.8&&t.totalDocuments>=r*.6?a="good":i>=.3&&t.totalDocuments>0?a="poor":a="critical",{totalFirebaseItems:r,totalSupabaseDocuments:t.totalDocuments,embeddingCoverage:Math.round(i*100),syncHealth:a}}static performDataAnalysis(e,t){const r=[],i=[],a=[];return Object.entries(e).forEach(([o,s])=>{s===0?r.push(o):s<5&&i.push(o)}),t.totalDocuments===0?a.push("🚨 Critical: No data in Supabase - run comprehensive sync immediately"):t.withoutEmbeddings>0&&a.push(`⚠️ ${t.withoutEmbeddings} documents missing embeddings - run embedding generation`),r.length>0&&a.push(`📭 Empty collections: ${r.join(", ")}`),i.length>0&&a.push(`📉 Low data collections: ${i.join(", ")}`),t.totalDocuments<Object.values(e).reduce((o,s)=>o+s,0)*.8&&a.push("🔄 Supabase appears incomplete - consider re-running comprehensive sync"),a.length===0&&a.push("✅ Data looks healthy - no immediate action required"),{missingCollections:r,lowDataCollections:i,embeddingGaps:t.withoutEmbeddings,recommendations:a}}static async generateTechnicalDetails(e){try{const{data:t,error:r}=await St.from("user_productivity_documents").select("content, created_at").eq("user_id",e).order("created_at",{ascending:!0});if(r||!t)return{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"};const i=t.length>0?Math.round(t.reduce((l,c)=>l+c.content.length,0)/t.length):0,a=t.length>0?t[0].created_at:null,o=t.length>0?t[t.length-1].created_at:null,s=t.length>100?"high":t.length>50?"medium":"low";return{avgDocumentSize:i,oldestDocument:a,newestDocument:o,duplicateRisk:s}}catch(t){return console.error("Error generating technical details:",t),{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"}}}static async quickHealthCheck(e){try{const{data:t,error:r}=await St.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e),{data:i,error:a}=await St.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(r||a)throw r||a;const o=t||0,s=i||0,l=o>0?s/o*100:0;let c,u;return o===0?(c="critical",u="No data found - run comprehensive sync"):l>=90?(c="healthy",u="Data sync and embeddings are healthy"):l>=50?(c="warning",u="Some embeddings missing - consider running embedding generation"):(c="critical",u="Most embeddings missing - RAG functionality impaired"),{status:c,message:u,embeddingCoverage:Math.round(l)}}catch(t){return console.error("Error in quick health check:",t),{status:"critical",message:"Health check failed - please check system status",embeddingCoverage:0}}}static async getQuickSyncStatus(e){try{const{data:t,error:r}=await St.from("user_productivity_documents").select("id, created_at").eq("user_id",e).not("embedding","is",null);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=t&&t.length>0?new Date(Math.max(...t.map(l=>new Date(l.created_at).getTime()))):null;let o="low",s=!1;return i===0?(o="high",s=!0):a&&Date.now()-a.getTime()>24*60*60*1e3&&(o="medium",s=!0),{priority:o,needsSync:s,embeddingCount:i,lastSync:a}}catch(t){return console.error("Error getting quick sync status:",t),{priority:"high",needsSync:!0,embeddingCount:0,lastSync:null}}}static async generateUserDataReport(e){try{const t=await this.collectFirebaseData(e),r=Object.values(t).reduce((c,u)=>c+u,0),i=await this.collectSupabaseData(e),a=r>0?Math.round(i.totalDocuments/r*100):0,o=a>=95&&i.withoutEmbeddings===0,s=[];i.withoutEmbeddings>0&&s.push(`${i.withoutEmbeddings} documents without embeddings`);const l=[];return o||(i.totalDocuments===0?l.push("Run complete data sync to migrate Firebase data"):i.withoutEmbeddings>0&&l.push("Generate embeddings for remaining documents")),{firebase:{totalDocuments:r,...t},supabase:{totalEmbeddings:i.withEmbeddings,...i},syncStatus:{isComplete:o,syncPercentage:a,missingEmbeddings:s,recommendations:l}}}catch(t){throw console.error("Error generating user data report:",t),t}}static printReport(e){console.log(`
📊 USER DATA REPORT`),console.log("==================="),console.log(`Firebase Documents: ${e.firebase.totalDocuments}`),console.log(`Supabase Documents: ${e.supabase.totalDocuments}`),console.log(`With Embeddings: ${e.supabase.withEmbeddings}`),console.log(`Sync Status: ${e.syncStatus.isComplete?"✅ Complete":"❌ Incomplete"} (${e.syncStatus.syncPercentage}%)`),e.syncStatus.recommendations.length>0&&(console.log(`
Recommendations:`),e.syncStatus.recommendations.forEach(t=>console.log(`  • ${t}`)))}}class KG{static async executeIncrementalSync(e){const t=Date.now();console.log(`🔄 Starting incremental sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncTasksIncremental(e,i.tasks),o=await this.syncProjectsIncremental(e,i.projects),s=await this.syncSessionsIncremental(e,i.workSessions);return r.processedDocuments=a.processed+o.processed+s.processed,r.skippedDocuments=a.skipped+o.skipped+s.skipped,r.collections.tasks=a.processed,r.collections.projects=o.processed,r.collections.workSessions=s.processed,r.errors=[...a.errors,...o.errors,...s.errors],await this.updateSyncTrackers(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Incremental sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Incremental sync failed:",i),r}}static async getLastSyncTimes(e){try{const{data:t}=await St.from("sync_trackers").select("collection, last_sync_time").eq("user_id",e),r={tasks:null,projects:null,workSessions:null};return t&&t.forEach(i=>{r[i.collection]=i.last_sync_time?new Date(i.last_sync_time):null}),r}catch(t){return console.error("Failed to get sync times:",t),{tasks:null,projects:null,workSessions:null}}}static async syncTasksIncremental(e,t){var i,a,o,s;const r={processed:0,skipped:0,errors:[]};try{let l=qt(Zt(Je,"tasks"),vt("userId","==",e));t&&(l=qt(Zt(Je,"tasks"),vt("userId","==",e),vt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const c=await kn(l);if(console.log(`📝 Found ${c.size} tasks to process (last sync: ${(t==null?void 0:t.toISOString())||"never"})`),c.size===0)return console.log("✅ No tasks need syncing"),r;const u=await this.getProjectsMap(e),d=await this.getSessionsMap(e);for(const h of c.docs){const f=h.data();try{const m=await this.getExistingDocument(e,"task_aggregate",h.id);if(m&&this.isDocumentCurrent(m,(i=f.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping task ${h.id}: already current`);continue}const v={id:h.id,title:f.title||f.text||"Untitled Task",description:f.description||f.notes||"",projectId:f.projectId,completed:f.completed||!1,status:f.status,timeSpent:f.timeSpent||0,timeEstimated:f.timeEstimated,userId:f.userId,createdAt:((a=f.createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=f.updatedAt)==null?void 0:o.toDate())||new Date,order:f.order||0},y=u[v.projectId],w=d[v.id]||[],_=Bl.generateTaskAggregateText(v,w,y);await this.storeDocumentWithEmbedding(e,"task_aggregate",h.id,_,{...v,projectName:y==null?void 0:y.name,sessionCount:w.length,lastUpdated:(s=v.updatedAt)==null?void 0:s.toISOString()}),r.processed++}catch(m){r.errors.push(`Task ${h.id}: ${m instanceof Error?m.message:"Unknown error"}`)}}return r}catch(l){return r.errors.push(`Tasks sync failed: ${l instanceof Error?l.message:"Unknown error"}`),r}}static async syncProjectsIncremental(e,t){var i,a,o;const r={processed:0,skipped:0,errors:[]};try{let s=qt(Zt(Je,"projects"),vt("userId","==",e));t&&(s=qt(Zt(Je,"projects"),vt("userId","==",e),vt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const l=await kn(s);if(console.log(`📁 Found ${l.size} projects to process`),l.size===0)return console.log("✅ No projects need syncing"),r;const c=await this.getTasksByProjectMap(e),u=await this.getSessionsMap(e);for(const d of l.docs){const h=d.data();try{const f=await this.getExistingDocument(e,"project_summary",d.id);if(f&&this.isDocumentCurrent(f,(i=h.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping project ${d.id}: already current`);continue}const m={id:d.id,name:h.name||"Untitled Project",color:h.color,description:h.description,userId:h.userId},v=c[m.id]||[],y=v.flatMap(_=>u[_.id]||[]),w=Bl.generateProjectSummaryText(m,v,y);await this.storeDocumentWithEmbedding(e,"project_summary",d.id,w,{...m,taskCount:v.length,sessionCount:y.length,lastUpdated:(o=(a=h.updatedAt)==null?void 0:a.toDate())==null?void 0:o.toISOString()}),r.processed++}catch(f){r.errors.push(`Project ${d.id}: ${f instanceof Error?f.message:"Unknown error"}`)}}return r}catch(s){return r.errors.push(`Projects sync failed: ${s instanceof Error?s.message:"Unknown error"}`),r}}static async syncSessionsIncremental(e,t){var i,a,o,s,l,c,u;const r={processed:0,skipped:0,errors:[]};try{let d=qt(Zt(Je,"workSessions"),vt("userId","==",e));t&&(d=qt(Zt(Je,"workSessions"),vt("userId","==",e),vt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const h=await kn(d);if(console.log(`⏱️ Found ${h.size} sessions to process`),h.size===0)return console.log("✅ No sessions need syncing"),r;const f=await this.getTasksMap(e),m=await this.getProjectsMap(e);for(const v of h.docs){const y=v.data();try{const w=await this.getExistingDocument(e,"task_sessions",v.id);if(w&&this.isDocumentCurrent(w,(i=y.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping session ${v.id}: already current`);continue}const _={id:v.id,taskId:y.taskId,projectId:y.projectId,duration:y.duration||0,sessionType:y.sessionType,startTime:(a=y.startTime)==null?void 0:a.toDate(),endTime:(o=y.endTime)==null?void 0:o.toDate(),notes:y.notes,status:y.status,userId:y.userId,date:y.date||new Date().toISOString().split("T")[0],createdAt:((s=y.createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=y.updatedAt)==null?void 0:l.toDate())||new Date},T=f[_.taskId],A=m[_.projectId];if(T&&A){const C=Bl.generateSessionText(_,T,A);await this.storeDocumentWithEmbedding(e,"task_sessions",v.id,C,{..._,taskName:T.title,projectName:A.name,lastUpdated:(u=(c=y.updatedAt)==null?void 0:c.toDate())==null?void 0:u.toISOString()}),r.processed++}else r.skipped++}catch(w){r.errors.push(`Session ${v.id}: ${w instanceof Error?w.message:"Unknown error"}`)}}return r}catch(d){return r.errors.push(`Sessions sync failed: ${d instanceof Error?d.message:"Unknown error"}`),r}}static isDocumentCurrent(e,t){var r;if(!t||!((r=e==null?void 0:e.metadata)!=null&&r.lastUpdated))return!1;try{const i=new Date(e.metadata.lastUpdated),a=new Date(t);return i>=a}catch(i){return console.warn("Error comparing document timestamps:",i),!1}}static async getExistingDocument(e,t,r){try{const i=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,{data:a,error:o}=await St.from("user_productivity_documents").select("id, metadata, content").eq("user_id",e).eq("content_type",i).eq("metadata->>documentId",r).single();return o?null:a}catch{return null}}static async storeDocumentWithEmbedding(e,t,r,i,a){const o=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,s=await Ar.generateEmbedding({content:i,contentType:o}),{data:l}=await St.from("user_productivity_documents").select("id").eq("user_id",e).eq("content_type",o).eq("metadata->>documentId",r).single(),c={user_id:e,content_type:o,content:i,embedding:s,metadata:{documentId:r,...a,syncedAt:new Date().toISOString(),lastUpdated:a.lastUpdated||new Date().toISOString(),isIncremental:!0}};let u;if(l?u=(await St.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await St.from("user_productivity_documents").insert(c)).error,u)throw u}static async updateSyncTrackers(e){const t=new Date,r=["tasks","projects","workSessions"];for(const i of r)await St.from("sync_trackers").upsert({user_id:e,collection:i,last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}static async getProjectsMap(e){const t=await kn(qt(Zt(Je,"projects"),vt("userId","==",e))),r={};return t.forEach(i=>{const a=i.data();r[i.id]={id:i.id,name:a.name||"Untitled Project",color:a.color,description:a.description,userId:a.userId}}),r}static async getTasksMap(e){const t=await kn(qt(Zt(Je,"tasks"),vt("userId","==",e))),r={};return t.forEach(i=>{var o,s;const a=i.data();r[i.id]={id:i.id,title:a.title||a.text||"Untitled Task",description:a.description||a.notes||"",projectId:a.projectId,completed:a.completed||!1,status:a.status,timeSpent:a.timeSpent||0,timeEstimated:a.timeEstimated,userId:a.userId,createdAt:((o=a.createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((s=a.updatedAt)==null?void 0:s.toDate())||new Date,order:a.order||0}}),r}static async getTasksByProjectMap(e){const t=await this.getTasksMap(e),r={};return Object.values(t).forEach(i=>{r[i.projectId]||(r[i.projectId]=[]),r[i.projectId].push(i)}),r}static async getSessionsMap(e){const t=await kn(qt(Zt(Je,"workSessions"),vt("userId","==",e))),r={};return t.forEach(i=>{var s,l,c,u;const a=i.data(),o={id:i.id,taskId:a.taskId,projectId:a.projectId,duration:a.duration||0,sessionType:a.sessionType,startTime:(s=a.startTime)==null?void 0:s.toDate(),endTime:(l=a.endTime)==null?void 0:l.toDate(),notes:a.notes,status:a.status,userId:a.userId,date:a.date||new Date().toISOString().split("T")[0],createdAt:((c=a.createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=a.updatedAt)==null?void 0:u.toDate())||new Date};r[o.taskId]||(r[o.taskId]=[]),r[o.taskId].push(o)}),r}static async isIncrementalSyncNeeded(e){try{const t=await this.getLastSyncTimes(e),r=Object.values(t).filter(a=>a!==null).reduce((a,o)=>!a||o&&o<a?o:a,null);if(!r)return{needed:!0,lastSyncTime:null,pendingChanges:-1};let i=0;for(const[a,o]of Object.entries(t))if(o){const s=qt(Zt(Je,a),vt("userId","==",e),vt("updatedAt",">",Kr.fromDate(o))),l=await kn(s);i+=l.size}return{needed:i>0,lastSyncTime:r,pendingChanges:i}}catch(t){return console.error("Failed to check sync status:",t),{needed:!0,lastSyncTime:null,pendingChanges:-1}}}static async executeProjectSync(e){const t=Date.now();console.log(`📁 Starting project sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncProjectsIncremental(e,i.projects);return r.processedDocuments=a.processed,r.skippedDocuments=a.skipped,r.collections.projects=a.processed,r.errors=a.errors,await this.updateProjectSyncTracker(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Project sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Project sync failed:",i),r}}static async updateProjectSyncTracker(e){const t=new Date;await St.from("sync_trackers").upsert({user_id:e,collection:"projects",last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}}class PPt{static async initializeDatabase(){const e=Date.now(),t=[],r=[];try{console.log("🔧 Starting Supabase database setup..."),await this.enableExtensions(t,r),await this.createCoreTables(t,r),await this.applyHNSWOptimizations(t,r),await this.createAdvancedFunctions(t,r),await this.setupRLSPolicies(t,r),await this.createMaterializedViews(t,r);const i=Date.now()-e;return console.log(`✅ Database setup completed in ${i}ms`),{success:r.length===0,steps:t,errors:r,executionTime:i}}catch(i){const a=i instanceof Error?i.message:"Unknown error";return r.push(`Critical setup failure: ${a}`),console.error("❌ Database setup failed:",a),{success:!1,steps:t,errors:r,executionTime:Date.now()-e}}}static async enableExtensions(e,t){try{const{error:r}=await St.rpc("exec_sql",{sql:"CREATE EXTENSION IF NOT EXISTS vector;"});r?t.push(`Failed to enable vector extension: ${r.message}`):e.push("✅ Enabled pgvector extension");const i=["pg_stat_statements","pg_trgm","btree_gin"];for(const a of i)try{const{error:o}=await St.rpc("exec_sql",{sql:`CREATE EXTENSION IF NOT EXISTS ${a};`});o||e.push(`✅ Enabled ${a} extension`)}catch{console.warn(`⚠️ Could not enable ${a} extension (non-critical)`)}}catch(r){t.push(`Extension setup failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async createCoreTables(e,t){const r=[{name:"embeddings",sql:`
          CREATE TABLE IF NOT EXISTS embeddings (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL CHECK (content_type IN ('task_aggregate', 'project_summary', 'session', 'site_usage', 'deep_focus', 'user_insight')),
            content_id text NOT NULL,
            content text NOT NULL,
            embedding vector(1536) NOT NULL,
            metadata jsonb NOT NULL DEFAULT '{}',
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now(),
            UNIQUE(user_id, content_type, content_id)
          );
        `},{name:"conversations",sql:`
          CREATE TABLE IF NOT EXISTS conversations (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            title text NOT NULL,
            is_active boolean DEFAULT true,
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now()
          );
        `},{name:"chat_messages",sql:`
          CREATE TABLE IF NOT EXISTS chat_messages (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            conversation_id uuid NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,
            user_id text NOT NULL,
            role text NOT NULL CHECK (role IN ('user', 'assistant')),
            content text NOT NULL,
            sources jsonb,
            metadata jsonb,
            created_at timestamptz DEFAULT now()
          );
        `},{name:"embedding_jobs",sql:`
          CREATE TABLE IF NOT EXISTS embedding_jobs (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL,
            content_ids text[] NOT NULL,
            status text NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),
            progress integer DEFAULT 0 CHECK (progress >= 0 AND progress <= 100),
            error text,
            created_at timestamptz DEFAULT now(),
            completed_at timestamptz
          );
        `}];for(const i of r)try{const{error:a}=await St.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name} table: ${a.message}`):e.push(`✅ Created ${i.name} table`)}catch(a){t.push(`Table creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async applyHNSWOptimizations(e,t){const r=[{name:"Drop old IVFFlat index",sql:"DROP INDEX IF EXISTS embeddings_embedding_idx;"},{name:"Create HNSW index for embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_embedding_hnsw_idx 
          ON embeddings USING hnsw (embedding vector_cosine_ops) 
          WITH (m = 16, ef_construction = 200);
        `},{name:"Create partial index for active content",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_active_idx 
          ON embeddings (user_id, content_type, created_at DESC) 
          WHERE metadata->>'status' != 'archived';
        `},{name:"Create partial index for recent embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_recent_idx 
          ON embeddings (user_id, created_at DESC) 
          WHERE created_at > (now() - interval '30 days');
        `},{name:"Create GIN index for metadata queries",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_metadata_gin_idx 
          ON embeddings USING gin (metadata);
        `},{name:"Create composite index for user content lookups",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_composite_idx 
          ON embeddings (user_id, content_type, content_id);
        `}];for(const i of r)try{const{error:a}=await St.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`Optimization error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createAdvancedFunctions(e,t){const r=[{name:"Enhanced match documents function",sql:`
          CREATE OR REPLACE FUNCTION enhanced_match_documents(
            query_embedding vector(1536),
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            filter_user_id text DEFAULT NULL,
            filter_content_type text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            similarity float
          )
          LANGUAGE plpgsql
          AS $$
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              1 - (e.embedding <=> query_embedding) AS similarity
            FROM embeddings e
            WHERE 
              (filter_user_id IS NULL OR e.user_id = filter_user_id)
              AND (filter_content_type IS NULL OR e.content_type = filter_content_type)
              AND 1 - (e.embedding <=> query_embedding) > match_threshold
            ORDER BY e.embedding <=> query_embedding
            LIMIT match_count;
          END;
          $$;
        `},{name:"Hybrid search function",sql:`
          CREATE OR REPLACE FUNCTION hybrid_search_documents(
            query_embedding vector(1536),
            search_text text DEFAULT NULL,
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            user_id_filter text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            vector_similarity float,
            text_rank float,
            hybrid_score float
          )
          LANGUAGE plpgsql
          AS $$
          DECLARE
            vector_weight float := 0.7;
            text_weight float := 0.3;
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              (1 - (e.embedding <=> query_embedding)) AS vector_similarity,
              CASE 
                WHEN search_text IS NOT NULL THEN 
                  ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                ELSE 0.0
              END AS text_rank,
              (vector_weight * (1 - (e.embedding <=> query_embedding)) + 
               text_weight * CASE 
                 WHEN search_text IS NOT NULL THEN 
                   ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                 ELSE 0.0
               END) AS hybrid_score
            FROM embeddings e
            WHERE 
              (user_id_filter IS NULL OR e.user_id = user_id_filter)
              AND (1 - (e.embedding <=> query_embedding)) > match_threshold
              AND (search_text IS NULL OR to_tsvector('english', e.content) @@ plainto_tsquery('english', search_text))
            ORDER BY hybrid_score DESC
            LIMIT match_count;
          END;
          $$;
        `},{name:"Update timestamp trigger function",sql:`
          CREATE OR REPLACE FUNCTION update_updated_at_column()
          RETURNS TRIGGER AS $$
          BEGIN
            NEW.updated_at = now();
            RETURN NEW;
          END;
          $$ language 'plpgsql';
        `}];for(const i of r)try{const{error:a}=await St.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`Function creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async setupRLSPolicies(e,t){const r=[{name:"Enable RLS on embeddings",sql:"ALTER TABLE embeddings ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on conversations",sql:"ALTER TABLE conversations ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on chat_messages",sql:"ALTER TABLE chat_messages ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on embedding_jobs",sql:"ALTER TABLE embedding_jobs ENABLE ROW LEVEL SECURITY;"},{name:"Embeddings RLS policy",sql:`
          CREATE POLICY "Users can only access their own embeddings" ON embeddings
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Conversations RLS policy",sql:`
          CREATE POLICY "Users can only access their own conversations" ON conversations
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Chat messages RLS policy",sql:`
          CREATE POLICY "Users can only access their own chat messages" ON chat_messages
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Embedding jobs RLS policy",sql:`
          CREATE POLICY "Users can only access their own embedding jobs" ON embedding_jobs
          FOR ALL USING (user_id = auth.uid()::text);
        `}];for(const i of r)try{const{error:a}=await St.rpc("exec_sql",{sql:i.sql});a&&!a.message.includes("already exists")?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`RLS policy error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createMaterializedViews(e,t){const r=[{name:"User embedding statistics view",sql:`
          CREATE MATERIALIZED VIEW IF NOT EXISTS user_embedding_stats AS
          SELECT 
            user_id,
            content_type,
            COUNT(*) as total_embeddings,
            AVG(length(content)) as avg_content_length,
            MAX(created_at) as last_embedding_created,
            COUNT(CASE WHEN created_at > now() - interval '7 days' THEN 1 END) as recent_embeddings
          FROM embeddings
          GROUP BY user_id, content_type;
        `},{name:"Create unique index on user embedding stats",sql:`
          CREATE UNIQUE INDEX IF NOT EXISTS user_embedding_stats_unique_idx 
          ON user_embedding_stats (user_id, content_type);
        `}];for(const i of r)try{const{error:a}=await St.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`View creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async checkDatabaseHealth(){const e=[],t=[];try{const r=["embeddings","conversations","chat_messages","embedding_jobs"];for(const i of r)try{const{error:a}=await St.from(i).select("id").limit(1);a&&a.code==="42P01"&&e.push(`Table: ${i}`)}catch{e.push(`Table: ${i}`)}try{const{error:i}=await St.rpc("exec_sql",{sql:"SELECT 1 FROM pg_extension WHERE extname = 'vector';"});i&&e.push("Extension: pgvector")}catch{e.push("Extension: pgvector")}return e.length>0&&t.push("Run DatabaseSetup.initializeDatabase() to fix missing components"),e.some(i=>i.includes("embeddings"))&&t.push("Critical: Embeddings table missing - RAG functionality will not work"),{isHealthy:e.length===0,missingComponents:e,recommendations:t}}catch{return{isHealthy:!1,missingComponents:["Database connection failed"],recommendations:["Check Supabase connection and credentials"]}}}static async applyMigrationIfNeeded(){console.log("🔍 Checking database health...");const e=await this.checkDatabaseHealth();return e.isHealthy?(console.log("✅ Database is healthy, no migration needed"),{success:!0,steps:["Database already healthy"],errors:[],executionTime:0}):(console.log("⚠️ Database needs setup. Missing components:",e.missingComponents),await this.initializeDatabase())}static async createTables(){try{console.log("🔧 Setting up database tables...");const{error:e}=await St.rpc("create_user_productivity_documents_table");if(e&&!e.message.includes("already exists"))throw e;const{error:t}=await St.rpc("create_sync_trackers_table");t&&!t.message.includes("already exists")&&(console.log("Creating sync_trackers table manually..."),await this.createSyncTrackersTable());const{error:r}=await St.rpc("create_match_documents_function");if(r&&!r.message.includes("already exists"))throw r;console.log("✅ Database setup complete")}catch(e){throw console.error("❌ Database setup failed:",e),e}}static async createSyncTrackersTable(){const e=`
      CREATE TABLE IF NOT EXISTS sync_trackers (
        id SERIAL PRIMARY KEY,
        user_id TEXT NOT NULL,
        collection TEXT NOT NULL,
        last_sync_time TIMESTAMPTZ,
        updated_at TIMESTAMPTZ DEFAULT NOW(),
        UNIQUE(user_id, collection)
      );
      
      -- Enable RLS
      ALTER TABLE sync_trackers ENABLE ROW LEVEL SECURITY;
      
      -- Create policy for users to only access their own sync trackers
      CREATE POLICY "Users can only access their own sync trackers" ON sync_trackers
        FOR ALL USING (auth.uid()::text = user_id);
      
      -- Create index for efficient queries
      CREATE INDEX IF NOT EXISTS idx_sync_trackers_user_collection 
        ON sync_trackers(user_id, collection);
    `,{error:t}=await St.rpc("exec_sql",{sql:e});if(t)throw console.error("Failed to create sync_trackers table:",t),t;console.log("✅ sync_trackers table created successfully")}}class XC{static analyzeQuery(e,t){const r=this.detectComplexity(e),i=this.detectDomain(e),a=this.detectTimeScope(e),o=this.CONFIG_PROFILES[r];return{complexity:r,domain:i,timeScope:a,expectedSourceCount:o.optimalSources,maxTokenBudget:o.tokenBudget,confidence:this.calculateConfidence(e,r,i)}}static getOptimalConfig(e,t){const i={...this.CONFIG_PROFILES[e.complexity]};return e.confidence<.7&&(i.optimalSources=Math.min(i.maxSources,Math.ceil(i.optimalSources*1.3))),t!=null&&t.prioritizeCost&&(i.costWeight+=.2,i.performanceWeight-=.2,i.optimalSources=Math.max(i.minSources,Math.floor(i.optimalSources*.8))),i}static detectComplexity(e){const t=e.toLowerCase();for(const a of this.COMPLEXITY_PATTERNS.analytical)if(a.test(t))return"analytical";for(const a of this.COMPLEXITY_PATTERNS.complex)if(a.test(t))return"complex";for(const a of this.COMPLEXITY_PATTERNS.moderate)if(a.test(t))return"moderate";for(const a of this.COMPLEXITY_PATTERNS.simple)if(a.test(t))return"simple";const r=e.split(/\s+/).length,i=/\b(what|how|why|when|where|which|who)\b/i.test(e);return r>15||!i&&r>10?"complex":r>8||!i?"moderate":"simple"}static detectDomain(e){const t=e.toLowerCase();for(const[r,i]of Object.entries(this.DOMAIN_PATTERNS))if(i.test(t))return r;return"general"}static detectTimeScope(e){const t=e.toLowerCase();return/\b(today|now|current|recent|latest|this\s+week)\b/i.test(t)?"recent":/\b(yesterday|last\s+\w+|ago|previous|past)\b/i.test(t)?"historical":/\b(\d{4}|january|february|march|april|may|june|july|august|september|october|november|december)\b/i.test(t)?"specific":"broad"}static calculateConfidence(e,t,r){let i=.5;/\b(what|how|why|when|where|which|who)\b/i.test(e)&&(i+=.2),r!=="general"&&(i+=.15);const o=e.split(/\s+/).length;return(t==="simple"&&o<=8||t==="moderate"&&o<=12||t==="complex"&&o<=20)&&(i+=.15),Math.min(1,i)}}zt(XC,"CONFIG_PROFILES",{simple:{minSources:2,maxSources:5,optimalSources:3,tokenBudget:2e3,costWeight:.7,performanceWeight:.3},moderate:{minSources:3,maxSources:8,optimalSources:5,tokenBudget:4e3,costWeight:.5,performanceWeight:.5},complex:{minSources:5,maxSources:12,optimalSources:8,tokenBudget:6e3,costWeight:.3,performanceWeight:.7},analytical:{minSources:8,maxSources:15,optimalSources:10,tokenBudget:8e3,costWeight:.2,performanceWeight:.8}}),zt(XC,"COMPLEXITY_PATTERNS",{simple:[/^(what|when|where|who|which)\s+is\s+/i,/^(show|list|get)\s+/i,/^(how\s+many|how\s+much)\s+/i],moderate:[/^(how\s+do\s+i|help\s+me)\s+/i,/\b(compare|contrast|difference|similar)\b/i,/\b(recent|latest|last\s+\w+)\b/i],complex:[/\b(analyze|analysis|pattern|trend|insight)\b/i,/\b(why|because|reason|cause|effect)\b/i,/\b(best|optimal|improve|optimize|recommend)\b/i],analytical:[/\b(comprehensive|detailed|in-depth|thorough)\b/i,/\b(correlation|relationship|impact|influence)\b/i,/\b(strategy|plan|approach|methodology)\b/i]}),zt(XC,"DOMAIN_PATTERNS",{task:/\b(task|todo|assignment|activity|action)\b/i,project:/\b(project|milestone|deliverable|goal)\b/i,productivity:/\b(productive|focus|distraction|efficiency|performance)\b/i,time:/\b(time|hour|minute|day|week|month|schedule|calendar)\b/i});class ZDe{static async selectOptimalSources(e,t,r,i={}){const a=XC.analyzeQuery(e,t),o=XC.getOptimalConfig(a,i);console.log("🎯 Query Analysis:",{complexity:a.complexity,domain:a.domain,expectedSources:a.expectedSourceCount,confidence:a.confidence});const s=await this.scoreSourcesByRelevance(e,r,a),l=this.selectSourcesByStrategy(s,o,a,i),c=this.estimateTokenUsage(e,l),u=this.calculateCost(c,"gpt-4o-mini");return{selectedSources:l,totalAvailableSources:r.length,selectionStrategy:this.getSelectionStrategy(a,o,i),estimatedTokens:c,estimatedCost:u,confidence:a.confidence}}static async scoreSourcesByRelevance(e,t,r){const i=e.toLowerCase().split(/\s+/).filter(a=>a.length>2);return t.map(a=>{let o=0,s=0;const l=(a.content||"").toLowerCase(),c=a.metadata||{},u=i.filter(d=>l.includes(d));if(o+=u.length/i.length*.4,r.domain!=="general"){const d=this.getDomainKeywords(r.domain),h=d.filter(f=>l.includes(f));o+=h.length/d.length*.3}if(r.timeScope==="recent"){const d=a.created_at?(Date.now()-new Date(a.created_at).getTime())/864e5:999;o+=Math.max(0,(30-d)/30)*.2}if(a.content_type){const d=this.getContentTypeRelevance(a.content_type,r.domain);o+=d*.1}return s+=Math.min(1,l.length/500)*.4,s+=(c.importance||.5)*.3,s+=a.embeddings?.3:0,{...a,relevanceScore:Math.min(1,o),qualityScore:Math.min(1,s)}}).sort((a,o)=>{const s=a.relevanceScore*.7+a.qualityScore*.3;return o.relevanceScore*.7+o.qualityScore*.3-s})}static selectSourcesByStrategy(e,t,r,i){const a=i.minQualityThreshold||.3,o=e.filter(l=>l.qualityScore>=a);let s=t.optimalSources;return o.length<s&&(s=Math.max(t.minSources,o.length)),i.prioritizeCost&&o.length>t.minSources&&(s=Math.max(t.minSources,Math.ceil(s*.7))),i.maxTokenBudget&&(s=this.adjustForTokenBudget(o,s,i.maxTokenBudget)),this.selectDiverseSources(o,s)}static selectDiverseSources(e,t){if(e.length<=t)return e;const r=[],i=[...e];for(r.push(i.shift());r.length<t&&i.length>0;){let a=i[0],o=0;for(const s of i){const l=this.calculateDiversityScore(s,r),c=s.relevanceScore*.6+l*.4;c>o&&(o=c,a=s)}r.push(a),i.splice(i.indexOf(a),1)}return r}static calculateDiversityScore(e,t){if(t.length===0)return 1;const r=(e.content||"").toLowerCase();let i=1;for(const a of t){const o=(a.content||"").toLowerCase(),s=this.calculateContentSimilarity(r,o);i=Math.min(i,1-s)}return i}static calculateContentSimilarity(e,t){const r=new Set(e.split(/\s+/)),i=new Set(t.split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return a.size/o.size}static adjustForTokenBudget(e,t,r){let i=0,a=0;for(let o=0;o<Math.min(t,e.length);o++){const s=this.estimateSourceTokens(e[o]);if(i+s<=r)i+=s,a++;else break}return Math.max(1,a)}static estimateSourceTokens(e){const t=e.content||"";return Math.ceil(t.length/4)}static estimateTokenUsage(e,t){const r=Math.ceil(e.length/4),i=t.reduce((o,s)=>o+this.estimateSourceTokens(s),0);return r+i+150}static calculateCost(e,t){const r=this.TOKEN_COSTS[t]||this.TOKEN_COSTS["gpt-4o-mini"];return e*r.input}static getDomainKeywords(e){return{task:["task","todo","assignment","activity","action","complete","finish"],project:["project","milestone","deliverable","goal","objective","phase"],productivity:["productive","focus","distraction","efficiency","performance","work"],time:["time","hour","minute","day","week","month","schedule","calendar"]}[e]||[]}static getContentTypeRelevance(e,t){const i={task:{task:1,project:.7,session:.5,document:.3},project:{project:1,task:.8,session:.6,document:.4},productivity:{session:1,task:.8,project:.6,document:.5},time:{session:1,task:.7,project:.5,document:.3}}[t];return(i==null?void 0:i[e])||.5}static getSelectionStrategy(e,t,r){const i=[];return i.push(`${e.complexity}-complexity`),r.prioritizeCost&&i.push("cost-optimized"),r.maxTokenBudget&&i.push("token-constrained"),e.confidence<.7&&i.push("uncertainty-boosted"),i.join(", ")}}zt(ZDe,"TOKEN_COSTS",{"gpt-4o":{input:5e-6,output:15e-6},"gpt-4o-mini":{input:15e-8,output:6e-7},"gpt-4":{input:3e-5,output:6e-5}});class OPt{static async queryWithRAG(e,t,r){try{const i=Date.now();let a=[];try{const f=await Ar.generateEmbedding({content:e,contentType:"query"}),{data:m,error:v}=await St.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).limit(12);v?console.warn("Vector search error:",v):(a=m||[],console.log(`✅ Found ${a.length} documents with embeddings`))}catch(f){console.warn("Embedding generation failed, falling back to simple retrieval:",f)}if(a.length===0){console.log("No vector results, using fallback document retrieval");const{data:f,error:m}=await St.from("user_productivity_documents").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(10);m?console.error("Fallback document retrieval error:",m):(a=f||[],console.log(`📚 Fallback found ${a.length} documents`))}let o=a;if(a&&a.length>0){const f=await ZDe.selectOptimalSources(e,t,a,{prioritizeCost:!0,minQualityThreshold:.25,maxTokenBudget:4e3});o=f.selectedSources,console.log(`📊 Simple RAG selection: ${o.length}/${a.length} sources, estimated cost: $${f.estimatedCost.toFixed(5)}`)}const s=(o==null?void 0:o.map((f,m)=>`[${m+1}] ${f.content}`).join(`

`))||"No relevant documents found.";console.log("Generating chat response with context:",{query:e,contextLength:s.length,documentCount:o.length});const l=await Ar.generateChatResponse({query:e,context:s,conversationHistory:r}),c=this.cleanResponse(l);console.log("Chat response generated successfully:",c.substring(0,100)+"...");const d=Date.now()-i,h=(o==null?void 0:o.map((f,m)=>{var v,y;return{id:`source_${m+1}`,type:f.content_type||"document",contentId:((v=f.metadata)==null?void 0:v.documentId)||f.id,title:((y=f.metadata)==null?void 0:y.title)||`Document ${m+1}`,snippet:f.content.substring(0,200)+"...",relevanceScore:.8}}))||[];return{response:c,sources:h,metadata:{responseTime:d,relevanceScore:h.length>0?h[0].relevanceScore:0,tokens:Ar.estimateTokens(c),model:"gpt-4o-mini",retrievedDocuments:(o==null?void 0:o.length)||0}}}catch(i){throw console.error("Simple RAG query error:",i),console.error("Error details:",{message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:void 0,userId:t,query:e.substring(0,50)+"..."}),new Error(`Failed to process RAG query: ${i instanceof Error?i.message:"Unknown error"}`)}}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static async addDocumentToVectorStore(e,t,r){try{const i=await Ar.generateEmbedding({content:e,contentType:t.contentType||"document"}),{error:a}=await St.from("user_productivity_documents").insert({user_id:r,content_type:"text",content:e,metadata:t,embedding:i});if(a)throw a;console.log("✅ Document added to vector store:",{userId:r,contentLength:e.length})}catch(i){throw console.error("Error adding document to vector store:",i),new Error("Failed to add document to vector store")}}static async deleteUserDocuments(e){try{const{error:t}=await St.from("user_productivity_documents").delete().eq("user_id",e);if(t)throw t}catch(t){throw console.error("Error deleting user documents:",t),new Error("Failed to delete user documents")}}}class XG{static async initializeUserSync(e){try{console.log("Initializing data sync for user:",e),this.stopSync(),await Promise.all([this.syncTasks(e),this.syncSessions(e),this.syncProjects(e)]),console.log("Data sync initialized for user:",e)}catch(t){throw console.error("Failed to initialize data sync:",t),new Error("Failed to initialize data sync")}}static stopSync(){console.log(`🛑 Stopping ${this.syncListeners.length} active Firebase listeners`),this.syncListeners.forEach(e=>e()),this.syncListeners=[],console.log("✅ All Firebase listeners cleaned up")}static getActiveListenerCount(){return this.syncListeners.length}static isActive(){return this.syncListeners.length>0}static async syncTasks(e){const t=qt(Zt(Je,"tasks"),vt("userId","==",e),ta("updatedAt","desc")),r=ny(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatTaskForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncSessions(e){const t=qt(Zt(Je,"workSessions"),vt("userId","==",e),ta("updatedAt","desc")),r=ny(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatSessionForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncProjects(e){const t=qt(Zt(Je,"projects"),vt("userId","==",e),ta("updatedAt","desc")),r=ny(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatProjectForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null},userId:t.userId,updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",metadata:{documentId:e,name:t.name,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static async processBatch(e){try{await Promise.all(e.map(async t=>{try{await OPt.addDocumentToVectorStore(t.content,t.metadata,t.userId)}catch(r){console.error(`Failed to sync document ${t.id}:`,r)}})),console.log(`Synced ${e.length} documents to vector store`)}catch(t){console.error("Batch processing failed:",t)}}static async performInitialSync(e){try{console.log("🔄 Starting initial sync for user:",e);const t=[];console.log("📝 Syncing existing tasks...");const r=qt(Zt(Je,"tasks"),vt("userId","==",e)),i=await kn(r);i.docs.forEach(u=>{const d=u.data(),h=this.formatTaskForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📝 Found ${i.size} tasks to sync`),console.log("⏱️ Syncing existing work sessions...");const a=qt(Zt(Je,"workSessions"),vt("userId","==",e)),o=await kn(a),s=o.docs.slice(0,50).forEach(u=>{const d=u.data(),h=this.formatSessionForEmbedding(u.id,d);h&&t.push(h)});console.log(`⏱️ Found ${Math.min(o.size,50)} work sessions to sync`),console.log("📁 Syncing existing projects...");const l=qt(Zt(Je,"projects"),vt("userId","==",e)),c=await kn(l);c.docs.forEach(u=>{const d=u.data(),h=this.formatProjectForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📁 Found ${c.size} projects to sync`),console.log(`🚀 Processing ${t.length} total documents...`),t.length>0?(await this.processBatch(t),console.log(`✅ Initial sync completed: ${t.length} documents processed`)):console.log("⚠️ No documents found to sync")}catch(t){throw console.error("❌ Initial sync failed:",t),t}}}zt(XG,"syncListeners",[]);class ZG{static async initializeCompleteSync(e){const t=Date.now();console.log("🚀 Starting complete data synchronization for user:",e);try{await this.ensureSupabaseSchema();const r=await this.performBulkSync(e);await this.setupRealtimeSync(e),this.scheduleMaintenanceTasks(e),this.isInitialized=!0;const i=Date.now()-t;return console.log(`✅ Complete data sync initialized in ${i}ms`),{...r,executionTime:i}}catch(r){throw console.error("❌ Failed to initialize complete data sync:",r),new Error(`Complete sync initialization failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async performBulkSync(e){const t=[{name:"tasks",processor:this.processTasks},{name:"projects",processor:this.processProjects},{name:"workSessions",processor:this.processWorkSessions},{name:"dailySiteUsage",processor:this.processSiteUsage},{name:"deepFocusSessions",processor:this.processDeepFocusSessions}],r={};let i=0,a=0;for(const{name:o,processor:s}of t){console.log(`📋 Processing collection: ${o}`);try{const l=await s.call(this,e);r[o]=l,i+=l.processed,a+=l.errors.length,console.log(`✅ ${o}: ${l.processed} documents processed, ${l.errors.length} errors`)}catch(l){const c=l instanceof Error?l.message:"Unknown error";r[o]={collection:o,processed:0,total:0,status:"failed",errors:[c]},a++,console.error(`❌ Failed to process ${o}:`,c)}}return{success:a===0,totalProcessed:i,totalErrors:a,collectionResults:r,executionTime:0}}static async processTasks(e){const t={collection:"tasks",processed:0,total:0,status:"processing",errors:[]};try{const r=qt(Zt(Je,"tasks"),vt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatTaskForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processProjects(e){const t={collection:"projects",processed:0,total:0,status:"processing",errors:[]};try{const r=qt(Zt(Je,"projects"),vt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatProjectForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processWorkSessions(e){const t={collection:"workSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=qt(Zt(Je,"workSessions"),vt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSessionForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processSiteUsage(e){const t={collection:"dailySiteUsage",processed:0,total:0,status:"processing",errors:[]};try{const r=qt(Zt(Je,"dailySiteUsage"),vt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSiteUsageForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processDeepFocusSessions(e){const t={collection:"deepFocusSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=qt(Zt(Je,"deepFocusSessions"),vt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatDeepFocusForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:"",t.timeSpent?`Time spent: ${Math.round(t.timeSpent/60)} minutes`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",contentId:e,metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],timeSpent:t.timeSpent||0,projectId:t.projectId,completionStatus:t.status==="completed",createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",contentId:e,metadata:{documentId:e,name:t.name,description:t.description,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.sessionType?`Type: ${t.sessionType}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",contentId:e,metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,sessionType:t.sessionType,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null,projectId:t.projectId,taskId:t.taskId},userId:t.userId,priority:r>60?"high":r>30?"medium":"low",updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatSiteUsageForEmbedding(e,t){var o,s,l,c;if(!t.date||!t.totalTime)return null;const r=Math.round(t.totalTime/(1e3*60*60)*10)/10,i=Object.entries(t.sites||{}).sort(([,u],[,d])=>d.timeSpent-u.timeSpent).slice(0,5).map(([u,d])=>`${u} (${Math.round(d.timeSpent/(1e3*60))} mins)`).join(", "),a=[`Daily Site Usage - ${t.date}`,`Total time: ${r} hours`,`Sites visited: ${t.sitesVisited}`,`Productivity score: ${t.productivityScore}%`,i?`Top sites: ${i}`:"",`Extension version: ${t.extensionVersion||"unknown"}`].filter(Boolean).join(`
`);return{id:e,content:a,contentType:"site_usage",contentId:e,metadata:{documentId:e,date:t.date,totalTime:t.totalTime,timeInHours:r,sitesVisited:t.sitesVisited,productivityScore:t.productivityScore,extensionVersion:t.extensionVersion,topSites:Object.keys(t.sites||{}).slice(0,10),syncedAt:((s=(o=t.syncedAt)==null?void 0:o.toDate)==null?void 0:s.call(o))||new Date},userId:t.userId,priority:t.productivityScore>=80?"high":t.productivityScore>=60?"medium":"low",updatedAt:((c=(l=t.updatedAt)==null?void 0:l.toDate)==null?void 0:c.call(l))||new Date}}static formatDeepFocusForEmbedding(e,t){var a,o;if(!t.sessionDate||!t.duration)return null;const r=Math.round(t.duration/60),i=[`Deep Focus Session - ${t.sessionDate}`,`Duration: ${r} minutes`,t.sessionType?`Type: ${t.sessionType}`:"",t.distractionCount!==void 0?`Distractions: ${t.distractionCount}`:"",t.focusScore!==void 0?`Focus score: ${t.focusScore}%`:"",t.notes?`Notes: ${t.notes}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"deep_focus",contentId:e,metadata:{documentId:e,sessionDate:t.sessionDate,duration:t.duration,durationInMinutes:r,sessionType:t.sessionType,distractionCount:t.distractionCount,focusScore:t.focusScore,notes:t.notes},userId:t.userId,priority:t.focusScore>=80?"high":t.focusScore>=60?"medium":"low",updatedAt:((o=(a=t.updatedAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date}}static async processBatchWithPipeline(e){if(e.length!==0)try{const t=e.map(r=>({id:r.contentId,title:r.content.split(`
`)[0],description:r.content,category:r.metadata.category||"general",priority:r.priority,status:r.metadata.status||"active",tags:r.metadata.tags||[],userId:r.userId,timeSpent:r.metadata.timeSpent||r.metadata.duration||0,projectId:r.metadata.projectId,createdAt:r.metadata.createdAt||new Date,updatedAt:r.updatedAt,contentType:r.contentType,originalMetadata:r.metadata}));for(const r of e)try{const i=await Ar.generateEmbedding({content:r.content,contentType:r.contentType}),{error:a}=await St.from("user_productivity_documents").insert({user_id:r.userId,content_type:r.contentType,content:r.content,embedding:i,metadata:{documentId:r.id,sourceCollection:r.contentType,originalData:r.metadata,syncedAt:new Date().toISOString()}});if(a)throw a}catch(i){console.error(`Error processing document ${r.id}:`,i)}console.log(`✅ Processed ${e.length} documents of type ${e[0].contentType}`)}catch(t){throw console.error("❌ Failed to process batch with pipeline:",t),t}}static async ensureSupabaseSchema(){try{const{data:e,error:t}=await St.from("embeddings").select("id").limit(1);if(t&&t.code==="42P01")throw console.log("⚠️ Supabase schema not ready. Please run the schema setup first."),new Error("Supabase database schema not initialized. Please run the database migration.");if(t)throw t;console.log("✅ Supabase schema verified")}catch(e){throw console.error("❌ Schema verification failed:",e),e}}static async setupRealtimeSync(e){this.stopSync();const t=[{name:"tasks",formatter:this.formatTaskForEmbedding},{name:"projects",formatter:this.formatProjectForEmbedding},{name:"workSessions",formatter:this.formatSessionForEmbedding},{name:"dailySiteUsage",formatter:this.formatSiteUsageForEmbedding},{name:"deepFocusSessions",formatter:this.formatDeepFocusForEmbedding}];for(const{name:r,formatter:i}of t){const a=qt(Zt(Je,r),vt("userId","==",e),ta("updatedAt","desc")),o=ny(a,async s=>{const l=[];if(s.docChanges().forEach(c=>{if(c.type==="added"||c.type==="modified"){const u=c.doc.data(),d=i.call(this,c.doc.id,u);d&&l.push(d)}}),l.length>0)try{await this.processBatchWithPipeline(l),console.log(`🔄 Real-time sync: ${l.length} ${r} documents updated`)}catch(c){console.error(`❌ Real-time sync failed for ${r}:`,c)}});this.syncListeners.push(o)}console.log("👂 Real-time sync listeners established for all collections")}static scheduleMaintenanceTasks(e){const t=new Date;t.setDate(t.getDate()+1),t.setHours(3,0,0,0);const r=t.getTime()-Date.now();setTimeout(()=>{this.performMaintenanceCleanup(e),setInterval(()=>{this.performMaintenanceCleanup(e)},24*60*60*1e3)},r),console.log("⏰ Maintenance tasks scheduled")}static async performMaintenanceCleanup(e){try{console.log("🧹 Starting maintenance cleanup for user:",e);const{data:t}=await St.from("embeddings").select("id, content_id, created_at").eq("user_id",e).order("content_id").order("created_at",{ascending:!1});if(t&&t.length>0){const r=new Set,i=[];for(const a of t)r.has(a.content_id)?i.push(a.id):r.add(a.content_id);if(i.length>0){const{error:a}=await St.from("embeddings").delete().in("id",i);a||console.log(`🗑️ Cleaned up ${i.length} duplicate embeddings`)}}console.log("✅ Maintenance cleanup completed")}catch(t){console.error("❌ Maintenance cleanup failed:",t)}}static stopSync(){this.syncListeners.forEach(e=>e()),this.syncListeners=[],this.isInitialized=!1,console.log("🛑 All sync listeners stopped")}static async getSyncStatus(e){try{const{data:t}=await St.from("embeddings").select("content_type, created_at").eq("user_id",e),r={},i={};return t&&t.forEach(a=>{r[a.content_type]=(r[a.content_type]||0)+1;const o=new Date(a.created_at);(!i[a.content_type]||o>i[a.content_type])&&(i[a.content_type]=o)}),{isInitialized:this.isInitialized,embeddingCounts:r,lastSyncTimes:i,totalEmbeddings:(t==null?void 0:t.length)||0}}catch(t){return console.error("❌ Failed to get sync status:",t),{isInitialized:!1,embeddingCounts:{},lastSyncTimes:{},totalEmbeddings:0}}}}zt(ZG,"syncListeners",[]),zt(ZG,"isInitialized",!1);class BL{static calculateBM25Scores(e,t){if(!t||t.length===0)return[];const r=this.tokenize(e);if(r.length===0)return t.map(l=>({docId:l.id,score:0,document:l}));const i=t.map(l=>({...l,tokens:this.tokenize(l.content),termFreqs:this.calculateTermFrequencies(this.tokenize(l.content))})),a=i.reduce((l,c)=>l+c.tokens.length,0)/i.length,o=this.calculateDocumentFrequencies(i,r);return i.map(l=>{let c=0;for(const u of r){const d=l.termFreqs[u]||0,h=o[u]||0;if(d>0&&h>0){const f=Math.log((t.length-h+.5)/(h+.5)),m=d*(this.K1+1),v=d+this.K1*(1-this.B+this.B*(l.tokens.length/a));c+=f*(m/v)}}return{docId:l.id,score:Math.max(0,c),document:l}}).sort((l,c)=>c.score-l.score)}static tokenize(e){return e?e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>=2).filter(t=>!this.isStopWord(t)):[]}static calculateTermFrequencies(e){const t={};for(const r of e)t[r]=(t[r]||0)+1;return t}static calculateDocumentFrequencies(e,t){const r={};for(const i of t){let a=0;for(const o of e)o.termFreqs[i]>0&&a++;r[i]=a}return r}static isStopWord(e){return new Set(["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","will","with","have","had","this","these","they","been","their","said","each","which","she","do","how","his","or","but","what","some","we","can","out","other","were","all","any","your","when","up","use","word","way","about","many","then","them","would","like","so","these","her","long","make","thing","see","him","two","more","go","no","way","could","my","than","first","water","been","call","who","oil","sit","now","find","down","day","did","get","come","made","may","part"]).has(e)}static calculateEnhancedBM25Scores(e,t,r={}){const{positionWeight:i=.1,proximityWeight:a=.1,titleBoost:o=1.5}=r,s=this.calculateBM25Scores(e,t),l=this.tokenize(e);return s.map(c=>{let u=c.score;const d=c.document,h=this.tokenize(d.content);for(const f of l){const m=h.indexOf(f);if(m!==-1){const v=i*(h.length-m)/h.length;u+=v}}if(l.length>1){const f=l.map(m=>h.indexOf(m)).filter(m=>m!==-1);if(f.length>1){const m=Math.max(...f)-Math.min(...f),v=a*Math.max(0,1-m/h.length);u+=v}}return d.content.length<100&&d.content.includes(":")&&(u*=o),{...c,score:u}})}}zt(BL,"K1",1.2),zt(BL,"B",.75);class pge{static fuseResults(e){const{vectorResults:t,keywordResults:r,k:i=60,vectorWeight:a=1,keywordWeight:o=1}=e;console.log(`🔀 RRF: Fusing ${t.length} vector results + ${r.length} keyword results`);const s=new Map,l=new Map,c=new Map;t.forEach((h,f)=>{const m=this.extractDocumentId(h);s.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)}),r.forEach((h,f)=>{const m=this.extractDocumentId(h);l.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)});const u=[];for(const[h,f]of c){const m=s.get(h),v=l.get(h);let y=0;m&&(y+=a/(i+m.rank)),v&&(y+=o/(i+v.rank)),u.push({document:f,vectorScore:m==null?void 0:m.score,keywordScore:v==null?void 0:v.score,fusedScore:y,vectorRank:m==null?void 0:m.rank,keywordRank:v==null?void 0:v.rank,documentId:h})}const d=u.sort((h,f)=>f.fusedScore-h.fusedScore);return console.log(`✅ RRF: Generated ${d.length} fused results`),console.log(`📊 Top 3 RRF scores: ${d.slice(0,3).map(h=>h.fusedScore.toFixed(4)).join(", ")}`),d}static fuseResultsAdvanced(e){const{contentTypeBoosts:t={},recencyWeight:r=.1,diversityWeight:i=.1}=e,s=this.fuseResults(e).map(l=>{var h,f,m;let c=l.fusedScore;const u=l.document,d=u.content_type||((h=u.metadata)==null?void 0:h.contentType);if(d&&t[d]&&(c*=t[d]),u.created_at){const v=(Date.now()-new Date(u.created_at).getTime())/864e5,y=Math.exp(-v/30)*r;c+=y}return(m=(f=u.metadata)==null?void 0:f.analytics)!=null&&m.productivity&&(c+=u.metadata.analytics.productivity*.1),{...l,fusedScore:c}}).sort((l,c)=>c.fusedScore-l.fusedScore);return i>0?this.applyDiversityFiltering(s,i):s}static extractDocumentId(e){var t,r,i;return e.documentId||((t=e.document)==null?void 0:t.id)||((r=e.document)==null?void 0:r.document_id)||((i=e.document)==null?void 0:i.content)||`doc_${Math.random().toString(36).substr(2,9)}`}static applyDiversityFiltering(e,t){const r=new Map,i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.document.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.document.metadata)==null?void 0:f.projectId)||c.document.project_id;u?(r.has(u)||r.set(u,[]),r.get(u).push(c)):i.push(c)});const a=[],o=Math.max(2,Math.floor(e.length/Math.max(r.size,1))),s=Array.from(r.values());let l=Math.max(...s.map(c=>c.length),i.length);for(let c=0;c<l&&a.length<e.length;c++){for(const u of s)c<u.length&&a.length<e.length&&a.filter(h=>{var f,m,v,y;return((m=(f=h.document.metadata)==null?void 0:f.entities)==null?void 0:m.projectId)===((y=(v=u[0].document.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)}).length<o&&a.push(u[c]);c<i.length&&a.length<e.length&&a.push(i[c])}return console.log(`🎯 Diversity filtering: ${r.size} projects, max ${o} per project`),a}static analyzeRRFEffectiveness(e){const t=e.filter(l=>l.vectorScore&&!l.keywordScore).length,r=e.filter(l=>l.keywordScore&&!l.vectorScore).length,i=e.filter(l=>l.vectorScore&&l.keywordScore).length,a=e.map(l=>l.fusedScore).sort((l,c)=>l-c),o=a[Math.floor(a.length/2)]||0,s=a.reduce((l,c)=>l+c,0)/a.length||0;return{totalResults:e.length,vectorOnlyResults:t,keywordOnlyResults:r,hybridResults:i,averageFusedScore:s,scoreDistribution:{min:a[0]||0,max:a[a.length-1]||0,median:o}}}}class RPt{static async rerankDocuments(e,t,r={}){const i=Date.now(),{model:a="hybrid",maxCandidates:o=50,minRelevanceScore:s=.1,contextWindow:l=512,diversityWeight:c=.1,recencyWeight:u=.05,contentTypeWeights:d={}}=r;if(console.log(`🔄 Starting re-ranking with ${a} strategy for ${t.length} documents`),t.length===0)return this.createEmptyResult(i);const h=t.slice(0,o);try{let f;switch(a){case"cross-encoder":f=await this.crossEncoderRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"semantic-similarity":f=await this.semanticSimilarityRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"hybrid":default:f=await this.hybridRerank(e,h,{contextWindow:l,minRelevanceScore:s,diversityWeight:c,recencyWeight:u,contentTypeWeights:d});break}const m=f.filter(w=>w.rerankScore>=s).sort((w,_)=>_.rerankScore-w.rerankScore).map((w,_)=>({...w,rank:_+1})),v=Date.now()-i,y=this.generateMetadata(h,m,v,a);return console.log(`✅ Re-ranking completed: ${m.length} results in ${v}ms`),console.log(`📊 Score distribution - High: ${y.scoreDistribution.high}, Medium: ${y.scoreDistribution.medium}, Low: ${y.scoreDistribution.low}`),{rerankedResults:m,metadata:y}}catch(f){return console.error("❌ Re-ranking failed:",f),this.createEmptyResult(i,f)}}static async crossEncoderRerank(e,t,r){console.log("🧠 Applying cross-encoder re-ranking");const i=[],a=this.extractKeyTerms(e);for(const o of t){const{document:s,score:l}=o,c=s.content||"",u=this.simulateCrossEncoderScore(e,c,a),d=this.calculateContextualRelevance(e,s),h=this.calculatePositionBonus(c,a),f=u*.6+d*.3+h*.1;i.push({document:s,originalScore:l,rerankScore:f,rank:0,confidence:Math.min(.95,u+.1),explanation:`Cross-encoder: ${u.toFixed(3)}, Context: ${d.toFixed(3)}, Position: ${h.toFixed(3)}`})}return i}static async semanticSimilarityRerank(e,t,r){console.log("🔍 Applying semantic similarity re-ranking");const i=[],a=await this.generateQueryRepresentation(e);for(const o of t){const{document:s,score:l}=o,c=this.calculateEnhancedSemanticScore(e,s,a),u=this.calculateCoherenceScore(s),d=this.calculateDiversityPenalty(s,i),h=c*u*(1-d);i.push({document:s,originalScore:l,rerankScore:h,rank:0,confidence:c,explanation:`Semantic: ${c.toFixed(3)}, Coherence: ${u.toFixed(3)}, Diversity: ${(1-d).toFixed(3)}`})}return i}static async hybridRerank(e,t,r){console.log("🔀 Applying hybrid re-ranking strategy");const i=[],a=this.extractKeyTerms(e),o=this.analyzeQueryIntent(e);for(const s of t){const{document:l,score:c}=s,u=this.calculateAdvancedSemanticScore(e,l),d=this.calculateLexicalOverlap(a,l.content||""),h=this.calculateStructuralRelevance(l,o),f=this.calculateFreshnessScore(l,r.recencyWeight),m=this.calculateContentTypeScore(l,r.contentTypeWeights),v=this.calculatePositionRelevance(l.content||"",a),y=u*.35+d*.25+h*.15+f*.1+m*.1+v*.05,w=Math.min(.95,(u+d)/2+.1);i.push({document:l,originalScore:c,rerankScore:y,rank:0,confidence:w,explanation:`Hybrid: Sem(${u.toFixed(2)}) + Lex(${d.toFixed(2)}) + Struct(${h.toFixed(2)}) + Fresh(${f.toFixed(2)}) + Type(${m.toFixed(2)})`})}return i}static simulateCrossEncoderScore(e,t,r){const i=e.toLowerCase(),a=t.toLowerCase(),o=a.includes(i)?1:0,l=r.filter(d=>a.includes(d.toLowerCase())).length/Math.max(r.length,1),c=r.some(d=>a.indexOf(d.toLowerCase())<100)?.2:0,u=Math.min(1,500/Math.max(t.length,100));return(o*.4+l*.4+c+u*.2)*.9}static calculateContextualRelevance(e,t){let r=.5;const i=t.metadata||{},a=t.content_type||"";if(e.toLowerCase().includes("project")&&a.includes("project")&&(r+=.3),e.toLowerCase().includes("task")&&a.includes("task")&&(r+=.3),e.toLowerCase().includes("summary")&&a.includes("summary")&&(r+=.2),i.created_at){const s=(Date.now()-new Date(i.created_at).getTime())/(1e3*60*60*24),l=Math.max(0,1-s/30);r+=l*.1}return Math.min(1,r)}static calculatePositionBonus(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=Math.max(0,1-s/Math.min(e.length,500));i+=l,a++}}return a>0?i/a:0}static extractKeyTerms(e){const t=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","how","what","when","where","why","who","which","many","much","some","any","all","my","me","i","you","he","she","it","we","they","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","tell","show","give","please"]);return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>2&&!t.has(r)).slice(0,10)}static async generateQueryRepresentation(e){return{terms:this.extractKeyTerms(e),intent:this.analyzeQueryIntent(e),complexity:e.split(/\s+/).length}}static analyzeQueryIntent(e){const t=e.toLowerCase();return t.includes("how many")||t.includes("count")||t.includes("number")?"quantitative":t.includes("what")||t.includes("which")||t.includes("show")?"informational":t.includes("why")||t.includes("how")||t.includes("explain")?"analytical":t.includes("status")||t.includes("progress")||t.includes("update")?"status":"general"}static calculateEnhancedSemanticScore(e,t,r){const i=t.content||"",a=this.extractKeyTerms(e),o=this.extractKeyTerms(i),s=a.filter(d=>o.includes(d)).length,l=new Set([...a,...o]).size,c=l>0?s/l:0,u=a.reduce((d,h)=>{const f=(i.toLowerCase().match(new RegExp(h.toLowerCase(),"g"))||[]).length;return d+Math.log(1+f)},0)/Math.max(a.length,1);return(c*.6+u*.4)*.8}static calculateCoherenceScore(e){const t=e.content||"",r=(t.match(/[.!?]+/g)||[]).length,i=t.split(/\s+/).length,a=r>0?i/r:0,o=a>0?Math.max(0,1-Math.abs(a-20)/20):.5,s=/[:\-\*\d+\.]/.test(t)?.1:0;return Math.min(1,o+s+.3)}static calculateDiversityPenalty(e,t){if(t.length===0)return 0;const r=e.content||"",i=e.content_type||"",a=t.filter(c=>c.document.content_type===i).length,o=Math.min(.3,a*.1),l=t.reduce((c,u)=>{const d=this.calculateSimpleSimilarity(r,u.document.content||"");return Math.max(c,d)},0)*.2;return Math.min(.5,o+l)}static calculateSimpleSimilarity(e,t){const r=new Set(e.toLowerCase().split(/\s+/)),i=new Set(t.toLowerCase().split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return o.size>0?a.size/o.size:0}static calculateAdvancedSemanticScore(e,t){const r=t.content||"",i=this.extractKeyTerms(e),a=this.calculateExactMatchScore(e,r),o=this.calculatePartialMatchScore(i,r),s=this.calculateSemanticProximity(i,r);return a*.5+o*.3+s*.2}static calculateLexicalOverlap(e,t){const r=t.toLowerCase(),a=e.filter(s=>r.includes(s.toLowerCase())).length/Math.max(e.length,1),o=this.findConsecutiveMatches(e,t)*.2;return Math.min(1,a+o)}static calculateStructuralRelevance(e,t){const r=e.content_type||"",i=e.metadata||{};let a=.5;switch(t){case"quantitative":(r==="monthly_summary"||r==="weekly_summary"||r==="daily_summary"||r==="task_aggregate")&&(a+=.3);break;case"informational":(r==="project_summary"||r==="task_aggregate")&&(a+=.3);break;case"analytical":(r==="task_sessions"||r==="task_aggregate"||r==="project_summary")&&(a+=.3);break;case"status":(r.includes("summary")||r==="task_aggregate")&&(a+=.3);break}return(i.entities||i.analytics)&&(a+=.1),Math.min(1,a)}static calculateFreshnessScore(e,t){var s;if(t===0)return .5;const r=e.created_at||((s=e.metadata)==null?void 0:s.created_at);if(!r)return .3;const a=(Date.now()-new Date(r).getTime())/(1e3*60*60*24);return Math.exp(-a/30)*t+(1-t)*.5}static calculateContentTypeScore(e,t){const r=e.content_type||"";for(const[i,a]of Object.entries(t))if(r.includes(i))return Math.min(1,a);return .5}static calculatePositionRelevance(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=s/Math.max(e.length,1),c=Math.max(0,1-l);i+=c,a++}}return a>0?i/a:0}static calculateExactMatchScore(e,t){const r=e.toLowerCase().trim(),i=t.toLowerCase();if(i.includes(r)){const a=i.indexOf(r);return .8+Math.max(0,1-a/Math.max(t.length,1))*.2}return 0}static calculatePartialMatchScore(e,t){const r=t.toLowerCase(),i=e.filter(s=>r.includes(s.toLowerCase()));if(i.length===0)return 0;const a=i.length/e.length,o=this.calculateTermDensity(i,t);return a*.7+o*.3}static calculateSemanticProximity(e,t){const r=t.toLowerCase().split(/\s+/);let i=0,a=0;for(let o=0;o<e.length;o++)for(let s=o+1;s<e.length;s++){const l=e[o].toLowerCase(),c=e[s].toLowerCase(),u=r.indexOf(l),d=r.indexOf(c);if(u!==-1&&d!==-1){const h=Math.abs(u-d),f=Math.max(0,1-h/20);i+=f,a++}}return a>0?i/a:0}static findConsecutiveMatches(e,t){const r=t.toLowerCase().split(/\s+/);let i=0;for(let a=0;a<=r.length-e.length;a++){let o=0;for(let s=0;s<e.length&&(a+s<r.length&&r[a+s].includes(e[s].toLowerCase()));s++)o++;i=Math.max(i,o)}return i/Math.max(e.length,1)}static calculateTermDensity(e,t){const r=t.split(/\s+/).length,i=e.reduce((a,o)=>{const s=t.toLowerCase().match(new RegExp(o.toLowerCase(),"g"));return a+(s?s.length:0)},0);return Math.min(1,i/Math.max(r,1))}static generateMetadata(e,t,r,i){const a={high:0,medium:0,low:0};let o=0;return t.forEach(s=>{o+=s.confidence,s.rerankScore>.8?a.high++:s.rerankScore>.4?a.medium++:a.low++}),{totalCandidates:e.length,rerankedResults:t.length,processingTime:r,strategy:i,averageConfidence:t.length>0?o/t.length:0,scoreDistribution:a}}static createEmptyResult(e,t){return{rerankedResults:[],metadata:{totalCandidates:0,rerankedResults:0,processingTime:Date.now()-e,strategy:"error",averageConfidence:0,scoreDistribution:{high:0,medium:0,low:0}}}}}class QG{static async performHybridSearch(e,t,r={}){const i=Date.now(),{vectorWeight:a=1,keywordWeight:o=1,rrfK:s=60,maxResults:l=20,minVectorSimilarity:c=.1,minKeywordScore:u=0,contentTypeBoosts:d={},chunkLevels:h=[],timeframe:f="all",projects:m=[],enableEnhancedBM25:v=!0,enableReranking:y=!1,rerankingModel:w="hybrid",rerankingCandidates:_=50,minRerankScore:T=.1,rerankingWeights:A={}}=r;console.log(`🔍 Starting hybrid search for: "${e}"`),console.log(`🎛️ Options: vector=${a}, keyword=${o}, k=${s}`);const C=this.detectProjectQuery(e);let k={...d};C&&(console.log("🎯 Detected PROJECT query - applying project content boosting"),k={...k,project:2,project_summary:1.8,task_aggregate:.6,task_sessions:.5,weekly_summary:1.2,monthly_summary:1.3});try{const M=await this.fetchCandidateDocuments(t,{chunkLevels:h,timeframe:f,projects:m});if(!M||M.length===0)return console.warn("⚠️ No candidate documents found for user"),this.createEmptyResult(i);console.log(`📚 Found ${M.length} candidate documents`);const P=await this.performVectorSearch(e,M,c),O=await this.performBM25Search(e,M,u,v);console.log(`🎯 Vector: ${P.length} results, Keyword: ${O.length} results`);const j=pge.fuseResultsAdvanced({vectorResults:P,keywordResults:O,k:s,vectorWeight:a,keywordWeight:o,contentTypeBoosts:k,recencyWeight:.1,diversityWeight:.1});let L=[],B=null,$;if(y&&j.length>0){console.log(`🔄 Re-ranking enabled with model: ${w}`);const W=j.slice(0,_).map(z=>({document:z.document,score:z.fusedScore})),X={model:w,maxCandidates:_,minRelevanceScore:T,contextWindow:512,diversityWeight:A.diversityWeight||.1,recencyWeight:A.recencyWeight||.05,contentTypeWeights:A.contentTypeWeights||k},{rerankedResults:te,metadata:re}=await RPt.rerankDocuments(e,W,X);L=te,B=re,L.length>0?($=L.slice(0,l).map((z,ae)=>{var le;return{documentId:z.document.id||`rerank_${ae}`,document:z.document,fusedScore:z.rerankScore,vectorScore:((le=W.find(ee=>ee.document.id===z.document.id))==null?void 0:le.score)||0,keywordScore:0,vectorRank:ae+1,keywordRank:ae+1}}),console.log(`✨ Re-ranking improved results: ${L.length} documents reordered`)):($=j.slice(0,l),console.log("⚠️ Re-ranking produced no results, falling back to RRF results"))}else $=j.slice(0,l),console.log("📋 Using RRF results without re-ranking");const Y=pge.analyzeRRFEffectiveness(j),G=Date.now()-i;return console.log(`✅ Hybrid search completed in ${G}ms`),console.log(`📊 Final results: ${$.length} documents`),{documents:$.map(W=>({...W.document,hybrid_score:W.fusedScore,vector_score:W.vectorScore,keyword_score:W.keywordScore,vector_rank:W.vectorRank,keyword_rank:W.keywordRank})),vectorResults:P,keywordResults:O,fusedResults:$,rerankedResults:y?L:void 0,metadata:{totalDocuments:M.length,vectorResultCount:P.length,keywordResultCount:O.length,hybridResultCount:$.length,rerankedResultCount:y?L.length:void 0,processingTime:G,searchStrategy:y?"hybrid_vector_bm25_rrf_reranked":"hybrid_vector_bm25_rrf",rrfAnalysis:Y,rerankingMetadata:y?B:void 0}}}catch(M){return console.error("❌ Hybrid search failed:",M),this.createEmptyResult(i,M)}}static detectProjectQuery(e){return[/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(projects?\s+(available|existing|current))/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i].some(r=>r.test(e))}static async fetchCandidateDocuments(e,t){let r=St.from("user_productivity_documents").select("*").eq("user_id",e);if(t.chunkLevels&&t.chunkLevels.length>0&&(r=r.in("metadata->chunkLevel",t.chunkLevels)),t.timeframe&&t.timeframe!=="all"){const o=this.getDateFilter(t.timeframe);r=r.gte("created_at",o)}t.projects&&t.projects.length>0&&(r=r.in("metadata->entities->projectId",t.projects));const{data:i,error:a}=await r.order("created_at",{ascending:!1}).limit(200);return a?(console.error("❌ Error fetching candidate documents:",a),[]):i||[]}static async performVectorSearch(e,t,r){try{const i=await Ar.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return console.warn("⚠️ Failed to generate query embedding"),[];console.log(`🧮 Generated query embedding: ${i.length} dimensions`);const a=[];for(const o of t){if(!o.embedding)continue;let s=o.embedding;if(typeof o.embedding=="string")try{s=JSON.parse(o.embedding)}catch{continue}if(!Array.isArray(s))continue;const l=this.calculateCosineSimilarity(i,s);l>=r&&a.push({document:o,score:l})}return a.sort((o,s)=>s.score-o.score),console.log(`🎯 Vector search: ${a.length} results above ${r} threshold`),a.length>0&&console.log(`📊 Top similarities: ${a.slice(0,3).map(o=>o.score.toFixed(3)).join(", ")}`),a}catch(i){return console.error("❌ Vector search failed:",i),[]}}static async performBM25Search(e,t,r,i){try{const a=t.map(l=>({id:l.id||l.document_id||`doc_${Math.random().toString(36).substr(2,9)}`,content:l.content||"",metadata:l.metadata})),s=(i?BL.calculateEnhancedBM25Scores(e,a,{positionWeight:.1,proximityWeight:.1,titleBoost:1.3}):BL.calculateBM25Scores(e,a)).filter(l=>l.score>=r).map(l=>({document:t.find(c=>(c.id||c.document_id)===l.docId||c.content===l.document.content)||l.document,score:l.score}));return console.log(`🔤 BM25 search: ${s.length} results above ${r} threshold`),s.length>0&&console.log(`📊 Top BM25 scores: ${s.slice(0,3).map(l=>l.score.toFixed(3)).join(", ")}`),s}catch(a){return console.error("❌ BM25 search failed:",a),[]}}static calculateCosineSimilarity(e,t){if(e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getTime()-30*24*60*60*1e3).toISOString();default:return new Date(0).toISOString()}}static createEmptyResult(e,t){return{documents:[],vectorResults:[],keywordResults:[],fusedResults:[],metadata:{totalDocuments:0,vectorResultCount:0,keywordResultCount:0,hybridResultCount:0,processingTime:Date.now()-e,searchStrategy:"hybrid_failed",rrfAnalysis:{totalResults:0,vectorOnlyResults:0,keywordOnlyResults:0,hybridResults:0,averageFusedScore:0,scoreDistribution:{min:0,max:0,median:0}}}}}static async testHybridSearch(e,t){var r,i,a;console.log(`🧪 Testing hybrid search for user: ${e}`);for(const o of t){console.log(`
🔍 Testing query: "${o}"`);const s=await this.performHybridSearch(o,e,{maxResults:5,enableEnhancedBM25:!0});if(console.log(`📊 Results: ${s.documents.length} documents`),console.log(`🎯 Vector: ${s.metadata.vectorResultCount}, Keyword: ${s.metadata.keywordResultCount}`),console.log(`⚡ Processing time: ${s.metadata.processingTime}ms`),s.documents.length>0){const l=s.documents[0];console.log(`🏆 Top result: hybrid=${(r=l.hybrid_score)==null?void 0:r.toFixed(3)}, vector=${(i=l.vector_score)==null?void 0:i.toFixed(3)}, keyword=${(a=l.keyword_score)==null?void 0:a.toFixed(3)}`)}}}}const NPt=Object.freeze(Object.defineProperty({__proto__:null,HybridSearchService:QG},Symbol.toStringTag,{value:"Module"})),LPt=({userId:n})=>{const[e,t]=K.useState(""),[r,i]=K.useState(!1),[a,o]=K.useState(null),[s,l]=K.useState(null),c=["productivity today","tasks in progress","project status","deep focus sessions","time spent coding","meeting notes","completed tasks"],u=async()=>{if(e.trim()){i(!0),l(null);try{console.log(`🔍 Testing hybrid search: "${e}"`);const f=await QG.performHybridSearch(e,n,{maxResults:10,vectorWeight:1,keywordWeight:1,enableEnhancedBM25:!0,contentTypeBoosts:{task:1.2,project:1.1,session:1,daily_summary:1}});o(f),console.log("✅ Hybrid search result:",f)}catch(f){console.error("❌ Hybrid search test failed:",f),l(f instanceof Error?f.message:"Unknown error")}finally{i(!1)}}},d=f=>{t(f)},h=async()=>{console.log("🧪 Running all hybrid search tests...");for(const f of c){console.log(`
🔍 Testing: "${f}"`);try{const m=await QG.performHybridSearch(f,n,{maxResults:5,enableEnhancedBM25:!0});console.log(`✅ ${f}: ${m.documents.length} results in ${m.metadata.processingTime}ms`)}catch(m){console.error(`❌ ${f}: Failed -`,m)}}console.log("🏁 All tests completed")};return x.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔍 Hybrid Search Tester"}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),placeholder:"Enter search query...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:f=>f.key==="Enter"&&u()}),x.jsx("button",{onClick:u,disabled:r||!e.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Searching...":"Search"})]})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(f=>x.jsx("button",{onClick:()=>d(f),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm",children:f},f))})]}),x.jsx("div",{className:"mb-4",children:x.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"🧪 Run All Tests (Check Console)"})}),s&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:x.jsxs("p",{className:"text-red-800 text-sm",children:["❌ Error: ",s]})}),a&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Search Metadata"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Processing Time:"})," ",a.metadata.processingTime,"ms"]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Strategy:"})," ",a.metadata.searchStrategy]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Vector Results:"})," ",a.metadata.vectorResultCount]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Keyword Results:"})," ",a.metadata.keywordResultCount]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Total Docs:"})," ",a.metadata.totalDocuments]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Final Results:"})," ",a.metadata.hybridResultCount]})]})]}),a.metadata.rrfAnalysis&&x.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"RRF Analysis"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Vector Only:"})," ",a.metadata.rrfAnalysis.vectorOnlyResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Keyword Only:"})," ",a.metadata.rrfAnalysis.keywordOnlyResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Hybrid:"})," ",a.metadata.rrfAnalysis.hybridResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Avg Score:"})," ",a.metadata.rrfAnalysis.averageFusedScore.toFixed(4)]})]})]}),x.jsxs("div",{children:[x.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Results (",a.documents.length,")"]}),x.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.documents.map((f,m)=>{var v,y;return x.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.content_type||"Unknown Type"}),x.jsxs("div",{className:"text-xs text-gray-500 space-x-2",children:[f.hybrid_score&&x.jsxs("span",{children:["H: ",f.hybrid_score.toFixed(3)]}),f.vector_score&&x.jsxs("span",{children:["V: ",f.vector_score.toFixed(3)]}),f.keyword_score&&x.jsxs("span",{children:["K: ",f.keyword_score.toFixed(3)]})]})]}),x.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[f.content.substring(0,200),f.content.length>200&&"..."]}),((y=(v=f.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Project: ",f.metadata.entities.projectId]})]},f.id||m)})})]})]})]})},jPt=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(null),[i,a]=K.useState(null),[o,s]=K.useState(!1),{user:l}=Qt(),c=["please tell me how many project i have","how many projects do i have","show me all my projects","what tasks are urgent","productivity summary this week","project status overview"],u=async()=>{if(n.trim()){s(!0);try{const h=Uu.classifyQuery(n);if(r(h),l!=null&&l.uid)try{const f=await Uu.selectBestContentTypesWithAI(n,l.uid);a(f)}catch(f){console.error("AI classification failed:",f),a({error:"AI classification unavailable"})}}catch(h){console.error("Classification failed:",h)}finally{s(!1)}}},d=h=>{e(h);const f=Uu.classifyQuery(h);r(f),console.log(`🔍 Testing: "${h}":`,f)};return x.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🧠 Query Classification Tester"}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:n,onChange:h=>e(h.target.value),placeholder:"Enter query to classify...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",onKeyPress:h=>h.key==="Enter"&&u()}),x.jsx("button",{onClick:u,disabled:o||!n.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Analyzing...":"Classify"})]})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map(h=>x.jsxs("button",{onClick:()=>d(h),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm text-left",children:['"',h,'"']},h))})]}),t&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"📋 Rule-based Classification"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-900",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Primary Intent:"}),x.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${t.primaryIntent==="project_focus"?"bg-green-100 text-green-800":t.primaryIntent==="task_priority"?"bg-blue-100 text-blue-800":t.primaryIntent==="summary_insights"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:t.primaryIntent})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Confidence:"})," ",x.jsxs("span",{className:"text-blue-900",children:[(t.confidence*100).toFixed(1),"%"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Strategy:"})," ",x.jsx("span",{className:"text-blue-900",children:t.mixingStrategy})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Secondary:"})," ",x.jsx("span",{className:"text-blue-900",children:t.secondaryIntents.join(", ")||"none"})]})]})]}),i&&x.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"🤖 AI-powered Content Type Selection"}),i.error?x.jsx("div",{className:"text-red-600 text-sm",children:i.error}):x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Primary Types:"}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.primaryTypes.map((h,f)=>x.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:h},f))})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Secondary Types:"}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.secondaryTypes.map((h,f)=>x.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded text-xs border border-green-200",children:h},f))})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"AI Confidence:"}),x.jsxs("span",{className:"ml-2 text-green-900",children:[i.confidence,"%"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Reasoning:"}),x.jsx("p",{className:"mt-1 text-sm text-green-800",children:i.reasoning})]})]})]}),!l&&x.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:x.jsxs("p",{className:"text-sm text-yellow-700",children:["💡 ",x.jsx("strong",{children:"Tip:"})," Log in to test AI-powered content type selection with your actual data chunks!"]})})]})]})},FPt=()=>{var $,Y,G,W,X,te,re,z,ae,le,ee,ye;const{user:n}=Qt(),[e,t]=K.useState({status:"loading",message:"Checking sync status..."}),[r,i]=K.useState(!1),[a,o]=K.useState(!1),[s,l]=K.useState(!1),[c,u]=K.useState(!1),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(null);K.useEffect(()=>{n!=null&&n.uid&&(T(),A())},[n]);const T=async()=>{if(n!=null&&n.uid)try{t({status:"loading",message:"Checking sync status..."});const fe=await fge.quickHealthCheck(n.uid),Ce=await MPt.testUserSync(n.uid);let at,Le;fe.status==="healthy"?(at="success",Le=`✅ Sync healthy - ${fe.embeddingCoverage}% coverage`):fe.status==="warning"?(at="warning",Le=`⚠️ Sync needs attention - ${fe.embeddingCoverage}% coverage`):(at="error",Le=`❌ ${fe.message}`),t({status:at,message:Le,lastSync:new Date,details:{healthCheck:fe,testResult:Ce}})}catch(fe){console.error("Error checking sync status:",fe),t({status:"error",message:`Failed to check sync status: ${fe instanceof Error?fe.message:"Unknown error"}`})}},A=async()=>{if(n!=null&&n.uid)try{const fe=await KG.isIncrementalSyncNeeded(n.uid);_(fe)}catch(fe){console.error("Error checking incremental sync status:",fe),_(null)}},C=async()=>{try{u(!0),await PPt.createTables(),t({status:"success",message:"✅ Database tables initialized successfully",lastSync:new Date})}catch(fe){console.error("Error initializing tables:",fe),t({status:"error",message:`Failed to initialize tables: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{u(!1)}},k=async()=>{if(n!=null&&n.uid)try{l(!0),h({current:0,total:100,status:"Running incremental sync..."});const fe=await KG.executeIncrementalSync(n.uid);fe.success?t({status:"success",message:`✅ Incremental sync complete: ${fe.processedDocuments} processed, ${fe.skippedDocuments} skipped`,lastSync:new Date,details:fe}):t({status:"warning",message:`⚠️ Incremental sync completed with ${fe.errors.length} errors`,lastSync:new Date,details:fe}),setTimeout(()=>{T(),A()},1e3)}catch(fe){console.error("Error running incremental sync:",fe),t({status:"error",message:`Incremental sync failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{l(!1),h(null)}},M=async()=>{if(n!=null&&n.uid)try{i(!0),h({current:0,total:100,status:"Starting comprehensive sync..."});const fe=await $L.syncAllUserData(n.uid,Ce=>h(Ce));fe.errors.length>0?t({status:"warning",message:`Sync completed with ${fe.errors.length} errors`,lastSync:new Date,details:fe}):t({status:"success",message:`✅ Successfully synced ${fe.synced} documents`,lastSync:new Date,details:fe}),setTimeout(()=>{T(),A()},1e3)}catch(fe){console.error("Error running comprehensive sync:",fe),t({status:"error",message:`Sync failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{i(!1),h(null)}},P=async()=>{if(n!=null&&n.uid)try{o(!0),h({current:0,total:100,status:"Generating missing embeddings..."});const fe=await $L.generateMissingEmbeddings(n.uid,Ce=>h(Ce));t({status:"success",message:`✅ Generated embeddings for ${fe} documents`,lastSync:new Date}),setTimeout(()=>{T(),A()},1e3)}catch(fe){console.error("Error generating embeddings:",fe),t({status:"error",message:`Embedding generation failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{o(!1),h(null)}},O=async()=>{if(n!=null&&n.uid)try{const fe=await fge.generateComprehensiveReport(n.uid);m(fe),y(!0)}catch(fe){console.error("Error generating report:",fe),alert(`Failed to generate report: ${fe instanceof Error?fe.message:"Unknown error"}`)}},j=async()=>{if(n!=null&&n.uid)try{XG.stopSync(),ZG.stopSync(),t({status:"success",message:`✅ All sync listeners stopped (${XG.getActiveListenerCount()} active)`,lastSync:new Date})}catch(fe){console.error("Error stopping all sync listeners:",fe),t({status:"error",message:`Failed to stop all sync listeners: ${fe instanceof Error?fe.message:"Unknown error"}`})}},L=()=>{switch(e.status){case"loading":return x.jsx(Gz,{className:"w-5 h-5 text-gray-500 animate-spin"});case"success":return x.jsx(bg,{className:"w-5 h-5 text-green-500"});case"warning":return x.jsx(E7,{className:"w-5 h-5 text-yellow-500"});case"error":return x.jsx(LN,{className:"w-5 h-5 text-red-500"})}},B=()=>{switch(e.status){case"loading":return"border-gray-300 bg-gray-50";case"success":return"border-green-300 bg-green-50";case"warning":return"border-yellow-300 bg-yellow-50";case"error":return"border-red-300 bg-red-50"}};return n?x.jsxs("div",{className:"space-y-6 w-full mx-auto px-4 py-6",children:[x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Data Sync Dashboard"}),x.jsx("p",{className:"text-gray-500 mt-1",children:"Monitor and manage Firebase to Supabase data synchronization"})]}),x.jsxs("button",{onClick:T,disabled:e.status==="loading",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[x.jsx(Gz,{className:`w-4 h-4 ${e.status==="loading"?"animate-spin":""}`}),x.jsx("span",{children:"Refresh"})]})]})}),x.jsx("div",{className:`border rounded-lg p-6 ${B()}`,children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[L(),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Status"}),x.jsx("p",{className:"text-sm text-gray-600",children:e.message}),e.lastSync&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last checked: ",e.lastSync.toLocaleString()]})]})]}),e.details&&x.jsx("div",{className:"text-right",children:x.jsxs("div",{className:"text-sm text-gray-600",children:[x.jsxs("div",{children:["Firebase: ",($=e.details.testResult)!=null&&$.firebaseData?Object.values(e.details.testResult.firebaseData).reduce((fe,Ce)=>fe+(typeof Ce=="number"?Ce:0),0):0," items"]}),x.jsxs("div",{children:["Supabase: ",((G=(Y=e.details.testResult)==null?void 0:Y.supabaseData)==null?void 0:G.documents)||0," docs"]}),x.jsxs("div",{children:["With embeddings: ",((X=(W=e.details.testResult)==null?void 0:W.supabaseData)==null?void 0:X.withEmbeddings)||0]})]})})]})}),d&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Progress"}),x.jsxs("span",{className:"text-sm text-gray-500",children:[d.current,"/",d.total]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:x.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.current/d.total*100}%`}})}),x.jsx("p",{className:"text-sm text-gray-600",children:d.status})]}),w&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Incremental Sync"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Only sync updated documents to reduce costs"})]}),x.jsx("div",{className:"text-right",children:x.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.needed?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:w.needed?`${w.pendingChanges} pending`:"Up to date"})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Last Sync:"}),x.jsx("div",{className:"font-medium",children:w.lastSyncTime?w.lastSyncTime.toLocaleString():"Never"})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Pending Changes:"}),x.jsx("div",{className:"font-medium",children:w.pendingChanges>=0?w.pendingChanges:"Unknown"})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Status:"}),x.jsx("div",{className:"font-medium",children:w.needed?"Sync needed":"Up to date"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[x.jsxs("button",{onClick:k,disabled:s||r||a,className:`flex items-center justify-center space-x-2 p-4 rounded-lg disabled:opacity-50 ${w!=null&&w.needed?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[x.jsx(Qye,{className:"w-5 h-5"}),x.jsx("span",{children:s?"Syncing...":"Smart Sync"})]}),x.jsxs("button",{onClick:M,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[x.jsx(Hz,{className:"w-5 h-5"}),x.jsx("span",{children:r?"Syncing...":"Full Sync"})]}),x.jsxs("button",{onClick:P,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[x.jsx(V3e,{className:"w-5 h-5"}),x.jsx("span",{children:a?"Generating...":"Fix Embeddings"})]}),x.jsxs("button",{onClick:O,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[x.jsx(H$e,{className:"w-5 h-5"}),x.jsx("span",{children:"Full Report"})]}),x.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 p-4 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[x.jsx(LN,{className:"w-5 h-5"}),x.jsx("span",{children:"Stop Sync"})]})]}),x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Database Setup"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Initialize required tables for incremental sync"})]}),x.jsxs("button",{onClick:C,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[x.jsx(Hz,{className:`w-4 h-4 ${c?"animate-pulse":""}`}),x.jsx("span",{children:c?"Initializing...":"Setup Tables"})]})]})}),x.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"🚀 Query Enhancement System"}),x.jsx("p",{className:"text-sm text-purple-700",children:"HyDE + Multi-Query + Re-ranking Active"})]}),x.jsx("div",{className:"flex items-center space-x-2",children:x.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ PHASE 5 COMPLETE"})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"HyDE (Hypothetical Document Embeddings)"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Multi-Query Decomposition"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Intelligent Strategy Selection"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Hybrid Search Integration"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Re-ranking Enhancement"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Performance Optimization"})]})]})]}),x.jsx("div",{className:"mt-4 p-3 bg-white bg-opacity-70 rounded",children:x.jsxs("p",{className:"text-sm text-purple-700",children:[x.jsx("strong",{children:"Expected Performance:"})," 70-90% overall precision improvement",x.jsx("br",{}),x.jsx("strong",{children:"Recommended Test Queries:"}),' "How productive was I last week?", "Which tasks need attention?", "Show me my project insights"']})})]}),((te=e.details)==null?void 0:te.testResult)&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Stats"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((re=e.details.testResult.firebaseData)==null?void 0:re.tasks)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Tasks"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-green-600",children:((z=e.details.testResult.firebaseData)==null?void 0:z.projects)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Projects"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((ae=e.details.testResult.firebaseData)==null?void 0:ae.workSessions)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Sessions"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((le=e.details.testResult.supabaseData)==null?void 0:le.withEmbeddings)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"With Embeddings"})]})]})]}),((ye=(ee=e.details)==null?void 0:ee.testResult)==null?void 0:ye.recommendations)&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recommendations"}),x.jsx("div",{className:"space-y-2",children:e.details.testResult.recommendations.map((fe,Ce)=>x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),x.jsx("p",{className:"text-sm text-gray-700",children:fe})]},Ce))})]}),v&&f&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Comprehensive Data Report"}),x.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),x.jsxs("div",{className:"p-6 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Summary"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Firebase Items"}),x.jsx("div",{className:"text-xl font-bold",children:f.summary.totalFirebaseItems})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Supabase Docs"}),x.jsx("div",{className:"text-xl font-bold",children:f.summary.totalSupabaseDocuments})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Embedding Coverage"}),x.jsxs("div",{className:"text-xl font-bold",children:[f.summary.embeddingCoverage,"%"]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Health"}),x.jsx("div",{className:`text-xl font-bold ${f.summary.syncHealth==="excellent"?"text-green-600":f.summary.syncHealth==="good"?"text-blue-600":f.summary.syncHealth==="poor"?"text-yellow-600":"text-red-600"}`,children:f.summary.syncHealth})]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Recommendations"}),x.jsx("div",{className:"space-y-2",children:f.analysis.recommendations.map((fe,Ce)=>x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),x.jsx("p",{className:"text-sm text-gray-700",children:fe})]},Ce))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Technical Details"}),x.jsx("div",{className:"bg-gray-50 p-4 rounded",children:x.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Average Document Size:"}),x.jsxs("span",{className:"ml-2 font-medium",children:[f.technicalDetails.avgDocumentSize," chars"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Duplicate Risk:"}),x.jsx("span",{className:"ml-2 font-medium",children:f.technicalDetails.duplicateRisk})]}),f.technicalDetails.oldestDocument&&x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Oldest Document:"}),x.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.oldestDocument).toLocaleDateString()})]}),f.technicalDetails.newestDocument&&x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Newest Document:"}),x.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.newestDocument).toLocaleDateString()})]})]})})]})]})]})}),x.jsx(jPt,{}),(n==null?void 0:n.uid)&&x.jsx(LPt,{userId:n.uid}),(n==null?void 0:n.uid)&&x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"🔄 Re-ranking Performance Test"}),x.jsx("div",{className:"text-sm text-gray-500",children:"Test re-ranking improvements vs baseline"})]}),x.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"✅ Re-ranking is Now Active"}),x.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[x.jsx("div",{children:"• Re-ranking is automatically enabled in Enhanced RAG Service"}),x.jsx("div",{children:"• Uses Hybrid re-ranking model for optimal results"}),x.jsx("div",{children:"• Expected improvements: 20-40% relevance boost"}),x.jsx("div",{children:"• Test directly in the chat interface for real results"})]})]}),x.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[x.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"🎯 Test These Queries in Chat"}),x.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[x.jsx("div",{children:'• "How many projects do I have?"'}),x.jsx("div",{children:'• "What tasks am I working on?"'}),x.jsx("div",{children:'• "Show me my productivity summary"'}),x.jsx("div",{children:'• "Tell me about my recent work sessions"'})]})]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:[x.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[x.jsx("span",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded mr-3",children:"PHASE 6"}),"🎯 Advanced Prompt Engineering System"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Chain-of-Thought Reasoning"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Dynamic Persona Selection"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Response Validation"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Self-Correction System"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Few-Shot Learning"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Expert Personas (5)"}),x.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:"📊 READY"})]})]})]}),x.jsxs("div",{className:"bg-purple-50 p-4 rounded mb-4",children:[x.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Available Expert Personas:"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[x.jsx("div",{children:"• Senior Productivity Coach"}),x.jsx("div",{children:"• Senior Data Analyst"}),x.jsx("div",{children:"• Agile Project Manager"}),x.jsx("div",{children:"• Time Management Specialist"}),x.jsx("div",{children:"• Productivity Assistant"})]})]}),x.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[x.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Performance Impact:"}),x.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Response Quality:"})," 85-95% improvement with advanced techniques"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Reasoning Transparency:"})," Step-by-step analytical process"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Domain Expertise:"})," Specialized knowledge application"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Self-Validation:"})," Automatic quality assurance and correction"]})]})]}),x.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[x.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Test Advanced Prompting:"}),x.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"Analyze my productivity patterns and provide strategic insights"'})]}),x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"What should I work on next and why, considering all my projects?"'})]}),x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"Compare my morning vs afternoon productivity trends"'})]})]})]})]})]}):x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"text-center",children:[x.jsx(Z$e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Login Required"}),x.jsx("p",{className:"text-gray-500",children:"Please log in to view data sync dashboard"})]})})};class Nk{static async executeCompleteSync(e){const t=Date.now();console.log(`🚀 Starting advanced multi-level sync for user: ${e}`);try{await this.clearExistingChunks(e);const r=await t1.processAndStoreChunks(e),i=await this.analyzeChunkDistribution(e),a=Date.now()-t;return console.log(`✅ Advanced sync complete: ${r.chunksProcessed} chunks in ${a}ms`),{success:r.success,totalChunks:r.chunksProcessed,chunksByLevel:i,processingTime:a,errors:r.errors}}catch(r){return console.error("❌ Advanced sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeWeeklySync(e){const t=Date.now();console.log(`🚀 Starting weekly summary sync for user: ${e}`);try{await this.clearExistingWeeklySummaries(e);const i=(await WG.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="weekly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("weekly_"))});let a=0;const o=[];for(const l of i)try{await t1.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store weekly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Weekly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{2:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Weekly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeMonthlySync(e){const t=Date.now();console.log(`🚀 Starting monthly summary sync for user: ${e}`);try{await this.clearExistingMonthlySummaries(e);const i=(await WG.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="monthly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("monthly_"))});let a=0;const o=[];for(const l of i)try{await t1.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store monthly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Monthly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{5:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Monthly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async clearExistingWeeklySummaries(e){if(!St){console.warn("⚠️ Supabase not configured, skipping weekly summaries cleanup");return}const{error:t}=await St.from("user_productivity_documents").delete().eq("user_id",e).or("content_type.eq.weekly_summary,metadata->>chunkType.eq.temporal_pattern,metadata->>timeframe.like.weekly_%");if(t)throw new Error(`Failed to clear existing weekly summaries: ${t.message}`)}static async clearExistingMonthlySummaries(e){if(!St){console.warn("⚠️ Supabase not configured, skipping monthly summaries cleanup");return}const{error:t}=await St.from("user_productivity_documents").delete().eq("user_id",e).or("content_type.eq.monthly_summary,metadata->>chunkType.eq.temporal_pattern,metadata->>timeframe.like.monthly_%");if(t)throw new Error(`Failed to clear existing monthly summaries: ${t.message}`)}static async clearExistingChunks(e){if(!St){console.warn("⚠️ Supabase not configured, skipping chunks cleanup");return}const{error:t}=await St.from("user_productivity_documents").delete().eq("user_id",e);if(t)throw new Error(`Failed to clear existing chunks: ${t.message}`)}static async analyzeChunkDistribution(e){if(!St)return console.warn("⚠️ Supabase not configured, returning empty distribution"),{};const{data:t,error:r}=await St.from("user_productivity_documents").select("metadata").eq("user_id",e);if(r)throw new Error(`Failed to analyze chunk distribution: ${r.message}`);const i={};return t.forEach(a=>{var s;const o=(s=a.metadata)==null?void 0:s.chunkLevel;o&&(i[o]=(i[o]||0)+1)}),i}static async testEnhancedRAG(e){const t=Date.now(),r=[],i=[];try{const a=["What did I work on this week?","Show me my most productive sessions","What projects am I behind on?","What are my work patterns?"];for(const o of a)try{const s=await t1.queryWithHybridSearch(o,e);i.push(s)}catch(s){r.push(`Query "${o}" failed: ${s instanceof Error?s.message:"Unknown error"}`)}return{success:r.length===0,queryResults:i,processingTime:Date.now()-t,errors:r}}catch(a){return{success:!1,queryResults:[],processingTime:Date.now()-t,errors:[a instanceof Error?a.message:"Unknown error"]}}}static async migrateSyntheticChunks(e){try{if(!St)return console.warn("⚠️ Supabase not configured, skipping synthetic chunks migration"),{success:!1,removedChunks:0,errors:["Supabase not configured"]};const{data:t,error:r}=await St.from("user_productivity_documents").delete().eq("user_id",e).eq("content_type","synthetic_chunk").select();if(r)throw r;return{success:!0,removedChunks:(t==null?void 0:t.length)||0,errors:[]}}catch(t){return console.error("Migration failed:",t),{success:!1,removedChunks:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}}const $Pt=()=>{var L;const{user:n}=Qt(),[e,t]=K.useState(!1),[r,i]=K.useState(!1),[a,o]=K.useState(!1),[s,l]=K.useState(!1),[c,u]=K.useState(!1),[d,h]=K.useState(null),[f,m]=K.useState(null),[v,y]=K.useState(!1),[w,_]=K.useState(null),[T,A]=K.useState(null),C=async()=>{if(n!=null&&n.uid){t(!0),h(null);try{const B=await Nk.executeCompleteSync(n.uid);h(B)}catch(B){console.error("Advanced sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{t(!1)}}},k=async()=>{if(n!=null&&n.uid){o(!0),h(null);try{const B=await Nk.executeWeeklySync(n.uid);h(B)}catch(B){console.error("Weekly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{o(!1)}}},M=async()=>{if(n!=null&&n.uid){l(!0),h(null);try{const B=await Nk.executeMonthlySync(n.uid);h(B)}catch(B){console.error("Monthly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{l(!1)}}},P=async()=>{if(n!=null&&n.uid){i(!0),m(null);try{const B=await Nk.testEnhancedRAG(n.uid);m(B)}catch(B){console.error("RAG testing failed:",B)}finally{i(!1)}}},O=async()=>{if(n!=null&&n.uid){y(!0),_(null);try{const B=await Nk.migrateSyntheticChunks(n.uid);_(B)}catch(B){console.error("Migration failed:",B),_({success:!1,removedChunks:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{y(!1)}}},j=async()=>{if(n!=null&&n.uid){u(!0),A(null);try{const B=await KG.executeProjectSync(n.uid);A(B)}catch(B){console.error("Project sync failed:",B),A({success:!1,processedDocuments:0,skippedDocuments:0,errors:[B instanceof Error?B.message:"Unknown error"],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}})}finally{u(!1)}}};return x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex flex-wrap gap-4",children:[x.jsx("button",{onClick:C,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x.jsx("span",{children:e?"Running Full Sync...":"Run Full Sync"})}),x.jsx("button",{onClick:k,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:x.jsx("span",{children:a?"Syncing Weekly Summary...":"Sync Weekly Summary"})}),x.jsx("button",{onClick:M,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:x.jsx("span",{children:s?"Syncing Monthly Summary...":"Sync Monthly Summary"})}),x.jsx("button",{onClick:P,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:x.jsx("span",{children:r?"Testing...":"Test RAG"})}),x.jsx("button",{onClick:O,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:x.jsx("span",{children:v?"Migrating...":"Run Migration"})}),x.jsx("button",{onClick:j,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50",children:x.jsx("span",{children:c?"Syncing Projects...":"Sync Project Chunks"})})]}),d&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a?"Weekly Summary Sync Results":s?"Monthly Summary Sync Results":"Sync Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",d.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Total Chunks: ",d.totalChunks]}),x.jsxs("p",{children:["Processing Time: ",d.processingTime,"ms"]}),d.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:d.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),f&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"RAG Test Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",f.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Processing Time: ",f.processingTime,"ms"]}),x.jsxs("p",{children:["Results Found: ",f.queryResults.length]}),f.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:f.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),w&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Migration Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",w.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Removed Chunks: ",w.removedChunks]}),((L=w.errors)==null?void 0:L.length)>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:w.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),T&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Project Sync Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",T.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Processed Documents: ",T.processedDocuments]}),x.jsxs("p",{children:["Skipped Documents: ",T.skippedDocuments]}),x.jsxs("p",{children:["Execution Time: ",T.executionTime,"ms"]}),x.jsxs("p",{children:["Collections: Tasks - ",T.collections.tasks,", Projects - ",T.collections.projects,", Work Sessions - ",T.collections.workSessions]}),T.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:T.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]})]})})},BPt=()=>{const[n,e]=K.useState("standard");return x.jsx("div",{className:"w-full bg-gray-50 py-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data Synchronization"}),x.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your Firebase to Supabase data sync and monitor AI embedding generation."})]}),x.jsx("div",{className:"mb-6",children:x.jsx("div",{className:"border-b border-gray-200",children:x.jsxs("nav",{className:"-mb-px flex space-x-8",children:[x.jsx("button",{onClick:()=>e("standard"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="standard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(c1,{className:"w-4 h-4"}),"Standard Sync"]})}),x.jsx("button",{onClick:()=>e("advanced"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="advanced"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Qye,{className:"w-4 h-4"}),"Advanced Multi-Level Sync",x.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full ml-1",children:"NEW"})]})})]})})}),n==="standard"&&x.jsx(FPt,{}),n==="advanced"&&x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"text-green-600 mt-1",children:x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"🤖 Chat Interface Enhanced!"}),x.jsxs("div",{className:"text-green-700 space-y-1 text-sm",children:[x.jsx("p",{children:"✅ Fixed white text visibility issue - now using black text"}),x.jsx("p",{children:"✅ Enhanced RAG search with multiple fallback strategies"}),x.jsx("p",{children:"✅ Better query analysis for optimal chunk level selection"}),x.jsx("p",{children:"✅ Improved ranking algorithm for diverse, relevant responses"}),x.jsx("p",{children:"✅ Updated suggested queries for better user engagement"})]}),x.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded text-sm text-green-800",children:[x.jsx("strong",{children:"Try the chat button (bottom right) with these improved queries:"}),x.jsxs("ul",{className:"mt-1 space-y-1 ml-4",children:[x.jsx("li",{children:'• "What tasks are in my Learn React project?"'}),x.jsx("li",{children:'• "Show me my recent work sessions"'}),x.jsx("li",{children:'• "How productive was I this week?"'}),x.jsx("li",{children:'• "What are my completed tasks today?"'})]})]})]})]})}),x.jsx($Pt,{})]})]})})},UPt=()=>x.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 py-12",children:x.jsxs("div",{className:"space-y-12",children:[x.jsxs("header",{className:"text-center border-b border-border pb-8",children:[x.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-4",children:"Privacy Policy"}),x.jsx("p",{className:"text-text-secondary",children:"Effective Date: July 8, 2025 | Last Updated: July 8, 2025"})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Our Privacy Commitment"}),x.jsx("p",{className:"text-text-secondary leading-relaxed",children:"Make10000hours is built by productivity enthusiasts who understand the importance of privacy. We designed this extension with privacy-first principles: your data stays primarily on your device, we never sell your information, and you maintain complete control over what gets shared and when."})]}),x.jsxs("section",{className:"space-y-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data We Collect & Why"}),x.jsx("p",{className:"text-text-secondary leading-relaxed",children:"To provide you with meaningful productivity insights and help you build better focus habits, Make10000hours needs to collect certain data about your computer usage. Here's exactly what we collect and why it's necessary:"}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"border-l-4 border-text-primary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Website Activity & Browsing Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• URLs and titles of websites you visit while the extension is active"}),x.jsx("li",{children:"• Time spent on each website (precise timestamps and duration)"}),x.jsx("li",{children:"• Tab focus events (when you switch between tabs)"}),x.jsx("li",{children:"• Window focus/blur events (when you switch between applications)"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," This core data enables us to show you where your time goes, identify productivity patterns, and help you understand your digital habits."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"User Activity & Behavior"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Mouse movements and clicks (for activity detection)"}),x.jsx("li",{children:"• Keyboard activity indicators (not keystrokes - just activity presence)"}),x.jsx("li",{children:"• Scroll events and window interactions"}),x.jsx("li",{children:"• System sleep/wake detection"}),x.jsx("li",{children:"• Idle time detection (when you're away from computer)"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Activity detection helps us differentiate between active work and idle time, ensuring accurate productivity measurements and automatic session pausing when you're away."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Focus Sessions & Productivity Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Pomodoro timer sessions (start/end times, duration, completion status)"}),x.jsx("li",{children:"• Deep focus session data and blocking preferences"}),x.jsx("li",{children:"• Websites you choose to block during focus modes"}),x.jsx("li",{children:"• Task management data (tasks you create, time tracking)"}),x.jsx("li",{children:"• Productivity goals and achievements"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," This data powers your productivity insights, progress tracking, and helps us provide personalized recommendations for better focus habits."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Account & Authentication Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect (only when you sign in):"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Google account email address and user ID"}),x.jsx("li",{children:"• Display name and profile picture (if provided)"}),x.jsx("li",{children:"• Authentication tokens for secure access"}),x.jsx("li",{children:"• Sync preferences and device information"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Authentication enables secure data sync across your devices and provides backup of your productivity data."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Technical & Usage Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Extension version and browser information"}),x.jsx("li",{children:"• Error logs and crash reports (for debugging)"}),x.jsx("li",{children:"• Feature usage statistics (which features you use most)"}),x.jsx("li",{children:"• Performance metrics (loading times, response times)"}),x.jsx("li",{children:"• Extension settings and preferences"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Technical data helps us fix bugs, improve performance, and understand which features provide the most value to users."]})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"How We Use Your Data"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"What We DO"}),x.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[x.jsx("li",{children:"✓ Display your personal productivity insights"}),x.jsx("li",{children:"✓ Calculate time spent on different websites and categories"}),x.jsx("li",{children:"✓ Provide focus session tracking and analytics"}),x.jsx("li",{children:"✓ Sync your data securely across your devices"}),x.jsx("li",{children:"✓ Generate productivity reports and trends"}),x.jsx("li",{children:"✓ Improve extension performance and fix bugs"}),x.jsx("li",{children:"✓ Provide customer support when you contact us"})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"What We NEVER Do"}),x.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[x.jsx("li",{children:"✗ Sell your data to anyone, ever"}),x.jsx("li",{children:"✗ Use your data for advertising or marketing"}),x.jsx("li",{children:"✗ Share your browsing data with advertisers"}),x.jsx("li",{children:"✗ Allow human access to your personal data without permission"}),x.jsx("li",{children:"✗ Track you across the web outside our extension"}),x.jsx("li",{children:"✗ Store passwords or sensitive form data"}),x.jsx("li",{children:"✗ Monitor your data for non-productivity purposes"})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Storage & Third Party Services"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Local Storage (Your Device)"}),x.jsxs("p",{className:"text-text-secondary leading-relaxed",children:[x.jsx("strong",{children:"Primary storage:"})," All your data is stored locally on your device using Chrome's secure storage APIs. This data remains on your device and is encrypted by Chrome's built-in security. You can use the extension fully offline without any cloud services."]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Cloud Storage (Optional - Only When You Sign In)"}),x.jsx("p",{className:"text-text-secondary leading-relaxed mb-4",children:"When you choose to sign in with Google, we use secure cloud services to sync your data across devices:"}),x.jsxs("div",{className:"space-y-4 text-text-secondary",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:"Google Firebase (Google LLC)"}),x.jsxs("ul",{className:"ml-4 space-y-1",children:[x.jsx("li",{children:"• Secure database hosting for your productivity data"}),x.jsx("li",{children:"• User authentication and identity management"}),x.jsx("li",{children:"• Real-time data synchronization between devices"}),x.jsx("li",{children:"• All data encrypted in transit and at rest"})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:"Google APIs & Services"}),x.jsxs("ul",{className:"ml-4 space-y-1",children:[x.jsx("li",{children:"• Google Sign-In for secure authentication"}),x.jsx("li",{children:"• Google Favicon API for website icons (URLs only)"}),x.jsx("li",{children:"• Google Analytics for anonymous usage statistics"})]})]})]})]}),x.jsx("p",{className:"text-text-secondary italic",children:"Security: All data transmission uses HTTPS encryption. Firebase provides enterprise-grade security with SOC 2 Type II compliance. Your data is never transmitted in plain text."})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Sharing & International Transfers"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Who We Share Data With"}),x.jsxs("div",{className:"space-y-3 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Google/Firebase:"})," When you enable sync, your encrypted productivity data is stored on Google's secure Firebase servers for synchronization purposes only."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"No Other Third Parties:"})," We do not share your personal data with any other companies, advertisers, or third parties."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Legal Requirements:"})," We may disclose data only if required by law, court order, or to protect our legal rights, but we will notify you unless legally prohibited."]})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"International Transfers:"})," If you enable sync, your data may be processed on Google's servers located in various countries including the United States. Google complies with international privacy frameworks including GDPR and provides adequate data protection safeguards."]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Retention"}),x.jsxs("div",{className:"space-y-3 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Local Data:"})," Retained on your device until you uninstall the extension, clear browser data, or manually delete through extension settings."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Cloud Data:"})," Retained while your account is active. Automatically deleted 90 days after account deletion or upon request."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Analytics Data:"})," Anonymous usage statistics retained for up to 26 months per Google Analytics standards."]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Your Privacy Rights & Controls"}),x.jsx("p",{className:"text-text-secondary mb-6",children:"You have complete control over your data and privacy:"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Data Access & Control"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• View all collected data in the extension"}),x.jsx("li",{children:"• Export your data in JSON format"}),x.jsx("li",{children:"• Delete specific data points or entire history"}),x.jsx("li",{children:"• Clear all local data instantly"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Privacy Settings"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Enable/disable data collection features"}),x.jsx("li",{children:"• Control sync settings independently"}),x.jsx("li",{children:"• Opt out of analytics collection"}),x.jsx("li",{children:"• Manage website tracking exceptions"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Account Management"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Sign out to stop cloud sync immediately"}),x.jsx("li",{children:"• Delete account and all cloud data"}),x.jsx("li",{children:"• Revoke extension permissions"}),x.jsx("li",{children:"• Use extension without signing in"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Legal Rights (GDPR/CCPA)"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Right to access your data"}),x.jsx("li",{children:"• Right to rectification (correction)"}),x.jsx("li",{children:'• Right to erasure ("right to be forgotten")'}),x.jsx("li",{children:"• Right to data portability"})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Chrome Extension Permissions"}),x.jsx("p",{className:"text-text-secondary mb-4",children:"Chrome extensions require explicit permissions to function. Here's what each permission does:"}),x.jsxs("div",{className:"space-y-4 text-text-secondary",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Read and change all your data on all websites"'}),x.jsx("p",{className:"ml-4",children:"Required to track time spent on websites and detect user activity for productivity measurement."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Read your browsing history"'}),x.jsx("p",{className:"ml-4",children:"Required to identify visited websites for time tracking and productivity categorization."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Block content on any page you visit"'}),x.jsx("p",{className:"ml-4",children:"Required for focus mode functionality to block distracting websites during focus sessions."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Store unlimited amount of client-side data"'}),x.jsx("p",{className:"ml-4",children:"Required to store your productivity data locally on your device for offline access."})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Contact & Data Requests"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Get in Touch"}),x.jsxs("div",{className:"space-y-2 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Privacy Officer:"})," privacy@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"General Support:"})," support@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Data Requests:"})," data@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Website:"})," https://make10000hours.com"]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Response Times"}),x.jsxs("div",{className:"space-y-2 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Privacy requests:"})," Within 30 days"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Data deletion:"})," Immediate (local), 72 hours (cloud)"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Support inquiries:"})," Within 48 hours"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Urgent requests:"}),' Mark email "URGENT - Privacy"']})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Policy Updates"}),x.jsxs("div",{className:"text-text-secondary space-y-4",children:[x.jsx("p",{children:"We may update this Privacy Policy to reflect changes in our practices, legal requirements, or new features. When we make changes:"}),x.jsxs("ul",{className:"space-y-1",children:[x.jsx("li",{children:"• Material changes will be notified through the extension interface"}),x.jsx("li",{children:"• Minor updates will be posted on this page with updated date"}),x.jsx("li",{children:"• Email notifications for significant changes (if you're signed in)"}),x.jsx("li",{children:"• Continued use after changes constitutes acceptance"})]}),x.jsx("p",{children:"You can always review the current policy at any time through the extension or our website."})]})]}),x.jsxs("footer",{className:"border-t border-border pt-8",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-text-secondary mb-6",children:[x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Policy Version:"})," 3.0"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Effective Date:"})," July 8, 2025"]})]}),x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Compliance:"})," GDPR, CCPA, PIPEDA"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Chrome Web Store:"})," Compliant"]})]}),x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Framework:"})," Privacy by Design"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Audit:"})," Last reviewed July 2025"]})]})]}),x.jsx("div",{className:"text-center text-text-secondary",children:x.jsx("p",{className:"leading-relaxed",children:"By installing and using Make10000hours, you acknowledge that you have read, understood, and agree to this Privacy Policy. Your privacy is important to us, and we're committed to protecting it while helping you achieve your productivity goals."})})]})]})});class JG{static initialize(){this.unsubscribeUserStore&&this.unsubscribeUserStore(),console.log("🤖 Initializing chat integration service...");let e=Qt.getState().user;this.unsubscribeUserStore=Qt.subscribe(t=>{const r=t.user,i=XDe.getState();r&&r.uid?(console.log("🤖 User authenticated, initializing chat store for:",r.uid),i._userId!==r.uid&&i._setUserId(r.uid)):e&&!r&&(console.log("🤖 User logged out, resetting chat store"),i._reset()),e=r})}static cleanup(){this.unsubscribeUserStore&&(this.unsubscribeUserStore(),this.unsubscribeUserStore=null),console.log("🤖 Chat integration service cleaned up")}static getCurrentUserContext(){const e=Qt.getState();return e.user?{userId:e.user.uid,userName:e.user.userName||"User",isAuthenticated:e.isAuthenticated}:null}static isChatAvailable(){const e=Qt.getState();return e.isAuthenticated&&!!e.user}}zt(JG,"unsubscribeUserStore",null);const n1={testSessionCreationLocking:async n=>{console.log("🧪 Testing session creation locking...");try{const e=[Ga.startSession(n),Ga.startSession(n),Ga.startSession(n)],t=await Promise.all(e);return new Set(t).size===1?(console.log("✅ Session creation locking works - all calls returned same session ID:",t[0]),{success:!0,sessionId:t[0]}):(console.error("❌ Session creation locking failed - multiple session IDs created:",t),{success:!1,sessionIds:t})}catch(e){return console.error("❌ Session creation locking test failed:",e),{success:!1,error:e}}},testExtensionMessageDeduplication:()=>{console.log("🧪 Testing extension message deduplication...");let n=0;const e=window.dispatchEvent;window.dispatchEvent=function(t){return t instanceof CustomEvent&&t.type==="extensionFocusHandled"&&(n++,console.log(`📥 Extension focus handled event #${n}`)),e.call(this,t)};try{const t=Date.now(),r={type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:[],timestamp:t,messageId:`test-extension_true_${t}`},source:"test-extension",extensionId:"test-extension"};for(let i=0;i<5;i++)window.postMessage(r,"*");setTimeout(()=>{n<=1?console.log("✅ Extension message deduplication works - only",n,"message(s) processed"):console.error("❌ Extension message deduplication failed - processed",n,"messages"),window.dispatchEvent=e},1e3)}catch(t){console.error("❌ Extension message deduplication test failed:",t),window.dispatchEvent=e}},testSingleSessionFromExtension:async n=>{console.log("🧪 Testing single session creation from extension toggle...");try{await Ga.cleanupOrphanedSessions(n);const t=(await Ga.getUserSessions(n)).filter(o=>o.status==="active").length;console.log("📊 Initial active sessions:",t);const r=Date.now();window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:["facebook.com","twitter.com"],targetUserId:n,timestamp:r,messageId:`test-extension_true_${r}`,source:"extension-content-script"},source:"test-extension",extensionId:"test-extension",messageTimestamp:r,messageSource:"focus-time-tracker-extension"},"*"),await new Promise(o=>setTimeout(o,2e3));const a=(await Ga.getUserSessions(n)).filter(o=>o.status==="active").length;if(console.log("📊 Final active sessions:",a),a===t+1)return console.log("✅ Single session creation from extension works - exactly 1 new session created"),{success:!0,newSessionCount:1};{const o=a-t;return console.error("❌ Multiple sessions created from extension toggle:",o),{success:!1,newSessionCount:o}}}catch(e){return console.error("❌ Single session creation test failed:",e),{success:!1,error:e}}},testDisableFromExtension:()=>{console.log("🧪 Testing Deep Focus disable from extension...");try{vr(async()=>{const{useDeepFocusStore:n}=await Promise.resolve().then(()=>vet);return{useDeepFocusStore:n}},void 0).then(({useDeepFocusStore:n})=>{const e=n.getState();console.log("📊 Initial state:",{isDeepFocusActive:e.isDeepFocusActive,activeSessionId:e.activeSessionId}),console.log("📤 Simulating extension disable message..."),window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!1,isVisible:!1,isFocused:!1,blockedSites:[],targetUserId:null,timestamp:Date.now(),messageId:`test-extension_false_${Date.now()}`,source:"extension-content-script"},source:"test-extension-id",extensionId:"test-extension-id",messageTimestamp:Date.now(),messageSource:"focus-time-tracker-extension"},"*"),setTimeout(()=>{const t=n.getState();console.log("📊 Final state:",{isDeepFocusActive:t.isDeepFocusActive,activeSessionId:t.activeSessionId}),t.isDeepFocusActive?console.error("❌ Deep Focus did not disable from extension message"):console.log("✅ Deep Focus disable from extension works correctly")},1e3)})}catch(n){console.error("❌ Deep Focus disable test failed:",n)}},runAllTests:async n=>{console.log("🔬 Running all Deep Focus duplicate session fixes tests..."),console.log("====================================="),await n1.testSessionCreationLocking(n),console.log("-------------------------------------"),n1.testExtensionMessageDeduplication(),console.log("-------------------------------------"),await n1.testSingleSessionFromExtension(n),console.log("-------------------------------------"),n1.testDisableFromExtension(),console.log("====================================="),console.log("📋 All tests completed. Check console for individual results.")}};window.testDeepFocusFixes=n1;vr(()=>import("./cleanupSessions-BHY-DRUC.js"),[]);const VPt=()=>{const n=ei(i=>i.isRunning),e=ei(i=>i.currentTime),t=ei(i=>i.currentTask),r=K.useRef("");return K.useEffect(()=>{r.current=document.title},[]),K.useEffect(()=>{if(n){const i=T7(e),a=t?t.title:"Focus Session";document.title=`${i} - ${a}`}else document.title=r.current;return()=>{document.title=r.current}},[n,e,t]),null},zPt=({children:n})=>{const e=ss(),{user:t}=Qt();return K.useEffect(()=>{const r=e.pathname==="/"?"home":e.pathname.replace("/","");Sye(r)},[e]),K.useEffect(()=>{t!=null&&t.uid&&G5e(t.uid)},[t]),x.jsx(x.Fragment,{children:n})},HPt=()=>x.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:x.jsxs("div",{className:"bg-background-primary rounded-lg border border-border p-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-8",children:"Help & Support"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Documentation"}),x.jsx("div",{className:"space-y-3",children:x.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[x.jsx("h3",{className:"font-medium text-text-primary mb-2",children:"Privacy Policy"}),x.jsx("p",{className:"text-sm text-text-secondary",children:"Learn how we protect your data and privacy"})]})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Contact Us"}),x.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[x.jsx("p",{className:"text-text-secondary mb-2",children:"For support, feedback, or questions about the Focus Time Tracker extension:"}),x.jsxs("p",{className:"text-text-primary",children:[x.jsx("strong",{children:"Email:"})," support@make10000hours.com"]})]})]})]}),x.jsxs("div",{className:"mt-8 pt-8 border-t border-border",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"About Focus Time Tracker"}),x.jsx("p",{className:"text-text-secondary",children:"Focus Time Tracker is a Chrome extension designed to help you track your website usage time and maintain focus during work sessions. All your data is stored locally on your device for maximum privacy and security."})]})]})});let yz=!1,bz=null;const QDe=ve.memo(()=>{const n=ss(),e=Zg(),{isRightSidebarOpen:t,toggleRightSidebar:r,toggleLeftSidebar:i}=pl(),{setIsAddingTask:a}=Ut(),{toggleDeepFocus:o}=mxe(),{start:s,pause:l,isRunning:c}=ei(),u=ei(m=>m.enableStartPauseBtn),d=K.useCallback(m=>{e(m)},[e]),h=K.useCallback(()=>{t||r(),a(!0)},[t,r,a]),f=K.useCallback(()=>{c?l():s()},[c,l,s]);return K.useEffect(()=>{if(yz)return bz||void 0;yz=!0,console.log("🔧 GlobalKeyboardShortcuts: Component mounted and event listener attached");const m=y=>{const w=y.target,_=w.tagName==="INPUT"||w.tagName==="TEXTAREA"||w.isContentEditable||w.getAttribute("role")==="textbox";if(y.code==="Space"&&!_&&(n.pathname==="/pomodoro"||n.pathname==="/")&&u){y.preventDefault(),console.log("🔑 Space detected - toggling pomodoro timer"),f();return}if(y.shiftKey&&(y.key==="D"||y.key==="d")&&!_){console.log("🔑 Shift+D detected - toggling deep focus mode"),y.preventDefault(),o();return}y.shiftKey&&y.key==="N"&&!_&&(console.log("🔑 Shift+N detected - creating new task"),y.preventDefault(),h()),y.metaKey&&(y.key==="\\"||y.key==="|")&&(console.log("🔑 Cmd+\\ detected - toggling right sidebar"),y.preventDefault(),r()),y.altKey&&(y.key==="\\"||y.key==="|"||y.code==="Backslash")&&(console.log("🔑 Alt+\\ detected - toggling left sidebar"),y.preventDefault(),i()),_||((y.key==="P"||y.key==="p")&&(console.log("🔑 P detected - navigating to Pomodoro Timer"),y.preventDefault(),d("/pomodoro")),(y.key==="C"||y.key==="c")&&(console.log("🔑 C detected - navigating to Calendar"),y.preventDefault(),d("/calendar")),(y.key==="T"||y.key==="t")&&(console.log("🔑 T detected - navigating to Task Management"),y.preventDefault(),d("/projects")),(y.key==="I"||y.key==="i")&&(console.log("🔑 I detected - navigating to Productivity Insights"),y.preventDefault(),d("/dashboard")),(y.key==="F"||y.key==="f")&&(console.log("🔑 F detected - navigating to Deep Focus"),y.preventDefault(),d("/deep-focus")),(y.key==="D"||y.key==="d")&&!y.shiftKey&&(console.log("🔑 D detected - navigating to Calendar Day view"),y.preventDefault(),d("/calendar?view=day")),(y.key==="W"||y.key==="w")&&(console.log("🔑 W detected - navigating to Calendar Week view"),y.preventDefault(),d("/calendar?view=week")),(y.key==="M"||y.key==="m")&&(console.log("🔑 M detected - navigating to Calendar Month view"),y.preventDefault(),d("/calendar?view=month")))};document.addEventListener("keydown",m);const v=()=>{document.removeEventListener("keydown",m),yz=!1,bz=null};return bz=v,v},[n.pathname,u,o]),null});QDe.displayName="GlobalKeyboardShortcuts";const GPt=()=>{const{initialize:n,user:e,isLoading:t,isInitialized:r}=Qt(),{initializeTheme:i}=OW();fnt(),K.useEffect(()=>{let u=null;const d=()=>{const{isRunning:f,isActiveDevice:m}=ei.getState();u&&(clearInterval(u),u=null),f&&m&&(u=setInterval(()=>{ei.getState().tick()},1e3))};d();const h=ei.subscribe((f,m)=>{(f.isRunning!==m.isRunning||f.isActiveDevice!==m.isActiveDevice)&&d()});return()=>{u&&clearInterval(u),h(),JG.cleanup()}},[]),K.useEffect(()=>{var u;n(),i(),JG.initialize(),setTimeout(()=>{q_e()},2e3);try{const d=localStorage.getItem("focus-time-storage");if(d){const h=JSON.parse(d);if(h.state&&h.state.focusStreak&&h.state.focusStreak.streakDates){const f=(u=h.state.focusStreak.streakDates[0])==null?void 0:u.date;f&&typeof f=="string"&&console.log("Converting date format in localStorage")}}}catch(d){console.error("Error with localStorage data, clearing storage:",d),localStorage.removeItem("focus-time-storage"),window.location.reload()}},[]),K.useEffect(()=>{const u=async d=>{var f,m,v,y;const h=Nu.getState();if(h.isDeepFocusActive){const w=((m=(f=window.performance)==null?void 0:f.navigation)==null?void 0:m.type)===1||((y=(v=window.performance)==null?void 0:v.getEntriesByType("navigation")[0])==null?void 0:y.type)==="reload";h.setReloading(w),w||(d.preventDefault(),d.returnValue="",await h.disableDeepFocus())}};return window.addEventListener("beforeunload",u),()=>window.removeEventListener("beforeunload",u)},[]);const a=()=>x.jsx(ioe,{rightSidebarContent:x.jsx(Axe,{}),children:x.jsx(sBe,{})}),o=()=>{const{isLeftSidebarOpen:u}=pl();return x.jsx("div",{className:"min-h-screen bg-background-primary",children:x.jsxs("div",{className:"flex h-screen overflow-hidden",children:[x.jsx("div",{className:`${u?"w-64":"w-0"} transition-all duration-300 overflow-hidden`,children:x.jsx(Vw,{})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(gH,{}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx(HPt,{})})]})]})})},s=()=>{const{isLeftSidebarOpen:u}=pl();return x.jsx("div",{className:"min-h-screen bg-background-primary",children:x.jsxs("div",{className:"flex h-screen overflow-hidden",children:[x.jsx("div",{className:`${u?"w-64":"w-0"} transition-all duration-300 overflow-hidden`,children:x.jsx(Vw,{})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(gH,{}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx(UPt,{})})]})]})})},l=()=>x.jsx(cnt,{children:x.jsx(lnt,{})}),c=()=>x.jsx(ioe,{children:x.jsx(BPt,{})});return r?(typeof window<"u"&&(window.testDeepFocusFixes=n1),x.jsx(xet,{children:x.jsxs(b3e,{children:[x.jsx(VPt,{}),x.jsx(QDe,{},"global-shortcuts"),x.jsx(zPt,{children:x.jsxs(KFe,{children:[x.jsx(Tu,{path:"/",element:x.jsx(a,{})}),x.jsx(Tu,{path:"pomodoro",element:x.jsx(a,{})}),x.jsx(Tu,{path:"projects",element:x.jsx(l,{})}),x.jsxs(Tu,{path:"dashboard/*",element:x.jsx(Jtt,{}),children:[x.jsx(Tu,{index:!0,element:x.jsx(XQe,{})}),x.jsx(Tu,{path:"settings",element:x.jsx(Ert,{})})]}),x.jsx(Tu,{path:"calendar",element:x.jsx(Kat,{})}),x.jsx(Tu,{path:"deep-focus",element:x.jsx(tAt,{})}),x.jsx(Tu,{path:"data-sync",element:x.jsx(c,{})}),x.jsx(Tu,{path:"support",element:x.jsx(o,{})}),x.jsx(Tu,{path:"privacy-policy",element:x.jsx(s,{})})]})}),x.jsx(dnt,{}),x.jsx(IPt,{})]})})):x.jsx(nAt,{title:"Make10000hours",subtitle:"Setting up your workspace..."})},qPt=n=>{n&&n instanceof Function&&vr(async()=>{const{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}=await import("./web-vitals-CFX8QzIp.js");return{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}},[]).then(({getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a})=>{e(n),t(n),r(n),i(n),a(n)})};hIe.createRoot(document.getElementById("root")).render(x.jsx(ve.StrictMode,{children:x.jsx(nFe,{children:x.jsx(GPt,{})})}));qPt(console.log);export{cl as F,Ar as O,Qh as b,Ga as d,Qt as u};
