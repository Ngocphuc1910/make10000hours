var SDe=Object.defineProperty;var _De=(n,e,t)=>e in n?SDe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $t=(n,e,t)=>_De(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Lr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var BF={exports:{}},hA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sX;function TDe(){if(sX)return hA;sX=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return hA.Fragment=e,hA.jsx=t,hA.jsxs=t,hA}var lX;function EDe(){return lX||(lX=1,BF.exports=TDe()),BF.exports}var x=EDe(),UF={exports:{}},Xn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cX;function ADe(){if(cX)return Xn;cX=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=d&&z[d]||z["@@iterator"],typeof z=="function"?z:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(z,se,ce){this.props=z,this.context=se,this.refs=v,this.updater=ce||f}y.prototype.isReactComponent={},y.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},y.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function w(){}w.prototype=y.prototype;function S(z,se,ce){this.props=z,this.context=se,this.refs=v,this.updater=ce||f}var T=S.prototype=new w;T.constructor=S,m(T,y.prototype),T.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},A=Object.prototype.hasOwnProperty;function D(z,se,ce,ee,be,fe){return ce=fe.ref,{$$typeof:n,type:z,key:se,ref:ce!==void 0?ce:null,props:fe}}function P(z,se){return D(z.type,se,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function R(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ce){return se[ce]})}var L=/\/+/g;function B(z,se){return typeof z=="object"&&z!==null&&z.key!=null?R(""+z.key):se.toString(36)}function $(){}function G(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then($,$):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function W(z,se,ce,ee,be){var fe=typeof z;(fe==="undefined"||fe==="boolean")&&(z=null);var De=!1;if(z===null)De=!0;else switch(fe){case"bigint":case"string":case"number":De=!0;break;case"object":switch(z.$$typeof){case n:case e:De=!0;break;case u:return De=z._init,W(De(z._payload),se,ce,ee,be)}}if(De)return be=be(z),De=ee===""?"."+B(z,0):ee,C(be)?(ce="",De!=null&&(ce=De.replace(L,"$&/")+"/"),W(be,se,ce,"",function(de){return de})):be!=null&&(N(be)&&(be=P(be,ce+(be.key==null||z&&z.key===be.key?"":(""+be.key).replace(L,"$&/")+"/")+De)),se.push(be)),1;De=0;var dt=ee===""?".":ee+":";if(C(z))for(var ve=0;ve<z.length;ve++)ee=z[ve],fe=dt+B(ee,ve),De+=W(ee,se,ce,fe,be);else if(ve=h(z),typeof ve=="function")for(z=ve.call(z),ve=0;!(ee=z.next()).done;)ee=ee.value,fe=dt+B(ee,ve++),De+=W(ee,se,ce,fe,be);else if(fe==="object"){if(typeof z.then=="function")return W(G(z),se,ce,ee,be);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return De}function K(z,se,ce){if(z==null)return z;var ee=[],be=0;return W(z,ee,"","",function(fe){return se.call(ce,fe,be++)}),ee}function X(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=ce)},function(ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=ce)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function ie(){}return Xn.Children={map:K,forEach:function(z,se,ce){K(z,function(){se.apply(this,arguments)},ce)},count:function(z){var se=0;return K(z,function(){se++}),se},toArray:function(z){return K(z,function(se){return se})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Xn.Component=y,Xn.Fragment=t,Xn.Profiler=i,Xn.PureComponent=S,Xn.StrictMode=r,Xn.Suspense=l,Xn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Xn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},Xn.cache=function(z){return function(){return z.apply(null,arguments)}},Xn.cloneElement=function(z,se,ce){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ee=m({},z.props),be=z.key,fe=void 0;if(se!=null)for(De in se.ref!==void 0&&(fe=void 0),se.key!==void 0&&(be=""+se.key),se)!A.call(se,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&se.ref===void 0||(ee[De]=se[De]);var De=arguments.length-2;if(De===1)ee.children=ce;else if(1<De){for(var dt=Array(De),ve=0;ve<De;ve++)dt[ve]=arguments[ve+2];ee.children=dt}return D(z.type,be,void 0,void 0,fe,ee)},Xn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},Xn.createElement=function(z,se,ce){var ee,be={},fe=null;if(se!=null)for(ee in se.key!==void 0&&(fe=""+se.key),se)A.call(se,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(be[ee]=se[ee]);var De=arguments.length-2;if(De===1)be.children=ce;else if(1<De){for(var dt=Array(De),ve=0;ve<De;ve++)dt[ve]=arguments[ve+2];be.children=dt}if(z&&z.defaultProps)for(ee in De=z.defaultProps,De)be[ee]===void 0&&(be[ee]=De[ee]);return D(z,fe,void 0,void 0,null,be)},Xn.createRef=function(){return{current:null}},Xn.forwardRef=function(z){return{$$typeof:s,render:z}},Xn.isValidElement=N,Xn.lazy=function(z){return{$$typeof:u,_payload:{_status:-1,_result:z},_init:X}},Xn.memo=function(z,se){return{$$typeof:c,type:z,compare:se===void 0?null:se}},Xn.startTransition=function(z){var se=k.T,ce={};k.T=ce;try{var ee=z(),be=k.S;be!==null&&be(ce,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(ie,te)}catch(fe){te(fe)}finally{k.T=se}},Xn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Xn.use=function(z){return k.H.use(z)},Xn.useActionState=function(z,se,ce){return k.H.useActionState(z,se,ce)},Xn.useCallback=function(z,se){return k.H.useCallback(z,se)},Xn.useContext=function(z){return k.H.useContext(z)},Xn.useDebugValue=function(){},Xn.useDeferredValue=function(z,se){return k.H.useDeferredValue(z,se)},Xn.useEffect=function(z,se,ce){var ee=k.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(z,se)},Xn.useId=function(){return k.H.useId()},Xn.useImperativeHandle=function(z,se,ce){return k.H.useImperativeHandle(z,se,ce)},Xn.useInsertionEffect=function(z,se){return k.H.useInsertionEffect(z,se)},Xn.useLayoutEffect=function(z,se){return k.H.useLayoutEffect(z,se)},Xn.useMemo=function(z,se){return k.H.useMemo(z,se)},Xn.useOptimistic=function(z,se){return k.H.useOptimistic(z,se)},Xn.useReducer=function(z,se,ce){return k.H.useReducer(z,se,ce)},Xn.useRef=function(z){return k.H.useRef(z)},Xn.useState=function(z){return k.H.useState(z)},Xn.useSyncExternalStore=function(z,se,ce){return k.H.useSyncExternalStore(z,se,ce)},Xn.useTransition=function(){return k.H.useTransition()},Xn.version="19.1.0",Xn}var uX;function n8(){return uX||(uX=1,UF.exports=ADe()),UF.exports}var Y=n8();const we=Lr(Y);var VF={exports:{}},fA={},zF={exports:{}},HF={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dX;function kDe(){return dX||(dX=1,function(n){function e(K,X){var te=K.length;K.push(X);e:for(;0<te;){var ie=te-1>>>1,z=K[ie];if(0<i(z,X))K[ie]=X,K[te]=z,te=ie;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var X=K[0],te=K.pop();if(te!==X){K[0]=te;e:for(var ie=0,z=K.length,se=z>>>1;ie<se;){var ce=2*(ie+1)-1,ee=K[ce],be=ce+1,fe=K[be];if(0>i(ee,te))be<z&&0>i(fe,ee)?(K[ie]=fe,K[be]=te,ie=be):(K[ie]=ee,K[ce]=te,ie=ce);else if(be<z&&0>i(fe,te))K[ie]=fe,K[be]=te,ie=be;else break e}}return X}function i(K,X){var te=K.sortIndex-X.sortIndex;return te!==0?te:K.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function C(K){for(var X=t(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=K)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function k(K){if(v=!1,C(K),!m)if(t(l)!==null)m=!0,A||(A=!0,B());else{var X=t(c);X!==null&&W(k,X.startTime-K)}}var A=!1,D=-1,P=5,N=-1;function R(){return y?!0:!(n.unstable_now()-N<P)}function L(){if(y=!1,A){var K=n.unstable_now();N=K;var X=!0;try{e:{m=!1,v&&(v=!1,S(D),D=-1),f=!0;var te=h;try{t:{for(C(K),d=t(l);d!==null&&!(d.expirationTime>K&&R());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var z=ie(d.expirationTime<=K);if(K=n.unstable_now(),typeof z=="function"){d.callback=z,C(K),X=!0;break t}d===t(l)&&r(l),C(K)}else r(l);d=t(l)}if(d!==null)X=!0;else{var se=t(c);se!==null&&W(k,se.startTime-K),X=!1}}break e}finally{d=null,h=te,f=!1}X=void 0}}finally{X?B():A=!1}}}var B;if(typeof T=="function")B=function(){T(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,G=$.port2;$.port1.onmessage=L,B=function(){G.postMessage(null)}}else B=function(){w(L,0)};function W(K,X){D=w(function(){K(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_next=function(K){switch(h){case 1:case 2:case 3:var X=3;break;default:X=h}var te=h;h=X;try{return K()}finally{h=te}},n.unstable_requestPaint=function(){y=!0},n.unstable_runWithPriority=function(K,X){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var te=h;h=K;try{return X()}finally{h=te}},n.unstable_scheduleCallback=function(K,X,te){var ie=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ie+te:ie):te=ie,K){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=te+z,K={id:u++,callback:X,priorityLevel:K,startTime:te,expirationTime:z,sortIndex:-1},te>ie?(K.sortIndex=te,e(c,K),t(l)===null&&K===t(c)&&(v?(S(D),D=-1):v=!0,W(k,te-ie))):(K.sortIndex=z,e(l,K),m||f||(m=!0,A||(A=!0,B()))),K},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(K){var X=h;return function(){var te=h;h=X;try{return K.apply(this,arguments)}finally{h=te}}}}(HF)),HF}var hX;function CDe(){return hX||(hX=1,zF.exports=kDe()),zF.exports}var GF={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fX;function DDe(){if(fX)return vs;fX=1;var n=n8();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vs.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,u)},vs.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},vs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},vs.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},vs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,f=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:f}):u==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:f,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},vs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=s(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},vs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=s(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},vs.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=s(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},vs.requestFormReset=function(l){r.d.r(l)},vs.unstable_batchedUpdates=function(l,c){return l(c)},vs.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},vs.useFormStatus=function(){return o.H.useHostTransitionStatus()},vs.version="19.1.0",vs}var pX;function Zfe(){if(pX)return GF.exports;pX=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),GF.exports=DDe(),GF.exports}var gX;function IDe(){if(gX)return fA;gX=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=CDe(),e=n8(),t=Zfe();function r(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)b+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function a(g){var b=g,E=g;if(g.alternate)for(;b.return;)b=b.return;else{g=b;do b=g,(b.flags&4098)!==0&&(E=b.return),g=b.return;while(g)}return b.tag===3?E:null}function o(g){if(g.tag===13){var b=g.memoizedState;if(b===null&&(g=g.alternate,g!==null&&(b=g.memoizedState)),b!==null)return b.dehydrated}return null}function s(g){if(a(g)!==g)throw Error(r(188))}function l(g){var b=g.alternate;if(!b){if(b=a(g),b===null)throw Error(r(188));return b!==g?null:g}for(var E=g,M=b;;){var F=E.return;if(F===null)break;var U=F.alternate;if(U===null){if(M=F.return,M!==null){E=M;continue}break}if(F.child===U.child){for(U=F.child;U;){if(U===E)return s(F),g;if(U===M)return s(F),b;U=U.sibling}throw Error(r(188))}if(E.return!==M.return)E=F,M=U;else{for(var J=!1,ae=F.child;ae;){if(ae===E){J=!0,E=F,M=U;break}if(ae===M){J=!0,M=F,E=U;break}ae=ae.sibling}if(!J){for(ae=U.child;ae;){if(ae===E){J=!0,E=U,M=F;break}if(ae===M){J=!0,M=U,E=F;break}ae=ae.sibling}if(!J)throw Error(r(189))}}if(E.alternate!==M)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?g:b}function c(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g;for(g=g.child;g!==null;){if(b=c(g),b!==null)return b;g=g.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(g){return g===null||typeof g!="object"?null:(g=L&&g[L]||g["@@iterator"],typeof g=="function"?g:null)}var $=Symbol.for("react.client.reference");function G(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===$?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList";case N:return"Activity"}if(typeof g=="object")switch(g.$$typeof){case f:return"Portal";case T:return(g.displayName||"Context")+".Provider";case S:return(g._context.displayName||"Context")+".Consumer";case C:var b=g.render;return g=g.displayName,g||(g=b.displayName||b.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case D:return b=g.displayName||null,b!==null?b:G(g.type)||"Memo";case P:b=g._payload,g=g._init;try{return G(g(b))}catch{}}return null}var W=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ie=[],z=-1;function se(g){return{current:g}}function ce(g){0>z||(g.current=ie[z],ie[z]=null,z--)}function ee(g,b){z++,ie[z]=g.current,g.current=b}var be=se(null),fe=se(null),De=se(null),dt=se(null);function ve(g,b){switch(ee(De,b),ee(fe,g),ee(be,null),b.nodeType){case 9:case 11:g=(g=b.documentElement)&&(g=g.namespaceURI)?ev(g):0;break;default:if(g=b.tagName,b=b.namespaceURI)b=ev(b),g=tP(b,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}ce(be),ee(be,g)}function de(){ce(be),ce(fe),ce(De)}function me(g){g.memoizedState!==null&&ee(dt,g);var b=be.current,E=tP(b,g.type);b!==E&&(ee(fe,g),ee(be,E))}function xe(g){fe.current===g&&(ce(be),ce(fe)),dt.current===g&&(ce(dt),V0._currentValue=te)}var pe=Object.prototype.hasOwnProperty,$e=n.unstable_scheduleCallback,We=n.unstable_cancelCallback,ct=n.unstable_shouldYield,xt=n.unstable_requestPaint,At=n.unstable_now,pn=n.unstable_getCurrentPriorityLevel,Yt=n.unstable_ImmediatePriority,Rn=n.unstable_UserBlockingPriority,vn=n.unstable_NormalPriority,Fn=n.unstable_LowPriority,je=n.unstable_IdlePriority,an=n.log,yn=n.unstable_setDisableYieldValue,Te=null,Oe=null;function et(g){if(typeof an=="function"&&yn(g),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Te,g)}catch{}}var Ne=Math.clz32?Math.clz32:Kt,Je=Math.log,pt=Math.LN2;function Kt(g){return g>>>=0,g===0?32:31-(Je(g)/pt|0)|0}var vt=256,Sn=4194304;function on(g){var b=g&42;if(b!==0)return b;switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return g&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return g}}function Jt(g,b,E){var M=g.pendingLanes;if(M===0)return 0;var F=0,U=g.suspendedLanes,J=g.pingedLanes;g=g.warmLanes;var ae=M&134217727;return ae!==0?(M=ae&~U,M!==0?F=on(M):(J&=ae,J!==0?F=on(J):E||(E=ae&~g,E!==0&&(F=on(E))))):(ae=M&~U,ae!==0?F=on(ae):J!==0?F=on(J):E||(E=M&~g,E!==0&&(F=on(E)))),F===0?0:b!==0&&b!==F&&(b&U)===0&&(U=F&-F,E=b&-b,U>=E||U===32&&(E&4194048)!==0)?b:F}function Cr(g,b){return(g.pendingLanes&~(g.suspendedLanes&~g.pingedLanes)&b)===0}function hn(g,b){switch(g){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var g=vt;return vt<<=1,(vt&4194048)===0&&(vt=256),g}function mo(){var g=Sn;return Sn<<=1,(Sn&62914560)===0&&(Sn=4194304),g}function ze(g){for(var b=[],E=0;31>E;E++)b.push(g);return b}function bn(g,b){g.pendingLanes|=b,b!==268435456&&(g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0)}function Ue(g,b,E,M,F,U){var J=g.pendingLanes;g.pendingLanes=E,g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0,g.expiredLanes&=E,g.entangledLanes&=E,g.errorRecoveryDisabledLanes&=E,g.shellSuspendCounter=0;var ae=g.entanglements,he=g.expirationTimes,Ce=g.hiddenUpdates;for(E=J&~E;0<E;){var He=31-Ne(E),Xe=1<<He;ae[He]=0,he[He]=-1;var Ie=Ce[He];if(Ie!==null)for(Ce[He]=null,He=0;He<Ie.length;He++){var Pe=Ie[He];Pe!==null&&(Pe.lane&=-536870913)}E&=~Xe}M!==0&&ne(g,M,0),U!==0&&F===0&&g.tag!==0&&(g.suspendedLanes|=U&~(J&~b))}function ne(g,b,E){g.pendingLanes|=b,g.suspendedLanes&=~b;var M=31-Ne(b);g.entangledLanes|=b,g.entanglements[M]=g.entanglements[M]|1073741824|E&4194090}function oe(g,b){var E=g.entangledLanes|=b;for(g=g.entanglements;E;){var M=31-Ne(E),F=1<<M;F&b|g[M]&b&&(g[M]|=b),E&=~F}}function ge(g){switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=128;break;case 268435456:g=134217728;break;default:g=0}return g}function ke(g){return g&=-g,2<g?8<g?(g&134217727)!==0?32:268435456:8:2}function qe(){var g=X.p;return g!==0?g:(g=window.event,g===void 0?32:G0(g.type))}function nt(g,b){var E=X.p;try{return X.p=g,b()}finally{X.p=E}}var _t=Math.random().toString(36).slice(2),ot="__reactFiber$"+_t,St="__reactProps$"+_t,bt="__reactContainer$"+_t,Gt="__reactEvents$"+_t,Jn="__reactListeners$"+_t,gi="__reactHandles$"+_t,va="__reactResources$"+_t,rs="__reactMarker$"+_t;function sa(g){delete g[ot],delete g[St],delete g[Gt],delete g[Jn],delete g[gi]}function Xl(g){var b=g[ot];if(b)return b;for(var E=g.parentNode;E;){if(b=E[bt]||E[ot]){if(E=b.alternate,b.child!==null||E!==null&&E.child!==null)for(g=rP(g);g!==null;){if(E=g[ot])return E;g=rP(g)}return b}g=E,E=g.parentNode}return null}function la(g){if(g=g[ot]||g[bt]){var b=g.tag;if(b===5||b===6||b===13||b===26||b===27||b===3)return g}return null}function bl(g){var b=g.tag;if(b===5||b===26||b===27||b===6)return g.stateNode;throw Error(r(33))}function Ya(g){var b=g[va];return b||(b=g[va]={hoistableStyles:new Map,hoistableScripts:new Map}),b}function _i(g){g[rs]=!0}var ph=new Set,Zr={};function Ma(g,b){wl(g,b),wl(g+"Capture",b)}function wl(g,b){for(Zr[g]=b,g=0;g<b.length;g++)ph.add(b[g])}var Yf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zn={},gh={};function Qg(g){return pe.call(gh,g)?!0:pe.call(zn,g)?!1:Yf.test(g)?gh[g]=!0:(zn[g]=!0,!1)}function mh(g,b,E){if(Qg(b))if(E===null)g.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":g.removeAttribute(b);return;case"boolean":var M=b.toLowerCase().slice(0,5);if(M!=="data-"&&M!=="aria-"){g.removeAttribute(b);return}}g.setAttribute(b,""+E)}}function Zl(g,b,E){if(E===null)g.removeAttribute(b);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(b);return}g.setAttribute(b,""+E)}}function er(g,b,E,M){if(M===null)g.removeAttribute(E);else{switch(typeof M){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(E);return}g.setAttributeNS(b,E,""+M)}}var is,sx;function ya(g){if(is===void 0)try{throw Error()}catch(E){var b=E.stack.trim().match(/\n( *(at )?)/);is=b&&b[1]||"",sx=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+is+g+sx}var ca=!1;function Jg(g,b){if(!g||ca)return"";ca=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(b){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Pe){var Ie=Pe}Reflect.construct(g,[],Xe)}else{try{Xe.call()}catch(Pe){Ie=Pe}g.call(Xe.prototype)}}else{try{throw Error()}catch(Pe){Ie=Pe}(Xe=g())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Pe){if(Pe&&Ie&&typeof Pe.stack=="string")return[Pe.stack,Ie.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=M.DetermineComponentFrameRoot(),J=U[0],ae=U[1];if(J&&ae){var he=J.split(`
`),Ce=ae.split(`
`);for(F=M=0;M<he.length&&!he[M].includes("DetermineComponentFrameRoot");)M++;for(;F<Ce.length&&!Ce[F].includes("DetermineComponentFrameRoot");)F++;if(M===he.length||F===Ce.length)for(M=he.length-1,F=Ce.length-1;1<=M&&0<=F&&he[M]!==Ce[F];)F--;for(;1<=M&&0<=F;M--,F--)if(he[M]!==Ce[F]){if(M!==1||F!==1)do if(M--,F--,0>F||he[M]!==Ce[F]){var He=`
`+he[M].replace(" at new "," at ");return g.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",g.displayName)),He}while(1<=M&&0<=F);break}}}finally{ca=!1,Error.prepareStackTrace=E}return(E=g?g.displayName||g.name:"")?ya(E):""}function xl(g){switch(g.tag){case 26:case 27:case 5:return ya(g.type);case 16:return ya("Lazy");case 13:return ya("Suspense");case 19:return ya("SuspenseList");case 0:case 15:return Jg(g.type,!1);case 11:return Jg(g.type.render,!1);case 1:return Jg(g.type,!0);case 31:return ya("Activity");default:return""}}function Kf(g){try{var b="";do b+=xl(g),g=g.return;while(g);return b}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function Pa(g){switch(typeof g){case"bigint":case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Xf(g){var b=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Iy(g){var b=Xf(g)?"checked":"value",E=Object.getOwnPropertyDescriptor(g.constructor.prototype,b),M=""+g[b];if(!g.hasOwnProperty(b)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var F=E.get,U=E.set;return Object.defineProperty(g,b,{configurable:!0,get:function(){return F.call(this)},set:function(J){M=""+J,U.call(this,J)}}),Object.defineProperty(g,b,{enumerable:E.enumerable}),{getValue:function(){return M},setValue:function(J){M=""+J},stopTracking:function(){g._valueTracker=null,delete g[b]}}}}function vh(g){g._valueTracker||(g._valueTracker=Iy(g))}function My(g){if(!g)return!1;var b=g._valueTracker;if(!b)return!0;var E=b.getValue(),M="";return g&&(M=Xf(g)?g.checked?"true":"false":g.value),g=M,g!==E?(b.setValue(g),!0):!1}function js(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}var Zf=/[\n"\\]/g;function Wi(g){return g.replace(Zf,function(b){return"\\"+b.charCodeAt(0).toString(16)+" "})}function Na(g,b,E,M,F,U,J,ae){g.name="",J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?g.type=J:g.removeAttribute("type"),b!=null?J==="number"?(b===0&&g.value===""||g.value!=b)&&(g.value=""+Pa(b)):g.value!==""+Pa(b)&&(g.value=""+Pa(b)):J!=="submit"&&J!=="reset"||g.removeAttribute("value"),b!=null?Ju(g,J,Pa(b)):E!=null?Ju(g,J,Pa(E)):M!=null&&g.removeAttribute("value"),F==null&&U!=null&&(g.defaultChecked=!!U),F!=null&&(g.checked=F&&typeof F!="function"&&typeof F!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?g.name=""+Pa(ae):g.removeAttribute("name")}function yh(g,b,E,M,F,U,J,ae){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(g.type=U),b!=null||E!=null){if(!(U!=="submit"&&U!=="reset"||b!=null))return;E=E!=null?""+Pa(E):"",b=b!=null?""+Pa(b):E,ae||b===g.value||(g.value=b),g.defaultValue=b}M=M??F,M=typeof M!="function"&&typeof M!="symbol"&&!!M,g.checked=ae?g.checked:!!M,g.defaultChecked=!!M,J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"&&(g.name=J)}function Ju(g,b,E){b==="number"&&js(g.ownerDocument)===g||g.defaultValue===""+E||(g.defaultValue=""+E)}function Oo(g,b,E,M){if(g=g.options,b){b={};for(var F=0;F<E.length;F++)b["$"+E[F]]=!0;for(E=0;E<g.length;E++)F=b.hasOwnProperty("$"+g[E].value),g[E].selected!==F&&(g[E].selected=F),F&&M&&(g[E].defaultSelected=!0)}else{for(E=""+Pa(E),b=null,F=0;F<g.length;F++){if(g[F].value===E){g[F].selected=!0,M&&(g[F].defaultSelected=!0);return}b!==null||g[F].disabled||(b=g[F])}b!==null&&(b.selected=!0)}}function jr(g,b,E){if(b!=null&&(b=""+Pa(b),b!==g.value&&(g.value=b),E==null)){g.defaultValue!==b&&(g.defaultValue=b);return}g.defaultValue=E!=null?""+Pa(E):""}function Qf(g,b,E,M){if(b==null){if(M!=null){if(E!=null)throw Error(r(92));if(W(M)){if(1<M.length)throw Error(r(93));M=M[0]}E=M}E==null&&(E=""),b=E}E=Pa(b),g.defaultValue=E,M=g.textContent,M===E&&M!==""&&M!==null&&(g.value=M)}function Fs(g,b){if(b){var E=g.firstChild;if(E&&E===g.lastChild&&E.nodeType===3){E.nodeValue=b;return}}g.textContent=b}var ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(g,b,E){var M=b.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?M?g.setProperty(b,""):b==="float"?g.cssFloat="":g[b]="":M?g.setProperty(b,E):typeof E!="number"||E===0||ba.has(b)?b==="float"?g.cssFloat=E:g[b]=(""+E).trim():g[b]=E+"px"}function em(g,b,E){if(b!=null&&typeof b!="object")throw Error(r(62));if(g=g.style,E!=null){for(var M in E)!E.hasOwnProperty(M)||b!=null&&b.hasOwnProperty(M)||(M.indexOf("--")===0?g.setProperty(M,""):M==="float"?g.cssFloat="":g[M]="");for(var F in b)M=b[F],b.hasOwnProperty(F)&&E[F]!==M&&Ql(g,F,M)}else for(var U in b)b.hasOwnProperty(U)&&Ql(g,U,b[U])}function bh(g){if(g.indexOf("-")===-1)return!1;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wh(g){return cx.test(""+g)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":g}var as=null;function $s(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var vo=null,Sl=null;function tm(g){var b=la(g);if(b&&(g=b.stateNode)){var E=g[St]||null;e:switch(g=b.stateNode,b.type){case"input":if(Na(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),b=E.name,E.type==="radio"&&b!=null){for(E=g;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+Wi(""+b)+'"][type="radio"]'),b=0;b<E.length;b++){var M=E[b];if(M!==g&&M.form===g.form){var F=M[St]||null;if(!F)throw Error(r(90));Na(M,F.value,F.defaultValue,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name)}}for(b=0;b<E.length;b++)M=E[b],M.form===g.form&&My(M)}break e;case"textarea":jr(g,E.value,E.defaultValue);break e;case"select":b=E.value,b!=null&&Oo(g,!!E.multiple,b,!1)}}}var os=!1;function ux(g,b,E){if(os)return g(b,E);os=!0;try{var M=g(b);return M}finally{if(os=!1,(vo!==null||Sl!==null)&&(S0(),vo&&(b=vo,g=Sl,Sl=vo=null,tm(b),g)))for(b=0;b<g.length;b++)tm(g[b])}}function Jf(g,b){var E=g.stateNode;if(E===null)return null;var M=E[St]||null;if(M===null)return null;E=M[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(g=g.type,M=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!M;break e;default:g=!1}if(g)return null;if(E&&typeof E!="function")throw Error(r(231,b,typeof E));return E}var Jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ka=!1;if(Jl)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Ka=!1}var _l=null,ec=null,tc=null;function ep(){if(tc)return tc;var g,b=ec,E=b.length,M,F="value"in _l?_l.value:_l.textContent,U=F.length;for(g=0;g<E&&b[g]===F[g];g++);var J=E-g;for(M=1;M<=J&&b[E-M]===F[U-M];M++);return tc=F.slice(g,1<M?1-M:void 0)}function nc(g){var b=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&b===13&&(g=13)):g=b,g===10&&(g=13),32<=g||g===13?g:0}function Hc(){return!0}function nm(){return!1}function qi(g){function b(E,M,F,U,J){this._reactName=E,this._targetInst=F,this.type=M,this.nativeEvent=U,this.target=J,this.currentTarget=null;for(var ae in g)g.hasOwnProperty(ae)&&(E=g[ae],this[ae]=E?E(U):U[ae]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?Hc:nm,this.isPropagationStopped=nm,this}return u(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),b}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gc=qi(or),ed=u({},or,{view:0,detail:0}),Py=qi(ed),rm,xh,Bs,Sh=u({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tp,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Bs&&(Bs&&g.type==="mousemove"?(rm=g.screenX-Bs.screenX,xh=g.screenY-Bs.screenY):xh=rm=0,Bs=g),rm)},movementY:function(g){return"movementY"in g?g.movementY:xh}}),Tl=qi(Sh),Ny=u({},Sh,{dataTransfer:0}),Wc=qi(Ny),rc=u({},ed,{relatedTarget:0}),im=qi(rc),Ry=u({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),am=qi(Ry),dx=u({},or,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),td=qi(dx),fn=u({},or,{data:0}),_h=qi(fn),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Et={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oy(g){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(g):(g=Et[g])?!!b[g]:!1}function tp(){return Oy}var mi=u({},ed,{key:function(g){if(g.key){var b=qc[g.key]||g.key;if(b!=="Unidentified")return b}return g.type==="keypress"?(g=nc(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?sr[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tp,charCode:function(g){return g.type==="keypress"?nc(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?nc(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),np=qi(mi),Ra=u({},Sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=qi(Ra),Yc=u({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tp}),hx=qi(Yc),fx=u({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),px=qi(fx),om=u({},Sh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),sm=qi(om),Xa=u({},or,{newState:0,oldState:0}),gx=qi(Xa),mx=[9,13,27,32],Kc=Jl&&"CompositionEvent"in window,O=null;Jl&&"documentMode"in document&&(O=document.documentMode);var q=Jl&&"TextEvent"in window&&!O,Q=Jl&&(!Kc||O&&8<O&&11>=O),le=" ",Ee=!1;function Le(g,b){switch(g){case"keyup":return mx.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var tr=!1;function wa(g,b){switch(g){case"compositionend":return ht(b);case"keypress":return b.which!==32?null:(Ee=!0,le);case"textInput":return g=b.data,g===le&&Ee?null:g;default:return null}}function Hn(g,b){if(tr)return g==="compositionend"||!Kc&&Le(g,b)?(g=ep(),tc=ec=_l=null,tr=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Q&&b.locale!=="ko"?null:b.data;default:return null}}var Oa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pi(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b==="input"?!!Oa[g.type]:b==="textarea"}function Us(g,b,E,M){vo?Sl?Sl.push(M):Sl=[M]:vo=M,b=P0(b,"onChange"),0<b.length&&(E=new Gc("onChange","change",null,E,M),g.push({event:E,listeners:b}))}var Za=null,ac=null;function Ly(g){XM(g,0)}function vx(g){var b=bl(g);if(My(b))return g}function Xc(g,b){if(g==="change")return b}var yo=!1;if(Jl){var LT;if(Jl){var rp="oninput"in document;if(!rp){var yM=document.createElement("div");yM.setAttribute("oninput","return;"),rp=typeof yM.oninput=="function"}LT=rp}else LT=!1;yo=LT&&(!document.documentMode||9<document.documentMode)}function bM(){Za&&(Za.detachEvent("onpropertychange",jy),ac=Za=null)}function jy(g){if(g.propertyName==="value"&&vx(ac)){var b=[];Us(b,ac,g,$s(g)),ux(Ly,b)}}function yx(g,b,E){g==="focusin"?(bM(),Za=b,ac=E,Za.attachEvent("onpropertychange",jy)):g==="focusout"&&bM()}function jT(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return vx(ac)}function FT(g,b){if(g==="click")return vx(b)}function $T(g,b){if(g==="input"||g==="change")return vx(b)}function BT(g,b){return g===b&&(g!==0||1/g===1/b)||g!==g&&b!==b}var Ni=typeof Object.is=="function"?Object.is:BT;function lm(g,b){if(Ni(g,b))return!0;if(typeof g!="object"||g===null||typeof b!="object"||b===null)return!1;var E=Object.keys(g),M=Object.keys(b);if(E.length!==M.length)return!1;for(M=0;M<E.length;M++){var F=E[M];if(!pe.call(b,F)||!Ni(g[F],b[F]))return!1}return!0}function wM(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function cm(g,b){var E=wM(g);g=0;for(var M;E;){if(E.nodeType===3){if(M=g+E.textContent.length,g<=b&&M>=b)return{node:E,offset:b-g};g=M}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=wM(E)}}function Th(g,b){return g&&b?g===b?!0:g&&g.nodeType===3?!1:b&&b.nodeType===3?Th(g,b.parentNode):"contains"in g?g.contains(b):g.compareDocumentPosition?!!(g.compareDocumentPosition(b)&16):!1:!1}function nd(g){g=g!=null&&g.ownerDocument!=null&&g.ownerDocument.defaultView!=null?g.ownerDocument.defaultView:window;for(var b=js(g.document);b instanceof g.HTMLIFrameElement;){try{var E=typeof b.contentWindow.location.href=="string"}catch{E=!1}if(E)g=b.contentWindow;else break;b=js(g.document)}return b}function bx(g){var b=g&&g.nodeName&&g.nodeName.toLowerCase();return b&&(b==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||b==="textarea"||g.contentEditable==="true")}var xM=Jl&&"documentMode"in document&&11>=document.documentMode,ip=null,UT=null,Eh=null,Fy=!1;function xx(g,b,E){var M=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Fy||ip==null||ip!==js(M)||(M=ip,"selectionStart"in M&&bx(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Eh&&lm(Eh,M)||(Eh=M,M=P0(UT,"onSelect"),0<M.length&&(b=new Gc("onSelect","select",null,b,E),g.push({event:b,listeners:M}),b.target=ip)))}function oi(g,b){var E={};return E[g.toLowerCase()]=b.toLowerCase(),E["Webkit"+g]="webkit"+b,E["Moz"+g]="moz"+b,E}var Vs={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},um={},ls={};Jl&&(ls=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Ah(g){if(um[g])return um[g];if(!Vs[g])return g;var b=Vs[g],E;for(E in b)if(b.hasOwnProperty(E)&&E in ls)return um[g]=b[E];return g}var VT=Ah("animationend"),SM=Ah("animationiteration"),Sx=Ah("animationstart"),_x=Ah("transitionrun"),_M=Ah("transitionstart"),zT=Ah("transitioncancel"),HT=Ah("transitionend"),GT=new Map,Tx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tx.push("scrollEnd");function oc(g,b){GT.set(g,b),Ma(b,[g])}var Ex=new WeakMap;function zs(g,b){if(typeof g=="object"&&g!==null){var E=Ex.get(g);return E!==void 0?E:(b={value:g,source:b,stack:Kf(b)},Ex.set(g,b),b)}return{value:g,source:b,stack:Kf(b)}}var cs=[],dm=0,$y=0;function ap(){for(var g=dm,b=$y=dm=0;b<g;){var E=cs[b];cs[b++]=null;var M=cs[b];cs[b++]=null;var F=cs[b];cs[b++]=null;var U=cs[b];if(cs[b++]=null,M!==null&&F!==null){var J=M.pending;J===null?F.next=F:(F.next=J.next,J.next=F),M.pending=F}U!==0&&WT(E,F,U)}}function Ax(g,b,E,M){cs[dm++]=g,cs[dm++]=b,cs[dm++]=E,cs[dm++]=M,$y|=M,g.lanes|=M,g=g.alternate,g!==null&&(g.lanes|=M)}function By(g,b,E,M){return Ax(g,b,E,M),Ri(g)}function op(g,b){return Ax(g,null,null,b),Ri(g)}function WT(g,b,E){g.lanes|=E;var M=g.alternate;M!==null&&(M.lanes|=E);for(var F=!1,U=g.return;U!==null;)U.childLanes|=E,M=U.alternate,M!==null&&(M.childLanes|=E),U.tag===22&&(g=U.stateNode,g===null||g._visibility&1||(F=!0)),g=U,U=U.return;return g.tag===3?(U=g.stateNode,F&&b!==null&&(F=31-Ne(E),g=U.hiddenUpdates,M=g[F],M===null?g[F]=[b]:M.push(b),b.lane=E|536870912),U):null}function Ri(g){if(50<Hm)throw Hm=0,dS=null,Error(r(185));for(var b=g.return;b!==null;)g=b,b=g.return;return g.tag===3?g.stateNode:null}var El={};function Uy(g,b,E,M){this.tag=g,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(g,b,E,M){return new Uy(g,b,E,M)}function kx(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Zc(g,b){var E=g.alternate;return E===null?(E=Yi(g.tag,b,g.key,g.mode),E.elementType=g.elementType,E.type=g.type,E.stateNode=g.stateNode,E.alternate=g,g.alternate=E):(E.pendingProps=b,E.type=g.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=g.flags&65011712,E.childLanes=g.childLanes,E.lanes=g.lanes,E.child=g.child,E.memoizedProps=g.memoizedProps,E.memoizedState=g.memoizedState,E.updateQueue=g.updateQueue,b=g.dependencies,E.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},E.sibling=g.sibling,E.index=g.index,E.ref=g.ref,E.refCleanup=g.refCleanup,E}function Cx(g,b){g.flags&=65011714;var E=g.alternate;return E===null?(g.childLanes=0,g.lanes=b,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,b=E.dependencies,g.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),g}function vi(g,b,E,M,F,U){var J=0;if(M=g,typeof g=="function")kx(g)&&(J=1);else if(typeof g=="string")J=ES(g,E,be.current)?26:g==="html"||g==="head"||g==="body"?27:5;else e:switch(g){case N:return g=Yi(31,E,b,F),g.elementType=N,g.lanes=U,g;case m:return Al(E.children,F,U,b);case v:J=8,F|=24;break;case y:return g=Yi(12,E,b,F|2),g.elementType=y,g.lanes=U,g;case k:return g=Yi(13,E,b,F),g.elementType=k,g.lanes=U,g;case A:return g=Yi(19,E,b,F),g.elementType=A,g.lanes=U,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case w:case T:J=10;break e;case S:J=9;break e;case C:J=11;break e;case D:J=14;break e;case P:J=16,M=null;break e}J=29,E=Error(r(130,g===null?"null":typeof g,"")),M=null}return b=Yi(J,E,b,F),b.elementType=g,b.type=M,b.lanes=U,b}function Al(g,b,E,M){return g=Yi(7,g,M,b),g.lanes=E,g}function Dx(g,b,E){return g=Yi(6,g,null,b),g.lanes=E,g}function Vy(g,b,E){return b=Yi(4,g.children!==null?g.children:[],g.key,b),b.lanes=E,b.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},b}var sp=[],kl=0,Ix=null,zy=0,Hs=[],Gs=0,kh=null,rd=1,Qc="";function Cl(g,b){sp[kl++]=zy,sp[kl++]=Ix,Ix=g,zy=b}function qT(g,b,E){Hs[Gs++]=rd,Hs[Gs++]=Qc,Hs[Gs++]=kh,kh=g;var M=rd;g=Qc;var F=32-Ne(M)-1;M&=~(1<<F),E+=1;var U=32-Ne(b)+F;if(30<U){var J=F-F%5;U=(M&(1<<J)-1).toString(32),M>>=J,F-=J,rd=1<<32-Ne(b)+F|E<<F|M,Qc=U+g}else rd=1<<U|E<<F|M,Qc=g}function Mx(g){g.return!==null&&(Cl(g,1),qT(g,1,0))}function Ch(g){for(;g===Ix;)Ix=sp[--kl],sp[kl]=null,zy=sp[--kl],sp[kl]=null;for(;g===kh;)kh=Hs[--Gs],Hs[Gs]=null,Qc=Hs[--Gs],Hs[Gs]=null,rd=Hs[--Gs],Hs[Gs]=null}var La=null,Dr=null,Tr=!1,lp=null,Jc=!1,eu=Error(r(519));function sc(g){var b=Error(r(418,""));throw id(zs(b,g)),eu}function Hy(g){var b=g.stateNode,E=g.type,M=g.memoizedProps;switch(b[ot]=g,b[St]=M,E){case"dialog":Vn("cancel",b),Vn("close",b);break;case"iframe":case"object":case"embed":Vn("load",b);break;case"video":case"audio":for(E=0;E<Km.length;E++)Vn(Km[E],b);break;case"source":Vn("error",b);break;case"img":case"image":case"link":Vn("error",b),Vn("load",b);break;case"details":Vn("toggle",b);break;case"input":Vn("invalid",b),yh(b,M.value,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name,!0),vh(b);break;case"select":Vn("invalid",b);break;case"textarea":Vn("invalid",b),Qf(b,M.value,M.defaultValue,M.children),vh(b)}E=M.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||b.textContent===""+E||M.suppressHydrationWarning===!0||eP(b.textContent,E)?(M.popover!=null&&(Vn("beforetoggle",b),Vn("toggle",b)),M.onScroll!=null&&Vn("scroll",b),M.onScrollEnd!=null&&Vn("scrollend",b),M.onClick!=null&&(b.onclick=Fp),b=!0):b=!1,b||sc(g)}function YT(g){for(La=g.return;La;)switch(La.tag){case 5:case 13:Jc=!1;return;case 27:case 3:Jc=!0;return;default:La=La.return}}function hm(g){if(g!==La)return!1;if(!Tr)return YT(g),Tr=!0,!1;var b=g.tag,E;if((E=b!==3&&b!==27)&&((E=b===5)&&(E=g.type,E=!(E!=="form"&&E!=="button")||Bp(g.type,g.memoizedProps)),E=!E),E&&Dr&&sc(g),YT(g),b===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));e:{for(g=g.nextSibling,b=0;g;){if(g.nodeType===8)if(E=g.data,E==="/$"){if(b===0){Dr=So(g.nextSibling);break e}b--}else E!=="$"&&E!=="$!"&&E!=="$?"||b++;g=g.nextSibling}Dr=null}}else b===27?(b=Dr,fu(g.type)?(g=rA,rA=null,Dr=g):Dr=b):Dr=La?So(g.stateNode.nextSibling):null;return!0}function fm(){Dr=La=null,Tr=!1}function Gy(){var g=lp;return g!==null&&(Uo===null?Uo=g:Uo.push.apply(Uo,g),lp=null),g}function id(g){lp===null?lp=[g]:lp.push(g)}var Px=se(null),tu=null,ad=null;function Dh(g,b,E){ee(Px,b._currentValue),b._currentValue=E}function od(g){g._currentValue=Px.current,ce(Px)}function pm(g,b,E){for(;g!==null;){var M=g.alternate;if((g.childLanes&b)!==b?(g.childLanes|=b,M!==null&&(M.childLanes|=b)):M!==null&&(M.childLanes&b)!==b&&(M.childLanes|=b),g===E)break;g=g.return}}function KT(g,b,E,M){var F=g.child;for(F!==null&&(F.return=g);F!==null;){var U=F.dependencies;if(U!==null){var J=F.child;U=U.firstContext;e:for(;U!==null;){var ae=U;U=F;for(var he=0;he<b.length;he++)if(ae.context===b[he]){U.lanes|=E,ae=U.alternate,ae!==null&&(ae.lanes|=E),pm(U.return,E,g),M||(J=null);break e}U=ae.next}}else if(F.tag===18){if(J=F.return,J===null)throw Error(r(341));J.lanes|=E,U=J.alternate,U!==null&&(U.lanes|=E),pm(J,E,g),J=null}else J=F.child;if(J!==null)J.return=F;else for(J=F;J!==null;){if(J===g){J=null;break}if(F=J.sibling,F!==null){F.return=J.return,J=F;break}J=J.return}F=J}}function Wy(g,b,E,M){g=null;for(var F=b,U=!1;F!==null;){if(!U){if((F.flags&524288)!==0)U=!0;else if((F.flags&262144)!==0)break}if(F.tag===10){var J=F.alternate;if(J===null)throw Error(r(387));if(J=J.memoizedProps,J!==null){var ae=F.type;Ni(F.pendingProps.value,J.value)||(g!==null?g.push(ae):g=[ae])}}else if(F===dt.current){if(J=F.alternate,J===null)throw Error(r(387));J.memoizedState.memoizedState!==F.memoizedState.memoizedState&&(g!==null?g.push(V0):g=[V0])}F=F.return}g!==null&&KT(b,g,E,M),b.flags|=262144}function gm(g){for(g=g.firstContext;g!==null;){if(!Ni(g.context._currentValue,g.memoizedValue))return!0;g=g.next}return!1}function lc(g){tu=g,ad=null,g=g.dependencies,g!==null&&(g.firstContext=null)}function ja(g){return TM(tu,g)}function qy(g,b){return tu===null&&lc(g),TM(g,b)}function TM(g,b){var E=b._currentValue;if(b={context:b,memoizedValue:E,next:null},ad===null){if(g===null)throw Error(r(308));ad=b,g.dependencies={lanes:0,firstContext:b},g.flags|=524288}else ad=ad.next=b;return E}var XT=typeof AbortController<"u"?AbortController:function(){var g=[],b=this.signal={aborted:!1,addEventListener:function(E,M){g.push(M)}};this.abort=function(){b.aborted=!0,g.forEach(function(E){return E()})}},ZT=n.unstable_scheduleCallback,QT=n.unstable_NormalPriority,Ki={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new XT,data:new Map,refCount:0}}function vm(g){g.refCount--,g.refCount===0&&ZT(QT,function(){g.controller.abort()})}var ym=null,Nx=0,cp=0,Ih=null;function Yy(g,b){if(ym===null){var E=ym=[];Nx=0,cp=I0(),Ih={status:"pending",value:void 0,then:function(M){E.push(M)}}}return Nx++,b.then(JT,JT),b}function JT(){if(--Nx===0&&ym!==null){Ih!==null&&(Ih.status="fulfilled");var g=ym;ym=null,cp=0,Ih=null;for(var b=0;b<g.length;b++)(0,g[b])()}}function EM(g,b){var E=[],M={status:"pending",value:null,reason:null,then:function(F){E.push(F)}};return g.then(function(){M.status="fulfilled",M.value=b;for(var F=0;F<E.length;F++)(0,E[F])(b)},function(F){for(M.status="rejected",M.reason=F,F=0;F<E.length;F++)(0,E[F])(void 0)}),M}var Ky=K.S;K.S=function(g,b){typeof b=="object"&&b!==null&&typeof b.then=="function"&&Yy(g,b),Ky!==null&&Ky(g,b)};var sd=se(null);function up(){var g=sd.current;return g!==null?g:Qr.pooledCache}function nu(g,b){b===null?ee(sd,sd.current):ee(sd,b.pool)}function AM(){var g=up();return g===null?null:{parent:Ki._currentValue,pool:g}}var bm=Error(r(460)),kM=Error(r(474)),Xy=Error(r(542)),eE={then:function(){}};function CM(g){return g=g.status,g==="fulfilled"||g==="rejected"}function bo(){}function Rx(g,b,E){switch(E=g[E],E===void 0?g.push(b):E!==b&&(b.then(bo,bo),b=E),b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,DM(g),g;default:if(typeof b.status=="string")b.then(bo,bo);else{if(g=Qr,g!==null&&100<g.shellSuspendCounter)throw Error(r(482));g=b,g.status="pending",g.then(function(M){if(b.status==="pending"){var F=b;F.status="fulfilled",F.value=M}},function(M){if(b.status==="pending"){var F=b;F.status="rejected",F.reason=M}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw g=b.reason,DM(g),g}throw dp=b,bm}}var dp=null;function Zy(){if(dp===null)throw Error(r(459));var g=dp;return dp=null,g}function DM(g){if(g===bm||g===Xy)throw Error(r(483))}var Lo=!1;function Ox(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qy(g,b){g=g.updateQueue,b.updateQueue===g&&(b.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,callbacks:null})}function cc(g){return{lane:g,tag:0,payload:null,callback:null,next:null}}function ld(g,b,E){var M=g.updateQueue;if(M===null)return null;if(M=M.shared,(fr&2)!==0){var F=M.pending;return F===null?b.next=b:(b.next=F.next,F.next=b),M.pending=b,b=Ri(g),WT(g,null,E),b}return Ax(g,M,b,E),Ri(g)}function ru(g,b,E){if(b=b.updateQueue,b!==null&&(b=b.shared,(E&4194048)!==0)){var M=b.lanes;M&=g.pendingLanes,E|=M,b.lanes=E,oe(g,E)}}function Jy(g,b){var E=g.updateQueue,M=g.alternate;if(M!==null&&(M=M.updateQueue,E===M)){var F=null,U=null;if(E=E.firstBaseUpdate,E!==null){do{var J={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};U===null?F=U=J:U=U.next=J,E=E.next}while(E!==null);U===null?F=U=b:U=U.next=b}else F=U=b;E={baseState:M.baseState,firstBaseUpdate:F,lastBaseUpdate:U,shared:M.shared,callbacks:M.callbacks},g.updateQueue=E;return}g=E.lastBaseUpdate,g===null?E.firstBaseUpdate=b:g.next=b,E.lastBaseUpdate=b}var Lx=!1;function wm(){if(Lx){var g=Ih;if(g!==null)throw g}}function xm(g,b,E,M){Lx=!1;var F=g.updateQueue;Lo=!1;var U=F.firstBaseUpdate,J=F.lastBaseUpdate,ae=F.shared.pending;if(ae!==null){F.shared.pending=null;var he=ae,Ce=he.next;he.next=null,J===null?U=Ce:J.next=Ce,J=he;var He=g.alternate;He!==null&&(He=He.updateQueue,ae=He.lastBaseUpdate,ae!==J&&(ae===null?He.firstBaseUpdate=Ce:ae.next=Ce,He.lastBaseUpdate=he))}if(U!==null){var Xe=F.baseState;J=0,He=Ce=he=null,ae=U;do{var Ie=ae.lane&-536870913,Pe=Ie!==ae.lane;if(Pe?(dr&Ie)===Ie:(M&Ie)===Ie){Ie!==0&&Ie===cp&&(Lx=!0),He!==null&&(He=He.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var An=g,gn=ae;Ie=b;var di=E;switch(gn.tag){case 1:if(An=gn.payload,typeof An=="function"){Xe=An.call(di,Xe,Ie);break e}Xe=An;break e;case 3:An.flags=An.flags&-65537|128;case 0:if(An=gn.payload,Ie=typeof An=="function"?An.call(di,Xe,Ie):An,Ie==null)break e;Xe=u({},Xe,Ie);break e;case 2:Lo=!0}}Ie=ae.callback,Ie!==null&&(g.flags|=64,Pe&&(g.flags|=8192),Pe=F.callbacks,Pe===null?F.callbacks=[Ie]:Pe.push(Ie))}else Pe={lane:Ie,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},He===null?(Ce=He=Pe,he=Xe):He=He.next=Pe,J|=Ie;if(ae=ae.next,ae===null){if(ae=F.shared.pending,ae===null)break;Pe=ae,ae=Pe.next,Pe.next=null,F.lastBaseUpdate=Pe,F.shared.pending=null}}while(!0);He===null&&(he=Xe),F.baseState=he,F.firstBaseUpdate=Ce,F.lastBaseUpdate=He,U===null&&(F.shared.lanes=0),yd|=J,g.lanes=J,g.memoizedState=Xe}}function tE(g,b){if(typeof g!="function")throw Error(r(191,g));g.call(b)}function IM(g,b){var E=g.callbacks;if(E!==null)for(g.callbacks=null,g=0;g<E.length;g++)tE(E[g],b)}var cd=se(null),ud=se(0);function nE(g,b){g=uu,ee(ud,g),ee(cd,b),uu=g|b.baseLanes}function jx(){ee(ud,uu),ee(cd,cd.current)}function Mh(){uu=ud.current,ce(cd),ce(ud)}var uc=0,Gn=null,Fr=null,Xi=null,dd=!1,hp=!1,iu=!1,fp=0,Ph=0,hd=null,Fx=0;function Ti(){throw Error(r(321))}function Sm(g,b){if(b===null)return!1;for(var E=0;E<b.length&&E<g.length;E++)if(!Ni(g[E],b[E]))return!1;return!0}function $x(g,b,E,M,F,U){return uc=U,Gn=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,K.H=g===null||g.memoizedState===null?LM:jM,iu=!1,U=E(M,F),iu=!1,hp&&(U=iE(b,E,M,F)),rE(g),U}function rE(g){K.H=Xx;var b=Fr!==null&&Fr.next!==null;if(uc=0,Xi=Fr=Gn=null,dd=!1,Ph=0,hd=null,b)throw Error(r(300));g===null||Hi||(g=g.dependencies,g!==null&&gm(g)&&(Hi=!0))}function iE(g,b,E,M){Gn=g;var F=0;do{if(hp&&(hd=null),Ph=0,hp=!1,25<=F)throw Error(r(301));if(F+=1,Xi=Fr=null,g.updateQueue!=null){var U=g.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}K.H=DF,U=b(E,M)}while(hp);return U}function MM(){var g=K.H,b=g.useState()[0];return b=typeof b.then=="function"?Nh(b):b,g=g.useState()[0],(Fr!==null?Fr.memoizedState:null)!==g&&(Gn.flags|=1024),b}function aE(){var g=fp!==0;return fp=0,g}function e0(g,b,E){b.updateQueue=g.updateQueue,b.flags&=-2053,g.lanes&=~E}function Bx(g){if(dd){for(g=g.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}dd=!1}uc=0,Xi=Fr=Gn=null,hp=!1,Ph=fp=0,hd=null}function us(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?Gn.memoizedState=Xi=g:Xi=Xi.next=g,Xi}function Zi(){if(Fr===null){var g=Gn.alternate;g=g!==null?g.memoizedState:null}else g=Fr.next;var b=Xi===null?Gn.memoizedState:Xi.next;if(b!==null)Xi=b,Fr=g;else{if(g===null)throw Gn.alternate===null?Error(r(467)):Error(r(310));Fr=g,g={memoizedState:Fr.memoizedState,baseState:Fr.baseState,baseQueue:Fr.baseQueue,queue:Fr.queue,next:null},Xi===null?Gn.memoizedState=Xi=g:Xi=Xi.next=g}return Xi}function pp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nh(g){var b=Ph;return Ph+=1,hd===null&&(hd=[]),g=Rx(hd,g,b),b=Gn,(Xi===null?b.memoizedState:Xi.next)===null&&(b=b.alternate,K.H=b===null||b.memoizedState===null?LM:jM),g}function gp(g){if(g!==null&&typeof g=="object"){if(typeof g.then=="function")return Nh(g);if(g.$$typeof===T)return ja(g)}throw Error(r(438,String(g)))}function _m(g){var b=null,E=Gn.updateQueue;if(E!==null&&(b=E.memoCache),b==null){var M=Gn.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(b={data:M.data.map(function(F){return F.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),E===null&&(E=pp(),Gn.updateQueue=E),E.memoCache=b,E=b.data[b.index],E===void 0)for(E=b.data[b.index]=Array(g),M=0;M<g;M++)E[M]=R;return b.index++,E}function dc(g,b){return typeof b=="function"?b(g):b}function Tm(g){var b=Zi();return Rh(b,Fr,g)}function Rh(g,b,E){var M=g.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=E;var F=g.baseQueue,U=M.pending;if(U!==null){if(F!==null){var J=F.next;F.next=U.next,U.next=J}b.baseQueue=F=U,M.pending=null}if(U=g.baseState,F===null)g.memoizedState=U;else{b=F.next;var ae=J=null,he=null,Ce=b,He=!1;do{var Xe=Ce.lane&-536870913;if(Xe!==Ce.lane?(dr&Xe)===Xe:(uc&Xe)===Xe){var Ie=Ce.revertLane;if(Ie===0)he!==null&&(he=he.next={lane:0,revertLane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),Xe===cp&&(He=!0);else if((uc&Ie)===Ie){Ce=Ce.next,Ie===cp&&(He=!0);continue}else Xe={lane:0,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},he===null?(ae=he=Xe,J=U):he=he.next=Xe,Gn.lanes|=Ie,yd|=Ie;Xe=Ce.action,iu&&E(U,Xe),U=Ce.hasEagerState?Ce.eagerState:E(U,Xe)}else Ie={lane:Xe,revertLane:Ce.revertLane,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null},he===null?(ae=he=Ie,J=U):he=he.next=Ie,Gn.lanes|=Xe,yd|=Xe;Ce=Ce.next}while(Ce!==null&&Ce!==b);if(he===null?J=U:he.next=ae,!Ni(U,g.memoizedState)&&(Hi=!0,He&&(E=Ih,E!==null)))throw E;g.memoizedState=U,g.baseState=J,g.baseQueue=he,M.lastRenderedState=U}return F===null&&(M.lanes=0),[g.memoizedState,M.dispatch]}function Ux(g){var b=Zi(),E=b.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=g;var M=E.dispatch,F=E.pending,U=b.memoizedState;if(F!==null){E.pending=null;var J=F=F.next;do U=g(U,J.action),J=J.next;while(J!==F);Ni(U,b.memoizedState)||(Hi=!0),b.memoizedState=U,b.baseQueue===null&&(b.baseState=U),E.lastRenderedState=U}return[U,M]}function oE(g,b,E){var M=Gn,F=Zi(),U=Tr;if(U){if(E===void 0)throw Error(r(407));E=E()}else E=b();var J=!Ni((Fr||F).memoizedState,E);J&&(F.memoizedState=E,Hi=!0),F=F.queue;var ae=Oh.bind(null,M,F,g);if(Cm(2048,8,ae,[g]),F.getSnapshot!==b||J||Xi!==null&&Xi.memoizedState.tag&1){if(M.flags|=2048,si(9,Am(),zx.bind(null,M,F,E,b),null),Qr===null)throw Error(r(349));U||(uc&124)!==0||Vx(M,b,E)}return E}function Vx(g,b,E){g.flags|=16384,g={getSnapshot:b,value:E},b=Gn.updateQueue,b===null?(b=pp(),Gn.updateQueue=b,b.stores=[g]):(E=b.stores,E===null?b.stores=[g]:E.push(g))}function zx(g,b,E,M){b.value=E,b.getSnapshot=M,Em(b)&&mp(g)}function Oh(g,b,E){return E(function(){Em(b)&&mp(g)})}function Em(g){var b=g.getSnapshot;g=g.value;try{var E=b();return!Ni(g,E)}catch{return!0}}function mp(g){var b=op(g,2);b!==null&&ms(b,g,2)}function vp(g){var b=us();if(typeof g=="function"){var E=g;if(g=E(),iu){et(!0);try{E()}finally{et(!1)}}}return b.memoizedState=b.baseState=g,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:g},b}function yp(g,b,E,M){return g.baseState=E,Rh(g,Fr,typeof M=="function"?M:dc)}function ds(g,b,E,M,F){if(i0(g))throw Error(r(485));if(g=b.action,g!==null){var U={payload:F,action:g,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(J){U.listeners.push(J)}};K.T!==null?E(!0):U.isTransition=!1,M(U),E=b.pending,E===null?(U.next=b.pending=U,bp(b,U)):(U.next=E.next,b.pending=E.next=U)}}function bp(g,b){var E=b.action,M=b.payload,F=g.state;if(b.isTransition){var U=K.T,J={};K.T=J;try{var ae=E(F,M),he=K.S;he!==null&&he(J,ae),sE(g,b,ae)}catch(Ce){Dl(g,b,Ce)}finally{K.T=U}}else try{U=E(F,M),sE(g,b,U)}catch(Ce){Dl(g,b,Ce)}}function sE(g,b,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(M){hc(g,b,M)},function(M){return Dl(g,b,M)}):hc(g,b,E)}function hc(g,b,E){b.status="fulfilled",b.value=E,lE(b),g.state=E,b=g.pending,b!==null&&(E=b.next,E===b?g.pending=null:(E=E.next,b.next=E,bp(g,E)))}function Dl(g,b,E){var M=g.pending;if(g.pending=null,M!==null){M=M.next;do b.status="rejected",b.reason=E,lE(b),b=b.next;while(b!==M)}g.action=null}function lE(g){g=g.listeners;for(var b=0;b<g.length;b++)(0,g[b])()}function Hx(g,b){return b}function PM(g,b){if(Tr){var E=Qr.formState;if(E!==null){e:{var M=Gn;if(Tr){if(Dr){t:{for(var F=Dr,U=Jc;F.nodeType!==8;){if(!U){F=null;break t}if(F=So(F.nextSibling),F===null){F=null;break t}}U=F.data,F=U==="F!"||U==="F"?F:null}if(F){Dr=So(F.nextSibling),M=F.data==="F!";break e}}sc(M)}M=!1}M&&(b=E[0])}}return E=us(),E.memoizedState=E.baseState=b,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hx,lastRenderedState:b},E.queue=M,E=Im.bind(null,Gn,M),M.dispatch=E,M=vp(!1),U=Kx.bind(null,Gn,!1,M.queue),M=us(),F={state:b,dispatch:null,action:g,pending:null},M.queue=F,E=ds.bind(null,Gn,F,U,E),F.dispatch=E,M.memoizedState=g,[b,E,!1]}function NM(g){var b=Zi();return RM(b,Fr,g)}function RM(g,b,E){if(b=Rh(g,b,Hx)[0],g=Tm(dc)[0],typeof b=="object"&&b!==null&&typeof b.then=="function")try{var M=Nh(b)}catch(J){throw J===bm?Xy:J}else M=b;b=Zi();var F=b.queue,U=F.dispatch;return E!==b.memoizedState&&(Gn.flags|=2048,si(9,Am(),CF.bind(null,F,E),null)),[M,U,g]}function CF(g,b){g.action=b}function Gx(g){var b=Zi(),E=Fr;if(E!==null)return RM(b,E,g);Zi(),b=b.memoizedState,E=Zi();var M=E.queue.dispatch;return E.memoizedState=g,[b,M,!1]}function si(g,b,E,M){return g={tag:g,create:E,deps:M,inst:b,next:null},b=Gn.updateQueue,b===null&&(b=pp(),Gn.updateQueue=b),E=b.lastEffect,E===null?b.lastEffect=g.next=g:(M=E.next,E.next=g,g.next=M,b.lastEffect=g),g}function Am(){return{destroy:void 0,resource:void 0}}function Wx(){return Zi().memoizedState}function km(g,b,E,M){var F=us();M=M===void 0?null:M,Gn.flags|=g,F.memoizedState=si(1|b,Am(),E,M)}function Cm(g,b,E,M){var F=Zi();M=M===void 0?null:M;var U=F.memoizedState.inst;Fr!==null&&M!==null&&Sm(M,Fr.memoizedState.deps)?F.memoizedState=si(b,U,E,M):(Gn.flags|=g,F.memoizedState=si(1|b,U,E,M))}function cE(g,b){km(8390656,8,g,b)}function uE(g,b){Cm(2048,8,g,b)}function dE(g,b){return Cm(4,2,g,b)}function t0(g,b){return Cm(4,4,g,b)}function Lh(g,b){if(typeof b=="function"){g=g();var E=b(g);return function(){typeof E=="function"?E():b(null)}}if(b!=null)return g=g(),b.current=g,function(){b.current=null}}function hE(g,b,E){E=E!=null?E.concat([g]):null,Cm(4,4,Lh.bind(null,b,g),E)}function qx(){}function fE(g,b){var E=Zi();b=b===void 0?null:b;var M=E.memoizedState;return b!==null&&Sm(b,M[1])?M[0]:(E.memoizedState=[g,b],g)}function wo(g,b){var E=Zi();b=b===void 0?null:b;var M=E.memoizedState;if(b!==null&&Sm(b,M[1]))return M[0];if(M=g(),iu){et(!0);try{g()}finally{et(!1)}}return E.memoizedState=[M,b],M}function wp(g,b,E){return E===void 0||(uc&1073741824)!==0?g.memoizedState=b:(g.memoizedState=E,g=$E(),Gn.lanes|=g,yd|=g,E)}function pE(g,b,E,M){return Ni(E,b)?E:cd.current!==null?(g=wp(g,E,M),Ni(g,b)||(Hi=!0),g):(uc&42)===0?(Hi=!0,g.memoizedState=E):(g=$E(),Gn.lanes|=g,yd|=g,b)}function gE(g,b,E,M,F){var U=X.p;X.p=U!==0&&8>U?U:8;var J=K.T,ae={};K.T=ae,Kx(g,!1,b,E);try{var he=F(),Ce=K.S;if(Ce!==null&&Ce(ae,he),he!==null&&typeof he=="object"&&typeof he.then=="function"){var He=EM(he,M);Mm(g,b,He,gs(g))}else Mm(g,b,M,gs(g))}catch(Xe){Mm(g,b,{then:function(){},status:"rejected",reason:Xe},gs())}finally{X.p=U,K.T=J}}function mE(){}function Yx(g,b,E,M){if(g.tag!==5)throw Error(r(476));var F=vE(g).queue;gE(g,F,b,te,E===null?mE:function(){return xp(g),E(M)})}function vE(g){var b=g.memoizedState;if(b!==null)return b;b={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:te},next:null};var E={};return b.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:E},next:null},g.memoizedState=b,g=g.alternate,g!==null&&(g.memoizedState=b),b}function xp(g){var b=vE(g).next.queue;Mm(g,b,{},gs())}function yE(){return ja(V0)}function n0(){return Zi().memoizedState}function r0(){return Zi().memoizedState}function Ws(g){for(var b=g.return;b!==null;){switch(b.tag){case 24:case 3:var E=gs();g=cc(E);var M=ld(b,g,E);M!==null&&(ms(M,b,E),ru(M,b,E)),b={cache:mm()},g.payload=b;return}b=b.return}}function Dm(g,b,E){var M=gs();E={lane:M,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},i0(g)?jh(b,E):(E=By(g,b,E,M),E!==null&&(ms(E,g,M),OM(E,b,M)))}function Im(g,b,E){var M=gs();Mm(g,b,E,M)}function Mm(g,b,E,M){var F={lane:M,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(i0(g))jh(b,F);else{var U=g.alternate;if(g.lanes===0&&(U===null||U.lanes===0)&&(U=b.lastRenderedReducer,U!==null))try{var J=b.lastRenderedState,ae=U(J,E);if(F.hasEagerState=!0,F.eagerState=ae,Ni(ae,J))return Ax(g,b,F,0),Qr===null&&ap(),!1}catch{}finally{}if(E=By(g,b,F,M),E!==null)return ms(E,g,M),OM(E,b,M),!0}return!1}function Kx(g,b,E,M){if(M={lane:2,revertLane:I0(),action:M,hasEagerState:!1,eagerState:null,next:null},i0(g)){if(b)throw Error(r(479))}else b=By(g,E,M,2),b!==null&&ms(b,g,2)}function i0(g){var b=g.alternate;return g===Gn||b!==null&&b===Gn}function jh(g,b){hp=dd=!0;var E=g.pending;E===null?b.next=b:(b.next=E.next,E.next=b),g.pending=b}function OM(g,b,E){if((E&4194048)!==0){var M=b.lanes;M&=g.pendingLanes,E|=M,b.lanes=E,oe(g,E)}}var Xx={readContext:ja,use:gp,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useLayoutEffect:Ti,useInsertionEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useSyncExternalStore:Ti,useId:Ti,useHostTransitionStatus:Ti,useFormState:Ti,useActionState:Ti,useOptimistic:Ti,useMemoCache:Ti,useCacheRefresh:Ti},LM={readContext:ja,use:gp,useCallback:function(g,b){return us().memoizedState=[g,b===void 0?null:b],g},useContext:ja,useEffect:cE,useImperativeHandle:function(g,b,E){E=E!=null?E.concat([g]):null,km(4194308,4,Lh.bind(null,b,g),E)},useLayoutEffect:function(g,b){return km(4194308,4,g,b)},useInsertionEffect:function(g,b){km(4,2,g,b)},useMemo:function(g,b){var E=us();b=b===void 0?null:b;var M=g();if(iu){et(!0);try{g()}finally{et(!1)}}return E.memoizedState=[M,b],M},useReducer:function(g,b,E){var M=us();if(E!==void 0){var F=E(b);if(iu){et(!0);try{E(b)}finally{et(!1)}}}else F=b;return M.memoizedState=M.baseState=F,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:F},M.queue=g,g=g.dispatch=Dm.bind(null,Gn,g),[M.memoizedState,g]},useRef:function(g){var b=us();return g={current:g},b.memoizedState=g},useState:function(g){g=vp(g);var b=g.queue,E=Im.bind(null,Gn,b);return b.dispatch=E,[g.memoizedState,E]},useDebugValue:qx,useDeferredValue:function(g,b){var E=us();return wp(E,g,b)},useTransition:function(){var g=vp(!1);return g=gE.bind(null,Gn,g.queue,!0,!1),us().memoizedState=g,[!1,g]},useSyncExternalStore:function(g,b,E){var M=Gn,F=us();if(Tr){if(E===void 0)throw Error(r(407));E=E()}else{if(E=b(),Qr===null)throw Error(r(349));(dr&124)!==0||Vx(M,b,E)}F.memoizedState=E;var U={value:E,getSnapshot:b};return F.queue=U,cE(Oh.bind(null,M,U,g),[g]),M.flags|=2048,si(9,Am(),zx.bind(null,M,U,E,b),null),E},useId:function(){var g=us(),b=Qr.identifierPrefix;if(Tr){var E=Qc,M=rd;E=(M&~(1<<32-Ne(M)-1)).toString(32)+E,b="«"+b+"R"+E,E=fp++,0<E&&(b+="H"+E.toString(32)),b+="»"}else E=Fx++,b="«"+b+"r"+E.toString(32)+"»";return g.memoizedState=b},useHostTransitionStatus:yE,useFormState:PM,useActionState:PM,useOptimistic:function(g){var b=us();b.memoizedState=b.baseState=g;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=E,b=Kx.bind(null,Gn,!0,E),E.dispatch=b,[g,b]},useMemoCache:_m,useCacheRefresh:function(){return us().memoizedState=Ws.bind(null,Gn)}},jM={readContext:ja,use:gp,useCallback:fE,useContext:ja,useEffect:uE,useImperativeHandle:hE,useInsertionEffect:dE,useLayoutEffect:t0,useMemo:wo,useReducer:Tm,useRef:Wx,useState:function(){return Tm(dc)},useDebugValue:qx,useDeferredValue:function(g,b){var E=Zi();return pE(E,Fr.memoizedState,g,b)},useTransition:function(){var g=Tm(dc)[0],b=Zi().memoizedState;return[typeof g=="boolean"?g:Nh(g),b]},useSyncExternalStore:oE,useId:n0,useHostTransitionStatus:yE,useFormState:NM,useActionState:NM,useOptimistic:function(g,b){var E=Zi();return yp(E,Fr,g,b)},useMemoCache:_m,useCacheRefresh:r0},DF={readContext:ja,use:gp,useCallback:fE,useContext:ja,useEffect:uE,useImperativeHandle:hE,useInsertionEffect:dE,useLayoutEffect:t0,useMemo:wo,useReducer:Ux,useRef:Wx,useState:function(){return Ux(dc)},useDebugValue:qx,useDeferredValue:function(g,b){var E=Zi();return Fr===null?wp(E,g,b):pE(E,Fr.memoizedState,g,b)},useTransition:function(){var g=Ux(dc)[0],b=Zi().memoizedState;return[typeof g=="boolean"?g:Nh(g),b]},useSyncExternalStore:oE,useId:n0,useHostTransitionStatus:yE,useFormState:Gx,useActionState:Gx,useOptimistic:function(g,b){var E=Zi();return Fr!==null?yp(E,Fr,g,b):(E.baseState=g,[g,E.queue.dispatch])},useMemoCache:_m,useCacheRefresh:r0},Sp=null,Pm=0;function Zx(g){var b=Pm;return Pm+=1,Sp===null&&(Sp=[]),Rx(Sp,g,b)}function a0(g,b){b=b.props.ref,g.ref=b!==void 0?b:null}function Nm(g,b){throw b.$$typeof===d?Error(r(525)):(g=Object.prototype.toString.call(b),Error(r(31,g==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":g)))}function bE(g){var b=g._init;return b(g._payload)}function zi(g){function b(Se,ye){if(g){var Ae=Se.deletions;Ae===null?(Se.deletions=[ye],Se.flags|=16):Ae.push(ye)}}function E(Se,ye){if(!g)return null;for(;ye!==null;)b(Se,ye),ye=ye.sibling;return null}function M(Se){for(var ye=new Map;Se!==null;)Se.key!==null?ye.set(Se.key,Se):ye.set(Se.index,Se),Se=Se.sibling;return ye}function F(Se,ye){return Se=Zc(Se,ye),Se.index=0,Se.sibling=null,Se}function U(Se,ye,Ae){return Se.index=Ae,g?(Ae=Se.alternate,Ae!==null?(Ae=Ae.index,Ae<ye?(Se.flags|=67108866,ye):Ae):(Se.flags|=67108866,ye)):(Se.flags|=1048576,ye)}function J(Se){return g&&Se.alternate===null&&(Se.flags|=67108866),Se}function ae(Se,ye,Ae,Ge){return ye===null||ye.tag!==6?(ye=Dx(Ae,Se.mode,Ge),ye.return=Se,ye):(ye=F(ye,Ae),ye.return=Se,ye)}function he(Se,ye,Ae,Ge){var Lt=Ae.type;return Lt===m?He(Se,ye,Ae.props.children,Ge,Ae.key):ye!==null&&(ye.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&bE(Lt)===ye.type)?(ye=F(ye,Ae.props),a0(ye,Ae),ye.return=Se,ye):(ye=vi(Ae.type,Ae.key,Ae.props,null,Se.mode,Ge),a0(ye,Ae),ye.return=Se,ye)}function Ce(Se,ye,Ae,Ge){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ae.containerInfo||ye.stateNode.implementation!==Ae.implementation?(ye=Vy(Ae,Se.mode,Ge),ye.return=Se,ye):(ye=F(ye,Ae.children||[]),ye.return=Se,ye)}function He(Se,ye,Ae,Ge,Lt){return ye===null||ye.tag!==7?(ye=Al(Ae,Se.mode,Ge,Lt),ye.return=Se,ye):(ye=F(ye,Ae),ye.return=Se,ye)}function Xe(Se,ye,Ae){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Dx(""+ye,Se.mode,Ae),ye.return=Se,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case h:return Ae=vi(ye.type,ye.key,ye.props,null,Se.mode,Ae),a0(Ae,ye),Ae.return=Se,Ae;case f:return ye=Vy(ye,Se.mode,Ae),ye.return=Se,ye;case P:var Ge=ye._init;return ye=Ge(ye._payload),Xe(Se,ye,Ae)}if(W(ye)||B(ye))return ye=Al(ye,Se.mode,Ae,null),ye.return=Se,ye;if(typeof ye.then=="function")return Xe(Se,Zx(ye),Ae);if(ye.$$typeof===T)return Xe(Se,qy(Se,ye),Ae);Nm(Se,ye)}return null}function Ie(Se,ye,Ae,Ge){var Lt=ye!==null?ye.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Lt!==null?null:ae(Se,ye,""+Ae,Ge);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case h:return Ae.key===Lt?he(Se,ye,Ae,Ge):null;case f:return Ae.key===Lt?Ce(Se,ye,Ae,Ge):null;case P:return Lt=Ae._init,Ae=Lt(Ae._payload),Ie(Se,ye,Ae,Ge)}if(W(Ae)||B(Ae))return Lt!==null?null:He(Se,ye,Ae,Ge,null);if(typeof Ae.then=="function")return Ie(Se,ye,Zx(Ae),Ge);if(Ae.$$typeof===T)return Ie(Se,ye,qy(Se,Ae),Ge);Nm(Se,Ae)}return null}function Pe(Se,ye,Ae,Ge,Lt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Se=Se.get(Ae)||null,ae(ye,Se,""+Ge,Lt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case h:return Se=Se.get(Ge.key===null?Ae:Ge.key)||null,he(ye,Se,Ge,Lt);case f:return Se=Se.get(Ge.key===null?Ae:Ge.key)||null,Ce(ye,Se,Ge,Lt);case P:var lr=Ge._init;return Ge=lr(Ge._payload),Pe(Se,ye,Ae,Ge,Lt)}if(W(Ge)||B(Ge))return Se=Se.get(Ae)||null,He(ye,Se,Ge,Lt,null);if(typeof Ge.then=="function")return Pe(Se,ye,Ae,Zx(Ge),Lt);if(Ge.$$typeof===T)return Pe(Se,ye,Ae,qy(ye,Ge),Lt);Nm(ye,Ge)}return null}function An(Se,ye,Ae,Ge){for(var Lt=null,lr=null,Xt=ye,wn=ye=0,_o=null;Xt!==null&&wn<Ae.length;wn++){Xt.index>wn?(_o=Xt,Xt=null):_o=Xt.sibling;var Mr=Ie(Se,Xt,Ae[wn],Ge);if(Mr===null){Xt===null&&(Xt=_o);break}g&&Xt&&Mr.alternate===null&&b(Se,Xt),ye=U(Mr,ye,wn),lr===null?Lt=Mr:lr.sibling=Mr,lr=Mr,Xt=_o}if(wn===Ae.length)return E(Se,Xt),Tr&&Cl(Se,wn),Lt;if(Xt===null){for(;wn<Ae.length;wn++)Xt=Xe(Se,Ae[wn],Ge),Xt!==null&&(ye=U(Xt,ye,wn),lr===null?Lt=Xt:lr.sibling=Xt,lr=Xt);return Tr&&Cl(Se,wn),Lt}for(Xt=M(Xt);wn<Ae.length;wn++)_o=Pe(Xt,Se,wn,Ae[wn],Ge),_o!==null&&(g&&_o.alternate!==null&&Xt.delete(_o.key===null?wn:_o.key),ye=U(_o,ye,wn),lr===null?Lt=_o:lr.sibling=_o,lr=_o);return g&&Xt.forEach(function(cv){return b(Se,cv)}),Tr&&Cl(Se,wn),Lt}function gn(Se,ye,Ae,Ge){if(Ae==null)throw Error(r(151));for(var Lt=null,lr=null,Xt=ye,wn=ye=0,_o=null,Mr=Ae.next();Xt!==null&&!Mr.done;wn++,Mr=Ae.next()){Xt.index>wn?(_o=Xt,Xt=null):_o=Xt.sibling;var cv=Ie(Se,Xt,Mr.value,Ge);if(cv===null){Xt===null&&(Xt=_o);break}g&&Xt&&cv.alternate===null&&b(Se,Xt),ye=U(cv,ye,wn),lr===null?Lt=cv:lr.sibling=cv,lr=cv,Xt=_o}if(Mr.done)return E(Se,Xt),Tr&&Cl(Se,wn),Lt;if(Xt===null){for(;!Mr.done;wn++,Mr=Ae.next())Mr=Xe(Se,Mr.value,Ge),Mr!==null&&(ye=U(Mr,ye,wn),lr===null?Lt=Mr:lr.sibling=Mr,lr=Mr);return Tr&&Cl(Se,wn),Lt}for(Xt=M(Xt);!Mr.done;wn++,Mr=Ae.next())Mr=Pe(Xt,Se,wn,Mr.value,Ge),Mr!==null&&(g&&Mr.alternate!==null&&Xt.delete(Mr.key===null?wn:Mr.key),ye=U(Mr,ye,wn),lr===null?Lt=Mr:lr.sibling=Mr,lr=Mr);return g&&Xt.forEach(function(xDe){return b(Se,xDe)}),Tr&&Cl(Se,wn),Lt}function di(Se,ye,Ae,Ge){if(typeof Ae=="object"&&Ae!==null&&Ae.type===m&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case h:e:{for(var Lt=Ae.key;ye!==null;){if(ye.key===Lt){if(Lt=Ae.type,Lt===m){if(ye.tag===7){E(Se,ye.sibling),Ge=F(ye,Ae.props.children),Ge.return=Se,Se=Ge;break e}}else if(ye.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&bE(Lt)===ye.type){E(Se,ye.sibling),Ge=F(ye,Ae.props),a0(Ge,Ae),Ge.return=Se,Se=Ge;break e}E(Se,ye);break}else b(Se,ye);ye=ye.sibling}Ae.type===m?(Ge=Al(Ae.props.children,Se.mode,Ge,Ae.key),Ge.return=Se,Se=Ge):(Ge=vi(Ae.type,Ae.key,Ae.props,null,Se.mode,Ge),a0(Ge,Ae),Ge.return=Se,Se=Ge)}return J(Se);case f:e:{for(Lt=Ae.key;ye!==null;){if(ye.key===Lt)if(ye.tag===4&&ye.stateNode.containerInfo===Ae.containerInfo&&ye.stateNode.implementation===Ae.implementation){E(Se,ye.sibling),Ge=F(ye,Ae.children||[]),Ge.return=Se,Se=Ge;break e}else{E(Se,ye);break}else b(Se,ye);ye=ye.sibling}Ge=Vy(Ae,Se.mode,Ge),Ge.return=Se,Se=Ge}return J(Se);case P:return Lt=Ae._init,Ae=Lt(Ae._payload),di(Se,ye,Ae,Ge)}if(W(Ae))return An(Se,ye,Ae,Ge);if(B(Ae)){if(Lt=B(Ae),typeof Lt!="function")throw Error(r(150));return Ae=Lt.call(Ae),gn(Se,ye,Ae,Ge)}if(typeof Ae.then=="function")return di(Se,ye,Zx(Ae),Ge);if(Ae.$$typeof===T)return di(Se,ye,qy(Se,Ae),Ge);Nm(Se,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint"?(Ae=""+Ae,ye!==null&&ye.tag===6?(E(Se,ye.sibling),Ge=F(ye,Ae),Ge.return=Se,Se=Ge):(E(Se,ye),Ge=Dx(Ae,Se.mode,Ge),Ge.return=Se,Se=Ge),J(Se)):E(Se,ye)}return function(Se,ye,Ae,Ge){try{Pm=0;var Lt=di(Se,ye,Ae,Ge);return Sp=null,Lt}catch(Xt){if(Xt===bm||Xt===Xy)throw Xt;var lr=Yi(29,Xt,null,Se.mode);return lr.lanes=Ge,lr.return=Se,lr}finally{}}}var li=zi(!0),wE=zi(!1),Qa=se(null),au=null;function Fh(g){var b=g.alternate;ee(ua,ua.current&1),ee(Qa,g),au===null&&(b===null||cd.current!==null||b.memoizedState!==null)&&(au=g)}function Qx(g){if(g.tag===22){if(ee(ua,ua.current),ee(Qa,g),au===null){var b=g.alternate;b!==null&&b.memoizedState!==null&&(au=g)}}else fd()}function fd(){ee(ua,ua.current),ee(Qa,Qa.current)}function fc(g){ce(Qa),au===g&&(au=null),ce(ua)}var ua=se(0);function o0(g){for(var b=g;b!==null;){if(b.tag===13){var E=b.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||SS(E)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}function _p(g,b,E,M){b=g.memoizedState,E=E(M,b),E=E==null?b:u({},b,E),g.memoizedState=E,g.lanes===0&&(g.updateQueue.baseState=E)}var s0={enqueueSetState:function(g,b,E){g=g._reactInternals;var M=gs(),F=cc(M);F.payload=b,E!=null&&(F.callback=E),b=ld(g,F,M),b!==null&&(ms(b,g,M),ru(b,g,M))},enqueueReplaceState:function(g,b,E){g=g._reactInternals;var M=gs(),F=cc(M);F.tag=1,F.payload=b,E!=null&&(F.callback=E),b=ld(g,F,M),b!==null&&(ms(b,g,M),ru(b,g,M))},enqueueForceUpdate:function(g,b){g=g._reactInternals;var E=gs(),M=cc(E);M.tag=2,b!=null&&(M.callback=b),b=ld(g,M,E),b!==null&&(ms(b,g,E),ru(b,g,E))}};function l0(g,b,E,M,F,U,J){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(M,U,J):b.prototype&&b.prototype.isPureReactComponent?!lm(E,M)||!lm(F,U):!0}function Jx(g,b,E,M){g=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(E,M),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(E,M),b.state!==g&&s0.enqueueReplaceState(b,b.state,null)}function ou(g,b){var E=b;if("ref"in b){E={};for(var M in b)M!=="ref"&&(E[M]=b[M])}if(g=g.defaultProps){E===b&&(E=u({},E));for(var F in g)E[F]===void 0&&(E[F]=g[F])}return E}var Rm=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)};function eS(g){Rm(g)}function FM(g){console.error(g)}function $M(g){Rm(g)}function $h(g,b){try{var E=g.onUncaughtError;E(b.value,{componentStack:b.stack})}catch(M){setTimeout(function(){throw M})}}function Tp(g,b,E){try{var M=g.onCaughtError;M(E.value,{componentStack:E.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(F){setTimeout(function(){throw F})}}function c0(g,b,E){return E=cc(E),E.tag=3,E.payload={element:null},E.callback=function(){$h(g,b)},E}function xE(g){return g=cc(g),g.tag=3,g}function xr(g,b,E,M){var F=E.type.getDerivedStateFromError;if(typeof F=="function"){var U=M.value;g.payload=function(){return F(U)},g.callback=function(){Tp(b,E,M)}}var J=E.stateNode;J!==null&&typeof J.componentDidCatch=="function"&&(g.callback=function(){Tp(b,E,M),typeof F!="function"&&(bd===null?bd=new Set([this]):bd.add(this));var ae=M.stack;this.componentDidCatch(M.value,{componentStack:ae!==null?ae:""})})}function Mt(g,b,E,M,F){if(E.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(b=E.alternate,b!==null&&Wy(b,E,F,!0),E=Qa.current,E!==null){switch(E.tag){case 13:return au===null?hS():E.alternate===null&&Oi===0&&(Oi=3),E.flags&=-257,E.flags|=65536,E.lanes=F,M===eE?E.flags|=16384:(b=E.updateQueue,b===null?E.updateQueue=new Set([M]):b.add(M),pS(g,M,F)),!1;case 22:return E.flags|=65536,M===eE?E.flags|=16384:(b=E.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([M])},E.updateQueue=b):(E=b.retryQueue,E===null?b.retryQueue=new Set([M]):E.add(M)),pS(g,M,F)),!1}throw Error(r(435,E.tag))}return pS(g,M,F),hS(),!1}if(Tr)return b=Qa.current,b!==null?((b.flags&65536)===0&&(b.flags|=256),b.flags|=65536,b.lanes=F,M!==eu&&(g=Error(r(422),{cause:M}),id(zs(g,E)))):(M!==eu&&(b=Error(r(423),{cause:M}),id(zs(b,E))),g=g.current.alternate,g.flags|=65536,F&=-F,g.lanes|=F,M=zs(M,E),F=c0(g.stateNode,M,F),Jy(g,F),Oi!==4&&(Oi=2)),!1;var U=Error(r(520),{cause:M});if(U=zs(U,E),zm===null?zm=[U]:zm.push(U),Oi!==4&&(Oi=2),b===null)return!0;M=zs(M,E),E=b;do{switch(E.tag){case 3:return E.flags|=65536,g=F&-F,E.lanes|=g,g=c0(E.stateNode,M,g),Jy(E,g),!1;case 1:if(b=E.type,U=E.stateNode,(E.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(bd===null||!bd.has(U))))return E.flags|=65536,F&=-F,E.lanes|=F,F=xE(F),xr(F,g,E,M),Jy(E,F),!1}E=E.return}while(E!==null);return!1}var SE=Error(r(461)),Hi=!1;function ci(g,b,E,M){b.child=g===null?wE(b,null,E,M):li(b,g.child,E,M)}function pc(g,b,E,M,F){E=E.render;var U=b.ref;if("ref"in M){var J={};for(var ae in M)ae!=="ref"&&(J[ae]=M[ae])}else J=M;return lc(b),M=$x(g,b,E,J,U,F),ae=aE(),g!==null&&!Hi?(e0(g,b,F),qs(g,b,F)):(Tr&&ae&&Mx(b),b.flags|=1,ci(g,b,M,F),b.child)}function xa(g,b,E,M,F){if(g===null){var U=E.type;return typeof U=="function"&&!kx(U)&&U.defaultProps===void 0&&E.compare===null?(b.tag=15,b.type=U,_E(g,b,U,M,F)):(g=vi(E.type,null,M,b,b.mode,F),g.ref=b.ref,g.return=b,b.child=g)}if(U=g.child,!h0(g,F)){var J=U.memoizedProps;if(E=E.compare,E=E!==null?E:lm,E(J,M)&&g.ref===b.ref)return qs(g,b,F)}return b.flags|=1,g=Zc(U,M),g.ref=b.ref,g.return=b,b.child=g}function _E(g,b,E,M,F){if(g!==null){var U=g.memoizedProps;if(lm(U,M)&&g.ref===b.ref)if(Hi=!1,b.pendingProps=M=U,h0(g,F))(g.flags&131072)!==0&&(Hi=!0);else return b.lanes=g.lanes,qs(g,b,F)}return u0(g,b,E,M,F)}function BM(g,b,E){var M=b.pendingProps,F=M.children,U=g!==null?g.memoizedState:null;if(M.mode==="hidden"){if((b.flags&128)!==0){if(M=U!==null?U.baseLanes|E:E,g!==null){for(F=b.child=g.child,U=0;F!==null;)U=U|F.lanes|F.childLanes,F=F.sibling;b.childLanes=U&~M}else b.childLanes=0,b.child=null;return TE(g,b,M,E)}if((E&536870912)!==0)b.memoizedState={baseLanes:0,cachePool:null},g!==null&&nu(b,U!==null?U.cachePool:null),U!==null?nE(b,U):jx(),Qx(b);else return b.lanes=b.childLanes=536870912,TE(g,b,U!==null?U.baseLanes|E:E,E)}else U!==null?(nu(b,U.cachePool),nE(b,U),fd(),b.memoizedState=null):(g!==null&&nu(b,null),jx(),fd());return ci(g,b,F,E),b.child}function TE(g,b,E,M){var F=up();return F=F===null?null:{parent:Ki._currentValue,pool:F},b.memoizedState={baseLanes:E,cachePool:F},g!==null&&nu(b,null),jx(),Qx(b),g!==null&&Wy(g,b,M,!0),null}function Bh(g,b){var E=b.ref;if(E===null)g!==null&&g.ref!==null&&(b.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(g===null||g.ref!==E)&&(b.flags|=4194816)}}function u0(g,b,E,M,F){return lc(b),E=$x(g,b,E,M,void 0,F),M=aE(),g!==null&&!Hi?(e0(g,b,F),qs(g,b,F)):(Tr&&M&&Mx(b),b.flags|=1,ci(g,b,E,F),b.child)}function UM(g,b,E,M,F,U){return lc(b),b.updateQueue=null,E=iE(b,M,E,F),rE(g),M=aE(),g!==null&&!Hi?(e0(g,b,U),qs(g,b,U)):(Tr&&M&&Mx(b),b.flags|=1,ci(g,b,E,U),b.child)}function Ep(g,b,E,M,F){if(lc(b),b.stateNode===null){var U=El,J=E.contextType;typeof J=="object"&&J!==null&&(U=ja(J)),U=new E(M,U),b.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=s0,b.stateNode=U,U._reactInternals=b,U=b.stateNode,U.props=M,U.state=b.memoizedState,U.refs={},Ox(b),J=E.contextType,U.context=typeof J=="object"&&J!==null?ja(J):El,U.state=b.memoizedState,J=E.getDerivedStateFromProps,typeof J=="function"&&(_p(b,E,J,M),U.state=b.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(J=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),J!==U.state&&s0.enqueueReplaceState(U,U.state,null),xm(b,M,U,F),wm(),U.state=b.memoizedState),typeof U.componentDidMount=="function"&&(b.flags|=4194308),M=!0}else if(g===null){U=b.stateNode;var ae=b.memoizedProps,he=ou(E,ae);U.props=he;var Ce=U.context,He=E.contextType;J=El,typeof He=="object"&&He!==null&&(J=ja(He));var Xe=E.getDerivedStateFromProps;He=typeof Xe=="function"||typeof U.getSnapshotBeforeUpdate=="function",ae=b.pendingProps!==ae,He||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ae||Ce!==J)&&Jx(b,U,M,J),Lo=!1;var Ie=b.memoizedState;U.state=Ie,xm(b,M,U,F),wm(),Ce=b.memoizedState,ae||Ie!==Ce||Lo?(typeof Xe=="function"&&(_p(b,E,Xe,M),Ce=b.memoizedState),(he=Lo||l0(b,E,he,M,Ie,Ce,J))?(He||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(b.flags|=4194308)):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=M,b.memoizedState=Ce),U.props=M,U.state=Ce,U.context=J,M=he):(typeof U.componentDidMount=="function"&&(b.flags|=4194308),M=!1)}else{U=b.stateNode,Qy(g,b),J=b.memoizedProps,He=ou(E,J),U.props=He,Xe=b.pendingProps,Ie=U.context,Ce=E.contextType,he=El,typeof Ce=="object"&&Ce!==null&&(he=ja(Ce)),ae=E.getDerivedStateFromProps,(Ce=typeof ae=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(J!==Xe||Ie!==he)&&Jx(b,U,M,he),Lo=!1,Ie=b.memoizedState,U.state=Ie,xm(b,M,U,F),wm();var Pe=b.memoizedState;J!==Xe||Ie!==Pe||Lo||g!==null&&g.dependencies!==null&&gm(g.dependencies)?(typeof ae=="function"&&(_p(b,E,ae,M),Pe=b.memoizedState),(He=Lo||l0(b,E,He,M,Ie,Pe,he)||g!==null&&g.dependencies!==null&&gm(g.dependencies))?(Ce||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(M,Pe,he),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(M,Pe,he)),typeof U.componentDidUpdate=="function"&&(b.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=1024),b.memoizedProps=M,b.memoizedState=Pe),U.props=M,U.state=Pe,U.context=he,M=He):(typeof U.componentDidUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||J===g.memoizedProps&&Ie===g.memoizedState||(b.flags|=1024),M=!1)}return U=M,Bh(g,b),M=(b.flags&128)!==0,U||M?(U=b.stateNode,E=M&&typeof E.getDerivedStateFromError!="function"?null:U.render(),b.flags|=1,g!==null&&M?(b.child=li(b,g.child,null,F),b.child=li(b,null,E,F)):ci(g,b,E,F),b.memoizedState=U.state,g=b.child):g=qs(g,b,F),g}function EE(g,b,E,M){return fm(),b.flags|=256,ci(g,b,E,M),b.child}var tS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nS(g){return{baseLanes:g,cachePool:AM()}}function Uh(g,b,E){return g=g!==null?g.childLanes&~E:0,b&&(g|=Ys),g}function d0(g,b,E){var M=b.pendingProps,F=!1,U=(b.flags&128)!==0,J;if((J=U)||(J=g!==null&&g.memoizedState===null?!1:(ua.current&2)!==0),J&&(F=!0,b.flags&=-129),J=(b.flags&32)!==0,b.flags&=-33,g===null){if(Tr){if(F?Fh(b):fd(),Tr){var ae=Dr,he;if(he=ae){e:{for(he=ae,ae=Jc;he.nodeType!==8;){if(!ae){ae=null;break e}if(he=So(he.nextSibling),he===null){ae=null;break e}}ae=he}ae!==null?(b.memoizedState={dehydrated:ae,treeContext:kh!==null?{id:rd,overflow:Qc}:null,retryLane:536870912,hydrationErrors:null},he=Yi(18,null,null,0),he.stateNode=ae,he.return=b,b.child=he,La=b,Dr=null,he=!0):he=!1}he||sc(b)}if(ae=b.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))return SS(ae)?b.lanes=32:b.lanes=536870912,null;fc(b)}return ae=M.children,M=M.fallback,F?(fd(),F=b.mode,ae=rS({mode:"hidden",children:ae},F),M=Al(M,F,E,null),ae.return=b,M.return=b,ae.sibling=M,b.child=ae,F=b.child,F.memoizedState=nS(E),F.childLanes=Uh(g,J,E),b.memoizedState=tS,M):(Fh(b),Om(b,ae))}if(he=g.memoizedState,he!==null&&(ae=he.dehydrated,ae!==null)){if(U)b.flags&256?(Fh(b),b.flags&=-257,b=Vh(g,b,E)):b.memoizedState!==null?(fd(),b.child=g.child,b.flags|=128,b=null):(fd(),F=M.fallback,ae=b.mode,M=rS({mode:"visible",children:M.children},ae),F=Al(F,ae,E,null),F.flags|=2,M.return=b,F.return=b,M.sibling=F,b.child=M,li(b,g.child,null,E),M=b.child,M.memoizedState=nS(E),M.childLanes=Uh(g,J,E),b.memoizedState=tS,b=F);else if(Fh(b),SS(ae)){if(J=ae.nextSibling&&ae.nextSibling.dataset,J)var Ce=J.dgst;J=Ce,M=Error(r(419)),M.stack="",M.digest=J,id({value:M,source:null,stack:null}),b=Vh(g,b,E)}else if(Hi||Wy(g,b,E,!1),J=(E&g.childLanes)!==0,Hi||J){if(J=Qr,J!==null&&(M=E&-E,M=(M&42)!==0?1:ge(M),M=(M&(J.suspendedLanes|E))!==0?0:M,M!==0&&M!==he.retryLane))throw he.retryLane=M,op(g,M),ms(J,g,M),SE;ae.data==="$?"||hS(),b=Vh(g,b,E)}else ae.data==="$?"?(b.flags|=192,b.child=g.child,b=null):(g=he.treeContext,Dr=So(ae.nextSibling),La=b,Tr=!0,lp=null,Jc=!1,g!==null&&(Hs[Gs++]=rd,Hs[Gs++]=Qc,Hs[Gs++]=kh,rd=g.id,Qc=g.overflow,kh=b),b=Om(b,M.children),b.flags|=4096);return b}return F?(fd(),F=M.fallback,ae=b.mode,he=g.child,Ce=he.sibling,M=Zc(he,{mode:"hidden",children:M.children}),M.subtreeFlags=he.subtreeFlags&65011712,Ce!==null?F=Zc(Ce,F):(F=Al(F,ae,E,null),F.flags|=2),F.return=b,M.return=b,M.sibling=F,b.child=M,M=F,F=b.child,ae=g.child.memoizedState,ae===null?ae=nS(E):(he=ae.cachePool,he!==null?(Ce=Ki._currentValue,he=he.parent!==Ce?{parent:Ce,pool:Ce}:he):he=AM(),ae={baseLanes:ae.baseLanes|E,cachePool:he}),F.memoizedState=ae,F.childLanes=Uh(g,J,E),b.memoizedState=tS,M):(Fh(b),E=g.child,g=E.sibling,E=Zc(E,{mode:"visible",children:M.children}),E.return=b,E.sibling=null,g!==null&&(J=b.deletions,J===null?(b.deletions=[g],b.flags|=16):J.push(g)),b.child=E,b.memoizedState=null,E)}function Om(g,b){return b=rS({mode:"visible",children:b},g.mode),b.return=g,g.child=b}function rS(g,b){return g=Yi(22,g,null,b),g.lanes=0,g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},g}function Vh(g,b,E){return li(b,g.child,null,E),g=Om(b,b.pendingProps.children),g.flags|=2,b.memoizedState=null,g}function AE(g,b,E){g.lanes|=b;var M=g.alternate;M!==null&&(M.lanes|=b),pm(g.return,b,E)}function zh(g,b,E,M,F){var U=g.memoizedState;U===null?g.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:M,tail:E,tailMode:F}:(U.isBackwards=b,U.rendering=null,U.renderingStartTime=0,U.last=M,U.tail=E,U.tailMode=F)}function kE(g,b,E){var M=b.pendingProps,F=M.revealOrder,U=M.tail;if(ci(g,b,M.children,E),M=ua.current,(M&2)!==0)M=M&1|2,b.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=b.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&AE(g,E,b);else if(g.tag===19)AE(g,E,b);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===b)break e;for(;g.sibling===null;){if(g.return===null||g.return===b)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}M&=1}switch(ee(ua,M),F){case"forwards":for(E=b.child,F=null;E!==null;)g=E.alternate,g!==null&&o0(g)===null&&(F=E),E=E.sibling;E=F,E===null?(F=b.child,b.child=null):(F=E.sibling,E.sibling=null),zh(b,!1,F,E,U);break;case"backwards":for(E=null,F=b.child,b.child=null;F!==null;){if(g=F.alternate,g!==null&&o0(g)===null){b.child=F;break}g=F.sibling,F.sibling=E,E=F,F=g}zh(b,!0,E,null,U);break;case"together":zh(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function qs(g,b,E){if(g!==null&&(b.dependencies=g.dependencies),yd|=b.lanes,(E&b.childLanes)===0)if(g!==null){if(Wy(g,b,E,!1),(E&b.childLanes)===0)return null}else return null;if(g!==null&&b.child!==g.child)throw Error(r(153));if(b.child!==null){for(g=b.child,E=Zc(g,g.pendingProps),b.child=E,E.return=b;g.sibling!==null;)g=g.sibling,E=E.sibling=Zc(g,g.pendingProps),E.return=b;E.sibling=null}return b.child}function h0(g,b){return(g.lanes&b)!==0?!0:(g=g.dependencies,!!(g!==null&&gm(g)))}function VM(g,b,E){switch(b.tag){case 3:ve(b,b.stateNode.containerInfo),Dh(b,Ki,g.memoizedState.cache),fm();break;case 27:case 5:me(b);break;case 4:ve(b,b.stateNode.containerInfo);break;case 10:Dh(b,b.type,b.memoizedProps.value);break;case 13:var M=b.memoizedState;if(M!==null)return M.dehydrated!==null?(Fh(b),b.flags|=128,null):(E&b.child.childLanes)!==0?d0(g,b,E):(Fh(b),g=qs(g,b,E),g!==null?g.sibling:null);Fh(b);break;case 19:var F=(g.flags&128)!==0;if(M=(E&b.childLanes)!==0,M||(Wy(g,b,E,!1),M=(E&b.childLanes)!==0),F){if(M)return kE(g,b,E);b.flags|=128}if(F=b.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),ee(ua,ua.current),M)break;return null;case 22:case 23:return b.lanes=0,BM(g,b,E);case 24:Dh(b,Ki,g.memoizedState.cache)}return qs(g,b,E)}function Lm(g,b,E){if(g!==null)if(g.memoizedProps!==b.pendingProps)Hi=!0;else{if(!h0(g,E)&&(b.flags&128)===0)return Hi=!1,VM(g,b,E);Hi=(g.flags&131072)!==0}else Hi=!1,Tr&&(b.flags&1048576)!==0&&qT(b,zy,b.index);switch(b.lanes=0,b.tag){case 16:e:{g=b.pendingProps;var M=b.elementType,F=M._init;if(M=F(M._payload),b.type=M,typeof M=="function")kx(M)?(g=ou(M,g),b.tag=1,b=Ep(null,b,M,g,E)):(b.tag=0,b=u0(null,b,M,g,E));else{if(M!=null){if(F=M.$$typeof,F===C){b.tag=11,b=pc(null,b,M,g,E);break e}else if(F===D){b.tag=14,b=xa(null,b,M,g,E);break e}}throw b=G(M)||M,Error(r(306,b,""))}}return b;case 0:return u0(g,b,b.type,b.pendingProps,E);case 1:return M=b.type,F=ou(M,b.pendingProps),Ep(g,b,M,F,E);case 3:e:{if(ve(b,b.stateNode.containerInfo),g===null)throw Error(r(387));M=b.pendingProps;var U=b.memoizedState;F=U.element,Qy(g,b),xm(b,M,null,E);var J=b.memoizedState;if(M=J.cache,Dh(b,Ki,M),M!==U.cache&&KT(b,[Ki],E,!0),wm(),M=J.element,U.isDehydrated)if(U={element:M,isDehydrated:!1,cache:J.cache},b.updateQueue.baseState=U,b.memoizedState=U,b.flags&256){b=EE(g,b,M,E);break e}else if(M!==F){F=zs(Error(r(424)),b),id(F),b=EE(g,b,M,E);break e}else{switch(g=b.stateNode.containerInfo,g.nodeType){case 9:g=g.body;break;default:g=g.nodeName==="HTML"?g.ownerDocument.body:g}for(Dr=So(g.firstChild),La=b,Tr=!0,lp=null,Jc=!0,E=wE(b,null,M,E),b.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(fm(),M===F){b=qs(g,b,E);break e}ci(g,b,M,E)}b=b.child}return b;case 26:return Bh(g,b),g===null?(E=av(b.type,null,b.pendingProps,null))?b.memoizedState=E:Tr||(E=b.type,g=b.pendingProps,M=xS(De.current).createElement(E),M[ot]=b,M[St]=g,da(M,E,g),_i(M),b.stateNode=M):b.memoizedState=av(b.type,g.memoizedProps,b.pendingProps,g.memoizedState),null;case 27:return me(b),g===null&&Tr&&(M=b.stateNode=N0(b.type,b.pendingProps,De.current),La=b,Jc=!0,F=Dr,fu(b.type)?(rA=F,Dr=So(M.firstChild)):Dr=F),ci(g,b,b.pendingProps.children,E),Bh(g,b),g===null&&(b.flags|=4194304),b.child;case 5:return g===null&&Tr&&((F=M=Dr)&&(M=OF(M,b.type,b.pendingProps,Jc),M!==null?(b.stateNode=M,La=b,Dr=So(M.firstChild),Jc=!1,F=!0):F=!1),F||sc(b)),me(b),F=b.type,U=b.pendingProps,J=g!==null?g.memoizedProps:null,M=U.children,Bp(F,U)?M=null:J!==null&&Bp(F,J)&&(b.flags|=32),b.memoizedState!==null&&(F=$x(g,b,MM,null,null,E),V0._currentValue=F),Bh(g,b),ci(g,b,M,E),b.child;case 6:return g===null&&Tr&&((g=E=Dr)&&(E=nA(E,b.pendingProps,Jc),E!==null?(b.stateNode=E,La=b,Dr=null,g=!0):g=!1),g||sc(b)),null;case 13:return d0(g,b,E);case 4:return ve(b,b.stateNode.containerInfo),M=b.pendingProps,g===null?b.child=li(b,null,M,E):ci(g,b,M,E),b.child;case 11:return pc(g,b,b.type,b.pendingProps,E);case 7:return ci(g,b,b.pendingProps,E),b.child;case 8:return ci(g,b,b.pendingProps.children,E),b.child;case 12:return ci(g,b,b.pendingProps.children,E),b.child;case 10:return M=b.pendingProps,Dh(b,b.type,M.value),ci(g,b,M.children,E),b.child;case 9:return F=b.type._context,M=b.pendingProps.children,lc(b),F=ja(F),M=M(F),b.flags|=1,ci(g,b,M,E),b.child;case 14:return xa(g,b,b.type,b.pendingProps,E);case 15:return _E(g,b,b.type,b.pendingProps,E);case 19:return kE(g,b,E);case 31:return M=b.pendingProps,E=b.mode,M={mode:M.mode,children:M.children},g===null?(E=rS(M,E),E.ref=b.ref,b.child=E,E.return=b,b=E):(E=Zc(g.child,M),E.ref=b.ref,b.child=E,E.return=b,b=E),b;case 22:return BM(g,b,E);case 24:return lc(b),M=ja(Ki),g===null?(F=up(),F===null&&(F=Qr,U=mm(),F.pooledCache=U,U.refCount++,U!==null&&(F.pooledCacheLanes|=E),F=U),b.memoizedState={parent:M,cache:F},Ox(b),Dh(b,Ki,F)):((g.lanes&E)!==0&&(Qy(g,b),xm(b,null,null,E),wm()),F=g.memoizedState,U=b.memoizedState,F.parent!==M?(F={parent:M,cache:M},b.memoizedState=F,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=F),Dh(b,Ki,M)):(M=U.cache,Dh(b,Ki,M),M!==F.cache&&KT(b,[Ki],E,!0))),ci(g,b,b.pendingProps.children,E),b.child;case 29:throw b.pendingProps}throw Error(r(156,b.tag))}function su(g){g.flags|=4}function CE(g,b){if(b.type!=="stylesheet"||(b.state.loading&4)!==0)g.flags&=-16777217;else if(g.flags|=16777216,!pu(b)){if(b=Qa.current,b!==null&&((dr&4194048)===dr?au!==null:(dr&62914560)!==dr&&(dr&536870912)===0||b!==au))throw dp=eE,kM;g.flags|=8192}}function f0(g,b){b!==null&&(g.flags|=4),g.flags&16384&&(b=g.tag!==22?mo():536870912,g.lanes|=b,Mp|=b)}function jm(g,b){if(!Tr)switch(g.tailMode){case"hidden":b=g.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?g.tail=null:E.sibling=null;break;case"collapsed":E=g.tail;for(var M=null;E!==null;)E.alternate!==null&&(M=E),E=E.sibling;M===null?b||g.tail===null?g.tail=null:g.tail.sibling=null:M.sibling=null}}function Ei(g){var b=g.alternate!==null&&g.alternate.child===g.child,E=0,M=0;if(b)for(var F=g.child;F!==null;)E|=F.lanes|F.childLanes,M|=F.subtreeFlags&65011712,M|=F.flags&65011712,F.return=g,F=F.sibling;else for(F=g.child;F!==null;)E|=F.lanes|F.childLanes,M|=F.subtreeFlags,M|=F.flags,F.return=g,F=F.sibling;return g.subtreeFlags|=M,g.childLanes=E,b}function zM(g,b,E){var M=b.pendingProps;switch(Ch(b),b.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(b),null;case 1:return Ei(b),null;case 3:return E=b.stateNode,M=null,g!==null&&(M=g.memoizedState.cache),b.memoizedState.cache!==M&&(b.flags|=2048),od(Ki),de(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(g===null||g.child===null)&&(hm(b)?su(b):g===null||g.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,Gy())),Ei(b),null;case 26:return E=b.memoizedState,g===null?(su(b),E!==null?(Ei(b),CE(b,E)):(Ei(b),b.flags&=-16777217)):E?E!==g.memoizedState?(su(b),Ei(b),CE(b,E)):(Ei(b),b.flags&=-16777217):(g.memoizedProps!==M&&su(b),Ei(b),b.flags&=-16777217),null;case 27:xe(b),E=De.current;var F=b.type;if(g!==null&&b.stateNode!=null)g.memoizedProps!==M&&su(b);else{if(!M){if(b.stateNode===null)throw Error(r(166));return Ei(b),null}g=be.current,hm(b)?Hy(b):(g=N0(F,M,E),b.stateNode=g,su(b))}return Ei(b),null;case 5:if(xe(b),E=b.type,g!==null&&b.stateNode!=null)g.memoizedProps!==M&&su(b);else{if(!M){if(b.stateNode===null)throw Error(r(166));return Ei(b),null}if(g=be.current,hm(b))Hy(b);else{switch(F=xS(De.current),g){case 1:g=F.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:g=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":g=F.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":g=F.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":g=F.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof M.is=="string"?F.createElement("select",{is:M.is}):F.createElement("select"),M.multiple?g.multiple=!0:M.size&&(g.size=M.size);break;default:g=typeof M.is=="string"?F.createElement(E,{is:M.is}):F.createElement(E)}}g[ot]=b,g[St]=M;e:for(F=b.child;F!==null;){if(F.tag===5||F.tag===6)g.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===b)break e;for(;F.sibling===null;){if(F.return===null||F.return===b)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}b.stateNode=g;e:switch(da(g,E,M),E){case"button":case"input":case"select":case"textarea":g=!!M.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&su(b)}}return Ei(b),b.flags&=-16777217,null;case 6:if(g&&b.stateNode!=null)g.memoizedProps!==M&&su(b);else{if(typeof M!="string"&&b.stateNode===null)throw Error(r(166));if(g=De.current,hm(b)){if(g=b.stateNode,E=b.memoizedProps,M=null,F=La,F!==null)switch(F.tag){case 27:case 5:M=F.memoizedProps}g[ot]=b,g=!!(g.nodeValue===E||M!==null&&M.suppressHydrationWarning===!0||eP(g.nodeValue,E)),g||sc(b)}else g=xS(g).createTextNode(M),g[ot]=b,b.stateNode=g}return Ei(b),null;case 13:if(M=b.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(F=hm(b),M!==null&&M.dehydrated!==null){if(g===null){if(!F)throw Error(r(318));if(F=b.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(r(317));F[ot]=b}else fm(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;Ei(b),F=!1}else F=Gy(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=F),F=!0;if(!F)return b.flags&256?(fc(b),b):(fc(b),null)}if(fc(b),(b.flags&128)!==0)return b.lanes=E,b;if(E=M!==null,g=g!==null&&g.memoizedState!==null,E){M=b.child,F=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(F=M.alternate.memoizedState.cachePool.pool);var U=null;M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(U=M.memoizedState.cachePool.pool),U!==F&&(M.flags|=2048)}return E!==g&&E&&(b.child.flags|=8192),f0(b,b.updateQueue),Ei(b),null;case 4:return de(),g===null&&Xm(b.stateNode.containerInfo),Ei(b),null;case 10:return od(b.type),Ei(b),null;case 19:if(ce(ua),F=b.memoizedState,F===null)return Ei(b),null;if(M=(b.flags&128)!==0,U=F.rendering,U===null)if(M)jm(F,!1);else{if(Oi!==0||g!==null&&(g.flags&128)!==0)for(g=b.child;g!==null;){if(U=o0(g),U!==null){for(b.flags|=128,jm(F,!1),g=U.updateQueue,b.updateQueue=g,f0(b,g),b.subtreeFlags=0,g=E,E=b.child;E!==null;)Cx(E,g),E=E.sibling;return ee(ua,ua.current&1|2),b.child}g=g.sibling}F.tail!==null&&At()>w0&&(b.flags|=128,M=!0,jm(F,!1),b.lanes=4194304)}else{if(!M)if(g=o0(U),g!==null){if(b.flags|=128,M=!0,g=g.updateQueue,b.updateQueue=g,f0(b,g),jm(F,!0),F.tail===null&&F.tailMode==="hidden"&&!U.alternate&&!Tr)return Ei(b),null}else 2*At()-F.renderingStartTime>w0&&E!==536870912&&(b.flags|=128,M=!0,jm(F,!1),b.lanes=4194304);F.isBackwards?(U.sibling=b.child,b.child=U):(g=F.last,g!==null?g.sibling=U:b.child=U,F.last=U)}return F.tail!==null?(b=F.tail,F.rendering=b,F.tail=b.sibling,F.renderingStartTime=At(),b.sibling=null,g=ua.current,ee(ua,M?g&1|2:g&1),b):(Ei(b),null);case 22:case 23:return fc(b),Mh(),M=b.memoizedState!==null,g!==null?g.memoizedState!==null!==M&&(b.flags|=8192):M&&(b.flags|=8192),M?(E&536870912)!==0&&(b.flags&128)===0&&(Ei(b),b.subtreeFlags&6&&(b.flags|=8192)):Ei(b),E=b.updateQueue,E!==null&&f0(b,E.retryQueue),E=null,g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),M=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(M=b.memoizedState.cachePool.pool),M!==E&&(b.flags|=2048),g!==null&&ce(sd),null;case 24:return E=null,g!==null&&(E=g.memoizedState.cache),b.memoizedState.cache!==E&&(b.flags|=2048),od(Ki),Ei(b),null;case 25:return null;case 30:return null}throw Error(r(156,b.tag))}function Fm(g,b){switch(Ch(b),b.tag){case 1:return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 3:return od(Ki),de(),g=b.flags,(g&65536)!==0&&(g&128)===0?(b.flags=g&-65537|128,b):null;case 26:case 27:case 5:return xe(b),null;case 13:if(fc(b),g=b.memoizedState,g!==null&&g.dehydrated!==null){if(b.alternate===null)throw Error(r(340));fm()}return g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 19:return ce(ua),null;case 4:return de(),null;case 10:return od(b.type),null;case 22:case 23:return fc(b),Mh(),g!==null&&ce(sd),g=b.flags,g&65536?(b.flags=g&-65537|128,b):null;case 24:return od(Ki),null;case 25:return null;default:return null}}function p0(g,b){switch(Ch(b),b.tag){case 3:od(Ki),de();break;case 26:case 27:case 5:xe(b);break;case 4:de();break;case 13:fc(b);break;case 19:ce(ua);break;case 10:od(b.type);break;case 22:case 23:fc(b),Mh(),g!==null&&ce(sd);break;case 24:od(Ki)}}function $m(g,b){try{var E=b.updateQueue,M=E!==null?E.lastEffect:null;if(M!==null){var F=M.next;E=F;do{if((E.tag&g)===g){M=void 0;var U=E.create,J=E.inst;M=U(),J.destroy=M}E=E.next}while(E!==F)}}catch(ae){Hr(b,b.return,ae)}}function Hh(g,b,E){try{var M=b.updateQueue,F=M!==null?M.lastEffect:null;if(F!==null){var U=F.next;M=U;do{if((M.tag&g)===g){var J=M.inst,ae=J.destroy;if(ae!==void 0){J.destroy=void 0,F=b;var he=E,Ce=ae;try{Ce()}catch(He){Hr(F,he,He)}}}M=M.next}while(M!==U)}}catch(He){Hr(b,b.return,He)}}function DE(g){var b=g.updateQueue;if(b!==null){var E=g.stateNode;try{IM(b,E)}catch(M){Hr(g,g.return,M)}}}function IE(g,b,E){E.props=ou(g.type,g.memoizedProps),E.state=g.memoizedState;try{E.componentWillUnmount()}catch(M){Hr(g,b,M)}}function Gh(g,b){try{var E=g.ref;if(E!==null){switch(g.tag){case 26:case 27:case 5:var M=g.stateNode;break;case 30:M=g.stateNode;break;default:M=g.stateNode}typeof E=="function"?g.refCleanup=E(M):E.current=M}}catch(F){Hr(g,b,F)}}function Il(g,b){var E=g.ref,M=g.refCleanup;if(E!==null)if(typeof M=="function")try{M()}catch(F){Hr(g,b,F)}finally{g.refCleanup=null,g=g.alternate,g!=null&&(g.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(F){Hr(g,b,F)}else E.current=null}function Wh(g){var b=g.type,E=g.memoizedProps,M=g.stateNode;try{e:switch(b){case"button":case"input":case"select":case"textarea":E.autoFocus&&M.focus();break e;case"img":E.src?M.src=E.src:E.srcSet&&(M.srcset=E.srcSet)}}catch(F){Hr(g,g.return,F)}}function ir(g,b,E){try{var M=g.stateNode;QE(M,g.type,E,b),M[St]=b}catch(F){Hr(g,g.return,F)}}function Bm(g){return g.tag===5||g.tag===3||g.tag===26||g.tag===27&&fu(g.type)||g.tag===4}function g0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||Bm(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.tag===27&&fu(g.type)||g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Ai(g,b,E){var M=g.tag;if(M===5||M===6)g=g.stateNode,b?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(g,b):(b=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,b.appendChild(g),E=E._reactRootContainer,E!=null||b.onclick!==null||(b.onclick=Fp));else if(M!==4&&(M===27&&fu(g.type)&&(E=g.stateNode,b=null),g=g.child,g!==null))for(Ai(g,b,E),g=g.sibling;g!==null;)Ai(g,b,E),g=g.sibling}function pd(g,b,E){var M=g.tag;if(M===5||M===6)g=g.stateNode,b?E.insertBefore(g,b):E.appendChild(g);else if(M!==4&&(M===27&&fu(g.type)&&(E=g.stateNode),g=g.child,g!==null))for(pd(g,b,E),g=g.sibling;g!==null;)pd(g,b,E),g=g.sibling}function Um(g){var b=g.stateNode,E=g.memoizedProps;try{for(var M=g.type,F=b.attributes;F.length;)b.removeAttributeNode(F[0]);da(b,M,E),b[ot]=g,b[St]=E}catch(U){Hr(g,g.return,U)}}var gd=!1,Qi=!1,yi=!1,hs=typeof WeakSet=="function"?WeakSet:Set,ur=null;function Vm(g,b){if(g=g.containerInfo,wS=vc,g=nd(g),bx(g)){if("selectionStart"in g)var E={start:g.selectionStart,end:g.selectionEnd};else e:{E=(E=g.ownerDocument)&&E.defaultView||window;var M=E.getSelection&&E.getSelection();if(M&&M.rangeCount!==0){E=M.anchorNode;var F=M.anchorOffset,U=M.focusNode;M=M.focusOffset;try{E.nodeType,U.nodeType}catch{E=null;break e}var J=0,ae=-1,he=-1,Ce=0,He=0,Xe=g,Ie=null;t:for(;;){for(var Pe;Xe!==E||F!==0&&Xe.nodeType!==3||(ae=J+F),Xe!==U||M!==0&&Xe.nodeType!==3||(he=J+M),Xe.nodeType===3&&(J+=Xe.nodeValue.length),(Pe=Xe.firstChild)!==null;)Ie=Xe,Xe=Pe;for(;;){if(Xe===g)break t;if(Ie===E&&++Ce===F&&(ae=J),Ie===U&&++He===M&&(he=J),(Pe=Xe.nextSibling)!==null)break;Xe=Ie,Ie=Xe.parentNode}Xe=Pe}E=ae===-1||he===-1?null:{start:ae,end:he}}else E=null}E=E||{start:0,end:0}}else E=null;for(JE={focusedElem:g,selectionRange:E},vc=!1,ur=b;ur!==null;)if(b=ur,g=b.child,(b.subtreeFlags&1024)!==0&&g!==null)g.return=b,ur=g;else for(;ur!==null;){switch(b=ur,U=b.alternate,g=b.flags,b.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&U!==null){g=void 0,E=b,F=U.memoizedProps,U=U.memoizedState,M=E.stateNode;try{var An=ou(E.type,F,E.elementType===E.type);g=M.getSnapshotBeforeUpdate(An,U),M.__reactInternalSnapshotBeforeUpdate=g}catch(gn){Hr(E,E.return,gn)}}break;case 3:if((g&1024)!==0){if(g=b.stateNode.containerInfo,E=g.nodeType,E===9)tA(g);else if(E===1)switch(g.nodeName){case"HEAD":case"HTML":case"BODY":tA(g);break;default:g.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=b.sibling,g!==null){g.return=b.return,ur=g;break}ur=b.return}}function Ap(g,b,E){var M=E.flags;switch(E.tag){case 0:case 11:case 15:md(g,E),M&4&&$m(5,E);break;case 1:if(md(g,E),M&4)if(g=E.stateNode,b===null)try{g.componentDidMount()}catch(J){Hr(E,E.return,J)}else{var F=ou(E.type,b.memoizedProps);b=b.memoizedState;try{g.componentDidUpdate(F,b,g.__reactInternalSnapshotBeforeUpdate)}catch(J){Hr(E,E.return,J)}}M&64&&DE(E),M&512&&Gh(E,E.return);break;case 3:if(md(g,E),M&64&&(g=E.updateQueue,g!==null)){if(b=null,E.child!==null)switch(E.child.tag){case 27:case 5:b=E.child.stateNode;break;case 1:b=E.child.stateNode}try{IM(g,b)}catch(J){Hr(E,E.return,J)}}break;case 27:b===null&&M&4&&Um(E);case 26:case 5:md(g,E),b===null&&M&4&&Wh(E),M&512&&Gh(E,E.return);break;case 12:md(g,E);break;case 13:md(g,E),M&4&&PE(g,E),M&64&&(g=E.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(E=YM.bind(null,E),nP(g,E))));break;case 22:if(M=E.memoizedState!==null||gd,!M){b=b!==null&&b.memoizedState!==null||Qi,F=gd;var U=Qi;gd=M,(Qi=b)&&!U?Bo(g,E,(E.subtreeFlags&8772)!==0):md(g,E),gd=F,Qi=U}break;case 30:break;default:md(g,E)}}function jo(g){var b=g.alternate;b!==null&&(g.alternate=null,jo(b)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(b=g.stateNode,b!==null&&sa(b)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}var ui=null,Fo=!1;function Sa(g,b,E){for(E=E.child;E!==null;)ME(g,b,E),E=E.sibling}function ME(g,b,E){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Te,E)}catch{}switch(E.tag){case 26:Qi||Il(E,b),Sa(g,b,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:Qi||Il(E,b);var M=ui,F=Fo;fu(E.type)&&(ui=E.stateNode,Fo=!1),Sa(g,b,E),R0(E.stateNode),ui=M,Fo=F;break;case 5:Qi||Il(E,b);case 6:if(M=ui,F=Fo,ui=null,Sa(g,b,E),ui=M,Fo=F,ui!==null)if(Fo)try{(ui.nodeType===9?ui.body:ui.nodeName==="HTML"?ui.ownerDocument.body:ui).removeChild(E.stateNode)}catch(U){Hr(E,b,U)}else try{ui.removeChild(E.stateNode)}catch(U){Hr(E,b,U)}break;case 18:ui!==null&&(Fo?(g=ui,rv(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,E.stateNode),re(g)):rv(ui,E.stateNode));break;case 4:M=ui,F=Fo,ui=E.stateNode.containerInfo,Fo=!0,Sa(g,b,E),ui=M,Fo=F;break;case 0:case 11:case 14:case 15:Qi||Hh(2,E,b),Qi||Hh(4,E,b),Sa(g,b,E);break;case 1:Qi||(Il(E,b),M=E.stateNode,typeof M.componentWillUnmount=="function"&&IE(E,b,M)),Sa(g,b,E);break;case 21:Sa(g,b,E);break;case 22:Qi=(M=Qi)||E.memoizedState!==null,Sa(g,b,E),Qi=M;break;default:Sa(g,b,E)}}function PE(g,b){if(b.memoizedState===null&&(g=b.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null))))try{re(g)}catch(E){Hr(b,b.return,E)}}function HM(g){switch(g.tag){case 13:case 19:var b=g.stateNode;return b===null&&(b=g.stateNode=new hs),b;case 22:return g=g.stateNode,b=g._retryCache,b===null&&(b=g._retryCache=new hs),b;default:throw Error(r(435,g.tag))}}function $o(g,b){var E=HM(g);b.forEach(function(M){var F=k0.bind(null,g,M);E.has(M)||(E.add(M),M.then(F,F))})}function $r(g,b){var E=b.deletions;if(E!==null)for(var M=0;M<E.length;M++){var F=E[M],U=g,J=b,ae=J;e:for(;ae!==null;){switch(ae.tag){case 27:if(fu(ae.type)){ui=ae.stateNode,Fo=!1;break e}break;case 5:ui=ae.stateNode,Fo=!1;break e;case 3:case 4:ui=ae.stateNode.containerInfo,Fo=!0;break e}ae=ae.return}if(ui===null)throw Error(r(160));ME(U,J,F),ui=null,Fo=!1,U=F.alternate,U!==null&&(U.return=null),F.return=null}if(b.subtreeFlags&13878)for(b=b.child;b!==null;)NE(b,g),b=b.sibling}var xo=null;function NE(g,b){var E=g.alternate,M=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:$r(b,g),fs(g),M&4&&(Hh(3,g,g.return),$m(3,g),Hh(5,g,g.return));break;case 1:$r(b,g),fs(g),M&512&&(Qi||E===null||Il(E,E.return)),M&64&&gd&&(g=g.updateQueue,g!==null&&(M=g.callbacks,M!==null&&(E=g.shared.hiddenCallbacks,g.shared.hiddenCallbacks=E===null?M:E.concat(M))));break;case 26:var F=xo;if($r(b,g),fs(g),M&512&&(Qi||E===null||Il(E,E.return)),M&4){var U=E!==null?E.memoizedState:null;if(M=g.memoizedState,E===null)if(M===null)if(g.stateNode===null){e:{M=g.type,E=g.memoizedProps,F=F.ownerDocument||F;t:switch(M){case"title":U=F.getElementsByTagName("title")[0],(!U||U[rs]||U[ot]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=F.createElement(M),F.head.insertBefore(U,F.querySelector("head > title"))),da(U,M,E),U[ot]=g,_i(U),M=U;break e;case"link":var J=oA("link","href",F).get(M+(E.href||""));if(J){for(var ae=0;ae<J.length;ae++)if(U=J[ae],U.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&U.getAttribute("rel")===(E.rel==null?null:E.rel)&&U.getAttribute("title")===(E.title==null?null:E.title)&&U.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){J.splice(ae,1);break t}}U=F.createElement(M),da(U,M,E),F.head.appendChild(U);break;case"meta":if(J=oA("meta","content",F).get(M+(E.content||""))){for(ae=0;ae<J.length;ae++)if(U=J[ae],U.getAttribute("content")===(E.content==null?null:""+E.content)&&U.getAttribute("name")===(E.name==null?null:E.name)&&U.getAttribute("property")===(E.property==null?null:E.property)&&U.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&U.getAttribute("charset")===(E.charSet==null?null:E.charSet)){J.splice(ae,1);break t}}U=F.createElement(M),da(U,M,E),F.head.appendChild(U);break;default:throw Error(r(468,M))}U[ot]=g,_i(U),M=U}g.stateNode=M}else sA(F,g.type,g.stateNode);else g.stateNode=Hp(F,M,g.memoizedProps);else U!==M?(U===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):U.count--,M===null?sA(F,g.type,g.stateNode):Hp(F,M,g.memoizedProps)):M===null&&g.stateNode!==null&&ir(g,g.memoizedProps,E.memoizedProps)}break;case 27:$r(b,g),fs(g),M&512&&(Qi||E===null||Il(E,E.return)),E!==null&&M&4&&ir(g,g.memoizedProps,E.memoizedProps);break;case 5:if($r(b,g),fs(g),M&512&&(Qi||E===null||Il(E,E.return)),g.flags&32){F=g.stateNode;try{Fs(F,"")}catch(Pe){Hr(g,g.return,Pe)}}M&4&&g.stateNode!=null&&(F=g.memoizedProps,ir(g,F,E!==null?E.memoizedProps:F)),M&1024&&(yi=!0);break;case 6:if($r(b,g),fs(g),M&4){if(g.stateNode===null)throw Error(r(162));M=g.memoizedProps,E=g.stateNode;try{E.nodeValue=M}catch(Pe){Hr(g,g.return,Pe)}}break;case 3:if(B0=null,F=xo,xo=O0(b.containerInfo),$r(b,g),xo=F,fs(g),M&4&&E!==null&&E.memoizedState.isDehydrated)try{re(b.containerInfo)}catch(Pe){Hr(g,g.return,Pe)}yi&&(yi=!1,RE(g));break;case 4:M=xo,xo=O0(g.stateNode.containerInfo),$r(b,g),fs(g),xo=M;break;case 12:$r(b,g),fs(g);break;case 13:$r(b,g),fs(g),g.child.flags&8192&&g.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(lS=At()),M&4&&(M=g.updateQueue,M!==null&&(g.updateQueue=null,$o(g,M)));break;case 22:F=g.memoizedState!==null;var he=E!==null&&E.memoizedState!==null,Ce=gd,He=Qi;if(gd=Ce||F,Qi=He||he,$r(b,g),Qi=He,gd=Ce,fs(g),M&8192)e:for(b=g.stateNode,b._visibility=F?b._visibility&-2:b._visibility|1,F&&(E===null||he||gd||Qi||lu(g)),E=null,b=g;;){if(b.tag===5||b.tag===26){if(E===null){he=E=b;try{if(U=he.stateNode,F)J=U.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none";else{ae=he.stateNode;var Xe=he.memoizedProps.style,Ie=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;ae.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(Pe){Hr(he,he.return,Pe)}}}else if(b.tag===6){if(E===null){he=b;try{he.stateNode.nodeValue=F?"":he.memoizedProps}catch(Pe){Hr(he,he.return,Pe)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===g)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===g)break e;for(;b.sibling===null;){if(b.return===null||b.return===g)break e;E===b&&(E=null),b=b.return}E===b&&(E=null),b.sibling.return=b.return,b=b.sibling}M&4&&(M=g.updateQueue,M!==null&&(E=M.retryQueue,E!==null&&(M.retryQueue=null,$o(g,E))));break;case 19:$r(b,g),fs(g),M&4&&(M=g.updateQueue,M!==null&&(g.updateQueue=null,$o(g,M)));break;case 30:break;case 21:break;default:$r(b,g),fs(g)}}function fs(g){var b=g.flags;if(b&2){try{for(var E,M=g.return;M!==null;){if(Bm(M)){E=M;break}M=M.return}if(E==null)throw Error(r(160));switch(E.tag){case 27:var F=E.stateNode,U=g0(g);pd(g,U,F);break;case 5:var J=E.stateNode;E.flags&32&&(Fs(J,""),E.flags&=-33);var ae=g0(g);pd(g,ae,J);break;case 3:case 4:var he=E.stateNode.containerInfo,Ce=g0(g);Ai(g,Ce,he);break;default:throw Error(r(161))}}catch(He){Hr(g,g.return,He)}g.flags&=-3}b&4096&&(g.flags&=-4097)}function RE(g){if(g.subtreeFlags&1024)for(g=g.child;g!==null;){var b=g;RE(b),b.tag===5&&b.flags&1024&&b.stateNode.reset(),g=g.sibling}}function md(g,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Ap(g,b.alternate,b),b=b.sibling}function lu(g){for(g=g.child;g!==null;){var b=g;switch(b.tag){case 0:case 11:case 14:case 15:Hh(4,b,b.return),lu(b);break;case 1:Il(b,b.return);var E=b.stateNode;typeof E.componentWillUnmount=="function"&&IE(b,b.return,E),lu(b);break;case 27:R0(b.stateNode);case 26:case 5:Il(b,b.return),lu(b);break;case 22:b.memoizedState===null&&lu(b);break;case 30:lu(b);break;default:lu(b)}g=g.sibling}}function Bo(g,b,E){for(E=E&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var M=b.alternate,F=g,U=b,J=U.flags;switch(U.tag){case 0:case 11:case 15:Bo(F,U,E),$m(4,U);break;case 1:if(Bo(F,U,E),M=U,F=M.stateNode,typeof F.componentDidMount=="function")try{F.componentDidMount()}catch(Ce){Hr(M,M.return,Ce)}if(M=U,F=M.updateQueue,F!==null){var ae=M.stateNode;try{var he=F.shared.hiddenCallbacks;if(he!==null)for(F.shared.hiddenCallbacks=null,F=0;F<he.length;F++)tE(he[F],ae)}catch(Ce){Hr(M,M.return,Ce)}}E&&J&64&&DE(U),Gh(U,U.return);break;case 27:Um(U);case 26:case 5:Bo(F,U,E),E&&M===null&&J&4&&Wh(U),Gh(U,U.return);break;case 12:Bo(F,U,E);break;case 13:Bo(F,U,E),E&&J&4&&PE(F,U);break;case 22:U.memoizedState===null&&Bo(F,U,E),Gh(U,U.return);break;case 30:break;default:Bo(F,U,E)}b=b.sibling}}function m0(g,b){var E=null;g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),g=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(g=b.memoizedState.cachePool.pool),g!==E&&(g!=null&&g.refCount++,E!=null&&vm(E))}function v0(g,b){g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&vm(g))}function cu(g,b,E,M){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)OE(g,b,E,M),b=b.sibling}function OE(g,b,E,M){var F=b.flags;switch(b.tag){case 0:case 11:case 15:cu(g,b,E,M),F&2048&&$m(9,b);break;case 1:cu(g,b,E,M);break;case 3:cu(g,b,E,M),F&2048&&(g=null,b.alternate!==null&&(g=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==g&&(b.refCount++,g!=null&&vm(g)));break;case 12:if(F&2048){cu(g,b,E,M),g=b.stateNode;try{var U=b.memoizedProps,J=U.id,ae=U.onPostCommit;typeof ae=="function"&&ae(J,b.alternate===null?"mount":"update",g.passiveEffectDuration,-0)}catch(he){Hr(b,b.return,he)}}else cu(g,b,E,M);break;case 13:cu(g,b,E,M);break;case 23:break;case 22:U=b.stateNode,J=b.alternate,b.memoizedState!==null?U._visibility&2?cu(g,b,E,M):qh(g,b):U._visibility&2?cu(g,b,E,M):(U._visibility|=2,kp(g,b,E,M,(b.subtreeFlags&10256)!==0)),F&2048&&m0(J,b);break;case 24:cu(g,b,E,M),F&2048&&v0(b.alternate,b);break;default:cu(g,b,E,M)}}function kp(g,b,E,M,F){for(F=F&&(b.subtreeFlags&10256)!==0,b=b.child;b!==null;){var U=g,J=b,ae=E,he=M,Ce=J.flags;switch(J.tag){case 0:case 11:case 15:kp(U,J,ae,he,F),$m(8,J);break;case 23:break;case 22:var He=J.stateNode;J.memoizedState!==null?He._visibility&2?kp(U,J,ae,he,F):qh(U,J):(He._visibility|=2,kp(U,J,ae,he,F)),F&&Ce&2048&&m0(J.alternate,J);break;case 24:kp(U,J,ae,he,F),F&&Ce&2048&&v0(J.alternate,J);break;default:kp(U,J,ae,he,F)}b=b.sibling}}function qh(g,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var E=g,M=b,F=M.flags;switch(M.tag){case 22:qh(E,M),F&2048&&m0(M.alternate,M);break;case 24:qh(E,M),F&2048&&v0(M.alternate,M);break;default:qh(E,M)}b=b.sibling}}var Cp=8192;function Dp(g){if(g.subtreeFlags&Cp)for(g=g.child;g!==null;)LE(g),g=g.sibling}function LE(g){switch(g.tag){case 26:Dp(g),g.flags&Cp&&g.memoizedState!==null&&FF(xo,g.memoizedState,g.memoizedProps);break;case 5:Dp(g);break;case 3:case 4:var b=xo;xo=O0(g.stateNode.containerInfo),Dp(g),xo=b;break;case 22:g.memoizedState===null&&(b=g.alternate,b!==null&&b.memoizedState!==null?(b=Cp,Cp=16777216,Dp(g),Cp=b):Dp(g));break;default:Dp(g)}}function jE(g){var b=g.alternate;if(b!==null&&(g=b.child,g!==null)){b.child=null;do b=g.sibling,g.sibling=null,g=b;while(g!==null)}}function y0(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var E=0;E<b.length;E++){var M=b[E];ur=M,GM(M,g)}jE(g)}if(g.subtreeFlags&10256)for(g=g.child;g!==null;)iS(g),g=g.sibling}function iS(g){switch(g.tag){case 0:case 11:case 15:y0(g),g.flags&2048&&Hh(9,g,g.return);break;case 3:y0(g);break;case 12:y0(g);break;case 22:var b=g.stateNode;g.memoizedState!==null&&b._visibility&2&&(g.return===null||g.return.tag!==13)?(b._visibility&=-3,Ye(g)):y0(g);break;default:y0(g)}}function Ye(g){var b=g.deletions;if((g.flags&16)!==0){if(b!==null)for(var E=0;E<b.length;E++){var M=b[E];ur=M,GM(M,g)}jE(g)}for(g=g.child;g!==null;){switch(b=g,b.tag){case 0:case 11:case 15:Hh(8,b,b.return),Ye(b);break;case 22:E=b.stateNode,E._visibility&2&&(E._visibility&=-3,Ye(b));break;default:Ye(b)}g=g.sibling}}function GM(g,b){for(;ur!==null;){var E=ur;switch(E.tag){case 0:case 11:case 15:Hh(8,E,b);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var M=E.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:vm(E.memoizedState.cache)}if(M=E.child,M!==null)M.return=E,ur=M;else e:for(E=g;ur!==null;){M=ur;var F=M.sibling,U=M.return;if(jo(M),M===E){ur=null;break e}if(F!==null){F.return=U,ur=F;break e}ur=U}}}var ki={getCacheForType:function(g){var b=ja(Ki),E=b.data.get(g);return E===void 0&&(E=g(),b.data.set(g,E)),E}},b0=typeof WeakMap=="function"?WeakMap:Map,fr=0,Qr=null,nr=null,dr=0,Ir=0,ps=null,vd=!1,Ip=!1,aS=!1,uu=0,Oi=0,yd=0,Yh=0,oS=0,Ys=0,Mp=0,zm=null,Uo=null,sS=!1,lS=0,w0=1/0,x0=null,bd=null,Fa=0,wd=null,Pp=null,Np=0,cS=0,uS=null,FE=null,Hm=0,dS=null;function gs(){if((fr&2)!==0&&dr!==0)return dr&-dr;if(K.T!==null){var g=cp;return g!==0?g:I0()}return qe()}function $E(){Ys===0&&(Ys=(dr&536870912)===0||Tr?Si():536870912);var g=Qa.current;return g!==null&&(g.flags|=32),Ys}function ms(g,b,E){(g===Qr&&(Ir===2||Ir===9)||g.cancelPendingCommit!==null)&&(bi(g,0),xd(g,dr,Ys,!1)),bn(g,E),((fr&2)===0||g!==Qr)&&(g===Qr&&((fr&2)===0&&(Yh|=E),Oi===4&&xd(g,dr,Ys,!1)),du(g))}function BE(g,b,E){if((fr&6)!==0)throw Error(r(327));var M=!E&&(b&124)===0&&(b&g.expiredLanes)===0||Cr(g,b),F=M?IF(g,b):fS(g,b,!0),U=M;do{if(F===0){Ip&&!M&&xd(g,b,0,!1);break}else{if(E=g.current.alternate,U&&!WM(E)){F=fS(g,b,!1),U=!1;continue}if(F===2){if(U=b,g.errorRecoveryDisabledLanes&U)var J=0;else J=g.pendingLanes&-536870913,J=J!==0?J:J&536870912?536870912:0;if(J!==0){b=J;e:{var ae=g;F=zm;var he=ae.current.memoizedState.isDehydrated;if(he&&(bi(ae,J).flags|=256),J=fS(ae,J,!1),J!==2){if(aS&&!he){ae.errorRecoveryDisabledLanes|=U,Yh|=U,F=4;break e}U=Uo,Uo=F,U!==null&&(Uo===null?Uo=U:Uo.push.apply(Uo,U))}F=J}if(U=!1,F!==2)continue}}if(F===1){bi(g,0),xd(g,b,0,!0);break}e:{switch(M=g,U=F,U){case 0:case 1:throw Error(r(345));case 4:if((b&4194048)!==b)break;case 6:xd(M,b,Ys,!vd);break e;case 2:Uo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((b&62914560)===b&&(F=lS+300-At(),10<F)){if(xd(M,b,Ys,!vd),Jt(M,0,!0)!==0)break e;M.timeoutHandle=Vp(UE.bind(null,M,E,Uo,x0,sS,b,Ys,Yh,Mp,vd,U,2,-0,0),F);break e}UE(M,E,Uo,x0,sS,b,Ys,Yh,Mp,vd,U,0,-0,0)}}break}while(!0);du(g)}function UE(g,b,E,M,F,U,J,ae,he,Ce,He,Xe,Ie,Pe){if(g.timeoutHandle=-1,Xe=b.subtreeFlags,(Xe&8192||(Xe&16785408)===16785408)&&(lv={stylesheets:null,count:0,unsuspend:$n},LE(b),Xe=aP(),Xe!==null)){g.cancelPendingCommit=Xe(Er.bind(null,g,b,U,E,M,F,J,ae,he,He,1,Ie,Pe)),xd(g,U,J,!Ce);return}Er(g,b,U,E,M,F,J,ae,he)}function WM(g){for(var b=g;;){var E=b.tag;if((E===0||E===11||E===15)&&b.flags&16384&&(E=b.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var M=0;M<E.length;M++){var F=E[M],U=F.getSnapshot;F=F.value;try{if(!Ni(U(),F))return!1}catch{return!1}}if(E=b.child,b.subtreeFlags&16384&&E!==null)E.return=b,b=E;else{if(b===g)break;for(;b.sibling===null;){if(b.return===null||b.return===g)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function xd(g,b,E,M){b&=~oS,b&=~Yh,g.suspendedLanes|=b,g.pingedLanes&=~b,M&&(g.warmLanes|=b),M=g.expirationTimes;for(var F=b;0<F;){var U=31-Ne(F),J=1<<U;M[U]=-1,F&=~J}E!==0&&ne(g,E,b)}function S0(){return(fr&6)===0?(D0(0),!1):!0}function Ji(){if(nr!==null){if(Ir===0)var g=nr.return;else g=nr,ad=tu=null,Bx(g),Sp=null,Pm=0,g=nr;for(;g!==null;)p0(g.alternate,g),g=g.return;nr=null}}function bi(g,b){var E=g.timeoutHandle;E!==-1&&(g.timeoutHandle=-1,NF(E)),E=g.cancelPendingCommit,E!==null&&(g.cancelPendingCommit=null,E()),Ji(),Qr=g,nr=E=Zc(g.current,null),dr=b,Ir=0,ps=null,vd=!1,Ip=Cr(g,b),aS=!1,Mp=Ys=oS=Yh=yd=Oi=0,Uo=zm=null,sS=!1,(b&8)!==0&&(b|=b&32);var M=g.entangledLanes;if(M!==0)for(g=g.entanglements,M&=b;0<M;){var F=31-Ne(M),U=1<<F;b|=g[F],M&=~U}return uu=b,ap(),E}function _a(g,b){Gn=null,K.H=Xx,b===bm||b===Xy?(b=Zy(),Ir=3):b===kM?(b=Zy(),Ir=4):Ir=b===SE?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,ps=b,nr===null&&(Oi=1,$h(g,zs(b,g.current)))}function _0(){var g=K.H;return K.H=Xx,g===null?Xx:g}function T0(){var g=K.A;return K.A=ki,g}function hS(){Oi=4,vd||(dr&4194048)!==dr&&Qa.current!==null||(Ip=!0),(yd&134217727)===0&&(Yh&134217727)===0||Qr===null||xd(Qr,dr,Ys,!1)}function fS(g,b,E){var M=fr;fr|=2;var F=_0(),U=T0();(Qr!==g||dr!==b)&&(x0=null,bi(g,b)),b=!1;var J=Oi;e:do try{if(Ir!==0&&nr!==null){var ae=nr,he=ps;switch(Ir){case 8:Ji(),J=6;break e;case 3:case 2:case 9:case 6:Qa.current===null&&(b=!0);var Ce=Ir;if(Ir=0,ps=null,gc(g,ae,he,Ce),E&&Ip){J=0;break e}break;default:Ce=Ir,Ir=0,ps=null,gc(g,ae,he,Ce)}}Gm(),J=Oi;break}catch(He){_a(g,He)}while(!0);return b&&g.shellSuspendCounter++,ad=tu=null,fr=M,K.H=F,K.A=U,nr===null&&(Qr=null,dr=0,ap()),J}function Gm(){for(;nr!==null;)_d(nr)}function IF(g,b){var E=fr;fr|=2;var M=_0(),F=T0();Qr!==g||dr!==b?(x0=null,w0=At()+500,bi(g,b)):Ip=Cr(g,b);e:do try{if(Ir!==0&&nr!==null){b=nr;var U=ps;t:switch(Ir){case 1:Ir=0,ps=null,gc(g,b,U,1);break;case 2:case 9:if(CM(U)){Ir=0,ps=null,Rp(b);break}b=function(){Ir!==2&&Ir!==9||Qr!==g||(Ir=7),du(g)},U.then(b,b);break e;case 3:Ir=7;break e;case 4:Ir=5;break e;case 7:CM(U)?(Ir=0,ps=null,Rp(b)):(Ir=0,ps=null,gc(g,b,U,7));break;case 5:var J=null;switch(nr.tag){case 26:J=nr.memoizedState;case 5:case 27:var ae=nr;if(!J||pu(J)){Ir=0,ps=null;var he=ae.sibling;if(he!==null)nr=he;else{var Ce=ae.return;Ce!==null?(nr=Ce,Td(Ce)):nr=null}break t}}Ir=0,ps=null,gc(g,b,U,5);break;case 6:Ir=0,ps=null,gc(g,b,U,6);break;case 8:Ji(),Oi=6;break e;default:throw Error(r(462))}}Sd();break}catch(He){_a(g,He)}while(!0);return ad=tu=null,K.H=M,K.A=F,fr=E,nr!==null?0:(Qr=null,dr=0,ap(),Oi)}function Sd(){for(;nr!==null&&!ct();)_d(nr)}function _d(g){var b=Lm(g.alternate,g,uu);g.memoizedProps=g.pendingProps,b===null?Td(g):nr=b}function Rp(g){var b=g,E=b.alternate;switch(b.tag){case 15:case 0:b=UM(E,b,b.pendingProps,b.type,void 0,dr);break;case 11:b=UM(E,b,b.pendingProps,b.type.render,b.ref,dr);break;case 5:Bx(b);default:p0(E,b),b=nr=Cx(b,uu),b=Lm(E,b,uu)}g.memoizedProps=g.pendingProps,b===null?Td(g):nr=b}function gc(g,b,E,M){ad=tu=null,Bx(b),Sp=null,Pm=0;var F=b.return;try{if(Mt(g,F,b,E,dr)){Oi=1,$h(g,zs(E,g.current)),nr=null;return}}catch(U){if(F!==null)throw nr=F,U;Oi=1,$h(g,zs(E,g.current)),nr=null;return}b.flags&32768?(Tr||M===1?g=!0:Ip||(dr&536870912)!==0?g=!1:(vd=g=!0,(M===2||M===9||M===3||M===6)&&(M=Qa.current,M!==null&&M.tag===13&&(M.flags|=16384))),Wm(b,g)):Td(b)}function Td(g){var b=g;do{if((b.flags&32768)!==0){Wm(b,vd);return}g=b.return;var E=zM(b.alternate,b,uu);if(E!==null){nr=E;return}if(b=b.sibling,b!==null){nr=b;return}nr=b=g}while(b!==null);Oi===0&&(Oi=5)}function Wm(g,b){do{var E=Fm(g.alternate,g);if(E!==null){E.flags&=32767,nr=E;return}if(E=g.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!b&&(g=g.sibling,g!==null)){nr=g;return}nr=g=E}while(g!==null);Oi=6,nr=null}function Er(g,b,E,M,F,U,J,ae,he){g.cancelPendingCommit=null;do A0();while(Fa!==0);if((fr&6)!==0)throw Error(r(327));if(b!==null){if(b===g.current)throw Error(r(177));if(U=b.lanes|b.childLanes,U|=$y,Ue(g,E,U,J,ae,he),g===Qr&&(nr=Qr=null,dr=0),Pp=b,wd=g,Np=E,cS=U,uS=F,FE=M,(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?(g.callbackNode=null,g.callbackPriority=0,Ed(vn,function(){return GE(),null})):(g.callbackNode=null,g.callbackPriority=0),M=(b.flags&13878)!==0,(b.subtreeFlags&13878)!==0||M){M=K.T,K.T=null,F=X.p,X.p=2,J=fr,fr|=4;try{Vm(g,b,E)}finally{fr=J,X.p=F,K.T=M}}Fa=1,E0(),VE(),zE()}}function E0(){if(Fa===1){Fa=0;var g=wd,b=Pp,E=(b.flags&13878)!==0;if((b.subtreeFlags&13878)!==0||E){E=K.T,K.T=null;var M=X.p;X.p=2;var F=fr;fr|=4;try{NE(b,g);var U=JE,J=nd(g.containerInfo),ae=U.focusedElem,he=U.selectionRange;if(J!==ae&&ae&&ae.ownerDocument&&Th(ae.ownerDocument.documentElement,ae)){if(he!==null&&bx(ae)){var Ce=he.start,He=he.end;if(He===void 0&&(He=Ce),"selectionStart"in ae)ae.selectionStart=Ce,ae.selectionEnd=Math.min(He,ae.value.length);else{var Xe=ae.ownerDocument||document,Ie=Xe&&Xe.defaultView||window;if(Ie.getSelection){var Pe=Ie.getSelection(),An=ae.textContent.length,gn=Math.min(he.start,An),di=he.end===void 0?gn:Math.min(he.end,An);!Pe.extend&&gn>di&&(J=di,di=gn,gn=J);var Se=cm(ae,gn),ye=cm(ae,di);if(Se&&ye&&(Pe.rangeCount!==1||Pe.anchorNode!==Se.node||Pe.anchorOffset!==Se.offset||Pe.focusNode!==ye.node||Pe.focusOffset!==ye.offset)){var Ae=Xe.createRange();Ae.setStart(Se.node,Se.offset),Pe.removeAllRanges(),gn>di?(Pe.addRange(Ae),Pe.extend(ye.node,ye.offset)):(Ae.setEnd(ye.node,ye.offset),Pe.addRange(Ae))}}}}for(Xe=[],Pe=ae;Pe=Pe.parentNode;)Pe.nodeType===1&&Xe.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<Xe.length;ae++){var Ge=Xe[ae];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}vc=!!wS,JE=wS=null}finally{fr=F,X.p=M,K.T=E}}g.current=b,Fa=2}}function VE(){if(Fa===2){Fa=0;var g=wd,b=Pp,E=(b.flags&8772)!==0;if((b.subtreeFlags&8772)!==0||E){E=K.T,K.T=null;var M=X.p;X.p=2;var F=fr;fr|=4;try{Ap(g,b.alternate,b)}finally{fr=F,X.p=M,K.T=E}}Fa=3}}function zE(){if(Fa===4||Fa===3){Fa=0,xt();var g=wd,b=Pp,E=Np,M=FE;(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?Fa=5:(Fa=0,Pp=wd=null,HE(g,g.pendingLanes));var F=g.pendingLanes;if(F===0&&(bd=null),ke(E),b=b.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Te,b,void 0,(b.current.flags&128)===128)}catch{}if(M!==null){b=K.T,F=X.p,X.p=2,K.T=null;try{for(var U=g.onRecoverableError,J=0;J<M.length;J++){var ae=M[J];U(ae.value,{componentStack:ae.stack})}}finally{K.T=b,X.p=F}}(Np&3)!==0&&A0(),du(g),F=g.pendingLanes,(E&4194090)!==0&&(F&42)!==0?g===dS?Hm++:(Hm=0,dS=g):Hm=0,D0(0)}}function HE(g,b){(g.pooledCacheLanes&=b)===0&&(b=g.pooledCache,b!=null&&(g.pooledCache=null,vm(b)))}function A0(g){return E0(),VE(),zE(),GE()}function GE(){if(Fa!==5)return!1;var g=wd,b=cS;cS=0;var E=ke(Np),M=K.T,F=X.p;try{X.p=32>E?32:E,K.T=null,E=uS,uS=null;var U=wd,J=Np;if(Fa=0,Pp=wd=null,Np=0,(fr&6)!==0)throw Error(r(331));var ae=fr;if(fr|=4,iS(U.current),OE(U,U.current,J,E),fr=ae,D0(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Te,U)}catch{}return!0}finally{X.p=F,K.T=M,HE(g,b)}}function WE(g,b,E){b=zs(E,b),b=c0(g.stateNode,b,2),g=ld(g,b,2),g!==null&&(bn(g,2),du(g))}function Hr(g,b,E){if(g.tag===3)WE(g,g,E);else for(;b!==null;){if(b.tag===3){WE(b,g,E);break}else if(b.tag===1){var M=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(bd===null||!bd.has(M))){g=zs(E,g),E=xE(2),M=ld(b,E,2),M!==null&&(xr(E,M,b,g),bn(M,2),du(M));break}}b=b.return}}function pS(g,b,E){var M=g.pingCache;if(M===null){M=g.pingCache=new b0;var F=new Set;M.set(b,F)}else F=M.get(b),F===void 0&&(F=new Set,M.set(b,F));F.has(E)||(aS=!0,F.add(E),g=qM.bind(null,g,b,E),b.then(g,g))}function qM(g,b,E){var M=g.pingCache;M!==null&&M.delete(b),g.pingedLanes|=g.suspendedLanes&E,g.warmLanes&=~E,Qr===g&&(dr&E)===E&&(Oi===4||Oi===3&&(dr&62914560)===dr&&300>At()-lS?(fr&2)===0&&bi(g,0):oS|=E,Mp===dr&&(Mp=0)),du(g)}function qE(g,b){b===0&&(b=mo()),g=op(g,b),g!==null&&(bn(g,b),du(g))}function YM(g){var b=g.memoizedState,E=0;b!==null&&(E=b.retryLane),qE(g,E)}function k0(g,b){var E=0;switch(g.tag){case 13:var M=g.stateNode,F=g.memoizedState;F!==null&&(E=F.retryLane);break;case 19:M=g.stateNode;break;case 22:M=g.stateNode._retryCache;break;default:throw Error(r(314))}M!==null&&M.delete(b),qE(g,E)}function Ed(g,b){return $e(g,b)}var C0=null,Ad=null,Ar=!1,gS=!1,Op=!1,Lp=0;function du(g){g!==Ad&&g.next===null&&(Ad===null?C0=Ad=g:Ad=Ad.next=g),gS=!0,Ar||(Ar=!0,ZE())}function D0(g,b){if(!Op&&gS){Op=!0;do for(var E=!1,M=C0;M!==null;){if(g!==0){var F=M.pendingLanes;if(F===0)var U=0;else{var J=M.suspendedLanes,ae=M.pingedLanes;U=(1<<31-Ne(42|g)+1)-1,U&=F&~(J&~ae),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(E=!0,XE(M,U))}else U=dr,U=Jt(M,M===Qr?U:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),(U&3)===0||Cr(M,U)||(E=!0,XE(M,U));M=M.next}while(E);Op=!1}}function mS(){YE()}function YE(){gS=Ar=!1;var g=0;Lp!==0&&(tv()&&(g=Lp),Lp=0);for(var b=At(),E=null,M=C0;M!==null;){var F=M.next,U=Gr(M,b);U===0?(M.next=null,E===null?C0=F:E.next=F,F===null&&(Ad=E)):(E=M,(g!==0||(U&3)!==0)&&(gS=!0)),M=F}D0(g)}function Gr(g,b){for(var E=g.suspendedLanes,M=g.pingedLanes,F=g.expirationTimes,U=g.pendingLanes&-62914561;0<U;){var J=31-Ne(U),ae=1<<J,he=F[J];he===-1?((ae&E)===0||(ae&M)!==0)&&(F[J]=hn(ae,b)):he<=b&&(g.expiredLanes|=ae),U&=~ae}if(b=Qr,E=dr,E=Jt(g,g===b?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),M=g.callbackNode,E===0||g===b&&(Ir===2||Ir===9)||g.cancelPendingCommit!==null)return M!==null&&M!==null&&We(M),g.callbackNode=null,g.callbackPriority=0;if((E&3)===0||Cr(g,E)){if(b=E&-E,b===g.callbackPriority)return b;switch(M!==null&&We(M),ke(E)){case 2:case 8:E=Rn;break;case 32:E=vn;break;case 268435456:E=je;break;default:E=vn}return M=KE.bind(null,g),E=$e(E,M),g.callbackPriority=b,g.callbackNode=E,b}return M!==null&&M!==null&&We(M),g.callbackPriority=2,g.callbackNode=null,2}function KE(g,b){if(Fa!==0&&Fa!==5)return g.callbackNode=null,g.callbackPriority=0,null;var E=g.callbackNode;if(A0()&&g.callbackNode!==E)return null;var M=dr;return M=Jt(g,g===Qr?M:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),M===0?null:(BE(g,M,b),Gr(g,At()),g.callbackNode!=null&&g.callbackNode===E?KE.bind(null,g):null)}function XE(g,b){if(A0())return null;BE(g,b,!0)}function ZE(){RF(function(){(fr&6)!==0?$e(Yt,mS):YE()})}function I0(){return Lp===0&&(Lp=Si()),Lp}function qm(g){return g==null||typeof g=="symbol"||typeof g=="boolean"?null:typeof g=="function"?g:wh(""+g)}function vS(g,b){var E=b.ownerDocument.createElement("input");return E.name=b.name,E.value=b.value,g.id&&E.setAttribute("form",g.id),b.parentNode.insertBefore(E,b),g=new FormData(g),E.parentNode.removeChild(E),g}function M0(g,b,E,M,F){if(b==="submit"&&E&&E.stateNode===F){var U=qm((F[St]||null).action),J=M.submitter;J&&(b=(b=J[St]||null)?qm(b.formAction):J.getAttribute("formAction"),b!==null&&(U=b,J=null));var ae=new Gc("action","action",null,M,F);g.push({event:ae,listeners:[{instance:null,listener:function(){if(M.defaultPrevented){if(Lp!==0){var he=J?vS(F,J):new FormData(F);Yx(E,{pending:!0,data:he,method:F.method,action:U},null,he)}}else typeof U=="function"&&(ae.preventDefault(),he=J?vS(F,J):new FormData(F),Yx(E,{pending:!0,data:he,method:F.method,action:U},U,he))},currentTarget:F}]})}}for(var Ym=0;Ym<Tx.length;Ym++){var yS=Tx[Ym],KM=yS.toLowerCase(),bS=yS[0].toUpperCase()+yS.slice(1);oc(KM,"on"+bS)}oc(VT,"onAnimationEnd"),oc(SM,"onAnimationIteration"),oc(Sx,"onAnimationStart"),oc("dblclick","onDoubleClick"),oc("focusin","onFocus"),oc("focusout","onBlur"),oc(_x,"onTransitionRun"),oc(_M,"onTransitionStart"),oc(zT,"onTransitionCancel"),oc(HT,"onTransitionEnd"),wl("onMouseEnter",["mouseout","mouseover"]),wl("onMouseLeave",["mouseout","mouseover"]),wl("onPointerEnter",["pointerout","pointerover"]),wl("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Km));function XM(g,b){b=(b&4)!==0;for(var E=0;E<g.length;E++){var M=g[E],F=M.event;M=M.listeners;e:{var U=void 0;if(b)for(var J=M.length-1;0<=J;J--){var ae=M[J],he=ae.instance,Ce=ae.currentTarget;if(ae=ae.listener,he!==U&&F.isPropagationStopped())break e;U=ae,F.currentTarget=Ce;try{U(F)}catch(He){Rm(He)}F.currentTarget=null,U=he}else for(J=0;J<M.length;J++){if(ae=M[J],he=ae.instance,Ce=ae.currentTarget,ae=ae.listener,he!==U&&F.isPropagationStopped())break e;U=ae,F.currentTarget=Ce;try{U(F)}catch(He){Rm(He)}F.currentTarget=null,U=he}}}}function Vn(g,b){var E=b[Gt];E===void 0&&(E=b[Gt]=new Set);var M=g+"__bubble";E.has(M)||(ZM(b,g,2,!1),E.add(M))}function jp(g,b,E){var M=0;b&&(M|=4),ZM(E,g,M,b)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Xm(g){if(!g[Kh]){g[Kh]=!0,ph.forEach(function(E){E!=="selectionchange"&&(MF.has(E)||jp(E,!1,g),jp(E,!0,g))});var b=g.nodeType===9?g:g.ownerDocument;b===null||b[Kh]||(b[Kh]=!0,jp("selectionchange",!1,b))}}function ZM(g,b,E,M){switch(G0(b)){case 2:var F=z0;break;case 8:F=kS;break;default:F=uA}E=F.bind(null,b,E,g),F=void 0,!Ka||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(F=!0),M?F!==void 0?g.addEventListener(b,E,{capture:!0,passive:F}):g.addEventListener(b,E,!0):F!==void 0?g.addEventListener(b,E,{passive:F}):g.addEventListener(b,E,!1)}function Zm(g,b,E,M,F){var U=M;if((b&1)===0&&(b&2)===0&&M!==null)e:for(;;){if(M===null)return;var J=M.tag;if(J===3||J===4){var ae=M.stateNode.containerInfo;if(ae===F)break;if(J===4)for(J=M.return;J!==null;){var he=J.tag;if((he===3||he===4)&&J.stateNode.containerInfo===F)return;J=J.return}for(;ae!==null;){if(J=Xl(ae),J===null)return;if(he=J.tag,he===5||he===6||he===26||he===27){M=U=J;continue e}ae=ae.parentNode}}M=M.return}ux(function(){var Ce=U,He=$s(E),Xe=[];e:{var Ie=GT.get(g);if(Ie!==void 0){var Pe=Gc,An=g;switch(g){case"keypress":if(nc(E)===0)break e;case"keydown":case"keyup":Pe=np;break;case"focusin":An="focus",Pe=im;break;case"focusout":An="blur",Pe=im;break;case"beforeblur":case"afterblur":Pe=im;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=hx;break;case VT:case SM:case Sx:Pe=am;break;case HT:Pe=px;break;case"scroll":case"scrollend":Pe=Py;break;case"wheel":Pe=sm;break;case"copy":case"cut":case"paste":Pe=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=ic;break;case"toggle":case"beforetoggle":Pe=gx}var gn=(b&4)!==0,di=!gn&&(g==="scroll"||g==="scrollend"),Se=gn?Ie!==null?Ie+"Capture":null:Ie;gn=[];for(var ye=Ce,Ae;ye!==null;){var Ge=ye;if(Ae=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||Ae===null||Se===null||(Ge=Jf(ye,Se),Ge!=null&&gn.push(Qm(ye,Ge,Ae))),di)break;ye=ye.return}0<gn.length&&(Ie=new Pe(Ie,An,null,E,He),Xe.push({event:Ie,listeners:gn}))}}if((b&7)===0){e:{if(Ie=g==="mouseover"||g==="pointerover",Pe=g==="mouseout"||g==="pointerout",Ie&&E!==as&&(An=E.relatedTarget||E.fromElement)&&(Xl(An)||An[bt]))break e;if((Pe||Ie)&&(Ie=He.window===He?He:(Ie=He.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Pe?(An=E.relatedTarget||E.toElement,Pe=Ce,An=An?Xl(An):null,An!==null&&(di=a(An),gn=An.tag,An!==di||gn!==5&&gn!==27&&gn!==6)&&(An=null)):(Pe=null,An=Ce),Pe!==An)){if(gn=Tl,Ge="onMouseLeave",Se="onMouseEnter",ye="mouse",(g==="pointerout"||g==="pointerover")&&(gn=ic,Ge="onPointerLeave",Se="onPointerEnter",ye="pointer"),di=Pe==null?Ie:bl(Pe),Ae=An==null?Ie:bl(An),Ie=new gn(Ge,ye+"leave",Pe,E,He),Ie.target=di,Ie.relatedTarget=Ae,Ge=null,Xl(He)===Ce&&(gn=new gn(Se,ye+"enter",An,E,He),gn.target=Ae,gn.relatedTarget=di,Ge=gn),di=Ge,Pe&&An)t:{for(gn=Pe,Se=An,ye=0,Ae=gn;Ae;Ae=hu(Ae))ye++;for(Ae=0,Ge=Se;Ge;Ge=hu(Ge))Ae++;for(;0<ye-Ae;)gn=hu(gn),ye--;for(;0<Ae-ye;)Se=hu(Se),Ae--;for(;ye--;){if(gn===Se||Se!==null&&gn===Se.alternate)break t;gn=hu(gn),Se=hu(Se)}gn=null}else gn=null;Pe!==null&&Jm(Xe,Ie,Pe,gn,!1),An!==null&&di!==null&&Jm(Xe,di,An,gn,!0)}}e:{if(Ie=Ce?bl(Ce):window,Pe=Ie.nodeName&&Ie.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Ie.type==="file")var Lt=Xc;else if(Pi(Ie))if(yo)Lt=$T;else{Lt=jT;var lr=yx}else Pe=Ie.nodeName,!Pe||Pe.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?Ce&&bh(Ce.elementType)&&(Lt=Xc):Lt=FT;if(Lt&&(Lt=Lt(g,Ce))){Us(Xe,Lt,E,He);break e}lr&&lr(g,Ie,Ce),g==="focusout"&&Ce&&Ie.type==="number"&&Ce.memoizedProps.value!=null&&Ju(Ie,"number",Ie.value)}switch(lr=Ce?bl(Ce):window,g){case"focusin":(Pi(lr)||lr.contentEditable==="true")&&(ip=lr,UT=Ce,Eh=null);break;case"focusout":Eh=UT=ip=null;break;case"mousedown":Fy=!0;break;case"contextmenu":case"mouseup":case"dragend":Fy=!1,xx(Xe,E,He);break;case"selectionchange":if(xM)break;case"keydown":case"keyup":xx(Xe,E,He)}var Xt;if(Kc)e:{switch(g){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else tr?Le(g,E)&&(wn="onCompositionEnd"):g==="keydown"&&E.keyCode===229&&(wn="onCompositionStart");wn&&(Q&&E.locale!=="ko"&&(tr||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&tr&&(Xt=ep()):(_l=He,ec="value"in _l?_l.value:_l.textContent,tr=!0)),lr=P0(Ce,wn),0<lr.length&&(wn=new _h(wn,g,null,E,He),Xe.push({event:wn,listeners:lr}),Xt?wn.data=Xt:(Xt=ht(E),Xt!==null&&(wn.data=Xt)))),(Xt=q?wa(g,E):Hn(g,E))&&(wn=P0(Ce,"onBeforeInput"),0<wn.length&&(lr=new _h("onBeforeInput","beforeinput",null,E,He),Xe.push({event:lr,listeners:wn}),lr.data=Xt)),M0(Xe,g,Ce,E,He)}XM(Xe,b)})}function Qm(g,b,E){return{instance:g,listener:b,currentTarget:E}}function P0(g,b){for(var E=b+"Capture",M=[];g!==null;){var F=g,U=F.stateNode;if(F=F.tag,F!==5&&F!==26&&F!==27||U===null||(F=Jf(g,E),F!=null&&M.unshift(Qm(g,F,U)),F=Jf(g,b),F!=null&&M.push(Qm(g,F,U))),g.tag===3)return M;g=g.return}return[]}function hu(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5&&g.tag!==27);return g||null}function Jm(g,b,E,M,F){for(var U=b._reactName,J=[];E!==null&&E!==M;){var ae=E,he=ae.alternate,Ce=ae.stateNode;if(ae=ae.tag,he!==null&&he===M)break;ae!==5&&ae!==26&&ae!==27||Ce===null||(he=Ce,F?(Ce=Jf(E,U),Ce!=null&&J.unshift(Qm(E,Ce,he))):F||(Ce=Jf(E,U),Ce!=null&&J.push(Qm(E,Ce,he)))),E=E.return}J.length!==0&&g.push({event:b,listeners:J})}var PF=/\r\n?/g,QM=/\u0000|\uFFFD/g;function JM(g){return(typeof g=="string"?g:""+g).replace(PF,`
`).replace(QM,"")}function eP(g,b){return b=JM(b),JM(g)===b}function Fp(){}function Sr(g,b,E,M,F,U){switch(E){case"children":typeof M=="string"?b==="body"||b==="textarea"&&M===""||Fs(g,M):(typeof M=="number"||typeof M=="bigint")&&b!=="body"&&Fs(g,""+M);break;case"className":Zl(g,"class",M);break;case"tabIndex":Zl(g,"tabindex",M);break;case"dir":case"role":case"viewBox":case"width":case"height":Zl(g,E,M);break;case"style":em(g,M,U);break;case"data":if(b!=="object"){Zl(g,"data",M);break}case"src":case"href":if(M===""&&(b!=="a"||E!=="href")){g.removeAttribute(E);break}if(M==null||typeof M=="function"||typeof M=="symbol"||typeof M=="boolean"){g.removeAttribute(E);break}M=wh(""+M),g.setAttribute(E,M);break;case"action":case"formAction":if(typeof M=="function"){g.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(E==="formAction"?(b!=="input"&&Sr(g,b,"name",F.name,F,null),Sr(g,b,"formEncType",F.formEncType,F,null),Sr(g,b,"formMethod",F.formMethod,F,null),Sr(g,b,"formTarget",F.formTarget,F,null)):(Sr(g,b,"encType",F.encType,F,null),Sr(g,b,"method",F.method,F,null),Sr(g,b,"target",F.target,F,null)));if(M==null||typeof M=="symbol"||typeof M=="boolean"){g.removeAttribute(E);break}M=wh(""+M),g.setAttribute(E,M);break;case"onClick":M!=null&&(g.onclick=Fp);break;case"onScroll":M!=null&&Vn("scroll",g);break;case"onScrollEnd":M!=null&&Vn("scrollend",g);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(r(61));if(E=M.__html,E!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=E}}break;case"multiple":g.multiple=M&&typeof M!="function"&&typeof M!="symbol";break;case"muted":g.muted=M&&typeof M!="function"&&typeof M!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(M==null||typeof M=="function"||typeof M=="boolean"||typeof M=="symbol"){g.removeAttribute("xlink:href");break}E=wh(""+M),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":M!=null&&typeof M!="function"&&typeof M!="symbol"?g.setAttribute(E,""+M):g.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":M&&typeof M!="function"&&typeof M!="symbol"?g.setAttribute(E,""):g.removeAttribute(E);break;case"capture":case"download":M===!0?g.setAttribute(E,""):M!==!1&&M!=null&&typeof M!="function"&&typeof M!="symbol"?g.setAttribute(E,M):g.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":M!=null&&typeof M!="function"&&typeof M!="symbol"&&!isNaN(M)&&1<=M?g.setAttribute(E,M):g.removeAttribute(E);break;case"rowSpan":case"start":M==null||typeof M=="function"||typeof M=="symbol"||isNaN(M)?g.removeAttribute(E):g.setAttribute(E,M);break;case"popover":Vn("beforetoggle",g),Vn("toggle",g),mh(g,"popover",M);break;case"xlinkActuate":er(g,"http://www.w3.org/1999/xlink","xlink:actuate",M);break;case"xlinkArcrole":er(g,"http://www.w3.org/1999/xlink","xlink:arcrole",M);break;case"xlinkRole":er(g,"http://www.w3.org/1999/xlink","xlink:role",M);break;case"xlinkShow":er(g,"http://www.w3.org/1999/xlink","xlink:show",M);break;case"xlinkTitle":er(g,"http://www.w3.org/1999/xlink","xlink:title",M);break;case"xlinkType":er(g,"http://www.w3.org/1999/xlink","xlink:type",M);break;case"xmlBase":er(g,"http://www.w3.org/XML/1998/namespace","xml:base",M);break;case"xmlLang":er(g,"http://www.w3.org/XML/1998/namespace","xml:lang",M);break;case"xmlSpace":er(g,"http://www.w3.org/XML/1998/namespace","xml:space",M);break;case"is":mh(g,"is",M);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=lx.get(E)||E,mh(g,E,M))}}function $p(g,b,E,M,F,U){switch(E){case"style":em(g,M,U);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(r(61));if(E=M.__html,E!=null){if(F.children!=null)throw Error(r(60));g.innerHTML=E}}break;case"children":typeof M=="string"?Fs(g,M):(typeof M=="number"||typeof M=="bigint")&&Fs(g,""+M);break;case"onScroll":M!=null&&Vn("scroll",g);break;case"onScrollEnd":M!=null&&Vn("scrollend",g);break;case"onClick":M!=null&&(g.onclick=Fp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(F=E.endsWith("Capture"),b=E.slice(2,F?E.length-7:void 0),U=g[St]||null,U=U!=null?U[E]:null,typeof U=="function"&&g.removeEventListener(b,U,F),typeof M=="function")){typeof U!="function"&&U!==null&&(E in g?g[E]=null:g.hasAttribute(E)&&g.removeAttribute(E)),g.addEventListener(b,M,F);break e}E in g?g[E]=M:M===!0?g.setAttribute(E,""):mh(g,E,M)}}}function da(g,b,E){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vn("error",g),Vn("load",g);var M=!1,F=!1,U;for(U in E)if(E.hasOwnProperty(U)){var J=E[U];if(J!=null)switch(U){case"src":M=!0;break;case"srcSet":F=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:Sr(g,b,U,J,E,null)}}F&&Sr(g,b,"srcSet",E.srcSet,E,null),M&&Sr(g,b,"src",E.src,E,null);return;case"input":Vn("invalid",g);var ae=U=J=F=null,he=null,Ce=null;for(M in E)if(E.hasOwnProperty(M)){var He=E[M];if(He!=null)switch(M){case"name":F=He;break;case"type":J=He;break;case"checked":he=He;break;case"defaultChecked":Ce=He;break;case"value":U=He;break;case"defaultValue":ae=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,b));break;default:Sr(g,b,M,He,E,null)}}yh(g,U,ae,he,Ce,J,F,!1),vh(g);return;case"select":Vn("invalid",g),M=J=U=null;for(F in E)if(E.hasOwnProperty(F)&&(ae=E[F],ae!=null))switch(F){case"value":U=ae;break;case"defaultValue":J=ae;break;case"multiple":M=ae;default:Sr(g,b,F,ae,E,null)}b=U,E=J,g.multiple=!!M,b!=null?Oo(g,!!M,b,!1):E!=null&&Oo(g,!!M,E,!0);return;case"textarea":Vn("invalid",g),U=F=M=null;for(J in E)if(E.hasOwnProperty(J)&&(ae=E[J],ae!=null))switch(J){case"value":M=ae;break;case"defaultValue":F=ae;break;case"children":U=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(91));break;default:Sr(g,b,J,ae,E,null)}Qf(g,M,F,U),vh(g);return;case"option":for(he in E)if(E.hasOwnProperty(he)&&(M=E[he],M!=null))switch(he){case"selected":g.selected=M&&typeof M!="function"&&typeof M!="symbol";break;default:Sr(g,b,he,M,E,null)}return;case"dialog":Vn("beforetoggle",g),Vn("toggle",g),Vn("cancel",g),Vn("close",g);break;case"iframe":case"object":Vn("load",g);break;case"video":case"audio":for(M=0;M<Km.length;M++)Vn(Km[M],g);break;case"image":Vn("error",g),Vn("load",g);break;case"details":Vn("toggle",g);break;case"embed":case"source":case"link":Vn("error",g),Vn("load",g);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ce in E)if(E.hasOwnProperty(Ce)&&(M=E[Ce],M!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:Sr(g,b,Ce,M,E,null)}return;default:if(bh(b)){for(He in E)E.hasOwnProperty(He)&&(M=E[He],M!==void 0&&$p(g,b,He,M,E,void 0));return}}for(ae in E)E.hasOwnProperty(ae)&&(M=E[ae],M!=null&&Sr(g,b,ae,M,E,null))}function QE(g,b,E,M){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var F=null,U=null,J=null,ae=null,he=null,Ce=null,He=null;for(Pe in E){var Xe=E[Pe];if(E.hasOwnProperty(Pe)&&Xe!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":he=Xe;default:M.hasOwnProperty(Pe)||Sr(g,b,Pe,null,M,Xe)}}for(var Ie in M){var Pe=M[Ie];if(Xe=E[Ie],M.hasOwnProperty(Ie)&&(Pe!=null||Xe!=null))switch(Ie){case"type":U=Pe;break;case"name":F=Pe;break;case"checked":Ce=Pe;break;case"defaultChecked":He=Pe;break;case"value":J=Pe;break;case"defaultValue":ae=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(r(137,b));break;default:Pe!==Xe&&Sr(g,b,Ie,Pe,M,Xe)}}Na(g,J,ae,he,Ce,He,U,F);return;case"select":Pe=J=ae=Ie=null;for(U in E)if(he=E[U],E.hasOwnProperty(U)&&he!=null)switch(U){case"value":break;case"multiple":Pe=he;default:M.hasOwnProperty(U)||Sr(g,b,U,null,M,he)}for(F in M)if(U=M[F],he=E[F],M.hasOwnProperty(F)&&(U!=null||he!=null))switch(F){case"value":Ie=U;break;case"defaultValue":ae=U;break;case"multiple":J=U;default:U!==he&&Sr(g,b,F,U,M,he)}b=ae,E=J,M=Pe,Ie!=null?Oo(g,!!E,Ie,!1):!!M!=!!E&&(b!=null?Oo(g,!!E,b,!0):Oo(g,!!E,E?[]:"",!1));return;case"textarea":Pe=Ie=null;for(ae in E)if(F=E[ae],E.hasOwnProperty(ae)&&F!=null&&!M.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:Sr(g,b,ae,null,M,F)}for(J in M)if(F=M[J],U=E[J],M.hasOwnProperty(J)&&(F!=null||U!=null))switch(J){case"value":Ie=F;break;case"defaultValue":Pe=F;break;case"children":break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:F!==U&&Sr(g,b,J,F,M,U)}jr(g,Ie,Pe);return;case"option":for(var An in E)if(Ie=E[An],E.hasOwnProperty(An)&&Ie!=null&&!M.hasOwnProperty(An))switch(An){case"selected":g.selected=!1;break;default:Sr(g,b,An,null,M,Ie)}for(he in M)if(Ie=M[he],Pe=E[he],M.hasOwnProperty(he)&&Ie!==Pe&&(Ie!=null||Pe!=null))switch(he){case"selected":g.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:Sr(g,b,he,Ie,M,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gn in E)Ie=E[gn],E.hasOwnProperty(gn)&&Ie!=null&&!M.hasOwnProperty(gn)&&Sr(g,b,gn,null,M,Ie);for(Ce in M)if(Ie=M[Ce],Pe=E[Ce],M.hasOwnProperty(Ce)&&Ie!==Pe&&(Ie!=null||Pe!=null))switch(Ce){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,b));break;default:Sr(g,b,Ce,Ie,M,Pe)}return;default:if(bh(b)){for(var di in E)Ie=E[di],E.hasOwnProperty(di)&&Ie!==void 0&&!M.hasOwnProperty(di)&&$p(g,b,di,void 0,M,Ie);for(He in M)Ie=M[He],Pe=E[He],!M.hasOwnProperty(He)||Ie===Pe||Ie===void 0&&Pe===void 0||$p(g,b,He,Ie,M,Pe);return}}for(var Se in E)Ie=E[Se],E.hasOwnProperty(Se)&&Ie!=null&&!M.hasOwnProperty(Se)&&Sr(g,b,Se,null,M,Ie);for(Xe in M)Ie=M[Xe],Pe=E[Xe],!M.hasOwnProperty(Xe)||Ie===Pe||Ie==null&&Pe==null||Sr(g,b,Xe,Ie,M,Pe)}var wS=null,JE=null;function xS(g){return g.nodeType===9?g:g.ownerDocument}function ev(g){switch(g){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tP(g,b){if(g===0)switch(b){case"svg":return 1;case"math":return 2;default:return 0}return g===1&&b==="foreignObject"?0:g}function Bp(g,b){return g==="textarea"||g==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.children=="bigint"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var Up=null;function tv(){var g=window.event;return g&&g.type==="popstate"?g===Up?!1:(Up=g,!0):(Up=null,!1)}var Vp=typeof setTimeout=="function"?setTimeout:void 0,NF=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,RF=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(g){return nv.resolve(null).then(g).catch(eA)}:Vp;function eA(g){setTimeout(function(){throw g})}function fu(g){return g==="head"}function rv(g,b){var E=b,M=0,F=0;do{var U=E.nextSibling;if(g.removeChild(E),U&&U.nodeType===8)if(E=U.data,E==="/$"){if(0<M&&8>M){E=M;var J=g.ownerDocument;if(E&1&&R0(J.documentElement),E&2&&R0(J.body),E&4)for(E=J.head,R0(E),J=E.firstChild;J;){var ae=J.nextSibling,he=J.nodeName;J[rs]||he==="SCRIPT"||he==="STYLE"||he==="LINK"&&J.rel.toLowerCase()==="stylesheet"||E.removeChild(J),J=ae}}if(F===0){g.removeChild(U),re(b);return}F--}else E==="$"||E==="$?"||E==="$!"?F++:M=E.charCodeAt(0)-48;else M=0;E=U}while(E);re(b)}function tA(g){var b=g.firstChild;for(b&&b.nodeType===10&&(b=b.nextSibling);b;){var E=b;switch(b=b.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":tA(E),sa(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}g.removeChild(E)}}function OF(g,b,E,M){for(;g.nodeType===1;){var F=E;if(g.nodeName.toLowerCase()!==b.toLowerCase()){if(!M&&(g.nodeName!=="INPUT"||g.type!=="hidden"))break}else if(M){if(!g[rs])switch(b){case"meta":if(!g.hasAttribute("itemprop"))break;return g;case"link":if(U=g.getAttribute("rel"),U==="stylesheet"&&g.hasAttribute("data-precedence"))break;if(U!==F.rel||g.getAttribute("href")!==(F.href==null||F.href===""?null:F.href)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin)||g.getAttribute("title")!==(F.title==null?null:F.title))break;return g;case"style":if(g.hasAttribute("data-precedence"))break;return g;case"script":if(U=g.getAttribute("src"),(U!==(F.src==null?null:F.src)||g.getAttribute("type")!==(F.type==null?null:F.type)||g.getAttribute("crossorigin")!==(F.crossOrigin==null?null:F.crossOrigin))&&U&&g.hasAttribute("async")&&!g.hasAttribute("itemprop"))break;return g;default:return g}}else if(b==="input"&&g.type==="hidden"){var U=F.name==null?null:""+F.name;if(F.type==="hidden"&&g.getAttribute("name")===U)return g}else return g;if(g=So(g.nextSibling),g===null)break}return null}function nA(g,b,E){if(b==="")return null;for(;g.nodeType!==3;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!E||(g=So(g.nextSibling),g===null))return null;return g}function SS(g){return g.data==="$!"||g.data==="$?"&&g.ownerDocument.readyState==="complete"}function nP(g,b){var E=g.ownerDocument;if(g.data!=="$?"||E.readyState==="complete")b();else{var M=function(){b(),E.removeEventListener("DOMContentLoaded",M)};E.addEventListener("DOMContentLoaded",M),g._reactRetry=M}}function So(g){for(;g!=null;g=g.nextSibling){var b=g.nodeType;if(b===1||b===3)break;if(b===8){if(b=g.data,b==="$"||b==="$!"||b==="$?"||b==="F!"||b==="F")break;if(b==="/$")return null}}return g}var rA=null;function rP(g){g=g.previousSibling;for(var b=0;g;){if(g.nodeType===8){var E=g.data;if(E==="$"||E==="$!"||E==="$?"){if(b===0)return g;b--}else E==="/$"&&b++}g=g.previousSibling}return null}function N0(g,b,E){switch(b=xS(E),g){case"html":if(g=b.documentElement,!g)throw Error(r(452));return g;case"head":if(g=b.head,!g)throw Error(r(453));return g;case"body":if(g=b.body,!g)throw Error(r(454));return g;default:throw Error(r(451))}}function R0(g){for(var b=g.attributes;b.length;)g.removeAttributeNode(b[0]);sa(g)}var Ml=new Map,Xh=new Set;function O0(g){return typeof g.getRootNode=="function"?g.getRootNode():g.nodeType===9?g:g.ownerDocument}var mc=X.d;X.d={f:LF,r:iA,D:jF,C:TS,L:L0,m:iP,X:F0,S:j0,M:$0};function LF(){var g=mc.f(),b=S0();return g||b}function iA(g){var b=la(g);b!==null&&b.tag===5&&b.type==="form"?xp(b):mc.r(g)}var iv=typeof document>"u"?null:document;function _S(g,b,E){var M=iv;if(M&&typeof b=="string"&&b){var F=Wi(b);F='link[rel="'+g+'"][href="'+F+'"]',typeof E=="string"&&(F+='[crossorigin="'+E+'"]'),Xh.has(F)||(Xh.add(F),g={rel:g,crossOrigin:E,href:b},M.querySelector(F)===null&&(b=M.createElement("link"),da(b,"link",g),_i(b),M.head.appendChild(b)))}}function jF(g){mc.D(g),_S("dns-prefetch",g,null)}function TS(g,b){mc.C(g,b),_S("preconnect",g,b)}function L0(g,b,E){mc.L(g,b,E);var M=iv;if(M&&g&&b){var F='link[rel="preload"][as="'+Wi(b)+'"]';b==="image"&&E&&E.imageSrcSet?(F+='[imagesrcset="'+Wi(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(F+='[imagesizes="'+Wi(E.imageSizes)+'"]')):F+='[href="'+Wi(g)+'"]';var U=F;switch(b){case"style":U=Vo(g);break;case"script":U=zp(g)}Ml.has(U)||(g=u({rel:"preload",href:b==="image"&&E&&E.imageSrcSet?void 0:g,as:b},E),Ml.set(U,g),M.querySelector(F)!==null||b==="style"&&M.querySelector(ov(U))||b==="script"&&M.querySelector(Pn(U))||(b=M.createElement("link"),da(b,"link",g),_i(b),M.head.appendChild(b)))}}function iP(g,b){mc.m(g,b);var E=iv;if(E&&g){var M=b&&typeof b.as=="string"?b.as:"script",F='link[rel="modulepreload"][as="'+Wi(M)+'"][href="'+Wi(g)+'"]',U=F;switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=zp(g)}if(!Ml.has(U)&&(g=u({rel:"modulepreload",href:g},b),Ml.set(U,g),E.querySelector(F)===null)){switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(Pn(U)))return}M=E.createElement("link"),da(M,"link",g),_i(M),E.head.appendChild(M)}}}function j0(g,b,E){mc.S(g,b,E);var M=iv;if(M&&g){var F=Ya(M).hoistableStyles,U=Vo(g);b=b||"default";var J=F.get(U);if(!J){var ae={loading:0,preload:null};if(J=M.querySelector(ov(U)))ae.loading=5;else{g=u({rel:"stylesheet",href:g,"data-precedence":b},E),(E=Ml.get(U))&&Ks(g,E);var he=J=M.createElement("link");_i(he),da(he,"link",g),he._p=new Promise(function(Ce,He){he.onload=Ce,he.onerror=He}),he.addEventListener("load",function(){ae.loading|=1}),he.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,Wn(J,b,M)}J={type:"stylesheet",instance:J,count:1,state:ae},F.set(U,J)}}}function F0(g,b){mc.X(g,b);var E=iv;if(E&&g){var M=Ya(E).hoistableScripts,F=zp(g),U=M.get(F);U||(U=E.querySelector(Pn(F)),U||(g=u({src:g,async:!0},b),(b=Ml.get(F))&&un(g,b),U=E.createElement("script"),_i(U),da(U,"link",g),E.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},M.set(F,U))}}function $0(g,b){mc.M(g,b);var E=iv;if(E&&g){var M=Ya(E).hoistableScripts,F=zp(g),U=M.get(F);U||(U=E.querySelector(Pn(F)),U||(g=u({src:g,async:!0,type:"module"},b),(b=Ml.get(F))&&un(g,b),U=E.createElement("script"),_i(U),da(U,"link",g),E.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},M.set(F,U))}}function av(g,b,E,M){var F=(F=De.current)?O0(F):null;if(!F)throw Error(r(446));switch(g){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(b=Vo(E.href),E=Ya(F).hoistableStyles,M=E.get(b),M||(M={type:"style",instance:null,count:0,state:null},E.set(b,M)),M):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){g=Vo(E.href);var U=Ya(F).hoistableStyles,J=U.get(g);if(J||(F=F.ownerDocument||F,J={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(g,J),(U=F.querySelector(ov(g)))&&!U._p&&(J.instance=U,J.state.loading=5),Ml.has(g)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},Ml.set(g,E),U||aA(F,g,E,J.state))),b&&M===null)throw Error(r(528,""));return J}if(b&&M!==null)throw Error(r(529,""));return null;case"script":return b=E.async,E=E.src,typeof E=="string"&&b&&typeof b!="function"&&typeof b!="symbol"?(b=zp(E),E=Ya(F).hoistableScripts,M=E.get(b),M||(M={type:"script",instance:null,count:0,state:null},E.set(b,M)),M):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,g))}}function Vo(g){return'href="'+Wi(g)+'"'}function ov(g){return'link[rel="stylesheet"]['+g+"]"}function sv(g){return u({},g,{"data-precedence":g.precedence,precedence:null})}function aA(g,b,E,M){g.querySelector('link[rel="preload"][as="style"]['+b+"]")?M.loading=1:(b=g.createElement("link"),M.preload=b,b.addEventListener("load",function(){return M.loading|=1}),b.addEventListener("error",function(){return M.loading|=2}),da(b,"link",E),_i(b),g.head.appendChild(b))}function zp(g){return'[src="'+Wi(g)+'"]'}function Pn(g){return"script[async]"+g}function Hp(g,b,E){if(b.count++,b.instance===null)switch(b.type){case"style":var M=g.querySelector('style[data-href~="'+Wi(E.href)+'"]');if(M)return b.instance=M,_i(M),M;var F=u({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return M=(g.ownerDocument||g).createElement("style"),_i(M),da(M,"style",F),Wn(M,E.precedence,g),b.instance=M;case"stylesheet":F=Vo(E.href);var U=g.querySelector(ov(F));if(U)return b.state.loading|=4,b.instance=U,_i(U),U;M=sv(E),(F=Ml.get(F))&&Ks(M,F),U=(g.ownerDocument||g).createElement("link"),_i(U);var J=U;return J._p=new Promise(function(ae,he){J.onload=ae,J.onerror=he}),da(U,"link",M),b.state.loading|=4,Wn(U,E.precedence,g),b.instance=U;case"script":return U=zp(E.src),(F=g.querySelector(Pn(U)))?(b.instance=F,_i(F),F):(M=E,(F=Ml.get(U))&&(M=u({},E),un(M,F)),g=g.ownerDocument||g,F=g.createElement("script"),_i(F),da(F,"link",M),g.head.appendChild(F),b.instance=F);case"void":return null;default:throw Error(r(443,b.type))}else b.type==="stylesheet"&&(b.state.loading&4)===0&&(M=b.instance,b.state.loading|=4,Wn(M,E.precedence,g));return b.instance}function Wn(g,b,E){for(var M=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),F=M.length?M[M.length-1]:null,U=F,J=0;J<M.length;J++){var ae=M[J];if(ae.dataset.precedence===b)U=ae;else if(U!==F)break}U?U.parentNode.insertBefore(g,U.nextSibling):(b=E.nodeType===9?E.head:E,b.insertBefore(g,b.firstChild))}function Ks(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.title==null&&(g.title=b.title)}function un(g,b){g.crossOrigin==null&&(g.crossOrigin=b.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=b.referrerPolicy),g.integrity==null&&(g.integrity=b.integrity)}var B0=null;function oA(g,b,E){if(B0===null){var M=new Map,F=B0=new Map;F.set(E,M)}else F=B0,M=F.get(E),M||(M=new Map,F.set(E,M));if(M.has(g))return M;for(M.set(g,null),E=E.getElementsByTagName(g),F=0;F<E.length;F++){var U=E[F];if(!(U[rs]||U[ot]||g==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var J=U.getAttribute(b)||"";J=g+J;var ae=M.get(J);ae?ae.push(U):M.set(J,[U])}}return M}function sA(g,b,E){g=g.ownerDocument||g,g.head.insertBefore(E,b==="title"?g.querySelector("head > title"):null)}function ES(g,b,E){if(E===1||b.itemProp!=null)return!1;switch(g){case"meta":case"title":return!0;case"style":if(typeof b.precedence!="string"||typeof b.href!="string"||b.href==="")break;return!0;case"link":if(typeof b.rel!="string"||typeof b.href!="string"||b.href===""||b.onLoad||b.onError)break;switch(b.rel){case"stylesheet":return g=b.disabled,typeof b.precedence=="string"&&g==null;default:return!0}case"script":if(b.async&&typeof b.async!="function"&&typeof b.async!="symbol"&&!b.onLoad&&!b.onError&&b.src&&typeof b.src=="string")return!0}return!1}function pu(g){return!(g.type==="stylesheet"&&(g.state.loading&3)===0)}var lv=null;function $n(){}function FF(g,b,E){if(lv===null)throw Error(r(475));var M=lv;if(b.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var F=Vo(E.href),U=g.querySelector(ov(F));if(U){g=U._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(M.count++,M=U0.bind(M),g.then(M,M)),b.state.loading|=4,b.instance=U,_i(U);return}U=g.ownerDocument||g,E=sv(E),(F=Ml.get(F))&&Ks(E,F),U=U.createElement("link"),_i(U);var J=U;J._p=new Promise(function(ae,he){J.onload=ae,J.onerror=he}),da(U,"link",E),b.instance=U}M.stylesheets===null&&(M.stylesheets=new Map),M.stylesheets.set(b,g),(g=b.state.preload)&&(b.state.loading&3)===0&&(M.count++,b=U0.bind(M),g.addEventListener("load",b),g.addEventListener("error",b))}}function aP(){if(lv===null)throw Error(r(475));var g=lv;return g.stylesheets&&g.count===0&&Ze(g,g.stylesheets),0<g.count?function(b){var E=setTimeout(function(){if(g.stylesheets&&Ze(g,g.stylesheets),g.unsuspend){var M=g.unsuspend;g.unsuspend=null,M()}},6e4);return g.unsuspend=b,function(){g.unsuspend=null,clearTimeout(E)}}:null}function U0(){if(this.count--,this.count===0){if(this.stylesheets)Ze(this,this.stylesheets);else if(this.unsuspend){var g=this.unsuspend;this.unsuspend=null,g()}}}var AS=null;function Ze(g,b){g.stylesheets=null,g.unsuspend!==null&&(g.count++,AS=new Map,b.forEach(hr,g),AS=null,U0.call(g))}function hr(g,b){if(!(b.state.loading&4)){var E=AS.get(g);if(E)var M=E.get(null);else{E=new Map,AS.set(g,E);for(var F=g.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<F.length;U++){var J=F[U];(J.nodeName==="LINK"||J.getAttribute("media")!=="not all")&&(E.set(J.dataset.precedence,J),M=J)}M&&E.set(null,M)}F=b.instance,J=F.getAttribute("data-precedence"),U=E.get(J)||M,U===M&&E.set(null,F),E.set(J,F),this.count++,M=U0.bind(this),F.addEventListener("load",M),F.addEventListener("error",M),U?U.parentNode.insertBefore(F,U.nextSibling):(g=g.nodeType===9?g.head:g,g.insertBefore(F,g.firstChild)),b.state.loading|=4}}var V0={$$typeof:T,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function $F(g,b,E,M,F,U,J,ae){this.tag=1,this.containerInfo=g,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ze(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.hiddenUpdates=ze(null),this.identifierPrefix=M,this.onUncaughtError=F,this.onCaughtError=U,this.onRecoverableError=J,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function oP(g,b,E,M,F,U,J,ae,he,Ce,He,Xe){return g=new $F(g,b,E,J,ae,he,Ce,Xe),b=1,U===!0&&(b|=24),U=Yi(3,null,null,b),g.current=U,U.stateNode=g,b=mm(),b.refCount++,g.pooledCache=b,b.refCount++,U.memoizedState={element:M,isDehydrated:E,cache:b},Ox(U),g}function sP(g){return g?(g=El,g):El}function lA(g,b,E,M,F,U){F=sP(F),M.context===null?M.context=F:M.pendingContext=F,M=cc(b),M.payload={element:E},U=U===void 0?null:U,U!==null&&(M.callback=U),E=ld(g,M,b),E!==null&&(ms(E,g,b),ru(E,g,b))}function lP(g,b){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var E=g.retryLane;g.retryLane=E!==0&&E<b?E:b}}function cA(g,b){lP(g,b),(g=g.alternate)&&lP(g,b)}function kd(g){if(g.tag===13){var b=op(g,67108864);b!==null&&ms(b,g,67108864),cA(g,67108864)}}var vc=!0;function z0(g,b,E,M){var F=K.T;K.T=null;var U=X.p;try{X.p=2,uA(g,b,E,M)}finally{X.p=U,K.T=F}}function kS(g,b,E,M){var F=K.T;K.T=null;var U=X.p;try{X.p=8,uA(g,b,E,M)}finally{X.p=U,K.T=F}}function uA(g,b,E,M){if(vc){var F=H0(M);if(F===null)Zm(g,b,M,CS,E),MS(g,M);else if(yc(F,g,b,E,M))M.stopPropagation();else if(MS(g,M),b&4&&-1<IS.indexOf(g)){for(;F!==null;){var U=la(F);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var J=on(U.pendingLanes);if(J!==0){var ae=U;for(ae.pendingLanes|=2,ae.entangledLanes|=2;J;){var he=1<<31-Ne(J);ae.entanglements[1]|=he,J&=~he}du(U),(fr&6)===0&&(w0=At()+500,D0(0))}}break;case 13:ae=op(U,2),ae!==null&&ms(ae,U,2),S0(),cA(U,2)}if(U=H0(M),U===null&&Zm(g,b,M,CS,E),U===F)break;F=U}F!==null&&M.stopPropagation()}else Zm(g,b,M,null,E)}}function H0(g){return g=$s(g),dA(g)}var CS=null;function dA(g){if(CS=null,g=Xl(g),g!==null){var b=a(g);if(b===null)g=null;else{var E=b.tag;if(E===13){if(g=o(b),g!==null)return g;g=null}else if(E===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;g=null}else b!==g&&(g=null)}}return CS=g,null}function G0(g){switch(g){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case Yt:return 2;case Rn:return 8;case vn:case Fn:return 32;case je:return 268435456;default:return 32}default:return 32}}var DS=!1,Cd=null,gu=null,Dd=null,W0=new Map,q0=new Map,Zh=[],IS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MS(g,b){switch(g){case"focusin":case"focusout":Cd=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":Dd=null;break;case"pointerover":case"pointerout":W0.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":q0.delete(b.pointerId)}}function Qh(g,b,E,M,F,U){return g===null||g.nativeEvent!==U?(g={blockedOn:b,domEventName:E,eventSystemFlags:M,nativeEvent:U,targetContainers:[F]},b!==null&&(b=la(b),b!==null&&kd(b)),g):(g.eventSystemFlags|=M,b=g.targetContainers,F!==null&&b.indexOf(F)===-1&&b.push(F),g)}function yc(g,b,E,M,F){switch(b){case"focusin":return Cd=Qh(Cd,g,b,E,M,F),!0;case"dragenter":return gu=Qh(gu,g,b,E,M,F),!0;case"mouseover":return Dd=Qh(Dd,g,b,E,M,F),!0;case"pointerover":var U=F.pointerId;return W0.set(U,Qh(W0.get(U)||null,g,b,E,M,F)),!0;case"gotpointercapture":return U=F.pointerId,q0.set(U,Qh(q0.get(U)||null,g,b,E,M,F)),!0}return!1}function Id(g){var b=Xl(g.target);if(b!==null){var E=a(b);if(E!==null){if(b=E.tag,b===13){if(b=o(E),b!==null){g.blockedOn=b,nt(g.priority,function(){if(E.tag===13){var M=gs();M=ge(M);var F=op(E,M);F!==null&&ms(F,E,M),cA(E,M)}});return}}else if(b===3&&E.stateNode.current.memoizedState.isDehydrated){g.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}g.blockedOn=null}function p(g){if(g.blockedOn!==null)return!1;for(var b=g.targetContainers;0<b.length;){var E=H0(g.nativeEvent);if(E===null){E=g.nativeEvent;var M=new E.constructor(E.type,E);as=M,E.target.dispatchEvent(M),as=null}else return b=la(E),b!==null&&kd(b),g.blockedOn=E,!1;b.shift()}return!0}function _(g,b,E){p(g)&&E.delete(b)}function I(){DS=!1,Cd!==null&&p(Cd)&&(Cd=null),gu!==null&&p(gu)&&(gu=null),Dd!==null&&p(Dd)&&(Dd=null),W0.forEach(_),q0.forEach(_)}function j(g,b){g.blockedOn===b&&(g.blockedOn=null,DS||(DS=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,I)))}var V=null;function H(g){V!==g&&(V=g,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){V===g&&(V=null);for(var b=0;b<g.length;b+=3){var E=g[b],M=g[b+1],F=g[b+2];if(typeof M!="function"){if(dA(M||E)===null)continue;break}var U=la(E);U!==null&&(g.splice(b,3),b-=3,Yx(U,{pending:!0,data:F,method:E.method,action:M},M,F))}}))}function re(g){function b(he){return j(he,g)}Cd!==null&&j(Cd,g),gu!==null&&j(gu,g),Dd!==null&&j(Dd,g),W0.forEach(b),q0.forEach(b);for(var E=0;E<Zh.length;E++){var M=Zh[E];M.blockedOn===g&&(M.blockedOn=null)}for(;0<Zh.length&&(E=Zh[0],E.blockedOn===null);)Id(E),E.blockedOn===null&&Zh.shift();if(E=(g.ownerDocument||g).$$reactFormReplay,E!=null)for(M=0;M<E.length;M+=3){var F=E[M],U=E[M+1],J=F[St]||null;if(typeof U=="function")J||H(E);else if(J){var ae=null;if(U&&U.hasAttribute("formAction")){if(F=U,J=U[St]||null)ae=J.formAction;else if(dA(F)!==null)continue}else ae=J.action;typeof ae=="function"?E[M+1]=ae:(E.splice(M,3),M-=3),H(E)}}}function ue(g){this._internalRoot=g}Re.prototype.render=ue.prototype.render=function(g){var b=this._internalRoot;if(b===null)throw Error(r(409));var E=b.current,M=gs();lA(E,M,g,b,null,null)},Re.prototype.unmount=ue.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var b=g.containerInfo;lA(g.current,2,null,g,null,null),S0(),b[bt]=null}};function Re(g){this._internalRoot=g}Re.prototype.unstable_scheduleHydration=function(g){if(g){var b=qe();g={blockedOn:null,target:g,priority:b};for(var E=0;E<Zh.length&&b!==0&&b<Zh[E].priority;E++);Zh.splice(E,0,g),E===0&&Id(g)}};var it=e.version;if(it!=="19.1.0")throw Error(r(527,it,"19.1.0"));X.findDOMNode=function(g){var b=g._reactInternals;if(b===void 0)throw typeof g.render=="function"?Error(r(188)):(g=Object.keys(g).join(","),Error(r(268,g)));return g=l(b),g=g!==null?c(g):null,g=g===null?null:g.stateNode,g};var Ft={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yr.isDisabled&&yr.supportsFiber)try{Te=yr.inject(Ft),Oe=yr}catch{}}return fA.createRoot=function(g,b){if(!i(g))throw Error(r(299));var E=!1,M="",F=eS,U=FM,J=$M,ae=null;return b!=null&&(b.unstable_strictMode===!0&&(E=!0),b.identifierPrefix!==void 0&&(M=b.identifierPrefix),b.onUncaughtError!==void 0&&(F=b.onUncaughtError),b.onCaughtError!==void 0&&(U=b.onCaughtError),b.onRecoverableError!==void 0&&(J=b.onRecoverableError),b.unstable_transitionCallbacks!==void 0&&(ae=b.unstable_transitionCallbacks)),b=oP(g,1,!1,null,null,E,M,F,U,J,ae,null),g[bt]=b.current,Xm(g),new ue(b)},fA.hydrateRoot=function(g,b,E){if(!i(g))throw Error(r(299));var M=!1,F="",U=eS,J=FM,ae=$M,he=null,Ce=null;return E!=null&&(E.unstable_strictMode===!0&&(M=!0),E.identifierPrefix!==void 0&&(F=E.identifierPrefix),E.onUncaughtError!==void 0&&(U=E.onUncaughtError),E.onCaughtError!==void 0&&(J=E.onCaughtError),E.onRecoverableError!==void 0&&(ae=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(he=E.unstable_transitionCallbacks),E.formState!==void 0&&(Ce=E.formState)),b=oP(g,1,!0,b,E??null,M,F,U,J,ae,he,Ce),b.context=sP(null),E=b.current,M=gs(),M=ge(M),F=cc(M),F.callback=null,ld(E,F,M),E=M,b.current.lanes=E,bn(b,E),du(b),g[bt]=b.current,Xm(g),new Re(b)},fA.version="19.1.0",fA}var mX;function MDe(){if(mX)return VF.exports;mX=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),VF.exports=IDe(),VF.exports}var PDe=MDe();const NDe=Lr(PDe);typeof window<"u"&&!window.process&&(window.process={env:{},version:"",platform:"browser",nextTick:n=>setTimeout(n,0),cwd:()=>"/",argv:[],stderr:{write:console.error},stdout:{write:console.log}});typeof window<"u"&&!window.global&&(window.global=window);const RDe="modulepreload",ODe=function(n){return"/"+n},vX={},nn=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=o(t.map(c=>{if(c=ODe(c),c in vX)return;vX[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":RDe,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})},yX=n=>{let e;const t=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(f=>f(e,h))}},i=()=>e,s={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(r,i,s);return s},LDe=n=>n?yX(n):yX,jDe=n=>n;function FDe(n,e=jDe){const t=we.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return we.useDebugValue(t),t}const bX=n=>{const e=LDe(n),t=r=>FDe(e,r);return Object.assign(t,e),t},uh=n=>n?bX(n):bX;var wX={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qfe=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},$De=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],o=n[t++],s=n[t++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Jfe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,s=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,u=a>>2,d=(a&3)<<4|s>>4;let h=(s&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qfe(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$De(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],s=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||s==null||c==null||d==null)throw new BDe;const h=a<<2|s>>4;if(r.push(h),c!==64){const f=s<<4&240|c>>2;if(r.push(f),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UDe=function(n){const e=Qfe(n);return Jfe.encodeByteArray(e,!0)},LR=function(n){return UDe(n).replace(/\./g,"")},epe=function(n){try{return Jfe.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!VDe(t)||(n[t]=jR(n[t],e[t]));return n}function VDe(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tpe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zDe=()=>tpe().__FIREBASE_DEFAULTS__,HDe=()=>{if(typeof process>"u"||typeof wX>"u")return;const n=wX.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GDe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&epe(n[1]);return e&&JSON.parse(e)},aL=()=>{try{return zDe()||HDe()||GDe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},npe=n=>{var e,t;return(t=(e=aL())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},WDe=n=>{const e=npe(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},rpe=()=>{var n;return(n=aL())===null||n===void 0?void 0:n.config},ipe=n=>{var e;return(e=aL())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qDe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YDe(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[LR(JSON.stringify(t)),LR(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KDe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function r8(){var n;const e=(n=aL())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function XDe(){return typeof window<"u"||ape()}function ape(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ZDe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i8(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function a8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ope(){const n=Wa();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QDe(){return!r8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SC(){try{return typeof indexedDB=="object"}catch{return!1}}function spe(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function JDe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eIe="FirebaseError";class Ko extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eIe,Object.setPrototypeOf(this,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$g.prototype.create)}}class $g{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?tIe(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Ko(i,s,r)}}function tIe(n,e){return n.replace(nIe,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nIe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xX(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function rIe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _C(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],o=e[i];if(SX(a)&&SX(o)){if(!_C(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function SX(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function E_(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function dk(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function lpe(n,e){const t=new iIe(n,e);return t.subscribe.bind(t)}class iIe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");aIe(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=WF),i.error===void 0&&(i.error=WF),i.complete===void 0&&(i.complete=WF);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aIe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function WF(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oIe=1e3,sIe=2,lIe=4*60*60*1e3,cIe=.5;function _X(n,e=oIe,t=sIe){const r=e*Math.pow(t,n),i=Math.round(cIe*r*(Math.random()-.5)*2);return Math.min(lIe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class zc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uIe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new qDe;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hIe(e))try{this.getOrInitializeService({instanceIdentifier:xb})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=xb){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xb){return this.instances.has(e)}getOptions(e=xb){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dIe(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xb){return this.component?this.component.multipleInstances?e:xb:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dIe(n){return n===xb?void 0:n}function hIe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cpe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uIe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=[];var pr;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(pr||(pr={}));const upe={debug:pr.DEBUG,verbose:pr.VERBOSE,info:pr.INFO,warn:pr.WARN,error:pr.ERROR,silent:pr.SILENT},fIe=pr.INFO,pIe={[pr.DEBUG]:"log",[pr.VERBOSE]:"log",[pr.INFO]:"info",[pr.WARN]:"warn",[pr.ERROR]:"error"},gIe=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=pIe[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class aI{constructor(e){this.name=e,this._logLevel=fIe,this._logHandler=gIe,this._userLogHandler=null,o8.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?upe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pr.DEBUG,...e),this._logHandler(this,pr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pr.VERBOSE,...e),this._logHandler(this,pr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pr.INFO,...e),this._logHandler(this,pr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pr.WARN,...e),this._logHandler(this,pr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pr.ERROR,...e),this._logHandler(this,pr.ERROR,...e)}}function mIe(n){o8.forEach(e=>{e.setLogLevel(n)})}function vIe(n,e){for(const t of o8){let r=null;e&&e.level&&(r=upe[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,a,...o)=>{const s=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");a>=(r??i.logLevel)&&n({level:pr[a].toLowerCase(),message:s,args:o,type:i.name})}}}const yIe=(n,e)=>e.some(t=>n instanceof t);let TX,EX;function bIe(){return TX||(TX=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wIe(){return EX||(EX=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dpe=new WeakMap,DV=new WeakMap,hpe=new WeakMap,qF=new WeakMap,s8=new WeakMap;function xIe(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{t(Gv(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&dpe.set(t,n)}).catch(()=>{}),s8.set(e,n),e}function SIe(n){if(DV.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});DV.set(n,e)}let IV={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return DV.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hpe.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gv(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _Ie(n){IV=n(IV)}function TIe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(YF(this),e,...t);return hpe.set(r,e.sort?e.sort():[e]),Gv(r)}:wIe().includes(n)?function(...e){return n.apply(YF(this),e),Gv(dpe.get(this))}:function(...e){return Gv(n.apply(YF(this),e))}}function EIe(n){return typeof n=="function"?TIe(n):(n instanceof IDBTransaction&&SIe(n),yIe(n,bIe())?new Proxy(n,IV):n)}function Gv(n){if(n instanceof IDBRequest)return xIe(n);if(qF.has(n))return qF.get(n);const e=EIe(n);return e!==n&&(qF.set(n,e),s8.set(e,n)),e}const YF=n=>s8.get(n);function fpe(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,e),s=Gv(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Gv(o.result),l.oldVersion,l.newVersion,Gv(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),s}const AIe=["get","getKey","getAll","getAllKeys","count"],kIe=["put","add","delete","clear"],KF=new Map;function AX(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(KF.get(e))return KF.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=kIe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AIe.includes(t)))return;const a=async function(o,...s){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[t](...s),i&&l.done]))[0]};return KF.set(e,a),a}_Ie(n=>({...n,get:(e,t,r)=>AX(e,t)||n.get(e,t,r),has:(e,t)=>!!AX(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CIe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DIe(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function DIe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const FR="@firebase/app",MV="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new aI("@firebase/app"),IIe="@firebase/app-compat",MIe="@firebase/analytics-compat",PIe="@firebase/analytics",NIe="@firebase/app-check-compat",RIe="@firebase/app-check",OIe="@firebase/auth",LIe="@firebase/auth-compat",jIe="@firebase/database",FIe="@firebase/data-connect",$Ie="@firebase/database-compat",BIe="@firebase/functions",UIe="@firebase/functions-compat",VIe="@firebase/installations",zIe="@firebase/installations-compat",HIe="@firebase/messaging",GIe="@firebase/messaging-compat",WIe="@firebase/performance",qIe="@firebase/performance-compat",YIe="@firebase/remote-config",KIe="@firebase/remote-config-compat",XIe="@firebase/storage",ZIe="@firebase/storage-compat",QIe="@firebase/firestore",JIe="@firebase/vertexai-preview",eMe="@firebase/firestore-compat",tMe="firebase",nMe="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="[DEFAULT]",rMe={[FR]:"fire-core",[IIe]:"fire-core-compat",[PIe]:"fire-analytics",[MIe]:"fire-analytics-compat",[RIe]:"fire-app-check",[NIe]:"fire-app-check-compat",[OIe]:"fire-auth",[LIe]:"fire-auth-compat",[jIe]:"fire-rtdb",[FIe]:"fire-data-connect",[$Ie]:"fire-rtdb-compat",[BIe]:"fire-fn",[UIe]:"fire-fn-compat",[VIe]:"fire-iid",[zIe]:"fire-iid-compat",[HIe]:"fire-fcm",[GIe]:"fire-fcm-compat",[WIe]:"fire-perf",[qIe]:"fire-perf-compat",[YIe]:"fire-rc",[KIe]:"fire-rc-compat",[XIe]:"fire-gcs",[ZIe]:"fire-gcs-compat",[QIe]:"fire-fst",[eMe]:"fire-fst-compat",[JIe]:"fire-vertex","fire-js":"fire-js",[tMe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map,a1=new Map,o1=new Map;function TC(n,e){try{n.container.addComponent(e)}catch(t){Sg.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ppe(n,e){n.container.addOrOverwriteComponent(e)}function Gu(n){const e=n.name;if(o1.has(e))return Sg.debug(`There were multiple attempts to register component ${e}.`),!1;o1.set(e,n);for(const t of ny.values())TC(t,n);for(const t of a1.values())TC(t,n);return!0}function Bg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function iMe(n,e,t=ty){Bg(n,e).clearInstance(t)}function gpe(n){return n.options!==void 0}function ga(n){return n.settings!==void 0}function aMe(){o1.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oMe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vu=new $g("app","Firebase",oMe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mpe=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vu.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sMe extends mpe{constructor(e,t,r,i){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,o,i);else{const s=e;super(s.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:a},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ms(FR,MV,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){l8(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vu.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=nMe;function oL(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ty,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vu.create("bad-app-name",{appName:String(i)});if(t||(t=rpe()),!t)throw Vu.create("no-options");const a=ny.get(i);if(a){if(_C(t,a.options)&&_C(r,a.config))return a;throw Vu.create("duplicate-app",{appName:i})}const o=new cpe(i);for(const l of o1.values())o.addComponent(l);const s=new mpe(t,r,o);return ny.set(i,s),s}function lMe(n,e){if(XDe()&&!ape())throw Vu.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;gpe(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((u,d)=>Math.imul(31,u)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vu.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),o=a1.get(a);if(o)return o.incRefCount(e.releaseOnDeref),o;const s=new cpe(a);for(const c of o1.values())s.addComponent(c);const l=new sMe(t,e,a,s);return a1.set(a,l),l}function sL(n=ty){const e=ny.get(n);if(!e&&n===ty&&rpe())return oL();if(!e)throw Vu.create("no-app",{appName:n});return e}function cMe(){return Array.from(ny.values())}async function l8(n){let e=!1;const t=n.name;ny.has(t)?(e=!0,ny.delete(t)):a1.has(t)&&n.decRefCount()<=0&&(a1.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Ms(n,e,t){var r;let i=(r=rMe[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const s=[`Unable to register library "${i}" with version "${e}":`];a&&s.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sg.warn(s.join(" "));return}Gu(new zc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function vpe(n,e){if(n!==null&&typeof n!="function")throw Vu.create("invalid-log-argument");vIe(n,e)}function ype(n){mIe(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uMe="firebase-heartbeat-database",dMe=1,EC="firebase-heartbeat-store";let XF=null;function bpe(){return XF||(XF=fpe(uMe,dMe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(EC)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vu.create("idb-open",{originalErrorMessage:n.message})})),XF}async function hMe(n){try{const t=(await bpe()).transaction(EC),r=await t.objectStore(EC).get(wpe(n));return await t.done,r}catch(e){if(e instanceof Ko)Sg.warn(e.message);else{const t=Vu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sg.warn(t.message)}}}async function kX(n,e){try{const r=(await bpe()).transaction(EC,"readwrite");await r.objectStore(EC).put(e,wpe(n)),await r.done}catch(t){if(t instanceof Ko)Sg.warn(t.message);else{const r=Vu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Sg.warn(r.message)}}}function wpe(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fMe=1024,pMe=30*24*60*60*1e3;class gMe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vMe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=CX();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=pMe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sg.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=CX(),{heartbeatsToSend:r,unsentEntries:i}=mMe(this._heartbeatsCache.heartbeats),a=LR(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Sg.warn(t),""}}}function CX(){return new Date().toISOString().substring(0,10)}function mMe(n,e=fMe){const t=[];let r=n.slice();for(const i of n){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),DX(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),DX(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class vMe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SC()?spe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hMe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return kX(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return kX(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function DX(n){return LR(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yMe(n){Gu(new zc("platform-logger",e=>new CIe(e),"PRIVATE")),Gu(new zc("heartbeat",e=>new gMe(e),"PRIVATE")),Ms(FR,MV,n),Ms(FR,MV,"esm2017"),Ms("fire-js","")}yMe("");const bMe=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ko,SDK_VERSION:my,_DEFAULT_ENTRY_NAME:ty,_addComponent:TC,_addOrOverwriteComponent:ppe,_apps:ny,_clearComponents:aMe,_components:o1,_getProvider:Bg,_isFirebaseApp:gpe,_isFirebaseServerApp:ga,_registerComponent:Gu,_removeServiceInstance:iMe,_serverApps:a1,deleteApp:l8,getApp:sL,getApps:cMe,initializeApp:oL,initializeServerApp:lMe,onLog:vpe,registerVersion:Ms,setLogLevel:ype},Symbol.toStringTag,{value:"Module"}));var IX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rw,xpe;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function N(){}N.prototype=P.prototype,D.D=P.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(R,L,B){for(var $=Array(arguments.length-2),G=2;G<arguments.length;G++)$[G-2]=arguments[G];return P.prototype[L].apply(R,$)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,N){N||(N=0);var R=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)R[L]=P.charCodeAt(N++)|P.charCodeAt(N++)<<8|P.charCodeAt(N++)<<16|P.charCodeAt(N++)<<24;else for(L=0;16>L;++L)R[L]=P[N++]|P[N++]<<8|P[N++]<<16|P[N++]<<24;P=D.g[0],N=D.g[1],L=D.g[2];var B=D.g[3],$=P+(B^N&(L^B))+R[0]+3614090360&4294967295;P=N+($<<7&4294967295|$>>>25),$=B+(L^P&(N^L))+R[1]+3905402710&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(N^B&(P^N))+R[2]+606105819&4294967295,L=B+($<<17&4294967295|$>>>15),$=N+(P^L&(B^P))+R[3]+3250441966&4294967295,N=L+($<<22&4294967295|$>>>10),$=P+(B^N&(L^B))+R[4]+4118548399&4294967295,P=N+($<<7&4294967295|$>>>25),$=B+(L^P&(N^L))+R[5]+1200080426&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(N^B&(P^N))+R[6]+2821735955&4294967295,L=B+($<<17&4294967295|$>>>15),$=N+(P^L&(B^P))+R[7]+4249261313&4294967295,N=L+($<<22&4294967295|$>>>10),$=P+(B^N&(L^B))+R[8]+1770035416&4294967295,P=N+($<<7&4294967295|$>>>25),$=B+(L^P&(N^L))+R[9]+2336552879&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(N^B&(P^N))+R[10]+4294925233&4294967295,L=B+($<<17&4294967295|$>>>15),$=N+(P^L&(B^P))+R[11]+2304563134&4294967295,N=L+($<<22&4294967295|$>>>10),$=P+(B^N&(L^B))+R[12]+1804603682&4294967295,P=N+($<<7&4294967295|$>>>25),$=B+(L^P&(N^L))+R[13]+4254626195&4294967295,B=P+($<<12&4294967295|$>>>20),$=L+(N^B&(P^N))+R[14]+2792965006&4294967295,L=B+($<<17&4294967295|$>>>15),$=N+(P^L&(B^P))+R[15]+1236535329&4294967295,N=L+($<<22&4294967295|$>>>10),$=P+(L^B&(N^L))+R[1]+4129170786&4294967295,P=N+($<<5&4294967295|$>>>27),$=B+(N^L&(P^N))+R[6]+3225465664&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^N&(B^P))+R[11]+643717713&4294967295,L=B+($<<14&4294967295|$>>>18),$=N+(B^P&(L^B))+R[0]+3921069994&4294967295,N=L+($<<20&4294967295|$>>>12),$=P+(L^B&(N^L))+R[5]+3593408605&4294967295,P=N+($<<5&4294967295|$>>>27),$=B+(N^L&(P^N))+R[10]+38016083&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^N&(B^P))+R[15]+3634488961&4294967295,L=B+($<<14&4294967295|$>>>18),$=N+(B^P&(L^B))+R[4]+3889429448&4294967295,N=L+($<<20&4294967295|$>>>12),$=P+(L^B&(N^L))+R[9]+568446438&4294967295,P=N+($<<5&4294967295|$>>>27),$=B+(N^L&(P^N))+R[14]+3275163606&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^N&(B^P))+R[3]+4107603335&4294967295,L=B+($<<14&4294967295|$>>>18),$=N+(B^P&(L^B))+R[8]+1163531501&4294967295,N=L+($<<20&4294967295|$>>>12),$=P+(L^B&(N^L))+R[13]+2850285829&4294967295,P=N+($<<5&4294967295|$>>>27),$=B+(N^L&(P^N))+R[2]+4243563512&4294967295,B=P+($<<9&4294967295|$>>>23),$=L+(P^N&(B^P))+R[7]+1735328473&4294967295,L=B+($<<14&4294967295|$>>>18),$=N+(B^P&(L^B))+R[12]+2368359562&4294967295,N=L+($<<20&4294967295|$>>>12),$=P+(N^L^B)+R[5]+4294588738&4294967295,P=N+($<<4&4294967295|$>>>28),$=B+(P^N^L)+R[8]+2272392833&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^N)+R[11]+1839030562&4294967295,L=B+($<<16&4294967295|$>>>16),$=N+(L^B^P)+R[14]+4259657740&4294967295,N=L+($<<23&4294967295|$>>>9),$=P+(N^L^B)+R[1]+2763975236&4294967295,P=N+($<<4&4294967295|$>>>28),$=B+(P^N^L)+R[4]+1272893353&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^N)+R[7]+4139469664&4294967295,L=B+($<<16&4294967295|$>>>16),$=N+(L^B^P)+R[10]+3200236656&4294967295,N=L+($<<23&4294967295|$>>>9),$=P+(N^L^B)+R[13]+681279174&4294967295,P=N+($<<4&4294967295|$>>>28),$=B+(P^N^L)+R[0]+3936430074&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^N)+R[3]+3572445317&4294967295,L=B+($<<16&4294967295|$>>>16),$=N+(L^B^P)+R[6]+76029189&4294967295,N=L+($<<23&4294967295|$>>>9),$=P+(N^L^B)+R[9]+3654602809&4294967295,P=N+($<<4&4294967295|$>>>28),$=B+(P^N^L)+R[12]+3873151461&4294967295,B=P+($<<11&4294967295|$>>>21),$=L+(B^P^N)+R[15]+530742520&4294967295,L=B+($<<16&4294967295|$>>>16),$=N+(L^B^P)+R[2]+3299628645&4294967295,N=L+($<<23&4294967295|$>>>9),$=P+(L^(N|~B))+R[0]+4096336452&4294967295,P=N+($<<6&4294967295|$>>>26),$=B+(N^(P|~L))+R[7]+1126891415&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~N))+R[14]+2878612391&4294967295,L=B+($<<15&4294967295|$>>>17),$=N+(B^(L|~P))+R[5]+4237533241&4294967295,N=L+($<<21&4294967295|$>>>11),$=P+(L^(N|~B))+R[12]+1700485571&4294967295,P=N+($<<6&4294967295|$>>>26),$=B+(N^(P|~L))+R[3]+2399980690&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~N))+R[10]+4293915773&4294967295,L=B+($<<15&4294967295|$>>>17),$=N+(B^(L|~P))+R[1]+2240044497&4294967295,N=L+($<<21&4294967295|$>>>11),$=P+(L^(N|~B))+R[8]+1873313359&4294967295,P=N+($<<6&4294967295|$>>>26),$=B+(N^(P|~L))+R[15]+4264355552&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~N))+R[6]+2734768916&4294967295,L=B+($<<15&4294967295|$>>>17),$=N+(B^(L|~P))+R[13]+1309151649&4294967295,N=L+($<<21&4294967295|$>>>11),$=P+(L^(N|~B))+R[4]+4149444226&4294967295,P=N+($<<6&4294967295|$>>>26),$=B+(N^(P|~L))+R[11]+3174756917&4294967295,B=P+($<<10&4294967295|$>>>22),$=L+(P^(B|~N))+R[2]+718787259&4294967295,L=B+($<<15&4294967295|$>>>17),$=N+(B^(L|~P))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(L+($<<21&4294967295|$>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+B&4294967295}r.prototype.u=function(D,P){P===void 0&&(P=D.length);for(var N=P-this.blockSize,R=this.B,L=this.h,B=0;B<P;){if(L==0)for(;B<=N;)i(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<P;)if(R[L++]=D.charCodeAt(B++),L==this.blockSize){i(this,R),L=0;break}}else for(;B<P;)if(R[L++]=D[B++],L==this.blockSize){i(this,R),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;var N=8*this.o;for(P=D.length-8;P<D.length;++P)D[P]=N&255,N/=256;for(this.u(D),D=Array(16),P=N=0;4>P;++P)for(var R=0;32>R;R+=8)D[N++]=this.g[P]>>>R&255;return D};function a(D,P){var N=s;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=P(D)}function o(D,P){this.h=P;for(var N=[],R=!0,L=D.length-1;0<=L;L--){var B=D[L]|0;R&&B==P||(N[L]=B,R=!1)}this.g=N}var s={};function l(D){return-128<=D&&128>D?a(D,function(P){return new o([P|0],0>P?-1:0)}):new o([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return d;if(0>D)return y(c(-D));for(var P=[],N=1,R=0;D>=N;R++)P[R]=D/N|0,N*=4294967296;return new o(P,0)}function u(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return y(u(D.substring(1),P));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=c(Math.pow(P,8)),R=d,L=0;L<D.length;L+=8){var B=Math.min(8,D.length-L),$=parseInt(D.substring(L,L+B),P);8>B?(B=c(Math.pow(P,B)),R=R.j(B).add(c($))):(R=R.j(N),R=R.add(c($)))}return R}var d=l(0),h=l(1),f=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-y(this).m();for(var D=0,P=1,N=0;N<this.g.length;N++){var R=this.i(N);D+=(0<=R?R:4294967296+R)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(m(this))return"0";if(v(this))return"-"+y(this).toString(D);for(var P=c(Math.pow(D,6)),N=this,R="";;){var L=C(N,P).g;N=w(N,L.j(P));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=L,m(N))return B+R;for(;6>B.length;)B="0"+B;R=B+R}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function m(D){if(D.h!=0)return!1;for(var P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function v(D){return D.h==-1}n.l=function(D){return D=w(this,D),v(D)?-1:m(D)?0:1};function y(D){for(var P=D.g.length,N=[],R=0;R<P;R++)N[R]=~D.g[R];return new o(N,~D.h).add(h)}n.abs=function(){return v(this)?y(this):this},n.add=function(D){for(var P=Math.max(this.g.length,D.g.length),N=[],R=0,L=0;L<=P;L++){var B=R+(this.i(L)&65535)+(D.i(L)&65535),$=(B>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);R=$>>>16,B&=65535,$&=65535,N[L]=$<<16|B}return new o(N,N[N.length-1]&-2147483648?-1:0)};function w(D,P){return D.add(y(P))}n.j=function(D){if(m(this)||m(D))return d;if(v(this))return v(D)?y(this).j(y(D)):y(y(this).j(D));if(v(D))return y(this.j(y(D)));if(0>this.l(f)&&0>D.l(f))return c(this.m()*D.m());for(var P=this.g.length+D.g.length,N=[],R=0;R<2*P;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(var L=0;L<D.g.length;L++){var B=this.i(R)>>>16,$=this.i(R)&65535,G=D.i(L)>>>16,W=D.i(L)&65535;N[2*R+2*L]+=$*W,S(N,2*R+2*L),N[2*R+2*L+1]+=B*W,S(N,2*R+2*L+1),N[2*R+2*L+1]+=$*G,S(N,2*R+2*L+1),N[2*R+2*L+2]+=B*G,S(N,2*R+2*L+2)}for(R=0;R<P;R++)N[R]=N[2*R+1]<<16|N[2*R];for(R=P;R<2*P;R++)N[R]=0;return new o(N,0)};function S(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function T(D,P){this.g=D,this.h=P}function C(D,P){if(m(P))throw Error("division by zero");if(m(D))return new T(d,d);if(v(D))return P=C(y(D),P),new T(y(P.g),y(P.h));if(v(P))return P=C(D,y(P)),new T(y(P.g),P.h);if(30<D.g.length){if(v(D)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var N=h,R=P;0>=R.l(D);)N=k(N),R=k(R);var L=A(N,1),B=A(R,1);for(R=A(R,2),N=A(N,2);!m(R);){var $=B.add(R);0>=$.l(D)&&(L=L.add(N),B=$),R=A(R,1),N=A(N,1)}return P=w(D,L.j(P)),new T(L,P)}for(L=d;0<=D.l(P);){for(N=Math.max(1,Math.floor(D.m()/P.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),B=c(N),$=B.j(P);v($)||0<$.l(D);)N-=R,B=c(N),$=B.j(P);m(B)&&(B=h),L=L.add(B),D=w(D,$)}return new T(L,D)}n.A=function(D){return C(this,D).h},n.and=function(D){for(var P=Math.max(this.g.length,D.g.length),N=[],R=0;R<P;R++)N[R]=this.i(R)&D.i(R);return new o(N,this.h&D.h)},n.or=function(D){for(var P=Math.max(this.g.length,D.g.length),N=[],R=0;R<P;R++)N[R]=this.i(R)|D.i(R);return new o(N,this.h|D.h)},n.xor=function(D){for(var P=Math.max(this.g.length,D.g.length),N=[],R=0;R<P;R++)N[R]=this.i(R)^D.i(R);return new o(N,this.h^D.h)};function k(D){for(var P=D.g.length+1,N=[],R=0;R<P;R++)N[R]=D.i(R)<<1|D.i(R-1)>>>31;return new o(N,D.h)}function A(D,P){var N=P>>5;P%=32;for(var R=D.g.length-N,L=[],B=0;B<R;B++)L[B]=0<P?D.i(B+N)>>>P|D.i(B+N+1)<<32-P:D.i(B+N);return new o(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xpe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,rw=o}).apply(typeof IX<"u"?IX:typeof self<"u"?self:typeof window<"u"?window:{});var cP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Spe,hk,_pe,KN,PV,Tpe,Epe,Ape;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,q,Q){return O==Array.prototype||O==Object.prototype||(O[q]=Q.value),O};function t(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof cP=="object"&&cP];for(var q=0;q<O.length;++q){var Q=O[q];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object")}var r=t(this);function i(O,q){if(q)e:{var Q=r;O=O.split(".");for(var le=0;le<O.length-1;le++){var Ee=O[le];if(!(Ee in Q))break e;Q=Q[Ee]}O=O[O.length-1],le=Q[O],q=q(le),q!=le&&q!=null&&e(Q,O,{configurable:!0,writable:!0,value:q})}}function a(O,q){O instanceof String&&(O+="");var Q=0,le=!1,Ee={next:function(){if(!le&&Q<O.length){var Le=Q++;return{value:q(Le,O[Le]),done:!1}}return le=!0,{done:!0,value:void 0}}};return Ee[Symbol.iterator]=function(){return Ee},Ee}i("Array.prototype.values",function(O){return O||function(){return a(this,function(q,Q){return Q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(O){var q=typeof O;return q=q!="object"?q:O?Array.isArray(O)?"array":q:"null",q=="array"||q=="object"&&typeof O.length=="number"}function c(O){var q=typeof O;return q=="object"&&O!=null||q=="function"}function u(O,q,Q){return O.call.apply(O.bind,arguments)}function d(O,q,Q){if(!O)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var Ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ee,le),O.apply(q,Ee)}}return function(){return O.apply(q,arguments)}}function h(O,q,Q){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function f(O,q){var Q=Array.prototype.slice.call(arguments,1);return function(){var le=Q.slice();return le.push.apply(le,arguments),O.apply(this,le)}}function m(O,q){function Q(){}Q.prototype=q.prototype,O.aa=q.prototype,O.prototype=new Q,O.prototype.constructor=O,O.Qb=function(le,Ee,Le){for(var ht=Array(arguments.length-2),tr=2;tr<arguments.length;tr++)ht[tr-2]=arguments[tr];return q.prototype[Ee].apply(le,ht)}}function v(O){const q=O.length;if(0<q){const Q=Array(q);for(let le=0;le<q;le++)Q[le]=O[le];return Q}return[]}function y(O,q){for(let Q=1;Q<arguments.length;Q++){const le=arguments[Q];if(l(le)){const Ee=O.length||0,Le=le.length||0;O.length=Ee+Le;for(let ht=0;ht<Le;ht++)O[Ee+ht]=le[ht]}else O.push(le)}}class w{constructor(q,Q){this.i=q,this.j=Q,this.h=0,this.g=null}get(){let q;return 0<this.h?(this.h--,q=this.g,this.g=q.next,q.next=null):q=this.i(),q}}function S(O){return/^[\s\xa0]*$/.test(O)}function T(){var O=s.navigator;return O&&(O=O.userAgent)?O:""}function C(O){return C[" "](O),O}C[" "]=function(){};var k=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function A(O,q,Q){for(const le in O)q.call(Q,O[le],le,O)}function D(O,q){for(const Q in O)q.call(void 0,O[Q],Q,O)}function P(O){const q={};for(const Q in O)q[Q]=O[Q];return q}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(O,q){let Q,le;for(let Ee=1;Ee<arguments.length;Ee++){le=arguments[Ee];for(Q in le)O[Q]=le[Q];for(let Le=0;Le<N.length;Le++)Q=N[Le],Object.prototype.hasOwnProperty.call(le,Q)&&(O[Q]=le[Q])}}function L(O){var q=1;O=O.split(":");const Q=[];for(;0<q&&O.length;)Q.push(O.shift()),q--;return O.length&&Q.push(O.join(":")),Q}function B(O){s.setTimeout(()=>{throw O},0)}function $(){var O=ie;let q=null;return O.g&&(q=O.g,O.g=O.g.next,O.g||(O.h=null),q.next=null),q}class G{constructor(){this.h=this.g=null}add(q,Q){const le=W.get();le.set(q,Q),this.h?this.h.next=le:this.g=le,this.h=le}}var W=new w(()=>new K,O=>O.reset());class K{constructor(){this.next=this.g=this.h=null}set(q,Q){this.h=q,this.g=Q,this.next=null}reset(){this.next=this.g=this.h=null}}let X,te=!1,ie=new G,z=()=>{const O=s.Promise.resolve(void 0);X=()=>{O.then(se)}};var se=()=>{for(var O;O=$();){try{O.h.call(O.g)}catch(Q){B(Q)}var q=W;q.j(O),100>q.h&&(q.h++,O.next=q.g,q.g=O)}te=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(O,q){this.type=O,this.g=this.target=q,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var O=!1,q=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const Q=()=>{};s.addEventListener("test",Q,q),s.removeEventListener("test",Q,q)}catch{}return O}();function fe(O,q){if(ee.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var Q=this.type=O.type,le=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=q,q=O.relatedTarget){if(k){e:{try{C(q.nodeName);var Ee=!0;break e}catch{}Ee=!1}Ee||(q=null)}}else Q=="mouseover"?q=O.fromElement:Q=="mouseout"&&(q=O.toElement);this.relatedTarget=q,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:De[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&fe.aa.h.call(this)}}m(fe,ee);var De={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),ve=0;function de(O,q,Q,le,Ee){this.listener=O,this.proxy=null,this.src=q,this.type=Q,this.capture=!!le,this.ha=Ee,this.key=++ve,this.da=this.fa=!1}function me(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function xe(O){this.src=O,this.g={},this.h=0}xe.prototype.add=function(O,q,Q,le,Ee){var Le=O.toString();O=this.g[Le],O||(O=this.g[Le]=[],this.h++);var ht=$e(O,q,le,Ee);return-1<ht?(q=O[ht],Q||(q.fa=!1)):(q=new de(q,this.src,Le,!!le,Ee),q.fa=Q,O.push(q)),q};function pe(O,q){var Q=q.type;if(Q in O.g){var le=O.g[Q],Ee=Array.prototype.indexOf.call(le,q,void 0),Le;(Le=0<=Ee)&&Array.prototype.splice.call(le,Ee,1),Le&&(me(q),O.g[Q].length==0&&(delete O.g[Q],O.h--))}}function $e(O,q,Q,le){for(var Ee=0;Ee<O.length;++Ee){var Le=O[Ee];if(!Le.da&&Le.listener==q&&Le.capture==!!Q&&Le.ha==le)return Ee}return-1}var We="closure_lm_"+(1e6*Math.random()|0),ct={};function xt(O,q,Q,le,Ee){if(Array.isArray(q)){for(var Le=0;Le<q.length;Le++)xt(O,q[Le],Q,le,Ee);return null}return Q=yn(Q),O&&O[dt]?O.K(q,Q,c(le)?!!le.capture:!1,Ee):At(O,q,Q,!1,le,Ee)}function At(O,q,Q,le,Ee,Le){if(!q)throw Error("Invalid event type");var ht=c(Ee)?!!Ee.capture:!!Ee,tr=je(O);if(tr||(O[We]=tr=new xe(O)),Q=tr.add(q,Q,le,ht,Le),Q.proxy)return Q;if(le=pn(),Q.proxy=le,le.src=O,le.listener=Q,O.addEventListener)be||(Ee=ht),Ee===void 0&&(Ee=!1),O.addEventListener(q.toString(),le,Ee);else if(O.attachEvent)O.attachEvent(vn(q.toString()),le);else if(O.addListener&&O.removeListener)O.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return Q}function pn(){function O(Q){return q.call(O.src,O.listener,Q)}const q=Fn;return O}function Yt(O,q,Q,le,Ee){if(Array.isArray(q))for(var Le=0;Le<q.length;Le++)Yt(O,q[Le],Q,le,Ee);else le=c(le)?!!le.capture:!!le,Q=yn(Q),O&&O[dt]?(O=O.i,q=String(q).toString(),q in O.g&&(Le=O.g[q],Q=$e(Le,Q,le,Ee),-1<Q&&(me(Le[Q]),Array.prototype.splice.call(Le,Q,1),Le.length==0&&(delete O.g[q],O.h--)))):O&&(O=je(O))&&(q=O.g[q.toString()],O=-1,q&&(O=$e(q,Q,le,Ee)),(Q=-1<O?q[O]:null)&&Rn(Q))}function Rn(O){if(typeof O!="number"&&O&&!O.da){var q=O.src;if(q&&q[dt])pe(q.i,O);else{var Q=O.type,le=O.proxy;q.removeEventListener?q.removeEventListener(Q,le,O.capture):q.detachEvent?q.detachEvent(vn(Q),le):q.addListener&&q.removeListener&&q.removeListener(le),(Q=je(q))?(pe(Q,O),Q.h==0&&(Q.src=null,q[We]=null)):me(O)}}}function vn(O){return O in ct?ct[O]:ct[O]="on"+O}function Fn(O,q){if(O.da)O=!0;else{q=new fe(q,this);var Q=O.listener,le=O.ha||O.src;O.fa&&Rn(O),O=Q.call(le,q)}return O}function je(O){return O=O[We],O instanceof xe?O:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(O){return typeof O=="function"?O:(O[an]||(O[an]=function(q){return O.handleEvent(q)}),O[an])}function Te(){ce.call(this),this.i=new xe(this),this.M=this,this.F=null}m(Te,ce),Te.prototype[dt]=!0,Te.prototype.removeEventListener=function(O,q,Q,le){Yt(this,O,q,Q,le)};function Oe(O,q){var Q,le=O.F;if(le)for(Q=[];le;le=le.F)Q.push(le);if(O=O.M,le=q.type||q,typeof q=="string")q=new ee(q,O);else if(q instanceof ee)q.target=q.target||O;else{var Ee=q;q=new ee(le,O),R(q,Ee)}if(Ee=!0,Q)for(var Le=Q.length-1;0<=Le;Le--){var ht=q.g=Q[Le];Ee=et(ht,le,!0,q)&&Ee}if(ht=q.g=O,Ee=et(ht,le,!0,q)&&Ee,Ee=et(ht,le,!1,q)&&Ee,Q)for(Le=0;Le<Q.length;Le++)ht=q.g=Q[Le],Ee=et(ht,le,!1,q)&&Ee}Te.prototype.N=function(){if(Te.aa.N.call(this),this.i){var O=this.i,q;for(q in O.g){for(var Q=O.g[q],le=0;le<Q.length;le++)me(Q[le]);delete O.g[q],O.h--}}this.F=null},Te.prototype.K=function(O,q,Q,le){return this.i.add(String(O),q,!1,Q,le)},Te.prototype.L=function(O,q,Q,le){return this.i.add(String(O),q,!0,Q,le)};function et(O,q,Q,le){if(q=O.i.g[String(q)],!q)return!0;q=q.concat();for(var Ee=!0,Le=0;Le<q.length;++Le){var ht=q[Le];if(ht&&!ht.da&&ht.capture==Q){var tr=ht.listener,wa=ht.ha||ht.src;ht.fa&&pe(O.i,ht),Ee=tr.call(wa,le)!==!1&&Ee}}return Ee&&!le.defaultPrevented}function Ne(O,q,Q){if(typeof O=="function")Q&&(O=h(O,Q));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(q)?-1:s.setTimeout(O,q||0)}function Je(O){O.g=Ne(()=>{O.g=null,O.i&&(O.i=!1,Je(O))},O.l);const q=O.h;O.h=null,O.m.apply(null,q)}class pt extends ce{constructor(q,Q){super(),this.m=q,this.l=Q,this.h=null,this.i=!1,this.g=null}j(q){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kt(O){ce.call(this),this.h=O,this.g={}}m(Kt,ce);var vt=[];function Sn(O){A(O.g,function(q,Q){this.g.hasOwnProperty(Q)&&Rn(q)},O),O.g={}}Kt.prototype.N=function(){Kt.aa.N.call(this),Sn(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=s.JSON.stringify,Jt=s.JSON.parse,Cr=class{stringify(O){return s.JSON.stringify(O,void 0)}parse(O){return s.JSON.parse(O,void 0)}};function hn(){}hn.prototype.h=null;function Si(O){return O.h||(O.h=O.i())}function mo(){}var ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){ee.call(this,"d")}m(bn,ee);function Ue(){ee.call(this,"c")}m(Ue,ee);var ne={},oe=null;function ge(){return oe=oe||new Te}ne.La="serverreachability";function ke(O){ee.call(this,ne.La,O)}m(ke,ee);function qe(O){const q=ge();Oe(q,new ke(q))}ne.STAT_EVENT="statevent";function nt(O,q){ee.call(this,ne.STAT_EVENT,O),this.stat=q}m(nt,ee);function _t(O){const q=ge();Oe(q,new nt(q,O))}ne.Ma="timingevent";function ot(O,q){ee.call(this,ne.Ma,O),this.size=q}m(ot,ee);function St(O,q){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){O()},q)}function bt(){this.g=!0}bt.prototype.xa=function(){this.g=!1};function Gt(O,q,Q,le,Ee,Le){O.info(function(){if(O.g)if(Le)for(var ht="",tr=Le.split("&"),wa=0;wa<tr.length;wa++){var Hn=tr[wa].split("=");if(1<Hn.length){var Oa=Hn[0];Hn=Hn[1];var Pi=Oa.split("_");ht=2<=Pi.length&&Pi[1]=="type"?ht+(Oa+"="+Hn+"&"):ht+(Oa+"=redacted&")}}else ht=null;else ht=Le;return"XMLHTTP REQ ("+le+") [attempt "+Ee+"]: "+q+`
`+Q+`
`+ht})}function Jn(O,q,Q,le,Ee,Le,ht){O.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+Ee+"]: "+q+`
`+Q+`
`+Le+" "+ht})}function gi(O,q,Q,le){O.info(function(){return"XMLHTTP TEXT ("+q+"): "+rs(O,Q)+(le?" "+le:"")})}function va(O,q){O.info(function(){return"TIMEOUT: "+q})}bt.prototype.info=function(){};function rs(O,q){if(!O.g)return q;if(!q)return null;try{var Q=JSON.parse(q);if(Q){for(O=0;O<Q.length;O++)if(Array.isArray(Q[O])){var le=Q[O];if(!(2>le.length)){var Ee=le[1];if(Array.isArray(Ee)&&!(1>Ee.length)){var Le=Ee[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var ht=1;ht<Ee.length;ht++)Ee[ht]=""}}}}return on(Q)}catch{return q}}var sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},la;function bl(){}m(bl,hn),bl.prototype.g=function(){return new XMLHttpRequest},bl.prototype.i=function(){return{}},la=new bl;function Ya(O,q,Q,le){this.j=O,this.i=q,this.l=Q,this.R=le||1,this.U=new Kt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _i}function _i(){this.i=null,this.g="",this.h=!1}var ph={},Zr={};function Ma(O,q,Q){O.L=1,O.v=Qf(Na(q)),O.m=Q,O.P=!0,wl(O,null)}function wl(O,q){O.F=Date.now(),gh(O),O.A=Na(O.v);var Q=O.A,le=O.R;Array.isArray(le)||(le=[String(le)]),tm(Q.i,"t",le),O.C=0,Q=O.j.J,O.h=new _i,O.g=px(O.j,Q?q:null,!O.m),0<O.O&&(O.M=new pt(h(O.Y,O,O.g),O.O)),q=O.U,Q=O.g,le=O.ca;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(vt[0]=Ee.toString()),Ee=vt);for(var Le=0;Le<Ee.length;Le++){var ht=xt(Q,Ee[Le],le||q.handleEvent,!1,q.h||q);if(!ht)break;q.g[ht.key]=ht}q=O.H?P(O.H):{},O.m?(O.u||(O.u="POST"),q["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,q)):(O.u="GET",O.g.ea(O.A,O.u,null,q)),qe(),Gt(O.i,O.u,O.A,O.l,O.R,O.m)}Ya.prototype.ca=function(O){O=O.target;const q=this.M;q&&Tl(O)==3?q.j():this.Y(O)},Ya.prototype.Y=function(O){try{if(O==this.g)e:{const Pi=Tl(this.g);var q=this.g.Ba();const Us=this.g.Z();if(!(3>Pi)&&(Pi!=3||this.g&&(this.h.h||this.g.oa()||Ny(this.g)))){this.J||Pi!=4||q==7||(q==8||0>=Us?qe(3):qe(2)),mh(this);var Q=this.g.Z();this.X=Q;t:if(Yf(this)){var le=Ny(this.g);O="";var Ee=le.length,Le=Tl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){er(this),Zl(this);var ht="";break t}this.h.i=new s.TextDecoder}for(q=0;q<Ee;q++)this.h.h=!0,O+=this.h.i.decode(le[q],{stream:!(Le&&q==Ee-1)});le.length=0,this.h.g+=O,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=Q==200,Jn(this.i,this.u,this.A,this.l,this.R,Pi,Q),this.o){if(this.T&&!this.K){t:{if(this.g){var tr,wa=this.g;if((tr=wa.g?wa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(tr)){var Hn=tr;break t}}Hn=null}if(Q=Hn)gi(this.i,this.l,Q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,Q);else{this.o=!1,this.s=3,_t(12),er(this),Zl(this);break e}}if(this.P){Q=!0;let Za;for(;!this.J&&this.C<ht.length;)if(Za=zn(this,ht),Za==Zr){Pi==4&&(this.s=4,_t(14),Q=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Za==ph){this.s=4,_t(15),gi(this.i,this.l,ht,"[Invalid Chunk]"),Q=!1;break}else gi(this.i,this.l,Za,null),is(this,Za);if(Yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pi!=4||ht.length!=0||this.h.h||(this.s=1,_t(16),Q=!1),this.o=this.o&&Q,!Q)gi(this.i,this.l,ht,"[Invalid Chunked Response]"),er(this),Zl(this);else if(0<ht.length&&!this.W){this.W=!0;var Oa=this.j;Oa.g==this&&Oa.ba&&!Oa.M&&(Oa.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),tp(Oa),Oa.M=!0,_t(11))}}else gi(this.i,this.l,ht,null),is(this,ht);Pi==4&&er(this),this.o&&!this.J&&(Pi==4?Ra(this.j,this):(this.o=!1,gh(this)))}else Wc(this.g),Q==400&&0<ht.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),er(this),Zl(this)}}}catch{}finally{}};function Yf(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function zn(O,q){var Q=O.C,le=q.indexOf(`
`,Q);return le==-1?Zr:(Q=Number(q.substring(Q,le)),isNaN(Q)?ph:(le+=1,le+Q>q.length?Zr:(q=q.slice(le,le+Q),O.C=le+Q,q)))}Ya.prototype.cancel=function(){this.J=!0,er(this)};function gh(O){O.S=Date.now()+O.I,Qg(O,O.I)}function Qg(O,q){if(O.B!=null)throw Error("WatchDog timer not null");O.B=St(h(O.ba,O),q)}function mh(O){O.B&&(s.clearTimeout(O.B),O.B=null)}Ya.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(va(this.i,this.A),this.L!=2&&(qe(),_t(17)),er(this),this.s=2,Zl(this)):Qg(this,this.S-O)};function Zl(O){O.j.G==0||O.J||Ra(O.j,O)}function er(O){mh(O);var q=O.M;q&&typeof q.ma=="function"&&q.ma(),O.M=null,Sn(O.U),O.g&&(q=O.g,O.g=null,q.abort(),q.ma())}function is(O,q){try{var Q=O.j;if(Q.G!=0&&(Q.g==O||xl(Q.h,O))){if(!O.K&&xl(Q.h,O)&&Q.G==3){try{var le=Q.Da.g.parse(q)}catch{le=null}if(Array.isArray(le)&&le.length==3){var Ee=le;if(Ee[0]==0){e:if(!Q.u){if(Q.g)if(Q.g.F+3e3<O.F)np(Q),am(Q);else break e;Oy(Q),_t(18)}}else Q.za=Ee[1],0<Q.za-Q.T&&37500>Ee[2]&&Q.F&&Q.v==0&&!Q.C&&(Q.C=St(h(Q.Za,Q),6e3));if(1>=Jg(Q.h)&&Q.ca){try{Q.ca()}catch{}Q.ca=void 0}}else Yc(Q,11)}else if((O.K||Q.g==O)&&np(Q),!S(q))for(Ee=Q.Da.g.parse(q),q=0;q<Ee.length;q++){let Hn=Ee[q];if(Q.T=Hn[0],Hn=Hn[1],Q.G==2)if(Hn[0]=="c"){Q.K=Hn[1],Q.ia=Hn[2];const Oa=Hn[3];Oa!=null&&(Q.la=Oa,Q.j.info("VER="+Q.la));const Pi=Hn[4];Pi!=null&&(Q.Aa=Pi,Q.j.info("SVER="+Q.Aa));const Us=Hn[5];Us!=null&&typeof Us=="number"&&0<Us&&(le=1.5*Us,Q.L=le,Q.j.info("backChannelRequestTimeoutMs_="+le)),le=Q;const Za=O.g;if(Za){const ac=Za.g?Za.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ac){var Le=le.h;Le.g||ac.indexOf("spdy")==-1&&ac.indexOf("quic")==-1&&ac.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(Kf(Le,Le.h),Le.h=null))}if(le.D){const Ly=Za.g?Za.g.getResponseHeader("X-HTTP-Session-Id"):null;Ly&&(le.ya=Ly,jr(le.I,le.D,Ly))}}Q.G=3,Q.l&&Q.l.ua(),Q.ba&&(Q.R=Date.now()-O.F,Q.j.info("Handshake RTT: "+Q.R+"ms")),le=Q;var ht=O;if(le.qa=fx(le,le.J?le.ia:null,le.W),ht.K){Pa(le.h,ht);var tr=ht,wa=le.L;wa&&(tr.I=wa),tr.B&&(mh(tr),gh(tr)),le.g=ht}else Et(le);0<Q.i.length&&td(Q)}else Hn[0]!="stop"&&Hn[0]!="close"||Yc(Q,7);else Q.G==3&&(Hn[0]=="stop"||Hn[0]=="close"?Hn[0]=="stop"?Yc(Q,7):Ry(Q):Hn[0]!="noop"&&Q.l&&Q.l.ta(Hn),Q.v=0)}}qe(4)}catch{}}var sx=class{constructor(O,q){this.g=O,this.map=q}};function ya(O){this.l=O||10,s.PerformanceNavigationTiming?(O=s.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ca(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Jg(O){return O.h?1:O.g?O.g.size:0}function xl(O,q){return O.h?O.h==q:O.g?O.g.has(q):!1}function Kf(O,q){O.g?O.g.add(q):O.h=q}function Pa(O,q){O.h&&O.h==q?O.h=null:O.g&&O.g.has(q)&&O.g.delete(q)}ya.prototype.cancel=function(){if(this.i=Xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Xf(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let q=O.i;for(const Q of O.g.values())q=q.concat(Q.D);return q}return v(O.i)}function Iy(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(l(O)){for(var q=[],Q=O.length,le=0;le<Q;le++)q.push(O[le]);return q}q=[],Q=0;for(le in O)q[Q++]=O[le];return q}function vh(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(l(O)||typeof O=="string"){var q=[];O=O.length;for(var Q=0;Q<O;Q++)q.push(Q);return q}q=[],Q=0;for(const le in O)q[Q++]=le;return q}}}function My(O,q){if(O.forEach&&typeof O.forEach=="function")O.forEach(q,void 0);else if(l(O)||typeof O=="string")Array.prototype.forEach.call(O,q,void 0);else for(var Q=vh(O),le=Iy(O),Ee=le.length,Le=0;Le<Ee;Le++)q.call(void 0,le[Le],Q&&Q[Le],O)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zf(O,q){if(O){O=O.split("&");for(var Q=0;Q<O.length;Q++){var le=O[Q].indexOf("="),Ee=null;if(0<=le){var Le=O[Q].substring(0,le);Ee=O[Q].substring(le+1)}else Le=O[Q];q(Le,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function Wi(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof Wi){this.h=O.h,yh(this,O.j),this.o=O.o,this.g=O.g,Ju(this,O.s),this.l=O.l;var q=O.i,Q=new as;Q.i=q.i,q.g&&(Q.g=new Map(q.g),Q.h=q.h),Oo(this,Q),this.m=O.m}else O&&(q=String(O).match(js))?(this.h=!1,yh(this,q[1]||"",!0),this.o=Fs(q[2]||""),this.g=Fs(q[3]||"",!0),Ju(this,q[4]),this.l=Fs(q[5]||"",!0),Oo(this,q[6]||"",!0),this.m=Fs(q[7]||"")):(this.h=!1,this.i=new as(null,this.h))}Wi.prototype.toString=function(){var O=[],q=this.j;q&&O.push(ba(q,em,!0),":");var Q=this.g;return(Q||q=="file")&&(O.push("//"),(q=this.o)&&O.push(ba(q,em,!0),"@"),O.push(encodeURIComponent(String(Q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Q=this.s,Q!=null&&O.push(":",String(Q))),(Q=this.l)&&(this.g&&Q.charAt(0)!="/"&&O.push("/"),O.push(ba(Q,Q.charAt(0)=="/"?lx:bh,!0))),(Q=this.i.toString())&&O.push("?",Q),(Q=this.m)&&O.push("#",ba(Q,wh)),O.join("")};function Na(O){return new Wi(O)}function yh(O,q,Q){O.j=Q?Fs(q,!0):q,O.j&&(O.j=O.j.replace(/:$/,""))}function Ju(O,q){if(q){if(q=Number(q),isNaN(q)||0>q)throw Error("Bad port number "+q);O.s=q}else O.s=null}function Oo(O,q,Q){q instanceof as?(O.i=q,ux(O.i,O.h)):(Q||(q=ba(q,cx)),O.i=new as(q,O.h))}function jr(O,q,Q){O.i.set(q,Q)}function Qf(O){return jr(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function Fs(O,q){return O?q?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function ba(O,q,Q){return typeof O=="string"?(O=encodeURI(O).replace(q,Ql),Q&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Ql(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var em=/[#\/\?@]/g,bh=/[#\?:]/g,lx=/[#\?]/g,cx=/[#\?@]/g,wh=/#/g;function as(O,q){this.h=this.g=null,this.i=O||null,this.j=!!q}function $s(O){O.g||(O.g=new Map,O.h=0,O.i&&Zf(O.i,function(q,Q){O.add(decodeURIComponent(q.replace(/\+/g," ")),Q)}))}n=as.prototype,n.add=function(O,q){$s(this),this.i=null,O=os(this,O);var Q=this.g.get(O);return Q||this.g.set(O,Q=[]),Q.push(q),this.h+=1,this};function vo(O,q){$s(O),q=os(O,q),O.g.has(q)&&(O.i=null,O.h-=O.g.get(q).length,O.g.delete(q))}function Sl(O,q){return $s(O),q=os(O,q),O.g.has(q)}n.forEach=function(O,q){$s(this),this.g.forEach(function(Q,le){Q.forEach(function(Ee){O.call(q,Ee,le,this)},this)},this)},n.na=function(){$s(this);const O=Array.from(this.g.values()),q=Array.from(this.g.keys()),Q=[];for(let le=0;le<q.length;le++){const Ee=O[le];for(let Le=0;Le<Ee.length;Le++)Q.push(q[le])}return Q},n.V=function(O){$s(this);let q=[];if(typeof O=="string")Sl(this,O)&&(q=q.concat(this.g.get(os(this,O))));else{O=Array.from(this.g.values());for(let Q=0;Q<O.length;Q++)q=q.concat(O[Q])}return q},n.set=function(O,q){return $s(this),this.i=null,O=os(this,O),Sl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[q]),this.h+=1,this},n.get=function(O,q){return O?(O=this.V(O),0<O.length?String(O[0]):q):q};function tm(O,q,Q){vo(O,q),0<Q.length&&(O.i=null,O.g.set(os(O,q),v(Q)),O.h+=Q.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],q=Array.from(this.g.keys());for(var Q=0;Q<q.length;Q++){var le=q[Q];const Le=encodeURIComponent(String(le)),ht=this.V(le);for(le=0;le<ht.length;le++){var Ee=Le;ht[le]!==""&&(Ee+="="+encodeURIComponent(String(ht[le]))),O.push(Ee)}}return this.i=O.join("&")};function os(O,q){return q=String(q),O.j&&(q=q.toLowerCase()),q}function ux(O,q){q&&!O.j&&($s(O),O.i=null,O.g.forEach(function(Q,le){var Ee=le.toLowerCase();le!=Ee&&(vo(this,le),tm(this,Ee,Q))},O)),O.j=q}function Jf(O,q){const Q=new bt;if(s.Image){const le=new Image;le.onload=f(Ka,Q,"TestLoadImage: loaded",!0,q,le),le.onerror=f(Ka,Q,"TestLoadImage: error",!1,q,le),le.onabort=f(Ka,Q,"TestLoadImage: abort",!1,q,le),le.ontimeout=f(Ka,Q,"TestLoadImage: timeout",!1,q,le),s.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=O}else q(!1)}function Jl(O,q){const Q=new bt,le=new AbortController,Ee=setTimeout(()=>{le.abort(),Ka(Q,"TestPingServer: timeout",!1,q)},1e4);fetch(O,{signal:le.signal}).then(Le=>{clearTimeout(Ee),Le.ok?Ka(Q,"TestPingServer: ok",!0,q):Ka(Q,"TestPingServer: server error",!1,q)}).catch(()=>{clearTimeout(Ee),Ka(Q,"TestPingServer: error",!1,q)})}function Ka(O,q,Q,le,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),le(Q)}catch{}}function ss(){this.g=new Cr}function _l(O,q,Q){const le=Q||"";try{My(O,function(Ee,Le){let ht=Ee;c(Ee)&&(ht=on(Ee)),q.push(le+Le+"="+encodeURIComponent(ht))})}catch(Ee){throw q.push(le+"type="+encodeURIComponent("_badmap")),Ee}}function ec(O){this.l=O.Ub||null,this.j=O.eb||!1}m(ec,hn),ec.prototype.g=function(){return new tc(this.l,this.j)},ec.prototype.i=function(O){return function(){return O}}({});function tc(O,q){Te.call(this),this.D=O,this.o=q,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(tc,Te),n=tc.prototype,n.open=function(O,q){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=q,this.readyState=1,Hc(this)},n.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const q={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(q.body=O),(this.D||s).fetch(new Request(this.A,q)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nc(this)),this.readyState=0},n.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ep(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function ep(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}n.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var q=O.value?O.value:new Uint8Array(0);(q=this.v.decode(q,{stream:!O.done}))&&(this.response=this.responseText+=q)}O.done?nc(this):Hc(this),this.readyState==3&&ep(this)}},n.Ra=function(O){this.g&&(this.response=this.responseText=O,nc(this))},n.Qa=function(O){this.g&&(this.response=O,nc(this))},n.ga=function(){this.g&&nc(this)};function nc(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Hc(O)}n.setRequestHeader=function(O,q){this.u.append(O,q)},n.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],q=this.h.entries();for(var Q=q.next();!Q.done;)Q=Q.value,O.push(Q[0]+": "+Q[1]),Q=q.next();return O.join(`\r
`)};function Hc(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function nm(O){let q="";return A(O,function(Q,le){q+=le,q+=":",q+=Q,q+=`\r
`}),q}function qi(O,q,Q){e:{for(le in Q){var le=!1;break e}le=!0}le||(Q=nm(Q),typeof O=="string"?Q!=null&&encodeURIComponent(String(Q)):jr(O,q,Q))}function or(O){Te.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(or,Te);var Gc=/^https?$/i,ed=["POST","PUT"];n=or.prototype,n.Ha=function(O){this.J=O},n.ea=function(O,q,Q,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);q=q?q.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():la.g(),this.v=this.o?Si(this.o):Si(la),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(q,String(O),!0),this.B=!1}catch(Le){Py(this,Le);return}if(O=Q||"",Q=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var Ee in le)Q.set(Ee,le[Ee]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const Le of le.keys())Q.set(Le,le.get(Le));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from(Q.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ee=s.FormData&&O instanceof s.FormData,!(0<=Array.prototype.indexOf.call(ed,q,void 0))||le||Ee||Q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,ht]of Q)this.g.setRequestHeader(Le,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sh(this),this.u=!0,this.g.send(O),this.u=!1}catch(Le){Py(this,Le)}};function Py(O,q){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=q,O.m=5,rm(O),Bs(O)}function rm(O){O.A||(O.A=!0,Oe(O,"complete"),Oe(O,"error"))}n.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,Oe(this,"complete"),Oe(this,"abort"),Bs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),or.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?xh(this):this.bb())},n.bb=function(){xh(this)};function xh(O){if(O.h&&typeof o<"u"&&(!O.v[1]||Tl(O)!=4||O.Z()!=2)){if(O.u&&Tl(O)==4)Ne(O.Ea,0,O);else if(Oe(O,"readystatechange"),Tl(O)==4){O.h=!1;try{const ht=O.Z();e:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var q=!0;break e;default:q=!1}var Q;if(!(Q=q)){var le;if(le=ht===0){var Ee=String(O.D).match(js)[1]||null;!Ee&&s.self&&s.self.location&&(Ee=s.self.location.protocol.slice(0,-1)),le=!Gc.test(Ee?Ee.toLowerCase():"")}Q=le}if(Q)Oe(O,"complete"),Oe(O,"success");else{O.m=6;try{var Le=2<Tl(O)?O.g.statusText:""}catch{Le=""}O.l=Le+" ["+O.Z()+"]",rm(O)}}finally{Bs(O)}}}}function Bs(O,q){if(O.g){Sh(O);const Q=O.g,le=O.v[0]?()=>{}:null;O.g=null,O.v=null,q||Oe(O,"ready");try{Q.onreadystatechange=le}catch{}}}function Sh(O){O.I&&(s.clearTimeout(O.I),O.I=null)}n.isActive=function(){return!!this.g};function Tl(O){return O.g?O.g.readyState:0}n.Z=function(){try{return 2<Tl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(O){if(this.g){var q=this.g.responseText;return O&&q.indexOf(O)==0&&(q=q.substring(O.length)),Jt(q)}};function Ny(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function Wc(O){const q={};O=(O.g&&2<=Tl(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<O.length;le++){if(S(O[le]))continue;var Q=L(O[le]);const Ee=Q[0];if(Q=Q[1],typeof Q!="string")continue;Q=Q.trim();const Le=q[Ee]||[];q[Ee]=Le,Le.push(Q)}D(q,function(le){return le.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rc(O,q,Q){return Q&&Q.internalChannelParams&&Q.internalChannelParams[O]||q}function im(O){this.Aa=0,this.i=[],this.j=new bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rc("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rc("baseRetryDelayMs",5e3,O),this.cb=rc("retryDelaySeedMs",1e4,O),this.Wa=rc("forwardChannelMaxRetries",2,O),this.wa=rc("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(O&&O.concurrentRequestLimit),this.Da=new ss,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=im.prototype,n.la=8,n.G=1,n.connect=function(O,q,Q,le){_t(0),this.W=O,this.H=q||{},Q&&le!==void 0&&(this.H.OSID=Q,this.H.OAID=le),this.F=this.X,this.I=fx(this,null,this.W),td(this)};function Ry(O){if(dx(O),O.G==3){var q=O.U++,Q=Na(O.I);if(jr(Q,"SID",O.K),jr(Q,"RID",q),jr(Q,"TYPE","terminate"),qc(O,Q),q=new Ya(O,O.j,q),q.L=2,q.v=Qf(Na(Q)),Q=!1,s.navigator&&s.navigator.sendBeacon)try{Q=s.navigator.sendBeacon(q.v.toString(),"")}catch{}!Q&&s.Image&&(new Image().src=q.v,Q=!0),Q||(q.g=px(q.j,null),q.g.ea(q.v)),q.F=Date.now(),gh(q)}hx(O)}function am(O){O.g&&(tp(O),O.g.cancel(),O.g=null)}function dx(O){am(O),O.u&&(s.clearTimeout(O.u),O.u=null),np(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&s.clearTimeout(O.s),O.s=null)}function td(O){if(!ca(O.h)&&!O.s){O.s=!0;var q=O.Ga;X||z(),te||(X(),te=!0),ie.add(q,O),O.B=0}}function fn(O,q){return Jg(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=q.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=St(h(O.Ga,O,q),ic(O,O.B)),O.B++,!0)}n.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const Ee=new Ya(this,this.j,O);let Le=this.o;if(this.S&&(Le?(Le=P(Le),R(Le,this.S)):Le=this.S),this.m!==null||this.O||(Ee.H=Le,Le=null),this.P)e:{for(var q=0,Q=0;Q<this.i.length;Q++){t:{var le=this.i[Q];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(q+=le,4096<q){q=Q;break e}if(q===4096||Q===this.i.length-1){q=Q+1;break e}}q=1e3}else q=1e3;q=sr(this,Ee,q),Q=Na(this.I),jr(Q,"RID",O),jr(Q,"CVER",22),this.D&&jr(Q,"X-HTTP-Session-Id",this.D),qc(this,Q),Le&&(this.O?q="headers="+encodeURIComponent(String(nm(Le)))+"&"+q:this.m&&qi(Q,this.m,Le)),Kf(this.h,Ee),this.Ua&&jr(Q,"TYPE","init"),this.P?(jr(Q,"$req",q),jr(Q,"SID","null"),Ee.T=!0,Ma(Ee,Q,null)):Ma(Ee,Q,q),this.G=2}}else this.G==3&&(O?_h(this,O):this.i.length==0||ca(this.h)||_h(this))};function _h(O,q){var Q;q?Q=q.l:Q=O.U++;const le=Na(O.I);jr(le,"SID",O.K),jr(le,"RID",Q),jr(le,"AID",O.T),qc(O,le),O.m&&O.o&&qi(le,O.m,O.o),Q=new Ya(O,O.j,Q,O.B+1),O.m===null&&(Q.H=O.o),q&&(O.i=q.D.concat(O.i)),q=sr(O,Q,1e3),Q.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),Kf(O.h,Q),Ma(Q,le,q)}function qc(O,q){O.H&&A(O.H,function(Q,le){jr(q,le,Q)}),O.l&&My({},function(Q,le){jr(q,le,Q)})}function sr(O,q,Q){Q=Math.min(O.i.length,Q);var le=O.l?h(O.l.Na,O.l,O):null;e:{var Ee=O.i;let Le=-1;for(;;){const ht=["count="+Q];Le==-1?0<Q?(Le=Ee[0].g,ht.push("ofs="+Le)):Le=0:ht.push("ofs="+Le);let tr=!0;for(let wa=0;wa<Q;wa++){let Hn=Ee[wa].g;const Oa=Ee[wa].map;if(Hn-=Le,0>Hn)Le=Math.max(0,Ee[wa].g-100),tr=!1;else try{_l(Oa,ht,"req"+Hn+"_")}catch{le&&le(Oa)}}if(tr){le=ht.join("&");break e}}}return O=O.i.splice(0,Q),q.D=O,le}function Et(O){if(!O.g&&!O.u){O.Y=1;var q=O.Fa;X||z(),te||(X(),te=!0),ie.add(q,O),O.v=0}}function Oy(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=St(h(O.Fa,O),ic(O,O.v)),O.v++,!0)}n.Fa=function(){if(this.u=null,mi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=St(h(this.ab,this),O)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),am(this),mi(this))};function tp(O){O.A!=null&&(s.clearTimeout(O.A),O.A=null)}function mi(O){O.g=new Ya(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var q=Na(O.qa);jr(q,"RID","rpc"),jr(q,"SID",O.K),jr(q,"AID",O.T),jr(q,"CI",O.F?"0":"1"),!O.F&&O.ja&&jr(q,"TO",O.ja),jr(q,"TYPE","xmlhttp"),qc(O,q),O.m&&O.o&&qi(q,O.m,O.o),O.L&&(O.g.I=O.L);var Q=O.g;O=O.ia,Q.L=1,Q.v=Qf(Na(q)),Q.m=null,Q.P=!0,wl(Q,O)}n.Za=function(){this.C!=null&&(this.C=null,am(this),Oy(this),_t(19))};function np(O){O.C!=null&&(s.clearTimeout(O.C),O.C=null)}function Ra(O,q){var Q=null;if(O.g==q){np(O),tp(O),O.g=null;var le=2}else if(xl(O.h,q))Q=q.D,Pa(O.h,q),le=1;else return;if(O.G!=0){if(q.o)if(le==1){Q=q.m?q.m.length:0,q=Date.now()-q.F;var Ee=O.B;le=ge(),Oe(le,new ot(le,Q)),td(O)}else Et(O);else if(Ee=q.s,Ee==3||Ee==0&&0<q.X||!(le==1&&fn(O,q)||le==2&&Oy(O)))switch(Q&&0<Q.length&&(q=O.h,q.i=q.i.concat(Q)),Ee){case 1:Yc(O,5);break;case 4:Yc(O,10);break;case 3:Yc(O,6);break;default:Yc(O,2)}}}function ic(O,q){let Q=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(Q*=2),Q*q}function Yc(O,q){if(O.j.info("Error code "+q),q==2){var Q=h(O.fb,O),le=O.Xa;const Ee=!le;le=new Wi(le||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||yh(le,"https"),Qf(le),Ee?Jf(le.toString(),Q):Jl(le.toString(),Q)}else _t(2);O.G=0,O.l&&O.l.sa(q),hx(O),dx(O)}n.fb=function(O){O?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function hx(O){if(O.G=0,O.ka=[],O.l){const q=Xf(O.h);(q.length!=0||O.i.length!=0)&&(y(O.ka,q),y(O.ka,O.i),O.h.i.length=0,v(O.i),O.i.length=0),O.l.ra()}}function fx(O,q,Q){var le=Q instanceof Wi?Na(Q):new Wi(Q);if(le.g!="")q&&(le.g=q+"."+le.g),Ju(le,le.s);else{var Ee=s.location;le=Ee.protocol,q=q?q+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;var Le=new Wi(null);le&&yh(Le,le),q&&(Le.g=q),Ee&&Ju(Le,Ee),Q&&(Le.l=Q),le=Le}return Q=O.D,q=O.ya,Q&&q&&jr(le,Q,q),jr(le,"VER",O.la),qc(O,le),le}function px(O,q,Q){if(q&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return q=O.Ca&&!O.pa?new or(new ec({eb:Q})):new or(O.pa),q.Ha(O.J),q}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function om(){}n=om.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sm(){}sm.prototype.g=function(O,q){return new Xa(O,q)};function Xa(O,q){Te.call(this),this.g=new im(q),this.l=O,this.h=q&&q.messageUrlParams||null,O=q&&q.messageHeaders||null,q&&q.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=q&&q.initMessageHeaders||null,q&&q.messageContentType&&(O?O["X-WebChannel-Content-Type"]=q.messageContentType:O={"X-WebChannel-Content-Type":q.messageContentType}),q&&q.va&&(O?O["X-WebChannel-Client-Profile"]=q.va:O={"X-WebChannel-Client-Profile":q.va}),this.g.S=O,(O=q&&q.Sb)&&!S(O)&&(this.g.m=O),this.v=q&&q.supportsCrossDomainXhr||!1,this.u=q&&q.sendRawJson||!1,(q=q&&q.httpSessionIdParam)&&!S(q)&&(this.g.D=q,O=this.h,O!==null&&q in O&&(O=this.h,q in O&&delete O[q])),this.j=new Kc(this)}m(Xa,Te),Xa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xa.prototype.close=function(){Ry(this.g)},Xa.prototype.o=function(O){var q=this.g;if(typeof O=="string"){var Q={};Q.__data__=O,O=Q}else this.u&&(Q={},Q.__data__=on(O),O=Q);q.i.push(new sx(q.Ya++,O)),q.G==3&&td(q)},Xa.prototype.N=function(){this.g.l=null,delete this.j,Ry(this.g),delete this.g,Xa.aa.N.call(this)};function gx(O){bn.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var q=O.__sm__;if(q){e:{for(const Q in q){O=Q;break e}O=void 0}(this.i=O)&&(O=this.i,q=q!==null&&O in q?q[O]:void 0),this.data=q}else this.data=O}m(gx,bn);function mx(){Ue.call(this),this.status=1}m(mx,Ue);function Kc(O){this.g=O}m(Kc,om),Kc.prototype.ua=function(){Oe(this.g,"a")},Kc.prototype.ta=function(O){Oe(this.g,new gx(O))},Kc.prototype.sa=function(O){Oe(this.g,new mx)},Kc.prototype.ra=function(){Oe(this.g,"b")},sm.prototype.createWebChannel=sm.prototype.g,Xa.prototype.send=Xa.prototype.o,Xa.prototype.open=Xa.prototype.m,Xa.prototype.close=Xa.prototype.close,Ape=function(){return new sm},Epe=function(){return ge()},Tpe=ne,PV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sa.NO_ERROR=0,sa.TIMEOUT=8,sa.HTTP_ERROR=6,KN=sa,Xl.COMPLETE="complete",_pe=Xl,mo.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",Te.prototype.listen=Te.prototype.K,hk=mo,or.prototype.listenOnce=or.prototype.L,or.prototype.getLastError=or.prototype.Ka,or.prototype.getLastErrorCode=or.prototype.Ba,or.prototype.getStatus=or.prototype.Z,or.prototype.getResponseJson=or.prototype.Oa,or.prototype.getResponseText=or.prototype.oa,or.prototype.send=or.prototype.ea,or.prototype.setWithCredentials=or.prototype.Ha,Spe=or}).apply(typeof cP<"u"?cP:typeof self<"u"?self:typeof window<"u"?window:{});const MX="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ts.UNAUTHENTICATED=new Ts(null),Ts.GOOGLE_CREDENTIALS=new Ts("google-credentials-uid"),Ts.FIRST_PARTY=new Ts("first-party-uid"),Ts.MOCK_USER=new Ts("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new aI("@firebase/firestore");function pA(){return bw.logLevel}function Bt(n,...e){if(bw.logLevel<=pr.DEBUG){const t=e.map(c8);bw.debug(`Firestore (${X1}): ${n}`,...t)}}function _g(n,...e){if(bw.logLevel<=pr.ERROR){const t=e.map(c8);bw.error(`Firestore (${X1}): ${n}`,...t)}}function s1(n,...e){if(bw.logLevel<=pr.WARN){const t=e.map(c8);bw.warn(`Firestore (${X1}): ${n}`,...t)}}function c8(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(n="Unexpected state"){const e=`FIRESTORE (${X1}) INTERNAL ASSERTION FAILED: `+n;throw _g(e),new Error(e)}function ii(n,e){n||Nn()}function Un(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Ko{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kpe{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wMe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ts.UNAUTHENTICATED))}shutdown(){}}class xMe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SMe{constructor(e){this.t=e,this.currentUser=Ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ii(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let a=new lg;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new lg,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lg)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ii(typeof r.accessToken=="string"),new kpe(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ii(e===null||typeof e=="string"),new Ts(e)}}class _Me{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ts.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class TMe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _Me(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EMe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AMe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ii(this.o===void 0);const r=a=>{a.error!=null&&Bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Bt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ii(typeof t.token=="string"),this.R=t.token,new EMe(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kMe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cpe{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=kMe(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Pr(n,e){return n<e?-1:n>e?1:0}function l1(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ct(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ct(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ct(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ct(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pr(this.nanoseconds,e.nanoseconds):Pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bn(e)}static min(){return new Bn(new Kr(0,0))}static max(){return new Bn(new Kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,r){t===void 0?t=0:t>e.length&&Nn(),r===void 0?r=e.length-t:r>e.length-t&&Nn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return AC.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof AC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),o=t.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Fi extends AC{construct(e,t,r){return new Fi(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ct(Ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Fi(t)}static emptyPath(){return new Fi([])}}const CMe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qo extends AC{construct(e,t,r){return new qo(e,t,r)}static isValidIdentifier(e){return CMe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qo(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ct(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Ct(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ct(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Ct(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qo(t)}static emptyPath(){return new qo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.path=e}static fromPath(e){return new cn(Fi.fromString(e))}static fromName(e){return new cn(Fi.fromString(e).popFirst(5))}static empty(){return new cn(Fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cn(new Fi(e.slice()))}}function DMe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Bn.fromTimestamp(r===1e9?new Kr(t+1,0):new Kr(t,r));return new ry(i,cn.empty(),e)}function IMe(n){return new ry(n.readTime,n.key,-1)}class ry{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ry(Bn.min(),cn.empty(),-1)}static max(){return new ry(Bn.max(),cn.empty(),-1)}}function MMe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=cn.comparator(n.documentKey,e.documentKey),t!==0?t:Pr(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PMe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NMe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(n){if(n.code!==Ke.FAILED_PRECONDITION||n.message!==PMe)throw n;Bt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rt?t:rt.resolve(t)}catch(t){return rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.reject(t)}static resolve(e){return new rt((t,r)=>{t(e)})}static reject(e){return new rt((t,r)=>{r(e)})}static waitFor(e){return new rt((t,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&t()},l=>r(l))}),o=!0,a===i&&t()})}static or(e){let t=rt.resolve(!1);for(const r of e)t=t.next(i=>i?rt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new rt((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let l=0;l<a;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++s,s===a&&r(o)},u=>i(u))}})}static doWhile(e,t){return new rt((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function RMe(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sI(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}u8.oe=-1;function lL(n){return n==null}function $R(n){return n===0&&1/n==-1/0}function OMe(n){return typeof n=="number"&&Number.isInteger(n)&&!$R(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vw(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dpe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.comparator=e,this.root=t||Wo.EMPTY}insert(e,t){return new ia(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wo.BLACK,null,null))}remove(e){return new ia(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uP(this.root,e,this.comparator,!1)}getReverseIterator(){return new uP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uP(this.root,e,this.comparator,!0)}}class uP{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wo{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Wo.RED,this.left=i??Wo.EMPTY,this.right=a??Wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Wo(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Wo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();const e=this.left.check();if(e!==this.right.check())throw Nn();return e+(this.isRed()?0:1)}}Wo.EMPTY=null,Wo.RED=!0,Wo.BLACK=!1;Wo.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(e,t,r,i,a){return this}insert(e,t,r){return new Wo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e,this.data=new ia(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NX(this.data.getIterator())}getIteratorFrom(e){return new NX(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xo(this.comparator);return t.data=e,t}}class NX{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.fields=e,e.sort(qo.comparator)}static empty(){return new Oc([])}unionWith(e){let t=new Xo(qo.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return l1(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ipe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Ipe("Invalid base64 string: "+a):a}}(e);return new Qo(t)}static fromUint8Array(e){const t=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Qo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qo.EMPTY_BYTE_STRING=new Qo("");const LMe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iy(n){if(ii(!!n),typeof n=="string"){let e=0;const t=LMe.exec(n);if(ii(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Aa(n.seconds),nanos:Aa(n.nanos)}}function Aa(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ww(n){return typeof n=="string"?Qo.fromBase64String(n):Qo.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function h8(n){const e=n.mapValue.fields.__previous_value__;return d8(e)?h8(e):e}function kC(n){const e=iy(n.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jMe{constructor(e,t,r,i,a,o,s,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=c}}class CC{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new CC("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof CC&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={mapValue:{}};function xw(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?d8(n)?4:$Me(n)?9007199254740991:FMe(n)?10:11:Nn()}function Mf(n,e){if(n===e)return!0;const t=xw(n);if(t!==xw(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kC(n).isEqual(kC(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=iy(i.timestampValue),s=iy(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return ww(i.bytesValue).isEqual(ww(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Aa(i.geoPointValue.latitude)===Aa(a.geoPointValue.latitude)&&Aa(i.geoPointValue.longitude)===Aa(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Aa(i.integerValue)===Aa(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Aa(i.doubleValue),s=Aa(a.doubleValue);return o===s?$R(o)===$R(s):isNaN(o)&&isNaN(s)}return!1}(n,e);case 9:return l1(n.arrayValue.values||[],e.arrayValue.values||[],Mf);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(PX(o)!==PX(s))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(s[l]===void 0||!Mf(o[l],s[l])))return!1;return!0}(n,e);default:return Nn()}}function DC(n,e){return(n.values||[]).find(t=>Mf(t,e))!==void 0}function c1(n,e){if(n===e)return 0;const t=xw(n),r=xw(e);if(t!==r)return Pr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pr(n.booleanValue,e.booleanValue);case 2:return function(a,o){const s=Aa(a.integerValue||a.doubleValue),l=Aa(o.integerValue||o.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(n,e);case 3:return RX(n.timestampValue,e.timestampValue);case 4:return RX(kC(n),kC(e));case 5:return Pr(n.stringValue,e.stringValue);case 6:return function(a,o){const s=ww(a),l=ww(o);return s.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),l=o.split("/");for(let c=0;c<s.length&&c<l.length;c++){const u=Pr(s[c],l[c]);if(u!==0)return u}return Pr(s.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,o){const s=Pr(Aa(a.latitude),Aa(o.latitude));return s!==0?s:Pr(Aa(a.longitude),Aa(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return OX(n.arrayValue,e.arrayValue);case 10:return function(a,o){var s,l,c,u;const d=a.fields||{},h=o.fields||{},f=(s=d.value)===null||s===void 0?void 0:s.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=Pr(((c=f==null?void 0:f.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:OX(f,m)}(n.mapValue,e.mapValue);case 11:return function(a,o){if(a===dP.mapValue&&o===dP.mapValue)return 0;if(a===dP.mapValue)return 1;if(o===dP.mapValue)return-1;const s=a.fields||{},l=Object.keys(s),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=Pr(l[d],u[d]);if(h!==0)return h;const f=c1(s[l[d]],c[u[d]]);if(f!==0)return f}return Pr(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Nn()}}function RX(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pr(n,e);const t=iy(n),r=iy(e),i=Pr(t.seconds,r.seconds);return i!==0?i:Pr(t.nanos,r.nanos)}function OX(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=c1(t[i],r[i]);if(a)return a}return Pr(t.length,r.length)}function u1(n){return NV(n)}function NV(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=iy(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ww(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return cn.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=NV(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${NV(t.fields[o])}`;return i+"}"}(n.mapValue):Nn()}function LX(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RV(n){return!!n&&"integerValue"in n}function f8(n){return!!n&&"arrayValue"in n}function jX(n){return!!n&&"nullValue"in n}function FX(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function XN(n){return!!n&&"mapValue"in n}function FMe(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function $k(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vw(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$k(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$k(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $Me(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.value=e}static empty(){return new Ul({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!XN(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$k(t)}setAll(e){let t=qo.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!t.isImmediateParentOf(s)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=s.popLast()}o?r[s.lastSegment()]=$k(o):i.push(s.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());XN(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];XN(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vw(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ul($k(this.value))}}function Mpe(n){const e=[];return Vw(n.fields,(t,r)=>{const i=new qo([t]);if(XN(r)){const a=Mpe(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Oc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,r,i,a,o,s){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new ks(e,0,Bn.min(),Bn.min(),Bn.min(),Ul.empty(),0)}static newFoundDocument(e,t,r,i){return new ks(e,1,t,Bn.min(),r,i,0)}static newNoDocument(e,t){return new ks(e,2,t,Bn.min(),Bn.min(),Ul.empty(),0)}static newUnknownDocument(e,t){return new ks(e,3,t,Bn.min(),Bn.min(),Ul.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ul.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ul.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ks&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ks(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.position=e,this.inclusive=t}}function $X(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],o=n.position[i];if(a.field.isKeyField()?r=cn.comparator(cn.fromName(o.referenceValue),t.key):r=c1(o,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function BX(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mf(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t="asc"){this.field=e,this.dir=t}}function BMe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ppe{}class za extends Ppe{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new VMe(e,t,r):t==="array-contains"?new GMe(e,r):t==="in"?new WMe(e,r):t==="not-in"?new qMe(e,r):t==="array-contains-any"?new YMe(e,r):new za(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zMe(e,r):new HMe(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(c1(t,this.value)):t!==null&&xw(this.value)===xw(t)&&this.matchesComparison(c1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ih extends Ppe{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ih(e,t)}matches(e){return Npe(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Npe(n){return n.op==="and"}function Rpe(n){return UMe(n)&&Npe(n)}function UMe(n){for(const e of n.filters)if(e instanceof ih)return!1;return!0}function OV(n){if(n instanceof za)return n.field.canonicalString()+n.op.toString()+u1(n.value);if(Rpe(n))return n.filters.map(e=>OV(e)).join(",");{const e=n.filters.map(t=>OV(t)).join(",");return`${n.op}(${e})`}}function Ope(n,e){return n instanceof za?function(r,i){return i instanceof za&&r.op===i.op&&r.field.isEqual(i.field)&&Mf(r.value,i.value)}(n,e):n instanceof ih?function(r,i){return i instanceof ih&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&Ope(o,i.filters[s]),!0):!1}(n,e):void Nn()}function Lpe(n){return n instanceof za?function(t){return`${t.field.canonicalString()} ${t.op} ${u1(t.value)}`}(n):n instanceof ih?function(t){return t.op.toString()+" {"+t.getFilters().map(Lpe).join(" ,")+"}"}(n):"Filter"}class VMe extends za{constructor(e,t,r){super(e,t,r),this.key=cn.fromName(r.referenceValue)}matches(e){const t=cn.comparator(e.key,this.key);return this.matchesComparison(t)}}class zMe extends za{constructor(e,t){super(e,"in",t),this.keys=jpe("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class HMe extends za{constructor(e,t){super(e,"not-in",t),this.keys=jpe("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jpe(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>cn.fromName(r.referenceValue))}class GMe extends za{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return f8(t)&&DC(t.arrayValue,this.value)}}class WMe extends za{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&DC(this.value.arrayValue,t)}}class qMe extends za{constructor(e,t){super(e,"not-in",t)}matches(e){if(DC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!DC(this.value.arrayValue,t)}}class YMe extends za{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!f8(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>DC(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMe{constructor(e,t=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ue=null}}function UX(n,e=null,t=[],r=[],i=null,a=null,o=null){return new KMe(n,e,t,r,i,a,o)}function p8(n){const e=Un(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OV(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lL(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>u1(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>u1(r)).join(",")),e.ue=t}return e.ue}function g8(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BMe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ope(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BX(n.startAt,e.startAt)&&BX(n.endAt,e.endAt)}function LV(n){return cn.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t=null,r=[],i=[],a=null,o="F",s=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function XMe(n,e,t,r,i,a,o,s){return new Z1(n,e,t,r,i,a,o,s)}function cL(n){return new Z1(n)}function VX(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fpe(n){return n.collectionGroup!==null}function Bk(n){const e=Un(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new Xo(qo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(s=s.add(c.field))})}),s})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new IC(a,r))}),t.has(qo.keyField().canonicalString())||e.ce.push(new IC(qo.keyField(),r))}return e.ce}function Tf(n){const e=Un(n);return e.le||(e.le=ZMe(e,Bk(n))),e.le}function ZMe(n,e){if(n.limitType==="F")return UX(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new IC(i.field,a)});const t=n.endAt?new BR(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new BR(n.startAt.position,n.startAt.inclusive):null;return UX(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jV(n,e){const t=n.filters.concat([e]);return new Z1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function UR(n,e,t){return new Z1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uL(n,e){return g8(Tf(n),Tf(e))&&n.limitType===e.limitType}function $pe(n){return`${p8(Tf(n))}|lt:${n.limitType}`}function f_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Lpe(i)).join(", ")}]`),lL(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>u1(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>u1(i)).join(",")),`Target(${r})`}(Tf(n))}; limitType=${n.limitType})`}function dL(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):cn.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of Bk(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,s,l){const c=$X(o,s,l);return o.inclusive?c<=0:c<0}(r.startAt,Bk(r),i)||r.endAt&&!function(o,s,l){const c=$X(o,s,l);return o.inclusive?c>=0:c>0}(r.endAt,Bk(r),i))}(n,e)}function QMe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bpe(n){return(e,t)=>{let r=!1;for(const i of Bk(n)){const a=JMe(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function JMe(n,e,t){const r=n.field.isKeyField()?cn.comparator(e.key,t.key):function(a,o,s){const l=o.data.field(a),c=s.data.field(a);return l!==null&&c!==null?c1(l,c):Nn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Nn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vw(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Dpe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePe=new ia(cn.comparator);function Tg(){return ePe}const Upe=new ia(cn.comparator);function fk(...n){let e=Upe;for(const t of n)e=e.insert(t.key,t);return e}function Vpe(n){let e=Upe;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $b(){return Uk()}function zpe(){return Uk()}function Uk(){return new Q1(n=>n.toString(),(n,e)=>n.isEqual(e))}const tPe=new ia(cn.comparator),nPe=new Xo(cn.comparator);function mr(...n){let e=nPe;for(const t of n)e=e.add(t);return e}const rPe=new Xo(Pr);function iPe(){return rPe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$R(e)?"-0":e}}function Hpe(n){return{integerValue:""+n}}function Gpe(n,e){return OMe(e)?Hpe(e):m8(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this._=void 0}}function aPe(n,e,t){return n instanceof MC?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&d8(a)&&(a=h8(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(t,e):n instanceof PC?qpe(n,e):n instanceof NC?Ype(n,e):function(i,a){const o=Wpe(i,a),s=zX(o)+zX(i.Pe);return RV(o)&&RV(i.Pe)?Hpe(s):m8(i.serializer,s)}(n,e)}function oPe(n,e,t){return n instanceof PC?qpe(n,e):n instanceof NC?Ype(n,e):t}function Wpe(n,e){return n instanceof RC?function(r){return RV(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class MC extends hL{}class PC extends hL{constructor(e){super(),this.elements=e}}function qpe(n,e){const t=Kpe(e);for(const r of n.elements)t.some(i=>Mf(i,r))||t.push(r);return{arrayValue:{values:t}}}class NC extends hL{constructor(e){super(),this.elements=e}}function Ype(n,e){let t=Kpe(e);for(const r of n.elements)t=t.filter(i=>!Mf(i,r));return{arrayValue:{values:t}}}class RC extends hL{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function zX(n){return Aa(n.integerValue||n.doubleValue)}function Kpe(n){return f8(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xpe{constructor(e,t){this.field=e,this.transform=t}}function sPe(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof PC&&i instanceof PC||r instanceof NC&&i instanceof NC?l1(r.elements,i.elements,Mf):r instanceof RC&&i instanceof RC?Mf(r.Pe,i.Pe):r instanceof MC&&i instanceof MC}(n.transform,e.transform)}class lPe{constructor(e,t){this.version=e,this.transformResults=t}}class ll{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ll}static exists(e){return new ll(void 0,e)}static updateTime(e){return new ll(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ZN(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fL{}function Zpe(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pL(n.key,ll.none()):new lI(n.key,n.data,ll.none());{const t=n.data,r=Ul.empty();let i=new Xo(qo.comparator);for(let a of e.fields)if(!i.has(a)){let o=t.field(a);o===null&&a.length>1&&(a=a.popLast(),o=t.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new vy(n.key,r,new Oc(i.toArray()),ll.none())}}function cPe(n,e,t){n instanceof lI?function(i,a,o){const s=i.value.clone(),l=GX(i.fieldTransforms,a,o.transformResults);s.setAll(l),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(n,e,t):n instanceof vy?function(i,a,o){if(!ZN(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=GX(i.fieldTransforms,a,o.transformResults),l=a.data;l.setAll(Qpe(i)),l.setAll(s),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Vk(n,e,t,r){return n instanceof lI?function(a,o,s,l){if(!ZN(a.precondition,o))return s;const c=a.value.clone(),u=WX(a.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof vy?function(a,o,s,l){if(!ZN(a.precondition,o))return s;const c=WX(a.fieldTransforms,l,o),u=o.data;return u.setAll(Qpe(a)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(a,o,s){return ZN(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(n,e,t)}function uPe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Wpe(r.transform,i||null);a!=null&&(t===null&&(t=Ul.empty()),t.set(r.field,a))}return t||null}function HX(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&l1(r,i,(a,o)=>sPe(a,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class lI extends fL{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vy extends fL{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Qpe(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function GX(n,e,t){const r=new Map;ii(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,oPe(o,s,t[i]))}return r}function WX(n,e,t){const r=new Map;for(const i of n){const a=i.transform,o=t.data.field(i.field);r.set(i.field,aPe(a,o,e))}return r}class pL extends fL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dPe extends fL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hPe{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&cPe(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vk(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vk(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zpe();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=t.has(i.key)?null:s;const l=Zpe(o,s);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Bn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mr())}isEqual(e){return this.batchId===e.batchId&&l1(this.mutations,e.mutations,(t,r)=>HX(t,r))&&l1(this.baseMutations,e.baseMutations,(t,r)=>HX(t,r))}}class v8{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ii(e.mutations.length===r.length);let i=function(){return tPe}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new v8(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fPe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a,_r;function gPe(n){switch(n){default:return Nn();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function Jpe(n){if(n===void 0)return _g("GRPC error has no .code"),Ke.UNKNOWN;switch(n){case $a.OK:return Ke.OK;case $a.CANCELLED:return Ke.CANCELLED;case $a.UNKNOWN:return Ke.UNKNOWN;case $a.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case $a.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case $a.INTERNAL:return Ke.INTERNAL;case $a.UNAVAILABLE:return Ke.UNAVAILABLE;case $a.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case $a.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case $a.NOT_FOUND:return Ke.NOT_FOUND;case $a.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case $a.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case $a.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case $a.ABORTED:return Ke.ABORTED;case $a.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case $a.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case $a.DATA_LOSS:return Ke.DATA_LOSS;default:return Nn()}}(_r=$a||($a={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mPe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPe=new rw([4294967295,4294967295],0);function qX(n){const e=mPe().encode(n),t=new xpe;return t.update(e),new Uint8Array(t.digest())}function YX(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new rw([t,r],0),new rw([i,a],0)]}class y8{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pk(`Invalid padding: ${t}`);if(r<0)throw new pk(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pk(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pk(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=rw.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(rw.fromNumber(r)));return i.compare(vPe)===1&&(i=new rw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=qX(e),[r,i]=YX(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new y8(a,i,t);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.Ie===0)return;const t=qX(e),[r,i]=YX(t);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,i,a);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pk extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gL(Bn.min(),i,new ia(Pr),Tg(),mr())}}class cI{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cI(r,t,mr(),mr(),mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class ege{constructor(e,t){this.targetId=e,this.me=t}}class tge{constructor(e,t,r=Qo.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class KX{constructor(){this.fe=0,this.ge=ZX(),this.pe=Qo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=mr(),t=mr(),r=mr();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Nn()}}),new cI(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ZX()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ii(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yPe{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tg(),this.qe=XX(),this.Qe=new ia(Pr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Nn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const a=i.target;if(LV(a))if(r===0){const o=new cn(a.path);this.Ue(t,o,ks.newNoDocument(o,Bn.min()))}else ii(r===1);else{const o=this.Ye(t);if(o!==r){const s=this.Ze(e),l=s?this.Xe(s,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let o,s;try{o=ww(r).toUint8Array()}catch(l){if(l instanceof Ipe)return s1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new y8(o,i,a)}catch(l){return s1(l instanceof pk?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.Ie===0?null:s}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const o=this.Le.tt(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,a,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((a,o)=>{const s=this.Je(o);if(s){if(a.current&&LV(s.target)){const l=new cn(s.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ks.newNoDocument(l,e))}a.be&&(t.set(o,a.ve()),a.Ce())}});let r=mr();this.qe.forEach((a,o)=>{let s=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new gL(e,t,this.Qe,this.ke,r);return this.ke=Tg(),this.qe=XX(),this.Qe=new ia(Pr),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new KX,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xo(Pr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Bt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new KX),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function XX(){return new ia(cn.comparator)}function ZX(){return new ia(cn.comparator)}const bPe={asc:"ASCENDING",desc:"DESCENDING"},wPe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xPe={and:"AND",or:"OR"};class SPe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function FV(n,e){return n.useProto3Json||lL(e)?e:{value:e}}function VR(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nge(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _Pe(n,e){return VR(n,e.toTimestamp())}function Ef(n){return ii(!!n),Bn.fromTimestamp(function(t){const r=iy(t);return new Kr(r.seconds,r.nanos)}(n))}function b8(n,e){return $V(n,e).canonicalString()}function $V(n,e){const t=function(i){return new Fi(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rge(n){const e=Fi.fromString(n);return ii(lge(e)),e}function BV(n,e){return b8(n.databaseId,e.path)}function ZF(n,e){const t=rge(e);if(t.get(1)!==n.databaseId.projectId)throw new Ct(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ct(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new cn(age(t))}function ige(n,e){return b8(n.databaseId,e)}function TPe(n){const e=rge(n);return e.length===4?Fi.emptyPath():age(e)}function UV(n){return new Fi(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function age(n){return ii(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QX(n,e,t){return{name:BV(n,e),fields:t.value.mapValue.fields}}function EPe(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Nn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(c,u){return c.useProto3Json?(ii(u===void 0||typeof u=="string"),Qo.fromBase64String(u||"")):(ii(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Qo.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(c){const u=c.code===void 0?Ke.UNKNOWN:Jpe(c.code);return new Ct(u,c.message||"")}(o);t=new tge(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ZF(n,r.document.name),a=Ef(r.document.updateTime),o=r.document.createTime?Ef(r.document.createTime):Bn.min(),s=new Ul({mapValue:{fields:r.document.fields}}),l=ks.newFoundDocument(i,a,o,s),c=r.targetIds||[],u=r.removedTargetIds||[];t=new QN(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ZF(n,r.document),a=r.readTime?Ef(r.readTime):Bn.min(),o=ks.newNoDocument(i,a),s=r.removedTargetIds||[];t=new QN([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ZF(n,r.document),a=r.removedTargetIds||[];t=new QN([],a,i,null)}else{if(!("filter"in e))return Nn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new pPe(i,a),s=r.targetId;t=new ege(s,o)}}return t}function APe(n,e){let t;if(e instanceof lI)t={update:QX(n,e.key,e.value)};else if(e instanceof pL)t={delete:BV(n,e.key)};else if(e instanceof vy)t={update:QX(n,e.key,e.data),updateMask:OPe(e.fieldMask)};else{if(!(e instanceof dPe))return Nn();t={verify:BV(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof MC)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof PC)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof NC)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof RC)return{fieldPath:o.field.canonicalString(),increment:s.Pe};throw Nn()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:_Pe(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Nn()}(n,e.precondition)),t}function kPe(n,e){return n&&n.length>0?(ii(e!==void 0),n.map(t=>function(i,a){let o=i.updateTime?Ef(i.updateTime):Ef(a);return o.isEqual(Bn.min())&&(o=Ef(a)),new lPe(o,i.transformResults||[])}(t,e))):[]}function CPe(n,e){return{documents:[ige(n,e.path)]}}function DPe(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ige(n,i);const a=function(c){if(c.length!==0)return sge(ih.create(c,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:p_(h.field),direction:PPe(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const s=FV(n,e.limit);return s!==null&&(t.structuredQuery.limit=s),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function IPe(n){let e=TPe(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ii(r===1);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let a=[];t.where&&(a=function(d){const h=oge(d);return h instanceof ih&&Rpe(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(m){return new IC(g_(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let s=null;t.limit&&(s=function(d){let h;return h=typeof d=="object"?d.value:d,lL(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,f=d.values||[];return new BR(f,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,f=d.values||[];return new BR(f,h)}(t.endAt)),XMe(e,i,o,a,s,"F",l,c)}function MPe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oge(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=g_(t.unaryFilter.field);return za.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=g_(t.unaryFilter.field);return za.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=g_(t.unaryFilter.field);return za.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=g_(t.unaryFilter.field);return za.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(n):n.fieldFilter!==void 0?function(t){return za.create(g_(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ih.create(t.compositeFilter.filters.map(r=>oge(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Nn()}}(t.compositeFilter.op))}(n):Nn()}function PPe(n){return bPe[n]}function NPe(n){return wPe[n]}function RPe(n){return xPe[n]}function p_(n){return{fieldPath:n.canonicalString()}}function g_(n){return qo.fromServerFormat(n.fieldPath)}function sge(n){return n instanceof za?function(t){if(t.op==="=="){if(FX(t.value))return{unaryFilter:{field:p_(t.field),op:"IS_NAN"}};if(jX(t.value))return{unaryFilter:{field:p_(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FX(t.value))return{unaryFilter:{field:p_(t.field),op:"IS_NOT_NAN"}};if(jX(t.value))return{unaryFilter:{field:p_(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:p_(t.field),op:NPe(t.op),value:t.value}}}(n):n instanceof ih?function(t){const r=t.getFilters().map(i=>sge(i));return r.length===1?r[0]:{compositeFilter:{op:RPe(t.op),filters:r}}}(n):Nn()}function OPe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lge(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t,r,i,a=Bn.min(),o=Bn.min(),s=Qo.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new Nv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe{constructor(e){this.ct=e}}function jPe(n){const e=IPe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?UR(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FPe{constructor(){this.un=new $Pe}addToCollectionParentIndex(e,t){return this.un.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}deleteAllFieldIndexes(e){return rt.resolve()}createTargetIndexes(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getIndexType(e,t){return rt.resolve(0)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,t){return rt.resolve(ry.min())}getMinOffsetFromCollectionGroup(e,t){return rt.resolve(ry.min())}updateCollectionGroup(e,t,r){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class $Pe{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xo(Fi.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xo(Fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new d1(0)}static kn(){return new d1(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BPe{constructor(){this.changes=new Q1(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ks.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?rt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UPe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VPe{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Vk(r.mutation,i,Oc.empty(),Kr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mr()){const i=$b();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let o=fk();return a.forEach((s,l)=>{o=o.insert(s,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=$b();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mr()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{t.set(o,s)})})}computeViews(e,t,r,i){let a=Tg();const o=Uk(),s=function(){return Uk()}();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof vy)?a=a.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Vk(u.mutation,c,u.mutation.getFieldMask(),Kr.now())):o.set(c.key,Oc.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return s.set(c,new UPe(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),s))}recalculateAndSaveOverlays(e,t){const r=Uk();let i=new ia((o,s)=>o-s),a=mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const s of o)s.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Oc.empty();u=s.applyToLocalView(c,u),r.set(l,u);const d=(i.get(s.batchId)||mr()).add(l);i=i.insert(s.batchId,d)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),c=l.key,u=l.value,d=zpe();u.forEach(h=>{if(!a.has(h)){const f=Zpe(t.get(h),r.get(h));f!==null&&d.set(h,f),a=a.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return rt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return cn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fpe(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):rt.resolve($b());let s=-1,l=a;return o.next(c=>rt.forEach(c,(u,d)=>(s<d.largestBatchId&&(s=d.largestBatchId),a.get(u)?rt.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,l,c,mr())).next(u=>({batchId:s,changes:Vpe(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cn(t)).next(r=>{let i=fk();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let o=fk();return this.indexManager.getCollectionParents(e,a).next(s=>rt.forEach(s,l=>{const c=function(d,h){return new Z1(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(o=>{a.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ks.newInvalidDocument(u)))});let s=fk();return o.forEach((l,c)=>{const u=a.get(l);u!==void 0&&Vk(u.mutation,c,Oc.empty(),Kr.now()),dL(t,c)&&(s=s.insert(l,c))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zPe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return rt.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ef(i.createTime)}}(t)),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:jPe(i.bundledQuery),readTime:Ef(i.readTime)}}(t)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HPe{constructor(){this.overlays=new ia(cn.comparator),this.Ir=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$b();return rt.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ht(e,t,a)}),rt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),rt.resolve()}getOverlaysForCollection(e,t,r){const i=$b(),a=t.length+1,o=new cn(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const l=s.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return rt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ia((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=a.get(c.largestBatchId);u===null&&(u=$b(),a=a.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const s=$b(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>s.set(c,u)),!(s.size()>=i)););return rt.resolve(s)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fPe(t,r));let a=this.Ir.get(t);a===void 0&&(a=mr(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GPe{constructor(){this.sessionToken=Qo.EMPTY_BYTE_STRING}getSessionToken(e){return rt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.Tr=new Xo(Ao.Er),this.dr=new Xo(Ao.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Ao(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ao(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new cn(new Fi([])),r=new Ao(t,e),i=new Ao(t,e+1),a=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new cn(new Fi([])),r=new Ao(t,e),i=new Ao(t,e+1);let a=mr();return this.dr.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const t=new Ao(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ao{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return cn.comparator(e.key,t.key)||Pr(e.wr,t.wr)}static Ar(e,t){return Pr(e.wr,t.wr)||cn.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WPe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xo(Ao.Er)}checkEmpty(e){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hPe(a,t,r,i);this.mutationQueue.push(o);for(const s of i)this.br=this.br.add(new Ao(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return rt.resolve(o)}lookupMutationBatch(e,t){return rt.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),a=i<0?0:i;return rt.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ao(t,0),i=new Ao(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],o=>{const s=this.Dr(o.wr);a.push(s)}),rt.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xo(Pr);return t.forEach(i=>{const a=new Ao(i,0),o=new Ao(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],s=>{r=r.add(s.wr)})}),rt.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;cn.isDocumentKey(a)||(a=a.child(""));const o=new Ao(new cn(a),0);let s=new Xo(Pr);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(s=s.add(l.wr)),!0)},o),rt.resolve(this.Cr(s))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ii(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return rt.forEach(t.mutations,i=>{const a=new Ao(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Ao(t,0),i=this.br.firstAfterOrEqual(r);return rt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,rt.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qPe{constructor(e){this.Mr=e,this.docs=function(){return new ia(cn.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return rt.resolve(r?r.document.mutableCopy():ks.newInvalidDocument(t))}getEntries(e,t){let r=Tg();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ks.newInvalidDocument(i))}),rt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Tg();const o=t.path,s=new cn(o.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||MMe(IMe(u),r)<=0||(i.has(u.key)||dL(t,u))&&(a=a.insert(u.key,u.mutableCopy()))}return rt.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Nn()}Or(e,t){return rt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YPe(this)}getSize(e){return rt.resolve(this.size)}}class YPe extends BPe{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),rt.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPe{constructor(e){this.persistence=e,this.Nr=new Q1(t=>p8(t),g8),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new w8,this.targetCount=0,this.kr=d1.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),rt.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new d1(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.Kn(t),rt.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Nr.forEach((o,s)=>{s.sequenceNumber<=t&&r.get(s.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),rt.waitFor(a).next(()=>i)}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return rt.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),rt.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),rt.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),rt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return rt.resolve(r)}containsKey(e,t){return rt.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XPe{constructor(e,t){this.qr={},this.overlays={},this.Qr=new u8(0),this.Kr=!1,this.Kr=!0,this.$r=new GPe,this.referenceDelegate=e(this),this.Ur=new KPe(this),this.indexManager=new FPe,this.remoteDocumentCache=function(i){return new qPe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new LPe(t),this.Gr=new zPe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HPe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new WPe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Bt("MemoryPersistence","Starting transaction:",e);const i=new ZPe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,t){return rt.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class ZPe extends NMe{constructor(e){super(),this.currentSequenceNumber=e}}class x8{constructor(e){this.persistence=e,this.Jr=new w8,this.Yr=null}static Zr(e){return new x8(e)}get Xr(){if(this.Yr)return this.Yr;throw Nn()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),rt.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),rt.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Xr,r=>{const i=cn.fromPath(r);return this.ei(e,i).next(a=>{a||t.removeEntry(i,Bn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return rt.or([()=>rt.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=mr(),i=mr();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new S8(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QPe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JPe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QDe()?8:RMe(Wa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.Yi(e,t).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,t,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new QPe;return this.Xi(e,t,o).next(s=>{if(a.result=s,this.zi)return this.es(e,t,o,s.size)})}).next(()=>a.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(pA()<=pr.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",f_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),rt.resolve()):(pA()<=pr.DEBUG&&Bt("QueryEngine","Query:",f_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(pA()<=pr.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",f_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tf(t))):rt.resolve())}Yi(e,t){if(VX(t))return rt.resolve(null);let r=Tf(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=UR(t,null,"F"),r=Tf(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=mr(...a);return this.Ji.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,s);return this.ns(t,c,o,l.readTime)?this.Yi(e,UR(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return VX(t)||i.isEqual(Bn.min())?rt.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(t,a);return this.ns(t,o,r,i)?rt.resolve(null):(pA()<=pr.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),f_(t)),this.rs(e,o,t,DMe(i,-1)).next(s=>s))})}ts(e,t){let r=new Xo(Bpe(e));return t.forEach((i,a)=>{dL(e,a)&&(r=r.add(a))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,t,r){return pA()<=pr.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",f_(t)),this.Ji.getDocumentsMatchingQuery(e,t,ry.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eNe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ia(Pr),this._s=new Q1(a=>p8(a),g8),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VPe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function tNe(n,e,t,r){return new eNe(n,e,t,r)}async function cge(n,e){const t=Un(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let l=mr();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of a){s.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:s}))})})}function nNe(n,e){const t=Un(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(s,l,c,u){const d=c.batch,h=d.keys();let f=rt.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(l,m)).next(v=>{const y=c.docVersions.get(m);ii(y!==null),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),f.next(()=>s.mutationQueue.removeMutationBatch(l,d))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=mr();for(let c=0;c<s.mutationResults.length;++c)s.mutationResults[c].transformResults.length>0&&(l=l.add(s.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function uge(n){const e=Un(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function rNe(n,e){const t=Un(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const s=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;s.push(t.Ur.removeMatchingKeys(a,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(a,u.addedDocuments,d)));let f=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Qo.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(v,y,w){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&s.push(t.Ur.updateTargetData(a,f))});let l=Tg(),c=mr();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&s.push(t.persistence.referenceDelegate.updateLimboDocument(a,u))}),s.push(iNe(a,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(Bn.min())){const u=t.Ur.getLastRemoteSnapshotVersion(a).next(d=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(u)}return rt.waitFor(s).next(()=>o.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,l,c)).next(()=>l)}).then(a=>(t.os=i,a))}function iNe(n,e,t){let r=mr(),i=mr();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let o=Tg();return t.forEach((s,l)=>{const c=a.get(s);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(Bn.min())?(e.removeEntry(s,l.readTime),o=o.insert(s,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(s,l)):Bt("LocalStore","Ignoring outdated watch update for ",s,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function aNe(n,e){const t=Un(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oNe(n,e){const t=Un(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(a=>a?(i=a,rt.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Nv(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function VV(n,e,t){const r=Un(n),i=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sI(o))throw o;Bt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function JX(n,e,t){const r=Un(n);let i=Bn.min(),a=mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Un(l),h=d._s.get(u);return h!==void 0?rt.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(r,o,Tf(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,s.targetId).next(l=>{a=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Bn.min(),t?a:mr())).next(s=>(sNe(r,QMe(e),s),{documents:s,Ts:a})))}function sNe(n,e,t){let r=n.us.get(e)||Bn.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.us.set(e,r)}class eZ{constructor(){this.activeTargetIds=iPe()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lNe{constructor(){this.so=new eZ,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new eZ,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cNe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hP=null;function QF(){return hP===null?hP=function(){return 268435456+Math.round(2147483648*Math.random())}():hP++,"0x"+hP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uNe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dNe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="WebChannelConnection";class hNe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(t,r,i,a,o){const s=QF(),l=this.xo(t,r.toUriEncodedString());Bt("RestConnection",`Sending RPC '${t}' ${s}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,a,o),this.No(t,l,c,i).then(u=>(Bt("RestConnection",`Received RPC '${t}' ${s}: `,u),u),u=>{throw s1("RestConnection",`RPC '${t}' ${s} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(t,r,i,a,o,s){return this.Mo(t,r,i,a,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+X1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}xo(t,r){const i=uNe[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const a=QF();return new Promise((o,s)=>{const l=new Spe;l.setWithCredentials(!0),l.listenOnce(_pe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case KN.NO_ERROR:const u=l.getResponseJson();Bt(ys,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(u)),o(u);break;case KN.TIMEOUT:Bt(ys,`RPC '${e}' ${a} timed out`),s(new Ct(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case KN.HTTP_ERROR:const d=l.getStatus();if(Bt(ys,`RPC '${e}' ${a} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(w)>=0?w:Ke.UNKNOWN}(f.status);s(new Ct(m,f.message))}else s(new Ct(Ke.UNKNOWN,"Server responded with status "+l.getStatus()))}else s(new Ct(Ke.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{Bt(ys,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Bt(ys,`RPC '${e}' ${a} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=QF(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ape(),s=Epe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Bt(ys,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const m=new dNe({Io:y=>{f?Bt(ys,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(Bt(ys,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Bt(ys,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},To:()=>d.close()}),v=(y,w,S)=>{y.listen(w,T=>{try{S(T)}catch(C){setTimeout(()=>{throw C},0)}})};return v(d,hk.EventType.OPEN,()=>{f||(Bt(ys,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),v(d,hk.EventType.CLOSE,()=>{f||(f=!0,Bt(ys,`RPC '${e}' stream ${i} transport closed`),m.So())}),v(d,hk.EventType.ERROR,y=>{f||(f=!0,s1(ys,`RPC '${e}' stream ${i} transport errored:`,y),m.So(new Ct(Ke.UNAVAILABLE,"The operation could not be completed")))}),v(d,hk.EventType.MESSAGE,y=>{var w;if(!f){const S=y.data[0];ii(!!S);const T=S,C=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(C){Bt(ys,`RPC '${e}' stream ${i} received error:`,C);const k=C.status;let A=function(N){const R=$a[N];if(R!==void 0)return Jpe(R)}(k),D=C.message;A===void 0&&(A=Ke.INTERNAL,D="Unknown error status: "+k+" with message "+C.message),f=!0,m.So(new Ct(A,D)),d.close()}else Bt(ys,`RPC '${e}' stream ${i} received:`,S),m.bo(S)}}),v(s,Tpe.STAT_EVENT,y=>{y.stat===PV.PROXY?Bt(ys,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===PV.NOPROXY&&Bt(ys,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function JF(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n){return new SPe(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Bt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hge{constructor(e,t,r,i,a,o,s,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dge(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(_g(t.toString()),_g("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ct(Ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Bt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fNe extends hge{constructor(e,t,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=EPe(this.serializer,e),r=function(a){if(!("targetChange"in a))return Bn.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Bn.min():o.readTime?Ef(o.readTime):Bn.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=UV(this.serializer),t.addTarget=function(a,o){let s;const l=o.target;if(s=LV(l)?{documents:CPe(a,l)}:{query:DPe(a,l)._t},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=nge(a,o.resumeToken);const c=FV(a,o.expectedCount);c!==null&&(s.expectedCount=c)}else if(o.snapshotVersion.compareTo(Bn.min())>0){s.readTime=VR(a,o.snapshotVersion.toTimestamp());const c=FV(a,o.expectedCount);c!==null&&(s.expectedCount=c)}return s}(this.serializer,e);const r=MPe(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=UV(this.serializer),t.removeTarget=e,this.a_(t)}}class pNe extends hge{constructor(e,t,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ii(!!e.streamToken),this.lastStreamToken=e.streamToken,ii(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ii(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=kPe(e.writeResults,e.commitTime),r=Ef(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=UV(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>APe(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gNe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ct(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,$V(t,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ct(Ke.UNKNOWN,a.toString())})}Lo(e,t,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Lo(e,$V(t,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(Ke.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mNe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_g(t),this.D_=!1):Bt("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vNe{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{zw(this)&&(Bt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Un(l);c.L_.add(4),await uI(c),c.q_.set("Unknown"),c.L_.delete(4),await vL(c)}(this))})}),this.q_=new mNe(r,i)}}async function vL(n){if(zw(n))for(const e of n.B_)await e(!0)}async function uI(n){for(const e of n.B_)await e(!1)}function fge(n,e){const t=Un(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),A8(t)?E8(t):J1(t).r_()&&T8(t,e))}function _8(n,e){const t=Un(n),r=J1(t);t.N_.delete(e),r.r_()&&pge(t,e),t.N_.size===0&&(r.r_()?r.o_():zw(t)&&t.q_.set("Unknown"))}function T8(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}J1(n).A_(e)}function pge(n,e){n.Q_.xe(e),J1(n).R_(e)}function E8(n){n.Q_=new yPe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),J1(n).start(),n.q_.v_()}function A8(n){return zw(n)&&!J1(n).n_()&&n.N_.size>0}function zw(n){return Un(n).L_.size===0}function gge(n){n.Q_=void 0}async function yNe(n){n.q_.set("Online")}async function bNe(n){n.N_.forEach((e,t)=>{T8(n,e)})}async function wNe(n,e){gge(n),A8(n)?(n.q_.M_(e),E8(n)):n.q_.set("Unknown")}async function xNe(n,e,t){if(n.q_.set("Online"),e instanceof tge&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.N_.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.N_.delete(s),i.Q_.removeTarget(s))}(n,e)}catch(r){Bt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zR(n,r)}else if(e instanceof QN?n.Q_.Ke(e):e instanceof ege?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Bn.min()))try{const r=await uge(n.localStore);t.compareTo(r)>=0&&await function(a,o){const s=a.Q_.rt(o);return s.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=a.N_.get(c);u&&a.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),s.targetMismatches.forEach((l,c)=>{const u=a.N_.get(l);if(!u)return;a.N_.set(l,u.withResumeToken(Qo.EMPTY_BYTE_STRING,u.snapshotVersion)),pge(a,l);const d=new Nv(u.target,l,c,u.sequenceNumber);T8(a,d)}),a.remoteSyncer.applyRemoteEvent(s)}(n,t)}catch(r){Bt("RemoteStore","Failed to raise snapshot:",r),await zR(n,r)}}async function zR(n,e,t){if(!sI(e))throw e;n.L_.add(1),await uI(n),n.q_.set("Offline"),t||(t=()=>uge(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Bt("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await vL(n)})}function mge(n,e){return e().catch(t=>zR(n,t,e))}async function yL(n){const e=Un(n),t=ay(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SNe(e);)try{const i=await aNe(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,_Ne(e,i)}catch(i){await zR(e,i)}vge(e)&&yge(e)}function SNe(n){return zw(n)&&n.O_.length<10}function _Ne(n,e){n.O_.push(e);const t=ay(n);t.r_()&&t.V_&&t.m_(e.mutations)}function vge(n){return zw(n)&&!ay(n).n_()&&n.O_.length>0}function yge(n){ay(n).start()}async function TNe(n){ay(n).p_()}async function ENe(n){const e=ay(n);for(const t of n.O_)e.m_(t.mutations)}async function ANe(n,e,t){const r=n.O_.shift(),i=v8.from(r,e,t);await mge(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await yL(n)}async function kNe(n,e){e&&ay(n).V_&&await async function(r,i){if(function(o){return gPe(o)&&o!==Ke.ABORTED}(i.code)){const a=r.O_.shift();ay(r).s_(),await mge(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await yL(r)}}(n,e),vge(n)&&yge(n)}async function nZ(n,e){const t=Un(n);t.asyncQueue.verifyOperationInProgress(),Bt("RemoteStore","RemoteStore received new credentials");const r=zw(t);t.L_.add(3),await uI(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await vL(t)}async function CNe(n,e){const t=Un(n);e?(t.L_.delete(2),await vL(t)):e||(t.L_.add(2),await uI(t),t.q_.set("Unknown"))}function J1(n){return n.K_||(n.K_=function(t,r,i){const a=Un(t);return a.w_(),new fNe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yNe.bind(null,n),Ro:bNe.bind(null,n),mo:wNe.bind(null,n),d_:xNe.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),A8(n)?E8(n):n.q_.set("Unknown")):(await n.K_.stop(),gge(n))})),n.K_}function ay(n){return n.U_||(n.U_=function(t,r,i){const a=Un(t);return a.w_(),new pNe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TNe.bind(null,n),mo:kNe.bind(null,n),f_:ENe.bind(null,n),g_:ANe.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await yL(n)):(await n.U_.stop(),n.O_.length>0&&(Bt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const o=Date.now()+r,s=new k8(e,t,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C8(n,e){if(_g("AsyncQueue",`${e}: ${n}`),sI(n))return new Ct(Ke.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||cn.comparator(t.key,r.key):(t,r)=>cn.comparator(t.key,r.key),this.keyedMap=fk(),this.sortedSet=new ia(this.comparator)}static emptySet(e){return new L_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof L_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new L_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.W_=new ia(cn.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Nn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class h1{constructor(e,t,r,i,a,o,s,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,a){const o=[];return t.forEach(s=>{o.push({type:0,doc:s})}),new h1(e,t,L_.emptySet(t),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uL(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DNe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class INe{constructor(){this.queries=iZ(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Un(t),a=i.queries;i.queries=iZ(),a.forEach((o,s)=>{for(const l of s.j_)l.onError(r)})})(this,new Ct(Ke.ABORTED,"Firestore shutting down"))}}function iZ(){return new Q1(n=>$pe(n),uL)}async function D8(n,e){const t=Un(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new DNe,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(i,!0);break;case 1:a.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const s=C8(o,`Initialization of query '${f_(e.query)}' failed`);return void e.onError(s)}t.queries.set(i,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&M8(t)}async function I8(n,e){const t=Un(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function MNe(n,e){const t=Un(n);let r=!1;for(const i of e){const a=i.query,o=t.queries.get(a);if(o){for(const s of o.j_)s.X_(i)&&(r=!0);o.z_=i}}r&&M8(t)}function PNe(n,e,t){const r=Un(n),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(t);r.queries.delete(e)}function M8(n){n.Y_.forEach(e=>{e.next()})}var zV,aZ;(aZ=zV||(zV={})).ea="default",aZ.Cache="cache";class P8{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new h1(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=h1.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(e){this.key=e}}class wge{constructor(e){this.key=e}}class NNe{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=mr(),this.mutatedKeys=mr(),this.Aa=Bpe(e),this.Ra=new L_(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new rZ,i=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=dL(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),y=!0):this.ga(h,f)||(r.track({type:2,doc:f}),y=!0,(l&&this.Aa(f,l)>0||c&&this.Aa(f,c)<0)&&(s=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(l||c)&&(s=!0)),y&&(f?(o=o.add(f),a=v?a.add(u):a.delete(u)):(o=o.delete(u),a=a.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),a=a.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:s,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(f,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return v(f)-v(m)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const s=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new h1(this.query,e.Ra,a,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rZ,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=mr(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new wge(r))}),this.da.forEach(r=>{e.has(r)||t.push(new bge(r))}),t}ba(e){this.Ta=e.Ts,this.da=mr();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return h1.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RNe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ONe{constructor(e){this.key=e,this.va=!1}}class LNe{constructor(e,t,r,i,a,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Q1(s=>$pe(s),uL),this.Ma=new Map,this.xa=new Set,this.Oa=new ia(cn.comparator),this.Na=new Map,this.La=new w8,this.Ba={},this.ka=new Map,this.qa=d1.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jNe(n,e,t=!0){const r=Age(n);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await xge(r,e,t,!0),i}async function FNe(n,e){const t=Age(n);await xge(t,e,!0,!1)}async function xge(n,e,t,r){const i=await oNe(n.localStore,Tf(e)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,t);let s;return r&&(s=await $Ne(n,e,a,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&fge(n.remoteStore,i),s}async function $Ne(n,e,t,r,i){n.Ka=(d,h,f)=>async function(v,y,w,S){let T=y.view.ma(w);T.ns&&(T=await JX(v.localStore,y.query,!1).then(({documents:D})=>y.view.ma(D,T)));const C=S&&S.targetChanges.get(y.targetId),k=S&&S.targetMismatches.get(y.targetId)!=null,A=y.view.applyChanges(T,v.isPrimaryClient,C,k);return sZ(v,y.targetId,A.wa),A.snapshot}(n,d,h,f);const a=await JX(n.localStore,e,!0),o=new NNe(e,a.Ts),s=o.ma(a.documents),l=cI.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(s,n.isPrimaryClient,l);sZ(n,t,c.wa);const u=new RNe(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function BNe(n,e,t){const r=Un(n),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(o=>!uL(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&_8(r.remoteStore,i.targetId),HV(r,i.targetId)}).catch(oI)):(HV(r,i.targetId),await VV(r.localStore,i.targetId,!0))}async function UNe(n,e){const t=Un(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),_8(t.remoteStore,r.targetId))}async function VNe(n,e,t){const r=KNe(n);try{const i=await function(o,s){const l=Un(o),c=Kr.now(),u=s.reduce((f,m)=>f.add(m.key),mr());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Tg(),v=mr();return l.cs.getEntries(f,u).next(y=>{m=y,m.forEach((w,S)=>{S.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;const w=[];for(const S of s){const T=uPe(S,d.get(S.key).overlayedDocument);T!=null&&w.push(new vy(S.key,T,Mpe(T.value.mapValue),ll.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,w,s)}).next(y=>{h=y;const w=y.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(f,y.batchId,w)})}).then(()=>({batchId:h.batchId,changes:Vpe(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ia(Pr)),c=c.insert(s,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await dI(r,i.changes),await yL(r.remoteStore)}catch(i){const a=C8(i,"Failed to persist write");t.reject(a)}}async function Sge(n,e){const t=Un(n);try{const r=await rNe(t.localStore,e);e.targetChanges.forEach((i,a)=>{const o=t.Na.get(a);o&&(ii(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ii(o.va):i.removedDocuments.size>0&&(ii(o.va),o.va=!1))}),await dI(t,r,e)}catch(r){await oI(r)}}function oZ(n,e,t){const r=Un(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((a,o)=>{const s=o.view.Z_(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const l=Un(o);l.onlineState=s;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.j_)h.Z_(s)&&(c=!0)}),c&&M8(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zNe(n,e,t){const r=Un(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),a=i&&i.key;if(a){let o=new ia(cn.comparator);o=o.insert(a,ks.newNoDocument(a,Bn.min()));const s=mr().add(a),l=new gL(Bn.min(),new Map,new ia(Pr),o,s);await Sge(r,l),r.Oa=r.Oa.remove(a),r.Na.delete(e),N8(r)}else await VV(r.localStore,e,!1).then(()=>HV(r,e,t)).catch(oI)}async function HNe(n,e){const t=Un(n),r=e.batch.batchId;try{const i=await nNe(t.localStore,e);Tge(t,r,null),_ge(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await dI(t,i)}catch(i){await oI(i)}}async function GNe(n,e,t){const r=Un(n);try{const i=await function(o,s){const l=Un(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,s).next(d=>(ii(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Tge(r,e,t),_ge(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await dI(r,i)}catch(i){await oI(i)}}function _ge(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Tge(n,e,t){const r=Un(n);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function HV(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ege(n,r)})}function Ege(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(_8(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),N8(n))}function sZ(n,e,t){for(const r of t)r instanceof bge?(n.La.addReference(r.key,e),WNe(n,r)):r instanceof wge?(Bt("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ege(n,r.key)):Nn()}function WNe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Bt("SyncEngine","New document in limbo: "+t),n.xa.add(r),N8(n))}function N8(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new cn(Fi.fromString(e)),r=n.qa.next();n.Na.set(r,new ONe(t)),n.Oa=n.Oa.insert(t,r),fge(n.remoteStore,new Nv(Tf(cL(t.path)),r,"TargetPurposeLimboResolution",u8.oe))}}async function dI(n,e,t){const r=Un(n),i=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((s,l)=>{o.push(r.Ka(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=S8.Wi(l.targetId,c);a.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=Un(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>rt.forEach(c,h=>rt.forEach(h.$i,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>rt.forEach(h.Ui,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!sI(d))throw d;Bt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.os.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);u.os=u.os.insert(h,v)}}}(r.localStore,a))}async function qNe(n,e){const t=Un(n);if(!t.currentUser.isEqual(e)){Bt("SyncEngine","User change. New user:",e.toKey());const r=await cge(t.localStore,e);t.currentUser=e,function(a,o){a.ka.forEach(s=>{s.forEach(l=>{l.reject(new Ct(Ke.CANCELLED,o))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dI(t,r.hs)}}function YNe(n,e){const t=Un(n),r=t.Na.get(e);if(r&&r.va)return mr().add(r.key);{let i=mr();const a=t.Ma.get(e);if(!a)return i;for(const o of a){const s=t.Fa.get(o);i=i.unionWith(s.view.Va)}return i}}function Age(n){const e=Un(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sge.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YNe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zNe.bind(null,e),e.Ca.d_=MNe.bind(null,e.eventManager),e.Ca.$a=PNe.bind(null,e.eventManager),e}function KNe(n){const e=Un(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HNe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GNe.bind(null,e),e}class HR{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mL(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return tNe(this.persistence,new JPe,e.initialUser,this.serializer)}Ga(e){return new XPe(x8.Zr,this.serializer)}Wa(e){return new lNe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}HR.provider={build:()=>new HR};class GV{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oZ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qNe.bind(null,this.syncEngine),await CNe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new INe}()}createDatastore(e){const t=mL(e.databaseInfo.databaseId),r=function(a){return new hNe(a)}(e.databaseInfo);return function(a,o,s,l){return new gNe(a,o,s,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,o,s){return new vNe(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,t=>oZ(this.syncEngine,t,0),function(){return tZ.D()?new tZ:new cNe}())}createSyncEngine(e,t){return function(i,a,o,s,l,c,u){const d=new LNe(i,a,o,s,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Un(i);Bt("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await uI(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}GV.provider={build:()=>new GV};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_g("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XNe{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ts.UNAUTHENTICATED,this.clientId=Cpe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Bt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Bt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=C8(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function e5(n,e){n.asyncQueue.verifyOperationInProgress(),Bt("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cge(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function lZ(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ZNe(n);Bt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nZ(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nZ(e.remoteStore,i)),n._onlineComponents=e}async function ZNe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Bt("FirestoreClient","Using user provided OfflineComponentProvider");try{await e5(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ke.FAILED_PRECONDITION||i.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;s1("Error using user provided cache. Falling back to memory cache: "+t),await e5(n,new HR)}}else Bt("FirestoreClient","Using default OfflineComponentProvider"),await e5(n,new HR);return n._offlineComponents}async function kge(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Bt("FirestoreClient","Using user provided OnlineComponentProvider"),await lZ(n,n._uninitializedComponentsProvider._online)):(Bt("FirestoreClient","Using default OnlineComponentProvider"),await lZ(n,new GV))),n._onlineComponents}function QNe(n){return kge(n).then(e=>e.syncEngine)}async function GR(n){const e=await kge(n),t=e.eventManager;return t.onListen=jNe.bind(null,e.syncEngine),t.onUnlisten=BNe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FNe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UNe.bind(null,e.syncEngine),t}function JNe(n,e,t={}){const r=new lg;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new R8({next:h=>{u.Za(),o.enqueueAndForget(()=>I8(a,d));const f=h.docs.has(s);!f&&h.fromCache?c.reject(new Ct(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new Ct(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new P8(cL(s.path),u,{includeMetadataChanges:!0,_a:!0});return D8(a,d)}(await GR(n),n.asyncQueue,e,t,r)),r.promise}function eRe(n,e,t={}){const r=new lg;return n.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,c){const u=new R8({next:h=>{u.Za(),o.enqueueAndForget(()=>I8(a,d)),h.fromCache&&l.source==="server"?c.reject(new Ct(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new P8(s,u,{includeMetadataChanges:!0,_a:!0});return D8(a,d)}(await GR(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cge(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dge(n,e,t){if(!t)throw new Ct(Ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tRe(n,e,t,r){if(e===!0&&r===!0)throw new Ct(Ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uZ(n){if(!cn.isDocumentKey(n))throw new Ct(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dZ(n){if(cn.isDocumentKey(n))throw new Ct(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bL(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Nn()}function cl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ct(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bL(n);throw new Ct(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nRe(n,e){if(e<=0)throw new Ct(Ke.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ct(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ct(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tRe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cge((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ct(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ct(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ct(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wL{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hZ({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ct(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ct(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hZ(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wMe;switch(r.type){case"firstParty":return new TMe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=cZ.get(t);r&&(Bt("ComponentProvider","Removing Datastore"),cZ.delete(t),r.terminate())}(this),Promise.resolve()}}function rRe(n,e,t,r={}){var i;const a=(n=cl(n,wL))._getSettings(),o=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&s1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let s,l;if(typeof r.mockUserToken=="string")s=r.mockUserToken,l=Ts.MOCK_USER;else{s=YDe(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ct(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ts(c)}n._authCredentials=new xMe(new kpe(s,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ug(this.firestore,e,this._query)}}class Ps{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ps(this.firestore,e,this._key)}}class Wv extends Ug{constructor(e,t,r){super(e,t,cL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ps(this.firestore,null,new cn(e))}withConverter(e){return new Wv(this.firestore,e,this._path)}}function qt(n,e,...t){if(n=rn(n),Dge("collection","path",e),n instanceof wL){const r=Fi.fromString(e,...t);return dZ(r),new Wv(n,null,r)}{if(!(n instanceof Ps||n instanceof Wv))throw new Ct(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fi.fromString(e,...t));return dZ(r),new Wv(n.firestore,null,r)}}function Zt(n,e,...t){if(n=rn(n),arguments.length===1&&(e=Cpe.newId()),Dge("doc","path",e),n instanceof wL){const r=Fi.fromString(e,...t);return uZ(r),new Ps(n,null,new cn(r))}{if(!(n instanceof Ps||n instanceof Wv))throw new Ct(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fi.fromString(e,...t));return uZ(r),new Ps(n.firestore,n instanceof Wv?n.converter:null,new cn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dge(this,"async_queue_retry"),this.Vu=()=>{const r=JF();r&&Bt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=JF();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=JF();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new lg;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sI(e))throw e;Bt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(r);throw _g("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=k8.createAndSchedule(this,e,t,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&Nn()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function pZ(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Pf extends wL{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fZ,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fZ(e),this._firestoreClient=void 0,await e}}}function iRe(n,e){const t=typeof n=="object"?n:sL(),r=typeof n=="string"?n:"(default)",i=Bg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=WDe("firestore");a&&rRe(i,...a)}return i}function hI(n){if(n._terminated)throw new Ct(Ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||aRe(n),n._firestoreClient}function aRe(n){var e,t,r;const i=n._freezeSettings(),a=function(s,l,c,u){return new jMe(s,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Cge(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new XNe(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this._byteString=e}static fromBase64String(e){try{return new f1(Qo.fromBase64String(e))}catch(t){throw new Ct(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new f1(Qo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ct(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ct(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ct(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pr(this._lat,e._lat)||Pr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oRe=/^__.*__$/;class sRe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vy(e,this.data,this.fieldMask,t,this.fieldTransforms):new lI(e,this.data,t,this.fieldTransforms)}}class Ige{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mge(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class j8{constructor(e,t,r,i,a,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new j8(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return WR(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Mge(this.Cu)&&oRe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lRe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mL(e)}Qu(e,t,r,i=!1){return new j8({Cu:e,methodName:t,qu:r,path:qo.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gI(n){const e=n._freezeSettings(),t=mL(n._databaseId);return new lRe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function F8(n,e,t,r,i,a={}){const o=n.Qu(a.merge||a.mergeFields?2:0,e,t,i);U8("Data must be an object, but it was:",o,r);const s=Rge(r,o);let l,c;if(a.merge)l=new Oc(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const u=[];for(const d of a.mergeFields){const h=WV(e,d,t);if(!o.contains(h))throw new Ct(Ke.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Lge(u,h)||u.push(h)}l=new Oc(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new sRe(new Ul(s),l,c)}class xL extends pI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xL}}class $8 extends pI{_toFieldTransform(e){return new Xpe(e.path,new MC)}isEqual(e){return e instanceof $8}}class B8 extends pI{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new RC(e.serializer,Gpe(e.serializer,this.$u));return new Xpe(e.path,t)}isEqual(e){return e instanceof B8&&this.$u===e.$u}}function Pge(n,e,t,r){const i=n.Qu(1,e,t);U8("Data must be an object, but it was:",i,r);const a=[],o=Ul.empty();Vw(r,(l,c)=>{const u=V8(e,l,t);c=rn(c);const d=i.Nu(u);if(c instanceof xL)a.push(u);else{const h=mI(c,d);h!=null&&(a.push(u),o.set(u,h))}});const s=new Oc(a);return new Ige(o,s,i.fieldTransforms)}function Nge(n,e,t,r,i,a){const o=n.Qu(1,e,t),s=[WV(e,r,t)],l=[i];if(a.length%2!=0)throw new Ct(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)s.push(WV(e,a[h])),l.push(a[h+1]);const c=[],u=Ul.empty();for(let h=s.length-1;h>=0;--h)if(!Lge(c,s[h])){const f=s[h];let m=l[h];m=rn(m);const v=o.Nu(f);if(m instanceof xL)c.push(f);else{const y=mI(m,v);y!=null&&(c.push(f),u.set(f,y))}}const d=new Oc(c);return new Ige(u,d,o.fieldTransforms)}function cRe(n,e,t,r=!1){return mI(t,n.Qu(r?4:3,e))}function mI(n,e){if(Oge(n=rn(n)))return U8("Unsupported field value:",e,n),Rge(n,e);if(n instanceof pI)return function(r,i){if(!Mge(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let l=mI(s,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),o++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gpe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Kr.fromDate(r);return{timestampValue:VR(i.serializer,a)}}if(r instanceof Kr){const a=new Kr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:VR(i.serializer,a)}}if(r instanceof O8)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof f1)return{bytesValue:nge(i.serializer,r._byteString)};if(r instanceof Ps){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:b8(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof L8)return function(o,s){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw s.Bu("VectorValues must only contain numeric values.");return m8(s.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${bL(r)}`)}(n,e)}function Rge(n,e){const t={};return Dpe(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vw(n,(r,i)=>{const a=mI(i,e.Mu(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function Oge(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kr||n instanceof O8||n instanceof f1||n instanceof Ps||n instanceof pI||n instanceof L8)}function U8(n,e,t){if(!Oge(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=bL(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function WV(n,e,t){if((e=rn(e))instanceof fI)return e._internalPath;if(typeof e=="string")return V8(n,e);throw WR("Field path arguments must be of type string or ",n,!1,void 0,t)}const uRe=new RegExp("[~\\*/\\[\\]]");function V8(n,e,t){if(e.search(uRe)>=0)throw WR(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fI(...e.split("."))._internalPath}catch{throw WR(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function WR(n,e,t,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;t&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ct(Ke.INVALID_ARGUMENT,s+n+l)}function Lge(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dRe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SL("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dRe extends jge{data(){return super.data()}}function SL(n,e){return typeof e=="string"?V8(n,e):e instanceof fI?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fge(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ct(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z8{}class H8 extends z8{}function zt(n,e,...t){let r=[];e instanceof z8&&r.push(e),r=r.concat(t),function(a){const o=a.filter(l=>l instanceof G8).length,s=a.filter(l=>l instanceof _L).length;if(o>1||o>0&&s>0)throw new Ct(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _L extends H8{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _L(e,t,r)}_apply(e){const t=this._parse(e);return Bge(e._query,t),new Ug(e.firestore,e.converter,jV(e._query,t))}_parse(e){const t=gI(e.firestore);return function(a,o,s,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ct(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){mZ(d,u);const f=[];for(const m of d)f.push(gZ(l,a,m));h={arrayValue:{values:f}}}else h=gZ(l,a,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||mZ(d,u),h=cRe(s,o,d,u==="in"||u==="not-in");return za.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gt(n,e,t){const r=e,i=SL("where",n);return _L._create(i,r,t)}class G8 extends z8{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new G8(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ih.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const l of s)Bge(o,l),o=jV(o,l)}(e._query,t),new Ug(e.firestore,e.converter,jV(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class W8 extends H8{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new W8(e,t)}_apply(e){const t=function(i,a,o){if(i.startAt!==null)throw new Ct(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new IC(a,o)}(e._query,this._field,this._direction);return new Ug(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Z1(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ta(n,e="asc"){const t=e,r=SL("orderBy",n);return W8._create(r,t)}class q8 extends H8{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new q8(e,t,r)}_apply(e){return new Ug(e.firestore,e.converter,UR(e._query,this._limit,this._limitType))}}function $ge(n){return nRe("limit",n),q8._create("limit",n,"F")}function gZ(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new Ct(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fpe(e)&&t.indexOf("/")!==-1)throw new Ct(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Fi.fromString(t));if(!cn.isDocumentKey(r))throw new Ct(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LX(n,new cn(r))}if(t instanceof Ps)return LX(n,t._key);throw new Ct(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bL(t)}.`)}function mZ(n,e){if(!Array.isArray(n)||n.length===0)throw new Ct(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bge(n,e){const t=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ct(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ct(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class hRe{convertValue(e,t="none"){switch(xw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Aa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ww(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Nn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vw(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Aa(o.doubleValue));return new L8(a)}convertGeoPoint(e){return new O8(Aa(e.latitude),Aa(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=h8(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kC(e));default:return null}}convertTimestamp(e){const t=iy(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fi.fromString(e);ii(lge(r));const i=new CC(r.get(1),r.get(3)),a=new cn(r.popFirst(5));return i.isEqual(t)||_g(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uge extends jge{constructor(e,t,r,i,a,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new JN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(SL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class JN extends Uge{data(e={}){return super.data(e)}}class Vge{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new gk(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new JN(this._firestore,this._userDataWriter,r.key,r,new gk(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ct(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const l=new JN(i._firestore,i._userDataWriter,s.doc.key,s.doc,new gk(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const l=new JN(i._firestore,i._userDataWriter,s.doc.key,s.doc,new gk(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return s.type!==0&&(c=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),u=o.indexOf(s.doc.key)),{type:fRe(s.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fRe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){n=cl(n,Ps);const e=cl(n.firestore,Pf);return JNe(hI(e),n._key).then(t=>zge(e,n,t))}class K8 extends hRe{constructor(e){super(),this.firestore=e}convertBytes(e){return new f1(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)}}function kn(n){n=cl(n,Ug);const e=cl(n.firestore,Pf),t=hI(e),r=new K8(e);return Fge(n._query),eRe(t,n._query).then(i=>new Vge(e,r,n,i))}function Is(n,e,t){n=cl(n,Ps);const r=cl(n.firestore,Pf),i=Y8(n.converter,e,t);return vI(r,[F8(gI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ll.none())])}function fa(n,e,t,...r){n=cl(n,Ps);const i=cl(n.firestore,Pf),a=gI(i);let o;return o=typeof(e=rn(e))=="string"||e instanceof fI?Nge(a,"updateDoc",n._key,e,t,r):Pge(a,"updateDoc",n._key,e),vI(i,[o.toMutation(n._key,ll.exists(!0))])}function TL(n){return vI(cl(n.firestore,Pf),[new pL(n._key,ll.none())])}function qR(n,e){const t=cl(n.firestore,Pf),r=Zt(n),i=Y8(n.converter,e);return vI(t,[F8(gI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ll.exists(!1))]).then(()=>r)}function cg(n,...e){var t,r,i;n=rn(n);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||pZ(e[o])||(a=e[o],o++);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(pZ(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(n instanceof Ps)c=cl(n.firestore,Pf),u=cL(n._key.path),l={next:d=>{e[o]&&e[o](zge(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=cl(n,Ug);c=cl(d.firestore,Pf),u=d._query;const h=new K8(c);l={next:f=>{e[o]&&e[o](new Vge(c,h,d,f))},error:e[o+1],complete:e[o+2]},Fge(n._query)}return function(h,f,m,v){const y=new R8(v),w=new P8(f,y,m);return h.asyncQueue.enqueueAndForget(async()=>D8(await GR(h),w)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>I8(await GR(h),w))}}(hI(c),u,s,l)}function vI(n,e){return function(r,i){const a=new lg;return r.asyncQueue.enqueueAndForget(async()=>VNe(await QNe(r),i,a)),a.promise}(hI(n),e)}function zge(n,e,t){const r=t.docs.get(e._key),i=new K8(n);return new Uge(n,i,e._key,r,new gk(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pRe{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gI(e)}set(e,t,r){this._verifyNotCommitted();const i=t5(e,this._firestore),a=Y8(i.converter,t,r),o=F8(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ll.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=t5(e,this._firestore);let o;return o=typeof(t=rn(t))=="string"||t instanceof fI?Nge(this._dataReader,"WriteBatch.update",a._key,t,r,i):Pge(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,ll.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=t5(e,this._firestore);return this._mutations=this._mutations.concat(new pL(t._key,ll.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ct(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function t5(n,e){if((n=rn(n)).firestore!==e)throw new Ct(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function zd(){return new $8("serverTimestamp")}function gRe(n){return new B8("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(n){return hI(n=cl(n,Pf)),new pRe(n,e=>vI(n,e))}(function(e,t=!0){(function(i){X1=i})(my),Gu(new zc("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new Pf(new SMe(r.getProvider("auth-internal")),new AMe(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ct(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new CC(c.options.projectId,u)}(o,i),o);return a=Object.assign({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),Ms(MX,"4.7.3",e),Ms(MX,"4.7.3","esm2017")})();var mRe="firebase",vRe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(mRe,vRe,"app");function X8(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yRe={PHONE:"phone",TOTP:"totp"},m_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},bRe={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},wRe={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},Sb={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xRe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Hge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gge=xRe,Wge=Hge,qge=new $g("auth","Firebase",Hge()),SRe={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new aI("@firebase/auth");function _Re(n,...e){YR.logLevel<=pr.WARN&&YR.warn(`Auth (${my}): ${n}`,...e)}function eR(n,...e){YR.logLevel<=pr.ERROR&&YR.error(`Auth (${my}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(n,...e){throw Q8(n,...e)}function co(n,...e){return Q8(n,...e)}function Z8(n,e,t){const r=Object.assign(Object.assign({},Wge()),{[e]:t});return new $g("auth","Firebase",r).create(e,{appName:n.name})}function Mo(n){return Z8(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eT(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Po(n,"argument-error"),Z8(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q8(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qge.create(n,...e)}function at(n,e,...t){if(!n)throw Q8(e,...t)}function mf(n){const e="INTERNAL ASSERTION FAILED: "+n;throw eR(e),new Error(e)}function ah(n,e){n||mf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function J8(){return vZ()==="http:"||vZ()==="https:"}function vZ(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TRe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J8()||i8()||"connection"in navigator)?navigator.onLine:!0}function ERe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t){this.shortDelay=e,this.longDelay=t,ah(t>e,"Short delay should be less than long delay!"),this.isMobile=KDe()||a8()}get(){return TRe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(n,e){ah(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yge{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ARe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kRe=new yI(3e4,6e4);function Ui(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Vi(n,e,t,r,i={}){return Kge(n,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=K1(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},a);return ZDe()||(c.referrerPolicy="no-referrer"),Yge.fetch()(Xge(n,n.config.apiHost,t,s),c)})}async function Kge(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ARe),e);try{const i=new DRe(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw mk(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,c]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mk(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mk(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw mk(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Z8(n,u,c);Po(n,u)}}catch(i){if(i instanceof Ko)throw i;Po(n,"network-request-failed",{message:String(i)})}}async function Vg(n,e,t,r,i={}){const a=await Vi(n,e,t,r,i);return"mfaPendingCredential"in a&&Po(n,"multi-factor-auth-required",{_serverResponse:a}),a}function Xge(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?e7(n.config,i):`${n.config.apiScheme}://${i}`}function CRe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DRe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(co(this.auth,"network-request-failed")),kRe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mk(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=co(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yZ(n){return n!==void 0&&n.getResponse!==void 0}function bZ(n){return n!==void 0&&n.enterprise!==void 0}class Zge{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CRe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IRe(n){return(await Vi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Qge(n,e){return Vi(n,"GET","/v2/recaptchaConfig",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MRe(n,e){return Vi(n,"POST","/v1/accounts:delete",e)}async function PRe(n,e){return Vi(n,"POST","/v1/accounts:update",e)}async function Jge(n,e){return Vi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NRe(n,e=!1){return rn(n).getIdToken(e)}async function eme(n,e=!1){const t=rn(n),r=await t.getIdToken(e),i=EL(r);at(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Hk(n5(i.auth_time)),issuedAtTime:Hk(n5(i.iat)),expirationTime:Hk(n5(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function n5(n){return Number(n)*1e3}function EL(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return eR("JWT malformed, contained fewer than 3 sections"),null;try{const i=epe(t);return i?JSON.parse(i):(eR("Failed to decode base64 JWT payload"),null)}catch(i){return eR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function wZ(n){const e=EL(n);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eg(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ko&&RRe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function RRe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ORe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hk(this.lastLoginAt),this.creationTime=Hk(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Eg(n,Jge(t,{idToken:r}));at(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?nme(a.providerUserInfo):[],s=LRe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&a.passwordHash)&&!(s!=null&&s.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new qV(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function tme(n){const e=rn(n);await LC(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LRe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nme(n){return n.map(e=>{var{providerId:t}=e,r=X8(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jRe(n,e){const t=await Kge(n,{},async()=>{const r=K1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=Xge(n,i,"/v1/token",`key=${a}`),s=await n._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Yge.fetch()(o,{method:"POST",headers:s,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FRe(n,e){return Vi(n,"POST","/v2/accounts:revokeToken",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){at(e.length!==0,"internal-error");const t=wZ(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(at(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await jRe(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new j_;return r&&(at(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(at(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(at(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new j_,this.toJSON())}_performRefresh(){return mf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n,e){at(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class eg{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=X8(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ORe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qV(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Eg(this,this.stsTokenManager.getToken(this.auth,e));return at(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eme(this,e)}reload(){return tme(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new eg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await LC(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ga(this.auth.app))return Promise.reject(Mo(this.auth));const e=await this.getIdToken();return await Eg(this,MRe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,s,l,c,u;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(s=t.tenantId)!==null&&s!==void 0?s:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,S=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:C,isAnonymous:k,providerData:A,stsTokenManager:D}=t;at(T&&D,e,"internal-error");const P=j_.fromJSON(this.name,D);at(typeof T=="string",e,"internal-error"),uv(d,e.name),uv(h,e.name),at(typeof C=="boolean",e,"internal-error"),at(typeof k=="boolean",e,"internal-error"),uv(f,e.name),uv(m,e.name),uv(v,e.name),uv(y,e.name),uv(w,e.name),uv(S,e.name);const N=new eg({uid:T,auth:e,email:h,emailVerified:C,displayName:d,isAnonymous:k,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:P,createdAt:w,lastLoginAt:S});return A&&Array.isArray(A)&&(N.providerData=A.map(R=>Object.assign({},R))),y&&(N._redirectEventId=y),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new j_;i.updateFromServerResponse(t);const a=new eg({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await LC(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];at(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?nme(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new j_;s.updateFromIdToken(r);const l=new eg({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xZ=new Map;function Lc(n){ah(n instanceof Function,"Expected a class definition");let e=xZ.get(n);return e?(ah(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xZ.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rme{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rme.type="NONE";const Sw=rme;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n,e,t){return`firebase:${n}:${e}:${t}`}class F_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=iw(this.userKey,i.apiKey,a),this.fullPersistenceKey=iw("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?eg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new F_(Lc(Sw),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=i[0]||Lc(Sw);const o=iw(r,e.config.apiKey,e.name);let s=null;for(const c of t)try{const u=await c._get(o);if(u){const d=eg._fromJSON(e,u);c!==a&&(s=d),a=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new F_(a,e,r):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(t.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new F_(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sme(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ime(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lme(e))return"Blackberry";if(cme(e))return"Webos";if(ame(e))return"Safari";if((e.includes("chrome/")||ome(e))&&!e.includes("edge/"))return"Chrome";if(bI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ime(n=Wa()){return/firefox\//i.test(n)}function ame(n=Wa()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ome(n=Wa()){return/crios\//i.test(n)}function sme(n=Wa()){return/iemobile/i.test(n)}function bI(n=Wa()){return/android/i.test(n)}function lme(n=Wa()){return/blackberry/i.test(n)}function cme(n=Wa()){return/webos/i.test(n)}function wI(n=Wa()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $Re(n=Wa()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function BRe(n=Wa()){var e;return wI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function URe(){return ope()&&document.documentMode===10}function ume(n=Wa()){return wI(n)||bI(n)||cme(n)||lme(n)||/windows phone/i.test(n)||sme(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dme(n,e=[]){let t;switch(n){case"Browser":t=SZ(Wa());break;case"Worker":t=`${SZ(Wa())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${my}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VRe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,s)=>{try{const l=e(a);o(l)}catch(l){s(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zRe(n,e={}){return Vi(n,"GET","/v2/passwordPolicy",Ui(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HRe=6;class GRe{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:HRe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WRe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _Z(this),this.idTokenSubscription=new _Z(this),this.beforeStateQueue=new VRe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lc(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await F_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jge(this,{idToken:e}),r=await eg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ga(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&(l!=null&&l.user)&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await LC(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ERe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ga(this.app))return Promise.reject(Mo(this));const t=e?rn(e):null;return t&&at(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ga(this.app)?Promise.reject(Mo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ga(this.app)?Promise.reject(Mo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zRe(this),t=new GRe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $g("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await FRe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lc(e)||this._popupRedirectResolver;at(t,this,"argument-error"),this.redirectPersistenceManager=await F_.create(this,[Lc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(at(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dme(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&_Re(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $i(n){return rn(n)}class _Z{constructor(e){this.auth=e,this.observer=null,this.addObserver=lpe(t=>this.observer=t)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qRe(n){xI=n}function t7(n){return xI.loadJS(n)}function YRe(){return xI.recaptchaV2Script}function KRe(){return xI.recaptchaEnterpriseScript}function XRe(){return xI.gapiScript}function hme(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const ZRe="recaptcha-enterprise",QRe="NO_RECAPTCHA";class fme{constructor(e){this.type=ZRe,this.auth=$i(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{Qge(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const c=new Zge(l);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(l=>{s(l)})})}function i(a,o,s){const l=window.grecaptcha;bZ(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(QRe)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(s=>{if(!t&&bZ(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=KRe();l.length!==0&&(l+=s),t7(l).then(()=>{i(s,a,o)}).catch(c=>{o(c)})}}).catch(s=>{o(s)})})}}async function TZ(n,e,t,r=!1){const i=new fme(n);let a;try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function jC(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await TZ(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await TZ(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}async function JRe(n){const e=$i(n),t=await Qge(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Zge(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")&&new fme(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pme(n,e){const t=Bg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(_C(a,e??{}))return i;Po(i,"already-initialized")}return t.initialize({options:e})}function eOe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Lc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function n7(n,e,t){const r=$i(n);at(r._canInitEmulator,r,"emulator-config-failed"),at(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),a=gme(e),{host:o,port:s}=tOe(e),l=s===null?"":`:${s}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||nOe()}function gme(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tOe(n){const e=gme(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:EZ(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:EZ(o)}}}function EZ(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nOe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mf("not implemented")}_getIdTokenResponse(e){return mf("not implemented")}_linkToIdToken(e,t){return mf("not implemented")}_getReauthenticationResolver(e){return mf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mme(n,e){return Vi(n,"POST","/v1/accounts:resetPassword",Ui(n,e))}async function rOe(n,e){return Vi(n,"POST","/v1/accounts:update",e)}async function iOe(n,e){return Vi(n,"POST","/v1/accounts:signUp",e)}async function aOe(n,e){return Vi(n,"POST","/v1/accounts:update",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oOe(n,e){return Vg(n,"POST","/v1/accounts:signInWithPassword",Ui(n,e))}async function AL(n,e){return Vi(n,"POST","/v1/accounts:sendOobCode",Ui(n,e))}async function sOe(n,e){return AL(n,e)}async function lOe(n,e){return AL(n,e)}async function cOe(n,e){return AL(n,e)}async function uOe(n,e){return AL(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dOe(n,e){return Vg(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}async function hOe(n,e){return Vg(n,"POST","/v1/accounts:signInWithEmailLink",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends Hw{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new p1(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new p1(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jC(e,t,"signInWithPassword",oOe);case"emailLink":return dOe(e,{email:this._email,oobCode:this._password});default:Po(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jC(e,r,"signUpPassword",iOe);case"emailLink":return hOe(e,{idToken:t,email:this._email,oobCode:this._password});default:Po(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(n,e){return Vg(n,"POST","/v1/accounts:signInWithIdp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fOe="http://localhost";class oh extends Hw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Po("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=X8(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new oh(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return ug(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ug(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ug(e,t)}buildRequest(){const e={requestUri:fOe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=K1(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pOe(n,e){return Vi(n,"POST","/v1/accounts:sendVerificationCode",Ui(n,e))}async function gOe(n,e){return Vg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ui(n,e))}async function mOe(n,e){const t=await Vg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ui(n,e));if(t.temporaryProof)throw mk(n,"account-exists-with-different-credential",t);return t}const vOe={USER_NOT_FOUND:"user-not-found"};async function yOe(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Vg(n,"POST","/v1/accounts:signInWithPhoneNumber",Ui(n,t),vOe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Hw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qv({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qv({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return gOe(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return mOe(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return yOe(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new qv({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bOe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wOe(n){const e=E_(dk(n)).link,t=e?E_(dk(e)).deep_link_id:null,r=E_(dk(n)).deep_link_id;return(r?E_(dk(r)).link:null)||r||t||e||n}class tT{constructor(e){var t,r,i,a,o,s;const l=E_(dk(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=bOe((i=l.mode)!==null&&i!==void 0?i:null);at(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const t=wOe(e);try{return new tT(t)}catch{return null}}}function xOe(n){return tT.parseLink(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.providerId=zg.PROVIDER_ID}static credential(e,t){return p1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=tT.parseLink(t);return at(r,"argument-error"),p1._fromEmailAndCode(e,r.code,r.tenantId)}}zg.PROVIDER_ID="password";zg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Hg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class aw extends nT{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return at("providerId"in t&&"signInMethod"in t,"argument-error"),oh._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return at(e.idToken||e.accessToken,"argument-error"),oh._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return aw.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return aw.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:o,providerId:s}=e;if(!r&&!i&&!t&&!a||!s)return null;try{return new aw(s)._credential({idToken:t,accessToken:r,nonce:o,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends nT{constructor(){super("facebook.com")}static credential(e){return oh._fromParams({providerId:Hd.PROVIDER_ID,signInMethod:Hd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hd.credentialFromTaggedObject(e)}static credentialFromError(e){return Hd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hd.credential(e.oauthAccessToken)}catch{return null}}}Hd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends nT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oh._fromParams({providerId:Ou.PROVIDER_ID,signInMethod:Ou.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ou.credentialFromTaggedObject(e)}static credentialFromError(e){return Ou.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ou.credential(t,r)}catch{return null}}}Ou.GOOGLE_SIGN_IN_METHOD="google.com";Ou.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends nT{constructor(){super("github.com")}static credential(e){return oh._fromParams({providerId:Gd.PROVIDER_ID,signInMethod:Gd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gd.credentialFromTaggedObject(e)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gd.credential(e.oauthAccessToken)}catch{return null}}}Gd.GITHUB_SIGN_IN_METHOD="github.com";Gd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SOe="http://localhost";class g1 extends Hw{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ug(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ug(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ug(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new g1(r,a)}static _create(e,t){return new g1(e,t)}buildRequest(){return{requestUri:SOe,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Oe="saml.";class FC extends Hg{constructor(e){at(e.startsWith(_Oe),"argument-error"),super(e)}static credentialFromResult(e){return FC.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return FC.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=g1.fromJSON(e);return at(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return g1._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends nT{constructor(){super("twitter.com")}static credential(e,t){return oh._fromParams({providerId:Wd.PROVIDER_ID,signInMethod:Wd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wd.credentialFromTaggedObject(e)}static credentialFromError(e){return Wd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Wd.credential(t,r)}catch{return null}}}Wd.TWITTER_SIGN_IN_METHOD="twitter.com";Wd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vme(n,e){return Vg(n,"POST","/v1/accounts:signUp",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await eg._fromIdTokenResponse(e,r,i),o=AZ(r);return new Wu({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=AZ(r);return new Wu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function AZ(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yme(n){var e;if(ga(n.app))return Promise.reject(Mo(n));const t=$i(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Wu({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await vme(t,{returnSecureToken:!0}),i=await Wu._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR extends Ko{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,KR.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new KR(e,t,r,i)}}function bme(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?KR._fromErrorAndOperation(n,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wme(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xme(n,e){const t=rn(n);await kL(!0,t,e);const{providerUserInfo:r}=await PRe(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=wme(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function r7(n,e,t=!1){const r=await Eg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wu._forOperation(n,"link",r)}async function kL(n,e,t){await LC(e);const r=wme(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";at(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sme(n,e,t=!1){const{auth:r}=n;if(ga(r.app))return Promise.reject(Mo(r));const i="reauthenticate";try{const a=await Eg(n,bme(r,i,e,n),t);at(a.idToken,r,"internal-error");const o=EL(a.idToken);at(o,r,"internal-error");const{sub:s}=o;return at(n.uid===s,r,"user-mismatch"),Wu._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Po(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _me(n,e,t=!1){if(ga(n.app))return Promise.reject(Mo(n));const r="signIn",i=await bme(n,r,e),a=await Wu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function SI(n,e){return _me($i(n),e)}async function i7(n,e){const t=rn(n);return await kL(!1,t,e.providerId),r7(t,e)}async function a7(n,e){return Sme(rn(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TOe(n,e){return Vg(n,"POST","/v1/accounts:signInWithCustomToken",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tme(n,e){if(ga(n.app))return Promise.reject(Mo(n));const t=$i(n),r=await TOe(t,{token:e,returnSecureToken:!0}),i=await Wu._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?o7._fromServerResponse(e,t):"totpInfo"in t?s7._fromServerResponse(e,t):Po(e,"internal-error")}}class o7 extends _I{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new o7(t)}}class s7 extends _I{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new s7(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(n,e,t){var r;at(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),at(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(at(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(at(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(n){const e=$i(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Eme(n,e,t){const r=$i(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&CL(r,i,t),await jC(r,i,"getOobCode",lOe)}async function Ame(n,e,t){await mme(rn(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&l7(n),r})}async function kme(n,e){await aOe(rn(n),{oobCode:e})}async function c7(n,e){const t=rn(n),r=await mme(t,{oobCode:e}),i=r.requestType;switch(at(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":at(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":at(r.mfaInfo,t,"internal-error");default:at(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=_I._fromServerResponse($i(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function Cme(n,e){const{data:t}=await c7(rn(n),e);return t.email}async function Dme(n,e,t){if(ga(n.app))return Promise.reject(Mo(n));const r=$i(n),o=await jC(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vme).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&l7(n),l}),s=await Wu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function Ime(n,e,t){return ga(n.app)?Promise.reject(Mo(n)):SI(rn(n),zg.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&l7(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mme(n,e,t){const r=$i(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(o,s){at(s.handleCodeInApp,r,"argument-error"),s&&CL(r,o,s)}a(i,t),await jC(r,i,"getOobCode",cOe)}function Pme(n,e){const t=tT.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Nme(n,e,t){if(ga(n.app))return Promise.reject(Mo(n));const r=rn(n),i=zg.credentialWithLink(e,t||OC());return at(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),SI(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EOe(n,e){return Vi(n,"POST","/v1/accounts:createAuthUri",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rme(n,e){const t=J8()?OC():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await EOe(rn(n),r);return i||[]}async function Ome(n,e){const t=rn(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&CL(t.auth,i,e);const{email:a}=await sOe(t.auth,i);a!==n.email&&await n.reload()}async function Lme(n,e,t){const r=rn(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&CL(r.auth,a,t);const{email:o}=await uOe(r.auth,a);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AOe(n,e){return Vi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jme(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=rn(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Eg(r,AOe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const s=r.providerData.find(({providerId:l})=>l==="password");s&&(s.displayName=r.displayName,s.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Fme(n,e){const t=rn(n);return ga(t.auth.app)?Promise.reject(Mo(t.auth)):Bme(t,e,null)}function $me(n,e){return Bme(rn(n),null,e)}async function Bme(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const o=await Eg(n,rOe(r,a));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kOe(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},a=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const o=(t=(e=EL(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(o){const s=o!=="anonymous"&&o!=="custom"?o:null;return new $_(a,s)}}if(!r)return null;switch(r){case"facebook.com":return new COe(a,i);case"github.com":return new DOe(a,i);case"google.com":return new IOe(a,i);case"twitter.com":return new MOe(a,i,n.screenName||null);case"custom":case"anonymous":return new $_(a,null);default:return new $_(a,r,i)}}class $_{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class Ume extends $_{constructor(e,t,r,i){super(e,t,r),this.username=i}}class COe extends $_{constructor(e,t){super(e,"facebook.com",t)}}class DOe extends Ume{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class IOe extends $_{constructor(e,t){super(e,"google.com",t)}}class MOe extends Ume{constructor(e,t,r){super(e,"twitter.com",t,r)}}function Vme(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:kOe(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zme(n,e){return rn(n).setPersistence(e)}function POe(n){return JRe(n)}async function NOe(n,e){return $i(n).validatePassword(e)}function Hme(n,e,t,r){return rn(n).onIdTokenChanged(e,t,r)}function Gme(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}function Wme(n,e,t,r){return rn(n).onAuthStateChanged(e,t,r)}function ROe(n){rn(n).useDeviceLanguage()}function OOe(n,e){return rn(n).updateCurrentUser(e)}function qme(n){return rn(n).signOut()}function LOe(n,e){return $i(n).revokeAccessToken(e)}async function jOe(n){return rn(n).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Bb("enroll",e,t)}static _fromMfaPendingCredential(e){return new Bb("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Bb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Bb._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=$i(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(s=>_I._fromServerResponse(r,s));at(i.mfaPendingCredential,r,"internal-error");const o=Bb._fromMfaPendingCredential(i.mfaPendingCredential);return new u7(o,a,async s=>{const l=await s._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(t.operationType){case"signIn":const u=await Wu._fromIdTokenResponse(r,t.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return at(t.user,r,"internal-error"),Wu._forOperation(t.user,t.operationType,c);default:Po(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Yme(n,e){var t;const r=rn(n),i=e;return at(e.customData.operationType,r,"argument-error"),at((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),u7._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FOe(n,e){return Vi(n,"POST","/v2/accounts/mfaEnrollment:start",Ui(n,e))}function $Oe(n,e){return Vi(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ui(n,e))}function BOe(n,e){return Vi(n,"POST","/v2/accounts/mfaEnrollment:start",Ui(n,e))}function UOe(n,e){return Vi(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ui(n,e))}function VOe(n,e){return Vi(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Ui(n,e))}class d7{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>_I._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new d7(e)}async getSession(){return Bb._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await Eg(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Eg(this.user,VOe(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const r5=new WeakMap;function Kme(n){const e=rn(n);return r5.has(e)||r5.set(e,d7._fromUser(e)),r5.get(e)}const XR="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xme{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(XR,"1"),this.storage.removeItem(XR),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zOe=1e3,HOe=10;class Zme extends Xme{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ume(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);URe()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,HOe):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},zOe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zme.type="LOCAL";const rT=Zme;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qme extends Xme{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qme.type="SESSION";const Ag=Qme;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GOe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new DL(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const s=Array.from(o).map(async c=>c(t.origin,a)),l=await GOe(s);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}DL.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WOe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,l)=>{const c=TI("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(h.data.response);break;default:clearTimeout(u),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(){return window}function qOe(n){Va().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(){return typeof Va().WorkerGlobalScope<"u"&&typeof Va().importScripts=="function"}async function YOe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KOe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function XOe(){return h7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme="firebaseLocalStorageDb",ZOe=1,ZR="firebaseLocalStorage",eve="fbase_key";class EI{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function IL(n,e){return n.transaction([ZR],e?"readwrite":"readonly").objectStore(ZR)}function QOe(){const n=indexedDB.deleteDatabase(Jme);return new EI(n).toPromise()}function YV(){const n=indexedDB.open(Jme,ZOe);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ZR,{keyPath:eve})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ZR)?e(r):(r.close(),await QOe(),e(await YV()))})})}async function kZ(n,e,t){const r=IL(n,!0).put({[eve]:e,value:t});return new EI(r).toPromise()}async function JOe(n,e){const t=IL(n,!1).get(e),r=await new EI(t).toPromise();return r===void 0?null:r.value}function CZ(n,e){const t=IL(n,!0).delete(e);return new EI(t).toPromise()}const e2e=800,t2e=3;class tve{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YV(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>t2e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=DL._getInstance(XOe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YOe(),!this.activeServiceWorker)return;this.sender=new WOe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KOe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await YV();return await kZ(e,XR,"1"),await CZ(e,XR),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>kZ(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>JOe(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CZ(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=IL(i,!1).getAll();return new EI(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e2e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tve.type="LOCAL";const _w=tve;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2e(n,e){return Vi(n,"POST","/v2/accounts/mfaSignIn:start",Ui(n,e))}function r2e(n,e){return Vi(n,"POST","/v2/accounts/mfaSignIn:finalize",Ui(n,e))}function i2e(n,e){return Vi(n,"POST","/v2/accounts/mfaSignIn:finalize",Ui(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2e=500,o2e=6e4,fP=1e12;class s2e{constructor(e){this.auth=e,this.counter=fP,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new l2e(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||fP;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||fP;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||fP;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class l2e{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;at(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=c2e(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},o2e)},a2e))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function c2e(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=hme("rcb"),u2e=new yI(3e4,6e4);class d2e{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Va().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return at(h2e(t),e,"argument-error"),this.shouldResolveImmediately(t)&&yZ(Va().grecaptcha)?Promise.resolve(Va().grecaptcha):new Promise((r,i)=>{const a=Va().setTimeout(()=>{i(co(e,"network-request-failed"))},u2e.get());Va()[i5]=()=>{Va().clearTimeout(a),delete Va()[i5];const s=Va().grecaptcha;if(!s||!yZ(s)){i(co(e,"internal-error"));return}const l=s.render;s.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=t,r(s)};const o=`${YRe()}?${K1({onload:i5,render:"explicit",hl:t})}`;t7(o).catch(()=>{clearTimeout(a),i(co(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Va().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function h2e(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class f2e{async load(e){return new s2e(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nve="recaptcha",p2e={theme:"light",type:"image"};let rve=class{constructor(e,t,r=Object.assign({},p2e)){this.parameters=r,this.type=nve,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$i(e),this.isInvisible=this.parameters.size==="invisible",at(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;at(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new f2e:new d2e,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),i(o))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){at(!this.parameters.sitekey,this.auth,"argument-error"),at(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),at(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Va()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){at(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){at(J8()&&!h7(),this.auth,"internal-error"),await g2e(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IRe(this.auth);at(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return at(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function g2e(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=qv._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ive(n,e,t){if(ga(n.app))return Promise.reject(Mo(n));const r=$i(n),i=await ML(r,e,rn(t));return new f7(i,a=>SI(r,a))}async function ave(n,e,t){const r=rn(n);await kL(!1,r,"phone");const i=await ML(r.auth,e,rn(t));return new f7(i,a=>i7(r,a))}async function ove(n,e,t){const r=rn(n);if(ga(r.auth.app))return Promise.reject(Mo(r.auth));const i=await ML(r.auth,e,rn(t));return new f7(i,a=>a7(r,a))}async function ML(n,e,t){var r;const i=await t.verify();try{at(typeof i=="string",n,"argument-error"),at(t.type===nve,n,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return at(o.type==="enroll",n,"internal-error"),(await FOe(n,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{at(o.type==="signin",n,"internal-error");const s=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return at(s,n,"missing-multi-factor-info"),(await n2e(n,{mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await pOe(n,{phoneNumber:a.phoneNumber,recaptchaToken:i});return o}}finally{t._reset()}}async function sve(n,e){const t=rn(n);if(ga(t.auth.app))return Promise.reject(Mo(t.auth));await r7(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy=class tR{constructor(e){this.providerId=tR.PROVIDER_ID,this.auth=$i(e)}verifyPhoneNumber(e,t){return ML(this.auth,e,rn(t))}static credential(e,t){return qv._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tR.credentialFromTaggedObject(t)}static credentialFromError(e){return tR.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?qv._fromTokenResponse(t,r):null}};oy.PROVIDER_ID="phone";oy.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n,e){return e?Lc(e):(at(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7 extends Hw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ug(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ug(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ug(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m2e(n){return _me(n.auth,new p7(n),n.bypassAuthState)}function v2e(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),Sme(t,new p7(n),n.bypassAuthState)}async function y2e(n){const{auth:e,user:t}=n;return at(t,e,"internal-error"),r7(t,new p7(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m2e;case"linkViaPopup":case"linkViaRedirect":return y2e;case"reauthViaPopup":case"reauthViaRedirect":return v2e;default:Po(this.auth,"internal-error")}}resolve(e){ah(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ah(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2e=new yI(2e3,1e4);async function cve(n,e,t){if(ga(n.app))return Promise.reject(co(n,"operation-not-supported-in-this-environment"));const r=$i(n);eT(n,e,Hg);const i=Gw(r,t);return new tg(r,"signInViaPopup",e,i).executeNotNull()}async function uve(n,e,t){const r=rn(n);if(ga(r.auth.app))return Promise.reject(co(r.auth,"operation-not-supported-in-this-environment"));eT(r.auth,e,Hg);const i=Gw(r.auth,t);return new tg(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function dve(n,e,t){const r=rn(n);eT(r.auth,e,Hg);const i=Gw(r.auth,t);return new tg(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class tg extends lve{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,tg.currentPopupAction&&tg.currentPopupAction.cancel(),tg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){ah(this.filter.length===1,"Popup operations only handle one event");const e=TI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(co(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(co(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(co(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2e.get())};e()}}tg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2e="pendingRedirect",Gk=new Map;class x2e extends lve{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gk.get(this.auth._key());if(!e){try{const r=await S2e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gk.set(this.auth._key(),e)}return this.bypassAuthState||Gk.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2e(n,e){const t=fve(e),r=hve(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function g7(n,e){return hve(n)._set(fve(e),"true")}function _2e(){Gk.clear()}function m7(n,e){Gk.set(n._key(),e)}function hve(n){return Lc(n._redirectPersistence)}function fve(n){return iw(w2e,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pve(n,e,t){return T2e(n,e,t)}async function T2e(n,e,t){if(ga(n.app))return Promise.reject(Mo(n));const r=$i(n);eT(n,e,Hg),await r._initializationPromise;const i=Gw(r,t);return await g7(i,r),i._openRedirect(r,e,"signInViaRedirect")}function gve(n,e,t){return E2e(n,e,t)}async function E2e(n,e,t){const r=rn(n);if(eT(r.auth,e,Hg),ga(r.auth.app))return Promise.reject(Mo(r.auth));await r.auth._initializationPromise;const i=Gw(r.auth,t);await g7(i,r.auth);const a=await yve(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function mve(n,e,t){return A2e(n,e,t)}async function A2e(n,e,t){const r=rn(n);eT(r.auth,e,Hg),await r.auth._initializationPromise;const i=Gw(r.auth,t);await kL(!1,r,e.providerId),await g7(i,r.auth);const a=await yve(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function vve(n,e){return await $i(n)._initializationPromise,PL(n,e,!1)}async function PL(n,e,t=!1){if(ga(n.app))return Promise.reject(Mo(n));const r=$i(n),i=Gw(r,e),o=await new x2e(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function yve(n){const e=TI(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2e=10*60*1e3;class bve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C2e(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wve(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(co(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k2e&&this.cachedEventUids.clear(),this.cachedEventUids.has(DZ(e))}saveEventToCache(e){this.cachedEventUids.add(DZ(e)),this.lastProcessedEventTime=Date.now()}}function DZ(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wve({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C2e(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wve(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xve(n,e={}){return Vi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I2e=/^https?/;async function M2e(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xve(n);for(const t of e)try{if(P2e(t))return}catch{}Po(n,"unauthorized-domain")}function P2e(n){const e=OC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!I2e.test(t))return!1;if(D2e.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2e=new yI(3e4,6e4);function IZ(){const n=Va().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R2e(n){return new Promise((e,t)=>{var r,i,a;function o(){IZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IZ(),t(co(n,"network-request-failed"))},timeout:N2e.get()})}if(!((i=(r=Va().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Va().gapi)===null||a===void 0)&&a.load)o();else{const s=hme("iframefcb");return Va()[s]=()=>{gapi.load?o():t(co(n,"network-request-failed"))},t7(`${XRe()}?onload=${s}`).catch(l=>t(l))}}).catch(e=>{throw nR=null,e})}let nR=null;function O2e(n){return nR=nR||R2e(n),nR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2e=new yI(5e3,15e3),j2e="__/auth/iframe",F2e="emulator/auth/iframe",$2e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B2e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U2e(n){const e=n.config;at(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?e7(e,F2e):`https://${n.config.authDomain}/${j2e}`,r={apiKey:e.apiKey,appName:n.name,v:my},i=B2e.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${K1(r).slice(1)}`}async function V2e(n){const e=await O2e(n),t=Va().gapi;return at(t,n,"internal-error"),e.open({where:document.body,url:U2e(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$2e,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=co(n,"network-request-failed"),s=Va().setTimeout(()=>{a(o)},L2e.get());function l(){Va().clearTimeout(s),i(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H2e=500,G2e=600,W2e="_blank",q2e="http://localhost";class MZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y2e(n,e,t,r=H2e,i=G2e){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},z2e),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Wa().toLowerCase();t&&(s=ome(c)?W2e:t),ime(c)&&(e=e||q2e,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(BRe(c)&&s!=="_self")return K2e(e||"",s),new MZ(null);const d=window.open(e||"",s,u);at(d,n,"popup-blocked");try{d.focus()}catch{}return new MZ(d)}function K2e(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2e="__/auth/handler",Z2e="emulator/auth/handler",Q2e=encodeURIComponent("fac");async function KV(n,e,t,r,i,a){at(n.config.authDomain,n,"auth-domain-config-required"),at(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:my,eventId:i};if(e instanceof Hg){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",rIe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(a||{}))o[u]=d}if(e instanceof nT){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const s=o;for(const u of Object.keys(s))s[u]===void 0&&delete s[u];const l=await n._getAppCheckToken(),c=l?`#${Q2e}=${encodeURIComponent(l)}`:"";return`${J2e(n)}?${K1(s).slice(1)}${c}`}function J2e({config:n}){return n.emulator?e7(n,Z2e):`https://${n.authDomain}/${X2e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="webStorageSupport";class eLe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ag,this._completeRedirectFn=PL,this._overrideRedirectResult=m7}async _openPopup(e,t,r,i){var a;ah((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await KV(e,t,r,OC(),i);return Y2e(e,o,TI())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await KV(e,t,r,OC(),i);return qOe(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(ah(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await V2e(e),r=new bve(e);return t.register("authEvent",i=>(at(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(a5,{type:a5},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[a5];o!==void 0&&t(!!o),Po(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=M2e(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ume()||ame()||wI()}}const v7=eLe;class Sve{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return mf("unexpected MultiFactorSessionType")}}}class y7 extends Sve{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new y7(e)}_finalizeEnroll(e,t,r){return $Oe(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return r2e(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class b7{constructor(){}static assertion(e){return y7._fromCredential(e)}}b7.FACTOR_ID="phone";class _ve{static assertionForEnrollment(e,t){return $C._fromSecret(e,t)}static assertionForSignIn(e,t){return $C._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const r=e;at(typeof((t=r.user)===null||t===void 0?void 0:t.auth)<"u","internal-error");const i=await BOe(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});return NL._fromStartTotpMfaEnrollmentResponse(i,r.user.auth)}}_ve.FACTOR_ID="totp";class $C extends Sve{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new $C(t,void 0,e)}static _fromEnrollmentId(e,t){return new $C(t,e)}async _finalizeEnroll(e,t,r){return at(typeof this.secret<"u",e,"argument-error"),UOe(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){at(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return i2e(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class NL{constructor(e,t,r,i,a,o,s){this.sessionInfo=o,this.auth=s,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}static _fromStartTotpMfaEnrollmentResponse(e,t){return new NL(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let i=!1;return(pP(e)||pP(t))&&(i=!0),i&&(pP(e)&&(e=((r=this.auth.currentUser)===null||r===void 0?void 0:r.email)||"unknownuser"),pP(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function pP(n){return typeof n>"u"||(n==null?void 0:n.length)===0}var PZ="@firebase/auth",NZ="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tLe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nLe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rLe(n){Gu(new zc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;at(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dme(n)},c=new WRe(r,i,a,l);return eOe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gu(new zc("auth-internal",e=>{const t=$i(e.getProvider("auth").getImmediate());return(r=>new tLe(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(PZ,NZ,nLe(n)),Ms(PZ,NZ,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iLe=5*60,aLe=ipe("authIdTokenMaxAge")||iLe;let RZ=null;const oLe=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>aLe)return;const i=t==null?void 0:t.token;RZ!==i&&(RZ=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Tve(n=sL()){const e=Bg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pme(n,{popupRedirectResolver:v7,persistence:[_w,rT,Ag]}),r=ipe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=oLe(a.toString());Gme(t,o,()=>o(t.currentUser)),Hme(t,s=>o(s))}}const i=npe("auth");return i&&n7(t,`http://${i}`),t}function sLe(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}qRe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=co("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",sLe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rLe("Browser");const Eve=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:Sb,ActionCodeURL:tT,AuthCredential:Hw,AuthErrorCodes:SRe,EmailAuthCredential:p1,EmailAuthProvider:zg,FacebookAuthProvider:Hd,FactorId:yRe,GithubAuthProvider:Gd,GoogleAuthProvider:Ou,OAuthCredential:oh,OAuthProvider:aw,OperationType:wRe,PhoneAuthCredential:qv,PhoneAuthProvider:oy,PhoneMultiFactorGenerator:b7,ProviderId:m_,RecaptchaVerifier:rve,SAMLAuthProvider:FC,SignInMethod:bRe,TotpMultiFactorGenerator:_ve,TotpSecret:NL,TwitterAuthProvider:Wd,applyActionCode:kme,beforeAuthStateChanged:Gme,browserLocalPersistence:rT,browserPopupRedirectResolver:v7,browserSessionPersistence:Ag,checkActionCode:c7,confirmPasswordReset:Ame,connectAuthEmulator:n7,createUserWithEmailAndPassword:Dme,debugErrorMap:Gge,deleteUser:jOe,fetchSignInMethodsForEmail:Rme,getAdditionalUserInfo:Vme,getAuth:Tve,getIdToken:NRe,getIdTokenResult:eme,getMultiFactorResolver:Yme,getRedirectResult:vve,inMemoryPersistence:Sw,indexedDBLocalPersistence:_w,initializeAuth:pme,initializeRecaptchaConfig:POe,isSignInWithEmailLink:Pme,linkWithCredential:i7,linkWithPhoneNumber:ave,linkWithPopup:dve,linkWithRedirect:mve,multiFactor:Kme,onAuthStateChanged:Wme,onIdTokenChanged:Hme,parseActionCodeURL:xOe,prodErrorMap:Wge,reauthenticateWithCredential:a7,reauthenticateWithPhoneNumber:ove,reauthenticateWithPopup:uve,reauthenticateWithRedirect:gve,reload:tme,revokeAccessToken:LOe,sendEmailVerification:Ome,sendPasswordResetEmail:Eme,sendSignInLinkToEmail:Mme,setPersistence:zme,signInAnonymously:yme,signInWithCredential:SI,signInWithCustomToken:Tme,signInWithEmailAndPassword:Ime,signInWithEmailLink:Nme,signInWithPhoneNumber:ive,signInWithPopup:cve,signInWithRedirect:pve,signOut:qme,unlink:xme,updateCurrentUser:OOe,updateEmail:Fme,updatePassword:$me,updatePhoneNumber:sve,updateProfile:jme,useDeviceLanguage:ROe,validatePassword:NOe,verifyBeforeUpdateEmail:Lme,verifyPasswordResetCode:Cme},Symbol.toStringTag,{value:"Module"})),Ave="@firebase/installations",w7="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kve=1e4,Cve=`w:${w7}`,Dve="FIS_v2",lLe="https://firebaseinstallations.googleapis.com/v1",cLe=60*60*1e3,uLe="installations",dLe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hLe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Tw=new $g(uLe,dLe,hLe);function Ive(n){return n instanceof Ko&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mve({projectId:n}){return`${lLe}/projects/${n}/installations`}function Pve(n){return{token:n.token,requestStatus:2,expiresIn:pLe(n.expiresIn),creationTime:Date.now()}}async function Nve(n,e){const r=(await e.json()).error;return Tw.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Rve({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function fLe(n,{refreshToken:e}){const t=Rve(n);return t.append("Authorization",gLe(e)),t}async function Ove(n){const e=await n();return e.status>=500&&e.status<600?n():e}function pLe(n){return Number(n.replace("s","000"))}function gLe(n){return`${Dve} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mLe({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Mve(n),i=Rve(n),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:t,authVersion:Dve,appId:n.appId,sdkVersion:Cve},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await Ove(()=>fetch(r,s));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Pve(c.authToken)}}else throw await Nve("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lve(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vLe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yLe=/^[cdef][\w-]{21}$/,XV="";function bLe(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=wLe(n);return yLe.test(t)?t:XV}catch{return XV}}function wLe(n){return vLe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jve=new Map;function Fve(n,e){const t=RL(n);$ve(t,e),xLe(t,e)}function $ve(n,e){const t=jve.get(n);if(t)for(const r of t)r(e)}function xLe(n,e){const t=SLe();t&&t.postMessage({key:n,fid:e}),_Le()}let Ub=null;function SLe(){return!Ub&&"BroadcastChannel"in self&&(Ub=new BroadcastChannel("[Firebase] FID Change"),Ub.onmessage=n=>{$ve(n.data.key,n.data.fid)}),Ub}function _Le(){jve.size===0&&Ub&&(Ub.close(),Ub=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TLe="firebase-installations-database",ELe=1,Ew="firebase-installations-store";let o5=null;function x7(){return o5||(o5=fpe(TLe,ELe,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ew)}}})),o5}async function QR(n,e){const t=RL(n),i=(await x7()).transaction(Ew,"readwrite"),a=i.objectStore(Ew),o=await a.get(t);return await a.put(e,t),await i.done,(!o||o.fid!==e.fid)&&Fve(n,e.fid),e}async function Bve(n){const e=RL(n),r=(await x7()).transaction(Ew,"readwrite");await r.objectStore(Ew).delete(e),await r.done}async function OL(n,e){const t=RL(n),i=(await x7()).transaction(Ew,"readwrite"),a=i.objectStore(Ew),o=await a.get(t),s=e(o);return s===void 0?await a.delete(t):await a.put(s,t),await i.done,s&&(!o||o.fid!==s.fid)&&Fve(n,s.fid),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S7(n){let e;const t=await OL(n.appConfig,r=>{const i=ALe(r),a=kLe(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===XV?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function ALe(n){const e=n||{fid:bLe(),registrationStatus:0};return Uve(e)}function kLe(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Tw.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=CLe(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DLe(n)}:{installationEntry:e}}async function CLe(n,e){try{const t=await mLe(n,e);return QR(n.appConfig,t)}catch(t){throw Ive(t)&&t.customData.serverCode===409?await Bve(n.appConfig):await QR(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function DLe(n){let e=await OZ(n.appConfig);for(;e.registrationStatus===1;)await Lve(100),e=await OZ(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await S7(n);return r||t}return e}function OZ(n){return OL(n,e=>{if(!e)throw Tw.create("installation-not-found");return Uve(e)})}function Uve(n){return ILe(n)?{fid:n.fid,registrationStatus:0}:n}function ILe(n){return n.registrationStatus===1&&n.registrationTime+kve<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MLe({appConfig:n,heartbeatServiceProvider:e},t){const r=PLe(n,t),i=fLe(n,t),a=e.getImmediate({optional:!0});if(a){const c=await a.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:Cve,appId:n.appId}},s={method:"POST",headers:i,body:JSON.stringify(o)},l=await Ove(()=>fetch(r,s));if(l.ok){const c=await l.json();return Pve(c)}else throw await Nve("Generate Auth Token",l)}function PLe(n,{fid:e}){return`${Mve(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _7(n,e=!1){let t;const r=await OL(n.appConfig,a=>{if(!Vve(a))throw Tw.create("not-registered");const o=a.authToken;if(!e&&OLe(o))return a;if(o.requestStatus===1)return t=NLe(n,e),a;{if(!navigator.onLine)throw Tw.create("app-offline");const s=jLe(a);return t=RLe(n,s),s}});return t?await t:r.authToken}async function NLe(n,e){let t=await LZ(n.appConfig);for(;t.authToken.requestStatus===1;)await Lve(100),t=await LZ(n.appConfig);const r=t.authToken;return r.requestStatus===0?_7(n,e):r}function LZ(n){return OL(n,e=>{if(!Vve(e))throw Tw.create("not-registered");const t=e.authToken;return FLe(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function RLe(n,e){try{const t=await MLe(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await QR(n.appConfig,r),t}catch(t){if(Ive(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Bve(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await QR(n.appConfig,r)}throw t}}function Vve(n){return n!==void 0&&n.registrationStatus===2}function OLe(n){return n.requestStatus===2&&!LLe(n)}function LLe(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+cLe}function jLe(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function FLe(n){return n.requestStatus===1&&n.requestTime+kve<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Le(n){const e=n,{installationEntry:t,registrationPromise:r}=await S7(e);return r?r.catch(console.error):_7(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BLe(n,e=!1){const t=n;return await ULe(t),(await _7(t,e)).token}async function ULe(n){const{registrationPromise:e}=await S7(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VLe(n){if(!n||!n.options)throw s5("App Configuration");if(!n.name)throw s5("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw s5(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function s5(n){return Tw.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zve="installations",zLe="installations-internal",HLe=n=>{const e=n.getProvider("app").getImmediate(),t=VLe(e),r=Bg(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},GLe=n=>{const e=n.getProvider("app").getImmediate(),t=Bg(e,zve).getImmediate();return{getId:()=>$Le(t),getToken:i=>BLe(t,i)}};function WLe(){Gu(new zc(zve,HLe,"PUBLIC")),Gu(new zc(zLe,GLe,"PRIVATE"))}WLe();Ms(Ave,w7);Ms(Ave,w7,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="analytics",qLe="firebase_id",YLe="origin",KLe=60*1e3,XLe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",T7="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new aI("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZLe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$c=new $g("analytics","Analytics",ZLe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QLe(n){if(!n.startsWith(T7)){const e=$c.create("invalid-gtag-resource",{gtagURL:n});return ul.warn(e.message),""}return n}function Hve(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function JLe(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function eje(n,e){const t=JLe("firebase-js-sdk-policy",{createScriptURL:QLe}),r=document.createElement("script"),i=`${T7}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function tje(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function nje(n,e,t,r,i,a){const o=r[i];try{if(o)await e[o];else{const l=(await Hve(t)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(s){ul.error(s)}n("config",i,a)}async function rje(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=await Hve(t);for(const l of o){const c=s.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)a.push(u);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){ul.error(a)}}function ije(n,e,t,r){async function i(a,...o){try{if(a==="event"){const[s,l]=o;await rje(n,e,t,s,l)}else if(a==="config"){const[s,l]=o;await nje(n,e,t,r,s,l)}else if(a==="consent"){const[s,l]=o;n("consent",s,l)}else if(a==="get"){const[s,l,c]=o;n("get",s,l,c)}else if(a==="set"){const[s]=o;n("set",s)}else n(a,...o)}catch(s){ul.error(s)}}return i}function aje(n,e,t,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=ije(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function oje(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(T7)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sje=30,lje=1e3;class cje{constructor(e={},t=lje){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Gve=new cje;function uje(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function dje(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:uje(r)},a=XLe.replace("{app-id}",t),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(s=l.error.message)}catch{}throw $c.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()}async function hje(n,e=Gve,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw $c.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw $c.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new gje;return setTimeout(async()=>{s.abort()},KLe),Wve({appId:r,apiKey:i,measurementId:a},o,s,e)}async function Wve(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Gve){var a;const{appId:o,measurementId:s}=n;try{await fje(r,e)}catch(l){if(s)return ul.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:s};throw l}try{const l=await dje(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!pje(c)){if(i.deleteThrottleMetadata(o),s)return ul.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:s};throw l}const u=Number((a=c==null?void 0:c.customData)===null||a===void 0?void 0:a.httpStatus)===503?_X(t,i.intervalMillis,sje):_X(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),ul.debug(`Calling attemptFetch again in ${u} millis`),Wve(n,d,r,i)}}function fje(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r($c.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pje(n){if(!(n instanceof Ko)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class gje{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mje(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});n("event",t,o)}}async function vje(n,e,t,r){{const i=await e;n("config",i,{update:!0,user_id:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yje(){if(SC())try{await spe()}catch(n){return ul.warn($c.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ul.warn($c.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bje(n,e,t,r,i,a,o){var s;const l=hje(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&ul.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ul.error(f)),e.push(l);const c=yje().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);oje(a)||eje(a,u.measurementId),i("js",new Date);const h=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return h[YLe]="firebase",h.update=!0,d!=null&&(h[qLe]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wje{constructor(e){this.app=e}_delete(){return delete B_[this.app.options.appId],Promise.resolve()}}let B_={},jZ=[];const FZ={};let l5="dataLayer",xje="gtag",$Z,E7,BZ=!1;function Sje(){const n=[];if(i8()&&n.push("This is a browser extension environment."),JDe()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=$c.create("invalid-analytics-context",{errorInfo:e});ul.warn(t.message)}}function _je(n,e,t){Sje();const r=n.options.appId;if(!r)throw $c.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ul.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $c.create("no-api-key");if(B_[r]!=null)throw $c.create("already-exists",{id:r});if(!BZ){tje(l5);const{wrappedGtag:a,gtagCore:o}=aje(B_,jZ,FZ,l5,xje);E7=a,$Z=o,BZ=!0}return B_[r]=bje(n,jZ,FZ,e,$Z,l5,t),new wje(n)}function Tje(n=sL()){n=rn(n);const e=Bg(n,JR);return e.isInitialized()?e.getImmediate():Eje(n)}function Eje(n,e={}){const t=Bg(n,JR);if(t.isInitialized()){const i=t.getImmediate();if(_C(e,t.getOptions()))return i;throw $c.create("already-initialized")}return t.initialize({options:e})}function Aje(n,e,t){n=rn(n),vje(E7,B_[n.app.options.appId],e).catch(r=>ul.error(r))}function Uf(n,e,t,r){n=rn(n),mje(E7,B_[n.app.options.appId],e,t,r).catch(i=>ul.error(i))}const UZ="@firebase/analytics",VZ="0.10.8";function kje(){Gu(new zc(JR,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return _je(r,i,t)},"PUBLIC")),Gu(new zc("analytics-internal",n,"PRIVATE")),Ms(UZ,VZ),Ms(UZ,VZ,"esm2017");function n(e){try{const t=e.getProvider(JR).getImmediate();return{logEvent:(r,i,a)=>Uf(t,r,i,a)}}catch(t){throw $c.create("interop-component-reg-failed",{reason:t})}}}kje();const Cje={apiKey:void 0,authDomain:"make10000hours.firebaseapp.com",projectId:"make10000hours",storageBucket:"make10000hours.firebasestorage.app",messagingSenderId:"496225832510",appId:void 0,measurementId:"G-X6YHGN5WRS"},A7=oL(Cje),zl=Tve(A7);typeof window<"u"&&(window.firebaseAuth=zl);zme(zl,rT).then(()=>{console.log("🔐 Firebase Auth persistence set to LOCAL")}).catch(n=>{console.error("❌ Failed to set Firebase Auth persistence:",n)});const Qe=iRe(A7);let aa;try{aa=Tje(A7),console.log("📊 Firebase Analytics initialized")}catch(n){console.warn("⚠️ Firebase Analytics not available:",n)}const qve=Object.freeze(Object.defineProperty({__proto__:null,get analytics(){return aa},auth:zl,db:Qe},Symbol.toStringTag,{value:"Module"})),Wk={timer:{pomodoro:25,shortBreak:5,longBreak:15,autoStartBreaks:!1,autoStartPomodoros:!1,longBreakInterval:4},darkMode:!1,compactTaskView:!1};let zZ=!1;const HZ=qt(Qe,"users"),Ht=uh((n,e)=>({user:null,isLoading:!0,error:null,isAuthenticated:!1,isInitialized:!1,initialize:()=>{if(zZ){console.log("User store already initializing, skipping...");return}return zZ=!0,console.log("🔐 Initializing user store authentication..."),Wme(zl,async r=>{if(console.log("🔐 Auth state changed from userStore:",r?"User found":"No user"),r)try{n({isLoading:!0});const i=await e().createUserDataIfNotExists(r.uid,r),a={...r,...i};n({user:a,isAuthenticated:!0,isLoading:!1,isInitialized:!0,error:null}),console.log("✅ User authentication restored successfully");try{const{useSyncStore:o}=await nn(async()=>{const{useSyncStore:s}=await Promise.resolve().then(()=>U_);return{useSyncStore:s}},void 0);await o.getState().initializeSync(),console.log("✅ Sync initialized for user")}catch(o){console.error("❌ Failed to initialize sync:",o)}}catch(i){console.error("❌ Error creating user data:",i),n({error:i,isLoading:!1,isAuthenticated:!1,isInitialized:!0})}else n({user:null,isAuthenticated:!1,isLoading:!1,isInitialized:!0,error:null}),console.log("🔐 No authenticated user found")},r=>{console.error("❌ Firebase Auth error:",r),n({error:r,isLoading:!1,isAuthenticated:!1,isInitialized:!0})})},createUserDataIfNotExists:async(t,r)=>{try{const i=()=>r!=null&&r.displayName?r.displayName:r!=null&&r.email?r.email.split("@")[0]:`user_${t.substring(0,8)}`,a={uid:t,userName:i(),settings:Wk},o=Zt(HZ,t),s=await Pc(o);if(!s.exists())await Is(o,a);else{const l=s.data();if(!l.userName){const c={...l,userName:i()};return await Is(o,c,{merge:!0}),c}return l}return a}catch(i){throw new Error(`Failed to create user data: ${i}`)}},updateUserData:async t=>{try{const r=Zt(HZ,t.uid);await Is(r,t,{merge:!0});const{user:i}=e();i&&(console.log("Updating user data in store:",t),n({user:{...i,...t}}))}catch(r){throw new Error(`Failed to update user data: ${r}`)}},signOut:async()=>{try{n({isLoading:!0});try{const{simpleGoogleOAuthService:t}=await nn(async()=>{const{simpleGoogleOAuthService:r}=await Promise.resolve().then(()=>iye);return{simpleGoogleOAuthService:r}},void 0);t.clearTokenOnLogout()}catch(t){console.warn("Failed to clear Google Calendar token:",t)}await qme(zl),n({user:null,isAuthenticated:!1,isInitialized:!0,error:null,isLoading:!1})}catch(t){n({error:t,isLoading:!1})}},setUser:t=>{n({user:t,isAuthenticated:!!t,error:null})},setError:t=>n({error:t}),setLoading:t=>n({isLoading:t})})),to=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Ht},Symbol.toStringTag,{value:"Module"})),k7=(n,e)=>{aa&&Uf(aa,"page_view",{page_title:e||n,page_location:window.location.href,page_path:window.location.pathname})},Yve=n=>{aa&&Uf(aa,"login",{method:n})},Kve=n=>{aa&&Uf(aa,"sign_up",{method:n})},Xve=n=>{aa&&Uf(aa,"task_created",{project_id:n||"no-project",timestamp:new Date().toISOString()})},Zve=(n,e,t)=>{aa&&Uf(aa,"task_completed",{task_id:n,time_spent_minutes:e,project_id:t||"no-project",timestamp:new Date().toISOString()})},ZV=(n,e)=>{aa&&Uf(aa,"pomodoro_started",{task_id:n,estimated_time_minutes:e,timestamp:new Date().toISOString()})},Qve=(n,e)=>{aa&&Uf(aa,"pomodoro_completed",{task_id:n,actual_time_minutes:e,timestamp:new Date().toISOString()})},Jve=n=>{aa&&Uf(aa,"project_created",{project_name:n,timestamp:new Date().toISOString()})},eye=n=>{aa&&Aje(aa,n)},tye=(n,e)=>{aa&&Uf(aa,n,{...e,timestamp:new Date().toISOString()})},nye=Object.freeze(Object.defineProperty({__proto__:null,setAnalyticsUserId:eye,trackCustomEvent:tye,trackPageView:k7,trackPomodoroCompleted:Qve,trackPomodoroStarted:ZV,trackProjectCreated:Jve,trackTaskCompleted:Zve,trackTaskCreated:Xve,trackUserLogin:Yve,trackUserSignup:Kve},Symbol.toStringTag,{value:"Module"})),C7=n=>{const e=Math.floor(n/60),t=n%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},Af=n=>{const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},Dje=()=>{const n=Date.now().toString(36),e=Math.random().toString(36).substr(2,9);return`${n}-${e}`},Ije=()=>{const n=localStorage.getItem("timer-device-id");if(n)return n;const e=Dje();return localStorage.setItem("timer-device-id",e),e},Mje=(n=new Date)=>el(n),el=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`},Pje=(n,e)=>{let t=e.getTime()-n.getTime();t<0&&(t+=24*60*60*1e3);let r=Math.round(t/(1e3*60));return r===0&&(r=30),r>480&&(r=480),r},eO=n=>{const e=c=>String(c).padStart(2,"0"),t=n.getFullYear(),r=e(n.getMonth()+1),i=e(n.getDate()),a=e(n.getHours()),o=e(n.getMinutes()),s=e(n.getSeconds()),l=String(n.getMilliseconds()).padStart(3,"0");return`${t}-${r}-${i}T${a}:${o}:${s}.${l}`},Nje="workSessions",To=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(n&&typeof n.toDate=="function")return n.toDate();if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?new Date:e}return new Date};class Rje{constructor(){$t(this,"workSessionsCollection",qt(Qe,Nje))}async createWorkSession(e){try{const t=new Date().getTime(),r=`${e.taskId}_${e.date}_${t}`,i=Zt(this.workSessionsCollection,r),a={...e,id:r,status:e.status||"completed",createdAt:new Date,updatedAt:new Date};return await Is(i,a),r}catch(t){throw console.error("Error creating work session:",t),t}}async createActiveSession(e,t,r,i){try{const a=new Date,o={userId:r,taskId:e,projectId:t,date:a.toISOString().split("T")[0],duration:0,sessionType:i,status:"active",startTime:a,notes:`${i} session started`};return await this.createWorkSession(o)}catch(a){throw console.error("Error creating active session:",a),a}}async updateSession(e,t){try{const r=Zt(this.workSessionsCollection,e),i={...t,updatedAt:new Date};await fa(r,i)}catch(r){throw console.error("Error updating session:",r),r}}async incrementDuration(e,t){try{const r=Zt(this.workSessionsCollection,e),i={duration:gRe(t),updatedAt:new Date};await fa(r,i)}catch(r){throw console.error("Error incrementing session duration:",r),r}}async completeSession(e,t,r,i){try{await this.updateSession(e,{duration:t,status:r,endTime:new Date,notes:i||`Session ${r}: ${t}m`})}catch(a){throw console.error("Error completing session:",a),a}}async getActiveSessions(e){try{const t=zt(this.workSessionsCollection,gt("userId","==",e),gt("status","==","active"),ta("updatedAt","desc"));return(await kn(t)).docs.map(i=>{const a=i.data();return{id:i.id,...a,createdAt:To(a.createdAt),updatedAt:To(a.updatedAt),startTime:a.startTime?To(a.startTime):void 0,endTime:a.endTime?To(a.endTime):void 0}})}catch(t){return console.error("Error fetching active sessions:",t),[]}}async cleanupOrphanedSessions(e,t=60){try{const r=await this.getActiveSessions(e),i=new Date(Date.now()-t*60*1e3);let a=0;for(const o of r)new Date(o.updatedAt)<i&&(o.duration>0?(await this.completeSession(o.id,o.duration,"completed",`Session completed: ${o.duration}m (app restart cleanup)`),console.log(`✅ Completed meaningful session: ${o.id} (${o.duration}m)`)):(await this.deleteWorkSession(o.id),console.log(`🗑️ Deleted empty orphaned session: ${o.id}`)),a++);return a}catch(r){return console.error("Error cleaning up orphaned sessions:",r),0}}async upsertWorkSession(e,t=0,r="manual"){try{const i={...e,duration:t,sessionType:r,status:"completed",notes:r==="manual"?t>0?`Manual time addition: +${t}m`:`Manual time reduction: ${t}m`:`${r} session completed`};return await this.createWorkSession(i)}catch(i){throw console.error("Error upserting work session:",i),i}}async getWorkSessionsByDateRange(e,t,r){try{const i=zt(this.workSessionsCollection,gt("userId","==",e),gt("updatedAt",">=",Kr.fromDate(t)),gt("updatedAt","<=",Kr.fromDate(r)),ta("updatedAt","desc"));return(await kn(i)).docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:To(s.createdAt),updatedAt:To(s.updatedAt)}})}catch(i){throw console.error("Error fetching work sessions:",i),i}}async getWorkSessionsByTask(e,t){try{const r=zt(this.workSessionsCollection,gt("userId","==",e),gt("taskId","==",t));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:To(o.createdAt),updatedAt:To(o.updatedAt)}})}catch(r){throw console.error("Error fetching task work sessions:",r),r}}async getWorkSessionsByProject(e,t){try{const r=zt(this.workSessionsCollection,gt("userId","==",e),gt("projectId","==",t),ta("updatedAt","desc"));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:To(o.createdAt),updatedAt:To(o.updatedAt)}})}catch(r){throw console.error("Error fetching project work sessions:",r),r}}async updateWorkSessionsProjectId(e,t,r){try{const i=await this.getWorkSessionsByTask(e,t);if(i.length===0)return 0;const a=i.map(async o=>{const s=Zt(this.workSessionsCollection,o.id);return fa(s,{projectId:r,updatedAt:new Date})});return await Promise.all(a),console.log(`✅ Updated ${i.length} work sessions for task ${t} to project ${r}`),i.length}catch(i){throw console.error("Error updating work sessions project ID:",i),i}}async deleteWorkSession(e){try{const t=Zt(this.workSessionsCollection,e);await TL(t)}catch(t){throw console.error("Error deleting work session:",t),t}}subscribeToWorkSessions(e,t){const r=zt(this.workSessionsCollection,gt("userId","==",e));return cg(r,i=>{const a=i.docs.map(o=>{const s=o.data();return{id:o.id,...s,createdAt:To(s.createdAt),updatedAt:To(s.updatedAt)}});t(a)})}async getWorkSessionsForRange(e,t,r){try{const i=eO(t).split("T")[0],a=eO(r).split("T")[0];console.log("WorkSessionService - Loading sessions for range:",{userId:e,startDate:i,endDate:a});const o=zt(this.workSessionsCollection,gt("userId","==",e),gt("date",">=",i),gt("date","<=",a)),l=(await kn(o)).docs.map(c=>{const u=c.data();return{id:c.id,...u,createdAt:To(u.createdAt),updatedAt:To(u.updatedAt)}});return l.sort((c,u)=>u.date.localeCompare(c.date)),l}catch(i){throw console.error("Error getting work sessions for range:",i),i}}async getAllWorkSessions(e){try{console.log("WorkSessionService - Loading ALL sessions for user:",e);const t=zt(this.workSessionsCollection,gt("userId","==",e)),i=(await kn(t)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:To(o.createdAt),updatedAt:To(o.updatedAt)}});return i.sort((a,o)=>o.date.localeCompare(a.date)),console.log("WorkSessionService - Loaded ALL sessions:",i.length),i}catch(t){throw console.error("Error getting all work sessions:",t),t}}async getRecentWorkSessions(e,t=50){try{const r=zt(this.workSessionsCollection,gt("userId","==",e),ta("updatedAt","desc"),$ge(t));return(await kn(r)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:To(o.createdAt),updatedAt:To(o.updatedAt)}})}catch(r){throw console.error("Error fetching recent work sessions:",r),r}}}const ji=new Rje,GZ=qt(Qe,"tasks"),WZ=qt(Qe,"projects"),Vt=uh((n,e)=>({tasks:[],projects:[],isAddingTask:!1,editingTaskId:null,showDetailsMenu:!1,isLoading:!1,unsubscribe:null,initializeStore:async()=>{const{user:t,isAuthenticated:r}=Ht.getState();if(!r||!t){n({tasks:[],projects:[],isLoading:!1});return}n({isLoading:!0});const{unsubscribe:i}=e();i&&i();const a=zt(GZ,gt("userId","==",t.uid),ta("order","asc")),o=zt(WZ,gt("userId","==",t.uid)),s=cg(a,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));console.log(`Fetched ${d.length} tasks for user ${t.uid}`),n({tasks:d})}),l=cg(o,u=>{const d=u.docs.map(h=>({id:h.id,...h.data()}));n({projects:d,isLoading:!1})});n({unsubscribe:()=>{s(),l()}})},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,tasks:[],projects:[]}))},addProject:async t=>{try{const{user:r}=Ht.getState();if(!r)throw new Error("User not authenticated");const i={...t,userId:r.uid};if(t.name==="No Project"){const o=Zt(Qe,"projects","no-project");return await Is(o,i),"no-project"}const a=await qR(WZ,i);return Jve(t.name),a.id}catch(r){throw console.error("Error adding project:",r),r}},updateProject:async(t,r)=>{try{const{user:i}=Ht.getState();if(!i)throw new Error("User not authenticated");const a=Zt(Qe,"projects",t);await fa(a,r),console.log(`✅ Successfully updated project ${t}`)}catch(i){throw console.error(`❌ Error updating project ${t}:`,i),i}},deleteProject:async t=>{try{const{user:r}=Ht.getState();if(!r)throw new Error("User not authenticated");console.log(`🗑️ Starting deletion of project ${t}...`);const i=zt(GZ,gt("userId","==",r.uid),gt("projectId","==",t)),a=await kn(i),o=a.docs.map(c=>c.id);if(console.log(`📋 Found ${o.length} tasks in project ${t}`),o.length>0)try{for(const c of o){const u=await ji.getWorkSessionsByTask(r.uid,c);if(console.log(`📋 Found ${u.length} work sessions for task ${c}`),u.length>0){const d=u.map(h=>ji.deleteWorkSession(h.id));await Promise.all(d),console.log(`✅ Deleted ${u.length} work sessions for task ${c}`)}}}catch(c){console.error("❌ Error deleting work sessions for project tasks:",c),console.warn(`⚠️ Work session cleanup failed for project ${t}, but continuing with deletion`)}const s=zk(Qe);a.docs.forEach(c=>{s.delete(c.ref)});const l=Zt(Qe,"projects",t);s.delete(l),await s.commit(),console.log(`✅ Successfully deleted project ${t}, ${o.length} tasks, and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting project ${t}:`,r),r}},addTask:async t=>{try{console.log("addTask started");const{user:r}=Ht.getState();if(!r)throw new Error("No user found");console.log("User found:",r.uid);const i=qt(Qe,"tasks"),{tasks:a}=e();console.log("Current tasks count:",a.length);const o=a.length>0?Math.max(...a.map(c=>c.order||0)):-1,s={...t,userId:r.uid,order:o+1,createdAt:new Date,updatedAt:new Date},l=await qR(i,s);if(console.log("Firestore addDoc completed, docRef:",l.id),Xve(t.projectId),t.scheduledDate)try{console.log("🔄 Auto-syncing new task to Google Calendar...");const{useSyncStore:c}=await nn(async()=>{const{useSyncStore:u}=await Promise.resolve().then(()=>U_);return{useSyncStore:u}},void 0);setTimeout(async()=>{try{await c.getState().syncTask(l.id),console.log("✅ Task auto-synced to Google Calendar")}catch(u){console.error("❌ Failed to auto-sync task to Google Calendar:",u)}},1e3)}catch(c){console.error("❌ Failed to setup auto-sync for task:",c)}return console.log("Task creation initiated successfully"),l.id}catch(r){throw console.error("Error adding task:",r),r}},hasSchedulingChanges:(t,r)=>t?["scheduledDate","scheduledStartTime","scheduledEndTime","includeTime"].some(a=>{const o=t[a],s=r[a];return s!==void 0&&o!==s}):!1,updateTask:async(t,r)=>{try{const{user:i}=Ht.getState();if(!i)throw new Error("No user found");const{tasks:a}=e(),o=a.find(h=>h.id===t),s=r.projectId&&o&&r.projectId!==o.projectId,l=e().hasSchedulingChanges(o,r),c=Object.fromEntries(Object.entries(r).filter(([h,f])=>f!==void 0)),u=Zt(Qe,"tasks",t);if(await fa(u,{...c,updatedAt:new Date}),s&&r.projectId)try{const h=await ji.updateWorkSessionsProjectId(i.uid,t,r.projectId);h>0&&console.log(`🔄 Updated ${h} work sessions for task ${t} to project ${r.projectId}`)}catch(h){console.error("❌ Failed to update work sessions project ID:",h),console.warn("⚠️ Task was updated but work session project IDs may be inconsistent")}const d={...o,...r};if(l&&d.scheduledDate)try{console.log("🔄 Auto-syncing task with scheduling changes to Google Calendar...");const{useSyncStore:h}=await nn(async()=>{const{useSyncStore:f}=await Promise.resolve().then(()=>U_);return{useSyncStore:f}},void 0);await h.getState().syncTask(t),console.log("✅ Task scheduling changes auto-synced to Google Calendar")}catch(h){console.error("❌ Failed to auto-sync task scheduling changes to Google Calendar:",h)}n({editingTaskId:null})}catch(i){throw console.error("Error updating task:",i),i}},updateTaskLocally:(t,r)=>{const{tasks:i}=e();i[t]={...i[t],...r,updatedAt:new Date},n({tasks:[...i]})},deleteTask:async t=>{try{const{user:r}=Ht.getState();if(!r)throw new Error("No user found");console.log(`🗑️ Starting deletion of task ${t}...`);try{const a=await ji.getWorkSessionsByTask(r.uid,t);if(console.log(`📋 Found ${a.length} work sessions for task ${t}`),a.length>0){const o=a.map(async s=>(console.log(`🗑️ Deleting work session: ${s.id}`),ji.deleteWorkSession(s.id)));await Promise.all(o),console.log(`✅ Successfully deleted ${a.length} work sessions for task ${t}`)}else console.log(`ℹ️ No work sessions found for task ${t}`)}catch(a){console.error("❌ Error deleting work sessions for task:",a),console.warn(`⚠️ Work session cleanup failed for task ${t}, but continuing with task deletion`)}console.log(`🗑️ Deleting task ${t}...`);const i=Zt(Qe,"tasks",t);await TL(i),console.log(`✅ Successfully deleted task ${t} and all related work sessions`)}catch(r){throw console.error(`❌ Error deleting task ${t}:`,r),r}},toggleTaskCompletion:async(t,r="default")=>{try{const{tasks:i}=e(),a=i.find(d=>d.id===t);if(!a)return null;const o=!a.completed,s=o?"completed":"pomodoro";let l=null;if(o&&r==="pomodoro"&&(l=e().getNextPomodoroTask(t)),o){const{useTimerStore:d}=await nn(async()=>{const{useTimerStore:f}=await Promise.resolve().then(()=>m5e);return{useTimerStore:f}},void 0),h=d.getState();h.currentTask&&h.currentTask.id===t&&(r==="pomodoro"&&l?await h.switchToNextPomodoroTask(l):(h.isRunning&&await h.pause(),await h.setCurrentTask(null)))}const c=Zt(Qe,"tasks",t),u={completed:o,status:s,updatedAt:new Date};return o&&r==="todo"&&(u.hideFromPomodoro=!0),await fa(c,u),o&&Zve(t,a.timeSpent,a.projectId),l}catch(i){throw console.error("Error toggling task completion:",i),i}},updateTaskStatus:async(t,r)=>{try{const{tasks:i}=e(),a=i.find(c=>c.id===t);if(!a)return;const o=r==="completed"?!0:a.status==="completed"?!1:a.completed,s={status:r,completed:o,updatedAt:new Date};r==="pomodoro"&&(s.hideFromPomodoro=!1);const l=Zt(Qe,"tasks",t);await fa(l,s)}catch(i){throw console.error("Error updating task status:",i),i}},reorderTasks:async(t,r)=>{try{const{tasks:i}=e(),a=i.findIndex(c=>c.id===t);if(a===-1)return;const o=[...i],[s]=o.splice(a,1);o.splice(r,0,s);const l=o.map(async(c,u)=>{const d=Zt(Qe,"tasks",c.id);return fa(d,{order:u,updatedAt:c.id===t?new Date:c.updatedAt})});await Promise.all(l)}catch(i){throw console.error("Error reordering tasks:",i),i}},moveTaskToStatusAndPosition:async(t,r,i)=>{try{const{tasks:a}=e(),o=a.findIndex(v=>v.id===t);if(o===-1)return;const s=a[o],l=r==="completed"?!0:s.status==="completed"?!1:s.completed,c=[...a];c[o]={...s,status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro};const[u]=c.splice(o,1),d=o<i?i-1:i;c.splice(d,0,u);const h=[],f=Zt(Qe,"tasks",t);h.push(fa(f,{status:r,completed:l,hideFromPomodoro:r==="pomodoro"?!1:s.hideFromPomodoro,order:d,updatedAt:new Date}));const m=a;for(let v=0;v<c.length;v++){const y=c[v],w=m.find(T=>T.id===y.id);if(y.id===t||!w||w.order===v)continue;const S=Zt(Qe,"tasks",y.id);h.push(fa(S,{order:v,updatedAt:new Date}))}await Promise.all(h)}catch(a){throw console.error("Error moving task to status and position:",a),a}},timeSpentIncrement:async(t,r=1)=>{if(r<=0){console.warn("Increment must be a positive number");return}const{tasks:i}=e(),a=i.find(s=>s.id===t);if(!a)throw console.error("Task not found:",t),new Error("Task not found");const o=a.timeSpent+r;if(o<0)throw console.error("Time spent cannot be negative"),new Error("Time spent cannot be negative");try{const s=Zt(Qe,"tasks",t);await fa(s,{timeSpent:o,updatedAt:new Date})}catch(s){throw console.error("Error incrementing time spent:",s),s}},setIsAddingTask:t=>n({isAddingTask:t}),setEditingTaskId:t=>n({editingTaskId:t}),setShowDetailsMenu:t=>n({showDetailsMenu:t}),handleMoveCompletedDown:async()=>{try{const{tasks:t}=e(),r=t.filter(s=>s.completed),a=[...t.filter(s=>!s.completed),...r],o=zk(Qe);a.forEach((s,l)=>{const c=Zt(Qe,"tasks",s.id);o.update(c,{order:l})}),await o.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error moving completed tasks:",t),t}},handleArchiveCompleted:async()=>{try{const{tasks:t}=e(),r=t.filter(a=>a.completed),i=zk(Qe);r.forEach(a=>{const o=Zt(Qe,"tasks",a.id);i.update(o,{hideFromPomodoro:!0,updatedAt:new Date})}),await i.commit(),n({showDetailsMenu:!1})}catch(t){throw console.error("Error archiving completed tasks:",t),t}},cleanupOrphanedWorkSessions:async()=>{try{const{user:t}=Ht.getState(),{tasks:r}=e();if(!t)throw new Error("No user found");console.log("🧹 Starting cleanup of orphaned work sessions...");const i=await ji.getRecentWorkSessions(t.uid,1e3);console.log(`Found ${i.length} total work sessions`);const a=new Set(r.map(l=>l.id));console.log(`Found ${a.size} current tasks`);const o=i.filter(l=>!a.has(l.taskId));if(console.log(`Found ${o.length} orphaned work sessions to delete`),o.length===0)return console.log("✅ No orphaned work sessions found"),{deletedCount:0,orphanedSessions:[]};const s=o.map(l=>ji.deleteWorkSession(l.id));return await Promise.all(s),console.log(`✅ Successfully deleted ${o.length} orphaned work sessions`),{deletedCount:o.length,orphanedSessions:o.map(l=>({id:l.id,taskId:l.taskId,duration:l.duration,date:l.date}))}}catch(t){throw console.error("Error cleaning up orphaned work sessions:",t),t}},getNextPomodoroTask:t=>{const{tasks:r}=e(),i=r.filter(s=>s.status==="pomodoro"&&!s.completed&&!s.hideFromPomodoro).sort((s,l)=>s.order-l.order);console.log("Finding next Pomodoro task:",{currentTaskId:t,allPomodoroTasks:i.map(s=>({id:s.id,title:s.title,order:s.order}))});const a=i.findIndex(s=>s.id===t),o=a>=0&&a<i.length-1?i[a+1]:null;return console.log("Next task result:",{currentIndex:a,nextTask:o?{id:o.id,title:o.title}:null}),o}}));Ht.subscribe(n=>{const e=Vt.getState();if(!n.isInitialized){console.log("TaskStore - User store not initialized yet, waiting...");return}console.log("TaskStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user?(console.log("TaskStore - User authenticated, initializing..."),e.initializeStore()):(console.log("TaskStore - User not authenticated, cleaning up..."),e.cleanupListeners())});const Oje=Object.freeze(Object.defineProperty({__proto__:null,useTaskStore:Vt},Symbol.toStringTag,{value:"Module"})),Y0={CLIENT_SIDE_FLOW:"no-refresh-token-available",PENDING_REFRESH:"refresh-token-pending",MISSING_REFRESH:"refresh-token-missing"};class rye{constructor(){$t(this,"clientId");$t(this,"clientSecret");$t(this,"scope","https://www.googleapis.com/auth/calendar");$t(this,"redirectUri","postmessage");$t(this,"codeClient",null);const e="496225832510-4q5t9iogu4dhpsbenkg6f5oqmbgudae8.apps.googleusercontent.com";this.clientId=e,this.clientSecret="",console.log("🔍 OAuth service initialized with Authorization Code Flow:",{clientId:this.clientId?`${this.clientId.substring(0,10)}...`:"Not set",scope:this.scope,configured:!!this.clientId,hasClientSecret:!!this.clientSecret})}isConfigured(){return!!this.clientId}async loadGoogleIdentityServices(){var e,t;if(!((t=(e=window.google)==null?void 0:e.accounts)!=null&&t.oauth2))return new Promise((r,i)=>{const a=document.createElement("script");a.src="https://accounts.google.com/gsi/client",a.onload=()=>r(),a.onerror=()=>i(new Error("Failed to load Google Identity Services")),document.head.appendChild(a)})}async getStoredToken(){const e=zl.currentUser;if(!e)return null;try{const t=await Pc(Zt(Qe,"googleCalendarTokens",e.uid));if(!t.exists())return null;const r=t.data();return Date.now()+5*60*1e3>=r.expiresAt?(console.log("🔄 Token expiring soon..."),r.refreshToken===Y0.CLIENT_SIDE_FLOW||r.refreshToken===Y0.PENDING_REFRESH||r.refreshToken===Y0.MISSING_REFRESH?(console.log("⚠️ No refresh token available for automatic renewal"),console.log("💡 Token will be valid until:",new Date(r.expiresAt)),console.log("💡 User will need to re-authorize when token expires"),r):await this.refreshAccessToken(r)||r):r}catch(t){return console.error("Error getting stored token:",t),null}}async hasCalendarAccess(){return!!await this.getStoredToken()}async requestCalendarAccess(){const e=zl.currentUser;if(!e)throw new Error("User not authenticated");if(!this.isConfigured())throw new Error("Google OAuth2 Client ID not configured");return await this.loadGoogleIdentityServices(),new Promise((t,r)=>{const i=window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:this.scope,include_granted_scopes:!0,callback:async a=>{try{if(a.error)throw new Error(a.error);console.log("🔑 Token received, getting user profile...");const o=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a.access_token}`}});if(!o.ok)throw new Error("Failed to get user profile");const s=await o.json(),l={userId:e.uid,accessToken:a.access_token,refreshToken:Y0.CLIENT_SIDE_FLOW,expiresAt:Date.now()+a.expires_in*1e3,grantedAt:new Date,email:s.email,name:s.name,picture:s.picture,syncEnabled:!0,createdAt:new Date,updatedAt:new Date};await Is(Zt(Qe,"googleCalendarTokens",e.uid),l),console.log("✅ Google Calendar access granted for user:",e.uid),console.log("🔍 Token details:",{hasAccessToken:!!l.accessToken,expiresAt:new Date(l.expiresAt),email:l.email,validFor:Math.round((l.expiresAt-Date.now())/6e4)+" minutes"}),t(l)}catch(o){console.error("❌ Error processing Google OAuth response:",o),r(o)}}});localStorage.setItem("lastGoogleAuthAttempt",Date.now().toString());try{console.log("🔐 Requesting Google Calendar authorization..."),console.log("💡 If popup is blocked, check address bar for popup blocker icon"),i.requestAccessToken({prompt:"consent"}),setTimeout(()=>{console.log("⚠️ If authorization popup did not appear, it may be blocked"),console.log("🔧 To fix: Allow popups for this site in your browser settings"),console.log('📍 Look for popup blocker icon in address bar and click "Always allow"')},1e3)}catch(a){console.error("❌ Failed to request access token:",a),console.log("🚨 POPUP BLOCKED OR AUTHORIZATION FAILED"),console.log("🔧 Solution: Enable popups for this site and try again"),r(new Error("Authorization failed. Please allow popups for this site and try again."))}})}async refreshAccessToken(e){if(!e.refreshToken||e.refreshToken===Y0.CLIENT_SIDE_FLOW||e.refreshToken===Y0.MISSING_REFRESH||e.refreshToken===Y0.PENDING_REFRESH)return console.log("❌ No refresh token available for client-side app"),console.log("💡 User will need to re-authorize when current token expires"),null;try{console.log("🔄 Refreshing access token...");const t=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:this.clientId,client_secret:this.clientSecret,refresh_token:e.refreshToken,grant_type:"refresh_token"})});if(!t.ok){const a=await t.json();return console.error("❌ Token refresh failed:",a),null}const r=await t.json();if(r.error)return console.error("❌ Token refresh error:",r.error),null;const i={...e,accessToken:r.access_token,refreshToken:r.refresh_token||e.refreshToken,expiresAt:Date.now()+r.expires_in*1e3,updatedAt:new Date};return await Is(Zt(Qe,"googleCalendarTokens",e.userId),i),console.log("✅ Access token refreshed successfully"),i}catch(t){return console.error("❌ Error refreshing access token:",t),null}}async revokeAccess(){const e=zl.currentUser;if(e)try{const t=await this.getStoredToken();if(t){try{await fetch(`https://oauth2.googleapis.com/revoke?token=${t.accessToken}`,{method:"POST"})}catch(r){console.warn("Failed to revoke token with Google:",r)}await TL(Zt(Qe,"googleCalendarTokens",e.uid))}console.log("✅ Google Calendar access revoked for user:",e.uid)}catch(t){throw console.error("Error revoking access:",t),t}}async toggleSync(e){const t=zl.currentUser;if(!t)return;const r=await this.getStoredToken();if(!r)throw new Error("No Google Calendar access found");const i={...r,syncEnabled:e,updatedAt:new Date};await Is(Zt(Qe,"googleCalendarTokens",t.uid),i),console.log(`✅ Sync ${e?"enabled":"disabled"} for user:`,t.uid)}clearTokenOnLogout(){console.log("🔄 User logged out, Google Calendar tokens remain persistent")}async getAccessToken(){const e=await this.getStoredToken();return(e==null?void 0:e.accessToken)||null}}const ro=new rye,iye=Object.freeze(Object.defineProperty({__proto__:null,SimpleGoogleOAuthService:rye,simpleGoogleOAuthService:ro},Symbol.toStringTag,{value:"Module"}));class Lje{constructor(){$t(this,"calendarId","primary");$t(this,"baseUrl","https://www.googleapis.com/calendar/v3")}async initialize(){if(!zl.currentUser)throw new Error("User not authenticated");if(!ro.isConfigured()){console.warn("📅 Google OAuth2 not configured - running in demo mode"),console.warn("ℹ️  Set VITE_GOOGLE_OAUTH_CLIENT_ID to enable real Google Calendar sync");return}if(!await ro.getStoredToken()){console.warn("📅 No calendar access token - running in demo mode"),console.warn("ℹ️  Grant calendar access in settings to enable real sync");return}console.log("✅ Google Calendar API authenticated successfully"),console.log("🔗 Real Google Calendar sync is now active")}async getAuthHeaders(){const e=await ro.getStoredToken();if(!e)throw new Error("No access token available - user needs to re-authorize");return{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}}async makeAuthenticatedRequest(e,t={}){try{const r=await this.getAuthHeaders(),i=await fetch(e,{...t,headers:{...r,...t.headers}});if(i.status===401){console.log("🔄 Got 401, attempting token refresh and retry...");const a=await ro.getStoredToken();if(a&&a.refreshToken&&a.refreshToken!=="CLIENT_SIDE_APP"&&a.refreshToken!=="PENDING_REFRESH_TOKEN"&&a.refreshToken!=="MISSING_REFRESH_TOKEN"){const o=await this.getAuthHeaders(),s=await fetch(e,{...t,headers:{...o,...t.headers}});if(s.status===401)throw new Error("Authentication failed after token refresh - user needs to re-authorize");return s}else throw new Error("Token expired and no refresh token available - user needs to re-authorize Google Calendar access")}if(i.status===429){console.log("🚦 Rate limit hit, waiting before retry...");const a=i.headers.get("Retry-After"),o=a?parseInt(a)*1e3:5e3;console.log(`⏳ Waiting ${o/1e3} seconds due to rate limit...`),await new Promise(l=>setTimeout(l,o)),console.log("🔄 Retrying request after rate limit wait...");const s=await fetch(e,{...t,headers:await this.getAuthHeaders()});if(s.status===429)throw new Error("Rate limit exceeded even after retry - please try again later");return s}return i}catch(r){throw console.error("Error in authenticated request:",r),r}}async createEvent(e,t){var i;if(await this.initialize(),await ro.getStoredToken())try{const a=this.taskToGoogleEvent(e,t),o=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events`,{method:"POST",body:JSON.stringify(a)});if(!o.ok){const l=await o.json();throw new Error(`API error: ${((i=l.error)==null?void 0:i.message)||o.statusText}`)}const s=await o.json();return console.log("✅ Created Google Calendar event:",s.id),s.id}catch(a){throw console.error("❌ Failed to create Google Calendar event:",a),a}else{const a=`demo_event_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;return console.log("📅 DEMO MODE: Simulating Google Calendar event creation"),console.log("📋 Task Details:",{taskId:e.id,title:e.title,project:t.name,scheduledDate:e.scheduledDate,scheduledTime:e.includeTime?`${e.scheduledStartTime} - ${e.scheduledEndTime}`:"All day"}),console.log("🔗 Generated Event ID (demo):",a),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(o=>setTimeout(o,1e3)),a}}async updateEvent(e,t,r){var a;if(await this.initialize(),await ro.getStoredToken())try{const o=this.taskToGoogleEvent(t,r),s=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{method:"PUT",body:JSON.stringify(o)});if(!s.ok){const l=await s.json();throw new Error(`API error: ${((a=l.error)==null?void 0:a.message)||s.statusText}`)}console.log("✅ Updated Google Calendar event:",e)}catch(o){throw console.error("❌ Failed to update Google Calendar event:",o),o}else console.log("📅 DEMO MODE: Simulating Google Calendar event update"),console.log("📋 Event Details:",{eventId:e,taskId:t.id,title:t.title,project:r.name,scheduledDate:t.scheduledDate,scheduledTime:t.includeTime?`${t.scheduledStartTime} - ${t.scheduledEndTime}`:"All day"}),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(o=>setTimeout(o,800))}async deleteEvent(e){var r;if(await this.initialize(),await ro.getStoredToken())try{const i=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{method:"DELETE"});if(!i.ok){const a=await i.json();throw new Error(`API error: ${((r=a.error)==null?void 0:r.message)||i.statusText}`)}console.log("✅ Deleted Google Calendar event:",e)}catch(i){throw console.error("❌ Failed to delete Google Calendar event:",i),i}else console.log("📅 DEMO MODE: Simulating Google Calendar event deletion"),console.log("🗑️ Event ID:",e),console.log("ℹ️  To see this in real Google Calendar, setup OAuth2 as described in the settings page"),await new Promise(i=>setTimeout(i,600))}async getEvent(e){var r;if(await this.initialize(),!await ro.getStoredToken())throw new Error("No access token available");try{const i=await fetch(`${this.baseUrl}/calendars/${this.calendarId}/events/${e}`,{headers:await this.getAuthHeaders()});if(!i.ok){const a=await i.json();throw new Error(`API error: ${((r=a.error)==null?void 0:r.message)||i.statusText}`)}return await i.json()}catch(i){throw console.error("Error getting Google Calendar event:",i),new Error(`Failed to get calendar event: ${i.message}`)}}async listEvents(e,t,r){var a;if(await this.initialize(),!await ro.getStoredToken())return console.log("🔄 DEMO MODE: Simulating Google Calendar events list"),await new Promise(o=>setTimeout(o,1200)),{items:[],nextSyncToken:`sync_${Date.now()}`,nextPageToken:void 0};console.log("🔄 Listing Google Calendar events:",{timeMin:e.toISOString(),timeMax:t.toISOString(),syncToken:r?"provided":"none"});try{const o=new URLSearchParams({singleEvents:"true"});r?o.append("syncToken",r):(o.append("timeMin",e.toISOString()),o.append("timeMax",t.toISOString()),o.append("orderBy","startTime"));const s=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events?${o}`);if(!s.ok){const c=await s.json();throw new Error(`API error: ${((a=c.error)==null?void 0:a.message)||s.statusText}`)}const l=await s.json();return{items:l.items||[],nextSyncToken:l.nextSyncToken,nextPageToken:l.nextPageToken}}catch(o){return console.error("Error listing Google Calendar events:",o),{items:[],nextSyncToken:`sync_${Date.now()}`,nextPageToken:void 0}}}async listEventsForSyncToken(){var e,t;if(await this.initialize(),this.isDemoMode)return console.log("🔄 DEMO MODE: Simulating sync token generation"),await new Promise(r=>setTimeout(r,1200)),{items:[],nextSyncToken:`sync_${Date.now()}`,nextPageToken:void 0};console.log("🎯 Requesting ALL events to establish sync token (paginating if needed)...");try{const r=[];let i,a,o=0;do{o++,console.log(`📄 Fetching page ${o} for sync token...`);const s=new URLSearchParams({singleEvents:"true"});i&&s.append("pageToken",i);const l=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events?${s}`);if(!l.ok){const u=await l.json();throw new Error(`API error: ${((e=u.error)==null?void 0:e.message)||l.statusText}`)}const c=await l.json();if(c.items&&r.push(...c.items),c.nextSyncToken&&(a=c.nextSyncToken,console.log(`✅ Got sync token on page ${o}!`)),i=c.nextPageToken,console.log(`📊 Page ${o} response:`,{eventsThisPage:((t=c.items)==null?void 0:t.length)||0,totalEventsSoFar:r.length,hasSyncToken:!!c.nextSyncToken,hasNextPage:!!c.nextPageToken}),o>50){console.warn("⚠️ Reached pagination safety limit (50 pages)");break}}while(i&&!a);return console.log("📊 Final sync token request result:",{totalEvents:r.length,totalPages:o,hasSyncToken:!!a,syncToken:a?a.substring(0,30)+"...":"NONE"}),{items:r,nextSyncToken:a,nextPageToken:void 0}}catch(r){throw console.error("Error requesting sync token from Google Calendar:",r),r}}async watchEvents(e,t){var i;if(await this.initialize(),!await ro.getStoredToken())throw new Error("No access token available");try{const a=await this.makeAuthenticatedRequest(`${this.baseUrl}/calendars/${this.calendarId}/events/watch`,{method:"POST",body:JSON.stringify({id:e,type:"web_hook",address:t})});if(!a.ok){const s=await a.json();throw new Error(`API error: ${((i=s.error)==null?void 0:i.message)||a.statusText}`)}const o=await a.json();return{channelId:o.id,resourceId:o.resourceId,expiration:parseInt(o.expiration)}}catch(a){throw console.error("Error setting up Google Calendar webhook:",a),new Error(`Failed to set up calendar webhook: ${a.message}`)}}async stopChannel(e,t){var i;if(await this.initialize(),!await ro.getStoredToken())throw new Error("No access token available");try{const a=await this.makeAuthenticatedRequest(`${this.baseUrl}/channels/stop`,{method:"POST",body:JSON.stringify({id:e,resourceId:t})});if(!a.ok){const o=await a.json();throw new Error(`API error: ${((i=o.error)==null?void 0:i.message)||a.statusText}`)}}catch(a){throw console.error("Error stopping Google Calendar channel:",a),new Error(`Failed to stop calendar channel: ${a.message}`)}}taskToGoogleEvent(e,t){const r={summary:e.title,description:this.buildEventDescription(e,t),extendedProperties:{private:{taskId:e.id,projectId:e.projectId,make10000hours:"true"}}};if(e.scheduledDate)if(e.includeTime&&e.scheduledStartTime&&e.scheduledEndTime){const i=`${e.scheduledDate}T${e.scheduledStartTime}:00`,a=`${e.scheduledDate}T${e.scheduledEndTime}:00`;r.start={dateTime:i,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},r.end={dateTime:a,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}}else r.start={date:e.scheduledDate},r.end={date:e.scheduledDate};if(t&&t.color&&typeof t.color=="string")try{r.colorId=this.getGoogleColorId(t.color)}catch(i){console.warn("Error setting event color:",i),r.colorId="1"}return r}buildEventDescription(e,t){let r="";return e!=null&&e.description&&(r+=e.description+`

`),r+=`Project: ${(t==null?void 0:t.name)||"Unknown"}
`,e!=null&&e.timeEstimated&&e.timeEstimated>0&&(r+=`Estimated time: ${e.timeEstimated} minutes
`),e!=null&&e.timeSpent&&e.timeSpent>0&&(r+=`Time spent: ${e.timeSpent} minutes
`),e!=null&&e.status&&(r+=`Status: ${e.status}
`),r+=`
--- Created by Make10000hours ---`,r}getGoogleColorId(e){return{"#3174ad":"1","#b1365f":"2","#7627bb":"3","#b1440e":"4","#856508":"5","#0d7377":"6","#5484ed":"7","#51b749":"8","#fbd75b":"9","#ffb878":"10","#ff887c":"11"}[e]||"1"}googleEventToTask(e){var r;if(!e)throw new Error("Event is required");const t={title:e.summary||"Untitled Event",description:this.extractTaskDescription(e.description||""),googleCalendarEventId:e.id,syncStatus:"synced",lastSyncedAt:new Date,googleCalendarModified:!0};if(e.start)if(e.start.dateTime)try{const i=new Date(e.start.dateTime),a=(r=e.end)!=null&&r.dateTime?new Date(e.end.dateTime):i;t.scheduledDate=i.toISOString().split("T")[0],t.scheduledStartTime=i.toTimeString().substring(0,5),t.scheduledEndTime=a.toTimeString().substring(0,5),t.includeTime=!0}catch(i){console.warn("Error parsing event datetime:",e.start.dateTime,i)}else e.start.date&&(t.scheduledDate=e.start.date,t.includeTime=!1);return t}extractTaskDescription(e){if(!e||typeof e!="string")return"";try{const t=e.split(`
`),r=[];for(const i of t)if(!(!i||typeof i!="string")){if(i.indexOf("--- Created by Make10000hours ---")!==-1)break;!i.startsWith("Project:")&&!i.startsWith("Estimated time:")&&!i.startsWith("Time spent:")&&!i.startsWith("Status:")&&r.push(i)}return r.join(`
`).trim()}catch(t){return console.error("Error processing description:",t,{description:e}),""}}isOurEvent(e){var t,r;return((r=(t=e.extendedProperties)==null?void 0:t.private)==null?void 0:r.make10000hours)==="true"}getTaskIdFromEvent(e){var t,r;return((r=(t=e.extendedProperties)==null?void 0:t.private)==null?void 0:r.taskId)||null}}const Ta=new Lje;class jje{constructor(e){$t(this,"userId");$t(this,"syncInProgress",!1);$t(this,"pollingInterval",null);this.userId=e}createSyncLog(e){return{userId:this.userId,...e}}toDate(e){return e?typeof e=="object"&&"toDate"in e?e.toDate():e instanceof Date?e:new Date(e):new Date}async initializeSync(){try{if((await Pc(Zt(Qe,"syncStates",this.userId))).exists())console.log("🧹 Clearing any existing webhook flags to prevent immediate sync"),await this.updateSyncState({webhookTriggeredSync:!1});else{const t={userId:this.userId,lastFullSync:new Date,lastIncrementalSync:new Date,isEnabled:!0,createdAt:new Date,updatedAt:new Date};await Is(Zt(Qe,"syncStates",this.userId),t),console.log("🔄 Sync state initialized for user:",this.userId)}}catch(e){throw console.error("Error initializing sync:",e),e}}async getSyncState(){try{const e=await Pc(Zt(Qe,"syncStates",this.userId));return e.exists()?e.data():null}catch(e){return console.error("Error getting sync state:",e),null}}async updateSyncState(e){try{const t=Object.fromEntries(Object.entries(e).filter(([r,i])=>i!==void 0));await fa(Zt(Qe,"syncStates",this.userId),{...t,updatedAt:new Date})}catch(t){throw console.error("Error updating sync state:",t),t}}async logSyncOperation(e){try{const t=Object.fromEntries(Object.entries(e).filter(([r,i])=>i!=null));await qR(qt(Qe,"syncLogs"),{...t,timestamp:new Date})}catch(t){console.error("Error logging sync operation:",t)}}async syncTaskToGoogle(e,t){if(!e.scheduledDate||e.syncStatus==="disabled"){console.log(`Skipping sync for task ${e.id}: no scheduled date or disabled`);return}if(console.log(`🔄 Starting sync for task: ${e.title} (${e.id})`),!e.id||!e.title||!t.name)throw new Error(`Invalid task or project data: taskId=${e.id}, title=${e.title}, project=${t.name}`);try{if(e.googleCalendarEventId)try{await Ta.updateEvent(e.googleCalendarEventId,e,t),await this.updateTaskSyncStatus(e.id,{syncStatus:"synced",lastSyncedAt:new Date}),await this.logSyncOperation(this.createSyncLog({operation:"update",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"success"}))}catch(r){const i=r instanceof Error?r.message:String(r);if(i.includes("Not Found")||i.includes("404")){console.log(`🔄 Event ${e.googleCalendarEventId} not found, creating new event for task ${e.id}`);const a=await Ta.createEvent(e,t);await this.updateTaskSyncStatus(e.id,{googleCalendarEventId:a,syncStatus:"synced",lastSyncedAt:new Date}),await this.logSyncOperation(this.createSyncLog({operation:"create",direction:"to_google",taskId:e.id,googleEventId:a,status:"success"}))}else throw r}else{const r=await Ta.createEvent(e,t);await this.updateTaskSyncStatus(e.id,{googleCalendarEventId:r,syncStatus:"synced",lastSyncedAt:new Date}),await this.logSyncOperation(this.createSyncLog({operation:"create",direction:"to_google",taskId:e.id,googleEventId:r,status:"success"}))}}catch(r){throw console.error("Error syncing task to Google:",r),await this.updateTaskSyncStatus(e.id,{syncStatus:"error",syncError:r.message}),await this.logSyncOperation(this.createSyncLog({operation:e.googleCalendarEventId?"update":"create",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"error",error:r.message})),r}}async deleteTaskFromGoogle(e){if(e.googleCalendarEventId)try{await Ta.deleteEvent(e.googleCalendarEventId),await this.logSyncOperation(this.createSyncLog({operation:"delete",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"success"}))}catch(t){throw console.error("Error deleting task from Google:",t),await this.logSyncOperation(this.createSyncLog({operation:"delete",direction:"to_google",taskId:e.id,googleEventId:e.googleCalendarEventId,status:"error",error:t.message})),t}}async performIncrementalSync(){const e=await this.getSyncState();if(!(!e||!e.isEnabled)){if(this.syncInProgress){console.log("⏸️ Sync already in progress, skipping concurrent incremental sync");return}this.syncInProgress=!0,console.log("🔄 Starting incremental sync with token:",e.nextSyncToken?"Available":"MISSING");try{if(!e.nextSyncToken){console.log("⚠️ No sync token available, establishing one without full sync..."),console.log("📡 Getting initial sync token from Google Calendar...");try{const r=await Ta.listEventsForSyncToken();console.log("📊 Initial sync token response:",{eventsCount:r.items.length,hasNextSyncToken:!!r.nextSyncToken,nextSyncToken:r.nextSyncToken?r.nextSyncToken.substring(0,30)+"...":"NONE"}),r.nextSyncToken?(await this.updateSyncState({nextSyncToken:r.nextSyncToken,lastIncrementalSync:new Date}),console.log("✅ Sync token established, now ready for incremental updates")):console.warn("⚠️ No sync token returned, will retry later"),this.syncInProgress=!1;return}catch(r){console.error("❌ Failed to establish sync token:",r),this.syncInProgress=!1;return}}console.log("📡 Calling Google Calendar API with sync token..."),console.log("🔍 API Call Details:",{syncToken:e.nextSyncToken?e.nextSyncToken.substring(0,30)+"...":"NONE",timeWindow:"Using sync token - no time window",timestamp:new Date().toISOString()});const t=await Ta.listEvents(new Date(Date.now()-30*24*60*60*1e3),new Date(Date.now()+30*24*60*60*1e3),e.nextSyncToken);console.log("📊 Google Calendar API Response:",{eventsCount:t.items.length,hasNextSyncToken:!!t.nextSyncToken,nextSyncToken:t.nextSyncToken?t.nextSyncToken.substring(0,30)+"...":"NONE"}),console.log(`📋 Received ${t.items.length} events from incremental sync`);for(const r of t.items)console.log(`🔄 Processing event: ${r.summary} (${r.id})`),await this.processGoogleCalendarEvent(r);if(t.items.length===0){console.log("🚨 INCREMENTAL SYNC RETURNED 0 EVENTS BUT WEBHOOK FIRED!"),console.log("🔥 Performing AGGRESSIVE recent events check...");try{const r=new Date(Date.now()-3e5),i=new Date(Date.now()+60*1e3);console.log("📡 Checking recent events:",{timeMin:r.toISOString(),timeMax:i.toISOString(),reason:"Webhook fired but incremental sync found nothing"});const a=await Ta.listEvents(r,i);if(console.log(`🔍 Recent events check found: ${a.items.length} events`),a.items.length>0){console.log("🎯 FOUND RECENT EVENTS - Processing them now!");for(const o of a.items)console.log(`🔄 Processing recent event: ${o.summary} (${o.id})`),await this.processGoogleCalendarEvent(o)}else{console.log("🚨 NUCLEAR OPTION: Even recent events check found nothing!"),console.log("🔥 Webhook fired but NO events found anywhere - this suggests sync token issue"),console.log("💥 Forcing FULL SYNC to reset sync token..."),await this.updateSyncState({nextSyncToken:null,webhookTriggeredSync:!1}),console.log("🔄 Establishing fresh sync token without emergency full sync...");try{const o=await Ta.listEventsForSyncToken();o.nextSyncToken&&(await this.updateSyncState({nextSyncToken:o.nextSyncToken,lastIncrementalSync:new Date}),console.log("✅ Fresh sync token established after webhook with no events"))}catch(o){console.error("❌ Failed to establish sync token after empty webhook:",o)}return}}catch(r){console.error("❌ Recent events check failed:",r)}}await this.updateSyncState({nextSyncToken:t.nextSyncToken,lastIncrementalSync:new Date,webhookTriggeredSync:!1}),console.log(`✅ Incremental sync completed: ${t.items.length} events processed`),console.log("🔄 New sync token stored for next incremental sync")}catch(t){console.error("❌ Incremental sync failed:",t);const r=t instanceof Error?t.message:String(t),i=r.toLowerCase();if(console.log("🔍 Analyzing error for sync token issues:",r),r.includes("410")||i.includes("sync token is no longer valid")||i.includes("a full sync is required")||i.includes("sync token")||i.includes("invalid sync token")||i.includes("410")){console.log("🚨 SYNC TOKEN INVALID - Performing aggressive full sync...");try{await this.updateSyncState({webhookTriggeredSync:!1,nextSyncToken:null}),console.log("🔄 Establishing fresh sync token without full sync..."),this.syncInProgress=!1;try{const a=await Ta.listEventsForSyncToken();a.nextSyncToken?(await this.updateSyncState({nextSyncToken:a.nextSyncToken,lastIncrementalSync:new Date}),console.log("✅ Fresh sync token established after invalid token")):console.warn("⚠️ No sync token returned after invalid token recovery")}catch(a){console.error("❌ Failed to establish fresh sync token:",a)}}catch(a){throw console.error("❌ Full sync ALSO failed:",a),await this.updateSyncState({webhookTriggeredSync:!1}),a}}else throw console.error("❌ Incremental sync failed with non-token error:",r),await this.updateSyncState({webhookTriggeredSync:!1}),t}finally{this.syncInProgress=!1,console.log("🔓 Incremental sync lock released")}}}async performFullSync(){const e=await this.getSyncState();if(!(!e||!e.isEnabled)){if(this.syncInProgress){console.log("⏸️ Sync already in progress, skipping concurrent full sync");return}this.syncInProgress=!0,console.log("🔄 Starting FULL SYNC to establish fresh sync token...");try{console.log("📤 Step 1: Syncing tasks TO Google Calendar..."),await this.syncTasksToGoogleCalendar(),console.log("📥 Step 2: Syncing FROM Google Calendar (full sync to establish sync token)..."),console.log("🎯 Using special request pattern to ensure sync token generation...");const t=await Ta.listEventsForSyncToken();console.log(`📋 Full sync retrieved ${t.items.length} events from Google Calendar`);const r=new Date(Date.now()-30*24*60*60*1e3),i=new Date(Date.now()+30*24*60*60*1e3),a=t.items.filter(o=>{var l,c;const s=new Date(((l=o.start)==null?void 0:l.dateTime)||((c=o.start)==null?void 0:c.date)||"");return s>=r&&s<=i});console.log(`📊 Filtered to ${a.length} relevant events (within 30 days)`);for(const o of a)console.log(`🔄 Processing event: ${o.summary} (${o.id})`),await this.processGoogleCalendarEvent(o);await this.updateSyncState({nextSyncToken:t.nextSyncToken,lastFullSync:new Date,lastIncrementalSync:new Date,webhookTriggeredSync:!1}),console.log("✅ Full sync completed successfully!"),console.log(`📊 Events processed: ${a.length} (${t.items.length} total retrieved)`),console.log("🎯 Fresh sync token established for incremental syncs"),t.nextSyncToken?console.log("🔄 Sync token available:",t.nextSyncToken.substring(0,20)+"..."):console.warn("⚠️ WARNING: No sync token received from full sync!")}catch(t){console.error("❌ Full sync failed:",t);try{await this.updateSyncState({webhookTriggeredSync:!1}),console.log("🔄 Webhook flag reset after full sync failure")}catch(r){console.error("❌ Failed to reset webhook flag:",r)}throw t}finally{this.syncInProgress=!1,console.log("🔓 Full sync lock released")}}}async syncTasksToGoogleCalendar(){console.log("🔄 Starting sync tasks to Google Calendar...");try{const e=zt(qt(Qe,"tasks"),gt("userId","==",this.userId),gt("scheduledDate","!=",null)),r=(await kn(e)).docs.map(u=>({id:u.id,...u.data()})),i=zt(qt(Qe,"projects"),gt("userId","==",this.userId)),o=(await kn(i)).docs.reduce((u,d)=>(u[d.id]={id:d.id,...d.data()},u),{});console.log(`📋 Found ${r.length} scheduled tasks to sync`);let s=0,l=0,c=0;for(const u of r)try{const d=u.projectId?o[u.projectId]:null;if(u.syncStatus==="pending"){console.log(`⏭️ Skipping task ${u.title} - sync already in progress`);continue}if(u.googleCalendarEventId)try{await Ta.updateEvent(u.googleCalendarEventId,u,d),c++,console.log(`✅ Updated Google Calendar event for task: ${u.title}`)}catch(h){console.warn("⚠️ Failed to update event, creating new one:",h);const f=await Ta.createEvent(u,d);await fa(Zt(Qe,"tasks",u.id),{googleCalendarEventId:f,syncStatus:"synced",lastSyncedAt:new Date}),l++,console.log(`✅ Created new Google Calendar event for task: ${u.title}`)}else{const h=u.createdAt instanceof Date?u.createdAt:new Date(u.createdAt);if(Date.now()-h.getTime()<5e3){console.log(`⏭️ Skipping recently created task ${u.title} - may be handled by auto-sync`);continue}const m=await Ta.createEvent(u,d);await fa(Zt(Qe,"tasks",u.id),{googleCalendarEventId:m,syncStatus:"synced",lastSyncedAt:new Date}),l++,console.log(`✅ Created Google Calendar event for task: ${u.title}`)}s++,await this.logSyncOperation({userId:this.userId,operation:u.googleCalendarEventId?"update":"create",direction:"to_google",taskId:u.id,googleEventId:u.googleCalendarEventId,status:"success"})}catch(d){console.error(`❌ Failed to sync task ${u.title} to Google Calendar:`,d),await this.logSyncOperation({userId:this.userId,operation:u.googleCalendarEventId?"update":"create",direction:"to_google",taskId:u.id,googleEventId:u.googleCalendarEventId,status:"error",error:d instanceof Error?d.message:String(d)})}console.log(`🔄 Sync to Google Calendar completed: ${s} tasks processed (${l} created, ${c} updated)`)}catch(e){throw console.error("❌ Error syncing tasks to Google Calendar:",e),e}}async processGoogleCalendarEvent(e){if(console.log("🔍 PROCESSING GOOGLE CALENDAR EVENT:",{id:e.id,summary:e.summary,status:e.status,created:e.created,updated:e.updated,isOurEvent:Ta.isOurEvent(e),hasExtendedProperties:!!e.extendedProperties,start:e.start,end:e.end}),Ta.isOurEvent(e)){console.log("📱 This is OUR event (created by app) - processing..."),await this.processAppCreatedEvent(e);return}console.log("🌍 This is EXTERNAL event (created outside app) - checking import..."),this.shouldImportExternalEvent(e)?(console.log("✅ Event passed import filter - importing as task..."),await this.processExternalEvent(e)):console.log("❌ Event filtered out - not importing")}async processAppCreatedEvent(e){const t=Ta.getTaskIdFromEvent(e);if(t)try{const r=await Pc(Zt(Qe,"tasks",t));if(e.status==="cancelled"){r.exists()&&await this.handleEventDeleted(t,e);return}if(!r.exists()){await this.createTaskFromGoogleEvent(e);return}const i=r.data(),a=new Date(e.updated||Date.now()),o=this.toDate(i.updatedAt);if(this.isConflict(a,o)){await this.handleConflict(i,e);return}await this.updateTaskFromGoogleEvent(i,e)}catch(r){console.error("Error processing app-created Google Calendar event:",r),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:t,googleEventId:e.id,status:"error",error:r.message})}}async processExternalEvent(e){try{const t=zt(qt(Qe,"tasks"),gt("userId","==",this.userId),gt("googleCalendarEventId","==",e.id)),r=await kn(t);if(e.status==="cancelled"){if(!r.empty){const i=r.docs[0];await TL(i.ref),console.log(`🗑️ Deleted imported task for cancelled external event: ${e.id}`)}return}if(r.empty)await this.createTaskFromExternalEvent(e);else{const i=r.docs[0],a=i.data(),o=new Date(e.updated||Date.now()),s=this.toDate(a.updatedAt);o>s&&await this.updateImportedTaskFromEvent(i.id,e)}}catch(t){console.error("Error processing external Google Calendar event:",t),await this.logSyncOperation({userId:this.userId,operation:"import",direction:"from_google",googleEventId:e.id,status:"error",error:t.message})}}async handleEventDeleted(e,t){try{await fa(Zt(Qe,"tasks",e),{googleCalendarEventId:null,syncStatus:"disabled",updatedAt:new Date}),await this.logSyncOperation({userId:this.userId,operation:"delete",direction:"from_google",taskId:e,googleEventId:t.id,status:"success"})}catch(r){throw console.error("Error handling event deletion:",r),r}}async createTaskFromGoogleEvent(e){const t=Ta.googleEventToTask(e),r={id:Zt(qt(Qe,"tasks")).id,userId:this.userId,projectId:"default",completed:!1,status:"todo",timeSpent:0,timeEstimated:0,order:0,createdAt:new Date,updatedAt:new Date,...t};await Is(Zt(Qe,"tasks",r.id),r),await this.logSyncOperation({userId:this.userId,operation:"create",direction:"from_google",taskId:r.id,googleEventId:e.id,status:"success"})}async updateTaskFromGoogleEvent(e,t){if(!e||!e.id)throw new Error("Invalid task object - missing id");if(!t||!t.id)throw new Error("Invalid event object - missing id");try{const r=Ta.googleEventToTask(t),i=Object.fromEntries(Object.entries(r).filter(([a,o])=>o!==void 0));if(Object.keys(i).length===0){console.warn("No valid updates extracted from Google event:",t.id);return}await fa(Zt(Qe,"tasks",e.id),{...i,updatedAt:new Date})}catch(r){throw console.error("Error converting Google event to task updates:",r),new Error(`Failed to process event ${t.id}: ${r.message}`)}await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:e.id,googleEventId:t.id,status:"success"})}async handleConflict(e,t){const r=new Date(t.updated||Date.now()),i=this.toDate(e.updatedAt);if(r>i)await this.updateTaskFromGoogleEvent(e,t),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:e.id,googleEventId:t.id,status:"conflict",conflictResolution:"last_modified_wins"});else{const a=await this.getProjectById(e.projectId);a&&(await Ta.updateEvent(t.id,e,a),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"to_google",taskId:e.id,googleEventId:t.id,status:"conflict",conflictResolution:"last_modified_wins"}))}}isConflict(e,t){const r=this.toDate(e).getTime(),i=this.toDate(t).getTime();return Math.abs(r-i)<6e4}async updateTaskSyncStatus(e,t){const r=Object.fromEntries(Object.entries(t).filter(([i,a])=>a!==void 0));await fa(Zt(Qe,"tasks",e),{...r,updatedAt:new Date})}async getProjectById(e){try{const t=await Pc(Zt(Qe,"projects",e));return t.exists()?t.data():null}catch(t){return console.error("Error getting project:",t),null}}async getSyncLogs(e=50){try{const t=zt(qt(Qe,"syncLogs"),gt("userId","==",this.userId),ta("timestamp","desc"));return(await kn(t)).docs.map(i=>({id:i.id,...i.data()}))}catch(t){return console.error("Error getting sync logs:",t),[]}}async toggleSync(e){await this.updateSyncState({isEnabled:e}),console.log(`🔄 Sync ${e?"enabled":"disabled"} for user:`,this.userId)}async getSyncStatus(){const e=await this.getSyncState(),t=zt(qt(Qe,"tasks"),gt("userId","==",this.userId),gt("scheduledDate","!=",null)),i=(await kn(t)).docs.map(s=>s.data()),a=i.filter(s=>s.syncStatus==="pending").length,o=i.filter(s=>s.syncStatus==="error").length;return{isEnabled:(e==null?void 0:e.isEnabled)||!1,lastSync:(e==null?void 0:e.lastIncrementalSync)||new Date(0),pendingTasks:a,errorTasks:o}}shouldImportExternalEvent(e){var r,i,a,o,s,l;console.log("🔍 Checking if external event should be imported:",{summary:e.summary,hasStart:!!e.start,hasDateTime:!!((r=e.start)!=null&&r.dateTime),hasDate:!!((i=e.start)!=null&&i.date),status:e.status,isRecurring:!!e.recurringEventId});const t=!!(((a=e.start)!=null&&a.dateTime||(o=e.start)!=null&&o.date)&&((s=e.end)!=null&&s.dateTime||(l=e.end)!=null&&l.date)&&e.status==="confirmed"&&!e.recurringEventId&&e.summary&&!this.isWorkHoursOnlyFilter(e));return console.log("🎯 Import decision:",t?"YES - Will import":"NO - Will skip"),t}isWorkHoursOnlyFilter(e){return!1}async createTaskFromExternalEvent(e){var t,r,i;try{console.log("🔥 CREATING TASK FROM EXTERNAL GOOGLE CALENDAR EVENT!"),console.log("📅 Event details:",{summary:e.summary,start:e.start,end:e.end,id:e.id}),await this.ensureImportedProjectExists();let a,o,s,l;if((t=e.start)!=null&&t.dateTime&&((r=e.end)!=null&&r.dateTime))a=e.start.dateTime.split("T")[0],o=e.start.dateTime.split("T")[1].slice(0,5),s=e.end.dateTime.split("T")[1].slice(0,5),l=!0,console.log("⏰ Processing as TIMED event");else if((i=e.start)!=null&&i.date)a=e.start.date,o=null,s=null,l=!1,console.log("📅 Processing as ALL-DAY event");else throw new Error("Event has no valid start time/date");const c={id:Zt(qt(Qe,"tasks")).id,userId:this.userId,projectId:"imported",title:e.summary||"Imported Event",description:e.description||"",scheduledDate:a,scheduledStartTime:o,scheduledEndTime:s,includeTime:l,googleCalendarEventId:e.id,syncStatus:"synced",status:"todo",completed:!1,isImported:!0,importedFrom:"google_calendar",createdAt:new Date,updatedAt:new Date,timeSpent:0,timeEstimated:0,order:0};await Is(Zt(Qe,"tasks",c.id),c),console.log(`✅ Created task from external Google Calendar event: ${c.id}`),await this.logSyncOperation({userId:this.userId,operation:"create",direction:"from_google",taskId:c.id,googleEventId:e.id,status:"success"})}catch(a){throw console.error("Error creating task from external event:",a),a}}async updateImportedTaskFromEvent(e,t){var r,i,a;try{console.log("🔄 UPDATING IMPORTED TASK FROM EXTERNAL EVENT CHANGE!"),console.log("📅 Event details:",{summary:t.summary,start:t.start,end:t.end,id:t.id,taskId:e});let o,s,l,c;if((r=t.start)!=null&&r.dateTime&&((i=t.end)!=null&&i.dateTime))o=t.start.dateTime.split("T")[0],s=t.start.dateTime.split("T")[1].slice(0,5),l=t.end.dateTime.split("T")[1].slice(0,5),c=!0,console.log("⏰ Updating as TIMED event");else if((a=t.start)!=null&&a.date)o=t.start.date,s=null,l=null,c=!1,console.log("📅 Updating as ALL-DAY event");else throw new Error("Event has no valid start time/date");const u={title:t.summary||"Imported Event",description:t.description||"",scheduledDate:o,scheduledStartTime:s,scheduledEndTime:l,includeTime:c,updatedAt:new Date};await fa(Zt(Qe,"tasks",e),u),console.log(`🔄 Updated imported task from external event: ${e}`),await this.logSyncOperation({userId:this.userId,operation:"update",direction:"from_google",taskId:e,googleEventId:t.id,status:"success"})}catch(o){throw console.error("Error updating imported task from event:",o),o}}async ensureImportedProjectExists(){try{const e=Zt(Qe,"projects","imported");if(!(await Pc(e)).exists()){const r={id:"imported",name:"Imported Events",description:"Events imported from Google Calendar",color:"#94A3B8",userId:this.userId,isDefault:!1,order:999,createdAt:new Date,updatedAt:new Date};await Is(e,r),console.log('✅ Created "Imported Events" project')}}catch(e){console.error("Error ensuring imported project exists:",e)}}getWebhookBaseUrl(){return"https://make10000hours-api.web.app/calendarWebhook"}async setupWebhook(){try{console.log("🔗 Setting up Google Calendar webhook...");const e=`make10000hours_${this.userId}_${Date.now()}`,t=this.getWebhookBaseUrl();console.log("Webhook setup:",{channelId:e,webhookUrl:t});const r=await Ta.watchEvents(e,t);return await this.updateSyncState({webhookChannelId:r.channelId,webhookResourceId:r.resourceId,webhookExpirationTime:new Date(r.expiration)}),console.log("✅ Webhook setup successful:",r),r}catch(e){throw console.error("❌ Webhook setup failed:",e),await this.startPolling(),e}}async stopWebhook(){try{const e=await this.getSyncState();if(!(e!=null&&e.webhookChannelId)||!(e!=null&&e.webhookResourceId)){console.log("No active webhook to stop");return}console.log("🛑 Stopping webhook:",e.webhookChannelId),await Ta.stopChannel(e.webhookChannelId,e.webhookResourceId),await this.updateSyncState({webhookChannelId:null,webhookResourceId:null,webhookExpirationTime:null}),console.log("✅ Webhook stopped successfully")}catch(e){console.error("Error stopping webhook:",e)}}async checkWebhookRenewal(){try{const e=await this.getSyncState();if(!(e!=null&&e.webhookExpirationTime)||!(e!=null&&e.isEnabled))return;const t=this.toDate(e.webhookExpirationTime),r=new Date;(t.getTime()-r.getTime())/(1e3*60*60)<24&&(console.log("🔄 Renewing webhook before expiration"),await this.stopWebhook(),await this.setupWebhook())}catch(e){console.error("Error checking webhook renewal:",e)}}async startPolling(){this.stopPolling(),console.log("📊 Starting polling fallback (5-minute intervals)"),this.pollingInterval=setInterval(async()=>{try{const e=await this.getSyncState();if(!(e!=null&&e.isEnabled)){this.stopPolling();return}await this.performIncrementalSync()}catch(e){console.error("Polling sync error:",e)}},5*60*1e3)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null,console.log("📊 Polling stopped"))}async checkWebhookTriggeredSync(){try{const e=await this.getSyncState();e!=null&&e.webhookTriggeredSync&&(console.log("🔔 Webhook-triggered sync detected"),await this.updateSyncState({webhookTriggeredSync:!1}),await this.performIncrementalSync())}catch(e){console.error("Error checking webhook-triggered sync:",e)}}async getWebhookStatus(){try{const e=await this.getSyncState(),t=!!(e!=null&&e.webhookChannelId&&(e!=null&&e.webhookResourceId));if(!t)return{isActive:!1};const r=e.webhookExpirationTime?this.toDate(e.webhookExpirationTime):void 0;let i="";if(r){const a=(r.getTime()-Date.now())/36e5;a>24?i=`${Math.floor(a/24)} days`:i=`${Math.floor(a)} hours`}return{isActive:t,channelId:e.webhookChannelId,expirationTime:r,timeUntilExpiration:i}}catch(e){return console.error("Error getting webhook status:",e),{isActive:!1}}}async resetWebhookFlag(){try{await fa(Zt(Qe,"syncStates",this.userId),{webhookTriggeredSync:!1,updatedAt:new Date}),console.log("🔄 Webhook flag reset for user:",this.userId)}catch(e){throw console.error("Error resetting webhook flag:",e),e}}}const qd=n=>new jje(n),iT=uh((n,e)=>({syncEnabled:!1,syncInProgress:!1,lastSyncTime:null,syncError:null,pendingTasks:new Set,errorTasks:new Set,webhookMonitoringInterval:null,syncStateListener:null,getSyncManager:()=>{var r;const t=Ht.getState();if(!t.isInitialized||!t.user)return console.warn("⚠️ Cannot get sync manager - user not properly authenticated",{isInitialized:t.isInitialized,hasUser:!!t.user,userId:(r=t.user)==null?void 0:r.uid}),null;try{return qd(t.user.uid)}catch(i){return console.error("❌ Failed to create sync manager:",i),null}},initializeSync:async()=>{try{const t=e().getSyncManager();if(!t)return;await t.initializeSync();const r=await t.getSyncStatus();n({syncEnabled:r.isEnabled,lastSyncTime:r.lastSync,pendingTasks:new Set,errorTasks:new Set})}catch(t){console.error("Error initializing sync:",t),n({syncError:t.message})}},enableSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.toggleSync(!0),n({syncEnabled:!0,syncInProgress:!1,lastSyncTime:new Date})}catch(t){throw console.error("Error enabling sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},disableSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.toggleSync(!1),n({syncEnabled:!1,syncInProgress:!1,pendingTasks:new Set,errorTasks:new Set})}catch(t){throw console.error("Error disabling sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},syncTask:async t=>{const{syncEnabled:r,pendingTasks:i,errorTasks:a}=e();if(!r){console.log("🔄 Sync not enabled, skipping task sync");return}try{const{user:o}=Ht.getState();if(!o)throw new Error("Firebase user undefined - user not authenticated");console.log(`🔄 Syncing task ${t} for user ${o.uid}`);const s=new Set(i);s.add(t);const l=new Set(a);l.delete(t),n({pendingTasks:s,errorTasks:l});const c=e().getSyncManager();if(!c)throw new Error("Sync manager not available - user may not be authenticated");const{tasks:u,projects:d}=Vt.getState(),h=u.find(v=>v.id===t);if(!h)throw new Error(`Task with ID ${t} not found`);let f=h.projectId?d.find(v=>v.id===h.projectId):null;f||(f={id:"no-project",name:"No Project",userId:o.uid}),console.log(`📋 Task found: ${h.title}, Project: ${f.name}, Scheduled: ${h.scheduledDate}`),h.scheduledDate?(await c.syncTaskToGoogle(h,f),console.log(`✅ Successfully synced task ${t} to Google Calendar`)):console.log(`⏭️ Task ${t} has no scheduled date, skipping sync`);const m=new Set(i);m.delete(t),n({pendingTasks:m,lastSyncTime:new Date})}catch(o){console.error("Error syncing task:",o);const s=new Set(i);s.delete(t);const l=new Set(a);l.add(t),n({pendingTasks:s,errorTasks:l,syncError:o.message})}},syncTaskDeletion:async t=>{const{syncEnabled:r}=e();if(r)try{const i=e().getSyncManager();if(!i)throw new Error("Sync manager not available");const{tasks:a}=Vt.getState(),o=a.find(s=>s.id===t);o&&o.googleCalendarEventId&&await i.deleteTaskFromGoogle(o),n({lastSyncTime:new Date})}catch(i){console.error("Error syncing task deletion:",i),n({syncError:i.message})}},performManualSync:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.performFullSync(),n({syncInProgress:!1,lastSyncTime:new Date})}catch(t){throw console.error("Error performing manual sync:",t),n({syncError:t.message,syncInProgress:!1}),t}},clearSyncError:()=>{n({syncError:null})},setupWebhook:async()=>{try{n({syncInProgress:!0,syncError:null});const t=e().getSyncManager();if(!t)throw new Error("Sync manager not available");await t.setupWebhook(),n({syncInProgress:!1,lastSyncTime:new Date})}catch(t){console.error("Error setting up webhook:",t),n({syncError:t.message,syncInProgress:!1})}},checkWebhookStatus:async()=>{try{const t=e().getSyncManager();return t?await t.getWebhookStatus():{isActive:!1}}catch(t){return console.error("Error checking webhook status:",t),{isActive:!1}}},startWebhookMonitoring:()=>{const t=e();t.webhookMonitoringInterval&&clearInterval(t.webhookMonitoringInterval),console.log("🔔 Starting webhook monitoring"),t.startSyncStateListener();const r=setInterval(async()=>{try{const i=t.getSyncManager();if(!i)return;await i.checkWebhookRenewal()}catch(i){console.error("Webhook monitoring error:",i)}},12e4);n({webhookMonitoringInterval:r})},stopWebhookMonitoring:()=>{const t=e(),{webhookMonitoringInterval:r}=t;r&&(clearInterval(r),n({webhookMonitoringInterval:null})),t.stopSyncStateListener(),console.log("🔔 Webhook monitoring stopped")},startSyncStateListener:()=>{const t=e(),r=Ht.getState();if(!r.isInitialized){console.log("⏳ User store not initialized, waiting for authentication...");const a=Ht.subscribe(o=>{o.isInitialized&&o.user&&(a(),console.log("✅ User authenticated, starting sync state listener..."),t.startSyncStateListener())});return}const{user:i}=r;if(!(i!=null&&i.uid)){console.warn("⚠️ Cannot start sync state listener - no user authenticated");return}t.syncStateListener&&t.syncStateListener(),console.log("🔄 Starting real-time sync state listener for user:",i.uid);try{const a=Zt(Qe,"syncStates",i.uid),o=cg(a,async s=>{if(console.log("🔄 Real-time sync state listener triggered:",{exists:s.exists(),userId:i.uid,timestamp:new Date().toISOString()}),!s.exists()){console.warn("⚠️ Sync state document does not exist for user:",i.uid);return}const l=s.data();if(console.log("📄 Sync state data received:",{webhookTriggeredSync:l==null?void 0:l.webhookTriggeredSync,lastWebhookNotification:l==null?void 0:l.lastWebhookNotification,isEnabled:l==null?void 0:l.isEnabled}),(l==null?void 0:l.webhookTriggeredSync)===!0){console.log("🚨 WEBHOOK-TRIGGERED SYNC DETECTED!"),console.log("📡 Real-time listener is now triggering incremental sync...");try{const c=t.getSyncManager();c?(console.log("🔄 STARTING INCREMENTAL SYNC FROM WEBHOOK..."),console.log("⏰ Sync timestamp:",new Date().toISOString()),await c.performIncrementalSync(),console.log("🎉 WEBHOOK-TRIGGERED SYNC COMPLETED SUCCESSFULLY!"),console.log("✅ Real-time webhook sync finished"),await c.resetWebhookFlag(),n({lastSyncTime:new Date})):console.error("❌ Sync manager not available")}catch(c){console.error("❌ Real-time webhook sync failed:",c),n({syncError:null})}}},s=>{console.error("❌ Sync state listener error:",s),n({syncError:"Real-time sync monitoring failed"})});n({syncStateListener:o}),console.log("✅ Real-time sync state listener started")}catch(a){console.error("❌ Failed to start sync state listener:",a),n({syncError:"Failed to start real-time sync monitoring"})}},stopSyncStateListener:()=>{const{syncStateListener:t}=e();t&&(t(),n({syncStateListener:null}),console.log("🔄 Real-time sync state listener stopped"))}})),aye=()=>{const{syncTask:n,syncTaskDeletion:e}=iT();return{syncTaskAfterUpdate:async i=>{try{await n(i)}catch(a){console.error("Sync failed after task update:",a)}},syncTaskAfterDeletion:async i=>{try{await e(i)}catch(a){console.error("Sync failed after task deletion:",a)}}}},oye=()=>{const n=Vt(),{syncTaskAfterUpdate:e,syncTaskAfterDeletion:t}=aye();return{...n,addTask:async o=>await n.addTask(o),updateTask:async(o,s)=>{await n.updateTask(o,s);const l=s.scheduledDate!==void 0||s.scheduledStartTime!==void 0||s.scheduledEndTime!==void 0||s.includeTime!==void 0,c=s.title!==void 0||s.description!==void 0;if(l||c){const{tasks:u}=n,d=u.find(h=>h.id===o);d&&d.scheduledDate&&await e(o)}},deleteTask:async o=>{await t(o),await n.deleteTask(o)}}},U_=Object.freeze(Object.defineProperty({__proto__:null,useSyncIntegration:aye,useSyncStore:iT,useTaskStoreWithSync:oye},Symbol.toStringTag,{value:"Module"})),Fje=()=>{const{tasks:n,projects:e}=Vt.getState(),{syncEnabled:t,pendingTasks:r,errorTasks:i}=iT.getState(),{user:a}=Ht.getState();console.log("=== SYNC DEBUG INFO ==="),console.log("User:",a==null?void 0:a.uid),console.log("Sync enabled:",t),console.log("Pending tasks:",r.size),console.log("Error tasks:",i.size),console.log("Total tasks:",n.length);const o=n.filter(l=>l.scheduledDate);console.log("Scheduled tasks:",o.length),o.forEach((l,c)=>{const u=e.find(d=>d.id===l.projectId);console.log(`Task ${c+1}:`,{id:l.id,title:l.title,scheduledDate:l.scheduledDate,syncStatus:l.syncStatus,googleCalendarEventId:l.googleCalendarEventId,project:u==null?void 0:u.name,hasValidProject:!!u})});const s=n.filter(l=>!e.find(u=>u.id===l.projectId));s.length>0&&console.warn("Tasks with missing projects:",s.map(l=>({id:l.id,title:l.title,projectId:l.projectId}))),console.log("=== END SYNC DEBUG ===")},$je=async()=>{const{tasks:n}=Vt.getState(),{updateTask:e}=Vt.getState();for(const t of n)if(t.scheduledDate&&!t.syncStatus){console.log(`Fixing sync status for task: ${t.title}`);try{await e(t.id,{syncStatus:"pending"})}catch(r){console.error(`Failed to fix sync status for task ${t.id}:`,r)}}};typeof window<"u"&&(window.debugSyncStatus=Fje,window.fixTaskSyncStatus=$je);const Bje=Y.createContext(void 0);function Uje({children:n}){const[e,t]=Y.useState({color:"Tomato",textColor:"white"}),i={theme:e,changeTheme:a=>{let o;["BlueViolet","CornflowerBlue","SaddleBrown"].includes(a)?o="white":o="black",t({color:a,textColor:o})}};return x.jsx(Bje.Provider,{value:i,children:n})}const Fb=class Fb{constructor(){$t(this,"failureCount",0);$t(this,"lastFailureTime",0);$t(this,"lastResetTime",0);$t(this,"state","CLOSED");$t(this,"FAILURE_THRESHOLD",5);$t(this,"TIMEOUT",6e4);$t(this,"RETRY_TIMEOUT",1e4);$t(this,"MIN_RESET_INTERVAL",3e4);$t(this,"lastLogTime",0);$t(this,"LOG_THROTTLE",5e3)}static getInstance(){return Fb.instance||(Fb.instance=new Fb),Fb.instance}throttledLog(e){const t=Date.now();t-this.lastLogTime>=this.LOG_THROTTLE&&(console.log(e),this.lastLogTime=t)}reset(){const e=Date.now();e-this.lastResetTime<this.MIN_RESET_INTERVAL&&this.state==="CLOSED"||(this.failureCount=0,this.state="CLOSED",this.lastFailureTime=0,this.lastResetTime=e,this.throttledLog("🔄 Extension circuit breaker RESET"))}canExecute(){const e=Date.now();return this.state==="OPEN"?e-this.lastFailureTime>=this.TIMEOUT?(this.state="HALF_OPEN",!0):!1:!0}onSuccess(){this.failureCount=0,this.state="CLOSED"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.FAILURE_THRESHOLD&&(this.state="OPEN",this.throttledLog(`🚫 Extension circuit breaker OPEN - preventing further calls for ${this.TIMEOUT/1e3}s`))}isOpen(){return this.state==="OPEN"}getStatus(){const e=Date.now(),t=this.state==="OPEN"?Math.max(0,this.TIMEOUT-(e-this.lastFailureTime)):0;return{state:this.state,failureCount:this.failureCount,timeUntilRetry:t}}};$t(Fb,"instance");let QV=Fb;class Rt{static isExtensionInstalled(){return typeof window<"u"&&typeof window.postMessage=="function"}static isCriticalOperation(e){return["ENABLE_FOCUS_MODE","DISABLE_FOCUS_MODE","BLOCK_SITE","UNBLOCK_SITE","GET_FOCUS_STATE","ADD_BLOCKED_SITE","REMOVE_BLOCKED_SITE","BLOCK_MULTIPLE_SITES","GET_TODAY_DEEP_FOCUS_SESSIONS","GET_DEEP_FOCUS_SESSIONS_DATE_RANGE","GET_ACTIVE_DEEP_FOCUS_SESSION","GET_ALL_DEEP_FOCUS_SESSIONS"].includes(e.type)}static async sendMessage(e){if(!this.isExtensionInstalled())throw new Error("Extension not installed");const t=Date.now(),r=e.type||"unknown",i=this.lastCallTimes.get(r)||0,a=this.isCriticalOperation(e)?this.CRITICAL_DEBOUNCE_MS:this.CALL_DEBOUNCE_MS;if(t-i<a)throw new Error(`Extension call debounced - ${r} too frequent`);if(this.lastCallTimes.set(r,t),!this.circuitBreaker.canExecute())throw new Error("Extension communication temporarily disabled - circuit breaker open");try{const o=await this.sendMessageViaContentScript(e);return this.circuitBreaker.onSuccess(),o}catch(o){throw this.circuitBreaker.onFailure(),this.circuitBreaker.isOpen()||console.error("Extension communication failed:",o),o}}static async sendMessageViaContentScript(e){return new Promise((t,r)=>{const i=Math.random().toString(36),a=setTimeout(()=>{window.removeEventListener("message",o),r(new Error("Extension communication timeout"))},5e3),o=s=>{var l;((l=s.data)==null?void 0:l.extensionResponseId)===i&&(clearTimeout(a),window.removeEventListener("message",o),t(s.data.response))};window.addEventListener("message",o),window.postMessage({type:"EXTENSION_REQUEST",messageId:i,payload:e},"*")})}static async getTodayStats(){return await this.sendMessage({type:"GET_TODAY_STATS"})}static async getTimeDataRange(e,t){return await this.sendMessage({type:"GET_TIME_DATA_RANGE",payload:{startDate:e,endDate:t}})}static async getSettings(){return await this.sendMessage({type:"GET_SETTINGS"})}static async toggleFocusMode(){return(await this.sendMessage({type:"TOGGLE_FOCUS_MODE"})).focusMode}static async enableFocusMode(){const e=await this.sendMessage({type:"ENABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to enable focus mode")}static async disableFocusMode(){const e=await this.sendMessage({type:"DISABLE_FOCUS_MODE"});if(!(e!=null&&e.success))throw new Error((e==null?void 0:e.error)||"Failed to disable focus mode")}static async getFocusStatus(){const e=await this.sendMessage({type:"GET_FOCUS_STATE"});if(!(e!=null&&e.success)&&(e!=null&&e.error))throw new Error(e.error);return e.data||e}static async blockSite(e){await this.sendMessage({type:"ADD_BLOCKED_SITE",payload:{domain:e}})}static async blockMultipleSites(e){var t,r;if(!e||e.length===0)return{success:!0,results:[],summary:{successCount:0,failureCount:0,total:0}};try{const i=await this.sendMessage({type:"BLOCK_MULTIPLE_SITES",payload:{domains:e}});return i&&i.success&&!i.summary&&(i.summary={successCount:((t=i.results)==null?void 0:t.filter(a=>a.success).length)||0,failureCount:((r=i.results)==null?void 0:r.filter(a=>!a.success).length)||0,total:e.length}),i}catch(i){console.warn("⚠️ Batch blocking failed, falling back to individual blocking:",i);const a=[];let o=0,s=0;for(const l of e)try{await this.blockSite(l),a.push({domain:l,success:!0}),o++}catch(c){a.push({domain:l,success:!1,error:c instanceof Error?c.message:String(c)}),s++}return{success:o>0,results:a,summary:{successCount:o,failureCount:s,total:e.length}}}}static async unblockSite(e){await this.sendMessage({type:"REMOVE_BLOCKED_SITE",payload:{domain:e}})}static async getAnalyticsData(e="week"){return await this.sendMessage({type:"GET_ANALYTICS_DATA",payload:{period:e}})}static mapExtensionDataToWebApp(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:Math.round(i.timeSpent/e.totalTime*100)}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static mapArrSiteUsage(e){const t={};let r=0;const i={onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},a=[];e.forEach(s=>{Object.entries(s.sites).forEach(([l,c])=>{t[l]||(t[l]={id:l,name:this.getDomainDisplayName(l),url:l,icon:this.getDomainIcon(l),backgroundColor:this.getDomainColor(l),timeSpent:0,sessions:0,percentage:0}),t[l].timeSpent+=Math.round(c.timeSpent/(1e3*60)),t[l].sessions+=c.visits,r+=c.timeSpent}),i.onScreenTime+=Math.round(s.totalTime/(1e3*60)),a.push({date:s.date,onScreenTime:Math.round(s.totalTime/(1e3*60)),workingTime:0,deepFocusTime:0})});const o=Object.values(t).map(s=>{const l=r>0?Math.round(s.timeSpent/r*100):0;return{...s,percentage:l}}).sort((s,l)=>l.timeSpent-s.timeSpent);return{timeMetrics:i,dailyUsage:a,siteUsage:o}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}static async syncBlockedSitesFromWebApp(e){try{return await this.sendMessage({type:"SYNC_BLOCKED_SITES_FROM_WEBAPP",payload:{sites:e}})}catch(t){return console.error("Failed to sync blocked sites from web app:",t),{success:!1,error:t instanceof Error?t.message:String(t)}}}static async updateExtensionSettings(e){try{return await this.sendMessage({type:"UPDATE_SETTINGS_FROM_WEBAPP",payload:e})}catch(t){return console.error("Failed to update extension settings:",t),{success:!1,error:t instanceof Error?t.message:String(t)}}}static async forceSyncFromWebApp(){try{return await this.sendMessage({type:"FORCE_SYNC_FROM_WEBAPP"})}catch(e){return console.error("Failed to force sync from web app:",e),{success:!1,error:e instanceof Error?e.message:String(e)}}}static resetCircuitBreaker(){const e=this.circuitBreaker.getStatus();(e.state==="OPEN"||e.failureCount>0)&&this.circuitBreaker.reset()}static getCircuitBreakerStatus(){return this.circuitBreaker.getStatus()}static async testConnection(){try{const e=await this.sendMessage({type:"GET_TODAY_STATS"});return e&&e.success!==!1}catch{return!1}}static async getDeepFocusSessionsForDateRange(e,t){return await this.sendMessage({type:"GET_DEEP_FOCUS_SESSIONS_DATE_RANGE",payload:{startDate:e,endDate:t}})}static async getTodayDeepFocusSessions(){return await this.sendMessage({type:"GET_TODAY_DEEP_FOCUS_SESSIONS"})}static async getActiveDeepFocusSession(){return await this.sendMessage({type:"GET_ACTIVE_DEEP_FOCUS_SESSION"})}static async getAllDeepFocusSessions(){return await this.sendMessage({type:"GET_ALL_DEEP_FOCUS_SESSIONS"})}}$t(Rt,"extensionId",null),$t(Rt,"circuitBreaker",QV.getInstance()),$t(Rt,"lastCallTimes",new Map),$t(Rt,"CALL_DEBOUNCE_MS",500),$t(Rt,"CRITICAL_DEBOUNCE_MS",200);const Vje=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"}));class sye{constructor(){$t(this,"results",[])}log(e,t,r,i,a){const o={test:e,status:t,message:r,data:i,error:a};this.results.push(o),console.log(`${t==="PASS"?"✅":t==="FAIL"?"❌":"⚠️"} ${e}: ${r}`),i&&console.log("  Data:",i),a&&console.log("  Error:",a)}async testExtensionDetection(){var e,t,r;console.log(`
🔍 === TEST 1: Extension Detection ===`);try{const i=typeof window.chrome<"u",a=!!((e=window.chrome)!=null&&e.runtime),o=!!((r=(t=window.chrome)==null?void 0:t.runtime)!=null&&r.id);this.log("Extension Chrome API",i?"PASS":"FAIL",i?"Chrome API available":"Chrome API not available"),this.log("Extension Runtime API",a?"PASS":"FAIL",a?"Runtime API available":"Runtime API not available"),this.log("Extension ID",o?"PASS":"FAIL",o?`Extension ID: ${window.chrome.runtime.id}`:"No extension ID");const s=Rt.isExtensionInstalled();this.log("Extension Installation Check",s?"PASS":"FAIL",s?"Extension detected by service":"Extension not detected by service")}catch(i){this.log("Extension Detection","FAIL","Exception during detection",void 0,i)}}async testExtensionConnection(){console.log(`
🔍 === TEST 2: Extension Connection ===`);try{const e=await Rt.testConnection();this.log("Extension Connection",e?"PASS":"FAIL",e?"Extension responds to connection test":"Extension does not respond");try{const r=await Rt.sendMessage({type:"PING"});this.log("PING Message","PASS","PING message successful",r)}catch(r){this.log("PING Message","FAIL","PING message failed",void 0,r)}const t=Rt.getCircuitBreakerStatus();this.log("Circuit Breaker Status","PASS","Circuit breaker info retrieved",t)}catch(e){this.log("Extension Connection","FAIL","Exception during connection test",void 0,e)}}async testContentScriptCommunication(){console.log(`
🔍 === TEST 3: Content Script Communication ===`);try{const e={type:"EXTENSION_REQUEST",messageId:"debug-test-"+Date.now(),payload:{type:"PING"}};let t=!1;const r=i=>{var a;((a=i.data)==null?void 0:a.extensionResponseId)===e.messageId&&(t=!0,this.log("Content Script Response","PASS","Content script forwarded message",i.data),window.removeEventListener("message",r))};window.addEventListener("message",r),window.postMessage(e,"*"),await new Promise(i=>setTimeout(i,2e3)),t||this.log("Content Script Communication","FAIL","No response from content script after 2 seconds")}catch(e){this.log("Content Script Communication","FAIL","Exception during content script test",void 0,e)}}async testDeepFocusMessageTypes(){console.log(`
🔍 === TEST 4: Deep Focus Message Types ===`);const e=["GET_TODAY_DEEP_FOCUS_SESSIONS","GET_DEEP_FOCUS_SESSIONS_DATE_RANGE","GET_ACTIVE_DEEP_FOCUS_SESSION","GET_ALL_DEEP_FOCUS_SESSIONS"];for(const t of e){try{const r=await Rt.sendMessage({type:t});this.log(`Message Type: ${t}`,"PASS","Message recognized by extension",r)}catch(r){this.log(`Message Type: ${t}`,"FAIL","Message not recognized",void 0,r)}await new Promise(r=>setTimeout(r,300))}}async testExtensionStorage(){console.log(`
🔍 === TEST 5: Extension Storage ===`);try{const e=await Rt.sendMessage({type:"GET_TODAY_STATS"});e!=null&&e.success?this.log("Extension Storage Access","PASS","Extension can access storage",e):this.log("Extension Storage Access","FAIL","Extension cannot access storage",e);try{const t=await Rt.getTodayDeepFocusSessions();this.log("Deep Focus Storage","PASS","Deep Focus sessions retrieved",t)}catch(t){this.log("Deep Focus Storage","FAIL","Cannot retrieve Deep Focus sessions",void 0,t)}}catch(e){this.log("Extension Storage","FAIL","Exception during storage test",void 0,e)}}async testBackgroundScriptVersion(){console.log(`
🔍 === TEST 6: Background Script Version ===`);try{const e=await Rt.sendMessage({type:"DEBUG_VERSION_CHECK",payload:{timestamp:Date.now()}});this.log("Background Script Version","WARN","Debug message sent - check extension console for debug logs")}catch(e){(e instanceof Error?e.message:String(e)).includes("Unknown message type")?this.log("Background Script Version","WARN","Extension is running (gets unknown message type), but may not have latest handlers"):this.log("Background Script Version","FAIL","Unexpected error from background script",void 0,e)}console.log("📋 IMPORTANT: Check the Chrome extension console for these debug messages:"),console.log('  - "🔍 DEBUG: Extension version with Deep Focus handlers"'),console.log('  - "📋 EXTENSION VERSION CHECK: Deep Focus handlers should be available"'),console.log("  - If these are missing, the extension is using an old cached version")}async testMessageFlow(){console.log(`
🔍 === TEST 7: Message Flow ===`);try{console.log("Testing message flow step by step...");try{const e=await new Promise((t,r)=>{const i=setTimeout(()=>{r(new Error("Direct message timeout"))},5e3),a="direct-test-"+Date.now(),o=s=>{var l;((l=s.data)==null?void 0:l.extensionResponseId)===a&&(clearTimeout(i),window.removeEventListener("message",o),t(s.data.response))};window.addEventListener("message",o),window.postMessage({type:"EXTENSION_REQUEST",messageId:a,payload:{type:"GET_TODAY_DEEP_FOCUS_SESSIONS"}},"*")});this.log("Direct Message Flow","PASS","Direct message successful",e)}catch(e){this.log("Direct Message Flow","FAIL","Direct message failed",void 0,e)}try{const e=await Rt.getTodayDeepFocusSessions();this.log("Service Wrapper Flow","PASS","Service wrapper successful",e)}catch(e){this.log("Service Wrapper Flow","FAIL","Service wrapper failed",void 0,e)}}catch(e){this.log("Message Flow","FAIL","Exception during message flow test",void 0,e)}}async testExtensionManifest(){console.log(`
🔍 === TEST 8: Extension Manifest ===`);try{const e=window.location.origin;this.log("Current Origin","PASS",`Testing from: ${e}`);const r=["https://app.make10000hours.com","https://www.app.make10000hours.com","http://localhost:3001","http://localhost:3000","http://localhost:3002","http://localhost:3003"].some(i=>e.startsWith(i)||e.match(/^http:\/\/localhost:\d+$/));this.log("Origin Permissions",r?"PASS":"WARN",r?"Origin should be allowed":"Origin may not be in externally_connectable")}catch(e){this.log("Extension Manifest","FAIL","Exception during manifest test",void 0,e)}}async runAllTests(){console.log("🚀 === COMPREHENSIVE EXTENSION DEBUG STARTED ==="),console.log(`This will test all aspects of extension communication...
`),this.results=[],console.log("🔄 Resetting extension communication state..."),Rt.resetCircuitBreaker(),await new Promise(i=>setTimeout(i,1e3)),await this.testExtensionDetection(),await this.testExtensionConnection(),await this.testContentScriptCommunication(),await this.testDeepFocusMessageTypes(),await this.testExtensionStorage(),await this.testBackgroundScriptVersion(),await this.testMessageFlow(),await this.testExtensionManifest(),console.log(`
📊 === DEBUG SUMMARY ===`);const e=this.results.filter(i=>i.status==="PASS").length,t=this.results.filter(i=>i.status==="FAIL").length,r=this.results.filter(i=>i.status==="WARN").length;return console.log(`✅ Passed: ${e}`),console.log(`❌ Failed: ${t}`),console.log(`⚠️ Warnings: ${r}`),console.log(`📋 Total Tests: ${this.results.length}`),t>0&&(console.log(`
❌ CRITICAL FAILURES:`),this.results.filter(i=>i.status==="FAIL").forEach(i=>{console.log(`  - ${i.test}: ${i.message}`)})),console.log(`
💡 NEXT STEPS:`),t===0?console.log("  - All tests passed! Extension should be working correctly."):(console.log("  - Review failed tests above"),console.log("  - Check Chrome extension console for additional logs"),console.log("  - Ensure extension is loaded and up-to-date")),this.results}getResults(){return this.results}}window.debugExtension=async()=>await new sye().runAllTests();var gA={},qZ;function zje(){if(qZ)return gA;qZ=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.parse=o,gA.serialize=c;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,f){const m=new a,v=h.length;if(v<2)return m;const y=(f==null?void 0:f.decode)||u;let w=0;do{const S=h.indexOf("=",w);if(S===-1)break;const T=h.indexOf(";",w),C=T===-1?v:T;if(S>C){w=h.lastIndexOf(";",S-1)+1;continue}const k=s(h,w,S),A=l(h,S,k),D=h.slice(k,A);if(m[D]===void 0){let P=s(h,S+1,C),N=l(h,C,P);const R=y(h.slice(P,N));m[D]=R}w=C+1}while(w<v);return m}function s(h,f,m){do{const v=h.charCodeAt(f);if(v!==32&&v!==9)return f}while(++f<m);return m}function l(h,f,m){for(;f>m;){const v=h.charCodeAt(--f);if(v!==32&&v!==9)return f+1}return m}function c(h,f,m){const v=(m==null?void 0:m.encode)||encodeURIComponent;if(!n.test(h))throw new TypeError(`argument name is invalid: ${h}`);const y=v(f);if(!e.test(y))throw new TypeError(`argument val is invalid: ${f}`);let w=h+"="+y;if(!m)return w;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);w+="; Max-Age="+m.maxAge}if(m.domain){if(!t.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);w+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);w+="; Path="+m.path}if(m.expires){if(!d(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);w+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(w+="; HttpOnly"),m.secure&&(w+="; Secure"),m.partitioned&&(w+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return w}function u(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return i.call(h)==="[object Date]"}return gA}zje();var YZ="popstate";function Hje(n={}){function e(i,a){let{pathname:o="/",search:s="",hash:l=""}=Ww(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),JV("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof a=="string"?a:BC(a))}function r(i,a){sh(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Wje(e,t,r,n)}function ra(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sh(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gje(){return Math.random().toString(36).substring(2,10)}function KZ(n,e){return{usr:n.state,key:n.key,idx:e}}function JV(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ww(e):e,state:t,key:e&&e.key||r||Gje()}}function BC({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ww(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Wje(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){s="POP";let y=u(),w=y==null?null:y-c;c=y,l&&l({action:s,location:v.location,delta:w})}function h(y,w){s="PUSH";let S=JV(v.location,y,w);t&&t(S,y),c=u()+1;let T=KZ(S,c),C=v.createHref(S);try{o.pushState(T,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(C)}a&&l&&l({action:s,location:v.location,delta:1})}function f(y,w){s="REPLACE";let S=JV(v.location,y,w);t&&t(S,y),c=u();let T=KZ(S,c),C=v.createHref(S);o.replaceState(T,"",C),a&&l&&l({action:s,location:v.location,delta:0})}function m(y){return qje(y)}let v={get action(){return s},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(YZ,d),l=y,()=>{i.removeEventListener(YZ,d),l=null}},createHref(y){return e(i,y)},createURL:m,encodeLocation(y){let w=m(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(y){return o.go(y)}};return v}function qje(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ra(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:BC(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function lye(n,e,t="/"){return Yje(n,e,t,!1)}function Yje(n,e,t,r){let i=typeof e=="string"?Ww(e):e,a=kg(i.pathname||"/",t);if(a==null)return null;let o=cye(n);Kje(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=oFe(a);s=iFe(o[l],c,r)}return s}function cye(n,e=[],t=[],r=""){let i=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(ra(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=dg([r,l.relativePath]),u=t.concat(l);a.children&&a.children.length>0&&(ra(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),cye(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:nFe(c,a.index),routesMeta:u})};return n.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))i(a,o);else for(let l of uye(a.path))i(a,o,l)}),e}function uye(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=uye(r.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&s.push(...o),s.map(l=>n.startsWith("/")&&l===""?"/":l)}function Kje(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rFe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Xje=/^:[\w-]+$/,Zje=3,Qje=2,Jje=1,eFe=10,tFe=-2,XZ=n=>n==="*";function nFe(n,e){let t=n.split("/"),r=t.length;return t.some(XZ)&&(r+=tFe),e&&(r+=Qje),t.filter(i=>!XZ(i)).reduce((i,a)=>i+(Xje.test(a)?Zje:a===""?Jje:eFe),r)}function rFe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function iFe(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",o=[];for(let s=0;s<r.length;++s){let l=r[s],c=s===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",d=tO({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=tO({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:dg([a,d.pathname]),pathnameBase:uFe(dg([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=dg([a,d.pathnameBase]))}return o}function tO(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aFe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let m=s[h]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const f=s[h];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:n}}function aFe(n,e=!1,t=!0){sh(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function oFe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sh(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function kg(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function sFe(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ww(n):n;return{pathname:t?t.startsWith("/")?t:lFe(t,e):e,search:dFe(r),hash:hFe(i)}}function lFe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function c5(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cFe(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dye(n){let e=cFe(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hye(n,e,t,r=!1){let i;typeof n=="string"?i=Ww(n):(i={...n},ra(!i.pathname||!i.pathname.includes("?"),c5("?","pathname","search",i)),ra(!i.pathname||!i.pathname.includes("#"),c5("#","pathname","hash",i)),ra(!i.search||!i.search.includes("#"),c5("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,s;if(o==null)s=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let l=sFe(i,s),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var dg=n=>n.join("/").replace(/\/\/+/g,"/"),uFe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),dFe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,hFe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fFe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var fye=["POST","PUT","PATCH","DELETE"];new Set(fye);var pFe=["GET",...fye];new Set(pFe);var aT=Y.createContext(null);aT.displayName="DataRouter";var LL=Y.createContext(null);LL.displayName="DataRouterState";var pye=Y.createContext({isTransitioning:!1});pye.displayName="ViewTransition";var gFe=Y.createContext(new Map);gFe.displayName="Fetchers";var mFe=Y.createContext(null);mFe.displayName="Await";var Vf=Y.createContext(null);Vf.displayName="Navigation";var AI=Y.createContext(null);AI.displayName="Location";var zf=Y.createContext({outlet:null,matches:[],isDataRoute:!1});zf.displayName="Route";var D7=Y.createContext(null);D7.displayName="RouteError";function vFe(n,{relative:e}={}){ra(kI(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Y.useContext(Vf),{hash:i,pathname:a,search:o}=CI(n,{relative:e}),s=a;return t!=="/"&&(s=a==="/"?t:dg([t,a])),r.createHref({pathname:s,search:o,hash:i})}function kI(){return Y.useContext(AI)!=null}function ns(){return ra(kI(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(AI).location}var gye="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mye(n){Y.useContext(Vf).static||Y.useLayoutEffect(n)}function Gg(){let{isDataRoute:n}=Y.useContext(zf);return n?PFe():yFe()}function yFe(){ra(kI(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(aT),{basename:e,navigator:t}=Y.useContext(Vf),{matches:r}=Y.useContext(zf),{pathname:i}=ns(),a=JSON.stringify(dye(r)),o=Y.useRef(!1);return mye(()=>{o.current=!0}),Y.useCallback((l,c={})=>{if(sh(o.current,gye),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=hye(l,JSON.parse(a),i,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:dg([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,a,i,n])}var bFe=Y.createContext(null);function wFe(n){let e=Y.useContext(zf).outlet;return e&&Y.createElement(bFe.Provider,{value:n},e)}function CI(n,{relative:e}={}){let{matches:t}=Y.useContext(zf),{pathname:r}=ns(),i=JSON.stringify(dye(t));return Y.useMemo(()=>hye(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function xFe(n,e){return vye(n,e)}function vye(n,e,t,r){var w;ra(kI(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=Y.useContext(Vf),{matches:a}=Y.useContext(zf),o=a[a.length-1],s=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",u=o&&o.route;{let S=u&&u.path||"";yye(l,!u||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let d=ns(),h;if(e){let S=typeof e=="string"?Ww(e):e;ra(c==="/"||((w=S.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),h=S}else h=d;let f=h.pathname||"/",m=f;if(c!=="/"){let S=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=lye(n,{pathname:m});sh(u||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),sh(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=AFe(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:dg([c,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:dg([c,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,t,r);return e&&y?Y.createElement(AI.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function SFe(){let n=MFe(),e=fFe(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=Y.createElement(Y.Fragment,null,Y.createElement("p",null,"💿 Hey developer 👋"),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:a},"ErrorBoundary")," or"," ",Y.createElement("code",{style:a},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:i},t):null,o)}var _Fe=Y.createElement(SFe,null),TFe=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Y.createElement(zf.Provider,{value:this.props.routeContext},Y.createElement(D7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EFe({routeContext:n,match:e,children:t}){let r=Y.useContext(aT);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(zf.Provider,{value:n},t)}function AFe(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let l=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);ra(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,s=-1;if(t)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=l),c.route.id){let{loaderData:u,errors:d}=t,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((l,c,u)=>{let d,h=!1,f=null,m=null;t&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||_Fe,o&&(s<0&&u===0?(yye("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):s===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,u+1)),y=()=>{let w;return d?w=f:h?w=m:c.route.Component?w=Y.createElement(c.route.Component,null):c.route.element?w=c.route.element:w=l,Y.createElement(EFe,{match:c,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:w})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?Y.createElement(TFe,{location:t.location,revalidation:t.revalidation,component:f,error:d,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}function I7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kFe(n){let e=Y.useContext(aT);return ra(e,I7(n)),e}function CFe(n){let e=Y.useContext(LL);return ra(e,I7(n)),e}function DFe(n){let e=Y.useContext(zf);return ra(e,I7(n)),e}function M7(n){let e=DFe(n),t=e.matches[e.matches.length-1];return ra(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function IFe(){return M7("useRouteId")}function MFe(){var r;let n=Y.useContext(D7),e=CFe("useRouteError"),t=M7("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function PFe(){let{router:n}=kFe("useNavigate"),e=M7("useNavigate"),t=Y.useRef(!1);return mye(()=>{t.current=!0}),Y.useCallback(async(i,a={})=>{sh(t.current,gye),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var ZZ={};function yye(n,e,t){!e&&!ZZ[n]&&(ZZ[n]=!0,sh(!1,t))}Y.memo(NFe);function NFe({routes:n,future:e,state:t}){return vye(n,void 0,t,e)}function bye(n){return wFe(n.context)}function Tu(n){ra(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RFe({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){ra(!kI(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),s=Y.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Ww(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=t,f=Y.useMemo(()=>{let m=kg(l,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:h},navigationType:r}},[o,l,c,u,d,h,r]);return sh(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:Y.createElement(Vf.Provider,{value:s},Y.createElement(AI.Provider,{children:e,value:f}))}function OFe({children:n,location:e}){return xFe(ez(n),e)}function ez(n,e=[]){let t=[];return Y.Children.forEach(n,(r,i)=>{if(!Y.isValidElement(r))return;let a=[...e,i];if(r.type===Y.Fragment){t.push.apply(t,ez(r.props.children,a));return}ra(r.type===Tu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ra(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ez(r.props.children,a)),t.push(o)}),t}var rR="get",iR="application/x-www-form-urlencoded";function jL(n){return n!=null&&typeof n.tagName=="string"}function LFe(n){return jL(n)&&n.tagName.toLowerCase()==="button"}function jFe(n){return jL(n)&&n.tagName.toLowerCase()==="form"}function FFe(n){return jL(n)&&n.tagName.toLowerCase()==="input"}function $Fe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BFe(n,e){return n.button===0&&(!e||e==="_self")&&!$Fe(n)}var gP=null;function UFe(){if(gP===null)try{new FormData(document.createElement("form"),0),gP=!1}catch{gP=!0}return gP}var VFe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function u5(n){return n!=null&&!VFe.has(n)?(sh(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${iR}"`),null):n}function zFe(n,e){let t,r,i,a,o;if(jFe(n)){let s=n.getAttribute("action");r=s?kg(s,e):null,t=n.getAttribute("method")||rR,i=u5(n.getAttribute("enctype"))||iR,a=new FormData(n)}else if(LFe(n)||FFe(n)&&(n.type==="submit"||n.type==="image")){let s=n.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||s.getAttribute("action");if(r=l?kg(l,e):null,t=n.getAttribute("formmethod")||s.getAttribute("method")||rR,i=u5(n.getAttribute("formenctype"))||u5(s.getAttribute("enctype"))||iR,a=new FormData(s,n),!UFe()){let{name:c,type:u,value:d}=n;if(u==="image"){let h=c?`${c}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else c&&a.append(c,d)}}else{if(jL(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=rR,r=null,i=iR,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}function P7(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function HFe(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GFe(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function WFe(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await HFe(a,t);return o.links?o.links():[]}return[]}));return XFe(r.flat(1).filter(GFe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QZ(n,e,t,r,i,a){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,s=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):a==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function qFe(n,e,{includeHydrateFallback:t}={}){return YFe(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function YFe(n){return[...new Set(n)]}function KFe(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function XFe(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(KFe(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ZFe=new Set([100,101,204,205]);function QFe(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&kg(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function wye(){let n=Y.useContext(aT);return P7(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function JFe(){let n=Y.useContext(LL);return P7(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var N7=Y.createContext(void 0);N7.displayName="FrameworkContext";function xye(){let n=Y.useContext(N7);return P7(n,"You must render this element inside a <HydratedRouter> element"),n}function e5e(n,e){let t=Y.useContext(N7),[r,i]=Y.useState(!1),[a,o]=Y.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=w=>{w.forEach(S=>{o(S.isIntersecting)})},y=new IntersectionObserver(v,{threshold:.5});return h.current&&y.observe(h.current),()=>{y.disconnect()}}},[n]),Y.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let f=()=>{i(!0)},m=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,h,{}]:[a,h,{onFocus:mA(s,f),onBlur:mA(l,m),onMouseEnter:mA(c,f),onMouseLeave:mA(u,m),onTouchStart:mA(d,f)}]:[!1,h,{}]}function mA(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function t5e({page:n,...e}){let{router:t}=wye(),r=Y.useMemo(()=>lye(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Y.createElement(r5e,{page:n,matches:r,...e}):null}function n5e(n){let{manifest:e,routeModules:t}=xye(),[r,i]=Y.useState([]);return Y.useEffect(()=>{let a=!1;return WFe(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),r}function r5e({page:n,matches:e,...t}){let r=ns(),{manifest:i,routeModules:a}=xye(),{basename:o}=wye(),{loaderData:s,matches:l}=JFe(),c=Y.useMemo(()=>QZ(n,e,l,i,r,"data"),[n,e,l,i,r]),u=Y.useMemo(()=>QZ(n,e,l,i,r,"assets"),[n,e,l,i,r]),d=Y.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,v=!1;if(e.forEach(w=>{var T;let S=i.routes[w.route.id];!S||!S.hasLoader||(!c.some(C=>C.route.id===w.route.id)&&w.route.id in s&&((T=a[w.route.id])!=null&&T.shouldRevalidate)||S.hasClientLoader?v=!0:m.add(w.route.id))}),m.size===0)return[];let y=QFe(n,o);return v&&m.size>0&&y.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[y.pathname+y.search]},[o,s,r,i,c,e,n,a]),h=Y.useMemo(()=>qFe(u,i),[u,i]),f=n5e(u);return Y.createElement(Y.Fragment,null,d.map(m=>Y.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),h.map(m=>Y.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),f.map(({key:m,link:v})=>Y.createElement("link",{key:m,...v})))}function i5e(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Sye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sye&&(window.__reactRouterVersion="7.6.2")}catch{}function a5e({basename:n,children:e,window:t}){let r=Y.useRef();r.current==null&&(r.current=Hje({window:t,v5Compat:!0}));let i=r.current,[a,o]=Y.useState({action:i.action,location:i.location}),s=Y.useCallback(l=>{Y.startTransition(()=>o(l))},[o]);return Y.useLayoutEffect(()=>i.listen(s),[i,s]),Y.createElement(RFe,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var _ye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nO=Y.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},f){let{basename:m}=Y.useContext(Vf),v=typeof c=="string"&&_ye.test(c),y,w=!1;if(typeof c=="string"&&v&&(y=c,Sye))try{let N=new URL(window.location.href),R=c.startsWith("//")?new URL(N.protocol+c):new URL(c),L=kg(R.pathname,m);R.origin===N.origin&&L!=null?c=L+R.search+R.hash:w=!0}catch{sh(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=vFe(c,{relative:i}),[T,C,k]=e5e(r,h),A=c5e(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:i,viewTransition:d});function D(N){e&&e(N),N.defaultPrevented||A(N)}let P=Y.createElement("a",{...h,...k,href:y||S,onClick:w||a?e:D,ref:i5e(f,C),target:l,"data-discover":!v&&t==="render"?"true":void 0});return T&&!v?Y.createElement(Y.Fragment,null,P,Y.createElement(t5e,{page:S})):P});nO.displayName="Link";var o5e=Y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:s,children:l,...c},u){let d=CI(o,{relative:c.relative}),h=ns(),f=Y.useContext(LL),{navigator:m,basename:v}=Y.useContext(Vf),y=f!=null&&p5e(d)&&s===!0,w=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,S=h.pathname,T=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(S=S.toLowerCase(),T=T?T.toLowerCase():null,w=w.toLowerCase()),T&&v&&(T=kg(T,v)||T);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let k=S===w||!i&&S.startsWith(w)&&S.charAt(C)==="/",A=T!=null&&(T===w||!i&&T.startsWith(w)&&T.charAt(w.length)==="/"),D={isActive:k,isPending:A,isTransitioning:y},P=k?e:void 0,N;typeof r=="function"?N=r(D):N=[r,k?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(D):a;return Y.createElement(nO,{...c,"aria-current":P,className:N,ref:u,style:R,to:o,viewTransition:s},typeof l=="function"?l(D):l)});o5e.displayName="NavLink";var s5e=Y.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=rR,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let m=h5e(),v=f5e(s,{relative:c}),y=o.toLowerCase()==="get"?"get":"post",w=typeof s=="string"&&_ye.test(s),S=T=>{if(l&&l(T),T.defaultPrevented)return;T.preventDefault();let C=T.nativeEvent.submitter,k=(C==null?void 0:C.getAttribute("formmethod"))||o;m(C||T.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:d})};return Y.createElement("form",{ref:f,method:y,action:v,onSubmit:r?l:S,...h,"data-discover":!w&&n==="render"?"true":void 0})});s5e.displayName="Form";function l5e(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tye(n){let e=Y.useContext(aT);return ra(e,l5e(n)),e}function c5e(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let s=Gg(),l=ns(),c=CI(n,{relative:a});return Y.useCallback(u=>{if(BFe(u,e)){u.preventDefault();let d=t!==void 0?t:BC(l)===BC(c);s(n,{replace:d,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[l,s,c,t,r,e,n,i,a,o])}var u5e=0,d5e=()=>`__${String(++u5e)}__`;function h5e(){let{router:n}=Tye("useSubmit"),{basename:e}=Y.useContext(Vf),t=IFe();return Y.useCallback(async(r,i={})=>{let{action:a,method:o,encType:s,formData:l,body:c}=zFe(r,e);if(i.navigate===!1){let u=i.fetcherKey||d5e();await n.fetch(u,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function f5e(n,{relative:e}={}){let{basename:t}=Y.useContext(Vf),r=Y.useContext(zf);ra(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...CI(n||".",{relative:e})},o=ns();if(n==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let u=s.toString();a.search=u?`?${u}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:dg([t,a.pathname])),BC(a)}function p5e(n,e={}){let t=Y.useContext(pye);ra(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Tye("useViewTransitionState"),i=CI(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=kg(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=kg(t.nextLocation.pathname,r)||t.nextLocation.pathname;return tO(i.pathname,o)!=null||tO(i.pathname,a)!=null}[...ZFe];var Eye=Zfe();const d5="timerStates";class g5e{constructor(){$t(this,"unsubscribe",null);$t(this,"deviceId");this.deviceId=Ije()}async saveTimerState(e,t){try{const r=Zt(Qe,d5,e),i={userId:e,...t,activeDeviceId:this.deviceId,updatedAt:new Date};await Is(r,i,{merge:!0})}catch(r){throw console.error("Error saving timer state:",r),r}}async loadTimerState(e){try{const t=Zt(Qe,d5,e),r=await Pc(t);return r.exists()?r.data():null}catch(t){throw console.error("Error loading timer state:",t),t}}async deleteTimerState(e){try{const t=Zt(Qe,d5,e);await Is(t,{currentTime:0,totalTime:0,mode:"pomodoro",sessionsCompleted:0,isRunning:!1,currentTaskId:null,lastUpdated:zd(),deviceId:this.deviceId,userId:e})}catch(t){throw console.error("Error deleting timer state:",t),t}}isActiveDevice(e){return(e==null?void 0:e.activeDeviceId)===this.deviceId}getDeviceId(){return this.deviceId}}const JZ=new g5e,ei=uh((n,e)=>{const t=async(r,i=3)=>{const a=Vt.getState();let o=0;for(;o<i;){const s=a.tasks.find(l=>l.id===r);if(s)return s;await new Promise(l=>setTimeout(l,Math.pow(2,o)*1e3)),o++}return null};return{isRunning:!1,currentTime:Wk.timer.pomodoro*60,totalTime:Wk.timer.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:Wk.timer,enableStartPauseBtn:!0,isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,taskLoadRetryCount:0,isTaskLoading:!1,taskLoadError:null,start:async()=>{const r=e();r.isActiveDevice||n({isActiveDevice:!0}),!r.isRunning&&r.currentTask&&await e().createActiveSession(),n({isRunning:!0,syncError:null}),r.mode==="pomodoro"&&r.currentTask&&ZV(r.currentTask.id,r.currentTask.timeEstimated||0),e().saveToDatabase(),e().saveToLocalStorage()},pause:async()=>{e().activeSession&&await e().completeActiveSession("paused"),n({isRunning:!1}),e().saveToDatabase(),e().saveToLocalStorage()},reset:()=>{const{mode:r,settings:i}=e(),a=i[r]*60;n({currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase(),e().saveToLocalStorage()},skip:async()=>{const{mode:r,sessionsCompleted:i,settings:a,currentTask:o,activeSession:s}=e();if(s&&await e().completeActiveSession("completed"),r==="pomodoro"&&o){const f=(a.pomodoro*60-e().currentTime)/60;Qve(o.id,f)}let l=r,c=i;r==="pomodoro"?(c=i+1,c%a.longBreakInterval===0?l="longBreak":l="shortBreak"):l="pomodoro";const u=a[l]*60,d=a.autoStartPomodoros&&l==="pomodoro",h=a.autoStartBreaks&&(l==="shortBreak"||l==="longBreak");n({mode:l,currentTime:u,totalTime:u,isRunning:d||h,sessionsCompleted:c,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:a}),(d||h)&&o&&(await e().createActiveSession(),d&&ZV(o.id,o.timeEstimated||0)),e().saveToDatabase()},tick:()=>{const{currentTime:r,totalTime:i,isActiveDevice:a,isRunning:o,activeSession:s,lastCountedMinute:l,mode:c}=e();if(!a||!o)return;const{timeSpentIncrement:u}=Vt.getState();if(s&&c==="pomodoro"){const d=Math.floor(r/60);l!==null&&l!==d&&d<l&&(console.log("Minute boundary crossed:",{from:l,to:d,sessionId:s.sessionId,taskId:s.taskId}),e().updateActiveSession(),s.taskId&&u(s.taskId,1)),(l===null||l!==d)&&n({lastCountedMinute:d})}r>0?(n({currentTime:r-1}),e().saveToLocalStorage(),r%60===0&&e().saveToDatabase()):r===0&&e().skip()},setMode:r=>{const{settings:i}=e(),a=i[r]*60;n({mode:r,currentTime:a,totalTime:a,isRunning:!1,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,settings:i}),e().saveToDatabase(),e().saveToLocalStorage()},setCurrentTask:async r=>{const i=e();i.isRunning&&i.activeSession&&i.currentTask&&r&&i.currentTask.id!==r.id?(await e().switchActiveSession(),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),await e().createActiveSession()):n({currentTask:r}),e().saveToDatabase(),e().saveToLocalStorage()},setSettings:r=>{const i=e();if(i.currentTime===i.totalTime&&!i.isRunning&&i.sessionsCompleted===0){const{mode:o}=i,s=r[o]*60;n({settings:r,currentTime:s,totalTime:s,isRunning:!1}),e().saveToDatabase()}else n({settings:r})},createActiveSession:async()=>{const{currentTask:r,mode:i,currentTime:a}=e(),{user:o}=Ht.getState();if(!(!r||!o))try{const s=await ji.createActiveSession(r.id,r.projectId,o.uid,i),l={sessionId:s,taskId:r.id,startTime:new Date,lastUpdateTime:new Date,status:"active"},c=Math.floor(a/60);n({activeSession:l,sessionStartTimerPosition:a,lastCountedMinute:null}),console.log("Created new session:",{sessionId:s,taskId:r.id,startTimerPosition:a,startMinute:c,timer_display:`${Math.floor(a/60)}:${String(a%60).padStart(2,"0")}`,sessionType:i})}catch(s){console.error("Failed to create active session:",s)}},updateActiveSession:async()=>{const{activeSession:r}=e();if(r)try{await ji.incrementDuration(r.sessionId,1),n({activeSession:{...r,lastUpdateTime:new Date}}),console.log("Session updated: +1 minute",{sessionId:r.sessionId,lastUpdateTime:new Date})}catch(i){console.error("Failed to update active session:",i)}},switchActiveSession:async()=>{const{activeSession:r}=e();if(r)try{const i={status:"switched",endTime:new Date,notes:"Task switched"};await ji.updateSession(r.sessionId,i),n({activeSession:null,lastCountedMinute:null})}catch(i){console.error("Failed to switch active session:",i)}},completeActiveSession:async r=>{const{activeSession:i,lastCountedMinute:a,currentTime:o}=e();if(i)try{let s=0;if(a!==null){const c=Math.floor(o/60);c<a&&(s=a-c)}s>0&&await ji.incrementDuration(i.sessionId,s);const l={status:r,endTime:new Date,notes:`Session ${r}${s>0?`: +${s}m remaining`:""}`};await ji.updateSession(i.sessionId,l),n({activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Session completed:",{sessionId:i.sessionId,status:r,remainingMinutes:s})}catch(s){console.error("Failed to complete active session:",s)}},cleanupOrphanedSessions:async()=>{const{user:r}=Ht.getState();if(r)try{const i=await ji.cleanupOrphanedSessions(r.uid);console.log(`Cleaned up ${i} orphaned sessions`)}catch(i){console.error("Failed to cleanup orphaned sessions:",i)}},initializePersistence:async r=>{try{n({isLoading:!0,syncError:null}),await e().loadFromLocalStorage();const i=Vt.getState();i.tasks.length===0&&i.initializeStore().catch(s=>{console.warn("Background task store initialization failed:",s)}),e().cleanupOrphanedSessions().catch(s=>{console.warn("Background cleanup failed:",s)});const a=localStorage.getItem("lastRemoteSync");(!a||Date.now()-parseInt(a)>5*60*1e3)&&JZ.loadTimerState(r).then(s=>{s&&e().syncFromRemoteState(s),localStorage.setItem("lastRemoteSync",Date.now().toString())}).catch(s=>{console.warn("Background remote sync failed:",s),n({syncError:"Failed to sync timer state"})}),n({isLoading:!1})}catch(i){console.error("Failed to initialize timer persistence:",i),n({isLoading:!1,syncError:"Failed to sync timer state"})}},saveToDatabase:async()=>{const r=Ht.getState();if(!r.user||!r.isAuthenticated)return;const i=e();if(i.isActiveDevice)try{n({isSyncing:!0,syncError:null});const a={currentTime:i.currentTime,totalTime:i.totalTime,mode:i.mode,sessionsCompleted:i.sessionsCompleted,isRunning:i.isRunning,currentTaskId:i.currentTask?i.currentTask.id:null};i.activeSession&&(a.sessionStartTime=i.activeSession.startTime,a.activeSessionId=i.activeSession.sessionId,a.sessionStartTimerPosition=i.sessionStartTimerPosition),await JZ.saveTimerState(r.user.uid,a),n({isSyncing:!1,lastSyncTime:new Date})}catch(a){console.error("Failed to save timer state:",a),n({isSyncing:!1,syncError:"Failed to save timer state"})}},saveToLocalStorage:()=>{var a;const r=e(),i={currentTime:r.currentTime,totalTime:r.totalTime,mode:r.mode,sessionsCompleted:r.sessionsCompleted,isRunning:r.isRunning,currentTaskId:((a=r.currentTask)==null?void 0:a.id)||null,lastSaveTime:new Date().toISOString(),activeSession:r.activeSession,sessionStartTimerPosition:r.sessionStartTimerPosition,currentTaskDetails:r.currentTask?{id:r.currentTask.id,title:r.currentTask.title,projectId:r.currentTask.projectId,timeSpent:r.currentTask.timeSpent,timeEstimated:r.currentTask.timeEstimated}:null};try{localStorage.setItem("timerState",JSON.stringify(i))}catch(o){console.error("Failed to save to localStorage:",o)}},loadFromLocalStorage:async()=>{var i;e();const r=localStorage.getItem("timerState");if(r)try{n({isTaskLoading:!0,taskLoadError:null});const a=JSON.parse(r);n({currentTime:a.currentTime,totalTime:a.totalTime,mode:a.mode,sessionsCompleted:a.sessionsCompleted,isRunning:a.isRunning,activeSession:a.activeSession,sessionStartTimerPosition:a.sessionStartTimerPosition}),a.currentTaskDetails?(n({currentTask:{...a.currentTaskDetails,completed:!1,status:"pomodoro",userId:((i=Ht.getState().user)==null?void 0:i.uid)||"",createdAt:new Date,updatedAt:new Date,order:0},isTaskLoading:!1}),a.currentTaskId&&t(a.currentTaskId,1).then(o=>{o&&n({currentTask:o})}).catch(o=>{console.warn("Background task verification failed:",o)})):n({isTaskLoading:!1})}catch(a){console.error("Failed to parse timer state from localStorage:",a),n({isTaskLoading:!1,taskLoadError:"Failed to load saved timer state"})}},syncFromRemoteState:async r=>{const i=r.currentTaskId||null,a=i&&Vt.getState().tasks.find(o=>o.id===i)||null;if(n({...r,currentTask:a,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null}),r.isRunning&&a&&r.mode==="pomodoro")try{if(r.activeSessionId){const{user:o}=Ht.getState();if(o){const l=(await ji.getActiveSessions(o.uid)).find(c=>c.id===r.activeSessionId&&c.status==="active");if(l){console.log("Resuming existing session:",{sessionId:l.id,duration:l.duration,reason:"page reload"});return}}}await e().createActiveSession(),console.log("Created new session:",{taskId:a.id,reason:"no active session found"})}catch(o){console.error("Failed to handle session during page reload:",o)}},cleanupPersistence:()=>{n({isLoading:!1,isSyncing:!1,lastSyncTime:null,isActiveDevice:!0,syncError:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null})},resetTimerState:()=>{const{settings:r}=e();n({isRunning:!1,currentTime:r.pomodoro*60,totalTime:r.pomodoro*60,mode:"pomodoro",sessionsCompleted:0,currentTask:null,activeSession:null,sessionStartTimerPosition:null,lastCountedMinute:null,isActiveDevice:!0,syncError:null})},setEnableStartPauseBtn:r=>{n({enableStartPauseBtn:r})},switchToNextPomodoroTask:async r=>{const{mode:i,sessionsCompleted:a,settings:o,currentTask:s,activeSession:l}=e();console.log("switchToNextPomodoroTask called:",{nextTaskId:r.id,nextTaskTitle:r.title,currentTaskId:s==null?void 0:s.id,currentTaskTitle:s==null?void 0:s.title,mode:i,hasActiveSession:!!l}),i==="pomodoro"&&s&&r.id!==s.id?(l&&(console.log("Completing current session:",l.sessionId),await e().completeActiveSession("completed")),console.log("Setting new current task:",r.title),n({currentTask:r,sessionStartTimerPosition:null,lastCountedMinute:null}),console.log("Creating new session for task:",r.title),await e().createActiveSession()):console.log("Skipping task switch - conditions not met"),e().saveToDatabase()}}});Ht.subscribe(async n=>{const e=ei.getState();if(!n.isInitialized){console.log("TimerStore - User store not initialized yet, waiting...");return}if(console.log("TimerStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,isLoading:n.isLoading,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user&&!n.isLoading){console.log("TimerStore - User authenticated, initializing persistence...");try{await e.initializePersistence(n.user.uid),e.setSettings(n.user.settings.timer)}catch(t){console.error("Failed to initialize timer persistence:",t)}}else console.log("TimerStore - User not authenticated, cleaning up..."),e.cleanupPersistence(),e.resetTimerState()});const m5e=Object.freeze(Object.defineProperty({__proto__:null,useTimerStore:ei},Symbol.toStringTag,{value:"Module"})),v5e=({currentTime:n,totalTime:e,size:t=300,strokeWidth:r=12,color:i="#BA4949",bgColor:a="var(--border-color)",children:o,className:s=""})=>{const[l,c]=Y.useState(t);Y.useEffect(()=>{const m=()=>{const v=Math.min(window.innerWidth-80,300);c(t>v?v:t)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[t]);const u=l/2-r/2,d=2*Math.PI*u,h=e>0?n/e:0,f=d*(1-h);return x.jsxs("div",{className:`timer-circle relative ${s}`,style:{width:l,height:l},children:[x.jsxs("svg",{width:l,height:l,viewBox:`0 0 ${l} ${l}`,children:[x.jsx("circle",{className:"timer-circle-bg",cx:l/2,cy:l/2,r:u,fill:"none",stroke:a,strokeWidth:r}),x.jsx("circle",{className:"timer-circle-progress",cx:l/2,cy:l/2,r:u,fill:"none",stroke:i,strokeWidth:r,strokeLinecap:"round",strokeDasharray:d,strokeDashoffset:f,style:{transform:"rotate(-90deg)",transformOrigin:"center",transition:"stroke-dashoffset 1s linear"}})]}),x.jsx("div",{className:"timer-text absolute inset-0 flex flex-col items-center justify-center",children:o})]})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5e=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),b5e=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),eQ=n=>{const e=b5e(n);return e.charAt(0).toUpperCase()+e.slice(1)},Aye=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),w5e=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5e=Y.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>Y.createElement("svg",{ref:l,...x5e,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:Aye("lucide",i),...!a&&!w5e(s)&&{"aria-hidden":"true"},...s},[...o.map(([c,u])=>Y.createElement(c,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=(n,e)=>{const t=Y.forwardRef(({className:r,...i},a)=>Y.createElement(S5e,{ref:a,iconNode:e,className:Aye(`lucide-${y5e(eQ(n))}`,`lucide-${n}`,r),...i}));return t.displayName=eQ(n),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],tz=Tt("activity",_5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5e=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],E5e=Tt("beaker",T5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],k5e=Tt("bell",A5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5e=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],aR=Tt("bot",C5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5e=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],I5e=Tt("brain",D5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5e=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],P5e=Tt("bug",M5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],R5e=Tt("calendar-days",N5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vb=Tt("calendar",O5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],j5e=Tt("chart-column",L5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5e=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],$5e=Tt("check-check",F5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],U5e=Tt("check",B5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kye=Tt("chevron-down",V5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H5e=Tt("chevron-left",z5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Cye=Tt("chevron-right",G5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mv=Tt("circle-alert",W5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hg=Tt("circle-check-big",q5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],K5e=Tt("circle-help",Y5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rO=Tt("circle-x",X5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],R7=Tt("clock",Z5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],nz=Tt("database",Q5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],e3e=Tt("ellipsis-vertical",J5e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Dye=Tt("external-link",t3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],r3e=Tt("eye-off",n3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],a3e=Tt("eye",i3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3e=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],s3e=Tt("facebook",o3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FL=Tt("file-text",l3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3e=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],u3e=Tt("flame",c3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3e=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],h3e=Tt("focus",d3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],p3e=Tt("folder",f3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3e=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],m3e=Tt("github",g3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],h5=Tt("globe",v3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],b3e=Tt("grid-3x3",y3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Iye=Tt("info",w3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3e=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],S3e=Tt("instagram",x3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],tQ=Tt("key",_3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3e=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],E3e=Tt("link",T3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],nQ=Tt("linkedin",A3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3e=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],C3e=Tt("list-checks",k3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zp=Tt("loader-circle",D3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],rQ=Tt("loader",I3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],P3e=Tt("mail",M3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],R3e=Tt("maximize",N3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],L3e=Tt("menu",O3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],v_=Tt("message-circle",j3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3e=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],$3e=Tt("minimize",F3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],U3e=Tt("monitor",B3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3e=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],z3e=Tt("moon",V3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3e=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],G3e=Tt("music",H3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],q3e=Tt("palette",W3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],K3e=Tt("panel-right-close",Y3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],Z3e=Tt("panel-right-open",X3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Mye=Tt("pause",Q3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3e=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Pye=Tt("play",J3e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],t4e=Tt("plus",e4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],UC=Tt("refresh-cw",n4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],i4e=Tt("rotate-ccw",r4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],o4e=Tt("send",a4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zb=Tt("settings",s4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],c4e=Tt("shopping-cart",l4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],d4e=Tt("skip-forward",u4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f4e=Tt("square-check-big",h4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],g4e=Tt("square-pen",p4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],v4e=Tt("sun",m4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],b4e=Tt("test-tube",y4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],x4e=Tt("timer",w4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_4e=Tt("trash-2",S4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],E4e=Tt("trending-up",T4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O7=Tt("triangle-alert",A4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],C4e=Tt("twitter",k4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I4e=Tt("user",D4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],P4e=Tt("users",M4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],iQ=Tt("video",N4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rz=Tt("x",R4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],L4e=Tt("wrench",O4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4e=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],F4e=Tt("youtube",j4e);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],L7=Tt("zap",$4e),B4e={"timer-line":x4e,"task-line":f4e,"dashboard-line":j5e,"calendar-line":Vb,"settings-line":zb,"question-line":K5e,"arrow-left-s-line":H5e,"arrow-right-s-line":Cye,"menu-line":L3e,"layout-right-line":Z3e,"layout-right-2-line":K3e,"check-line":U5e,"close-line":rz,"add-line":t4e,"edit-line":g4e,"delete-bin-line":_4e,"pause-line":Mye,"restart-line":i4e,"skip-forward-line":d4e,"play-line":Pye,"notification-line":k5e,"fullscreen-line":R3e,"fullscreen-exit-line":$3e,"time-line":R7,"calendar-event-line":R5e,"arrow-down-s-line":kye,"fire-line":u3e,"focus-3-line":h3e,"brain-line":I5e,"list-check":C3e,"layout-grid-line":b3e,"checkbox-multiple-line":$5e,"more-2-fill":e3e,"folder-line":p3e,"palette-line":q3e,"sun-line":v4e,"moon-line":z3e,"computer-line":U3e,"database-2-line":nz,"refresh-line":UC,"information-line":Iye,"error-warning-line":O7,"test-tube-line":b4e,"tools-line":L4e,"ri-global-line":h5,"ri-github-line":m3e,"ri-facebook-line":s3e,"ri-file-list-line":FL,"ri-instagram-line":S3e,"ri-linkedin-line":nQ,"ri-twitter-line":C4e,"ri-youtube-line":F4e,"ri-linkedin-box-line":nQ,"ri-discord-line":v_,"ri-telegram-line":v_,"ri-whatsapp-line":v_,"ri-snapchat-line":v_,"ri-music-line":G3e,"ri-video-line":iQ,"ri-mail-line":P3e,"ri-amazon-line":c4e,"ri-netflix-line":iQ,"ri-reddit-line":v_,"ri-pinterest-line":h5,"ri-google-line":h5,"flask-line":E5e,"links-line":E3e,"bug-line":P5e},mt=({name:n,className:e="",size:t=20})=>{const r=B4e[n];return r?x.jsx(r,{size:t,className:e,"aria-hidden":"true"}):(console.warn(`Icon "${n}" not found in iconMap`),x.jsx("div",{className:`w-5 h-5 ${e}`}))},U4e=({className:n=""})=>{var D;const e=ei(P=>P.currentTime),t=ei(P=>P.totalTime),r=ei(P=>P.isRunning),i=ei(P=>P.mode),a=ei(P=>P.sessionsCompleted),o=ei(P=>P.currentTask),s=ei(P=>P.enableStartPauseBtn),l=ei(P=>P.isLoading),c=ei(P=>P.isSyncing),u=ei(P=>P.syncError),d=ei(P=>P.isTaskLoading),h=ei(P=>P.taskLoadError),{start:f,pause:m,reset:v,skip:y,setMode:w}=ei(),S=()=>{if(!s){console.warn("Start/Pause button is disabled");return}r?m():f()},T=()=>{v()},C=()=>{y()},k=C7(e),A=()=>d?x.jsxs("div",{className:"flex items-center text-sm text-text-secondary mb-2",children:[x.jsx(mt,{name:"loader-4-line",className:"mr-1 animate-spin",size:16}),"Recovering task state..."]}):h?x.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[x.jsx(mt,{name:"error-warning-line",className:"mr-1",size:16}),h]}):u&&!l&&!c?x.jsxs("div",{className:"flex items-center text-sm text-red-500 mb-2",children:[x.jsx(mt,{name:"error-warning-line",className:"mr-1",size:16}),"Connection error"]}):null;return x.jsxs("div",{className:`flex flex-col items-center max-w-full w-full ${n}`,children:[x.jsxs("div",{className:"mb-8 text-center w-full",children:[x.jsxs("div",{className:"inline-flex items-center bg-background-container p-1 rounded-full mb-2 flex-wrap justify-center",children:[x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="pomodoro"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("pomodoro"),disabled:l||d,children:"Pomodoro"}),x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="shortBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("shortBreak"),disabled:l||d,children:"Short Break"}),x.jsx("button",{className:`px-4 sm:px-6 py-2 rounded-full font-medium transition-all !rounded-button whitespace-nowrap text-sm sm:text-base
            ${i==="longBreak"?"bg-primary text-white":"text-text-secondary hover:text-text-primary"}`,onClick:()=>w("longBreak"),disabled:l||d,children:"Long Break"})]}),x.jsxs("p",{className:"text-sm text-text-secondary",children:["Session ",a+1," of ",ei.getState().settings.longBreakInterval]}),A()]}),x.jsxs(v5e,{currentTime:e,totalTime:t,className:"mb-6",size:Math.min(300,window.innerWidth-80),children:[x.jsx("div",{className:"text-4xl sm:text-5xl font-bold text-text-primary",children:k}),x.jsx("div",{className:"text-sm text-text-secondary",children:"remaining"})]}),x.jsxs("div",{className:"flex items-center space-x-4 mb-8 flex-wrap justify-center",children:[x.jsx("button",{className:`px-5 sm:px-6 py-3 rounded-full font-medium bg-primary text-white hover:bg-opacity-90 !rounded-button whitespace-nowrap m-1 ${!s||l||d?"opacity-50 cursor-not-allowed":""}`,onClick:S,disabled:l||d||!s,children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:`${r?"pause":"play"}-line`,size:20})}),x.jsx("span",{className:"ml-2",children:r?"Pause":"Start"})]})}),x.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:T,disabled:l||d,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"restart-line",size:20})})}),x.jsx("button",{className:"p-3 rounded-full border border-border text-text-primary hover:bg-background-secondary !rounded-button whitespace-nowrap m-1 disabled:opacity-50",onClick:C,disabled:l||d,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"skip-forward-line",size:20})})})]}),x.jsxs("div",{className:"w-full max-w-md bg-background-container rounded-lg p-4",children:[x.jsx("p",{className:"text-text-primary mb-2 break-words text-left",children:d?x.jsxs("span",{className:"flex items-center",children:[x.jsx(mt,{name:"loader-4-line",className:"mr-2 animate-spin",size:16}),"Recovering task..."]}):o?o.title:"Select a task to start working"}),x.jsxs("div",{className:"flex items-center justify-between text-sm text-text-secondary flex-wrap gap-2 text-left",children:[x.jsx("span",{className:"break-words text-left",children:o?`Project: ${((D=Vt.getState().projects.find(P=>P.id===o.projectId))==null?void 0:D.name)||"Unknown Project"}`:"No project selected"}),x.jsx("span",{className:"text-left",children:o?`Est: ${o.timeSpent}/${o.timeEstimated}m`:"Est: --"})]})]})]})},V4e=()=>x.jsx(U4e,{});function Nye(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Nye(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Nr(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Nye(n))&&(r&&(r+=" "),r+=e);return r}const fg=({children:n,className:e,title:t,action:r,noPadding:i=!1,fullHeight:a=!1})=>x.jsxs("div",{className:Nr("bg-background-secondary rounded-lg shadow-sm border border-border",a?"h-full":"",e),children:[t&&x.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[x.jsx("h3",{className:"text-lg font-medium text-text-primary",children:t}),r&&x.jsx("div",{className:"flex items-center",children:r})]}),x.jsx("div",{className:Nr(!i&&"p-6"),children:n})]}),yy=uh((n,e)=>({selectedRange:{rangeType:"all time",startDate:null,endDate:null},workSessions:[],focusTimeView:"daily",unsubscribe:null,isLoading:!1,useEventDrivenLoading:!0,setSelectedRange:async t=>{var i;n({selectedRange:t});const{useEventDrivenLoading:r}=e();if(r){const a=(i=Ht.getState().user)==null?void 0:i.uid;a&&await e().loadWorkSessionsForRange(a,t)}},setWorkSessions:t=>n({workSessions:t}),setFocusTimeView:t=>n({focusTimeView:t}),subscribeWorkSessions:t=>{console.log("DashboardStore - Subscribing to work sessions for user:",t);const{unsubscribe:r}=e();r&&r();const i=ji.subscribeToWorkSessions(t,a=>{console.log("DashboardStore - Received work sessions:",a.length),console.log("DashboardStore - Sample work sessions:",a.slice(0,3)),console.log("DashboardStore - Today's sessions:",a.filter(o=>{const s=new Date(o.date),l=new Date;return s.toDateString()===l.toDateString()}).length),n({workSessions:a})});n({unsubscribe:i})},loadWorkSessionsForRange:async(t,r)=>{const{startDate:i,endDate:a,rangeType:o}=r;console.log("DashboardStore - Loading work sessions for range:",{userId:t,rangeType:o,startDate:(i==null?void 0:i.toISOString().split("T")[0])||"null",endDate:(a==null?void 0:a.toISOString().split("T")[0])||"null"}),n({isLoading:!0});try{let s;o==="all time"||!i||!a?(console.log('DashboardStore - Loading all sessions for "all time"'),s=await ji.getAllWorkSessions(t)):s=await ji.getWorkSessionsForRange(t,i,a),console.log("DashboardStore - Successfully loaded sessions:",s.length),n({workSessions:s})}catch(s){console.error("DashboardStore - Error loading work sessions:",s)}finally{n({isLoading:!1})}},cleanupListeners:()=>{const{unsubscribe:t}=e();t&&(t(),n({unsubscribe:null,workSessions:[]}))}}));Ht.subscribe(n=>{var t;const e=yy.getState();if(!n.isInitialized){console.log("DashboardStore - User store not initialized yet, waiting...");return}if(console.log("DashboardStore - User state changed:",{isAuthenticated:n.isAuthenticated,hasUser:!!n.user,userId:(t=n.user)==null?void 0:t.uid,isInitialized:n.isInitialized}),n.isAuthenticated&&n.user){const{useEventDrivenLoading:r,selectedRange:i}=e;r?(console.log("DashboardStore - User logged in, using event-driven loading"),e.cleanupListeners(),console.log("DashboardStore - Loading data for current range:",i),e.loadWorkSessionsForRange(n.user.uid,i)):(console.log("DashboardStore - User logged in, using subscription-based loading"),e.subscribeWorkSessions(n.user.uid))}else console.log("DashboardStore - User logged out, cleaning up"),e.setWorkSessions([]),e.cleanupListeners()});const z4e=Object.freeze(Object.defineProperty({__proto__:null,useDashboardStore:yy},Symbol.toStringTag,{value:"Module"})),H4e=()=>{const{workSessions:n}=yy(),[e,t]=Y.useState({dailyAverage:{hours:0,minutes:0},totalFocus:{hours:0,minutes:0},weeklyGoal:{current:0,target:50,progress:0},monthlyGoal:{current:0,target:200,progress:0},journey:{current:0,target:1e4,progress:0}}),[r,i]=Y.useState(!1),a=()=>{const s=new Date,l=s.getDay()===0?6:s.getDay()-1,c=new Date(s);c.setDate(s.getDate()-l);const u=new Date(c);u.setDate(c.getDate()+6);const d=h=>h.toLocaleDateString("en-US",{month:"long",day:"numeric"});return`${d(c)} - ${d(u)}`},o=()=>new Date().toLocaleDateString("en-US",{month:"long"});return Y.useEffect(()=>{(()=>{i(!0);const l={};let c=0,u=0;const d=new Date,h=d.getDay()===0?6:d.getDay()-1;d.setDate(d.getDate()-h),d.setHours(0,0,0,0);const f=new Date;f.setDate(1),f.setHours(0,0,0,0),n.filter(y=>y.sessionType==="pomodoro"||y.sessionType==="manual").forEach(y=>{const w=y.date,S=y.duration;l[w]?l[w]+=S:l[w]=S;const T=new Date(w);T>=d&&(c+=S),T>=f&&(u+=S)});const m=Object.values(l).reduce((y,w)=>y+w,0),v=m/Object.keys(l).length||0;t({dailyAverage:{hours:Math.floor(v/60),minutes:Math.floor(v%60)},totalFocus:{hours:Math.floor(m/60),minutes:m%60},weeklyGoal:{current:parseFloat((c/60).toFixed(1)),target:50,progress:Math.min(c/60/50*100,100)},monthlyGoal:{current:parseFloat((u/60).toFixed(1)),target:200,progress:Math.min(u/60/200*100,100)},journey:{current:Math.floor(m/60),target:1e4,progress:parseFloat((m/60/1e4*100).toFixed(2))}}),i(!1)})()},[n]),r?x.jsx(fg,{title:"Overal Insights",children:x.jsx("div",{className:"flex items-center justify-center h-[200px]",children:x.jsx("div",{className:"text-text-secondary",children:"Loading focus statistics..."})})}):x.jsx(fg,{title:"Overal Insights",children:x.jsxs("div",{className:"h-[200px] flex flex-col justify-between",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"text-2xl font-bold text-text-primary",children:[e.dailyAverage.hours,"h ",e.dailyAverage.minutes,"m"]}),x.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Daily average"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-2xl font-bold text-text-primary",children:[e.totalFocus.hours,"h ",e.totalFocus.minutes,"m"]}),x.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Total focus time"})]})]}),x.jsxs("div",{className:"space-y-4 flex-shrink-0",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[x.jsxs("span",{className:"text-text-secondary",children:["Weekly goal (",a(),")"]}),x.jsxs("span",{className:"font-medium text-text-primary",children:[e.weeklyGoal.current,"h / ",e.weeklyGoal.target,"h"]})]}),x.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full",style:{width:`${e.weeklyGoal.progress}%`,backgroundColor:"#BA4949"}})})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[x.jsxs("span",{className:"text-text-secondary",children:["Monthly goal (",o(),")"]}),x.jsxs("span",{className:"font-medium text-text-primary",children:[e.monthlyGoal.current,"h / ",e.monthlyGoal.target,"h"]})]}),x.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full",style:{width:`${e.monthlyGoal.progress}%`,backgroundColor:"#BA4949"}})})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[x.jsx("span",{className:"text-text-secondary",children:"Journey to 10,000 hours"}),x.jsxs("span",{className:"font-medium text-text-primary",children:[e.journey.current,"h / ",e.journey.target,"h"]})]}),x.jsx("div",{className:"w-full h-2 bg-background-container rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full rounded-full",style:{width:`${e.journey.progress}%`,backgroundColor:"#BA4949"}})})]})]})]})})},G4e=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,s,l)=>{let c=o;if(s){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=h=>{const f=o(h);if(!u(d,f)){const m=d;s(d=f,m)}},l!=null&&l.fireImmediately&&s(d,d)}return i(c)},n(e,t,r)},W4e=G4e;function q4e(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const o=l=>l===null?null:JSON.parse(l,void 0),s=(a=t.getItem(i))!=null?a:null;return s instanceof Promise?s.then(o):o(s)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const iz=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return iz(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return iz(r)(t)}}}},Y4e=(n,e)=>(t,r,i)=>{let a={storage:q4e(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...e},o=!1;const s=new Set,l=new Set;let c=a.storage;if(!c)return n((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...v)},r,i);const u=()=>{const v=a.partialize({...r()});return c.setItem(a.name,{state:v,version:a.version})},d=i.setState;i.setState=(v,y)=>{d(v,y),u()};const h=n((...v)=>{t(...v),u()},r,i);i.getInitialState=()=>h;let f;const m=()=>{var v,y;if(!c)return;o=!1,s.forEach(S=>{var T;return S((T=r())!=null?T:h)});const w=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(v=r())!=null?v:h))||void 0;return iz(c.getItem.bind(c))(a.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==a.version){if(a.migrate){const T=a.migrate(S.state,S.version);return T instanceof Promise?T.then(C=>[!0,C]):[!0,T]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var T;const[C,k]=S;if(f=a.merge(k,(T=r())!=null?T:h),t(f,!0),C)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,l.forEach(S=>S(f))}).catch(S=>{w==null||w(void 0,S)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:v=>(s.add(v),()=>{s.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},a.skipHydration||m(),f||h},DI=Y4e,aQ={CURRENT_YEAR:5*60*1e3,PAST_YEAR:60*60*1e3},Rye=uh()(DI((n,e)=>({yearCache:new Map,isLoading:!1,getSessionsForYear:async(t,r)=>{const{yearCache:i}=e(),a=new Date().getFullYear(),o=r===a?aQ.CURRENT_YEAR:aQ.PAST_YEAR,s=i.get(r);if(s&&Date.now()-new Date(s.lastFetch).getTime()<o)return console.log(`FocusStreakStore - Using cached data for year ${r}`),s.sessions;try{n({isLoading:!0}),console.log(`FocusStreakStore - Fetching fresh data for year ${r}`);const l=new Date(r,0,1),c=new Date(r,11,31),u=await ji.getWorkSessionsForRange(t,l,c),d=new Map(i);return d.set(r,{sessions:u,lastFetch:new Date,year:r}),n({yearCache:d,isLoading:!1}),console.log(`FocusStreakStore - Cached ${u.length} sessions for year ${r}`),r===new Date().getFullYear()&&window.dispatchEvent(new CustomEvent("focus-streak-cache-updated")),u}catch(l){return console.error(`FocusStreakStore - Error fetching data for year ${r}:`,l),n({isLoading:!1}),(s==null?void 0:s.sessions)||[]}},clearCache:()=>{console.log("FocusStreakStore - Clearing all cache"),n({yearCache:new Map})},invalidateYear:t=>{const{yearCache:r}=e(),i=new Map(r);i.delete(t),n({yearCache:i}),console.log(`FocusStreakStore - Invalidated cache for year ${t}`)},refreshCurrentYear:async t=>{const r=new Date().getFullYear(),{yearCache:i}=e();try{console.log("FocusStreakStore - Refreshing current year data");const a=new Date(r,0,1),o=new Date(r,11,31),s=await ji.getWorkSessionsForRange(t,a,o),l=new Map(i);l.set(r,{sessions:s,lastFetch:new Date,year:r}),n({yearCache:l}),console.log(`FocusStreakStore - Refreshed current year with ${s.length} sessions`),window.dispatchEvent(new CustomEvent("focus-streak-cache-updated"))}catch(a){console.error("FocusStreakStore - Error refreshing current year:",a)}}}),{name:"focus-streak-cache",storage:{getItem:n=>{const e=localStorage.getItem(n);if(!e)return null;try{const t=JSON.parse(e);return t.state&&t.state.yearCache&&(t.state.yearCache=new Map(t.state.yearCache)),t}catch{return null}},setItem:(n,e)=>{try{const t={...e,state:{...e.state,yearCache:Array.from(e.state.yearCache.entries())}};localStorage.setItem(n,JSON.stringify(t))}catch(t){console.error("FocusStreakStore - Storage error:",t)}},removeItem:n=>{localStorage.removeItem(n)}}})),K4e=()=>{const{user:n}=Ht(),{refreshCurrentYear:e,invalidateYear:t}=Rye();Y.useEffect(()=>{if(!(n!=null&&n.uid))return;const r=async()=>{new Date().getFullYear(),console.log("FocusStreakAutoRefresh - Work session updated, refreshing current year"),await e(n.uid)};window.addEventListener("pomodoro-completed",r),window.addEventListener("work-session-updated",r);const i=()=>{const o=new Date().toDateString(),s=localStorage.getItem("focus-streak-last-date-check");s&&s!==o&&(console.log("FocusStreakAutoRefresh - New day detected, refreshing current year"),e(n.uid)),localStorage.setItem("focus-streak-last-date-check",o)};i();const a=setInterval(i,60*60*1e3);return()=>{window.removeEventListener("pomodoro-completed",r),window.removeEventListener("work-session-updated",r),clearInterval(a)}},[n==null?void 0:n.uid,e])},X4e=async(n,e,t)=>{try{const r=new Date,i=new Date(r);i.setDate(r.getDate()-1);const a=i.toISOString().split("T")[0];await ji.upsertWorkSession({userId:n,taskId:e,projectId:t,date:a},120);const s=new Date(r).toISOString().split("T")[0];await ji.upsertWorkSession({userId:n,taskId:e,projectId:t,date:s},90);const l=new Date(r);l.setDate(r.getDate()-3);const c=l.toISOString().split("T")[0];await ji.upsertWorkSession({userId:n,taskId:e,projectId:t,date:c},45),console.log("✅ Test work sessions created successfully!"),console.log("🎯 Check your dashboard to see the sync in action")}catch(r){console.error("❌ Failed to create test work sessions:",r)}},Z4e=({months:n})=>x.jsx("div",{className:"grid grid-flow-col gap-[2px] w-full",children:n.map((e,t)=>x.jsx("div",{className:"text-xs text-text-secondary font-medium text-left",style:{gridColumn:`span ${e.weeks}`,minWidth:`${e.weeks*14}px`},children:e.name},t))}),Q4e=()=>{const n=["Mon","","Wed","","Fri","","Sun"];return x.jsx("div",{className:"flex flex-col gap-[2px] mr-2 w-10",children:n.map((e,t)=>x.jsx("div",{className:"h-[12px] flex items-center text-xs text-text-secondary font-medium",children:e},t))})},J4e=({date:n,intensity:e,focusMinutes:t=0,onClick:r,onMouseEnter:i,onMouseLeave:a})=>{const o=()=>{const c="w-[12px] h-[12px] rounded-sm cursor-pointer transition-all duration-200 hover:scale-110";switch(e){case 0:return`${c} bg-gray-100 border border-gray-200 hover:border-gray-300 dark:bg-[#161b22] dark:border-[#21262d] dark:hover:border-[#30363d]`;case 1:return`${c} bg-[#BA4949]/50 hover:bg-[#BA4949]/60 dark:bg-[#ff9999] dark:hover:bg-[#ffb3b3]`;case 2:return`${c} bg-[#BA4949] hover:bg-[#BA4949]/90 dark:bg-[#ef5350] dark:hover:bg-[#f44336]`;default:return`${c} bg-gray-100 border border-gray-200 dark:bg-[#161b22] dark:border-[#21262d]`}},s=()=>{r&&r(n)},l=()=>{i&&i(n,t)};return x.jsx("div",{className:o(),onClick:s,onMouseEnter:l,onMouseLeave:a})},e$e=({date:n,focusMinutes:e,position:t,visible:r})=>{if(!r)return null;const i=c=>c.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),a=()=>{if(e===0)return"No focus time";if(e<60)return`${e} minutes`;{const c=Math.floor(e/60),u=e%60;return u>0?`${c}h ${u}m`:`${c}h`}},s=(()=>{const h=document.documentElement.clientWidth,f=document.documentElement.clientHeight;let m=t.x-160/2,v=t.y-50-8;return m=Math.max(8,Math.min(m,h-160-8)),v=Math.max(8,Math.min(v,f-50-8)),{left:m,top:v}})(),l=x.jsxs("div",{className:"fixed z-[9999] px-3 py-2 bg-gray-800 text-white text-sm rounded-md shadow-lg pointer-events-none dark:bg-gray-900 dark:border dark:border-gray-600 whitespace-nowrap",style:{left:s.left,top:s.top,width:"160px",height:"50px",transform:"translateZ(0)",backfaceVisibility:"hidden",willChange:"transform"},children:[x.jsx("div",{className:"font-medium",children:a()}),x.jsx("div",{className:"text-gray-300 text-xs dark:text-gray-400",children:i(n)})]});return Eye.createPortal(l,document.body)},t$e=({data:n})=>{const[e,t]=Y.useState({visible:!1,date:new Date,focusMinutes:0,position:{x:0,y:0}}),r=(s,l,c)=>{const u=s.target.getBoundingClientRect();t({visible:!0,date:l,focusMinutes:c,position:{x:u.left+u.width/2,y:u.top}})},i=()=>{t(s=>({...s,visible:!1}))},a=s=>{console.log("Clicked on date:",s)},o=[];for(let s=0;s<n.days.length;s+=7)o.push(n.days.slice(s,s+7));return x.jsxs("div",{className:"contribution-grid w-full overflow-hidden",style:{contain:"layout style"},children:[x.jsx("div",{className:"ml-12 mb-2",children:x.jsx(Z4e,{months:n.months})}),x.jsxs("div",{className:"flex w-full",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(Q4e,{})}),x.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden",style:{contain:"layout"},children:x.jsx("div",{className:"grid grid-flow-col gap-[2px] min-w-max",children:o.map((s,l)=>x.jsx("div",{className:"grid grid-rows-7 gap-[2px]",children:s.map((c,u)=>x.jsx("div",{onMouseEnter:d=>r(d,c.date,c.focusMinutes),onMouseLeave:i,className:"relative",style:{contain:"layout"},children:x.jsx(J4e,{date:c.date,intensity:c.intensity,focusMinutes:c.focusMinutes,onClick:a})},`${l}-${u}`))},l))})})]}),x.jsx(e$e,{date:e.date,focusMinutes:e.focusMinutes,position:e.position,visible:e.visible})]})},n$e=(n,e)=>Y.useMemo(()=>{const t=R=>{const L=R.getFullYear(),B=String(R.getMonth()+1).padStart(2,"0"),$=String(R.getDate()).padStart(2,"0");return`${L}-${B}-${$}`},r=e||new Date().getFullYear(),a=(()=>{if(n.length===0)return 0;const R=new Map;n.forEach($=>{const G=$.date,W=R.get(G)||0;R.set(G,W+($.duration||0))});const L=Array.from(R.values());return L.length===0?0:L.reduce(($,G)=>$+G,0)/L.length})(),o=new Date(r,0,1),s=new Date(r,11,31),l=new Date(o),c=l.getDay(),u=c===0?7:c;l.setDate(l.getDate()-(u-1));const d=new Date(s),h=d.getDay(),f=h===0?7:h;d.setDate(d.getDate()+(7-f));const m=new Map;n.forEach(R=>{const L=R.date;m.has(L)||m.set(L,[]),m.get(L).push(R)});const v=[],y=new Date(l);for(;y<=d;){const R=t(y),B=(m.get(R)||[]).reduce((G,W)=>G+(W.duration||0),0);let $=0;B===0?$=0:B<a?$=1:$=2,v.push({date:new Date(y),focusMinutes:B,intensity:$}),y.setDate(y.getDate()+1)}const w=[],S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let T=-1,C=0;for(let R=0;R<v.length;R+=7){const B=v.slice(R,R+7).filter(G=>G.date.getFullYear()===r);if(B.length===0)continue;const $=B[0].date.getMonth();$!==T?(T!==-1&&w.push({name:S[T],weeks:C}),T=$,C=1):C++}T!==-1&&w.push({name:S[T],weeks:C});let k=0,A=0;for(const R of v)R.focusMinutes>0?(A++,k=Math.max(k,A)):A=0;let D=0;const P=new Date().getFullYear();if(r===P){const L=t(new Date),B=v.findIndex($=>t($.date)===L);if(B!==-1){const $=v[B],G=B>0?v[B-1]:null;if($.focusMinutes>0||G&&G.focusMinutes>0){const W=$.focusMinutes>0?B:B-1;for(let K=W;K>=0&&v[K].focusMinutes>0;K--)D++}}}const N=v.filter(R=>R.focusMinutes>0&&R.date.getFullYear()===r).length;return{days:v,months:w,currentStreak:D,longestStreak:k,totalContributions:N,dailyAverageMinutes:a}},[n,e]),r$e=()=>{const{user:n}=Ht(),{getSessionsForYear:e,isLoading:t,clearCache:r}=Rye();K4e();const[i,a]=Y.useState(()=>new Date().getFullYear()),[o,s]=Y.useState([]);Y.useEffect(()=>{const m=async()=>{if(!(n!=null&&n.uid)){s([]);return}try{const y=await e(n.uid,i);s(y)}catch(y){console.error("Error loading Focus Streak data:",y),s([])}};m();const v=()=>{i===new Date().getFullYear()&&m()};return window.addEventListener("focus-streak-cache-updated",v),()=>{window.removeEventListener("focus-streak-cache-updated",v)}},[n==null?void 0:n.uid,i,e]);const l=n$e(o,i),c=()=>{a(m=>m-1)},u=()=>{a(m=>m+1)},d=async()=>{if(n!=null&&n.uid){await X4e(n.uid,"test-task-id","test-project-id"),r();const m=await e(n.uid,i);s(m)}},h=i===new Date().getFullYear(),f=x.jsxs("div",{className:"flex items-center space-x-4",children:[o.length===0&&!t&&x.jsx("button",{onClick:d,className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container",children:"Add Test Data"}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:c,className:"p-1.5 rounded-full text-text-secondary hover:text-text-primary hover:bg-background-container transition-colors",title:"Previous year",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-left-s-line text-[20px]"})})}),x.jsx("span",{className:"text-lg font-medium text-text-primary min-w-[60px] text-center",children:i}),x.jsx("button",{onClick:u,className:"p-1.5 rounded-full text-text-secondary hover:text-text-primary hover:bg-background-container transition-colors",title:"Next year",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-right-s-line text-[20px]"})})})]})]});return x.jsx(fg,{title:"Focus Streak",action:f,children:t?x.jsx("div",{className:"flex items-center justify-center h-[200px]",children:x.jsx("div",{className:"text-sm text-text-secondary",children:"Loading contribution data..."})}):x.jsxs("div",{className:"h-[200px] flex flex-col overflow-hidden",children:[x.jsx("div",{className:"flex-1 flex items-center justify-center mb-4 overflow-hidden",children:x.jsx(t$e,{data:l})}),x.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[x.jsxs("div",{className:"flex items-center space-x-8",children:[h&&x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Current streak:"}),x.jsxs("div",{className:"flex items-center text-sm text-green-500 font-medium",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx("i",{className:"ri-fire-line"})}),x.jsxs("span",{children:[l.currentStreak," days"]})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Longest streak:"}),x.jsxs("div",{className:"flex items-center text-sm text-orange-500 font-medium",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx("i",{className:"ri-fire-line"})}),x.jsxs("span",{children:[l.longestStreak," days"]})]})]})]}),x.jsxs("div",{className:"flex items-center space-x-4 text-xs text-text-secondary",children:[x.jsx("span",{children:"Less"}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("div",{className:"w-[12px] h-[12px] bg-gray-100 border border-gray-200 rounded-sm dark:bg-[#161b22] dark:border-[#21262d]"}),x.jsx("div",{className:"w-[12px] h-[12px] bg-[#BA4949]/50 rounded-sm dark:bg-[#da6868]"}),x.jsx("div",{className:"w-[12px] h-[12px] bg-[#BA4949] rounded-sm dark:bg-[#ef5350]"})]}),x.jsx("span",{children:"More"})]})]})]})})};var f5,oQ;function Yl(){if(oQ)return f5;oQ=1;var n=Array.isArray;return f5=n,f5}var p5,sQ;function Oye(){if(sQ)return p5;sQ=1;var n=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;return p5=n,p5}var g5,lQ;function Hf(){if(lQ)return g5;lQ=1;var n=Oye(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return g5=t,g5}var m5,cQ;function II(){if(cQ)return m5;cQ=1;var n=Hf(),e=n.Symbol;return m5=e,m5}var v5,uQ;function i$e(){if(uQ)return v5;uQ=1;var n=II(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function a(o){var s=t.call(o,i),l=o[i];try{o[i]=void 0;var c=!0}catch{}var u=r.call(o);return c&&(s?o[i]=l:delete o[i]),u}return v5=a,v5}var y5,dQ;function a$e(){if(dQ)return y5;dQ=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return y5=t,y5}var b5,hQ;function Wg(){if(hQ)return b5;hQ=1;var n=II(),e=i$e(),t=a$e(),r="[object Null]",i="[object Undefined]",a=n?n.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):t(s)}return b5=o,b5}var w5,fQ;function qg(){if(fQ)return w5;fQ=1;function n(e){return e!=null&&typeof e=="object"}return w5=n,w5}var x5,pQ;function oT(){if(pQ)return x5;pQ=1;var n=Wg(),e=qg(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return x5=r,x5}var S5,gQ;function j7(){if(gQ)return S5;gQ=1;var n=Yl(),e=oT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(n(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!t.test(a)||o!=null&&a in Object(o)}return S5=i,S5}var _5,mQ;function by(){if(mQ)return _5;mQ=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return _5=n,_5}var T5,vQ;function F7(){if(vQ)return T5;vQ=1;var n=Wg(),e=by(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=n(s);return l==r||l==i||l==t||l==a}return T5=o,T5}var E5,yQ;function o$e(){if(yQ)return E5;yQ=1;var n=Hf(),e=n["__core-js_shared__"];return E5=e,E5}var A5,bQ;function s$e(){if(bQ)return A5;bQ=1;var n=o$e(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return A5=t,A5}var k5,wQ;function Lye(){if(wQ)return k5;wQ=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return k5=t,k5}var C5,xQ;function l$e(){if(xQ)return C5;xQ=1;var n=F7(),e=s$e(),t=by(),r=Lye(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!t(h)||e(h))return!1;var f=n(h)?u:a;return f.test(r(h))}return C5=d,C5}var D5,SQ;function c$e(){if(SQ)return D5;SQ=1;function n(e,t){return e==null?void 0:e[t]}return D5=n,D5}var I5,_Q;function qw(){if(_Q)return I5;_Q=1;var n=l$e(),e=c$e();function t(r,i){var a=e(r,i);return n(a)?a:void 0}return I5=t,I5}var M5,TQ;function $L(){if(TQ)return M5;TQ=1;var n=qw(),e=n(Object,"create");return M5=e,M5}var P5,EQ;function u$e(){if(EQ)return P5;EQ=1;var n=$L();function e(){this.__data__=n?n(null):{},this.size=0}return P5=e,P5}var N5,AQ;function d$e(){if(AQ)return N5;AQ=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return N5=n,N5}var R5,kQ;function h$e(){if(kQ)return R5;kQ=1;var n=$L(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(a){var o=this.__data__;if(n){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return R5=i,R5}var O5,CQ;function f$e(){if(CQ)return O5;CQ=1;var n=$L(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var a=this.__data__;return n?a[i]!==void 0:t.call(a,i)}return O5=r,O5}var L5,DQ;function p$e(){if(DQ)return L5;DQ=1;var n=$L(),e="__lodash_hash_undefined__";function t(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=n&&i===void 0?e:i,this}return L5=t,L5}var j5,IQ;function g$e(){if(IQ)return j5;IQ=1;var n=u$e(),e=d$e(),t=h$e(),r=f$e(),i=p$e();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,j5=a,j5}var F5,MQ;function m$e(){if(MQ)return F5;MQ=1;function n(){this.__data__=[],this.size=0}return F5=n,F5}var $5,PQ;function $7(){if(PQ)return $5;PQ=1;function n(e,t){return e===t||e!==e&&t!==t}return $5=n,$5}var B5,NQ;function BL(){if(NQ)return B5;NQ=1;var n=$7();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return B5=e,B5}var U5,RQ;function v$e(){if(RQ)return U5;RQ=1;var n=BL(),e=Array.prototype,t=e.splice;function r(i){var a=this.__data__,o=n(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return U5=r,U5}var V5,OQ;function y$e(){if(OQ)return V5;OQ=1;var n=BL();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return V5=e,V5}var z5,LQ;function b$e(){if(LQ)return z5;LQ=1;var n=BL();function e(t){return n(this.__data__,t)>-1}return z5=e,z5}var H5,jQ;function w$e(){if(jQ)return H5;jQ=1;var n=BL();function e(t,r){var i=this.__data__,a=n(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}return H5=e,H5}var G5,FQ;function UL(){if(FQ)return G5;FQ=1;var n=m$e(),e=v$e(),t=y$e(),r=b$e(),i=w$e();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,G5=a,G5}var W5,$Q;function B7(){if($Q)return W5;$Q=1;var n=qw(),e=Hf(),t=n(e,"Map");return W5=t,W5}var q5,BQ;function x$e(){if(BQ)return q5;BQ=1;var n=g$e(),e=UL(),t=B7();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return q5=r,q5}var Y5,UQ;function S$e(){if(UQ)return Y5;UQ=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Y5=n,Y5}var K5,VQ;function VL(){if(VQ)return K5;VQ=1;var n=S$e();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return K5=e,K5}var X5,zQ;function _$e(){if(zQ)return X5;zQ=1;var n=VL();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return X5=e,X5}var Z5,HQ;function T$e(){if(HQ)return Z5;HQ=1;var n=VL();function e(t){return n(this,t).get(t)}return Z5=e,Z5}var Q5,GQ;function E$e(){if(GQ)return Q5;GQ=1;var n=VL();function e(t){return n(this,t).has(t)}return Q5=e,Q5}var J5,WQ;function A$e(){if(WQ)return J5;WQ=1;var n=VL();function e(t,r){var i=n(this,t),a=i.size;return i.set(t,r),this.size+=i.size==a?0:1,this}return J5=e,J5}var e3,qQ;function U7(){if(qQ)return e3;qQ=1;var n=x$e(),e=_$e(),t=T$e(),r=E$e(),i=A$e();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=r,a.prototype.set=i,e3=a,e3}var t3,YQ;function jye(){if(YQ)return t3;YQ=1;var n=U7(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var c=r.apply(this,o);return a.cache=l.set(s,c)||l,c};return a.cache=new(t.Cache||n),a}return t.Cache=n,t3=t,t3}var n3,KQ;function k$e(){if(KQ)return n3;KQ=1;var n=jye(),e=500;function t(r){var i=n(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return n3=t,n3}var r3,XQ;function C$e(){if(XQ)return r3;XQ=1;var n=k$e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,c){a.push(l?c.replace(t,"$1"):s||o)}),a});return r3=r,r3}var i3,ZQ;function V7(){if(ZQ)return i3;ZQ=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}return i3=n,i3}var a3,QQ;function D$e(){if(QQ)return a3;QQ=1;var n=II(),e=V7(),t=Yl(),r=oT(),i=n?n.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(r(s))return a?a.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return a3=o,a3}var o3,JQ;function Fye(){if(JQ)return o3;JQ=1;var n=D$e();function e(t){return t==null?"":n(t)}return o3=e,o3}var s3,eJ;function $ye(){if(eJ)return s3;eJ=1;var n=Yl(),e=j7(),t=C$e(),r=Fye();function i(a,o){return n(a)?a:e(a,o)?[a]:t(r(a))}return s3=i,s3}var l3,tJ;function zL(){if(tJ)return l3;tJ=1;var n=oT();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return l3=e,l3}var c3,nJ;function z7(){if(nJ)return c3;nJ=1;var n=$ye(),e=zL();function t(r,i){i=n(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return c3=t,c3}var u3,rJ;function Bye(){if(rJ)return u3;rJ=1;var n=z7();function e(t,r,i){var a=t==null?void 0:n(t,r);return a===void 0?i:a}return u3=e,u3}var I$e=Bye();const zu=Lr(I$e);var d3,iJ;function M$e(){if(iJ)return d3;iJ=1;function n(e){return e==null}return d3=n,d3}var P$e=M$e();const Xr=Lr(P$e);var h3,aJ;function N$e(){if(aJ)return h3;aJ=1;var n=Wg(),e=Yl(),t=qg(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&n(a)==r}return h3=i,h3}var R$e=N$e();const Aw=Lr(R$e);var O$e=F7();const cr=Lr(O$e);var L$e=by();const sT=Lr(L$e);var f3={exports:{}},Wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oJ;function j$e(){if(oJ)return Wr;oJ=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m;m=Symbol.for("react.module.reference");function v(y){if(typeof y=="object"&&y!==null){var w=y.$$typeof;switch(w){case n:switch(y=y.type,y){case t:case i:case r:case c:case u:return y;default:switch(y=y&&y.$$typeof,y){case s:case o:case l:case h:case d:case a:return y;default:return w}}case e:return w}}}return Wr.ContextConsumer=o,Wr.ContextProvider=a,Wr.Element=n,Wr.ForwardRef=l,Wr.Fragment=t,Wr.Lazy=h,Wr.Memo=d,Wr.Portal=e,Wr.Profiler=i,Wr.StrictMode=r,Wr.Suspense=c,Wr.SuspenseList=u,Wr.isAsyncMode=function(){return!1},Wr.isConcurrentMode=function(){return!1},Wr.isContextConsumer=function(y){return v(y)===o},Wr.isContextProvider=function(y){return v(y)===a},Wr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===n},Wr.isForwardRef=function(y){return v(y)===l},Wr.isFragment=function(y){return v(y)===t},Wr.isLazy=function(y){return v(y)===h},Wr.isMemo=function(y){return v(y)===d},Wr.isPortal=function(y){return v(y)===e},Wr.isProfiler=function(y){return v(y)===i},Wr.isStrictMode=function(y){return v(y)===r},Wr.isSuspense=function(y){return v(y)===c},Wr.isSuspenseList=function(y){return v(y)===u},Wr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===t||y===i||y===r||y===c||y===u||y===f||typeof y=="object"&&y!==null&&(y.$$typeof===h||y.$$typeof===d||y.$$typeof===a||y.$$typeof===o||y.$$typeof===l||y.$$typeof===m||y.getModuleId!==void 0)},Wr.typeOf=v,Wr}var sJ;function F$e(){return sJ||(sJ=1,f3.exports=j$e()),f3.exports}var $$e=F$e(),p3,lJ;function Uye(){if(lJ)return p3;lJ=1;var n=Wg(),e=qg(),t="[object Number]";function r(i){return typeof i=="number"||e(i)&&n(i)==t}return p3=r,p3}var g3,cJ;function B$e(){if(cJ)return g3;cJ=1;var n=Uye();function e(t){return n(t)&&t!=+t}return g3=e,g3}var U$e=B$e();const MI=Lr(U$e);var V$e=Uye();const z$e=Lr(V$e);var Kd=function(e){return e===0?0:e>0?1:-1},Hb=function(e){return Aw(e)&&e.indexOf("%")===e.length-1},wt=function(e){return z$e(e)&&!MI(e)},oo=function(e){return wt(e)||Aw(e)},H$e=0,HL=function(e){var t=++H$e;return"".concat(e||"").concat(t)},kw=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!wt(e)&&!Aw(e))return r;var a;if(Hb(e)){var o=e.indexOf("%");a=t*parseFloat(e.slice(0,o))/100}else a=+e;return MI(a)&&(a=r),i&&a>t&&(a=t),a},Pv=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},G$e=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},i=0;i<t;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},PS=function(e,t){return wt(e)&&wt(t)?function(r){return e+r*(t-e)}:function(){return t}};function az(n,e,t){return!n||!n.length?null:n.find(function(r){return r&&(typeof e=="function"?e(r):zu(r,e))===t})}var W$e=function(e,t){return wt(e)&&wt(t)?e-t:Aw(e)&&Aw(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function V_(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function oz(n){"@babel/helpers - typeof";return oz=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oz(n)}var q$e=["viewBox","children"],Y$e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],uJ=["points","pathLength"],m3={svg:q$e,polygon:uJ,polyline:uJ},H7=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],iO=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(Y.isValidElement(e)&&(r=e.props),!sT(r))return null;var i={};return Object.keys(r).forEach(function(a){H7.includes(a)&&(i[a]=t||function(o){return r[a](r,o)})}),i},K$e=function(e,t,r){return function(i){return e(t,r,i),null}},aO=function(e,t,r){if(!sT(e)||oz(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];H7.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=K$e(o,t,r))}),i},X$e=["children"],Z$e=["children"];function dJ(n,e){if(n==null)return{};var t=Q$e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Q$e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var hJ={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},pg=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},fJ=null,v3=null,G7=function n(e){if(e===fJ&&Array.isArray(v3))return v3;var t=[];return Y.Children.forEach(e,function(r){Xr(r)||($$e.isFragment(r)?t=t.concat(n(r.props.children)):t.push(r))}),v3=t,fJ=e,t};function eh(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(function(i){return pg(i)}):r=[pg(e)],G7(n).forEach(function(i){var a=zu(i,"type.displayName")||zu(i,"type.name");r.indexOf(a)!==-1&&t.push(i)}),t}function Cc(n,e){var t=eh(n,e);return t&&t[0]}var pJ=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,i=t.height;return!(!wt(r)||r<=0||!wt(i)||i<=0)},J$e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eBe=function(e){return e&&e.type&&Aw(e.type)&&J$e.indexOf(e.type)>=0},tBe=function(e,t,r,i){var a,o=(a=m3==null?void 0:m3[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!cr(e)&&(i&&o.includes(t)||Y$e.includes(t))||r&&H7.includes(t)},Vr=function(e,t,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(Y.isValidElement(e)&&(i=e.props),!sT(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;tBe((s=i)===null||s===void 0?void 0:s[o],o,t,r)&&(a[o]=i[o])}),a},sz=function n(e,t){if(e===t)return!0;var r=Y.Children.count(e);if(r!==Y.Children.count(t))return!1;if(r===0)return!0;if(r===1)return gJ(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<r;i++){var a=e[i],o=t[i];if(Array.isArray(a)||Array.isArray(o)){if(!n(a,o))return!1}else if(!gJ(a,o))return!1}return!0},gJ=function(e,t){if(Xr(e)&&Xr(t))return!0;if(!Xr(e)&&!Xr(t)){var r=e.props||{},i=r.children,a=dJ(r,X$e),o=t.props||{},s=o.children,l=dJ(o,Z$e);return i&&s?V_(a,l)&&sz(i,s):!i&&!s?V_(a,l):!1}return!1},mJ=function(e,t){var r=[],i={};return G7(e).forEach(function(a,o){if(eBe(a))r.push(a);else if(a){var s=pg(a.type),l=t[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var d=c(a,s,o);r.push(d),i[s]=!0}}}),r},nBe=function(e){var t=e&&e.type;return t&&hJ[t]?hJ[t]:null},rBe=function(e,t){return G7(t).indexOf(e)},iBe=["children","width","height","viewBox","className","style","title","desc"];function lz(){return lz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lz.apply(this,arguments)}function aBe(n,e){if(n==null)return{};var t=oBe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function oBe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function cz(n){var e=n.children,t=n.width,r=n.height,i=n.viewBox,a=n.className,o=n.style,s=n.title,l=n.desc,c=aBe(n,iBe),u=i||{width:t,height:r,x:0,y:0},d=Nr("recharts-surface",a);return we.createElement("svg",lz({},Vr(c,!0,"svg"),{className:d,width:t,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),we.createElement("title",null,s),we.createElement("desc",null,l),e)}var sBe=["children","className"];function uz(){return uz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uz.apply(this,arguments)}function lBe(n,e){if(n==null)return{};var t=cBe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function cBe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var Do=we.forwardRef(function(n,e){var t=n.children,r=n.className,i=lBe(n,sBe),a=Nr("recharts-layer",r);return we.createElement("g",uz({className:a},Vr(i,!0),{ref:e}),t)}),gg=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},y3,vJ;function uBe(){if(vJ)return y3;vJ=1;function n(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+t];return o}return y3=n,y3}var b3,yJ;function dBe(){if(yJ)return b3;yJ=1;var n=uBe();function e(t,r,i){var a=t.length;return i=i===void 0?a:i,!r&&i>=a?t:n(t,r,i)}return b3=e,b3}var w3,bJ;function Vye(){if(bJ)return w3;bJ=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+n+i+a+"]");function l(c){return s.test(c)}return w3=l,w3}var x3,wJ;function hBe(){if(wJ)return x3;wJ=1;function n(e){return e.split("")}return x3=n,x3}var S3,xJ;function fBe(){if(xJ)return S3;xJ=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+t+r,a="\\ufe0e\\ufe0f",o="["+n+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+n+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",m=c+"?",v="["+a+"]?",y="(?:"+f+"(?:"+[u,d,h].join("|")+")"+v+m+")*",w=v+m+y,S="(?:"+[u+s+"?",s,d,h,o].join("|")+")",T=RegExp(l+"(?="+l+")|"+S+w,"g");function C(k){return k.match(T)||[]}return S3=C,S3}var _3,SJ;function pBe(){if(SJ)return _3;SJ=1;var n=hBe(),e=Vye(),t=fBe();function r(i){return e(i)?t(i):n(i)}return _3=r,_3}var T3,_J;function gBe(){if(_J)return T3;_J=1;var n=dBe(),e=Vye(),t=pBe(),r=Fye();function i(a){return function(o){o=r(o);var s=e(o)?t(o):void 0,l=s?s[0]:o.charAt(0),c=s?n(s,1).join(""):o.slice(1);return l[a]()+c}}return T3=i,T3}var E3,TJ;function mBe(){if(TJ)return E3;TJ=1;var n=gBe(),e=n("toUpperCase");return E3=e,E3}var vBe=mBe();const GL=Lr(vBe);function Di(n){return function(){return n}}const zye=Math.cos,oO=Math.sin,dh=Math.sqrt,sO=Math.PI,WL=2*sO,dz=Math.PI,hz=2*dz,_b=1e-6,yBe=hz-_b;function Hye(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function bBe(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return Hye;const t=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}let wBe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hye:bBe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,a,o){this._append`C${+e},${+t},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,t,r,i,a){if(e=+e,t=+t,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-t,u=o-e,d=s-t,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>_b)if(!(Math.abs(d*l-c*u)>_b)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let f=r-o,m=i-s,v=l*l+c*c,y=f*f+m*m,w=Math.sqrt(v),S=Math.sqrt(h),T=a*Math.tan((dz-Math.acos((v+h-y)/(2*w*S)))/2),C=T/S,k=T/w;Math.abs(C-1)>_b&&this._append`L${e+C*u},${t+C*d}`,this._append`A${a},${a},0,0,${+(d*f>u*m)},${this._x1=e+k*l},${this._y1=t+k*c}`}}arc(e,t,r,i,a,o){if(e=+e,t=+t,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=t+l,d=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>_b||Math.abs(this._y1-u)>_b)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%hz+hz),h>yBe?this._append`A${r},${r},0,1,${d},${e-s},${t-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>_b&&this._append`A${r},${r},0,${+(h>=dz)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function W7(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new wBe(e)}function q7(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Gye(n){this._context=n}Gye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function qL(n){return new Gye(n)}function Wye(n){return n[0]}function qye(n){return n[1]}function Yye(n,e){var t=Di(!0),r=null,i=qL,a=null,o=W7(s);n=typeof n=="function"?n:n===void 0?Wye:Di(n),e=typeof e=="function"?e:e===void 0?qye:Di(e);function s(l){var c,u=(l=q7(l)).length,d,h=!1,f;for(r==null&&(a=i(f=o())),c=0;c<=u;++c)!(c<u&&t(d=l[c],c,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+n(d,c,l),+e(d,c,l));if(f)return a=null,f+""||null}return s.x=function(l){return arguments.length?(n=typeof l=="function"?l:Di(+l),s):n},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Di(+l),s):e},s.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Di(!!l),s):t},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function mP(n,e,t){var r=null,i=Di(!0),a=null,o=qL,s=null,l=W7(c);n=typeof n=="function"?n:n===void 0?Wye:Di(+n),e=typeof e=="function"?e:Di(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?qye:Di(+t);function c(d){var h,f,m,v=(d=q7(d)).length,y,w=!1,S,T=new Array(v),C=new Array(v);for(a==null&&(s=o(S=l())),h=0;h<=v;++h){if(!(h<v&&i(y=d[h],h,d))===w)if(w=!w)f=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=f;--m)s.point(T[m],C[m]);s.lineEnd(),s.areaEnd()}w&&(T[h]=+n(y,h,d),C[h]=+e(y,h,d),s.point(r?+r(y,h,d):T[h],t?+t(y,h,d):C[h]))}if(S)return s=null,S+""||null}function u(){return Yye().defined(i).curve(o).context(a)}return c.x=function(d){return arguments.length?(n=typeof d=="function"?d:Di(+d),r=null,c):n},c.x0=function(d){return arguments.length?(n=typeof d=="function"?d:Di(+d),c):n},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Di(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Di(+d),t=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Di(+d),c):e},c.y1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:Di(+d),c):t},c.lineX0=c.lineY0=function(){return u().x(n).y(e)},c.lineY1=function(){return u().x(n).y(t)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Di(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),c):a},c}class Kye{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function xBe(n){return new Kye(n,!0)}function SBe(n){return new Kye(n,!1)}const Y7={draw(n,e){const t=dh(e/sO);n.moveTo(t,0),n.arc(0,0,t,0,WL)}},_Be={draw(n,e){const t=dh(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},Xye=dh(1/3),TBe=Xye*2,EBe={draw(n,e){const t=dh(e/TBe),r=t*Xye;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},ABe={draw(n,e){const t=dh(e),r=-t/2;n.rect(r,r,t,t)}},kBe=.8908130915292852,Zye=oO(sO/10)/oO(7*sO/10),CBe=oO(WL/10)*Zye,DBe=-zye(WL/10)*Zye,IBe={draw(n,e){const t=dh(e*kBe),r=CBe*t,i=DBe*t;n.moveTo(0,-t),n.lineTo(r,i);for(let a=1;a<5;++a){const o=WL*a/5,s=zye(o),l=oO(o);n.lineTo(l*t,-s*t),n.lineTo(s*r-l*i,l*r+s*i)}n.closePath()}},A3=dh(3),MBe={draw(n,e){const t=-dh(e/(A3*3));n.moveTo(0,t*2),n.lineTo(-A3*t,-t),n.lineTo(A3*t,-t),n.closePath()}},mu=-.5,vu=dh(3)/2,fz=1/dh(12),PBe=(fz/2+1)*3,NBe={draw(n,e){const t=dh(e/PBe),r=t/2,i=t*fz,a=r,o=t*fz+t,s=-a,l=o;n.moveTo(r,i),n.lineTo(a,o),n.lineTo(s,l),n.lineTo(mu*r-vu*i,vu*r+mu*i),n.lineTo(mu*a-vu*o,vu*a+mu*o),n.lineTo(mu*s-vu*l,vu*s+mu*l),n.lineTo(mu*r+vu*i,mu*i-vu*r),n.lineTo(mu*a+vu*o,mu*o-vu*a),n.lineTo(mu*s+vu*l,mu*l-vu*s),n.closePath()}};function RBe(n,e){let t=null,r=W7(i);n=typeof n=="function"?n:Di(n||Y7),e=typeof e=="function"?e:Di(e===void 0?64:+e);function i(){let a;if(t||(t=a=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(n=typeof a=="function"?a:Di(a),i):n},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Di(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function lO(){}function cO(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function Qye(n){this._context=n}Qye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cO(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function OBe(n){return new Qye(n)}function Jye(n){this._context=n}Jye.prototype={areaStart:lO,areaEnd:lO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:cO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function LBe(n){return new Jye(n)}function e0e(n){this._context=n}e0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:cO(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function jBe(n){return new e0e(n)}function t0e(n){this._context=n}t0e.prototype={areaStart:lO,areaEnd:lO,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function FBe(n){return new t0e(n)}function EJ(n){return n<0?-1:1}function AJ(n,e,t){var r=n._x1-n._x0,i=e-n._x1,a=(n._y1-n._y0)/(r||i<0&&-0),o=(t-n._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(EJ(a)+EJ(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function kJ(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function k3(n,e,t){var r=n._x0,i=n._y0,a=n._x1,o=n._y1,s=(a-r)/3;n._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*t,a,o)}function uO(n){this._context=n}uO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k3(this,this._t0,kJ(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,k3(this,kJ(this,t=AJ(this,n,e)),t);break;default:k3(this,this._t0,t=AJ(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function n0e(n){this._context=new r0e(n)}(n0e.prototype=Object.create(uO.prototype)).point=function(n,e){uO.prototype.point.call(this,e,n)};function r0e(n){this._context=n}r0e.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,a){this._context.bezierCurveTo(e,n,r,t,a,i)}};function $Be(n){return new uO(n)}function BBe(n){return new n0e(n)}function i0e(n){this._context=n}i0e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=CJ(n),i=CJ(e),a=0,o=1;o<t;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],n[o],e[o]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function CJ(n){var e,t=n.length-1,r,i=new Array(t),a=new Array(t),o=new Array(t);for(i[0]=0,a[0]=2,o[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,o[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,a[t-1]=7,o[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[t-1]=o[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*n[e+1]-i[e+1];return[i,a]}function UBe(n){return new i0e(n)}function YL(n,e){this._context=n,this._t=e}YL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function VBe(n){return new YL(n,.5)}function zBe(n){return new YL(n,0)}function HBe(n){return new YL(n,1)}function m1(n,e){if((o=n.length)>1)for(var t=1,r,i,a=n[e[0]],o,s=a.length;t<o;++t)for(i=a,a=n[e[t]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function pz(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function GBe(n,e){return n[e]}function WBe(n){const e=[];return e.key=n,e}function qBe(){var n=Di([]),e=pz,t=m1,r=GBe;function i(a){var o=Array.from(n.apply(this,arguments),WBe),s,l=o.length,c=-1,u;for(const d of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,a)]).data=d;for(s=0,u=q7(e(o));s<l;++s)o[u[s]].index=s;return t(o,u),o}return i.keys=function(a){return arguments.length?(n=typeof a=="function"?a:Di(Array.from(a)),i):n},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Di(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?pz:typeof a=="function"?a:Di(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??m1,i):t},i}function YBe(n,e){if((r=n.length)>0){for(var t,r,i=0,a=n[0].length,o;i<a;++i){for(o=t=0;t<r;++t)o+=n[t][i][1]||0;if(o)for(t=0;t<r;++t)n[t][i][1]/=o}m1(n,e)}}function KBe(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,a=r.length;t<a;++t){for(var o=0,s=0;o<i;++o)s+=n[o][t][1]||0;r[t][1]+=r[t][0]=-s/2}m1(n,e)}}function XBe(n,e){if(!(!((o=n.length)>0)||!((a=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var u=n[e[s]],d=u[r][1]||0,h=u[r-1][1]||0,f=(d-h)/2,m=0;m<s;++m){var v=n[e[m]],y=v[r][1]||0,w=v[r-1][1]||0;f+=y-w}l+=d,c+=f*d}i[r-1][1]+=i[r-1][0]=t,l&&(t-=c/l)}i[r-1][1]+=i[r-1][0]=t,m1(n,e)}}function VC(n){"@babel/helpers - typeof";return VC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VC(n)}var ZBe=["type","size","sizeType"];function gz(){return gz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gz.apply(this,arguments)}function DJ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function IJ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DJ(Object(t),!0).forEach(function(r){QBe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DJ(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function QBe(n,e,t){return e=JBe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JBe(n){var e=e6e(n,"string");return VC(e)=="symbol"?e:e+""}function e6e(n,e){if(VC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(VC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function t6e(n,e){if(n==null)return{};var t=n6e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function n6e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var a0e={symbolCircle:Y7,symbolCross:_Be,symbolDiamond:EBe,symbolSquare:ABe,symbolStar:IBe,symbolTriangle:MBe,symbolWye:NBe},r6e=Math.PI/180,i6e=function(e){var t="symbol".concat(GL(e));return a0e[t]||Y7},a6e=function(e,t,r){if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*r6e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},o6e=function(e,t){a0e["symbol".concat(GL(e))]=t},K7=function(e){var t=e.type,r=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=t6e(e,ZBe),c=IJ(IJ({},l),{},{type:r,size:a,sizeType:s}),u=function(){var y=i6e(r),w=RBe().type(y).size(a6e(a,s,r));return w()},d=c.className,h=c.cx,f=c.cy,m=Vr(c,!0);return h===+h&&f===+f&&a===+a?we.createElement("path",gz({},m,{className:Nr("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(f,")"),d:u()})):null};K7.registerSymbol=o6e;function v1(n){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(n)}function mz(){return mz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mz.apply(this,arguments)}function MJ(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function s6e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?MJ(Object(t),!0).forEach(function(r){zC(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):MJ(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l6e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function c6e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,s0e(r.key),r)}}function u6e(n,e,t){return e&&c6e(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function d6e(n,e,t){return e=dO(e),h6e(n,o0e()?Reflect.construct(e,t||[],dO(n).constructor):e.apply(n,t))}function h6e(n,e){if(e&&(v1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f6e(n)}function f6e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function o0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o0e=function(){return!!n})()}function dO(n){return dO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dO(n)}function p6e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vz(n,e)}function vz(n,e){return vz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vz(n,e)}function zC(n,e,t){return e=s0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s0e(n){var e=g6e(n,"string");return v1(e)=="symbol"?e:e+""}function g6e(n,e){if(v1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(v1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var yu=32,X7=function(n){function e(){return l6e(this,e),d6e(this,e,arguments)}return p6e(e,n),u6e(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=yu/2,o=yu/6,s=yu/3,l=r.inactive?i:r.color;if(r.type==="plainline")return we.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:yu,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return we.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(yu,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return we.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(yu/8,"h").concat(yu,"v").concat(yu*3/4,"h").concat(-yu,"z"),className:"recharts-legend-icon"});if(we.isValidElement(r.legendIcon)){var c=s6e({},r);return delete c.legendIcon,we.cloneElement(r.legendIcon,c)}return we.createElement(K7,{fill:l,cx:a,cy:a,size:yu,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:yu,height:yu},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(f,m){var v=f.formatter||l,y=Nr(zC(zC({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",f.inactive));if(f.type==="none")return null;var w=cr(f.value)?null:f.value;gg(!cr(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=f.inactive?c:f.color;return we.createElement("li",mz({className:y,style:d,key:"legend-item-".concat(m)},aO(r.props,f,m)),we.createElement(cz,{width:o,height:o,viewBox:u,style:h},r.renderIcon(f)),we.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},v?v(w,f,m):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return we.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(Y.PureComponent);zC(X7,"displayName","Legend");zC(X7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var C3,PJ;function m6e(){if(PJ)return C3;PJ=1;var n=UL();function e(){this.__data__=new n,this.size=0}return C3=e,C3}var D3,NJ;function v6e(){if(NJ)return D3;NJ=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return D3=n,D3}var I3,RJ;function y6e(){if(RJ)return I3;RJ=1;function n(e){return this.__data__.get(e)}return I3=n,I3}var M3,OJ;function b6e(){if(OJ)return M3;OJ=1;function n(e){return this.__data__.has(e)}return M3=n,M3}var P3,LJ;function w6e(){if(LJ)return P3;LJ=1;var n=UL(),e=B7(),t=U7(),r=200;function i(a,o){var s=this.__data__;if(s instanceof n){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(l)}return s.set(a,o),this.size=s.size,this}return P3=i,P3}var N3,jJ;function l0e(){if(jJ)return N3;jJ=1;var n=UL(),e=m6e(),t=v6e(),r=y6e(),i=b6e(),a=w6e();function o(s){var l=this.__data__=new n(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,N3=o,N3}var R3,FJ;function x6e(){if(FJ)return R3;FJ=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return R3=e,R3}var O3,$J;function S6e(){if($J)return O3;$J=1;function n(e){return this.__data__.has(e)}return O3=n,O3}var L3,BJ;function c0e(){if(BJ)return L3;BJ=1;var n=U7(),e=x6e(),t=S6e();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new n;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,L3=r,L3}var j3,UJ;function u0e(){if(UJ)return j3;UJ=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return j3=n,j3}var F3,VJ;function d0e(){if(VJ)return F3;VJ=1;function n(e,t){return e.has(t)}return F3=n,F3}var $3,zJ;function h0e(){if(zJ)return $3;zJ=1;var n=c0e(),e=u0e(),t=d0e(),r=1,i=2;function a(o,s,l,c,u,d){var h=l&r,f=o.length,m=s.length;if(f!=m&&!(h&&m>f))return!1;var v=d.get(o),y=d.get(s);if(v&&y)return v==s&&y==o;var w=-1,S=!0,T=l&i?new n:void 0;for(d.set(o,s),d.set(s,o);++w<f;){var C=o[w],k=s[w];if(c)var A=h?c(k,C,w,s,o,d):c(C,k,w,o,s,d);if(A!==void 0){if(A)continue;S=!1;break}if(T){if(!e(s,function(D,P){if(!t(T,P)&&(C===D||u(C,D,l,c,d)))return T.push(P)})){S=!1;break}}else if(!(C===k||u(C,k,l,c,d))){S=!1;break}}return d.delete(o),d.delete(s),S}return $3=a,$3}var B3,HJ;function _6e(){if(HJ)return B3;HJ=1;var n=Hf(),e=n.Uint8Array;return B3=e,B3}var U3,GJ;function T6e(){if(GJ)return U3;GJ=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,a){r[++t]=[a,i]}),r}return U3=n,U3}var V3,WJ;function Z7(){if(WJ)return V3;WJ=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return V3=n,V3}var z3,qJ;function E6e(){if(qJ)return z3;qJ=1;var n=II(),e=_6e(),t=$7(),r=h0e(),i=T6e(),a=Z7(),o=1,s=2,l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Map]",h="[object Number]",f="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",T=n?n.prototype:void 0,C=T?T.valueOf:void 0;function k(A,D,P,N,R,L,B){switch(P){case S:if(A.byteLength!=D.byteLength||A.byteOffset!=D.byteOffset)return!1;A=A.buffer,D=D.buffer;case w:return!(A.byteLength!=D.byteLength||!L(new e(A),new e(D)));case l:case c:case h:return t(+A,+D);case u:return A.name==D.name&&A.message==D.message;case f:case v:return A==D+"";case d:var $=i;case m:var G=N&o;if($||($=a),A.size!=D.size&&!G)return!1;var W=B.get(A);if(W)return W==D;N|=s,B.set(A,D);var K=r($(A),$(D),N,R,L,B);return B.delete(A),K;case y:if(C)return C.call(A)==C.call(D)}return!1}return z3=k,z3}var H3,YJ;function f0e(){if(YJ)return H3;YJ=1;function n(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}return H3=n,H3}var G3,KJ;function A6e(){if(KJ)return G3;KJ=1;var n=f0e(),e=Yl();function t(r,i,a){var o=i(r);return e(r)?o:n(o,a(r))}return G3=t,G3}var W3,XJ;function k6e(){if(XJ)return W3;XJ=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];t(s,r,e)&&(o[a++]=s)}return o}return W3=n,W3}var q3,ZJ;function C6e(){if(ZJ)return q3;ZJ=1;function n(){return[]}return q3=n,q3}var Y3,QJ;function D6e(){if(QJ)return Y3;QJ=1;var n=k6e(),e=C6e(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(s){return r.call(o,s)}))}:e;return Y3=a,Y3}var K3,JJ;function I6e(){if(JJ)return K3;JJ=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return K3=n,K3}var X3,eee;function M6e(){if(eee)return X3;eee=1;var n=Wg(),e=qg(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return X3=r,X3}var Z3,tee;function Q7(){if(tee)return Z3;tee=1;var n=M6e(),e=qg(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Z3=a,Z3}var vk={exports:{}},Q3,nee;function P6e(){if(nee)return Q3;nee=1;function n(){return!1}return Q3=n,Q3}vk.exports;var ree;function p0e(){return ree||(ree=1,function(n,e){var t=Hf(),r=P6e(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o?t.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;n.exports=c}(vk,vk.exports)),vk.exports}var J3,iee;function J7(){if(iee)return J3;iee=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var a=typeof r;return i=i??n,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return J3=t,J3}var e4,aee;function eW(){if(aee)return e4;aee=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return e4=e,e4}var t4,oee;function N6e(){if(oee)return t4;oee=1;var n=Wg(),e=eW(),t=qg(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",f="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",T="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",A="[object Int32Array]",D="[object Uint8Array]",P="[object Uint8ClampedArray]",N="[object Uint16Array]",R="[object Uint32Array]",L={};L[S]=L[T]=L[C]=L[k]=L[A]=L[D]=L[P]=L[N]=L[R]=!0,L[r]=L[i]=L[y]=L[a]=L[w]=L[o]=L[s]=L[l]=L[c]=L[u]=L[d]=L[h]=L[f]=L[m]=L[v]=!1;function B($){return t($)&&e($.length)&&!!L[n($)]}return t4=B,t4}var n4,see;function g0e(){if(see)return n4;see=1;function n(e){return function(t){return e(t)}}return n4=n,n4}var yk={exports:{}};yk.exports;var lee;function R6e(){return lee||(lee=1,function(n,e){var t=Oye(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,a=i&&i.exports===r,o=a&&t.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=s}(yk,yk.exports)),yk.exports}var r4,cee;function m0e(){if(cee)return r4;cee=1;var n=N6e(),e=g0e(),t=R6e(),r=t&&t.isTypedArray,i=r?e(r):n;return r4=i,r4}var i4,uee;function O6e(){if(uee)return i4;uee=1;var n=I6e(),e=Q7(),t=Yl(),r=p0e(),i=J7(),a=m0e(),o=Object.prototype,s=o.hasOwnProperty;function l(c,u){var d=t(c),h=!d&&e(c),f=!d&&!h&&r(c),m=!d&&!h&&!f&&a(c),v=d||h||f||m,y=v?n(c.length,String):[],w=y.length;for(var S in c)(u||s.call(c,S))&&!(v&&(S=="length"||f&&(S=="offset"||S=="parent")||m&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||i(S,w)))&&y.push(S);return y}return i4=l,i4}var a4,dee;function L6e(){if(dee)return a4;dee=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return a4=e,a4}var o4,hee;function v0e(){if(hee)return o4;hee=1;function n(e,t){return function(r){return e(t(r))}}return o4=n,o4}var s4,fee;function j6e(){if(fee)return s4;fee=1;var n=v0e(),e=n(Object.keys,Object);return s4=e,s4}var l4,pee;function F6e(){if(pee)return l4;pee=1;var n=L6e(),e=j6e(),t=Object.prototype,r=t.hasOwnProperty;function i(a){if(!n(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return l4=i,l4}var c4,gee;function PI(){if(gee)return c4;gee=1;var n=F7(),e=eW();function t(r){return r!=null&&e(r.length)&&!n(r)}return c4=t,c4}var u4,mee;function KL(){if(mee)return u4;mee=1;var n=O6e(),e=F6e(),t=PI();function r(i){return t(i)?n(i):e(i)}return u4=r,u4}var d4,vee;function $6e(){if(vee)return d4;vee=1;var n=A6e(),e=D6e(),t=KL();function r(i){return n(i,t,e)}return d4=r,d4}var h4,yee;function B6e(){if(yee)return h4;yee=1;var n=$6e(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(a,o,s,l,c,u){var d=s&e,h=n(a),f=h.length,m=n(o),v=m.length;if(f!=v&&!d)return!1;for(var y=f;y--;){var w=h[y];if(!(d?w in o:r.call(o,w)))return!1}var S=u.get(a),T=u.get(o);if(S&&T)return S==o&&T==a;var C=!0;u.set(a,o),u.set(o,a);for(var k=d;++y<f;){w=h[y];var A=a[w],D=o[w];if(l)var P=d?l(D,A,w,o,a,u):l(A,D,w,a,o,u);if(!(P===void 0?A===D||c(A,D,s,l,u):P)){C=!1;break}k||(k=w=="constructor")}if(C&&!k){var N=a.constructor,R=o.constructor;N!=R&&"constructor"in a&&"constructor"in o&&!(typeof N=="function"&&N instanceof N&&typeof R=="function"&&R instanceof R)&&(C=!1)}return u.delete(a),u.delete(o),C}return h4=i,h4}var f4,bee;function U6e(){if(bee)return f4;bee=1;var n=qw(),e=Hf(),t=n(e,"DataView");return f4=t,f4}var p4,wee;function V6e(){if(wee)return p4;wee=1;var n=qw(),e=Hf(),t=n(e,"Promise");return p4=t,p4}var g4,xee;function y0e(){if(xee)return g4;xee=1;var n=qw(),e=Hf(),t=n(e,"Set");return g4=t,g4}var m4,See;function z6e(){if(See)return m4;See=1;var n=qw(),e=Hf(),t=n(e,"WeakMap");return m4=t,m4}var v4,_ee;function H6e(){if(_ee)return v4;_ee=1;var n=U6e(),e=B7(),t=V6e(),r=y0e(),i=z6e(),a=Wg(),o=Lye(),s="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",d="[object WeakMap]",h="[object DataView]",f=o(n),m=o(e),v=o(t),y=o(r),w=o(i),S=a;return(n&&S(new n(new ArrayBuffer(1)))!=h||e&&S(new e)!=s||t&&S(t.resolve())!=c||r&&S(new r)!=u||i&&S(new i)!=d)&&(S=function(T){var C=a(T),k=C==l?T.constructor:void 0,A=k?o(k):"";if(A)switch(A){case f:return h;case m:return s;case v:return c;case y:return u;case w:return d}return C}),v4=S,v4}var y4,Tee;function G6e(){if(Tee)return y4;Tee=1;var n=l0e(),e=h0e(),t=E6e(),r=B6e(),i=H6e(),a=Yl(),o=p0e(),s=m0e(),l=1,c="[object Arguments]",u="[object Array]",d="[object Object]",h=Object.prototype,f=h.hasOwnProperty;function m(v,y,w,S,T,C){var k=a(v),A=a(y),D=k?u:i(v),P=A?u:i(y);D=D==c?d:D,P=P==c?d:P;var N=D==d,R=P==d,L=D==P;if(L&&o(v)){if(!o(y))return!1;k=!0,N=!1}if(L&&!N)return C||(C=new n),k||s(v)?e(v,y,w,S,T,C):t(v,y,D,w,S,T,C);if(!(w&l)){var B=N&&f.call(v,"__wrapped__"),$=R&&f.call(y,"__wrapped__");if(B||$){var G=B?v.value():v,W=$?y.value():y;return C||(C=new n),T(G,W,w,S,C)}}return L?(C||(C=new n),r(v,y,w,S,T,C)):!1}return y4=m,y4}var b4,Eee;function tW(){if(Eee)return b4;Eee=1;var n=G6e(),e=qg();function t(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,a,o,t,s)}return b4=t,b4}var w4,Aee;function W6e(){if(Aee)return w4;Aee=1;var n=l0e(),e=tW(),t=1,r=2;function i(a,o,s,l){var c=s.length,u=c,d=!l;if(a==null)return!u;for(a=Object(a);c--;){var h=s[c];if(d&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<u;){h=s[c];var f=h[0],m=a[f],v=h[1];if(d&&h[2]){if(m===void 0&&!(f in a))return!1}else{var y=new n;if(l)var w=l(m,v,f,a,o,y);if(!(w===void 0?e(v,m,t|r,l,y):w))return!1}}return!0}return w4=i,w4}var x4,kee;function b0e(){if(kee)return x4;kee=1;var n=by();function e(t){return t===t&&!n(t)}return x4=e,x4}var S4,Cee;function q6e(){if(Cee)return S4;Cee=1;var n=b0e(),e=KL();function t(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,n(s)]}return i}return S4=t,S4}var _4,Dee;function w0e(){if(Dee)return _4;Dee=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return _4=n,_4}var T4,Iee;function Y6e(){if(Iee)return T4;Iee=1;var n=W6e(),e=q6e(),t=w0e();function r(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(o){return o===i||n(o,i,a)}}return T4=r,T4}var E4,Mee;function K6e(){if(Mee)return E4;Mee=1;function n(e,t){return e!=null&&t in Object(e)}return E4=n,E4}var A4,Pee;function X6e(){if(Pee)return A4;Pee=1;var n=$ye(),e=Q7(),t=Yl(),r=J7(),i=eW(),a=zL();function o(s,l,c){l=n(l,s);for(var u=-1,d=l.length,h=!1;++u<d;){var f=a(l[u]);if(!(h=s!=null&&c(s,f)))break;s=s[f]}return h||++u!=d?h:(d=s==null?0:s.length,!!d&&i(d)&&r(f,d)&&(t(s)||e(s)))}return A4=o,A4}var k4,Nee;function Z6e(){if(Nee)return k4;Nee=1;var n=K6e(),e=X6e();function t(r,i){return r!=null&&e(r,i,n)}return k4=t,k4}var C4,Ree;function Q6e(){if(Ree)return C4;Ree=1;var n=tW(),e=Bye(),t=Z6e(),r=j7(),i=b0e(),a=w0e(),o=zL(),s=1,l=2;function c(u,d){return r(u)&&i(d)?a(o(u),d):function(h){var f=e(h,u);return f===void 0&&f===d?t(h,u):n(d,f,s|l)}}return C4=c,C4}var D4,Oee;function lT(){if(Oee)return D4;Oee=1;function n(e){return e}return D4=n,D4}var I4,Lee;function J6e(){if(Lee)return I4;Lee=1;function n(e){return function(t){return t==null?void 0:t[e]}}return I4=n,I4}var M4,jee;function eUe(){if(jee)return M4;jee=1;var n=z7();function e(t){return function(r){return n(r,t)}}return M4=e,M4}var P4,Fee;function tUe(){if(Fee)return P4;Fee=1;var n=J6e(),e=eUe(),t=j7(),r=zL();function i(a){return t(a)?n(r(a)):e(a)}return P4=i,P4}var N4,$ee;function wy(){if($ee)return N4;$ee=1;var n=Y6e(),e=Q6e(),t=lT(),r=Yl(),i=tUe();function a(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?e(o[0],o[1]):n(o):i(o)}return N4=a,N4}var R4,Bee;function x0e(){if(Bee)return R4;Bee=1;function n(e,t,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}return R4=n,R4}var O4,Uee;function nUe(){if(Uee)return O4;Uee=1;function n(e){return e!==e}return O4=n,O4}var L4,Vee;function rUe(){if(Vee)return L4;Vee=1;function n(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return L4=n,L4}var j4,zee;function iUe(){if(zee)return j4;zee=1;var n=x0e(),e=nUe(),t=rUe();function r(i,a,o){return a===a?t(i,a,o):n(i,e,o)}return j4=r,j4}var F4,Hee;function aUe(){if(Hee)return F4;Hee=1;var n=iUe();function e(t,r){var i=t==null?0:t.length;return!!i&&n(t,r,0)>-1}return F4=e,F4}var $4,Gee;function oUe(){if(Gee)return $4;Gee=1;function n(e,t,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1}return $4=n,$4}var B4,Wee;function sUe(){if(Wee)return B4;Wee=1;function n(){}return B4=n,B4}var U4,qee;function lUe(){if(qee)return U4;qee=1;var n=y0e(),e=sUe(),t=Z7(),r=1/0,i=n&&1/t(new n([,-0]))[1]==r?function(a){return new n(a)}:e;return U4=i,U4}var V4,Yee;function cUe(){if(Yee)return V4;Yee=1;var n=c0e(),e=aUe(),t=oUe(),r=d0e(),i=lUe(),a=Z7(),o=200;function s(l,c,u){var d=-1,h=e,f=l.length,m=!0,v=[],y=v;if(u)m=!1,h=t;else if(f>=o){var w=c?null:i(l);if(w)return a(w);m=!1,h=r,y=new n}else y=c?[]:v;e:for(;++d<f;){var S=l[d],T=c?c(S):S;if(S=u||S!==0?S:0,m&&T===T){for(var C=y.length;C--;)if(y[C]===T)continue e;c&&y.push(T),v.push(S)}else h(y,T,u)||(y!==v&&y.push(T),v.push(S))}return v}return V4=s,V4}var z4,Kee;function uUe(){if(Kee)return z4;Kee=1;var n=wy(),e=cUe();function t(r,i){return r&&r.length?e(r,n(i,2)):[]}return z4=t,z4}var dUe=uUe();const Xee=Lr(dUe);function S0e(n,e,t){return e===!0?Xee(n,t):cr(e)?Xee(n,e):n}function y1(n){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(n)}var hUe=["ref"];function Zee(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zee(Object(t),!0).forEach(function(r){XL(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zee(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fUe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qee(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,T0e(r.key),r)}}function pUe(n,e,t){return e&&Qee(n.prototype,e),t&&Qee(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function gUe(n,e,t){return e=hO(e),mUe(n,_0e()?Reflect.construct(e,t||[],hO(n).constructor):e.apply(n,t))}function mUe(n,e){if(e&&(y1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vUe(n)}function vUe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_0e=function(){return!!n})()}function hO(n){return hO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hO(n)}function yUe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&yz(n,e)}function yz(n,e){return yz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yz(n,e)}function XL(n,e,t){return e=T0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T0e(n){var e=bUe(n,"string");return y1(e)=="symbol"?e:e+""}function bUe(n,e){if(y1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function wUe(n,e){if(n==null)return{};var t=xUe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function xUe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function SUe(n){return n.value}function _Ue(n,e){if(we.isValidElement(n))return we.cloneElement(n,e);if(typeof n=="function")return we.createElement(n,e);e.ref;var t=wUe(e,hUe);return we.createElement(X7,t)}var Jee=1,z_=function(n){function e(){var t;fUe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=gUe(this,e,[].concat(i)),XL(t,"lastBoundingBox",{width:-1,height:-1}),t}return yUe(e,n),pUe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Jee||Math.abs(i.height-this.lastBoundingBox.height)>Jee)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gp({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var f=this.getBBoxSnapshot();d={left:((c||0)-f.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((u||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Gp(Gp({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=Gp(Gp({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return we.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(f){r.wrapperNode=f}},_Ue(a,Gp(Gp({},this.props),{},{payload:S0e(u,c,SUe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Gp(Gp({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&wt(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(Y.PureComponent);XL(z_,"displayName","Legend");XL(z_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var H4,ete;function TUe(){if(ete)return H4;ete=1;var n=II(),e=Q7(),t=Yl(),r=n?n.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(r&&a&&a[r])}return H4=i,H4}var G4,tte;function E0e(){if(tte)return G4;tte=1;var n=f0e(),e=TUe();function t(r,i,a,o,s){var l=-1,c=r.length;for(a||(a=e),s||(s=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?t(u,i-1,a,o,s):n(s,u):o||(s[s.length]=u)}return s}return G4=t,G4}var W4,nte;function EUe(){if(nte)return W4;nte=1;function n(e){return function(t,r,i){for(var a=-1,o=Object(t),s=i(t),l=s.length;l--;){var c=s[e?l:++a];if(r(o[c],c,o)===!1)break}return t}}return W4=n,W4}var q4,rte;function AUe(){if(rte)return q4;rte=1;var n=EUe(),e=n();return q4=e,q4}var Y4,ite;function A0e(){if(ite)return Y4;ite=1;var n=AUe(),e=KL();function t(r,i){return r&&n(r,i,e)}return Y4=t,Y4}var K4,ate;function kUe(){if(ate)return K4;ate=1;var n=PI();function e(t,r){return function(i,a){if(i==null)return i;if(!n(i))return t(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return K4=e,K4}var X4,ote;function nW(){if(ote)return X4;ote=1;var n=A0e(),e=kUe(),t=e(n);return X4=t,X4}var Z4,ste;function k0e(){if(ste)return Z4;ste=1;var n=nW(),e=PI();function t(r,i){var a=-1,o=e(r)?Array(r.length):[];return n(r,function(s,l,c){o[++a]=i(s,l,c)}),o}return Z4=t,Z4}var Q4,lte;function CUe(){if(lte)return Q4;lte=1;function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}return Q4=n,Q4}var J4,cte;function DUe(){if(cte)return J4;cte=1;var n=oT();function e(t,r){if(t!==r){var i=t!==void 0,a=t===null,o=t===t,s=n(t),l=r!==void 0,c=r===null,u=r===r,d=n(r);if(!c&&!d&&!s&&t>r||s&&l&&u&&!c&&!d||a&&l&&u||!i&&u||!o)return 1;if(!a&&!s&&!d&&t<r||d&&i&&o&&!a&&!s||c&&i&&o||!l&&o||!u)return-1}return 0}return J4=e,J4}var e$,ute;function IUe(){if(ute)return e$;ute=1;var n=DUe();function e(t,r,i){for(var a=-1,o=t.criteria,s=r.criteria,l=o.length,c=i.length;++a<l;){var u=n(o[a],s[a]);if(u){if(a>=c)return u;var d=i[a];return u*(d=="desc"?-1:1)}}return t.index-r.index}return e$=e,e$}var t$,dte;function MUe(){if(dte)return t$;dte=1;var n=V7(),e=z7(),t=wy(),r=k0e(),i=CUe(),a=g0e(),o=IUe(),s=lT(),l=Yl();function c(u,d,h){d.length?d=n(d,function(v){return l(v)?function(y){return e(y,v.length===1?v[0]:v)}:v}):d=[s];var f=-1;d=n(d,a(t));var m=r(u,function(v,y,w){var S=n(d,function(T){return T(v)});return{criteria:S,index:++f,value:v}});return i(m,function(v,y){return o(v,y,h)})}return t$=c,t$}var n$,hte;function PUe(){if(hte)return n$;hte=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return n$=n,n$}var r$,fte;function NUe(){if(fte)return r$;fte=1;var n=PUe(),e=Math.max;function t(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),c=Array(l);++s<l;)c[s]=o[i+s];s=-1;for(var u=Array(i+1);++s<i;)u[s]=o[s];return u[i]=a(c),n(r,this,u)}}return r$=t,r$}var i$,pte;function RUe(){if(pte)return i$;pte=1;function n(e){return function(){return e}}return i$=n,i$}var a$,gte;function C0e(){if(gte)return a$;gte=1;var n=qw(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return a$=e,a$}var o$,mte;function OUe(){if(mte)return o$;mte=1;var n=RUe(),e=C0e(),t=lT(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return o$=r,o$}var s$,vte;function LUe(){if(vte)return s$;vte=1;var n=800,e=16,t=Date.now;function r(i){var a=0,o=0;return function(){var s=t(),l=e-(s-o);if(o=s,l>0){if(++a>=n)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return s$=r,s$}var l$,yte;function jUe(){if(yte)return l$;yte=1;var n=OUe(),e=LUe(),t=e(n);return l$=t,l$}var c$,bte;function FUe(){if(bte)return c$;bte=1;var n=lT(),e=NUe(),t=jUe();function r(i,a){return t(e(i,a,n),i+"")}return c$=r,c$}var u$,wte;function ZL(){if(wte)return u$;wte=1;var n=$7(),e=PI(),t=J7(),r=by();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&t(o,s.length):l=="string"&&o in s)?n(s[o],a):!1}return u$=i,u$}var d$,xte;function $Ue(){if(xte)return d$;xte=1;var n=E0e(),e=MUe(),t=FUe(),r=ZL(),i=t(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,n(o,1),[])});return d$=i,d$}var BUe=$Ue();const rW=Lr(BUe);function HC(n){"@babel/helpers - typeof";return HC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HC(n)}function bz(){return bz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bz.apply(this,arguments)}function UUe(n,e){return GUe(n)||HUe(n,e)||zUe(n,e)||VUe()}function VUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zUe(n,e){if(n){if(typeof n=="string")return Ste(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ste(n,e)}}function Ste(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function HUe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function GUe(n){if(Array.isArray(n))return n}function _te(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function h$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_te(Object(t),!0).forEach(function(r){WUe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_te(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WUe(n,e,t){return e=qUe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qUe(n){var e=YUe(n,"string");return HC(e)=="symbol"?e:e+""}function YUe(n,e){if(HC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(HC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KUe(n){return Array.isArray(n)&&oo(n[0])&&oo(n[1])?n.join(" ~ "):n}var XUe=function(e){var t=e.separator,r=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,f=e.wrapperClassName,m=e.labelClassName,v=e.label,y=e.labelFormatter,w=e.accessibilityLayer,S=w===void 0?!1:w,T=function(){if(u&&u.length){var B={padding:0,margin:0},$=(h?rW(u,h):u).map(function(G,W){if(G.type==="none")return null;var K=h$({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},s),X=G.formatter||d||KUe,te=G.value,ie=G.name,z=te,se=ie;if(X&&z!=null&&se!=null){var ce=X(te,ie,G,W,u);if(Array.isArray(ce)){var ee=UUe(ce,2);z=ee[0],se=ee[1]}else z=ce}return we.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:K},oo(se)?we.createElement("span",{className:"recharts-tooltip-item-name"},se):null,oo(se)?we.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,we.createElement("span",{className:"recharts-tooltip-item-value"},z),we.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return we.createElement("ul",{className:"recharts-tooltip-item-list",style:B},$)}return null},C=h$({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),k=h$({margin:0},c),A=!Xr(v),D=A?v:"",P=Nr("recharts-default-tooltip",f),N=Nr("recharts-tooltip-label",m);A&&y&&u!==void 0&&u!==null&&(D=y(v,u));var R=S?{role:"status","aria-live":"assertive"}:{};return we.createElement("div",bz({className:P,style:C},R),we.createElement("p",{className:N,style:k},we.isValidElement(D)?D:"".concat(D)),T())};function GC(n){"@babel/helpers - typeof";return GC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GC(n)}function vP(n,e,t){return e=ZUe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZUe(n){var e=QUe(n,"string");return GC(e)=="symbol"?e:e+""}function QUe(n,e){if(GC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(GC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var vA="recharts-tooltip-wrapper",JUe={visibility:"hidden"};function eVe(n){var e=n.coordinate,t=n.translateX,r=n.translateY;return Nr(vA,vP(vP(vP(vP({},"".concat(vA,"-right"),wt(t)&&e&&wt(e.x)&&t>=e.x),"".concat(vA,"-left"),wt(t)&&e&&wt(e.x)&&t<e.x),"".concat(vA,"-bottom"),wt(r)&&e&&wt(e.y)&&r>=e.y),"".concat(vA,"-top"),wt(r)&&e&&wt(e.y)&&r<e.y))}function Tte(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.key,i=n.offsetTopLeft,a=n.position,o=n.reverseDirection,s=n.tooltipDimension,l=n.viewBox,c=n.viewBoxDimension;if(a&&wt(a[r]))return a[r];var u=t[r]-s-i,d=t[r]+i;if(e[r])return o[r]?u:d;if(o[r]){var h=u,f=l[r];return h<f?Math.max(d,l[r]):Math.max(u,l[r])}var m=d+s,v=l[r]+c;return m>v?Math.max(u,l[r]):Math.max(d,l[r])}function tVe(n){var e=n.translateX,t=n.translateY,r=n.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function nVe(n){var e=n.allowEscapeViewBox,t=n.coordinate,r=n.offsetTopLeft,i=n.position,a=n.reverseDirection,o=n.tooltipBox,s=n.useTranslate3d,l=n.viewBox,c,u,d;return o.height>0&&o.width>0&&t?(u=Tte({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=Tte({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=tVe({translateX:u,translateY:d,useTranslate3d:s})):c=JUe,{cssProperties:c,cssClasses:eVe({translateX:u,translateY:d,coordinate:t})}}function b1(n){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b1(n)}function Ete(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ate(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ete(Object(t),!0).forEach(function(r){xz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ete(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function iVe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,I0e(r.key),r)}}function aVe(n,e,t){return e&&iVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function oVe(n,e,t){return e=fO(e),sVe(n,D0e()?Reflect.construct(e,t||[],fO(n).constructor):e.apply(n,t))}function sVe(n,e){if(e&&(b1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lVe(n)}function lVe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function D0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D0e=function(){return!!n})()}function fO(n){return fO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fO(n)}function cVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&wz(n,e)}function wz(n,e){return wz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wz(n,e)}function xz(n,e,t){return e=I0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I0e(n){var e=uVe(n,"string");return b1(e)=="symbol"?e:e+""}function uVe(n,e){if(b1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(b1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var kte=1,dVe=function(n){function e(){var t;rVe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=oVe(this,e,[].concat(i)),xz(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),xz(t,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,u;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=t.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=t.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),t}return cVe(e,n),aVe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>kte||Math.abs(r.height-this.state.lastBoundingBox.height)>kte)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,f=i.offset,m=i.position,v=i.reverseDirection,y=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,T=nVe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:f,position:m,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),C=T.cssClasses,k=T.cssProperties,A=Ate(Ate({transition:h&&a?"transform ".concat(s,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},S);return we.createElement("div",{tabIndex:-1,className:C,style:A,ref:function(P){r.wrapperNode=P}},c)}}])}(Y.PureComponent),hVe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},NI={isSsr:hVe()};function w1(n){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w1(n)}function Cte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Dte(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cte(Object(t),!0).forEach(function(r){iW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pVe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,P0e(r.key),r)}}function gVe(n,e,t){return e&&pVe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function mVe(n,e,t){return e=pO(e),vVe(n,M0e()?Reflect.construct(e,t||[],pO(n).constructor):e.apply(n,t))}function vVe(n,e){if(e&&(w1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yVe(n)}function yVe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M0e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M0e=function(){return!!n})()}function pO(n){return pO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pO(n)}function bVe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Sz(n,e)}function Sz(n,e){return Sz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sz(n,e)}function iW(n,e,t){return e=P0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P0e(n){var e=wVe(n,"string");return w1(e)=="symbol"?e:e+""}function wVe(n,e){if(w1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(w1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function xVe(n){return n.dataKey}function SVe(n,e){return we.isValidElement(n)?we.cloneElement(n,e):typeof n=="function"?we.createElement(n,e):we.createElement(XUe,e)}var Ud=function(n){function e(){return fVe(this,e),mVe(this,e,arguments)}return bVe(e,n),gVe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,f=i.offset,m=i.payload,v=i.payloadUniqBy,y=i.position,w=i.reverseDirection,S=i.useTranslate3d,T=i.viewBox,C=i.wrapperStyle,k=m??[];d&&k.length&&(k=S0e(m.filter(function(D){return D.value!=null&&(D.hide!==!0||r.props.includeHidden)}),v,xVe));var A=k.length>0;return we.createElement(dVe,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:a,coordinate:u,hasPayload:A,offset:f,position:y,reverseDirection:w,useTranslate3d:S,viewBox:T,wrapperStyle:C},SVe(c,Dte(Dte({},this.props),{},{payload:k})))}}])}(Y.PureComponent);iW(Ud,"displayName","Tooltip");iW(Ud,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!NI.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var f$,Ite;function _Ve(){if(Ite)return f$;Ite=1;var n=Hf(),e=function(){return n.Date.now()};return f$=e,f$}var p$,Mte;function TVe(){if(Mte)return p$;Mte=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return p$=e,p$}var g$,Pte;function EVe(){if(Pte)return g$;Pte=1;var n=TVe(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return g$=t,g$}var m$,Nte;function N0e(){if(Nte)return m$;Nte=1;var n=EVe(),e=by(),t=oT(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(t(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=n(c);var d=a.test(c);return d||o.test(c)?s(c.slice(2),d?2:8):i.test(c)?r:+c}return m$=l,m$}var v$,Rte;function AVe(){if(Rte)return v$;Rte=1;var n=by(),e=_Ve(),t=N0e(),r="Expected a function",i=Math.max,a=Math.min;function o(s,l,c){var u,d,h,f,m,v,y=0,w=!1,S=!1,T=!0;if(typeof s!="function")throw new TypeError(r);l=t(l)||0,n(c)&&(w=!!c.leading,S="maxWait"in c,h=S?i(t(c.maxWait)||0,l):h,T="trailing"in c?!!c.trailing:T);function C($){var G=u,W=d;return u=d=void 0,y=$,f=s.apply(W,G),f}function k($){return y=$,m=setTimeout(P,l),w?C($):f}function A($){var G=$-v,W=$-y,K=l-G;return S?a(K,h-W):K}function D($){var G=$-v,W=$-y;return v===void 0||G>=l||G<0||S&&W>=h}function P(){var $=e();if(D($))return N($);m=setTimeout(P,A($))}function N($){return m=void 0,T&&u?C($):(u=d=void 0,f)}function R(){m!==void 0&&clearTimeout(m),y=0,u=v=d=m=void 0}function L(){return m===void 0?f:N(e())}function B(){var $=e(),G=D($);if(u=arguments,d=this,v=$,G){if(m===void 0)return k(v);if(S)return clearTimeout(m),m=setTimeout(P,l),C(v)}return m===void 0&&(m=setTimeout(P,l)),f}return B.cancel=R,B.flush=L,B}return v$=o,v$}var y$,Ote;function kVe(){if(Ote)return y$;Ote=1;var n=AVe(),e=by(),t="Expected a function";function r(i,a,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(t);return e(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),n(i,a,{leading:s,maxWait:a,trailing:l})}return y$=r,y$}var CVe=kVe();const R0e=Lr(CVe);function WC(n){"@babel/helpers - typeof";return WC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WC(n)}function Lte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lte(Object(t),!0).forEach(function(r){DVe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Lte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function DVe(n,e,t){return e=IVe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IVe(n){var e=MVe(n,"string");return WC(e)=="symbol"?e:e+""}function MVe(n,e){if(WC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(WC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function PVe(n,e){return LVe(n)||OVe(n,e)||RVe(n,e)||NVe()}function NVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RVe(n,e){if(n){if(typeof n=="string")return jte(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jte(n,e)}}function jte(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function OVe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function LVe(n){if(Array.isArray(n))return n}var O0e=Y.forwardRef(function(n,e){var t=n.aspect,r=n.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=n.width,o=a===void 0?"100%":a,s=n.height,l=s===void 0?"100%":s,c=n.minWidth,u=c===void 0?0:c,d=n.minHeight,h=n.maxHeight,f=n.children,m=n.debounce,v=m===void 0?0:m,y=n.id,w=n.className,S=n.onResize,T=n.style,C=T===void 0?{}:T,k=Y.useRef(null),A=Y.useRef();A.current=S,Y.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var D=Y.useState({containerWidth:i.width,containerHeight:i.height}),P=PVe(D,2),N=P[0],R=P[1],L=Y.useCallback(function($,G){R(function(W){var K=Math.round($),X=Math.round(G);return W.containerWidth===K&&W.containerHeight===X?W:{containerWidth:K,containerHeight:X}})},[]);Y.useEffect(function(){var $=function(ie){var z,se=ie[0].contentRect,ce=se.width,ee=se.height;L(ce,ee),(z=A.current)===null||z===void 0||z.call(A,ce,ee)};v>0&&($=R0e($,v,{trailing:!0,leading:!1}));var G=new ResizeObserver($),W=k.current.getBoundingClientRect(),K=W.width,X=W.height;return L(K,X),G.observe(k.current),function(){G.disconnect()}},[L,v]);var B=Y.useMemo(function(){var $=N.containerWidth,G=N.containerHeight;if($<0||G<0)return null;gg(Hb(o)||Hb(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),gg(!t||t>0,"The aspect(%s) must be greater than zero.",t);var W=Hb(o)?$:o,K=Hb(l)?G:l;t&&t>0&&(W?K=W/t:K&&(W=K*t),h&&K>h&&(K=h)),gg(W>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,K,o,l,u,d,t);var X=!Array.isArray(f)&&pg(f.type).endsWith("Chart");return we.Children.map(f,function(te){return we.isValidElement(te)?Y.cloneElement(te,yP({width:W,height:K},X?{style:yP({height:"100%",width:"100%",maxHeight:K,maxWidth:W},te.props.style)}:{})):te})},[t,f,l,h,d,u,N,o]);return we.createElement("div",{id:y?"".concat(y):void 0,className:Nr("recharts-responsive-container",w),style:yP(yP({},C),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:k},B)}),QL=function(e){return null};QL.displayName="Cell";function qC(n){"@babel/helpers - typeof";return qC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qC(n)}function Fte(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _z(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fte(Object(t),!0).forEach(function(r){jVe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fte(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jVe(n,e,t){return e=FVe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function FVe(n){var e=$Ve(n,"string");return qC(e)=="symbol"?e:e+""}function $Ve(n,e){if(qC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(qC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var NS={widthCache:{},cacheCount:0},BVe=2e3,UVe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$te="recharts_measurement_span";function VVe(n){var e=_z({},n);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var qk=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||NI.isSsr)return{width:0,height:0};var r=VVe(t),i=JSON.stringify({text:e,copyStyle:r});if(NS.widthCache[i])return NS.widthCache[i];try{var a=document.getElementById($te);a||(a=document.createElement("span"),a.setAttribute("id",$te),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=_z(_z({},UVe),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return NS.widthCache[i]=l,++NS.cacheCount>BVe&&(NS.cacheCount=0,NS.widthCache={}),l}catch{return{width:0,height:0}}},zVe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function YC(n){"@babel/helpers - typeof";return YC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YC(n)}function gO(n,e){return qVe(n)||WVe(n,e)||GVe(n,e)||HVe()}function HVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GVe(n,e){if(n){if(typeof n=="string")return Bte(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bte(n,e)}}function Bte(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function WVe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function qVe(n){if(Array.isArray(n))return n}function YVe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ute(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,XVe(r.key),r)}}function KVe(n,e,t){return e&&Ute(n.prototype,e),t&&Ute(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function XVe(n){var e=ZVe(n,"string");return YC(e)=="symbol"?e:e+""}function ZVe(n,e){if(YC(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(YC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Vte=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zte=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QVe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JVe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L0e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},eze=Object.keys(L0e),A_="NaN";function tze(n,e){return n*L0e[e]}var bP=function(){function n(e,t){YVe(this,n),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!QVe.test(t)&&(this.num=NaN,this.unit=""),eze.includes(t)&&(this.num=tze(e,t),this.unit="px")}return KVe(n,[{key:"add",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new n(NaN,""):new n(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new n(NaN,""):new n(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,i=(r=JVe.exec(t))!==null&&r!==void 0?r:[],a=gO(i,3),o=a[1],s=a[2];return new n(parseFloat(o),s??"")}}])}();function j0e(n){if(n.includes(A_))return A_;for(var e=n;e.includes("*")||e.includes("/");){var t,r=(t=Vte.exec(e))!==null&&t!==void 0?t:[],i=gO(r,4),a=i[1],o=i[2],s=i[3],l=bP.parse(a??""),c=bP.parse(s??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return A_;e=e.replace(Vte,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=zte.exec(e))!==null&&d!==void 0?d:[],f=gO(h,4),m=f[1],v=f[2],y=f[3],w=bP.parse(m??""),S=bP.parse(y??""),T=v==="+"?w.add(S):w.subtract(S);if(T.isNaN())return A_;e=e.replace(zte,T.toString())}return e}var Hte=/\(([^()]*)\)/;function nze(n){for(var e=n;e.includes("(");){var t=Hte.exec(e),r=gO(t,2),i=r[1];e=e.replace(Hte,j0e(i))}return e}function rze(n){var e=n.replace(/\s+/g,"");return e=nze(e),e=j0e(e),e}function ize(n){try{return rze(n)}catch{return A_}}function b$(n){var e=ize(n.slice(5,-1));return e===A_?"":e}var aze=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],oze=["dx","dy","angle","className","breakAll"];function Tz(){return Tz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tz.apply(this,arguments)}function Gte(n,e){if(n==null)return{};var t=sze(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function sze(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Wte(n,e){return dze(n)||uze(n,e)||cze(n,e)||lze()}function lze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cze(n,e){if(n){if(typeof n=="string")return qte(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qte(n,e)}}function qte(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function uze(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function dze(n){if(Array.isArray(n))return n}var F0e=/[ \f\n\r\t\v\u2028\u2029]+/,$0e=function(e){var t=e.children,r=e.breakAll,i=e.style;try{var a=[];Xr(t)||(r?a=t.toString().split(""):a=t.toString().split(F0e));var o=a.map(function(l){return{word:l,width:qk(l,i).width}}),s=r?0:qk(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},hze=function(e,t,r,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=wt(o),d=s,h=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(K,X){var te=X.word,ie=X.width,z=K[K.length-1];if(z&&(i==null||a||z.width+ie+r<Number(i)))z.words.push(te),z.width+=ie+r;else{var se={words:[te],width:ie};K.push(se)}return K},[])},f=h(t),m=function(W){return W.reduce(function(K,X){return K.width>X.width?K:X})};if(!u)return f;for(var v="…",y=function(W){var K=d.slice(0,W),X=$0e({breakAll:c,style:l,children:K+v}).wordsWithComputedWidth,te=h(X),ie=te.length>o||m(te).width>Number(i);return[ie,te]},w=0,S=d.length-1,T=0,C;w<=S&&T<=d.length-1;){var k=Math.floor((w+S)/2),A=k-1,D=y(A),P=Wte(D,2),N=P[0],R=P[1],L=y(k),B=Wte(L,1),$=B[0];if(!N&&!$&&(w=k+1),N&&$&&(S=k-1),!N&&$){C=R;break}T++}return C||f},Yte=function(e){var t=Xr(e)?[]:e.toString().split(F0e);return[{words:t}]},fze=function(e){var t=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((t||r)&&!NI.isSsr){var l,c,u=$0e({breakAll:o,children:i,style:a});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return Yte(i);return hze({breakAll:o,children:i,maxLines:s,style:a},l,c,t,r)}return Yte(i)},Kte="#808080",mO=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,f=h===void 0?"start":h,m=e.verticalAnchor,v=m===void 0?"end":m,y=e.fill,w=y===void 0?Kte:y,S=Gte(e,aze),T=Y.useMemo(function(){return fze({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:d,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,d,S.style,S.width]),C=S.dx,k=S.dy,A=S.angle,D=S.className,P=S.breakAll,N=Gte(S,oze);if(!oo(r)||!oo(a))return null;var R=r+(wt(C)?C:0),L=a+(wt(k)?k:0),B;switch(v){case"start":B=b$("calc(".concat(c,")"));break;case"middle":B=b$("calc(".concat((T.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:B=b$("calc(".concat(T.length-1," * -").concat(s,")"));break}var $=[];if(d){var G=T[0].width,W=S.width;$.push("scale(".concat((wt(W)?W/G:1)/G,")"))}return A&&$.push("rotate(".concat(A,", ").concat(R,", ").concat(L,")")),$.length&&(N.transform=$.join(" ")),we.createElement("text",Tz({},Vr(N,!0),{x:R,y:L,className:Nr("recharts-text",D),textAnchor:f,fill:w.includes("url")?Kte:w}),T.map(function(K,X){var te=K.words.join(P?"":" ");return we.createElement("tspan",{x:R,dy:X===0?B:s,key:"".concat(te,"-").concat(X)},te)}))};function Yv(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function pze(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function aW(n){let e,t,r;n.length!==2?(e=Yv,t=(s,l)=>Yv(n(s),l),r=(s,l)=>n(s)-l):(e=n===Yv||n===pze?n:gze,t=n,r=n);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;t(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){const d=i(s,l,c,u-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function gze(){return 0}function B0e(n){return n===null?NaN:+n}function*mze(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const vze=aW(Yv),RI=vze.right;aW(B0e).center;class Xte extends Map{constructor(e,t=wze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Zte(this,e))}has(e){return super.has(Zte(this,e))}set(e,t){return super.set(yze(this,e),t)}delete(e){return super.delete(bze(this,e))}}function Zte({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function yze({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function bze({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function wze(n){return n!==null&&typeof n=="object"?n.valueOf():n}function xze(n=Yv){if(n===Yv)return U0e;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function U0e(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const Sze=Math.sqrt(50),_ze=Math.sqrt(10),Tze=Math.sqrt(2);function vO(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Sze?10:a>=_ze?5:a>=Tze?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(n*c),l=Math.round(e*c),s/c<n&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(n/c),l=Math.round(e/c),s*c<n&&++s,l*c>e&&--l),l<s&&.5<=t&&t<2?vO(n,e,t*2):[s,l,c]}function Ez(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,o]=r?vO(e,n,t):vO(n,e,t);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function Az(n,e,t){return e=+e,n=+n,t=+t,vO(n,e,t)[2]}function kz(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?Az(e,n,t):Az(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function Qte(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function Jte(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function V0e(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?U0e:xze(i);r>t;){if(r-t>600){const l=r-t+1,c=e-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));V0e(n,e,f,m,i)}const a=n[e];let o=t,s=r;for(yA(n,t,e),i(n[r],a)>0&&yA(n,t,r);o<s;){for(yA(n,o,s),++o,--s;i(n[o],a)<0;)++o;for(;i(n[s],a)>0;)--s}i(n[t],a)===0?yA(n,t,s):(++s,yA(n,s,r)),s<=e&&(t=s+1),e<=s&&(r=s-1)}return n}function yA(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Eze(n,e,t){if(n=Float64Array.from(mze(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return Jte(n);if(e>=1)return Qte(n);var r,i=(r-1)*e,a=Math.floor(i),o=Qte(V0e(n,a).subarray(0,a+1)),s=Jte(n.subarray(a+1));return o+(s-o)*(i-a)}}function Aze(n,e,t=B0e){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,a=Math.floor(i),o=+t(n[a],a,n),s=+t(n[a+1],a+1,n);return o+(s-o)*(i-a)}}function kze(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Ku(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function Yg(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Cz=Symbol("implicit");function oW(){var n=new Xte,e=[],t=[],r=Cz;function i(a){let o=n.get(a);if(o===void 0){if(r!==Cz)return r;n.set(a,o=e.push(a)-1)}return t[o%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],n=new Xte;for(const o of a)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return oW(e,t).unknown(r)},Ku.apply(i,arguments),i}function KC(){var n=oW().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete n.unknown;function d(){var h=e().length,f=i<r,m=f?i:r,v=f?r:i;a=(v-m)/Math.max(1,h-l+c*2),s&&(a=Math.floor(a)),m+=(v-m-a*(h-l))*u,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var y=kze(h).map(function(w){return m+a*w});return t(f?y.reverse():y)}return n.domain=function(h){return arguments.length?(e(h),d()):e()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,d()},n.bandwidth=function(){return o},n.step=function(){return a},n.round=function(h){return arguments.length?(s=!!h,d()):s},n.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},n.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},n.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},n.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},n.copy=function(){return KC(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ku.apply(d(),arguments)}function z0e(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return z0e(e())},n}function Yk(){return z0e(KC.apply(null,arguments).paddingInner(1))}function sW(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function H0e(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function OI(){}var XC=.7,yO=1/XC,H_="\\s*([+-]?\\d+)\\s*",ZC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cze=/^#([0-9a-f]{3,8})$/,Dze=new RegExp(`^rgb\\(${H_},${H_},${H_}\\)$`),Ize=new RegExp(`^rgb\\(${kf},${kf},${kf}\\)$`),Mze=new RegExp(`^rgba\\(${H_},${H_},${H_},${ZC}\\)$`),Pze=new RegExp(`^rgba\\(${kf},${kf},${kf},${ZC}\\)$`),Nze=new RegExp(`^hsl\\(${ZC},${kf},${kf}\\)$`),Rze=new RegExp(`^hsla\\(${ZC},${kf},${kf},${ZC}\\)$`),ene={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sW(OI,QC,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:tne,formatHex:tne,formatHex8:Oze,formatHsl:Lze,formatRgb:nne,toString:nne});function tne(){return this.rgb().formatHex()}function Oze(){return this.rgb().formatHex8()}function Lze(){return G0e(this).formatHsl()}function nne(){return this.rgb().formatRgb()}function QC(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Cze.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?rne(e):t===3?new Hl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?wP(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?wP(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Dze.exec(n))?new Hl(e[1],e[2],e[3],1):(e=Ize.exec(n))?new Hl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Mze.exec(n))?wP(e[1],e[2],e[3],e[4]):(e=Pze.exec(n))?wP(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nze.exec(n))?one(e[1],e[2]/100,e[3]/100,1):(e=Rze.exec(n))?one(e[1],e[2]/100,e[3]/100,e[4]):ene.hasOwnProperty(n)?rne(ene[n]):n==="transparent"?new Hl(NaN,NaN,NaN,0):null}function rne(n){return new Hl(n>>16&255,n>>8&255,n&255,1)}function wP(n,e,t,r){return r<=0&&(n=e=t=NaN),new Hl(n,e,t,r)}function jze(n){return n instanceof OI||(n=QC(n)),n?(n=n.rgb(),new Hl(n.r,n.g,n.b,n.opacity)):new Hl}function Dz(n,e,t,r){return arguments.length===1?jze(n):new Hl(n,e,t,r??1)}function Hl(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}sW(Hl,Dz,H0e(OI,{brighter(n){return n=n==null?yO:Math.pow(yO,n),new Hl(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?XC:Math.pow(XC,n),new Hl(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Hl(ow(this.r),ow(this.g),ow(this.b),bO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ine,formatHex:ine,formatHex8:Fze,formatRgb:ane,toString:ane}));function ine(){return`#${Gb(this.r)}${Gb(this.g)}${Gb(this.b)}`}function Fze(){return`#${Gb(this.r)}${Gb(this.g)}${Gb(this.b)}${Gb((isNaN(this.opacity)?1:this.opacity)*255)}`}function ane(){const n=bO(this.opacity);return`${n===1?"rgb(":"rgba("}${ow(this.r)}, ${ow(this.g)}, ${ow(this.b)}${n===1?")":`, ${n})`}`}function bO(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ow(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Gb(n){return n=ow(n),(n<16?"0":"")+n.toString(16)}function one(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Yd(n,e,t,r)}function G0e(n){if(n instanceof Yd)return new Yd(n.h,n.s,n.l,n.opacity);if(n instanceof OI||(n=QC(n)),!n)return new Yd;if(n instanceof Yd)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Yd(o,s,l,n.opacity)}function $ze(n,e,t,r){return arguments.length===1?G0e(n):new Yd(n,e,t,r??1)}function Yd(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}sW(Yd,$ze,H0e(OI,{brighter(n){return n=n==null?yO:Math.pow(yO,n),new Yd(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?XC:Math.pow(XC,n),new Yd(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Hl(w$(n>=240?n-240:n+120,i,r),w$(n,i,r),w$(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Yd(sne(this.h),xP(this.s),xP(this.l),bO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=bO(this.opacity);return`${n===1?"hsl(":"hsla("}${sne(this.h)}, ${xP(this.s)*100}%, ${xP(this.l)*100}%${n===1?")":`, ${n})`}`}}));function sne(n){return n=(n||0)%360,n<0?n+360:n}function xP(n){return Math.max(0,Math.min(1,n||0))}function w$(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const lW=n=>()=>n;function Bze(n,e){return function(t){return n+t*e}}function Uze(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function Vze(n){return(n=+n)==1?W0e:function(e,t){return t-e?Uze(e,t,n):lW(isNaN(e)?t:e)}}function W0e(n,e){var t=e-n;return t?Bze(n,t):lW(isNaN(n)?e:n)}const lne=function n(e){var t=Vze(e);function r(i,a){var o=t((i=Dz(i)).r,(a=Dz(a)).r),s=t(i.g,a.g),l=t(i.b,a.b),c=W0e(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=n,r}(1);function zze(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function Hze(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Gze(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)i[o]=cT(n[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Wze(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function wO(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function qze(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=cT(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var Iz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x$=new RegExp(Iz.source,"g");function Yze(n){return function(){return n}}function Kze(n){return function(e){return n(e)+""}}function Xze(n,e){var t=Iz.lastIndex=x$.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(n=n+"",e=e+"";(r=Iz.exec(n))&&(i=x$.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:wO(r,i)})),t=x$.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Kze(l[0].x):Yze(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function cT(n,e){var t=typeof e,r;return e==null||t==="boolean"?lW(e):(t==="number"?wO:t==="string"?(r=QC(e))?(e=r,lne):Xze:e instanceof QC?lne:e instanceof Date?Wze:Hze(e)?zze:Array.isArray(e)?Gze:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?qze:wO)(n,e)}function cW(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Zze(n,e){e===void 0&&(e=n,n=cT);for(var t=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);t<r;)a[t]=n(i,i=e[++t]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Qze(n){return function(){return n}}function xO(n){return+n}var cne=[0,1];function sl(n){return n}function Mz(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:Qze(isNaN(e)?NaN:.5)}function Jze(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function e9e(n,e,t){var r=n[0],i=n[1],a=e[0],o=e[1];return i<r?(r=Mz(i,r),a=t(o,a)):(r=Mz(r,i),a=t(a,o)),function(s){return a(r(s))}}function t9e(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Mz(n[o],n[o+1]),a[o]=t(e[o],e[o+1]);return function(s){var l=RI(n,s,1,r)-1;return a[l](i[l](s))}}function LI(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function JL(){var n=cne,e=cne,t=cT,r,i,a,o=sl,s,l,c;function u(){var h=Math.min(n.length,e.length);return o!==sl&&(o=Jze(n[0],n[h-1])),s=h>2?t9e:e9e,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?a:(l||(l=s(n.map(r),e,t)))(r(o(h)))}return d.invert=function(h){return o(i((c||(c=s(e,n.map(r),wO)))(h)))},d.domain=function(h){return arguments.length?(n=Array.from(h,xO),u()):n.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),t=cW,u()},d.clamp=function(h){return arguments.length?(o=h?!0:sl,u()):o!==sl},d.interpolate=function(h){return arguments.length?(t=h,u()):t},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,f){return r=h,i=f,u()}}function uW(){return JL()(sl,sl)}function n9e(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function SO(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function x1(n){return n=SO(Math.abs(n)),n?n[1]:NaN}function r9e(n,e){return function(t,r){for(var i=t.length,a=[],o=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=n[o=(o+1)%n.length];return a.reverse().join(e)}}function i9e(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var a9e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function JC(n){if(!(e=a9e.exec(n)))throw new Error("invalid format: "+n);var e;return new dW({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}JC.prototype=dW.prototype;function dW(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}dW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function o9e(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var q0e;function s9e(n,e){var t=SO(n,e);if(!t)return n+"";var r=t[0],i=t[1],a=i-(q0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+SO(n,Math.max(0,e+a-1))[0]}function une(n,e){var t=SO(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dne={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:n9e,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>une(n*100,e),r:une,s:s9e,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function hne(n){return n}var fne=Array.prototype.map,pne=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function l9e(n){var e=n.grouping===void 0||n.thousands===void 0?hne:r9e(fne.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",a=n.numerals===void 0?hne:i9e(fne.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function c(d){d=JC(d);var h=d.fill,f=d.align,m=d.sign,v=d.symbol,y=d.zero,w=d.width,S=d.comma,T=d.precision,C=d.trim,k=d.type;k==="n"?(S=!0,k="g"):dne[k]||(T===void 0&&(T=12),C=!0,k="g"),(y||h==="0"&&f==="=")&&(y=!0,h="0",f="=");var A=v==="$"?t:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",D=v==="$"?r:/[%p]/.test(k)?o:"",P=dne[k],N=/[defgprs%]/.test(k);T=T===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function R(L){var B=A,$=D,G,W,K;if(k==="c")$=P(L)+$,L="";else{L=+L;var X=L<0||1/L<0;if(L=isNaN(L)?l:P(Math.abs(L),T),C&&(L=o9e(L)),X&&+L==0&&m!=="+"&&(X=!1),B=(X?m==="("?m:s:m==="-"||m==="("?"":m)+B,$=(k==="s"?pne[8+q0e/3]:"")+$+(X&&m==="("?")":""),N){for(G=-1,W=L.length;++G<W;)if(K=L.charCodeAt(G),48>K||K>57){$=(K===46?i+L.slice(G+1):L.slice(G))+$,L=L.slice(0,G);break}}}S&&!y&&(L=e(L,1/0));var te=B.length+L.length+$.length,ie=te<w?new Array(w-te+1).join(h):"";switch(S&&y&&(L=e(ie+L,ie.length?w-$.length:1/0),ie=""),f){case"<":L=B+L+$+ie;break;case"=":L=B+ie+L+$;break;case"^":L=ie.slice(0,te=ie.length>>1)+B+L+$+ie.slice(te);break;default:L=ie+B+L+$;break}return a(L)}return R.toString=function(){return d+""},R}function u(d,h){var f=c((d=JC(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(x1(h)/3)))*3,v=Math.pow(10,-m),y=pne[8+m/3];return function(w){return f(v*w)+y}}return{format:c,formatPrefix:u}}var SP,hW,Y0e;c9e({thousands:",",grouping:[3],currency:["$",""]});function c9e(n){return SP=l9e(n),hW=SP.format,Y0e=SP.formatPrefix,SP}function u9e(n){return Math.max(0,-x1(Math.abs(n)))}function d9e(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x1(e)/3)))*3-x1(Math.abs(n)))}function h9e(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,x1(e)-x1(n))+1}function K0e(n,e,t,r){var i=kz(n,e,t),a;switch(r=JC(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(a=d9e(i,o))&&(r.precision=a),Y0e(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=h9e(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=u9e(i))&&(r.precision=a-(r.type==="%")*2);break}}return hW(r)}function xy(n){var e=n.domain;return n.ticks=function(t){var r=e();return Ez(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return K0e(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=Az(o,s,t),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return n},n}function _O(){var n=uW();return n.copy=function(){return LI(n,_O())},Ku.apply(n,arguments),xy(n)}function X0e(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,xO),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return X0e(n).unknown(e)},n=arguments.length?Array.from(n,xO):[0,1],xy(t)}function Z0e(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],a=n[r],o;return a<i&&(o=t,t=r,r=o,o=i,i=a,a=o),n[t]=e.floor(i),n[r]=e.ceil(a),n}function gne(n){return Math.log(n)}function mne(n){return Math.exp(n)}function f9e(n){return-Math.log(-n)}function p9e(n){return-Math.exp(-n)}function g9e(n){return isFinite(n)?+("1e"+n):n<0?0:n}function m9e(n){return n===10?g9e:n===Math.E?Math.exp:e=>Math.pow(n,e)}function v9e(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function vne(n){return(e,t)=>-n(-e,t)}function fW(n){const e=n(gne,mne),t=e.domain;let r=10,i,a;function o(){return i=v9e(r),a=m9e(r),t()[0]<0?(i=vne(i),a=vne(a),n(f9e,p9e)):n(gne,mne),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(t(s),o()):t()},e.ticks=s=>{const l=t();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),f=i(u),m,v;const y=s==null?10:+s;let w=[];if(!(r%1)&&f-h<y){if(h=Math.floor(h),f=Math.ceil(f),c>0){for(;h<=f;++h)for(m=1;m<r;++m)if(v=h<0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}}else for(;h<=f;++h)for(m=r-1;m>=1;--m)if(v=h>0?m/a(-h):m*a(h),!(v<c)){if(v>u)break;w.push(v)}w.length*2<y&&(w=Ez(c,u,y))}else w=Ez(h,f,Math.min(f-h,y)).map(a);return d?w.reverse():w},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=JC(l)).precision==null&&(l.trim=!0),l=hW(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let d=u/a(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>t(Z0e(t(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function Q0e(){const n=fW(JL()).domain([1,10]);return n.copy=()=>LI(n,Q0e()).base(n.base()),Ku.apply(n,arguments),n}function yne(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function bne(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function pW(n){var e=1,t=n(yne(e),bne(e));return t.constant=function(r){return arguments.length?n(yne(e=+r),bne(e)):e},xy(t)}function J0e(){var n=pW(JL());return n.copy=function(){return LI(n,J0e()).constant(n.constant())},Ku.apply(n,arguments)}function wne(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function y9e(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function b9e(n){return n<0?-n*n:n*n}function gW(n){var e=n(sl,sl),t=1;function r(){return t===1?n(sl,sl):t===.5?n(y9e,b9e):n(wne(t),wne(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},xy(e)}function mW(){var n=gW(JL());return n.copy=function(){return LI(n,mW()).exponent(n.exponent())},Ku.apply(n,arguments),n}function w9e(){return mW.apply(null,arguments).exponent(.5)}function xne(n){return Math.sign(n)*n*n}function x9e(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function ebe(){var n=uW(),e=[0,1],t=!1,r;function i(a){var o=x9e(n(a));return isNaN(o)?r:t?Math.round(o):o}return i.invert=function(a){return n.invert(xne(a))},i.domain=function(a){return arguments.length?(n.domain(a),i):n.domain()},i.range=function(a){return arguments.length?(n.range((e=Array.from(a,xO)).map(xne)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(n.clamp(a),i):n.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ebe(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},Ku.apply(i,arguments),xy(i)}function tbe(){var n=[],e=[],t=[],r;function i(){var o=0,s=Math.max(1,e.length);for(t=new Array(s-1);++o<s;)t[o-1]=Aze(n,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[RI(t,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?t[s-1]:n[0],s<t.length?t[s]:n[n.length-1]]},a.domain=function(o){if(!arguments.length)return n.slice();n=[];for(let s of o)s!=null&&!isNaN(s=+s)&&n.push(s);return n.sort(Yv),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return t.slice()},a.copy=function(){return tbe().domain(n).range(e).unknown(r)},Ku.apply(a,arguments)}function nbe(){var n=0,e=1,t=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[RI(r,l,0,t)]:a}function s(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return o}return o.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,s()):[n,e]},o.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[n,r[0]]:c>=t?[r[t-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return nbe().domain([n,e]).range(i).unknown(a)},Ku.apply(xy(o),arguments)}function rbe(){var n=[.5],e=[0,1],t,r=1;function i(a){return a!=null&&a<=a?e[RI(n,a,0,r)]:t}return i.domain=function(a){return arguments.length?(n=Array.from(a),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[n[o-1],n[o]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return rbe().domain(n).range(e).unknown(t)},Ku.apply(i,arguments)}const S$=new Date,_$=new Date;function po(n,e,t,r){function i(a){return n(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(n(a=new Date(+a)),a),i.ceil=a=>(n(a=new Date(a-1)),e(a,1),n(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),n(a);while(c<a&&a<o);return l},i.filter=a=>po(o=>{if(o>=o)for(;n(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),t&&(i.count=(a,o)=>(S$.setTime(+a),_$.setTime(+o),n(S$),n(_$),Math.floor(t(S$,_$))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const TO=po(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);TO.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?po(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):TO);TO.range;const ng=1e3,Fu=ng*60,rg=Fu*60,Cg=rg*24,vW=Cg*7,Sne=Cg*30,T$=Cg*365,Wb=po(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*ng)},(n,e)=>(e-n)/ng,n=>n.getUTCSeconds());Wb.range;const yW=po(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ng)},(n,e)=>{n.setTime(+n+e*Fu)},(n,e)=>(e-n)/Fu,n=>n.getMinutes());yW.range;const bW=po(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*Fu)},(n,e)=>(e-n)/Fu,n=>n.getUTCMinutes());bW.range;const wW=po(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*ng-n.getMinutes()*Fu)},(n,e)=>{n.setTime(+n+e*rg)},(n,e)=>(e-n)/rg,n=>n.getHours());wW.range;const xW=po(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*rg)},(n,e)=>(e-n)/rg,n=>n.getUTCHours());xW.range;const jI=po(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*Fu)/Cg,n=>n.getDate()-1);jI.range;const ej=po(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Cg,n=>n.getUTCDate()-1);ej.range;const ibe=po(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/Cg,n=>Math.floor(n/Cg));ibe.range;function Yw(n){return po(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fu)/vW)}const tj=Yw(0),EO=Yw(1),S9e=Yw(2),_9e=Yw(3),S1=Yw(4),T9e=Yw(5),E9e=Yw(6);tj.range;EO.range;S9e.range;_9e.range;S1.range;T9e.range;E9e.range;function Kw(n){return po(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/vW)}const nj=Kw(0),AO=Kw(1),A9e=Kw(2),k9e=Kw(3),_1=Kw(4),C9e=Kw(5),D9e=Kw(6);nj.range;AO.range;A9e.range;k9e.range;_1.range;C9e.range;D9e.range;const SW=po(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());SW.range;const _W=po(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());_W.range;const Dg=po(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());Dg.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:po(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});Dg.range;const Ig=po(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());Ig.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:po(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});Ig.range;function abe(n,e,t,r,i,a){const o=[[Wb,1,ng],[Wb,5,5*ng],[Wb,15,15*ng],[Wb,30,30*ng],[a,1,Fu],[a,5,5*Fu],[a,15,15*Fu],[a,30,30*Fu],[i,1,rg],[i,3,3*rg],[i,6,6*rg],[i,12,12*rg],[r,1,Cg],[r,2,2*Cg],[t,1,vW],[e,1,Sne],[e,3,3*Sne],[n,1,T$]];function s(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),m=f?f.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,f=aW(([,,y])=>y).right(o,h);if(f===o.length)return n.every(kz(c/T$,u/T$,d));if(f===0)return TO.every(Math.max(kz(c,u,d),1));const[m,v]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return m.every(v)}return[s,l]}const[I9e,M9e]=abe(Ig,_W,nj,ibe,xW,bW),[P9e,N9e]=abe(Dg,SW,tj,jI,wW,yW);function E$(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function A$(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function bA(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function R9e(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,a=n.days,o=n.shortDays,s=n.months,l=n.shortMonths,c=wA(i),u=xA(i),d=wA(a),h=xA(a),f=wA(o),m=xA(o),v=wA(s),y=xA(s),w=wA(l),S=xA(l),T={a:X,A:te,b:ie,B:z,c:null,d:Cne,e:Cne,f:rHe,g:fHe,G:gHe,H:eHe,I:tHe,j:nHe,L:obe,m:iHe,M:aHe,p:se,q:ce,Q:Mne,s:Pne,S:oHe,u:sHe,U:lHe,V:cHe,w:uHe,W:dHe,x:null,X:null,y:hHe,Y:pHe,Z:mHe,"%":Ine},C={a:ee,A:be,b:fe,B:De,c:null,d:Dne,e:Dne,f:wHe,g:IHe,G:PHe,H:vHe,I:yHe,j:bHe,L:lbe,m:xHe,M:SHe,p:dt,q:ve,Q:Mne,s:Pne,S:_He,u:THe,U:EHe,V:AHe,w:kHe,W:CHe,x:null,X:null,y:DHe,Y:MHe,Z:NHe,"%":Ine},k={a:R,A:L,b:B,B:$,c:G,d:Ane,e:Ane,f:X9e,g:Ene,G:Tne,H:kne,I:kne,j:W9e,L:K9e,m:G9e,M:q9e,p:N,q:H9e,Q:Q9e,s:J9e,S:Y9e,u:$9e,U:B9e,V:U9e,w:F9e,W:V9e,x:W,X:K,y:Ene,Y:Tne,Z:z9e,"%":Z9e};T.x=A(t,T),T.X=A(r,T),T.c=A(e,T),C.x=A(t,C),C.X=A(r,C),C.c=A(e,C);function A(de,me){return function(xe){var pe=[],$e=-1,We=0,ct=de.length,xt,At,pn;for(xe instanceof Date||(xe=new Date(+xe));++$e<ct;)de.charCodeAt($e)===37&&(pe.push(de.slice(We,$e)),(At=_ne[xt=de.charAt(++$e)])!=null?xt=de.charAt(++$e):At=xt==="e"?" ":"0",(pn=me[xt])&&(xt=pn(xe,At)),pe.push(xt),We=$e+1);return pe.push(de.slice(We,$e)),pe.join("")}}function D(de,me){return function(xe){var pe=bA(1900,void 0,1),$e=P(pe,de,xe+="",0),We,ct;if($e!=xe.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(me&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(We=A$(bA(pe.y,0,1)),ct=We.getUTCDay(),We=ct>4||ct===0?AO.ceil(We):AO(We),We=ej.offset(We,(pe.V-1)*7),pe.y=We.getUTCFullYear(),pe.m=We.getUTCMonth(),pe.d=We.getUTCDate()+(pe.w+6)%7):(We=E$(bA(pe.y,0,1)),ct=We.getDay(),We=ct>4||ct===0?EO.ceil(We):EO(We),We=jI.offset(We,(pe.V-1)*7),pe.y=We.getFullYear(),pe.m=We.getMonth(),pe.d=We.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),ct="Z"in pe?A$(bA(pe.y,0,1)).getUTCDay():E$(bA(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(ct+5)%7:pe.w+pe.U*7-(ct+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,A$(pe)):E$(pe)}}function P(de,me,xe,pe){for(var $e=0,We=me.length,ct=xe.length,xt,At;$e<We;){if(pe>=ct)return-1;if(xt=me.charCodeAt($e++),xt===37){if(xt=me.charAt($e++),At=k[xt in _ne?me.charAt($e++):xt],!At||(pe=At(de,xe,pe))<0)return-1}else if(xt!=xe.charCodeAt(pe++))return-1}return pe}function N(de,me,xe){var pe=c.exec(me.slice(xe));return pe?(de.p=u.get(pe[0].toLowerCase()),xe+pe[0].length):-1}function R(de,me,xe){var pe=f.exec(me.slice(xe));return pe?(de.w=m.get(pe[0].toLowerCase()),xe+pe[0].length):-1}function L(de,me,xe){var pe=d.exec(me.slice(xe));return pe?(de.w=h.get(pe[0].toLowerCase()),xe+pe[0].length):-1}function B(de,me,xe){var pe=w.exec(me.slice(xe));return pe?(de.m=S.get(pe[0].toLowerCase()),xe+pe[0].length):-1}function $(de,me,xe){var pe=v.exec(me.slice(xe));return pe?(de.m=y.get(pe[0].toLowerCase()),xe+pe[0].length):-1}function G(de,me,xe){return P(de,e,me,xe)}function W(de,me,xe){return P(de,t,me,xe)}function K(de,me,xe){return P(de,r,me,xe)}function X(de){return o[de.getDay()]}function te(de){return a[de.getDay()]}function ie(de){return l[de.getMonth()]}function z(de){return s[de.getMonth()]}function se(de){return i[+(de.getHours()>=12)]}function ce(de){return 1+~~(de.getMonth()/3)}function ee(de){return o[de.getUTCDay()]}function be(de){return a[de.getUTCDay()]}function fe(de){return l[de.getUTCMonth()]}function De(de){return s[de.getUTCMonth()]}function dt(de){return i[+(de.getUTCHours()>=12)]}function ve(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var me=A(de+="",T);return me.toString=function(){return de},me},parse:function(de){var me=D(de+="",!1);return me.toString=function(){return de},me},utcFormat:function(de){var me=A(de+="",C);return me.toString=function(){return de},me},utcParse:function(de){var me=D(de+="",!0);return me.toString=function(){return de},me}}}var _ne={"-":"",_:" ",0:"0"},No=/^\s*\d+/,O9e=/^%/,L9e=/[\\^$*+?|[\]().{}]/g;function Or(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",a=i.length;return r+(a<t?new Array(t-a+1).join(e)+i:i)}function j9e(n){return n.replace(L9e,"\\$&")}function wA(n){return new RegExp("^(?:"+n.map(j9e).join("|")+")","i")}function xA(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function F9e(n,e,t){var r=No.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function $9e(n,e,t){var r=No.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function B9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function U9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function V9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function Tne(n,e,t){var r=No.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function Ene(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function z9e(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function H9e(n,e,t){var r=No.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function G9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function Ane(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function W9e(n,e,t){var r=No.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function kne(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function q9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function Y9e(n,e,t){var r=No.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function K9e(n,e,t){var r=No.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function X9e(n,e,t){var r=No.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Z9e(n,e,t){var r=O9e.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Q9e(n,e,t){var r=No.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function J9e(n,e,t){var r=No.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function Cne(n,e){return Or(n.getDate(),e,2)}function eHe(n,e){return Or(n.getHours(),e,2)}function tHe(n,e){return Or(n.getHours()%12||12,e,2)}function nHe(n,e){return Or(1+jI.count(Dg(n),n),e,3)}function obe(n,e){return Or(n.getMilliseconds(),e,3)}function rHe(n,e){return obe(n,e)+"000"}function iHe(n,e){return Or(n.getMonth()+1,e,2)}function aHe(n,e){return Or(n.getMinutes(),e,2)}function oHe(n,e){return Or(n.getSeconds(),e,2)}function sHe(n){var e=n.getDay();return e===0?7:e}function lHe(n,e){return Or(tj.count(Dg(n)-1,n),e,2)}function sbe(n){var e=n.getDay();return e>=4||e===0?S1(n):S1.ceil(n)}function cHe(n,e){return n=sbe(n),Or(S1.count(Dg(n),n)+(Dg(n).getDay()===4),e,2)}function uHe(n){return n.getDay()}function dHe(n,e){return Or(EO.count(Dg(n)-1,n),e,2)}function hHe(n,e){return Or(n.getFullYear()%100,e,2)}function fHe(n,e){return n=sbe(n),Or(n.getFullYear()%100,e,2)}function pHe(n,e){return Or(n.getFullYear()%1e4,e,4)}function gHe(n,e){var t=n.getDay();return n=t>=4||t===0?S1(n):S1.ceil(n),Or(n.getFullYear()%1e4,e,4)}function mHe(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Or(e/60|0,"0",2)+Or(e%60,"0",2)}function Dne(n,e){return Or(n.getUTCDate(),e,2)}function vHe(n,e){return Or(n.getUTCHours(),e,2)}function yHe(n,e){return Or(n.getUTCHours()%12||12,e,2)}function bHe(n,e){return Or(1+ej.count(Ig(n),n),e,3)}function lbe(n,e){return Or(n.getUTCMilliseconds(),e,3)}function wHe(n,e){return lbe(n,e)+"000"}function xHe(n,e){return Or(n.getUTCMonth()+1,e,2)}function SHe(n,e){return Or(n.getUTCMinutes(),e,2)}function _He(n,e){return Or(n.getUTCSeconds(),e,2)}function THe(n){var e=n.getUTCDay();return e===0?7:e}function EHe(n,e){return Or(nj.count(Ig(n)-1,n),e,2)}function cbe(n){var e=n.getUTCDay();return e>=4||e===0?_1(n):_1.ceil(n)}function AHe(n,e){return n=cbe(n),Or(_1.count(Ig(n),n)+(Ig(n).getUTCDay()===4),e,2)}function kHe(n){return n.getUTCDay()}function CHe(n,e){return Or(AO.count(Ig(n)-1,n),e,2)}function DHe(n,e){return Or(n.getUTCFullYear()%100,e,2)}function IHe(n,e){return n=cbe(n),Or(n.getUTCFullYear()%100,e,2)}function MHe(n,e){return Or(n.getUTCFullYear()%1e4,e,4)}function PHe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?_1(n):_1.ceil(n),Or(n.getUTCFullYear()%1e4,e,4)}function NHe(){return"+0000"}function Ine(){return"%"}function Mne(n){return+n}function Pne(n){return Math.floor(+n/1e3)}var RS,ube,dbe;RHe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function RHe(n){return RS=R9e(n),ube=RS.format,RS.parse,dbe=RS.utcFormat,RS.utcParse,RS}function OHe(n){return new Date(n)}function LHe(n){return n instanceof Date?+n:+new Date(+n)}function TW(n,e,t,r,i,a,o,s,l,c){var u=uW(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),v=c("%I:%M"),y=c("%I %p"),w=c("%a %d"),S=c("%b %d"),T=c("%B"),C=c("%Y");function k(A){return(l(A)<A?f:s(A)<A?m:o(A)<A?v:a(A)<A?y:r(A)<A?i(A)<A?w:S:t(A)<A?T:C)(A)}return u.invert=function(A){return new Date(d(A))},u.domain=function(A){return arguments.length?h(Array.from(A,LHe)):h().map(OHe)},u.ticks=function(A){var D=h();return n(D[0],D[D.length-1],A??10)},u.tickFormat=function(A,D){return D==null?k:c(D)},u.nice=function(A){var D=h();return(!A||typeof A.range!="function")&&(A=e(D[0],D[D.length-1],A??10)),A?h(Z0e(D,A)):u},u.copy=function(){return LI(u,TW(n,e,t,r,i,a,o,s,l,c))},u}function jHe(){return Ku.apply(TW(P9e,N9e,Dg,SW,tj,jI,wW,yW,Wb,ube).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FHe(){return Ku.apply(TW(I9e,M9e,Ig,_W,nj,ej,xW,bW,Wb,dbe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rj(){var n=0,e=1,t,r,i,a,o=sl,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-t)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([n,e]=d,t=a(n=+n),r=a(e=+e),i=t===r?0:1/(r-t),c):[n,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(h){var f,m;return arguments.length?([f,m]=h,o=d(f,m),c):[o(0),o(1)]}}return c.range=u(cT),c.rangeRound=u(cW),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,t=d(n),r=d(e),i=t===r?0:1/(r-t),c}}function Sy(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function hbe(){var n=xy(rj()(sl));return n.copy=function(){return Sy(n,hbe())},Yg.apply(n,arguments)}function fbe(){var n=fW(rj()).domain([1,10]);return n.copy=function(){return Sy(n,fbe()).base(n.base())},Yg.apply(n,arguments)}function pbe(){var n=pW(rj());return n.copy=function(){return Sy(n,pbe()).constant(n.constant())},Yg.apply(n,arguments)}function EW(){var n=gW(rj());return n.copy=function(){return Sy(n,EW()).exponent(n.exponent())},Yg.apply(n,arguments)}function $He(){return EW.apply(null,arguments).exponent(.5)}function gbe(){var n=[],e=sl;function t(r){if(r!=null&&!isNaN(r=+r))return e((RI(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Yv),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Eze(n,a/r))},t.copy=function(){return gbe(e).domain(n)},Yg.apply(t,arguments)}function ij(){var n=0,e=.5,t=1,r=1,i,a,o,s,l,c=sl,u,d=!1,h;function f(v){return isNaN(v=+v)?h:(v=.5+((v=+u(v))-a)*(r*v<r*a?s:l),c(d?Math.max(0,Math.min(1,v)):v))}f.domain=function(v){return arguments.length?([n,e,t]=v,i=u(n=+n),a=u(e=+e),o=u(t=+t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f):[n,e,t]},f.clamp=function(v){return arguments.length?(d=!!v,f):d},f.interpolator=function(v){return arguments.length?(c=v,f):c};function m(v){return function(y){var w,S,T;return arguments.length?([w,S,T]=y,c=Zze(v,[w,S,T]),f):[c(0),c(.5),c(1)]}}return f.range=m(cT),f.rangeRound=m(cW),f.unknown=function(v){return arguments.length?(h=v,f):h},function(v){return u=v,i=v(n),a=v(e),o=v(t),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,f}}function mbe(){var n=xy(ij()(sl));return n.copy=function(){return Sy(n,mbe())},Yg.apply(n,arguments)}function vbe(){var n=fW(ij()).domain([.1,1,10]);return n.copy=function(){return Sy(n,vbe()).base(n.base())},Yg.apply(n,arguments)}function ybe(){var n=pW(ij());return n.copy=function(){return Sy(n,ybe()).constant(n.constant())},Yg.apply(n,arguments)}function AW(){var n=gW(ij());return n.copy=function(){return Sy(n,AW()).exponent(n.exponent())},Yg.apply(n,arguments)}function BHe(){return AW.apply(null,arguments).exponent(.5)}const Nne=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:KC,scaleDiverging:mbe,scaleDivergingLog:vbe,scaleDivergingPow:AW,scaleDivergingSqrt:BHe,scaleDivergingSymlog:ybe,scaleIdentity:X0e,scaleImplicit:Cz,scaleLinear:_O,scaleLog:Q0e,scaleOrdinal:oW,scalePoint:Yk,scalePow:mW,scaleQuantile:tbe,scaleQuantize:nbe,scaleRadial:ebe,scaleSequential:hbe,scaleSequentialLog:fbe,scaleSequentialPow:EW,scaleSequentialQuantile:gbe,scaleSequentialSqrt:$He,scaleSequentialSymlog:pbe,scaleSqrt:w9e,scaleSymlog:J0e,scaleThreshold:rbe,scaleTime:jHe,scaleUtc:FHe,tickFormat:K0e},Symbol.toStringTag,{value:"Module"}));var k$,Rne;function bbe(){if(Rne)return k$;Rne=1;var n=oT();function e(t,r,i){for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r(s);if(l!=null&&(c===void 0?l===l&&!n(l):i(l,c)))var c=l,u=s}return u}return k$=e,k$}var C$,One;function UHe(){if(One)return C$;One=1;function n(e,t){return e>t}return C$=n,C$}var D$,Lne;function VHe(){if(Lne)return D$;Lne=1;var n=bbe(),e=UHe(),t=lT();function r(i){return i&&i.length?n(i,t,e):void 0}return D$=r,D$}var zHe=VHe();const aj=Lr(zHe);var I$,jne;function HHe(){if(jne)return I$;jne=1;function n(e,t){return e<t}return I$=n,I$}var M$,Fne;function GHe(){if(Fne)return M$;Fne=1;var n=bbe(),e=HHe(),t=lT();function r(i){return i&&i.length?n(i,t,e):void 0}return M$=r,M$}var WHe=GHe();const oj=Lr(WHe);var P$,$ne;function qHe(){if($ne)return P$;$ne=1;var n=V7(),e=wy(),t=k0e(),r=Yl();function i(a,o){var s=r(a)?n:t;return s(a,e(o,3))}return P$=i,P$}var N$,Bne;function YHe(){if(Bne)return N$;Bne=1;var n=E0e(),e=qHe();function t(r,i){return n(e(r,i),1)}return N$=t,N$}var KHe=YHe();const XHe=Lr(KHe);var R$,Une;function ZHe(){if(Une)return R$;Une=1;var n=tW();function e(t,r){return n(t,r)}return R$=e,R$}var QHe=ZHe();const kW=Lr(QHe);var uT=1e9,JHe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DW,Gi=!0,qu="[DecimalError] ",sw=qu+"Invalid argument: ",CW=qu+"Exponent out of range: ",dT=Math.floor,Tb=Math.pow,eGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nc,ko=1e7,Li=7,wbe=9007199254740991,kO=dT(wbe/Li),Pt={};Pt.absoluteValue=Pt.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Pt.comparedTo=Pt.cmp=function(n){var e,t,r,i,a=this;if(n=new a.constructor(n),a.s!==n.s)return a.s||-n.s;if(a.e!==n.e)return a.e>n.e^a.s<0?1:-1;for(r=a.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(a.d[e]!==n.d[e])return a.d[e]>n.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Pt.decimalPlaces=Pt.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*Li;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Pt.dividedBy=Pt.div=function(n){return mg(this,new this.constructor(n))};Pt.dividedToIntegerBy=Pt.idiv=function(n){var e=this,t=e.constructor;return wi(mg(e,new t(n),0,1),t.precision)};Pt.equals=Pt.eq=function(n){return!this.cmp(n)};Pt.exponent=function(){return Ga(this)};Pt.greaterThan=Pt.gt=function(n){return this.cmp(n)>0};Pt.greaterThanOrEqualTo=Pt.gte=function(n){return this.cmp(n)>=0};Pt.isInteger=Pt.isint=function(){return this.e>this.d.length-2};Pt.isNegative=Pt.isneg=function(){return this.s<0};Pt.isPositive=Pt.ispos=function(){return this.s>0};Pt.isZero=function(){return this.s===0};Pt.lessThan=Pt.lt=function(n){return this.cmp(n)<0};Pt.lessThanOrEqualTo=Pt.lte=function(n){return this.cmp(n)<1};Pt.logarithm=Pt.log=function(n){var e,t=this,r=t.constructor,i=r.precision,a=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Nc))throw Error(qu+"NaN");if(t.s<1)throw Error(qu+(t.s?"NaN":"-Infinity"));return t.eq(Nc)?new r(0):(Gi=!1,e=mg(eD(t,a),eD(n,a),a),Gi=!0,wi(e,i))};Pt.minus=Pt.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?_be(e,n):xbe(e,(n.s=-n.s,n))};Pt.modulo=Pt.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(qu+"NaN");return t.s?(Gi=!1,e=mg(t,n,0,1).times(n),Gi=!0,t.minus(e)):wi(new r(t),i)};Pt.naturalExponential=Pt.exp=function(){return Sbe(this)};Pt.naturalLogarithm=Pt.ln=function(){return eD(this)};Pt.negated=Pt.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Pt.plus=Pt.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?xbe(e,n):_be(e,(n.s=-n.s,n))};Pt.precision=Pt.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(sw+n);if(e=Ga(i)+1,r=i.d.length-1,t=r*Li+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};Pt.squareRoot=Pt.sqrt=function(){var n,e,t,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(qu+"NaN")}for(n=Ga(s),Gi=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=vf(s.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=dT((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=o=t+3;;)if(a=r,r=a.plus(mg(s,a,o+2)).times(.5),vf(a.d).slice(0,o)===(e=vf(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(wi(a,t+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return Gi=!0,wi(r,t)};Pt.times=Pt.mul=function(n){var e,t,r,i,a,o,s,l,c,u=this,d=u.constructor,h=u.d,f=(n=new d(n)).d;if(!u.s||!n.s)return new d(0);for(n.s*=u.s,t=u.e+n.e,l=h.length,c=f.length,l<c&&(a=h,h=f,f=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+f[r]*h[i-r-1]+e,a[i--]=s%ko|0,e=s/ko|0;a[i]=(a[i]+e)%ko|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),n.d=a,n.e=t,Gi?wi(n,d.precision):n};Pt.toDecimalPlaces=Pt.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(Nf(n,0,uT),e===void 0?e=r.rounding:Nf(e,0,8),wi(t,n+Ga(t)+1,e))};Pt.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Cw(r,!0):(Nf(n,0,uT),e===void 0?e=i.rounding:Nf(e,0,8),r=wi(new i(r),n+1,e),t=Cw(r,!0,n+1)),t};Pt.toFixed=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?Cw(i):(Nf(n,0,uT),e===void 0?e=a.rounding:Nf(e,0,8),r=wi(new a(i),n+Ga(i)+1,e),t=Cw(r.abs(),!1,n+Ga(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};Pt.toInteger=Pt.toint=function(){var n=this,e=n.constructor;return wi(new e(n),Ga(n)+1,e.rounding)};Pt.toNumber=function(){return+this};Pt.toPower=Pt.pow=function(n){var e,t,r,i,a,o,s=this,l=s.constructor,c=12,u=+(n=new l(n));if(!n.s)return new l(Nc);if(s=new l(s),!s.s){if(n.s<1)throw Error(qu+"Infinity");return s}if(s.eq(Nc))return s;if(r=l.precision,n.eq(Nc))return wi(s,r);if(e=n.e,t=n.d.length-1,o=e>=t,a=s.s,o){if((t=u<0?-u:u)<=wbe){for(i=new l(Nc),e=Math.ceil(r/Li+4),Gi=!1;t%2&&(i=i.times(s),zne(i.d,e)),t=dT(t/2),t!==0;)s=s.times(s),zne(s.d,e);return Gi=!0,n.s<0?new l(Nc).div(i):wi(i,r)}}else if(a<0)throw Error(qu+"NaN");return a=a<0&&n.d[Math.max(e,t)]&1?-1:1,s.s=1,Gi=!1,i=n.times(eD(s,r+c)),Gi=!0,i=Sbe(i),i.s=a,i};Pt.toPrecision=function(n,e){var t,r,i=this,a=i.constructor;return n===void 0?(t=Ga(i),r=Cw(i,t<=a.toExpNeg||t>=a.toExpPos)):(Nf(n,1,uT),e===void 0?e=a.rounding:Nf(e,0,8),i=wi(new a(i),n,e),t=Ga(i),r=Cw(i,n<=t||t<=a.toExpNeg,n)),r};Pt.toSignificantDigits=Pt.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(Nf(n,1,uT),e===void 0?e=r.rounding:Nf(e,0,8)),wi(new r(t),n,e)};Pt.toString=Pt.valueOf=Pt.val=Pt.toJSON=Pt[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=Ga(n),t=n.constructor;return Cw(n,e<=t.toExpNeg||e>=t.toExpPos)};function xbe(n,e){var t,r,i,a,o,s,l,c,u=n.constructor,d=u.precision;if(!n.s||!e.s)return e.s||(e=new u(n)),Gi?wi(e,d):e;if(l=n.d,c=e.d,o=n.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(d/Li),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),t=0;a;)t=(l[--a]=l[a]+c[a]+t)/ko|0,l[a]%=ko;for(t&&(l.unshift(t),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Gi?wi(e,d):e}function Nf(n,e,t){if(n!==~~n||n<e||n>t)throw Error(sw+n)}function vf(n){var e,t,r,i=n.length-1,a="",o=n[0];if(i>0){for(a+=o,e=1;e<i;e++)r=n[e]+"",t=Li-r.length,t&&(a+=Cv(t)),a+=r;o=n[e],r=o+"",t=Li-r.length,t&&(a+=Cv(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var mg=function(){function n(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%ko|0,o=a/ko|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function t(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*ko+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,u,d,h,f,m,v,y,w,S,T,C,k,A,D,P,N=r.constructor,R=r.s==i.s?1:-1,L=r.d,B=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(qu+"Division by zero");for(l=r.e-i.e,D=B.length,k=L.length,f=new N(R),m=f.d=[],c=0;B[c]==(L[c]||0);)++c;if(B[c]>(L[c]||0)&&--l,a==null?S=a=N.precision:o?S=a+(Ga(r)-Ga(i))+1:S=a,S<0)return new N(0);if(S=S/Li+2|0,c=0,D==1)for(u=0,B=B[0],S++;(c<k||u)&&S--;c++)T=u*ko+(L[c]||0),m[c]=T/B|0,u=T%B|0;else{for(u=ko/(B[0]+1)|0,u>1&&(B=n(B,u),L=n(L,u),D=B.length,k=L.length),C=D,v=L.slice(0,D),y=v.length;y<D;)v[y++]=0;P=B.slice(),P.unshift(0),A=B[0],B[1]>=ko/2&&++A;do u=0,s=e(B,v,D,y),s<0?(w=v[0],D!=y&&(w=w*ko+(v[1]||0)),u=w/A|0,u>1?(u>=ko&&(u=ko-1),d=n(B,u),h=d.length,y=v.length,s=e(d,v,h,y),s==1&&(u--,t(d,D<h?P:B,h))):(u==0&&(s=u=1),d=B.slice()),h=d.length,h<y&&d.unshift(0),t(v,d,y),s==-1&&(y=v.length,s=e(B,v,D,y),s<1&&(u++,t(v,D<y?P:B,y))),y=v.length):s===0&&(u++,v=[0]),m[c++]=u,s&&v[0]?v[y++]=L[C]||0:(v=[L[C]],y=1);while((C++<k||v[0]!==void 0)&&S--)}return m[0]||m.shift(),f.e=l,wi(f,o?a+Ga(f)+1:a)}}();function Sbe(n,e){var t,r,i,a,o,s,l=0,c=0,u=n.constructor,d=u.precision;if(Ga(n)>16)throw Error(CW+Ga(n));if(!n.s)return new u(Nc);for(Gi=!1,s=d,o=new u(.03125);n.abs().gte(.1);)n=n.times(o),c+=5;for(r=Math.log(Tb(2,c))/Math.LN10*2+5|0,s+=r,t=i=a=new u(Nc),u.precision=s;;){if(i=wi(i.times(n),s),t=t.times(++l),o=a.plus(mg(i,t,s)),vf(o.d).slice(0,s)===vf(a.d).slice(0,s)){for(;c--;)a=wi(a.times(a),s);return u.precision=d,e==null?(Gi=!0,wi(a,d)):a}a=o}}function Ga(n){for(var e=n.e*Li,t=n.d[0];t>=10;t/=10)e++;return e}function O$(n,e,t){if(e>n.LN10.sd())throw Gi=!0,t&&(n.precision=t),Error(qu+"LN10 precision limit exceeded");return wi(new n(n.LN10),e)}function Cv(n){for(var e="";n--;)e+="0";return e}function eD(n,e){var t,r,i,a,o,s,l,c,u,d=1,h=10,f=n,m=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(qu+(f.s?"NaN":"-Infinity"));if(f.eq(Nc))return new v(0);if(e==null?(Gi=!1,c=y):c=e,f.eq(10))return e==null&&(Gi=!0),O$(v,c);if(c+=h,v.precision=c,t=vf(m),r=t.charAt(0),a=Ga(f),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)f=f.times(n),t=vf(f.d),r=t.charAt(0),d++;a=Ga(f),r>1?(f=new v("0."+t),a++):f=new v(r+"."+t.slice(1))}else return l=O$(v,c+2,y).times(a+""),f=eD(new v(r+"."+t.slice(1)),c-h).plus(l),v.precision=y,e==null?(Gi=!0,wi(f,y)):f;for(s=o=f=mg(f.minus(Nc),f.plus(Nc),c),u=wi(f.times(f),c),i=3;;){if(o=wi(o.times(u),c),l=s.plus(mg(o,new v(i),c)),vf(l.d).slice(0,c)===vf(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(O$(v,c+2,y).times(a+""))),s=mg(s,new v(d),c),v.precision=y,e==null?(Gi=!0,wi(s,y)):s;s=l,i+=2}}function Vne(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=dT(t/Li),n.d=[],r=(t+1)%Li,t<0&&(r+=Li),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=Li;r<i;)n.d.push(+e.slice(r,r+=Li));e=e.slice(r),r=Li-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),Gi&&(n.e>kO||n.e<-kO))throw Error(CW+t)}else n.s=0,n.e=0,n.d=[0];return n}function wi(n,e,t){var r,i,a,o,s,l,c,u,d=n.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Li,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/Li),a=d.length,u>=a)return n;for(c=a=d[u],o=1;a>=10;a/=10)o++;r%=Li,i=r-Li+o}if(t!==void 0&&(a=Tb(10,o-i-1),s=c/a%10|0,l=e<0||d[u+1]!==void 0||c%a,l=t<4?(s||l)&&(t==0||t==(n.s<0?3:2)):s>5||s==5&&(t==4||l||t==6&&(r>0?i>0?c/Tb(10,o-i):0:d[u-1])%10&1||t==(n.s<0?8:7))),e<1||!d[0])return l?(a=Ga(n),d.length=1,e=e-a-1,d[0]=Tb(10,(Li-e%Li)%Li),n.e=dT(-e/Li)||0):(d.length=1,d[0]=n.e=n.s=0),n;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Tb(10,Li-r),d[u]=i>0?(c/Tb(10,o-i)%Tb(10,i)|0)*a:0),l)for(;;)if(u==0){(d[0]+=a)==ko&&(d[0]=1,++n.e);break}else{if(d[u]+=a,d[u]!=ko)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Gi&&(n.e>kO||n.e<-kO))throw Error(CW+Ga(n));return n}function _be(n,e){var t,r,i,a,o,s,l,c,u,d,h=n.constructor,f=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),Gi?wi(e,f):e;if(l=n.d,d=e.d,r=e.e,c=n.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(t=l,o=-o,s=d.length):(t=d,r=c,s=l.length),i=Math.max(Math.ceil(f/Li),s)+2,o>i&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for(i=l.length,s=d.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(t=l,l=d,d=t,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=ko-1;--l[a],l[i]+=ko}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Gi?wi(e,f):e):new h(0)}function Cw(n,e,t){var r,i=Ga(n),a=vf(n.d),o=a.length;return e?(t&&(r=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+Cv(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Cv(-i-1)+a,t&&(r=t-o)>0&&(a+=Cv(r))):i>=o?(a+=Cv(i+1-o),t&&(r=t-i-1)>0&&(a=a+"."+Cv(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),t&&(r=t-o)>0&&(i+1===o&&(a+="."),a+=Cv(r))),n.s<0?"-"+a:a}function zne(n,e){if(n.length>e)return n.length=e,!0}function Tbe(n){var e,t,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(sw+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return Vne(o,a.toString())}else if(typeof a!="string")throw Error(sw+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,eGe.test(a))Vne(o,a);else throw Error(sw+a)}if(i.prototype=Pt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Tbe,i.config=i.set=tGe,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function tGe(n){if(!n||typeof n!="object")throw Error(qu+"Object expected");var e,t,r,i=["precision",1,uT,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(dT(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(sw+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(sw+t+": "+r);return this}var DW=Tbe(JHe);Nc=new DW(1);const fi=DW;function nGe(n){return oGe(n)||aGe(n)||iGe(n)||rGe()}function rGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iGe(n,e){if(n){if(typeof n=="string")return Pz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pz(n,e)}}function aGe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function oGe(n){if(Array.isArray(n))return Pz(n)}function Pz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var sGe=function(e){return e},Ebe={},Abe=function(e){return e===Ebe},Hne=function(e){return function t(){return arguments.length===0||arguments.length===1&&Abe(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},lGe=function n(e,t){return e===1?t:Hne(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==Ebe}).length;return o>=e?t.apply(void 0,i):n(e-o,Hne(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(d){return Abe(d)?l.shift():d});return t.apply(void 0,nGe(u).concat(l))}))})},sj=function(e){return lGe(e.length,e)},Nz=function(e,t){for(var r=[],i=e;i<t;++i)r[i-e]=i;return r},cGe=sj(function(n,e){return Array.isArray(e)?e.map(n):Object.keys(e).map(function(t){return e[t]}).map(n)}),uGe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return sGe;var i=t.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},Rz=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},kbe=function(e){var t=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t&&a.every(function(s,l){return s===t[l]})||(t=a,r=e.apply(void 0,a)),r}};function dGe(n){var e;return n===0?e=1:e=Math.floor(new fi(n).abs().log(10).toNumber())+1,e}function hGe(n,e,t){for(var r=new fi(n),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(t),i++;return a}var fGe=sj(function(n,e,t){var r=+n,i=+e;return r+t*(i-r)}),pGe=sj(function(n,e,t){var r=e-+n;return r=r||1/0,(t-n)/r}),gGe=sj(function(n,e,t){var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});const lj={rangeStep:hGe,getDigitCount:dGe,interpolateNumber:fGe,uninterpolateNumber:pGe,uninterpolateTruncation:gGe};function Oz(n){return yGe(n)||vGe(n)||Cbe(n)||mGe()}function mGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vGe(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function yGe(n){if(Array.isArray(n))return Lz(n)}function tD(n,e){return xGe(n)||wGe(n,e)||Cbe(n,e)||bGe()}function bGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cbe(n,e){if(n){if(typeof n=="string")return Lz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lz(n,e)}}function Lz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function wGe(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,i=!1,a=void 0;try{for(var o=n[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return t}}function xGe(n){if(Array.isArray(n))return n}function Dbe(n){var e=tD(n,2),t=e[0],r=e[1],i=t,a=r;return t>r&&(i=r,a=t),[i,a]}function Ibe(n,e,t){if(n.lte(0))return new fi(0);var r=lj.getDigitCount(n.toNumber()),i=new fi(10).pow(r),a=n.div(i),o=r!==1?.05:.1,s=new fi(Math.ceil(a.div(o).toNumber())).add(t).mul(o),l=s.mul(i);return e?l:new fi(Math.ceil(l))}function SGe(n,e,t){var r=1,i=new fi(n);if(!i.isint()&&t){var a=Math.abs(n);a<1?(r=new fi(10).pow(lj.getDigitCount(n)-1),i=new fi(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new fi(Math.floor(n)))}else n===0?i=new fi(Math.floor((e-1)/2)):t||(i=new fi(Math.floor(n)));var o=Math.floor((e-1)/2),s=uGe(cGe(function(l){return i.add(new fi(l-o).mul(r)).toNumber()}),Nz);return s(0,e)}function Mbe(n,e,t,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-n)/(t-1)))return{step:new fi(0),tickMin:new fi(0),tickMax:new fi(0)};var a=Ibe(new fi(e).sub(n).div(t-1),r,i),o;n<=0&&e>=0?o=new fi(0):(o=new fi(n).add(e).div(2),o=o.sub(new fi(o).mod(a)));var s=Math.ceil(o.sub(n).div(a).toNumber()),l=Math.ceil(new fi(e).sub(o).div(a).toNumber()),c=s+l+1;return c>t?Mbe(n,e,t,r,i+1):(c<t&&(l=e>0?l+(t-c):l,s=e>0?s:s+(t-c)),{step:a,tickMin:o.sub(new fi(s).mul(a)),tickMax:o.add(new fi(l).mul(a))})}function _Ge(n){var e=tD(n,2),t=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Dbe([t,r]),l=tD(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(Oz(Nz(0,i-1).map(function(){return 1/0}))):[].concat(Oz(Nz(0,i-1).map(function(){return-1/0})),[u]);return t>r?Rz(d):d}if(c===u)return SGe(c,i,a);var h=Mbe(c,u,o,a),f=h.step,m=h.tickMin,v=h.tickMax,y=lj.rangeStep(m,v.add(new fi(.1).mul(f)),f);return t>r?Rz(y):y}function TGe(n,e){var t=tD(n,2),r=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Dbe([r,i]),s=tD(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=Ibe(new fi(c).sub(l).div(u-1),a,0),h=[].concat(Oz(lj.rangeStep(new fi(l),new fi(c).sub(new fi(.99).mul(d)),d)),[c]);return r>i?Rz(h):h}var EGe=kbe(_Ge),AGe=kbe(TGe),kGe="Invariant failed";function Dw(n,e){throw new Error(kGe)}var CGe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function T1(n){"@babel/helpers - typeof";return T1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T1(n)}function CO(){return CO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CO.apply(this,arguments)}function DGe(n,e){return NGe(n)||PGe(n,e)||MGe(n,e)||IGe()}function IGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MGe(n,e){if(n){if(typeof n=="string")return Gne(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gne(n,e)}}function Gne(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function PGe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function NGe(n){if(Array.isArray(n))return n}function RGe(n,e){if(n==null)return{};var t=OGe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function OGe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function LGe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function jGe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Rbe(r.key),r)}}function FGe(n,e,t){return e&&jGe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function $Ge(n,e,t){return e=DO(e),BGe(n,Pbe()?Reflect.construct(e,t||[],DO(n).constructor):e.apply(n,t))}function BGe(n,e){if(e&&(T1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UGe(n)}function UGe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pbe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pbe=function(){return!!n})()}function DO(n){return DO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DO(n)}function VGe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&jz(n,e)}function jz(n,e){return jz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jz(n,e)}function Nbe(n,e,t){return e=Rbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rbe(n){var e=zGe(n,"string");return T1(e)=="symbol"?e:e+""}function zGe(n,e){if(T1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(T1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var cj=function(n){function e(){return LGe(this,e),$Ge(this,e,arguments)}return VGe(e,n),FGe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=RGe(r,CGe),f=Vr(h,!1);this.props.direction==="x"&&u.type!=="number"&&Dw();var m=l.map(function(v){var y=c(v,s),w=y.x,S=y.y,T=y.value,C=y.errorVal;if(!C)return null;var k=[],A,D;if(Array.isArray(C)){var P=DGe(C,2);A=P[0],D=P[1]}else A=D=C;if(a==="vertical"){var N=u.scale,R=S+i,L=R+o,B=R-o,$=N(T-A),G=N(T+D);k.push({x1:G,y1:L,x2:G,y2:B}),k.push({x1:$,y1:R,x2:G,y2:R}),k.push({x1:$,y1:L,x2:$,y2:B})}else if(a==="horizontal"){var W=d.scale,K=w+i,X=K-o,te=K+o,ie=W(T-A),z=W(T+D);k.push({x1:X,y1:z,x2:te,y2:z}),k.push({x1:K,y1:ie,x2:K,y2:z}),k.push({x1:X,y1:ie,x2:te,y2:ie})}return we.createElement(Do,CO({className:"recharts-errorBar",key:"bar-".concat(k.map(function(se){return"".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))},f),k.map(function(se){return we.createElement("line",CO({},se,{key:"line-".concat(se.x1,"-").concat(se.x2,"-").concat(se.y1,"-").concat(se.y2)}))}))});return we.createElement(Do,{className:"recharts-errorBars"},m)}}])}(we.Component);Nbe(cj,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Nbe(cj,"displayName","ErrorBar");function nD(n){"@babel/helpers - typeof";return nD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nD(n)}function Wne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wne(Object(t),!0).forEach(function(r){HGe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HGe(n,e,t){return e=GGe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GGe(n){var e=WGe(n,"string");return nD(e)=="symbol"?e:e+""}function WGe(n,e){if(nD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(nD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Obe=function(e){var t=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Cc(t,z_);if(!o)return null;var s=z_.defaultProps,l=s!==void 0?K0(K0({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(u,d){var h=d.item,f=d.props,m=f.sectors||f.data||[];return u.concat(m.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(r||[]).map(function(u){var d=u.item,h=d.type.defaultProps,f=h!==void 0?K0(K0({},h),d.props):{},m=f.dataKey,v=f.name,y=f.legendType,w=f.hide;return{inactive:w,dataKey:m,type:l.iconType||y||"square",color:IW(d),value:v||m,payload:f}}),K0(K0(K0({},l),z_.getWithHeight(o,i)),{},{payload:c,item:o})};function rD(n){"@babel/helpers - typeof";return rD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rD(n)}function qne(n){return XGe(n)||KGe(n)||YGe(n)||qGe()}function qGe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YGe(n,e){if(n){if(typeof n=="string")return Fz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fz(n,e)}}function KGe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function XGe(n){if(Array.isArray(n))return Fz(n)}function Fz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Yne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yne(Object(t),!0).forEach(function(r){G_(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yne(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function G_(n,e,t){return e=ZGe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZGe(n){var e=QGe(n,"string");return rD(e)=="symbol"?e:e+""}function QGe(n,e){if(rD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(rD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Rf(n,e,t){return Xr(n)||Xr(e)?t:oo(e)?zu(n,e,t):cr(e)?e(n):t}function Kk(n,e,t,r){var i=XHe(n,function(s){return Rf(s,e)});if(t==="number"){var a=i.filter(function(s){return wt(s)||parseFloat(s)});return a.length?[oj(a),aj(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!Xr(s)}):i;return o.map(function(s){return oo(s)||s instanceof Date?s:""})}var JGe=function(e){var t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,d=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,f=void 0;if(Kd(d-u)!==Kd(h-d)){var m=[];if(Kd(h-d)===Kd(l[1]-l[0])){f=h;var v=d+l[1]-l[0];m[0]=Math.min(v,(v+u)/2),m[1]=Math.max(v,(v+u)/2)}else{f=u;var y=h+l[1]-l[0];m[0]=Math.min(d,(y+d)/2),m[1]=Math.max(d,(y+d)/2)}var w=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>w[0]&&e<=w[1]||e>=m[0]&&e<=m[1]){o=i[c].index;break}}else{var S=Math.min(u,h),T=Math.max(u,h);if(e>(S+d)/2&&e<=(T+d)/2){o=i[c].index;break}}}else for(var C=0;C<s;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<s-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===s-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){o=r[C].index;break}return o},IW=function(e){var t,r=e,i=r.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?pa(pa({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},e8e=function(e){var t=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var u=a[s[l]].stackGroups,d=Object.keys(u),h=0,f=d.length;h<f;h++){var m=u[d[h]],v=m.items,y=m.cateAxisId,w=v.filter(function(D){return pg(D.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,T=S!==void 0?pa(pa({},S),w[0].props):w[0].props,C=T.barSize,k=T[y];o[k]||(o[k]=[]);var A=Xr(C)?t:C;o[k].push({item:w[0],stackList:w.slice(1),barSize:Xr(A)?void 0:kw(A,r,0)})}}return o},t8e=function(e){var t=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=kw(t,i,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=i/l,m=o.reduce(function(C,k){return C+k.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&f>0&&(h=!0,f*=.9,m=l*f);var v=(i-m)/2>>0,y={offset:v-c,size:0};u=o.reduce(function(C,k){var A={item:k.item,position:{offset:y.offset+y.size+c,size:h?f:k.barSize}},D=[].concat(qne(C),[A]);return y=D[D.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){D.push({item:P,position:y})}),D},d)}else{var w=kw(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var S=(i-2*w-(l-1)*c)/l;S>1&&(S>>=0);var T=s===+s?Math.min(S,s):S;u=o.reduce(function(C,k,A){var D=[].concat(qne(C),[{item:k.item,position:{offset:w+(S+c)*A+(S-T)/2,size:T}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(P){D.push({item:P,position:D[D.length-1].position})}),D},d)}return u},n8e=function(e,t,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=Obe({children:a,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,f=c.align,m=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&m==="middle")&&f!=="center"&&wt(e[f]))return pa(pa({},e),{},G_({},f,e[f]+(d||0)));if((v==="horizontal"||v==="vertical"&&f==="center")&&m!=="middle"&&wt(e[m]))return pa(pa({},e),{},G_({},m,e[m]+(h||0)))}return e},r8e=function(e,t,r){return Xr(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||r==="x"?t==="xAxis":r==="y"?t==="yAxis":!0},Lbe=function(e,t,r,i,a){var o=t.props.children,s=eh(o,cj).filter(function(c){return r8e(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=Rf(u,r);if(Xr(d))return c;var h=Array.isArray(d)?[oj(d),aj(d)]:[d,d],f=l.reduce(function(m,v){var y=Rf(u,v,0),w=h[0]-Math.abs(Array.isArray(y)?y[0]:y),S=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,m[0]),Math.max(S,m[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},i8e=function(e,t,r,i,a){var o=t.map(function(s){return Lbe(e,s,r,a,i)}).filter(function(s){return!Xr(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},jbe=function(e,t,r,i,a){var o=t.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Lbe(e,l,c,i)||Kk(e,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},Fbe=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},$be=function(e,t,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===t&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(t),o||s.push(r),s},ig=function(e,t,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(t||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Kd(s[0]-s[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!MI(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:a?a[d]:d,index:h,offset:c}})},L$=new WeakMap,_P=function(e,t){if(typeof t!="function")return e;L$.has(e)||L$.set(e,new WeakMap);var r=L$.get(e);if(r.has(t))return r.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,i),i},a8e=function(e,t,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:KC(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:_O(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:Yk(),realScaleType:"point"}:a==="category"?{scale:KC(),realScaleType:"band"}:{scale:_O(),realScaleType:"linear"};if(Aw(i)){var l="scale".concat(GL(i));return{scale:(Nne[l]||Yk)(),realScaleType:Nne[l]?l:"point"}}return cr(i)?{scale:i}:{scale:Yk(),realScaleType:"point"}},Kne=1e-4,o8e=function(e){var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,i=e.range(),a=Math.min(i[0],i[1])-Kne,o=Math.max(i[0],i[1])+Kne,s=e(t[0]),l=e(t[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([t[0],t[r-1]])}},s8e=function(e,t){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===t)return e[r].position;return null},l8e=function(e,t){if(!t||t.length!==2||!wt(t[0])||!wt(t[1]))return e;var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!wt(e[0])||e[0]<r)&&(a[0]=r),(!wt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},c8e=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<t;++s){var l=MI(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},u8e=function(e){var t=e.length;if(!(t<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<t;++o){var s=MI(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},d8e={sign:c8e,expand:YBe,none:m1,silhouette:KBe,wiggle:XBe,positive:u8e},h8e=function(e,t,r){var i=t.map(function(s){return s.props.dataKey}),a=d8e[r],o=qBe().keys(i).value(function(s,l){return+Rf(s,l,0)}).order(pz).offset(a);return o(e)},f8e=function(e,t,r,i,a,o){if(!e)return null;var s=o?t.reverse():t,l={},c=s.reduce(function(d,h){var f,m=(f=h.type)!==null&&f!==void 0&&f.defaultProps?pa(pa({},h.type.defaultProps),h.props):h.props,v=m.stackId,y=m.hide;if(y)return d;var w=m[r],S=d[w]||{hasStack:!1,stackGroups:{}};if(oo(v)){var T=S.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(h),S.hasStack=!0,S.stackGroups[v]=T}else S.stackGroups[HL("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return pa(pa({},d),{},G_({},w,S))},l),u={};return Object.keys(c).reduce(function(d,h){var f=c[h];if(f.hasStack){var m={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(v,y){var w=f.stackGroups[y];return pa(pa({},v),{},G_({},y,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:h8e(e,w.items,a)}))},m)}return pa(pa({},d),{},G_({},h,f))},u)},p8e=function(e,t){var r=t.realScaleType,i=t.type,a=t.tickCount,o=t.originalDomain,s=t.allowDecimals,l=r||t.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=EGe(c,a,s);return e.domain([oj(u),aj(u)]),{niceTicks:u}}if(a&&i==="number"){var d=e.domain(),h=AGe(d,a,s);return{niceTicks:h}}return null},Xne=function(e){var t=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(t.type==="category")return r[s]?r[s].coordinate+i:null;var l=Rf(o,t.dataKey,t.domain[s]);return Xr(l)?null:t.scale(l)-a/2+i},g8e=function(e){var t=e.numericAxis,r=t.scale.domain();if(t.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},m8e=function(e,t){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?pa(pa({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(oo(a)){var o=t[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},v8e=function(e){return e.reduce(function(t,r){return[oj(r.concat([t[0]]).filter(wt)),aj(r.concat([t[1]]).filter(wt))]},[1/0,-1/0])},Bbe=function(e,t,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,u){var d=v8e(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Zne=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qne=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$z=function(e,t,r){if(cr(e))return e(t,r);if(!Array.isArray(e))return t;var i=[];if(wt(e[0]))i[0]=r?e[0]:Math.min(e[0],t[0]);else if(Zne.test(e[0])){var a=+Zne.exec(e[0])[1];i[0]=t[0]-a}else cr(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(wt(e[1]))i[1]=r?e[1]:Math.max(e[1],t[1]);else if(Qne.test(e[1])){var o=+Qne.exec(e[1])[1];i[1]=t[1]+o}else cr(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},IO=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&t&&t.length>=2){for(var a=rW(t,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],u=a[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Jne=function(e,t,r){return!e||!e.length||kW(e,zu(r,"type.defaultProps.domain"))?t:e},Ube=function(e,t){var r=e.type.defaultProps?pa(pa({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return pa(pa({},Vr(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:IW(e),value:Rf(t,i),type:l,payload:t,chartType:c,hide:u})};function iD(n){"@babel/helpers - typeof";return iD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iD(n)}function ere(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ere(Object(t),!0).forEach(function(r){y8e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ere(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y8e(n,e,t){return e=b8e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function b8e(n){var e=w8e(n,"string");return iD(e)=="symbol"?e:e+""}function w8e(n,e){if(iD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(iD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var MO=Math.PI/180,x8e=function(e){return e*180/Math.PI},Yo=function(e,t,r,i){return{x:e+Math.cos(-MO*i)*r,y:t+Math.sin(-MO*i)*r}},S8e=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},_8e=function(e,t){var r=e.x,i=e.y,a=t.cx,o=t.cy,s=S8e({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:x8e(c),angleInRadian:c}},T8e=function(e){var t=e.startAngle,r=e.endAngle,i=Math.floor(t/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:t-o*360,endAngle:r-o*360}},E8e=function(e,t){var r=t.startAngle,i=t.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},nre=function(e,t){var r=e.x,i=e.y,a=_8e({x:r,y:i},t),o=a.radius,s=a.angle,l=t.innerRadius,c=t.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=T8e(t),d=u.startAngle,h=u.endAngle,f=s,m;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;m=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;m=f>=h&&f<=d}return m?tre(tre({},t),{},{radius:o,angle:E8e(f,t)}):null};function aD(n){"@babel/helpers - typeof";return aD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aD(n)}var A8e=["offset"];function k8e(n){return M8e(n)||I8e(n)||D8e(n)||C8e()}function C8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D8e(n,e){if(n){if(typeof n=="string")return Bz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bz(n,e)}}function I8e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function M8e(n){if(Array.isArray(n))return Bz(n)}function Bz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function P8e(n,e){if(n==null)return{};var t=N8e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function N8e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function rre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function eo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rre(Object(t),!0).forEach(function(r){R8e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function R8e(n,e,t){return e=O8e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O8e(n){var e=L8e(n,"string");return aD(e)=="symbol"?e:e+""}function L8e(n,e){if(aD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(aD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oD(){return oD=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oD.apply(this,arguments)}var j8e=function(e){var t=e.value,r=e.formatter,i=Xr(e.children)?t:e.children;return cr(r)?r(i):i},F8e=function(e,t){var r=Kd(t-e),i=Math.min(Math.abs(t-e),360);return r*i},$8e=function(e,t,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,f=l.startAngle,m=l.endAngle,v=l.clockWise,y=(d+h)/2,w=F8e(f,m),S=w>=0?1:-1,T,C;i==="insideStart"?(T=f+S*o,C=v):i==="insideEnd"?(T=m-S*o,C=!v):i==="end"&&(T=m+S*o,C=v),C=w<=0?C:!C;var k=Yo(c,u,y,T),A=Yo(c,u,y,T+(C?1:-1)*359),D="M".concat(k.x,",").concat(k.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(C?0:1,`,
    `).concat(A.x,",").concat(A.y),P=Xr(e.id)?HL("recharts-radial-line-"):e.id;return we.createElement("text",oD({},r,{dominantBaseline:"central",className:Nr("recharts-radial-bar-label",s)}),we.createElement("defs",null,we.createElement("path",{id:P,d:D})),we.createElement("textPath",{xlinkHref:"#".concat(P)},t))},B8e=function(e){var t=e.viewBox,r=e.offset,i=e.position,a=t,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,d=a.endAngle,h=(u+d)/2;if(i==="outside"){var f=Yo(o,s,c+r,h),m=f.x,v=f.y;return{x:m,y:v,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,w=Yo(o,s,y,h),S=w.x,T=w.y;return{x:S,y:T,textAnchor:"middle",verticalAnchor:"middle"}},U8e=function(e){var t=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=t,s=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,h=d*i,f=d>0?"end":"start",m=d>0?"start":"end",v=c>=0?1:-1,y=v*i,w=v>0?"end":"start",S=v>0?"start":"end";if(a==="top"){var T={x:s+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:f};return eo(eo({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var C={x:s+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:m};return eo(eo({},C),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var k={x:s-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return eo(eo({},k),r?{width:Math.max(k.x-r.x,0),height:u}:{})}if(a==="right"){var A={x:s+c+y,y:l+u/2,textAnchor:S,verticalAnchor:"middle"};return eo(eo({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:u}:{})}var D=r?{width:c,height:u}:{};return a==="insideLeft"?eo({x:s+y,y:l+u/2,textAnchor:S,verticalAnchor:"middle"},D):a==="insideRight"?eo({x:s+c-y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},D):a==="insideTop"?eo({x:s+c/2,y:l+h,textAnchor:"middle",verticalAnchor:m},D):a==="insideBottom"?eo({x:s+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:f},D):a==="insideTopLeft"?eo({x:s+y,y:l+h,textAnchor:S,verticalAnchor:m},D):a==="insideTopRight"?eo({x:s+c-y,y:l+h,textAnchor:w,verticalAnchor:m},D):a==="insideBottomLeft"?eo({x:s+y,y:l+u-h,textAnchor:S,verticalAnchor:f},D):a==="insideBottomRight"?eo({x:s+c-y,y:l+u-h,textAnchor:w,verticalAnchor:f},D):sT(a)&&(wt(a.x)||Hb(a.x))&&(wt(a.y)||Hb(a.y))?eo({x:s+kw(a.x,c),y:l+kw(a.y,u),textAnchor:"end",verticalAnchor:"end"},D):eo({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},D)},V8e=function(e){return"cx"in e&&wt(e.cx)};function Cs(n){var e=n.offset,t=e===void 0?5:e,r=P8e(n,A8e),i=eo({offset:t},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!a||Xr(s)&&Xr(l)&&!Y.isValidElement(c)&&!cr(c))return null;if(Y.isValidElement(c))return Y.cloneElement(c,i);var f;if(cr(c)){if(f=Y.createElement(c,i),Y.isValidElement(f))return f}else f=j8e(i);var m=V8e(a),v=Vr(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return $8e(i,f,v);var y=m?B8e(i):U8e(i);return we.createElement(mO,oD({className:Nr("recharts-label",d)},v,y,{breakAll:h}),f)}Cs.displayName="Label";var Vbe=function(e){var t=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,f=e.top,m=e.left,v=e.width,y=e.height,w=e.clockWise,S=e.labelViewBox;if(S)return S;if(wt(v)&&wt(y)){if(wt(d)&&wt(h))return{x:d,y:h,width:v,height:y};if(wt(f)&&wt(m))return{x:f,y:m,width:v,height:y}}return wt(d)&&wt(h)?{x:d,y:h,width:0,height:0}:wt(t)&&wt(r)?{cx:t,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:w}:e.viewBox?e.viewBox:{}},z8e=function(e,t){return e?e===!0?we.createElement(Cs,{key:"label-implicit",viewBox:t}):oo(e)?we.createElement(Cs,{key:"label-implicit",viewBox:t,value:e}):Y.isValidElement(e)?e.type===Cs?Y.cloneElement(e,{key:"label-implicit",viewBox:t}):we.createElement(Cs,{key:"label-implicit",content:e,viewBox:t}):cr(e)?we.createElement(Cs,{key:"label-implicit",content:e,viewBox:t}):sT(e)?we.createElement(Cs,oD({viewBox:t},e,{key:"label-implicit"})):null:null},H8e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=Vbe(e),o=eh(i,Cs).map(function(l,c){return Y.cloneElement(l,{viewBox:t||a,key:"label-".concat(c)})});if(!r)return o;var s=z8e(e.label,t||a);return[s].concat(k8e(o))};Cs.parseViewBox=Vbe;Cs.renderCallByParent=H8e;var j$,ire;function G8e(){if(ire)return j$;ire=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return j$=n,j$}var W8e=G8e();const q8e=Lr(W8e);function sD(n){"@babel/helpers - typeof";return sD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sD(n)}var Y8e=["valueAccessor"],K8e=["data","dataKey","clockWise","id","textBreakAll"];function X8e(n){return e7e(n)||J8e(n)||Q8e(n)||Z8e()}function Z8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q8e(n,e){if(n){if(typeof n=="string")return Uz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Uz(n,e)}}function J8e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function e7e(n){if(Array.isArray(n))return Uz(n)}function Uz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function PO(){return PO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},PO.apply(this,arguments)}function are(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ore(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?are(Object(t),!0).forEach(function(r){t7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):are(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function t7e(n,e,t){return e=n7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n7e(n){var e=r7e(n,"string");return sD(e)=="symbol"?e:e+""}function r7e(n,e){if(sD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(sD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sre(n,e){if(n==null)return{};var t=i7e(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function i7e(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var a7e=function(e){return Array.isArray(e.value)?q8e(e.value):e.value};function lw(n){var e=n.valueAccessor,t=e===void 0?a7e:e,r=sre(n,Y8e),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=sre(r,K8e);return!i||!i.length?null:we.createElement(Do,{className:"recharts-label-list"},i.map(function(u,d){var h=Xr(a)?t(u,d):Rf(u&&u.payload,a),f=Xr(s)?{}:{id:"".concat(s,"-").concat(d)};return we.createElement(Cs,PO({},Vr(u,!0),c,f,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Cs.parseViewBox(Xr(o)?u:ore(ore({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}lw.displayName="LabelList";function o7e(n,e){return n?n===!0?we.createElement(lw,{key:"labelList-implicit",data:e}):we.isValidElement(n)||cr(n)?we.createElement(lw,{key:"labelList-implicit",data:e,content:n}):sT(n)?we.createElement(lw,PO({data:e},n,{key:"labelList-implicit"})):null:null}function s7e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var r=n.children,i=eh(r,lw).map(function(o,s){return Y.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!t)return i;var a=o7e(n.label,e);return[a].concat(X8e(i))}lw.renderCallByParent=s7e;function lD(n){"@babel/helpers - typeof";return lD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lD(n)}function Vz(){return Vz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vz.apply(this,arguments)}function lre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lre(Object(t),!0).forEach(function(r){l7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function l7e(n,e,t){return e=c7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c7e(n){var e=u7e(n,"string");return lD(e)=="symbol"?e:e+""}function u7e(n,e){if(lD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(lD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var d7e=function(e,t){var r=Kd(t-e),i=Math.min(Math.abs(t-e),359.999);return r*i},TP=function(e){var t=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,d=Math.asin(l/u)/MO,h=c?a:a+o*d,f=Yo(t,r,u,h),m=Yo(t,r,i,h),v=c?a-o*d:a,y=Yo(t,r,u*Math.cos(d*MO),v);return{center:f,circleTangency:m,lineTangency:y,theta:d}},zbe=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=d7e(o,s),c=o+l,u=Yo(t,r,a,o),d=Yo(t,r,a,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var f=Yo(t,r,i,o),m=Yo(t,r,i,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},h7e=function(e){var t=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=Kd(u-c),h=TP({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),f=h.circleTangency,m=h.lineTangency,v=h.theta,y=TP({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),w=y.circleTangency,S=y.lineTangency,T=y.theta,C=l?Math.abs(c-u):Math.abs(c-u)-v-T;if(C<0)return s?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):zbe({cx:t,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var k="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var A=TP({cx:t,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),D=A.circleTangency,P=A.lineTangency,N=A.theta,R=TP({cx:t,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),L=R.circleTangency,B=R.lineTangency,$=R.theta,G=l?Math.abs(c-u):Math.abs(c-u)-N-$;if(G<0&&o===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(G>180),",").concat(+(d>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},f7e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Hbe=function(e){var t=cre(cre({},f7e),e),r=t.cx,i=t.cy,a=t.innerRadius,o=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=t.className;if(o<a||u===d)return null;var f=Nr("recharts-sector",h),m=o-a,v=kw(s,m,0,!0),y;return v>0&&Math.abs(u-d)<360?y=h7e({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=zbe({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),we.createElement("path",Vz({},Vr(t,!0),{className:f,d:y,role:"img"}))};function cD(n){"@babel/helpers - typeof";return cD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cD(n)}function zz(){return zz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zz.apply(this,arguments)}function ure(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ure(Object(t),!0).forEach(function(r){p7e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ure(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function p7e(n,e,t){return e=g7e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g7e(n){var e=m7e(n,"string");return cD(e)=="symbol"?e:e+""}function m7e(n,e){if(cD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(cD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var hre={curveBasisClosed:LBe,curveBasisOpen:jBe,curveBasis:OBe,curveBumpX:xBe,curveBumpY:SBe,curveLinearClosed:FBe,curveLinear:qL,curveMonotoneX:$Be,curveMonotoneY:BBe,curveNatural:UBe,curveStep:VBe,curveStepAfter:HBe,curveStepBefore:zBe},EP=function(e){return e.x===+e.x&&e.y===+e.y},SA=function(e){return e.x},_A=function(e){return e.y},v7e=function(e,t){if(cr(e))return e;var r="curve".concat(GL(e));return(r==="curveMonotone"||r==="curveBump")&&t?hre["".concat(r).concat(t==="vertical"?"Y":"X")]:hre[r]||qL},y7e=function(e){var t=e.type,r=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=v7e(r,s),d=c?a.filter(function(v){return EP(v)}):a,h;if(Array.isArray(o)){var f=c?o.filter(function(v){return EP(v)}):o,m=d.map(function(v,y){return dre(dre({},v),{},{base:f[y]})});return s==="vertical"?h=mP().y(_A).x1(SA).x0(function(v){return v.base.x}):h=mP().x(SA).y1(_A).y0(function(v){return v.base.y}),h.defined(EP).curve(u),h(m)}return s==="vertical"&&wt(o)?h=mP().y(_A).x1(SA).x0(o):wt(o)?h=mP().x(SA).y1(_A).y0(o):h=Yye().x(SA).y(_A),h.defined(EP).curve(u),h(d)},fre=function(e){var t=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?y7e(e):i;return we.createElement("path",zz({},Vr(e,!1),iO(e),{className:Nr("recharts-curve",t),d:o,ref:a}))},F$={exports:{}},$$,pre;function b7e(){if(pre)return $$;pre=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $$=n,$$}var B$,gre;function w7e(){if(gre)return B$;gre=1;var n=b7e();function e(){}function t(){}return t.resetWarningCache=e,B$=function(){function r(o,s,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},B$}var mre;function x7e(){return mre||(mre=1,F$.exports=w7e()()),F$.exports}var S7e=x7e();const qr=Lr(S7e);var _7e=Object.getOwnPropertyNames,T7e=Object.getOwnPropertySymbols,E7e=Object.prototype.hasOwnProperty;function vre(n,e){return function(r,i,a){return n(r,i,a)&&e(r,i,a)}}function AP(n){return function(t,r,i){if(!t||!r||typeof t!="object"||typeof r!="object")return n(t,r,i);var a=i.cache,o=a.get(t),s=a.get(r);if(o&&s)return o===r&&s===t;a.set(t,r),a.set(r,t);var l=n(t,r,i);return a.delete(t),a.delete(r),l}}function yre(n){return _7e(n).concat(T7e(n))}var A7e=Object.hasOwn||function(n,e){return E7e.call(n,e)};function Xw(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var k7e="__v",C7e="__o",D7e="_owner",bre=Object.getOwnPropertyDescriptor,wre=Object.keys;function I7e(n,e,t){var r=n.length;if(e.length!==r)return!1;for(;r-- >0;)if(!t.equals(n[r],e[r],r,r,n,e,t))return!1;return!0}function M7e(n,e){return Xw(n.getTime(),e.getTime())}function P7e(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function N7e(n,e){return n===e}function xre(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(s=c.next())&&!s.done;){if(i[d]){d++;continue}var h=o.value,f=s.value;if(t.equals(h[0],f[0],l,d,n,e,t)&&t.equals(h[1],f[1],h[0],f[0],n,e,t)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var R7e=Xw;function O7e(n,e,t){var r=wre(n),i=r.length;if(wre(e).length!==i)return!1;for(;i-- >0;)if(!Gbe(n,e,t,r[i]))return!1;return!0}function TA(n,e,t){var r=yre(n),i=r.length;if(yre(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!Gbe(n,e,t,a)||(o=bre(n,a),s=bre(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function L7e(n,e){return Xw(n.valueOf(),e.valueOf())}function j7e(n,e){return n.source===e.source&&n.flags===e.flags}function Sre(n,e,t){var r=n.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=n.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!i[u]&&t.equals(o.value,s.value,o.value,s.value,n,e,t)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function F7e(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function $7e(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Gbe(n,e,t,r){return(r===D7e||r===C7e||r===k7e)&&(n.$$typeof||e.$$typeof)?!0:A7e(e,r)&&t.equals(n[r],e[r],r,r,n,e,t)}var B7e="[object Arguments]",U7e="[object Boolean]",V7e="[object Date]",z7e="[object Error]",H7e="[object Map]",G7e="[object Number]",W7e="[object Object]",q7e="[object RegExp]",Y7e="[object Set]",K7e="[object String]",X7e="[object URL]",Z7e=Array.isArray,_re=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Tre=Object.assign,Q7e=Object.prototype.toString.call.bind(Object.prototype.toString);function J7e(n){var e=n.areArraysEqual,t=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,a=n.areMapsEqual,o=n.areNumbersEqual,s=n.areObjectsEqual,l=n.arePrimitiveWrappersEqual,c=n.areRegExpsEqual,u=n.areSetsEqual,d=n.areTypedArraysEqual,h=n.areUrlsEqual;return function(m,v,y){if(m===v)return!0;if(m==null||v==null)return!1;var w=typeof m;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?o(m,v,y):w==="function"?i(m,v,y):!1;var S=m.constructor;if(S!==v.constructor)return!1;if(S===Object)return s(m,v,y);if(Z7e(m))return e(m,v,y);if(_re!=null&&_re(m))return d(m,v,y);if(S===Date)return t(m,v,y);if(S===RegExp)return c(m,v,y);if(S===Map)return a(m,v,y);if(S===Set)return u(m,v,y);var T=Q7e(m);return T===V7e?t(m,v,y):T===q7e?c(m,v,y):T===H7e?a(m,v,y):T===Y7e?u(m,v,y):T===W7e?typeof m.then!="function"&&typeof v.then!="function"&&s(m,v,y):T===X7e?h(m,v,y):T===z7e?r(m,v,y):T===B7e?s(m,v,y):T===U7e||T===G7e||T===K7e?l(m,v,y):!1}}function eWe(n){var e=n.circular,t=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?TA:I7e,areDatesEqual:M7e,areErrorsEqual:P7e,areFunctionsEqual:N7e,areMapsEqual:r?vre(xre,TA):xre,areNumbersEqual:R7e,areObjectsEqual:r?TA:O7e,arePrimitiveWrappersEqual:L7e,areRegExpsEqual:j7e,areSetsEqual:r?vre(Sre,TA):Sre,areTypedArraysEqual:r?TA:F7e,areUrlsEqual:$7e};if(t&&(i=Tre({},i,t(i))),e){var a=AP(i.areArraysEqual),o=AP(i.areMapsEqual),s=AP(i.areObjectsEqual),l=AP(i.areSetsEqual);i=Tre({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function tWe(n){return function(e,t,r,i,a,o,s){return n(e,t,s)}}function nWe(n){var e=n.circular,t=n.comparator,r=n.createState,i=n.equals,a=n.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,f=u.meta;return t(l,c,{cache:h,equals:i,meta:f,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return t(l,c,o)}}var rWe=_y();_y({strict:!0});_y({circular:!0});_y({circular:!0,strict:!0});_y({createInternalComparator:function(){return Xw}});_y({strict:!0,createInternalComparator:function(){return Xw}});_y({circular:!0,createInternalComparator:function(){return Xw}});_y({circular:!0,createInternalComparator:function(){return Xw},strict:!0});function _y(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,r=n.createInternalComparator,i=n.createState,a=n.strict,o=a===void 0?!1:a,s=eWe(n),l=J7e(s),c=r?r(l):tWe(l);return nWe({circular:t,comparator:l,createState:i,equals:c,strict:o})}function iWe(n){typeof requestAnimationFrame<"u"&&requestAnimationFrame(n)}function Ere(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,r=function i(a){t<0&&(t=a),a-t>e?(n(a),t=-1):iWe(i)};requestAnimationFrame(r)}function Hz(n){"@babel/helpers - typeof";return Hz=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hz(n)}function aWe(n){return cWe(n)||lWe(n)||sWe(n)||oWe()}function oWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sWe(n,e){if(n){if(typeof n=="string")return Are(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Are(n,e)}}function Are(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function lWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function cWe(n){if(Array.isArray(n))return n}function uWe(){var n={},e=function(){return null},t=!1,r=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var o=a,s=aWe(o),l=s[0],c=s.slice(1);if(typeof l=="number"){Ere(i.bind(null,c),l);return}i(l),Ere(i.bind(null,c));return}Hz(a)==="object"&&(n=a,e(n)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function uD(n){"@babel/helpers - typeof";return uD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uD(n)}function kre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kre(Object(t),!0).forEach(function(r){Wbe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wbe(n,e,t){return e=dWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dWe(n){var e=hWe(n,"string");return uD(e)==="symbol"?e:String(e)}function hWe(n,e){if(uD(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(uD(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var fWe=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},pWe=function(e){return e},gWe=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Xk=function(e,t){return Object.keys(t).reduce(function(r,i){return Cre(Cre({},r),{},Wbe({},i,e(i,t[i])))},{})},Dre=function(e,t,r){return e.map(function(i){return"".concat(gWe(i)," ").concat(t,"ms ").concat(r)}).join(",")};function mWe(n,e){return bWe(n)||yWe(n,e)||qbe(n,e)||vWe()}function vWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function bWe(n){if(Array.isArray(n))return n}function wWe(n){return _We(n)||SWe(n)||qbe(n)||xWe()}function xWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qbe(n,e){if(n){if(typeof n=="string")return Gz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gz(n,e)}}function SWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _We(n){if(Array.isArray(n))return Gz(n)}function Gz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var NO=1e-4,Ybe=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Kbe=function(e,t){return e.map(function(r,i){return r*Math.pow(t,i)}).reduce(function(r,i){return r+i})},Ire=function(e,t){return function(r){var i=Ybe(e,t);return Kbe(i,r)}},TWe=function(e,t){return function(r){var i=Ybe(e,t),a=[].concat(wWe(i.map(function(o,s){return o*s}).slice(1)),[0]);return Kbe(a,r)}},Mre=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2],s=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=t[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=mWe(c,4);i=u[0],a=u[1],o=u[2],s=u[3]}}}var d=Ire(i,o),h=Ire(a,s),f=TWe(i,o),m=function(w){return w>1?1:w<0?0:w},v=function(w){for(var S=w>1?1:w,T=S,C=0;C<8;++C){var k=d(T)-S,A=f(T);if(Math.abs(k-S)<NO||A<NO)return h(T);T=m(T-k/A)}return h(T)};return v.isStepper=!1,v},EWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,r=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(u,d,h){var f=-(u-d)*r,m=h*a,v=h+(f-m)*s/1e3,y=h*s/1e3+u;return Math.abs(y-d)<NO&&Math.abs(v)<NO?[d,0]:[y,v]};return l.isStepper=!0,l.dt=s,l},AWe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Mre(i);case"spring":return EWe();default:if(i.split("(")[0]==="cubic-bezier")return Mre(i)}return typeof i=="function"?i:null};function dD(n){"@babel/helpers - typeof";return dD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dD(n)}function Pre(n){return DWe(n)||CWe(n)||Xbe(n)||kWe()}function kWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function DWe(n){if(Array.isArray(n))return qz(n)}function Nre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nre(Object(t),!0).forEach(function(r){Wz(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wz(n,e,t){return e=IWe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function IWe(n){var e=MWe(n,"string");return dD(e)==="symbol"?e:String(e)}function MWe(n,e){if(dD(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(dD(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function PWe(n,e){return OWe(n)||RWe(n,e)||Xbe(n,e)||NWe()}function NWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xbe(n,e){if(n){if(typeof n=="string")return qz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qz(n,e)}}function qz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function RWe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function OWe(n){if(Array.isArray(n))return n}var RO=function(e,t,r){return e+(t-e)*r},Yz=function(e){var t=e.from,r=e.to;return t!==r},LWe=function n(e,t,r){var i=Xk(function(a,o){if(Yz(o)){var s=e(o.from,o.to,o.velocity),l=PWe(s,2),c=l[0],u=l[1];return zo(zo({},o),{},{from:c,velocity:u})}return o},t);return r<1?Xk(function(a,o){return Yz(o)?zo(zo({},o),{},{velocity:RO(o.velocity,i[a].velocity,r),from:RO(o.from,i[a].from,r)}):o},t):n(e,i,r-1)};const jWe=function(n,e,t,r,i){var a=fWe(n,e),o=a.reduce(function(y,w){return zo(zo({},y),{},Wz({},w,[n[w],e[w]]))},{}),s=a.reduce(function(y,w){return zo(zo({},y),{},Wz({},w,{from:n[w],velocity:0,to:e[w]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return Xk(function(w,S){return S.from},s)},f=function(){return!Object.values(s).filter(Yz).length},m=function(w){c||(c=w);var S=w-c,T=S/t.dt;s=LWe(t,s,T),i(zo(zo(zo({},n),e),h())),c=w,f()||(l=requestAnimationFrame(d))},v=function(w){u||(u=w);var S=(w-u)/r,T=Xk(function(k,A){return RO.apply(void 0,Pre(A).concat([t(S)]))},o);if(i(zo(zo(zo({},n),e),T)),S<1)l=requestAnimationFrame(d);else{var C=Xk(function(k,A){return RO.apply(void 0,Pre(A).concat([t(1)]))},o);i(zo(zo(zo({},n),e),C))}};return d=t.isStepper?m:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function E1(n){"@babel/helpers - typeof";return E1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E1(n)}var FWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function $We(n,e){if(n==null)return{};var t=BWe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BWe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function U$(n){return HWe(n)||zWe(n)||VWe(n)||UWe()}function UWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VWe(n,e){if(n){if(typeof n=="string")return Kz(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kz(n,e)}}function zWe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function HWe(n){if(Array.isArray(n))return Kz(n)}function Kz(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Rre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Md(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rre(Object(t),!0).forEach(function(r){bk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function bk(n,e,t){return e=Zbe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GWe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function WWe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Zbe(r.key),r)}}function qWe(n,e,t){return e&&WWe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Zbe(n){var e=YWe(n,"string");return E1(e)==="symbol"?e:String(e)}function YWe(n,e){if(E1(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(E1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KWe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Xz(n,e)}function Xz(n,e){return Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xz(n,e)}function XWe(n){var e=ZWe();return function(){var r=OO(n),i;if(e){var a=OO(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return Zz(this,i)}}function Zz(n,e){if(e&&(E1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qz(n)}function Qz(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OO(n){return OO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OO(n)}var sy=function(n){KWe(t,n);var e=XWe(t);function t(r,i){var a;GWe(this,t),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,h=o.children,f=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(Qz(a)),a.changeStyle=a.changeStyle.bind(Qz(a)),!s||f<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:u}),Zz(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof h=="function")return a.state={style:c},Zz(a);a.state={style:l?bk({},l,c):c}}else a.state={style:{}};return a}return qWe(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,d=a.from,h=this.state.style;if(s){if(!o){var f={style:l?bk({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(f);return}if(!(rWe(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=m||c?d:i.to;if(this.state&&h){var y={style:l?bk({},l,v):v};(l&&h[l]!==v||!l&&h!==v)&&this.setState(y)}this.runAnimation(Md(Md({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,f=jWe(o,s,AWe(c),l,this.changeStyle),m=function(){a.stopJSAnimation=f()};this.manager.start([h,u,m,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],u=c.style,d=c.duration,h=d===void 0?0:d,f=function(v,y,w){if(w===0)return v;var S=y.duration,T=y.easing,C=T===void 0?"ease":T,k=y.style,A=y.properties,D=y.onAnimationEnd,P=w>0?o[w-1]:y,N=A||Object.keys(k);if(typeof C=="function"||C==="spring")return[].concat(U$(v),[a.runJSAnimation.bind(a,{from:P.style,to:k,duration:S,easing:C}),S]);var R=Dre(N,S,C),L=Md(Md(Md({},P.style),k),{},{transition:R});return[].concat(U$(v),[L,S,D]).filter(pWe)};return this.manager.start([l].concat(U$(o.reduce(f,[u,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=uWe());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,f=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?bk({},s,l):l,y=Dre(Object.keys(v),o,c);m.start([u,a,Md(Md({},v),{},{transition:y}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=$We(i,FWe),c=Y.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!s||c===0||o<=0)return a;var d=function(f){var m=f.props,v=m.style,y=v===void 0?{}:v,w=m.className,S=Y.cloneElement(f,Md(Md({},l),{},{style:Md(Md({},y),u),className:w}));return S};return c===1?d(Y.Children.only(a)):we.createElement("div",null,Y.Children.map(a,function(h){return d(h)}))}}]),t}(Y.PureComponent);sy.displayName="Animate";sy.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};sy.propTypes={from:qr.oneOfType([qr.object,qr.string]),to:qr.oneOfType([qr.object,qr.string]),attributeName:qr.string,duration:qr.number,begin:qr.number,easing:qr.oneOfType([qr.string,qr.func]),steps:qr.arrayOf(qr.shape({duration:qr.number.isRequired,style:qr.object.isRequired,easing:qr.oneOfType([qr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),qr.func]),properties:qr.arrayOf("string"),onAnimationEnd:qr.func})),children:qr.oneOfType([qr.node,qr.func]),isActive:qr.bool,canBegin:qr.bool,onAnimationEnd:qr.func,shouldReAnimate:qr.bool,onAnimationStart:qr.func,onAnimationReStart:qr.func};function hD(n){"@babel/helpers - typeof";return hD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hD(n)}function LO(){return LO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},LO.apply(this,arguments)}function QWe(n,e){return nqe(n)||tqe(n,e)||eqe(n,e)||JWe()}function JWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eqe(n,e){if(n){if(typeof n=="string")return Ore(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ore(n,e)}}function Ore(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function tqe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function nqe(n){if(Array.isArray(n))return n}function Lre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lre(Object(t),!0).forEach(function(r){rqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Lre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rqe(n,e,t){return e=iqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iqe(n){var e=aqe(n,"string");return hD(e)=="symbol"?e:e+""}function aqe(n,e){if(hD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(hD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Fre=function(e,t,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,f=4;h<f;h++)d[h]=a[h]>o?o:a[h];u="M".concat(e,",").concat(t+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*d[1])),u+="L ".concat(e+r,",").concat(t+i-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+i)),u+="L ".concat(e+l*d[3],",").concat(t+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+i-s*d[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var m=Math.min(o,a);u="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+l*m,",").concat(t,`
            L `).concat(e+r-l*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+i-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-l*m,",").concat(t+i,`
            L `).concat(e+l*m,",").concat(t+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+i-s*m," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},oqe=function(e,t){if(!e||!t)return!1;var r=e.x,i=e.y,a=t.x,o=t.y,s=t.width,l=t.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),u=Math.max(a,a+s),d=Math.min(o,o+l),h=Math.max(o,o+l);return r>=c&&r<=u&&i>=d&&i<=h}return!1},sqe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MW=function(e){var t=jre(jre({},sqe),e),r=Y.useRef(),i=Y.useState(-1),a=QWe(i,2),o=a[0],s=a[1];Y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&s(C)}catch{}},[]);var l=t.x,c=t.y,u=t.width,d=t.height,h=t.radius,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isAnimationActive,S=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var T=Nr("recharts-rectangle",f);return S?we.createElement(sy,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:v,animationEasing:m,isActive:S},function(C){var k=C.width,A=C.height,D=C.x,P=C.y;return we.createElement(sy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:w,easing:m},we.createElement("path",LO({},Vr(t,!0),{className:T,d:Fre(D,P,k,A,h),ref:r})))}):we.createElement("path",LO({},Vr(t,!0),{className:T,d:Fre(l,c,u,d,h)}))};function Jz(){return Jz=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jz.apply(this,arguments)}var Qbe=function(e){var t=e.cx,r=e.cy,i=e.r,a=e.className,o=Nr("recharts-dot",a);return t===+t&&r===+r&&i===+i?we.createElement("circle",Jz({},Vr(e,!1),iO(e),{className:o,cx:t,cy:r,r:i})):null};function fD(n){"@babel/helpers - typeof";return fD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fD(n)}var lqe=["x","y","top","left","width","height","className"];function e9(){return e9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},e9.apply(this,arguments)}function $re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cqe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$re(Object(t),!0).forEach(function(r){uqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$re(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function uqe(n,e,t){return e=dqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dqe(n){var e=hqe(n,"string");return fD(e)=="symbol"?e:e+""}function hqe(n,e){if(fD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(fD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fqe(n,e){if(n==null)return{};var t=pqe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pqe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var gqe=function(e,t,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(r)},mqe=function(e){var t=e.x,r=t===void 0?0:t,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,f=h===void 0?0:h,m=e.className,v=fqe(e,lqe),y=cqe({x:r,y:a,top:s,left:c,width:d,height:f},v);return!wt(r)||!wt(a)||!wt(d)||!wt(f)||!wt(s)||!wt(c)?null:we.createElement("path",e9({},Vr(y,!0),{className:Nr("recharts-cross",m),d:gqe(r,a,d,f,s,c)}))},V$,Bre;function vqe(){if(Bre)return V$;Bre=1;var n=v0e(),e=n(Object.getPrototypeOf,Object);return V$=e,V$}var z$,Ure;function yqe(){if(Ure)return z$;Ure=1;var n=Wg(),e=vqe(),t=qg(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function c(u){if(!t(u)||n(u)!=r)return!1;var d=e(u);if(d===null)return!0;var h=s.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return z$=c,z$}var bqe=yqe();const wqe=Lr(bqe);var H$,Vre;function xqe(){if(Vre)return H$;Vre=1;var n=Wg(),e=qg(),t="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&n(i)==t}return H$=r,H$}var Sqe=xqe();const _qe=Lr(Sqe);function pD(n){"@babel/helpers - typeof";return pD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pD(n)}function jO(){return jO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jO.apply(this,arguments)}function Tqe(n,e){return Cqe(n)||kqe(n,e)||Aqe(n,e)||Eqe()}function Eqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aqe(n,e){if(n){if(typeof n=="string")return zre(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zre(n,e)}}function zre(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kqe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Cqe(n){if(Array.isArray(n))return n}function Hre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gre(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hre(Object(t),!0).forEach(function(r){Dqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dqe(n,e,t){return e=Iqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iqe(n){var e=Mqe(n,"string");return pD(e)=="symbol"?e:e+""}function Mqe(n,e){if(pD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(pD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Wre=function(e,t,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-o/2,",").concat(t+a),s+="L ".concat(e+r-o/2-i,",").concat(t+a),s+="L ".concat(e,",").concat(t," Z"),s},Pqe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nqe=function(e){var t=Gre(Gre({},Pqe),e),r=Y.useRef(),i=Y.useState(-1),a=Tqe(i,2),o=a[0],s=a[1];Y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=t.x,c=t.y,u=t.upperWidth,d=t.lowerWidth,h=t.height,f=t.className,m=t.animationEasing,v=t.animationDuration,y=t.animationBegin,w=t.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var S=Nr("recharts-trapezoid",f);return w?we.createElement(sy,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:v,animationEasing:m,isActive:w},function(T){var C=T.upperWidth,k=T.lowerWidth,A=T.height,D=T.x,P=T.y;return we.createElement(sy,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:m},we.createElement("path",jO({},Vr(t,!0),{className:S,d:Wre(D,P,C,k,A),ref:r})))}):we.createElement("g",null,we.createElement("path",jO({},Vr(t,!0),{className:S,d:Wre(l,c,u,d,h)})))},Rqe=["option","shapeType","propTransformer","activeClassName","isActive"];function gD(n){"@babel/helpers - typeof";return gD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gD(n)}function Oqe(n,e){if(n==null)return{};var t=Lqe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Lqe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function qre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function FO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qre(Object(t),!0).forEach(function(r){jqe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jqe(n,e,t){return e=Fqe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fqe(n){var e=$qe(n,"string");return gD(e)=="symbol"?e:e+""}function $qe(n,e){if(gD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(gD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Bqe(n,e){return FO(FO({},e),n)}function Uqe(n,e){return n==="symbols"}function Yre(n){var e=n.shapeType,t=n.elementProps;switch(e){case"rectangle":return we.createElement(MW,t);case"trapezoid":return we.createElement(Nqe,t);case"sector":return we.createElement(Hbe,t);case"symbols":if(Uqe(e))return we.createElement(K7,t);break;default:return null}}function Vqe(n){return Y.isValidElement(n)?n.props:n}function zqe(n){var e=n.option,t=n.shapeType,r=n.propTransformer,i=r===void 0?Bqe:r,a=n.activeClassName,o=a===void 0?"recharts-active-shape":a,s=n.isActive,l=Oqe(n,Rqe),c;if(Y.isValidElement(e))c=Y.cloneElement(e,FO(FO({},l),Vqe(e)));else if(cr(e))c=e(l);else if(wqe(e)&&!_qe(e)){var u=i(e,l);c=we.createElement(Yre,{shapeType:t,elementProps:u})}else{var d=l;c=we.createElement(Yre,{shapeType:t,elementProps:d})}return s?we.createElement(Do,{className:o},c):c}function uj(n,e){return e!=null&&"trapezoids"in n.props}function dj(n,e){return e!=null&&"sectors"in n.props}function mD(n,e){return e!=null&&"points"in n.props}function Hqe(n,e){var t,r,i=n.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||n.x===e.x,a=n.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||n.y===e.y;return i&&a}function Gqe(n,e){var t=n.endAngle===e.endAngle,r=n.startAngle===e.startAngle;return t&&r}function Wqe(n,e){var t=n.x===e.x,r=n.y===e.y,i=n.z===e.z;return t&&r&&i}function qqe(n,e){var t;return uj(n,e)?t=Hqe:dj(n,e)?t=Gqe:mD(n,e)&&(t=Wqe),t}function Yqe(n,e){var t;return uj(n,e)?t="trapezoids":dj(n,e)?t="sectors":mD(n,e)&&(t="points"),t}function Kqe(n,e){if(uj(n,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(dj(n,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return mD(n,e)?e.payload:{}}function Xqe(n){var e=n.activeTooltipItem,t=n.graphicalItem,r=n.itemData,i=Yqe(t,e),a=Kqe(t,e),o=r.filter(function(l,c){var u=kW(a,l),d=t.props[i].filter(function(m){var v=qqe(t,e);return v(m,e)}),h=t.props[i].indexOf(d[d.length-1]),f=c===h;return u&&f}),s=r.indexOf(o[o.length-1]);return s}var G$,Kre;function Zqe(){if(Kre)return G$;Kre=1;var n=Math.ceil,e=Math.max;function t(r,i,a,o){for(var s=-1,l=e(n((i-r)/(a||1)),0),c=Array(l);l--;)c[o?l:++s]=r,r+=a;return c}return G$=t,G$}var W$,Xre;function Jbe(){if(Xre)return W$;Xre=1;var n=N0e(),e=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=n(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return W$=r,W$}var q$,Zre;function Qqe(){if(Zre)return q$;Zre=1;var n=Zqe(),e=ZL(),t=Jbe();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=t(a),o===void 0?(o=a,a=0):o=t(o),s=s===void 0?a<o?1:-1:t(s),n(a,o,s,i)}}return q$=r,q$}var Y$,Qre;function Jqe(){if(Qre)return Y$;Qre=1;var n=Qqe(),e=n();return Y$=e,Y$}var eYe=Jqe();const $O=Lr(eYe);function vD(n){"@babel/helpers - typeof";return vD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vD(n)}function Jre(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function eie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jre(Object(t),!0).forEach(function(r){ewe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jre(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ewe(n,e,t){return e=tYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tYe(n){var e=nYe(n,"string");return vD(e)=="symbol"?e:e+""}function nYe(n,e){if(vD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(vD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var rYe=["Webkit","Moz","O","ms"],iYe=function(e,t){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=rYe.reduce(function(a,o){return eie(eie({},a),{},ewe({},o+r,t))},{});return i[e]=t,i};function A1(n){"@babel/helpers - typeof";return A1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A1(n)}function BO(){return BO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BO.apply(this,arguments)}function tie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tie(Object(t),!0).forEach(function(r){kc(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function aYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function nie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,nwe(r.key),r)}}function oYe(n,e,t){return e&&nie(n.prototype,e),t&&nie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function sYe(n,e,t){return e=UO(e),lYe(n,twe()?Reflect.construct(e,t||[],UO(n).constructor):e.apply(n,t))}function lYe(n,e){if(e&&(A1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cYe(n)}function cYe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function twe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(twe=function(){return!!n})()}function UO(n){return UO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UO(n)}function uYe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&t9(n,e)}function t9(n,e){return t9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t9(n,e)}function kc(n,e,t){return e=nwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nwe(n){var e=dYe(n,"string");return A1(e)=="symbol"?e:e+""}function dYe(n,e){if(A1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(A1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var hYe=function(e){var t=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var l=t.length,c=Yk().domain($O(0,l)).range([a,a+o-s]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},rie=function(e){return e.changedTouches&&!!e.changedTouches.length},k1=function(n){function e(t){var r;return aYe(this,e),r=sYe(this,e,[t]),kc(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),kc(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),kc(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),kc(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),kc(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),kc(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),kc(r,"handleSlideDragStart",function(i){var a=rie(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return uYe(e,n),oYe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,d=Math.min(i,a),h=Math.max(i,a),f=e.getIndexInRange(o,d),m=e.getIndexInRange(o,h);return{startIndex:f-f%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=Rf(a[r],s,r);return cr(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,h=l.startIndex,f=l.endIndex,m=l.onChange,v=r.pageX-a;v>0?v=Math.min(v,c+u-d-s,c+u-d-o):v<0&&(v=Math.max(v,c-o,c-s));var y=this.getIndex({startX:o+v,endX:s+v});(y.startIndex!==h||y.endIndex!==f)&&m&&m(y),this.setState({startX:o+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=rie(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],u=this.props,d=u.x,h=u.width,f=u.travellerWidth,m=u.onChange,v=u.gap,y=u.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-a;S>0?S=Math.min(S,d+h-f-c):S<0&&(S=Math.max(S,d-c)),w[o]=c+S;var T=this.getIndex(w),C=T.startIndex,k=T.endIndex,A=function(){var P=y.length-1;return o==="startX"&&(s>l?C%v===0:k%v===0)||s<l&&k===P||o==="endX"&&(s>l?k%v===0:C%v===0)||s>l&&k===P};this.setState(kc(kc({},o,c+S),"brushMoveStartX",r.pageX),function(){m&&A()&&m(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,u=this.state[i],d=s.indexOf(u);if(d!==-1){var h=d+r;if(!(h===-1||h>=s.length)){var f=s[h];i==="startX"&&f>=c||i==="endX"&&f<=l||this.setState(kc({},i,f),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return we.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,d=Y.Children.only(c);return d?we.cloneElement(d,{x:i,y:a,width:o,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,h=l.traveller,f=l.ariaLabel,m=l.data,v=l.startIndex,y=l.endIndex,w=Math.max(r,this.props.x),S=K$(K$({},Vr(this.props,!1)),{},{x:w,y:c,width:u,height:d}),T=f||"Min value: ".concat((a=m[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=m[y])===null||o===void 0?void 0:o.name);return we.createElement(Do,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),s.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,S))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return we.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,h=u.endX,f=5,m={pointerEvents:"none",fill:c};return we.createElement(Do,{className:"recharts-brush-texts"},we.createElement(mO,BO({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-f,y:o+s/2},m),this.getTextOfTick(i)),we.createElement(mO,BO({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+f,y:o+s/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,h=this.state,f=h.startX,m=h.endX,v=h.isTextActive,y=h.isSlideMoving,w=h.isTravellerMoving,S=h.isTravellerFocused;if(!i||!i.length||!wt(s)||!wt(l)||!wt(c)||!wt(u)||c<=0||u<=0)return null;var T=Nr("recharts-brush",a),C=we.Children.count(o)===1,k=iYe("userSelect","none");return we.createElement(Do,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(f,m),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(m,"endX"),(v||y||w||S||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return we.createElement(we.Fragment,null,we.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),we.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),we.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return we.isValidElement(r)?a=we.cloneElement(r,i):cr(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return K$({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?hYe({data:a,width:o,x:s,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var h=i.scale.domain().map(function(f){return i.scale(f)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(Y.PureComponent);kc(k1,"displayName","Brush");kc(k1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var X$,iie;function fYe(){if(iie)return X$;iie=1;var n=nW();function e(t,r){var i;return n(t,function(a,o,s){return i=r(a,o,s),!i}),!!i}return X$=e,X$}var Z$,aie;function pYe(){if(aie)return Z$;aie=1;var n=u0e(),e=wy(),t=fYe(),r=Yl(),i=ZL();function a(o,s,l){var c=r(o)?n:t;return l&&i(o,s,l)&&(s=void 0),c(o,e(s,3))}return Z$=a,Z$}var gYe=pYe();const mYe=Lr(gYe);var Cf=function(e,t){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===t},Q$,oie;function vYe(){if(oie)return Q$;oie=1;var n=C0e();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return Q$=e,Q$}var J$,sie;function yYe(){if(sie)return J$;sie=1;var n=vYe(),e=A0e(),t=wy();function r(i,a){var o={};return a=t(a,3),e(i,function(s,l,c){n(o,l,a(s,l,c))}),o}return J$=r,J$}var bYe=yYe();const wYe=Lr(bYe);var eB,lie;function xYe(){if(lie)return eB;lie=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}return eB=n,eB}var tB,cie;function SYe(){if(cie)return tB;cie=1;var n=nW();function e(t,r){var i=!0;return n(t,function(a,o,s){return i=!!r(a,o,s),i}),i}return tB=e,tB}var nB,uie;function _Ye(){if(uie)return nB;uie=1;var n=xYe(),e=SYe(),t=wy(),r=Yl(),i=ZL();function a(o,s,l){var c=r(o)?n:e;return l&&i(o,s,l)&&(s=void 0),c(o,t(s,3))}return nB=a,nB}var TYe=_Ye();const rwe=Lr(TYe);var EYe=["x","y"];function yD(n){"@babel/helpers - typeof";return yD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yD(n)}function n9(){return n9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},n9.apply(this,arguments)}function die(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function EA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?die(Object(t),!0).forEach(function(r){AYe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):die(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AYe(n,e,t){return e=kYe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kYe(n){var e=CYe(n,"string");return yD(e)=="symbol"?e:e+""}function CYe(n,e){if(yD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(yD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function DYe(n,e){if(n==null)return{};var t=IYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function IYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function MYe(n,e){var t=n.x,r=n.y,i=DYe(n,EYe),a="".concat(t),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return EA(EA(EA(EA(EA({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function hie(n){return we.createElement(zqe,n9({shapeType:"rectangle",propTransformer:MYe,activeClassName:"recharts-active-bar"},n))}var PYe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||Dw(),t)}},NYe=["value","background"],iwe;function C1(n){"@babel/helpers - typeof";return C1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(n)}function RYe(n,e){if(n==null)return{};var t=OYe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function OYe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function VO(){return VO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},VO.apply(this,arguments)}function fie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ba(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fie(Object(t),!0).forEach(function(r){Rv(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function LYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function pie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,owe(r.key),r)}}function jYe(n,e,t){return e&&pie(n.prototype,e),t&&pie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function FYe(n,e,t){return e=zO(e),$Ye(n,awe()?Reflect.construct(e,t||[],zO(n).constructor):e.apply(n,t))}function $Ye(n,e){if(e&&(C1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BYe(n)}function BYe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function awe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(awe=function(){return!!n})()}function zO(n){return zO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zO(n)}function UYe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&r9(n,e)}function r9(n,e){return r9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},r9(n,e)}function Rv(n,e,t){return e=owe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function owe(n){var e=VYe(n,"string");return C1(e)=="symbol"?e:e+""}function VYe(n,e){if(C1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(C1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var Ty=function(n){function e(){var t;LYe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=FYe(this,e,[].concat(i)),Rv(t,"state",{isAnimationFinished:!1}),Rv(t,"id",HL("recharts-bar-")),Rv(t,"handleAnimationEnd",function(){var o=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),o&&o()}),Rv(t,"handleAnimationStart",function(){var o=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),o&&o()}),t}return UYe(e,n),jYe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,u=Vr(this.props,!1);return r&&r.map(function(d,h){var f=h===l,m=f?c:o,v=Ba(Ba(Ba({},u),d),{},{isActive:f,option:m,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return we.createElement(Do,VO({className:"recharts-bar-rectangle"},aO(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),we.createElement(hie,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state.prevData;return we.createElement(sy,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var m=f.t,v=a.map(function(y,w){var S=h&&h[w];if(S){var T=PS(S.x,y.x),C=PS(S.y,y.y),k=PS(S.width,y.width),A=PS(S.height,y.height);return Ba(Ba({},y),{},{x:T(m),y:C(m),width:k(m),height:A(m)})}if(o==="horizontal"){var D=PS(0,y.height),P=D(m);return Ba(Ba({},y),{},{y:y.y+y.height-P,height:P})}var N=PS(0,y.width),R=N(m);return Ba(Ba({},y),{},{width:R})});return we.createElement(Do,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!kW(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=Vr(this.props.background,!1);return a.map(function(c,u){c.value;var d=c.background,h=RYe(c,NYe);if(!d)return null;var f=Ba(Ba(Ba(Ba(Ba({},h),{},{fill:"#eee"},d),l),aO(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return we.createElement(hie,VO({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},f))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,d=eh(u,cj);if(!d)return null;var h=c==="vertical"?o[0].height/2:o[0].width/2,f=function(y,w){var S=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:S,errorVal:Rf(y,w)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return we.createElement(Do,m,d.map(function(v){return we.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:h,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,h=r.height,f=r.isAnimationActive,m=r.background,v=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=Nr("recharts-bar",o),S=s&&s.allowDataOverflow,T=l&&l.allowDataOverflow,C=S||T,k=Xr(v)?this.id:v;return we.createElement(Do,{className:w},S||T?we.createElement("defs",null,we.createElement("clipPath",{id:"clipPath-".concat(k)},we.createElement("rect",{x:S?c:c-d/2,y:T?u:u-h/2,width:S?d:d*2,height:T?h:h*2}))):null,we.createElement(Do,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(k,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,k),(!f||y)&&lw.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(Y.PureComponent);iwe=Ty;Rv(Ty,"displayName","Bar");Rv(Ty,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!NI.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Rv(Ty,"getComposedData",function(n){var e=n.props,t=n.item,r=n.barPosition,i=n.bandSize,a=n.xAxis,o=n.yAxis,s=n.xAxisTicks,l=n.yAxisTicks,c=n.stackedData,u=n.dataStartIndex,d=n.displayedData,h=n.offset,f=s8e(r,t);if(!f)return null;var m=e.layout,v=t.type.defaultProps,y=v!==void 0?Ba(Ba({},v),t.props):t.props,w=y.dataKey,S=y.children,T=y.minPointSize,C=m==="horizontal"?o:a,k=c?C.scale.domain():null,A=g8e({numericAxis:C}),D=eh(S,QL),P=d.map(function(N,R){var L,B,$,G,W,K;c?L=l8e(c[u+R],k):(L=Rf(N,w),Array.isArray(L)||(L=[A,L]));var X=PYe(T,iwe.defaultProps.minPointSize)(L[1],R);if(m==="horizontal"){var te,ie=[o.scale(L[0]),o.scale(L[1])],z=ie[0],se=ie[1];B=Xne({axis:a,ticks:s,bandSize:i,offset:f.offset,entry:N,index:R}),$=(te=se??z)!==null&&te!==void 0?te:void 0,G=f.size;var ce=z-se;if(W=Number.isNaN(ce)?0:ce,K={x:B,y:o.y,width:G,height:o.height},Math.abs(X)>0&&Math.abs(W)<Math.abs(X)){var ee=Kd(W||X)*(Math.abs(X)-Math.abs(W));$-=ee,W+=ee}}else{var be=[a.scale(L[0]),a.scale(L[1])],fe=be[0],De=be[1];if(B=fe,$=Xne({axis:o,ticks:l,bandSize:i,offset:f.offset,entry:N,index:R}),G=De-fe,W=f.size,K={x:a.x,y:$,width:a.width,height:W},Math.abs(X)>0&&Math.abs(G)<Math.abs(X)){var dt=Kd(G||X)*(Math.abs(X)-Math.abs(G));G+=dt}}return Ba(Ba(Ba({},N),{},{x:B,y:$,width:G,height:W,value:c?L:L[1],payload:N,background:K},D&&D[R]&&D[R].props),{},{tooltipPayload:[Ube(t,N)],tooltipPosition:{x:B+G/2,y:$+W/2}})});return Ba({data:P,layout:m},h)});function bD(n){"@babel/helpers - typeof";return bD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bD(n)}function zYe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function gie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,swe(r.key),r)}}function HYe(n,e,t){return e&&gie(n.prototype,e),t&&gie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function mie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Vd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mie(Object(t),!0).forEach(function(r){hj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hj(n,e,t){return e=swe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function swe(n){var e=GYe(n,"string");return bD(e)=="symbol"?e:e+""}function GYe(n,e){if(bD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(bD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var WYe=function(e,t,r,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(t),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!Cc(c,Ty);return u.reduce(function(f,m){var v=t[m],y=v.orientation,w=v.domain,S=v.padding,T=S===void 0?{}:S,C=v.mirror,k=v.reversed,A="".concat(y).concat(C?"Mirror":""),D,P,N,R,L;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var B=w[1]-w[0],$=1/0,G=v.categoricalDomain.sort(W$e);if(G.forEach(function(be,fe){fe>0&&($=Math.min((be||0)-(G[fe-1]||0),$))}),Number.isFinite($)){var W=$/B,K=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(D=W*K/2),v.padding==="no-gap"){var X=kw(e.barCategoryGap,W*K),te=W*K/2;D=te-X-(te-X)/K*X}}}i==="xAxis"?P=[r.left+(T.left||0)+(D||0),r.left+r.width-(T.right||0)-(D||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(D||0),r.top+r.height-(T.bottom||0)-(D||0)]:P=v.range,k&&(P=[P[1],P[0]]);var ie=a8e(v,a,h),z=ie.scale,se=ie.realScaleType;z.domain(w).range(P),o8e(z);var ce=p8e(z,Vd(Vd({},v),{},{realScaleType:se}));i==="xAxis"?(L=y==="top"&&!C||y==="bottom"&&C,N=r.left,R=d[A]-L*v.height):i==="yAxis"&&(L=y==="left"&&!C||y==="right"&&C,N=d[A]-L*v.width,R=r.top);var ee=Vd(Vd(Vd({},v),ce),{},{realScaleType:se,x:N,y:R,scale:z,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return ee.bandSize=IO(ee,ce),!v.hide&&i==="xAxis"?d[A]+=(L?-1:1)*ee.height:v.hide||(d[A]+=(L?-1:1)*ee.width),Vd(Vd({},f),{},hj({},m,ee))},{})},lwe=function(e,t){var r=e.x,i=e.y,a=t.x,o=t.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},qYe=function(e){var t=e.x1,r=e.y1,i=e.x2,a=e.y2;return lwe({x:t,y:r},{x:i,y:a})},cwe=function(){function n(e){zYe(this,n),this.scale=e}return HYe(n,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}},{key:"isInRange",value:function(t){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new n(t)}}])}();hj(cwe,"EPS",1e-4);var PW=function(e){var t=Object.keys(e).reduce(function(r,i){return Vd(Vd({},r),{},hj({},i,cwe.create(e[i])))},{});return Vd(Vd({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return wYe(i,function(l,c){return t[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return rwe(i,function(a,o){return t[o].isInRange(a)})}})};function YYe(n){return(n%180+180)%180}var KYe=function(e){var t=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=YYe(i),o=a*Math.PI/180,s=Math.atan(r/t),l=o>s&&o<Math.PI-s?r/Math.sin(o):t/Math.cos(o);return Math.abs(l)},rB,vie;function XYe(){if(vie)return rB;vie=1;var n=wy(),e=PI(),t=KL();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var c=n(o,3);a=t(a),o=function(d){return c(l[d],d,l)}}var u=i(a,o,s);return u>-1?l[c?a[u]:u]:void 0}}return rB=r,rB}var iB,yie;function ZYe(){if(yie)return iB;yie=1;var n=Jbe();function e(t){var r=n(t),i=r%1;return r===r?i?r-i:r:0}return iB=e,iB}var aB,bie;function QYe(){if(bie)return aB;bie=1;var n=x0e(),e=wy(),t=ZYe(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var c=s==null?0:t(s);return c<0&&(c=r(l+c,0)),n(a,e(o,3),c)}return aB=i,aB}var oB,wie;function JYe(){if(wie)return oB;wie=1;var n=XYe(),e=QYe(),t=n(e);return oB=t,oB}var eKe=JYe();const tKe=Lr(eKe);var nKe=jye();const rKe=Lr(nKe);var iKe=rKe(function(n){return{x:n.left,y:n.top,width:n.width,height:n.height}},function(n){return["l",n.left,"t",n.top,"w",n.width,"h",n.height].join("")}),NW=Y.createContext(void 0),RW=Y.createContext(void 0),uwe=Y.createContext(void 0),dwe=Y.createContext({}),hwe=Y.createContext(void 0),fwe=Y.createContext(0),pwe=Y.createContext(0),xie=function(e){var t=e.state,r=t.xAxisMap,i=t.yAxisMap,a=t.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,u=iKe(a);return we.createElement(NW.Provider,{value:r},we.createElement(RW.Provider,{value:i},we.createElement(dwe.Provider,{value:a},we.createElement(uwe.Provider,{value:u},we.createElement(hwe.Provider,{value:o},we.createElement(fwe.Provider,{value:c},we.createElement(pwe.Provider,{value:l},s)))))))},aKe=function(){return Y.useContext(hwe)},gwe=function(e){var t=Y.useContext(NW);t==null&&Dw();var r=t[e];return r==null&&Dw(),r},oKe=function(){var e=Y.useContext(NW);return Pv(e)},sKe=function(){var e=Y.useContext(RW),t=tKe(e,function(r){return rwe(r.domain,Number.isFinite)});return t||Pv(e)},mwe=function(e){var t=Y.useContext(RW);t==null&&Dw();var r=t[e];return r==null&&Dw(),r},lKe=function(){var e=Y.useContext(uwe);return e},cKe=function(){return Y.useContext(dwe)},OW=function(){return Y.useContext(pwe)},LW=function(){return Y.useContext(fwe)};function D1(n){"@babel/helpers - typeof";return D1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D1(n)}function uKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dKe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,ywe(r.key),r)}}function hKe(n,e,t){return e&&dKe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function fKe(n,e,t){return e=HO(e),pKe(n,vwe()?Reflect.construct(e,t||[],HO(n).constructor):e.apply(n,t))}function pKe(n,e){if(e&&(D1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gKe(n)}function gKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vwe=function(){return!!n})()}function HO(n){return HO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HO(n)}function mKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&i9(n,e)}function i9(n,e){return i9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i9(n,e)}function Sie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _ie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sie(Object(t),!0).forEach(function(r){jW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jW(n,e,t){return e=ywe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ywe(n){var e=vKe(n,"string");return D1(e)=="symbol"?e:e+""}function vKe(n,e){if(D1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(D1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function yKe(n,e){return SKe(n)||xKe(n,e)||wKe(n,e)||bKe()}function bKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wKe(n,e){if(n){if(typeof n=="string")return Tie(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tie(n,e)}}function Tie(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function xKe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function SKe(n){if(Array.isArray(n))return n}function a9(){return a9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},a9.apply(this,arguments)}var _Ke=function(e,t){var r;return we.isValidElement(e)?r=we.cloneElement(e,t):cr(e)?r=e(t):r=we.createElement("line",a9({},t,{className:"recharts-reference-line-line"})),r},TKe=function(e,t,r,i,a,o,s,l,c){var u=a.x,d=a.y,h=a.width,f=a.height;if(r){var m=c.y,v=e.y.apply(m,{position:o});if(Cf(c,"discard")&&!e.y.isInRange(v))return null;var y=[{x:u+h,y:v},{x:u,y:v}];return l==="left"?y.reverse():y}if(t){var w=c.x,S=e.x.apply(w,{position:o});if(Cf(c,"discard")&&!e.x.isInRange(S))return null;var T=[{x:S,y:d+f},{x:S,y:d}];return s==="top"?T.reverse():T}if(i){var C=c.segment,k=C.map(function(A){return e.apply(A,{position:o})});return Cf(c,"discard")&&mYe(k,function(A){return!e.isInRange(A)})?null:k}return null};function EKe(n){var e=n.x,t=n.y,r=n.segment,i=n.xAxisId,a=n.yAxisId,o=n.shape,s=n.className,l=n.alwaysShow,c=aKe(),u=gwe(i),d=mwe(a),h=lKe();if(!c||!h)return null;gg(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=PW({x:u.scale,y:d.scale}),m=oo(e),v=oo(t),y=r&&r.length===2,w=TKe(f,m,v,y,h,n.position,u.orientation,d.orientation,n);if(!w)return null;var S=yKe(w,2),T=S[0],C=T.x,k=T.y,A=S[1],D=A.x,P=A.y,N=Cf(n,"hidden")?"url(#".concat(c,")"):void 0,R=_ie(_ie({clipPath:N},Vr(n,!0)),{},{x1:C,y1:k,x2:D,y2:P});return we.createElement(Do,{className:Nr("recharts-reference-line",s)},_Ke(o,R),Cs.renderCallByParent(n,qYe({x1:C,y1:k,x2:D,y2:P})))}var FW=function(n){function e(){return uKe(this,e),fKe(this,e,arguments)}return mKe(e,n),hKe(e,[{key:"render",value:function(){return we.createElement(EKe,this.props)}}])}(we.Component);jW(FW,"displayName","ReferenceLine");jW(FW,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function o9(){return o9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o9.apply(this,arguments)}function I1(n){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I1(n)}function Eie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Aie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Eie(Object(t),!0).forEach(function(r){fj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Eie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kKe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,wwe(r.key),r)}}function CKe(n,e,t){return e&&kKe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function DKe(n,e,t){return e=GO(e),IKe(n,bwe()?Reflect.construct(e,t||[],GO(n).constructor):e.apply(n,t))}function IKe(n,e){if(e&&(I1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MKe(n)}function MKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bwe=function(){return!!n})()}function GO(n){return GO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GO(n)}function PKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&s9(n,e)}function s9(n,e){return s9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s9(n,e)}function fj(n,e,t){return e=wwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wwe(n){var e=NKe(n,"string");return I1(e)=="symbol"?e:e+""}function NKe(n,e){if(I1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(I1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var RKe=function(e){var t=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=PW({x:i.scale,y:a.scale}),s=o.apply({x:t,y:r},{bandAware:!0});return Cf(e,"discard")&&!o.isInRange(s)?null:s},pj=function(n){function e(){return AKe(this,e),DKe(this,e,arguments)}return PKe(e,n),CKe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=oo(i),u=oo(a);if(gg(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=RKe(this.props);if(!d)return null;var h=d.x,f=d.y,m=this.props,v=m.shape,y=m.className,w=Cf(this.props,"hidden")?"url(#".concat(l,")"):void 0,S=Aie(Aie({clipPath:w},Vr(this.props,!0)),{},{cx:h,cy:f});return we.createElement(Do,{className:Nr("recharts-reference-dot",y)},e.renderDot(v,S),Cs.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}])}(we.Component);fj(pj,"displayName","ReferenceDot");fj(pj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});fj(pj,"renderDot",function(n,e){var t;return we.isValidElement(n)?t=we.cloneElement(n,e):cr(n)?t=n(e):t=we.createElement(Qbe,o9({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function l9(){return l9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},l9.apply(this,arguments)}function M1(n){"@babel/helpers - typeof";return M1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M1(n)}function kie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Cie(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kie(Object(t),!0).forEach(function(r){gj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):kie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OKe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function LKe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Swe(r.key),r)}}function jKe(n,e,t){return e&&LKe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function FKe(n,e,t){return e=WO(e),$Ke(n,xwe()?Reflect.construct(e,t||[],WO(n).constructor):e.apply(n,t))}function $Ke(n,e){if(e&&(M1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BKe(n)}function BKe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xwe=function(){return!!n})()}function WO(n){return WO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WO(n)}function UKe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&c9(n,e)}function c9(n,e){return c9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c9(n,e)}function gj(n,e,t){return e=Swe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Swe(n){var e=VKe(n,"string");return M1(e)=="symbol"?e:e+""}function VKe(n,e){if(M1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(M1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var zKe=function(e,t,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,u=a.xAxis,d=a.yAxis;if(!u||!d)return null;var h=PW({x:u.scale,y:d.scale}),f={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:t?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Cf(a,"discard")&&(!h.isInRange(f)||!h.isInRange(m))?null:lwe(f,m)},mj=function(n){function e(){return OKe(this,e),FKe(this,e,arguments)}return UKe(e,n),jKe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;gg(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=oo(i),h=oo(a),f=oo(o),m=oo(s),v=this.props.shape;if(!d&&!h&&!f&&!m&&!v)return null;var y=zKe(d,h,f,m,this.props);if(!y&&!v)return null;var w=Cf(this.props,"hidden")?"url(#".concat(u,")"):void 0;return we.createElement(Do,{className:Nr("recharts-reference-area",l)},e.renderRect(v,Cie(Cie({clipPath:w},Vr(this.props,!0)),y)),Cs.renderCallByParent(this.props,y))}}])}(we.Component);gj(mj,"displayName","ReferenceArea");gj(mj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gj(mj,"renderRect",function(n,e){var t;return we.isValidElement(n)?t=we.cloneElement(n,e):cr(n)?t=n(e):t=we.createElement(MW,l9({},e,{className:"recharts-reference-area-rect"})),t});function _we(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function HKe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return KYe(r,t)}function GKe(n,e,t){var r=t==="width",i=n.x,a=n.y,o=n.width,s=n.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function qO(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var a=t();return n*(e-n*a/2-r)>=0&&n*(e+n*a/2-i)<=0}function WKe(n,e){return _we(n,e+1)}function qKe(n,e,t,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,c=1,u=o,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:_we(r,c)};var v=l,y,w=function(){return y===void 0&&(y=t(m,v)),y},S=m.coordinate,T=l===0||qO(n,S,w,u,s);T||(l=0,u=o,c+=1),T&&(u=S+n*(w()/2+i),l+=c)},h;c<=a.length;)if(h=d(),h)return h.v;return[]}function wD(n){"@babel/helpers - typeof";return wD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wD(n)}function Die(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _s(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Die(Object(t),!0).forEach(function(r){YKe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Die(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function YKe(n,e,t){return e=KKe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KKe(n){var e=XKe(n,"string");return wD(e)=="symbol"?e:e+""}function XKe(n,e){if(wD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(wD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZKe(n,e,t,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(h){var f=a[h],m,v=function(){return m===void 0&&(m=t(f,h)),m};if(h===o-1){var y=n*(f.coordinate+n*v()/2-l);a[h]=f=_s(_s({},f),{},{tickCoord:y>0?f.coordinate-y*n:f.coordinate})}else a[h]=f=_s(_s({},f),{},{tickCoord:f.coordinate});var w=qO(n,f.tickCoord,v,s,l);w&&(l=f.tickCoord-n*(v()/2+i),a[h]=_s(_s({},f),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return a}function QKe(n,e,t,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var u=r[s-1],d=t(u,s-1),h=n*(u.coordinate+n*d/2-c);o[s-1]=u=_s(_s({},u),{},{tickCoord:h>0?u.coordinate-h*n:u.coordinate});var f=qO(n,u.tickCoord,function(){return d},l,c);f&&(c=u.tickCoord-n*(d/2+i),o[s-1]=_s(_s({},u),{},{isShow:!0}))}for(var m=a?s-1:s,v=function(S){var T=o[S],C,k=function(){return C===void 0&&(C=t(T,S)),C};if(S===0){var A=n*(T.coordinate-n*k()/2-l);o[S]=T=_s(_s({},T),{},{tickCoord:A<0?T.coordinate-A*n:T.coordinate})}else o[S]=T=_s(_s({},T),{},{tickCoord:T.coordinate});var D=qO(n,T.tickCoord,k,l,c);D&&(l=T.tickCoord+n*(k()/2+i),o[S]=_s(_s({},T),{},{isShow:!0}))},y=0;y<m;y++)v(y);return o}function $W(n,e,t){var r=n.tick,i=n.ticks,a=n.viewBox,o=n.minTickGap,s=n.orientation,l=n.interval,c=n.tickFormatter,u=n.unit,d=n.angle;if(!i||!i.length||!r)return[];if(wt(l)||NI.isSsr)return WKe(i,typeof l=="number"&&wt(l)?l:0);var h=[],f=s==="top"||s==="bottom"?"width":"height",m=u&&f==="width"?qk(u,{fontSize:e,letterSpacing:t}):{width:0,height:0},v=function(T,C){var k=cr(c)?c(T.value,C):T.value;return f==="width"?HKe(qk(k,{fontSize:e,letterSpacing:t}),m,d):qk(k,{fontSize:e,letterSpacing:t})[f]},y=i.length>=2?Kd(i[1].coordinate-i[0].coordinate):1,w=GKe(a,y,f);return l==="equidistantPreserveStart"?qKe(y,w,v,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=QKe(y,w,v,i,o,l==="preserveStartEnd"):h=ZKe(y,w,v,i,o),h.filter(function(S){return S.isShow}))}var JKe=["viewBox"],eXe=["viewBox"],tXe=["ticks"];function P1(n){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P1(n)}function k_(){return k_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},k_.apply(this,arguments)}function Iie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Iie(Object(t),!0).forEach(function(r){BW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Iie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function sB(n,e){if(n==null)return{};var t=nXe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function nXe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function rXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Mie(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Ewe(r.key),r)}}function iXe(n,e,t){return e&&Mie(n.prototype,e),t&&Mie(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function aXe(n,e,t){return e=YO(e),oXe(n,Twe()?Reflect.construct(e,t||[],YO(n).constructor):e.apply(n,t))}function oXe(n,e){if(e&&(P1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sXe(n)}function sXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Twe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Twe=function(){return!!n})()}function YO(n){return YO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YO(n)}function lXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&u9(n,e)}function u9(n,e){return u9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u9(n,e)}function BW(n,e,t){return e=Ewe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ewe(n){var e=cXe(n,"string");return P1(e)=="symbol"?e:e+""}function cXe(n,e){if(P1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(P1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var hT=function(n){function e(t){var r;return rXe(this,e),r=aXe(this,e,[t]),r.state={fontSize:"",letterSpacing:""},r}return lXe(e,n),iXe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=sB(r,JKe),s=this.props,l=s.viewBox,c=sB(s,eXe);return!V_(a,l)||!V_(o,c)||!V_(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,h=i.tickMargin,f,m,v,y,w,S,T=d?-1:1,C=r.tickSize||u,k=wt(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":f=m=r.coordinate,y=o+ +!d*l,v=y-T*C,S=v-T*h,w=k;break;case"left":v=y=r.coordinate,m=a+ +!d*s,f=m-T*C,w=f-T*h,S=k;break;case"right":v=y=r.coordinate,m=a+ +d*s,f=m+T*C,w=f+T*h,S=k;break;default:f=m=r.coordinate,y=o+ +d*l,v=y+T*C,S=v+T*h,w=k;break}return{line:{x1:f,y1:v,x2:m,y2:y},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Xs(Xs(Xs({},Vr(this.props,!1)),Vr(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=Xs(Xs({},d),{},{x1:i,y1:a+h*s,x2:i+o,y2:a+h*s})}else{var f=+(l==="left"&&!c||l==="right"&&c);d=Xs(Xs({},d),{},{x1:i+f*o,y1:a,x2:i+f*o,y2:a+s})}return we.createElement("line",k_({},d,{className:Nr("recharts-cartesian-axis-line",zu(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,d=s.tickFormatter,h=s.unit,f=$W(Xs(Xs({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=Vr(this.props,!1),w=Vr(u,!1),S=Xs(Xs({},y),{},{fill:"none"},Vr(l,!1)),T=f.map(function(C,k){var A=o.getTickLineCoord(C),D=A.line,P=A.tick,N=Xs(Xs(Xs(Xs({textAnchor:m,verticalAnchor:v},y),{},{stroke:"none",fill:c},w),P),{},{index:k,payload:C,visibleTicksCount:f.length,tickFormatter:d});return we.createElement(Do,k_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},aO(o.props,C,k)),l&&we.createElement("line",k_({},S,D,{className:Nr("recharts-cartesian-axis-tick-line",zu(l,"className"))})),u&&e.renderTickItem(u,N,"".concat(cr(d)?d(C.value,k):C.value).concat(h||"")))});return we.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,h=d.ticks,f=sB(d,tXe),m=h;return cr(l)&&(m=h&&h.length>0?l(this.props):l(f)),o<=0||s<=0||!m||!m.length?null:we.createElement(Do,{className:Nr("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Cs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return we.isValidElement(r)?o=we.cloneElement(r,i):cr(r)?o=r(i):o=we.createElement(mO,k_({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(Y.Component);BW(hT,"displayName","CartesianAxis");BW(hT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var uXe=["x1","y1","x2","y2","key"],dXe=["offset"];function Iw(n){"@babel/helpers - typeof";return Iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iw(n)}function Pie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ds(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pie(Object(t),!0).forEach(function(r){hXe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hXe(n,e,t){return e=fXe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fXe(n){var e=pXe(n,"string");return Iw(e)=="symbol"?e:e+""}function pXe(n,e){if(Iw(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Iw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function qb(){return qb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qb.apply(this,arguments)}function Nie(n,e){if(n==null)return{};var t=gXe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function gXe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}var mXe=function(e){var t=e.fill;if(!t||t==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return we.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Awe(n,e){var t;if(we.isValidElement(n))t=we.cloneElement(n,e);else if(cr(n))t=n(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=Nie(e,uXe),c=Vr(l,!1);c.offset;var u=Nie(c,dXe);t=we.createElement("line",qb({},u,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return t}function vXe(n){var e=n.x,t=n.width,r=n.horizontal,i=r===void 0?!0:r,a=n.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Ds(Ds({},n),{},{x1:e,y1:s,x2:e+t,y2:s,key:"line-".concat(l),index:l});return Awe(i,c)});return we.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function yXe(n){var e=n.y,t=n.height,r=n.vertical,i=r===void 0?!0:r,a=n.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Ds(Ds({},n),{},{x1:s,y1:e,x2:s,y2:e+t,key:"line-".concat(l),index:l});return Awe(i,c)});return we.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function bXe(n){var e=n.horizontalFill,t=n.fillOpacity,r=n.x,i=n.y,a=n.width,o=n.height,s=n.horizontalPoints,l=n.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,f){return h-f});i!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?i+o-h:u[f+1]-h;if(v<=0)return null;var y=f%e.length;return we.createElement("rect",{key:"react-".concat(f),y:h,x:r,height:v,width:a,stroke:"none",fill:e[y],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function wXe(n){var e=n.vertical,t=e===void 0?!0:e,r=n.verticalFill,i=n.fillOpacity,a=n.x,o=n.y,s=n.width,l=n.height,c=n.verticalPoints;if(!t||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+a-a)}).sort(function(h,f){return h-f});a!==u[0]&&u.unshift(0);var d=u.map(function(h,f){var m=!u[f+1],v=m?a+s-h:u[f+1]-h;if(v<=0)return null;var y=f%r.length;return we.createElement("rect",{key:"react-".concat(f),x:h,y:o,width:v,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return we.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var xXe=function(e,t){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return $be($W(Ds(Ds(Ds({},hT.defaultProps),r),{},{ticks:ig(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,t)},SXe=function(e,t){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return $be($W(Ds(Ds(Ds({},hT.defaultProps),r),{},{ticks:ig(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,t)},OS={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function UW(n){var e,t,r,i,a,o,s=OW(),l=LW(),c=cKe(),u=Ds(Ds({},n),{},{stroke:(e=n.stroke)!==null&&e!==void 0?e:OS.stroke,fill:(t=n.fill)!==null&&t!==void 0?t:OS.fill,horizontal:(r=n.horizontal)!==null&&r!==void 0?r:OS.horizontal,horizontalFill:(i=n.horizontalFill)!==null&&i!==void 0?i:OS.horizontalFill,vertical:(a=n.vertical)!==null&&a!==void 0?a:OS.vertical,verticalFill:(o=n.verticalFill)!==null&&o!==void 0?o:OS.verticalFill,x:wt(n.x)?n.x:c.left,y:wt(n.y)?n.y:c.top,width:wt(n.width)?n.width:c.width,height:wt(n.height)?n.height:c.height}),d=u.x,h=u.y,f=u.width,m=u.height,v=u.syncWithTicks,y=u.horizontalValues,w=u.verticalValues,S=oKe(),T=sKe();if(!wt(f)||f<=0||!wt(m)||m<=0||!wt(d)||d!==+d||!wt(h)||h!==+h)return null;var C=u.verticalCoordinatesGenerator||xXe,k=u.horizontalCoordinatesGenerator||SXe,A=u.horizontalPoints,D=u.verticalPoints;if((!A||!A.length)&&cr(k)){var P=y&&y.length,N=k({yAxis:T?Ds(Ds({},T),{},{ticks:P?y:T.ticks}):void 0,width:s,height:l,offset:c},P?!0:v);gg(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Iw(N),"]")),Array.isArray(N)&&(A=N)}if((!D||!D.length)&&cr(C)){var R=w&&w.length,L=C({xAxis:S?Ds(Ds({},S),{},{ticks:R?w:S.ticks}):void 0,width:s,height:l,offset:c},R?!0:v);gg(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Iw(L),"]")),Array.isArray(L)&&(D=L)}return we.createElement("g",{className:"recharts-cartesian-grid"},we.createElement(mXe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),we.createElement(vXe,qb({},u,{offset:c,horizontalPoints:A,xAxis:S,yAxis:T})),we.createElement(yXe,qb({},u,{offset:c,verticalPoints:D,xAxis:S,yAxis:T})),we.createElement(bXe,qb({},u,{horizontalPoints:A})),we.createElement(wXe,qb({},u,{verticalPoints:D})))}UW.displayName="CartesianGrid";function N1(n){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N1(n)}function _Xe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function TXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Dwe(r.key),r)}}function EXe(n,e,t){return e&&TXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function AXe(n,e,t){return e=KO(e),kXe(n,kwe()?Reflect.construct(e,t||[],KO(n).constructor):e.apply(n,t))}function kXe(n,e){if(e&&(N1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CXe(n)}function CXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kwe=function(){return!!n})()}function KO(n){return KO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KO(n)}function DXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&d9(n,e)}function d9(n,e){return d9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d9(n,e)}function Cwe(n,e,t){return e=Dwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dwe(n){var e=IXe(n,"string");return N1(e)=="symbol"?e:e+""}function IXe(n,e){if(N1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(N1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function h9(){return h9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h9.apply(this,arguments)}function MXe(n){var e=n.xAxisId,t=OW(),r=LW(),i=gwe(e);return i==null?null:we.createElement(hT,h9({},i,{className:Nr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:r},ticksGenerator:function(o){return ig(o,!0)}}))}var FI=function(n){function e(){return _Xe(this,e),AXe(this,e,arguments)}return DXe(e,n),EXe(e,[{key:"render",value:function(){return we.createElement(MXe,this.props)}}])}(we.Component);Cwe(FI,"displayName","XAxis");Cwe(FI,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function R1(n){"@babel/helpers - typeof";return R1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R1(n)}function PXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function NXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Pwe(r.key),r)}}function RXe(n,e,t){return e&&NXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function OXe(n,e,t){return e=XO(e),LXe(n,Iwe()?Reflect.construct(e,t||[],XO(n).constructor):e.apply(n,t))}function LXe(n,e){if(e&&(R1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jXe(n)}function jXe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Iwe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iwe=function(){return!!n})()}function XO(n){return XO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XO(n)}function FXe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&f9(n,e)}function f9(n,e){return f9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f9(n,e)}function Mwe(n,e,t){return e=Pwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pwe(n){var e=$Xe(n,"string");return R1(e)=="symbol"?e:e+""}function $Xe(n,e){if(R1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(R1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function p9(){return p9=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p9.apply(this,arguments)}var BXe=function(e){var t=e.yAxisId,r=OW(),i=LW(),a=mwe(t);return a==null?null:we.createElement(hT,p9({},a,{className:Nr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return ig(s,!0)}}))},$I=function(n){function e(){return PXe(this,e),OXe(this,e,arguments)}return FXe(e,n),RXe(e,[{key:"render",value:function(){return we.createElement(BXe,this.props)}}])}(we.Component);Mwe($I,"displayName","YAxis");Mwe($I,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Rie(n){return HXe(n)||zXe(n)||VXe(n)||UXe()}function UXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VXe(n,e){if(n){if(typeof n=="string")return g9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g9(n,e)}}function zXe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function HXe(n){if(Array.isArray(n))return g9(n)}function g9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var m9=function(e,t,r,i,a){var o=eh(e,FW),s=eh(e,pj),l=[].concat(Rie(o),Rie(s)),c=eh(e,mj),u="".concat(i,"Id"),d=i[0],h=t;if(l.length&&(h=l.reduce(function(v,y){if(y.props[u]===r&&Cf(y.props,"extendDomain")&&wt(y.props[d])){var w=y.props[d];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},h)),c.length){var f="".concat(d,"1"),m="".concat(d,"2");h=c.reduce(function(v,y){if(y.props[u]===r&&Cf(y.props,"extendDomain")&&wt(y.props[f])&&wt(y.props[m])){var w=y.props[f],S=y.props[m];return[Math.min(v[0],w,S),Math.max(v[1],w,S)]}return v},h)}return a&&a.length&&(h=a.reduce(function(v,y){return wt(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},h)),h},lB={exports:{}},Oie;function GXe(){return Oie||(Oie=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,u,d,h,f,m){var v=t?t+c:c;if(!this._events[v])return!1;var y=this._events[v],w=arguments.length,S,T;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(T=1,S=new Array(w-1);T<w;T++)S[T-1]=arguments[T];y.fn.apply(y.context,S)}else{var C=y.length,k;for(T=0;T<C;T++)switch(y[T].once&&this.removeListener(c,y[T].fn,void 0,!0),w){case 1:y[T].fn.call(y[T].context);break;case 2:y[T].fn.call(y[T].context,u);break;case 3:y[T].fn.call(y[T].context,u,d);break;case 4:y[T].fn.call(y[T].context,u,d,h);break;default:if(!S)for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];y[T].fn.apply(y[T].context,S)}}return!0},s.prototype.on=function(c,u,d){return a(this,c,u,d,!1)},s.prototype.once=function(c,u,d){return a(this,c,u,d,!0)},s.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var v=0,y=[],w=m.length;v<w;v++)(m[v].fn!==u||h&&!m[v].once||d&&m[v].context!==d)&&y.push(m[v]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,n.exports=s}(lB)),lB.exports}var WXe=GXe();const qXe=Lr(WXe);var cB=new qXe,uB="recharts.syncMouseEvents";function xD(n){"@babel/helpers - typeof";return xD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xD(n)}function YXe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function KXe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Nwe(r.key),r)}}function XXe(n,e,t){return e&&KXe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function dB(n,e,t){return e=Nwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nwe(n){var e=ZXe(n,"string");return xD(e)=="symbol"?e:e+""}function ZXe(n,e){if(xD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(xD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var QXe=function(){function n(){YXe(this,n),dB(this,"activeIndex",0),dB(this,"coordinateList",[]),dB(this,"layout","horizontal")}return XXe(n,[{key:"setDetails",value:function(t){var r,i=t.coordinateList,a=i===void 0?null:i,o=t.container,s=o===void 0?null:o,l=t.layout,c=l===void 0?null:l,u=t.offset,d=u===void 0?null:u,h=t.mouseHandlerCallback,f=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,h=o+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function JXe(n,e,t){if(t==="number"&&e===!0&&Array.isArray(n)){var r=n==null?void 0:n[0],i=n==null?void 0:n[1];if(r&&i&&wt(r)&&wt(i))return!0}return!1}function eZe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function Rwe(n){var e=n.cx,t=n.cy,r=n.radius,i=n.startAngle,a=n.endAngle,o=Yo(e,t,r,i),s=Yo(e,t,r,a);return{points:[o,s],cx:e,cy:t,radius:r,startAngle:i,endAngle:a}}function tZe(n,e,t){var r,i,a,o;if(n==="horizontal")r=e.x,a=r,i=t.top,o=t.top+t.height;else if(n==="vertical")i=e.y,o=i,r=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=Yo(s,l,c,d),f=Yo(s,l,u,d);r=h.x,i=h.y,a=f.x,o=f.y}else return Rwe(e);return[{x:r,y:i},{x:a,y:o}]}function SD(n){"@babel/helpers - typeof";return SD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SD(n)}function Lie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function kP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lie(Object(t),!0).forEach(function(r){nZe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Lie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nZe(n,e,t){return e=rZe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rZe(n){var e=iZe(n,"string");return SD(e)=="symbol"?e:e+""}function iZe(n,e){if(SD(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(SD(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function aZe(n){var e,t,r=n.element,i=n.tooltipEventType,a=n.isActive,o=n.activeCoordinate,s=n.activePayload,l=n.offset,c=n.activeTooltipIndex,u=n.tooltipAxisBandSize,d=n.layout,h=n.chartName,f=(e=r.props.cursor)!==null&&e!==void 0?e:(t=r.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!r||!f||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var m,v=fre;if(h==="ScatterChart")m=o,v=mqe;else if(h==="BarChart")m=eZe(d,o,l,u),v=MW;else if(d==="radial"){var y=Rwe(o),w=y.cx,S=y.cy,T=y.radius,C=y.startAngle,k=y.endAngle;m={cx:w,cy:S,startAngle:C,endAngle:k,innerRadius:T,outerRadius:T},v=Hbe}else m={points:tZe(d,o,l)},v=fre;var A=kP(kP(kP(kP({stroke:"#ccc",pointerEvents:"none"},l),m),Vr(f,!1)),{},{payload:s,payloadIndex:c,className:Nr("recharts-tooltip-cursor",f.className)});return Y.isValidElement(f)?Y.cloneElement(f,A):Y.createElement(v,A)}var oZe=["item"],sZe=["children","className","width","height","style","compact","title","desc"];function O1(n){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O1(n)}function C_(){return C_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C_.apply(this,arguments)}function jie(n,e){return uZe(n)||cZe(n,e)||Lwe(n,e)||lZe()}function lZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cZe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(r=a.call(t)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function uZe(n){if(Array.isArray(n))return n}function Fie(n,e){if(n==null)return{};var t=dZe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function dZe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hZe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fZe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,jwe(r.key),r)}}function pZe(n,e,t){return e&&fZe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function gZe(n,e,t){return e=ZO(e),mZe(n,Owe()?Reflect.construct(e,t||[],ZO(n).constructor):e.apply(n,t))}function mZe(n,e){if(e&&(O1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZe(n)}function vZe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Owe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Owe=function(){return!!n})()}function ZO(n){return ZO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZO(n)}function yZe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&v9(n,e)}function v9(n,e){return v9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v9(n,e)}function L1(n){return xZe(n)||wZe(n)||Lwe(n)||bZe()}function bZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lwe(n,e){if(n){if(typeof n=="string")return y9(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y9(n,e)}}function wZe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xZe(n){if(Array.isArray(n))return y9(n)}function y9(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function $ie(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$ie(Object(t),!0).forEach(function(r){xn(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$ie(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xn(n,e,t){return e=jwe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jwe(n){var e=SZe(n,"string");return O1(e)=="symbol"?e:e+""}function SZe(n,e){if(O1(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(O1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _Ze={xAxis:["bottom","top"],yAxis:["left","right"]},TZe={width:"100%",height:"100%"},Fwe={x:0,y:0};function CP(n){return n}var EZe=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},AZe=function(e,t,r,i){var a=t.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return Ve(Ve(Ve({},i),Yo(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return Ve(Ve(Ve({},i),Yo(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Fwe},vj=function(e,t){var r=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(L1(s),L1(c)):s},[]);return o.length>0?o:e&&e.length&&wt(i)&&wt(a)?e.slice(i,a+1):[]};function $we(n){return n==="number"?[0,"auto"]:void 0}var b9=function(e,t,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=vj(t,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:t;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var f=d===void 0?s:d;h=az(f,o.dataKey,i)}else h=d&&d[r]||s[r];return h?[].concat(L1(l),[Ube(c,h)]):l},[])},Bie=function(e,t,r,i){var a=i||{x:e.chartX,y:e.chartY},o=EZe(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=JGe(o,s,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=b9(e,t,u,d),f=AZe(r,s,u,a);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:f}}return null},kZe=function(e,t){var r=t.axes,i=t.graphicalItems,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,f=Fbe(u,a);return r.reduce(function(m,v){var y,w=v.type.defaultProps!==void 0?Ve(Ve({},v.type.defaultProps),v.props):v.props,S=w.type,T=w.dataKey,C=w.allowDataOverflow,k=w.allowDuplicatedCategory,A=w.scale,D=w.ticks,P=w.includeHidden,N=w[o];if(m[N])return m;var R=vj(e.data,{graphicalItems:i.filter(function(ce){var ee,be=o in ce.props?ce.props[o]:(ee=ce.type.defaultProps)===null||ee===void 0?void 0:ee[o];return be===N}),dataStartIndex:l,dataEndIndex:c}),L=R.length,B,$,G;JXe(w.domain,C,S)&&(B=$z(w.domain,null,C),f&&(S==="number"||A!=="auto")&&(G=Kk(R,T,"category")));var W=$we(S);if(!B||B.length===0){var K,X=(K=w.domain)!==null&&K!==void 0?K:W;if(T){if(B=Kk(R,T,S),S==="category"&&f){var te=G$e(B);k&&te?($=B,B=$O(0,L)):k||(B=Jne(X,B,v).reduce(function(ce,ee){return ce.indexOf(ee)>=0?ce:[].concat(L1(ce),[ee])},[]))}else if(S==="category")k?B=B.filter(function(ce){return ce!==""&&!Xr(ce)}):B=Jne(X,B,v).reduce(function(ce,ee){return ce.indexOf(ee)>=0||ee===""||Xr(ee)?ce:[].concat(L1(ce),[ee])},[]);else if(S==="number"){var ie=i8e(R,i.filter(function(ce){var ee,be,fe=o in ce.props?ce.props[o]:(ee=ce.type.defaultProps)===null||ee===void 0?void 0:ee[o],De="hide"in ce.props?ce.props.hide:(be=ce.type.defaultProps)===null||be===void 0?void 0:be.hide;return fe===N&&(P||!De)}),T,a,u);ie&&(B=ie)}f&&(S==="number"||A!=="auto")&&(G=Kk(R,T,"category"))}else f?B=$O(0,L):s&&s[N]&&s[N].hasStack&&S==="number"?B=h==="expand"?[0,1]:Bbe(s[N].stackGroups,l,c):B=jbe(R,i.filter(function(ce){var ee=o in ce.props?ce.props[o]:ce.type.defaultProps[o],be="hide"in ce.props?ce.props.hide:ce.type.defaultProps.hide;return ee===N&&(P||!be)}),S,u,!0);if(S==="number")B=m9(d,B,N,a,D),X&&(B=$z(X,B,C));else if(S==="category"&&X){var z=X,se=B.every(function(ce){return z.indexOf(ce)>=0});se&&(B=z)}}return Ve(Ve({},m),{},xn({},N,Ve(Ve({},w),{},{axisType:a,domain:B,categoricalDomain:G,duplicateDomain:$,originalDomain:(y=w.domain)!==null&&y!==void 0?y:W,isCategorical:f,layout:u})))},{})},CZe=function(e,t){var r=t.graphicalItems,i=t.Axis,a=t.axisType,o=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,d=e.children,h=vj(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),f=h.length,m=Fbe(u,a),v=-1;return r.reduce(function(y,w){var S=w.type.defaultProps!==void 0?Ve(Ve({},w.type.defaultProps),w.props):w.props,T=S[o],C=$we("number");if(!y[T]){v++;var k;return m?k=$O(0,f):s&&s[T]&&s[T].hasStack?(k=Bbe(s[T].stackGroups,l,c),k=m9(d,k,T,a)):(k=$z(C,jbe(h,r.filter(function(A){var D,P,N=o in A.props?A.props[o]:(D=A.type.defaultProps)===null||D===void 0?void 0:D[o],R="hide"in A.props?A.props.hide:(P=A.type.defaultProps)===null||P===void 0?void 0:P.hide;return N===T&&!R}),"number",u),i.defaultProps.allowDataOverflow),k=m9(d,k,T,a)),Ve(Ve({},y),{},xn({},T,Ve(Ve({axisType:a},i.defaultProps),{},{hide:!0,orientation:zu(_Ze,"".concat(a,".").concat(v%2),null),domain:k,originalDomain:C,isCategorical:m,layout:u})))}return y},{})},DZe=function(e,t){var r=t.axisType,i=r===void 0?"xAxis":r,a=t.AxisComp,o=t.graphicalItems,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=eh(u,a),f={};return h&&h.length?f=kZe(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(f=CZe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),f},IZe=function(e){var t=Pv(e),r=ig(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:rW(r,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:IO(t,r)}},Uie=function(e){var t=e.children,r=e.defaultShowTooltip,i=Cc(t,k1),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},MZe=function(e){return!e||!e.length?!1:e.some(function(t){var r=pg(t&&t.type);return r&&r.indexOf("Bar")>=0})},Vie=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},PZe=function(e,t){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,d=r.children,h=r.margin||{},f=Cc(d,k1),m=Cc(d,z_),v=Object.keys(l).reduce(function(k,A){var D=l[A],P=D.orientation;return!D.mirror&&!D.hide?Ve(Ve({},k),{},xn({},P,k[P]+D.width)):k},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(k,A){var D=o[A],P=D.orientation;return!D.mirror&&!D.hide?Ve(Ve({},k),{},xn({},P,zu(k,"".concat(P))+D.height)):k},{top:h.top||0,bottom:h.bottom||0}),w=Ve(Ve({},y),v),S=w.bottom;f&&(w.bottom+=f.props.height||k1.defaultProps.height),m&&t&&(w=n8e(w,i,r,t));var T=c-w.left-w.right,C=u-w.top-w.bottom;return Ve(Ve({brushBottom:S},w),{},{width:Math.max(T,0),height:Math.max(C,0)})},NZe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},RZe=function(e){var t=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(w,S){var T=S.graphicalItems,C=S.stackGroups,k=S.offset,A=S.updateId,D=S.dataStartIndex,P=S.dataEndIndex,N=w.barSize,R=w.layout,L=w.barGap,B=w.barCategoryGap,$=w.maxBarSize,G=Vie(R),W=G.numericAxisName,K=G.cateAxisName,X=MZe(T),te=[];return T.forEach(function(ie,z){var se=vj(w.data,{graphicalItems:[ie],dataStartIndex:D,dataEndIndex:P}),ce=ie.type.defaultProps!==void 0?Ve(Ve({},ie.type.defaultProps),ie.props):ie.props,ee=ce.dataKey,be=ce.maxBarSize,fe=ce["".concat(W,"Id")],De=ce["".concat(K,"Id")],dt={},ve=l.reduce(function(vn,Fn){var je=S["".concat(Fn.axisType,"Map")],an=ce["".concat(Fn.axisType,"Id")];je&&je[an]||Fn.axisType==="zAxis"||Dw();var yn=je[an];return Ve(Ve({},vn),{},xn(xn({},Fn.axisType,yn),"".concat(Fn.axisType,"Ticks"),ig(yn)))},dt),de=ve[K],me=ve["".concat(K,"Ticks")],xe=C&&C[fe]&&C[fe].hasStack&&m8e(ie,C[fe].stackGroups),pe=pg(ie.type).indexOf("Bar")>=0,$e=IO(de,me),We=[],ct=X&&e8e({barSize:N,stackGroups:C,totalSize:NZe(ve,K)});if(pe){var xt,At,pn=Xr(be)?$:be,Yt=(xt=(At=IO(de,me,!0))!==null&&At!==void 0?At:pn)!==null&&xt!==void 0?xt:0;We=t8e({barGap:L,barCategoryGap:B,bandSize:Yt!==$e?Yt:$e,sizeList:ct[De],maxBarSize:pn}),Yt!==$e&&(We=We.map(function(vn){return Ve(Ve({},vn),{},{position:Ve(Ve({},vn.position),{},{offset:vn.position.offset-Yt/2})})}))}var Rn=ie&&ie.type&&ie.type.getComposedData;Rn&&te.push({props:Ve(Ve({},Rn(Ve(Ve({},ve),{},{displayedData:se,props:w,dataKey:ee,item:ie,bandSize:$e,barPosition:We,offset:k,stackedData:xe,layout:R,dataStartIndex:D,dataEndIndex:P}))),{},xn(xn(xn({key:ie.key||"item-".concat(z)},W,ve[W]),K,ve[K]),"animationId",A)),childIndex:rBe(ie,w.children),item:ie})}),te},f=function(w,S){var T=w.props,C=w.dataStartIndex,k=w.dataEndIndex,A=w.updateId;if(!pJ({props:T}))return null;var D=T.children,P=T.layout,N=T.stackOffset,R=T.data,L=T.reverseStackOrder,B=Vie(P),$=B.numericAxisName,G=B.cateAxisName,W=eh(D,r),K=f8e(R,W,"".concat($,"Id"),"".concat(G,"Id"),N,L),X=l.reduce(function(ce,ee){var be="".concat(ee.axisType,"Map");return Ve(Ve({},ce),{},xn({},be,DZe(T,Ve(Ve({},ee),{},{graphicalItems:W,stackGroups:ee.axisType===$&&K,dataStartIndex:C,dataEndIndex:k}))))},{}),te=PZe(Ve(Ve({},X),{},{props:T,graphicalItems:W}),S==null?void 0:S.legendBBox);Object.keys(X).forEach(function(ce){X[ce]=u(T,X[ce],te,ce.replace("Map",""),t)});var ie=X["".concat(G,"Map")],z=IZe(ie),se=h(T,Ve(Ve({},X),{},{dataStartIndex:C,dataEndIndex:k,updateId:A,graphicalItems:W,stackGroups:K,offset:te}));return Ve(Ve({formattedGraphicalItems:se,graphicalItems:W,offset:te,stackGroups:K},z),X)},m=function(y){function w(S){var T,C,k;return hZe(this,w),k=gZe(this,w,[S]),xn(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xn(k,"accessibilityManager",new QXe),xn(k,"handleLegendBBoxUpdate",function(A){if(A){var D=k.state,P=D.dataStartIndex,N=D.dataEndIndex,R=D.updateId;k.setState(Ve({legendBBox:A},f({props:k.props,dataStartIndex:P,dataEndIndex:N,updateId:R},Ve(Ve({},k.state),{},{legendBBox:A}))))}}),xn(k,"handleReceiveSyncEvent",function(A,D,P){if(k.props.syncId===A){if(P===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(D)}}),xn(k,"handleBrushChange",function(A){var D=A.startIndex,P=A.endIndex;if(D!==k.state.dataStartIndex||P!==k.state.dataEndIndex){var N=k.state.updateId;k.setState(function(){return Ve({dataStartIndex:D,dataEndIndex:P},f({props:k.props,dataStartIndex:D,dataEndIndex:P,updateId:N},k.state))}),k.triggerSyncEvent({dataStartIndex:D,dataEndIndex:P})}}),xn(k,"handleMouseEnter",function(A){var D=k.getMouseInfo(A);if(D){var P=Ve(Ve({},D),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var N=k.props.onMouseEnter;cr(N)&&N(P,A)}}),xn(k,"triggeredAfterMouseMove",function(A){var D=k.getMouseInfo(A),P=D?Ve(Ve({},D),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var N=k.props.onMouseMove;cr(N)&&N(P,A)}),xn(k,"handleItemMouseEnter",function(A){k.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),xn(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),xn(k,"handleMouseMove",function(A){A.persist(),k.throttleTriggeredAfterMouseMove(A)}),xn(k,"handleMouseLeave",function(A){k.throttleTriggeredAfterMouseMove.cancel();var D={isTooltipActive:!1};k.setState(D),k.triggerSyncEvent(D);var P=k.props.onMouseLeave;cr(P)&&P(D,A)}),xn(k,"handleOuterEvent",function(A){var D=nBe(A),P=zu(k.props,"".concat(D));if(D&&cr(P)){var N,R;/.*touch.*/i.test(D)?R=k.getMouseInfo(A.changedTouches[0]):R=k.getMouseInfo(A),P((N=R)!==null&&N!==void 0?N:{},A)}}),xn(k,"handleClick",function(A){var D=k.getMouseInfo(A);if(D){var P=Ve(Ve({},D),{},{isTooltipActive:!0});k.setState(P),k.triggerSyncEvent(P);var N=k.props.onClick;cr(N)&&N(P,A)}}),xn(k,"handleMouseDown",function(A){var D=k.props.onMouseDown;if(cr(D)){var P=k.getMouseInfo(A);D(P,A)}}),xn(k,"handleMouseUp",function(A){var D=k.props.onMouseUp;if(cr(D)){var P=k.getMouseInfo(A);D(P,A)}}),xn(k,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),xn(k,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.handleMouseDown(A.changedTouches[0])}),xn(k,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.handleMouseUp(A.changedTouches[0])}),xn(k,"handleDoubleClick",function(A){var D=k.props.onDoubleClick;if(cr(D)){var P=k.getMouseInfo(A);D(P,A)}}),xn(k,"handleContextMenu",function(A){var D=k.props.onContextMenu;if(cr(D)){var P=k.getMouseInfo(A);D(P,A)}}),xn(k,"triggerSyncEvent",function(A){k.props.syncId!==void 0&&cB.emit(uB,k.props.syncId,A,k.eventEmitterSymbol)}),xn(k,"applySyncEvent",function(A){var D=k.props,P=D.layout,N=D.syncMethod,R=k.state.updateId,L=A.dataStartIndex,B=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)k.setState(Ve({dataStartIndex:L,dataEndIndex:B},f({props:k.props,dataStartIndex:L,dataEndIndex:B,updateId:R},k.state)));else if(A.activeTooltipIndex!==void 0){var $=A.chartX,G=A.chartY,W=A.activeTooltipIndex,K=k.state,X=K.offset,te=K.tooltipTicks;if(!X)return;if(typeof N=="function")W=N(te,A);else if(N==="value"){W=-1;for(var ie=0;ie<te.length;ie++)if(te[ie].value===A.activeLabel){W=ie;break}}var z=Ve(Ve({},X),{},{x:X.left,y:X.top}),se=Math.min($,z.x+z.width),ce=Math.min(G,z.y+z.height),ee=te[W]&&te[W].value,be=b9(k.state,k.props.data,W),fe=te[W]?{x:P==="horizontal"?te[W].coordinate:se,y:P==="horizontal"?ce:te[W].coordinate}:Fwe;k.setState(Ve(Ve({},A),{},{activeLabel:ee,activeCoordinate:fe,activePayload:be,activeTooltipIndex:W}))}else k.setState(A)}),xn(k,"renderCursor",function(A){var D,P=k.state,N=P.isTooltipActive,R=P.activeCoordinate,L=P.activePayload,B=P.offset,$=P.activeTooltipIndex,G=P.tooltipAxisBandSize,W=k.getTooltipEventType(),K=(D=A.props.active)!==null&&D!==void 0?D:N,X=k.props.layout,te=A.key||"_recharts-cursor";return we.createElement(aZe,{key:te,activeCoordinate:R,activePayload:L,activeTooltipIndex:$,chartName:t,element:A,isActive:K,layout:X,offset:B,tooltipAxisBandSize:G,tooltipEventType:W})}),xn(k,"renderPolarAxis",function(A,D,P){var N=zu(A,"type.axisType"),R=zu(k.state,"".concat(N,"Map")),L=A.type.defaultProps,B=L!==void 0?Ve(Ve({},L),A.props):A.props,$=R&&R[B["".concat(N,"Id")]];return Y.cloneElement(A,Ve(Ve({},$),{},{className:Nr(N,$.className),key:A.key||"".concat(D,"-").concat(P),ticks:ig($,!0)}))}),xn(k,"renderPolarGrid",function(A){var D=A.props,P=D.radialLines,N=D.polarAngles,R=D.polarRadius,L=k.state,B=L.radiusAxisMap,$=L.angleAxisMap,G=Pv(B),W=Pv($),K=W.cx,X=W.cy,te=W.innerRadius,ie=W.outerRadius;return Y.cloneElement(A,{polarAngles:Array.isArray(N)?N:ig(W,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(R)?R:ig(G,!0).map(function(z){return z.coordinate}),cx:K,cy:X,innerRadius:te,outerRadius:ie,key:A.key||"polar-grid",radialLines:P})}),xn(k,"renderLegend",function(){var A=k.state.formattedGraphicalItems,D=k.props,P=D.children,N=D.width,R=D.height,L=k.props.margin||{},B=N-(L.left||0)-(L.right||0),$=Obe({children:P,formattedGraphicalItems:A,legendWidth:B,legendContent:c});if(!$)return null;var G=$.item,W=Fie($,oZe);return Y.cloneElement(G,Ve(Ve({},W),{},{chartWidth:N,chartHeight:R,margin:L,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),xn(k,"renderTooltip",function(){var A,D=k.props,P=D.children,N=D.accessibilityLayer,R=Cc(P,Ud);if(!R)return null;var L=k.state,B=L.isTooltipActive,$=L.activeCoordinate,G=L.activePayload,W=L.activeLabel,K=L.offset,X=(A=R.props.active)!==null&&A!==void 0?A:B;return Y.cloneElement(R,{viewBox:Ve(Ve({},K),{},{x:K.left,y:K.top}),active:X,label:W,payload:X?G:[],coordinate:$,accessibilityLayer:N})}),xn(k,"renderBrush",function(A){var D=k.props,P=D.margin,N=D.data,R=k.state,L=R.offset,B=R.dataStartIndex,$=R.dataEndIndex,G=R.updateId;return Y.cloneElement(A,{key:A.key||"_recharts-brush",onChange:_P(k.handleBrushChange,A.props.onChange),data:N,x:wt(A.props.x)?A.props.x:L.left,y:wt(A.props.y)?A.props.y:L.top+L.height+L.brushBottom-(P.bottom||0),width:wt(A.props.width)?A.props.width:L.width,startIndex:B,endIndex:$,updateId:"brush-".concat(G)})}),xn(k,"renderReferenceElement",function(A,D,P){if(!A)return null;var N=k,R=N.clipPathId,L=k.state,B=L.xAxisMap,$=L.yAxisMap,G=L.offset,W=A.type.defaultProps||{},K=A.props,X=K.xAxisId,te=X===void 0?W.xAxisId:X,ie=K.yAxisId,z=ie===void 0?W.yAxisId:ie;return Y.cloneElement(A,{key:A.key||"".concat(D,"-").concat(P),xAxis:B[te],yAxis:$[z],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:R})}),xn(k,"renderActivePoints",function(A){var D=A.item,P=A.activePoint,N=A.basePoint,R=A.childIndex,L=A.isRange,B=[],$=D.props.key,G=D.item.type.defaultProps!==void 0?Ve(Ve({},D.item.type.defaultProps),D.item.props):D.item.props,W=G.activeDot,K=G.dataKey,X=Ve(Ve({index:R,dataKey:K,cx:P.x,cy:P.y,r:4,fill:IW(D.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Vr(W,!1)),iO(W));return B.push(w.renderActiveDot(W,X,"".concat($,"-activePoint-").concat(R))),N?B.push(w.renderActiveDot(W,Ve(Ve({},X),{},{cx:N.x,cy:N.y}),"".concat($,"-basePoint-").concat(R))):L&&B.push(null),B}),xn(k,"renderGraphicChild",function(A,D,P){var N=k.filterFormatItem(A,D,P);if(!N)return null;var R=k.getTooltipEventType(),L=k.state,B=L.isTooltipActive,$=L.tooltipAxis,G=L.activeTooltipIndex,W=L.activeLabel,K=k.props.children,X=Cc(K,Ud),te=N.props,ie=te.points,z=te.isRange,se=te.baseLine,ce=N.item.type.defaultProps!==void 0?Ve(Ve({},N.item.type.defaultProps),N.item.props):N.item.props,ee=ce.activeDot,be=ce.hide,fe=ce.activeBar,De=ce.activeShape,dt=!!(!be&&B&&X&&(ee||fe||De)),ve={};R!=="axis"&&X&&X.props.trigger==="click"?ve={onClick:_P(k.handleItemMouseEnter,A.props.onClick)}:R!=="axis"&&(ve={onMouseLeave:_P(k.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:_P(k.handleItemMouseEnter,A.props.onMouseEnter)});var de=Y.cloneElement(A,Ve(Ve({},N.props),ve));function me(Fn){return typeof $.dataKey=="function"?$.dataKey(Fn.payload):null}if(dt)if(G>=0){var xe,pe;if($.dataKey&&!$.allowDuplicatedCategory){var $e=typeof $.dataKey=="function"?me:"payload.".concat($.dataKey.toString());xe=az(ie,$e,W),pe=z&&se&&az(se,$e,W)}else xe=ie==null?void 0:ie[G],pe=z&&se&&se[G];if(De||fe){var We=A.props.activeIndex!==void 0?A.props.activeIndex:G;return[Y.cloneElement(A,Ve(Ve(Ve({},N.props),ve),{},{activeIndex:We})),null,null]}if(!Xr(xe))return[de].concat(L1(k.renderActivePoints({item:N,activePoint:xe,basePoint:pe,childIndex:G,isRange:z})))}else{var ct,xt=(ct=k.getItemByXY(k.state.activeCoordinate))!==null&&ct!==void 0?ct:{graphicalItem:de},At=xt.graphicalItem,pn=At.item,Yt=pn===void 0?A:pn,Rn=At.childIndex,vn=Ve(Ve(Ve({},N.props),ve),{},{activeIndex:Rn});return[Y.cloneElement(Yt,vn),null,null]}return z?[de,null,null]:[de,null]}),xn(k,"renderCustomized",function(A,D,P){return Y.cloneElement(A,Ve(Ve({key:"recharts-customized-".concat(P)},k.props),k.state))}),xn(k,"renderMap",{CartesianGrid:{handler:CP,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:CP},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:CP},YAxis:{handler:CP},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((T=S.id)!==null&&T!==void 0?T:HL("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=R0e(k.triggeredAfterMouseMove,(C=S.throttleDelay)!==null&&C!==void 0?C:1e3/60),k.state={},k}return yZe(w,y),pZe(w,[{key:"componentDidMount",value:function(){var T,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,C=T.children,k=T.data,A=T.height,D=T.layout,P=Cc(C,Ud);if(P){var N=P.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,L=b9(this.state,k,N,R),B=this.state.tooltipTicks[N].coordinate,$=(this.state.offset.top+A)/2,G=D==="horizontal",W=G?{x:B,y:$}:{y:B,x:$},K=this.state.formattedGraphicalItems.find(function(te){var ie=te.item;return ie.type.name==="Scatter"});K&&(W=Ve(Ve({},W),K.props.points[N].tooltipPosition),L=K.props.points[N].tooltipPayload);var X={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:R,activePayload:L,activeCoordinate:W};this.setState(X),this.renderCursor(P),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var k,A;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(T){sz([Cc(T.children,Ud)],[Cc(this.props.children,Ud)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Cc(this.props.children,Ud);if(T&&typeof T.props.shared=="boolean"){var C=T.props.shared?"axis":"item";return s.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var C=this.container,k=C.getBoundingClientRect(),A=zVe(k),D={chartX:Math.round(T.pageX-A.left),chartY:Math.round(T.pageY-A.top)},P=k.width/C.offsetWidth||1,N=this.inRange(D.chartX,D.chartY,P);if(!N)return null;var R=this.state,L=R.xAxisMap,B=R.yAxisMap,$=this.getTooltipEventType(),G=Bie(this.state,this.props.data,this.props.layout,N);if($!=="axis"&&L&&B){var W=Pv(L).scale,K=Pv(B).scale,X=W&&W.invert?W.invert(D.chartX):null,te=K&&K.invert?K.invert(D.chartY):null;return Ve(Ve({},D),{},{xValue:X,yValue:te},G)}return G?Ve(Ve({},D),G):null}},{key:"inRange",value:function(T,C){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,D=T/k,P=C/k;if(A==="horizontal"||A==="vertical"){var N=this.state.offset,R=D>=N.left&&D<=N.left+N.width&&P>=N.top&&P<=N.top+N.height;return R?{x:D,y:P}:null}var L=this.state,B=L.angleAxisMap,$=L.radiusAxisMap;if(B&&$){var G=Pv(B);return nre({x:D,y:P},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,C=this.getTooltipEventType(),k=Cc(T,Ud),A={};k&&C==="axis"&&(k.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var D=iO(this.props,this.handleOuterEvent);return Ve(Ve({},D),A)}},{key:"addListener",value:function(){cB.on(uB,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cB.removeListener(uB,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,C,k){for(var A=this.state.formattedGraphicalItems,D=0,P=A.length;D<P;D++){var N=A[D];if(N.item===T||N.props.key===T.key||C===pg(N.item.type)&&k===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,C=this.state.offset,k=C.left,A=C.top,D=C.height,P=C.width;return we.createElement("defs",null,we.createElement("clipPath",{id:T},we.createElement("rect",{x:k,y:A,height:D,width:P})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(C,k){var A=jie(k,2),D=A[0],P=A[1];return Ve(Ve({},C),{},xn({},D,P.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(C,k){var A=jie(k,2),D=A[0],P=A[1];return Ve(Ve({},C),{},xn({},D,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[T])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(T){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[T])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(T){var C=this.state,k=C.formattedGraphicalItems,A=C.activeItem;if(k&&k.length)for(var D=0,P=k.length;D<P;D++){var N=k[D],R=N.props,L=N.item,B=L.type.defaultProps!==void 0?Ve(Ve({},L.type.defaultProps),L.props):L.props,$=pg(L.type);if($==="Bar"){var G=(R.data||[]).find(function(te){return oqe(T,te)});if(G)return{graphicalItem:N,payload:G}}else if($==="RadialBar"){var W=(R.data||[]).find(function(te){return nre(T,te)});if(W)return{graphicalItem:N,payload:W}}else if(uj(N,A)||dj(N,A)||mD(N,A)){var K=Xqe({graphicalItem:N,activeTooltipItem:A,itemData:B.data}),X=B.activeIndex===void 0?K:B.activeIndex;return{graphicalItem:Ve(Ve({},N),{},{childIndex:X}),payload:mD(N,A)?B.data[K]:N.props.data[K]}}}return null}},{key:"render",value:function(){var T=this;if(!pJ(this))return null;var C=this.props,k=C.children,A=C.className,D=C.width,P=C.height,N=C.style,R=C.compact,L=C.title,B=C.desc,$=Fie(C,sZe),G=Vr($,!1);if(R)return we.createElement(xie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement(cz,C_({},G,{width:D,height:P,title:L,desc:B}),this.renderClipPath(),mJ(k,this.renderMap)));if(this.props.accessibilityLayer){var W,K;G.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,G.role=(K=this.props.role)!==null&&K!==void 0?K:"application",G.onKeyDown=function(te){T.accessibilityManager.keyboardEvent(te)},G.onFocus=function(){T.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return we.createElement(xie,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},we.createElement("div",C_({className:Nr("recharts-wrapper",A),style:Ve({position:"relative",cursor:"default",width:D,height:P},N)},X,{ref:function(ie){T.container=ie}}),we.createElement(cz,C_({},G,{width:D,height:P,title:L,desc:B,style:TZe}),this.renderClipPath(),mJ(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(Y.Component);xn(m,"displayName",t),xn(m,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),xn(m,"getDerivedStateFromProps",function(y,w){var S=y.dataKey,T=y.data,C=y.children,k=y.width,A=y.height,D=y.layout,P=y.stackOffset,N=y.margin,R=w.dataStartIndex,L=w.dataEndIndex;if(w.updateId===void 0){var B=Uie(y);return Ve(Ve(Ve({},B),{},{updateId:0},f(Ve(Ve({props:y},B),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:T,prevWidth:k,prevHeight:A,prevLayout:D,prevStackOffset:P,prevMargin:N,prevChildren:C})}if(S!==w.prevDataKey||T!==w.prevData||k!==w.prevWidth||A!==w.prevHeight||D!==w.prevLayout||P!==w.prevStackOffset||!V_(N,w.prevMargin)){var $=Uie(y),G={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},W=Ve(Ve({},Bie(w,T,D)),{},{updateId:w.updateId+1}),K=Ve(Ve(Ve({},$),G),W);return Ve(Ve(Ve({},K),f(Ve({props:y},K),w)),{},{prevDataKey:S,prevData:T,prevWidth:k,prevHeight:A,prevLayout:D,prevStackOffset:P,prevMargin:N,prevChildren:C})}if(!sz(C,w.prevChildren)){var X,te,ie,z,se=Cc(C,k1),ce=se&&(X=(te=se.props)===null||te===void 0?void 0:te.startIndex)!==null&&X!==void 0?X:R,ee=se&&(ie=(z=se.props)===null||z===void 0?void 0:z.endIndex)!==null&&ie!==void 0?ie:L,be=ce!==R||ee!==L,fe=!Xr(T),De=fe&&!be?w.updateId:w.updateId+1;return Ve(Ve({updateId:De},f(Ve(Ve({props:y},w),{},{updateId:De,dataStartIndex:ce,dataEndIndex:ee}),w)),{},{prevChildren:C,dataStartIndex:ce,dataEndIndex:ee})}return null}),xn(m,"renderActiveDot",function(y,w,S){var T;return Y.isValidElement(y)?T=Y.cloneElement(y,w):cr(y)?T=y(w):T=we.createElement(Qbe,w),we.createElement(Do,{className:"recharts-active-dot",key:S},T)});var v=Y.forwardRef(function(w,S){return we.createElement(m,C_({},w,{ref:S}))});return v.displayName=m.displayName,v},Bwe=RZe({chartName:"BarChart",GraphicalChild:Ty,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:FI},{axisType:"yAxis",AxisComp:$I}],formatAxisMap:WYe});const OZe=we.memo(()=>{const{workSessions:n,selectedRange:e}=yy(),t=Vt(w=>w.projects),r=Y.useMemo(()=>{var C,k;if(console.log("TopProjects - Filtering work sessions:",{totalSessions:n.length,rangeType:e.rangeType,startDate:(C=e.startDate)==null?void 0:C.toISOString(),endDate:(k=e.endDate)==null?void 0:k.toISOString()}),e.rangeType==="all time")return console.log('TopProjects - Using all sessions for "all time"'),n;if(!e.startDate||!e.endDate)return console.log("TopProjects - No date range specified, using all sessions"),n;const w=new Date(e.startDate);w.setHours(0,0,0,0);const S=new Date(e.endDate);S.setHours(23,59,59,999);const T=n.filter(A=>{const D=new Date(A.date);return D>=w&&D<=S});return console.log("TopProjects - Filtered result:",{originalCount:n.length,filteredCount:T.length,sampleFiltered:T.slice(0,3)}),T},[n,e]),i=Y.useMemo(()=>{const w=new Map;return r.filter(S=>S.sessionType==="pomodoro"||S.sessionType==="manual").forEach(S=>{const T=S.duration||0,C=w.get(S.projectId)||0;w.set(S.projectId,C+T)}),t.map(S=>({id:S.id,userId:S.userId,name:S.name,color:S.color||"#3B82F6",totalFocusTime:w.get(S.id)||0,createdAt:new Date,isActive:!0})).filter(S=>S.totalFocusTime>0).sort((S,T)=>T.totalFocusTime-S.totalFocusTime)},[t,r]),a=i.slice(0,9),o=i.slice(9),s=o.reduce((w,S)=>w+S.totalFocusTime,0),l=[...a.map(w=>({name:"",fullName:w.name,value:w.totalFocusTime,color:w.color}))];o.length>0&&s>0&&l.push({name:"",fullName:"Others",value:s,color:"#969696"});const c=Math.max(...l.map(w=>w.value)),d=(w=>w<=300?60:w<=600?120:w<=1200?240:Math.ceil(w/6/60)*60)(c),h=Math.ceil(c/d)*d,f=Array.from({length:Math.floor(h/d)+1},(w,S)=>S*d),m=({active:w,payload:S,label:T})=>{if(w&&S&&S.length){const C=S[0].payload;return x.jsxs("div",{className:"bg-background-secondary border border-border rounded-lg shadow-lg p-3",children:[x.jsx("p",{className:"text-text-primary font-medium text-sm mb-1",children:C.fullName}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-2 h-2 rounded-full mr-2",style:{backgroundColor:C.color}}),x.jsx("span",{className:"text-text-secondary text-sm",children:Af(C.value)})]})]})}return null},v=()=>x.jsx("div",{className:"flex flex-wrap gap-x-8 gap-y-2 mt-4 px-4",children:l.map((w,S)=>x.jsxs("div",{className:"flex items-center min-w-0 max-w-[200px]",children:[x.jsx("div",{className:"w-3 h-3 rounded-sm mr-2 flex-shrink-0",style:{backgroundColor:w.color}}),x.jsx("span",{className:"text-xs text-text-secondary overflow-hidden text-ellipsis whitespace-nowrap flex-1",title:w.fullName,children:w.fullName})]},S))}),y=w=>{const{x:S,y:T,value:C,width:k}=w;let A="";if(C<60)A=`${C}m`;else{const D=Math.floor(C/60),P=C%60;A=P>0?`${D}h ${P}m`:`${D}h`}return x.jsx("text",{x:S+k/2,y:T-8,fill:"var(--text-secondary)",textAnchor:"middle",fontSize:"11",fontWeight:"500",style:{whiteSpace:"nowrap"},children:A})};return l.length===0?x.jsx(fg,{title:"Top Projects",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:x.jsx("i",{className:"ri-folder-line ri-2x"})}),x.jsx("p",{className:"text-text-secondary text-sm",children:"No projects with focus time found"})]})})}):x.jsx(fg,{title:"Top Projects",action:x.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"}),children:x.jsxs("div",{className:"flex flex-col w-full h-[360px]",children:[x.jsx("div",{className:"flex-1",children:x.jsx(O0e,{width:"100%",height:"100%",children:x.jsxs(Bwe,{data:l,margin:{top:50,right:30,left:25,bottom:20},barSize:35,children:[x.jsx("text",{x:"50%",y:20,textAnchor:"middle",dominantBaseline:"hanging",className:"fill-text-primary text-sm font-medium",style:{transform:"translateY(-5px)"},children:"Time Spent"}),x.jsx(UW,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--border-color)",strokeWidth:1}),x.jsx(FI,{dataKey:"name",interval:0,tick:!1,tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},dy:8}),x.jsx($I,{tickFormatter:w=>{if(w<60)return`${w}m`;const S=Math.floor(w/60),T=w%60;return T>0?`${S}h ${T}m`:`${S}h`},tick:{fill:"var(--text-secondary)",fontSize:11,fontWeight:500},tickLine:!1,axisLine:{stroke:"var(--border-color)",strokeWidth:1},width:45,dx:-5,ticks:f,domain:[0,h],allowDataOverflow:!1}),x.jsx(Ud,{content:x.jsx(m,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),x.jsx(Ty,{dataKey:"value",radius:[4,4,0,0],label:x.jsx(y,{}),children:l.map((w,S)=>x.jsx(QL,{fill:w.color,style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:T=>{const C=document.querySelector(`[name="Bar-${S}"]`);C&&(C.style.filter="brightness(0.9)")},onMouseLeave:T=>{const C=document.querySelector(`[name="Bar-${S}"]`);C&&(C.style.filter="brightness(1)")}},`cell-${S}`))})]})})}),x.jsx(v,{})]})})}),hB=(n,e)=>{const t=n.timeSpent||0;return{id:n.id,userId:n.userId,projectId:n.projectId,name:n.title,description:n.description||"",completed:n.completed,totalFocusTime:t,createdAt:n.createdAt,status:n.status,timeSpent:n.timeSpent,timeEstimated:n.timeEstimated,order:n.order,hideFromPomodoro:n.hideFromPomodoro,updatedAt:n.updatedAt}},LZe=we.memo(()=>{const{workSessions:n,selectedRange:e}=yy(),{tasks:t,projects:r}=Vt(),{user:i}=Ht(),[a,o]=Y.useState(!1),[s,l]=Y.useState("none"),[c,u]=Y.useState(!1),d=Y.useRef(null);Y.useEffect(()=>{const T=C=>{d.current&&!d.current.contains(C.target)&&u(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const h=Y.useMemo(()=>t.map(T=>({id:T.id,title:T.title,description:T.description,projectId:T.projectId,userId:T.userId,status:T.status,completed:T.completed,order:T.order,timeSpent:T.timeSpent,timeEstimated:T.timeEstimated,createdAt:T.createdAt,updatedAt:T.updatedAt})),[t.map(T=>`${T.id}-${T.title}-${T.status}-${T.projectId}-${T.completed}`).join("|")]),f=Y.useMemo(()=>{if(e.rangeType==="all time"||!e.startDate||!e.endDate)return n;const T=new Date(e.startDate);T.setHours(0,0,0,0);const C=new Date(e.endDate);return C.setHours(23,59,59,999),n.filter(k=>{const A=new Date(k.date);return A>=T&&A<=C})},[n,e]),m=Y.useMemo(()=>{if(!i||f.length===0)return[];const T=f.filter(C=>C.sessionType==="pomodoro"||C.sessionType==="manual");if(s==="none"){const C=new Map;return T.forEach(k=>{const A=k.duration||0,D=C.get(k.taskId)||0;C.set(k.taskId,D+A)}),Array.from(C.entries()).map(([k,A])=>{const D=h.find(N=>N.id===k);return D?{...hB(D),totalFocusTime:A}:null}).filter(k=>k!==null&&k.totalFocusTime>0).sort((k,A)=>A.totalFocusTime-k.totalFocusTime)}else if(s==="date"){const C=new Map;T.forEach(D=>{const P=D.date,N=D.taskId,R=D.duration||0;C.has(P)||C.set(P,new Map);const L=C.get(P),B=L.get(N)||0;L.set(N,B+R)});const k=[];return Array.from(C.keys()).sort((D,P)=>P.localeCompare(D)).forEach(D=>{const P=C.get(D),N=new Date(D+"T00:00:00"),R=new Date;R.setHours(0,0,0,0);let L;if(N.toDateString()===R.toDateString())L="Today";else{const $=new Date(R);$.setDate(R.getDate()-1),N.toDateString()===$.toDateString()?L="Yesterday":L=N.toLocaleDateString("en-US",{month:"long",day:"numeric",year:N.getFullYear()!==R.getFullYear()?"numeric":void 0})}const B=Array.from(P.entries()).map(([$,G])=>{const W=h.find(X=>X.id===$);return W?{...hB(W),totalFocusTime:G,date:D,dateLabel:L}:null}).filter($=>$!==null&&$.totalFocusTime>0).sort(($,G)=>G.totalFocusTime-$.totalFocusTime);k.push(...B)}),k}else if(s==="project"){const C=new Map,k=new Map;T.forEach(P=>{const N=h.find(K=>K.id===P.taskId);if(!N)return;const R=N.projectId||"no-project",L=P.taskId,B=P.duration||0;C.has(R)||C.set(R,new Map);const $=C.get(R),G=$.get(L)||0;$.set(L,G+B);const W=k.get(R)||0;k.set(R,W+B)});const A=Array.from(k.entries()).sort((P,N)=>N[1]-P[1]).map(([P])=>P),D=[];return A.forEach(P=>{const N=C.get(P),R=r.find(G=>G.id===P),L=(R==null?void 0:R.name)||"No Project",B=k.get(P)||0,$=Array.from(N.entries()).map(([G,W])=>{const K=h.find(te=>te.id===G);return K?{...hB(K),totalFocusTime:W,projectName:L,projectTotalTime:B}:null}).filter(G=>G!==null&&G.totalFocusTime>0).sort((G,W)=>W.totalFocusTime-G.totalFocusTime);D.push(...$)}),D}return[]},[i,h,f,s,r]),v=()=>{switch(s){case"date":return{text:"Group by date",icon:"ri-calendar-line"};case"project":return{text:"Group by project",icon:"ri-folder-line"};default:return{text:"Group by",icon:"ri-function-line"}}},{text:y,icon:w}=v(),S=x.jsxs("div",{className:"relative",ref:d,children:[x.jsxs("button",{className:"flex items-center text-sm text-primary hover:text-primary-dark font-medium space-x-1",onClick:()=>u(!c),children:[x.jsx("span",{children:y}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:w})})]}),c&&x.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[x.jsxs("button",{className:`w-full px-4 py-2 text-left text-sm hover:bg-background-container flex items-center space-x-2 ${s==="none"?"text-text-primary bg-background-container":"text-text-primary"}`,onClick:()=>{l("none"),u(!1)},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:s==="none"&&x.jsx("i",{className:"ri-check-line"})}),x.jsx("span",{children:"No grouping"})]}),x.jsxs("button",{className:`w-full px-4 py-2 text-left text-sm hover:bg-background-container flex items-center space-x-2 ${s==="date"?"text-text-primary bg-background-container":"text-text-primary"}`,onClick:()=>{l("date"),u(!1)},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:s==="date"&&x.jsx("i",{className:"ri-check-line"})}),x.jsx("span",{children:"Group by date"})]}),x.jsxs("button",{className:`w-full px-4 py-2 text-left text-sm hover:bg-background-container flex items-center space-x-2 ${s==="project"?"text-text-primary bg-background-container":"text-text-primary"}`,onClick:()=>{l("project"),u(!1)},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:s==="project"&&x.jsx("i",{className:"ri-check-line"})}),x.jsx("span",{children:"Group by project"})]})]})]});return a?x.jsx(fg,{title:"Top Tasks",action:S,children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsx("div",{className:"text-center",children:x.jsx("p",{className:"text-text-secondary text-sm",children:"Loading tasks..."})})})}):m.length===0?x.jsx(fg,{title:"Top Tasks",action:S,children:x.jsx("div",{className:"flex items-center justify-center h-[360px]",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-text-secondary flex items-center justify-center",children:x.jsx("i",{className:"ri-calendar-event-line ri-2x"})}),x.jsx("p",{className:"text-text-secondary text-sm",children:"No tasks with focus time found"})]})})}):x.jsx(fg,{title:"Top Tasks",action:S,children:x.jsx("div",{className:"space-y-2 h-[360px] overflow-y-auto pr-1 scrollbar-thin",children:s==="none"?x.jsx("div",{className:"space-y-4",children:m.map((T,C)=>{const k=r.find(P=>P.id===T.projectId);if(!k)return null;const A=Af(T.totalFocusTime),D=h.find(P=>P.id===T.id);return D!=null&&D.completed||(D==null||D.status),x.jsx("div",{className:"flex items-start py-0",children:x.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[x.jsxs("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-background-container text-text-secondary text-sm font-medium mt-0.5",children:[C+1,"."]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h4",{className:"text-sm font-medium text-text-primary leading-relaxed mb-1",children:T.name}),x.jsxs("div",{className:"flex items-center space-x-1 text-xs text-text-secondary",children:[x.jsx("span",{children:k.name}),x.jsx("span",{children:"•"}),x.jsx("span",{children:A})]})]})]})},T.id)})}):s==="date"?(()=>{const T=new Map;return m.forEach(k=>{T.has(k.dateLabel)||T.set(k.dateLabel,[]),T.get(k.dateLabel).push(k)}),Array.from(new Set(m.map(k=>k.dateLabel))).map((k,A)=>{const D=T.get(k)||[];return x.jsxs("div",{className:"mb-8",children:[x.jsx("h3",{className:`text-sm font-medium text-text-primary mb-3 ${A===0?"mt-0":"mt-6"}`,children:k}),x.jsx("div",{className:"space-y-4",children:D.map((P,N)=>{const R=r.find($=>$.id===P.projectId);if(!R)return null;const L=Af(P.totalFocusTime),B=h.find($=>$.id===P.id);return B!=null&&B.completed||(B==null||B.status),x.jsx("div",{className:"flex items-start py-0",children:x.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[x.jsxs("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-background-container text-text-secondary text-sm font-medium mt-0.5",children:[N+1,"."]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h4",{className:"text-sm font-medium text-text-primary leading-relaxed mb-1",children:P.name}),x.jsxs("div",{className:"flex items-center space-x-1 text-xs text-text-secondary",children:[x.jsx("span",{children:R.name}),x.jsx("span",{children:"•"}),x.jsx("span",{children:L})]})]})]})},`${P.id}-${P.date}`)})})]},k)})})():s==="project"?(()=>{const T=new Map;return m.forEach(k=>{T.has(k.projectName)||T.set(k.projectName,[]),T.get(k.projectName).push(k)}),Array.from(new Set(m.map(k=>k.projectName))).map((k,A)=>{var L;const D=T.get(k)||[];(L=D[0])!=null&&L.projectTotalTime;const P=D[0],N=r.find(B=>B.id===(P==null?void 0:P.projectId)),R=(N==null?void 0:N.color)||"#6B7280";return x.jsxs("div",{className:"mb-8",children:[x.jsx("h3",{className:`text-sm font-medium mb-3 ${A===0?"mt-0":"mt-6"}`,style:{color:R},children:k}),x.jsx("div",{className:"space-y-4",children:D.map((B,$)=>{const G=Af(B.totalFocusTime),W=h.find(K=>K.id===B.id);return W!=null&&W.completed||(W==null||W.status),x.jsx("div",{className:"flex items-start py-0",children:x.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[x.jsxs("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-background-container text-text-secondary text-sm font-medium mt-0.5",children:[$+1,"."]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("h4",{className:"text-sm font-medium text-text-primary leading-relaxed mb-1",children:B.name}),x.jsx("div",{className:"flex items-center space-x-1 text-xs text-text-secondary",children:x.jsx("span",{children:G})})]})]})},B.id)})})]},k)})})():null})})}),jZe=({active:n,payload:e,label:t})=>{if(n&&e&&e.length){const r=e[0].value;return x.jsxs("div",{className:"bg-background-secondary p-3 border border-border rounded-lg shadow-lg",children:[x.jsx("p",{className:"font-medium text-text-primary",children:t}),x.jsxs("p",{className:"text-sm text-text-secondary",children:[x.jsx("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"}),"Focus Time: ",Af(r)]})]})}return null},FZe=we.memo(()=>{const{workSessions:n,focusTimeView:e,setFocusTimeView:t,selectedRange:r}=yy(),i=Y.useMemo(()=>{if(r.rangeType==="all time"||!r.startDate||!r.endDate)return n;const v=new Date(r.startDate);v.setHours(0,0,0,0);const y=new Date(r.endDate);return y.setHours(23,59,59,999),n.filter(w=>{const S=new Date(w.date);return S>=v&&S<=y})},[n,r]),a=v=>{let y;if(typeof v=="string"){if(v.includes("T"))return v.split("T")[0];if(v.match(/^\d{4}-\d{2}-\d{2}$/))return v;y=new Date(v)}else y=new Date(v);if(y&&!isNaN(y.getTime())){const w=y.getFullYear(),S=(y.getMonth()+1).toString().padStart(2,"0"),T=y.getDate().toString().padStart(2,"0");return`${w}-${S}-${T}`}return typeof v=="string"?v:v.toISOString().split("T")[0]},o=Y.useMemo(()=>{var v,y;if(!i.length)return[];try{const w={};i.filter(T=>T.sessionType==="pomodoro"||T.sessionType==="manual").forEach(T=>{const C=a(T.date),k=T.duration||0;w[C]||(w[C]=0),w[C]+=k}),console.log("Time by date aggregated:",w);const S=[];if(e==="daily"){let T,C;if(console.log("Daily view processing selectedRange:",{rangeType:r.rangeType,startDate:(v=r.startDate)==null?void 0:v.toISOString(),endDate:(y=r.endDate)==null?void 0:y.toISOString()}),r.rangeType==="all time")if(i.length>0){const A=[...new Set(i.map(D=>D.date))].map(D=>new Date(D)).sort((D,P)=>D.getTime()-P.getTime());T=new Date(A[0]),C=new Date(A[A.length-1]),console.log("All time daily - using actual data range:",{startDate:T.toISOString(),endDate:C.toISOString(),totalDates:A.length})}else C=new Date,T=new Date,T.setDate(C.getDate()-6);else r.startDate&&r.endDate?(T=new Date(r.startDate),C=new Date(r.endDate)):(C=new Date,r.rangeType==="last 30 days"?(T=new Date,T.setDate(C.getDate()-29)):r.rangeType==="last 7 days"?(T=new Date,T.setDate(C.getDate()-6)):r.rangeType==="today"?T=new Date:(T=new Date,T.setDate(C.getDate()-6)));T.setHours(0,0,0,0),C.setHours(23,59,59,999);const k=new Date(T);for(console.log("Daily view - generating days from:",T.toISOString(),"to:",C.toISOString());k<=C;){const A=a(k),D=k.toLocaleDateString("en-US",{month:"short",day:"numeric"}),P=w[A]||0;console.log(`Daily lookup: ${A} = ${P} minutes`),S.push({date:D,value:P,displayValue:P>0?Af(P):"0m"}),k.setDate(k.getDate()+1)}console.log("Daily view - generated days:",S.length,"days with data:",S.filter(A=>A.value>0).length)}else if(e==="weekly"){const T={};Object.entries(w).forEach(([D,P])=>{try{const N=new Date(D+"T00:00:00");if(isNaN(N.getTime())){console.warn("Invalid date:",D);return}const R=new Date(N),L=N.getDay(),B=L===0?6:L-1;R.setDate(N.getDate()-B),R.setHours(0,0,0,0);const $=R.toISOString().split("T")[0];T[$]||(T[$]=0),T[$]+=P}catch(N){console.error("Error processing date for weekly view:",D,N)}}),console.log("Weekly data aggregated:",T);let C=8,k=new Date,A=new Date;if(r.rangeType==="all time")if(i.length>0){const D=[...new Set(i.map(W=>W.date))].map(W=>new Date(W)).sort((W,K)=>W.getTime()-K.getTime()),P=D[0],N=D[D.length-1],R=P.getDay(),L=R===0?6:R-1;k=new Date(P),k.setDate(P.getDate()-L),k.setHours(0,0,0,0);const B=N.getDay(),$=B===0?6:B-1;A=new Date(N),A.setDate(N.getDate()-$),A.setHours(0,0,0,0);const G=Math.ceil((A.getTime()-k.getTime())/(1e3*60*60*24*7));C=Math.max(G+1,1),console.log("All time weekly view - calculated range:",{earliestDate:P.toISOString(),latestDate:N.toISOString(),startWeek:k.toISOString(),endWeek:A.toISOString(),weeksToShow:C})}else{C=8,A=new Date;const D=A.getDay(),P=D===0?6:D-1;A.setDate(A.getDate()-P),A.setHours(0,0,0,0),k=new Date(A),k.setDate(A.getDate()-(C-1)*7)}else if(r.startDate&&r.endDate){k=new Date(r.startDate),A=new Date(r.endDate);const D=k.getDay(),P=D===0?6:D-1;k.setDate(k.getDate()-P),k.setHours(0,0,0,0);const N=A.getDay(),R=N===0?6:N-1;A.setDate(A.getDate()-R),A.setHours(0,0,0,0);const L=Math.ceil((A.getTime()-k.getTime())/(1e3*60*60*24*7));C=Math.max(L+1,1)}else{C=8,A=new Date;const D=A.getDay(),P=D===0?6:D-1;A.setDate(A.getDate()-P),A.setHours(0,0,0,0),k=new Date(A),k.setDate(A.getDate()-(C-1)*7)}console.log("Weekly view - startWeek:",k,"endWeek:",A,"weeksToShow:",C);for(let D=0;D<C;D++){const P=new Date(k);P.setDate(k.getDate()+D*7),P.setHours(0,0,0,0);const N=new Date(P);N.setDate(P.getDate()+6);const R=P.toISOString().split("T")[0],L=T[R]||0;let B;try{const $=P.toLocaleDateString("en-US",{month:"short",day:"numeric"}),G=N.toLocaleDateString("en-US",{month:"short",day:"numeric"});B=`${$} - ${G}`}catch($){console.error("Date formatting error:",$),B=`Week ${D+1}`}S.push({date:B,value:L,displayValue:L>0?Af(L):"0m"})}}else if(e==="monthly"){const T={};Object.entries(w).forEach(([D,P])=>{const N=new Date(D+"T00:00:00");if(isNaN(N.getTime())){console.warn("Invalid date:",D);return}const R=`${N.getFullYear()}-${(N.getMonth()+1).toString().padStart(2,"0")}`;T[R]||(T[R]=0),T[R]+=P});let C=6,k=new Date,A=new Date;if(r.rangeType==="all time")if(i.length>0){const D=i.map(L=>new Date(L.date)),P=new Date(Math.min(...D.map(L=>L.getTime()))),N=new Date(Math.max(...D.map(L=>L.getTime())));k=new Date(P.getFullYear(),P.getMonth(),1),A=new Date(N.getFullYear(),N.getMonth(),1);const R=(A.getFullYear()-k.getFullYear())*12+(A.getMonth()-k.getMonth());C=Math.max(R+1,1)}else C=6,A=new Date,A=new Date(A.getFullYear(),A.getMonth(),1),k=new Date(A),k.setMonth(A.getMonth()-(C-1));else if(r.startDate&&r.endDate){k=new Date(r.startDate.getFullYear(),r.startDate.getMonth(),1),A=new Date(r.endDate.getFullYear(),r.endDate.getMonth(),1);const D=(A.getFullYear()-k.getFullYear())*12+(A.getMonth()-k.getMonth());C=Math.max(D+1,1)}else C=6,A=new Date,A=new Date(A.getFullYear(),A.getMonth(),1),k=new Date(A),k.setMonth(A.getMonth()-(C-1));console.log("Monthly view - startMonth:",k,"endMonth:",A,"monthsToShow:",C);for(let D=0;D<C;D++){const P=new Date(k);P.setMonth(k.getMonth()+D),P.setHours(0,0,0,0);const N=`${P.getFullYear()}-${(P.getMonth()+1).toString().padStart(2,"0")}`,R=T[N]||0;let L;try{L=P.toLocaleDateString("en-US",{month:"long",year:"numeric"})}catch(B){console.error("Date formatting error:",B),L=`Month ${D+1}`}S.push({date:L,value:R,displayValue:R>0?Af(R):"0m"})}}return S}catch(w){return console.error("Error processing chart data:",w),[]}},[i,e,r]),s=v=>{t(v)},l=()=>{const v=o.length;return v<=5?60:v<=8?50:v<=15?40:v<=31?30:v<=60?20:v<=90?15:10},c=()=>{const v=o.length;let y=0;return e==="daily"?v<=7?y=0:v<=14?y=1:v<=31?y=2:v<=60?y=4:v<=90?y=6:y=Math.floor(v/10):e==="weekly"?v<=8?y=0:v<=16?y=1:y=Math.floor(v/8):e==="monthly"&&(v<=12?y=0:y=Math.floor(v/12)),y},u=()=>20,d=()=>{const v=o.length;return e==="daily"||e==="weekly"||e==="monthly"?v>30:!1},h=()=>new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"}),f=v=>{const{x:y,y:w,width:S,height:T,value:C,index:k}=v;if(C===0)return null;const A=d(),D=Math.floor(C/60),P=C%60;let N=!1;if(e==="daily"&&typeof k=="number"&&o[k]){const L=o[k],B=h();N=L.date===B}let R="";return A&&!N?D===0?R=P>=30?"1h":"":R=`${P>=30?D+1:D}h`:D===0?R=`${P}m`:P===0?R=`${D}h`:R=`${D}h${P}m`,R?x.jsx("text",{x:y+S/2,y:w-5,fill:"var(--text-secondary)",textAnchor:"middle",fontSize:12,fontWeight:500,children:R}):null},m=x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="daily"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("daily"),children:"Daily"}),x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="weekly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("weekly"),children:"Weekly"}),x.jsx("button",{type:"button",className:`px-4 py-1.5 text-sm font-medium rounded-full ${e==="monthly"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>s("monthly"),children:"Monthly"})]});return x.jsx(fg,{title:"Focus Time Trend",action:m,children:x.jsx("div",{className:"h-[20rem]",children:o.length===0?x.jsx("div",{className:"flex items-center justify-center h-full",children:x.jsxs("div",{className:"text-center text-text-secondary",children:[x.jsx("p",{className:"text-lg font-medium mb-2",children:"No focus time data available"}),x.jsx("p",{className:"text-sm",children:"Start a timer to see your trends!"})]})}):x.jsx(O0e,{width:"100%",height:"100%",children:x.jsxs(Bwe,{data:o,margin:{top:30,right:20,left:15,bottom:u()},children:[x.jsx(UW,{strokeDasharray:"3 3",stroke:"var(--border-color)"}),x.jsx(FI,{dataKey:"date",axisLine:{stroke:"var(--border-color)"},tickLine:{stroke:"var(--border-color)"},tick:{fill:"var(--text-secondary)",fontSize:12},interval:c(),angle:0,textAnchor:"middle",height:25}),x.jsx($I,{axisLine:!1,tickLine:!1,tick:{fill:"var(--text-secondary)",fontSize:12},tickFormatter:v=>v<60?`${v}m`:`${Math.floor(v/60)}h`}),x.jsx(Ud,{content:x.jsx(jZe,{}),cursor:{fill:"rgba(0, 0, 0, 0.05)"},wrapperStyle:{outline:"none"}}),x.jsx(Ty,{dataKey:"value",radius:[6,6,0,0],minPointSize:2,barSize:l(),label:x.jsx(f,{}),children:o.map((v,y)=>x.jsx(QL,{fill:"#57B5E7",style:{filter:"brightness(1)",transition:"filter 0.2s"},onMouseEnter:w=>{const S=document.querySelector(`[name="Bar-${y}"]`);S&&(S.style.filter="brightness(0.9)")},onMouseLeave:w=>{const S=document.querySelector(`[name="Bar-${y}"]`);S&&(S.style.filter="brightness(1)")}},`cell-${y}`))})]})})})})}),$Ze=()=>{const{loadWorkSessionsForRange:n,selectedRange:e,useEventDrivenLoading:t}=yy(),{user:r,isAuthenticated:i}=Ht();return Y.useEffect(()=>{i&&r&&t&&(console.log("DashboardContent - Component mounted, loading data for current range"),n(r.uid,e))},[i,r==null?void 0:r.uid,n,e,t]),x.jsxs("div",{className:"space-y-8 w-full max-w-none",children:[x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-10 gap-8",children:[x.jsx("div",{className:"lg:col-span-3",children:x.jsx(H4e,{})}),x.jsx("div",{className:"lg:col-span-7",children:x.jsx(r$e,{})})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[x.jsx(OZe,{}),x.jsx(LZe,{})]}),x.jsx("div",{className:"w-full",children:x.jsx(FZe,{})})]})},BZe=()=>x.jsx("div",{className:"w-full max-w-7xl mx-auto",children:x.jsx($Ze,{})}),dl=uh()(DI(n=>({isLeftSidebarOpen:!1,isRightSidebarOpen:!0,rightSidebarWidth:480,isHelpModalOpen:!1,isSettingsModalOpen:!1,isFocusMode:!1,activeHelpTab:"pomodoro",toastMessage:null,toggleLeftSidebar:()=>n(e=>({isLeftSidebarOpen:!e.isLeftSidebarOpen})),toggleRightSidebar:()=>n(e=>({isRightSidebarOpen:!e.isRightSidebarOpen})),setRightSidebarWidth:e=>n({rightSidebarWidth:e}),toggleHelpModal:()=>n(e=>({isHelpModalOpen:!e.isHelpModalOpen})),toggleSettingsModal:()=>n(e=>({isSettingsModalOpen:!e.isSettingsModalOpen})),toggleFocusMode:()=>n(e=>({isFocusMode:!e.isFocusMode})),setActiveHelpTab:e=>n({activeHelpTab:e}),showToast:e=>{n({toastMessage:e}),setTimeout(()=>{n(t=>t.toastMessage===e?{toastMessage:null}:{})},3e3)},hideToast:()=>n({toastMessage:null})}),{name:"ui-store",partialize:n=>({rightSidebarWidth:n.rightSidebarWidth,isLeftSidebarOpen:n.isLeftSidebarOpen,isRightSidebarOpen:n.isRightSidebarOpen})}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZe{constructor(e,t){this._delegate=e,this.firebase=t,TC(e,new zc("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),l8(this._delegate)))}_getService(e,t=ty){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=ty){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){TC(this._delegate,e)}_addOrOverwriteComponent(e){ppe(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZe={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},zie=new $g("app-compat","Firebase",VZe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZe(n){const e={},t={__esModule:!0,initializeApp:a,app:i,registerVersion:Ms,setLogLevel:ype,onLog:vpe,apps:null,SDK_VERSION:my,INTERNAL:{registerComponent:s,removeApp:r,useAsService:l,modularAPIs:bMe}};t.default=t,Object.defineProperty(t,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||ty,!xX(e,c))throw zie.create("no-app",{appName:c});return e[c]}i.App=n;function a(c,u={}){const d=oL(c,u);if(xX(e,d.name))return e[d.name];const h=new n(d,t);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function s(c){const u=c.name,d=u.replace("-compat","");if(Gu(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw zie.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&jR(h,c.serviceProps),t[d]=h,n.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?t[d]:null}function l(c,u){return u==="serverAuth"?null:u}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uwe(){const n=zZe(UZe);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Uwe,extendNamespace:e,createSubscribe:lpe,ErrorFactory:$g,deepExtend:jR});function e(t){jR(n,t)}return n}const HZe=Uwe();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie=new aI("@firebase/app-compat"),GZe="@firebase/app-compat",WZe="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZe(n){Ms(GZe,WZe,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=tpe();if(n.firebase!==void 0){Hie.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Hie.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const en=HZe;qZe();var YZe="firebase",KZe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.registerVersion(YZe,KZe,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XZe=2e3;async function ZZe(n,e,t){var r;const{BuildInfo:i}=Mw();ah(e.sessionId,"AuthEvent did not contain a session ID");const a=await nQe(e.sessionId),o={};return wI()?o.ibi=i.packageName:bI()?o.apn=i.packageName:Po(n,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=a,KV(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function QZe(n){const{BuildInfo:e}=Mw(),t={};wI()?t.iosBundleId=e.packageName:bI()?t.androidPackageName=e.packageName:Po(n,"operation-not-supported-in-this-environment"),await xve(n,t)}function JZe(n){const{cordova:e}=Mw();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,$Re()?"_blank":"_system","location=yes"),t(i)})})}async function eQe(n,e,t){const{cordova:r}=Mw();let i=()=>{};try{await new Promise((a,o)=>{let s=null;function l(){var d;a();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function c(){s||(s=window.setTimeout(()=>{o(co(n,"redirect-cancelled-by-user"))},XZe))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),bI()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),s&&window.clearTimeout(s)}})}finally{i()}}function tQe(n){var e,t,r,i,a,o,s,l,c,u;const d=Mw();at(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),at(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),at(typeof((a=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),at(typeof((l=(s=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||s===void 0?void 0:s.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),at(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function nQe(n){const e=rQe(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function rQe(n){if(ah(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQe=20;class aQe extends bve{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function oQe(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:cQe(),postBody:null,tenantId:n.tenantId,error:co(n,"no-auth-event")}}function sQe(n,e){return w9()._set(x9(n),e)}async function Gie(n){const e=await w9()._get(x9(n));return e&&await w9()._remove(x9(n)),e}function lQe(n,e){var t,r;const i=dQe(e);if(i.includes("/__/auth/callback")){const a=oR(i),o=a.firebaseError?uQe(decodeURIComponent(a.firebaseError)):null,s=(r=(t=o==null?void 0:o.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],l=s?co(s):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function cQe(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<iQe;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function w9(){return Lc(rT)}function x9(n){return iw("authEvent",n.config.apiKey,n.name)}function uQe(n){try{return JSON.parse(n)}catch{return null}}function dQe(n){const e=oR(n),t=e.link?decodeURIComponent(e.link):void 0,r=oR(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return oR(i).link||i||r||t||n}function oR(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return E_(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQe=500;class fQe{constructor(){this._redirectPersistence=Ag,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=PL,this._overrideRedirectResult=m7}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new aQe(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Po(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){tQe(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),_2e(),await this._originValidation(e);const o=oQe(e,r,i);await sQe(e,o);const s=await ZZe(e,o,t),l=await JZe(s);return eQe(e,a,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QZe(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=Mw(),o=setTimeout(async()=>{await Gie(e),t.onEvent(Wie())},hQe),s=async u=>{clearTimeout(o);const d=await Gie(e);let h=null;d&&(u!=null&&u.url)&&(h=lQe(d,u.url)),t.onEvent(h||Wie())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,s);const l=i,c=`${a.packageName.toLowerCase()}://`;Mw().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&s({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const pQe=fQe;function Wie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:co("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQe(n,e){$i(n)._logFramework(e)}var mQe="@firebase/auth-compat",vQe="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQe=1e3;function Zk(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function bQe(){return Zk()==="http:"||Zk()==="https:"}function Vwe(n=Wa()){return!!((Zk()==="file:"||Zk()==="ionic:"||Zk()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function wQe(){return a8()||r8()}function xQe(){return ope()&&(document==null?void 0:document.documentMode)===11}function SQe(n=Wa()){return/Edge\/\d+/.test(n)}function _Qe(n=Wa()){return xQe()||SQe(n)}function zwe(){try{const n=self.localStorage,e=TI();if(n)return n.setItem(e,"1"),n.removeItem(e),_Qe()?SC():!0}catch{return VW()&&SC()}return!1}function VW(){return typeof globalThis<"u"&&"WorkerGlobalScope"in globalThis&&"importScripts"in globalThis}function fB(){return(bQe()||i8()||Vwe())&&!wQe()&&zwe()&&!VW()}function Hwe(){return Vwe()&&typeof document<"u"}async function TQe(){return Hwe()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},yQe);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function EQe(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={LOCAL:"local",NONE:"none",SESSION:"session"},AA=at,Gwe="persistence";function AQe(n,e){if(AA(Object.values(Ic).includes(e),n,"invalid-persistence-type"),a8()){AA(e!==Ic.SESSION,n,"unsupported-persistence-type");return}if(r8()){AA(e===Ic.NONE,n,"unsupported-persistence-type");return}if(VW()){AA(e===Ic.NONE||e===Ic.LOCAL&&SC(),n,"unsupported-persistence-type");return}AA(e===Ic.NONE||zwe(),n,"unsupported-persistence-type")}async function S9(n){await n._initializationPromise;const e=Wwe(),t=iw(Gwe,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function kQe(n,e){const t=Wwe();if(!t)return[];const r=iw(Gwe,n,e);switch(t.getItem(r)){case Ic.NONE:return[Sw];case Ic.LOCAL:return[_w,Ag];case Ic.SESSION:return[Ag];default:return[]}}function Wwe(){var n;try{return((n=EQe())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQe=at;class Ov{constructor(){this.browserResolver=Lc(v7),this.cordovaResolver=Lc(pQe),this.underlyingResolver=null,this._redirectPersistence=Ag,this._completeRedirectFn=PL,this._overrideRedirectResult=m7}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Hwe()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return CQe(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await TQe();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qwe(n){return n.unwrap()}function DQe(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQe(n){return Ywe(n)}function MQe(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new PQe(n,Yme(n,e))}else if(r){const i=Ywe(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Ywe(n){const{_tokenResponse:e}=n instanceof Ko?n.customData:n;if(!e)return null;if(!(n instanceof Ko)&&"temporaryProof"in e&&"phoneNumber"in e)return oy.credentialFromResult(n);const t=e.providerId;if(!t||t===m_.PASSWORD)return null;let r;switch(t){case m_.GOOGLE:r=Ou;break;case m_.FACEBOOK:r=Hd;break;case m_.GITHUB:r=Gd;break;case m_.TWITTER:r=Wd;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:o,pendingToken:s,nonce:l}=e;return!a&&!o&&!i&&!s?null:s?t.startsWith("saml.")?g1._create(t,s):oh._fromParams({providerId:t,signInMethod:t,pendingToken:s,idToken:i,accessToken:a}):new aw(t).credential({idToken:i,accessToken:a,rawNonce:l})}return n instanceof Ko?r.credentialFromError(n):r.credentialFromResult(n)}function jl(n,e){return e.catch(t=>{throw t instanceof Ko&&MQe(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:IQe(t),additionalUserInfo:Vme(t),user:ag.getOrCreate(i)}})}async function _9(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>jl(n,t.confirm(r))}}class PQe{constructor(e,t){this.resolver=t,this.auth=DQe(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return jl(qwe(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._delegate=e,this.multiFactor=Kme(e)}static getOrCreate(e){return ag.USER_MAP.has(e)||ag.USER_MAP.set(e,new ag(e)),ag.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return jl(this.auth,i7(this._delegate,e))}async linkWithPhoneNumber(e,t){return _9(this.auth,ave(this._delegate,e,t))}async linkWithPopup(e){return jl(this.auth,dve(this._delegate,e,Ov))}async linkWithRedirect(e){return await S9($i(this.auth)),mve(this._delegate,e,Ov)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return jl(this.auth,a7(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return _9(this.auth,ove(this._delegate,e,t))}reauthenticateWithPopup(e){return jl(this.auth,uve(this._delegate,e,Ov))}async reauthenticateWithRedirect(e){return await S9($i(this.auth)),gve(this._delegate,e,Ov)}sendEmailVerification(e){return Ome(this._delegate,e)}async unlink(e){return await xme(this._delegate,e),this}updateEmail(e){return Fme(this._delegate,e)}updatePassword(e){return $me(this._delegate,e)}updatePhoneNumber(e){return sve(this._delegate,e)}updateProfile(e){return jme(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Lme(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ag.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=at;class T9{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;kA(r,"invalid-api-key",{appName:e.name}),kA(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ov:void 0;this._delegate=t.initialize({options:{persistence:NQe(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Gge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ag.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){n7(this._delegate,e,t)}applyActionCode(e){return kme(this._delegate,e)}checkActionCode(e){return c7(this._delegate,e)}confirmPasswordReset(e,t){return Ame(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return jl(this._delegate,Dme(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Rme(this._delegate,e)}isSignInWithEmailLink(e){return Pme(this._delegate,e)}async getRedirectResult(){kA(fB(),this._delegate,"operation-not-supported-in-this-environment");const e=await vve(this._delegate,Ov);return e?jl(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){gQe(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:a,complete:o}=qie(e,t,r);return this._delegate.onAuthStateChanged(i,a,o)}onIdTokenChanged(e,t,r){const{next:i,error:a,complete:o}=qie(e,t,r);return this._delegate.onIdTokenChanged(i,a,o)}sendSignInLinkToEmail(e,t){return Mme(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Eme(this._delegate,e,t||void 0)}async setPersistence(e){AQe(this._delegate,e);let t;switch(e){case Ic.SESSION:t=Ag;break;case Ic.LOCAL:t=await Lc(_w)._isAvailable()?_w:rT;break;case Ic.NONE:t=Sw;break;default:return Po("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return jl(this._delegate,yme(this._delegate))}signInWithCredential(e){return jl(this._delegate,SI(this._delegate,e))}signInWithCustomToken(e){return jl(this._delegate,Tme(this._delegate,e))}signInWithEmailAndPassword(e,t){return jl(this._delegate,Ime(this._delegate,e,t))}signInWithEmailLink(e,t){return jl(this._delegate,Nme(this._delegate,e,t))}signInWithPhoneNumber(e,t){return _9(this._delegate,ive(this._delegate,e,t))}async signInWithPopup(e){return kA(fB(),this._delegate,"operation-not-supported-in-this-environment"),jl(this._delegate,cve(this._delegate,e,Ov))}async signInWithRedirect(e){return kA(fB(),this._delegate,"operation-not-supported-in-this-environment"),await S9(this._delegate),pve(this._delegate,e,Ov)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return Cme(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}T9.Persistence=Ic;function qie(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:o=>i(o&&ag.getOrCreate(o)),error:e,complete:t}}function NQe(n,e){const t=kQe(n,e);if(typeof self<"u"&&!t.includes(_w)&&t.push(_w),typeof window<"u")for(const r of[rT,Ag])t.includes(r)||t.push(r);return t.includes(Sw)||t.push(Sw),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(){this.providerId="phone",this._delegate=new oy(qwe(en.auth()))}static credential(e,t){return oy.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}zW.PHONE_SIGN_IN_METHOD=oy.PHONE_SIGN_IN_METHOD;zW.PROVIDER_ID=oy.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQe=at;class OQe{constructor(e,t,r=en.app()){var i;RQe((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new rve(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQe="auth-compat";function jQe(n){n.INTERNAL.registerComponent(new zc(LQe,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new T9(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Sb.EMAIL_SIGNIN,PASSWORD_RESET:Sb.PASSWORD_RESET,RECOVER_EMAIL:Sb.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Sb.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Sb.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Sb.VERIFY_EMAIL}},EmailAuthProvider:zg,FacebookAuthProvider:Hd,GithubAuthProvider:Gd,GoogleAuthProvider:Ou,OAuthProvider:aw,SAMLAuthProvider:FC,PhoneAuthProvider:zW,PhoneMultiFactorGenerator:b7,RecaptchaVerifier:OQe,TwitterAuthProvider:Wd,Auth:T9,AuthCredential:Hw,Error:Ko}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(mQe,vQe)}jQe(en);var pB={exports:{}},Yie;function FQe(){return Yie||(Yie=1,function(n){(function(){var e=window.CustomEvent;(!e||typeof e=="object")&&(e=function(y,w){w=w||{};var S=document.createEvent("CustomEvent");return S.initCustomEvent(y,!!w.bubbles,!!w.cancelable,w.detail||null),S},e.prototype=window.Event.prototype);function t(v){for(;v&&v!==document.body;){var y=window.getComputedStyle(v),w=function(S,T){return!(y[S]===void 0||y[S]===T)};if(y.opacity<1||w("zIndex","auto")||w("transform","none")||w("mixBlendMode","normal")||w("filter","none")||w("perspective","none")||y.isolation==="isolate"||y.position==="fixed"||y.webkitOverflowScrolling==="touch")return!0;v=v.parentElement}return!1}function r(v){for(;v;){if(v.localName==="dialog")return v;v=v.parentElement}return null}function i(v){v&&v.blur&&v!==document.body&&v.blur()}function a(v,y){for(var w=0;w<v.length;++w)if(v[w]===y)return!0;return!1}function o(v){return!v||!v.hasAttribute("method")?!1:v.getAttribute("method").toLowerCase()==="dialog"}function s(v){if(this.dialog_=v,this.replacedStyleTop_=!1,this.openAsModal_=!1,v.hasAttribute("role")||v.setAttribute("role","dialog"),v.show=this.show.bind(this),v.showModal=this.showModal.bind(this),v.close=this.close.bind(this),"returnValue"in v||(v.returnValue=""),"MutationObserver"in window){var y=new MutationObserver(this.maybeHideModal.bind(this));y.observe(v,{attributes:!0,attributeFilter:["open"]})}else{var w=!1,S=(function(){w?this.downgradeModal():this.maybeHideModal(),w=!1}).bind(this),T,C=function(k){if(k.target===v){var A="DOMNodeRemoved";w|=k.type.substr(0,A.length)===A,window.clearTimeout(T),T=window.setTimeout(S,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(k){v.addEventListener(k,C)})}Object.defineProperty(v,"open",{set:this.setOpen.bind(this),get:v.hasAttribute.bind(v,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}s.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(v){v?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(v){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var y=document.createElement("div");this.dialog_.insertBefore(y,this.dialog_.firstChild),y.tabIndex=-1,y.focus(),this.dialog_.removeChild(y)}var w=document.createEvent("MouseEvents");w.initMouseEvent(v.type,v.bubbles,v.cancelable,window,v.detail,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,v.relatedTarget),this.dialog_.dispatchEvent(w),v.stopPropagation()},focus_:function(){var v=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!v&&this.dialog_.tabIndex>=0&&(v=this.dialog_),!v){var y=["button","input","keygen","select","textarea"],w=y.map(function(S){return S+":not([disabled])"});w.push('[tabindex]:not([disabled]):not([tabindex=""])'),v=this.dialog_.querySelector(w.join(", "))}i(document.activeElement),v&&v.focus()},updateZIndex:function(v,y){if(v<y)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=v,this.backdrop_.style.zIndex=y},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");t(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(v){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),v!==void 0&&(this.dialog_.returnValue=v);var y=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(y)}};var l={};if(l.reposition=function(v){var y=document.body.scrollTop||document.documentElement.scrollTop,w=y+(window.innerHeight-v.offsetHeight)/2;v.style.top=Math.max(y,w)+"px"},l.isInlinePositionSetByStylesheet=function(v){for(var y=0;y<document.styleSheets.length;++y){var w=document.styleSheets[y],S=null;try{S=w.cssRules}catch{}if(S)for(var T=0;T<S.length;++T){var C=S[T],k=null;try{k=document.querySelectorAll(C.selectorText)}catch{}if(!(!k||!a(k,v))){var A=C.style.getPropertyValue("top"),D=C.style.getPropertyValue("bottom");if(A&&A!=="auto"||D&&D!=="auto")return!0}}}return!1},l.needsCentering=function(v){var y=window.getComputedStyle(v);return y.position!=="absolute"||v.style.top!=="auto"&&v.style.top!==""||v.style.bottom!=="auto"&&v.style.bottom!==""?!1:!l.isInlinePositionSetByStylesheet(v)},l.forceRegisterDialog=function(v){if((window.HTMLDialogElement||v.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",v),v.localName!=="dialog")throw new Error("Failed to register dialog: The element is not a dialog.");new s(v)},l.registerDialog=function(v){v.showModal||l.forceRegisterDialog(v)},l.DialogManager=function(){this.pendingDialogStack=[];var v=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",(function(y){this.forwardTab_=void 0,y.stopPropagation(),v([])}).bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(y){var w=[];y.forEach(function(S){for(var T=0,C;C=S.removedNodes[T];++T){if(C instanceof Element)C.localName==="dialog"&&w.push(C);else continue;w=w.concat(C.querySelectorAll("dialog"))}}),w.length&&v(w)}))},l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var v=this.zIndexHigh_,y=0,w;w=this.pendingDialogStack[y];++y)w.updateZIndex(--v,--v),y===0&&(this.overlay.style.zIndex=--v);var S=this.pendingDialogStack[0];if(S){var T=S.dialog.parentNode||document.body;T.appendChild(this.overlay)}else this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(v){for(;v=r(v);){for(var y=0,w;w=this.pendingDialogStack[y];++y)if(w.dialog===v)return y===0;v=v.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(v){if(!this.containedByTopDialog_(v.target)&&(v.preventDefault(),v.stopPropagation(),i(v.target),this.forwardTab_!==void 0)){var y=this.pendingDialogStack[0],w=y.dialog,S=w.compareDocumentPosition(v.target);return S&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?y.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(v){if(this.forwardTab_=void 0,v.keyCode===27){v.preventDefault(),v.stopPropagation();var y=new e("cancel",{bubbles:!1,cancelable:!0}),w=this.pendingDialogStack[0];w&&w.dialog.dispatchEvent(y)&&w.dialog.close()}else v.keyCode===9&&(this.forwardTab_=!v.shiftKey)},l.DialogManager.prototype.checkDOM_=function(v){var y=this.pendingDialogStack.slice();y.forEach(function(w){v.indexOf(w.dialog)!==-1?w.downgradeModal():w.maybeHideModal()})},l.DialogManager.prototype.pushDialog=function(v){var y=(this.zIndexHigh_-this.zIndexLow_)/2-1;return this.pendingDialogStack.length>=y?!1:(this.pendingDialogStack.unshift(v)===1&&this.blockDocument(),this.updateStacking(),!0)},l.DialogManager.prototype.removeDialog=function(v){var y=this.pendingDialogStack.indexOf(v);y!==-1&&(this.pendingDialogStack.splice(y,1),this.pendingDialogStack.length===0&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,window.HTMLDialogElement===void 0){var c=document.createElement("form");if(c.setAttribute("method","dialog"),c.method!=="dialog"){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var d=u.get;u.get=function(){return o(this)?"dialog":d.call(this)};var h=u.set;u.set=function(v){return typeof v=="string"&&v.toLowerCase()==="dialog"?this.setAttribute("method",v):h.call(this,v)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",function(v){if(l.formSubmitter=null,l.useValue=null,!v.defaultPrevented){var y=v.target;if(!(!y||!o(y.form))){var w=y.type==="submit"&&["button","input"].indexOf(y.localName)>-1;if(!w){if(!(y.localName==="input"&&y.type==="image"))return;l.useValue=v.offsetX+","+v.offsetY}var S=r(y);S&&(l.formSubmitter=y)}}},!1);var f=HTMLFormElement.prototype.submit,m=function(){if(!o(this))return f.call(this);var v=r(this);v&&v.close()};HTMLFormElement.prototype.submit=m,document.addEventListener("submit",function(v){var y=v.target;if(o(y)){v.preventDefault();var w=r(y);if(w){var S=l.formSubmitter;S&&S.form===y?w.close(l.useValue||S.value):w.close(),l.formSubmitter=null}}},!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,typeof n.exports=="object"?n.exports=l:window.dialogPolyfill=l})()}(pB)),pB.exports}var $Qe=FQe();const BQe=Lr($Qe);var Kie={};/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xie;function UQe(){if(Xie)return Kie;Xie=1;var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};return n=function(){var e=[],t=[],r="mdlComponentConfigInternal_";function i(y,w){for(var S=0;S<e.length;S++)if(e[S].className===y)return typeof w<"u"&&(e[S]=w),e[S];return!1}function a(y){var w=y.getAttribute("data-upgraded");return w===null?[""]:w.split(",")}function o(y,w){var S=a(y);return S.indexOf(w)!==-1}function s(y,w,S){if("CustomEvent"in window&&typeof window.CustomEvent=="function")return new CustomEvent(y,{bubbles:w,cancelable:S});var T=document.createEvent("Events");return T.initEvent(y,w,S),T}function l(y,w){if(typeof y>"u"&&typeof w>"u")for(var S=0;S<e.length;S++)l(e[S].className,e[S].cssClass);else{var T=y;if(typeof w>"u"){var C=i(T);C&&(w=C.cssClass)}for(var k=document.querySelectorAll("."+w),A=0;A<k.length;A++)c(k[A],T)}}function c(y,w){if(!(typeof y=="object"&&y instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var S=s("mdl-componentupgrading",!0,!0);if(y.dispatchEvent(S),!S.defaultPrevented){var T=a(y),C=[];if(w)o(y,w)||C.push(i(w));else{var k=y.classList;e.forEach(function($){k.contains($.cssClass)&&C.indexOf($)===-1&&!o(y,$.className)&&C.push($)})}for(var A=0,D=C.length,P;A<D;A++){if(P=C[A],P){T.push(P.className),y.setAttribute("data-upgraded",T.join(","));var N=new P.classConstructor(y);N[r]=P,t.push(N);for(var R=0,L=P.callbacks.length;R<L;R++)P.callbacks[R](y);P.widget&&(y[P.className]=N)}else throw new Error("Unable to find a registered component for the given class.");var B=s("mdl-componentupgraded",!0,!1);y.dispatchEvent(B)}}}function u(y){Array.isArray(y)||(y instanceof Element?y=[y]:y=Array.prototype.slice.call(y));for(var w=0,S=y.length,T;w<S;w++)T=y[w],T instanceof HTMLElement&&(c(T),T.children.length>0&&u(T.children))}function d(y){var w=typeof y.widget>"u"&&typeof y.widget>"u",S=!0;w||(S=y.widget||y.widget);var T={classConstructor:y.constructor||y.constructor,className:y.classAsString||y.classAsString,cssClass:y.cssClass||y.cssClass,widget:S,callbacks:[]};if(e.forEach(function(k){if(k.cssClass===T.cssClass)throw new Error("The provided cssClass has already been registered: "+k.cssClass);if(k.className===T.className)throw new Error("The provided className has already been registered")}),y.constructor.prototype.hasOwnProperty(r))throw new Error("MDL component classes must not have "+r+" defined as a property.");var C=i(y.classAsString,T);C||e.push(T)}function h(y,w){var S=i(y);S&&S.callbacks.push(w)}function f(){for(var y=0;y<e.length;y++)l(e[y].className)}function m(y){if(y){var w=t.indexOf(y);t.splice(w,1);var S=y.element_.getAttribute("data-upgraded").split(","),T=S.indexOf(y[r].classAsString);S.splice(T,1),y.element_.setAttribute("data-upgraded",S.join(","));var C=s("mdl-componentdowngraded",!0,!1);y.element_.dispatchEvent(C)}}function v(y){var w=function(T){t.filter(function(C){return C.element_===T}).forEach(m)};if(y instanceof Array||y instanceof NodeList)for(var S=0;S<y.length;S++)w(y[S]);else if(y instanceof Node)w(y);else throw new Error("Invalid argument provided to downgrade MDL nodes.")}return{upgradeDom:l,upgradeElement:c,upgradeElements:u,upgradeAllRegistered:f,registerUpgradedCallback:h,register:d,downgradeElements:v}}(),n.ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Kie}UQe();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(e){e&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialProgress=n,n.prototype.Constant_={},n.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},n.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},n.prototype.setProgress=n.prototype.setProgress,n.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},n.prototype.setBuffer=n.prototype.setBuffer,n.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.init()};window.MaterialSpinner=n,n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),a.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[r,i,a],s=0;s<o.length;s++){var l=document.createElement("div");l.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[s].appendChild(l)}t.appendChild(r),t.appendChild(i),t.appendChild(a),this.element_.appendChild(t)},n.prototype.createLayer=n.prototype.createLayer,n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.stop=n.prototype.stop,n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.start=n.prototype.start,n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})();/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){var n=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=n,n.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},n.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},n.prototype.onKeyDown_=function(e){var t=e.target.value.split(`
`).length;e.keyCode===13&&t>=this.maxRows&&e.preventDefault()},n.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},n.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.onReset_=function(e){this.updateClasses_()},n.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},n.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},n.prototype.checkDisabled=n.prototype.checkDisabled,n.prototype.checkFocus=function(){this.element_.querySelector(":focus")?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.checkFocus=n.prototype.checkFocus,n.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},n.prototype.checkValidity=n.prototype.checkValidity,n.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},n.prototype.checkDirty=n.prototype.checkDirty,n.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},n.prototype.enable=n.prototype.enable,n.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},n.prototype.change=n.prototype.change,n.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:n,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})();(function(){(function(){var n,e=typeof Object.create=="function"?Object.create:function(p){function _(){}return _.prototype=p,new _},t;if(typeof Object.setPrototypeOf=="function")t=Object.setPrototypeOf;else{var r;e:{var i={xb:!0},a={};try{a.__proto__=i,r=a.xb;break e}catch{}r=!1}t=r?function(p,_){if(p.__proto__=_,p.__proto__!==_)throw new TypeError(p+" is not extensible");return p}:null}var o=t;function s(p,_){if(p.prototype=e(_.prototype),p.prototype.constructor=p,o)o(p,_);else for(var I in _)if(I!="prototype")if(Object.defineProperties){var j=Object.getOwnPropertyDescriptor(_,I);j&&Object.defineProperty(p,I,j)}else p[I]=_[I];p.K=_.prototype}var l=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,I){p!=Array.prototype&&p!=Object.prototype&&(p[_]=I.value)},c=typeof window<"u"&&window===this?this:typeof globalThis<"u"&&globalThis!=null?globalThis:this;function u(p,_){if(_){var I=c;p=p.split(".");for(var j=0;j<p.length-1;j++){var V=p[j];V in I||(I[V]={}),I=I[V]}p=p[p.length-1],j=I[p],_=_(j),_!=j&&_!=null&&l(I,p,{configurable:!0,writable:!0,value:_})}}u("Object.is",function(p){return p||function(_,I){return _===I?_!==0||1/_===1/I:_!==_&&I!==I}}),u("Array.prototype.includes",function(p){return p||function(_,I){var j=this;j instanceof String&&(j=String(j));var V=j.length;for(I=I||0,0>I&&(I=Math.max(I+V,0));I<V;I++){var H=j[I];if(H===_||Object.is(H,_))return!0}return!1}});var d=this;function h(p){return p!==void 0}function f(p){return typeof p=="string"}var m=/^[\w+/_-]+[=]{0,2}$/,v=null;function y(){}function w(p){p.W=void 0,p.Xa=function(){return p.W?p.W:p.W=new p}}function S(p){var _=typeof p;if(_=="object")if(p){if(p instanceof Array)return"array";if(p instanceof Object)return _;var I=Object.prototype.toString.call(p);if(I=="[object Window]")return"object";if(I=="[object Array]"||typeof p.length=="number"&&typeof p.splice<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("splice"))return"array";if(I=="[object Function]"||typeof p.call<"u"&&typeof p.propertyIsEnumerable<"u"&&!p.propertyIsEnumerable("call"))return"function"}else return"null";else if(_=="function"&&typeof p.call>"u")return"object";return _}function T(p){return S(p)=="array"}function C(p){var _=S(p);return _=="array"||_=="object"&&typeof p.length=="number"}function k(p){return S(p)=="function"}function A(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function D(p,_,I){return p.call.apply(p.bind,arguments)}function P(p,_,I){if(!p)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,j),p.apply(_,V)}}return function(){return p.apply(_,arguments)}}function N(p,_,I){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N=D:N=P,N.apply(null,arguments)}function R(p,_){var I=Array.prototype.slice.call(arguments,1);return function(){var j=I.slice();return j.push.apply(j,arguments),p.apply(this,j)}}function L(p,_){for(var I in _)p[I]=_[I]}var B=Date.now||function(){return+new Date};function $(p,_){p=p.split(".");var I=d;p[0]in I||typeof I.execScript>"u"||I.execScript("var "+p[0]);for(var j;p.length&&(j=p.shift());)!p.length&&h(_)?I[j]=_:I[j]&&I[j]!==Object.prototype[j]?I=I[j]:I=I[j]={}}function G(p,_){function I(){}I.prototype=_.prototype,p.K=_.prototype,p.prototype=new I,p.prototype.constructor=p,p.vc=function(j,V,H){for(var re=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)re[ue-2]=arguments[ue];return _.prototype[V].apply(j,re)}}function W(p){if(Error.captureStackTrace)Error.captureStackTrace(this,W);else{var _=Error().stack;_&&(this.stack=_)}p&&(this.message=String(p))}G(W,Error),W.prototype.name="CustomError";var K;function X(p,_){p=p.split("%s");for(var I="",j=p.length-1,V=0;V<j;V++)I+=p[V]+(V<_.length?_[V]:"%s");W.call(this,I+p[j])}G(X,W),X.prototype.name="AssertionError";function te(p,_){throw new X("Failure"+(p?": "+p:""),Array.prototype.slice.call(arguments,1))}var ie=Array.prototype.indexOf?function(p,_){return Array.prototype.indexOf.call(p,_,void 0)}:function(p,_){if(f(p))return f(_)&&_.length==1?p.indexOf(_,0):-1;for(var I=0;I<p.length;I++)if(I in p&&p[I]===_)return I;return-1},z=Array.prototype.forEach?function(p,_,I){Array.prototype.forEach.call(p,_,I)}:function(p,_,I){for(var j=p.length,V=f(p)?p.split(""):p,H=0;H<j;H++)H in V&&_.call(I,V[H],H,p)};function se(p,_){for(var I=f(p)?p.split(""):p,j=p.length-1;0<=j;--j)j in I&&_.call(void 0,I[j],j,p)}var ce=Array.prototype.filter?function(p,_){return Array.prototype.filter.call(p,_,void 0)}:function(p,_){for(var I=p.length,j=[],V=0,H=f(p)?p.split(""):p,re=0;re<I;re++)if(re in H){var ue=H[re];_.call(void 0,ue,re,p)&&(j[V++]=ue)}return j},ee=Array.prototype.map?function(p,_){return Array.prototype.map.call(p,_,void 0)}:function(p,_){for(var I=p.length,j=Array(I),V=f(p)?p.split(""):p,H=0;H<I;H++)H in V&&(j[H]=_.call(void 0,V[H],H,p));return j},be=Array.prototype.some?function(p,_){return Array.prototype.some.call(p,_,void 0)}:function(p,_){for(var I=p.length,j=f(p)?p.split(""):p,V=0;V<I;V++)if(V in j&&_.call(void 0,j[V],V,p))return!0;return!1};function fe(p,_){return 0<=ie(p,_)}function De(p,_){_=ie(p,_);var I;return(I=0<=_)&&dt(p,_),I}function dt(p,_){return Array.prototype.splice.call(p,_,1).length==1}function ve(p,_){e:{for(var I=p.length,j=f(p)?p.split(""):p,V=0;V<I;V++)if(V in j&&_.call(void 0,j[V],V,p)){_=V;break e}_=-1}0<=_&&dt(p,_)}function de(p,_){var I=0;se(p,function(j,V){_.call(void 0,j,V,p)&&dt(p,V)&&I++})}function me(p){return Array.prototype.concat.apply([],arguments)}function xe(p){var _=p.length;if(0<_){for(var I=Array(_),j=0;j<_;j++)I[j]=p[j];return I}return[]}function pe(p,_,I){return 2>=arguments.length?Array.prototype.slice.call(p,_):Array.prototype.slice.call(p,_,I)}var $e=String.prototype.trim?function(p){return p.trim()}:function(p){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(p)[1]},We=/&/g,ct=/</g,xt=/>/g,At=/"/g,pn=/'/g,Yt=/\x00/g,Rn=/[\x00&<>"']/;function vn(p,_){return p<_?-1:p>_?1:0}function Fn(p){return Rn.test(p)&&(p.indexOf("&")!=-1&&(p=p.replace(We,"&amp;")),p.indexOf("<")!=-1&&(p=p.replace(ct,"&lt;")),p.indexOf(">")!=-1&&(p=p.replace(xt,"&gt;")),p.indexOf('"')!=-1&&(p=p.replace(At,"&quot;")),p.indexOf("'")!=-1&&(p=p.replace(pn,"&#39;")),p.indexOf("\0")!=-1&&(p=p.replace(Yt,"&#0;"))),p}function je(p,_,I){for(var j in p)_.call(I,p[j],j,p)}function an(p){var _={},I;for(I in p)_[I]=p[I];return _}var yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(p,_){for(var I,j,V=1;V<arguments.length;V++){j=arguments[V];for(I in j)p[I]=j[I];for(var H=0;H<yn.length;H++)I=yn[H],Object.prototype.hasOwnProperty.call(j,I)&&(p[I]=j[I])}}var Oe="StopIteration"in d?d.StopIteration:{message:"StopIteration",stack:""};function et(){}et.prototype.next=function(){throw Oe},et.prototype.ha=function(){return this};function Ne(p){if(p instanceof et)return p;if(typeof p.ha=="function")return p.ha(!1);if(C(p)){var _=0,I=new et;return I.next=function(){for(;;){if(_>=p.length)throw Oe;if(_ in p)return p[_++];_++}},I}throw Error("Not implemented")}function Je(p,_){if(C(p))try{z(p,_,void 0)}catch(I){if(I!==Oe)throw I}else{p=Ne(p);try{for(;;)_.call(void 0,p.next(),void 0,p)}catch(I){if(I!==Oe)throw I}}}function pt(p){if(C(p))return xe(p);p=Ne(p);var _=[];return Je(p,function(I){_.push(I)}),_}function Kt(p,_){this.g={},this.a=[],this.j=this.h=0;var I=arguments.length;if(1<I){if(I%2)throw Error("Uneven number of arguments");for(var j=0;j<I;j+=2)this.set(arguments[j],arguments[j+1])}else if(p)if(p instanceof Kt)for(I=p.ja(),j=0;j<I.length;j++)this.set(I[j],p.get(I[j]));else for(j in p)this.set(j,p[j])}n=Kt.prototype,n.la=function(){vt(this);for(var p=[],_=0;_<this.a.length;_++)p.push(this.g[this.a[_]]);return p},n.ja=function(){return vt(this),this.a.concat()},n.clear=function(){this.g={},this.j=this.h=this.a.length=0};function vt(p){if(p.h!=p.a.length){for(var _=0,I=0;_<p.a.length;){var j=p.a[_];Sn(p.g,j)&&(p.a[I++]=j),_++}p.a.length=I}if(p.h!=p.a.length){var V={};for(I=_=0;_<p.a.length;)j=p.a[_],Sn(V,j)||(p.a[I++]=j,V[j]=1),_++;p.a.length=I}}n.get=function(p,_){return Sn(this.g,p)?this.g[p]:_},n.set=function(p,_){Sn(this.g,p)||(this.h++,this.a.push(p),this.j++),this.g[p]=_},n.forEach=function(p,_){for(var I=this.ja(),j=0;j<I.length;j++){var V=I[j],H=this.get(V);p.call(_,H,V,this)}},n.ha=function(p){vt(this);var _=0,I=this.j,j=this,V=new et;return V.next=function(){if(I!=j.j)throw Error("The map has changed since the iterator was created");if(_>=j.a.length)throw Oe;var H=j.a[_++];return p?H:j.g[H]},V};function Sn(p,_){return Object.prototype.hasOwnProperty.call(p,_)}var on=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jt(p,_){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var j=p[I].indexOf("="),V=null;if(0<=j){var H=p[I].substring(0,j);V=p[I].substring(j+1)}else H=p[I];_(H,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Cr(p,_,I,j){for(var V=I.length;0<=(_=p.indexOf(I,_))&&_<j;){var H=p.charCodeAt(_-1);if((H==38||H==63)&&(H=p.charCodeAt(_+V),!H||H==61||H==38||H==35))return _;_+=V+1}return-1}var hn=/#|$/;function Si(p,_){var I=p.search(hn),j=Cr(p,0,_,I);if(0>j)return null;var V=p.indexOf("&",j);return(0>V||V>I)&&(V=I),j+=_.length+1,decodeURIComponent(p.substr(j,V-j).replace(/\+/g," "))}var mo=/[?&]($|#)/;function ze(p,_){this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1;var I;p instanceof ze?(this.i=h(_)?_:p.i,bn(this,p.j),this.A=p.A,this.h=p.h,Ue(this,p.C),this.g=p.g,ne(this,rs(p.a)),this.s=p.s):p&&(I=String(p).match(on))?(this.i=!!_,bn(this,I[1]||"",!0),this.A=ge(I[2]||""),this.h=ge(I[3]||"",!0),Ue(this,I[4]),this.g=ge(I[5]||"",!0),ne(this,I[6]||"",!0),this.s=ge(I[7]||"")):(this.i=!!_,this.a=new Gt(null,this.i))}ze.prototype.toString=function(){var p=[],_=this.j;_&&p.push(ke(_,nt,!0),":");var I=this.h;return(I||_=="file")&&(p.push("//"),(_=this.A)&&p.push(ke(_,nt,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.C,I!=null&&p.push(":",String(I))),(I=this.g)&&(this.h&&I.charAt(0)!="/"&&p.push("/"),p.push(ke(I,I.charAt(0)=="/"?ot:_t,!0))),(I=this.a.toString())&&p.push("?",I),(I=this.s)&&p.push("#",ke(I,bt)),p.join("")};function bn(p,_,I){p.j=I?ge(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Ue(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.C=_}else p.C=null}function ne(p,_,I){_ instanceof Gt?(p.a=_,Xl(p.a,p.i)):(I||(_=ke(_,St)),p.a=new Gt(_,p.i))}function oe(p){return p instanceof ze?new ze(p):new ze(p,void 0)}function ge(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ke(p,_,I){return f(p)?(p=encodeURI(p).replace(_,qe),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function qe(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var nt=/[#\/\?@]/g,_t=/[#\?:]/g,ot=/[#\?]/g,St=/[#\?@]/g,bt=/#/g;function Gt(p,_){this.g=this.a=null,this.h=p||null,this.j=!!_}function Jn(p){p.a||(p.a=new Kt,p.g=0,p.h&&Jt(p.h,function(_,I){p.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}n=Gt.prototype,n.add=function(p,_){Jn(this),this.h=null,p=sa(this,p);var I=this.a.get(p);return I||this.a.set(p,I=[]),I.push(_),this.g+=1,this};function gi(p,_){Jn(p),_=sa(p,_),Sn(p.a.g,_)&&(p.h=null,p.g-=p.a.get(_).length,p=p.a,Sn(p.g,_)&&(delete p.g[_],p.h--,p.j++,p.a.length>2*p.h&&vt(p)))}n.clear=function(){this.a=this.h=null,this.g=0};function va(p,_){return Jn(p),_=sa(p,_),Sn(p.a.g,_)}n.forEach=function(p,_){Jn(this),this.a.forEach(function(I,j){z(I,function(V){p.call(_,V,j,this)},this)},this)},n.ja=function(){Jn(this);for(var p=this.a.la(),_=this.a.ja(),I=[],j=0;j<_.length;j++)for(var V=p[j],H=0;H<V.length;H++)I.push(_[j]);return I},n.la=function(p){Jn(this);var _=[];if(f(p))va(this,p)&&(_=me(_,this.a.get(sa(this,p))));else{p=this.a.la();for(var I=0;I<p.length;I++)_=me(_,p[I])}return _},n.set=function(p,_){return Jn(this),this.h=null,p=sa(this,p),va(this,p)&&(this.g-=this.a.get(p).length),this.a.set(p,[_]),this.g+=1,this},n.get=function(p,_){return p?(p=this.la(p),0<p.length?String(p[0]):_):_},n.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var p=[],_=this.a.ja(),I=0;I<_.length;I++){var j=_[I],V=encodeURIComponent(String(j));j=this.la(j);for(var H=0;H<j.length;H++){var re=V;j[H]!==""&&(re+="="+encodeURIComponent(String(j[H]))),p.push(re)}}return this.h=p.join("&")};function rs(p){var _=new Gt;return _.h=p.h,p.a&&(_.a=new Kt(p.a),_.g=p.g),_}function sa(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function Xl(p,_){_&&!p.j&&(Jn(p),p.h=null,p.a.forEach(function(I,j){var V=j.toLowerCase();j!=V&&(gi(this,j),gi(this,V),0<I.length&&(this.h=null,this.a.set(sa(this,V),xe(I)),this.g+=I.length))},p)),p.j=_}function la(p){this.a=oe(p)}function bl(p,_){_?p.a.a.set(Zr.Sa,_):gi(p.a.a,Zr.Sa)}function Ya(p,_){_!==null?p.a.a.set(Zr.Qa,_?"1":"0"):gi(p.a.a,Zr.Qa)}function _i(p){return p.a.a.get(Zr.Pa)||null}function ph(p,_){_?p.a.a.set(Zr.PROVIDER_ID,_):gi(p.a.a,Zr.PROVIDER_ID)}la.prototype.toString=function(){return this.a.toString()};var Zr={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"},Ma;e:{var wl=d.navigator;if(wl){var Yf=wl.userAgent;if(Yf){Ma=Yf;break e}}Ma=""}function zn(p){return Ma.indexOf(p)!=-1}function gh(){return(zn("Chrome")||zn("CriOS"))&&!zn("Edge")}function Qg(p){return Qg[" "](p),p}Qg[" "]=y;function mh(p,_){var I=My;return Object.prototype.hasOwnProperty.call(I,p)?I[p]:I[p]=_(p)}var Zl=zn("Opera"),er=zn("Trident")||zn("MSIE"),is=zn("Edge"),sx=is||er,ya=zn("Gecko")&&!(Ma.toLowerCase().indexOf("webkit")!=-1&&!zn("Edge"))&&!(zn("Trident")||zn("MSIE"))&&!zn("Edge"),ca=Ma.toLowerCase().indexOf("webkit")!=-1&&!zn("Edge"),Jg=ca&&zn("Mobile"),xl=zn("Macintosh");function Kf(){var p=d.document;return p?p.documentMode:void 0}var Pa;e:{var Xf="",Iy=function(){var p=Ma;if(ya)return/rv:([^\);]+)(\)|;)/.exec(p);if(is)return/Edge\/([\d\.]+)/.exec(p);if(er)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(p);if(ca)return/WebKit\/(\S+)/.exec(p);if(Zl)return/(?:Version)[ \/]?(\S+)/.exec(p)}();if(Iy&&(Xf=Iy?Iy[1]:""),er){var vh=Kf();if(vh!=null&&vh>parseFloat(Xf)){Pa=String(vh);break e}}Pa=Xf}var My={};function js(p){return mh(p,function(){for(var _=0,I=$e(String(Pa)).split("."),j=$e(String(p)).split("."),V=Math.max(I.length,j.length),H=0;_==0&&H<V;H++){var re=I[H]||"",ue=j[H]||"";do{if(re=/(\d*)(\D*)(.*)/.exec(re)||["","","",""],ue=/(\d*)(\D*)(.*)/.exec(ue)||["","","",""],re[0].length==0&&ue[0].length==0)break;_=vn(re[1].length==0?0:parseInt(re[1],10),ue[1].length==0?0:parseInt(ue[1],10))||vn(re[2].length==0,ue[2].length==0)||vn(re[2],ue[2]),re=re[3],ue=ue[3]}while(_==0)}return 0<=_})}var Zf,Wi=d.document;Zf=Wi&&er?Kf()||(Wi.compatMode=="CSS1Compat"?parseInt(Pa,10):5):void 0;function Na(p,_){this.a=p===Ju&&_||"",this.g=yh}Na.prototype.ma=!0,Na.prototype.ka=function(){return this.a},Na.prototype.toString=function(){return"Const{"+this.a+"}"};var yh={},Ju={};function Oo(){this.a="",this.h=Fs}Oo.prototype.ma=!0,Oo.prototype.ka=function(){return this.a.toString()},Oo.prototype.g=function(){return 1},Oo.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function jr(p){return p instanceof Oo&&p.constructor===Oo&&p.h===Fs?p.a:(te("expected object of type TrustedResourceUrl, got '"+p+"' of type "+S(p)),"type_error:TrustedResourceUrl")}function Qf(){var p=TM;p instanceof Na&&p.constructor===Na&&p.g===yh?p=p.a:(te("expected object of type Const, got '"+p+"'"),p="type_error:Const");var _=new Oo;return _.a=p,_}var Fs={};function ba(){this.a="",this.h=cx}ba.prototype.ma=!0,ba.prototype.ka=function(){return this.a.toString()},ba.prototype.g=function(){return 1},ba.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Ql(p){return p instanceof ba&&p.constructor===ba&&p.h===cx?p.a:(te("expected object of type SafeUrl, got '"+p+"' of type "+S(p)),"type_error:SafeUrl")}var em=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function bh(p){return p instanceof ba?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),em.test(p)||(p="about:invalid#zClosurez"),wh(p))}function lx(p){return p instanceof ba?p:(p=typeof p=="object"&&p.ma?p.ka():String(p),em.test(p)||(p="about:invalid#zClosurez"),wh(p))}var cx={};function wh(p){var _=new ba;return _.a=p,_}wh("about:blank");function as(){this.a="",this.g=$s}as.prototype.ma=!0;var $s={};as.prototype.ka=function(){return this.a},as.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function vo(){this.a="",this.j=tm,this.h=null}vo.prototype.g=function(){return this.h},vo.prototype.ma=!0,vo.prototype.ka=function(){return this.a.toString()},vo.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Sl(p){return p instanceof vo&&p.constructor===vo&&p.j===tm?p.a:(te("expected object of type SafeHtml, got '"+p+"' of type "+S(p)),"type_error:SafeHtml")}var tm={};function os(p,_){var I=new vo;return I.a=p,I.h=_,I}os("<!DOCTYPE html>",0);var ux=os("",0);os("<br>",0);var Jf=function(p){var _=!1,I;return function(){return _||(I=p(),_=!0),I}}(function(){if(typeof document>"u")return!1;var p=document.createElement("div"),_=document.createElement("div");return _.appendChild(document.createElement("div")),p.appendChild(_),p.firstChild?(_=p.firstChild.firstChild,p.innerHTML=Sl(ux),!_.parentElement):!1});function Jl(p,_){if(p.src=jr(_),v===null)e:{if(_=d.document,(_=_.querySelector&&_.querySelector("script[nonce]"))&&(_=_.nonce||_.getAttribute("nonce"))&&m.test(_)){v=_;break e}v=""}_=v,_&&p.setAttribute("nonce",_)}function Ka(p,_){_=_ instanceof ba?_:lx(_),p.assign(Ql(_))}function ss(p,_){this.a=h(p)?p:0,this.g=h(_)?_:0}ss.prototype.toString=function(){return"("+this.a+", "+this.g+")"},ss.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},ss.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},ss.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this};function _l(p,_){this.width=p,this.height=_}n=_l.prototype,n.toString=function(){return"("+this.width+" x "+this.height+")"},n.aspectRatio=function(){return this.width/this.height},n.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},n.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},n.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};function ec(p){return p?new xh(Gc(p)):K||(K=new xh)}function tc(p,_){var I=_||document;return I.querySelectorAll&&I.querySelector?I.querySelectorAll("."+p):nc(document,p,_)}function ep(p,_){var I=_||document;if(I.getElementsByClassName)p=I.getElementsByClassName(p)[0];else{I=document;var j=_||I;p=j.querySelectorAll&&j.querySelector&&p?j.querySelector(p?"."+p:""):nc(I,p,_)[0]||null}return p||null}function nc(p,_,I){var j;if(p=I||p,p.querySelectorAll&&p.querySelector&&_)return p.querySelectorAll(_?"."+_:"");if(_&&p.getElementsByClassName){var V=p.getElementsByClassName(_);return V}if(V=p.getElementsByTagName("*"),_){var H={};for(I=j=0;p=V[I];I++){var re=p.className;typeof re.split=="function"&&fe(re.split(/\s+/),_)&&(H[j++]=p)}return H.length=j,H}return V}function Hc(p,_){je(_,function(I,j){I&&typeof I=="object"&&I.ma&&(I=I.ka()),j=="style"?p.style.cssText=I:j=="class"?p.className=I:j=="for"?p.htmlFor=I:nm.hasOwnProperty(j)?p.setAttribute(nm[j],I):j.lastIndexOf("aria-",0)==0||j.lastIndexOf("data-",0)==0?p.setAttribute(j,I):p[j]=I})}var nm={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function qi(p){return p.scrollingElement?p.scrollingElement:(ca||p.compatMode!="CSS1Compat")&&p.body||p.documentElement}function or(p){p&&p.parentNode&&p.parentNode.removeChild(p)}function Gc(p){return p.nodeType==9?p:p.ownerDocument||p.document}function ed(p,_){if("textContent"in p)p.textContent=_;else if(p.nodeType==3)p.data=String(_);else if(p.firstChild&&p.firstChild.nodeType==3){for(;p.lastChild!=p.firstChild;)p.removeChild(p.lastChild);p.firstChild.data=String(_)}else{for(var I;I=p.firstChild;)p.removeChild(I);p.appendChild(Gc(p).createTextNode(String(_)))}}function Py(p,_){return _?rm(p,function(I){return!_||f(I.className)&&fe(I.className.split(/\s+/),_)}):null}function rm(p,_){for(var I=0;p;){if(_(p))return p;p=p.parentNode,I++}return null}function xh(p){this.a=p||d.document||document}xh.prototype.N=function(){return f(void 0)?this.a.getElementById(void 0):void 0};var Bs={Fc:!0},Sh={Hc:!0},Tl={},Ny={Gc:!0};function Wc(){throw Error("Do not instantiate directly")}Wc.prototype.va=null,Wc.prototype.toString=function(){return this.content};function rc(p,_,I,j){if(p=p(_||am,void 0,I),j=(j||ec()).a.createElement("DIV"),p=im(p),p.match(Ry),p=os(p,null),Jf())for(;j.lastChild;)j.removeChild(j.lastChild);return j.innerHTML=Sl(p),j.childNodes.length==1&&(p=j.firstChild,p.nodeType==1&&(j=p)),j}function im(p){if(!A(p))return Fn(String(p));if(p instanceof Wc){if(p.fa===Bs)return p.content;if(p.fa===Ny)return Fn(p.content)}return te("Soy template output is unsafe for use as HTML: "+p),"zSoyz"}var Ry=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,am={};function dx(p){if(p!=null)switch(p.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}function td(){Wc.call(this)}G(td,Wc),td.prototype.fa=Bs;function fn(p){return p!=null&&p.fa===Bs?p:p instanceof vo?Et(Sl(p).toString(),p.g()):Et(Fn(String(String(p))),dx(p))}function _h(){Wc.call(this)}G(_h,Wc),_h.prototype.fa=Sh,_h.prototype.va=1;function qc(p,_){this.content=String(p),this.va=_??null}G(qc,Wc),qc.prototype.fa=Ny;function sr(p){return new qc(p,void 0)}var Et=function(p){function _(I){this.content=I}return _.prototype=p.prototype,function(I,j){return I=new _(String(I)),j!==void 0&&(I.va=j),I}}(td),Oy=function(p){function _(I){this.content=I}return _.prototype=p.prototype,function(I){return new _(String(I))}}(_h);function tp(p){function _(){}var I={label:mi("New password")};_.prototype=p,p=new _;for(var j in I)p[j]=I[j];return p}function mi(p){return(p=String(p))?new qc(p,void 0):""}var np=function(p){function _(I){this.content=I}return _.prototype=p.prototype,function(I,j){return I=String(I),I?(I=new _(I),j!==void 0&&(I.va=j),I):""}}(td);function Ra(p){return p!=null&&p.fa===Bs?String(String(p.content).replace(Kc,"").replace(O,"&lt;")).replace(sm,fx):Fn(String(p))}function ic(p){return p!=null&&p.fa===Sh?p=String(p).replace(Xa,om):p instanceof ba?p=String(Ql(p).toString()).replace(Xa,om):(p=String(p),mx.test(p)?p=p.replace(Xa,om):(te("Bad value `%s` for |filterNormalizeUri",[p]),p="#zSoyz")),p}function Yc(p){return p!=null&&p.fa===Tl?p=p.content:p==null?p="":p instanceof as?p instanceof as&&p.constructor===as&&p.g===$s?p=p.a:(te("expected object of type SafeStyle, got '"+p+"' of type "+S(p)),p="type_error:SafeStyle"):(p=String(p),gx.test(p)||(te("Bad value `%s` for |filterCssValue",[p]),p="zSoyz")),p}var hx={"\0":"&#0;","	":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function fx(p){return hx[p]}var px={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","\x07":"%07","\b":"%08","	":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","\x1B":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function om(p){return px[p]}var sm=/[\x00\x22\x27\x3c\x3e]/g,Xa=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,gx=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,mx=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Kc=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,O=/</g;function q(){return sr("Enter a valid phone number")}function Q(){return sr("Unable to send password reset code to specified email")}function le(){return sr("Something went wrong. Please try again.")}function Ee(){return sr("This email already exists without any means of sign-in. Please reset the password to recover.")}function Le(p){p=p||{};var _="";switch(p.code){case"invalid-argument":_+="Client specified an invalid argument.";break;case"invalid-configuration":_+="Client specified an invalid project configuration.";break;case"failed-precondition":_+="Request can not be executed in the current system state.";break;case"out-of-range":_+="Client specified an invalid range.";break;case"unauthenticated":_+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":_+="Client does not have sufficient permission.";break;case"not-found":_+="Specified resource is not found.";break;case"aborted":_+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":_+="The resource that a client tried to create already exists.";break;case"resource-exhausted":_+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":_+="Request cancelled by the client.";break;case"data-loss":_+="Unrecoverable data loss or data corruption.";break;case"unknown":_+="Unknown server error.";break;case"internal":_+="Internal server error.";break;case"not-implemented":_+="API method not implemented by the server.";break;case"unavailable":_+="Service unavailable.";break;case"deadline-exceeded":_+="Request deadline exceeded.";break;case"auth/user-disabled":_+="The user account has been disabled by an administrator.";break;case"auth/timeout":_+="The operation has timed out.";break;case"auth/too-many-requests":_+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":_+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":_+="A network error has occurred. Try again later.";break;case"restart-process":_+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":_+="No sign-in provider is available for the given email, please try with a different email."}return sr(_)}function ht(){return sr("Please login again to perform this operation")}function tr(p,_,I){var j=Error.call(this);if(this.message=j.message,"stack"in j&&(this.stack=j.stack),this.code=wa+p,!(p=_)){switch(p="",this.code){case"firebaseui/merge-conflict":p+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:p+=le()}p=sr(p).toString()}this.message=p||"",this.credential=I||null}s(tr,Error),tr.prototype.toJSON=function(){return{code:this.code,message:this.message}};var wa="firebaseui/";function Hn(){this.T=this.T,this.C=this.C}var Oa=0;Hn.prototype.T=!1,Hn.prototype.m=function(){!this.T&&(this.T=!0,this.o(),Oa!=0)};function Pi(p,_){p.T?h(void 0)?_.call(void 0):_():(p.C||(p.C=[]),p.C.push(h(void 0)?N(_,void 0):_))}Hn.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Us(p){p&&typeof p.m=="function"&&p.m()}var Za=Object.freeze||function(p){return p},ac=!er||9<=Number(Zf),Ly=er&&!js("9"),vx=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{d.addEventListener("test",y,_),d.removeEventListener("test",y,_)}catch{}return p}();function Xc(p,_){this.type=p,this.g=this.target=_,this.h=!1,this.qb=!0}Xc.prototype.stopPropagation=function(){this.h=!0},Xc.prototype.preventDefault=function(){this.qb=!1};function yo(p,_){if(Xc.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,p){var I=this.type=p.type,j=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(ya){e:{try{Qg(_.nodeName);var V=!0;break e}catch{}V=!1}V||(_=null)}}else I=="mouseover"?_=p.fromElement:I=="mouseout"&&(_=p.toElement);this.relatedTarget=_,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.keyCode=p.keyCode||0,this.key=p.key||"",this.j=p.charCode||(I=="keypress"?p.keyCode:0),this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=f(p.pointerType)?p.pointerType:LT[p.pointerType]||"",this.a=p,p.defaultPrevented&&this.preventDefault()}}G(yo,Xc);var LT=Za({2:"touch",3:"pen",4:"mouse"});yo.prototype.stopPropagation=function(){yo.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},yo.prototype.preventDefault=function(){yo.K.preventDefault.call(this);var p=this.a;if(p.preventDefault)p.preventDefault();else if(p.returnValue=!1,Ly)try{(p.ctrlKey||112<=p.keyCode&&123>=p.keyCode)&&(p.keyCode=-1)}catch{}};var rp="closure_listenable_"+(1e6*Math.random()|0),yM=0;function bM(p,_,I,j,V){this.listener=p,this.proxy=null,this.src=_,this.type=I,this.capture=!!j,this.La=V,this.key=++yM,this.sa=this.Ia=!1}function jy(p){p.sa=!0,p.listener=null,p.proxy=null,p.src=null,p.La=null}function yx(p){this.src=p,this.a={},this.g=0}yx.prototype.add=function(p,_,I,j,V){var H=p.toString();p=this.a[H],p||(p=this.a[H]=[],this.g++);var re=FT(p,_,j,V);return-1<re?(_=p[re],I||(_.Ia=!1)):(_=new bM(_,this.src,H,!!j,V),_.Ia=I,p.push(_)),_};function jT(p,_){var I=_.type;I in p.a&&De(p.a[I],_)&&(jy(_),p.a[I].length==0&&(delete p.a[I],p.g--))}function FT(p,_,I,j){for(var V=0;V<p.length;++V){var H=p[V];if(!H.sa&&H.listener==_&&H.capture==!!I&&H.La==j)return V}return-1}var $T="closure_lm_"+(1e6*Math.random()|0),BT={};function Ni(p,_,I,j,V){if(j&&j.once)return cm(p,_,I,j,V);if(T(_)){for(var H=0;H<_.length;H++)Ni(p,_[H],I,j,V);return null}return I=xx(I),p&&p[rp]?p.J.add(String(_),I,!1,A(j)?!!j.capture:!!j,V):lm(p,_,I,!1,j,V)}function lm(p,_,I,j,V,H){if(!_)throw Error("Invalid event type");var re=A(V)?!!V.capture:!!V,ue=Eh(p);if(ue||(p[$T]=ue=new yx(p)),I=ue.add(_,I,j,re,H),I.proxy)return I;if(j=wM(),I.proxy=j,j.src=p,j.listener=I,p.addEventListener)vx||(V=re),V===void 0&&(V=!1),p.addEventListener(_.toString(),j,V);else if(p.attachEvent)p.attachEvent(bx(_.toString()),j);else if(p.addListener&&p.removeListener)p.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return I}function wM(){var p=UT,_=ac?function(I){return p.call(_.src,_.listener,I)}:function(I){if(I=p.call(_.src,_.listener,I),!I)return I};return _}function cm(p,_,I,j,V){if(T(_)){for(var H=0;H<_.length;H++)cm(p,_[H],I,j,V);return null}return I=xx(I),p&&p[rp]?p.J.add(String(_),I,!0,A(j)?!!j.capture:!!j,V):lm(p,_,I,!0,j,V)}function Th(p,_,I,j,V){if(T(_))for(var H=0;H<_.length;H++)Th(p,_[H],I,j,V);else j=A(j)?!!j.capture:!!j,I=xx(I),p&&p[rp]?(p=p.J,_=String(_).toString(),_ in p.a&&(H=p.a[_],I=FT(H,I,j,V),-1<I&&(jy(H[I]),dt(H,I),H.length==0&&(delete p.a[_],p.g--)))):p&&(p=Eh(p))&&(_=p.a[_.toString()],p=-1,_&&(p=FT(_,I,j,V)),(I=-1<p?_[p]:null)&&nd(I))}function nd(p){if(typeof p!="number"&&p&&!p.sa){var _=p.src;if(_&&_[rp])jT(_.J,p);else{var I=p.type,j=p.proxy;_.removeEventListener?_.removeEventListener(I,j,p.capture):_.detachEvent?_.detachEvent(bx(I),j):_.addListener&&_.removeListener&&_.removeListener(j),(I=Eh(_))?(jT(I,p),I.g==0&&(I.src=null,_[$T]=null)):jy(p)}}}function bx(p){return p in BT?BT[p]:BT[p]="on"+p}function xM(p,_,I,j){var V=!0;if((p=Eh(p))&&(_=p.a[_.toString()]))for(_=_.concat(),p=0;p<_.length;p++){var H=_[p];H&&H.capture==I&&!H.sa&&(H=ip(H,j),V=V&&H!==!1)}return V}function ip(p,_){var I=p.listener,j=p.La||p.src;return p.Ia&&nd(p),I.call(j,_)}function UT(p,_){if(p.sa)return!0;if(!ac){if(!_)e:{_=["window","event"];for(var I=d,j=0;j<_.length;j++)if(I=I[_[j]],I==null){_=null;break e}_=I}if(j=_,_=new yo(j,this),I=!0,!(0>j.keyCode||j.returnValue!=null)){e:{var V=!1;if(j.keyCode==0)try{j.keyCode=-1;break e}catch{V=!0}(V||j.returnValue==null)&&(j.returnValue=!0)}for(j=[],V=_.g;V;V=V.parentNode)j.push(V);for(p=p.type,V=j.length-1;!_.h&&0<=V;V--){_.g=j[V];var H=xM(j[V],p,!0,_);I=I&&H}for(V=0;!_.h&&V<j.length;V++)_.g=j[V],H=xM(j[V],p,!1,_),I=I&&H}return I}return ip(p,new yo(_,this))}function Eh(p){return p=p[$T],p instanceof yx?p:null}var Fy="__closure_events_fn_"+(1e9*Math.random()>>>0);function xx(p){return k(p)?p:(p[Fy]||(p[Fy]=function(_){return p.handleEvent(_)}),p[Fy])}function oi(){Hn.call(this),this.J=new yx(this),this.wb=this,this.Ha=null}G(oi,Hn),oi.prototype[rp]=!0,oi.prototype.Za=function(p){this.Ha=p},oi.prototype.removeEventListener=function(p,_,I,j){Th(this,p,_,I,j)};function Vs(p,_){var I,j=p.Ha;if(j)for(I=[];j;j=j.Ha)I.push(j);if(p=p.wb,j=_.type||_,f(_))_=new Xc(_,p);else if(_ instanceof Xc)_.target=_.target||p;else{var V=_;_=new Xc(j,p),Te(_,V)}if(V=!0,I)for(var H=I.length-1;!_.h&&0<=H;H--){var re=_.g=I[H];V=um(re,j,!0,_)&&V}if(_.h||(re=_.g=p,V=um(re,j,!0,_)&&V,_.h||(V=um(re,j,!1,_)&&V)),I)for(H=0;!_.h&&H<I.length;H++)re=_.g=I[H],V=um(re,j,!1,_)&&V;return V}oi.prototype.o=function(){if(oi.K.o.call(this),this.J){var p=this.J,_;for(_ in p.a){for(var I=p.a[_],j=0;j<I.length;j++)jy(I[j]);delete p.a[_],p.g--}}this.Ha=null};function um(p,_,I,j){if(_=p.J.a[String(_)],!_)return!0;_=_.concat();for(var V=!0,H=0;H<_.length;++H){var re=_[H];if(re&&!re.sa&&re.capture==I){var ue=re.listener,Re=re.La||re.src;re.Ia&&jT(p.J,re),V=ue.call(Re,j)!==!1&&V}}return V&&j.qb!=0}var ls={},Ah=0;function VT(p,_){if(!p)throw Error("Event target element must be provided!");if(p=Sx(p),ls[p]&&ls[p].length)for(var I=0;I<ls[p].length;I++)Vs(ls[p][I],_)}function SM(p){var _=Sx(p.N());ls[_]&&ls[_].length&&(ve(ls[_],function(I){return I==p}),ls[_].length||delete ls[_])}function Sx(p){return typeof p.a>"u"&&(p.a=Ah,Ah++),p.a}function _x(p){if(!p)throw Error("Event target element must be provided!");oi.call(this),this.a=p}s(_x,oi),_x.prototype.N=function(){return this.a},_x.prototype.register=function(){var p=Sx(this.N());ls[p]?fe(ls[p],this)||ls[p].push(this):ls[p]=[this]};function _M(p){if(!p)return!1;try{return!!p.$goog_Thenable}catch{return!1}}function zT(p,_){this.h=p,this.j=_,this.g=0,this.a=null}zT.prototype.get=function(){if(0<this.g){this.g--;var p=this.a;this.a=p.next,p.next=null}else p=this.h();return p};function HT(p,_){p.j(_),100>p.g&&(p.g++,_.next=p.a,p.a=_)}function GT(){this.g=this.a=null}var Tx=new zT(function(){return new Ex},function(p){p.reset()});GT.prototype.add=function(p,_){var I=Tx.get();I.set(p,_),this.g?this.g.next=I:this.a=I,this.g=I};function oc(){var p=op,_=null;return p.a&&(_=p.a,p.a=p.a.next,p.a||(p.g=null),_.next=null),_}function Ex(){this.next=this.g=this.a=null}Ex.prototype.set=function(p,_){this.a=p,this.g=_,this.next=null},Ex.prototype.reset=function(){this.next=this.g=this.a=null};function zs(p){d.setTimeout(function(){throw p},0)}var cs;function dm(){var p=d.MessageChannel;if(typeof p>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!zn("Presto")&&(p=function(){var V=document.createElement("IFRAME");V.style.display="none",V.src="",document.documentElement.appendChild(V);var H=V.contentWindow;V=H.document,V.open(),V.write(""),V.close();var re="callImmediate"+Math.random(),ue=H.location.protocol=="file:"?"*":H.location.protocol+"//"+H.location.host;V=N(function(Re){(ue=="*"||Re.origin==ue)&&Re.data==re&&this.port1.onmessage()},this),H.addEventListener("message",V,!1),this.port1={},this.port2={postMessage:function(){H.postMessage(re,ue)}}}),typeof p<"u"&&!zn("Trident")&&!zn("MSIE")){var _=new p,I={},j=I;return _.port1.onmessage=function(){if(h(I.next)){I=I.next;var V=I.gb;I.gb=null,V()}},function(V){j.next={gb:V},j=j.next,_.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in document.createElement("SCRIPT")?function(V){var H=document.createElement("SCRIPT");H.onreadystatechange=function(){H.onreadystatechange=null,H.parentNode.removeChild(H),H=null,V(),V=null},document.documentElement.appendChild(H)}:function(V){d.setTimeout(V,0)}}function $y(p,_){ap||Ax(),By||(ap(),By=!0),op.add(p,_)}var ap;function Ax(){if(d.Promise&&d.Promise.resolve){var p=d.Promise.resolve(void 0);ap=function(){p.then(WT)}}else ap=function(){var _=WT;!k(d.setImmediate)||d.Window&&d.Window.prototype&&!zn("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(cs||(cs=dm()),cs(_)):d.setImmediate(_)}}var By=!1,op=new GT;function WT(){for(var p;p=oc();){try{p.a.call(p.g)}catch(_){zs(_)}HT(Tx,p)}By=!1}function Ri(p){if(this.a=El,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,p!=y)try{var _=this;p.call(void 0,function(I){kl(_,Uy,I)},function(I){if(!(I instanceof Cl))try{throw I instanceof Error?I:Error("Promise rejected.")}catch{}kl(_,Yi,I)})}catch(I){kl(this,Yi,I)}}var El=0,Uy=2,Yi=3;function kx(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}kx.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Zc=new zT(function(){return new kx},function(p){p.reset()});function Cx(p,_,I){var j=Zc.get();return j.s=p,j.g=_,j.j=I,j}function vi(p){if(p instanceof Ri)return p;var _=new Ri(y);return kl(_,Uy,p),_}function Al(p){return new Ri(function(_,I){I(p)})}Ri.prototype.then=function(p,_,I){return sp(this,k(p)?p:null,k(_)?_:null,I)},Ri.prototype.$goog_Thenable=!0,n=Ri.prototype,n.fc=function(p,_){return p=Cx(p,p,_),p.h=!0,Vy(this,p),this},n.Ca=function(p,_){return sp(this,null,p,_)},n.cancel=function(p){this.a==El&&$y(function(){var _=new Cl(p);Dx(this,_)},this)};function Dx(p,_){if(p.a==El)if(p.h){var I=p.h;if(I.g){for(var j=0,V=null,H=null,re=I.g;re&&(re.h||(j++,re.a==p&&(V=re),!(V&&1<j)));re=re.next)V||(H=re);V&&(I.a==El&&j==1?Dx(I,_):(H?(j=H,j.next==I.j&&(I.j=j),j.next=j.next.next):Hs(I),Gs(I,V,Yi,_)))}p.h=null}else kl(p,Yi,_)}function Vy(p,_){p.g||p.a!=Uy&&p.a!=Yi||zy(p),p.j?p.j.next=_:p.g=_,p.j=_}function sp(p,_,I,j){var V=Cx(null,null,null);return V.a=new Ri(function(H,re){V.s=_?function(ue){try{var Re=_.call(j,ue);H(Re)}catch(it){re(it)}}:H,V.g=I?function(ue){try{var Re=I.call(j,ue);!h(Re)&&ue instanceof Cl?re(ue):H(Re)}catch(it){re(it)}}:re}),V.a.h=p,Vy(p,V),V.a}n.hc=function(p){this.a=El,kl(this,Uy,p)},n.ic=function(p){this.a=El,kl(this,Yi,p)};function kl(p,_,I){if(p.a==El){p===I&&(_=Yi,I=new TypeError("Promise cannot resolve to itself")),p.a=1;e:{var j=I,V=p.hc,H=p.ic;if(j instanceof Ri){Vy(j,Cx(V||y,H||null,p));var re=!0}else if(_M(j))j.then(V,H,p),re=!0;else{if(A(j))try{var ue=j.then;if(k(ue)){Ix(j,ue,V,H,p),re=!0;break e}}catch(Re){H.call(p,Re),re=!0;break e}re=!1}}re||(p.A=I,p.a=_,p.h=null,zy(p),_!=Yi||I instanceof Cl||rd(p,I))}}function Ix(p,_,I,j,V){function H(Re){ue||(ue=!0,j.call(V,Re))}function re(Re){ue||(ue=!0,I.call(V,Re))}var ue=!1;try{_.call(p,re,H)}catch(Re){H(Re)}}function zy(p){p.i||(p.i=!0,$y(p.Hb,p))}function Hs(p){var _=null;return p.g&&(_=p.g,p.g=_.next,_.next=null),p.g||(p.j=null),_}n.Hb=function(){for(var p;p=Hs(this);)Gs(this,p,this.a,this.A);this.i=!1};function Gs(p,_,I,j){if(I==Yi&&_.g&&!_.h)for(;p&&p.s;p=p.h)p.s=!1;if(_.a)_.a.h=null,kh(_,I,j);else try{_.h?_.s.call(_.j):kh(_,I,j)}catch(V){Qc.call(null,V)}HT(Zc,_)}function kh(p,_,I){_==Uy?p.s.call(p.j,I):p.g&&p.g.call(p.j,I)}function rd(p,_){p.s=!0,$y(function(){p.s&&Qc.call(null,_)})}var Qc=zs;function Cl(p){W.call(this,p)}G(Cl,W),Cl.prototype.name="cancel";function qT(p,_,I){_||(_={}),I=I||window;var j=p instanceof ba?p:bh(typeof p.href<"u"?p.href:String(p));p=_.target||p.target;var V=[];for(H in _)switch(H){case"width":case"height":case"top":case"left":V.push(H+"="+_[H]);break;case"target":case"noopener":case"noreferrer":break;default:V.push(H+"="+(_[H]?1:0))}var H=V.join(",");return(zn("iPhone")&&!zn("iPod")&&!zn("iPad")||zn("iPad")||zn("iPod"))&&I.navigator&&I.navigator.standalone&&p&&p!="_self"?(H=I.document.createElement("A"),j=j instanceof ba?j:lx(j),H.href=Ql(j),H.setAttribute("target",p),_.noreferrer&&H.setAttribute("rel","noreferrer"),_=document.createEvent("MouseEvent"),_.initMouseEvent("click",!0,!0,I,1),H.dispatchEvent(_),I={}):_.noreferrer?(I=I.open("",p,H),_=Ql(j).toString(),I&&(sx&&_.indexOf(";")!=-1&&(_="'"+_.replace(/'/g,"%27")+"'"),I.opener=null,_=os('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Fn(_)+'">',null),I.document.write(Sl(_)),I.document.close())):(I=I.open(Ql(j).toString(),p,H))&&_.noopener&&(I.opener=null),I}function Mx(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch{}return!1}function Ch(p){qT(p,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function La(p,_){if(p=A(p)&&p.nodeType==1?p:document.querySelector(String(p)),p==null)throw Error(_||"Cannot find element.");return p}function Dr(){return window.location.href}function Tr(){var p=null;return new Ri(function(_){d.document.readyState=="complete"?_():(p=function(){_()},cm(window,"load",p))}).Ca(function(_){throw Th(window,"load",p),_})}function lp(){for(var p=32,_=[];0<p;)_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),p--;return _.join("")}function Jc(p,_,I){return I=I===void 0?{}:I,Object.keys(p).filter(function(j){return _.includes(j)}).reduce(function(j,V){return j[V]=p[V],j},I)}function eu(p){var _=od;this.s=[],this.T=_,this.O=p||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}eu.prototype.cancel=function(p){if(this.a)this.h instanceof eu&&this.h.cancel();else{if(this.g){var _=this.g;delete this.g,p?_.cancel(p):(_.C--,0>=_.C&&_.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(p=new id,Hy(this),sc(this,!1,p))}},eu.prototype.L=function(p,_){this.A=!1,sc(this,p,_)};function sc(p,_,I){p.a=!0,p.h=I,p.j=!_,fm(p)}function Hy(p){if(p.a){if(!p.J)throw new Gy;p.J=!1}}eu.prototype.callback=function(p){Hy(this),sc(this,!0,p)};function YT(p,_,I){p.s.push([_,I,void 0]),p.a&&fm(p)}eu.prototype.then=function(p,_,I){var j,V,H=new Ri(function(re,ue){j=re,V=ue});return YT(this,j,function(re){re instanceof id?H.cancel():V(re)}),H.then(p,_,I)},eu.prototype.$goog_Thenable=!0;function hm(p){return be(p.s,function(_){return k(_[1])})}function fm(p){if(p.i&&p.a&&hm(p)){var _=p.i,I=tu[_];I&&(d.clearTimeout(I.a),delete tu[_]),p.i=0}p.g&&(p.g.C--,delete p.g),_=p.h;for(var j=I=!1;p.s.length&&!p.A;){var V=p.s.shift(),H=V[0],re=V[1];if(V=V[2],H=p.j?re:H)try{var ue=H.call(V||p.O,_);h(ue)&&(p.j=p.j&&(ue==_||ue instanceof Error),p.h=_=ue),(_M(_)||typeof d.Promise=="function"&&_ instanceof d.Promise)&&(j=!0,p.A=!0)}catch(Re){_=Re,p.j=!0,hm(p)||(I=!0)}}p.h=_,j&&(ue=N(p.L,p,!0),j=N(p.L,p,!1),_ instanceof eu?(YT(_,ue,j),_.l=!0):_.then(ue,j)),I&&(_=new Px(_),tu[_.a]=_,p.i=_.a)}function Gy(){W.call(this)}G(Gy,W),Gy.prototype.message="Deferred has already fired",Gy.prototype.name="AlreadyCalledError";function id(){W.call(this)}G(id,W),id.prototype.message="Deferred was canceled",id.prototype.name="CanceledError";function Px(p){this.a=d.setTimeout(N(this.h,this),0),this.g=p}Px.prototype.h=function(){throw delete tu[this.a],this.g};var tu={};function ad(p){var _={},I=_.document||document,j=jr(p).toString(),V=document.createElement("SCRIPT"),H={rb:V,sb:void 0},re=new eu(H),ue=null,Re=_.timeout!=null?_.timeout:5e3;return 0<Re&&(ue=window.setTimeout(function(){pm(V,!0);var it=new gm(Wy,"Timeout reached for loading script "+j);Hy(re),sc(re,!1,it)},Re),H.sb=ue),V.onload=V.onreadystatechange=function(){V.readyState&&V.readyState!="loaded"&&V.readyState!="complete"||(pm(V,_.xc||!1,ue),re.callback(null))},V.onerror=function(){pm(V,!0,ue);var it=new gm(KT,"Error while loading script "+j);Hy(re),sc(re,!1,it)},H=_.attributes||{},Te(H,{type:"text/javascript",charset:"UTF-8"}),Hc(V,H),Jl(V,p),Dh(I).appendChild(V),re}function Dh(p){var _=(p||document).getElementsByTagName("HEAD");return _&&_.length!=0?_[0]:p.documentElement}function od(){if(this&&this.rb){var p=this.rb;p&&p.tagName=="SCRIPT"&&pm(p,!0,this.sb)}}function pm(p,_,I){I!=null&&d.clearTimeout(I),p.onload=y,p.onerror=y,p.onreadystatechange=y,_&&window.setTimeout(function(){or(p)},0)}var KT=0,Wy=1;function gm(p,_){var I="Jsloader error (code #"+p+")";_&&(I+=": "+_),W.call(this,I),this.code=p}G(gm,W);function lc(){return d.google&&d.google.accounts&&d.google.accounts.id||null}function ja(p){this.a=p||lc(),this.h=!1,this.g=null}ja.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())};function qy(p,_,I){if(p.a&&_)return function(){return p.h=!0,new Ri(function(V){p.g=V,p.a.initialize({client_id:_,callback:V,auto_select:!I}),p.a.prompt()})}();if(_){var j=XT.Xa().load().then(function(){return p.a=lc(),qy(p,_,I)}).Ca(function(){return null});return vi(j)}return vi(null)}w(ja);var TM=new Na(Ju,"https://accounts.google.com/gsi/client");function XT(){this.a=null}XT.prototype.load=function(){var p=this;if(this.a)return this.a;var _=Qf();return lc()?vi():this.a=Tr().then(function(){if(!lc())return new Ri(function(I,j){var V=setTimeout(function(){p.a=null,j(Error("Network error!"))},1e4);d.onGoogleLibraryLoad=function(){clearTimeout(V),I()},vi(ad(_)).then(function(){lc()&&I()}).Ca(function(H){clearTimeout(V),p.a=null,j(H)})})})},w(XT);function ZT(p,_){this.a=p,this.g=_||function(I){throw I}}ZT.prototype.confirm=function(p){return vi(this.a.confirm(p)).Ca(this.g)};function QT(p,_,I){this.reset(p,_,I,void 0,void 0)}QT.prototype.a=null,QT.prototype.reset=function(p,_,I,j,V){this.h=j||B(),this.j=p,this.s=_,this.g=I,delete this.a};function Ki(p){this.s=p,this.a=this.h=this.j=this.g=null}function mm(p,_){this.name=p,this.value=_}mm.prototype.toString=function(){return this.name};var vm=new mm("SEVERE",1e3),ym=new mm("WARNING",900),Nx=new mm("CONFIG",700);function cp(p){return p.j?p.j:p.g?cp(p.g):(te("Root logger has no level set."),null)}Ki.prototype.log=function(p,_,I){if(p.value>=cp(this).value)for(k(_)&&(_=_()),p=new QT(p,String(_),this.s),I&&(p.a=I),I=this;I;){var j=I,V=p;if(j.a)for(var H=0;_=j.a[H];H++)_(V);I=I.g}};var Ih={},Yy=null;function JT(){Yy||(Yy=new Ki(""),Ih[""]=Yy,Yy.j=Nx)}function EM(p){JT();var _;if(!(_=Ih[p])){_=new Ki(p);var I=p.lastIndexOf("."),j=p.substr(I+1);I=EM(p.substr(0,I)),I.h||(I.h={}),I.h[j]=_,_.g=I,Ih[p]=_}return _}function Ky(){this.a=B()}var sd=null;Ky.prototype.set=function(p){this.a=p},Ky.prototype.reset=function(){this.set(B())},Ky.prototype.get=function(){return this.a};function up(p){this.j=p||"",sd||(sd=new Ky),this.s=sd}up.prototype.a=!0,up.prototype.g=!0,up.prototype.h=!1;function nu(p){return 10>p?"0"+p:String(p)}function AM(p,_){p=(p.h-_)/1e3,_=p.toFixed(3);var I=0;if(1>p)I=2;else for(;100>p;)I++,p*=10;for(;0<I--;)_=" "+_;return _}function bm(p){up.call(this,p)}G(bm,up);function kM(p,_){var I=[];if(I.push(p.j," "),p.g){var j=new Date(_.h);I.push("[",nu(j.getFullYear()-2e3)+nu(j.getMonth()+1)+nu(j.getDate())+" "+nu(j.getHours())+":"+nu(j.getMinutes())+":"+nu(j.getSeconds())+"."+nu(Math.floor(j.getMilliseconds()/10)),"] ")}return I.push("[",AM(_,p.s.get()),"s] "),I.push("[",_.g,"] "),I.push(_.s),p.h&&(_=_.a)&&I.push(`
`,_ instanceof Error?_.message:_.toString()),p.a&&I.push(`
`),I.join("")}function Xy(){this.s=N(this.h,this),this.a=new bm,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}Xy.prototype.h=function(p){function _(H){if(H){if(H.value>=vm.value)return"error";if(H.value>=ym.value)return"warn";if(H.value>=Nx.value)return"log"}return"debug"}if(!this.j[p.g]){var I=kM(this.a,p),j=eE;if(j){var V=_(p.j);CM(j,V,I,p.a)}}};var eE=d.console;function CM(p,_,I,j){p[_]?p[_](I,j||""):p.log(I,j||"")}function bo(p,_){var I=Rx;I&&I.log(vm,p,_)}var Rx;Rx=EM("firebaseui");var dp=new Xy;if(dp.g!=1){var Zy;JT(),Zy=Yy;var DM=dp.s;Zy.a||(Zy.a=[]),Zy.a.push(DM),dp.g=!0}function Lo(p){var _=Rx;_&&_.log(ym,p,void 0)}function Ox(){this.a=(typeof document>"u"?null:document)||{cookie:""}}n=Ox.prototype,n.set=function(p,_,I,j,V,H){if(/[;=\s]/.test(p))throw Error('Invalid cookie name "'+p+'"');if(/[;\r\n]/.test(_))throw Error('Invalid cookie value "'+_+'"');h(I)||(I=-1),V=V?";domain="+V:"",j=j?";path="+j:"",H=H?";secure":"",I=0>I?"":I==0?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(B()+1e3*I).toUTCString(),this.a.cookie=p+"="+_+V+j+I+H},n.get=function(p,_){for(var I=p+"=",j=(this.a.cookie||"").split(";"),V=0,H;V<j.length;V++){if(H=$e(j[V]),H.lastIndexOf(I,0)==0)return H.substr(I.length);if(H==p)return""}return _},n.ja=function(){return Qy(this).keys},n.la=function(){return Qy(this).values},n.clear=function(){for(var p=Qy(this).keys,_=p.length-1;0<=_;_--){var I=p[_];this.get(I),this.set(I,"",0,void 0,void 0)}};function Qy(p){p=(p.a.cookie||"").split(";");for(var _=[],I=[],j,V,H=0;H<p.length;H++)V=$e(p[H]),j=V.indexOf("="),j==-1?(_.push(""),I.push(V)):(_.push(V.substring(0,j)),I.push(V.substring(j+1)));return{keys:_,values:I}}var cc=new Ox;function ld(){}function ru(p,_,I,j){this.h=typeof p<"u"&&p!==null?p:-1,this.g=_||null,this.a=I||null,this.j=!!j}s(ru,ld),ru.prototype.set=function(p,_){cc.set(p,_,this.h,this.g,this.a,this.j)},ru.prototype.get=function(p){return cc.get(p)||null},ru.prototype.ra=function(p){var _=this.g,I=this.a;cc.get(p),cc.set(p,"",0,_,I)};function Jy(p,_){this.g=p,this.a=_||null}function Lx(p){return{email:p.g,credential:p.a&&p.a.toJSON()}}function wm(p){if(p&&p.email){var _=p.credential&&en.auth.AuthCredential.fromJSON(p.credential);return new Jy(p.email,_)}return null}function xm(p){this.a=p||null}function tE(p){for(var _=[],I=0,j=0;j<p.length;j++){var V=p.charCodeAt(j);255<V&&(_[I++]=V&255,V>>=8),_[I++]=V}return _}function IM(p){return ee(p,function(_){return _=_.toString(16),1<_.length?_:"0"+_}).join("")}function cd(p){for(this.i=p,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(ud*(this.j+1)),p=0;p<this.g;p++)this.a[p]=[this.i[4*p],this.i[4*p+1],this.i[4*p+2],this.i[4*p+3]];var _=Array(4);for(p=this.g;p<ud*(this.j+1);p++){if(_[0]=this.a[p-1][0],_[1]=this.a[p-1][1],_[2]=this.a[p-1][2],_[3]=this.a[p-1][3],p%this.g==0){var I=_,j=I[0];I[0]=I[1],I[1]=I[2],I[2]=I[3],I[3]=j,Xi(_),_[0]^=iu[p/this.g][0],_[1]^=iu[p/this.g][1],_[2]^=iu[p/this.g][2],_[3]^=iu[p/this.g][3]}else 6<this.g&&p%this.g==4&&Xi(_);this.a[p]=Array(4),this.a[p][0]=this.a[p-this.g][0]^_[0],this.a[p][1]=this.a[p-this.g][1]^_[1],this.a[p][2]=this.a[p-this.g][2]^_[2],this.a[p][3]=this.a[p-this.g][3]^_[3]}}cd.prototype.A=16;var ud=cd.prototype.A/4;function nE(p,_){for(var I,j=0;j<ud;j++)for(var V=0;4>V;V++)I=4*V+j,I=_[I],p.h[j][V]=I}function jx(p){for(var _=[],I=0;I<ud;I++)for(var j=0;4>j;j++)_[4*j+I]=p.h[I][j];return _}function Mh(p,_){for(var I=0;4>I;I++)for(var j=0;4>j;j++)p.h[I][j]^=p.a[4*_+j][I]}function uc(p,_){for(var I=0;4>I;I++)for(var j=0;4>j;j++)p.h[I][j]=_[p.h[I][j]]}function Gn(p){for(var _=1;4>_;_++)for(var I=0;4>I;I++)p.s[_][I]=p.h[_][I];for(_=1;4>_;_++)for(I=0;4>I;I++)p.h[_][I]=p.s[_][(I+_)%ud]}function Fr(p){for(var _=1;4>_;_++)for(var I=0;4>I;I++)p.s[_][(I+_)%ud]=p.h[_][I];for(_=1;4>_;_++)for(I=0;4>I;I++)p.h[_][I]=p.s[_][I]}function Xi(p){p[0]=dd[p[0]],p[1]=dd[p[1]],p[2]=dd[p[2]],p[3]=dd[p[3]]}var dd=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],hp=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],iu=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],fp=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Ph=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],hd=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Fx=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ti=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Sm=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function $x(p,_){p=new cd(iE(p)),_=tE(_);for(var I=_.splice(0,16),j="",V;I.length;){V=16-I.length;for(var H=0;H<V;H++)I.push(0);for(V=p,nE(V,I),Mh(V,0),I=1;I<V.j;++I){uc(V,dd),Gn(V),H=V.h;for(var re=V.s[0],ue=0;4>ue;ue++)re[0]=H[0][ue],re[1]=H[1][ue],re[2]=H[2][ue],re[3]=H[3][ue],H[0][ue]=fp[re[0]]^Ph[re[1]]^re[2]^re[3],H[1][ue]=re[0]^fp[re[1]]^Ph[re[2]]^re[3],H[2][ue]=re[0]^re[1]^fp[re[2]]^Ph[re[3]],H[3][ue]=Ph[re[0]]^re[1]^re[2]^fp[re[3]];Mh(V,I)}uc(V,dd),Gn(V),Mh(V,V.j),j+=IM(jx(V)),I=_.splice(0,16)}return j}function rE(p,_){p=new cd(iE(p));for(var I=[],j=0;j<_.length;j+=2)I.push(parseInt(_.substring(j,j+2),16));var V=I.splice(0,16);for(_="";V.length;){for(j=p,nE(j,V),Mh(j,j.j),V=1;V<j.j;++V){Fr(j),uc(j,hp),Mh(j,j.j-V);for(var H=j.h,re=j.s[0],ue=0;4>ue;ue++)re[0]=H[0][ue],re[1]=H[1][ue],re[2]=H[2][ue],re[3]=H[3][ue],H[0][ue]=Sm[re[0]]^Fx[re[1]]^Ti[re[2]]^hd[re[3]],H[1][ue]=hd[re[0]]^Sm[re[1]]^Fx[re[2]]^Ti[re[3]],H[2][ue]=Ti[re[0]]^hd[re[1]]^Sm[re[2]]^Fx[re[3]],H[3][ue]=Fx[re[0]]^Ti[re[1]]^hd[re[2]]^Sm[re[3]]}if(Fr(j),uc(j,hp),Mh(j,0),j=jx(j),8192>=j.length)j=String.fromCharCode.apply(null,j);else{for(V="",H=0;H<j.length;H+=8192)V+=String.fromCharCode.apply(null,pe(j,H,H+8192));j=V}_+=j,V=I.splice(0,16)}return _.replace(/(\x00)+$/,"")}function iE(p){p=tE(p.substring(0,32));for(var _=32-p.length,I=0;I<_;I++)p.push(0);return p}function MM(p){var _=[];return e0(new aE,p,_),_.join("")}function aE(){}function e0(p,_,I){if(_==null)I.push("null");else{if(typeof _=="object"){if(T(_)){var j=_;_=j.length,I.push("[");for(var V="",H=0;H<_;H++)I.push(V),e0(p,j[H],I),V=",";I.push("]");return}if(_ instanceof String||_ instanceof Number||_ instanceof Boolean)_=_.valueOf();else{I.push("{"),V="";for(j in _)Object.prototype.hasOwnProperty.call(_,j)&&(H=_[j],typeof H!="function"&&(I.push(V),Zi(j,I),I.push(":"),e0(p,H,I),V=","));I.push("}");return}}switch(typeof _){case"string":Zi(_,I);break;case"number":I.push(isFinite(_)&&!isNaN(_)?String(_):"null");break;case"boolean":I.push(String(_));break;case"function":I.push("null");break;default:throw Error("Unknown type: "+typeof _)}}}var Bx={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},us=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zi(p,_){_.push('"',p.replace(us,function(I){var j=Bx[I];return j||(j="\\u"+(I.charCodeAt(0)|65536).toString(16).substr(1),Bx[I]=j),j}),'"')}function pp(p){this.a=p}pp.prototype.set=function(p,_){h(_)?this.a.set(p,MM(_)):this.a.ra(p)},pp.prototype.get=function(p){try{var _=this.a.get(p)}catch{return}if(_!==null)try{return JSON.parse(_)}catch{throw"Storage: Invalid value was encountered"}};function Nh(){}G(Nh,ld),Nh.prototype.clear=function(){var p=pt(this.ha(!0)),_=this;z(p,function(I){_.ra(I)})};function gp(p){this.a=p}G(gp,Nh);function _m(p){if(!p.a)return!1;try{return p.a.setItem("__sak","1"),p.a.removeItem("__sak"),!0}catch{return!1}}n=gp.prototype,n.set=function(p,_){try{this.a.setItem(p,_)}catch{throw this.a.length==0?"Storage mechanism: Storage disabled":"Storage mechanism: Quota exceeded"}},n.get=function(p){if(p=this.a.getItem(p),!f(p)&&p!==null)throw"Storage mechanism: Invalid value was encountered";return p},n.ra=function(p){this.a.removeItem(p)},n.ha=function(p){var _=0,I=this.a,j=new et;return j.next=function(){if(_>=I.length)throw Oe;var V=I.key(_++);if(p)return V;if(V=I.getItem(V),!f(V))throw"Storage mechanism: Invalid value was encountered";return V},j},n.clear=function(){this.a.clear()},n.key=function(p){return this.a.key(p)};function dc(){var p=null;try{p=window.localStorage||null}catch{}this.a=p}G(dc,gp);function Tm(){var p=null;try{p=window.sessionStorage||null}catch{}this.a=p}G(Tm,gp);function Rh(p,_){this.g=p,this.a=_+"::"}G(Rh,Nh),Rh.prototype.set=function(p,_){this.g.set(this.a+p,_)},Rh.prototype.get=function(p){return this.g.get(this.a+p)},Rh.prototype.ra=function(p){this.g.ra(this.a+p)},Rh.prototype.ha=function(p){var _=this.g.ha(!0),I=this,j=new et;return j.next=function(){for(var V=_.next();V.substr(0,I.a.length)!=I.a;)V=_.next();return p?V.substr(I.a.length):I.g.get(V)},j},_m(new dc);var Ux,oE=new Tm;Ux=_m(oE)?new Rh(oE,"firebaseui"):null;var Vx=new pp(Ux),zx={name:"pendingEmailCredential",storage:Vx},Oh={name:"redirectStatus",storage:Vx},Em={name:"redirectUrl",storage:Vx},mp={name:"emailForSignIn",storage:new pp(new ru(3600,"/"))},vp={name:"pendingEncryptedCredential",storage:new pp(new ru(3600,"/"))};function yp(p,_){return p.storage.get(_?p.name+":"+_:p.name)}function ds(p,_){p.storage.a.ra(_?p.name+":"+_:p.name)}function bp(p,_,I){p.storage.set(I?p.name+":"+I:p.name,_)}function sE(p){return yp(Em,p)||null}function hc(p){return p=yp(zx,p)||null,wm(p)}function Dl(p){ds(zx,p)}function lE(p,_){bp(zx,Lx(p),_)}function Hx(p){return(p=yp(Oh,p)||null)&&typeof p.tenantId<"u"?new xm(p.tenantId):null}function PM(p,_){bp(Oh,{tenantId:p.a},_)}function NM(p,_){_=yp(mp,_);var I=null;if(_)try{var j=rE(p,_),V=JSON.parse(j);I=V&&V.email||null}catch{}return I}function RM(p,_){_=yp(vp,_);var I=null;if(_)try{var j=rE(p,_);I=JSON.parse(j)}catch{}return wm(I||null)}function CF(p,_,I){bp(vp,$x(p,JSON.stringify(Lx(_))),I)}function Gx(){this.W={}}function si(p,_,I){if(_.toLowerCase()in p.W)throw Error("Configuration "+_+" has already been defined.");p.W[_.toLowerCase()]=I}function Am(p,_,I){if(!(_.toLowerCase()in p.W))throw Error("Configuration "+_+" is not defined.");p.W[_.toLowerCase()]=I}Gx.prototype.get=function(p){if(!(p.toLowerCase()in this.W))throw Error("Configuration "+p+" is not defined.");return this.W[p.toLowerCase()]};function Wx(p,_){if(p=p.get(_),!p)throw Error("Configuration "+_+" is required.");return p}function km(){this.g=void 0,this.a={}}n=km.prototype,n.set=function(p,_){Cm(this,p,_,!1)},n.add=function(p,_){Cm(this,p,_,!0)};function Cm(p,_,I,j){for(var V=0;V<_.length;V++){var H=_.charAt(V);p.a[H]||(p.a[H]=new km),p=p.a[H]}if(j&&p.g!==void 0)throw Error('The collection already contains the key "'+_+'"');p.g=I}n.get=function(p){e:{for(var _=this,I=0;I<p.length;I++)if(_=_.a[p.charAt(I)],!_){p=void 0;break e}p=_}return p?p.g:void 0},n.la=function(){var p=[];return cE(this,p),p};function cE(p,_){p.g!==void 0&&_.push(p.g);for(var I in p.a)cE(p.a[I],_)}n.ja=function(){var p=[];return uE(this,"",p),p};function uE(p,_,I){p.g!==void 0&&I.push(_);for(var j in p.a)uE(p.a[j],_+j,I)}n.clear=function(){this.a={},this.g=void 0};function dE(p){for(this.a=p,this.g=new km,p=0;p<this.a.length;p++){var _=this.g.get("+"+this.a[p].b);_?_.push(this.a[p]):this.g.add("+"+this.a[p].b,[this.a[p]])}}function t0(p,_){p=p.g;var I={},j=0;for(p.g!==void 0&&(I[j]=p.g);j<_.length;j++){var V=_.charAt(j);if(!(V in p.a))break;p=p.a[V],p.g!==void 0&&(I[j]=p.g)}for(var H in I)if(I.hasOwnProperty(H))return I[H];return[]}function Lh(p){for(var _=0;_<wo.length;_++)if(wo[_].c===p)return wo[_];return null}function hE(p){p=p.toUpperCase();for(var _=[],I=0;I<wo.length;I++)wo[I].f===p&&_.push(wo[I]);return _}function qx(p){if(0<p.length&&p.charAt(0)=="+"){p=p.substring(1);for(var _=[],I=0;I<wo.length;I++)wo[I].b==p&&_.push(wo[I]);p=_}else p=hE(p);return p}function fE(p){p.sort(function(_,I){return _.name.localeCompare(I.name,"en")})}var wo=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];fE(wo);var wp=new dE(wo);function pE(p,_){this.a=p,this.Aa=_}function gE(p){p=$e(p);var _=t0(wp,p);return 0<_.length?new pE(_[0].b=="1"?"1-US-0":_[0].c,$e(p.substr(_[0].b.length+1))):null}function mE(p){var _=Lh(p.a);if(!_)throw Error("Country ID "+p.a+" not found.");return"+"+_.b+p.Aa}function Yx(p,_){for(var I=0;I<p.length;I++)if(!fe(vE,p[I])&&(xp!==null&&p[I]in xp||fe(_,p[I])))return p[I];return null}var vE=["emailLink","password","phone"],xp={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function yE(){this.a=new Gx,si(this.a,"autoUpgradeAnonymousUsers"),si(this.a,"callbacks"),si(this.a,"credentialHelper",l0),si(this.a,"immediateFederatedRedirect",!1),si(this.a,"popupMode",!1),si(this.a,"privacyPolicyUrl"),si(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),si(this.a,"queryParameterForWidgetMode","mode"),si(this.a,"signInFlow"),si(this.a,"signInOptions"),si(this.a,"signInSuccessUrl"),si(this.a,"siteName"),si(this.a,"tosUrl"),si(this.a,"widgetUrl"),si(this.a,"adminRestrictedOperation")}function n0(p){var _=!!p.a.get("autoUpgradeAnonymousUsers");return _&&!o0(p)&&bo('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),_}function r0(p){p=p.a.get("signInOptions")||[];for(var _=[],I=0;I<p.length;I++){var j=p[I];j=A(j)?j:{provider:j},j.provider&&_.push(j)}return _}function Ws(p,_){p=r0(p);for(var I=0;I<p.length;I++)if(p[I].provider===_)return p[I];return null}function Dm(p){return r0(p).map(function(_){return _.provider})}function Im(p,_){p=Mm(p);for(var I=0;I<p.length;I++)if(p[I].providerId===_)return p[I];return null}function Mm(p){return r0(p).map(function(_){if(xp[_.provider]||fe(FM,_.provider)){_={providerId:_.provider,S:_.providerName||null,V:_.fullLabel||null,ta:_.buttonColor||null,za:_.iconUrl?Ql(bh(_.iconUrl)).toString():null};for(var I in _)_[I]===null&&delete _[I];return _}return{providerId:_.provider,S:_.providerName||null,V:_.fullLabel||null,ta:_.buttonColor||null,za:_.iconUrl?Ql(bh(_.iconUrl)).toString():null,Ob:_.loginHintKey||null}})}function Kx(p){var _=Ws(p,en.auth.GoogleAuthProvider.PROVIDER_ID),I;if(I=_&&_.clientId){e:{if((window.location&&window.location.protocol)==="http:"||(window.location&&window.location.protocol)==="https:"){for(j in p=p.a.get("credentialHelper"),Jx)if(Jx[j]===p){var j=Jx[j];break e}}j=l0}I=j===s0}return I&&_.clientId||null}function i0(p){return p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID),!!(p&&p.disableSignUp&&p.disableSignUp.status)}function jh(p){return p=p.a.get("adminRestrictedOperation")||null,!(!p||!p.status)}function OM(p){var _=null;if(r0(p).forEach(function(j){j.provider==en.auth.PhoneAuthProvider.PROVIDER_ID&&A(j.recaptchaParameters)&&!Array.isArray(j.recaptchaParameters)&&(_=an(j.recaptchaParameters))}),_){var I=[];$M.forEach(function(j){typeof _[j]<"u"&&(I.push(j),delete _[j])}),I.length&&Lo('The following provided "recaptchaParameters" keys are not allowed: '+I.join(", "))}return _}function Xx(p){return(p=p.a.get("adminRestrictedOperation"))&&p.adminEmail?p.adminEmail:null}function LM(p){if(p=p.a.get("adminRestrictedOperation")||null){var _=p.helpLink||null;if(_&&typeof _=="string")return function(){Ch(_)}}return null}function jM(p){return(p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp&&p.disableSignUp.adminEmail||null}function DF(p){if((p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID))&&p.disableSignUp){var _=p.disableSignUp.helpLink||null;if(_&&typeof _=="string")return function(){Ch(_)}}return null}function Sp(p,_){return p=(p=Ws(p,_))&&p.scopes,Array.isArray(p)?p:[]}function Pm(p,_){return p=(p=Ws(p,_))&&p.customParameters,A(p)?(p=an(p),_===en.auth.GoogleAuthProvider.PROVIDER_ID&&delete p.login_hint,_===en.auth.GithubAuthProvider.PROVIDER_ID&&delete p.login,p):null}function Zx(p){p=Ws(p,en.auth.PhoneAuthProvider.PROVIDER_ID);var _=null;return p&&typeof p.loginHint=="string"&&(_=gE(p.loginHint)),p&&p.defaultNationalNumber||_&&_.Aa||null}function a0(p){var _=(p=Ws(p,en.auth.PhoneAuthProvider.PROVIDER_ID))&&p.defaultCountry||null;_=_&&hE(_);var I=null;return p&&typeof p.loginHint=="string"&&(I=gE(p.loginHint)),_&&_[0]||I&&Lh(I.a)||null}function Nm(p){if(p=Ws(p,en.auth.PhoneAuthProvider.PROVIDER_ID),!p)return null;var _=p.whitelistedCountries,I=p.blacklistedCountries;if(typeof _<"u"&&(!Array.isArray(_)||_.length==0))throw Error("WhitelistedCountries must be a non-empty array.");if(typeof I<"u"&&!Array.isArray(I))throw Error("BlacklistedCountries must be an array.");if(_&&I)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!_&&!I)return wo;if(p=[],_){I={};for(var j=0;j<_.length;j++)for(var V=qx(_[j]),H=0;H<V.length;H++)I[V[H].c]=V[H];for(var re in I)I.hasOwnProperty(re)&&p.push(I[re])}else{for(re={},_=0;_<I.length;_++)for(V=qx(I[_]),j=0;j<V.length;j++)re[V[j].c]=V[j];for(V=0;V<wo.length;V++)re!==null&&wo[V].c in re||p.push(wo[V])}return p}function bE(p){return Wx(p.a,"queryParameterForWidgetMode")}function zi(p){var _=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,_&&!p&&Lo("Privacy Policy URL is missing, the link will not be displayed."),_&&p){if(typeof _=="function")return _;if(typeof _=="string")return function(){Ch(_)}}return null}function li(p){var _=p.a.get("tosUrl")||null,I=p.a.get("privacyPolicyUrl")||null;if(I&&!_&&Lo("Term of Service URL is missing, the link will not be displayed."),_&&I){if(typeof I=="function")return I;if(typeof I=="string")return function(){Ch(I)}}return null}function wE(p){return(p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.requireDisplayName<"u"?!!p.requireDisplayName:!0}function Qa(p){return p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID),!(!p||p.signInMethod!==en.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function au(p){return p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID),!(!p||!p.forceSameDevice)}function Fh(p){if(Qa(p)){var _={url:Dr(),handleCodeInApp:!0};(p=Ws(p,en.auth.EmailAuthProvider.PROVIDER_ID))&&typeof p.emailLinkSignIn=="function"&&Te(_,p.emailLinkSignIn()),p=_.url;var I=Dr();I instanceof ze||(I=oe(I)),p instanceof ze||(p=oe(p));var j=I;I=new ze(j);var V=!!p.j;V?bn(I,p.j):V=!!p.A,V?I.A=p.A:V=!!p.h,V?I.h=p.h:V=p.C!=null;var H=p.g;if(V)Ue(I,p.C);else if(V=!!p.g){if(H.charAt(0)!="/"&&(j.h&&!j.g?H="/"+H:(j=I.g.lastIndexOf("/"),j!=-1&&(H=I.g.substr(0,j+1)+H))),H==".."||H==".")H="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){j=H.lastIndexOf("/",0)==0,H=H.split("/");for(var re=[],ue=0;ue<H.length;){var Re=H[ue++];Re=="."?j&&ue==H.length&&re.push(""):Re==".."?((1<re.length||re.length==1&&re[0]!="")&&re.pop(),j&&ue==H.length&&re.push("")):(re.push(Re),j=!0)}H=re.join("/")}}return V?I.g=H:V=p.a.toString()!=="",V?ne(I,rs(p.a)):V=!!p.s,V&&(I.s=p.s),_.url=I.toString(),_}return null}function Qx(p){var _=!!p.a.get("immediateFederatedRedirect"),I=Dm(p);return p=fd(p),_&&I.length==1&&!fe(vE,I[0])&&p==ou}function fd(p){p=p.a.get("signInFlow");for(var _ in Rm)if(Rm[_]==p)return Rm[_];return ou}function fc(p){return _p(p).signInSuccess||null}function ua(p){return _p(p).signInSuccessWithAuthResult||null}function o0(p){return _p(p).signInFailure||null}function _p(p){return p.a.get("callbacks")||{}}var s0="googleyolo",l0="none",Jx={nc:s0,NONE:l0},ou="redirect",Rm={qc:"popup",rc:ou},eS={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},FM=["anonymous"],$M=["sitekey","tabindex","callback","expired-callback"],$h,Tp,c0,xE,xr={};function Mt(p,_,I,j){xr[p].apply(null,Array.prototype.slice.call(arguments,1))}function SE(p){return p.classList?p.classList:(p=p.className,f(p)&&p.match(/\S+/g)||[])}function Hi(p,_){return p.classList?p.classList.contains(_):fe(SE(p),_)}function ci(p,_){p.classList?p.classList.add(_):Hi(p,_)||(p.className+=0<p.className.length?" "+_:_)}function pc(p,_){p.classList?p.classList.remove(_):Hi(p,_)&&(p.className=ce(SE(p),function(I){return I!=_}).join(" "))}function xa(p){var _=p.type;switch(f(_)&&_.toLowerCase()){case"checkbox":case"radio":return p.checked?p.value:null;case"select-one":return _=p.selectedIndex,0<=_?p.options[_].value:null;case"select-multiple":_=[];for(var I,j=0;I=p.options[j];j++)I.selected&&_.push(I.value);return _.length?_:null;default:return p.value!=null?p.value:null}}function _E(p,_){var I=p.type;switch(f(I)&&I.toLowerCase()){case"checkbox":case"radio":p.checked=_;break;case"select-one":if(p.selectedIndex=-1,f(_)){for(var j=0;I=p.options[j];j++)if(I.value==_){I.selected=!0;break}}break;case"select-multiple":for(f(_)&&(_=[_]),j=0;I=p.options[j];j++)if(I.selected=!1,_)for(var V,H=0;V=_[H];H++)I.value==V&&(I.selected=!0);break;default:p.value=_??""}}function BM(p){if(p.altKey&&!p.ctrlKey||p.metaKey||112<=p.keyCode&&123>=p.keyCode)return!1;if(Bh(p.keyCode))return!0;switch(p.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ya;default:return 166>p.keyCode||183<p.keyCode}}function TE(p,_,I,j,V,H){if(ca&&!js("525"))return!0;if(xl&&V)return Bh(p);if(V&&!j)return!1;if(!ya){typeof _=="number"&&(_=u0(_));var re=_==17||_==18||xl&&_==91;if((!I||xl)&&re||xl&&_==16&&(j||H))return!1}if((ca||is)&&j&&I)switch(p){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(er&&j&&_==p)return!1;switch(p){case 13:return ya?H||V?!1:!(I&&j):!0;case 27:return!(ca||is||ya)}return ya&&(j||V||H)?!1:Bh(p)}function Bh(p){if(48<=p&&57>=p||96<=p&&106>=p||65<=p&&90>=p||(ca||is)&&p==0)return!0;switch(p){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ya;default:return!1}}function u0(p){if(ya)p=UM(p);else if(xl&&ca)switch(p){case 93:p=91}return p}function UM(p){switch(p){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return p}}function Ep(p){oi.call(this),this.a=p,Ni(p,"keydown",this.g,!1,this),Ni(p,"click",this.h,!1,this)}G(Ep,oi),Ep.prototype.g=function(p){(p.keyCode==13||ca&&p.keyCode==3)&&EE(this,p)},Ep.prototype.h=function(p){EE(this,p)};function EE(p,_){var I=new nS(_);if(Vs(p,I)){I=new tS(_);try{Vs(p,I)}finally{_.stopPropagation()}}}Ep.prototype.o=function(){Ep.K.o.call(this),Th(this.a,"keydown",this.g,!1,this),Th(this.a,"click",this.h,!1,this),delete this.a};function tS(p){yo.call(this,p.a),this.type="action"}G(tS,yo);function nS(p){yo.call(this,p.a),this.type="beforeaction"}G(nS,yo);function Uh(p){oi.call(this),this.a=p,p=er?"focusout":"blur",this.g=Ni(this.a,er?"focusin":"focus",this,!er),this.h=Ni(this.a,p,this,!er)}G(Uh,oi),Uh.prototype.handleEvent=function(p){var _=new yo(p.a);_.type=p.type=="focusin"||p.type=="focus"?"focusin":"focusout",Vs(this,_)},Uh.prototype.o=function(){Uh.K.o.call(this),nd(this.g),nd(this.h),delete this.a};function d0(p,_){oi.call(this),this.g=p||1,this.a=_||d,this.h=N(this.gc,this),this.j=B()}G(d0,oi),n=d0.prototype,n.Ka=!1,n.aa=null,n.gc=function(){if(this.Ka){var p=B()-this.j;0<p&&p<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-p):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),Vs(this,"tick"),this.Ka&&(Om(this),this.start()))}},n.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=B())};function Om(p){p.Ka=!1,p.aa&&(p.a.clearTimeout(p.aa),p.aa=null)}n.o=function(){d0.K.o.call(this),Om(this),delete this.a};function rS(p,_){if(k(p))_&&(p=N(p,_));else if(p&&typeof p.handleEvent=="function")p=N(p.handleEvent,p);else throw Error("Invalid listener argument");return d.setTimeout(p,0)}function Vh(p){Hn.call(this),this.g=p,this.a={}}G(Vh,Hn);var AE=[];function zh(p,_,I,j){T(I)||(I&&(AE[0]=I.toString()),I=AE);for(var V=0;V<I.length;V++){var H=Ni(_,I[V],j||p.handleEvent,!1,p.g||p);if(!H)break;p.a[H.key]=H}}function kE(p){je(p.a,function(_,I){this.a.hasOwnProperty(I)&&nd(_)},p),p.a={}}Vh.prototype.o=function(){Vh.K.o.call(this),kE(this)},Vh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qs(p){oi.call(this),this.a=null,this.g=p,p=er||is||ca&&!js("531")&&p.tagName=="TEXTAREA",this.h=new Vh(this),zh(this.h,this.g,p?["keydown","paste","cut","drop","input"]:"input",this)}G(qs,oi),qs.prototype.handleEvent=function(p){if(p.type=="input")er&&js(10)&&p.keyCode==0&&p.j==0||(h0(this),Vs(this,VM(p)));else if(p.type!="keydown"||BM(p)){var _=p.type=="keydown"?this.g.value:null;er&&p.keyCode==229&&(_=null);var I=VM(p);h0(this),this.a=rS(function(){this.a=null,this.g.value!=_&&Vs(this,I)},this)}};function h0(p){p.a!=null&&(d.clearTimeout(p.a),p.a=null)}function VM(p){return p=new yo(p.a),p.type="input",p}qs.prototype.o=function(){qs.K.o.call(this),this.h.m(),h0(this),delete this.g};function Lm(p,_){oi.call(this),p&&(this.Oa&&Ei(this),this.qa=p,this.Na=Ni(this.qa,"keypress",this,_),this.Ya=Ni(this.qa,"keydown",this.Jb,_,this),this.Oa=Ni(this.qa,"keyup",this.Kb,_,this))}G(Lm,oi),n=Lm.prototype,n.qa=null,n.Na=null,n.Ya=null,n.Oa=null,n.R=-1,n.X=-1,n.Ua=!1;var su={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},CE={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},f0=!ca||js("525"),jm=xl&&ya;n=Lm.prototype,n.Jb=function(p){(ca||is)&&(this.R==17&&!p.ctrlKey||this.R==18&&!p.altKey||xl&&this.R==91&&!p.metaKey)&&(this.X=this.R=-1),this.R==-1&&(p.ctrlKey&&p.keyCode!=17?this.R=17:p.altKey&&p.keyCode!=18?this.R=18:p.metaKey&&p.keyCode!=91&&(this.R=91)),f0&&!TE(p.keyCode,this.R,p.shiftKey,p.ctrlKey,p.altKey,p.metaKey)?this.handleEvent(p):(this.X=u0(p.keyCode),jm&&(this.Ua=p.altKey))},n.Kb=function(p){this.X=this.R=-1,this.Ua=p.altKey},n.handleEvent=function(p){var _=p.a,I=_.altKey;if(er&&p.type=="keypress")var j=this.X,V=j!=13&&j!=27?_.keyCode:0;else(ca||is)&&p.type=="keypress"?(j=this.X,V=0<=_.charCode&&63232>_.charCode&&Bh(j)?_.charCode:0):Zl&&!ca?(j=this.X,V=Bh(j)?_.keyCode:0):(p.type=="keypress"?(jm&&(I=this.Ua),_.keyCode==_.charCode?32>_.keyCode?(j=_.keyCode,V=0):(j=this.X,V=_.charCode):(j=_.keyCode||this.X,V=_.charCode||0)):(j=_.keyCode||this.X,V=_.charCode||0),xl&&V==63&&j==224&&(j=191));var H=j=u0(j);j?63232<=j&&j in su?H=su[j]:j==25&&p.shiftKey&&(H=9):_.keyIdentifier&&_.keyIdentifier in CE&&(H=CE[_.keyIdentifier]),ya&&f0&&p.type=="keypress"&&!TE(H,this.R,p.shiftKey,p.ctrlKey,I,p.metaKey)||(p=H==this.R,this.R=H,_=new zM(H,V,p,_),_.altKey=I,Vs(this,_))},n.N=function(){return this.qa};function Ei(p){p.Na&&(nd(p.Na),nd(p.Ya),nd(p.Oa),p.Na=null,p.Ya=null,p.Oa=null),p.qa=null,p.R=-1,p.X=-1}n.o=function(){Lm.K.o.call(this),Ei(this)};function zM(p,_,I,j){yo.call(this,j),this.type="key",this.keyCode=p,this.j=_,this.repeat=I}G(zM,yo);function Fm(p,_,I,j){this.top=p,this.right=_,this.bottom=I,this.left=j}Fm.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Fm.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Fm.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Fm.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};function p0(p,_){var I=Gc(p);return I.defaultView&&I.defaultView.getComputedStyle&&(p=I.defaultView.getComputedStyle(p,null))&&(p[_]||p.getPropertyValue(_))||""}function $m(p){try{var _=p.getBoundingClientRect()}catch{return{left:0,top:0,right:0,bottom:0}}return er&&p.ownerDocument.body&&(p=p.ownerDocument,_.left-=p.documentElement.clientLeft+p.body.clientLeft,_.top-=p.documentElement.clientTop+p.body.clientTop),_}function Hh(p,_){_=_||qi(document);var I=_||qi(document),j=DE(p),V=DE(I);if(!er||9<=Number(Zf)){re=p0(I,"borderLeftWidth");var H=p0(I,"borderRightWidth");ue=p0(I,"borderTopWidth"),Re=p0(I,"borderBottomWidth"),H=new Fm(parseFloat(ue),parseFloat(H),parseFloat(Re),parseFloat(re))}else{var re=Gh(I,"borderLeft");H=Gh(I,"borderRight");var ue=Gh(I,"borderTop"),Re=Gh(I,"borderBottom");H=new Fm(ue,H,Re,re)}I==qi(document)?(re=j.a-I.scrollLeft,j=j.g-I.scrollTop,!er||10<=Number(Zf)||(re+=H.left,j+=H.top)):(re=j.a-V.a-H.left,j=j.g-V.g-H.top),V=p.offsetWidth,H=p.offsetHeight,ue=ca&&!V&&!H,h(V)&&!ue||!p.getBoundingClientRect?p=new _l(V,H):(p=$m(p),p=new _l(p.right-p.left,p.bottom-p.top)),V=I.clientHeight-p.height,H=I.scrollLeft,ue=I.scrollTop,H+=Math.min(re,Math.max(re-(I.clientWidth-p.width),0)),ue+=Math.min(j,Math.max(j-V,0)),I=new ss(H,ue),_.scrollLeft=I.a,_.scrollTop=I.g}function DE(p){var _=Gc(p),I=new ss(0,0),j=_?Gc(_):document;return j=!er||9<=Number(Zf)||ec(j).a.compatMode=="CSS1Compat"?j.documentElement:j.body,p==j||(p=$m(p),j=ec(_).a,_=qi(j),j=j.parentWindow||j.defaultView,_=er&&js("10")&&j.pageYOffset!=_.scrollTop?new ss(_.scrollLeft,_.scrollTop):new ss(j.pageXOffset||_.scrollLeft,j.pageYOffset||_.scrollTop),I.a=p.left+_.a,I.g=p.top+_.g),I}var IE={thin:2,medium:4,thick:6};function Gh(p,_){if((p.currentStyle?p.currentStyle[_+"Style"]:null)=="none")return 0;var I=p.currentStyle?p.currentStyle[_+"Width"]:null;if(I in IE)p=IE[I];else if(/^\d+px?$/.test(I))p=parseInt(I,10);else{_=p.style.left;var j=p.runtimeStyle.left;p.runtimeStyle.left=p.currentStyle.left,p.style.left=I,I=p.style.pixelLeft,p.style.left=_,p.runtimeStyle.left=j,p=+I}return p}function Il(){}w(Il),Il.prototype.a=0;function Wh(p){oi.call(this),this.s=p||ec(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}G(Wh,oi),n=Wh.prototype,n.Lb=Il.Xa(),n.N=function(){return this.g};function ir(p,_){return p.g?ep(_,p.g||p.s.a):null}function Bm(p){return p.L||(p.L=new Vh(p)),p.L}n.Za=function(p){if(this.Y&&this.Y!=p)throw Error("Method not supported");Wh.K.Za.call(this,p)},n.kb=function(){this.g=this.s.a.createElement("DIV")},n.render=function(p){if(this.na)throw Error("Component already rendered");this.g||this.kb(),p?p.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},n.v=function(){this.na=!0,g0(this,function(p){!p.na&&p.N()&&p.v()})},n.ya=function(){g0(this,function(p){p.na&&p.ya()}),this.L&&kE(this.L),this.na=!1},n.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),g0(this,function(p){p.m()}),this.g&&or(this.g),this.Y=this.g=this.oa=this.Ea=null,Wh.K.o.call(this)};function g0(p,_){p.Ea&&z(p.Ea,_,void 0)}n.removeChild=function(p,_){if(p){var I=f(p)?p:p.cb||(p.cb=":"+(p.Lb.a++).toString(36));if(this.oa&&I?(p=this.oa,p=(p!==null&&I in p?p[I]:void 0)||null):p=null,I&&p){var j=this.oa;if(I in j&&delete j[I],De(this.Ea,p),_&&(p.ya(),p.g&&or(p.g)),_=p,_==null)throw Error("Unable to set parent component");_.Y=null,Wh.K.Za.call(_,null)}}if(!p)throw Error("Child is not in parent component");return p};function Ai(p,_){var I=Py(p,"firebaseui-textfield");_?(pc(p,"firebaseui-input-invalid"),ci(p,"firebaseui-input"),I&&pc(I,"firebaseui-textfield-invalid")):(pc(p,"firebaseui-input"),ci(p,"firebaseui-input-invalid"),I&&ci(I,"firebaseui-textfield-invalid"))}function pd(p,_,I){_=new qs(_),Pi(p,R(Us,_)),zh(Bm(p),_,"input",I)}function Um(p,_,I){_=new Lm(_),Pi(p,R(Us,_)),zh(Bm(p),_,"key",function(j){j.keyCode==13&&(j.stopPropagation(),j.preventDefault(),I(j))})}function gd(p,_,I){_=new Uh(_),Pi(p,R(Us,_)),zh(Bm(p),_,"focusin",I)}function Qi(p,_,I){_=new Uh(_),Pi(p,R(Us,_)),zh(Bm(p),_,"focusout",I)}function yi(p,_,I){_=new Ep(_),Pi(p,R(Us,_)),zh(Bm(p),_,"action",function(j){j.stopPropagation(),j.preventDefault(),I(j)})}function hs(p){ci(p,"firebaseui-hidden")}function ur(p,_){_&&ed(p,_),pc(p,"firebaseui-hidden")}function Vm(p){return!Hi(p,"firebaseui-hidden")&&p.style.display!="none"}function Ap(p){p=p||{};var _=p.email,I=p.disabled,j='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return j=p.wc?j+"Enter new email address":j+"Email",j+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+Ra(_??"")+'"'+(I?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',Et(j)}function jo(p){p=p||{},p=p.label;var _='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return _=p?_+fn(p):_+"Next",Et(_+"</button>")}function ui(){var p=""+jo({label:mi("Sign In")});return Et(p)}function Fo(){var p=""+jo({label:mi("Save")});return Et(p)}function Sa(){var p=""+jo({label:mi("Continue")});return Et(p)}function ME(p){p=p||{},p=p.label;var _='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return _=p?_+fn(p):_+"Choose password",Et(_+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function PE(){var p={},_='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return _=p.current?_+"Current password":_+"Password",Et(_+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function HM(){return Et('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function $o(p){p=p||{},p=p.label;var _='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return _=p?_+fn(p):_+"Cancel",Et(_+"</button>")}function $r(p){var _="";return p.F&&p.D&&(_+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),Et(_)}function xo(p){var _="";return p.F&&p.D&&(_+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),Et(_)}function NE(p){return p='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+fn(p.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',Et(p)}NE.a="firebaseui.auth.soy2.element.infoBar";function fs(p){var _=p.content;return p=p.Ab,Et('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(p?" "+Ra(p):"")+'">'+fn(_)+"</dialog>")}function RE(p){var _=p.message;return Et(fs({content:np('<div class="firebaseui-dialog-icon-wrapper"><div class="'+Ra(p.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+fn(_)+"</div>")}))}RE.a="firebaseui.auth.soy2.element.progressDialog";function md(p){var _='<div class="firebaseui-list-box-actions">';p=p.items;for(var I=p.length,j=0;j<I;j++){var V=p[j];_+='<button type="button" data-listboxid="'+Ra(V.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(V.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+Ra(V.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+fn(V.label)+"</div></button>"}return _=""+fs({Ab:mi("firebaseui-list-box-dialog"),content:np(_+"</div>")}),Et(_)}md.a="firebaseui.auth.soy2.element.listBoxDialog";function lu(p){return p=p||{},Et(p.tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}lu.a="firebaseui.auth.soy2.element.busyIndicator";function Bo(p,_){return p=p||{},p=p.ga,sr(p.S?p.S:_.hb[p.providerId]?""+_.hb[p.providerId]:p.providerId&&p.providerId.indexOf("saml.")==0||p.providerId&&p.providerId.indexOf("oidc.")==0?p.providerId.substring(5):""+p.providerId)}function m0(p){OE(p,"upgradeElement")}function v0(p){OE(p,"downgradeElements")}var cu=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function OE(p,_){p&&window.componentHandler&&window.componentHandler[_]&&cu.forEach(function(I){Hi(p,I)&&window.componentHandler[_](p),z(tc(I,p),function(j){window.componentHandler[_](j)})})}function kp(p,_,I){if(qh.call(this),document.body.appendChild(p),p.showModal||window.dialogPolyfill.registerDialog(p),p.showModal(),m0(p),_&&yi(this,p,function(H){var re=p.getBoundingClientRect();(H.clientX<re.left||re.left+re.width<H.clientX||H.clientY<re.top||re.top+re.height<H.clientY)&&qh.call(this)}),!I){var j=this.N().parentElement||this.N().parentNode;if(j){var V=this;this.da=function(){if(p.open){var H=p.getBoundingClientRect().height,re=j.getBoundingClientRect().height,ue=j.getBoundingClientRect().top-document.body.getBoundingClientRect().top,Re=j.getBoundingClientRect().left-document.body.getBoundingClientRect().left,it=p.getBoundingClientRect().width,Ft=j.getBoundingClientRect().width;p.style.top=(ue+(re-H)/2).toString()+"px",H=Re+(Ft-it)/2,p.style.left=H.toString()+"px",p.style.right=(document.body.getBoundingClientRect().width-H-it).toString()+"px"}else window.removeEventListener("resize",V.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function qh(){var p=Cp.call(this);p&&(v0(p),p.open&&p.close(),or(p),this.da&&window.removeEventListener("resize",this.da))}function Cp(){return ep("firebaseui-id-dialog")}function Dp(){or(LE.call(this))}function LE(){return ir(this,"firebaseui-id-info-bar")}function jE(){return ir(this,"firebaseui-id-dismiss-info-bar")}var y0={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function iS(p,_,I){Xc.call(this,p,_);for(var j in I)this[j]=I[j]}G(iS,Xc);function Ye(p,_,I,j,V){Wh.call(this,I),this.fb=p,this.eb=_,this.Fa=!1,this.Ga=j||null,this.A=this.ca=null,this.Z=an(y0),Te(this.Z,V||{})}G(Ye,Wh),n=Ye.prototype,n.kb=function(){var p=rc(this.fb,this.eb,this.Z,this.s);m0(p),this.g=p},n.v=function(){if(Ye.K.v.call(this),VT(ki(this),new iS("pageEnter",ki(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var p=this.Z.F;yi(this,this.bb(),function(){p()})}if(this.ab()&&this.Z.D){var _=this.Z.D;yi(this,this.ab(),function(){_()})}},n.ya=function(){VT(ki(this),new iS("pageExit",ki(this),{pageId:this.Ga})),Ye.K.ya.call(this)},n.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,v0(this.N()),Ye.K.o.call(this)};function GM(p){p.Fa=!0;var _=Hi(p.N(),"firebaseui-use-spinner");p.ca=window.setTimeout(function(){p.N()&&p.A===null&&(p.A=rc(lu,{tb:_},null,p.s),p.N().appendChild(p.A),m0(p.A))},500)}n.I=function(p,_,I,j){function V(){if(H.T)return null;H.Fa=!1,window.clearTimeout(H.ca),H.ca=null,H.A&&(v0(H.A),or(H.A),H.A=null)}var H=this;return H.Fa?null:(GM(H),p.apply(null,_).then(I,j).then(V,V))};function ki(p){return p.N().parentElement||p.N().parentNode}function b0(p,_,I){Um(p,_,function(){I.focus()})}function fr(p,_,I){Um(p,_,function(){I()})}L(Ye.prototype,{a:function(p){Dp.call(this);var _=rc(NE,{message:p},null,this.s);this.N().appendChild(_),yi(this,jE.call(this),function(){or(_)})},yc:Dp,Ac:LE,zc:jE,$:function(p,_){p=rc(RE,{Ma:p,message:_},null,this.s),kp.call(this,p)},h:qh,Cb:Cp,Cc:function(){return ir(this,"firebaseui-tos")},bb:function(){return ir(this,"firebaseui-tos-link")},ab:function(){return ir(this,"firebaseui-pp-link")},Dc:function(){return ir(this,"firebaseui-tos-list")}});function Qr(p,_,I){p=p||{},_=p.Va;var j=p.ia;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ap(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(_?$o(null):"")+jo(null)+'</div></div><div class="firebaseui-card-footer">'+(j?xo(I):$r(I))+"</div></form></div>",Et(p)}Qr.a="firebaseui.auth.soy2.page.signIn";function nr(p,_,I){return p=p||{},_=p.ia,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Ap(p)+PE()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+HM()+'</div><div class="firebaseui-form-actions">'+ui()+'</div></div><div class="firebaseui-card-footer">'+(_?xo(I):$r(I))+"</div></form></div>",Et(p)}nr.a="firebaseui.auth.soy2.page.passwordSignIn";function dr(p,_,I){p=p||{};var j=p.Tb;_=p.Ta;var V=p.ia,H='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Ap(p);return j?(p=p||{},p=p.name,p='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+Ra(p??"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',p=Et(p)):p="",I=H+p+ME(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(_?$o(null):"")+Fo()+'</div></div><div class="firebaseui-card-footer">'+(V?xo(I):$r(I))+"</div></form></div>",Et(I)}dr.a="firebaseui.auth.soy2.page.passwordSignUp";function Ir(p,_,I){return p=p||{},_=p.Ta,p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Ap(p)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(_?$o(null):"")+jo({label:mi("Send")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(p)}Ir.a="firebaseui.auth.soy2.page.passwordRecovery";function ps(p,_,I){_=p.G;var j="";return p="Follow the instructions sent to <strong>"+(fn(p.email)+"</strong> to recover your password"),j+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">',_&&(j+='<div class="firebaseui-form-actions">'+jo({label:mi("Done")})+"</div>"),j+='</div><div class="firebaseui-card-footer">'+$r(I)+"</div></div>",Et(j)}ps.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent";function vd(p,_,I){return Et('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+lu(null)+"</div></div>")}vd.a="firebaseui.auth.soy2.page.callback";function Ip(p,_,I){return Et('<div class="firebaseui-container firebaseui-id-page-spinner">'+lu({tb:!0})+"</div>")}Ip.a="firebaseui.auth.soy2.page.spinner";function aS(){return Et('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}aS.a="firebaseui.auth.soy2.page.blank";function uu(p,_,I){_="",p="A sign-in email with additional instructions was sent to <strong>"+(fn(p.email)+"</strong>. Check your email to complete sign-in.");var j=Et('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>');return _+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+j+'</div><div class="firebaseui-form-actions">'+$o({label:mi("Back")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}uu.a="firebaseui.auth.soy2.page.emailLinkSignInSent";function Oi(p,_,I){return p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn't work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">`+Et('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+$o({label:mi("Back")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(p)}Oi.a="firebaseui.auth.soy2.page.emailNotReceived";function yd(p,_,I){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Ap(p)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o(null)+jo(null)+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(p)}yd.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation";function Yh(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o({label:mi("Dismiss")})+"</div></div></div>";return Et(p)}Yh.a="firebaseui.auth.soy2.page.differentDeviceError";function oS(){var p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o({label:mi("Dismiss")})+"</div></div></div>";return Et(p)}oS.a="firebaseui.auth.soy2.page.anonymousUserMismatch";function Ys(p,_,I){return _="",p="You’ve already used <strong>"+(fn(p.email)+"</strong> to sign in. Enter your password for that account."),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+p+"</p>"+PE()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+HM()+'</div><div class="firebaseui-form-actions">'+ui()+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}Ys.a="firebaseui.auth.soy2.page.passwordLinking";function Mp(p,_,I){var j=p.email;return _="",p=""+Bo(p,I),p=mi(p),j="You’ve already used <strong>"+(fn(j)+("</strong>. You can connect your <strong>"+(fn(p)+("</strong> account with <strong>"+(fn(j)+"</strong> by signing in with email link below."))))),p="For this flow to successfully connect your "+(fn(p)+" account with this email, you have to open the link on the same device or browser."),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+j+'<p class="firebaseui-text firebaseui-text-justify">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ui()+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}Mp.a="firebaseui.auth.soy2.page.emailLinkSignInLinking";function zm(p,_,I){_="";var j=""+Bo(p,I);return j=mi(j),p="You originally intended to connect <strong>"+(fn(j)+"</strong> to your email account but have opened the link on a different device where you are not signed in."),j="If you still want to connect your <strong>"+(fn(j)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device."),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+p+'</p><p class="firebaseui-text firebaseui-text-justify">'+j+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Sa()+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}zm.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice";function Uo(p,_,I){var j=p.email;return _="",p=""+Bo(p,I),p=mi(p),j="You’ve already used <strong>"+(fn(j)+("</strong>. Sign in with "+(fn(p)+" to continue."))),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+j+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+jo({label:mi("Sign in with "+p)})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}Uo.a="firebaseui.auth.soy2.page.federatedLinking";function sS(p,_,I){p=p||{};var j=p.kc;_=p.yb,p=p.Eb;var V='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return j?(j="<strong>"+(fn(j)+"</strong> is not authorized to view the requested page."),V+=j):V+="User is not authorized to view the requested page.",V+="</p>",_&&(_="Please contact <strong>"+(fn(_)+"</strong> for authorization."),V+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+_+"</p>"),V+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',p&&(V+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),V+='</div><div class="firebaseui-form-actions">'+$o({label:mi("Back")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(V)}sS.a="firebaseui.auth.soy2.page.unauthorizedUser";function lS(p,_,I){return _="",p="To continue sign in with <strong>"+(fn(p.email)+"</strong> on this device, you have to recover the password."),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o(null)+jo({label:mi("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}lS.a="firebaseui.auth.soy2.page.unsupportedProvider";function w0(p){var _="",I='<p class="firebaseui-text">for <strong>'+(fn(p.email)+"</strong></p>");return _+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+I+ME(tp(p))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+Fo()+"</div></div></form></div>",Et(_)}w0.a="firebaseui.auth.soy2.page.passwordReset";function x0(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}x0.a="firebaseui.auth.soy2.page.passwordResetSuccess";function bd(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}bd.a="firebaseui.auth.soy2.page.passwordResetFailure";function Fa(p){var _=p.G,I="";return p="Your sign-in email address has been changed back to <strong>"+(fn(p.email)+"</strong>."),I+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(_?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></form></div>",Et(I)}Fa.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess";function wd(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}wd.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure";function Pp(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}Pp.a="firebaseui.auth.soy2.page.emailVerificationSuccess";function Np(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}Np.a="firebaseui.auth.soy2.page.emailVerificationFailure";function cS(p){var _=p.G,I="";return p="You can now sign in with your new email <strong>"+(fn(p.email)+"</strong>."),I+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+'</p></div><div class="firebaseui-card-actions">'+(_?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(I)}cS.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess";function uS(p){return p=p||{},p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}uS.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure";function FE(p){var _=p.factorId,I=p.phoneNumber;p=p.G;var j='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(_){case"phone":_="The <strong>"+(fn(_)+(" "+(fn(I)+"</strong> was removed as a second authentication step."))),j+=_;break;default:j+="The device or app was removed as a second authentication step."}return j+=`</p><p class="firebaseui-text">If you don't recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">`+(p?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></form></div>",Et(j)}FE.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess";function Hm(p){return p=p||{},p=`<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn't remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn't work, contact support for assistance.</p></div><div class="firebaseui-card-actions">`+(p.G?'<div class="firebaseui-form-actions">'+Sa()+"</div>":"")+"</div></div>",Et(p)}Hm.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure";function dS(p){var _=p.zb;return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(p.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',_&&(p+=jo({label:mi("Retry")})),Et(p+"</div></div></div>")}dS.a="firebaseui.auth.soy2.page.recoverableError";function gs(p){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+fn(p.errorMessage)+"</p></div></div>",Et(p)}gs.a="firebaseui.auth.soy2.page.unrecoverableError";function $E(p,_,I){var j=p.Qb;return _="",p="Continue with "+(fn(p.jc)+"?"),j="You originally wanted to sign in with "+fn(j),_+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+p+'</h2><p class="firebaseui-text">'+j+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o(null)+jo({label:mi("Continue")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form></div>",Et(_)}$E.a="firebaseui.auth.soy2.page.emailMismatch";function ms(p,_,I){var j='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';p=p.Sb,_=p.length;for(var V=0;V<_;V++){var H={ga:p[V]},re=I;H=H||{};var ue=H.ga,Re=H;Re=Re||{};var it="";switch(Re.ga.providerId){case"google.com":it+="firebaseui-idp-google";break;case"github.com":it+="firebaseui-idp-github";break;case"facebook.com":it+="firebaseui-idp-facebook";break;case"twitter.com":it+="firebaseui-idp-twitter";break;case"phone":it+="firebaseui-idp-phone";break;case"anonymous":it+="firebaseui-idp-anonymous";break;case"password":it+="firebaseui-idp-password";break;default:it+="firebaseui-idp-generic"}Re='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+Ra(sr(it))+' firebaseui-id-idp-button" data-provider-id="'+Ra(ue.providerId)+'" style="background-color:',it=(it=H)||{},it=it.ga,Re=Re+Ra(Yc(sr(it.ta?it.ta:re.wa[it.providerId]?""+re.wa[it.providerId]:it.providerId.indexOf("saml.")==0?""+re.wa.saml:it.providerId.indexOf("oidc.")==0?""+re.wa.oidc:""+re.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var Ft=H;it=re,Ft=Ft||{},Ft=Ft.ga,it=Oy(Ft.za?ic(Ft.za):it.xa[Ft.providerId]?ic(it.xa[Ft.providerId]):Ft.providerId.indexOf("saml.")==0?ic(it.xa.saml):Ft.providerId.indexOf("oidc.")==0?ic(it.xa.oidc):ic(it.xa.password)),Re=Re+Ra(ic(it))+'"></span>',ue.providerId=="password"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=fn(ue.V):ue.S?(H="Sign in with "+fn(Bo(H,re)),Re+=H):Re+="Sign in with email",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+fn(ue.S):Re+"Email",Re+="</span>"):ue.providerId=="phone"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=fn(ue.V):ue.S?(H="Sign in with "+fn(Bo(H,re)),Re+=H):Re+="Sign in with phone",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+fn(ue.S):Re+"Phone",Re+="</span>"):ue.providerId=="anonymous"?(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=fn(ue.V):ue.S?(H="Sign in with "+fn(Bo(H,re)),Re+=H):Re+="Continue as guest",Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',Re=ue.S?Re+fn(ue.S):Re+"Guest",Re+="</span>"):(Re+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',ue.V?Re+=fn(ue.V):(it="Sign in with "+fn(Bo(H,re)),Re+=it),Re+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(ue.S?fn(ue.S):fn(Bo(H,re)))+"</span>"),ue=Et(Re+"</button>"),j+='<li class="firebaseui-list-item">'+ue+"</li>"}return j+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+xo(I)+"</div></div>",Et(j)}ms.a="firebaseui.auth.soy2.page.providerSignIn";function BE(p,_,I){p=p||{};var j=p.Gb,V=p.Va;_=p.ia,p=p||{},p=p.Aa,p='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+Ra(p??"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Et(p);var H;return j?H=Et('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):H="",H=p+H+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(V?$o(null):"")+jo({label:mi("Verify")})+'</div></div><div class="firebaseui-card-footer">',_?(_='<p class="firebaseui-tos firebaseui-phone-tos">',_=I.F&&I.D?_+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':_+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",I=Et(_+"</p>")):I=Et('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+$r(I),Et(H+I+"</div></form></div>")}BE.a="firebaseui.auth.soy2.page.phoneSignInStart";function UE(p,_,I){p=p||{},_=p.phoneNumber;var j="";return p='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+(fn(_)+"</a>"),fn(_),_=j,j=Et('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'),I='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+p+"</p>"+j+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+$o(null)+jo({label:mi("Continue")})+'</div></div><div class="firebaseui-card-footer">'+$r(I)+"</div></form>",p=Et('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),Et(_+(I+p+"</div>"))}UE.a="firebaseui.auth.soy2.page.phoneSignInFinish";function WM(){return Et('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}WM.a="firebaseui.auth.soy2.page.signOut";function xd(p,_,I){var j='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';p=p.ec,_=p.length;for(var V=0;V<_;V++){var H=p[V],re="",ue=fn(H.displayName),Re=H.tenantId?H.tenantId:"top-level-project";Re=mi(Re),re+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+Ra(Re)+' firebaseui-id-tenant-selection-button"'+(H.tenantId?'data-tenant-id="'+Ra(H.tenantId)+'"':"")+'style="background-color:'+Ra(Yc(H.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+Ra(ic(H.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',H.V?re+=fn(H.V):(H="Sign in to "+fn(H.displayName),re+=H),re=Et(re+('</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+ue+"</span></button>")),j+='<li class="firebaseui-list-item">'+re+"</li>"}return j+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+xo(I)+"</div></div>",Et(j)}xd.a="firebaseui.auth.soy2.page.selectTenant";function S0(p,_,I){return p='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Ap(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+jo(null)+'</div></div><div class="firebaseui-card-footer">'+xo(I)+"</div></form></div>",Et(p)}S0.a="firebaseui.auth.soy2.page.providerMatchByEmail";function Ji(){return ir(this,"firebaseui-id-submit")}function bi(){return ir(this,"firebaseui-id-secondary-link")}function _a(p,_){yi(this,Ji.call(this),function(j){p(j)});var I=bi.call(this);I&&_&&yi(this,I,function(j){_(j)})}function _0(){return ir(this,"firebaseui-id-password")}function T0(){return ir(this,"firebaseui-id-password-error")}function hS(){var p=_0.call(this),_=T0.call(this);pd(this,p,function(){Vm(_)&&(Ai(p,!0),hs(_))})}function fS(){var p=_0.call(this),_=T0.call(this);return xa(p)?(Ai(p,!0),hs(_),_=!0):(Ai(p,!1),ur(_,sr("Enter your password").toString()),_=!1),_?xa(p):null}function Gm(p,_,I,j,V,H){Ye.call(this,Ys,{email:p},H,"passwordLinking",{F:j,D:V}),this.w=_,this.H=I}s(Gm,Ye),Gm.prototype.v=function(){this.P(),this.M(this.w,this.H),fr(this,this.i(),this.w),this.i().focus(),Ye.prototype.v.call(this)},Gm.prototype.o=function(){this.w=null,Ye.prototype.o.call(this)},Gm.prototype.j=function(){return xa(ir(this,"firebaseui-id-email"))},L(Gm.prototype,{i:_0,B:T0,P:hS,u:fS,ea:Ji,ba:bi,M:_a});var IF=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Sd(){return ir(this,"firebaseui-id-email")}function _d(){return ir(this,"firebaseui-id-email-error")}function Rp(p){var _=Sd.call(this),I=_d.call(this);pd(this,_,function(){Vm(I)&&(Ai(_,!0),hs(I))}),p&&Um(this,_,function(){p()})}function gc(){return $e(xa(Sd.call(this))||"")}function Td(){var p=Sd.call(this),_=_d.call(this),I=xa(p)||"";return I?IF.test(I)?(Ai(p,!0),hs(_),_=!0):(Ai(p,!1),ur(_,sr("That email address isn't correct").toString()),_=!1):(Ai(p,!1),ur(_,sr("Enter your email address to continue").toString()),_=!1),_?$e(xa(p)):null}function Wm(p,_,I,j,V,H,re){Ye.call(this,nr,{email:I,ia:!!H},re,"passwordSignIn",{F:j,D:V}),this.w=p,this.H=_}s(Wm,Ye),Wm.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),b0(this,this.l(),this.i()),fr(this,this.i(),this.w),xa(this.l())?this.i().focus():this.l().focus(),Ye.prototype.v.call(this)},Wm.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},L(Wm.prototype,{l:Sd,U:_d,P:Rp,M:gc,j:Td,i:_0,B:T0,ea:hS,u:fS,ua:Ji,pa:bi,ba:_a});function Er(p,_,I,j,V,H){Ye.call(this,p,_,j,V||"notice",H),this.i=I||null}G(Er,Ye),Er.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Er.K.v.call(this)},Er.prototype.o=function(){this.i=null,Er.K.o.call(this)},L(Er.prototype,{l:Ji,w:bi,u:_a});function E0(p,_,I,j,V){Er.call(this,ps,{email:p,G:!!_},_,V,"passwordRecoveryEmailSent",{F:I,D:j})}G(E0,Er);function VE(p,_){Er.call(this,Pp,{G:!!p},p,_,"emailVerificationSuccess")}G(VE,Er);function zE(p,_){Er.call(this,Np,{G:!!p},p,_,"emailVerificationFailure")}G(zE,Er);function HE(p,_,I){Er.call(this,cS,{email:p,G:!!_},_,I,"verifyAndChangeEmailSuccess")}G(HE,Er);function A0(p,_){Er.call(this,uS,{G:!!p},p,_,"verifyAndChangeEmailFailure")}G(A0,Er);function GE(p,_){Er.call(this,Hm,{G:!!p},p,_,"revertSecondFactorAdditionFailure")}G(GE,Er);function WE(p){Er.call(this,WM,void 0,void 0,p,"signOut")}G(WE,Er);function Hr(p,_){Er.call(this,x0,{G:!!p},p,_,"passwordResetSuccess")}G(Hr,Er);function pS(p,_){Er.call(this,bd,{G:!!p},p,_,"passwordResetFailure")}G(pS,Er);function qM(p,_){Er.call(this,wd,{G:!!p},p,_,"emailChangeRevokeFailure")}G(qM,Er);function qE(p,_,I){Er.call(this,dS,{errorMessage:p,zb:!!_},_,I,"recoverableError")}G(qE,Er);function YM(p,_){Er.call(this,gs,{errorMessage:p},void 0,_,"unrecoverableError")}G(YM,Er);function k0(p){if(p.code==="auth/invalid-credential"&&p.message&&p.message.indexOf("error=consent_required")!==-1)return{code:"auth/user-cancelled"};if(p.message&&p.message.indexOf("HTTP Cloud Function returned an error:")!==-1){var _=JSON.parse(p.message.substring(p.message.indexOf("{"),p.message.lastIndexOf("}")+1));return{code:p.code,message:_&&_.error&&_.error.message||p.message}}return p}function Ed(p,_,I,j){function V(re){if(!re.name||re.name!="cancel"){e:{var ue=re.message;try{var Re=((JSON.parse(ue).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(Re&&Re.length){var it=!0;break e}}catch{}it=!1}if(it)re=ki(_),_.m(),Gr(p,re,void 0,sr("Your sign-in session has expired. Please try again.").toString());else{if(it=re&&re.message||"",re.code){if(re.code=="auth/email-already-in-use"||re.code=="auth/credential-already-in-use")return;it=Ar(re)}_.a(it)}}}if(aP(p),j)return C0(p,I),vi();if(!I.credential)throw Error("No credential found!");if(!Wn(p).currentUser&&!I.user)throw Error("User not logged in.");try{var H=cA(p,I)}catch(re){return bo(re.code||re.message,re),_.a(re.code||re.message),vi()}return I=H.then(function(re){C0(p,re)},V).then(void 0,V),$n(p,H),vi(I)}function C0(p,_){if(!_.user)throw Error("No user found");var I=ua(Ze(p));if(fc(Ze(p))&&I&&Lo("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),I){I=ua(Ze(p));var j=sE(un(p))||void 0;ds(Em,un(p));var V=!1;Mx()?((!I||I(_,j))&&(V=!0,Ka(window.opener.location,Ad(p,j))),I||window.close()):(!I||I(_,j))&&(V=!0,Ka(window.location,Ad(p,j))),V||p.reset()}else{I=_.user,_=_.credential,j=fc(Ze(p)),V=sE(un(p))||void 0,ds(Em,un(p));var H=!1;Mx()?((!j||j(I,_,V))&&(H=!0,Ka(window.opener.location,Ad(p,V))),j||window.close()):(!j||j(I,_,V))&&(H=!0,Ka(window.location,Ad(p,V))),H||p.reset()}}function Ad(p,_){if(p=_||Ze(p).a.get("signInSuccessUrl"),!p)throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return p}function Ar(p){var _={code:p.code};_=_||{};var I="";switch(_.code){case"auth/email-already-in-use":I+="The email address is already used by another account";break;case"auth/requires-recent-login":I+=ht();break;case"auth/too-many-requests":I+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":I+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":I+="That email address doesn't match an existing account";break;case"auth/user-token-expired":I+=ht();break;case"auth/weak-password":I+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":I+="The email and password you entered don't match";break;case"auth/network-request-failed":I+="A network error has occurred";break;case"auth/invalid-phone-number":I+=q();break;case"auth/invalid-verification-code":I+=sr("Wrong code. Try again.");break;case"auth/code-expired":I+="This code is no longer valid";break;case"auth/expired-action-code":I+="This code has expired.";break;case"auth/invalid-action-code":I+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(_=sr(I).toString())return _;try{return JSON.parse(p.message),bo("Internal error: "+p.message,void 0),le().toString()}catch{return p.message}}function gS(p,_,I){var j=xp[_]&&en.auth[xp[_]]?new en.auth[xp[_]]:_.indexOf("saml.")==0?new en.auth.SAMLAuthProvider(_):new en.auth.OAuthProvider(_);if(!j)throw Error("Invalid Firebase Auth provider!");var V=Sp(Ze(p),_);if(j.addScope)for(var H=0;H<V.length;H++)j.addScope(V[H]);return V=Pm(Ze(p),_)||{},I&&(_==en.auth.GoogleAuthProvider.PROVIDER_ID?p="login_hint":_==en.auth.GithubAuthProvider.PROVIDER_ID?p="login":p=(p=Im(Ze(p),_))&&p.Ob,p&&(V[p]=I)),j.setCustomParameters&&j.setCustomParameters(V),j}function Op(p,_,I,j){function V(){PM(new xm(p.h.tenantId||null),un(p)),$n(p,_.I(N(p.dc,p),[Re],function(){if((window.location&&window.location.protocol)==="file:")return $n(p,zp(p).then(function(it){_.m(),ds(Oh,un(p)),Mt("callback",p,ue,vi(it))},H))},re))}function H(it){if(ds(Oh,un(p)),!it.name||it.name!="cancel")switch(it=k0(it),it.code){case"auth/popup-blocked":V();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":break;case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":_.a(Ar(it));break;case"auth/admin-restricted-operation":_.m(),jh(Ze(p))?Mt("handleUnauthorizedUser",p,ue,null,I):Mt("callback",p,ue,Al(it));break;default:_.m(),Mt("callback",p,ue,Al(it))}}function re(it){ds(Oh,un(p)),it.name&&it.name=="cancel"||(bo("signInWithRedirect: "+it.code,void 0),it=Ar(it),_.Ga=="blank"&&Qx(Ze(p))?(_.m(),Mt("providerSignIn",p,ue,it)):_.a(it))}var ue=ki(_),Re=gS(p,I,j);fd(Ze(p))==ou?V():$n(p,lP(p,Re).then(function(it){_.m(),Mt("callback",p,ue,vi(it))},H))}function Lp(p,_){$n(p,_.I(N(p.$b,p),[],function(I){return _.m(),Ed(p,_,I,!0)},function(I){I.name&&I.name=="cancel"||(bo("ContinueAsGuest: "+I.code,void 0),I=Ar(I),_.a(I))}))}function du(p,_,I){function j(H){var re=!1;return H=_.I(N(p.ac,p),[H],function(ue){var Re=ki(_);_.m(),Mt("callback",p,Re,vi(ue)),re=!0},function(ue){if((!ue.name||ue.name!="cancel")&&(!ue||ue.code!="auth/credential-already-in-use"))if(ue&&ue.code=="auth/email-already-in-use"&&ue.email&&ue.credential){var Re=ki(_);_.m(),Mt("callback",p,Re,Al(ue))}else ue&&ue.code=="auth/admin-restricted-operation"&&jh(Ze(p))?(ue=ki(_),_.m(),Mt("handleUnauthorizedUser",p,ue,null,en.auth.GoogleAuthProvider.PROVIDER_ID)):(ue=Ar(ue),_.a(ue))}),$n(p,H),H.then(function(){return re},function(){return!1})}if(I&&I.credential&&I.clientId===Kx(Ze(p))){if(Sp(Ze(p),en.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var V=JSON.parse(atob(I.credential.split(".")[1])).email}catch{}return Op(p,_,en.auth.GoogleAuthProvider.PROVIDER_ID,V),vi(!0)}return j(en.auth.GoogleAuthProvider.credential(I.credential))}return I&&_.a(sr("The selected credential for the authentication provider is not supported!").toString()),vi(!1)}function D0(p,_){var I=_.j(),j=_.u();if(I)if(j){var V=en.auth.EmailAuthProvider.credential(I,j);$n(p,_.I(N(p.bc,p),[I,j],function(H){return Ed(p,_,{user:H.user,credential:V,operationType:H.operationType,additionalUserInfo:H.additionalUserInfo})},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/email-already-in-use":break;case"auth/email-exists":Ai(_.l(),!1),ur(_.U(),Ar(H));break;case"auth/too-many-requests":case"auth/wrong-password":Ai(_.i(),!1),ur(_.B(),Ar(H));break;default:bo("verifyPassword: "+H.message,void 0),_.a(Ar(H))}}))}else _.i().focus();else _.l().focus()}function mS(p){return p=Dm(Ze(p)),p.length==1&&p[0]==en.auth.EmailAuthProvider.PROVIDER_ID}function YE(p){return p=Dm(Ze(p)),p.length==1&&p[0]==en.auth.PhoneAuthProvider.PROVIDER_ID}function Gr(p,_,I,j){mS(p)?j?Mt("signIn",p,_,I,j):I0(p,_,I):p&&YE(p)&&!j?Mt("phoneSignInStart",p,_):p&&Qx(Ze(p))&&!j?Mt("federatedRedirect",p,_,I):Mt("providerSignIn",p,_,j,I)}function KE(p,_,I,j){var V=ki(_);$n(p,_.I(N(Wn(p).fetchSignInMethodsForEmail,Wn(p)),[I],function(H){_.m(),XE(p,V,H,I,j)},function(H){H=Ar(H),_.a(H)}))}function XE(p,_,I,j,V,H){I.length||Qa(Ze(p))&&!Qa(Ze(p))?fe(I,en.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Mt("passwordSignIn",p,_,j,H):I.length==1&&I[0]===en.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Qa(Ze(p))?Mt("sendEmailLinkForSignIn",p,_,j,function(){Mt("signIn",p,_)}):Mt("unsupportedProvider",p,_,j):(I=Yx(I,Dm(Ze(p))))?(lE(new Jy(j),un(p)),Mt("federatedSignIn",p,_,j,I,V)):Mt("unsupportedProvider",p,_,j):i0(Ze(p))?Mt("handleUnauthorizedUser",p,_,j,en.auth.EmailAuthProvider.PROVIDER_ID):Qa(Ze(p))?Mt("sendEmailLinkForSignIn",p,_,j,function(){Mt("signIn",p,_)}):Mt("passwordSignUp",p,_,j,void 0,void 0,H)}function ZE(p,_,I,j,V,H){var re=ki(_);$n(p,_.I(N(p.Ib,p),[I,H],function(){_.m(),Mt("emailLinkSignInSent",p,re,I,j,H)},V))}function I0(p,_,I){I?Mt("prefilledEmailSignIn",p,_,I):Mt("signIn",p,_)}function qm(){return Si(Dr(),"oobCode")}function vS(){var p=Si(Dr(),"continueUrl");return p?function(){Ka(window.location,p)}:null}function M0(p,_){Ye.call(this,oS,void 0,_,"anonymousUserMismatch"),this.i=p}s(M0,Ye),M0.prototype.v=function(){var p=this;yi(this,this.l(),function(){p.i()}),this.l().focus(),Ye.prototype.v.call(this)},M0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(M0.prototype,{l:bi}),xr.anonymousUserMismatch=function(p,_){var I=new M0(function(){I.m(),Gr(p,_)});I.render(_),Pn(p,I)};function Ym(p){Ye.call(this,vd,void 0,p,"callback")}s(Ym,Ye),Ym.prototype.I=function(p,_,I,j){return p.apply(null,_).then(I,j)};function yS(p,_,I){if(I.user){var j={user:I.user,credential:I.credential,operationType:I.operationType,additionalUserInfo:I.additionalUserInfo},V=hc(un(p)),H=V&&V.g;if(H&&!XM(I.user,H))MF(p,_,j);else{var re=V&&V.a;re?$n(p,I.user.linkWithCredential(re).then(function(ue){j={user:ue.user,credential:re,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo},KM(p,_,j)},function(ue){bS(p,_,ue)})):KM(p,_,j)}}else I=ki(_),_.m(),Dl(un(p)),Gr(p,I)}function KM(p,_,I){Dl(un(p)),Ed(p,_,I)}function bS(p,_,I){var j=ki(_);Dl(un(p)),I=Ar(I),_.m(),Gr(p,j,void 0,I)}function Km(p,_,I,j){var V=ki(_);$n(p,Wn(p).fetchSignInMethodsForEmail(I).then(function(H){_.m(),H.length?fe(H,en.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?Mt("passwordLinking",p,V,I):H.length==1&&H[0]===en.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Mt("emailLinkSignInLinking",p,V,I):(H=Yx(H,Dm(Ze(p))))?Mt("federatedLinking",p,V,I,H,j):(Dl(un(p)),Mt("unsupportedProvider",p,V,I)):(Dl(un(p)),Mt("passwordRecovery",p,V,I,!1,Ee().toString()))},function(H){bS(p,_,H)}))}function MF(p,_,I){var j=ki(_);$n(p,kd(p).then(function(){_.m(),Mt("emailMismatch",p,j,I)},function(V){V.name&&V.name=="cancel"||(V=Ar(V.code),_.a(V))}))}function XM(p,_){if(_==p.email)return!0;if(p.providerData){for(var I=0;I<p.providerData.length;I++)if(_==p.providerData[I].email)return!0}return!1}xr.callback=function(p,_,I){var j=new Ym;j.render(_),Pn(p,j),I=I||zp(p),$n(p,I.then(function(V){yS(p,j,V)},function(V){if((V=k0(V))&&(V.code=="auth/account-exists-with-different-credential"||V.code=="auth/email-already-in-use")&&V.email&&V.credential)lE(new Jy(V.email,V.credential),un(p)),Km(p,j,V.email);else if(V&&V.code=="auth/user-cancelled"){var H=hc(un(p)),re=Ar(V);H&&H.a?Km(p,j,H.g,re):H?KE(p,j,H.g,re):bS(p,j,V)}else V&&V.code=="auth/credential-already-in-use"||(V&&V.code=="auth/operation-not-supported-in-this-environment"&&mS(p)?yS(p,j,{user:null,credential:null}):V&&V.code=="auth/admin-restricted-operation"&&jh(Ze(p))?(j.m(),Dl(un(p)),Mt("handleUnauthorizedUser",p,_,null,null)):bS(p,j,V))}))};function Vn(p,_){Ye.call(this,Yh,void 0,_,"differentDeviceError"),this.i=p}s(Vn,Ye),Vn.prototype.v=function(){var p=this;yi(this,this.l(),function(){p.i()}),this.l().focus(),Ye.prototype.v.call(this)},Vn.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Vn.prototype,{l:bi}),xr.differentDeviceError=function(p,_){var I=new Vn(function(){I.m(),Gr(p,_)});I.render(_),Pn(p,I)};function jp(p,_,I,j){Ye.call(this,Fa,{email:p,G:!!I},j,"emailChangeRevoke"),this.l=_,this.i=I||null}s(jp,Ye),jp.prototype.v=function(){var p=this;yi(this,ir(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},jp.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},L(jp.prototype,{u:Ji,B:bi,w:_a});function Kh(){return ir(this,"firebaseui-id-new-password")}function Xm(){return ir(this,"firebaseui-id-password-toggle")}function ZM(){this.Ra=!this.Ra;var p=Xm.call(this),_=Kh.call(this);this.Ra?(_.type="text",ci(p,"firebaseui-input-toggle-off"),pc(p,"firebaseui-input-toggle-on")):(_.type="password",ci(p,"firebaseui-input-toggle-on"),pc(p,"firebaseui-input-toggle-off")),_.focus()}function Zm(){return ir(this,"firebaseui-id-new-password-error")}function Qm(){this.Ra=!1;var p=Kh.call(this);p.type="password";var _=Zm.call(this);pd(this,p,function(){Vm(_)&&(Ai(p,!0),hs(_))});var I=Xm.call(this);ci(I,"firebaseui-input-toggle-on"),pc(I,"firebaseui-input-toggle-off"),gd(this,p,function(){ci(I,"firebaseui-input-toggle-focus"),pc(I,"firebaseui-input-toggle-blur")}),Qi(this,p,function(){ci(I,"firebaseui-input-toggle-blur"),pc(I,"firebaseui-input-toggle-focus")}),yi(this,I,N(ZM,this))}function P0(){var p=Kh.call(this),_=Zm.call(this);return xa(p)?(Ai(p,!0),hs(_),_=!0):(Ai(p,!1),ur(_,sr("Enter your password").toString()),_=!1),_?xa(p):null}function hu(p,_,I){Ye.call(this,w0,{email:p},I,"passwordReset"),this.l=_}s(hu,Ye),hu.prototype.v=function(){this.H(),this.B(this.l),fr(this,this.i(),this.l),this.i().focus(),Ye.prototype.v.call(this)},hu.prototype.o=function(){this.l=null,Ye.prototype.o.call(this)},L(hu.prototype,{i:Kh,w:Zm,M:Xm,H:Qm,u:P0,U:Ji,P:bi,B:_a});function Jm(p,_,I,j,V){Ye.call(this,FE,{factorId:p,phoneNumber:I||null,G:!!j},V,"revertSecondFactorAdditionSuccess"),this.l=_,this.i=j||null}s(Jm,Ye),Jm.prototype.v=function(){var p=this;yi(this,ir(this,"firebaseui-id-reset-password-link"),function(){p.l()}),this.i&&(this.w(this.i),this.u().focus()),Ye.prototype.v.call(this)},Jm.prototype.o=function(){this.l=this.i=null,Ye.prototype.o.call(this)},L(Jm.prototype,{u:Ji,B:bi,w:_a});function PF(p,_,I,j,V){var H=I.u();H&&$n(p,I.I(N(Wn(p).confirmPasswordReset,Wn(p)),[j,H],function(){I.m();var re=new Hr(V);re.render(_),Pn(p,re)},function(re){QM(p,_,I,re)}))}function QM(p,_,I,j){(j&&j.code)=="auth/weak-password"?(p=Ar(j),Ai(I.i(),!1),ur(I.w(),p),I.i().focus()):(I&&I.m(),I=new pS,I.render(_),Pn(p,I))}function JM(p,_,I){var j=new jp(I,function(){$n(p,j.I(N(Wn(p).sendPasswordResetEmail,Wn(p)),[I],function(){j.m(),j=new E0(I,void 0,zi(Ze(p)),li(Ze(p))),j.render(_),Pn(p,j)},function(){j.a(Q().toString())}))});j.render(_),Pn(p,j)}function eP(p,_,I,j){var V=new Jm(j.factorId,function(){V.I(N(Wn(p).sendPasswordResetEmail,Wn(p)),[I],function(){V.m(),V=new E0(I,void 0,zi(Ze(p)),li(Ze(p))),V.render(_),Pn(p,V)},function(){V.a(Q().toString())})},j.phoneNumber);V.render(_),Pn(p,V)}xr.passwordReset=function(p,_,I,j){$n(p,Wn(p).verifyPasswordResetCode(I).then(function(V){var H=new hu(V,function(){PF(p,_,H,I,j)});H.render(_),Pn(p,H)},function(){QM(p,_)}))},xr.emailChangeRevocation=function(p,_,I){var j=null;$n(p,Wn(p).checkActionCode(I).then(function(V){return j=V.data.email,Wn(p).applyActionCode(I)}).then(function(){JM(p,_,j)},function(){var V=new qM;V.render(_),Pn(p,V)}))},xr.emailVerification=function(p,_,I,j){$n(p,Wn(p).applyActionCode(I).then(function(){var V=new VE(j);V.render(_),Pn(p,V)},function(){var V=new zE;V.render(_),Pn(p,V)}))},xr.revertSecondFactorAddition=function(p,_,I){var j=null,V=null;$n(p,Wn(p).checkActionCode(I).then(function(H){return j=H.data.email,V=H.data.multiFactorInfo,Wn(p).applyActionCode(I)}).then(function(){eP(p,_,j,V)},function(){var H=new GE;H.render(_),Pn(p,H)}))},xr.verifyAndChangeEmail=function(p,_,I,j){var V=null;$n(p,Wn(p).checkActionCode(I).then(function(H){return V=H.data.email,Wn(p).applyActionCode(I)}).then(function(){var H=new HE(V,j);H.render(_),Pn(p,H)},function(){var H=new A0;H.render(_),Pn(p,H)}))};function Fp(p,_){try{var I=typeof p.selectionStart=="number"}catch{I=!1}I?(p.selectionStart=_,p.selectionEnd=_):er&&!js("9")&&(p.type=="textarea"&&(_=p.value.substring(0,_).replace(/(\r\n|\r|\n)/g,`
`).length),p=p.createTextRange(),p.collapse(!0),p.move("character",_),p.select())}function Sr(p,_,I,j,V,H){Ye.call(this,yd,{email:I},H,"emailLinkSignInConfirmation",{F:j,D:V}),this.l=p,this.u=_}s(Sr,Ye),Sr.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Fp(this.i(),(this.i().value||"").length),Ye.prototype.v.call(this)},Sr.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},L(Sr.prototype,{i:Sd,M:_d,w:Rp,H:gc,j:Td,U:Ji,P:bi,B:_a}),xr.emailLinkConfirmation=function(p,_,I,j,V,H){var re=new Sr(function(){var ue=re.j();ue?(re.m(),j(p,_,ue,I)):re.i().focus()},function(){re.m(),Gr(p,_,V||void 0)},V||void 0,zi(Ze(p)),li(Ze(p)));re.render(_),Pn(p,re),H&&re.a(H)};function $p(p,_,I,j,V){Ye.call(this,zm,{ga:p},V,"emailLinkSignInLinkingDifferentDevice",{F:I,D:j}),this.i=_}s($p,Ye),$p.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},$p.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L($p.prototype,{l:Ji,u:_a}),xr.emailLinkNewDeviceLinking=function(p,_,I,j){var V=new la(I);if(I=V.a.a.get(Zr.PROVIDER_ID)||null,ph(V,null),I){var H=new $p(Im(Ze(p),I),function(){H.m(),j(p,_,V.toString())},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H)}else Gr(p,_)};function da(p){Ye.call(this,aS,void 0,p,"blank")}s(da,Ye);function QE(p,_,I,j,V){var H=new da,re=new la(I),ue=re.a.a.get(Zr.$a)||"",Re=re.a.a.get(Zr.Sa)||"",it=re.a.a.get(Zr.Qa)==="1",Ft=_i(re),yr=re.a.a.get(Zr.PROVIDER_ID)||null;re=re.a.a.get(Zr.vb)||null,U0(p,re);var g=!yp(mp,un(p)),b=j||NM(Re,un(p)),E=(j=RM(Re,un(p)))&&j.a;yr&&E&&E.providerId!==yr&&(E=null),H.render(_),Pn(p,H),$n(p,H.I(function(){var M=vi(null);M=Ft&&g||g&&it?Al(Error("anonymous-user-not-found")):$F(p,I).then(function(U){if(yr&&!E)throw Error("pending-credential-not-found");return U});var F=null;return M.then(function(U){return F=U,V?null:Wn(p).checkActionCode(ue)}).then(function(){return F})},[],function(M){b?xS(p,H,b,I,E,M):it?(H.m(),Mt("differentDeviceError",p,_)):(H.m(),Mt("emailLinkConfirmation",p,_,I,wS))},function(M){var F=void 0;if(!M||!M.name||M.name!="cancel")switch(H.m(),M&&M.message){case"anonymous-user-not-found":Mt("differentDeviceError",p,_);break;case"anonymous-user-mismatch":Mt("anonymousUserMismatch",p,_);break;case"pending-credential-not-found":Mt("emailLinkNewDeviceLinking",p,_,I,JE);break;default:M&&(F=Ar(M)),Gr(p,_,void 0,F)}}))}function wS(p,_,I,j){QE(p,_,j,I,!0)}function JE(p,_,I){QE(p,_,I)}function xS(p,_,I,j,V,H){var re=ki(_);_.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sr("Signing in...").toString());var ue=null;V=(H?oP(p,H,I,j,V):sP(p,I,j,V)).then(function(Re){ds(vp,un(p)),ds(mp,un(p)),_.h(),_.$("firebaseui-icon-done",sr("Signed in!").toString()),ue=setTimeout(function(){_.h(),Ed(p,_,Re,!0)},1e3),$n(p,function(){_&&(_.h(),_.m()),clearTimeout(ue)})},function(Re){if(_.h(),_.m(),!Re.name||Re.name!="cancel"){Re=k0(Re);var it=Ar(Re);Re.code=="auth/email-already-in-use"||Re.code=="auth/credential-already-in-use"?(ds(vp,un(p)),ds(mp,un(p))):Re.code=="auth/invalid-email"?(it=sr("The email provided does not match the current sign-in session.").toString(),Mt("emailLinkConfirmation",p,re,j,wS,null,it)):Gr(p,re,I,it)}}),$n(p,V)}xr.emailLinkSignInCallback=QE;function ev(p,_,I,j,V,H){Ye.call(this,Mp,{email:p,ga:_},H,"emailLinkSignInLinking",{F:j,D:V}),this.i=I}s(ev,Ye),ev.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},ev.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(ev.prototype,{l:Ji,u:_a});function tP(p,_,I,j){var V=ki(_);ZE(p,_,I,function(){Gr(p,V,I)},function(H){if(!H.name||H.name!="cancel"){var re=Ar(H);H&&H.code=="auth/network-request-failed"?_.a(re):(_.m(),Gr(p,V,I,re))}},j)}xr.emailLinkSignInLinking=function(p,_,I){var j=hc(un(p));if(Dl(un(p)),j){var V=j.a.providerId,H=new ev(I,Im(Ze(p),V),function(){tP(p,H,I,j)},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H)}else Gr(p,_)};function Bp(p,_,I,j,V,H){Ye.call(this,uu,{email:p},H,"emailLinkSignInSent",{F:j,D:V}),this.u=_,this.i=I}s(Bp,Ye),Bp.prototype.v=function(){var p=this;yi(this,this.l(),function(){p.i()}),yi(this,ir(this,"firebaseui-id-trouble-getting-email-link"),function(){p.u()}),this.l().focus(),Ye.prototype.v.call(this)},Bp.prototype.o=function(){this.i=this.u=null,Ye.prototype.o.call(this)},L(Bp.prototype,{l:bi}),xr.emailLinkSignInSent=function(p,_,I,j,V){var H=new Bp(I,function(){H.m(),Mt("emailNotReceived",p,_,I,j,V)},function(){H.m(),j()},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H)};function Up(p,_,I,j,V,H,re){Ye.call(this,$E,{jc:p,Qb:_},re,"emailMismatch",{F:V,D:H}),this.l=I,this.i=j}s(Up,Ye),Up.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},Up.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Up.prototype,{u:Ji,B:bi,w:_a}),xr.emailMismatch=function(p,_,I){var j=hc(un(p));if(j){var V=new Up(I.user.email,j.g,function(){var H=V;Dl(un(p)),Ed(p,H,I)},function(){var H=I.credential.providerId,re=ki(V);V.m(),j.a?Mt("federatedLinking",p,re,j.g,H):Mt("federatedSignIn",p,re,j.g,H)},zi(Ze(p)),li(Ze(p)));V.render(_),Pn(p,V)}else Gr(p,_)};function tv(p,_,I,j,V){Ye.call(this,Oi,void 0,V,"emailNotReceived",{F:I,D:j}),this.l=p,this.i=_}s(tv,Ye),tv.prototype.v=function(){var p=this;yi(this,this.u(),function(){p.i()}),yi(this,this.Da(),function(){p.l()}),this.u().focus(),Ye.prototype.v.call(this)},tv.prototype.Da=function(){return ir(this,"firebaseui-id-resend-email-link")},tv.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L(tv.prototype,{u:bi}),xr.emailNotReceived=function(p,_,I,j,V){var H=new tv(function(){ZE(p,H,I,j,function(re){re=Ar(re),H.a(re)},V)},function(){H.m(),Gr(p,_,I)},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H)};function Vp(p,_,I,j,V,H){Ye.call(this,Uo,{email:p,ga:_},H,"federatedLinking",{F:j,D:V}),this.i=I}s(Vp,Ye),Vp.prototype.v=function(){this.u(this.i),this.l().focus(),Ye.prototype.v.call(this)},Vp.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(Vp.prototype,{l:Ji,u:_a}),xr.federatedLinking=function(p,_,I,j,V){var H=hc(un(p));if(H&&H.a){var re=new Vp(I,Im(Ze(p),j),function(){Op(p,re,j,I)},zi(Ze(p)),li(Ze(p)));re.render(_),Pn(p,re),V&&re.a(V)}else Gr(p,_)},xr.federatedRedirect=function(p,_,I){var j=new da;j.render(_),Pn(p,j),_=Dm(Ze(p))[0],Op(p,j,_,I)},xr.federatedSignIn=function(p,_,I,j,V){var H=new Vp(I,Im(Ze(p),j),function(){Op(p,H,j,I)},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H),V&&H.a(V)};function NF(p,_,I,j){var V=_.u();V?$n(p,_.I(N(p.Xb,p),[I,V],function(H){return H=H.user.linkWithCredential(j).then(function(re){return Ed(p,_,{user:re.user,credential:j,operationType:re.operationType,additionalUserInfo:re.additionalUserInfo})}),$n(p,H),H},function(H){if(!H.name||H.name!="cancel")switch(H.code){case"auth/wrong-password":Ai(_.i(),!1),ur(_.B(),Ar(H));break;case"auth/too-many-requests":_.a(Ar(H));break;default:bo("signInWithEmailAndPassword: "+H.message,void 0),_.a(Ar(H))}})):_.i().focus()}xr.passwordLinking=function(p,_,I){var j=hc(un(p));Dl(un(p));var V=j&&j.a;if(V){var H=new Gm(I,function(){NF(p,H,I,V)},function(){H.m(),Mt("passwordRecovery",p,_,I)},zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H)}else Gr(p,_)};function nv(p,_,I,j,V,H){Ye.call(this,Ir,{email:I,Ta:!!_},H,"passwordRecovery",{F:j,D:V}),this.l=p,this.u=_}s(nv,Ye),nv.prototype.v=function(){this.B(),this.H(this.l,this.u),xa(this.i())||this.i().focus(),fr(this,this.i(),this.l),Ye.prototype.v.call(this)},nv.prototype.o=function(){this.u=this.l=null,Ye.prototype.o.call(this)},L(nv.prototype,{i:Sd,w:_d,B:Rp,M:gc,j:Td,U:Ji,P:bi,H:_a});function RF(p,_){var I=_.j();if(I){var j=ki(_);$n(p,_.I(N(Wn(p).sendPasswordResetEmail,Wn(p)),[I],function(){_.m();var V=new E0(I,function(){V.m(),Gr(p,j)},zi(Ze(p)),li(Ze(p)));V.render(j),Pn(p,V)},function(V){Ai(_.i(),!1),ur(_.w(),Ar(V))}))}else _.i().focus()}xr.passwordRecovery=function(p,_,I,j,V){var H=new nv(function(){RF(p,H)},j?void 0:function(){H.m(),Gr(p,_)},I,zi(Ze(p)),li(Ze(p)));H.render(_),Pn(p,H),V&&H.a(V)},xr.passwordSignIn=function(p,_,I,j){var V=new Wm(function(){D0(p,V)},function(){var H=V.M();V.m(),Mt("passwordRecovery",p,_,H)},I,zi(Ze(p)),li(Ze(p)),j);V.render(_),Pn(p,V)};function eA(){return ir(this,"firebaseui-id-name")}function fu(){return ir(this,"firebaseui-id-name-error")}function rv(p,_,I,j,V,H,re,ue,Re){Ye.call(this,dr,{email:j,Tb:p,name:V,Ta:!!I,ia:!!ue},Re,"passwordSignUp",{F:H,D:re}),this.w=_,this.H=I,this.B=p}s(rv,Ye),rv.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(b0(this,this.i(),this.u()),b0(this,this.u(),this.l())):b0(this,this.i(),this.l()),this.w&&fr(this,this.l(),this.w),xa(this.i())?this.B&&!xa(this.u())?this.u().focus():this.l().focus():this.i().focus(),Ye.prototype.v.call(this)},rv.prototype.o=function(){this.H=this.w=null,Ye.prototype.o.call(this)},L(rv.prototype,{i:Sd,U:_d,ea:Rp,jb:gc,j:Td,u:eA,Bc:fu,Ja:function(){var p=eA.call(this),_=fu.call(this);pd(this,p,function(){Vm(_)&&(Ai(p,!0),hs(_))})},M:function(){var p=eA.call(this),_=fu.call(this),I=xa(p);return I=!/^[\s\xa0]*$/.test(I==null?"":String(I)),Ai(p,I),I?(hs(_),_=!0):(ur(_,sr("Enter your account name").toString()),_=!1),_?$e(xa(p)):null},l:Kh,ba:Zm,lb:Xm,ua:Qm,P:P0,Nb:Ji,Mb:bi,pa:_a});function tA(p,_){var I=wE(Ze(p)),j=_.j(),V=null;I&&(V=_.M());var H=_.P();if(j){if(I)if(V)V=Fn(V);else{_.u().focus();return}if(H){var re=en.auth.EmailAuthProvider.credential(j,H);$n(p,_.I(N(p.Yb,p),[j,H],function(ue){var Re={user:ue.user,credential:re,operationType:ue.operationType,additionalUserInfo:ue.additionalUserInfo};return I?(ue=ue.user.updateProfile({displayName:V}).then(function(){return Ed(p,_,Re)}),$n(p,ue),ue):Ed(p,_,Re)},function(ue){if(!ue.name||ue.name!="cancel"){var Re=k0(ue);switch(ue=Ar(Re),Re.code){case"auth/email-already-in-use":return OF(p,_,j,Re);case"auth/too-many-requests":ue=sr("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Ai(_.l(),!1),ur(_.ba(),ue);break;case"auth/admin-restricted-operation":jh(Ze(p))?(ue=ki(_),_.m(),Mt("handleUnauthorizedUser",p,ue,j,en.auth.EmailAuthProvider.PROVIDER_ID)):_.a(ue);break;default:Re="setAccountInfo: "+MM(Re),bo(Re,void 0),_.a(ue)}}}))}else _.l().focus()}else _.i().focus()}function OF(p,_,I,j){function V(){var re=Ar(j);Ai(_.i(),!1),ur(_.U(),re),_.i().focus()}var H=Wn(p).fetchSignInMethodsForEmail(I).then(function(re){re.length?V():(re=ki(_),_.m(),Mt("passwordRecovery",p,re,I,!1,Ee().toString()))},function(){V()});return $n(p,H),H}xr.passwordSignUp=function(p,_,I,j,V,H){function re(){ue.m(),Gr(p,_)}var ue=new rv(wE(Ze(p)),function(){tA(p,ue)},V?void 0:re,I,j,zi(Ze(p)),li(Ze(p)),H);ue.render(_),Pn(p,ue)};function nA(){return ir(this,"firebaseui-id-phone-confirmation-code")}function SS(){return ir(this,"firebaseui-id-phone-confirmation-code-error")}function nP(){return ir(this,"firebaseui-id-resend-countdown")}function So(p,_,I,j,V,H,re,ue,Re){Ye.call(this,UE,{phoneNumber:V},Re,"phoneSignInFinish",{F:re,D:ue}),this.jb=H,this.i=new d0(1e3),this.B=H,this.P=p,this.l=_,this.H=I,this.M=j}s(So,Ye),So.prototype.v=function(){var p=this;this.U(this.jb),Ni(this.i,"tick",this.w,!1,this),this.i.start(),yi(this,ir(this,"firebaseui-id-change-phone-number-link"),function(){p.P()}),yi(this,this.Da(),function(){p.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Ye.prototype.v.call(this)},So.prototype.o=function(){this.M=this.H=this.l=this.P=null,Om(this.i),Th(this.i,"tick",this.w),this.i=null,Ye.prototype.o.call(this)},So.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Om(this.i),Th(this.i,"tick",this.w),this.ua(),this.lb())},L(So.prototype,{u:nA,pa:SS,Ja:function(p){var _=nA.call(this),I=SS.call(this);pd(this,_,function(){Vm(I)&&(Ai(_,!0),hs(I))}),p&&Um(this,_,function(){p()})},ba:function(){var p=$e(xa(nA.call(this))||"");return/^\d{6}$/.test(p)?p:null},Fb:nP,U:function(p){ed(nP.call(this),sr("Resend code in "+((9<p?"0:":"0:0")+p)).toString())},ua:function(){hs(this.Fb())},Da:function(){return ir(this,"firebaseui-id-resend-link")},lb:function(){ur(this.Da())},Nb:Ji,Mb:bi,ea:_a});function rA(p,_,I,j){function V(re){_.u().focus(),Ai(_.u(),!1),ur(_.pa(),re)}var H=_.ba();H?(_.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sr("Verifying...").toString()),$n(p,_.I(N(j.confirm,j),[H],function(re){_.h(),_.$("firebaseui-icon-done",sr("Verified!").toString());var ue=setTimeout(function(){_.h(),_.m();var Re={user:Ks(p).currentUser,credential:null,operationType:re.operationType,additionalUserInfo:re.additionalUserInfo};Ed(p,_,Re,!0)},1e3);$n(p,function(){_&&_.h(),clearTimeout(ue)})},function(re){if(re.name&&re.name=="cancel")_.h();else{var ue=k0(re);switch(re=Ar(ue),ue.code){case"auth/credential-already-in-use":_.h();break;case"auth/code-expired":ue=ki(_),_.h(),_.m(),Mt("phoneSignInStart",p,ue,I,re);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":_.h(),V(re);break;default:_.h(),_.a(re)}}}))):V(sr("Wrong code. Try again.").toString())}xr.phoneSignInFinish=function(p,_,I,j,V,H){var re=new So(function(){re.m(),Mt("phoneSignInStart",p,_,I)},function(){rA(p,re,I,V)},function(){re.m(),Gr(p,_)},function(){re.m(),Mt("phoneSignInStart",p,_,I)},mE(I),j,zi(Ze(p)),li(Ze(p)));re.render(_),Pn(p,re),H&&re.a(H)};var rP=!er&&!(zn("Safari")&&!(gh()||zn("Coast")||zn("Opera")||zn("Edge")||zn("Firefox")||zn("FxiOS")||zn("Silk")||zn("Android")));function N0(p,_){return/-[a-z]/.test(_)?null:rP&&p.dataset?!zn("Android")||gh()||zn("Firefox")||zn("FxiOS")||zn("Opera")||zn("Silk")||_ in p.dataset?(p=p.dataset[_],p===void 0?null:p):null:p.getAttribute("data-"+String(_).replace(/([A-Z])/g,"-$1").toLowerCase())}function R0(p,_,I){var j=this;p=rc(md,{items:p},null,this.s),kp.call(this,p,!0,!0),I&&(I=Ml(p,I))&&(I.focus(),Hh(I,p)),yi(this,p,function(V){(V=(V=Py(V.target,"firebaseui-id-list-box-dialog-button"))&&N0(V,"listboxid"))&&(qh.call(j),_(V))})}function Ml(p,_){p=(p||document).getElementsByTagName("BUTTON");for(var I=0;I<p.length;I++)if(N0(p[I],"listboxid")===_)return p[I];return null}function Xh(){return ir(this,"firebaseui-id-phone-number")}function O0(){return ir(this,"firebaseui-id-country-selector")}function mc(){return ir(this,"firebaseui-id-phone-number-error")}function LF(p,_){var I=p.a,j=iA("1-US-0",I),V=null;if(_&&iA(_,I)?V=_:j?V="1-US-0":V=0<I.length?I[0].c:null,!V)throw Error("No available default country");TS.call(this,V,p)}function iA(p,_){return p=Lh(p),!(!p||!fe(_,p))}function iv(p){return p.map(function(_){return{id:_.c,Ma:"firebaseui-flag "+_S(_),label:_.name+" "+("‎+"+_.b)}})}function _S(p){return"firebaseui-flag-"+p.f}function jF(p){var _=this;R0.call(this,iv(p.a),function(I){TS.call(_,I,p,!0),_.O().focus()},this.Ba)}function TS(p,_,I){var j=Lh(p);j&&(I&&(I=$e(xa(Xh.call(this))||""),_=t0(_,I),_.length&&_[0].b!=j.b&&(I="+"+j.b+I.substr(_[0].b.length+1),_E(Xh.call(this),I))),_=Lh(this.Ba),this.Ba=p,p=ir(this,"firebaseui-id-country-selector-flag"),_&&pc(p,_S(_)),ci(p,_S(j)),ed(ir(this,"firebaseui-id-country-selector-code"),"‎+"+j.b))}function L0(p,_,I,j,V,H,re,ue,Re,it){Ye.call(this,BE,{Gb:_,Aa:Re||null,Va:!!I,ia:!!H},it,"phoneSignInStart",{F:j,D:V}),this.H=ue||null,this.M=_,this.l=p,this.w=I||null,this.pa=re||null}s(L0,Ye),L0.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||b0(this,this.O(),this.i()),fr(this,this.i(),this.l),this.O().focus(),Fp(this.O(),(this.O().value||"").length),Ye.prototype.v.call(this)},L0.prototype.o=function(){this.w=this.l=null,Ye.prototype.o.call(this)},L(L0.prototype,{Cb:Cp,O:Xh,B:mc,ea:function(p,_,I){var j=this,V=Xh.call(this),H=O0.call(this),re=mc.call(this),ue=p||wp,Re=ue.a;if(Re.length==0)throw Error("No available countries provided.");LF.call(j,ue,_),yi(this,H,function(){jF.call(j,ue)}),pd(this,V,function(){Vm(re)&&(Ai(V,!0),hs(re));var it=$e(xa(V)||""),Ft=Lh(this.Ba),yr=t0(ue,it);it=iA("1-US-0",Re),yr.length&&yr[0].b!=Ft.b&&(Ft=yr[0],TS.call(j,Ft.b=="1"&&it?"1-US-0":Ft.c,ue))}),I&&Um(this,V,function(){I()})},U:function(p){var _=$e(xa(Xh.call(this))||"");p=p||wp;var I=p.a,j=t0(wp,_);if(j.length&&!fe(I,j[0]))throw _E(Xh.call(this)),Xh.call(this).focus(),ur(mc.call(this),sr("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return I=Lh(this.Ba),j.length&&j[0].b!=I.b&&TS.call(this,j[0].c,p),j.length&&(_=_.substr(j[0].b.length+1)),_?new pE(this.Ba,_):null},Ja:O0,ba:function(){return ir(this,"firebaseui-recaptcha-container")},u:function(){return ir(this,"firebaseui-id-recaptcha-error")},i:Ji,ua:bi,P:_a});function iP(p,_,I,j){try{var V=_.U(c0)}catch{return}V?$h?(_.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sr("Verifying...").toString()),$n(p,_.I(N(p.cc,p),[mE(V),I],function(H){var re=ki(_);_.$("firebaseui-icon-done",sr("Code sent!").toString());var ue=setTimeout(function(){_.h(),_.m(),Mt("phoneSignInFinish",p,re,V,15,H)},1e3);$n(p,function(){_&&_.h(),clearTimeout(ue)})},function(H){if(_.h(),!H.name||H.name!="cancel"){grecaptcha.reset(xE),$h=null;var re=H&&H.message||"";if(H.code)switch(H.code){case"auth/too-many-requests":re=sr("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":_.O().focus(),ur(_.B(),q().toString());return;case"auth/admin-restricted-operation":if(jh(Ze(p))){H=ki(_),_.m(),Mt("handleUnauthorizedUser",p,H,mE(V),en.auth.PhoneAuthProvider.PROVIDER_ID);return}re=Ar(H);break;default:re=Ar(H)}_.a(re)}}))):Tp?ur(_.u(),sr("Solve the reCAPTCHA").toString()):!Tp&&j&&_.i().click():(_.O().focus(),ur(_.B(),q().toString()))}xr.phoneSignInStart=function(p,_,I,j){var V=OM(Ze(p))||{};$h=null,Tp=!(V&&V.size==="invisible");var H=YE(p),re=a0(Ze(p)),ue=H?Zx(Ze(p)):null;re=I&&I.a||re&&re.c||null,I=I&&I.Aa||ue,(ue=Nm(Ze(p)))&&fE(ue),c0=ue?new dE(Nm(Ze(p))):wp;var Re=new L0(function(Ft){iP(p,Re,it,!(!Ft||!Ft.keyCode))},Tp,H?null:function(){it.clear(),Re.m(),Gr(p,_)},zi(Ze(p)),li(Ze(p)),H,c0,re,I);Re.render(_),Pn(p,Re),j&&Re.a(j),V.callback=function(Ft){Re.u()&&hs(Re.u()),$h=Ft,Tp||iP(p,Re,it)},V["expired-callback"]=function(){$h=null};var it=new en.auth.RecaptchaVerifier(Tp?Re.ba():Re.i(),V,Ks(p).app);$n(p,Re.I(N(it.render,it),[],function(Ft){xE=Ft},function(Ft){Ft.name&&Ft.name=="cancel"||(Ft=Ar(Ft),Re.m(),Gr(p,_,void 0,Ft))}))},xr.prefilledEmailSignIn=function(p,_,I){var j=new da;j.render(_),Pn(p,j),$n(p,j.I(N(Wn(p).fetchSignInMethodsForEmail,Wn(p)),[I],function(V){j.m();var H=!(!mS(p)||!B0(p));XE(p,_,V,I,void 0,H)},function(V){V=Ar(V),j.m(),Mt("signIn",p,_,I,V)}))};function j0(p,_,I,j,V){Ye.call(this,ms,{Sb:_},V,"providerSignIn",{F:I,D:j}),this.i=p}s(j0,Ye),j0.prototype.v=function(){this.l(this.i),Ye.prototype.v.call(this)},j0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(j0.prototype,{l:function(p){function _(re){p(re)}for(var I=this.g?tc("firebaseui-id-idp-button",this.g||this.s.a):[],j=0;j<I.length;j++){var V=I[j],H=N0(V,"providerId");yi(this,V,R(_,H))}}}),xr.providerSignIn=function(p,_,I,j){var V=new j0(function(H){H==en.auth.EmailAuthProvider.PROVIDER_ID?(V.m(),I0(p,_,j)):H==en.auth.PhoneAuthProvider.PROVIDER_ID?(V.m(),Mt("phoneSignInStart",p,_)):H=="anonymous"?Lp(p,V):Op(p,V,H,j),hr(p),p.l.cancel()},Mm(Ze(p)),zi(Ze(p)),li(Ze(p)));V.render(_),Pn(p,V),I&&V.a(I),V0(p)},xr.sendEmailLinkForSignIn=function(p,_,I,j){var V=new Ym;V.render(_),Pn(p,V),ZE(p,V,I,j,function(H){V.m(),H&&H.code=="auth/admin-restricted-operation"&&jh(Ze(p))?Mt("handleUnauthorizedUser",p,_,I,en.auth.EmailAuthProvider.PROVIDER_ID):(H=Ar(H),Mt("signIn",p,_,I,H))})};function F0(p,_,I,j,V,H,re){Ye.call(this,Qr,{email:I,Va:!!_,ia:!!H},re,"signIn",{F:j,D:V}),this.i=p,this.u=_}s(F0,Ye),F0.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Fp(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},F0.prototype.o=function(){this.u=this.i=null,Ye.prototype.o.call(this)},L(F0.prototype,{l:Sd,M:_d,w:Rp,H:gc,j:Td,U:Ji,P:bi,B:_a}),xr.signIn=function(p,_,I,j){var V=mS(p),H=new F0(function(){var re=H,ue=re.j()||"";ue&&KE(p,re,ue)},V?null:function(){H.m(),Gr(p,_,I)},I,zi(Ze(p)),li(Ze(p)),V);H.render(_),Pn(p,H),j&&H.a(j)};function $0(p,_,I,j,V,H,re){Ye.call(this,sS,{kc:p,yb:I,Eb:!!j},re,"unauthorizedUser",{F:V,D:H}),this.l=_,this.i=j}s($0,Ye),$0.prototype.v=function(){var p=this,_=ir(this,"firebaseui-id-unauthorized-user-help-link");this.i&&_&&yi(this,_,function(){p.i()}),yi(this,this.u(),function(){p.l()}),this.u().focus(),Ye.prototype.v.call(this)},$0.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L($0.prototype,{u:bi}),xr.handleUnauthorizedUser=function(p,_,I,j){function V(){Gr(p,_)}j===en.auth.EmailAuthProvider.PROVIDER_ID?V=function(){I0(p,_)}:j===en.auth.PhoneAuthProvider.PROVIDER_ID&&(V=function(){Mt("phoneSignInStart",p,_)});var H=null,re=null;j===en.auth.EmailAuthProvider.PROVIDER_ID&&i0(Ze(p))?(H=jM(Ze(p)),re=DF(Ze(p))):jh(Ze(p))&&(H=Xx(Ze(p)),re=LM(Ze(p)));var ue=new $0(I,function(){ue.m(),V()},H,re,zi(Ze(p)),li(Ze(p)));ue.render(_),Pn(p,ue)};function av(p,_,I,j,V,H){Ye.call(this,lS,{email:p},H,"unsupportedProvider",{F:j,D:V}),this.l=_,this.i=I}s(av,Ye),av.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ye.prototype.v.call(this)},av.prototype.o=function(){this.i=this.l=null,Ye.prototype.o.call(this)},L(av.prototype,{u:Ji,B:bi,w:_a}),xr.unsupportedProvider=function(p,_,I){var j=new av(I,function(){j.m(),Mt("passwordRecovery",p,_,I)},function(){j.m(),Gr(p,_,I)},zi(Ze(p)),li(Ze(p)));j.render(_),Pn(p,j)};function Vo(p,_){this.$=!1;var I=aA(_);if(sv[I])throw Error('An AuthUI instance already exists for the key "'+I+'"');sv[I]=this,this.a=p,this.u=null,this.Y=!1,ov(this.a),this.h=en.initializeApp({apiKey:p.app.options.apiKey,authDomain:p.app.options.authDomain},p.app.name+"-firebaseui-temp").auth(),(p=p.emulatorConfig)&&(I=p.port,this.h.useEmulator(p.protocol+"://"+p.host+(I===null?"":":"+I),p.options)),ov(this.h),this.h.setPersistence&&this.h.setPersistence(en.auth.Auth.Persistence.SESSION),this.oa=_,this.ca=new yE,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=ja.Xa(),this.j=this.C=null,this.da=this.A=!1}function ov(p){p&&p.INTERNAL&&p.INTERNAL.logFramework&&p.INTERNAL.logFramework("FirebaseUI-web")}var sv={};function aA(p){return p||"[DEFAULT]"}function zp(p){return hr(p),p.i||(p.i=pu(p,function(_){return _&&!hc(un(p))?vi(Ks(p).getRedirectResult().then(function(I){return I},function(I){if(I&&I.code=="auth/email-already-in-use"&&I.email&&I.credential)throw I;return vc(p,I)})):vi(Wn(p).getRedirectResult().then(function(I){return n0(Ze(p))&&!I.user&&p.j&&!p.j.isAnonymous?Ks(p).getRedirectResult():I}))})),p.i}function Pn(p,_){hr(p),p.g=_}var Hp=null;function Wn(p){return hr(p),p.h}function Ks(p){return hr(p),p.a}function un(p){return hr(p),p.oa}function B0(p){return hr(p),p.O?p.O.emailHint:void 0}n=Vo.prototype,n.nb=function(){return hr(this),!!Hx(un(this))||oA(Dr())};function oA(p){return p=new la(p),(p.a.a.get(Zr.ub)||null)==="signIn"&&!!p.a.a.get(Zr.$a)}n.start=function(p,_){sA(this,p,_)};function sA(p,_,I,j){hr(p),typeof p.a.languageCode<"u"&&(p.u=p.a.languageCode);var V="en".replace(/_/g,"-");p.a.languageCode=V,p.h.languageCode=V,p.Y=!0,typeof p.a.tenantId<"u"&&(p.h.tenantId=p.a.tenantId),p.ib(I),p.O=j||null;var H=d.document;p.C?p.C.then(function(){H.readyState=="complete"?ES(p,_):cm(window,"load",function(){ES(p,_)})}):H.readyState=="complete"?ES(p,_):cm(window,"load",function(){ES(p,_)})}function ES(p,_){var I=La(_,"Could not find the FirebaseUI widget element on the page.");if(I.setAttribute("lang","en".replace(/_/g,"-")),Hp){var j=Hp;hr(j),hc(un(j))&&Lo("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),Hp.reset()}if(Hp=p,p.T=I,AS(p,I),_m(new dc)&&_m(new Tm)){_=La(_,"Could not find the FirebaseUI widget element on the page."),I=Dr(),j=Wx(Ze(p).a,"queryParameterForSignInSuccessUrl"),I=(I=Si(I,j))?Ql(bh(I)).toString():null;e:{j=Dr();var V=bE(Ze(p));j=Si(j,V)||"";for(H in eS)if(eS[H].toLowerCase()==j.toLowerCase()){var H=eS[H];break e}H="callback"}switch(H){case"callback":I&&(H=un(p),bp(Em,I,H)),p.nb()?Mt("callback",p,_):Gr(p,_,B0(p));break;case"resetPassword":Mt("passwordReset",p,_,qm(),vS());break;case"recoverEmail":Mt("emailChangeRevocation",p,_,qm());break;case"revertSecondFactorAddition":Mt("revertSecondFactorAddition",p,_,qm());break;case"verifyEmail":Mt("emailVerification",p,_,qm(),vS());break;case"verifyAndChangeEmail":Mt("verifyAndChangeEmail",p,_,qm(),vS());break;case"signIn":Mt("emailLinkSignInCallback",p,_,Dr()),lA();break;case"select":I&&(H=un(p),bp(Em,I,H)),Gr(p,_);break;default:throw Error("Unhandled widget operation.")}_=Ze(p),(_=_p(_).uiShown||null)&&_()}else _=La(_,"Could not find the FirebaseUI widget element on the page."),H=new YM(sr("The browser you are using does not support Web Storage. Please try again in a different browser.").toString()),H.render(_),Pn(p,H);_=p.g&&p.g.Ga=="blank"&&Qx(Ze(p)),Hx(un(p))&&!_&&(_=Hx(un(p)),U0(p,_.a),ds(Oh,un(p)))}function pu(p,_){if(p.A)return _(lv(p));if($n(p,function(){p.A=!1}),n0(Ze(p))){var I=new Ri(function(j){$n(p,p.a.onAuthStateChanged(function(V){p.j=V,p.A||(p.A=!0,j(_(lv(p))))}))});return $n(p,I),I}return p.A=!0,_(null)}function lv(p){return hr(p),n0(Ze(p))&&p.j&&p.j.isAnonymous?p.j:null}function $n(p,_){if(hr(p),_){p.s.push(_);var I=function(){de(p.s,function(j){return j==_})};typeof _!="function"&&_.then(I,I)}}n.Db=function(){hr(this),this.Z=!0};function FF(p){hr(p);var _;return(_=p.Z)||(p=Ze(p),p=Pm(p,en.auth.GoogleAuthProvider.PROVIDER_ID),_=!(!p||p.prompt!=="select_account")),_}function aP(p){typeof p.a.languageCode<"u"&&p.Y&&(p.Y=!1,p.a.languageCode=p.u)}function U0(p,_){p.a.tenantId=_,p.h.tenantId=_}n.reset=function(){hr(this);var p=this;this.T&&this.T.removeAttribute("lang"),this.J&&SM(this.J),aP(this),this.O=null,lA(),ds(Oh,un(this)),hr(this),this.l.cancel(),this.i=vi({user:null,credential:null}),Hp==this&&(Hp=null),this.T=null;for(var _=0;_<this.s.length;_++)typeof this.s[_]=="function"?this.s[_]():this.s[_].cancel&&this.s[_].cancel();this.s=[],Dl(un(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=kd(this).then(function(){p.C=null},function(){p.C=null}))};function AS(p,_){p.L=null,p.J=new _x(_),p.J.register(),Ni(p.J,"pageEnter",function(I){if(I=I&&I.pageId,p.L!=I){var j=Ze(p);(j=_p(j).uiChanged||null)&&j(p.L,I),p.L=I}})}n.ib=function(p){hr(this);var _=this.ca,I;for(I in p)try{Am(_.a,I,p[I])}catch{bo('Invalid config: "'+I+'"',void 0)}Jg&&Am(_.a,"popupMode",!1),Nm(_),!this.da&&fc(Ze(this))&&(Lo("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)};function Ze(p){return hr(p),p.ca}n.Wb=function(){hr(this);var p=Ze(this),_=Wx(p.a,"widgetUrl");p=bE(p);for(var I=_.search(hn),j=0,V,H=[];0<=(V=Cr(_,j,p,I));)H.push(_.substring(j,V)),j=Math.min(_.indexOf("&",V)+1||I,I);H.push(_.substr(j)),_=H.join("").replace(mo,"$1"),I="="+encodeURIComponent("select"),(p+=I)?(I=_.indexOf("#"),0>I&&(I=_.length),j=_.indexOf("?"),0>j||j>I?(j=I,V=""):V=_.substring(j+1,I),_=[_.substr(0,j),V,_.substr(I)],I=_[1],_[1]=p?I?I+"&"+p:p:I,I=_[0]+(_[1]?"?"+_[1]:"")+_[2]):I=_,Ze(this).a.get("popupMode")?(p=(window.screen.availHeight-600)/2,_=(window.screen.availWidth-500)/2,I=I||"about:blank",p={width:500,height:600,top:0<p?p:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},p.target=p.target||I.target||"google_popup",p.width=p.width||690,p.height=p.height||500,(p=qT(I,p))&&p.focus()):Ka(window.location,I)};function hr(p){if(p.$)throw Error("AuthUI instance is deleted!")}n.Wa=function(){var p=this;return hr(this),this.h.app.delete().then(function(){var _=aA(un(p));delete sv[_],p.reset(),p.$=!0})};function V0(p){hr(p);try{qy(p.l,Kx(Ze(p)),FF(p)).then(function(_){return p.g?du(p,p.g,_):!1})}catch{}}n.Ib=function(p,_){hr(this);var I=this,j=lp();if(!Qa(Ze(this)))return Al(Error("Email link sign-in should be enabled to trigger email sending."));var V=Fh(Ze(this)),H=new la(V.url);return bl(H,j),_&&_.a&&(CF(j,_,un(this)),ph(H,_.a.providerId)),Ya(H,au(Ze(this))),pu(this,function(re){return re&&((re=re.uid)?H.a.a.set(Zr.Pa,re):gi(H.a.a,Zr.Pa)),V.url=H.toString(),Wn(I).sendSignInLinkToEmail(p,V)}).then(function(){var re=un(I),ue={};ue.email=p,bp(mp,$x(j,JSON.stringify(ue)),re)},function(re){throw ds(vp,un(I)),ds(mp,un(I)),re})};function $F(p,_){var I=_i(new la(_));return I?(_=new Ri(function(j,V){var H=Ks(p).onAuthStateChanged(function(re){H(),re&&re.isAnonymous&&re.uid===I?j(re):re&&re.isAnonymous&&re.uid!==I?V(Error("anonymous-user-mismatch")):V(Error("anonymous-user-not-found"))});$n(p,H)}),$n(p,_),_):vi(null)}function oP(p,_,I,j,V){hr(p);var H=V||null,re=en.auth.EmailAuthProvider.credentialWithLink(I,j);return I=H?Wn(p).signInWithEmailLink(I,j).then(function(ue){return ue.user.linkWithCredential(H)}).then(function(){return kd(p)}).then(function(){return vc(p,{code:"auth/email-already-in-use"},H)}):Wn(p).fetchSignInMethodsForEmail(I).then(function(ue){return ue.length?vc(p,{code:"auth/email-already-in-use"},re):_.linkWithCredential(re)}),$n(p,I),I}function sP(p,_,I,j){hr(p);var V=j||null,H;return _=Wn(p).signInWithEmailLink(_,I).then(function(re){if(H={user:re.user,credential:null,operationType:re.operationType,additionalUserInfo:re.additionalUserInfo},V)return re.user.linkWithCredential(V).then(function(ue){H={user:ue.user,credential:V,operationType:H.operationType,additionalUserInfo:ue.additionalUserInfo}})}).then(function(){kd(p)}).then(function(){return Ks(p).updateCurrentUser(H.user)}).then(function(){return H.user=Ks(p).currentUser,H}),$n(p,_),_}function lA(){var p=Dr();if(oA(p)){p=new la(p);for(var _ in Zr)Zr.hasOwnProperty(_)&&gi(p.a.a,Zr[_]);_={state:"signIn",mode:"emailLink",operation:"clear"};var I=d.document.title;d.history&&d.history.replaceState&&d.history.replaceState(_,I,p.toString())}}n.bc=function(p,_){hr(this);var I=this;return Wn(this).signInWithEmailAndPassword(p,_).then(function(j){return pu(I,function(V){return V?kd(I).then(function(){return vc(I,{code:"auth/email-already-in-use"},en.auth.EmailAuthProvider.credential(p,_))}):j})})},n.Yb=function(p,_){hr(this);var I=this;return pu(this,function(j){if(j){var V=en.auth.EmailAuthProvider.credential(p,_);return j.linkWithCredential(V)}return Wn(I).createUserWithEmailAndPassword(p,_)})},n.ac=function(p){hr(this);var _=this;return pu(this,function(I){return I?I.linkWithCredential(p).then(function(j){return j},function(j){if(j&&j.code=="auth/email-already-in-use"&&j.email&&j.credential)throw j;return vc(_,j,p)}):Wn(_).signInWithCredential(p)})};function lP(p,_){return hr(p),pu(p,function(I){return I&&!hc(un(p))?I.linkWithPopup(_).then(function(j){return j},function(j){if(j&&j.code=="auth/email-already-in-use"&&j.email&&j.credential)throw j;return vc(p,j)}):Wn(p).signInWithPopup(_)})}n.dc=function(p){hr(this);var _=this,I=this.i;return this.i=null,pu(this,function(j){return j&&!hc(un(_))?j.linkWithRedirect(p):Wn(_).signInWithRedirect(p)}).then(function(){},function(j){throw _.i=I,j})},n.cc=function(p,_){hr(this);var I=this;return pu(this,function(j){return j?j.linkWithPhoneNumber(p,_).then(function(V){return new ZT(V,function(H){if(H.code=="auth/credential-already-in-use")return vc(I,H);throw H})}):Ks(I).signInWithPhoneNumber(p,_).then(function(V){return new ZT(V)})})},n.$b=function(){return hr(this),Ks(this).signInAnonymously()};function cA(p,_){return hr(p),pu(p,function(I){if(p.j&&!p.j.isAnonymous&&n0(Ze(p))&&!Wn(p).currentUser)return kd(p).then(function(){return _.credential.providerId=="password"&&(_.credential=null),_});if(I)return kd(p).then(function(){return I.linkWithCredential(_.credential)}).then(function(j){return _.user=j.user,_.credential=j.credential,_.operationType=j.operationType,_.additionalUserInfo=j.additionalUserInfo,_},function(j){if(j&&j.code=="auth/email-already-in-use"&&j.email&&j.credential)throw j;return vc(p,j,_.credential)});if(!_.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return kd(p).then(function(){return Ks(p).updateCurrentUser(_.user)}).then(function(){return _.user=Ks(p).currentUser,_.operationType="signIn",_.credential&&_.credential.providerId&&_.credential.providerId=="password"&&(_.credential=null),_})})}n.Xb=function(p,_){return hr(this),Wn(this).signInWithEmailAndPassword(p,_)};function kd(p){return hr(p),Wn(p).signOut()}function vc(p,_,I){if(hr(p),_&&_.code&&(_.code=="auth/email-already-in-use"||_.code=="auth/credential-already-in-use")){var j=o0(Ze(p));return vi().then(function(){return j(new tr("anonymous-upgrade-merge-conflict",null,I||_.credential))}).then(function(){throw p.g&&(p.g.m(),p.g=null),_})}return Al(_)}function z0(p,_,I,j){Ye.call(this,S0,void 0,j,"providerMatchByEmail",{F:_,D:I}),this.i=p}s(z0,Ye),z0.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Fp(this.l(),(this.l().value||"").length),Ye.prototype.v.call(this)},z0.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)},L(z0.prototype,{l:Sd,H:_d,u:Rp,B:gc,j:Td,M:Ji,w:_a});function kS(p,_,I,j,V){Ye.call(this,xd,{ec:_},V,"selectTenant",{F:I,D:j}),this.i=p}s(kS,Ye),kS.prototype.v=function(){uA(this,this.i),Ye.prototype.v.call(this)},kS.prototype.o=function(){this.i=null,Ye.prototype.o.call(this)};function uA(p,_){function I(ue){_(ue)}for(var j=p.g?tc("firebaseui-id-tenant-selection-button",p.g||p.s.a):[],V=0;V<j.length;V++){var H=j[V],re=N0(H,"tenantId");yi(p,H,R(I,re))}}function H0(p){Ye.call(this,Ip,void 0,p,"spinner")}s(H0,Ye);function CS(p){this.a=new Gx,si(this.a,"authDomain"),si(this.a,"displayMode",IS),si(this.a,"tenants"),si(this.a,"callbacks"),si(this.a,"tosUrl"),si(this.a,"privacyPolicyUrl");for(var _ in p)if(p.hasOwnProperty(_))try{Am(this.a,_,p[_])}catch{bo('Invalid config: "'+_+'"',void 0)}}function dA(p){p=p.a.get("displayMode");for(var _ in MS)if(MS[_]===p)return MS[_];return IS}function G0(p){return p.a.get("callbacks")||{}}function DS(p){var _=p.a.get("tosUrl")||null;if(p=p.a.get("privacyPolicyUrl")||null,_&&!p&&Lo("Privacy Policy URL is missing, the link will not be displayed."),_&&p){if(typeof _=="function")return _;if(typeof _=="string")return function(){Ch(_)}}return null}function Cd(p){var _=p.a.get("tosUrl")||null,I=p.a.get("privacyPolicyUrl")||null;if(I&&!_&&Lo("Terms of Service URL is missing, the link will not be displayed."),_&&I){if(typeof I=="function")return I;if(typeof I=="string")return function(){Ch(I)}}return null}function gu(p,_){if(p=p.a.get("tenants"),!p||!p.hasOwnProperty(_)&&!p.hasOwnProperty(Qh))throw Error("Invalid tenant configuration!")}function Dd(p,_,I){if(p=p.a.get("tenants"),!p)throw Error("Invalid tenant configuration!");var j=[];if(p=p[_]||p[Qh],!p)return bo("Invalid tenant configuration: "+(_+" is not configured!"),void 0),j;if(_=p.signInOptions,!_)throw Error("Invalid tenant configuration: signInOptions are invalid!");return _.forEach(function(V){if(typeof V=="string")j.push(V);else if(typeof V.provider=="string"){var H=V.hd;H&&I?(H instanceof RegExp?H:new RegExp("@"+H.replace(".","\\.")+"$")).test(I)&&j.push(V.provider):j.push(V.provider)}else V="Invalid tenant configuration: signInOption "+(JSON.stringify(V)+" is invalid!"),bo(V,void 0)}),j}function W0(p,_,I){return p=q0(p,_),(_=p.signInOptions)&&I&&(_=_.filter(function(j){return typeof j=="string"?I.includes(j):I.includes(j.provider)}),p.signInOptions=_),p}function q0(p,_){var I=Zh,j=j===void 0?{}:j;return gu(p,_),p=p.a.get("tenants"),Jc(p[_]||p[Qh],I,j)}var Zh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],IS="optionFirst",MS={pc:IS,oc:"identifierFirst"},Qh="*";function yc(p,_){var I=this;this.s=La(p),this.a={},Object.keys(_).forEach(function(j){I.a[j]=new CS(_[j])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(j){this.ob=j||null},enumerable:!1})}n=yc.prototype,n.Ub=function(p,_){var I=this;Id(this);var j=p.apiKey;return new Ri(function(V,H){if(I.a.hasOwnProperty(j)){var re=G0(I.a[j]).selectTenantUiHidden||null;if(dA(I.a[j])===IS){var ue=[];_.forEach(function(Ft){Ft=Ft||"_";var yr=I.a[j].a.get("tenants");if(!yr)throw Error("Invalid tenant configuration!");(yr=yr[Ft]||yr[Qh])?Ft={tenantId:Ft!=="_"?Ft:null,V:yr.fullLabel||null,displayName:yr.displayName,za:yr.iconUrl,ta:yr.buttonColor}:(bo("Invalid tenant configuration: "+(Ft+" is not configured!"),void 0),Ft=null),Ft&&ue.push(Ft)});var Re=function(Ft){Ft={tenantId:Ft,providerIds:Dd(I.a[j],Ft||"_")},V(Ft)};if(ue.length===1){Re(ue[0].tenantId);return}I.g=new kS(function(Ft){Id(I),re&&re(),Re(Ft)},ue,DS(I.a[j]),Cd(I.a[j]))}else I.g=new z0(function(){var Ft=I.g.j();if(Ft){for(var yr=0;yr<_.length;yr++){var g=Dd(I.a[j],_[yr]||"_",Ft);if(g.length!==0){Ft={tenantId:_[yr],providerIds:g,email:Ft},Id(I),re&&re(),V(Ft);return}}I.g.a(Le({code:"no-matching-tenant-for-email"}).toString())}},DS(I.a[j]),Cd(I.a[j]));I.g.render(I.s),(H=G0(I.a[j]).selectTenantUiShown||null)&&H()}else{var it=Error("Invalid project configuration: API key is invalid!");it.code="invalid-configuration",I.pb(it),H(it)}})},n.Pb=function(p,_){if(!this.a.hasOwnProperty(p))throw Error("Invalid project configuration: API key is invalid!");var I=_||void 0;gu(this.a[p],_||"_");try{this.i=en.app(I).auth()}catch{var j=this.a[p].a.get("authDomain");if(!j)throw Error("Invalid project configuration: authDomain is required!");p=en.initializeApp({apiKey:p,authDomain:j},I),p.auth().tenantId=_,this.i=p.auth()}return this.i},n.Zb=function(p,_){var I=this;return new Ri(function(j,V){function H(yr,g){I.j=new Vo(p),sA(I.j,I.s,yr,g)}var re=p.app.options.apiKey;I.a.hasOwnProperty(re)||V(Error("Invalid project configuration: API key is invalid!"));var ue=W0(I.a[re],p.tenantId||"_",_&&_.providerIds);Id(I),V={signInSuccessWithAuthResult:function(yr){return j(yr),!1}};var Re=G0(I.a[re]).signInUiShown||null,it=!1;V.uiChanged=function(yr,g){yr===null&&g==="callback"?((yr=ep("firebaseui-id-page-callback",I.s))&&hs(yr),I.h=new H0,I.h.render(I.s)):it||yr===null&&g==="spinner"||g==="blank"||(I.h&&(I.h.m(),I.h=null),it=!0,Re&&Re(p.tenantId))},ue.callbacks=V,ue.credentialHelper="none";var Ft;_&&_.email&&(Ft={emailHint:_.email}),I.j?I.j.Wa().then(function(){H(ue,Ft)}):H(ue,Ft)})},n.reset=function(){var p=this;return vi().then(function(){p.j&&p.j.Wa()}).then(function(){p.j=null,Id(p)})},n.Vb=function(){var p=this;this.h||this.A||(this.A=window.setTimeout(function(){Id(p),p.h=new H0,p.g=p.h,p.h.render(p.s),p.A=null},500))},n.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},n.Bb=function(){return Id(this),this.g=new WE,this.g.render(this.s),vi()};function Id(p){p.j&&p.j.reset(),p.mb(),p.g&&p.g.m()}n.pb=function(p){var _=this,I=Le({code:p.code}).toString()||p.message;Id(this);var j;p.retry&&typeof p.retry=="function"&&(j=function(){_.reset(),p.retry()}),this.g=new qE(I,j),this.g.render(this.s)},n.Rb=function(p){var _=this;return vi().then(function(){var I=_.i&&_.i.app.options.apiKey;if(!_.a.hasOwnProperty(I))throw Error("Invalid project configuration: API key is invalid!");if(gu(_.a[I],p.tenantId||"_"),!_.i.currentUser||_.i.currentUser.uid!==p.uid)throw Error("The user being processed does not match the signed in user!");return(I=G0(_.a[I]).beforeSignInSuccess||null)?I(p):p}).then(function(I){if(I.uid!==p.uid)throw Error("User with mismatching UID returned.");return I})},$("firebaseui.auth.FirebaseUiHandler",yc),$("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",yc.prototype.Ub),$("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",yc.prototype.Pb),$("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",yc.prototype.Zb),$("firebaseui.auth.FirebaseUiHandler.prototype.reset",yc.prototype.reset),$("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",yc.prototype.Vb),$("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",yc.prototype.mb),$("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",yc.prototype.Bb),$("firebaseui.auth.FirebaseUiHandler.prototype.handleError",yc.prototype.pb),$("firebaseui.auth.FirebaseUiHandler.prototype.processUser",yc.prototype.Rb),$("firebaseui.auth.AuthUI",Vo),$("firebaseui.auth.AuthUI.getInstance",function(p){return p=aA(p),sv[p]?sv[p]:null}),$("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",Vo.prototype.Db),$("firebaseui.auth.AuthUI.prototype.start",Vo.prototype.start),$("firebaseui.auth.AuthUI.prototype.setConfig",Vo.prototype.ib),$("firebaseui.auth.AuthUI.prototype.signIn",Vo.prototype.Wb),$("firebaseui.auth.AuthUI.prototype.reset",Vo.prototype.reset),$("firebaseui.auth.AuthUI.prototype.delete",Vo.prototype.Wa),$("firebaseui.auth.AuthUI.prototype.isPendingRedirect",Vo.prototype.nb),$("firebaseui.auth.AuthUIError",tr),$("firebaseui.auth.AuthUIError.prototype.toJSON",tr.prototype.toJSON),$("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",s0),$("firebaseui.auth.CredentialHelper.NONE",l0),$("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Ri.prototype.catch=Ri.prototype.Ca,Ri.prototype.finally=Ri.prototype.fc}).apply(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window)}).apply(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window);typeof window<"u"&&(window.dialogPolyfill=BQe);var E9=firebaseui.auth;const VQe=Object.freeze(Object.defineProperty({__proto__:null,auth:E9},Symbol.toStringTag,{value:"Module"})),zQe=()=>{const n=Y.useRef(null);return Y.useEffect(()=>{const e=E9.AuthUI.getInstance()||new E9.AuthUI(zl),t={signInFlow:"popup",signInOptions:[Ou.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:r=>{var i;return(i=r.additionalUserInfo)!=null&&i.isNewUser?Kve("google"):Yve("google"),!1}}};return n.current&&e.start(n.current,t),()=>{e.reset()}},[]),x.jsx("div",{ref:n,id:"firebaseui-auth-container"})},HQe=()=>{const{user:n,signOut:e}=Ht(),[t,r]=Y.useState(!1);return x.jsx("div",{className:"p-4 border-b border-border",children:x.jsx("div",{className:"flex items-center",children:n?x.jsxs("div",{className:"w-full",children:[x.jsxs("div",{className:"flex items-center w-full cursor-pointer hover:bg-background-primary rounded-lg p-2 -m-2",onClick:()=>r(!t),children:[x.jsx("img",{src:n.photoURL||"",alt:"User Avatar",crossOrigin:"anonymous",referrerPolicy:"no-referrer",onError:i=>{console.error("Error loading user avatar:",i)},className:"w-10 h-10 rounded-full"}),x.jsxs("div",{className:"ml-3 text-left flex-1",children:[x.jsx("p",{className:"text-sm font-medium text-text-primary",children:n.displayName}),n.userName&&x.jsxs("p",{className:"text-xs text-text-secondary",children:["@",n.userName]})]})]}),t&&x.jsx("div",{className:"mt-2 pl-2",children:x.jsx("button",{onClick:()=>{e(),r(!1)},className:"px-3 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:"Sign Out"})})]}):x.jsx(zQe,{})})})},gB=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,Zie=n=>{const e=document.documentElement;n?(e.classList.add("dark"),e.setAttribute("data-theme","dark")):(e.classList.remove("dark"),e.setAttribute("data-theme","light"))},HW=uh()(DI((n,e)=>({mode:"system",isDark:gB(),setMode:t=>{const r=t==="system"?gB():t==="dark";Zie(r),n({mode:t,isDark:r})},initializeTheme:()=>{const{mode:t}=e(),r=t==="system"?gB():t==="dark";Zie(r),n({isDark:r})}}),{name:"theme-store",partialize:n=>({mode:n.mode})}));typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const{mode:n,setMode:e}=HW.getState();n==="system"&&e("system")});const GQe=()=>{const{mode:n,setMode:e}=HW(),t=[{mode:"light",icon:"sun-line",label:"Light"},{mode:"dark",icon:"moon-line",label:"Dark"},{mode:"system",icon:"computer-line",label:"System"}];return x.jsxs("div",{className:"p-4 border-t border-border",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsx("span",{className:"text-sm font-medium text-text-primary",children:"Theme"})}),x.jsx("div",{className:"flex items-center bg-background-primary rounded-md p-1",children:t.map(r=>x.jsx("button",{onClick:()=>e(r.mode),className:`flex-1 flex items-center justify-center p-2 rounded text-xs font-medium transition-all ${n===r.mode?"bg-primary text-white shadow-sm":"text-text-secondary hover:text-text-primary hover:bg-background-secondary"}`,title:r.label,children:x.jsx(mt,{name:r.icon,size:16})},r.mode))})]})},Pw=({className:n=""})=>{const{isLeftSidebarOpen:e,toggleLeftSidebar:t}=dl(),r=ns(),i=Gg(),{user:a,signOut:o}=Ht(),s=[{icon:"timer-line",label:"Pomodoro Timer",path:"/pomodoro"},{icon:"task-line",label:"Task Management",path:"/projects"},{icon:"dashboard-line",label:"Productivity Insights",path:"/dashboard"},{icon:"calendar-line",label:"Calendar",path:"/calendar"},{icon:"brain-line",label:"Deep Focus",path:"/deep-focus"},{icon:"database-2-line",label:"Data Sync",path:"/data-sync"},{icon:"settings-line",label:"Settings",path:"/dashboard/settings"}],l=d=>{i(d),window.innerWidth<768&&t()},c=d=>!!(d==="/dashboard"&&r.pathname==="/dashboard"||d==="/pomodoro"&&r.pathname==="/pomodoro"||d==="/projects"&&r.pathname==="/projects"||d==="/deep-focus"&&r.pathname==="/deep-focus"||d==="/calendar"&&r.pathname==="/calendar"||d==="/data-sync"&&r.pathname==="/data-sync"||d==="/privacy-policy"&&r.pathname==="/privacy-policy"||d.startsWith("/dashboard/")&&r.pathname.startsWith(d)),u=()=>{t()};return x.jsx(x.Fragment,{children:x.jsxs("aside",{id:"sidebar",className:`bg-background-secondary border-r border-border flex flex-col min-h-screen
        ${e?"w-64":"w-0"} ${n}`,style:{zIndex:40},children:[x.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[x.jsx("h1",{className:"text-xl font-['Pacifico'] text-primary",children:"Make10000hours"}),x.jsx("button",{onClick:u,className:"p-1 hover:bg-background-primary hover:shadow-sm hover:scale-105 rounded-md transition-all duration-200 group",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"arrow-left-s-line",size:20})})})]}),x.jsx(HQe,{}),x.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:x.jsx("ul",{className:"space-y-1",children:s.map((d,h)=>{const f=c(d.path);return x.jsx("li",{children:x.jsxs(nO,{to:d.path,onClick:m=>{m.preventDefault(),l(d.path)},className:`flex items-center px-3 py-2 text-sm font-medium rounded-md text-left
                    ${f?"text-primary bg-indigo-50 dark:bg-primary/10":"text-text-secondary hover:bg-background-primary"}`,children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:x.jsx(mt,{name:d.icon,size:20})}),d.label]})},h)})})}),x.jsx(GQe,{}),x.jsx("div",{className:"p-4 border-t border-border",children:x.jsxs(nO,{to:"/privacy-policy",onClick:d=>{d.preventDefault(),l("/privacy-policy")},className:`flex items-center px-3 py-2 text-sm font-medium rounded-md text-left
            ${c("/privacy-policy")?"text-primary bg-indigo-50 dark:bg-primary/10":"text-text-secondary hover:bg-background-primary"}`,children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-3",children:x.jsx(mt,{name:"shield-line",size:20})}),"Privacy Policy"]})})]})})},ni=({text:n,children:e,className:t="",placement:r="bottom",offset:i=16})=>{const[a,o]=Y.useState(!1),[s,l]=Y.useState({x:0,y:0}),c=Y.useRef(null),u=f=>{if(c.current){const m=c.current.getBoundingClientRect();let v=0,y=0;switch(r){case"bottom":v=m.left+m.width/2,y=m.bottom+i;break;case"top":v=m.left+m.width/2,y=m.top-i;break;case"left":v=m.left-i,y=m.top+m.height/2;break;case"right":v=m.right+i,y=m.top+m.height/2;break;default:v=m.left+m.width/2,y=m.bottom+i}l({x:v,y})}o(!0)},d=()=>{o(!1)},h=()=>{switch(r){case"bottom":case"top":return"-translate-x-1/2";case"left":return"-translate-y-1/2 -translate-x-full";case"right":return"-translate-y-1/2";default:return"-translate-x-1/2"}};return x.jsxs(x.Fragment,{children:[x.jsx("div",{ref:c,onMouseEnter:u,onMouseLeave:d,className:`relative ${t}`,children:e}),a&&x.jsx("div",{className:`fixed z-[99999] px-3 py-2 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-md pointer-events-none transition-all duration-150 ease-out whitespace-nowrap shadow-lg transform ${h()}`,style:{left:s.x,top:s.y},children:n})]})};class WQe{constructor(){$t(this,"collectionName","deepFocusSessions")}async getUserSessions(e,t,r){try{console.log("🚀 DeepFocusSessionService: Smart query with database-level filtering",{userId:e,hasDateFilter:!!(t&&r),dateRange:t&&r?`${t.toISOString().split("T")[0]} to ${r.toISOString().split("T")[0]}`:"all time"});let i=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("status","!=","deleted"));if(t&&r){const s=Kr.fromDate(t),l=Kr.fromDate(r);i=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("createdAt",">=",s),gt("createdAt","<=",l)),console.log("✅ Database-level date filtering applied:",{startDate:t.toISOString(),endDate:r.toISOString(),benefit:"No individual session checking needed"})}const o=(await kn(i)).docs.map(s=>{var c,u,d,h,f;const l=s.data();return{id:s.id,userId:l.userId,startTime:((c=l.startTime)==null?void 0:c.toDate())||new Date,endTime:(u=l.endTime)==null?void 0:u.toDate(),duration:l.duration,status:l.status,source:l.source||"extension",timezone:l.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,localDate:l.localDate||new Date((d=l.startTime)!=null&&d.toDate?l.startTime.toDate():l.startTime).toISOString().split("T")[0],createdAt:((h=l.createdAt)==null?void 0:h.toDate())||new Date,updatedAt:((f=l.updatedAt)==null?void 0:f.toDate())||new Date}}).filter(s=>s.status!=="deleted");return o.sort((s,l)=>l.createdAt.getTime()-s.createdAt.getTime()),console.log("✅ Smart query completed:",{sessionsReturned:o.length,approach:t&&r?"database-filtered":"all-sessions",efficiency:"No JavaScript filtering or individual session logs"}),o}catch(i){throw console.error("❌ Error fetching user Deep Focus sessions:",i),i}}async getActiveSession(e){try{const t=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("status","==","active")),r=await kn(t);if(r.empty)return null;const i=r.docs.map(a=>{var s,l,c,u,d;const o=a.data();return{id:a.id,userId:o.userId,startTime:((s=o.startTime)==null?void 0:s.toDate())||new Date,endTime:(l=o.endTime)==null?void 0:l.toDate(),duration:o.duration,status:o.status,source:o.source||"extension",timezone:o.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,localDate:o.localDate||new Date((c=o.startTime)!=null&&c.toDate?o.startTime.toDate():o.startTime).toISOString().split("T")[0],createdAt:((u=o.createdAt)==null?void 0:u.toDate())||new Date,updatedAt:((d=o.updatedAt)==null?void 0:d.toDate())||new Date}});return i.sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime()),i[0]||null}catch(t){throw console.error("Error fetching active Deep Focus session:",t),t}}subscribeToUserSessions(e,t){const r=zt(qt(Qe,this.collectionName),gt("userId","==",e));return cg(r,i=>{let a=i.docs.map(o=>{var l,c,u,d,h;const s=o.data();return{id:o.id,userId:s.userId,startTime:((l=s.startTime)==null?void 0:l.toDate())||new Date,endTime:(c=s.endTime)==null?void 0:c.toDate(),duration:s.duration,status:s.status,source:s.source||"extension",timezone:s.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,localDate:s.localDate||new Date((u=s.startTime)!=null&&u.toDate?s.startTime.toDate():s.startTime).toISOString().split("T")[0],createdAt:((d=s.createdAt)==null?void 0:d.toDate())||new Date,updatedAt:((h=s.updatedAt)==null?void 0:h.toDate())||new Date}});a.sort((o,s)=>s.createdAt.getTime()-o.createdAt.getTime()),t(a)})}async getCompletedSessionsCount(e){try{const t=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("status","==","completed"));return(await kn(t)).size}catch(t){return console.error("Error getting completed sessions count:",t),0}}async getTotalFocusTime(e){try{return(await this.getUserSessions(e)).filter(r=>r.status==="completed"&&r.duration).reduce((r,i)=>r+(i.duration||0),0)}catch(t){return console.error("Error calculating total focus time:",t),0}}async suspendSession(e){try{const t=Zt(Qe,this.collectionName,e);await fa(t,{status:"suspended",suspendedAt:zd(),updatedAt:zd()}),console.log("Deep Focus session suspended:",e)}catch(t){throw console.error("Error suspending Deep Focus session:",t),t}}async resumeSession(e){try{const t=Zt(Qe,this.collectionName,e);await fa(t,{status:"active",resumedAt:zd(),updatedAt:zd()}),console.log("Deep Focus session resumed:",e)}catch(t){throw console.error("Error resuming Deep Focus session:",t),t}}async cleanupOrphanedSessions(e){var t;try{const r=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("status","==","active")),i=await kn(r);let a=0;for(const o of i.docs){const s=o.data(),l=((t=s.startTime)==null?void 0:t.toDate())||new Date,c=new Date,u=s.duration||0;await fa(Zt(Qe,this.collectionName,o.id),{endTime:zd(),duration:u,status:"completed",updatedAt:zd()}),a++,console.log("🧹 Cleaned up orphaned session:",o.id,"Duration:",u,"minutes","(incremental only)")}return a>0&&console.log("✅ Cleaned up",a,"orphaned sessions"),a}catch(r){return console.error("❌ Error cleaning up orphaned sessions:",r),0}}}const Mc=new WQe,Kwe=Object.freeze(Object.defineProperty({__proto__:null,deepFocusSessionService:Mc},Symbol.toStringTag,{value:"Module"}));class qQe{constructor(){$t(this,"collectionName","dailySiteUsage")}async backupDayData(e,t,r){var i;try{const a=`${e}_${t}`,o=Zt(Qe,this.collectionName,a),s=await Pc(o),l=new Date,c={userId:e,date:t,totalTime:r.totalTime||0,sitesVisited:r.sitesVisited||0,productivityScore:r.productivityScore||0,sites:this.processSiteData(r.sites||{}),syncedAt:l,extensionVersion:r.version||"1.0.0",createdAt:s.exists()&&((i=s.data())==null?void 0:i.createdAt)||l,updatedAt:l};await Is(o,c,{merge:!0}),console.log(`✅ Backed up site usage data for ${t}`)}catch(a){throw console.error(`❌ Failed to backup site usage for ${t}:`,a),a}}async batchBackupData(e,t){try{const r=zk(Qe),i=new Date;Object.entries(t).forEach(([a,o])=>{const s=`${e}_${a}`,l=Zt(Qe,this.collectionName,s),c={userId:e,date:a,totalTime:o.totalTime||0,sitesVisited:o.sitesVisited||0,productivityScore:o.productivityScore||0,sites:this.processSiteData(o.sites||{}),syncedAt:i,extensionVersion:o.version||"1.0.0",createdAt:i,updatedAt:i};r.set(l,c,{merge:!0})}),await r.commit(),console.log(`✅ Batch backed up ${Object.keys(t).length} days of data`)}catch(r){throw console.error("❌ Failed to batch backup data:",r),r}}async getUserData(e,t,r){try{const i=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("date",">=",t),gt("date","<=",r),ta("date","desc"));return(await kn(i)).docs.map(o=>{var s,l,c;return{id:o.id,...o.data(),createdAt:((s=o.data().createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=o.data().updatedAt)==null?void 0:l.toDate())||new Date,syncedAt:((c=o.data().syncedAt)==null?void 0:c.toDate())||new Date}})}catch(i){throw console.error("❌ Failed to retrieve user site usage data:",i),i}}async getLastSyncInfo(e){try{const t=zt(qt(Qe,this.collectionName),gt("userId","==",e),ta("date","desc"),$ge(1)),r=await kn(t);if(r.empty)return{lastSyncDate:null,totalDays:0};const i=r.docs[0],a=zt(qt(Qe,this.collectionName),gt("userId","==",e)),o=await kn(a);return{lastSyncDate:i.data().date,totalDays:o.size}}catch(t){return console.error("❌ Failed to get sync info:",t),{lastSyncDate:null,totalDays:0}}}async restoreToExtension(e,t){try{const r=`${e}_${t}`,i=Zt(Qe,this.collectionName,r),a=await Pc(i);if(!a.exists())throw new Error(`No data found for ${t}`);const o=a.data();return{totalTime:o.totalTime,sitesVisited:o.sitesVisited,productivityScore:o.productivityScore,sites:Object.fromEntries(Object.entries(o.sites).map(([s,l])=>[s,{timeSpent:l.timeSpent,visits:l.visits,category:l.category,lastVisit:l.lastVisit}]))}}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}}async cleanupOldData(e,t=90){try{const r=new Date;r.setDate(r.getDate()-t);const i=el(r),a=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("date","<",i)),o=await kn(a);if(o.empty)return 0;const s=zk(Qe);return o.docs.forEach(l=>{s.delete(l.ref)}),await s.commit(),console.log(`🧹 Cleaned up ${o.size} old site usage records`),o.size}catch(r){throw console.error("❌ Failed to cleanup old data:",r),r}}processSiteData(e){const t={};return Object.entries(e).forEach(([r,i])=>{r&&i&&typeof i.timeSpent=="number"&&(t[r]={domain:r,timeSpent:Math.max(0,i.timeSpent),visits:Math.max(0,i.visits||0),category:i.category||"uncategorized",lastVisit:i.lastVisit?new Date(i.lastVisit):new Date})}),t}async getBatchBackupData(e,t){try{const r={},i=t.map(async a=>{const o=await this.getBackupData(e,a);o&&(r[a]=o)});return await Promise.all(i),r}catch(r){throw console.error("❌ Error getting batch backup data:",r),r}}async getBackupData(e,t){try{const r=`${e}_${t}`,i=Zt(Qe,this.collectionName,r),a=await Pc(i);if(!a.exists())return null;const o=a.data();return{id:a.id,...o,createdAt:o.createdAt instanceof Kr?o.createdAt.toDate():new Date(o.createdAt),updatedAt:o.updatedAt instanceof Kr?o.updatedAt.toDate():new Date(o.updatedAt),syncedAt:o.syncedAt instanceof Kr?o.syncedAt.toDate():new Date(o.syncedAt)}}catch(r){throw console.error("❌ Error getting backup data:",r),r}}async getAggregatedStats(e,t=30){try{const r=el(new Date),i=new Date;i.setDate(i.getDate()-t);const a=el(i),o=await this.getUserData(e,a,r);if(o.length===0)return{totalTime:0,avgDailyTime:0,topSites:[],productivityTrend:0};const s=o.reduce((w,S)=>w+S.totalTime,0),l=s/o.length,c={};o.forEach(w=>{Object.values(w.sites).forEach(S=>{c[S.domain]||(c[S.domain]={totalTime:0,count:0}),c[S.domain].totalTime+=S.timeSpent,c[S.domain].count++})});const u=Object.entries(c).map(([w,S])=>({domain:w,totalTime:S.totalTime,avgDaily:S.totalTime/S.count})).sort((w,S)=>S.totalTime-w.totalTime).slice(0,10),d=Math.floor(o.length/2),h=o.slice(0,d),f=o.slice(d),m=h.length>0?h.reduce((w,S)=>w+S.productivityScore,0)/h.length:0,v=f.length>0?f.reduce((w,S)=>w+S.productivityScore,0)/f.length:0,y=m>0?(v-m)/m*100:0;return{totalTime:s,avgDailyTime:l,topSites:u,productivityTrend:y}}catch(r){throw console.error("❌ Failed to get aggregated stats:",r),r}}async getDailyUsage(e,t,r){try{const i=eO(t).split("T")[0],a=eO(r).split("T")[0],o=zt(qt(Qe,this.collectionName),gt("userId","==",e),gt("date",">=",i),gt("date","<=",a),ta("date","desc"));return(await kn(o)).docs.map(l=>{var c,u,d;return{id:l.id,...l.data(),createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=l.data().updatedAt)==null?void 0:u.toDate())||new Date,syncedAt:((d=l.data().syncedAt)==null?void 0:d.toDate())||new Date}})}catch(i){throw console.error("❌ Failed to get daily usage:",i),i}}async getAllTimeDailyUsage(e){try{const t=zt(qt(Qe,this.collectionName),gt("userId","==",e),ta("date","desc"));return(await kn(t)).docs.map(i=>{var a,o,s;return{id:i.id,...i.data(),createdAt:((a=i.data().createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=i.data().updatedAt)==null?void 0:o.toDate())||new Date,syncedAt:((s=i.data().syncedAt)==null?void 0:s.toDate())||new Date}})}catch(t){throw console.error("❌ Failed to get all time daily usage:",t),t}}}const Dc=new qQe;class Qie{static async getTimeRangeData(e,t,r){try{const i=new Date().toISOString().split("T")[0],a=new Date(t),o=new Date(r);console.log("🔄 HybridDataService: Fetching data for range:",{startDate:t,endDate:r,today:i});const{pastDates:s,currentDate:l,futureDates:c}=this.categorizedDates(t,r,i);console.log("📅 Date categorization:",{pastDates:s.length,currentDate:l?"included":"not included",futureDates:c.length});const u={};if(s.length>0)try{const h=await Dc.getBatchBackupData(e,s);Object.entries(h).forEach(([f,m])=>{u[f]=this.convertFirebaseToHybrid(m)}),console.log("✅ Firebase data loaded for",Object.keys(h).length,"dates")}catch(h){console.warn("⚠️ Firebase data fetch failed:",h)}if(l){console.log("🎯 TODAY DETECTED - Attempting to fetch extension data...");try{if(Rt.isExtensionInstalled()){console.log("🔌 Extension is installed, fetching today stats...");const h=await Rt.getTodayStats();if(console.log("📊 Extension response:",h),h.success!==!1){const f=h.data||h;u[i]=this.convertExtensionToHybrid(f),console.log("✅ Extension data loaded for today:",i,u[i])}else console.warn("⚠️ Extension returned unsuccessful response:",h)}else console.log("⚠️ Extension not available for current date")}catch(h){console.warn("⚠️ Extension data fetch failed:",h);try{const f=await Dc.getBackupData(e,i);f&&(u[i]=this.convertFirebaseToHybrid(f),console.log("✅ Fallback to Firebase data for today"))}catch{console.warn("⚠️ Firebase fallback also failed")}}}else console.log("❌ TODAY NOT DETECTED - Extension data will not be fetched for current date");if(c.length>0)try{console.log("⚠️ Future dates detected - checking Firebase for test data:",c);const h=await Dc.getBatchBackupData(e,c);c.forEach(f=>{h[f]?(u[f]=this.convertFirebaseToHybrid(h[f]),console.log("✅ Found future test data in Firebase for:",f)):u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}catch(h){console.warn("⚠️ Failed to query Firebase for future dates:",h),c.forEach(f=>{u[f]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}})}this.fillMissingDates(u,t,r);const d=this.aggregateData(u,t,r);return{success:!0,data:u,aggregated:d}}catch(i){return console.error("❌ HybridDataService: Failed to get time range data:",i),{success:!1,data:{},aggregated:{totalTime:0,sitesVisited:0,avgProductivityScore:0,sites:{},dateRange:{startDate:t,endDate:r,totalDays:0,daysCovered:0}}}}}static categorizedDates(e,t,r){const i=new Date(e),a=new Date(t),o=[],s=[];let l=!1;console.log("🔍 Date categorization debug:",{startDate:e,endDate:t,today:r,systemDate:new Date().toISOString().split("T")[0]});const c=new Date(i);for(;c<=a;){const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),h=String(c.getDate()).padStart(2,"0"),f=`${u}-${d}-${h}`;f<r?(o.push(f),console.log(`✅ Added to pastDates: ${f}`)):f===r?(l=!0,console.log(`✅ Set as currentDate: ${f}`)):(s.push(f),console.log(`⚠️ Added to futureDates: ${f}`)),c.setDate(c.getDate()+1)}return console.log("📊 Final categorization:",{pastDates:o,currentDate:l,futureDates:s,todayString:r}),{pastDates:o,currentDate:l,futureDates:s}}static convertFirebaseToHybrid(e){return{totalTime:e.totalTime,sitesVisited:e.sitesVisited,productivityScore:e.productivityScore,sites:Object.entries(e.sites).reduce((t,[r,i])=>(t[r]={timeSpent:i.timeSpent,visits:i.visits},t),{})}}static convertExtensionToHybrid(e){return{totalTime:e.totalTime||0,sitesVisited:e.sitesVisited||0,productivityScore:e.productivityScore||0,sites:e.sites||{}}}static fillMissingDates(e,t,r){const i=new Date(t),a=new Date(r),o=new Date(i);for(;o<=a;){const s=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0"),u=`${s}-${l}-${c}`;e[u]||(e[u]={totalTime:0,sitesVisited:0,productivityScore:0,sites:{}}),o.setDate(o.getDate()+1)}}static aggregateData(e,t,r){Object.keys(e).sort();let i=0,a=0,o=0;const s={};Object.values(e).forEach(f=>{i+=f.totalTime,f.totalTime>0&&(a+=f.productivityScore,o++),Object.entries(f.sites).forEach(([m,v])=>{s[m]||(s[m]={timeSpent:0,visits:0}),s[m].timeSpent+=v.timeSpent,s[m].visits+=v.visits})});const l=Object.keys(s).length,c=o>0?a/o:0,u=new Date(t),d=new Date(r),h=Math.ceil((d.getTime()-u.getTime())/(1e3*60*60*24))+1;return{totalTime:i,sitesVisited:l,avgProductivityScore:Math.round(c),sites:s,dateRange:{startDate:t,endDate:r,totalDays:h,daysCovered:o}}}static async getCurrentDayData(){try{if(!Rt.isExtensionInstalled())return{success:!1,data:null};const e=await Rt.getTodayStats();if(e.success===!1)return{success:!1,data:null};const t=e.data||e;return{success:!0,data:this.convertExtensionToHybrid(t)}}catch(e){return console.error("❌ Failed to get current day data:",e),{success:!1,data:null}}}static convertToWebAppFormat(e){const t=Object.entries(e.sites).map(([r,i],a)=>({id:(a+1).toString(),name:this.getDomainDisplayName(r),url:r,icon:this.getDomainIcon(r),backgroundColor:this.getDomainColor(r),timeSpent:Math.round(i.timeSpent/6e4),sessions:i.visits,percentage:e.totalTime>0?Math.round(i.timeSpent/e.totalTime*100):0}));return{timeMetrics:{onScreenTime:Math.round(e.totalTime/(1e3*60)),workingTime:Math.round(e.totalTime/(1e3*60)),deepFocusTime:Math.round(e.totalTime/(1e3*60)),overrideTime:0},siteUsage:t.sort((r,i)=>i.timeSpent-r.timeSpent),productivityScore:e.productivityScore}}static getDomainDisplayName(e){return{"youtube.com":"YouTube","github.com":"GitHub","stackoverflow.com":"Stack Overflow","figma.com":"Figma","notion.so":"Notion","twitter.com":"Twitter","facebook.com":"Facebook","instagram.com":"Instagram","linkedin.com":"LinkedIn"}[e]||e.replace(/^www\./,"")}static getDomainIcon(e){return{"youtube.com":"ri-youtube-line","github.com":"ri-github-line","stackoverflow.com":"ri-stack-overflow-line","figma.com":"ri-file-text-line","notion.so":"ri-file-list-line","twitter.com":"ri-twitter-line","facebook.com":"ri-facebook-line","instagram.com":"ri-instagram-line","linkedin.com":"ri-linkedin-box-line"}[e]||"ri-global-line"}static getDomainColor(e){return{"youtube.com":"rgba(251,191,114,1)","github.com":"rgba(141,211,199,1)","stackoverflow.com":"rgba(252,141,98,1)","figma.com":"rgba(87,181,231,1)","notion.so":"#E5E7EB","twitter.com":"#1DA1F2","facebook.com":"#4267B2","instagram.com":"#E4405F","linkedin.com":"#0A66C2"}[e]||"#6B7280"}}const Jie={required:["userId","domain","duration"]},mB={duration:5,reason:"manual_override",metadata:{overrideCount:1}};class YQe{constructor(){$t(this,"collectionName","overrideSessions")}validateOverrideData(e){var i;const t=[];if(Jie.required.forEach(a=>{e[a]||t.push(`Missing required field: ${a}`)}),e.userId&&typeof e.userId!="string"&&t.push("userId must be a string"),e.domain&&typeof e.domain!="string"&&t.push("domain must be a string"),e.duration&&(typeof e.duration!="number"?t.push("duration must be a number"):(e.duration<1||e.duration>120)&&t.push("duration must be between 1 and 120 minutes")),t.length>0)return{isValid:!1,errors:t};const r={userId:e.userId,domain:e.domain,duration:e.duration||mB.duration,createdAt:zd(),reason:e.reason||mB.reason,metadata:{...mB.metadata,...e.metadata,extensionVersion:((i=e.metadata)==null?void 0:i.extensionVersion)||"1.0.0"}};return e.url&&(r.url=e.url),e.deepFocusSessionId&&(r.deepFocusSessionId=e.deepFocusSessionId),e.deviceInfo&&(r.deviceInfo=e.deviceInfo),{isValid:!0,errors:[],sanitizedData:r}}async createValidatedOverrideSession(e){try{console.log("🔄 Validating override session data:",e);const t=this.validateOverrideData(e);if(!t.isValid)return console.error("❌ Validation failed:",t.errors),{success:!1,errors:t.errors};console.log("✅ Validation passed, creating session:",t.sanitizedData);const r=await qR(qt(Qe,this.collectionName),t.sanitizedData);return console.log("✅ Override session created successfully:",{id:r.id,domain:t.sanitizedData.domain,duration:t.sanitizedData.duration+"min",userId:t.sanitizedData.userId,timestamp:new Date().toISOString()}),{success:!0,id:r.id}}catch(t){return console.error("❌ Error creating override session:",t),{success:!1,errors:[t instanceof Error?t.message:"Unknown error"]}}}async setupTestData(e){const t=[{userId:e,domain:"facebook.com",url:"https://facebook.com/feed",duration:5,reason:"manual_override",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"instagram.com",url:"https://instagram.com/explore",duration:3,reason:"break_time",deviceInfo:{userAgent:"Test Browser",platform:"Web"}},{userId:e,domain:"youtube.com",url:"https://youtube.com/watch",duration:10,reason:"emergency",deviceInfo:{userAgent:"Test Browser",platform:"Web"}}];console.log("🔄 Setting up test override sessions...");for(const r of t){const i=await this.createValidatedOverrideSession(r);i.success?console.log(`✅ Test session created: ${r.domain} (${r.duration}min)`):console.error(`❌ Failed to create test session for ${r.domain}:`,i.errors)}}getSchemaInfo(){return{collectionName:this.collectionName,requiredFields:Jie.required,optionalFields:["url","deepFocusSessionId","reason","deviceInfo","metadata"],indexes:["userId + createdAt (composite)","domain (single)","userId (single)"]}}}const KQe=new YQe;class XQe{constructor(){$t(this,"collectionName","overrideSessions")}async createOverrideSession(e){var r;const t=await KQe.createValidatedOverrideSession(e);if(!t.success){const i=`Failed to create override session: ${(r=t.errors)==null?void 0:r.join(", ")}`;throw console.error("❌",i),new Error(i)}return t.id}async getUserOverrides(e,t,r){var i;try{let a=zt(qt(Qe,this.collectionName),gt("userId","==",e),ta("createdAt","desc"));const s=(await kn(a)).docs.map(l=>{var c;return{id:l.id,...l.data(),createdAt:((c=l.data().createdAt)==null?void 0:c.toDate())||new Date}});return t&&r?s.filter(l=>{const c=new Date(l.createdAt);return c>=t&&c<=r}):s}catch(a){if(console.error("Error fetching override sessions:",a),a instanceof Error&&((i=a.message)!=null&&i.includes("index"))){console.log("Falling back to simple query without orderBy...");try{const o=zt(qt(Qe,this.collectionName),gt("userId","==",e)),c=(await kn(o)).docs.map(u=>{var d;return{id:u.id,...u.data(),createdAt:((d=u.data().createdAt)==null?void 0:d.toDate())||new Date}}).sort((u,d)=>d.createdAt.getTime()-u.createdAt.getTime());return t&&r?c.filter(u=>{const d=new Date(u.createdAt);return d>=t&&d<=r}):c}catch(o){return console.error("Fallback query also failed:",o),[]}}return[]}}}const Xd=new XQe;class ol{static async getFaviconUrl(e,t={}){const{size:r=this.DEFAULT_SIZE,retryAttempts:i=2,timeout:a=this.TIMEOUT_MS,fallbackToDefault:o=!0}=t,s=this.cleanDomain(e),l=`${s}:${r}:sharp`;if(this.cache.has(l))return this.cache.get(l);try{const c=r*this.SIZE_MULTIPLIER,u=this.buildGoogleFaviconUrl(s,c);if(await this.validateFaviconUrl(u,a)){const h={url:u,isDefault:!1,source:"google"};return this.cache.set(l,h),h}if(o)return this.getFallbackFavicon(s,r,l);throw new Error("Google favicon service failed and fallback disabled")}catch(c){if(console.warn(`Failed to fetch favicon for ${s}:`,c),o)return this.getFallbackFavicon(s,r,l);throw c}}static async getFavicons(e,t={}){const r=new Map,i=5;for(let a=0;a<e.length;a+=i){const s=e.slice(a,a+i).map(async c=>{try{const u=await this.getFaviconUrl(c,t);return{domain:this.cleanDomain(c),result:u}}catch(u){return console.warn(`Failed to get favicon for ${c}:`,u),{domain:this.cleanDomain(c),result:this.getFallbackFavicon(this.cleanDomain(c),t.size||this.DEFAULT_SIZE)}}});(await Promise.all(s)).forEach(({domain:c,result:u})=>{r.set(c,u)}),a+i<e.length&&await this.delay(100)}return r}static async preloadFavicons(e,t=this.DEFAULT_SIZE){const r=e.map(this.cleanDomain).filter(i=>!this.cache.has(`${i}:${t}:sharp`));r.length>0&&await this.getFavicons(r,{size:t})}static buildGoogleFaviconUrl(e,t){const r=new URLSearchParams({domain:e,sz:t.toString()});return`${this.GOOGLE_FAVICON_BASE}?${r.toString()}`}static async validateFaviconUrl(e,t){return new Promise(r=>{const i=new Image,a=setTimeout(()=>{i.onload=null,i.onerror=null,r(!1)},t);i.onload=()=>{clearTimeout(a),i.width>16||i.height>16?r(!0):r(!1)},i.onerror=()=>{clearTimeout(a),r(!1)},i.src=e})}static getFallbackFavicon(e,t,r){const i=e.charAt(0).toUpperCase(),a=this.getColorForDomain(e),s={url:this.generateLetterAvatar(i,a,t),isDefault:!0,source:"letter"};return r&&this.cache.set(r,s),s}static generateLetterAvatar(e,t,r){const i=document.createElement("canvas");i.width=r,i.height=r;const a=i.getContext("2d");return a.fillStyle=t,a.fillRect(0,0,r,r),a.fillStyle="#ffffff",a.font=`bold ${Math.floor(r*.6)}px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(e,r/2,r/2),i.toDataURL()}static getColorForDomain(e){const t=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#06B6D4","#EC4899","#84CC16","#F97316","#6366F1"];let r=0;for(let i=0;i<e.length;i++)r=e.charCodeAt(i)+((r<<5)-r);return t[Math.abs(r)%t.length]}static cleanDomain(e){return e.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].split(":")[0].toLowerCase()}static delay(e){return new Promise(t=>setTimeout(t,e))}static clearCache(){this.cache.clear()}static getCacheStats(){return{size:this.cache.size,domains:Array.from(this.cache.keys())}}static getDomainIcon(e){const t={"instagram.com":"ri-instagram-line","facebook.com":"ri-facebook-line","youtube.com":"ri-youtube-line","twitter.com":"ri-twitter-line","linkedin.com":"ri-linkedin-line","github.com":"ri-github-line","google.com":"ri-google-line","tiktok.com":"ri-music-line","reddit.com":"ri-reddit-line","pinterest.com":"ri-pinterest-line","snapchat.com":"ri-snapchat-line","whatsapp.com":"ri-whatsapp-line","telegram.org":"ri-telegram-line","discord.com":"ri-discord-line","zoom.us":"ri-video-line","netflix.com":"ri-netflix-line","amazon.com":"ri-amazon-line"};if(t[e])return t[e];for(const[r,i]of Object.entries(t))if(e.includes(r.split(".")[0]))return i;return"ri-global-line"}}$t(ol,"cache",new Map),$t(ol,"DEFAULT_SIZE",32),$t(ol,"GOOGLE_FAVICON_BASE","https://www.google.com/s2/favicons"),$t(ol,"TIMEOUT_MS",5e3),$t(ol,"SIZE_MULTIPLIER",3);ol.getFaviconUrl.bind(ol);ol.preloadFavicons.bind(ol);class ZQe{constructor(){$t(this,"collectionName","userBlockedSites")}async getUserBlockedSites(e){try{const t=Zt(Qe,this.collectionName,e),r=await Pc(t);return r.exists()?r.data().sites||[]:[]}catch(t){throw console.error("Failed to get blocked sites:",t),t}}async addBlockedSite(e,t){try{const r=await this.getUserBlockedSites(e),a={...{...t,icon:t.icon||ol.getDomainIcon(t.url),backgroundColor:t.backgroundColor||"#6B7280"},id:`site_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},o=[...r,a];await this.updateAllBlockedSites(e,o)}catch(r){throw console.error("Failed to add blocked site:",r),r}}async removeBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).filter(a=>a.id!==t);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to remove blocked site:",r),r}}async toggleBlockedSite(e,t){try{const i=(await this.getUserBlockedSites(e)).map(a=>a.id===t?{...a,isActive:!a.isActive}:a);await this.updateAllBlockedSites(e,i)}catch(r){throw console.error("Failed to toggle blocked site:",r),r}}async updateAllBlockedSites(e,t){var r,i;try{const a=Zt(Qe,this.collectionName,e),o=await Pc(a),s={userId:e,sites:t,metadata:{totalSites:t.length,createdAt:o.exists()?(i=(r=o.data())==null?void 0:r.metadata)==null?void 0:i.createdAt:zd(),updatedAt:zd(),syncedAt:zd(),version:"1.0"}};await Is(a,s,{merge:!0})}catch(a){throw console.error("Failed to update blocked sites:",a),a}}}const Jh=new ZQe,QQe=n=>{if(!n.startDate||!n.endDate)return null;const e=new Date(n.startDate),r=new Date(n.endDate).getTime()-e.getTime(),i=Math.ceil(r/(1e3*60*60*24)),a=new Date(e);a.setDate(a.getDate()-1),a.setHours(23,59,59,999);const o=new Date(a);o.setDate(o.getDate()-i+1),o.setHours(0,0,0,0);let s="previous period";switch(n.rangeType){case"today":s="yesterday";break;case"last 7 days":s="previous week";break;case"last 30 days":s="previous month";break;case"custom":s="previous period";break;default:s="previous period"}return{startDate:o,endDate:a,label:s}},wk=(n,e)=>e===0?n>0?100:null:Math.round((n-e)/e*100),JQe=(n,e,t)=>{const r=wk(n,e);return r===null?{percentage:null,direction:"same",label:n>0?"New data":"No comparison data",color:"text-gray-500",icon:"—"}:r>0?{percentage:r,direction:"up",label:`+${r}% from ${t}`,color:"text-green-500",icon:"—"}:r<0?{percentage:r,direction:"down",label:`${r}% from ${t}`,color:"text-red-500",icon:"—"}:{percentage:0,direction:"same",label:`Equal to ${t}`,color:"text-gray-500",icon:"—"}};let vB="deep-focus-storage-anonymous",eae=null;const eJe=()=>{var n,e;try{const t=localStorage.getItem("user-store");if(t){const r=JSON.parse(t),i=(e=(n=r==null?void 0:r.state)==null?void 0:n.user)==null?void 0:e.uid;i&&i!==eae&&vB==="deep-focus-storage-anonymous"&&(eae=i,vB=`deep-focus-storage-${i}`,console.log("🔑 Storage key updated for user:",i))}}catch(t){console.warn("Failed to get user ID for deep focus storage:",t)}return vB};typeof window<"u"&&window.addEventListener("message",n=>{var e;if(((e=n.data)==null?void 0:e.type)==="EXTENSION_BLOCKED_SITES_UPDATED"){console.log("📨 Web app received blocked sites update from extension");const t=il.getState();t.handleExtensionBlockedSitesUpdate&&t.handleExtensionBlockedSitesUpdate(n.data.payload.sites).catch(r=>{console.error("❌ Failed to handle extension blocked sites update:",r)})}});const il=uh()(DI((n,e)=>({timeMetrics:{onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},dailyUsage:[],siteUsage:[],blockedSites:[],isExtensionConnected:!1,isDeepFocusActive:!1,currentSessionId:null,deepFocusSessions:[],totalSessionsCount:0,totalFocusTime:0,unsubscribe:null,hasRecoveredSession:!1,recoveryInProgress:!1,isBackingUp:!1,lastBackupTime:null,backupError:null,isDeepFocusSyncing:!1,lastDeepFocusSyncTime:null,deepFocusSyncError:null,isSessionPaused:!1,pausedAt:null,totalPausedTime:0,autoSessionManagement:!0,overrideSessions:[],isReloading:!1,comparisonData:null,isLoadingComparison:!1,comparisonError:null,setReloading:t=>n({isReloading:t}),loadExtensionData:async()=>{try{if(!Rt.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=await Rt.getTodayStats();if(t.success===!1)throw new Error(t.error||"Extension returned error");const r=t.data||t,i=Rt.mapExtensionDataToWebApp(r);n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,isExtensionConnected:!0}),await e().loadAllTimeDailyUsage()}catch(t){console.error("Extension data loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeExtensionData:async()=>{try{if(!Rt.isExtensionInstalled()){n({isExtensionConnected:!1});return}const t=Ht.getState().user;if(!(t!=null&&t.uid)){console.warn("⚠️ User not authenticated - skipping all time extension data load"),n({isExtensionConnected:!1});return}const r=await Dc.getAllTimeDailyUsage(t.uid),i=Rt.mapArrSiteUsage(r);console.log("khanhnq6",i),n({timeMetrics:i.timeMetrics,siteUsage:i.siteUsage,dailyUsage:i.dailyUsage,isExtensionConnected:!0})}catch(t){console.error("Extension data all time loading failed:",t),n({isExtensionConnected:!1})}},loadAllTimeDailyUsage:async()=>{try{const{useUserStore:t}=await nn(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>to);return{useUserStore:s}},[]),r=t.getState().user;if(!(r!=null&&r.uid)){console.warn("⚠️ User not authenticated - skipping daily usage load");return}const i=new Date,a=new Date(i);a.setDate(i.getDate()-30);const o=await e().loadHybridTimeRangeData(a.toISOString().split("T")[0],i.toISOString().split("T")[0]);if(console.log("🔍 Hybrid response structure:",{hasData:!!o.data,dataKeys:o.data?Object.keys(o.data).length:0,hasAggregated:!!o.aggregated,sampleDate:o.data?Object.keys(o.data)[0]:null}),o.data&&Object.keys(o.data).length>0){const s=Object.entries(o.data).map(([l,c])=>({date:l,onScreenTime:Math.round(c.totalTime/6e4),workingTime:Math.round(c.totalTime/6e4*.6),deepFocusTime:0})).sort((l,c)=>l.date.localeCompare(c.date));n({dailyUsage:s}),console.log("✅ Loaded daily usage data for all time:",s.length,"days")}}catch(t){console.error("❌ Failed to load all time daily usage:",t)}},blockSiteInExtension:async t=>{try{Rt.isExtensionInstalled()&&await Rt.blockSite(t)}catch(r){console.error("Failed to block site in extension:",r)}},unblockSiteInExtension:async t=>{try{Rt.isExtensionInstalled()&&await Rt.unblockSite(t)}catch(r){console.error("Failed to unblock site in extension:",r)}},toggleBlockedSite:async t=>{const{useUserStore:r}=await nn(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>to);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await Jh.toggleBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site toggled and synced via loadBlockedSites"))},removeBlockedSite:async t=>{const{useUserStore:r}=await nn(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>to);return{useUserStore:a}},void 0),i=r.getState().user;i!=null&&i.uid&&(await Jh.removeBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site removed and synced via loadBlockedSites"))},addBlockedSite:async t=>{const{useUserStore:r}=await nn(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>to);return{useUserStore:a}},void 0),i=r.getState().user;if(i!=null&&i.uid)try{await Jh.addBlockedSite(i.uid,t),await e().loadBlockedSites(i.uid),console.log("🔄 Blocked site added and synced via loadBlockedSites")}catch(a){console.error("Error in addBlockedSite:",a)}else console.error("No user logged in, cannot add blocked site")},loadBlockedSites:async t=>{try{const r=await Jh.getUserBlockedSites(t);if(n({blockedSites:r}),Rt.isExtensionInstalled())try{await Rt.forceSyncFromWebApp(),console.log("✅ Cleared default sites from extension");const i=r.map(a=>a.url);await Rt.syncBlockedSitesFromWebApp(i),console.log("🔄 Synced all blocking sites to extension:",i.length)}catch(i){console.warn("⚠️ Failed to sync blocking sites to extension:",i)}}catch(r){console.error("Failed to load blocked sites:",r)}},loadFocusStatus:async()=>{try{if(!Rt.isExtensionInstalled()||!await Rt.testConnection())return;const r=await Rt.getFocusStatus(),i=e().isDeepFocusActive;if(console.log("🔍 loadFocusStatus - Extension state:",r.focusMode,"Local state:",i),i&&!e().recoveryInProgress){n({recoveryInProgress:!0});try{const{useUserStore:a}=await nn(async()=>{const{useUserStore:s}=await Promise.resolve().then(()=>to);return{useUserStore:s}},void 0),o=a.getState().user;if(o!=null&&o.uid){console.log("🧹 Cleaning up any orphaned sessions on page load...");const s=await Mc.cleanupOrphanedSessions(o.uid);s>0&&(console.log(`✅ Cleaned up ${s} orphaned session(s)`),await e().loadDeepFocusSessions(o.uid)),console.log("🔄 Session cleanup completed, maintaining focus state")}}catch(a){console.error("❌ Failed to handle session cleanup:",a)}finally{n({recoveryInProgress:!1})}}r.focusMode!==i?(console.log(`🔄 Syncing web app state to match extension: ${i} → ${r.focusMode}`),n({isDeepFocusActive:r.focusMode}),window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:r.focusMode,fromExtension:!0}}))):console.log("✅ Web app and extension states already match:",r.focusMode)}catch(t){console.error("Failed to load focus status:",t)}},initializeFocusSync:async()=>{if(!e().recoveryInProgress){n({recoveryInProgress:!0});try{const t=e().isDeepFocusActive;if(!Rt.isExtensionInstalled()){console.log("📱 Extension not available, using local state only"),n({recoveryInProgress:!1});return}await e().syncBlockedSitesToExtension();let r;try{r=await Promise.race([Rt.getFocusStatus(),new Promise((i,a)=>setTimeout(()=>a(new Error("Extension status timeout")),3e3))])}catch{console.warn("⚠️ Failed to get extension focus status, using local state"),n({recoveryInProgress:!1});return}if(r.focusMode!==t){const i="lastPriorityLog",a=sessionStorage.getItem(i),o=Date.now();(!a||o-parseInt(a)>1e4)&&(console.log("🔄 Prioritizing persisted local state over extension state"),sessionStorage.setItem(i,o.toString()));try{if(t){await Promise.race([Rt.enableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Enable focus timeout")),3e3))]);const s=e().blockedSites.filter(l=>l.isActive);for(const l of s)try{await Promise.race([Rt.blockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Block site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to block site during sync:",l.url,c)}}else{await Promise.race([Rt.disableFocusMode(),new Promise((l,c)=>setTimeout(()=>c(new Error("Disable focus timeout")),3e3))]);const s=e().blockedSites;for(const l of s)try{await Promise.race([Rt.unblockSite(l.url),new Promise((c,u)=>setTimeout(()=>u(new Error("Unblock site timeout")),1e3))])}catch(c){console.warn("⚠️ Failed to unblock site during sync:",l.url,c)}}console.log("✅ Extension focus mode synced successfully")}catch(s){console.warn("⚠️ Failed to sync extension focus mode (continuing anyway):",s)}}else console.log("✅ Extension and local focus states already match");window.dispatchEvent(new CustomEvent("deepFocusChanged",{detail:{isActive:t}})),console.log("✅ Focus sync completed")}catch(t){console.error("❌ Focus sync failed:",t)}finally{n({recoveryInProgress:!1})}}},syncBlockedSitesToExtension:async()=>{try{if(!Rt.isExtensionInstalled()){console.log("📱 Extension not available, skipping sync");return}const r=e().blockedSites.map(a=>a.url);console.log("🔄 Syncing blocked sites to extension:",r.length,r.length===0?"(clearing all sites)":"sites");const i=await Rt.syncBlockedSitesFromWebApp(r);i.success?(console.log(`✅ Successfully synced ${i.synced} sites to extension`),i.failed&&i.failed>0&&console.warn(`⚠️ ${i.failed} sites failed to sync`),r.length===0&&console.log("🧹 All blocked sites cleared from extension")):console.warn("⚠️ Failed to sync blocked sites to extension:",i.error)}catch(t){console.error("❌ Error syncing blocked sites to extension:",t)}},handleExtensionBlockedSitesUpdate:async t=>{try{const{useUserStore:r}=await nn(async()=>{const{useUserStore:u}=await Promise.resolve().then(()=>to);return{useUserStore:u}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - cannot sync extension sites to web app");return}console.log("📨 Handling blocked sites update from extension:",t.length);const a=await Jh.getUserBlockedSites(i.uid),o=a.map(u=>u.url),s=t.filter(u=>!o.includes(u)),l=a.filter(u=>!t.includes(u.url));for(const u of s)try{await Jh.addBlockedSite(i.uid,{name:u.replace(/^www\./,"").split(".")[0]||u,url:u,icon:"ri-global-line",backgroundColor:"#6B7280",isActive:!0}),console.log("✅ Added site from extension:",u)}catch(d){console.warn("⚠️ Failed to add site from extension:",u,d)}for(const u of l)try{await Jh.removeBlockedSite(i.uid,u.id),console.log("✅ Removed site synced from extension:",u.url)}catch(d){console.warn("⚠️ Failed to remove site during extension sync:",u.url,d)}const c=await Jh.getUserBlockedSites(i.uid);n({blockedSites:c}),console.log("✅ Successfully synced blocked sites from extension to web app")}catch(r){console.error("❌ Failed to handle extension blocked sites update:",r)}},syncFocusStatus:t=>{n({isDeepFocusActive:t})},syncCompleteFocusState:async(t,r=[])=>{console.log("🔄 Syncing complete focus state:",{isActive:t,blockedSites:r.length});try{const{useUserStore:i}=await nn(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>to);return{useUserStore:o}},void 0),a=i.getState().user;if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping focus state sync");return}if(t){const o=e().blockedSites.map(s=>({...s,isActive:r.length>0?r.includes(s.url):!0}));n({isDeepFocusActive:!0,blockedSites:o});try{await Jh.updateAllBlockedSites(a.uid,o),console.log("🔄 Synced blocking sites to Firebase:",o.length)}catch(s){console.warn("⚠️ Failed to sync blocking sites to Firebase:",s)}if(Rt.isExtensionInstalled()){const s=o.filter(l=>l.isActive).map(l=>l.url);if(s.length>0)try{console.log(`📦 Batch blocking ${s.length} sites...`);const l=await Rt.blockMultipleSites(s);if(l.success&&l.summary){const{successCount:c,failureCount:u}=l.summary;console.log(`✅ Batch blocking completed: ${c} sites blocked, ${u} failed`)}else console.warn("⚠️ Batch blocking failed")}catch(l){console.warn("⚠️ Batch blocking failed:",l)}}console.log("✅ Focus state sync completed")}else{const o=e().blockedSites.map(s=>({...s,isActive:!1}));n({isDeepFocusActive:!1,blockedSites:o,isSessionPaused:!1,pausedAt:null,totalPausedTime:0});try{await Jh.updateAllBlockedSites(a.uid,o),console.log("🔄 Synced disabled blocking sites to Firebase")}catch(s){console.warn("⚠️ Failed to sync disabled blocking sites to Firebase:",s)}console.log("✅ Focus state disabled - state cleared")}}catch(i){console.error("❌ Failed to sync complete focus state:",i)}},toggleDeepFocus:async()=>{const t=e();try{t.isDeepFocusActive?(await Rt.disableFocusMode(),n({isDeepFocusActive:!1})):(await Rt.enableFocusMode(),n({isDeepFocusActive:!0})),setTimeout(()=>{},3e3)}catch(r){console.error("❌ Failed to toggle Deep Focus:",r),n({backupError:"Failed to toggle Deep Focus mode"})}},enableDeepFocus:async t=>{if(e().isDeepFocusActive){console.log("🟢 Deep Focus already active, skipping enable");return}try{console.log("🟢 Enabling Deep Focus from source:",t),await Rt.enableFocusMode(),n({isDeepFocusActive:!0}),setTimeout(()=>{},3e3)}catch(i){throw console.error("❌ Failed to enable Deep Focus:",i),n({backupError:"Failed to enable Deep Focus mode"}),i}},disableDeepFocus:async()=>{if(!e().isDeepFocusActive){console.log("🔴 Deep Focus already inactive, skipping disable");return}try{console.log("🔴 Disabling Deep Focus"),await Rt.disableFocusMode(),n({isDeepFocusActive:!1}),setTimeout(()=>{},3e3)}catch(r){throw console.error("❌ Failed to disable Deep Focus:",r),n({backupError:"Failed to disable Deep Focus mode"}),r}},syncWithExtension:async t=>{try{if(!Rt.isExtensionInstalled())return;t?await Rt.enableFocusMode():await Rt.disableFocusMode()}catch(r){console.error("Failed to sync with extension:",r)}},loadDeepFocusSessions:async(t,r,i)=>{try{console.log("🔍 DeepFocusStore: Loading sessions for userId:",t),console.log("🔍 DeepFocusStore: Date filters:",{startDate:r,endDate:i});const a=await Mc.getUserSessions(t,r,i);console.log("📊 DeepFocusStore: Loaded sessions:",a.length,"sessions"),console.log("📊 DeepFocusStore: Session details:",a.map(c=>({id:c.id,status:c.status,duration:c.duration,createdAt:c.createdAt,userId:c.userId})));const o=a.filter(c=>c.status==="completed").length,s=a.filter(c=>c.status==="completed"&&c.duration),l=s.reduce((c,u)=>c+(u.duration||0),0);console.log("📊 DeepFocusStore: Completed sessions count:",o),console.log("📊 DeepFocusStore: Completed with duration:",s.length),console.log("📊 DeepFocusStore: Total time:",l,"minutes"),n({deepFocusSessions:a,totalSessionsCount:o,totalFocusTime:l})}catch(a){console.error("❌ Failed to load Deep Focus sessions:",a)}},subscribeToSessions:t=>{console.log("DeepFocusStore: Subscribing to sessions for userId:",t);const r=Mc.subscribeToUserSessions(t,i=>{console.log("DeepFocusStore: Subscription received sessions:",i);const a=i.filter(s=>s.status==="completed").length,o=i.filter(s=>s.status==="completed"&&s.duration).reduce((s,l)=>s+(l.duration||0),0);console.log("DeepFocusStore: Subscription completed count:",a,"Total time:",o),n({deepFocusSessions:i,totalSessionsCount:a,totalFocusTime:o})});n({unsubscribe:r})},unsubscribeFromSessions:()=>{const t=e();t.unsubscribe&&(t.unsubscribe(),n({unsubscribe:null}))},pauseSessionOnInactivity:async t=>{const r=e();if(!(!r.isDeepFocusActive||r.isSessionPaused||!r.autoSessionManagement)){console.log("🛑 Pausing deep focus session due to inactivity:",t,"seconds");try{n({isSessionPaused:!0,pausedAt:new Date}),console.log("✅ Deep focus session paused due to inactivity")}catch(i){console.error("❌ Failed to pause deep focus session:",i)}}},resumeSessionOnActivity:async()=>{const t=e();if(!(!t.isDeepFocusActive||!t.isSessionPaused||!t.autoSessionManagement)){console.log("▶️ Resuming deep focus session after activity detected");try{const r=t.pausedAt?Math.floor((Date.now()-t.pausedAt.getTime())/1e3):0,i=t.totalPausedTime+r;n({isSessionPaused:!1,pausedAt:null,totalPausedTime:i}),console.log("✅ Deep focus session resumed, total paused time:",i,"seconds")}catch(r){console.error("❌ Failed to resume deep focus session:",r)}}},setAutoSessionManagement:t=>{n({autoSessionManagement:t}),console.log("🔧 Auto session management:",t?"enabled":"disabled")},backupTodayData:async()=>{var c;console.log("🔍 backupTodayData called");const t=e();console.log("🔍 state.isBackingUp:",t.isBackingUp,"state.isDeepFocusSyncing:",t.isDeepFocusSyncing);const r=Date.now();let i=0;t.lastBackupTime&&(typeof t.lastBackupTime=="object"&&t.lastBackupTime.getTime?i=t.lastBackupTime.getTime():typeof t.lastBackupTime=="string"?i=new Date(t.lastBackupTime).getTime():typeof t.lastBackupTime=="number"&&(i=t.lastBackupTime));const a=r-i;console.log("🔍 Backup timing check:",{now:r,lastBackupTime:i,timeSinceLastBackup:a}),t.isBackingUp&&a>12e4&&(console.log("⚠️ Site usage backup appears stuck, resetting state..."),n({isBackingUp:!1,backupError:"Previous site usage backup was stuck and was reset"}));let o=0;t.lastDeepFocusSyncTime&&(typeof t.lastDeepFocusSyncTime=="object"&&t.lastDeepFocusSyncTime.getTime?o=t.lastDeepFocusSyncTime.getTime():typeof t.lastDeepFocusSyncTime=="string"?o=new Date(t.lastDeepFocusSyncTime).getTime():typeof t.lastDeepFocusSyncTime=="number"&&(o=t.lastDeepFocusSyncTime));const s=r-o;if(t.isDeepFocusSyncing&&s>12e4&&(console.log("⚠️ Deep Focus sync appears stuck, resetting state..."),n({isDeepFocusSyncing:!1,deepFocusSyncError:"Previous Deep Focus sync was stuck and was reset"})),t.isBackingUp){console.log("⚠️ Site usage backup already in progress, returning early");return}let l;try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting backup of today's data..."),l=setTimeout(()=>{console.log("🚀 Optimistic loading - showing UI while sync continues in background"),e().isDeepFocusSyncing||n({isBackingUp:!1})},3e3);const{useUserStore:u}=await nn(async()=>{const{useUserStore:k}=await Promise.resolve().then(()=>to);return{useUserStore:k}},void 0),d=u.getState().user;console.log("🔍 user from userStore:",d==null?void 0:d.uid);let h=d==null?void 0:d.uid;if(!h){const{useTaskStore:k}=await nn(async()=>{const{useTaskStore:D}=await Promise.resolve().then(()=>Oje);return{useTaskStore:D}},void 0),A=k.getState();h=A.userId||A.currentUserId,console.log("🔍 fallback userId from taskStore:",h)}if(!h){console.warn("⚠️ User not authenticated, skipping backup"),n({isBackingUp:!1}),clearTimeout(l);return}console.log("✅ Using userId for backup:",h);const f=Rt.isExtensionInstalled();if(console.log("🔍 Extension detection result:",f),console.log("🔍 window.chrome exists:",typeof window.chrome),console.log("🔍 chrome.runtime exists:",!!((c=window.chrome)!=null&&c.runtime)),!f){console.log("📱 Extension not available, using fallback backup mode");const k=el(new Date),A={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"fallback"};await Dc.backupDayData(h,k,A),clearTimeout(l),n({lastBackupTime:new Date,backupError:"Extension offline - using fallback mode",isBackingUp:!1}),console.log("✅ Fallback backup completed");return}console.log("📡 Getting today's stats from extension...");const m=await Promise.race([Rt.getTodayStats(),new Promise((k,A)=>setTimeout(()=>A(new Error("Extension backup timeout")),5e3))]);if(console.log("🔍 Extension response:",m),m.success===!1)throw new Error(m.error||"Failed to get extension data");const v=el(new Date),y=m.data||m;console.log("🔍 Date calculated:",v),console.log("🔍 Data to backup:",y),console.log("🔍 Document ID will be:",`${h}_${v}`),console.log("💾 Starting site usage backup and Deep Focus sync...");const w=Dc.backupDayData(h,v,y),S=(async()=>{try{n({isDeepFocusSyncing:!0,deepFocusSyncError:null}),console.log("🎯 Starting Deep Focus sessions sync...");const{DeepFocusSync:k}=await nn(async()=>{const{DeepFocusSync:D}=await import("./deepFocusSync-DfaSkCbQ.js");return{DeepFocusSync:D}},[]),A=await k.syncTodaySessionsFromExtension(h);return A.success?(console.log(`✅ Deep Focus sync completed: ${A.synced} sessions synced`),n({lastDeepFocusSyncTime:new Date,deepFocusSyncError:null,isDeepFocusSyncing:!1})):(console.warn(`⚠️ Deep Focus sync partial failure: ${A.synced} sessions synced, error: ${A.error}`),n({lastDeepFocusSyncTime:new Date,deepFocusSyncError:A.error||"Partial sync failure",isDeepFocusSyncing:!1})),A}catch(k){console.error("❌ Deep Focus sync failed:",k);const A=k instanceof Error?k.message:"Deep Focus sync failed";return n({deepFocusSyncError:A,isDeepFocusSyncing:!1}),{success:!1,error:A}}})(),[T,C]=await Promise.allSettled([w,S]);clearTimeout(l),T.status==="fulfilled"?(console.log("✅ Site usage backup completed"),n({lastBackupTime:new Date,backupError:null})):(console.error("❌ Site usage backup failed:",T.reason),n({backupError:T.reason instanceof Error?T.reason.message:"Site usage backup failed"})),C.status==="fulfilled"?console.log("🎯 Deep Focus sync promise completed"):console.error("❌ Deep Focus sync promise failed:",C.reason)}catch(u){if(clearTimeout(l),console.error("❌ Failed to backup today's data:",u),u instanceof Error&&u.message.includes("timeout")){console.log("🔄 Extension timeout detected, attempting fallback backup...");try{if(userId){const d=el(new Date),h={totalTime:0,sitesVisited:0,productivityScore:0,sites:{},version:"1.0.0",source:"timeout-fallback"};await Dc.backupDayData(userId,d,h),n({lastBackupTime:new Date,backupError:"Extension timeout - fallback backup used"}),console.log("✅ Fallback backup after timeout completed");return}}catch(d){console.error("❌ Fallback backup also failed:",d)}}n({backupError:u instanceof Error?u.message:"Backup failed"})}finally{n({isBackingUp:!1})}},performDailyBackup:async()=>{if(!e().isBackingUp)try{n({isBackingUp:!0,backupError:null}),console.log("🔄 Starting daily backup...");const{useUserStore:r}=await nn(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>to);return{useUserStore:a}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, skipping daily backup");return}await e().backupTodayData(),await Dc.cleanupOldData(i.uid,90),n({lastBackupTime:new Date}),console.log("✅ Successfully performed daily backup")}catch(r){console.error("❌ Failed to perform daily backup:",r),n({backupError:r instanceof Error?r.message:"Daily backup failed"})}finally{n({isBackingUp:!1})}},initializeDailyBackup:()=>{const t=async()=>{const{useUserStore:r}=await nn(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>to);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.log("⏳ Waiting for user authentication before starting backup scheduler..."),setTimeout(t,2e3);return}console.log("✅ User authenticated, starting backup scheduler for:",i.uid),setInterval(()=>{e().backupTodayData()},144e5),(()=>{const o=new Date,s=new Date(o);s.setDate(s.getDate()+1),s.setHours(2,0,0,0);const l=s.getTime()-o.getTime();setTimeout(()=>{e().performDailyBackup(),setInterval(()=>{e().performDailyBackup()},24*60*60*1e3)},l)})(),setTimeout(()=>{e().backupTodayData()},5e3)};t()},restoreFromBackup:async t=>{try{const{useUserStore:r}=await nn(async()=>{const{useUserStore:o}=await Promise.resolve().then(()=>to);return{useUserStore:o}},void 0),i=r.getState().user;if(!(i!=null&&i.uid))throw new Error("User not authenticated");const a=await Dc.restoreToExtension(i.uid,t);return console.log(`✅ Restored data for ${t}:`,a),a}catch(r){throw console.error(`❌ Failed to restore data for ${t}:`,r),r}},getBackupStatus:async()=>{try{const{useUserStore:t}=await nn(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>to);return{useUserStore:i}},void 0),r=t.getState().user;return r!=null&&r.uid?await Dc.getLastSyncInfo(r.uid):{lastSyncDate:null,totalDays:0}}catch(t){return console.error("❌ Failed to get backup status:",t),{lastSyncDate:null,totalDays:0}}},retryBackup:async()=>{console.log("🔄 Manual backup retry triggered"),Rt.getCircuitBreakerStatus().state==="OPEN"&&Rt.resetCircuitBreaker(),setTimeout(()=>{e().backupTodayData()},1e3)},retryDeepFocusSync:async()=>{if(console.log("🔄 Manual Deep Focus sync retry triggered"),e().isDeepFocusSyncing){console.log("⚠️ Deep Focus sync already in progress, skipping retry");return}const{useUserStore:r}=await nn(async()=>{const{useUserStore:a}=await Promise.resolve().then(()=>to);return{useUserStore:a}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated, cannot retry Deep Focus sync");return}try{n({isDeepFocusSyncing:!0,deepFocusSyncError:null}),console.log("🎯 Retrying Deep Focus sessions sync...");const{DeepFocusSync:a}=await nn(async()=>{const{DeepFocusSync:s}=await import("./deepFocusSync-DfaSkCbQ.js");return{DeepFocusSync:s}},[]),o=await a.syncTodaySessionsFromExtension(i.uid);o.success?(console.log(`✅ Deep Focus sync retry completed: ${o.synced} sessions synced`),n({lastDeepFocusSyncTime:new Date,deepFocusSyncError:null,isDeepFocusSyncing:!1})):(console.warn(`⚠️ Deep Focus sync retry partial failure: ${o.synced} sessions synced, error: ${o.error}`),n({lastDeepFocusSyncTime:new Date,deepFocusSyncError:o.error||"Partial sync failure",isDeepFocusSyncing:!1}))}catch(a){console.error("❌ Deep Focus sync retry failed:",a);const o=a instanceof Error?a.message:"Deep Focus sync retry failed";n({deepFocusSyncError:o,isDeepFocusSyncing:!1})}},getSyncStatus:()=>{const t=e(),r=Rt.getCircuitBreakerStatus();return{isBackingUp:t.isBackingUp,lastBackupTime:t.lastBackupTime,backupError:t.backupError,isDeepFocusSyncing:t.isDeepFocusSyncing,lastDeepFocusSyncTime:t.lastDeepFocusSyncTime,deepFocusSyncError:t.deepFocusSyncError,circuitBreaker:r,canRetry:!t.isBackingUp&&!t.isDeepFocusSyncing&&r.state!=="OPEN"}},loadHybridTimeRangeData:async(t,r)=>{try{const{useUserStore:i}=await nn(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>to);return{useUserStore:l}},void 0),a=i.getState().user;if(!(a!=null&&a.uid))throw console.warn("⚠️ User not authenticated - skipping hybrid data load"),new Error("User not authenticated");console.log("🔄 Loading hybrid data for range:",{startDate:t,endDate:r,userId:a.uid}),console.log("🎯 Syncing Deep Focus sessions for date range...");try{const{DeepFocusSync:l}=await nn(async()=>{const{DeepFocusSync:u}=await import("./deepFocusSync-DfaSkCbQ.js");return{DeepFocusSync:u}},[]),c=await l.syncDateRangeFromExtension(a.uid,t,r);c.success?console.log(`✅ Deep Focus date range sync completed: ${c.synced} sessions synced`):console.warn(`⚠️ Deep Focus date range sync partial failure: ${c.synced} sessions synced, error: ${c.error}`)}catch(l){console.error("❌ Deep Focus date range sync failed:",l)}const o=await Qie.getTimeRangeData(a.uid,t,r);if(!o.success)throw new Error("Failed to fetch hybrid data");const s=Qie.convertToWebAppFormat({totalTime:o.aggregated.totalTime,sitesVisited:o.aggregated.sitesVisited,productivityScore:o.aggregated.avgProductivityScore,sites:o.aggregated.sites});return console.log("✅ Hybrid data loaded successfully:",{dateRange:o.aggregated.dateRange,totalSites:Object.keys(o.aggregated.sites).length,totalTime:Math.round(o.aggregated.totalTime/(1e3*60))}),{timeMetrics:s.timeMetrics,siteUsage:s.siteUsage,productivityScore:s.productivityScore,aggregated:o.aggregated,dailyData:o.data}}catch(i){throw console.error("❌ Failed to load hybrid time range data:",i),i}},recordOverrideSession:async(t,r)=>{try{const{useUserStore:i}=await nn(async()=>{const{useUserStore:l}=await Promise.resolve().then(()=>to);return{useUserStore:l}},void 0),a=i.getState().user,o=e();if(!(a!=null&&a.uid)){console.warn("⚠️ User not authenticated - skipping override session recording");return}console.log("🎯 Recording override session:",{domain:t,duration:r,userId:a.uid});const s={id:`temp-${Date.now()}`,userId:a.uid,domain:t,duration:r,deepFocusSessionId:void 0,createdAt:new Date};n(l=>({overrideSessions:[s,...l.overrideSessions]}));try{const l=await Xd.createOverrideSession({userId:a.uid,domain:t,duration:r,deepFocusSessionId:void 0});console.log("✅ Override session saved to Firebase:",l),n(c=>({overrideSessions:c.overrideSessions.map(u=>u.id===s.id?{...u,id:l}:u)}))}catch(l){console.warn("⚠️ Firebase save failed, keeping local override:",l)}}catch(i){console.error("Failed to record override session:",i)}},loadOverrideSessions:async(t,r,i)=>{try{if(!t){console.warn("⚠️ No userId provided - skipping override sessions load"),n({overrideSessions:[]});return}const a=await Xd.getUserOverrides(t,r,i);n({overrideSessions:a}),console.log("✅ Loaded override sessions:",a.length)}catch(a){console.warn("Could not load override sessions (this is normal if index is still building):",a),n({overrideSessions:[]})}},loadComparisonData:async t=>{try{const{useUserStore:r}=await nn(async()=>{const{useUserStore:A}=await Promise.resolve().then(()=>to);return{useUserStore:A}},void 0),i=r.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - skipping comparison data load"),n({comparisonData:null,comparisonError:"User not authenticated"});return}if(t.rangeType==="all time"){n({comparisonData:null,comparisonError:null});return}n({isLoadingComparison:!0,comparisonError:null});const a=QQe(t);if(!a){n({comparisonData:null,isLoadingComparison:!1,comparisonError:"Invalid date range for comparison"});return}console.log("🔍 Loading comparison data:",{current:{start:el(t.startDate),end:el(t.endDate),type:t.rangeType},comparison:{start:el(a.startDate),end:el(a.endDate),label:a.label}});const o=el(t.startDate),s=el(t.endDate),l=await e().loadHybridTimeRangeData(o,s),c=await e().loadWorkSessionsForComparison(i.uid,t.startDate,t.endDate),u=await e().loadDeepFocusSessionsForComparison(i.uid,t.startDate,t.endDate),d=await Xd.getUserOverrides(i.uid,t.startDate,t.endDate),h={onScreenTime:l.timeMetrics.onScreenTime,workingTime:c,deepFocusTime:u,overrideTime:d.reduce((A,D)=>A+D.duration,0)},f=el(a.startDate),m=el(a.endDate),v=await e().loadHybridTimeRangeData(f,m),y=await e().loadWorkSessionsForComparison(i.uid,a.startDate,a.endDate),w=await e().loadDeepFocusSessionsForComparison(i.uid,a.startDate,a.endDate),S=await Xd.getUserOverrides(i.uid,a.startDate,a.endDate),T={onScreenTime:v.timeMetrics.onScreenTime,workingTime:y,deepFocusTime:w,overrideTime:S.reduce((A,D)=>A+D.duration,0)},C={onScreenTime:wk(h.onScreenTime,T.onScreenTime),workingTime:wk(h.workingTime,T.workingTime),deepFocusTime:wk(h.deepFocusTime,T.deepFocusTime),overrideTime:wk(h.overrideTime,T.overrideTime)};n({comparisonData:{current:h,previous:T,percentageChanges:C},isLoadingComparison:!1,comparisonError:null}),console.log("✅ Comparison data loaded successfully:",{label:a.label,currentPeriod:{start:o,end:s,metrics:h},previousPeriod:{start:f,end:m,metrics:T},changes:C})}catch(r){console.error("❌ Failed to load comparison data:",r),n({comparisonData:null,isLoadingComparison:!1,comparisonError:r instanceof Error?r.message:"Unknown error"})}},loadWorkSessionsForComparison:async(t,r,i)=>{try{const{useDashboardStore:a}=await nn(async()=>{const{useDashboardStore:s}=await Promise.resolve().then(()=>z4e);return{useDashboardStore:s}},void 0),{workSessions:o}=a.getState();return o.filter(s=>s.sessionType==="pomodoro"||s.sessionType==="manual").filter(s=>{const l=new Date(s.date);return l>=r&&l<=i}).reduce((s,l)=>s+(l.duration||0),0)}catch(a){return console.warn("Failed to load work sessions for comparison:",a),0}},loadDeepFocusSessionsForComparison:async(t,r,i)=>{try{return(await Mc.getUserSessions(t,r,i)).filter(o=>o.status==="completed"&&o.duration).reduce((o,s)=>o+(s.duration||0),0)}catch(a){return console.warn("Failed to load deep focus sessions for comparison:",a),0}}}),{name:eJe(),partialize:n=>({...n,isReloading:!1})})),tJe=Object.freeze(Object.defineProperty({__proto__:null,useDeepFocusStore:il},Symbol.toStringTag,{value:"Module"}));let yB=!1,DP=!1;const bB={current:!1},LS=new Set,IP=new Set,nJe=500;let tae=0;const rJe=3,iJe=1e3,MP=new Map,Xwe=async(n,e,t=rJe,r=iJe)=>{try{await e(),MP.delete(n)}catch(i){const a=MP.get(n)||0;if(a<t)return console.log(`🔄 Retry attempt ${a+1} for operation: ${n}`),MP.set(n,a+1),await new Promise(o=>setTimeout(o,r)),Xwe(n,e,t,r);throw MP.delete(n),i}},Zwe=Y.createContext(void 0),aJe=({children:n})=>{const e=Y.useRef(!1),[t,r]=we.useState(!1),{syncFocusStatus:i,loadFocusStatus:a,isDeepFocusActive:o,syncCompleteFocusState:s,recordOverrideSession:l,loadOverrideSessions:c}=il(),{isInitialized:u,user:d}=Ht();Y.useEffect(()=>{if(e.current||yB||DP)return;(async()=>{if(!(!(d!=null&&d.uid)||!u||bB.current)){bB.current=!0,yB=!0,e.current=!0;try{console.log("🚀 CENTRALIZED Deep Focus initialization for session recovery..."),await a(),console.log("✅ Centralized Focus status loaded, checking for active session recovery...");const{deepFocusSessionService:w}=await nn(async()=>{const{deepFocusSessionService:A}=await Promise.resolve().then(()=>Kwe);return{deepFocusSessionService:A}},void 0),S=il.getState(),T=localStorage.getItem("deep-focus-storage"),C=T?JSON.parse(T):null;if((C==null?void 0:C.isDeepFocusActive)&&!S.activeSessionId&&(console.log("📱 New tab detected via context, syncing deep focus state..."),il.setState({isDeepFocusActive:C.isDeepFocusActive,activeSessionId:C.activeSessionId,activeSessionStartTime:new Date(C.activeSessionStartTime),activeSessionDuration:C.activeSessionDuration,activeSessionElapsedSeconds:C.activeSessionElapsedSeconds,isSessionPaused:C.isSessionPaused,pausedAt:C.pausedAt?new Date(C.pausedAt):null,totalPausedTime:C.totalPausedTime})),!S.recoveryInProgress)try{const A=await w.cleanupOrphanedSessions(d.uid);A>0&&console.log(`✅ Context: Cleaned up ${A} orphaned session(s) without affecting Deep Focus state`)}catch(A){console.error("❌ Context: Failed to cleanup orphaned sessions:",A)}DP=!0,r(!0)}catch(w){console.error("❌ Error during centralized deep focus initialization:",w)}finally{yB=!1,bB.current=!1}}})()},[d==null?void 0:d.uid,u,a]),Y.useEffect(()=>{var w,S,T;if(!u||!(d!=null&&d.uid))return;const y=async C=>{var k,A;try{const D=C.data||C;if((D==null?void 0:D.type)==="RECORD_OVERRIDE_SESSION"&&((k=D==null?void 0:D.source)!=null&&k.includes("make10000hours")||(A=D==null?void 0:D.source)!=null&&A.includes("extension"))){console.log("🌐 GLOBAL: RECORD_OVERRIDE_SESSION received in DeepFocusContext:",D),console.log("🌐 GLOBAL: Current page:",window.location.pathname),console.log("🌐 GLOBAL: User state:",{user:d==null?void 0:d.uid,isLoggedIn:!!d});const{domain:P,duration:N,userId:R,timestamp:L,extensionTimestamp:B}=D.payload||{},$=`${P}_${N}_${B||L||Date.now()}`;if(LS.has($)){console.log("🔄 GLOBAL: Skipping duplicate override session message:",$);return}if(LS.add($),LS.size>100){const K=Array.from(LS).slice(-50);LS.clear(),K.forEach(X=>LS.add(X))}const G=R||(d==null?void 0:d.uid);if(console.log("🌐 GLOBAL: Override session data validation:",{domain:P,duration:N,incomingUserId:R,currentUserUid:d==null?void 0:d.uid,effectiveUserId:G,timestamp:L,hasUser:!!d}),!G){console.error("❌ GLOBAL: No user ID available for override session");return}if(!P||!N){console.error("❌ GLOBAL: Missing required override session data:",{domain:P,duration:N});return}try{console.log("📝 GLOBAL: Recording override session from extension:",P,N,"for user:",G),await l(P,N),console.log("✅ GLOBAL: Override session recorded successfully"),window.dispatchEvent(new CustomEvent("overrideSessionRecorded",{detail:{domain:P,duration:N,userId:G,timestamp:Date.now()}}))}catch(W){console.error("❌ GLOBAL: Failed to record override session:",W),console.error("🔍 GLOBAL: Override session error details:",{name:W==null?void 0:W.name,message:W==null?void 0:W.message,stack:W==null?void 0:W.stack,domain:P,duration:N,userId:G})}}}catch(D){console.error("Error in global extension message handler:",D)}};console.log("🌐 GLOBAL: Setting up override session recording listeners"),window.addEventListener("message",y);try{typeof window.chrome<"u"&&((T=(S=(w=window.chrome)==null?void 0:w.runtime)==null?void 0:S.onMessage)!=null&&T.addListener)&&window.chrome.runtime.onMessage.addListener(y)}catch(C){console.warn("Could not set up Chrome extension listener in context:",C)}return()=>{var C,k,A;try{console.log("🌐 GLOBAL: Cleaning up override session recording listeners"),window.removeEventListener("message",y),typeof window.chrome<"u"&&((A=(k=(C=window.chrome)==null?void 0:C.runtime)==null?void 0:k.onMessage)!=null&&A.removeListener)&&window.chrome.runtime.onMessage.removeListener(y)}catch(D){console.warn("Error cleaning up global extension listeners:",D)}}},[d==null?void 0:d.uid,u,l]),Y.useEffect(()=>{if(!u||!(d!=null&&d.uid)){console.log("🔄 Waiting for user initialization before setting up message handler...");return}const y=async w=>{var T,C,k;const S=Date.now();try{if(((T=w.data)==null?void 0:T.type)==="EXTENSION_FOCUS_STATE_CHANGED"||((C=w.data)==null?void 0:C.type)==="FOCUS_STATE_CHANGED"){if(S-tae<nJe){console.log("🔄 Skipping message due to debounce");return}tae=S;const A=`${w.data.extensionId}_${(k=w.data.payload)==null?void 0:k.isActive}_${S}`;if(IP.has(A)){console.log("🔄 Skipping duplicate message:",A);return}IP.add(A);const D=5*60*1e3;IP.forEach(R=>{const[,,L]=R.split("_");S-parseInt(L)>D&&IP.delete(R)}),console.log("🔄 Processing focus state change:",w.data);const{isActive:P,blockedSites:N=[]}=w.data.payload;await Xwe(`sync_focus_${A}`,async()=>{await s(P,N),window.dispatchEvent(new CustomEvent("focusStateHandled",{detail:{isActive:P,timestamp:S}}))})}}catch(A){console.error("Error handling extension message:",A),window.dispatchEvent(new CustomEvent("focusStateError",{detail:{error:A,timestamp:S}}))}};return window.addEventListener("message",y),()=>{window.removeEventListener("message",y)}},[u,d==null?void 0:d.uid,s]),Y.useEffect(()=>{if(!u||!DP)return;let y=0;const w=500,S=D=>{const P=Date.now();if(P-y<w)return;y=P;const{isActive:N}=D.detail;console.log("🔄 Context: Internal focus change event:",N),D.detail.fromExtension||i(N)},T=D=>{console.log("🔄 Context: Extension focus state handled centrally:",D.detail)};let C=document.hidden,k=0;const A=()=>{const D=Date.now();D-k<2e3||(k=D,!document.hidden&&C&&console.log("📖 Context: Page became visible - but skipping loadFocusStatus to maintain state consistency"),C=document.hidden)};return window.addEventListener("deepFocusChanged",S),window.addEventListener("extensionFocusHandled",T),document.addEventListener("visibilitychange",A),()=>{window.removeEventListener("deepFocusChanged",S),window.removeEventListener("extensionFocusHandled",T),document.removeEventListener("visibilitychange",A)}},[i,a,u,DP,s]);const h=Y.useCallback(async y=>{const w=il.getState();if(!(d!=null&&d.uid)){console.warn("⚠️ Context: User not authenticated - cannot enable deep focus");return}if(w.isDeepFocusActive){console.log("🟢 Context: enableDeepFocus ignored - already active");return}if(w.activeSessionId){console.log("🟢 Context: enableDeepFocus ignored - session already exists:",w.activeSessionId);return}if(w.recoveryInProgress){console.log("🟢 Context: enableDeepFocus ignored - recovery in progress");return}console.log("🟢 Context: enableDeepFocus called for user:",d.uid);try{await il.getState().enableDeepFocus(y)}catch(S){throw console.error("❌ Context: Failed to enable deep focus:",S),S}},[d==null?void 0:d.uid]),f=Y.useCallback(async()=>{if(!(d!=null&&d.uid)){console.warn("⚠️ Context: User not authenticated - cannot disable deep focus");return}console.log("🔴 Context: disableDeepFocus called for user:",d.uid);try{await il.getState().disableDeepFocus()}catch(y){throw console.error("❌ Context: Failed to disable deep focus:",y),y}},[d==null?void 0:d.uid]),m=Y.useCallback(async()=>{o?await f():await h()},[o,h,f]),v={isDeepFocusActive:o,enableDeepFocus:h,disableDeepFocus:f,toggleDeepFocus:m,isInitialized:t};return x.jsx(Zwe.Provider,{value:v,children:n})},GW=()=>{const n=Y.useContext(Zwe);if(n===void 0)throw new Error("useDeepFocusContext must be used within a DeepFocusProvider");return n},yj=({size:n="medium",className:e="",showLabel:t=!0,labelPosition:r="right",disabled:i=!1,pageTitle:a,showPageTitle:o=!1,pageTitleClassName:s=""})=>{const{isDeepFocusActive:l,enableDeepFocus:c,disableDeepFocus:u}=GW(),h={small:{width:"w-[80px]",height:"h-[24px]",textSize:"text-xs",padding:"px-2",toggle:"w-4 h-4",togglePos:"left-[calc(100%-18px)]"},medium:{width:"w-[120px]",height:"h-[33px]",textSize:"text-sm",padding:"pl-[10.5px]",toggle:"w-6 h-6",togglePos:"left-[calc(100%-27px)]"},large:{width:"w-[140px]",height:"h-[40px]",textSize:"text-base",padding:"pl-3",toggle:"w-7 h-7",togglePos:"left-[calc(100%-30px)]"}}[n],f=async v=>{if(!i)try{v.target.checked?await c("web"):await u()}catch(y){console.error("Failed to toggle Deep Focus:",y),setTimeout(()=>{const w=v.target;w&&(w.checked=!v.target.checked)},100)}},m=x.jsx(ni,{text:"Toggle Deep Focus Mode (Shift + D)",placement:"bottom",children:x.jsxs("label",{className:`relative inline-flex items-center cursor-pointer group ${i?"cursor-not-allowed opacity-50":""}`,children:[x.jsx("input",{type:"checkbox",id:"deep-focus-toggle",name:"deep-focus-toggle",className:"sr-only peer",checked:l,onChange:f,disabled:i}),x.jsx("div",{className:`${h.width} ${h.height} flex items-center rounded-full relative transform transition-all duration-500 ease-in-out ${l?`bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start ${h.padding}`:"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,style:{transition:"all 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:x.jsx("span",{className:`${h.textSize} font-medium relative z-10 whitespace-nowrap transform transition-all duration-500 ease-in-out ${l?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,style:{transition:"color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1), text-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:l?"Deep Focus":"Focus Off"})}),x.jsx("div",{className:`absolute ${h.toggle} bg-white rounded-full shadow-lg transform transition-all duration-500 ease-in-out ${l?h.togglePos+" shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`,style:{transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), left 0.5s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)"}})]})});return o&&a?x.jsxs("div",{className:`flex items-center ${e}`,children:[x.jsx("div",{className:`text-lg font-semibold transform transition-all duration-500 ease-in-out ${l?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"} ${s}`,style:{transition:"background 0.5s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s cubic-bezier(0.4, 0, 0.2, 1), font-weight 0.5s cubic-bezier(0.4, 0, 0.2, 1)"},children:a}),x.jsx("div",{className:"ml-4 flex items-center",children:m})]}):t?x.jsxs("div",{className:`flex items-center ${r==="left"?"flex-row-reverse":"flex-row"} ${e}`,children:[m,t&&x.jsx("span",{className:`${h.textSize} font-medium text-text-primary ${r==="left"?"mr-3":"ml-3"}`,children:"Deep Focus Mode"})]}):x.jsx("div",{className:e,children:m})},A9=({className:n=""})=>{const e=Gg(),t=ns(),{toggleFocusMode:r,isLeftSidebarOpen:i,toggleLeftSidebar:a}=dl(),o=()=>{switch(t.pathname){case"/pomodoro":return"Pomodoro Timer";case"/projects":return"Task Management";case"/dashboard":return"Productivity Insights";case"/calendar":return"Calendar";case"/deep-focus":return"Deep Focus";case"/dashboard/settings":return"Settings";default:return"Make 10000 Hours"}};return x.jsxs("div",{className:`h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-colors duration-200 relative ${n}`,children:[x.jsxs("div",{className:"flex items-center",children:[!i&&x.jsx("button",{onClick:a,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"menu-line",size:20})})}),x.jsx(yj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:o()})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/pomodoro"?void 0:()=>e("/pomodoro"),"aria-label":t.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task Management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/projects"?void 0:()=>e("/projects"),"aria-label":t.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/dashboard"?void 0:()=>e("/dashboard"),"aria-label":t.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/calendar"?void 0:()=>e("/calendar"),"aria-label":t.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${t.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:t.pathname==="/deep-focus"?void 0:()=>e("/deep-focus"),"aria-label":t.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"brain-line",size:20})})})})]})]})},oJe=({className:n=""})=>{const{isFocusMode:e,toggleFocusMode:t}=dl(),r=ei(c=>c.currentTime),i=ei(c=>c.currentTask),{tasks:a,projects:o}=Vt(),s=i&&i.projectId?o.find(c=>c.id===i.projectId):null,l=C7(r);return e?x.jsxs("div",{className:`fixed inset-0 bg-black z-50 ${n}`,children:[x.jsx("button",{id:"exit-focus-mode-btn",name:"exit-focus-mode",className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all",onClick:t,"aria-label":"Exit Focus Mode",children:x.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-white",children:x.jsx("i",{className:"ri-fullscreen-exit-line"})})}),x.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[x.jsx("div",{className:"text-[120px] font-bold text-white mb-8 font-mono tracking-wider",children:l}),x.jsx("h2",{className:"text-2xl text-white/90 mb-4",children:i?i.title:"No task selected"}),x.jsxs("div",{className:"flex items-center gap-8 text-lg text-white/70",children:[x.jsx("div",{children:s?`Project: ${s.name}`:"No project selected"}),x.jsx("div",{children:i?`${i.timeSpent}/${i.timeEstimated}m`:"--/--m"})]})]})]}):null},Qwe=6048e5,sJe=864e5,nae=Symbol.for("constructDateFrom");function Wl(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&nae in n?n[nae](e):n instanceof Date?new n.constructor(e):new Date(e)}function Os(n,e){return Wl(e||n,n)}function Ec(n,e,t){const r=Os(n,t==null?void 0:t.in);return isNaN(e)?Wl(n,NaN):(e&&r.setDate(r.getDate()+e),r)}function WW(n,e,t){const r=Os(n,t==null?void 0:t.in);if(isNaN(e))return Wl(n,NaN);if(!e)return r;const i=r.getDate(),a=Wl(n,r.getTime());a.setMonth(r.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let lJe={};function BI(){return lJe}function th(n,e){var s,l,c,u;const t=BI(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Os(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function QO(n,e){return th(n,{...e,weekStartsOn:1})}function Jwe(n,e){const t=Os(n,e==null?void 0:e.in),r=t.getFullYear(),i=Wl(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=QO(i),o=Wl(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=QO(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=s.getTime()?r:r-1}function rae(n){const e=Os(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function bj(n,...e){const t=Wl.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function JO(n,e){const t=Os(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function cJe(n,e,t){const[r,i]=bj(t==null?void 0:t.in,n,e),a=JO(r),o=JO(i),s=+a-rae(a),l=+o-rae(o);return Math.round((s-l)/sJe)}function uJe(n,e){const t=Jwe(n,e),r=Wl(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),QO(r)}function exe(n,e,t){return Ec(n,e*7,t)}function dJe(n){return Wl(n,Date.now())}function io(n,e,t){const[r,i]=bj(t==null?void 0:t.in,n,e);return+JO(r)==+JO(i)}function hJe(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function fJe(n){return!(!hJe(n)&&typeof n!="number"||isNaN(+Os(n)))}function txe(n,e){const t=Os(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function pJe(n,e){const[t,r]=bj(n,e.start,e.end);return{start:t,end:r}}function e2(n,e){const{start:t,end:r}=pJe(e==null?void 0:e.in,n);let i=+t>+r;const a=i?+t:+r,o=i?r:t;o.setHours(0,0,0,0);let s=1;const l=[];for(;+o<=a;)l.push(Wl(t,o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i?l.reverse():l}function nxe(n,e){const t=Os(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function gJe(n,e){const t=Os(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function qW(n,e){var s,l,c,u;const t=BI(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Os(n,e==null?void 0:e.in),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const mJe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vJe=(n,e,t)=>{let r;const i=mJe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function wB(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const yJe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bJe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wJe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xJe={date:wB({formats:yJe,defaultWidth:"full"}),time:wB({formats:bJe,defaultWidth:"full"}),dateTime:wB({formats:wJe,defaultWidth:"full"})},SJe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_Je=(n,e,t,r)=>SJe[n];function CA(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,s=t!=null&&t.width?String(t.width):o;i=n.formattingValues[s]||n.formattingValues[o]}else{const o=n.defaultWidth,s=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[s]||n.values[o]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const TJe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EJe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AJe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kJe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CJe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DJe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},IJe=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},MJe={ordinalNumber:IJe,era:CA({values:TJe,defaultWidth:"wide"}),quarter:CA({values:EJe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:CA({values:AJe,defaultWidth:"wide"}),day:CA({values:kJe,defaultWidth:"wide"}),dayPeriod:CA({values:CJe,defaultWidth:"wide",formattingValues:DJe,defaultFormattingWidth:"wide"})};function DA(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(s)?NJe(s,d=>d.test(o)):PJe(s,d=>d.test(o));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function PJe(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function NJe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function RJe(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],a=e.match(n.parsePattern);if(!a)return null;let o=n.valueCallback?n.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const OJe=/^(\d+)(th|st|nd|rd)?/i,LJe=/\d+/i,jJe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FJe={any:[/^b/i,/^(a|c)/i]},$Je={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},BJe={any:[/1/i,/2/i,/3/i,/4/i]},UJe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VJe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zJe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HJe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},GJe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WJe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qJe={ordinalNumber:RJe({matchPattern:OJe,parsePattern:LJe,valueCallback:n=>parseInt(n,10)}),era:DA({matchPatterns:jJe,defaultMatchWidth:"wide",parsePatterns:FJe,defaultParseWidth:"any"}),quarter:DA({matchPatterns:$Je,defaultMatchWidth:"wide",parsePatterns:BJe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:DA({matchPatterns:UJe,defaultMatchWidth:"wide",parsePatterns:VJe,defaultParseWidth:"any"}),day:DA({matchPatterns:zJe,defaultMatchWidth:"wide",parsePatterns:HJe,defaultParseWidth:"any"}),dayPeriod:DA({matchPatterns:GJe,defaultMatchWidth:"any",parsePatterns:WJe,defaultParseWidth:"any"})},YJe={code:"en-US",formatDistance:vJe,formatLong:xJe,formatRelative:_Je,localize:MJe,match:qJe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KJe(n,e){const t=Os(n,e==null?void 0:e.in);return cJe(t,gJe(t))+1}function XJe(n,e){const t=Os(n,e==null?void 0:e.in),r=+QO(t)-+uJe(t);return Math.round(r/Qwe)+1}function rxe(n,e){var u,d,h,f;const t=Os(n,e==null?void 0:e.in),r=t.getFullYear(),i=BI(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((f=(h=i.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=Wl((e==null?void 0:e.in)||n,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const s=th(o,e),l=Wl((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=th(l,e);return+t>=+s?r+1:+t>=+c?r:r-1}function ZJe(n,e){var s,l,c,u;const t=BI(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=rxe(n,e),a=Wl((e==null?void 0:e.in)||n,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),th(a,e)}function QJe(n,e){const t=Os(n,e==null?void 0:e.in),r=+th(t,e)-+ZJe(t,e);return Math.round(r/Qwe)+1}function Jr(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const dv={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Jr(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Jr(t+1,2)},d(n,e){return Jr(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Jr(n.getHours()%12||12,e.length)},H(n,e){return Jr(n.getHours(),e.length)},m(n,e){return Jr(n.getMinutes(),e.length)},s(n,e){return Jr(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Jr(i,e.length)}},jS={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iae={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return dv.y(n,e)},Y:function(n,e,t,r){const i=rxe(n,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Jr(o,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):Jr(a,e.length)},R:function(n,e){const t=Jwe(n);return Jr(t,e.length)},u:function(n,e){const t=n.getFullYear();return Jr(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Jr(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Jr(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return dv.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Jr(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=QJe(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Jr(i,e.length)},I:function(n,e,t){const r=XJe(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Jr(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):dv.d(n,e)},D:function(n,e,t){const r=KJe(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Jr(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Jr(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Jr(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Jr(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=jS.noon:r===0?i=jS.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=jS.evening:r>=12?i=jS.afternoon:r>=4?i=jS.morning:i=jS.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return dv.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):dv.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Jr(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Jr(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):dv.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):dv.s(n,e)},S:function(n,e){return dv.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return oae(r);case"XXXX":case"XX":return Eb(r);case"XXXXX":case"XXX":default:return Eb(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return oae(r);case"xxxx":case"xx":return Eb(r);case"xxxxx":case"xxx":default:return Eb(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+aae(r,":");case"OOOO":default:return"GMT"+Eb(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+aae(r,":");case"zzzz":default:return"GMT"+Eb(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Jr(r,e.length)},T:function(n,e,t){return Jr(+n,e.length)}};function aae(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),a=r%60;return a===0?t+String(i):t+String(i)+e+Jr(a,2)}function oae(n,e){return n%60===0?(n>0?"-":"+")+Jr(Math.abs(n)/60,2):Eb(n,e)}function Eb(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Jr(Math.trunc(r/60),2),a=Jr(r%60,2);return t+i+e+a}const sae=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ixe=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JJe=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return sae(n,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",sae(r,e)).replace("{{time}}",ixe(i,e))},eet={p:ixe,P:JJe},tet=/^D+$/,net=/^Y+$/,ret=["D","DD","YY","YYYY"];function iet(n){return tet.test(n)}function aet(n){return net.test(n)}function oet(n,e,t){const r=set(n,e,t);if(console.warn(r),ret.includes(n))throw new RangeError(r)}function set(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cet=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uet=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,det=/^'([^]*?)'?$/,het=/''/g,fet=/[a-zA-Z]/;function _n(n,e,t){var u,d,h,f;const r=BI(),i=r.locale??YJe,a=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=Os(n,t==null?void 0:t.in);if(!fJe(s))throw new RangeError("Invalid time value");let l=e.match(uet).map(m=>{const v=m[0];if(v==="p"||v==="P"){const y=eet[v];return y(m,i.formatLong)}return m}).join("").match(cet).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const v=m[0];if(v==="'")return{isToken:!1,value:pet(m)};if(iae[v])return{isToken:!0,value:m};if(v.match(fet))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(m=>{if(!m.isToken)return m.value;const v=m.value;(aet(v)||iet(v))&&oet(v,e,String(n));const y=iae[v[0]];return y(s,v,i.localize,c)}).join("")}function pet(n){const e=n.match(det);return e?e[1].replace(het,"'"):n}function get(n,e,t){const[r,i]=bj(t==null?void 0:t.in,n,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function cw(n,e){return io(Wl(n,n),dJe(n))}function met(n,e,t){return WW(n,-1,t)}const vet=({isOpen:n,triggerRef:e,contentRef:t,preferredPlacement:r="bottom",offset:i=4,viewportPadding:a=8,modalThreshold:o=200})=>{const[s,l]=Y.useState({top:0,left:0,transformOrigin:"top left",placement:"bottom"}),[c,u]=Y.useState(!1),d=Y.useRef(s),h=Y.useCallback(()=>{if(!e.current||!t.current||!n)return;const f=e.current,m=t.current,v=f.getBoundingClientRect(),y=m.getBoundingClientRect(),w={width:window.innerWidth,height:window.innerHeight,scrollX:window.pageXOffset||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.documentElement.scrollTop},S=v.top,T=w.height-v.bottom;if(v.left,w.width-v.right,y.height>Math.max(S-a,T-a)&&y.height>o){l({top:Math.max(a,(w.height-y.height)/2)+w.scrollY,left:Math.max(a,(w.width-y.width)/2)+w.scrollX,transformOrigin:"center",placement:"modal"});return}let k,A=r,D="top";const P=T>=y.height+a,N=S>=y.height+a;r==="bottom"&&P?(k=v.bottom+i+w.scrollY,A="bottom"):r==="top"&&N?(k=v.top-y.height-i+w.scrollY,A="top",D="bottom"):P?(k=v.bottom+i+w.scrollY,A="bottom"):N?(k=v.top-y.height-i+w.scrollY,A="top",D="bottom"):T>S?(k=Math.min(v.bottom+i+w.scrollY,w.height-y.height-a+w.scrollY),k+y.height>w.height+w.scrollY-a&&(k=w.height+w.scrollY-y.height-4),A="bottom"):(k=Math.max(a+w.scrollY,v.top-y.height-i+w.scrollY),k<w.scrollY+a&&(k=w.scrollY+4),A="top",D="bottom");let R,L="left";R=v.left+w.scrollX,R+y.width>w.width-a&&(R=w.width-y.width-a+w.scrollX,R<=v.right+w.scrollX&&(R=v.right-y.width+w.scrollX,L="right")),R=Math.max(a+w.scrollX,R);const B={top:k,left:R,transformOrigin:`${D} ${L}`,placement:A};d.current=B,l(B),u(!0)},[n,e,t,r,i,a,o,c]);return Y.useEffect(()=>{d.current=s},[s]),Y.useEffect(()=>{n&&(u(!1),setTimeout(()=>{h()},0))},[n,h]),Y.useEffect(()=>{n||u(!1)},[n]),Y.useEffect(()=>{if(!n)return;const f=()=>h(),m=()=>{requestAnimationFrame(f)};return window.addEventListener("resize",m),window.addEventListener("scroll",m,!0),window.addEventListener("orientationchange",m),()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),window.removeEventListener("orientationchange",m)}},[n,h,t]),{...s,isReady:c,recalculate:h}},yet=({onTimeSelect:n,showTimezone:e=!1,initialTime:t="09:00 - 10:00",is24Hour:r=!0})=>{const[i,a]=Y.useState(()=>t.includes(" - ")?t.split(" - ")[0]:t),[o,s]=Y.useState(()=>{if(t.includes(" - "))return t.split(" - ")[1];const[h,f]=t.split(":");return`${((parseInt(h)+1)%24).toString().padStart(2,"0")}:${f}`}),l=h=>{a(h),d(h,o)},c=h=>{s(h),d(i,h)},u=Y.useRef(""),d=Y.useCallback((h,f)=>{const m=`${h} - ${f}`;n&&m!==u.current&&(u.current=m,n(m))},[n]);return Y.useEffect(()=>{if(t.includes(" - ")){const[h,f]=t.split(" - ");(h!==i||f!==o)&&(a(h),s(f),d(h,f))}},[t,d,i,o]),x.jsxs("div",{className:"space-y-3 border-t border-border pt-3",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Time format"}),x.jsx("span",{className:"text-xs text-text-secondary",children:r?"24 hour":"12 hour"})]}),e&&x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Timezone"}),x.jsx("span",{className:"text-xs text-text-secondary",children:Intl.DateTimeFormat().resolvedOptions().timeZone})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"Start time"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"time",value:i,onChange:h=>l(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),x.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-time-line text-xs"})})]})]}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"End time"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"time",value:o,onChange:h=>c(h.target.value),className:"w-full pl-6 pr-2 py-1.5 border border-border rounded-md text-xs text-text-primary bg-background-primary focus:outline-none",onFocus:h=>h.target.style.borderColor="#BB5F5A",onBlur:h=>h.target.style.borderColor="var(--border-color)"}),x.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-time-line text-xs"})})]})]})]})]})},bet=({selectedDate:n,onDateSelect:e,includeTime:t=!1,onTimeSelect:r,onTimeToggle:i,onConfirm:a,onClear:o,onClose:s,className:l="",minDate:c,maxDate:u,initialMonth:d=new Date,showTimezone:h=!1,initialStartTime:f="09:00",initialEndTime:m="10:00",triggerRef:v,isOpen:y=!0})=>{const[w,S]=Y.useState(d),[T,C]=Y.useState(t),[k,A]=Y.useState("00:00 - 00:00"),D=Y.useRef(null),P=vet({isOpen:y,triggerRef:v||{current:null},contentRef:D,preferredPlacement:"bottom",offset:8,viewportPadding:12,modalThreshold:9999}),N=nxe(w),R=txe(w),L=th(N,{weekStartsOn:0}),B=qW(R,{weekStartsOn:0}),$=e2({start:L,end:B});Y.useEffect(()=>{C(t)},[t]),Y.useEffect(()=>{const ce=setTimeout(()=>{P.recalculate()},100);return()=>clearTimeout(ce)},[T,P.recalculate]),Y.useEffect(()=>{f&&m&&A(`${f} - ${m}`)},[f,m]),Y.useEffect(()=>{if(!y||!s)return;const ce=be=>{const fe=be.target;D.current&&!D.current.contains(fe)&&(v!=null&&v.current)&&!v.current.contains(fe)&&s()},ee=be=>{be.key==="Escape"&&s()};return document.addEventListener("mousedown",ce,!0),document.addEventListener("keydown",ee),()=>{document.removeEventListener("mousedown",ce,!0),document.removeEventListener("keydown",ee)}},[y,s,v]);const G=()=>S(met(w)),W=()=>S(WW(w,1)),K=ce=>{e(ce),(ce.getMonth()!==w.getMonth()||ce.getFullYear()!==w.getFullYear())&&S(ce)},X=ce=>{C(ce),i==null||i(ce)},te=ce=>{A(ce),r==null||r(ce)},ie=()=>{A("00:00 - 00:00"),o==null||o()},z=()=>{a==null||a()};if(!y)return null;const se=()=>{const ce="bg-background-secondary rounded-lg shadow-lg border border-border w-[300px] fixed transition-all duration-200 ease-out z-50",ee=P.isReady?"opacity-100":"opacity-0 pointer-events-none";switch(P.placement){case"top":return`${ce} ${ee} animate-slide-up`;case"bottom":default:return`${ce} ${ee} animate-slide-down`}};return x.jsx("div",{ref:D,className:`${se()} ${l}`,style:{top:`${P.top}px`,left:`${P.left}px`,transformOrigin:P.transformOrigin},"data-datepicker":!0,children:x.jsxs("div",{className:"p-3",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:G,type:"button",children:x.jsx("i",{className:"ri-arrow-left-s-line text-base"})}),x.jsx("h3",{className:"text-sm font-medium text-text-primary",children:_n(w,"MMMM yyyy")}),x.jsx("button",{className:"p-1.5 hover:bg-background-container rounded-full text-text-secondary hover:text-text-primary transition-colors",onClick:W,type:"button",children:x.jsx("i",{className:"ri-arrow-right-s-line text-base"})})]}),x.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(ce=>x.jsx("div",{className:"h-6 flex items-center justify-center text-xs font-medium text-text-secondary",children:ce},ce))}),x.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:$.map((ce,ee)=>{const be=n&&io(ce,n),fe=cw(ce),De=c&&ce<c||u&&ce>u,dt=ce.getMonth()===w.getMonth();return x.jsx("button",{onClick:()=>!De&&K(ce),disabled:De,className:`
                    h-7 w-7 flex items-center justify-center text-xs rounded-full transition-colors
                    ${De?"text-text-secondary opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-background-container"}
                    ${dt?"text-text-primary":"text-text-secondary opacity-60"}
                    ${be?"text-white font-medium":""}
                    ${!be&&fe?"text-[#BB5F5A] font-medium":""}
                  `,style:be?{backgroundColor:"#BB5F5A"}:{},children:_n(ce,"d")},ee)})}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs text-text-secondary",children:"Include time"}),x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:T,onChange:ce=>X(ce.target.checked),className:"sr-only"}),x.jsx("div",{className:`relative w-9 h-5 rounded-full transition-colors ${T?"":"bg-background-container"}`,style:T?{backgroundColor:"#BB5F5A"}:{},children:x.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full transition-transform ${T?"translate-x-4":"translate-x-0"}`})})]})]}),T&&x.jsx(yet,{onTimeSelect:te,showTimezone:h,initialTime:k,is24Hour:!0})]}),x.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[x.jsx("button",{onClick:ie,className:"px-3 py-1.5 text-xs text-text-secondary hover:text-text-primary transition-colors",children:"Clear"}),x.jsx("button",{onClick:z,className:"px-4 py-1.5 text-xs text-white rounded-md transition-colors hover:opacity-90",style:{backgroundColor:"#BB5F5A"},children:"Confirm"})]})]})})},wet=Y.createContext(void 0),xet=({children:n})=>{const[e,t]=Y.useState(new Date),[r,i]=Y.useState(null),[a,o]=Y.useState(!1),s=Y.useCallback(()=>{t(null),i(null),o(!1)},[]),l=Y.useCallback(()=>{if(!e)return"";const u=_n(e,"MMM dd, yyyy");return!a||!r?u:`${u}, ${r}`},[e,r,a]),c={selectedDate:e,selectedTime:r,setSelectedDate:t,setSelectedTime:i,clearSelection:s,getFormattedDateTime:l,isTimeIncluded:a,setIsTimeIncluded:o};return x.jsx(wet.Provider,{value:c,children:n})},k9=["#81B214","#33B679","#C21505","#176B87","#CB8697","#55B7C0","#B66283","#CC9000","#419197","#B02C00","#FFD700","#FF7F50"],axe=()=>{const n=Math.floor(Math.random()*k9.length);return k9[n]},_et=n=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(n);function Tet(n){const e={"linkedin.com":"#0A66C2","facebook.com":"#1877F2","twitter.com":"#1DA1F2","github.com":"#24292F","youtube.com":"#FF0000","instagram.com":"#E4405F","google.com":"#4285F4","microsoft.com":"#00A4EF","apple.com":"#000000","amazon.com":"#FF9900","app.make10000hours.com":"#FF6B6B","ycombinator.com":"#FF6600","copilot.microsoft.com":"#0078D4","readdy.ai":"#7C3AED","substack.com":"#FF6719","cursor.com":"#000000","news.ycombinator.com":"#FF6600","console.firebase.google.com":"#FFA000","firebase.google.com":"#FFA000","reddit.com":"#FF4500","netflix.com":"#E50914","spotify.com":"#1ED760","twitch.tv":"#9146FF","pinterest.com":"#E60023","discord.com":"#5865F2","slack.com":"#4A154B","zoom.us":"#2D8CFF","notion.so":"#000000","figma.com":"#F24E1E","dribbble.com":"#EA4C89","behance.net":"#1769FF","medium.com":"#00ab6c","dev.to":"#0A0A0A","stackoverflow.com":"#F58025","gitlab.com":"#FC6D26","bitbucket.org":"#0052CC","dropbox.com":"#0061FF","drive.google.com":"#4285F4","onedrive.live.com":"#0078D4","icloud.com":"#007AFF","trello.com":"#0079BF","asana.com":"#273347","monday.com":"#FF3D71","airtable.com":"#18BFFF","canva.com":"#00C4CC","adobe.com":"#FF0000","stripe.com":"#635BFF","paypal.com":"#00457C","shopify.com":"#7AB55C","wordpress.com":"#21759B","squarespace.com":"#000000","wix.com":"#0C6EBD","webflow.com":"#4353FF","vercel.com":"#000000","netlify.com":"#00C7B7","heroku.com":"#430098","aws.amazon.com":"#FF9900","azure.microsoft.com":"#0078D4","cloud.google.com":"#4285F4","digitalocean.com":"#0080FF","linode.com":"#00A95C","vultr.com":"#007BFC"};if(e[n])return e[n];for(const[t,r]of Object.entries(e))if(n.includes(t.split(".")[0]))return r;return null}function oxe(n,e){const t=Tet(n);if(t)return t;if(e)return e;const r=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#2ba8f0"],i=n.split("").reduce((a,o)=>a+o.charCodeAt(0),0);return r[i%r.length]}function sxe(n){try{return n.includes("://")?new URL(n).hostname:n}catch{return n}}const Kv=({task:n,status:e,initialProjectId:t,initialStartTime:r,initialEndTime:i,isAllDay:a,onCancel:o,onSave:s,isCalendarContext:l=!1})=>{var mo;const c=oye(),{addTask:u,updateTask:d,deleteTask:h}=c,f=Vt(ze=>ze.projects),m=Vt(ze=>ze.addProject),{user:v}=Ht(),[y,w]=Y.useState((n==null?void 0:n.title)||""),[S,T]=Y.useState((n==null?void 0:n.projectId)||""),[C,k]=Y.useState(((mo=n==null?void 0:n.timeSpent)==null?void 0:mo.toString())||"0"),[A,D]=Y.useState(()=>n!=null&&n.timeEstimated?n.timeEstimated.toString():r&&i?Pje(r,i).toString():""),[P,N]=Y.useState((n==null?void 0:n.description)||""),[R,L]=Y.useState(!1),[B,$]=Y.useState(!1),[G,W]=Y.useState(!1),[K,X]=Y.useState(!1),[te,ie]=Y.useState(!1),[z,se]=Y.useState(""),[ce,ee]=Y.useState(()=>{if(n!=null&&n.scheduledDate)return n.scheduledDate;if(r){const ze=r.getFullYear(),bn=String(r.getMonth()+1).padStart(2,"0"),Ue=String(r.getDate()).padStart(2,"0");return`${ze}-${bn}-${Ue}`}return n?"":new Date().toISOString().split("T")[0]}),[be,fe]=Y.useState(!1),[De,dt]=Y.useState(()=>a===!0?!1:(n==null?void 0:n.includeTime)!==void 0?n.includeTime:!!(r&&i)),[ve,de]=Y.useState(()=>{if(n!=null&&n.scheduledStartTime)return n.scheduledStartTime;if(r){const ze=String(r.getHours()).padStart(2,"0"),bn=String(r.getMinutes()).padStart(2,"0");return`${ze}:${bn}`}return"09:00"}),[me,xe]=Y.useState(()=>{if(n!=null&&n.scheduledEndTime)return n.scheduledEndTime;if(i){const ze=String(i.getHours()).padStart(2,"0"),bn=String(i.getMinutes()).padStart(2,"0");return`${ze}:${bn}`}return"10:00"}),pe=Y.useRef(null),$e=Y.useRef(null),We=Y.useRef(null),ct=Y.useRef(null),xt=Y.useRef(null),At=Y.useRef(null),pn=Y.useRef(null),Yt=Y.useRef(null),Rn=f.find(ze=>ze.id==="no-project"),vn=()=>n!=null&&n.projectId?n.projectId:t||localStorage.getItem("lastUsedProjectId")||"no-project";Y.useEffect(()=>{if(n!=null&&n.projectId||T(vn()),!Rn&&v&&!n&&Vt.getState().addProject({name:"No Project",color:"#6B7280"}),pe.current){pe.current.focus();const ze=pe.current.value.length;pe.current.setSelectionRange(ze,ze)}},[]),Y.useEffect(()=>{te&&We.current&&We.current.focus()},[te]),Y.useEffect(()=>{const ze=bn=>{bn.key==="Escape"&&(bn.preventDefault(),o())};return document.addEventListener("keydown",ze),()=>{document.removeEventListener("keydown",ze)}},[o]);const Fn=()=>{if($e.current&&"showPicker"in $e.current&&typeof $e.current.showPicker=="function")try{$e.current.showPicker()}catch{console.log("showPicker not supported or failed")}},je=async ze=>{if(ze==="create-new"){const{checkAuthenticationStatus:bn,triggerAuthenticationFlow:Ue}=await nn(async()=>{const{checkAuthenticationStatus:oe,triggerAuthenticationFlow:ge}=await Promise.resolve().then(()=>t2);return{checkAuthenticationStatus:oe,triggerAuthenticationFlow:ge}},void 0),ne=bn();if(!ne.isAuthenticated&&ne.shouldShowAuth){Ue(),T(vn());return}ie(!0),T(""),se("")}else ie(!1),T(ze),se(""),$(!1)},an=()=>{ie(!1),se(""),T(vn())},yn=Y.useCallback(ze=>{requestAnimationFrame(()=>{ze.style.height="auto",ze.style.height=`${ze.scrollHeight}px`})},[]);Y.useEffect(()=>{pe.current&&yn(pe.current)},[y,yn]),Y.useEffect(()=>{At.current&&yn(At.current)},[P,yn]);const Te=async()=>{const{checkAuthenticationStatus:ze,triggerAuthenticationFlow:bn}=await nn(async()=>{const{checkAuthenticationStatus:St,triggerAuthenticationFlow:bt}=await Promise.resolve().then(()=>t2);return{checkAuthenticationStatus:St,triggerAuthenticationFlow:bt}},void 0),Ue=ze();if(!Ue.isAuthenticated&&Ue.shouldShowAuth){bn();return}if(L(!1),$(!1),W(!1),X(!1),!y.trim()){L(!0),pe.current&&pe.current.focus();return}if(te&&!z.trim()){$(!0),We.current&&We.current.focus();return}const ne=parseInt(C)||0,oe=parseInt(A)||0;if(ne<0){W(!0),xt.current&&xt.current.focus();return}if(oe<0){X(!0),ct.current&&ct.current.focus();return}if(!v){console.error("No user found");return}let ge=S;if(te&&z.trim())try{const St=await m({name:z.trim(),color:axe()});ge=St,localStorage.setItem("lastUsedProjectId",St)}catch(St){console.error("Error creating project:",St);return}else ge&&ge!=="no-project"&&localStorage.setItem("lastUsedProjectId",ge);const ke={title:y.trim(),description:P.trim(),projectId:ge||"no-project",userId:v.uid,completed:(n==null?void 0:n.completed)||!1,status:(n==null?void 0:n.status)||e||"pomodoro",timeSpent:parseInt(C)||0,timeEstimated:parseInt(A)||0};if(ce&&ce.trim()){ke.scheduledDate=ce.trim(),ke.includeTime=De,De&&ve&&me&&(ke.scheduledStartTime=ve,ke.scheduledEndTime=me);const St=new Date(ce.trim());io(St,new Date)&&(n==null?void 0:n.status)==="todo"&&(ke.status="pomodoro")}const qe=(n==null?void 0:n.timeSpent)||0,nt=parseInt(C)||0,_t=n&&nt!==qe,ot=nt-qe;if(n){if(d(n.id,ke),_t&&ot!==0)try{await ji.upsertWorkSession({userId:v.uid,taskId:n.id,projectId:ge||"no-project",date:Mje()},ot,"manual")}catch(St){console.error("Failed to create work session for manual edit:",St)}}else{console.log("Creating new task with data:",ke);try{console.log("About to call addTask...");const St=await u(ke);console.log("Task created successfully with ID:",St)}catch(St){console.error("Error creating task:",St)}}console.log("About to call callback - onSave available:",!!s),s?(console.log("Calling onSave callback"),s()):(console.log("Calling onCancel callback"),o())},Oe=()=>{n&&window.confirm("Are you sure you want to delete this task? This action cannot be undone.")&&(h(n.id),o())},et=()=>{if(n){const ze=n.status==="pomodoro"?"todo":"pomodoro";d(n.id,{...n,status:ze,completed:!1,hideFromPomodoro:ze==="pomodoro"?!1:n.hideFromPomodoro}),o()}},Ne=()=>{if(n){const ze=new Date().toISOString().split("T")[0],bn=n.scheduledDate===ze;d(n.id,{...n,status:"completed",completed:!0,hideFromPomodoro:!bn}),o()}},Je=Y.useCallback(()=>{fe(!be)},[be]),pt=Y.useCallback(ze=>{const bn=ze.getFullYear(),Ue=String(ze.getMonth()+1).padStart(2,"0"),ne=String(ze.getDate()).padStart(2,"0");ee(`${bn}-${Ue}-${ne}`)},[]),Kt=Y.useCallback(ze=>{const[bn,Ue]=ze.split(" - ");de(bn),xe(Ue)},[]),vt=Y.useCallback(ze=>{dt(ze)},[]),Sn=()=>{if(te)return"New Project";const ze=f.find(bn=>bn.id===S);return(ze==null?void 0:ze.name)||"Project"},on=(ze,bn)=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){Te();return}console.log("handleKeyDown called, nextRef:",bn===At?"descriptionRef":bn===$e?"projectSelectRef":"other"),bn.current&&setTimeout(()=>{bn.current&&(bn.current.focus(),console.log("Focused on:",bn.current.tagName),bn===$e&&setTimeout(()=>Fn(),50))},0)}},Jt=ze=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){Te();return}$e.current&&($e.current.focus(),setTimeout(()=>Fn(),50))}},Cr=ze=>{ze.key==="Enter"&&!ze.shiftKey&&(ze.preventDefault(),Te())},hn=ze=>{ze.key==="Enter"&&!ze.shiftKey&&(ze.preventDefault(),Te())},Si=ze=>{if(ze.key==="Enter"&&!ze.shiftKey){if(ze.preventDefault(),n){Te();return}ct.current&&ct.current.focus()}};return x.jsx(xet,{children:x.jsx("div",{ref:pn,className:"task-card p-4 bg-background-secondary border border-border rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 animate-fade-in relative",style:{zIndex:be?1e3:"auto"},children:x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("textarea",{autoFocus:!0,ref:pe,id:"task-title",name:"title",className:`w-full text-lg font-medium text-text-primary px-0 py-0.5 bg-transparent focus:outline-none border-none resize-none overflow-hidden ${R?"ring-2 ring-red-200":""}`,placeholder:"Task name",value:y,onChange:ze=>{w(ze.target.value),L(!1);const bn=ze.target;yn(bn)},onKeyDown:ze=>on(ze,At),rows:1,style:{minHeight:"1.75rem"}}),x.jsx("textarea",{ref:At,id:"task-description",name:"description",className:"w-full text-sm text-text-secondary px-0 py-1 bg-transparent border-none focus:outline-none resize-none",placeholder:"Description",value:P,onChange:ze=>{N(ze.target.value),yn(ze.target)},onKeyDown:Jt,style:{height:"auto",minHeight:"1.5rem",marginBottom:"0.5rem"},rows:1}),x.jsx("div",{className:"flex flex-wrap gap-3 mb-2",children:x.jsxs("div",{className:"flex flex-wrap gap-2 min-w-0",children:[x.jsx("div",{className:"relative",children:te?x.jsxs("div",{className:"flex items-center gap-1.5",children:[x.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary",children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:x.jsx(mt,{name:"folder-line",className:"w-3.5 h-3.5"})}),x.jsx("input",{ref:We,type:"text",id:"new-project-name",name:"newProjectName",className:`bg-transparent border-none focus:outline-none p-0 text-xs ${B?"ring-2 ring-red-200":""}`,placeholder:"Enter project name",value:z,onChange:ze=>{se(ze.target.value),$(!1)},onKeyDown:ze=>on(ze,ct)})]}),x.jsx("button",{className:"p-1 rounded hover:bg-background-primary transition-colors duration-200",onClick:an,type:"button",children:x.jsx(mt,{name:"close-line",className:"w-3.5 h-3.5 text-text-secondary"})})]}):x.jsxs(x.Fragment,{children:[x.jsxs("select",{ref:$e,id:"task-project",name:"projectId",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:S,onChange:ze=>je(ze.target.value),onKeyDown:Si,children:[x.jsx("option",{value:"no-project",children:"No Project"}),x.jsx("option",{value:"create-new",children:"Create new project"}),f.filter(ze=>ze.id!=="no-project").map(ze=>x.jsx("option",{value:ze.id,children:ze.name},ze.id))]}),x.jsxs("button",{type:"button",className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 ${B?"ring-2 ring-red-200":""}`,onClick:Fn,children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center flex-shrink-0",children:x.jsx(mt,{name:"folder-line",className:"w-3.5 h-3.5"})}),x.jsx("span",{className:"truncate max-w-[8rem]",children:Sn()}),x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center text-text-secondary flex-shrink-0",children:x.jsx(mt,{name:"arrow-down-s-line",className:"w-3.5 h-3.5"})})]})]})}),x.jsxs("div",{className:"flex flex-col",children:[x.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary flex-shrink-0 ${G||K?"border-red-500":""}`,children:[x.jsx("div",{className:"w-3.5 h-3.5 flex items-center justify-center",children:x.jsx(mt,{name:"time-line",className:"w-3.5 h-3.5"})}),n&&x.jsxs(x.Fragment,{children:[x.jsx("input",{ref:xt,type:"number",id:"time-spent",name:"timeSpent",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:C,onChange:ze=>{k(ze.target.value),W(!1)},onKeyDown:Cr}),x.jsx("span",{className:"text-text-secondary",children:"/"})]}),!n&&x.jsx("span",{className:"whitespace-nowrap",children:"Est."}),x.jsx("input",{ref:ct,type:"number",id:"time-estimated",name:"timeEstimated",className:"w-7 text-center bg-transparent border-none focus:outline-none p-0 text-xs",placeholder:"0",min:"0",value:A,onChange:ze=>{D(ze.target.value),X(!1)},onKeyDown:hn}),x.jsx("span",{className:"text-text-secondary whitespace-nowrap",children:"m"})]}),(G||K)&&x.jsx("div",{className:"text-xs text-red-500 mt-1 px-2.5",children:"Time must be positive!"})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("button",{ref:Yt,id:"datePickerBtn",className:"flex items-center gap-1.5 px-2.5 py-1 bg-background-secondary border border-border hover:border-text-secondary rounded text-xs text-text-secondary hover:bg-background-primary min-w-0 flex-shrink-0",onClick:Je,children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:x.jsx("i",{className:"ri-calendar-line"})}),x.jsx("span",{className:"whitespace-nowrap",children:ce?_n(new Date(ce),"MMM dd, yyyy")+(De?`, ${ve} - ${me}`:""):"Add to calendar"})]}),be&&Eye.createPortal(x.jsx(bet,{selectedDate:ce?new Date(ce):void 0,onDateSelect:pt,onTimeSelect:Kt,onTimeToggle:vt,onConfirm:()=>fe(!1),onClose:()=>fe(!1),onClear:()=>{ee(""),de("09:00"),xe("10:00"),dt(!1)},includeTime:De,showTimezone:!0,initialStartTime:ve,initialEndTime:me,triggerRef:Yt,isOpen:be}),document.body)]})]})}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center gap-6",children:n&&x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"text-[#FF4D4F] hover:text-red-600 text-sm font-medium",onClick:Oe,children:"Delete"}),x.jsx("button",{className:"text-[#4096FF] hover:text-blue-600 text-sm font-medium",onClick:et,children:n.status==="pomodoro"?"Work later":"Add to Pomodoro"}),l&&!n.completed&&x.jsx("button",{className:"text-[#22C55E] hover:text-green-600 text-sm font-medium",onClick:Ne,children:"Complete"})]})}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{className:"w-10 h-10 rounded-full hover:bg-background-primary flex items-center justify-center transition-colors duration-200",onClick:o,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(mt,{name:"close-line",className:"w-5 h-5"})})}),x.jsx("button",{className:"w-10 h-10 rounded-full bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/40 flex items-center justify-center transition-colors duration-200",onClick:Te,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-green-600 dark:text-green-400",children:x.jsx(mt,{name:"check-line",className:"w-5 h-5"})})})]})]})]})},(n==null?void 0:n.id)||"new-task")})},_D=({id:n,checked:e,onChange:t,disabled:r=!1,className:i=""})=>x.jsx("label",{className:`relative inline-flex items-center cursor-pointer ${r?"cursor-not-allowed":""} ${i}`,children:x.jsx("input",{id:n,type:"checkbox",checked:e,onChange:a=>t(a.target.checked),disabled:r,className:"custom-checkbox"})}),lae=({task:n,project:e,onEdit:t,className:r=""})=>{const[i,a]=Y.useState(!1),o=ns(),{toggleTaskCompletion:s}=Vt(),l=ei(w=>w.currentTask),c=ei(w=>w.setCurrentTask),u=(l==null?void 0:l.id)===n.id,d=o.pathname==="/pomodoro"||o.pathname==="/",h=()=>x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:e.color}}),f=w=>{w.target instanceof HTMLElement&&(w.target.closest('input[type="checkbox"]')||w.target.closest(".edit-task-btn")||w.target.closest(".expand-button"))||n.completed||c(n)},m=async()=>{const w=d?"pomodoro":"default";console.log("TaskItem completion:",{taskId:n.id,taskTitle:n.title,currentPath:o.pathname,isPomodoroPage:d,context:w,isCurrentlyActiveTask:u});const S=await s(n.id,w);w==="pomodoro"&&S?console.log("Next task selected:",S.title):w==="pomodoro"&&!S&&console.log("No next task available")},v=w=>{w.stopPropagation(),t(n.id)},y=w=>{w.stopPropagation(),a(!i)};return x.jsxs("div",{className:`task-card flex items-start p-3 bg-task-todo-bg border 
      ${u?"border-primary":"border-task-todo-border"} 
      ${n.completed?"opacity-70 text-text-secondary":""}
      rounded-md hover:shadow-sm cursor-pointer ${r}`,onClick:f,style:{borderWidth:u?"2px":"1px"},"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(_D,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:m})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[h(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:e.name})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),i&&n.description&&n.description.trim()&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:y,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${i?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:v,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})},Eet=()=>{const{tasks:n,projects:e,editingTaskId:t,setIsAddingTask:r,setEditingTaskId:i,reorderTasks:a}=Vt(),{isRunning:o,pause:s,setEnableStartPauseBtn:l,start:c,currentTask:u}=ei(),[d,h]=Y.useState(null),[f,m]=Y.useState(null),[v,y]=Y.useState(!1),[w,S]=Y.useState(!1),T=Y.useRef(null),C=Y.useRef(-1),k=Y.useRef(null);Y.useEffect(()=>{u&&t===u.id?(l(!1),o&&s()):l(!0)},[t]);const A=(W,K)=>{T.current=K;const X=n.findIndex(te=>te.id===K);C.current=X,W.currentTarget.classList.add("opacity-70","border-dashed")},D=W=>{W.currentTarget.classList.remove("opacity-70","border-dashed"),T.current=null,C.current=-1},P=W=>{W.preventDefault()},N=W=>{W.preventDefault(),W.currentTarget.classList.add("bg-gray-50")},R=W=>{W.currentTarget.classList.remove("bg-gray-50")},L=(W,K)=>{if(W.preventDefault(),W.currentTarget.classList.remove("bg-gray-50"),!T.current||T.current===K)return;const X=n.find(z=>z.id===T.current),te=n.find(z=>z.id===K);if(!X||!te)return;const ie=n.findIndex(z=>z.id===K);a(T.current,ie)},B=W=>{i(W),r(!1),S(!!o)},$=()=>{r(!1),i(null),w&&(S(!1),c())},G=[...n].filter(W=>W.hideFromPomodoro?!1:!!(W.status==="pomodoro"||W.status==="completed"&&W.completed)).sort((W,K)=>W.order-K.order);return x.jsx("div",{className:"space-y-3",id:"taskListSorted",ref:k,children:G.map(W=>{const K=e.find(X=>X.id===W.projectId);if(t===W.id)return x.jsx(Kv,{task:W,onCancel:$},W.id);if(!K){const X={id:W.projectId||"unknown",name:"Unknown Project",userId:W.userId};return x.jsx("div",{draggable:!0,onDragStart:te=>A(te,W.id),onDragEnd:D,onDragOver:P,onDragEnter:N,onDragLeave:R,onDrop:te=>L(te,W.id),children:x.jsx(lae,{task:W,project:X,onEdit:B})},W.id)}return x.jsx("div",{draggable:!0,onDragStart:X=>A(X,W.id),onDragEnd:D,onDragOver:P,onDragEnter:N,onDragLeave:R,onDrop:X=>L(X,W.id),children:x.jsx(lae,{task:W,project:K,onEdit:B})},W.id)})})},Aet=()=>{const{tasks:n}=Vt(),e=[...n].filter(l=>l.hideFromPomodoro?!1:!!(l.status==="pomodoro"||l.completed)).sort((l,c)=>l.order-c.order),t=e.reduce((l,c)=>l+(c.timeSpent||0),0),r=e.reduce((l,c)=>l+(c.timeEstimated||0),0),i=e.filter(l=>l.status==="pomodoro"),a=i.reduce((l,c)=>l+(c.timeEstimated||0),0),o=i.reduce((l,c)=>l+(c.timeSpent||0),0),s=Math.max(0,a-o);return x.jsxs("div",{className:"text-sm text-text-secondary",children:[x.jsx("span",{children:"Total time spent: "}),x.jsx("span",{className:"font-medium text-text-primary",children:Af(t)}),r>0&&x.jsxs("span",{children:[" ","(",Af(s)," left)"]})]})},ket=()=>{const{user:n,isAuthenticated:e,isInitialized:t}=Ht.getState();if(!t)return{isAuthenticated:!1,shouldShowAuth:!1};const r=e&&!!n;return{isAuthenticated:r,shouldShowAuth:!r}},yf=()=>{lxe()},lxe=async()=>{try{const{auth:n}=await nn(async()=>{const{auth:s}=await Promise.resolve().then(()=>qve);return{auth:s}},void 0),{GoogleAuthProvider:e,signInWithPopup:t}=await nn(async()=>{const{GoogleAuthProvider:s,signInWithPopup:l}=await Promise.resolve().then(()=>Eve);return{GoogleAuthProvider:s,signInWithPopup:l}},void 0),{trackUserLogin:r,trackUserSignup:i}=await nn(async()=>{const{trackUserLogin:s,trackUserSignup:l}=await Promise.resolve().then(()=>nye);return{trackUserLogin:s,trackUserSignup:l}},void 0),a=new e;a.addScope("email"),a.addScope("profile"),console.log("🔐 Triggering Google authentication popup...");const o=await t(n,a);o.user&&(o.user.metadata.creationTime===o.user.metadata.lastSignInTime?(i("google"),console.log("✅ New user signed up with Google")):(r("google"),console.log("✅ Existing user signed in with Google"))),console.log("✅ Google authentication successful")}catch(n){console.error("❌ Google authentication failed:",n),n.code==="auth/popup-closed-by-user"?console.log("ℹ️ User closed the authentication popup"):n.code==="auth/popup-blocked"?(console.error("🚫 Popup was blocked by browser"),cxe()):alert("Failed to sign in. Please try again.")}},cxe=()=>{uxe()},uxe=()=>{if(document.getElementById("auth-modal"))return;const n=document.createElement("div");n.id="auth-modal",n.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  `;const e=document.createElement("div");e.style.cssText=`
    background: white;
    padding: 2rem;
    border-radius: 8px;
    max-width: 400px;
    width: 90%;
    position: relative;
  `;const t=document.createElement("button");t.innerHTML="×",t.style.cssText=`
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #666;
  `;const r=document.createElement("h2");r.textContent="Sign in to continue",r.style.cssText=`
    margin: 0 0 1rem 0;
    color: #333;
  `;const i=document.createElement("div");i.id="modal-firebaseui-auth-container",e.appendChild(t),e.appendChild(r),e.appendChild(i),n.appendChild(e),t.addEventListener("click",TD),n.addEventListener("click",a=>{a.target===n&&TD()}),document.body.appendChild(n),Cet()},TD=()=>{const n=document.getElementById("auth-modal");n&&n.remove()},Cet=async()=>{try{const[n,{auth:e},{GoogleAuthProvider:t}]=await Promise.all([nn(()=>Promise.resolve().then(()=>VQe),void 0),nn(()=>Promise.resolve().then(()=>qve),void 0),nn(()=>Promise.resolve().then(()=>Eve),void 0)]),{trackUserLogin:r,trackUserSignup:i}=await nn(async()=>{const{trackUserLogin:l,trackUserSignup:c}=await Promise.resolve().then(()=>nye);return{trackUserLogin:l,trackUserSignup:c}},void 0),a=n.auth.AuthUI.getInstance()||new n.auth.AuthUI(e),o={signInFlow:"popup",signInOptions:[t.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:l=>{var c;return(c=l.additionalUserInfo)!=null&&c.isNewUser?i("google"):r("google"),TD(),!1}}},s=document.getElementById("modal-firebaseui-auth-container");s&&a.start(s,o)}catch(n){console.error("Failed to initialize FirebaseUI in modal:",n),TD()}},fT=()=>{const{user:n,isAuthenticated:e,isInitialized:t}=Ht();if(!t)return{isAuthenticated:!1,shouldShowAuth:!1};const r=e&&!!n;return{isAuthenticated:r,shouldShowAuth:!r}},t2=Object.freeze(Object.defineProperty({__proto__:null,checkAuthenticationStatus:ket,closeAuthModal:TD,createAuthModal:uxe,directGoogleAuth:lxe,showAuthModal:cxe,triggerAuthenticationFlow:yf,useAuthGuard:fT},Symbol.toStringTag,{value:"Module"})),dxe=({className:n="",compactView:e=!1})=>{const t=Gg(),r=Vt(S=>S.isAddingTask),i=Vt(S=>S.editingTaskId),a=Vt(S=>S.showDetailsMenu),o=Vt(S=>S.setIsAddingTask),s=Vt(S=>S.setEditingTaskId),l=Vt(S=>S.setShowDetailsMenu),c=Vt(S=>S.handleMoveCompletedDown),u=Vt(S=>S.handleArchiveCompleted),d=fT(),h=Y.useRef(null),f=Y.useRef(null),m=Y.useRef(null);Y.useEffect(()=>{const S=T=>{!T.target.closest(".details-menu")&&a&&l(!1)};return document.addEventListener("click",S),()=>document.removeEventListener("click",S)},[a,l]),Y.useEffect(()=>{if(r&&m.current&&f.current){const S=f.current,C=m.current.getBoundingClientRect(),k=S.getBoundingClientRect(),A=C.bottom,D=k.bottom;if(A>D){const P=A-D+20;S.scrollBy({top:P,behavior:"smooth"})}}},[r]);const v=()=>{if(!d.isAuthenticated&&d.shouldShowAuth){yf();return}o(!0),s(null)},y=()=>{o(!1),s(null)},w=()=>{t("/projects"),l(!1)};return x.jsxs("div",{className:`h-full flex flex-col ${n}`,children:[x.jsxs("div",{className:"p-4 border-b border-border",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"font-semibold text-text-primary text-left",children:"Tasks In Pomodoro"}),x.jsxs("div",{className:"relative details-menu",children:[x.jsx("button",{onClick:S=>{S.stopPropagation(),l(!a)},className:"p-2 text-text-secondary hover:bg-background-primary rounded-md",children:x.jsx("i",{className:"ri-more-2-fill w-5 h-5"})}),a&&x.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-background-secondary border border-border rounded-lg shadow-lg z-10",children:x.jsxs("div",{className:"py-1",children:[x.jsxs("button",{onClick:c,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-arrow-down-line w-5 h-5 mr-2 flex-shrink-0"}),"Move down completed tasks"]}),x.jsxs("button",{onClick:u,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-archive-line w-5 h-5 mr-2 flex-shrink-0"}),"Archive completed tasks"]}),x.jsxs("button",{onClick:w,className:"w-full px-4 py-2 text-sm text-text-primary hover:bg-background-primary text-left flex items-center whitespace-nowrap",children:[x.jsx("i",{className:"ri-task-line w-5 h-5 mr-2 flex-shrink-0"}),"Task management"]})]})})]})]}),x.jsx(Aet,{})]}),x.jsx("div",{className:`flex-1 overflow-y-auto scrollbar-thin ${e?"compact-view":""}`,ref:f,children:x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"space-y-3",id:"taskList",ref:h,children:[x.jsx(Eet,{}),r&&x.jsx("div",{ref:m,children:x.jsx(Kv,{onCancel:y,status:"pomodoro"})}),!r&&!i&&x.jsx("button",{onClick:v,className:"w-full p-4 border-2 border-dashed border-border rounded-lg text-text-secondary hover:border-text-secondary hover:text-text-primary transition-colors duration-200 text-left",children:"+ Add new task"})]})})})]})},Det=()=>{const{user:n}=Ht(),{tasks:e,projects:t}=Vt(),{syncEnabled:r,syncInProgress:i,syncError:a,pendingTasks:o,errorTasks:s,enableSync:l,disableSync:c,performManualSync:u,initializeSync:d,clearSyncError:h}=iT(),[f,m]=Y.useState(!1),[v,y]=Y.useState([]),[w,S]=Y.useState(!1),T=A=>{const D=new Date().toLocaleTimeString();y(P=>[...P,`[${D}] ${A}`])},C=async()=>{if(!n){T("❌ No user authenticated");return}S(!0),T("🔄 Starting sync test...");try{await d(),T("✅ Sync initialized"),await l(),T("✅ Sync enabled");const A=e.find(D=>D.scheduledDate);if(A){T(`📅 Found scheduled task: ${A.title}`);const D=t.find(P=>P.id===A.projectId);D?(T(`📁 Task project: ${D.name}`),await qd(n.uid).syncTaskToGoogle(A,D),T("✅ Task synced to Google Calendar (simulated)")):T("❌ Project not found for task")}else T("ℹ️ No scheduled tasks found to test with");await u(),T("✅ Manual sync completed"),T("🎉 Sync test completed successfully!")}catch(A){T(`❌ Sync test failed: ${A.message}`)}finally{S(!1)}},k=()=>{y([])};return f?x.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-xl w-96 max-h-96 overflow-hidden",children:[x.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 bg-gray-50",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Vb,{className:"w-4 h-4 text-blue-600"}),x.jsx("h3",{className:"font-semibold text-sm",children:"Sync Debug Panel"})]}),x.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),x.jsxs("div",{className:"p-3 space-y-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx("span",{className:"font-medium",children:"Status:"}),i?x.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[x.jsx(Zp,{className:"w-3 h-3 animate-spin"}),"Syncing..."]}):r?x.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[x.jsx(hg,{className:"w-3 h-3"}),"Enabled"]}):x.jsxs("span",{className:"flex items-center gap-1 text-gray-600",children:[x.jsx(Mye,{className:"w-3 h-3"}),"Disabled"]})]}),x.jsxs("div",{className:"text-sm",children:[x.jsx("span",{className:"font-medium",children:"Tasks:"}),x.jsxs("span",{className:"ml-2",children:[e.filter(A=>A.scheduledDate).length," scheduled,"," ",o.size," pending,"," ",s.size," errors"]})]}),a&&x.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-2 text-sm",children:[x.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[x.jsx(Mv,{className:"w-3 h-3"}),x.jsx("span",{className:"font-medium",children:"Error:"})]}),x.jsx("p",{className:"text-red-700 mt-1",children:a}),x.jsx("button",{onClick:h,className:"mt-1 text-red-600 hover:text-red-800 underline text-xs",children:"Clear"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:C,disabled:w||!n,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:w?x.jsxs(x.Fragment,{children:[x.jsx(Zp,{className:"w-3 h-3 animate-spin"}),"Testing..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Pye,{className:"w-3 h-3"}),"Test Sync"]})}),x.jsxs("button",{onClick:k,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 flex items-center gap-1",children:[x.jsx(FL,{className:"w-3 h-3"}),"Clear Logs"]})]}),x.jsx("div",{className:"bg-gray-50 rounded border max-h-32 overflow-y-auto",children:x.jsx("div",{className:"p-2 text-xs font-mono",children:v.length===0?x.jsx("p",{className:"text-gray-500",children:"No logs yet..."}):v.map((A,D)=>x.jsx("div",{className:"mb-1",children:A},D))})})]})]}):x.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:x.jsx("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors",title:"Open Sync Debug Panel",children:x.jsx(zb,{className:"w-5 h-5"})})})},cae=({children:n,className:e="",rightSidebarContent:t})=>{const{isRightSidebarOpen:r,isLeftSidebarOpen:i,rightSidebarWidth:a,setRightSidebarWidth:o}=dl(),[s,l]=Y.useState(!1),[c,u]=Y.useState(a),d=Y.useRef(null),h=Y.useRef(null),f=ns(),m=()=>f.pathname==="/pomodoro"?x.jsx("div",{className:"p-4 space-y-4",children:x.jsx("div",{className:"bg-background-primary rounded-lg border border-border",children:x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Tasks"}),x.jsx(dxe,{})]})})}):null,v=T=>{T.preventDefault(),l(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},y=T=>{var L;if(!s||!d.current||!h.current)return;const C=(L=d.current.parentElement)==null?void 0:L.getBoundingClientRect();if(!C)return;const k=300,A=280,D=Math.floor(C.width*.5),P=C.width-A;let N=T.clientX-C.left;N<k&&(N=k),N>P&&(N=P);let R=C.width-N-1;R>D&&(R=D,N=C.width-R-1),d.current.style.width=`${N}px`,d.current.style.flex="none",h.current.style.width=`${R}px`,u(R),R<400?h.current.classList.add("compact-view"):h.current.classList.remove("compact-view")},w=()=>{l(!1),document.body.style.cursor="",document.body.style.userSelect="",c!==a&&o(c)};we.useEffect(()=>(s?(window.addEventListener("mousemove",y),window.addEventListener("mouseup",w)):(window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w)}),[s,c]),we.useEffect(()=>{s||u(a)},[a,s]);const S=t||m();return x.jsxs("div",{className:`main-layout-container flex h-screen overflow-hidden bg-background-primary ${f.pathname==="/pomodoro"?"pomodoro-page-container":""} ${e}`,children:[x.jsx(Pw,{className:f.pathname==="/pomodoro"?"pomodoro-sidebar":""}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(A9,{}),x.jsxs("div",{className:"flex-1 flex overflow-hidden relative",style:{zIndex:1},children:[x.jsx("div",{ref:d,className:"flex-1 flex flex-col items-center justify-center p-6 bg-background-primary relative min-w-[300px] overflow-y-auto scrollbar-thin",id:"timerSection",style:!i&&!r?{}:{margin:"0 auto",width:r?"100%":"800px",maxWidth:r?"100%":"800px"},children:x.jsx("div",{className:"w-full h-full overflow-y-auto scrollbar-thin flex flex-col items-center justify-center",children:n||x.jsx(bye,{})})}),r&&x.jsxs("div",{id:"resizeDivider",className:"w-[1px] bg-border/20 cursor-col-resize hover:bg-primary/20 flex items-center justify-center group",onMouseDown:v,children:[x.jsx("div",{className:"w-4 h-full opacity-0"}),x.jsx(ni,{text:"Hide task list (Cmd + \\)",placement:"bottom",offset:32,children:x.jsx("button",{className:"absolute w-6 h-12 bg-background-secondary border border-border rounded-l-md flex items-center justify-center shadow-sm hover:shadow-md -right-0 top-1/2 transform -translate-y-1/2 transition-all duration-200 hover:bg-background-primary group-hover:border-primary/30 sidebar-edge-toggle",onClick:T=>{T.stopPropagation(),dl.getState().toggleRightSidebar()},"aria-label":"Hide task list (Cmd + \\)",children:x.jsx("div",{className:"flex items-center justify-center",children:x.jsx(mt,{name:"arrow-right-s-line",size:14,className:"text-gray-500 transition-colors group-hover:text-primary"})})})})]}),r&&x.jsx("div",{ref:h,id:"rightSidebar",className:"border-l border-border flex flex-col bg-background-primary min-w-[280px]",style:{width:`${c}px`,flexShrink:0},children:x.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-visible",children:S})}),!r&&x.jsx(ni,{text:"Show task list (Cmd + \\)",placement:"left",offset:24,children:x.jsx("button",{className:"fixed right-0 top-1/2 transform -translate-y-1/2 z-[100] w-6 h-12 bg-background-secondary border border-border border-r-0 rounded-l-md shadow-md hover:shadow-lg transition-all duration-200 hover:bg-background-primary hover:border-primary/30 group sidebar-edge-toggle sidebar-toggle-show",onClick:()=>dl.getState().toggleRightSidebar(),"aria-label":"Show task list (Cmd + \\)",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary group-hover:text-primary transition-colors",children:x.jsx(mt,{name:"arrow-left-s-line",size:14})})})})]})]}),x.jsx(oJe,{}),x.jsx(Det,{})]})};var xB=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],W_={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ED={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Fl=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Au=function(n){return n===!0?1:0};function uae(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var SB=function(n){return n instanceof Array?n:[n]};function Zs(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function Br(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function PP(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function hxe(n,e){if(e(n))return n;if(n.parentNode)return hxe(n.parentNode,e)}function NP(n,e){var t=Br("div","numInputWrapper"),r=Br("input","numInput "+n),i=Br("span","arrowUp"),a=Br("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return t.appendChild(r),t.appendChild(i),t.appendChild(a),t}function bc(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var _B=function(){},n2=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},Iet={D:_B,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Au(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:_B,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:_B,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Pb={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Qk={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Qk.w(n,e,t)]},F:function(n,e,t){return n2(Qk.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Fl(Qk.h(n,e,t))},H:function(n){return Fl(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Au(n.getHours()>11)]},M:function(n,e){return n2(n.getMonth(),!0,e)},S:function(n){return Fl(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Fl(n.getFullYear(),4)},d:function(n){return Fl(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Fl(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Fl(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},fxe=function(n){var e=n.config,t=e===void 0?W_:e,r=n.l10n,i=r===void 0?ED:r,a=n.isMobile,o=a===void 0?!1:a;return function(s,l,c){var u=c||i;return t.formatDate!==void 0&&!o?t.formatDate(s,l,u):l.split("").map(function(d,h,f){return Qk[d]&&f[h-1]!=="\\"?Qk[d](s,u,t):d!=="\\"?d:""}).join("")}},C9=function(n){var e=n.config,t=e===void 0?W_:e,r=n.l10n,i=r===void 0?ED:r;return function(a,o,s,l){if(!(a!==0&&!a)){var c=l||i,u,d=a;if(a instanceof Date)u=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)u=new Date(a);else if(typeof a=="string"){var h=o||(t||W_).dateFormat,f=String(a).trim();if(f==="today")u=new Date,s=!0;else if(t&&t.parseDate)u=t.parseDate(a,h);else if(/Z$/.test(f)||/GMT$/.test(f))u=new Date(a);else{for(var m=void 0,v=[],y=0,w=0,S="";y<h.length;y++){var T=h[y],C=T==="\\",k=h[y-1]==="\\"||C;if(Pb[T]&&!k){S+=Pb[T];var A=new RegExp(S).exec(a);A&&(m=!0)&&v[T!=="Y"?"push":"unshift"]({fn:Iet[T],val:A[++w]})}else C||(S+=".")}u=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),v.forEach(function(D){var P=D.fn,N=D.val;return u=P(u,N,c)||u}),u=m?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){t.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&u.setHours(0,0,0,0),u}}};function Sc(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var Met=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},TB=function(n,e,t){return n*3600+e*60+t},Pet=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},Net={DAY:864e5};function EB(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<a&&(t=a),e===i&&t===a&&r<o&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var s=n.maxDate.getHours(),l=n.maxDate.getMinutes();e=Math.min(e,s),e===s&&(t=Math.min(l,t)),e===s&&t===l&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(s){s&&Object.keys(s).forEach(function(l){return n[l]=s[l]})},i=0,a=e;i<a.length;i++){var o=a[i];r(o)}return n});var Es=function(){return Es=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Es.apply(this,arguments)},dae=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Ret=300;function Oet(n,e){var t={config:Es(Es({},W_),ka.defaultConfig),l10n:ED};t.parseDate=C9({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=v,t._setHoursFromDate=h,t._positionCalendar=Yt,t.changeMonth=se,t.changeYear=dt,t.clear=ce,t.close=ee,t.onMouseOver=pe,t._createElement=Br,t.createDay=A,t.destroy=be,t.isEnabled=ve,t.jumpToDate=S,t.updateValue=ze,t.open=We,t.redraw=Fn,t.set=Te,t.setDate=et,t.toggle=Sn;function r(){t.utils={getDaysInMonth:function(ne,oe){return ne===void 0&&(ne=t.currentMonth),oe===void 0&&(oe=t.currentYear),ne===1&&(oe%4===0&&oe%100!==0||oe%400===0)?29:t.l10n.daysInMonth[ne]}}}function i(){t.element=t.input=n,t.isOpen=!1,xt(),pn(),pt(),Je(),r(),t.isMobile||k(),w(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&h(t.config.noCalendar?t.latestSelectedDateObj:void 0),ze(!1)),s();var ne=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&ne&&Yt(),on("onReady")}function a(){var ne;return((ne=t.calendarContainer)===null||ne===void 0?void 0:ne.getRootNode()).activeElement||document.activeElement}function o(ne){return ne.bind(t)}function s(){var ne=t.config;ne.weekNumbers===!1&&ne.showMonths===1||ne.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var oe=(t.days.offsetWidth+1)*ne.showMonths;t.daysContainer.style.width=oe+"px",t.calendarContainer.style.width=oe+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(ne){if(t.selectedDates.length===0){var oe=t.config.minDate===void 0||Sc(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),ge=EB(t.config);oe.setHours(ge.hours,ge.minutes,ge.seconds,oe.getMilliseconds()),t.selectedDates=[oe],t.latestSelectedDateObj=oe}ne!==void 0&&ne.type!=="blur"&&Ue(ne);var ke=t._input.value;d(),ze(),t._input.value!==ke&&t._debouncedChange()}function c(ne,oe){return ne%12+12*Au(oe===t.l10n.amPM[1])}function u(ne){switch(ne%24){case 0:case 12:return 12;default:return ne%12}}function d(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var ne=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,oe=(parseInt(t.minuteElement.value,10)||0)%60,ge=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(ne=c(ne,t.amPM.textContent));var ke=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Sc(t.latestSelectedDateObj,t.config.minDate,!0)===0,qe=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Sc(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var nt=TB(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),_t=TB(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),ot=TB(ne,oe,ge);if(ot>_t&&ot<nt){var St=Pet(nt);ne=St[0],oe=St[1],ge=St[2]}}else{if(qe){var bt=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;ne=Math.min(ne,bt.getHours()),ne===bt.getHours()&&(oe=Math.min(oe,bt.getMinutes())),oe===bt.getMinutes()&&(ge=Math.min(ge,bt.getSeconds()))}if(ke){var Gt=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;ne=Math.max(ne,Gt.getHours()),ne===Gt.getHours()&&oe<Gt.getMinutes()&&(oe=Gt.getMinutes()),oe===Gt.getMinutes()&&(ge=Math.max(ge,Gt.getSeconds()))}}f(ne,oe,ge)}}function h(ne){var oe=ne||t.latestSelectedDateObj;oe&&oe instanceof Date&&f(oe.getHours(),oe.getMinutes(),oe.getSeconds())}function f(ne,oe,ge){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(ne%24,oe,ge||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Fl(t.config.time_24hr?ne:(12+ne)%12+12*Au(ne%12===0)),t.minuteElement.value=Fl(oe),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Au(ne>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Fl(ge)))}function m(ne){var oe=bc(ne),ge=parseInt(oe.value)+(ne.delta||0);(ge/1e3>1||ne.key==="Enter"&&!/[^\d]/.test(ge.toString()))&&dt(ge)}function v(ne,oe,ge,ke){if(oe instanceof Array)return oe.forEach(function(qe){return v(ne,qe,ge,ke)});if(ne instanceof Array)return ne.forEach(function(qe){return v(qe,oe,ge,ke)});ne.addEventListener(oe,ge,ke),t._handlers.push({remove:function(){return ne.removeEventListener(oe,ge,ke)}})}function y(){on("onChange")}function w(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(ge){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+ge+"]"),function(ke){return v(ke,"click",t[ge])})}),t.isMobile){vt();return}var ne=uae($e,50);if(t._debouncedChange=uae(y,Ret),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&v(t.daysContainer,"mouseover",function(ge){t.config.mode==="range"&&pe(bc(ge))}),v(t._input,"keydown",xe),t.calendarContainer!==void 0&&v(t.calendarContainer,"keydown",xe),!t.config.inline&&!t.config.static&&v(window,"resize",ne),window.ontouchstart!==void 0?v(window.document,"touchstart",De):v(window.document,"mousedown",De),v(window.document,"focus",De,{capture:!0}),t.config.clickOpens===!0&&(v(t._input,"focus",t.open),v(t._input,"click",t.open)),t.daysContainer!==void 0&&(v(t.monthNav,"click",bn),v(t.monthNav,["keyup","increment"],m),v(t.daysContainer,"click",an)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var oe=function(ge){return bc(ge).select()};v(t.timeContainer,["increment"],l),v(t.timeContainer,"blur",l,{capture:!0}),v(t.timeContainer,"click",T),v([t.hourElement,t.minuteElement],["focus","click"],oe),t.secondElement!==void 0&&v(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&v(t.amPM,"click",function(ge){l(ge)})}t.config.allowInput&&v(t._input,"blur",me)}function S(ne,oe){var ge=ne!==void 0?t.parseDate(ne):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),ke=t.currentYear,qe=t.currentMonth;try{ge!==void 0&&(t.currentYear=ge.getFullYear(),t.currentMonth=ge.getMonth())}catch(nt){nt.message="Invalid date supplied: "+ge,t.config.errorHandler(nt)}oe&&t.currentYear!==ke&&(on("onYearChange"),$()),oe&&(t.currentYear!==ke||t.currentMonth!==qe)&&on("onMonthChange"),t.redraw()}function T(ne){var oe=bc(ne);~oe.className.indexOf("arrow")&&C(ne,oe.classList.contains("arrowUp")?1:-1)}function C(ne,oe,ge){var ke=ne&&bc(ne),qe=ge||ke&&ke.parentNode&&ke.parentNode.firstChild,nt=Jt("increment");nt.delta=oe,qe&&qe.dispatchEvent(nt)}function k(){var ne=window.document.createDocumentFragment();if(t.calendarContainer=Br("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(ne.appendChild(K()),t.innerContainer=Br("div","flatpickr-innerContainer"),t.config.weekNumbers){var oe=z(),ge=oe.weekWrapper,ke=oe.weekNumbers;t.innerContainer.appendChild(ge),t.weekNumbers=ke,t.weekWrapper=ge}t.rContainer=Br("div","flatpickr-rContainer"),t.rContainer.appendChild(te()),t.daysContainer||(t.daysContainer=Br("div","flatpickr-days"),t.daysContainer.tabIndex=-1),B(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),ne.appendChild(t.innerContainer)}t.config.enableTime&&ne.appendChild(X()),Zs(t.calendarContainer,"rangeMode",t.config.mode==="range"),Zs(t.calendarContainer,"animate",t.config.animate===!0),Zs(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(ne);var qe=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!qe&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var nt=Br("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(nt,t.element),nt.appendChild(t.element),t.altInput&&nt.appendChild(t.altInput),nt.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function A(ne,oe,ge,ke){var qe=ve(oe,!0),nt=Br("span",ne,oe.getDate().toString());return nt.dateObj=oe,nt.$i=ke,nt.setAttribute("aria-label",t.formatDate(oe,t.config.ariaDateFormat)),ne.indexOf("hidden")===-1&&Sc(oe,t.now)===0&&(t.todayDateElem=nt,nt.classList.add("today"),nt.setAttribute("aria-current","date")),qe?(nt.tabIndex=-1,Cr(oe)&&(nt.classList.add("selected"),t.selectedDateElem=nt,t.config.mode==="range"&&(Zs(nt,"startRange",t.selectedDates[0]&&Sc(oe,t.selectedDates[0],!0)===0),Zs(nt,"endRange",t.selectedDates[1]&&Sc(oe,t.selectedDates[1],!0)===0),ne==="nextMonthDay"&&nt.classList.add("inRange")))):nt.classList.add("flatpickr-disabled"),t.config.mode==="range"&&hn(oe)&&!Cr(oe)&&nt.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&ne!=="prevMonthDay"&&ke%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(oe)+"</span>"),on("onDayCreate",nt),nt}function D(ne){ne.focus(),t.config.mode==="range"&&pe(ne)}function P(ne){for(var oe=ne>0?0:t.config.showMonths-1,ge=ne>0?t.config.showMonths:-1,ke=oe;ke!=ge;ke+=ne)for(var qe=t.daysContainer.children[ke],nt=ne>0?0:qe.children.length-1,_t=ne>0?qe.children.length:-1,ot=nt;ot!=_t;ot+=ne){var St=qe.children[ot];if(St.className.indexOf("hidden")===-1&&ve(St.dateObj))return St}}function N(ne,oe){for(var ge=ne.className.indexOf("Month")===-1?ne.dateObj.getMonth():t.currentMonth,ke=oe>0?t.config.showMonths:-1,qe=oe>0?1:-1,nt=ge-t.currentMonth;nt!=ke;nt+=qe)for(var _t=t.daysContainer.children[nt],ot=ge-t.currentMonth===nt?ne.$i+oe:oe<0?_t.children.length-1:0,St=_t.children.length,bt=ot;bt>=0&&bt<St&&bt!=(oe>0?St:-1);bt+=qe){var Gt=_t.children[bt];if(Gt.className.indexOf("hidden")===-1&&ve(Gt.dateObj)&&Math.abs(ne.$i-bt)>=Math.abs(oe))return D(Gt)}t.changeMonth(qe),R(P(qe),0)}function R(ne,oe){var ge=a(),ke=de(ge||document.body),qe=ne!==void 0?ne:ke?ge:t.selectedDateElem!==void 0&&de(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&de(t.todayDateElem)?t.todayDateElem:P(oe>0?1:-1);qe===void 0?t._input.focus():ke?N(qe,oe):D(qe)}function L(ne,oe){for(var ge=(new Date(ne,oe,1).getDay()-t.l10n.firstDayOfWeek+7)%7,ke=t.utils.getDaysInMonth((oe-1+12)%12,ne),qe=t.utils.getDaysInMonth(oe,ne),nt=window.document.createDocumentFragment(),_t=t.config.showMonths>1,ot=_t?"prevMonthDay hidden":"prevMonthDay",St=_t?"nextMonthDay hidden":"nextMonthDay",bt=ke+1-ge,Gt=0;bt<=ke;bt++,Gt++)nt.appendChild(A("flatpickr-day "+ot,new Date(ne,oe-1,bt),bt,Gt));for(bt=1;bt<=qe;bt++,Gt++)nt.appendChild(A("flatpickr-day",new Date(ne,oe,bt),bt,Gt));for(var Jn=qe+1;Jn<=42-ge&&(t.config.showMonths===1||Gt%7!==0);Jn++,Gt++)nt.appendChild(A("flatpickr-day "+St,new Date(ne,oe+1,Jn%qe),Jn,Gt));var gi=Br("div","dayContainer");return gi.appendChild(nt),gi}function B(){if(t.daysContainer!==void 0){PP(t.daysContainer),t.weekNumbers&&PP(t.weekNumbers);for(var ne=document.createDocumentFragment(),oe=0;oe<t.config.showMonths;oe++){var ge=new Date(t.currentYear,t.currentMonth,1);ge.setMonth(t.currentMonth+oe),ne.appendChild(L(ge.getFullYear(),ge.getMonth()))}t.daysContainer.appendChild(ne),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&pe()}}function $(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var ne=function(ke){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&ke<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&ke>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var oe=0;oe<12;oe++)if(ne(oe)){var ge=Br("option","flatpickr-monthDropdown-month");ge.value=new Date(t.currentYear,oe).getMonth().toString(),ge.textContent=n2(oe,t.config.shorthandCurrentMonth,t.l10n),ge.tabIndex=-1,t.currentMonth===oe&&(ge.selected=!0),t.monthsDropdownContainer.appendChild(ge)}}}function G(){var ne=Br("div","flatpickr-month"),oe=window.document.createDocumentFragment(),ge;t.config.showMonths>1||t.config.monthSelectorType==="static"?ge=Br("span","cur-month"):(t.monthsDropdownContainer=Br("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),v(t.monthsDropdownContainer,"change",function(_t){var ot=bc(_t),St=parseInt(ot.value,10);t.changeMonth(St-t.currentMonth),on("onMonthChange")}),$(),ge=t.monthsDropdownContainer);var ke=NP("cur-year",{tabindex:"-1"}),qe=ke.getElementsByTagName("input")[0];qe.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&qe.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(qe.setAttribute("max",t.config.maxDate.getFullYear().toString()),qe.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var nt=Br("div","flatpickr-current-month");return nt.appendChild(ge),nt.appendChild(ke),oe.appendChild(nt),ne.appendChild(oe),{container:ne,yearElement:qe,monthElement:ge}}function W(){PP(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var ne=t.config.showMonths;ne--;){var oe=G();t.yearElements.push(oe.yearElement),t.monthElements.push(oe.monthElement),t.monthNav.appendChild(oe.container)}t.monthNav.appendChild(t.nextMonthNav)}function K(){return t.monthNav=Br("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Br("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Br("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,W(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(ne){t.__hidePrevMonthArrow!==ne&&(Zs(t.prevMonthNav,"flatpickr-disabled",ne),t.__hidePrevMonthArrow=ne)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(ne){t.__hideNextMonthArrow!==ne&&(Zs(t.nextMonthNav,"flatpickr-disabled",ne),t.__hideNextMonthArrow=ne)}}),t.currentYearElement=t.yearElements[0],Si(),t.monthNav}function X(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var ne=EB(t.config);t.timeContainer=Br("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var oe=Br("span","flatpickr-time-separator",":"),ge=NP("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=ge.getElementsByTagName("input")[0];var ke=NP("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=ke.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Fl(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?ne.hours:u(ne.hours)),t.minuteElement.value=Fl(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():ne.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(ge),t.timeContainer.appendChild(oe),t.timeContainer.appendChild(ke),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var qe=NP("flatpickr-second");t.secondElement=qe.getElementsByTagName("input")[0],t.secondElement.value=Fl(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():ne.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Br("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(qe)}return t.config.time_24hr||(t.amPM=Br("span","flatpickr-am-pm",t.l10n.amPM[Au((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function te(){t.weekdayContainer?PP(t.weekdayContainer):t.weekdayContainer=Br("div","flatpickr-weekdays");for(var ne=t.config.showMonths;ne--;){var oe=Br("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(oe)}return ie(),t.weekdayContainer}function ie(){if(t.weekdayContainer){var ne=t.l10n.firstDayOfWeek,oe=dae(t.l10n.weekdays.shorthand);ne>0&&ne<oe.length&&(oe=dae(oe.splice(ne,oe.length),oe.splice(0,ne)));for(var ge=t.config.showMonths;ge--;)t.weekdayContainer.children[ge].innerHTML=`
      <span class='flatpickr-weekday'>
        `+oe.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function z(){t.calendarContainer.classList.add("hasWeeks");var ne=Br("div","flatpickr-weekwrapper");ne.appendChild(Br("span","flatpickr-weekday",t.l10n.weekAbbreviation));var oe=Br("div","flatpickr-weeks");return ne.appendChild(oe),{weekWrapper:ne,weekNumbers:oe}}function se(ne,oe){oe===void 0&&(oe=!0);var ge=oe?ne:ne-t.currentMonth;ge<0&&t._hidePrevMonthArrow===!0||ge>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=ge,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,on("onYearChange"),$()),B(),on("onMonthChange"),Si())}function ce(ne,oe){if(ne===void 0&&(ne=!0),oe===void 0&&(oe=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,oe===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var ge=EB(t.config),ke=ge.hours,qe=ge.minutes,nt=ge.seconds;f(ke,qe,nt)}t.redraw(),ne&&on("onChange")}function ee(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),on("onClose")}function be(){t.config!==void 0&&on("onDestroy");for(var ne=t._handlers.length;ne--;)t._handlers[ne].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var oe=t.calendarContainer.parentNode;if(oe.lastChild&&oe.removeChild(oe.lastChild),oe.parentNode){for(;oe.firstChild;)oe.parentNode.insertBefore(oe.firstChild,oe);oe.parentNode.removeChild(oe)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ge){try{delete t[ge]}catch{}})}function fe(ne){return t.calendarContainer.contains(ne)}function De(ne){if(t.isOpen&&!t.config.inline){var oe=bc(ne),ge=fe(oe),ke=oe===t.input||oe===t.altInput||t.element.contains(oe)||ne.path&&ne.path.indexOf&&(~ne.path.indexOf(t.input)||~ne.path.indexOf(t.altInput)),qe=!ke&&!ge&&!fe(ne.relatedTarget),nt=!t.config.ignoredFocusElements.some(function(_t){return _t.contains(oe)});qe&&nt&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function dt(ne){if(!(!ne||t.config.minDate&&ne<t.config.minDate.getFullYear()||t.config.maxDate&&ne>t.config.maxDate.getFullYear())){var oe=ne,ge=t.currentYear!==oe;t.currentYear=oe||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),ge&&(t.redraw(),on("onYearChange"),$())}}function ve(ne,oe){var ge;oe===void 0&&(oe=!0);var ke=t.parseDate(ne,void 0,oe);if(t.config.minDate&&ke&&Sc(ke,t.config.minDate,oe!==void 0?oe:!t.minDateHasTime)<0||t.config.maxDate&&ke&&Sc(ke,t.config.maxDate,oe!==void 0?oe:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(ke===void 0)return!1;for(var qe=!!t.config.enable,nt=(ge=t.config.enable)!==null&&ge!==void 0?ge:t.config.disable,_t=0,ot=void 0;_t<nt.length;_t++){if(ot=nt[_t],typeof ot=="function"&&ot(ke))return qe;if(ot instanceof Date&&ke!==void 0&&ot.getTime()===ke.getTime())return qe;if(typeof ot=="string"){var St=t.parseDate(ot,void 0,!0);return St&&St.getTime()===ke.getTime()?qe:!qe}else if(typeof ot=="object"&&ke!==void 0&&ot.from&&ot.to&&ke.getTime()>=ot.from.getTime()&&ke.getTime()<=ot.to.getTime())return qe}return!qe}function de(ne){return t.daysContainer!==void 0?ne.className.indexOf("hidden")===-1&&ne.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(ne):!1}function me(ne){var oe=ne.target===t._input,ge=t._input.value.trimEnd()!==mo();oe&&ge&&!(ne.relatedTarget&&fe(ne.relatedTarget))&&t.setDate(t._input.value,!0,ne.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function xe(ne){var oe=bc(ne),ge=t.config.wrap?n.contains(oe):oe===t._input,ke=t.config.allowInput,qe=t.isOpen&&(!ke||!ge),nt=t.config.inline&&ge&&!ke;if(ne.keyCode===13&&ge){if(ke)return t.setDate(t._input.value,!0,oe===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),oe.blur();t.open()}else if(fe(oe)||qe||nt){var _t=!!t.timeContainer&&t.timeContainer.contains(oe);switch(ne.keyCode){case 13:_t?(ne.preventDefault(),l(),je()):an(ne);break;case 27:ne.preventDefault(),je();break;case 8:case 46:ge&&!t.config.allowInput&&(ne.preventDefault(),t.clear());break;case 37:case 39:if(!_t&&!ge){ne.preventDefault();var ot=a();if(t.daysContainer!==void 0&&(ke===!1||ot&&de(ot))){var St=ne.keyCode===39?1:-1;ne.ctrlKey?(ne.stopPropagation(),se(St),R(P(1),0)):R(void 0,St)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:ne.preventDefault();var bt=ne.keyCode===40?1:-1;t.daysContainer&&oe.$i!==void 0||oe===t.input||oe===t.altInput?ne.ctrlKey?(ne.stopPropagation(),dt(t.currentYear-bt),R(P(1),0)):_t||R(void 0,bt*7):oe===t.currentYearElement?dt(t.currentYear-bt):t.config.enableTime&&(!_t&&t.hourElement&&t.hourElement.focus(),l(ne),t._debouncedChange());break;case 9:if(_t){var Gt=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(va){return va}),Jn=Gt.indexOf(oe);if(Jn!==-1){var gi=Gt[Jn+(ne.shiftKey?-1:1)];ne.preventDefault(),(gi||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(oe)&&ne.shiftKey&&(ne.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&oe===t.amPM)switch(ne.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],d(),ze();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],d(),ze();break}(ge||fe(oe))&&on("onKeyDown",ne)}function pe(ne,oe){if(oe===void 0&&(oe="flatpickr-day"),!(t.selectedDates.length!==1||ne&&(!ne.classList.contains(oe)||ne.classList.contains("flatpickr-disabled")))){for(var ge=ne?ne.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),ke=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),qe=Math.min(ge,t.selectedDates[0].getTime()),nt=Math.max(ge,t.selectedDates[0].getTime()),_t=!1,ot=0,St=0,bt=qe;bt<nt;bt+=Net.DAY)ve(new Date(bt),!0)||(_t=_t||bt>qe&&bt<nt,bt<ke&&(!ot||bt>ot)?ot=bt:bt>ke&&(!St||bt<St)&&(St=bt));var Gt=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+oe));Gt.forEach(function(Jn){var gi=Jn.dateObj,va=gi.getTime(),rs=ot>0&&va<ot||St>0&&va>St;if(rs){Jn.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(sa){Jn.classList.remove(sa)});return}else if(_t&&!rs)return;["startRange","inRange","endRange","notAllowed"].forEach(function(sa){Jn.classList.remove(sa)}),ne!==void 0&&(ne.classList.add(ge<=t.selectedDates[0].getTime()?"startRange":"endRange"),ke<ge&&va===ke?Jn.classList.add("startRange"):ke>ge&&va===ke&&Jn.classList.add("endRange"),va>=ot&&(St===0||va<=St)&&Met(va,ke,ge)&&Jn.classList.add("inRange"))})}}function $e(){t.isOpen&&!t.config.static&&!t.config.inline&&Yt()}function We(ne,oe){if(oe===void 0&&(oe=t._positionElement),t.isMobile===!0){if(ne){ne.preventDefault();var ge=bc(ne);ge&&ge.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),on("onOpen");return}else if(t._input.disabled||t.config.inline)return;var ke=t.isOpen;t.isOpen=!0,ke||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),on("onOpen"),Yt(oe)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(ne===void 0||!t.timeContainer.contains(ne.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function ct(ne){return function(oe){var ge=t.config["_"+ne+"Date"]=t.parseDate(oe,t.config.dateFormat),ke=t.config["_"+(ne==="min"?"max":"min")+"Date"];ge!==void 0&&(t[ne==="min"?"minDateHasTime":"maxDateHasTime"]=ge.getHours()>0||ge.getMinutes()>0||ge.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(qe){return ve(qe)}),!t.selectedDates.length&&ne==="min"&&h(ge),ze()),t.daysContainer&&(Fn(),ge!==void 0?t.currentYearElement[ne]=ge.getFullYear().toString():t.currentYearElement.removeAttribute(ne),t.currentYearElement.disabled=!!ke&&ge!==void 0&&ke.getFullYear()===ge.getFullYear())}}function xt(){var ne=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],oe=Es(Es({},JSON.parse(JSON.stringify(n.dataset||{}))),e),ge={};t.config.parseDate=oe.parseDate,t.config.formatDate=oe.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Gt){t.config._enable=Ne(Gt)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Gt){t.config._disable=Ne(Gt)}});var ke=oe.mode==="time";if(!oe.dateFormat&&(oe.enableTime||ke)){var qe=ka.defaultConfig.dateFormat||W_.dateFormat;ge.dateFormat=oe.noCalendar||ke?"H:i"+(oe.enableSeconds?":S":""):qe+" H:i"+(oe.enableSeconds?":S":"")}if(oe.altInput&&(oe.enableTime||ke)&&!oe.altFormat){var nt=ka.defaultConfig.altFormat||W_.altFormat;ge.altFormat=oe.noCalendar||ke?"h:i"+(oe.enableSeconds?":S K":" K"):nt+(" h:i"+(oe.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:ct("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:ct("max")});var _t=function(Gt){return function(Jn){t.config[Gt==="min"?"_minTime":"_maxTime"]=t.parseDate(Jn,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:_t("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:_t("max")}),oe.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,ge,oe);for(var ot=0;ot<ne.length;ot++)t.config[ne[ot]]=t.config[ne[ot]]===!0||t.config[ne[ot]]==="true";xB.filter(function(Gt){return t.config[Gt]!==void 0}).forEach(function(Gt){t.config[Gt]=SB(t.config[Gt]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ot=0;ot<t.config.plugins.length;ot++){var St=t.config.plugins[ot](t)||{};for(var bt in St)xB.indexOf(bt)>-1?t.config[bt]=SB(St[bt]).map(o).concat(t.config[bt]):typeof oe[bt]>"u"&&(t.config[bt]=St[bt])}oe.altInputClass||(t.config.altInputClass=At().className+" "+t.config.altInputClass),on("onParseConfig")}function At(){return t.config.wrap?n.querySelector("[data-input]"):n}function pn(){typeof t.config.locale!="object"&&typeof ka.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=Es(Es({},ka.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?ka.l10ns[t.config.locale]:void 0),Pb.D="("+t.l10n.weekdays.shorthand.join("|")+")",Pb.l="("+t.l10n.weekdays.longhand.join("|")+")",Pb.M="("+t.l10n.months.shorthand.join("|")+")",Pb.F="("+t.l10n.months.longhand.join("|")+")",Pb.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var ne=Es(Es({},e),JSON.parse(JSON.stringify(n.dataset||{})));ne.time_24hr===void 0&&ka.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=fxe(t),t.parseDate=C9({config:t.config,l10n:t.l10n})}function Yt(ne){if(typeof t.config.position=="function")return void t.config.position(t,ne);if(t.calendarContainer!==void 0){on("onPreCalendarPosition");var oe=ne||t._positionElement,ge=Array.prototype.reduce.call(t.calendarContainer.children,function(wl,Yf){return wl+Yf.offsetHeight},0),ke=t.calendarContainer.offsetWidth,qe=t.config.position.split(" "),nt=qe[0],_t=qe.length>1?qe[1]:null,ot=oe.getBoundingClientRect(),St=window.innerHeight-ot.bottom,bt=nt==="above"||nt!=="below"&&St<ge&&ot.top>ge,Gt=window.pageYOffset+ot.top+(bt?-ge-2:oe.offsetHeight+2);if(Zs(t.calendarContainer,"arrowTop",!bt),Zs(t.calendarContainer,"arrowBottom",bt),!t.config.inline){var Jn=window.pageXOffset+ot.left,gi=!1,va=!1;_t==="center"?(Jn-=(ke-ot.width)/2,gi=!0):_t==="right"&&(Jn-=ke-ot.width,va=!0),Zs(t.calendarContainer,"arrowLeft",!gi&&!va),Zs(t.calendarContainer,"arrowCenter",gi),Zs(t.calendarContainer,"arrowRight",va);var rs=window.document.body.offsetWidth-(window.pageXOffset+ot.right),sa=Jn+ke>window.document.body.offsetWidth,Xl=rs+ke>window.document.body.offsetWidth;if(Zs(t.calendarContainer,"rightMost",sa),!t.config.static)if(t.calendarContainer.style.top=Gt+"px",!sa)t.calendarContainer.style.left=Jn+"px",t.calendarContainer.style.right="auto";else if(!Xl)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=rs+"px";else{var la=Rn();if(la===void 0)return;var bl=window.document.body.offsetWidth,Ya=Math.max(0,bl/2-ke/2),_i=".flatpickr-calendar.centerMost:before",ph=".flatpickr-calendar.centerMost:after",Zr=la.cssRules.length,Ma="{left:"+ot.left+"px;right:auto;}";Zs(t.calendarContainer,"rightMost",!1),Zs(t.calendarContainer,"centerMost",!0),la.insertRule(_i+","+ph+Ma,Zr),t.calendarContainer.style.left=Ya+"px",t.calendarContainer.style.right="auto"}}}}function Rn(){for(var ne=null,oe=0;oe<document.styleSheets.length;oe++){var ge=document.styleSheets[oe];if(ge.cssRules){try{ge.cssRules}catch{continue}ne=ge;break}}return ne??vn()}function vn(){var ne=document.createElement("style");return document.head.appendChild(ne),ne.sheet}function Fn(){t.config.noCalendar||t.isMobile||($(),Si(),B())}function je(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function an(ne){ne.preventDefault(),ne.stopPropagation();var oe=function(Gt){return Gt.classList&&Gt.classList.contains("flatpickr-day")&&!Gt.classList.contains("flatpickr-disabled")&&!Gt.classList.contains("notAllowed")},ge=hxe(bc(ne),oe);if(ge!==void 0){var ke=ge,qe=t.latestSelectedDateObj=new Date(ke.dateObj.getTime()),nt=(qe.getMonth()<t.currentMonth||qe.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=ke,t.config.mode==="single")t.selectedDates=[qe];else if(t.config.mode==="multiple"){var _t=Cr(qe);_t?t.selectedDates.splice(parseInt(_t),1):t.selectedDates.push(qe)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=qe,t.selectedDates.push(qe),Sc(qe,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Gt,Jn){return Gt.getTime()-Jn.getTime()}));if(d(),nt){var ot=t.currentYear!==qe.getFullYear();t.currentYear=qe.getFullYear(),t.currentMonth=qe.getMonth(),ot&&(on("onYearChange"),$()),on("onMonthChange")}if(Si(),B(),ze(),!nt&&t.config.mode!=="range"&&t.config.showMonths===1?D(ke):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var St=t.config.mode==="single"&&!t.config.enableTime,bt=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(St||bt)&&je()}y()}}var yn={locale:[pn,ie],showMonths:[W,s,te],minDate:[S],maxDate:[S],positionElement:[Kt],clickOpens:[function(){t.config.clickOpens===!0?(v(t._input,"focus",t.open),v(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function Te(ne,oe){if(ne!==null&&typeof ne=="object"){Object.assign(t.config,ne);for(var ge in ne)yn[ge]!==void 0&&yn[ge].forEach(function(ke){return ke()})}else t.config[ne]=oe,yn[ne]!==void 0?yn[ne].forEach(function(ke){return ke()}):xB.indexOf(ne)>-1&&(t.config[ne]=SB(oe));t.redraw(),ze(!0)}function Oe(ne,oe){var ge=[];if(ne instanceof Array)ge=ne.map(function(ke){return t.parseDate(ke,oe)});else if(ne instanceof Date||typeof ne=="number")ge=[t.parseDate(ne,oe)];else if(typeof ne=="string")switch(t.config.mode){case"single":case"time":ge=[t.parseDate(ne,oe)];break;case"multiple":ge=ne.split(t.config.conjunction).map(function(ke){return t.parseDate(ke,oe)});break;case"range":ge=ne.split(t.l10n.rangeSeparator).map(function(ke){return t.parseDate(ke,oe)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(ne)));t.selectedDates=t.config.allowInvalidPreload?ge:ge.filter(function(ke){return ke instanceof Date&&ve(ke,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(ke,qe){return ke.getTime()-qe.getTime()})}function et(ne,oe,ge){if(oe===void 0&&(oe=!1),ge===void 0&&(ge=t.config.dateFormat),ne!==0&&!ne||ne instanceof Array&&ne.length===0)return t.clear(oe);Oe(ne,ge),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),S(void 0,oe),h(),t.selectedDates.length===0&&t.clear(!1),ze(oe),oe&&on("onChange")}function Ne(ne){return ne.slice().map(function(oe){return typeof oe=="string"||typeof oe=="number"||oe instanceof Date?t.parseDate(oe,void 0,!0):oe&&typeof oe=="object"&&oe.from&&oe.to?{from:t.parseDate(oe.from,void 0),to:t.parseDate(oe.to,void 0)}:oe}).filter(function(oe){return oe})}function Je(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var ne=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);ne&&Oe(ne,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function pt(){if(t.input=At(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Br(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Kt()}function Kt(){t._positionElement=t.config.positionElement||t._input}function vt(){var ne=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Br("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=ne,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=ne==="datetime-local"?"Y-m-d\\TH:i:S":ne==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}v(t.mobileInput,"change",function(oe){t.setDate(bc(oe).value,!1,t.mobileFormatStr),on("onChange"),on("onClose")})}function Sn(ne){if(t.isOpen===!0)return t.close();t.open(ne)}function on(ne,oe){if(t.config!==void 0){var ge=t.config[ne];if(ge!==void 0&&ge.length>0)for(var ke=0;ge[ke]&&ke<ge.length;ke++)ge[ke](t.selectedDates,t.input.value,t,oe);ne==="onChange"&&(t.input.dispatchEvent(Jt("change")),t.input.dispatchEvent(Jt("input")))}}function Jt(ne){var oe=document.createEvent("Event");return oe.initEvent(ne,!0,!0),oe}function Cr(ne){for(var oe=0;oe<t.selectedDates.length;oe++){var ge=t.selectedDates[oe];if(ge instanceof Date&&Sc(ge,ne)===0)return""+oe}return!1}function hn(ne){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Sc(ne,t.selectedDates[0])>=0&&Sc(ne,t.selectedDates[1])<=0}function Si(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(ne,oe){var ge=new Date(t.currentYear,t.currentMonth,1);ge.setMonth(t.currentMonth+oe),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[oe].textContent=n2(ge.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=ge.getMonth().toString(),ne.value=ge.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function mo(ne){var oe=ne||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(ge){return t.formatDate(ge,oe)}).filter(function(ge,ke,qe){return t.config.mode!=="range"||t.config.enableTime||qe.indexOf(ge)===ke}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function ze(ne){ne===void 0&&(ne=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=mo(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=mo(t.config.altFormat)),ne!==!1&&on("onValueUpdate")}function bn(ne){var oe=bc(ne),ge=t.prevMonthNav.contains(oe),ke=t.nextMonthNav.contains(oe);ge||ke?se(ge?-1:1):t.yearElements.indexOf(oe)>=0?oe.select():oe.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):oe.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Ue(ne){ne.preventDefault();var oe=ne.type==="keydown",ge=bc(ne),ke=ge;t.amPM!==void 0&&ge===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Au(t.amPM.textContent===t.l10n.amPM[0])]);var qe=parseFloat(ke.getAttribute("min")),nt=parseFloat(ke.getAttribute("max")),_t=parseFloat(ke.getAttribute("step")),ot=parseInt(ke.value,10),St=ne.delta||(oe?ne.which===38?1:-1:0),bt=ot+_t*St;if(typeof ke.value<"u"&&ke.value.length===2){var Gt=ke===t.hourElement,Jn=ke===t.minuteElement;bt<qe?(bt=nt+bt+Au(!Gt)+(Au(Gt)&&Au(!t.amPM)),Jn&&C(void 0,-1,t.hourElement)):bt>nt&&(bt=ke===t.hourElement?bt-nt-Au(!t.amPM):qe,Jn&&C(void 0,1,t.hourElement)),t.amPM&&Gt&&(_t===1?bt+ot===23:Math.abs(bt-ot)>_t)&&(t.amPM.textContent=t.l10n.amPM[Au(t.amPM.textContent===t.l10n.amPM[0])]),ke.value=Fl(bt)}}return i(),t}function q_(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var a=t[i];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=Oet(a,e||{}),r.push(a._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return q_(this,n)},HTMLElement.prototype.flatpickr=function(n){return q_([this],n)});var ka=function(n,e){return typeof n=="string"?q_(window.document.querySelectorAll(n),e):n instanceof Node?q_([n],e):q_(n,e)};ka.defaultConfig={};ka.l10ns={en:Es({},ED),default:Es({},ED)};ka.localize=function(n){ka.l10ns.default=Es(Es({},ka.l10ns.default),n)};ka.setDefaults=function(n){ka.defaultConfig=Es(Es({},ka.defaultConfig),n)};ka.parseDate=C9({});ka.formatDate=fxe({});ka.compareDates=Sc;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return q_(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=ka);const Let=()=>{const n=Gg(),e=ns(),[t,r]=Y.useState(!1),[i,a]=Y.useState(!1),{selectedRange:o,setSelectedRange:s}=yy(),{toggleFocusMode:l,isLeftSidebarOpen:c,toggleLeftSidebar:u}=dl(),d=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null),[m,v]=Y.useState(null),[y,w]=Y.useState(null),[S,T]=Y.useState(!1);Y.useEffect(()=>{const P=N=>{if(d.current&&!d.current.contains(N.target)){if(r(!1),f.current&&f.current.isOpen)return;a(!1)}};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]),Y.useEffect(()=>{if(i&&h.current&&!f.current){T(!0);const P=ka(h.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[m,y].filter(Boolean),onChange:function(N){if(N.length===2)if(Math.ceil((N[1].getTime()-N[0].getTime())/864e5)>365){const L=new Date(N[0]);L.setDate(L.getDate()+364),P.setDate([N[0],L])}else v(N[0]),w(N[1]);else N.length===1&&(v(N[0]),w(null))},onClose:function(){if(S){T(!1);return}}});f.current=P,P.open()}return()=>{!i&&f.current&&(f.current.destroy(),f.current=null)}},[i,S]);const C=P=>P.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),k=P=>{const N=new Date,R=new Date(N.getFullYear(),N.getMonth(),N.getDate()),L=new Date(R);L.setHours(23,59,59,999);const B=new Date(R);B.setHours(0,0,0,0);let $="today";switch(P){case"Today":$="today",s({startDate:B,endDate:L,rangeType:$});break;case"Yesterday":const G=new Date(R);G.setDate(R.getDate()-1);const W=new Date(G);W.setHours(0,0,0,0);const K=new Date(G);K.setHours(23,59,59,999),$="yesterday",s({startDate:W,endDate:K,rangeType:$});break;case"Last 7 Days":const X=new Date(R);X.setDate(R.getDate()-6),X.setHours(0,0,0,0),$="last 7 days",s({startDate:X,endDate:L,rangeType:$});break;case"Last 30 Days":const te=new Date(R);te.setDate(R.getDate()-29),te.setHours(0,0,0,0),$="last 30 days",s({startDate:te,endDate:L,rangeType:$});break;case"Custom Range":a(!0),r(!1);return;default:$="all time",s({startDate:null,endDate:null,rangeType:$})}r(!1)},A=()=>{if(m&&y){const P=new Date;if(P.setHours(23,59,59,999),m>P||y>P){console.warn("Cannot select future dates for productivity analysis");return}const N=new Date(m);N.setHours(0,0,0,0);const R=new Date(y);R.setHours(23,59,59,999),s({startDate:N,endDate:R,rangeType:"custom"}),a(!1),f.current&&(f.current.destroy(),f.current=null)}},D=()=>{switch(o.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return o.startDate&&o.endDate?`${C(o.startDate)} - ${C(o.endDate)}`:"Custom Range";default:return"All time"}};return x.jsxs("div",{className:"dashboard-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-colors duration-200 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!c&&x.jsx("button",{onClick:u,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"menu-line",size:20})})}),x.jsx(yj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Productivity Insights"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"relative",ref:d,children:[x.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{r(!t),i&&(a(!1),f.current&&(f.current.destroy(),f.current=null))},children:[x.jsx("span",{children:D()}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-down-s-line"})})]}),t&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>k("Today"),children:"Today"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>k("Yesterday"),children:"Yesterday"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>k("Last 7 Days"),children:"Last 7 days"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>k("Last 30 Days"),children:"Last 30 days"}),x.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>k("Custom Range"),children:[x.jsx("span",{children:"Time range"}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-calendar-line"})})]}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>k("All time"),children:"All time"})]}),i&&x.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),x.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{a(!1),f.current&&(f.current.destroy(),f.current=null)},children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("i",{className:"ri-close-line"})})})]}),x.jsx("div",{children:x.jsx("input",{ref:h,type:"text",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),x.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[m&&!y?"Select end date":m?"":"Select start date",(!m||!y)&&x.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),x.jsx("div",{className:"mt-4 flex justify-end",children:x.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:A,disabled:!m||!y,children:"Apply"})})]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"brain-line",size:20})})})})]})]})},jet=()=>x.jsxs("div",{className:"dashboard-layout",children:[x.jsx(Pw,{}),x.jsxs("main",{className:"dashboard-main",children:[x.jsx(Let,{}),x.jsx("div",{className:"dashboard-content scrollbar-thin",children:x.jsx("div",{className:"max-w-none mx-auto px-6",children:x.jsx(bye,{})})})]})]}),Fet=({className:n=""})=>{const e=Vt(d=>d.tasks),t=Vt(d=>d.updateTaskStatus),[r,i]=Y.useState([]),a=e.filter(d=>d.status==="pomodoro"),o=e.filter(d=>d.status==="todo"),s=e.filter(d=>d.status==="completed"),l=(d,h)=>{const f=e.find(y=>y.id===d);if(!f)return;const m=f.status;t(d,h);let v="";h==="completed"?v="Task moved to Completed":h==="todo"?v=m==="completed"?"Task moved to To Do List":"Task marked as incomplete":h==="pomodoro"&&(v="Task moved to In Pomodoro"),c(v,d,()=>{t(d,m)})},c=(d,h,f)=>{const m=Date.now().toString();i(v=>[...v,{id:m,message:d,taskId:h,undoAction:f}]),setTimeout(()=>{i(v=>v.filter(y=>y.id!==m))},3e3)},u=d=>{i(h=>h.filter(f=>f.id!==d))};return x.jsxs("div",{className:`grid grid-cols-3 h-full ${n}`,children:[x.jsx(AB,{title:"To Do List",tasks:o,status:"todo",badgeColor:"bg-blue-500",onStatusChange:l}),x.jsx(AB,{title:"In Pomodoro",tasks:a,status:"pomodoro",badgeColor:"bg-red-500",onStatusChange:l}),x.jsx(AB,{title:"Completed",tasks:s,status:"completed",badgeColor:"bg-green-500",onStatusChange:l}),x.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.map(d=>x.jsx(zet,{message:d.message,onClose:()=>u(d.id),onUndo:d.undoAction},d.id))})]})},$et=({task:n,onStatusChange:e,onReorder:t,onCrossColumnMove:r,columnStatus:i})=>{const[a,o]=Y.useState(!1),[s,l]=Y.useState(!1),[c,u]=Y.useState(!1),[d,h]=Y.useState(null),f=Y.useRef(null),m=Vt(B=>B.toggleTaskCompletion),y=Vt(B=>B.projects).find(B=>B.id===n.projectId),w=()=>y?x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:y.color}}):null,S=B=>{B.dataTransfer.setData("text/plain",n.id),B.dataTransfer.setData("application/x-task-status",n.status),f.current&&f.current.classList.add("dragging")},T=()=>{f.current&&f.current.classList.remove("dragging"),u(!1),h(null)},C=B=>{var G;B.preventDefault(),B.stopPropagation();const $=(G=f.current)==null?void 0:G.getBoundingClientRect();if($){const W=B.clientY-$.top,K=$.height,X=W<K/2;h(X?"top":"bottom"),u(!0)}},k=B=>{B.preventDefault(),B.stopPropagation(),u(!0)},A=B=>{var G;B.preventDefault(),B.stopPropagation();const $=(G=f.current)==null?void 0:G.getBoundingClientRect();if($){const W=B.clientX,K=B.clientY;(W<$.left||W>$.right||K<$.top||K>$.bottom)&&(u(!1),h(null))}},D=B=>{B.preventDefault(),B.stopPropagation(),u(!1),h(null);const $=B.dataTransfer.getData("text/plain"),G=B.dataTransfer.getData("application/x-task-status");$&&$!==n.id&&(G===n.status&&t?t($,n.id,d==="bottom"):G!==n.status&&r&&r($,n.id,n.status,d==="bottom"))},P=()=>{const B=i==="todo"?"todo":"default";m(n.id,B)},N=B=>{B.stopPropagation(),o(!0)},R=B=>{B.stopPropagation(),l(!s)},L=()=>{if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}};return a?x.jsx(Kv,{task:n,onCancel:()=>o(!1)}):x.jsxs("div",{className:"relative",children:[c&&d==="top"&&x.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),c&&d==="bottom"&&x.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),x.jsxs("div",{ref:f,className:`task-card flex items-start p-3 border ${L()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${c?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:S,onDragEnd:T,onDragOver:C,onDragEnter:k,onDragLeave:A,onDrop:D,"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(_D,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:P})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[w(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(y==null?void 0:y.name)||"Unknown project"})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),s&&n.description&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:R,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${s?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-primary flex-shrink-0",onClick:N,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})]})},Bet=({title:n,tasks:e,status:t,badgeColor:r,onStatusChange:i})=>{const[a,o]=Y.useState(!1),s=Vt(h=>h.reorderTasks),l=Vt(h=>h.moveTaskToStatusAndPosition),c=fT(),u=(h,f,m=!1)=>{const v=e.find(C=>C.id===h),y=e.find(C=>C.id===f);if(!v||!y||v.status!==y.status)return;const S=Vt.getState().tasks.findIndex(C=>C.id===f),T=m?S+1:S;s(h,T)},d=async(h,f,m,v=!1)=>{const w=Vt.getState().tasks.findIndex(T=>T.id===f),S=v?w+1:w;l(h,m,S)};return x.jsxs("div",{className:"status-section flex flex-col",children:[x.jsx("div",{className:"status-section-header px-4 py-3 border-b border-border sticky top-0 bg-background-primary z-5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:`status-badge ${t==="pomodoro"?"pomodoro-badge":t==="todo"?"todo-badge":t==="completed"?"completed-badge":""}`}),x.jsx("h3",{className:"font-medium text-text-primary",children:n}),x.jsx("span",{className:"ml-2 text-xs font-medium text-text-secondary bg-background-primary px-2 py-0.5 rounded-full",children:e.length})]}),x.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:()=>{if(!c.isAuthenticated&&c.shouldShowAuth){yf();return}o(!0)},children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(mt,{name:"add-line"})})})]})}),x.jsxs("div",{className:"task-list-container py-3 pl-3 pr-3 space-y-2 overflow-y-auto flex-1",children:[a&&x.jsx(Kv,{status:t,onCancel:()=>o(!1)}),e.map(h=>x.jsx($et,{task:h,onStatusChange:i,onReorder:u,onCrossColumnMove:d,columnStatus:t},h.id))]})]})},Uet=({message:n,onClose:e,onUndo:t,duration:r=3e3})=>{const[i,a]=Y.useState(!0),[o,s]=Y.useState(!1);Y.useEffect(()=>{const u=setTimeout(()=>{l()},r);return()=>clearTimeout(u)},[r]);const l=()=>{o||(s(!0),setTimeout(()=>{a(!1),e()},300))},c=()=>{t&&t(),l()};return i?x.jsxs("div",{className:`flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 transform transition-all duration-300 ${o?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,style:{animation:o?"none":"slideIn 0.3s forwards"},children:[x.jsx("div",{className:"flex-1 mr-4",children:x.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&x.jsx("button",{className:"px-3 py-1 text-xs font-medium rounded-lg text-primary hover:bg-primary/10 transition-colors duration-200",onClick:c,children:"Undo"})]}):null},Vet=Fet,AB=Bet,zet=Uet,hae=({task:n,projectId:e,projectColor:t="#4f46e5",isNewTask:r=!1,onCancel:i,onReorder:a,onCrossProjectMove:o})=>{Vt(X=>X.updateTask);const s=Vt(X=>X.toggleTaskCompletion),l=Vt(X=>X.projects),[c,u]=Y.useState(!1),[d,h]=Y.useState(r),[f,m]=Y.useState(!1),[v,y]=Y.useState(!1),[w,S]=Y.useState(null),T=Y.useRef(null),C=n?l.find(X=>X.id===n.projectId):null,k=()=>!n||!C?null:x.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:C.color}}),A=()=>{n&&s(n.id)},D=X=>{X.stopPropagation(),h(!0)},P=X=>{X.stopPropagation(),u(!c)},N=()=>{h(!1),r&&i&&i()},R=()=>{if(!n)return"bg-background-secondary border-border";if(n.completed)return"bg-task-completed-bg border-task-completed-border";switch(n.status){case"todo":return"bg-task-todo-bg border-task-todo-border";case"pomodoro":return"bg-task-pomodoro-bg border-task-pomodoro-border";case"completed":return"bg-task-completed-bg border-task-completed-border";default:return"bg-background-secondary border-border"}},L=X=>{n&&(X.dataTransfer.setData("text/plain",n.id),X.dataTransfer.setData("application/x-task-project",n.projectId),T.current&&T.current.classList.add("dragging"))},B=()=>{T.current&&T.current.classList.remove("dragging"),y(!1),S(null)},$=X=>{var ie;X.preventDefault(),X.stopPropagation();const te=(ie=T.current)==null?void 0:ie.getBoundingClientRect();if(te){const z=X.clientY-te.top,se=te.height,ce=z<se/2;S(ce?"top":"bottom"),y(!0)}},G=X=>{X.preventDefault(),X.stopPropagation(),y(!0)},W=X=>{var ie;X.preventDefault(),X.stopPropagation();const te=(ie=T.current)==null?void 0:ie.getBoundingClientRect();if(te){const z=X.clientX,se=X.clientY;(z<te.left||z>te.right||se<te.top||se>te.bottom)&&(y(!1),S(null))}},K=X=>{X.preventDefault(),X.stopPropagation(),y(!1),S(null);const te=X.dataTransfer.getData("text/plain"),ie=X.dataTransfer.getData("application/x-task-project");te&&te!==(n==null?void 0:n.id)&&n&&(ie===n.projectId&&a?a(te,n.id,w==="bottom"):ie!==n.projectId&&o&&o(te,n.id,n.projectId,w==="bottom"))};return d||r?x.jsx(Kv,{task:n,status:(n==null?void 0:n.status)||"todo",initialProjectId:r?e:void 0,onCancel:N}):n?x.jsxs("div",{className:"relative",children:[v&&w==="top"&&x.jsx("div",{className:"absolute -top-1 left-0 right-0 h-0.5 border-t-2 border-dashed border-red-500 z-10"}),v&&w==="bottom"&&x.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-0.5 border-b-2 border-dashed border-red-500 z-10"}),x.jsxs("div",{ref:T,className:`task-card flex items-start p-3 border ${R()}
        ${n.completed?"opacity-70 text-text-secondary":""}
        ${v?"drag-over":""}
        rounded-md hover:shadow-sm cursor-pointer transition-all duration-200`,draggable:!0,onDragStart:L,onDragEnd:B,onDragOver:$,onDragEnter:G,onDragLeave:W,onDrop:K,"data-task-id":n.id,"data-status":n.status,children:[x.jsx("div",{className:"mr-3 mt-0.5",children:x.jsx(_D,{id:`task-checkbox-${n.id}`,checked:n.completed,onChange:A})}),x.jsx("div",{className:"flex-1 min-w-0 text-left",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1 min-w-0 mr-2",children:[x.jsx("h4",{className:`text-sm font-medium text-left whitespace-pre-wrap break-words
              ${n.completed?"text-text-secondary line-through":"text-text-primary"}`,children:n.title}),x.jsxs("div",{className:"flex items-center mt-0.5 text-xs text-left",children:[x.jsxs("div",{className:"flex items-center",children:[k(),x.jsx("span",{className:`${n.completed,"text-text-secondary"}`,children:(C==null?void 0:C.name)||"Unknown project"})]}),x.jsx("span",{className:"mx-2 text-border",children:"•"}),x.jsxs("span",{className:`flex items-center ${n.completed,"text-text-secondary"}`,children:[x.jsx("i",{className:"ri-time-line mr-1"}),n.timeSpent,"/",n.timeEstimated,"m"]})]}),c&&n.description&&n.description.trim()&&x.jsx("div",{className:"task-description mt-2",children:x.jsx("p",{className:"text-sm text-text-secondary mb-2 whitespace-pre-wrap break-words",children:n.description})})]}),n.description&&n.description.trim()&&x.jsx("button",{className:"expand-button p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:P,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:`ri-arrow-${c?"up":"down"}-s-line`})})})]})}),x.jsx("div",{className:"task-menu ml-4 flex items-start",children:x.jsx("button",{className:"edit-task-btn p-1 rounded-full hover:bg-background-container flex-shrink-0",onClick:D,children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx("i",{className:"ri-edit-line"})})})})]})]}):null},Het=({isOpen:n,onClose:e,currentColor:t,onColorChange:r,onSave:i})=>{const[a,o]=Y.useState(t),[s,l]=Y.useState(!0),c=Y.useRef(null),u=Y.useRef(null),d=k9;Y.useEffect(()=>{o(t),l(!0)},[t]),Y.useEffect(()=>{n&&u.current&&(u.current.focus(),u.current.select())},[n]),Y.useEffect(()=>{if(!n)return;const w=T=>{c.current&&!c.current.contains(T.target)&&e()},S=T=>{T.key==="Escape"&&e()};return document.addEventListener("mousedown",w),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",S)}},[n,e]);const h=_et,f=w=>{o(w);const S=h(w);l(S),S&&r(w)},m=w=>{o(w),l(!0),r(w)},v=()=>{s&&i()},y=w=>{w.key==="Enter"&&s&&v()};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:x.jsxs("div",{ref:c,className:"bg-background-secondary rounded-lg shadow-lg p-6 w-96 max-w-[90vw]",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Change Project Color"}),x.jsx("button",{onClick:e,className:"p-1 rounded-md hover:bg-background-container transition-colors duration-200",children:x.jsx(mt,{name:"close-line",size:20,className:"text-text-secondary"})})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Current Color"}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-md border border-border",style:{backgroundColor:a}}),x.jsx("span",{className:"text-sm font-medium text-text-primary",children:a})]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Hex Color Code"}),x.jsx("input",{ref:u,type:"text",value:a,onChange:w=>f(w.target.value),onKeyPress:y,placeholder:"#BB5F5A",className:`w-full px-3 py-2 border rounded-md text-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary bg-background-primary text-text-primary ${s?"border-border focus:border-primary":"border-red-300 focus:border-red-500 focus:ring-red-500"}`}),!s&&x.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Please enter a valid hex color (e.g., #BB5F5A)"})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary mb-3",children:"Preset Colors"}),x.jsx("div",{className:"grid grid-cols-6 gap-2",children:d.map(w=>x.jsx("button",{onClick:()=>m(w),className:`w-8 h-8 rounded-md border-2 transition-all duration-200 hover:scale-110 ${a===w?"border-text-secondary ring-2 ring-primary ring-offset-1":"border-border hover:border-text-secondary"}`,style:{backgroundColor:w},title:w},w))})]}),x.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[x.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-text-secondary hover:text-text-primary transition-colors duration-200",children:"Cancel"}),x.jsx("button",{onClick:v,disabled:!s,className:`px-4 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${s?"bg-primary text-white hover:bg-primary/90":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:"Save Color"})]})]})}):null},fae=({project:n,isNewProject:e=!1,onCancel:t})=>{const r=Vt(je=>je.tasks),i=Vt(je=>je.addProject),a=Vt(je=>je.deleteProject),o=Vt(je=>je.updateProject),s=Vt(je=>je.updateTask),l=Vt(je=>je.reorderTasks);Vt(je=>je.moveTaskToStatusAndPosition);const c=fT(),[u,d]=Y.useState((n==null?void 0:n.name)||""),[h,f]=Y.useState(()=>{if(!n)return null;const je=localStorage.getItem(`projectFilter_${n.id}`);return je==="pomodoro"||je==="todo"||je==="completed"?je:null}),[m,v]=Y.useState(!1),[y,w]=Y.useState(!1),[S,T]=Y.useState(!1),[C,k]=Y.useState(!1),[A,D]=Y.useState((n==null?void 0:n.color)||"#BB5F5A"),[P,N]=Y.useState(!1),[R,L]=Y.useState((n==null?void 0:n.name)||""),[B,$]=Y.useState(null);we.useEffect(()=>{n&&(h===null?localStorage.removeItem(`projectFilter_${n.id}`):localStorage.setItem(`projectFilter_${n.id}`,h))},[h,n]);const G=(je,an,yn=!1)=>{if(!n)return;const Oe=Vt.getState().tasks.findIndex(Ne=>Ne.id===an),et=yn?Oe+1:Oe;l(je,et)},W=async(je,an,yn,Te=!1)=>{if(!n)return;const Oe=Vt.getState().tasks,et=Oe.findIndex(vt=>vt.id===an),Ne=Te?et+1:et;let Je,pt;if(h)Je=h,pt=h==="completed";else{const vt=Oe.find(Sn=>Sn.id===je);Je=vt==null?void 0:vt.status,pt=vt==null?void 0:vt.completed}if(Oe.find(vt=>vt.id===je)){const vt={projectId:yn,...Je&&{status:Je},...pt!==void 0&&{completed:pt}};await s(je,vt),setTimeout(()=>{l(je,Ne)},50)}};we.useEffect(()=>{n!=null&&n.color&&D(n.color)},[n==null?void 0:n.color]),we.useEffect(()=>{n!=null&&n.name&&L(n.name)},[n==null?void 0:n.name]);const K=n?r.filter(je=>je.projectId===n.id):[],X=K.filter(je=>h===null?!0:h==="pomodoro"?je.status==="pomodoro":h==="todo"?!je.completed&&je.status==="todo":h==="completed"?je.completed:!0).sort((je,an)=>{if(h===null){const yn={todo:1,pomodoro:2,completed:3},Te=je.completed?"completed":je.status,Oe=yn[Te]||4,et=an.completed?"completed":an.status,Ne=yn[et]||4;return Oe-Ne}return 0}),te=K.length,ie=K.filter(je=>je.completed).length,z=te>0?Math.round(ie/te*100):0,se=K.filter(je=>je.status==="pomodoro").length,ce=K.filter(je=>!je.completed&&je.status==="todo").length,ee=K.filter(je=>je.completed).length,be=()=>{if(!c.isAuthenticated&&c.shouldShowAuth){yf();return}u.trim()&&(i({name:u.trim(),color:axe()}),t&&t())},fe=je=>{je.key==="Enter"&&be()},De=()=>{if(!c.isAuthenticated&&c.shouldShowAuth){yf();return}v(!0)},dt=()=>{v(!1)},ve=()=>{w(!y)},de=async()=>{if(!n)return;const an=r.filter(Te=>Te.projectId===n.id).length;let yn=`Are you sure you want to delete the project "${n.name}"?`;if(an>0&&(yn+=`

This will also permanently delete ${an} task${an===1?"":"s"} in this project.`),yn+=`

This action cannot be undone.`,window.confirm(yn))try{await a(n.id),T(!1)}catch(Te){console.error("Failed to delete project:",Te),alert("Failed to delete project. Please try again.")}},me=()=>{D((n==null?void 0:n.color)||"#BB5F5A"),k(!0),T(!1)},xe=je=>{D(je)},pe=async()=>{if(n)try{await o(n.id,{color:A}),console.log(`Project color updated to ${A}`),k(!1)}catch(je){console.error("Error updating project color:",je),alert("Failed to update project color. Please try again.")}},$e=()=>{D((n==null?void 0:n.color)||"#BB5F5A"),k(!1)},We=()=>{L((n==null?void 0:n.name)||""),N(!0),T(!1)},ct=async()=>{if(!n||!R.trim()){L((n==null?void 0:n.name)||""),N(!1);return}try{await o(n.id,{name:R.trim()}),console.log(`Project name updated to ${R.trim()}`),N(!1)}catch(je){console.error("Error updating project name:",je),alert("Failed to update project name. Please try again."),L((n==null?void 0:n.name)||""),N(!1)}},xt=()=>{L((n==null?void 0:n.name)||""),N(!1)},At=je=>{je.key==="Enter"?ct():je.key==="Escape"&&xt()};we.useEffect(()=>{const je=an=>{!an.target.closest(".project-dropdown")&&S&&T(!1)};return document.addEventListener("click",je),()=>document.removeEventListener("click",je)},[S]);const pn=(je,an)=>{je.preventDefault(),je.stopPropagation(),je.dataTransfer.dropEffect="move",B!==an&&$(an)},Yt=je=>{je.preventDefault(),je.stopPropagation(),$(null)},Rn=(je,an)=>{je.preventDefault(),je.stopPropagation(),$(null);const yn=je.dataTransfer.getData("text/plain"),Te=je.dataTransfer.getData("application/x-task-project");if(yn&&n){const et=Vt.getState().tasks.find(Ne=>Ne.id===yn);if(et){const Ne=Te!==n.id?n.id:et.projectId;et.completed&&an!=="completed"?s(yn,{projectId:Ne,status:an,completed:!1}):s(yn,{projectId:Ne,status:an,completed:an==="completed"});const Je=je.currentTarget;Je.classList.add("drop-success"),setTimeout(()=>{Je.classList.remove("drop-success")},500)}}},vn=je=>{je.preventDefault(),je.dataTransfer.dropEffect="move"},Fn=je=>{je.preventDefault();try{const an=JSON.parse(je.dataTransfer.getData("application/json"));an.id&&n&&s(an.id,{projectId:n.id})}catch(an){console.error("Error handling drop on task list:",an)}};return e?x.jsx("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px] animate-fade-in",children:x.jsxs("div",{className:"project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg",children:[x.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:x.jsx(mt,{name:"arrow-down-s-line"})}),x.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border-none focus:ring-2 focus:ring-primary rounded-md px-3 py-1.5",placeholder:"Enter project name",value:u,onChange:je=>d(je.target.value),onKeyPress:fe,autoFocus:!0})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),x.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:x.jsx("div",{className:"h-2 bg-primary rounded-full",style:{width:"0%"}})}),x.jsx("div",{className:"ml-2 text-xs font-medium text-text-primary",children:"0%"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:be,className:"p-1.5 rounded-md bg-primary/10 hover:bg-primary/20 transition-colors duration-200",title:"Save project",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-primary",children:x.jsx(mt,{name:"check-line"})})}),x.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(mt,{name:"close-line"})})})]})]})]})}):n?x.jsxs("div",{className:"project-container bg-background-primary border border-border rounded-lg shadow-sm w-[600px] min-w-[600px]",children:[x.jsxs("div",{className:`project-header flex items-center justify-between px-4 py-3 bg-background-container rounded-t-lg ${P?"cursor-default":"cursor-pointer"}`,onClick:P?void 0:ve,children:[x.jsxs("div",{className:"flex items-center flex-1",children:[x.jsx("div",{className:"w-5 h-5 flex items-center justify-center mr-2 text-text-secondary",children:x.jsx(mt,{name:y?"arrow-right-s-line":"arrow-down-s-line"})}),P?x.jsxs("div",{className:"flex items-center flex-1 mr-4",children:[x.jsx("input",{type:"text",className:"flex-1 font-medium text-text-primary bg-transparent border border-red-300 focus:border-red-500 focus:outline-none rounded-md px-3 py-1.5",value:R,onChange:je=>L(je.target.value),onKeyDown:At,autoFocus:!0}),x.jsx("button",{onClick:ct,className:"p-1.5 ml-2 rounded-md hover:bg-background-container transition-colors duration-200",title:"Save",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-green-600",children:x.jsx(mt,{name:"check-line"})})}),x.jsx("button",{onClick:xt,className:"p-1.5 rounded-md hover:bg-background-container transition-colors duration-200",title:"Cancel",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-text-secondary",children:x.jsx(mt,{name:"close-line"})})})]}):x.jsx("h3",{className:"font-medium text-text-primary",children:n.name})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"text-xs text-text-secondary mr-2",children:"Progress:"}),x.jsx("div",{className:"w-32 h-2 bg-progress-bg rounded-full",children:x.jsx("div",{className:"h-2 rounded-full progress-bar-animation",style:{width:`${z}%`,backgroundColor:n.color||"#BB5F5A"}})}),x.jsxs("div",{className:"ml-2 text-xs font-medium text-text-primary",children:[z,"%"]})]}),x.jsxs("div",{className:"project-menu relative project-dropdown",children:[x.jsx("button",{className:"p-1 rounded-full hover:bg-background-container",onClick:je=>{je.stopPropagation(),T(!S)},children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary",children:x.jsx(mt,{name:"more-2-fill"})})}),S&&x.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-background-secondary border border-border rounded-lg shadow-lg z-10 overflow-hidden",children:x.jsxs("div",{className:"py-1 px-2",children:[x.jsxs("button",{onClick:je=>{je.stopPropagation(),me()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(mt,{name:"palette-line",size:16,className:"mr-2"}),"Update color"]}),x.jsxs("button",{onClick:je=>{je.stopPropagation(),We()},className:"w-full px-3 py-2 text-sm text-text-primary hover:bg-background-container text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(mt,{name:"edit-line",size:16,className:"mr-2"}),"Edit project name"]}),x.jsxs("button",{onClick:je=>{je.stopPropagation(),de()},className:"w-full px-3 py-2 text-sm text-red-600 hover:bg-red-500/10 text-left flex items-center transition-colors duration-200 rounded-md",children:[x.jsx(mt,{name:"delete-bin-line",size:16,className:"mr-2"}),"Delete project"]})]})})]})]})]}),!y&&x.jsxs("div",{className:"project-tasks px-4 py-2",children:[x.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[x.jsxs("div",{className:"flex items-center space-x-3 task-filters",children:[x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${h==="todo"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${B==="todo"?"drag-over":""}`,onClick:()=>f(h==="todo"?null:"todo"),onDragOver:je=>pn(je,"todo"),onDragLeave:Yt,onDrop:je=>Rn(je,"todo"),style:{position:"relative",padding:B==="todo"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(mt,{name:"list-check"})}),"To Do List (",ce,")"]}),x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${h==="pomodoro"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${B==="pomodoro"?"drag-over":""}`,onClick:()=>f(h==="pomodoro"?null:"pomodoro"),onDragOver:je=>pn(je,"pomodoro"),onDragLeave:Yt,onDrop:je=>Rn(je,"pomodoro"),style:{position:"relative",padding:B==="pomodoro"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(mt,{name:"timer-line"})}),"In Pomodoro (",se,")"]}),x.jsxs("button",{className:`inline-flex items-center px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${h==="completed"?"bg-primary/10 text-primary hover:bg-primary/20":"text-text-secondary hover:bg-background-container"} ${B==="completed"?"drag-over":""}`,onClick:()=>f(h==="completed"?null:"completed"),onDragOver:je=>pn(je,"completed"),onDragLeave:Yt,onDrop:je=>Rn(je,"completed"),style:{position:"relative",padding:B==="completed"?"4px 12px":""},children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(mt,{name:"check-line"})}),"Completed (",ee,")"]})]}),x.jsxs("button",{onClick:De,className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md text-primary hover:bg-primary/10 whitespace-nowrap",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1",children:x.jsx(mt,{name:"add-line"})}),"Add Task"]})]}),x.jsxs("div",{className:"task-list py-2 space-y-2",onDragOver:vn,onDrop:Fn,children:[X.map(je=>x.jsx(hae,{task:je,projectColor:n.color,onReorder:G,onCrossProjectMove:W},je.id)),m&&x.jsx(hae,{isNewTask:!0,projectId:n.id,onCancel:dt}),X.length===0&&!m&&x.jsx("div",{className:"p-4 text-center text-text-secondary text-sm italic",onDragOver:vn,onDrop:Fn,children:"No tasks found in this category"})]})]}),x.jsx(Het,{isOpen:C,onClose:$e,currentColor:(n==null?void 0:n.color)||"#BB5F5A",onColorChange:xe,onSave:pe})]}):null},Get=({className:n=""})=>{const e=Vt(c=>c.projects),t=Vt(c=>c.tasks),[r,i]=Y.useState(!1),a=fT(),o=[...e].sort((c,u)=>{const d=t.filter(f=>f.projectId===c.id).length;return t.filter(f=>f.projectId===u.id).length-d}),s=()=>{if(!a.isAuthenticated&&a.shouldShowAuth){yf();return}i(!0)},l=()=>{i(!1)};return x.jsxs("div",{className:`px-6 py-4 flex space-x-6 overflow-x-auto min-h-[calc(100vh-8.5rem)] items-start ${n}`,children:[o.map(c=>x.jsx(fae,{project:c},c.id)),r?x.jsx(fae,{isNewProject:!0,onCancel:l}):x.jsx("div",{className:"flex items-start min-w-[300px]",children:x.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-dashed border-border text-sm font-medium rounded-lg text-text-secondary bg-background-primary hover:bg-background-container whitespace-nowrap h-[120px] w-full justify-center",children:[x.jsx(mt,{name:"add-line",className:"mr-2"}),"Add New Project"]})})]})},Wet=()=>{const n=Gg(),e=ns(),{isLeftSidebarOpen:t,toggleLeftSidebar:r}=dl(),[i,a]=Y.useState(()=>localStorage.getItem("taskManagementViewType")||"status"),[o,s]=Y.useState(!1);Vt(d=>d.projects),Vt(d=>d.tasks),Y.useEffect(()=>{localStorage.setItem("taskManagementViewType",i)},[i]),Y.useEffect(()=>(console.log("ProjectsPage mounted/updated, viewType:",i),()=>{console.log("ProjectsPage unmounting")}),[]),Y.useEffect(()=>{console.log("ViewType changed to:",i)},[i]);const l=d=>{o||d.target.closest("[data-task-id]")},c=()=>{s(!0)},u=()=>{s(!1)};return x.jsxs("div",{className:"projects-content-container h-full flex flex-col bg-background-primary",onClick:l,onDragStart:c,onDragEnd:u,children:[x.jsxs("div",{className:"projects-header h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-all duration-500 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!t&&x.jsx("button",{onClick:r,className:"p-2 mr-2 rounded-md hover:bg-background-secondary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"menu-line",size:20})})}),x.jsx(yj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:"Task Management"})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="status"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("status"),children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:x.jsx(mt,{name:"checkbox-multiple-line"})}),"By Status"]}),x.jsxs("button",{type:"button",className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${i==="project"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,onClick:()=>a("project"),children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-1.5",children:x.jsx(mt,{name:"layout-grid-line"})}),"By Project"]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/pomodoro"?void 0:()=>n("/pomodoro"),"aria-label":e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/projects"?void 0:()=>n("/projects"),"aria-label":e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/dashboard"?void 0:()=>n("/dashboard"),"aria-label":e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/calendar"?void 0:()=>n("/calendar"),"aria-label":e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:e.pathname==="/deep-focus"?void 0:()=>n("/deep-focus"),"aria-label":e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"brain-line",size:20})})})})]})]}),x.jsx("div",{className:"projects-scrollable-content flex-1 overflow-y-auto scrollbar-thin",children:i==="status"?x.jsx(Vet,{}):x.jsx("div",{className:"py-6",children:x.jsx(Get,{})})})]})},qet=({children:n})=>x.jsxs("div",{className:"projects-page-container flex h-screen overflow-hidden",children:[x.jsx(Pw,{}),x.jsx("main",{className:"projects-main-container flex-1 flex flex-col overflow-hidden",children:n})]}),Yet=({message:n,duration:e=3e3,onUndo:t,onClose:r})=>{const[i,a]=Y.useState(!1);if(!n||n.trim()==="")return null;Y.useEffect(()=>{const l=setTimeout(()=>{o()},e);return()=>clearTimeout(l)},[e]);const o=()=>{a(!0),setTimeout(()=>{r&&r()},300)},s=()=>{t&&t(),o()};return x.jsxs("div",{className:`toast fixed bottom-4 right-4 z-50 flex items-center p-4 mb-3 min-w-[300px] bg-white shadow-lg rounded-lg border border-gray-200 ${i?"hiding":""}`,children:[x.jsx("div",{className:"flex-1 mr-4",children:x.jsx("p",{className:"text-sm text-gray-900",children:n})}),t&&x.jsx("button",{className:"undo-button px-3 py-1 text-xs font-medium rounded-md text-primary hover:bg-indigo-50",onClick:s,children:"Undo"})]})},Ket=({className:n=""})=>{const[e,t]=Y.useState([]),r=a=>{const o=Date.now().toString();return t(s=>[...s,{...a,id:o}]),o},i=a=>{t(o=>o.filter(s=>s.id!==a))};return Y.useEffect(()=>(typeof window<"u"&&(window.showToast=r),()=>{typeof window<"u"&&delete window.showToast}),[]),e.length===0?null:x.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:e.map(a=>x.jsx(Yet,{message:a.message,duration:a.duration,onUndo:a.onUndo,onClose:()=>i(a.id)},a.id))})},Xet=()=>{Object.keys(localStorage).filter(t=>t.startsWith("deep-focus-storage-")&&!t.includes("anonymous")).forEach(t=>{try{localStorage.removeItem(t)}catch(r){console.warn("Failed to clear old deep focus storage:",r)}})};let pae=null;const Zet=()=>{const{user:n}=Ht();return Y.useEffect(()=>{const e=async()=>{var i,a;if(!(n!=null&&n.uid)){console.log("🔄 No user authenticated, skipping extension sync");return}const r={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Starting user sync with extension for user:",n.uid);try{if(pae!==n.uid&&(Xet(),pae=n.uid),window.postMessage({type:"SET_USER_ID",payload:r,source:"make10000hours"},"*"),console.log("📤 DEBUG: Sent SET_USER_ID via window.postMessage for user:",n.uid),typeof window.chrome<"u"&&((a=(i=window.chrome)==null?void 0:i.runtime)!=null&&a.sendMessage))try{console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security")}catch(o){console.warn("⚠️ Chrome API sync failed:",o)}else console.log("ℹ️ Chrome extension API not available, using window.postMessage only")}catch(o){console.warn("⚠️ Failed to sync user with extension:",o),console.warn("🔍 DEBUG: User sync error details:",{name:o==null?void 0:o.name,message:o==null?void 0:o.message,userId:n.uid})}};e();const t=setInterval(e,3e4);return()=>{clearInterval(t)}},[n==null?void 0:n.uid,n==null?void 0:n.email,n==null?void 0:n.displayName]),{user:n}},D9="RFC3986",I9={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},Qet="RFC1738",Jet=Array.isArray,ef=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),kB=1024,ett=(n,e,t,r,i)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(s){return"%26%23"+parseInt(s.slice(2),16)+"%3B"});let o="";for(let s=0;s<a.length;s+=kB){const l=a.length>=kB?a.slice(s,s+kB):a,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Qet&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=ef[d];continue}if(d<2048){c[c.length]=ef[192|d>>6]+ef[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=ef[224|d>>12]+ef[128|d>>6&63]+ef[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=ef[240|d>>18]+ef[128|d>>12&63]+ef[128|d>>6&63]+ef[128|d&63]}o+=c.join("")}return o};function ttt(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function gae(n,e){if(Jet(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const ntt=Object.prototype.hasOwnProperty,pxe={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},uf=Array.isArray,rtt=Array.prototype.push,gxe=function(n,e){rtt.apply(n,uf(e)?e:[e])},itt=Date.prototype.toISOString,no={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ett,encodeValuesOnly:!1,format:D9,formatter:I9[D9],indices:!1,serializeDate(n){return itt.call(n)},skipNulls:!1,strictNullHandling:!1};function att(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const CB={};function mxe(n,e,t,r,i,a,o,s,l,c,u,d,h,f,m,v,y,w){let S=n,T=w,C=0,k=!1;for(;(T=T.get(CB))!==void 0&&!k;){const R=T.get(n);if(C+=1,typeof R<"u"){if(R===C)throw new RangeError("Cyclic object value");k=!0}typeof T.get(CB)>"u"&&(C=0)}if(typeof c=="function"?S=c(e,S):S instanceof Date?S=h==null?void 0:h(S):t==="comma"&&uf(S)&&(S=gae(S,function(R){return R instanceof Date?h==null?void 0:h(R):R})),S===null){if(a)return l&&!v?l(e,no.encoder,y,"key",f):e;S=""}if(att(S)||ttt(S)){if(l){const R=v?e:l(e,no.encoder,y,"key",f);return[(m==null?void 0:m(R))+"="+(m==null?void 0:m(l(S,no.encoder,y,"value",f)))]}return[(m==null?void 0:m(e))+"="+(m==null?void 0:m(String(S)))]}const A=[];if(typeof S>"u")return A;let D;if(t==="comma"&&uf(S))v&&l&&(S=gae(S,l)),D=[{value:S.length>0?S.join(",")||null:void 0}];else if(uf(c))D=c;else{const R=Object.keys(S);D=u?R.sort(u):R}const P=s?String(e).replace(/\./g,"%2E"):String(e),N=r&&uf(S)&&S.length===1?P+"[]":P;if(i&&uf(S)&&S.length===0)return N+"[]";for(let R=0;R<D.length;++R){const L=D[R],B=typeof L=="object"&&typeof L.value<"u"?L.value:S[L];if(o&&B===null)continue;const $=d&&s?L.replace(/\./g,"%2E"):L,G=uf(S)?typeof t=="function"?t(N,$):N:N+(d?"."+$:"["+$+"]");w.set(n,C);const W=new WeakMap;W.set(CB,w),gxe(A,mxe(B,G,t,r,i,a,o,s,t==="comma"&&v&&uf(S)?null:l,c,u,d,h,f,m,v,y,W))}return A}function ott(n=no){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||no.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=D9;if(typeof n.format<"u"){if(!ntt.call(I9,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=I9[t];let i=no.filter;(typeof n.filter=="function"||uf(n.filter))&&(i=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in pxe?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=no.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:no.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:no.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:no.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:no.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?no.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:no.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:no.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:no.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:no.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:no.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:no.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:no.strictNullHandling}}function stt(n,e={}){let t=n;const r=ott(e);let i,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):uf(r.filter)&&(a=r.filter,i=a);const o=[];if(typeof t!="object"||t===null)return"";const s=pxe[r.arrayFormat],l=s==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let h=0;h<i.length;++h){const f=i[h];r.skipNulls&&t[f]===null||gxe(o,mxe(t[f],f,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const u=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const y_="4.104.0";let mae=!1,Jk,vxe,yxe,M9,bxe,wxe,xxe,Sxe,_xe;function ltt(n,e={auto:!1}){if(mae)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Jk)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Jk}'\``);mae=e.auto,Jk=n.kind,vxe=n.fetch,yxe=n.FormData,M9=n.File,bxe=n.ReadableStream,wxe=n.getMultipartRequestOptions,xxe=n.getDefaultAgent,Sxe=n.fileFromPath,_xe=n.isFsReadStream}class ctt{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function utt({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,i,a;try{t=fetch,r=Request,i=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:i,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,s)=>({...s,body:new ctt(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}const Txe=()=>{Jk||ltt(utt(),{auto:!0})};Txe();class Tn extends Error{}class Jo extends Tn{constructor(e,t,r,i){super(`${Jo.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new wj({message:r,cause:N9(t)});const a=t==null?void 0:t.error;return e===400?new Exe(e,a,r,i):e===401?new Axe(e,a,r,i):e===403?new kxe(e,a,r,i):e===404?new Cxe(e,a,r,i):e===409?new Dxe(e,a,r,i):e===422?new Ixe(e,a,r,i):e===429?new Mxe(e,a,r,i):e>=500?new Pxe(e,a,r,i):new Jo(e,a,r,i)}}class $u extends Jo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class wj extends Jo{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class YW extends wj{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Exe extends Jo{}class Axe extends Jo{}class kxe extends Jo{}class Cxe extends Jo{}class Dxe extends Jo{}class Ixe extends Jo{}class Mxe extends Jo{}class Pxe extends Jo{}class Nxe extends Tn{constructor(){super("Could not parse response content as the length limit was reached")}}class Rxe extends Tn{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var RP=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},X0=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},_c;class xj{constructor(){_c.set(this,void 0),this.buffer=new Uint8Array,RP(this,_c,null)}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const i=[];let a;for(;(a=dtt(this.buffer,X0(this,_c,"f")))!=null;){if(a.carriage&&X0(this,_c,"f")==null){RP(this,_c,a.index);continue}if(X0(this,_c,"f")!=null&&(a.index!==X0(this,_c,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,X0(this,_c,"f")-1))),this.buffer=this.buffer.slice(X0(this,_c,"f")),RP(this,_c,null);continue}const o=X0(this,_c,"f")!==null?a.preceding-1:a.preceding,s=this.decodeText(this.buffer.slice(0,o));i.push(s),this.buffer=this.buffer.slice(a.index),RP(this,_c,null)}return i}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Tn(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Tn(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Tn("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_c=new WeakMap;xj.NEWLINE_CHARS=new Set([`
`,"\r"]);xj.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dtt(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function htt(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function Oxe(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class bf{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of ftt(e,t))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null||o.event.startsWith("response.")||o.event.startsWith("transcript.")){let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(s&&s.error)throw new Jo(void 0,s.error,void 0,Vxe(e.headers));yield s}else{let s;try{s=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new Jo(void 0,s.error,s.message,void 0);yield{event:o.event,data:s}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new bf(i,t)}static fromReadableStream(e,t){let r=!1;async function*i(){const o=new xj,s=Oxe(e);for await(const l of s)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const s of i())o||s&&(yield JSON.parse(s));o=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{o||t.abort()}}return new bf(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const o=r.next();e.push(o),t.push(o)}return a.shift()}});return[new bf(()=>i(e),this.controller),new bf(()=>i(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new bxe({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await t.next();if(o)return i.close();const s=r.encode(JSON.stringify(a)+`
`);i.enqueue(s)}catch(a){i.error(a)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}}async function*ftt(n,e){if(!n.body)throw e.abort(),new Tn("Attempted to iterate over a response with no body");const t=new gtt,r=new xj,i=Oxe(n.body);for await(const a of ptt(i))for(const o of r.decode(a)){const s=t.decode(o);s&&(yield s)}for(const a of r.flush()){const o=t.decode(a);o&&(yield o)}}async function*ptt(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let a;for(;(a=htt(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class gtt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=mtt(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function mtt(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const Lxe=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",jxe=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Sj(n),Sj=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",vtt=n=>jxe(n)||Lxe(n)||_xe(n);async function Fxe(n,e,t){var i;if(n=await n,jxe(n))return n;if(Lxe(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Sj(a)?[await a.arrayBuffer()]:[a];return new M9(o,e,t)}const r=await ytt(n);if(e||(e=wtt(n)??"unknown_file"),!(t!=null&&t.type)){const a=(i=r[0])==null?void 0:i.type;typeof a=="string"&&(t={...t,type:a})}return new M9(r,e,t)}async function ytt(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(Sj(n))e.push(await n.arrayBuffer());else if(xtt(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${btt(n)}`);return e}function btt(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function wtt(n){var e;return DB(n.name)||DB(n.filename)||((e=DB(n.path))==null?void 0:e.split(/[\\/]/).pop())}const DB=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},xtt=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",vae=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",Nw=async n=>{const e=await Stt(n.body);return wxe(e,n)},Stt=async n=>{const e=new yxe;return await Promise.all(Object.entries(n||{}).map(([t,r])=>P9(e,t,r))),e},P9=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(vtt(t)){const r=await Fxe(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>P9(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,i])=>P9(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var Y_={},_tt=function(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},Ttt=function(n,e,t,r){if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},OP;Txe();async function $xe(n){var o;const{response:e}=n;if(n.options.stream)return Xv("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):bf.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(o=t==null?void 0:t.split(";")[0])==null?void 0:o.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const s=await e.json();return Xv("response",e.status,e.url,e.headers,s),Bxe(s,e)}const a=await e.text();return Xv("response",e.status,e.url,e.headers,a),a}function Bxe(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class _j extends Promise{constructor(e,t=$xe){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new _j(this.responsePromise,async t=>Bxe(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Ett{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:i,fetch:a}){this.baseURL=e,this.maxRetries=IB("maxRetries",t),this.timeout=IB("timeout",r),this.httpAgent=i,this.fetch=a??vxe}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Itt(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Rtt()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async i=>{const a=i&&Sj(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v;const r={...e},{method:i,path:a,query:o,headers:s={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:vae(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,c=this.calculateContentLength(l),u=this.buildURL(a,o);"timeout"in r&&IB("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??xxe(u),h=r.timeout+1e3;typeof((v=d==null?void 0:d.options)==null?void 0:v.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:r,headers:s,contentLength:c,retryCount:t});return{req:{method:i,...l&&{body:l},headers:f,...d&&{agent:d},signal:r.signal??null},url:u,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:i}){const a={};r&&(a["content-length"]=r);const o=this.defaultHeaders(e);return xae(a,o),xae(a,t),vae(e.body)&&Jk!=="node"&&delete a["content-type"],jP(o,"x-stainless-retry-count")===void 0&&jP(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(i)),jP(o,"x-stainless-timeout")===void 0&&jP(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,i){return Jo.generate(e,t,r,i)}request(e,t=null){return new _j(this.makeRequest(e,t))}async makeRequest(e,t){var d,h;const r=await e,i=r.maxRetries??this.maxRetries;t==null&&(t=i),await this.prepareOptions(r);const{req:a,url:o,timeout:s}=this.buildRequest(r,{retryCount:i-t});if(await this.prepareRequest(a,{url:o,options:r}),Xv("request",o,r,a.headers),(d=r.signal)!=null&&d.aborted)throw new $u;const l=new AbortController,c=await this.fetchWithTimeout(o,a,s,l).catch(N9);if(c instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new $u;if(t)return this.retryRequest(r,t);throw c.name==="AbortError"?new YW:new wj({cause:c})}const u=Vxe(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const S=`retrying, ${t} attempts remaining`;return Xv(`response (error; ${S})`,c.status,o,u),this.retryRequest(r,t,u)}const f=await c.text().catch(S=>N9(S).message),m=Mtt(f),v=m?void 0:f;throw Xv(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,u,v),this.makeStatusError(c.status,m,v,u)}return{response:c,options:r,controller:l}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Att(this,r,e)}buildURL(e,t){const r=Ntt(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return zxe(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Tn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,i){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>i.abort());const s=setTimeout(()=>i.abort(),r),l={signal:i.signal,...o};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(s)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let i;const a=r==null?void 0:r["retry-after-ms"];if(a){const s=parseFloat(a);Number.isNaN(s)||(i=s)}const o=r==null?void 0:r["retry-after"];if(o&&!i){const s=parseFloat(o);Number.isNaN(s)?i=Date.parse(o)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){const s=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await UI(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),s=1-Math.random()*.25;return o*s*1e3}getUserAgent(){return`${this.constructor.name}/JS ${y_}`}}class Uxe{constructor(e,t,r,i){OP.set(this,void 0),_tt(this,OP,e),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Tn("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[i,a]of r)e.url.searchParams.set(i,a);t.query=void 0,t.path=e.url.toString()}return await Ttt(this,OP,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(OP=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Att extends _j{constructor(e,t,r){super(t,async i=>new r(e,i.response,await $xe(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Vxe=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),ktt={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},oa=n=>typeof n=="object"&&n!==null&&!zxe(n)&&Object.keys(n).every(e=>Hxe(ktt,e)),Ctt=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":y_,"X-Stainless-OS":bae(Deno.build.os),"X-Stainless-Arch":yae(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":y_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":y_,"X-Stainless-OS":bae(process.platform),"X-Stainless-Arch":yae(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=Dtt();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":y_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":y_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Dtt(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${a}.${o}`}}}return null}const yae=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",bae=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let wae;const Itt=()=>wae??(wae=Ctt()),Mtt=n=>{try{return JSON.parse(n)}catch{return}},Ptt=/^[a-z][a-z0-9+.-]*:/i,Ntt=n=>Ptt.test(n),UI=n=>new Promise(e=>setTimeout(e,n)),IB=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Tn(`${n} must be an integer`);if(e<0)throw new Tn(`${n} must be a positive integer`);return e},N9=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},LP=n=>{var e,t,r,i;if(typeof process<"u")return((e=Y_==null?void 0:Y_[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:i.trim()};function zxe(n){if(!n)return!0;for(const e in n)return!1;return!0}function Hxe(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function xae(n,e){for(const t in e){if(!Hxe(e,t))continue;const r=t.toLowerCase();if(!r)continue;const i=e[t];i===null?delete n[r]:i!==void 0&&(n[r]=i)}}const Sae=new Set(["authorization","api-key"]);function Xv(n,...e){if(typeof process<"u"&&(Y_==null?void 0:Y_.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const o in r.headers)Sae.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let i=null;for(const a in r)Sae.has(a.toLowerCase())&&(i??(i={...r}),i[a]="REDACTED");return i??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const Rtt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),Ott=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Ltt=n=>typeof(n==null?void 0:n.get)=="function",jP=(n,e)=>{var r;const t=e.toLowerCase();if(Ltt(n)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,s)=>o+s.toUpperCase());for(const a of[e,t,e.toUpperCase(),i]){const o=n.get(a);if(o)return o}}for(const[i,a]of Object.entries(n))if(i.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},jtt=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};function MB(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class Tj extends Uxe{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class go extends Uxe{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Dn{constructor(e){this._client=e}}let Gxe=class extends Dn{list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Ftt,{query:t,...r})}},Ej=class extends Dn{constructor(){super(...arguments),this.messages=new Gxe(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/chat/completions",Aj,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Aj extends go{}class Ftt extends go{}Ej.ChatCompletionsPage=Aj;Ej.Messages=Gxe;let kj=class extends Dn{constructor(){super(...arguments),this.completions=new Ej(this._client)}};kj.Completions=Ej;kj.ChatCompletionsPage=Aj;class Wxe extends Dn{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class qxe extends Dn{create(e,t){return this._client.post("/audio/transcriptions",Nw({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Yxe extends Dn{create(e,t){return this._client.post("/audio/translations",Nw({body:e,...t,__metadata:{model:e.model}}))}}class VI extends Dn{constructor(){super(...arguments),this.transcriptions=new qxe(this._client),this.translations=new Yxe(this._client),this.speech=new Wxe(this._client)}}VI.Transcriptions=qxe;VI.Translations=Yxe;VI.Speech=Wxe;class KW extends Dn{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/batches",XW,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class XW extends go{}KW.BatchesPage=XW;var Od=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ea=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},R9,sR,lR,xk,Sk,cR,_k,Xp,Tk,r2,i2,b_,Kxe;class ZW{constructor(){R9.add(this),this.controller=new AbortController,sR.set(this,void 0),lR.set(this,()=>{}),xk.set(this,()=>{}),Sk.set(this,void 0),cR.set(this,()=>{}),_k.set(this,()=>{}),Xp.set(this,{}),Tk.set(this,!1),r2.set(this,!1),i2.set(this,!1),b_.set(this,!1),Od(this,sR,new Promise((e,t)=>{Od(this,lR,e,"f"),Od(this,xk,t,"f")}),"f"),Od(this,Sk,new Promise((e,t)=>{Od(this,cR,e,"f"),Od(this,_k,t,"f")}),"f"),ea(this,sR,"f").catch(()=>{}),ea(this,Sk,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},ea(this,R9,"m",Kxe).bind(this))},0)}_connected(){this.ended||(ea(this,lR,"f").call(this),this._emit("connect"))}get ended(){return ea(this,Tk,"f")}get errored(){return ea(this,r2,"f")}get aborted(){return ea(this,i2,"f")}abort(){this.controller.abort()}on(e,t){return(ea(this,Xp,"f")[e]||(ea(this,Xp,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=ea(this,Xp,"f")[e];if(!r)return this;const i=r.findIndex(a=>a.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(ea(this,Xp,"f")[e]||(ea(this,Xp,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Od(this,b_,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){Od(this,b_,!0,"f"),await ea(this,Sk,"f")}_emit(e,...t){if(ea(this,Tk,"f"))return;e==="end"&&(Od(this,Tk,!0,"f"),ea(this,cR,"f").call(this));const r=ea(this,Xp,"f")[e];if(r&&(ea(this,Xp,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){const i=t[0];!ea(this,b_,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ea(this,xk,"f").call(this,i),ea(this,_k,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=t[0];!ea(this,b_,"f")&&!(r!=null&&r.length)&&Promise.reject(i),ea(this,xk,"f").call(this,i),ea(this,_k,"f").call(this,i),this._emit("end")}}_emitFinal(){}}sR=new WeakMap,lR=new WeakMap,xk=new WeakMap,Sk=new WeakMap,cR=new WeakMap,_k=new WeakMap,Xp=new WeakMap,Tk=new WeakMap,r2=new WeakMap,i2=new WeakMap,b_=new WeakMap,R9=new WeakSet,Kxe=function(e){if(Od(this,r2,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new $u),e instanceof $u)return Od(this,i2,!0,"f"),this._emit("abort",e);if(e instanceof Tn)return this._emit("error",e);if(e instanceof Error){const t=new Tn(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Tn(String(e)))};var tn=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},wc=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Go,O9,df,uR,$d,Yb,D_,Nb,a2,Ac,dR,hR,eC,Ek,Ak,_ae,Tae,Eae,Aae,kae,Cae,Dae;class Zd extends ZW{constructor(){super(...arguments),Go.add(this),O9.set(this,[]),df.set(this,{}),uR.set(this,{}),$d.set(this,void 0),Yb.set(this,void 0),D_.set(this,void 0),Nb.set(this,void 0),a2.set(this,void 0),Ac.set(this,void 0),dR.set(this,void 0),hR.set(this,void 0),eC.set(this,void 0)}[(O9=new WeakMap,df=new WeakMap,uR=new WeakMap,$d=new WeakMap,Yb=new WeakMap,D_=new WeakMap,Nb=new WeakMap,a2=new WeakMap,Ac=new WeakMap,dR=new WeakMap,hR=new WeakMap,eC=new WeakMap,Go=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Zd;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=bf.fromReadableStream(e,this.controller);for await(const o of i)tn(this,Go,"m",Ek).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new $u;return this._addRun(tn(this,Go,"m",Ak).call(this))}toReadableStream(){return new bf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i,a){const o=new Zd;return o._run(()=>o._runToolAssistantStream(e,t,r,i,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,r,i,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...i,stream:!0},l=await e.submitToolOutputs(t,r,s,{...a,signal:this.controller.signal});this._connected();for await(const u of l)tn(this,Go,"m",Ek).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new $u;return this._addRun(tn(this,Go,"m",Ak).call(this))}static createThreadAssistantStream(e,t,r){const i=new Zd;return i._run(()=>i._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,r,i){const a=new Zd;return a._run(()=>a._runAssistantStream(e,t,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return tn(this,dR,"f")}currentRun(){return tn(this,hR,"f")}currentMessageSnapshot(){return tn(this,$d,"f")}currentRunStepSnapshot(){return tn(this,eC,"f")}async finalRunSteps(){return await this.done(),Object.values(tn(this,df,"f"))}async finalMessages(){return await this.done(),Object.values(tn(this,uR,"f"))}async finalRun(){if(await this.done(),!tn(this,Yb,"f"))throw Error("Final run was not received.");return tn(this,Yb,"f")}async _createThreadAssistantStream(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const l of o)tn(this,Go,"m",Ek).call(this,l);if((s=o.controller.signal)!=null&&s.aborted)throw new $u;return this._addRun(tn(this,Go,"m",Ak).call(this))}async _createAssistantStream(e,t,r,i){var l;const a=i==null?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},s=await e.create(t,o,{...i,signal:this.controller.signal});this._connected();for await(const c of s)tn(this,Go,"m",Ek).call(this,c);if((l=s.controller.signal)!=null&&l.aborted)throw new $u;return this._addRun(tn(this,Go,"m",Ak).call(this))}static accumulateDelta(e,t){for(const[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let a=e[r];if(a==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(MB(a)&&MB(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...i);continue}for(const o of i){if(!MB(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const s=o.index;if(s==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof s!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${s}`);const l=a[s];l==null?a.push(o):a[s]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,i){return await this._createAssistantStream(t,e,r,i)}async _runToolAssistantStream(e,t,r,i,a){return await this._createToolAssistantStream(r,e,t,i,a)}}Ek=function(e){if(!this.ended)switch(wc(this,dR,e,"f"),tn(this,Go,"m",Eae).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":tn(this,Go,"m",Dae).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":tn(this,Go,"m",Tae).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":tn(this,Go,"m",_ae).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ak=function(){if(this.ended)throw new Tn("stream has ended, this shouldn't happen");if(!tn(this,Yb,"f"))throw Error("Final run has not been received");return tn(this,Yb,"f")},_ae=function(e){const[t,r]=tn(this,Go,"m",kae).call(this,e,tn(this,$d,"f"));wc(this,$d,t,"f"),tn(this,uR,"f")[t.id]=t;for(const i of r){const a=t.content[i.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,o=t.content[i.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=tn(this,D_,"f")){if(tn(this,Nb,"f"))switch(tn(this,Nb,"f").type){case"text":this._emit("textDone",tn(this,Nb,"f").text,tn(this,$d,"f"));break;case"image_file":this._emit("imageFileDone",tn(this,Nb,"f").image_file,tn(this,$d,"f"));break}wc(this,D_,i.index,"f")}wc(this,Nb,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(tn(this,D_,"f")!==void 0){const i=e.data.content[tn(this,D_,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,tn(this,$d,"f"));break;case"text":this._emit("textDone",i.text,tn(this,$d,"f"));break}}tn(this,$d,"f")&&this._emit("messageDone",e.data),wc(this,$d,void 0,"f")}},Tae=function(e){const t=tn(this,Go,"m",Aae).call(this,e);switch(wc(this,eC,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==tn(this,a2,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(tn(this,Ac,"f")&&this._emit("toolCallDone",tn(this,Ac,"f")),wc(this,a2,a.index,"f"),wc(this,Ac,t.step_details.tool_calls[a.index],"f"),tn(this,Ac,"f")&&this._emit("toolCallCreated",tn(this,Ac,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":wc(this,eC,void 0,"f"),e.data.step_details.type=="tool_calls"&&tn(this,Ac,"f")&&(this._emit("toolCallDone",tn(this,Ac,"f")),wc(this,Ac,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Eae=function(e){tn(this,O9,"f").push(e),this._emit("event",e)},Aae=function(e){switch(e.event){case"thread.run.step.created":return tn(this,df,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=tn(this,df,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=Zd.accumulateDelta(t,r.delta);tn(this,df,"f")[e.data.id]=i}return tn(this,df,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":tn(this,df,"f")[e.data.id]=e.data;break}if(tn(this,df,"f")[e.data.id])return tn(this,df,"f")[e.data.id];throw new Error("No snapshot available")},kae=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=tn(this,Go,"m",Cae).call(this,a,o)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Cae=function(e,t){return Zd.accumulateDelta(t,e)},Dae=function(e){switch(wc(this,hR,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":wc(this,Yb,e.data,"f"),tn(this,Ac,"f")&&(this._emit("toolCallDone",tn(this,Ac,"f")),wc(this,Ac,void 0,"f"));break}};class QW extends Dn{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/assistants",JW,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class JW extends go{}QW.AssistantsPage=JW;function Iae(n){return typeof n.parse=="function"}const K_=n=>(n==null?void 0:n.role)==="assistant",Xxe=n=>(n==null?void 0:n.role)==="function",Zxe=n=>(n==null?void 0:n.role)==="tool";function eq(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function zI(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function $tt(n,e){return!e||!Qxe(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:tq(n,e)}function tq(n,e){const t=n.choices.map(r=>{var i;if(r.finish_reason==="length")throw new Nxe;if(r.finish_reason==="content_filter")throw new Rxe;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(a=>Utt(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Btt(e,r.message.content):null}}});return{...n,choices:t}}function Btt(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Utt(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:zI(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Vtt(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(i=>{var a;return((a=i.function)==null?void 0:a.name)===e.function.name});return zI(t)||(t==null?void 0:t.function.strict)||!1}function Qxe(n){var e;return eq(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>zI(t)||t.type==="function"&&t.function.strict===!0))??!1}function ztt(n){for(const e of n??[]){if(e.type!=="function")throw new Tn(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Tn(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Rl=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ss,L9,o2,j9,F9,$9,Jxe,B9;const Mae=10;class eSe extends ZW{constructor(){super(...arguments),Ss.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Xxe(e)||Zxe(e))&&e.content)this._emit("functionCallResult",e.content);else if(K_(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(K_(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Tn("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Rl(this,Ss,"m",L9).call(this)}async finalMessage(){return await this.done(),Rl(this,Ss,"m",o2).call(this)}async finalFunctionCall(){return await this.done(),Rl(this,Ss,"m",j9).call(this)}async finalFunctionCallResult(){return await this.done(),Rl(this,Ss,"m",F9).call(this)}async totalUsage(){return await this.done(),Rl(this,Ss,"m",$9).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Rl(this,Ss,"m",o2).call(this);t&&this._emit("finalMessage",t);const r=Rl(this,Ss,"m",L9).call(this);r&&this._emit("finalContent",r);const i=Rl(this,Ss,"m",j9).call(this);i&&this._emit("finalFunctionCall",i);const a=Rl(this,Ss,"m",F9).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Rl(this,Ss,"m",$9).call(this))}async _createChatCompletion(e,t,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Rl(this,Ss,"m",Jxe).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(tq(a,t))}async _runChatCompletion(e,t,r){for(const i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var h;const i="function",{function_call:a="auto",stream:o,...s}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=Mae}=r||{},u={};for(const f of t.functions)u[f.name||f.function.name]=f;const d=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const v=(h=(await this._createChatCompletion(e,{...s,function_call:a,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!v)throw new Tn("missing message in ChatCompletion response");if(!v.function_call)return;const{name:y,arguments:w}=v.function_call,S=u[y];if(S){if(l&&l!==y){const A=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:y,content:A});continue}}else{const A=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${d.map(D=>JSON.stringify(D.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:y,content:A});continue}let T;try{T=Iae(S)?await S.parse(w):w}catch(A){this._addMessage({role:i,name:y,content:A instanceof Error?A.message:String(A)});continue}const C=await S.function(T,this),k=Rl(this,Ss,"m",B9).call(this,C);if(this._addMessage({role:i,name:y,content:k}),l)return}}async _runTools(e,t,r){var f,m,v;const i="tool",{tool_choice:a="auto",stream:o,...s}=t,l=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:c=Mae}=r||{},u=t.tools.map(y=>{if(zI(y)){if(!y.$callback)throw new Tn("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(const y of u)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);const h="tools"in t?u.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of t.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const S=(m=(await this._createChatCompletion(e,{...s,tool_choice:a,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!S)throw new Tn("missing message in ChatCompletion response");if(!((v=S.tool_calls)!=null&&v.length))return;for(const T of S.tool_calls){if(T.type!=="function")continue;const C=T.id,{name:k,arguments:A}=T.function,D=d[k];if(D){if(l&&l!==k){const L=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:C,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(d).map(B=>JSON.stringify(B)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:C,content:L});continue}let P;try{P=Iae(D)?await D.parse(A):A}catch(L){const B=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:C,content:B});continue}const N=await D.function(P,this),R=Rl(this,Ss,"m",B9).call(this,N);if(this._addMessage({role:i,tool_call_id:C,content:R}),l)return}}}}Ss=new WeakSet,L9=function(){return Rl(this,Ss,"m",o2).call(this).content??null},o2=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(K_(t)){const{function_call:r,...i}=t,a={...i,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new Tn("stream ended without producing a ChatCompletionMessage with role=assistant")},j9=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(K_(i)&&(i!=null&&i.function_call))return i.function_call;if(K_(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},F9=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Xxe(t)&&t.content!=null||Zxe(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},$9=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Jxe=function(e){if(e.n!=null&&e.n>1)throw new Tn("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},B9=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class AD extends eSe{static runFunctions(e,t,r){const i=new AD,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new AD,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}_addMessage(e,t=!0){super._addMessage(e,t),K_(e)&&e.content&&this._emit("content",e.content)}}const tSe=1,nSe=2,rSe=4,iSe=8,aSe=16,oSe=32,sSe=64,lSe=128,cSe=256,uSe=lSe|cSe,dSe=aSe|oSe|uSe|sSe,hSe=tSe|nSe|dSe,fSe=rSe|iSe,Htt=hSe|fSe,Eo={STR:tSe,NUM:nSe,ARR:rSe,OBJ:iSe,NULL:aSe,BOOL:oSe,NAN:sSe,INFINITY:lSe,MINUS_INFINITY:cSe,INF:uSe,SPECIAL:dSe,ATOM:hSe,COLLECTION:fSe,ALL:Htt};class Gtt extends Error{}class Wtt extends Error{}function qtt(n,e=Eo.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return Ytt(n.trim(),e)}const Ytt=(n,e)=>{const t=n.length;let r=0;const i=h=>{throw new Gtt(`${h} at position ${r}`)},a=h=>{throw new Wtt(`${h} at position ${r}`)},o=()=>(d(),r>=t&&i("Unexpected end of input"),n[r]==='"'?s():n[r]==="{"?l():n[r]==="["?c():n.substring(r,r+4)==="null"||Eo.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||Eo.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||Eo.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||Eo.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||Eo.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||Eo.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):u()),s=()=>{const h=r;let f=!1;for(r++;r<t&&(n[r]!=='"'||f&&n[r-1]==="\\");)f=n[r]==="\\"?!f:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(h,++r-Number(f)))}catch(m){a(String(m))}else if(Eo.STR&e)try{return JSON.parse(n.substring(h,r-Number(f))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const h={};try{for(;n[r]!=="}";){if(d(),r>=t&&Eo.OBJ&e)return h;const f=s();d(),r++;try{const m=o();Object.defineProperty(h,f,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Eo.OBJ&e)return h;throw m}d(),n[r]===","&&r++}}catch{if(Eo.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},c=()=>{r++;const h=[];try{for(;n[r]!=="]";)h.push(o()),d(),n[r]===","&&r++}catch{if(Eo.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},u=()=>{if(r===0){n==="-"&&Eo.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(f){if(Eo.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(f))}}const h=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(Eo.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(h,r))}catch{n.substring(h,r)==="-"&&Eo.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(m){a(String(m))}}},d=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return o()},Pae=n=>qtt(n,Eo.ALL^Eo.NUM);var FS=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},hi=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ja,Wp,$S,hv,PB,FP,NB,RB,OB,$P,LB,Nae;class kD extends eSe{constructor(e){super(),Ja.add(this),Wp.set(this,void 0),$S.set(this,void 0),hv.set(this,void 0),FS(this,Wp,e,"f"),FS(this,$S,[],"f")}get currentChatCompletionSnapshot(){return hi(this,hv,"f")}static fromReadableStream(e){const t=new kD(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const i=new kD(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,r){var o;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),hi(this,Ja,"m",PB).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const s of a)hi(this,Ja,"m",NB).call(this,s);if((o=a.controller.signal)!=null&&o.aborted)throw new $u;return this._addChatCompletion(hi(this,Ja,"m",$P).call(this))}async _fromReadableStream(e,t){var o;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),hi(this,Ja,"m",PB).call(this),this._connected();const i=bf.fromReadableStream(e,this.controller);let a;for await(const s of i)a&&a!==s.id&&this._addChatCompletion(hi(this,Ja,"m",$P).call(this)),hi(this,Ja,"m",NB).call(this,s),a=s.id;if((o=i.controller.signal)!=null&&o.aborted)throw new $u;return this._addChatCompletion(hi(this,Ja,"m",$P).call(this))}[(Wp=new WeakMap,$S=new WeakMap,hv=new WeakMap,Ja=new WeakSet,PB=function(){this.ended||FS(this,hv,void 0,"f")},FP=function(t){let r=hi(this,$S,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},hi(this,$S,"f")[t.index]=r,r)},NB=function(t){var i,a,o,s,l,c,u,d,h,f,m,v,y,w,S;if(this.ended)return;const r=hi(this,Ja,"m",Nae).call(this,t);this._emit("chunk",t,r);for(const T of t.choices){const C=r.choices[T.index];T.delta.content!=null&&((i=C.message)==null?void 0:i.role)==="assistant"&&((a=C.message)!=null&&a.content)&&(this._emit("content",T.delta.content,C.message.content),this._emit("content.delta",{delta:T.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),T.delta.refusal!=null&&((o=C.message)==null?void 0:o.role)==="assistant"&&((s=C.message)!=null&&s.refusal)&&this._emit("refusal.delta",{delta:T.delta.refusal,snapshot:C.message.refusal}),((l=T.logprobs)==null?void 0:l.content)!=null&&((c=C.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=T.logprobs)==null?void 0:u.content,snapshot:((d=C.logprobs)==null?void 0:d.content)??[]}),((h=T.logprobs)==null?void 0:h.refusal)!=null&&((f=C.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(m=T.logprobs)==null?void 0:m.refusal,snapshot:((v=C.logprobs)==null?void 0:v.refusal)??[]});const k=hi(this,Ja,"m",FP).call(this,C);C.finish_reason&&(hi(this,Ja,"m",OB).call(this,C),k.current_tool_call_index!=null&&hi(this,Ja,"m",RB).call(this,C,k.current_tool_call_index));for(const A of T.delta.tool_calls??[])k.current_tool_call_index!==A.index&&(hi(this,Ja,"m",OB).call(this,C),k.current_tool_call_index!=null&&hi(this,Ja,"m",RB).call(this,C,k.current_tool_call_index)),k.current_tool_call_index=A.index;for(const A of T.delta.tool_calls??[]){const D=(y=C.message.tool_calls)==null?void 0:y[A.index];D!=null&&D.type&&((D==null?void 0:D.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(w=D.function)==null?void 0:w.name,index:A.index,arguments:D.function.arguments,parsed_arguments:D.function.parsed_arguments,arguments_delta:((S=A.function)==null?void 0:S.arguments)??""}):(D==null||D.type,void 0))}}},RB=function(t,r){var o,s,l;if(hi(this,Ja,"m",FP).call(this,t).done_tool_calls.has(r))return;const a=(o=t.message.tool_calls)==null?void 0:o[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(s=hi(this,Wp,"f"))==null?void 0:s.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:zI(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},OB=function(t){var i,a;const r=hi(this,Ja,"m",FP).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const o=hi(this,Ja,"m",LB).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},$P=function(){if(this.ended)throw new Tn("stream has ended, this shouldn't happen");const t=hi(this,hv,"f");if(!t)throw new Tn("request ended without sending any chunks");return FS(this,hv,void 0,"f"),FS(this,$S,[],"f"),Ktt(t,hi(this,Wp,"f"))},LB=function(){var r;const t=(r=hi(this,Wp,"f"))==null?void 0:r.response_format;return eq(t)?t:null},Nae=function(t){var r,i,a,o;let s=hi(this,hv,"f");const{choices:l,...c}=t;s?Object.assign(s,c):s=FS(this,hv,{...c,choices:[]},"f");for(const{delta:u,finish_reason:d,index:h,logprobs:f=null,...m}of t.choices){let v=s.choices[h];if(v||(v=s.choices[h]={finish_reason:d,index:h,message:{},logprobs:f,...m}),f)if(!v.logprobs)v.logprobs=Object.assign({},f);else{const{content:A,refusal:D,...P}=f;Object.assign(v.logprobs,P),A&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...A)),D&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...D))}if(d&&(v.finish_reason=d,hi(this,Wp,"f")&&Qxe(hi(this,Wp,"f")))){if(d==="length")throw new Nxe;if(d==="content_filter")throw new Rxe}if(Object.assign(v,m),!u)continue;const{content:y,refusal:w,function_call:S,role:T,tool_calls:C,...k}=u;if(Object.assign(v.message,k),w&&(v.message.refusal=(v.message.refusal||"")+w),T&&(v.message.role=T),S&&(v.message.function_call?(S.name&&(v.message.function_call.name=S.name),S.arguments&&((a=v.message.function_call).arguments??(a.arguments=""),v.message.function_call.arguments+=S.arguments)):v.message.function_call=S),y&&(v.message.content=(v.message.content||"")+y,!v.message.refusal&&hi(this,Ja,"m",LB).call(this)&&(v.message.parsed=Pae(v.message.content))),C){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:A,id:D,type:P,function:N,...R}of C){const L=(o=v.message.tool_calls)[A]??(o[A]={});Object.assign(L,R),D&&(L.id=D),P&&(L.type=P),N&&(L.function??(L.function={name:N.name??"",arguments:""})),N!=null&&N.name&&(L.function.name=N.name),N!=null&&N.arguments&&(L.function.arguments+=N.arguments,Vtt(hi(this,Wp,"f"),L)&&(L.function.parsed_arguments=Pae(L.function.arguments)))}}}return s},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new bf(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Ktt(n,e){const{id:t,choices:r,created:i,model:a,system_fingerprint:o,...s}=n,l={...s,id:t,choices:r.map(({message:c,finish_reason:u,index:d,logprobs:h,...f})=>{if(!u)throw new Tn(`missing finish_reason for choice ${d}`);const{content:m=null,function_call:v,tool_calls:y,...w}=c,S=c.role;if(!S)throw new Tn(`missing role for choice ${d}`);if(v){const{arguments:T,name:C}=v;if(T==null)throw new Tn(`missing function_call.arguments for choice ${d}`);if(!C)throw new Tn(`missing function_call.name for choice ${d}`);return{...f,message:{content:m,function_call:{arguments:T,name:C},role:S,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}return y?{...f,index:d,finish_reason:u,logprobs:h,message:{...w,role:S,content:m,refusal:c.refusal??null,tool_calls:y.map((T,C)=>{const{function:k,type:A,id:D,...P}=T,{arguments:N,name:R,...L}=k||{};if(D==null)throw new Tn(`missing choices[${d}].tool_calls[${C}].id
${BP(n)}`);if(A==null)throw new Tn(`missing choices[${d}].tool_calls[${C}].type
${BP(n)}`);if(R==null)throw new Tn(`missing choices[${d}].tool_calls[${C}].function.name
${BP(n)}`);if(N==null)throw new Tn(`missing choices[${d}].tool_calls[${C}].function.arguments
${BP(n)}`);return{...P,id:D,type:A,function:{...L,name:R,arguments:N}}})}}:{...f,message:{...w,content:m,role:S,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}),created:i,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return $tt(l,e)}function BP(n){return JSON.stringify(n)}class X_ extends kD{static fromReadableStream(e){const t=new X_(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const i=new X_(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,a)),i}static runTools(e,t,r){const i=new X_(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,a)),i}}let pSe=class extends Dn{parse(e,t){return ztt(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>tq(r,e))}runFunctions(e,t){return e.stream?X_.runFunctions(this._client,e,t):AD.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?X_.runTools(this._client,e,t):AD.runTools(this._client,e,t)}stream(e,t){return kD.createChatCompletion(this._client,e,t)}};class U9 extends Dn{constructor(){super(...arguments),this.completions=new pSe(this._client)}}(function(n){n.Completions=pSe})(U9||(U9={}));class gSe extends Dn{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class mSe extends Dn{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Cj extends Dn{constructor(){super(...arguments),this.sessions=new gSe(this._client),this.transcriptionSessions=new mSe(this._client)}}Cj.Sessions=gSe;Cj.TranscriptionSessions=mSe;class nq extends Dn{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,rq,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class rq extends go{}nq.MessagesPage=rq;class iq extends Dn{retrieve(e,t,r,i={},a){return oa(i)?this.retrieve(e,t,r,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:i,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},i){return oa(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,aq,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class aq extends go{}iq.RunStepsPage=aq;let HI=class extends Dn{constructor(){super(...arguments),this.steps=new iq(this._client)}create(e,t,r){const{include:i,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,oq,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}createAndStream(e,t,r){return Zd.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await UI(s);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return Zd.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,i){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,i){const a=await this.submitToolOutputs(e,t,r,i);return await this.poll(e,a.id,i)}submitToolOutputsStream(e,t,r,i){return Zd.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,i)}};class oq extends go{}HI.RunsPage=oq;HI.Steps=iq;HI.RunStepsPage=aq;class pT extends Dn{constructor(){super(...arguments),this.runs=new HI(this._client),this.messages=new nq(this._client)}create(e={},t){return oa(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return Zd.createThreadAssistantStream(e,this._client.beta.threads,t)}}pT.Runs=HI;pT.RunsPage=oq;pT.Messages=nq;pT.MessagesPage=rq;class gT extends Dn{constructor(){super(...arguments),this.realtime=new Cj(this._client),this.chat=new U9(this._client),this.assistants=new QW(this._client),this.threads=new pT(this._client)}}gT.Realtime=Cj;gT.Assistants=QW;gT.AssistantsPage=JW;gT.Threads=pT;class vSe extends Dn{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class ySe extends Dn{retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let Dj=class extends Dn{constructor(){super(...arguments),this.content=new ySe(this._client)}create(e,t,r){return this._client.post(`/containers/${e}/files`,Nw({body:t,...r}))}retrieve(e,t,r){return this._client.get(`/containers/${e}/files/${t}`,r)}list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,sq,{query:t,...r})}del(e,t,r){return this._client.delete(`/containers/${e}/files/${t}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class sq extends go{}Dj.FileListResponsesPage=sq;Dj.Content=ySe;class GI extends Dn{constructor(){super(...arguments),this.files=new Dj(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/containers",lq,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class lq extends go{}GI.ContainerListResponsesPage=lq;GI.Files=Dj;GI.FileListResponsesPage=sq;class bSe extends Dn{create(e,t){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Xv("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return r?a:(Xv("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(o=>(o&&o.data&&o.data.forEach(s=>{const l=s.embedding;s.embedding=jtt(l)}),o)))}}class cq extends Dn{retrieve(e,t,r,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,i)}list(e,t,r={},i){return oa(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,uq,{query:r,...i})}}class uq extends go{}cq.OutputItemListResponsesPage=uq;class WI extends Dn{constructor(){super(...arguments),this.outputItems=new cq(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,dq,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class dq extends go{}WI.RunListResponsesPage=dq;WI.OutputItems=cq;WI.OutputItemListResponsesPage=uq;class qI extends Dn{constructor(){super(...arguments),this.runs=new WI(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/evals",hq,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class hq extends go{}qI.EvalListResponsesPage=hq;qI.Runs=WI;qI.RunListResponsesPage=dq;let fq=class extends Dn{create(e,t){return this._client.post("/files",Nw({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/files",pq,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await UI(t),o=await this.retrieve(e),Date.now()-a>r)throw new YW({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class pq extends go{}fq.FileObjectsPage=pq;class wSe extends Dn{}let xSe=class extends Dn{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class gq extends Dn{constructor(){super(...arguments),this.graders=new xSe(this._client)}}gq.Graders=xSe;class mq extends Dn{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,vq,{body:t,method:"post",...r})}retrieve(e,t={},r){return oa(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class vq extends Tj{}mq.PermissionCreateResponsesPage=vq;let Ij=class extends Dn{constructor(){super(...arguments),this.permissions=new mq(this._client)}};Ij.Permissions=mq;Ij.PermissionCreateResponsesPage=vq;class yq extends Dn{list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,bq,{query:t,...r})}}class bq extends go{}yq.FineTuningJobCheckpointsPage=bq;class mT extends Dn{constructor(){super(...arguments),this.checkpoints=new yq(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",wq,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return oa(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,xq,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class wq extends go{}class xq extends go{}mT.FineTuningJobsPage=wq;mT.FineTuningJobEventsPage=xq;mT.Checkpoints=yq;mT.FineTuningJobCheckpointsPage=bq;class Ey extends Dn{constructor(){super(...arguments),this.methods=new wSe(this._client),this.jobs=new mT(this._client),this.checkpoints=new Ij(this._client),this.alpha=new gq(this._client)}}Ey.Methods=wSe;Ey.Jobs=mT;Ey.FineTuningJobsPage=wq;Ey.FineTuningJobEventsPage=xq;Ey.Checkpoints=Ij;Ey.Alpha=gq;class SSe extends Dn{}class Sq extends Dn{constructor(){super(...arguments),this.graderModels=new SSe(this._client)}}Sq.GraderModels=SSe;class _Se extends Dn{createVariation(e,t){return this._client.post("/images/variations",Nw({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Nw({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class _q extends Dn{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Tq,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Tq extends Tj{}_q.ModelsPage=Tq;class TSe extends Dn{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function Xtt(n,e){return!e||!Qtt(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:ESe(n,e)}function ESe(n,e){const t=n.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:tnt(e,i)};if(i.type==="message"){const a=i.content.map(o=>o.type==="output_text"?{...o,parsed:Ztt(e,o.text)}:o);return{...i,content:a}}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||ASe(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function Ztt(n,e){var t,r,i,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((i=n.text)==null?void 0:i.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function Qtt(n){var e;return!!eq((e=n.text)==null?void 0:e.format)}function Jtt(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function ent(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function tnt(n,e){const t=ent(n.tools??[],e.name);return{...e,...e,parsed_arguments:Jtt(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function ASe(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class kSe extends Dn{list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,rnt,{query:t,...r})}}var BS=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},fv=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},US,UP,pv,VP,Rae,Oae,Lae,jae;class Eq extends ZW{constructor(e){super(),US.add(this),UP.set(this,void 0),pv.set(this,void 0),VP.set(this,void 0),BS(this,UP,e,"f")}static createResponse(e,t,r){const i=new Eq(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,r){var s;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),fv(this,US,"m",Rae).call(this);let a,o=null;"response_id"in t?(a=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const l of a)fv(this,US,"m",Oae).call(this,l,o);if((s=a.controller.signal)!=null&&s.aborted)throw new $u;return fv(this,US,"m",Lae).call(this)}[(UP=new WeakMap,pv=new WeakMap,VP=new WeakMap,US=new WeakSet,Rae=function(){this.ended||BS(this,pv,void 0,"f")},Oae=function(t,r){if(this.ended)return;const i=(o,s)=>{(r==null||s.sequence_number>r)&&this._emit(o,s)},a=fv(this,US,"m",jae).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{const o=a.output[t.output_index];if(!o)throw new Tn(`missing output at index ${t.output_index}`);if(o.type==="message"){const s=o.content[t.content_index];if(!s)throw new Tn(`missing content at index ${t.content_index}`);if(s.type!=="output_text")throw new Tn(`expected content to be 'output_text', got ${s.type}`);i("response.output_text.delta",{...t,snapshot:s.text})}break}case"response.function_call_arguments.delta":{const o=a.output[t.output_index];if(!o)throw new Tn(`missing output at index ${t.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:o.arguments});break}default:i(t.type,t);break}},Lae=function(){if(this.ended)throw new Tn("stream has ended, this shouldn't happen");const t=fv(this,pv,"f");if(!t)throw new Tn("request ended without sending any events");BS(this,pv,void 0,"f");const r=nnt(t,fv(this,UP,"f"));return BS(this,VP,r,"f"),r},jae=function(t){let r=fv(this,pv,"f");if(!r){if(t.type!=="response.created")throw new Tn(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=BS(this,pv,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const i=r.output[t.output_index];if(!i)throw new Tn(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{const i=r.output[t.output_index];if(!i)throw new Tn(`missing output at index ${t.output_index}`);if(i.type==="message"){const a=i.content[t.content_index];if(!a)throw new Tn(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Tn(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const i=r.output[t.output_index];if(!i)throw new Tn(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{BS(this,pv,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",i=>{const a=t.shift();a?a.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(const a of t)a.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=fv(this,VP,"f");if(!e)throw new Tn("stream ended without producing a ChatCompletion");return e}}function nnt(n,e){return Xtt(n,e)}class Aq extends Dn{constructor(){super(...arguments),this.inputItems=new kSe(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&ASe(r),r))}retrieve(e,t={},r){return this._client.get(`/responses/${e}`,{query:t,...r,stream:(t==null?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>ESe(r,e))}stream(e,t){return Eq.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}}class rnt extends go{}Aq.InputItems=kSe;class CSe extends Dn{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,Nw({body:t,...r}))}}class kq extends Dn{constructor(){super(...arguments),this.parts=new CSe(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}kq.Parts=CSe;const int=async n=>{const e=await Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(const i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class Mj extends Dn{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},r){return oa(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Pj,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t,r);return await this.poll(e,i.id,r)}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:i}).withResponse(),o=a.data;switch(o.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await UI(s);break;case"failed":case"completed":return o}}}async upload(e,t,r){const i=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,t,r){const i=await this.upload(e,t,r);return await this.poll(e,i.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,Cq,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Pj extends go{}class Cq extends Tj{}Mj.VectorStoreFilesPage=Pj;Mj.FileContentResponsesPage=Cq;class DSe extends Dn{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const i=await this.create(e,t);return await this.poll(e,i.id,r)}listFiles(e,t,r={},i){return oa(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Pj,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...r,headers:i}).withResponse();switch(a.status){case"in_progress":let s=5e3;if(r!=null&&r.pollIntervalMs)s=r.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(s=c)}}await UI(s);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(i==null?void 0:i.maxConcurrency)??5,o=Math.min(a,t.length),s=this._client,l=t.values(),c=[...r];async function u(h){for(let f of h){const m=await s.files.create({file:f,purpose:"assistants"},i);c.push(m.id)}}const d=Array(o).fill(l).map(u);return await int(d),await this.createAndPoll(e,{file_ids:c})}}class Ay extends Dn{constructor(){super(...arguments),this.files=new Mj(this._client),this.fileBatches=new DSe(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return oa(e)?this.list({},e):this._client.getAPIList("/vector_stores",Dq,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Iq,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Dq extends go{}class Iq extends Tj{}Ay.VectorStoresPage=Dq;Ay.VectorStoreSearchResponsesPage=Iq;Ay.Files=Mj;Ay.VectorStoreFilesPage=Pj;Ay.FileContentResponsesPage=Cq;Ay.FileBatches=DSe;var ISe;class jn extends Ett{constructor({baseURL:e=LP("OPENAI_BASE_URL"),apiKey:t=LP("OPENAI_API_KEY"),organization:r=LP("OPENAI_ORG_ID")??null,project:i=LP("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new Tn("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:r,project:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Ott())throw new Tn(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new vSe(this),this.chat=new kj(this),this.embeddings=new bSe(this),this.files=new fq(this),this.images=new _Se(this),this.audio=new VI(this),this.moderations=new TSe(this),this.models=new _q(this),this.fineTuning=new Ey(this),this.graders=new Sq(this),this.vectorStores=new Ay(this),this.beta=new gT(this),this.batches=new KW(this),this.uploads=new kq(this),this.responses=new Aq(this),this.evals=new qI(this),this.containers=new GI(this),this._options=o,this.apiKey=t,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return stt(e,{arrayFormat:"brackets"})}}ISe=jn;jn.OpenAI=ISe;jn.DEFAULT_TIMEOUT=6e5;jn.OpenAIError=Tn;jn.APIError=Jo;jn.APIConnectionError=wj;jn.APIConnectionTimeoutError=YW;jn.APIUserAbortError=$u;jn.NotFoundError=Cxe;jn.ConflictError=Dxe;jn.RateLimitError=Mxe;jn.BadRequestError=Exe;jn.AuthenticationError=Axe;jn.InternalServerError=Pxe;jn.PermissionDeniedError=kxe;jn.UnprocessableEntityError=Ixe;jn.toFile=Fxe;jn.fileFromPath=Sxe;jn.Completions=vSe;jn.Chat=kj;jn.ChatCompletionsPage=Aj;jn.Embeddings=bSe;jn.Files=fq;jn.FileObjectsPage=pq;jn.Images=_Se;jn.Audio=VI;jn.Moderations=TSe;jn.Models=_q;jn.ModelsPage=Tq;jn.FineTuning=Ey;jn.Graders=Sq;jn.VectorStores=Ay;jn.VectorStoresPage=Dq;jn.VectorStoreSearchResponsesPage=Iq;jn.Beta=gT;jn.Batches=KW;jn.BatchesPage=XW;jn.Uploads=kq;jn.Responses=Aq;jn.Evals=qI;jn.EvalListResponsesPage=hq;jn.Containers=GI;jn.ContainerListResponsesPage=lq;const V9=void 0;let Ld=V9,Ev=null;const z9=n=>new jn({apiKey:n,dangerouslyAllowBrowser:!0});Ld&&(Ev=z9(Ld));const jB="text-embedding-3-small",Fae="gpt-4o-mini",$ae=4e3,FB=1536;class kr{static initialize(e){this.client=new jn({apiKey:e})}static async createChatCompletion(e){var t,r;if(!this.client)throw new Error("OpenAI client not initialized. Call initialize() first.");try{return((r=(t=(await this.client.chat.completions.create({model:"gpt-4",messages:e,temperature:.7,max_tokens:500})).choices[0])==null?void 0:t.message)==null?void 0:r.content)||""}catch(i){throw console.error("Error calling OpenAI:",i),i}}static setApiKey(e){if(!e||!e.startsWith("sk-"))throw new Error("Invalid OpenAI API key format");Ld=e,Ev=z9(e),console.log("✅ OpenAI API key updated successfully")}static getApiKeyStatus(){const e=!!Ld,t=Ld!==V9,r=Ld?`${Ld.substring(0,11)}...${Ld.slice(-4)}`:"No key set";return{hasKey:e,isCustomKey:t,keyPreview:r}}static resetToDefaultKey(){Ld=V9,Ld?(Ev=z9(Ld),console.log("🔄 Reset to default OpenAI API key")):(Ev=null,console.warn("⚠️ No default API key available"))}static async testApiKey(){try{return Ev?(await Ev.embeddings.create({model:jB,input:"test",dimensions:FB}),{success:!0}):{success:!1,error:"No API key configured"}}catch(e){return console.error("API key test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static ensureOpenAI(){if(!Ev)throw new Error("OpenAI not initialized. Please set an API key first.");return Ev}static async generateEmbedding(e){try{return(await this.ensureOpenAI().embeddings.create({model:jB,input:e.content,dimensions:FB})).data[0].embedding}catch(t){throw console.error("Error generating embedding:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate embedding")}}static async batchGenerateEmbeddings(e){try{const t=this.ensureOpenAI(),r=e.map(a=>a.content);return(await t.embeddings.create({model:jB,input:r,dimensions:FB})).data.map(a=>a.embedding)}catch(t){throw console.error("Error generating batch embeddings:",t),(t==null?void 0:t.status)===401?new Error("Invalid OpenAI API key. Please check your API key."):new Error("Failed to generate batch embeddings")}}static async generateChatResponse(e){var a,o,s;const t=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),r=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),i=[{role:"system",content:`You are an AI assistant that provides direct, focused responses.

CURRENT DATE & TIME: ${t} at ${r}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`},...(e.conversationHistory||[]).map(l=>({role:l.role,content:l.content})),{role:"user",content:e.query}];try{const l=this.ensureOpenAI();console.log("OpenAI generateChatResponse called with:",{queryLength:e.query.length,contextLength:e.context.length,hasHistory:!!((a=e.conversationHistory)!=null&&a.length)});const c=2;let u=0,d=null;for(;u<=c;)try{const f=((s=(o=(await l.chat.completions.create({model:Fae,messages:i,max_tokens:$ae,temperature:.7,stream:!1,presence_penalty:.1,frequency_penalty:.1})).choices[0])==null?void 0:o.message)==null?void 0:s.content)||"Sorry, I could not generate a response.";return this.cleanResponse(f)}catch(h){if(d=h,(h==null?void 0:h.status)===429&&(u++,u<=c)){await new Promise(f=>setTimeout(f,1e3*u));continue}throw h}throw d||new Error("Failed to generate response after retries")}catch(l){throw console.error("Error generating chat response:",l),console.error("OpenAI Error details:",{message:l instanceof Error?l.message:"Unknown error",name:l instanceof Error?l.name:void 0,status:l==null?void 0:l.status,type:l==null?void 0:l.type}),(l==null?void 0:l.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error(`Failed to generate chat response: ${l instanceof Error?l.message:"Unknown error"}`)}}static async generateStreamingChatResponse(e,t){var r,i;try{const a=this.ensureOpenAI(),o=new Date,s=o.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l=o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),c=[{role:"system",content:`You are a helpful AI assistant that provides direct, focused answers.

CURRENT DATE & TIME: ${s} at ${l}

CRITICAL FORMATTING REQUIREMENTS:
• Start with emoji header: 🎯 **Key Insights**
• **Bold** project names like **Make10000hours**
• Use \`backticks\` for metrics like \`2h 15m\` or \`66%\`
• Simple hierarchy: **Section** then bullet points
• Max 4 sections, 3 items each
• End with clear action

EXAMPLE:
🎯 **Key Insights**

**Priority Tasks**
• **Make10000hours** project needs \`2h 15m\` more work
• Calendar improvements \`66%\` complete

**Progress**
• \`20 tasks\` completed this week
• Strong productivity momentum

**Next Action**
• Focus on morning sessions

Context: ${e.context}`}];e.conversationHistory&&c.push(...e.conversationHistory),c.push({role:"user",content:e.query});const u=await a.chat.completions.create({model:Fae,messages:c,max_tokens:$ae,temperature:.7,stream:!0});let d="";for await(const h of u){const f=((i=(r=h.choices[0])==null?void 0:r.delta)==null?void 0:i.content)||"";f&&(d+=f,t(f))}d&&this.cleanResponse(d)!==d&&t(`

[Response cleaned]`)}catch(a){throw console.error("Error generating streaming chat response:",a),(a==null?void 0:a.status)===401?new Error("Invalid OpenAI API key. Please check your API key in settings."):new Error("Failed to generate streaming chat response")}}static cleanResponse(e){return e.trim()}static estimateTokens(e){return Math.ceil(e.length/4)}static estimateCost(e,t=!1){return t?e/1e3*2e-5:e/1e3*15e-5}}$t(kr,"client");const ant=()=>{const[n,e]=Y.useState(""),[t,r]=Y.useState(!1),[i,a]=Y.useState(!1),[o,s]=Y.useState(null),[l,c]=Y.useState({hasKey:!1,isCustomKey:!1,keyPreview:"No key set"});Y.useEffect(()=>{const f=kr.getApiKeyStatus();c(f)},[]);const u=async()=>{if(!n||!n.trim()){s({success:!1,error:"Please enter an API key"});return}try{a(!0),s(null),kr.setApiKey(n.trim());const f=await kr.testApiKey();if(s(f),f.success){const m=kr.getApiKeyStatus();c(m),e("")}}catch(f){s({success:!1,error:f instanceof Error?f.message:"Failed to set API key"})}finally{a(!1)}},d=()=>{kr.resetToDefaultKey();const f=kr.getApiKeyStatus();c(f),s(null),e("")},h=async()=>{a(!0),s(null);try{const f=await kr.testApiKey();s(f)}catch(f){s({success:!1,error:f instanceof Error?f.message:"Test failed"})}finally{a(!1)}};return x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx(tQ,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"OpenAI Configuration"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Configure your OpenAI API key for AI assistant functionality"})]})]}),x.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:"Current API Key Status"}),x.jsx("p",{className:"text-sm text-gray-600",children:l.keyPreview}),x.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.hasKey?x.jsx(hg,{className:"w-4 h-4 text-green-500"}):x.jsx(rO,{className:"w-4 h-4 text-red-500"}),x.jsx("span",{className:"text-sm text-gray-600",children:l.hasKey?l.isCustomKey?"Custom key active":"Default key active":"No key configured"})]})]}),l.hasKey&&x.jsxs("button",{onClick:h,disabled:i,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[i?x.jsx(rQ,{className:"w-4 h-4 animate-spin"}):x.jsx(hg,{className:"w-4 h-4"}),x.jsx("span",{children:"Test Key"})]})]})}),o&&x.jsxs("div",{className:`mb-4 p-3 rounded-lg ${o.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[o.success?x.jsx(hg,{className:"w-4 h-4 text-green-600"}):x.jsx(rO,{className:"w-4 h-4 text-red-600"}),x.jsx("span",{className:`text-sm font-medium ${o.success?"text-green-800":"text-red-800"}`,children:o.success?"API key is working correctly!":"API key test failed"})]}),o.error&&x.jsx("p",{className:"text-sm text-red-600 mt-1",children:o.error})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"openai-key",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom OpenAI API Key"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{id:"openai-key",type:t?"text":"password",value:n,onChange:f=>e(f.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-20"}),x.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center space-x-2 pr-3",children:x.jsx("button",{type:"button",onClick:()=>r(!t),className:"text-gray-400 hover:text-gray-600",children:t?x.jsx(r3e,{className:"w-4 h-4"}):x.jsx(a3e,{className:"w-4 h-4"})})})]}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from"," ",x.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"OpenAI Platform"})]})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsxs("button",{onClick:u,disabled:i||!n.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[i?x.jsx(rQ,{className:"w-4 h-4 animate-spin"}):x.jsx(tQ,{className:"w-4 h-4"}),x.jsx("span",{children:"Set & Test Key"})]}),l.isCustomKey&&x.jsx("button",{onClick:d,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Reset to Default"})]})]}),x.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Usage Information"}),x.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[x.jsx("li",{children:"• Used for generating AI responses and embeddings"}),x.jsx("li",{children:"• Estimated cost: ~$0.17 per 1000 interactions"}),x.jsx("li",{children:"• Your API key is stored locally and never shared"}),x.jsx("li",{children:"• Set a custom key to use your own OpenAI credits"})]})]})]})},Mq=()=>{const[n,e]=Y.useState(!1),[t,r]=Y.useState(!0),[i,a]=Y.useState(null),[o,s]=Y.useState(null),[l,c]=Y.useState(0),{user:u}=Ht(),d=Y.useRef(!1);Y.useEffect(()=>{e(!1),a(null),r(!0),s(null),u?h():r(!1)},[u,l]),Y.useEffect(()=>{(async()=>{if(!(u!=null&&u.uid)||!o){if(d.current)try{const{useSyncStore:w}=await nn(async()=>{const{useSyncStore:S}=await Promise.resolve().then(()=>U_);return{useSyncStore:S}},void 0);w.getState().stopWebhookMonitoring(),d.current=!1,console.log("🔕 Stopped Google Calendar monitoring - user/token unavailable")}catch(w){console.warn("⚠️ Error stopping webhook monitoring:",w)}return}try{const{useSyncStore:w}=await nn(async()=>{const{useSyncStore:k}=await Promise.resolve().then(()=>U_);return{useSyncStore:k}},void 0),S=w.getState();if(!S.syncEnabled&&o.syncEnabled&&n){console.log("🔄 Sync store not initialized, initializing now...");try{await S.initializeSync(),console.log("✅ Sync store initialized successfully")}catch(k){console.error("❌ Failed to initialize sync store:",k);return}}const T=w.getState(),C=o.syncEnabled&&T.syncEnabled&&n;C&&!d.current?(console.log("🔔 Starting Google Calendar webhook monitoring for user:",u.uid),S.startWebhookMonitoring(),d.current=!0,console.log("✅ Google Calendar monitoring started (webhook mode)")):!C&&d.current&&(console.log("🔕 Stopping Google Calendar webhook monitoring"),S.stopWebhookMonitoring(),d.current=!1,console.log("✅ Google Calendar monitoring stopped"))}catch(w){console.warn("⚠️ Error managing webhook monitoring:",w)}})()},[u==null?void 0:u.uid,o==null?void 0:o.syncEnabled,n]),Y.useEffect(()=>()=>{d.current&&(nn(async()=>{const{useSyncStore:y}=await Promise.resolve().then(()=>U_);return{useSyncStore:y}},void 0).then(({useSyncStore:y})=>{y.getState().stopWebhookMonitoring()}).catch(console.warn),d.current=!1)},[]);const h=async()=>{r(!0),a(null);try{const y=zl.currentUser;if(!y){e(!1),s(null);return}if(!ro.isConfigured()){console.warn("📅 Google OAuth2 not configured - calendar access unavailable"),e(!1),s(null);return}const w=await ro.hasCalendarAccess(),S=await ro.getStoredToken();e(w),s(S),console.log(w?"✅ Google Calendar access verified for user:":"❌ No valid calendar access found for user:",y.uid)}catch(y){console.error("Error checking calendar access:",y),a(y instanceof Error?y.message:"Failed to check calendar access"),e(!1),s(null)}finally{r(!1)}};return{hasCalendarAccess:n,isCheckingAccess:t,error:i,requestCalendarAccess:async()=>{a(null);try{const y=zl.currentUser;if(!y)throw new Error("User not authenticated");if(!ro.isConfigured())throw new Error("Google OAuth2 Client ID not configured. Please set VITE_GOOGLE_OAUTH_CLIENT_ID in your environment variables.");console.log("🔄 Requesting Google Calendar access...");const w=await ro.requestCalendarAccess();e(!0),s(w),console.log("✅ Google Calendar access granted for user:",y.uid)}catch(y){throw console.error("Error requesting calendar access:",y),a(y instanceof Error?y.message:"Failed to request calendar access"),y}},revokeAccess:async()=>{a(null);try{const y=zl.currentUser;if(!y)throw new Error("User not authenticated");console.log("🗑️ Revoking Google Calendar access..."),await ro.revokeAccess(),e(!1),s(null),console.log("✅ Google Calendar access revoked for user:",y.uid)}catch(y){throw console.error("Error revoking calendar access:",y),a(y instanceof Error?y.message:"Failed to revoke calendar access"),y}},refreshToken:()=>{c(y=>y+1)},token:o}},ont=()=>{const[n,e]=Y.useState(!1);return x.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"flex-shrink-0 mt-1",children:x.jsx(Iye,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Demo Mode: Google Calendar Sync"}),x.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your sync feature is working perfectly in demo mode! Tasks are being processed for sync, but real Google Calendar events require additional setup."}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[x.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[x.jsx(hg,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Sync Logic Working"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[x.jsx(hg,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Status Tracking"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[x.jsx(O7,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"API Setup Needed"})]})]}),x.jsx("button",{onClick:()=>e(!n),className:"text-blue-700 hover:text-blue-900 underline text-sm",children:n?"Hide Details":"How to Enable Real Google Calendar Sync"}),n&&x.jsxs("div",{className:"mt-4 p-4 bg-white rounded border border-blue-200",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Setup Guide for Real Google Calendar:"}),x.jsxs("ol",{className:"list-decimal list-inside space-y-3 text-sm text-gray-700",children:[x.jsxs("li",{children:[x.jsx("strong",{children:"Google Cloud Console Setup:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsxs("li",{children:["Go to ",x.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google Cloud Console"})]}),x.jsx("li",{children:"Enable the Google Calendar API for your project"}),x.jsx("li",{children:'Go to "Credentials" → "Create Credentials" → "OAuth 2.0 Client IDs"'}),x.jsx("li",{children:'Set Application Type to "Web application"'}),x.jsx("li",{children:'Add your domain (e.g., http://localhost:3000) to "Authorized origins"'})]})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Environment Setup:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:"Copy your OAuth2 Client ID from Google Cloud Console"}),x.jsxs("li",{children:["Create a ",x.jsx("code",{className:"bg-gray-100 px-1 rounded",children:".env"})," file in your project root"]}),x.jsxs("li",{children:["Add: ",x.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"VITE_GOOGLE_OAUTH_CLIENT_ID=your-client-id-here"})]}),x.jsx("li",{children:"Restart your development server"})]})]}),x.jsxs("li",{children:[x.jsx("strong",{children:"Test the Integration:"}),x.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:'Click "Grant Calendar Access" in the settings'}),x.jsx("li",{children:"Complete the Google OAuth flow"}),x.jsx("li",{children:"Your tasks will now sync to real Google Calendar!"})]})]})]}),x.jsxs("div",{className:"mt-4 flex gap-3",children:[x.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:[x.jsx(Dye,{className:"w-4 h-4"}),"Create OAuth2 Credentials"]}),x.jsxs("a",{href:"https://developers.google.com/calendar/api/quickstart/js",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200",children:[x.jsx(Vb,{className:"w-4 h-4"}),"Calendar API Guide"]})]}),x.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:x.jsxs("p",{className:"text-green-800 text-sm",children:[x.jsx("strong",{children:"Ready to Go:"})," The sync feature is fully implemented and working. You can see all sync operations in the browser console. Complete the OAuth2 setup above to connect with real Google Calendar."]})})]})]})]})})},snt=()=>{const{user:n}=Ht(),{hasCalendarAccess:e,isCheckingAccess:t,error:r,requestCalendarAccess:i,token:a}=Mq(),{startWebhookMonitoring:o,stopWebhookMonitoring:s}=iT(),[l,c]=Y.useState(null),[u,d]=Y.useState(null),[h,f]=Y.useState(!1),[m,v]=Y.useState(null);Y.useEffect(()=>{n&&e&&y()},[n,e]);const y=async()=>{if(n)try{const A=qd(n.uid),[D,P]=await Promise.all([A.getSyncStatus(),A.getWebhookStatus()]);c(D),d(P)}catch(A){console.error("Error loading sync status:",A),v(A instanceof Error?A.message:"Failed to load sync status")}},w=async()=>{if(n){f(!0),v(null);try{e||await i();const A=qd(n.uid);await A.initializeSync(),console.log("✅ Sync state initialized"),await A.toggleSync(!0),console.log("✅ Sync enabled");try{await A.setupWebhook(),console.log("✅ Webhook setup successful"),o(),console.log("✅ Webhook monitoring started"),console.log("💡 Webhook ready for Google Calendar → web app sync"),console.log("🚀 You can now test by creating a task in Google Calendar")}catch(D){console.warn("⚠️ Webhook setup failed, falling back to polling:",D),o(),console.log("💡 Using polling mode - changes may take up to 2 minutes to sync")}await y(),console.log("✅ Google Calendar sync fully enabled with persistent tokens")}catch(A){console.error("Error enabling sync:",A),v(A instanceof Error?A.message:"Failed to enable sync")}finally{f(!1)}}},S=async()=>{if(n){f(!0),v(null);try{const A=qd(n.uid);s(),console.log("✅ Webhook monitoring stopped");try{await A.stopWebhook(),console.log("✅ Webhook stopped")}catch(D){console.warn("⚠️ Error stopping webhook:",D)}await A.toggleSync(!1),await y(),console.log("✅ Google Calendar sync disabled")}catch(A){console.error("Error disabling sync:",A),v(A instanceof Error?A.message:"Failed to disable sync")}finally{f(!1)}}},T=async()=>{if(n){f(!0),v(null);try{await qd(n.uid).performFullSync(),await y(),console.log("✅ Manual sync completed")}catch(A){console.error("Error performing manual sync:",A),v(A instanceof Error?A.message:"Manual sync failed")}finally{f(!1)}}},C=async()=>{if(!(!n||!window.confirm(`Are you sure you want to disable Google Calendar sync?

This will:
• Stop all current syncing
• Disable automatic sync to Google Calendar
• Keep your Google Calendar access for future use
• You can re-enable sync anytime without re-authenticating

Your Google Calendar permission will remain active.`))){f(!0),v(null);try{const D=qd(n.uid);s(),console.log("✅ Webhook monitoring stopped");try{await D.stopWebhook(),await D.toggleSync(!1),console.log("✅ Sync disabled and webhook stopped")}catch(P){console.warn("⚠️ Error disabling sync:",P)}a&&await ro.toggleSync(!1),await y(),console.log("✅ Google Calendar sync disabled (access preserved)")}catch(D){console.error("Error disabling sync:",D),v(D instanceof Error?D.message:"Failed to disable sync")}finally{f(!1)}}},k=A=>{try{const D=A instanceof Date?A:A&&typeof A=="object"&&"toDate"in A?A.toDate():new Date(A);if(D.getTime()===0)return"Never";const N=new Date().getTime()-D.getTime(),R=Math.floor(N/(1e3*60));if(R<1)return"Just now";if(R<60)return`${R} minute${R>1?"s":""} ago`;const L=Math.floor(R/60);if(L<24)return`${L} hour${L>1?"s":""} ago`;const B=Math.floor(L/24);return`${B} day${B>1?"s":""} ago`}catch(D){return console.error("Error formatting sync date:",D),"Unknown"}};return t?x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(Vb,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),x.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[x.jsx(Zp,{className:"w-4 h-4 animate-spin"}),x.jsx("span",{children:"Checking calendar access..."})]})]}):e?x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(Vb,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),l&&x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.isEnabled?x.jsx(hg,{className:"w-5 h-5 text-green-500"}):x.jsx(Mv,{className:"w-5 h-5 text-gray-400"}),x.jsx("span",{className:"font-medium",children:l.isEnabled?"Sync Enabled":"Sync Disabled"})]}),l.isEnabled&&x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx(R7,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Last Sync"})]}),x.jsx("p",{className:"font-medium",children:k(l.lastSync)})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx(Zp,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Pending"})]}),x.jsxs("p",{className:"font-medium",children:[l.pendingTasks," tasks"]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[x.jsx(Mv,{className:"w-4 h-4"}),x.jsx("span",{className:"text-sm",children:"Errors"})]}),x.jsxs("p",{className:"font-medium text-red-600",children:[l.errorTasks," tasks"]})]})]}),l.isEnabled&&u&&x.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:`w-2 h-2 rounded-full ${u.isActive?"bg-green-500":"bg-orange-500"}`}),x.jsxs("span",{className:"font-medium text-blue-900",children:["Real-time Sync: ",u.isActive?"Active":"Polling Mode"]})]}),u.isActive?x.jsxs("div",{className:"text-sm text-blue-700",children:[x.jsx("p",{children:"✅ Receiving real-time notifications from Google Calendar"}),u.timeUntilExpiration&&x.jsxs("p",{className:"mt-1",children:["🔄 Auto-renewal in ",u.timeUntilExpiration]})]}):x.jsx("div",{className:"text-sm text-orange-700",children:x.jsx("p",{children:"📊 Using polling mode - changes may take up to 5 minutes to sync"})})]})]}),m&&x.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[x.jsx(Mv,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Error"})]}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:m})]}),x.jsxs("div",{className:"flex flex-wrap gap-3",children:[l!=null&&l.isEnabled?x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:S,disabled:h,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h?x.jsx(Zp,{className:"w-4 h-4 animate-spin"}):x.jsx(zb,{className:"w-4 h-4"}),x.jsx("span",{children:"Disable Sync"})]}),x.jsxs("button",{onClick:T,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h?x.jsx(Zp,{className:"w-4 h-4 animate-spin"}):x.jsx(Vb,{className:"w-4 h-4"}),x.jsx("span",{children:"Sync Now"})]})]}):x.jsxs("button",{onClick:w,disabled:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h?x.jsx(Zp,{className:"w-4 h-4 animate-spin"}):x.jsx(zb,{className:"w-4 h-4"}),x.jsx("span",{children:"Enable Sync"})]}),e&&a&&a.syncEnabled&&x.jsxs("button",{onClick:C,disabled:h,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[h?x.jsx(Zp,{className:"w-4 h-4 animate-spin"}):x.jsx(zb,{className:"w-4 h-4"}),x.jsx("span",{children:"Disable Sync"})]})]}),x.jsx(ont,{}),x.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:x.jsxs("p",{className:"text-sm text-blue-700",children:[x.jsx("strong",{children:"How it works:"})," When you schedule a task in Make10000hours, it will automatically appear in your Google Calendar. Changes made in either app will sync to the other."]})})]}):x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx(Vb,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Google Calendar Sync"})]}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-gray-600 mb-2",children:"Sync your tasks with Google Calendar to keep everything in sync across all your devices."}),x.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[x.jsx(Mv,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Calendar access required"})]}),x.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"To enable sync, you'll need to grant access to your Google Calendar."})]})]}),r&&x.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[x.jsx(Mv,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Error"})]}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:r})]}),x.jsx("button",{onClick:i,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?x.jsxs(x.Fragment,{children:[x.jsx(Zp,{className:"w-4 h-4 animate-spin"}),x.jsx("span",{children:"Requesting Access..."})]}):x.jsxs(x.Fragment,{children:[x.jsx(zb,{className:"w-4 h-4"}),x.jsx("span",{children:"Grant Calendar Access"})]})})]})},lnt=()=>{var h,f,m,v;const{user:n}=Ht(),[e,t]=Y.useState({syncState:null,webhookStatus:{isActive:!1},isLoading:!0,error:null}),[r,i]=Y.useState(!1),[a,o]=Y.useState([]),s=y=>{const w=new Date().toLocaleTimeString();o(S=>[`${w}: ${y}`,...S.slice(0,9)])},l=async()=>{if(n)try{t(T=>({...T,isLoading:!0,error:null}));const y=qd(n.uid),[w,S]=await Promise.all([y.getSyncState(),y.getWebhookStatus()]);t({syncState:w,webhookStatus:S,isLoading:!1,error:null}),s("Debug info loaded successfully")}catch(y){const w=y instanceof Error?y.message:"Failed to load debug info";t(S=>({...S,isLoading:!1,error:w})),s(`Error: ${w}`)}},c=async()=>{if(n)try{i(!0),s("Setting up webhook..."),await qd(n.uid).setupWebhook(),s("✅ Webhook setup successful"),await l()}catch(y){const w=y instanceof Error?y.message:"Webhook setup failed";s(`❌ Webhook setup failed: ${w}`)}finally{i(!1)}},u=async()=>{if(n)try{i(!0),s("Triggering manual sync..."),await qd(n.uid).performIncrementalSync(),s("✅ Manual sync completed"),await l()}catch(y){const w=y instanceof Error?y.message:"Manual sync failed";s(`❌ Manual sync failed: ${w}`)}finally{i(!1)}},d=async()=>{if(n)try{s("Checking for webhook-triggered sync..."),await qd(n.uid).checkWebhookTriggeredSync(),s("✅ Webhook trigger check completed"),await l()}catch(y){const w=y instanceof Error?y.message:"Webhook check failed";s(`❌ Webhook check failed: ${w}`)}};return Y.useEffect(()=>{n&&l()},[n]),n?x.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[x.jsx(tz,{className:"w-5 h-5 text-blue-600"}),x.jsx("h3",{className:"text-lg font-semibold",children:"Webhook Debug Panel"}),x.jsxs("button",{onClick:l,disabled:e.isLoading,className:"ml-auto px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center gap-2 disabled:opacity-50",children:[x.jsx(UC,{className:`w-4 h-4 ${e.isLoading?"animate-spin":""}`}),"Refresh"]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[x.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx("div",{className:`w-3 h-3 rounded-full ${e.webhookStatus.isActive?"bg-green-500":"bg-red-500"}`}),x.jsx("span",{className:"font-medium",children:"Webhook Status"})]}),x.jsx("p",{className:"text-sm text-gray-600",children:e.webhookStatus.isActive?"Active & Listening":"Inactive (Polling Mode)"}),e.webhookStatus.timeUntilExpiration&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Expires in: ",e.webhookStatus.timeUntilExpiration]})]}),x.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(hg,{className:"w-4 h-4 text-green-500"}),x.jsx("span",{className:"font-medium",children:"Sync State"})]}),x.jsx("p",{className:"text-sm text-gray-600",children:(h=e.syncState)!=null&&h.isEnabled?"Enabled":"Disabled"}),((f=e.syncState)==null?void 0:f.lastIncrementalSync)&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last sync: ",new Date(e.syncState.lastIncrementalSync.seconds*1e3).toLocaleTimeString()]})]}),x.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(R7,{className:"w-4 h-4 text-blue-500"}),x.jsx("span",{className:"font-medium",children:"Function Status"})]}),x.jsx("p",{className:"text-sm text-gray-600",children:"Endpoint: ✅ Accessible"}),x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL: ...cloudfunctions.net/calendarWebhook"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6",children:[x.jsxs("button",{onClick:c,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 justify-center",children:[x.jsx(L7,{className:"w-4 h-4"}),"Setup/Renew Webhook"]}),x.jsxs("button",{onClick:u,disabled:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2 justify-center",children:[x.jsx(UC,{className:"w-4 h-4"}),"Manual Sync"]}),x.jsxs("button",{onClick:d,disabled:r,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2 justify-center",children:[x.jsx(tz,{className:"w-4 h-4"}),"Check Webhook Trigger"]})]}),x.jsxs("div",{className:"mb-6",children:[x.jsx("h4",{className:"font-medium mb-3",children:"Debug Information"}),x.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.webhookStatus.channelId&&x.jsxs("div",{className:"mb-2",children:[x.jsx("span",{className:"font-medium text-sm",children:"Webhook Channel ID:"}),x.jsx("span",{className:"text-sm text-gray-600 ml-2 font-mono",children:e.webhookStatus.channelId})]}),((m=e.syncState)==null?void 0:m.webhookTriggeredSync)&&x.jsx("div",{className:"mb-2",children:x.jsx("span",{className:"text-sm text-orange-600",children:"⚠️ Pending webhook-triggered sync detected"})}),((v=e.syncState)==null?void 0:v.nextSyncToken)&&x.jsxs("div",{className:"mb-2",children:[x.jsx("span",{className:"font-medium text-sm",children:"Sync Token:"}),x.jsxs("span",{className:"text-sm text-gray-600 ml-2 font-mono",children:[e.syncState.nextSyncToken.slice(0,20),"..."]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium mb-3",children:"Activity Log"}),x.jsx("div",{className:"bg-black text-green-400 p-4 rounded-lg font-mono text-sm max-h-48 overflow-y-auto",children:a.length===0?x.jsx("div",{className:"text-gray-500",children:"No activity yet..."}):a.map((y,w)=>x.jsx("div",{className:"mb-1",children:y},w))})]}),e.error&&x.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[x.jsx(Mv,{className:"w-4 h-4"}),x.jsx("span",{className:"font-medium",children:"Error"})]}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.error})]}),x.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How to Test Calendar → Web App Sync:"}),x.jsxs("ol",{className:"text-sm text-blue-800 space-y-1",children:[x.jsx("li",{children:"1. Ensure webhook is active (green status above)"}),x.jsx("li",{children:"2. Create a new event in Google Calendar"}),x.jsx("li",{children:'3. Wait 30 seconds, then click "Check Webhook Trigger"'}),x.jsx("li",{children:'4. If no webhook trigger, click "Manual Sync" to force sync'}),x.jsx("li",{children:"5. Check your tasks list for imported events"})]})]})]}):x.jsx("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:x.jsx("p",{className:"text-gray-500",children:"Please log in to view webhook debug information."})})},cnt=()=>{const{user:n,updateUserData:e}=Ht(),[t,r]=Y.useState(Wk),[i,a]=Y.useState(!1),[o,s]=Y.useState(null);Y.useEffect(()=>{n&&r(n.settings)},[n]);const l=(h,f)=>{r(m=>({...m,timer:{...m.timer,[h]:f}}))},c=(h,f)=>{r(m=>({...m,[h]:f}))},u=async()=>{if(n){a(!0),s(null);try{await e({uid:n.uid,userName:n.userName,settings:t}),s({type:"success",text:"Settings saved successfully!"})}catch(h){console.error("Error saving settings:",h),s({type:"error",text:"Failed to save settings. Please try again."})}finally{a(!1)}}},d=()=>{n!=null&&n.settings&&(r(n.settings),s(null))};return n?x.jsxs("div",{className:"w-full max-w-4xl mx-auto p-6",children:[x.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Settings"}),o&&x.jsx("div",{className:`mb-6 p-4 rounded-lg ${o.type==="success"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:o.text}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Timer Settings"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pomodoro Duration (minutes)"}),x.jsx("input",{id:"pomodoroDuration",type:"number",min:"1",max:"60",value:t.timer.pomodoro,onChange:h=>l("pomodoro",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Break Duration (minutes)"}),x.jsx("input",{id:"shortBreakDuration",type:"number",min:"1",max:"30",value:t.timer.shortBreak,onChange:h=>l("shortBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Duration (minutes)"}),x.jsx("input",{id:"longBreakDuration",type:"number",min:"1",max:"60",value:t.timer.longBreak,onChange:h=>l("longBreak",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Long Break Interval (pomodoros)"}),x.jsx("input",{id:"longBreakInterval",type:"number",min:"2",max:"10",value:t.timer.longBreakInterval,onChange:h=>l("longBreakInterval",parseInt(h.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),x.jsxs("div",{className:"mt-6 space-y-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"autoStartBreaks",checked:t.timer.autoStartBreaks,onChange:h=>l("autoStartBreaks",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"autoStartBreaks",className:"ml-2 text-sm text-gray-700",children:"Auto-start breaks"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"autoStartPomodoros",checked:t.timer.autoStartPomodoros,onChange:h=>l("autoStartPomodoros",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"autoStartPomodoros",className:"ml-2 text-sm text-gray-700",children:"Auto-start pomodoros"})]})]})]}),x.jsxs("section",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Appearance"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"darkMode",checked:t.darkMode,onChange:h=>c("darkMode",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"darkMode",className:"ml-2 text-sm text-gray-700",children:"Enable dark mode"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"compactTaskView",checked:t.compactTaskView,onChange:h=>c("compactTaskView",h.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),x.jsx("label",{htmlFor:"compactTaskView",className:"ml-2 text-sm text-gray-700",children:"Compact task view"})]})]})]}),x.jsx(snt,{}),x.jsx(lnt,{}),x.jsx(ant,{})]}),x.jsxs("div",{className:"mt-8 flex justify-end space-x-4",children:[x.jsx("button",{onClick:d,disabled:i,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset"}),x.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:i?"Saving...":"Save Settings"})]})]}):x.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6",children:[x.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),x.jsx("p",{className:"text-gray-600",children:"Please sign in to access your settings."})]})},MSe=()=>(console.log("🔍 Verifying Google Analytics Setup..."),aa?(console.log("✅ Firebase Analytics is initialized"),console.log("📊 Measurement ID: G-X6YHGN5WRS"),tye("analytics_verification",{timestamp:new Date().toISOString(),verification_step:"setup_complete"}),k7("verification_test","Analytics Verification Page"),console.log("✅ Test events sent successfully!"),console.log("📈 Check Firebase Console in 24-48 hours for data"),console.log("🔗 https://console.firebase.google.com/project/make10000hours/analytics"),!0):(console.error("❌ Firebase Analytics is not initialized"),console.log("🔧 Check environment variables:"),console.log("   - VITE_FIREBASE_API_KEY"),console.log("   - VITE_FIREBASE_APP_ID"),!1));typeof window<"u"&&(window.verifyAnalytics=MSe);const PSe=Y.createContext({dragDropManager:void 0});function bu(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Bae=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Uae=function(){return Math.random().toString(36).substring(7).split("").join(".")},Vae={INIT:"@@redux/INIT"+Uae(),REPLACE:"@@redux/REPLACE"+Uae()};function unt(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function NSe(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(bu(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(bu(1));return t(NSe)(n,e)}if(typeof n!="function")throw new Error(bu(2));var i=n,a=e,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(bu(3));return a}function d(v){if(typeof v!="function")throw new Error(bu(4));if(l)throw new Error(bu(5));var y=!0;return c(),s.push(v),function(){if(y){if(l)throw new Error(bu(6));y=!1,c();var S=s.indexOf(v);s.splice(S,1),o=null}}}function h(v){if(!unt(v))throw new Error(bu(7));if(typeof v.type>"u")throw new Error(bu(8));if(l)throw new Error(bu(9));try{l=!0,a=i(a,v)}finally{l=!1}for(var y=o=s,w=0;w<y.length;w++){var S=y[w];S()}return v}function f(v){if(typeof v!="function")throw new Error(bu(10));i=v,h({type:Vae.REPLACE})}function m(){var v,y=d;return v={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(bu(11));function T(){S.next&&S.next(u())}T();var C=y(T);return{unsubscribe:C}}},v[Bae]=function(){return this},v}return h({type:Vae.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:f},r[Bae]=m,r}function qn(n,e,...t){if(dnt()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return t[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function dnt(){return typeof process<"u"&&!0}function hnt(n,e,t){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:t||null,n)}function fnt(n,e){return n.filter(t=>t!==e)}function RSe(n){return typeof n=="object"}function pnt(n,e){const t=new Map,r=a=>{t.set(a,t.has(a)?t.get(a)+1:1)};n.forEach(r),e.forEach(r);const i=[];return t.forEach((a,o)=>{a===1&&i.push(o)}),i}function gnt(n,e){return n.filter(t=>e.indexOf(t)>-1)}const Pq="dnd-core/INIT_COORDS",Nj="dnd-core/BEGIN_DRAG",Nq="dnd-core/PUBLISH_DRAG_SOURCE",Rj="dnd-core/HOVER",Oj="dnd-core/DROP",Lj="dnd-core/END_DRAG";function zae(n,e){return{type:Pq,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const mnt={type:Pq,payload:{clientOffset:null,sourceClientOffset:null}};function vnt(n){return function(t=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=r,s=n.getMonitor(),l=n.getRegistry();n.dispatch(zae(a)),ynt(t,s,l);const c=xnt(t,s);if(c==null){n.dispatch(mnt);return}let u=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");bnt(o),u=o(c)}n.dispatch(zae(a,u));const h=l.getSource(c).beginDrag(s,c);if(h==null)return;wnt(h),l.pinSource(c);const f=l.getSourceType(c);return{type:Nj,payload:{itemType:f,item:h,sourceId:c,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function ynt(n,e,t){qn(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){qn(t.getSource(r),"Expected sourceIds to be registered.")})}function bnt(n){qn(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function wnt(n){qn(RSe(n),"Item must be an object.")}function xnt(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function Snt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _nt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){Snt(n,i,t[i])})}return n}function Tnt(n){return function(t={}){const r=n.getMonitor(),i=n.getRegistry();Ent(r),Cnt(r).forEach((o,s)=>{const l=Ant(o,s,i,r),c={type:Oj,payload:{dropResult:_nt({},t,l)}};n.dispatch(c)})}}function Ent(n){qn(n.isDragging(),"Cannot call drop while not dragging."),qn(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Ant(n,e,t,r){const i=t.getTarget(n);let a=i?i.drop(r,n):void 0;return knt(a),typeof a>"u"&&(a=e===0?{}:r.getDropResult()),a}function knt(n){qn(typeof n>"u"||RSe(n),"Drop result must either be an object or undefined.")}function Cnt(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function Dnt(n){return function(){const t=n.getMonitor(),r=n.getRegistry();Int(t);const i=t.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(t,i),r.unpinSource()),{type:Lj}}}function Int(n){qn(n.isDragging(),"Cannot call endDrag while not dragging.")}function H9(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function Mnt(n){return function(t,{clientOffset:r}={}){Pnt(t);const i=t.slice(0),a=n.getMonitor(),o=n.getRegistry(),s=a.getItemType();return Rnt(i,o,s),Nnt(i,a,o),Ont(i,a,o),{type:Rj,payload:{targetIds:i,clientOffset:r||null}}}}function Pnt(n){qn(Array.isArray(n),"Expected targetIds to be an array.")}function Nnt(n,e,t){qn(e.isDragging(),"Cannot call hover while not dragging."),qn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const i=n[r];qn(n.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const a=t.getTarget(i);qn(a,"Expected targetIds to be registered.")}}function Rnt(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r],a=e.getTargetType(i);H9(a,t)||n.splice(r,1)}}function Ont(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function Lnt(n){return function(){if(n.getMonitor().isDragging())return{type:Nq}}}function jnt(n){return{beginDrag:vnt(n),publishDragSource:Lnt(n),hover:Mnt(n),drop:Tnt(n),endDrag:Dnt(n)}}class Fnt{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(a){return(...o)=>{const s=a.apply(e,o);typeof s<"u"&&t(s)}}const i=jnt(this);return Object.keys(i).reduce((a,o)=>{const s=i[o];return a[o]=r(s),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function $nt(n,e){return{x:n.x+e.x,y:n.y+e.y}}function OSe(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Bnt(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:OSe($nt(e,r),t)}function Unt(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:OSe(e,t)}const tC=[],Rq=[];tC.__IS_NONE__=!0;Rq.__IS_ALL__=!0;function Vnt(n,e){return n===tC?!1:n===Rq||typeof e>"u"?!0:gnt(e,n).length>0}class znt{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;qn(typeof e=="function","listener must be a function."),qn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),s=o.stateId;try{s===i||s===i+1&&!Vnt(o.dirtyHandlerIds,r)||e()}finally{i=s}};return this.store.subscribe(a)}subscribeToOffsetChange(e){qn(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return qn(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(qn(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return H9(r,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(qn(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!H9(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Bnt(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Unt(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const Hae=typeof globalThis<"u"?globalThis:self,LSe=Hae.MutationObserver||Hae.WebKitMutationObserver;function jSe(n){return function(){const t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),n()}}}function Hnt(n){let e=1;const t=new LSe(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Gnt=typeof LSe=="function"?Hnt:jSe;class Wnt{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Gnt(this.flush),this.requestErrorThrow=jSe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class qnt{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class Ynt{create(e){const t=this.freeTasks,r=t.length?t.pop():new qnt(this.onError,i=>t[t.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const FSe=new Wnt,Knt=new Ynt(FSe.registerPendingError);function Xnt(n){FSe.enqueueTask(Knt.create(n))}const Oq="dnd-core/ADD_SOURCE",Lq="dnd-core/ADD_TARGET",jq="dnd-core/REMOVE_SOURCE",jj="dnd-core/REMOVE_TARGET";function Znt(n){return{type:Oq,payload:{sourceId:n}}}function Qnt(n){return{type:Lq,payload:{targetId:n}}}function Jnt(n){return{type:jq,payload:{sourceId:n}}}function ert(n){return{type:jj,payload:{targetId:n}}}function trt(n){qn(typeof n.canDrag=="function","Expected canDrag to be a function."),qn(typeof n.beginDrag=="function","Expected beginDrag to be a function."),qn(typeof n.endDrag=="function","Expected endDrag to be a function.")}function nrt(n){qn(typeof n.canDrop=="function","Expected canDrop to be a function."),qn(typeof n.hover=="function","Expected hover to be a function."),qn(typeof n.drop=="function","Expected beginDrag to be a function.")}function G9(n,e){if(e&&Array.isArray(n)){n.forEach(t=>G9(t,!1));return}qn(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Mu;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(Mu||(Mu={}));let rrt=0;function irt(){return rrt++}function art(n){const e=irt().toString();switch(n){case Mu.SOURCE:return`S${e}`;case Mu.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function Gae(n){switch(n[0]){case"S":return Mu.SOURCE;case"T":return Mu.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Wae(n,e){const t=n.entries();let r=!1;do{const{done:i,value:[,a]}=t.next();if(a===e)return!0;r=!!i}while(!r);return!1}class ort{addSource(e,t){G9(e),trt(t);const r=this.addHandler(Mu.SOURCE,e,t);return this.store.dispatch(Znt(r)),r}addTarget(e,t){G9(e,!0),nrt(t);const r=this.addHandler(Mu.TARGET,e,t);return this.store.dispatch(Qnt(r)),r}containsHandler(e){return Wae(this.dragSources,e)||Wae(this.dropTargets,e)}getSource(e,t=!1){return qn(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return qn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return qn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return qn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Gae(e)===Mu.SOURCE}isTargetId(e){return Gae(e)===Mu.TARGET}removeSource(e){qn(this.getSource(e),"Expected an existing source."),this.store.dispatch(Jnt(e)),Xnt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){qn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(ert(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);qn(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){qn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const i=art(e);return this.types.set(i,t),e===Mu.SOURCE?this.dragSources.set(i,r):e===Mu.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const srt=(n,e)=>n===e;function lrt(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function crt(n,e,t=srt){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function urt(n=tC,e){switch(e.type){case Rj:break;case Oq:case Lq:case jj:case jq:return tC;case Nj:case Nq:case Lj:case Oj:default:return Rq}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,i=pnt(t,r);if(!(i.length>0||!crt(t,r)))return tC;const o=r[r.length-1],s=t[t.length-1];return o!==s&&(o&&i.push(o),s&&i.push(s)),i}function drt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hrt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){drt(n,i,t[i])})}return n}const qae={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function frt(n=qae,e){const{payload:t}=e;switch(e.type){case Pq:case Nj:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Rj:return lrt(n.clientOffset,t.clientOffset)?n:hrt({},n,{clientOffset:t.clientOffset});case Lj:case Oj:return qae;default:return n}}function prt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){prt(n,i,t[i])})}return n}const grt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function mrt(n=grt,e){const{payload:t}=e;switch(e.type){case Nj:return VS({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case Nq:return VS({},n,{isSourcePublic:!0});case Rj:return VS({},n,{targetIds:t.targetIds});case jj:return n.targetIds.indexOf(t.targetId)===-1?n:VS({},n,{targetIds:fnt(n.targetIds,t.targetId)});case Oj:return VS({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case Lj:return VS({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function vrt(n=0,e){switch(e.type){case Oq:case Lq:return n+1;case jq:case jj:return n-1;default:return n}}function yrt(n=0){return n+1}function brt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wrt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){brt(n,i,t[i])})}return n}function xrt(n={},e){return{dirtyHandlerIds:urt(n.dirtyHandlerIds,{type:e.type,payload:wrt({},e.payload,{prevTargetIds:hnt(n,"dragOperation.targetIds",[])})}),dragOffset:frt(n.dragOffset,e),refCount:vrt(n.refCount,e),dragOperation:mrt(n.dragOperation,e),stateId:yrt(n.stateId)}}function Srt(n,e=void 0,t={},r=!1){const i=_rt(r),a=new znt(i,new ort(i)),o=new Fnt(i,a),s=n(o,e,t);return o.receiveBackend(s),o}function _rt(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return NSe(xrt,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Trt(n,e){if(n==null)return{};var t=Ert(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Ert(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let Yae=0;const fR=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Art=Y.memo(function(e){var{children:t}=e,r=Trt(e,["children"]);const[i,a]=krt(r);return Y.useEffect(()=>{if(a){const o=$Se();return++Yae,()=>{--Yae===0&&(o[fR]=null)}}},[]),x.jsx(PSe.Provider,{value:i,children:t})});function krt(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=Crt(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function Crt(n,e=$Se(),t,r){const i=e;return i[fR]||(i[fR]={dragDropManager:Srt(n,e,t,r)}),i[fR]}function $Se(){return typeof globalThis<"u"?globalThis:window}var $B,Kae;function Drt(){return Kae||(Kae=1,$B=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),$B}var Irt=Drt();const Mrt=Lr(Irt),Rw=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function Prt(n,e,t){const[r,i]=Y.useState(()=>e(n)),a=Y.useCallback(()=>{const o=e(n);Mrt(r,o)||(i(o),t&&t())},[r,n,t]);return Rw(a),[r,a]}function Nrt(n,e,t){const[r,i]=Prt(n,e,t);return Rw(function(){const o=n.getHandlerId();if(o!=null)return n.subscribeToStateChange(i,{handlerIds:[o]})},[n,i]),r}function BSe(n,e,t){return Nrt(e,n||(()=>({})),()=>t.reconnect())}function USe(n,e){const t=[];return typeof n!="function"&&t.push(n),Y.useMemo(()=>typeof n=="function"?n():n,t)}function Rrt(n){return Y.useMemo(()=>n.hooks.dragSource(),[n])}function Ort(n){return Y.useMemo(()=>n.hooks.dragPreview(),[n])}let BB=!1,UB=!1;class Lrt{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){qn(!BB,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return BB=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{BB=!1}}isDragging(){if(!this.sourceId)return!1;qn(!UB,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return UB=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{UB=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let VB=!1;class jrt{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;qn(!VB,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return VB=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{VB=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Frt(n,e,t){const r=t.getRegistry(),i=r.addTarget(n,e);return[i,()=>r.removeTarget(i)]}function $rt(n,e,t){const r=t.getRegistry(),i=r.addSource(n,e);return[i,()=>r.removeSource(i)]}function W9(n,e,t,r){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const a=Object.keys(n),o=Object.keys(e);if(a.length!==o.length)return!1;const s=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<a.length;l++){const c=a[l];if(!s(c))return!1;const u=n[c],d=e[c];if(i=void 0,i===!1||i===void 0&&u!==d)return!1}return!0}function q9(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Brt(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Urt(n){return(e=null,t=null)=>{if(!Y.isValidElement(e)){const a=e;return n(a,t),a}const r=e;return Brt(r),Vrt(r,t?a=>n(a,t):n)}}function VSe(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=Urt(r);e[t]=()=>i}}),e}function Xae(n,e){typeof n=="function"?n(e):n.current=e}function Vrt(n,e){const t=n.ref;return qn(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?Y.cloneElement(n,{ref:r=>{Xae(t,r),Xae(e,r)}}):Y.cloneElement(n,{ref:e})}class zrt{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!W9(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!W9(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=VSe({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,q9(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,q9(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Hrt{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!W9(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=VSe({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,q9(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function vT(){const{dragDropManager:n}=Y.useContext(PSe);return qn(n!=null,"Expected drag drop context"),n}function Grt(n,e){const t=vT(),r=Y.useMemo(()=>new zrt(t.getBackend()),[t]);return Rw(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),Rw(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function Wrt(){const n=vT();return Y.useMemo(()=>new Lrt(n),[n])}class qrt{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,i=this.monitor,{isDragging:a}=r;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function Yrt(n,e,t){const r=Y.useMemo(()=>new qrt(n,e,t),[e,t]);return Y.useEffect(()=>{r.spec=n},[n]),r}function Krt(n){return Y.useMemo(()=>{const e=n.type;return qn(e!=null,"spec.type must be defined"),e},[n])}function Xrt(n,e,t){const r=vT(),i=Yrt(n,e,t),a=Krt(n);Rw(function(){if(a!=null){const[s,l]=$rt(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l}},[r,e,t,i,a])}function Zrt(n,e){const t=USe(n);qn(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=Wrt(),i=Grt(t.options,t.previewOptions);return Xrt(t,r,i),[BSe(t.collect,r,i),Rrt(i),Ort(i)]}function Qrt(n){return Y.useMemo(()=>n.hooks.dropTarget(),[n])}function Jrt(n){const e=vT(),t=Y.useMemo(()=>new Hrt(e.getBackend()),[e]);return Rw(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function eit(){const n=vT();return Y.useMemo(()=>new jrt(n),[n])}function tit(n){const{accept:e}=n;return Y.useMemo(()=>(qn(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class nit{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function rit(n,e){const t=Y.useMemo(()=>new nit(n,e),[e]);return Y.useEffect(()=>{t.spec=n},[n]),t}function iit(n,e,t){const r=vT(),i=rit(n,e),a=tit(n);Rw(function(){const[s,l]=Frt(a,i,r);return e.receiveHandlerId(s),t.receiveHandlerId(s),l},[r,e,i,t,a.map(o=>o.toString()).join("|")])}function ait(n,e){const t=USe(n),r=eit(),i=Jrt(t.options);return iit(t,r,i),[BSe(t.collect,r,i),Qrt(i)]}function zSe(n){let e=null;return()=>(e==null&&(e=n()),e)}function oit(n,e){return n.filter(t=>t!==e)}function sit(n,e){const t=new Set,r=a=>t.add(a);n.forEach(r),e.forEach(r);const i=[];return t.forEach(a=>i.push(a)),i}class lit{enter(e){const t=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=sit(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=oit(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class cit{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const HSe="__NATIVE_FILE__",GSe="__NATIVE_URL__",WSe="__NATIVE_TEXT__",qSe="__NATIVE_HTML__",Zae=Object.freeze(Object.defineProperty({__proto__:null,FILE:HSe,HTML:qSe,TEXT:WSe,URL:GSe},Symbol.toStringTag,{value:"Module"}));function zB(n,e,t){const r=e.reduce((i,a)=>i||n.getData(a),"");return r??t}const Y9={[HSe]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[qSe]:{exposeProperties:{html:(n,e)=>zB(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[GSe]:{exposeProperties:{urls:(n,e)=>zB(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[WSe]:{exposeProperties:{text:(n,e)=>zB(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function uit(n,e){const t=Y9[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new cit(t);return r.loadDataTransfer(e),r}function HB(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(Y9).filter(t=>{const r=Y9[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const dit=zSe(()=>/firefox/i.test(navigator.userAgent)),YSe=zSe(()=>!!window.safari);class Qae{interpolate(e){const{xs:t,ys:r,c1s:i,c2s:a,c3s:o}=this;let s=t.length-1;if(e===t[s])return r[s];let l=0,c=o.length-1,u;for(;l<=c;){u=Math.floor(.5*(l+c));const f=t[u];if(f<e)l=u+1;else if(f>e)c=u-1;else return r[u]}s=Math.max(0,c);const d=e-t[s],h=d*d;return r[s]+i[s]*d+a[s]*h+o[s]*d*h}constructor(e,t){const{length:r}=e,i=[];for(let f=0;f<r;f++)i.push(f);i.sort((f,m)=>e[f]<e[m]?-1:1);const a=[],o=[];let s,l;for(let f=0;f<r-1;f++)s=e[f+1]-e[f],l=t[f+1]-t[f],a.push(s),o.push(l/s);const c=[o[0]];for(let f=0;f<a.length-1;f++){const m=o[f],v=o[f+1];if(m*v<=0)c.push(0);else{s=a[f];const y=a[f+1],w=s+y;c.push(3*w/((w+y)/m+(w+s)/v))}}c.push(o[o.length-1]);const u=[],d=[];let h;for(let f=0;f<c.length-1;f++){h=o[f];const m=c[f],v=1/a[f],y=m+c[f+1]-h-h;u.push((h-m-y)*v),d.push(y*v*v)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const hit=1;function KSe(n){const e=n.nodeType===hit?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function zP(n){return{x:n.clientX,y:n.clientY}}function fit(n){var e;return n.nodeName==="IMG"&&(dit()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function pit(n,e,t,r){let i=n?e.width:t,a=n?e.height:r;return YSe()&&n&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function git(n,e,t,r,i){const a=fit(e),s=KSe(a?n:e),l={x:t.x-s.x,y:t.y-s.y},{offsetWidth:c,offsetHeight:u}=n,{anchorX:d,anchorY:h}=r,{dragPreviewWidth:f,dragPreviewHeight:m}=pit(a,e,c,u),v=()=>{let A=new Qae([0,.5,1],[l.y,l.y/u*m,l.y+m-u]).interpolate(h);return YSe()&&a&&(A+=(window.devicePixelRatio-1)*m),A},y=()=>new Qae([0,.5,1],[l.x,l.x/c*f,l.x+f-c]).interpolate(d),{offsetX:w,offsetY:S}=i,T=w===0||w,C=S===0||S;return{x:T?w:y(),y:C?S:v()}}class mit{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function vit(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Jae(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){vit(n,i,t[i])})}return n}class yit{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Jae({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Jae({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Zae).some(t=>Zae[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=uit(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&KSe(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=zP(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:s}=i,l=HB(s);if(this.monitor.isDragging()){if(s&&typeof s.setDragImage=="function"){const u=this.monitor.getSourceId(),d=this.sourceNodes.get(u),h=this.sourcePreviewNodes.get(u)||d;if(h){const{anchorX:f,anchorY:m,offsetX:v,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),T=git(d,h,o,{anchorX:f,anchorY:m},{offsetX:v,offsetY:y});s.setDragImage(h,T.x,T.y)}}try{s==null||s.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(s&&!s.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:s}=i,l=HB(s);l&&this.beginDragNativeItem(l,s)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:zP(i)}),a.some(s=>this.monitor.canDropOnTarget(s))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=zP(i),this.scheduleHover(a),(a||[]).some(s=>this.monitor.canDropOnTarget(s))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else HB(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:zP(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new mit(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new lit(this.isNodeInDocument)}}const bit=function(e,t,r){return new yit(e,t,r)},wit=(n,e)=>{if(!n.scheduledDate)return null;const t=`task-${n.id}`,r=n.title,i=n.description,a=(e==null?void 0:e.name)||"No Project",o=(e==null?void 0:e.color)||"#6B7280",s=new Date(n.scheduledDate),l=n.completed||n.status==="completed";if(!n.includeTime||!n.scheduledStartTime||!n.scheduledEndTime)return{id:t,title:r,description:i,project:a,color:o,start:s,end:s,isAllDay:!0,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0};const[c,u]=n.scheduledStartTime.split(":").map(Number),[d,h]=n.scheduledEndTime.split(":").map(Number),f=new Date(s);f.setHours(c,u,0,0);const m=new Date(s);return m.setHours(d,h,0,0),m<f&&m.setDate(m.getDate()+1),{id:t,title:r,description:i,project:a,color:o,start:f,end:m,isAllDay:!1,taskId:n.id,isTask:!0,isDraggable:!0,isCompleted:l,completedAt:l?n.updatedAt:void 0}},xit=(n,e)=>{const t=[],r=new Map;return e.forEach(i=>{r.set(i.id,i)}),n.forEach(i=>{const a=r.get(i.projectId),o=wit(i,a);o&&t.push(o)}),t},Sit=(n,e,t)=>{const r=xit(e,t);return[...n,...r]},XSe=(n,e)=>{const t=n.end.getTime()-n.start.getTime();if(e.isAllDay){const o=new Date(e.targetDate);o.setHours(0,0,0,0);const s=new Date(o);return{start:o,end:s}}let r;e.targetTime?(r=new Date(e.targetDate),r.setHours(e.targetTime.hour,e.targetTime.minute,0,0)):(r=new Date(e.targetDate),r.setHours(n.start.getHours(),n.start.getMinutes(),0,0));let i=t;n.isAllDay&&t===0?i=60*60*1e3:t===0&&(i=30*60*1e3);const a=new Date(r.getTime()+i);return{start:r,end:a}},_it=(n,e,t)=>{if(io(n.start,e.targetDate)&&!e.targetTime&&n.isAllDay===(e.isAllDay||!1))return!1;const{start:r,end:i}=XSe(n,e);return e.isAllDay?!0:t.filter(s=>s.id!==n.id&&io(s.start,r)).filter(s=>!s.isAllDay&&(r>=s.start&&r<s.end||i>s.start&&i<=s.end||r<=s.start&&i>=s.end)).length===0},Tit=n=>_n(n,"HH:mm"),Eit=n=>{const t=(n.end.getTime()-n.start.getTime())/(1e3*60);return t===0?30:Math.max(t,30)},j1=({event:n,style:e,onClick:t,children:r,className:i="",sourceView:a="week",onResize:o,onResizeMove:s})=>{const l=we.useRef(!1),c=Y.useRef(!1),u=Y.useRef(null),d=Y.useRef(0),h=Y.useRef(null),[f,m]=Y.useState(!1),[v,y]=Y.useState(!1),[w,S]=Y.useState(-1),[T,C]=Y.useState(null),k=Y.useRef(-1),{tasks:A}=Vt();we.useEffect(()=>{k.current=w},[w]),we.useEffect(()=>{const X=ie=>{ie.altKey&&(l.current=!0)},te=ie=>{ie.altKey||(l.current=!1)};return window.addEventListener("keydown",X),window.addEventListener("keyup",te),()=>{window.removeEventListener("keydown",X),window.removeEventListener("keyup",te)}},[]);const[{isDragging:D},P]=Zrt({type:"event",item:()=>{const X=Eit(n),te=n.end.getTime()-n.start.getTime(),ie=l.current;return te===0&&console.log("Creating drag item for zero-duration event:",{eventId:n.id,actualDuration:te,displayDurationMinutes:X,start:n.start,end:n.end}),ie&&console.log("🔄 Alt+Drag detected - will duplicate task:",n.title,"in view:",a,"isAllDay:",n.isAllDay),{type:"event",event:n,sourceDate:n.start,sourceView:a,displayDurationMinutes:X,isDuplicate:ie}},collect:X=>({isDragging:X.isDragging()}),canDrag:()=>n.isDraggable!==!1&&!c.current}),N=(X,te,ie)=>ie?0:Math.ceil((te+X)/5)*5,R=(X,te)=>{if(X.stopPropagation(),n.isAllDay||n.isDraggable===!1)return;const ie=A.findIndex(z=>z.id===n.taskId);ie!==-1&&(S(ie),k.current=ie,c.current=!0,u.current=te,d.current=X.clientY,h.current={...n},document.addEventListener("mousemove",L),document.addEventListener("mouseup",B))},L=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let ie=new Date;if(u.current==="top"){ie=new Date(h.current.start);const z=N(ie.getMinutes(),te,n.isAllDay);ie.setMinutes(z),ie<h.current.end&&(s==null||s(k.current,"top",ie))}else{ie=new Date(h.current.end);const z=N(ie.getMinutes(),te,n.isAllDay);ie.setMinutes(z),ie>h.current.start&&(s==null||s(k.current,"bottom",ie))}},B=X=>{if(!c.current||!u.current||!h.current)return;const te=X.clientY-d.current;let ie=new Date;if(u.current==="top"){ie=new Date(h.current.start);const z=N(ie.getMinutes(),te,n.isAllDay);ie.setMinutes(z),ie<h.current.end&&(o==null||o(n,"top",ie))}else{ie=new Date(h.current.end);const z=N(ie.getMinutes(),te,n.isAllDay);ie.setMinutes(z),ie>h.current.start&&(o==null||o(n,"bottom",ie)),C(setTimeout(()=>{C(null)},200))}c.current=!1,u.current=null,h.current=null,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",B)},$=X=>{X.stopPropagation(),!c.current&&!T&&(t==null||t(n))},G=X=>{X.altKey&&(l.current=!0)},W=r||x.jsxs("div",{className:"text-xs text-white font-medium truncate px-2 py-1",children:[!n.isAllDay&&x.jsx("div",{className:"text-[10px] opacity-80",children:Tit(n.start)}),x.jsx("div",{className:"truncate",children:n.title})]}),K=!n.isAllDay&&n.isDraggable!==!1&&o;return x.jsxs("div",{ref:n.isDraggable!==!1?P:null,className:`
        task-item relative rounded cursor-pointer transition-all duration-200
        ${D?"opacity-60 dragging shadow-lg":"hover:shadow-md"}
        ${n.isDraggable!==!1?"cursor-grab active:cursor-grabbing":"cursor-pointer"}
        ${i}
      `,style:{backgroundColor:n.color,border:D?`2px solid ${n.color}`:"none",...e},onClick:$,onMouseDown:G,children:[K&&x.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>R(X,"top"),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:f&&x.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),W,K&&x.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize z-10",onMouseDown:X=>R(X,"bottom"),onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:v&&x.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-1 bg-white rounded-full opacity-70"})}),D&&x.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-10 rounded border border-white border-opacity-30"})]})},CD=({date:n,hour:e,minute:t=0,isAllDay:r=!1,onDrop:i,children:a,className:o="",style:s})=>{const[{isOver:l,canDrop:c,draggedItem:u},d]=ait({accept:"event",drop:m=>{const v={targetDate:n,targetTime:e!==void 0?{hour:e,minute:t}:void 0,isAllDay:r};return i(m,v),v},collect:m=>({isOver:m.isOver(),canDrop:m.canDrop(),draggedItem:m.getItem()})}),h=()=>{if(!u||r)return"auto";const m=u.displayDurationMinutes,y=m/60*60,w=`${Math.max(y,30)}px`;return m===30&&console.log("Zero-duration event detected:",{originalStart:u.event.start,originalEnd:u.event.end,displayDurationMinutes:m,calculatedHeight:w}),w},f=()=>u&&u.event.color||"#3B82F6";return x.jsxs("div",{ref:d,className:`drop-zone ${o} transition-all duration-200 relative`,style:s,children:[a,l&&x.jsx("div",{className:`absolute pointer-events-none rounded-md transition-all duration-200 drop-indicator ${c?"valid":"invalid"}`,style:{top:0,left:0,right:0,height:h(),border:`1px solid ${c?f():"#EF4444"}`,backgroundColor:c?`${f()}15`:"#FEF2F2",borderStyle:"solid",boxSizing:"border-box","--drop-color":f(),"--drop-bg-color":`${f()}15`}})]})},eoe=Array.from({length:24},(n,e)=>e),Ait=60,IA=64,Qs=200,ZSe=Y.forwardRef(({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onDragCreate:a,onEventDrop:o,onEventResize:s,onEventResizeMove:l,onDateRangeChange:c,clearDragIndicator:u},d)=>{const{projects:h}=Vt(),[f,m]=Y.useState(()=>{const ve=Ec(n,-24),de=Ec(n,24),me=n.getDay(),xe=me===0?6:me-1,pe=Ec(n,-xe),$e=new Date(pe);$e.setHours(0,0,0,0);const ct=(Math.floor(($e.getTime()-ve.getTime())/(1e3*60*60*24))+1)*Qs;return{startDate:ve,centerDate:n,endDate:de,scrollOffset:ct}}),v=Math.floor((f.endDate.getTime()-f.startDate.getTime())/(1e3*60*60*24))+1,y=Array.from({length:v},(ve,de)=>Ec(f.startDate,de)),[w,S]=Y.useState({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),[T,C]=Y.useState({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0}),k=Y.useRef(null),A=Y.useRef(null),D=Y.useRef(null),P=Y.useRef(!1),N=Y.useRef(0),R=Y.useRef(!1),L=Y.useCallback(()=>Ait,[]),B=Y.useCallback(()=>{const ve=localStorage.getItem("lastUsedProjectId")||"no-project",de=h.find(me=>me.id===ve);return(de==null?void 0:de.color)||"#EF4444"},[h]),$=Y.useCallback(ve=>{const de=Math.floor(ve/Qs)-1,me=Ec(f.startDate,de),xe=Ec(me,3);m(We=>Math.abs(We.scrollOffset-ve)<10?We:{...We,centerDate:xe,scrollOffset:ve});const pe=me,$e=Ec(me,6);c&&c(pe,$e)},[f.startDate,c]),G=Y.useCallback(ve=>{if(P.current||!R.current)return;const de=ve.currentTarget.scrollLeft;requestAnimationFrame(()=>{$(de)});const me=Date.now();if(me-N.current<1e3)return;const pe=ve.currentTarget.offsetWidth,$e=ve.currentTarget.scrollWidth,We=Qs*3,ct=$e-pe-Qs*3;de<We?(N.current=me,W("left")):de>ct&&(N.current=me,W("right"))},[$]),W=Y.useCallback(ve=>{k.current&&m(de=>{if(ve==="left"){const me=Ec(de.startDate,-7),xe=de.scrollOffset+Qs*7;return setTimeout(()=>{k.current&&!P.current&&(P.current=!0,k.current.scrollLeft=xe,setTimeout(()=>{P.current=!1},0))},0),{...de,startDate:me,scrollOffset:xe}}else{const me=Ec(de.endDate,7);return{...de,endDate:me}}})},[]),K=Y.useCallback((ve,de=!0)=>{if(!k.current)return;const xe=(Math.floor((ve.getTime()-f.startDate.getTime())/(1e3*60*60*24))+1)*Qs;if(P.current=!0,de){const pe=k.current.style.scrollBehavior;k.current.style.scrollBehavior="smooth",k.current.scrollTo({left:xe,behavior:"smooth"}),setTimeout(()=>{k.current&&(k.current.style.scrollBehavior=pe||"auto"),P.current=!1},400)}else k.current.scrollLeft=xe,P.current=!1},[f.startDate]);Y.useEffect(()=>{if(Math.abs((n.getTime()-f.centerDate.getTime())/864e5)>28&&!P.current){const de=th(n,{weekStartsOn:1});P.current=!0,m(me=>({...me,centerDate:n})),K(de,!0),setTimeout(()=>{P.current=!1},300)}},[n]),Y.useEffect(()=>{k.current&&f.scrollOffset>0&&!R.current?(k.current.scrollLeft=f.scrollOffset,R.current=!0):R.current||(R.current=!0)},[]);const X=ve=>e.filter(de=>io(de.start,ve)&&!de.isAllDay),te=ve=>e.filter(de=>io(de.start,ve)&&de.isAllDay),ie=()=>Math.max(...y.map(ve=>te(ve).length),1),z=()=>{const ve=ie();return Math.max(40,ve*26+12)},se=ve=>{const de=L(),me=ve.start.getHours()+ve.start.getMinutes()/60,pe=ve.end.getHours()+ve.end.getMinutes()/60-me,$e=pe===0?de*.5:Math.max(pe*de,de*.5);return{position:"absolute",top:`${me*de+2}px`,height:`${$e-4}px`,left:"4px",right:"4px",backgroundColor:ve.color,zIndex:10}},ce=Y.useCallback((ve,de,me)=>{const xe=parseInt(ve.getAttribute("data-hour")||"0"),pe=ve.getBoundingClientRect(),$e=Math.floor(de/pe.height*60),We=Math.round($e/15)*15,ct=xe*60+We,xt=new Date(y[me]);return xt.setHours(Math.floor(ct/60),ct%60,0,0),xt},[y]),ee=Y.useCallback(ve=>{if(ve.target!==ve.currentTarget)return;const de=ve.currentTarget,me=parseInt(de.getAttribute("data-day")||"0"),xe=de.getBoundingClientRect(),pe=ve.clientY-xe.top,$e=ce(de,pe,me);S({isDragging:!0,startElement:de,startY:pe,startTime:$e,dayIndex:me}),C({visible:!0,top:pe+parseInt(de.getAttribute("data-hour")||"0")*L()+80+z(),height:1,startTime:$e,endTime:$e,dayIndex:me}),ve.preventDefault()},[ce,L]),be=Y.useCallback(ve=>{var yn;if(!w.isDragging||!w.startElement||!D.current||!k.current)return;const de=k.current.scrollLeft,me=k.current.getBoundingClientRect(),xe=100,pe=5,$e=ve.clientX-me.left;$e<xe&&de>0?k.current.scrollLeft-=pe:$e>me.width-xe&&(k.current.scrollLeft+=pe);const We=ve.clientX-me.left+de-IA,ct=Math.floor(We/Qs),xt=Math.max(0,Math.min(ct,y.length-1)),pn=D.current.querySelectorAll(".day-column")[xt];if(!pn)return;const Yt=(yn=pn.querySelector('[data-hour="0"]'))==null?void 0:yn.parentElement;if(!Yt)return;const Rn=Yt.getBoundingClientRect(),vn=ve.clientY-Rn.top,Fn=L(),je=Math.floor(vn/Fn),an=pn.querySelector(`[data-hour="${je}"]`);if(an){const Te=an.getBoundingClientRect(),Oe=ve.clientY-Te.top,et=ce(an,Oe,xt),Ne=w.startY+parseInt(w.startElement.getAttribute("data-hour")||"0")*Fn,Je=vn,pt=Math.min(Ne,Je),Kt=Math.abs(Je-Ne);C(vt=>({...vt,top:pt+80+z(),height:Math.max(Kt,30),endTime:et>w.startTime?et:w.startTime,startTime:et>w.startTime?w.startTime:et,dayIndex:xt}))}},[w,ce,L,y.length]),fe=Y.useCallback(()=>{if(!w.isDragging||!T.startTime||!T.endTime){S({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0}),C(de=>({...de,visible:!1}));return}T.endTime.getTime()-T.startTime.getTime()>=15*60*1e3&&(a==null||a(T.startTime,T.endTime)),S({isDragging:!1,startElement:null,startY:0,startTime:null,dayIndex:0})},[w,T,a]);Y.useEffect(()=>{if(w.isDragging)return document.addEventListener("mousemove",be),document.addEventListener("mouseup",fe),()=>{document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",fe)}},[w.isDragging,be,fe]);const De=(ve,de)=>!ve||!de?"":`${_n(ve,"HH:mm")} - ${_n(de,"HH:mm")}`;Y.useEffect(()=>{u&&C({visible:!1,top:0,height:0,startTime:null,endTime:null,dayIndex:0})},[u]);const dt=Y.useCallback(ve=>{if(!k.current)return;if(ve==="today"){const At=th(new Date,{weekStartsOn:1});K(At,!0);return}const de=k.current.scrollLeft,me=Math.floor(de/Qs),xe=Ec(f.startDate,me),pe=Ec(xe,3),$e=th(pe,{weekStartsOn:1}),ct=exe($e,ve==="next"?1:-1);K(ct,!0)},[f.startDate,K]);return Y.useImperativeHandle(d,()=>({navigateWeek:dt,scrollToDate:K}),[dt,K]),x.jsx("div",{className:"calendar-week-container flex flex-col h-full w-full bg-background-primary dark:bg-[#141414]",children:x.jsx("div",{className:"h-full w-full",children:x.jsx("div",{ref:k,className:"h-full overflow-auto scrollbar-thin",onScroll:G,style:{width:"100%",maxWidth:"100%",scrollBehavior:"auto",WebkitOverflowScrolling:"touch",scrollSnapType:"none",overscrollBehavior:"auto",scrollbarWidth:"thin"},children:x.jsxs("div",{ref:A,className:"relative",style:{width:`${IA+v*Qs}px`,minHeight:"100vh",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:[x.jsxs("div",{className:"flex bg-background-primary dark:bg-[#141414] border-b border-border sticky top-0 z-30",style:{height:"80px",transform:"translateZ(0)"},children:[x.jsx("div",{className:"sticky left-0 z-40 border-r border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",style:{width:`${IA}px`,transform:"translateZ(0)"},children:"GMT+07"}),y.map((ve,de)=>x.jsxs("div",{className:`calendar-week-day-header flex flex-col items-center justify-center py-3 bg-background-primary dark:bg-[#141414] border-r border-border ${cw(ve)?"bg-primary bg-opacity-5":""}`,style:{minWidth:`${Qs}px`,width:`${Qs}px`,flexShrink:0},children:[x.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:_n(ve,"EEE").toUpperCase()}),x.jsx("div",{className:`text-lg font-medium ${cw(ve)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:_n(ve,"d")})]},de))]}),x.jsxs("div",{className:"flex bg-background-primary dark:bg-[#141414] border-b border-border sticky z-30",style:{height:`${z()}px`,top:"80px",transform:"translateZ(0)"},children:[x.jsx("div",{className:"sticky left-0 z-40 border-r border-border flex items-center justify-center text-xs text-text-secondary bg-background-primary dark:bg-[#141414]",style:{width:`${IA}px`,transform:"translateZ(0)"},children:"All day"}),y.map((ve,de)=>x.jsx("div",{className:"relative border-r border-border",style:{minWidth:`${Qs}px`,width:`${Qs}px`,flexShrink:0},children:x.jsx(CD,{date:ve,isAllDay:!0,onDrop:o,className:"h-full cursor-pointer hover:bg-background-container transition-colors relative",children:x.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:me=>{me.target===me.currentTarget&&(i==null||i(ve))},children:te(ve).map(me=>x.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:x.jsx(j1,{event:me,onClick:t,sourceView:"week",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${me.isTask?"border-l-2 border-white border-opacity-50":""} ${me.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:me.color,position:"relative",width:"100%",height:"100%"},children:x.jsx("div",{className:"flex items-center text-white w-full",children:x.jsx("span",{className:`truncate ${me.isCompleted?"line-through":""}`,children:me.title})})})},me.id))})})},de))]}),x.jsxs("div",{className:"flex bg-background-primary dark:bg-[#141414]",style:{minHeight:"calc(100vh - 160px)"},children:[x.jsx("div",{className:"sticky left-0 z-20 bg-background-primary dark:bg-[#141414] border-r border-border flex flex-col",style:{width:`${IA}px`,transform:"translateZ(0)"},children:eoe.map(ve=>x.jsx("div",{className:"flex-1 min-h-[60px] border-b border-border flex items-start justify-center pt-1",children:x.jsx("span",{className:"text-xs text-text-secondary",children:_n(new Date().setHours(ve,0),"HH:mm")})},ve))}),x.jsx("div",{className:"flex",ref:D,children:y.map((ve,de)=>x.jsxs("div",{className:"calendar-week-day-column relative day-column flex flex-col border-r border-border",style:{minWidth:`${Qs}px`,width:`${Qs}px`,flexShrink:0},children:[eoe.map(me=>x.jsx(CD,{date:ve,hour:me,onDrop:o,className:"flex-1 min-h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:x.jsx("div",{className:"w-full h-full","data-day":de,"data-hour":me,onMouseDown:ee,onClick:xe=>{if(xe.target===xe.currentTarget&&!w.isDragging){const pe=new Date(ve);pe.setHours(me,0,0,0);const $e=new Date(pe),We=new Date(pe);We.setHours(We.getHours()+1),C({visible:!0,top:me*L()+80+z(),height:L(),startTime:$e,endTime:We,dayIndex:de}),r==null||r(pe)}}})},me)),T.visible&&T.dayIndex===de&&x.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${T.top-80-z()+2}px`,height:`${T.height-4}px`,left:"4px",right:"4px",backgroundColor:B(),opacity:.7},children:x.jsx("div",{className:"text-xs text-white font-medium",children:De(T.startTime,T.endTime)})}),X(ve).map(me=>x.jsx(j1,{event:me,onClick:t,sourceView:"week",onResize:s,onResizeMove:l,className:`rounded absolute ${me.isTask?"border-l-4":""} ${me.isCompleted?"calendar-event-completed":""}`,style:{...se(me),borderLeftColor:me.isTask?me.color:void 0},children:x.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[x.jsx("div",{className:`task-item-title ${me.isCompleted?"line-through":""}`,children:me.title}),x.jsxs("div",{className:"task-item-time",children:[_n(me.start,"HH:mm")," - ",_n(me.end,"HH:mm")]}),!me.isTask&&me.description&&x.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${me.isCompleted?"text-gray-400":""}`,children:me.description})]})},me.id)),cw(ve)&&x.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*L()+new Date().getMinutes()/60*L()}px`,left:0,right:0,zIndex:15}})]},de))})]})]})})})})});ZSe.displayName="ScrollableWeekView";const toe=Array.from({length:24},(n,e)=>e),kit=60,Cit=({currentDate:n,events:e,onEventClick:t,onTimeSlotClick:r,onAllDayClick:i,onDragCreate:a,onEventDrop:o,clearDragIndicator:s})=>{const{projects:l}=Vt(),[c,u]=Y.useState({isDragging:!1,startElement:null,startY:0,startTime:null}),[d,h]=Y.useState({visible:!1,top:0,height:0,startTime:null,endTime:null}),f=Y.useRef(null),m=Y.useCallback(()=>f.current?f.current.offsetHeight/24:kit,[]),v=Y.useCallback(()=>{const N=localStorage.getItem("lastUsedProjectId")||"no-project",R=l.find(L=>L.id===N);return(R==null?void 0:R.color)||"#EF4444"},[l]),y=()=>e.filter(N=>io(N.start,n)&&!N.isAllDay),w=()=>e.filter(N=>io(N.start,n)&&N.isAllDay),S=()=>{const N=w().length;return Math.max(40,N*26+12)},T=N=>{const R=m(),L=N.start.getHours()+N.start.getMinutes()/60,$=N.end.getHours()+N.end.getMinutes()/60-L,G=$===0?R*.5:Math.max($*R,R*.5);return{position:"absolute",top:`${L*R+2}px`,height:`${G-4}px`,left:"4px",right:"4px",backgroundColor:N.color,zIndex:10}},C=Y.useCallback((N,R)=>{const L=parseInt(N.getAttribute("data-hour")||"0"),B=N.getBoundingClientRect(),$=Math.floor(R/B.height*60),G=Math.round($/15)*15,W=L*60+G,K=new Date(n);return K.setHours(Math.floor(W/60),W%60,0,0),K},[n]),k=Y.useCallback(N=>{if(N.target!==N.currentTarget)return;const R=N.currentTarget,L=R.getBoundingClientRect(),B=N.clientY-L.top,$=C(R,B);u({isDragging:!0,startElement:R,startY:B,startTime:$}),h({visible:!0,top:B+parseInt(R.getAttribute("data-hour")||"0")*m(),height:1,startTime:$,endTime:$}),N.preventDefault()},[C,m]),A=Y.useCallback(N=>{if(!c.isDragging||!c.startElement||!f.current)return;const R=f.current.getBoundingClientRect(),L=N.clientY-R.top,B=m(),$=Math.floor(L/B),G=f.current.querySelector(`[data-hour="${$}"]`);if(G){const W=G.getBoundingClientRect(),K=N.clientY-W.top,X=C(G,K),te=c.startY+parseInt(c.startElement.getAttribute("data-hour")||"0")*B,ie=L,z=Math.min(te,ie),se=Math.abs(ie-te);h(ce=>({...ce,top:z,height:Math.max(se,30),endTime:X>c.startTime?X:c.startTime,startTime:X>c.startTime?c.startTime:X}))}},[c,C,m]),D=Y.useCallback(N=>{if(!c.isDragging||!d.startTime||!d.endTime){u({isDragging:!1,startElement:null,startY:0,startTime:null}),h(L=>({...L,visible:!1}));return}d.endTime.getTime()-d.startTime.getTime()>=15*60*1e3&&(a==null||a(d.startTime,d.endTime)),u({isDragging:!1,startElement:null,startY:0,startTime:null})},[c,d,a]);we.useEffect(()=>{if(c.isDragging)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",D),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)}},[c.isDragging,A,D]);const P=(N,R)=>!N||!R?"":`${_n(N,"HH:mm")} - ${_n(R,"HH:mm")}`;return we.useEffect(()=>{s&&h({visible:!1,top:0,height:0,startTime:null,endTime:null})},[s]),x.jsx("div",{className:"flex flex-col h-full w-full",children:x.jsxs("div",{className:"flex flex-col h-full w-full",children:[x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] sticky top-0 z-20 border-b border-border",children:x.jsxs("div",{className:"grid w-full",style:{gridTemplateColumns:"64px 1fr"},children:[x.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary py-3 border-r border-border",children:"GMT+07"}),x.jsxs("div",{className:"flex flex-col items-center justify-center py-3",children:[x.jsx("div",{className:"text-xs text-text-secondary font-medium mb-1",children:_n(n,"EEE").toUpperCase()}),x.jsx("div",{className:`text-lg font-medium ${cw(n)?"text-primary bg-primary text-white rounded-full w-8 h-8 flex items-center justify-center":"text-text-primary"}`,children:_n(n,"d")})]})]})}),x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-b border-border",children:x.jsxs("div",{className:"grid w-full",style:{gridTemplateColumns:"64px 1fr"},children:[x.jsx("div",{className:"flex items-center justify-center text-xs text-text-secondary border-r border-border",style:{height:`${S()}px`},children:"All day"}),x.jsx(CD,{date:n,isAllDay:!0,onDrop:o,className:"cursor-pointer hover:bg-background-container transition-colors relative",style:{height:`${S()}px`},children:x.jsx("div",{className:"w-full h-full flex flex-col items-center justify-start px-1 pt-1 pb-2 overflow-hidden",onClick:N=>{N.target===N.currentTarget&&(i==null||i(n))},children:w().map((N,R)=>x.jsx("div",{className:"flex-shrink-0 relative w-full",style:{height:"24px",marginBottom:"2px",minWidth:0},children:x.jsx(j1,{event:N,onClick:t,sourceView:"day",className:`absolute inset-0 px-2 py-1 text-xs rounded truncate flex items-center ${N.isTask?"border-l-2 border-white border-opacity-50":""} ${N.isCompleted?"calendar-event-completed":""}`,style:{backgroundColor:N.color,position:"relative",width:"100%",height:"100%"},children:x.jsx("div",{className:"flex items-center text-white w-full",children:x.jsx("span",{className:`truncate ${N.isCompleted?"line-through":""}`,children:N.title})})})},N.id))})})]})}),x.jsx("div",{className:"flex-1 overflow-auto scrollbar-thin relative bg-background-primary dark:bg-[#141414]",children:x.jsxs("div",{className:"grid h-full w-full",style:{gridTemplateColumns:"64px 1fr",gridTemplateRows:"1fr"},children:[x.jsx("div",{className:"bg-background-primary dark:bg-[#141414] border-r border-border flex flex-col",children:toe.map(N=>x.jsx("div",{className:"flex-1 min-h-[60px] border-b border-border flex items-start justify-center pt-1",children:x.jsx("span",{className:"text-xs text-text-secondary",children:_n(new Date().setHours(N,0),"HH:mm")})},N))}),x.jsxs("div",{className:"relative flex flex-col",ref:f,children:[toe.map(N=>x.jsx(CD,{date:n,hour:N,onDrop:o,className:"flex-1 min-h-[60px] border-b border-border cursor-cell hover:bg-background-container hover:bg-opacity-50 relative",children:x.jsx("div",{className:"w-full h-full","data-day":0,"data-hour":N,onMouseDown:k,onClick:R=>{if(R.target===R.currentTarget&&!c.isDragging){const L=new Date(n);L.setHours(N,0,0,0);const B=new Date(L),$=new Date(L);$.setHours($.getHours()+1),h({visible:!0,top:N*m(),height:m(),startTime:B,endTime:$}),r==null||r(L)}}})},N)),d.visible&&x.jsx("div",{className:"absolute rounded pointer-events-none z-20 pl-0.5 pr-1 py-1",style:{top:`${d.top+2}px`,height:`${d.height-4}px`,left:"4px",right:"4px",backgroundColor:v(),opacity:.7},children:x.jsx("div",{className:"text-xs text-white font-medium",children:P(d.startTime,d.endTime)})}),y().map(N=>x.jsx(j1,{event:N,onClick:t,sourceView:"day",className:`rounded absolute ${N.isTask?"border-l-4":""} ${N.isCompleted?"calendar-event-completed":""}`,style:{...T(N),borderLeftColor:N.isTask?N.color:void 0},children:x.jsxs("div",{className:"pl-0.5 pr-1 py-1",children:[x.jsx("div",{className:`task-item-title ${N.isCompleted?"line-through":""}`,children:N.title}),x.jsxs("div",{className:"task-item-time",children:[_n(N.start,"HH:mm")," - ",_n(N.end,"HH:mm")]}),!N.isTask&&N.description&&x.jsx("div",{className:`text-xs opacity-75 mt-1 truncate text-white ${N.isCompleted?"text-gray-400":""}`,children:N.description})]})},N.id)),cw(n)&&x.jsx("div",{className:"current-time-indicator absolute",style:{top:`${new Date().getHours()*m()+new Date().getMinutes()/60*m()}px`,left:0,right:0,zIndex:15}})]})]})})]})})},Dit=({currentDate:n,events:e,onEventClick:t,onDateClick:r,onEventDrop:i,onDayViewClick:a})=>{const[o,s]=Y.useState({}),l=Y.useRef(null),c=Y.useRef([]),u=Y.useRef([]),d=()=>{const D=th(nxe(n),{weekStartsOn:1}),P=qW(txe(n),{weekStartsOn:1});return e2({start:D,end:P})},h=D=>e.filter(P=>io(P.start,D)).sort((P,N)=>P.isAllDay&&!N.isAllDay?-1:!P.isAllDay&&N.isAllDay?1:P.start.getTime()-N.start.getTime()),f=Y.useCallback((D,P)=>{if(!P)return{isOverflowing:!1,visibleEvents:0,hiddenCount:0};const N=P.querySelectorAll(".month-view-event"),R=P.clientHeight;if(R<=0)return{isOverflowing:!1,visibleEvents:0,hiddenCount:0};if(N.length===0)return{isOverflowing:!1,visibleEvents:0,hiddenCount:0};let L=0,B=0;const G=R-24;for(let te=0;te<N.length&&B+22<=G;te++)L++,B+=22;if(L===N.length&&L*22<=R)return{isOverflowing:!1,visibleEvents:L,hiddenCount:0};const W=N.length,K=Math.max(0,W-L),X=K>0;return D<2&&console.log(`Cell ${D} overflow:`,{containerHeight:R,availableHeight:G,totalEvents:W,visibleEvents:L,hiddenCount:K,isOverflowing:X}),{isOverflowing:X,visibleEvents:L,hiddenCount:K}},[]),m=d(),v=Math.ceil(m.length/7);Y.useEffect(()=>{c.current=Array(m.length).fill(null),u.current=Array(m.length).fill(null)},[m.length]);const[y,w]=Y.useState(!1),[S,T]=Y.useState(0),C=Y.useCallback((D=!1)=>{y&&!D||(w(!0),requestAnimationFrame(()=>{const P={};D&&(console.log("Force recalculation: showing all hidden events"),u.current.forEach((R,L)=>{if(R){const B=R.querySelectorAll(".month-view-event.hidden");console.log(`Cell ${L}: Found ${B.length} hidden events to show`),B.forEach($=>{$.classList.remove("hidden")})}}));const N=()=>{u.current.forEach((R,L)=>{if(R){const B=f(L,R);P[L]=B}}),s(R=>D?(console.log("Forced recalculation - updating overflow data",P),{...R,...P}):Object.keys(P).some(B=>{const $=parseInt(B),G=R[$],W=P[$],K=!G||G.isOverflowing!==W.isOverflowing||G.visibleEvents!==W.visibleEvents||G.hiddenCount!==W.hiddenCount;return K&&$<3&&console.log(`Cell ${$} overflow changed:`,{prev:G,new:W}),K})?(console.log("Overflow data changed - updating state"),{...R,...P}):R),setTimeout(()=>w(!1),100)};D?setTimeout(N,10):N()}))},[f,y]);Y.useEffect(()=>{let D={};const P=new ResizeObserver(N=>{console.log(`ResizeObserver triggered with ${N.length} entries`);let R=!1;N.forEach(L=>{const B=L.target,$=parseInt(B.dataset.cellIndex||"0"),G=L.contentRect.width,W=L.contentRect.height,K=D[$];K?Math.abs(W-K.height)>20&&(R=!0,console.log(`Cell ${$} significant height change: ${K.height} -> ${W}`)):console.log(`Cell ${$} first size measurement: ${G}x${W}`),D[$]={width:G,height:W}}),R?(console.log("Significant size change detected - forcing recalculation"),C(!0)):(console.log("Normal resize detected - using debounced detection"),C(!1))});return u.current.forEach((N,R)=>{if(N){N.dataset.cellIndex=R.toString(),P.observe(N);const L=N.getBoundingClientRect();D[R]={width:L.width,height:L.height}}}),()=>P.disconnect()},[C,m.length]),Y.useEffect(()=>{let D;const P=()=>{console.log("Window resized - scheduling recalculation"),D&&clearTimeout(D),D=setTimeout(()=>{console.log("Starting window resize recalculation"),C(!0),setTimeout(()=>C(!0),200),setTimeout(()=>C(!0),500)},150)};return window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P),D&&clearTimeout(D)}},[C]);const k=Y.useCallback((D,P)=>{c.current[P]=D},[]),A=Y.useCallback((D,P)=>{u.current[P]=D,D&&(D.dataset.cellIndex=P.toString(),setTimeout(()=>{u.current[P]===D&&C()},50))},[C]);return Y.useEffect(()=>{const D=setTimeout(()=>{console.log("Component updated - triggering overflow recalculation"),C(!1)},100);return()=>clearTimeout(D)}),x.jsxs("div",{className:"w-full bg-background-primary h-full flex flex-col",children:[x.jsx("div",{className:"grid grid-cols-7 border-b border-border bg-background-primary sticky top-0 z-10",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map(D=>x.jsx("div",{className:"py-2 text-center text-sm font-medium text-text-secondary",children:D},D))}),x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsx("div",{ref:l,className:"grid grid-cols-7 border-l border-t border-border h-full",style:{gridTemplateRows:`repeat(${v}, minmax(140px, 1fr))`},children:m.map((D,P)=>{var G;const N=h(D),R=get(D,n),L=cw(D),B=N.filter(W=>W.isAllDay),$=N.filter(W=>!W.isAllDay);return x.jsx(CD,{date:D,isAllDay:!0,onDrop:i,className:`
                month-cell border-b border-r border-border p-1 cursor-pointer transition-colors relative z-0
                ${R?L?"bg-primary/5 text-text-primary":"bg-background-primary text-text-primary hover:bg-background-container/50":"bg-background-secondary/30 text-text-secondary"}
              `,children:x.jsxs("div",{ref:W=>k(W,P),className:"w-full h-full flex flex-col min-h-0",onClick:()=>r==null?void 0:r(D),children:[x.jsx("div",{className:"text-sm mb-1 flex-shrink-0",children:L?x.jsx("div",{className:"text-white bg-primary rounded-full w-6 h-6 flex items-center justify-center font-medium",children:_n(D,"d")}):x.jsx("div",{className:`font-medium ${R?"text-text-primary":"text-text-secondary/70"}`,children:_n(D,"d")})}),x.jsx("div",{ref:W=>A(W,P),className:"flex-1 min-h-0 h-full max-h-full relative overflow-hidden",children:x.jsxs("div",{className:"flex flex-col gap-[2px] h-full relative",children:[B.map((W,K)=>{const X=o[P],te=X&&K>=X.visibleEvents;return x.jsx(j1,{event:W,onClick:t,sourceView:"month",className:`month-view-event block w-full cursor-grab rounded text-xs px-2 py-1 flex items-center flex-shrink-0 ${R?W.isCompleted?"calendar-event-completed":"":"opacity-60"} ${te?"hidden":""}`,style:{backgroundColor:W.color,height:"20px",minHeight:"20px",maxHeight:"20px"},children:x.jsx("div",{className:`font-medium truncate leading-tight w-full text-white ${W.isCompleted?"line-through":""}`,title:W.title,children:W.title})},W.id)}),$.map((W,K)=>{const X=K+B.length,te=o[P],ie=te&&X>=te.visibleEvents;return x.jsx(j1,{event:W,onClick:t,sourceView:"month",className:`month-view-event block hover:bg-background-container rounded px-1 py-0.5 text-xs flex-shrink-0 ${R?W.isCompleted?"calendar-event-completed":"":"opacity-60"} ${ie?"hidden":""}`,style:{backgroundColor:"transparent",height:"20px",minHeight:"20px",maxHeight:"20px"},children:x.jsxs("div",{className:`flex items-center w-full leading-tight ${R?"text-text-primary":"text-text-secondary"}`,children:[x.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full mr-1 flex-shrink-0",style:{backgroundColor:W.color}}),x.jsxs("span",{className:`truncate ${W.isCompleted?"line-through":""}`,style:{textDecorationColor:W.isCompleted?R?"rgb(107, 114, 128)":"rgb(156, 163, 175)":void 0},children:[_n(W.start,"h:mm a")," ",W.title]})]})},W.id)}),((G=o[P])==null?void 0:G.isOverflowing)&&x.jsxs("div",{className:`text-xs cursor-pointer hover:text-primary px-1 py-0.5 flex-shrink-0 ${R?"text-gray-600":"text-gray-400 opacity-60"}`,onClick:W=>{W.stopPropagation(),a==null||a(D)},children:["+",o[P].hiddenCount," more"]})]})})]})},P)})})})]})};let noe=0;const Iit=2e3;let roe=!1;const QSe=()=>{const n=il(i=>i.loadExtensionData),e=il(i=>i.initializeFocusSync),t=Y.useCallback(async()=>{const i=Date.now();if(!(i-noe<Iit)){noe=i;try{await n()}catch{}}},[n]);return Y.useEffect(()=>{(async()=>{roe||(roe=!0,console.log("🚀 Initializing extension sync..."),await t(),setTimeout(async()=>{try{await e()}catch{}},100))})()},[]),Y.useEffect(()=>{const i=setInterval(t,3e5);return()=>clearInterval(i)},[t]),{refreshData:Y.useCallback(()=>{t()},[t])}},Mit=()=>{const[n,e]=Y.useState(new Date),[t,r]=Y.useState("week"),[i,a]=Y.useState([]),[o,s]=Y.useState(null),[l,c]=Y.useState(!1),[u,d]=Y.useState(null),[h,f]=Y.useState(!1),[m,v]=Y.useState(null),[y,w]=Y.useState(!1),[S,T]=Y.useState(null),C=fT(),k=Y.useRef(null),[A,D]=Y.useState([]),[P,N]=Y.useState([]),{tasks:R,projects:L,addTask:B,updateTask:$,setEditingTaskId:G,deleteTask:W,updateTaskLocally:K}=Vt(),{user:X}=Ht(),{hasCalendarAccess:te,requestCalendarAccess:ie,isCheckingAccess:z,token:se,refreshToken:ce}=Mq(),{performManualSync:ee,syncInProgress:be,syncEnabled:fe,syncError:De,lastSyncTime:dt}=iT(),[ve,de]=Y.useState(!1),me=Y.useMemo(()=>te&&se&&se.syncEnabled&&fe&&!De,[te,se,fe,De]),xe=Y.useMemo(()=>Sit(i,R,L),[i,R,L]),pe=Gg(),$e=ns(),{isLeftSidebarOpen:We,toggleLeftSidebar:ct}=dl(),xt=async()=>{if(!X){const{checkAuthenticationStatus:Ne,triggerAuthenticationFlow:Je}=await nn(async()=>{const{checkAuthenticationStatus:Kt,triggerAuthenticationFlow:vt}=await Promise.resolve().then(()=>t2);return{checkAuthenticationStatus:Kt,triggerAuthenticationFlow:vt}},void 0),pt=Ne();if(!pt.isAuthenticated&&pt.shouldShowAuth){Je();return}}if(te){if(se&&!se.syncEnabled)try{const{simpleGoogleOAuthService:Ne}=await nn(async()=>{const{simpleGoogleOAuthService:Je}=await Promise.resolve().then(()=>iye);return{simpleGoogleOAuthService:Je}},void 0);await Ne.toggleSync(!0),console.log("✅ Google Calendar sync re-enabled"),ce()}catch(Ne){console.error("Failed to re-enable sync:",Ne);return}}else try{await ie()}catch(Ne){console.error("Failed to request calendar access:",Ne);return}de(!1);try{await ee(),console.log("✅ Manual sync to Google Calendar completed"),de(!0)}catch(Ne){console.error("❌ Failed to sync to Google Calendar:",Ne)}};QSe(),Y.useEffect(()=>{(!fe||De)&&de(!1)},[fe,De]),Y.useEffect(()=>{const Je=new URLSearchParams($e.search).get("view");Je&&["day","week","month"].includes(Je)&&r(Je)},[$e.search]);const At=Y.useCallback(()=>{if(console.log("↩️ performUndo called, undo stack length:",A.length),A.length===0){console.log("❌ Undo stack is empty");return}const Ne=A[A.length-1],{taskId:Je,beforeState:pt,afterState:Kt}=Ne;console.log("🔄 Undoing action for task:",Je,"to state:",pt);const vt={...pt,scheduledDate:pt.scheduledDate===null?void 0:pt.scheduledDate,scheduledStartTime:pt.scheduledStartTime===null?void 0:pt.scheduledStartTime,scheduledEndTime:pt.scheduledEndTime===null?void 0:pt.scheduledEndTime};Kt.isNewlyCreated?W(Je).then(()=>{N(Sn=>[...Sn,Ne]),D(Sn=>Sn.slice(0,-1))}).catch(Sn=>{console.error("Failed to undo task creation:",Sn)}):$(Je,vt).then(()=>{N(Sn=>[...Sn,Ne]),D(Sn=>Sn.slice(0,-1))}).catch(Sn=>{console.error("Failed to undo task change:",Sn)})},[A,$]),pn=Y.useCallback(()=>{if(P.length===0)return;const Ne=P[P.length-1],{taskId:Je,afterState:pt}=Ne,Kt={...pt,scheduledDate:pt.scheduledDate===null?void 0:pt.scheduledDate,scheduledStartTime:pt.scheduledStartTime===null?void 0:pt.scheduledStartTime,scheduledEndTime:pt.scheduledEndTime===null?void 0:pt.scheduledEndTime};$(Je,Kt).then(()=>{D(vt=>[...vt,Ne]),N(vt=>vt.slice(0,-1))}).catch(vt=>{console.error("Failed to redo task change:",vt)})},[P,$]);Y.useEffect(()=>{const Ne=Je=>{const pt=Je.target;if(!(o||l||h||pt.tagName==="INPUT"||pt.tagName==="TEXTAREA"||pt.isContentEditable)){if(Je.metaKey&&Je.key.toLowerCase()==="z"){console.log("⌨️ Command+Z detected, shiftKey:",Je.shiftKey),Je.preventDefault(),Je.shiftKey?(console.log("🔄 Calling performRedo"),pn()):(console.log("↩️ Calling performUndo"),At());return}switch(Je.key.toLowerCase()){case"q":Je.preventDefault(),Yt("prev");break;case"e":Je.preventDefault(),Yt("next");break;case"arrowleft":Je.preventDefault(),Yt("prev");break;case"arrowright":Je.preventDefault(),Yt("next");break;case"d":Je.preventDefault(),r("day"),pe("/calendar?view=day");break;case"w":Je.preventDefault(),r("week"),pe("/calendar?view=week");break;case"m":Je.preventDefault(),r("month"),pe("/calendar?view=month");break}}};return document.addEventListener("keydown",Ne),()=>{document.removeEventListener("keydown",Ne)}},[o,l,h,t,n,At,pn]);const Yt=Ne=>{if(Ne==="today"){e(new Date),t==="week"&&k.current&&k.current.navigateWeek("today");return}const Je=Ne==="next"?1:-1;switch(t){case"month":e(WW(n,Je));break;case"week":k.current?k.current.navigateWeek(Ne):e(exe(n,Je));break;case"day":e(Ec(n,Je));break}},Rn=Ne=>{c(!1),d(null),f(!1),v(null),w(!0),setTimeout(()=>w(!1),100),Ne.isTask&&Ne.taskId?(s(Ne.taskId),G(Ne.taskId)):(s("new"),G("new"))},vn=Ne=>{if(!C.isAuthenticated&&C.shouldShowAuth){yf();return}s(null),G(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const Je=new Date(Ne),pt=new Date(Ne);pt.setHours(pt.getHours()+1);const vt=io(Je,new Date)?"pomodoro":"todo";v({startTime:Je,endTime:pt,status:vt,isAllDay:!1}),f(!0)},Fn=Ne=>{if(!C.isAuthenticated&&C.shouldShowAuth){yf();return}s(null),G(null),c(!1),d(null),w(!0),setTimeout(()=>w(!1),100);const Je=new Date(Ne);Je.setHours(0,0,0,0);const pt=new Date(Ne);pt.setHours(0,0,0,0);const vt=io(Je,new Date)?"pomodoro":"todo";v({startTime:Je,endTime:pt,status:vt,isAllDay:!0}),f(!0)},je=Ne=>{Fn(Ne)},an=Y.useCallback((Ne,Je)=>{if(!(Ne.isDuplicate===!0)&&!_it(Ne.event,Je,xe))return;const Kt=t==="month"?Ne.event.isAllDay:Je.isAllDay||!1,{start:vt,end:Sn}=XSe(Ne.event,{...Je,isAllDay:Kt}),on={...Ne.event,start:vt,end:Sn,isAllDay:Kt};if(Ne.event.isTask&&Ne.event.taskId){const Jt=R.find(Cr=>Cr.id===Ne.event.taskId);if(Jt){if(Ne.isDuplicate){if(!C.isAuthenticated&&C.shouldShowAuth){yf();return}console.log("🔄 Duplicating task:",Jt.title);const ne={title:Jt.title,description:Jt.description||"",status:Jt.status,projectId:Jt.projectId,userId:(X==null?void 0:X.uid)||Jt.userId,timeEstimated:Jt.timeEstimated,scheduledDate:`${vt.getFullYear()}-${String(vt.getMonth()+1).padStart(2,"0")}-${String(vt.getDate()).padStart(2,"0")}`,includeTime:!Kt,completed:!1,timeSpent:0};Kt||(ne.scheduledStartTime=vt.toTimeString().substring(0,5),ne.scheduledEndTime=Sn.toTimeString().substring(0,5)),io(vt,new Date)&&Jt.status==="todo"&&(ne.status="pomodoro"),io(Ne.event.start,new Date)&&!io(vt,new Date)&&(t==="week"||t==="month")&&Jt.status==="pomodoro"&&(ne.status="todo"),B(ne).then(qe=>{console.log("✅ Task duplicated successfully with ID:",qe);const nt={taskId:qe,beforeState:{scheduledDate:null,scheduledStartTime:null,scheduledEndTime:null,includeTime:!1,status:"todo"},afterState:{scheduledDate:ne.scheduledDate||null,scheduledStartTime:ne.scheduledStartTime||null,scheduledEndTime:ne.scheduledEndTime||null,includeTime:!!ne.includeTime,status:ne.status,isNewlyCreated:!0}};console.log("🔄 Adding duplication action to undo stack:",nt),D(_t=>{const ot=[..._t,nt];return console.log("📚 Undo stack updated after duplication, length:",ot.length),ot}),N([])}).catch(qe=>{console.error("❌ Failed to duplicate task:",qe)});return}const Cr={scheduledDate:Jt.scheduledDate||null,scheduledStartTime:Jt.scheduledStartTime||null,scheduledEndTime:Jt.scheduledEndTime||null,includeTime:Jt.includeTime||!1,status:Jt.status},hn={scheduledDate:`${vt.getFullYear()}-${String(vt.getMonth()+1).padStart(2,"0")}-${String(vt.getDate()).padStart(2,"0")}`,includeTime:!Kt};Kt?(hn.scheduledStartTime=null,hn.scheduledEndTime=null):(hn.scheduledStartTime=vt.toTimeString().substring(0,5),hn.scheduledEndTime=Sn.toTimeString().substring(0,5)),io(vt,new Date)&&Jt.status==="todo"&&(hn.status="pomodoro"),io(Ne.event.start,new Date)&&!io(vt,new Date)&&(t==="week"||t==="month")&&Jt.status==="pomodoro"&&(hn.status="todo");const bn={scheduledDate:hn.scheduledDate,scheduledStartTime:hn.scheduledStartTime,scheduledEndTime:hn.scheduledEndTime,includeTime:hn.includeTime,status:hn.status||Jt.status},Ue={taskId:Jt.id,beforeState:Cr,afterState:bn};console.log("🔄 Adding action to undo stack:",Ue),D(ne=>{const oe=[...ne,Ue];return console.log("📚 Undo stack updated, length:",oe.length),oe}),N([]),$(Jt.id,hn).catch(ne=>{console.error("Failed to update task scheduling:",ne),D(oe=>oe.slice(0,-1))})}}else a(i.map(Jt=>Jt.id===Ne.event.id?on:Jt))},[xe,i,R,t]),yn=Y.useCallback((Ne,Je)=>{if(!C.isAuthenticated&&C.shouldShowAuth){yf();return}s(null),G(null),f(!1),v(null);const Kt=io(Ne,new Date)?"pomodoro":"todo";d({startTime:Ne,endTime:Je,status:Kt}),c(!0)},[C]),Te=Y.useCallback((Ne,Je)=>{T({startDate:Ne,endDate:Je}),t==="week"&&e(Ne)},[t,n]),Oe=Y.useCallback((Ne,Je,pt)=>{if(!Ne.isTask||!Ne.taskId){a(i.map(hn=>{if(hn.id===Ne.id){const Si={...hn};return Je==="top"?Si.start=pt:Si.end=pt,Si}return hn}));return}const Kt=R.find(hn=>hn.id===Ne.taskId);if(!Kt)return;const vt={scheduledDate:Kt.scheduledDate||null,scheduledStartTime:Kt.scheduledStartTime||null,scheduledEndTime:Kt.scheduledEndTime||null,includeTime:Kt.includeTime||!1,status:Kt.status},Sn={},on=pt.toTimeString().substring(0,5);Je==="top"?Sn.scheduledStartTime=on:Sn.scheduledEndTime=on;const Jt={...vt,scheduledStartTime:Je==="top"?on:vt.scheduledStartTime,scheduledEndTime:Je==="bottom"?on:vt.scheduledEndTime},Cr={taskId:Kt.id,beforeState:vt,afterState:Jt};D(hn=>[...hn,Cr]),N([]),$(Kt.id,Sn).catch(hn=>{console.error("Failed to resize task:",hn),D(Si=>Si.slice(0,-1))})},[i,R,$]),et=(Ne,Je,pt)=>{if(!R[Ne])return;const vt={};Je==="top"?vt.scheduledStartTime=pt.toTimeString().substring(0,5):vt.scheduledEndTime=pt.toTimeString().substring(0,5),K(Ne,vt)};return x.jsx(Art,{backend:bit,children:x.jsxs("div",{className:"calendar-main-container flex flex-col h-full bg-background-primary dark:bg-[#141414]",children:[x.jsxs("div",{className:"calendar-header h-16 border-b border-border px-4 flex items-center justify-between bg-background-secondary",children:[x.jsxs("div",{className:"flex items-center space-x-4",children:[!We&&x.jsx("button",{onClick:ct,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"menu-line",size:20})})}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("button",{onClick:()=>Yt("prev"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-left-s-line"})})}),x.jsx("button",{onClick:()=>Yt("next"),className:"p-1.5 rounded-full hover:bg-background-container text-text-secondary hover:text-text-primary",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx("i",{className:"ri-arrow-right-s-line"})})})]}),x.jsx(yj,{size:"medium",showLabel:!1,showPageTitle:!0,pageTitle:_n(n,"MMMM yyyy")})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[me?null:x.jsxs("button",{onClick:xt,disabled:be||z,className:"flex items-center gap-2 px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",title:X?se?te?se&&!se.syncEnabled?"Enable sync and sync tasks to Google Calendar":be?"Syncing...":De?"Sync failed - click to retry":"Sync tasks to Google Calendar":"Grant Google Calendar access to sync tasks":"Connect Google Calendar account to sync tasks":"Sign in to sync tasks to Google Calendar",children:[be?x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx("div",{className:"animate-spin w-3 h-3 border border-current border-t-transparent rounded-full"})}):De?x.jsx("svg",{className:"w-4 h-4 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:x.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-1 15h2v-2h-2v2zm0-4h2V7h-2v6z"})}):x.jsx("img",{src:"/icons/Google_Calendar_logo.png",alt:"Google Calendar",className:"w-4 h-4"}),x.jsx("span",{className:"hidden sm:inline",children:be?"Syncing...":De?"Retry Sync":"Sync to Google Calendar"}),x.jsx("span",{className:"sm:hidden",children:be?"Syncing...":De?"Retry":"Sync"})]}),x.jsx("button",{onClick:()=>Yt("today"),className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container",children:"Today"}),x.jsxs("div",{className:"inline-flex rounded-full bg-background-container p-1",children:[x.jsx("button",{type:"button",onClick:()=>r("day"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="day"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Day"}),x.jsx("button",{type:"button",onClick:()=>r("week"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="week"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Week"}),x.jsx("button",{type:"button",onClick:()=>r("month"),className:`inline-flex items-center px-4 py-1.5 text-sm font-medium rounded-full ${t==="month"?"bg-background-primary text-text-primary shadow-sm":"text-text-secondary hover:text-text-primary"}`,children:"Month"})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${$e.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:$e.pathname==="/pomodoro"?void 0:()=>pe("/pomodoro"),"aria-label":$e.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${$e.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:$e.pathname==="/projects"?void 0:()=>pe("/projects"),"aria-label":$e.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${$e.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:$e.pathname==="/dashboard"?void 0:()=>pe("/dashboard"),"aria-label":$e.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${$e.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:$e.pathname==="/calendar"?void 0:()=>pe("/calendar"),"aria-label":$e.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${$e.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:$e.pathname==="/deep-focus"?void 0:()=>pe("/deep-focus"),"aria-label":$e.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"brain-line",size:20})})})})]})]}),x.jsxs("div",{className:"flex-1 overflow-hidden custom-scrollbar",children:[t==="week"&&x.jsx("div",{className:"h-full w-full",children:x.jsx(ZSe,{ref:k,currentDate:n,events:xe,onEventClick:Rn,onTimeSlotClick:vn,onAllDayClick:Fn,onDragCreate:yn,onEventDrop:an,onEventResize:Oe,onEventResizeMove:et,onDateRangeChange:Te,clearDragIndicator:y})}),t==="day"&&x.jsx(Cit,{currentDate:n,events:xe,onEventClick:Rn,onTimeSlotClick:vn,onAllDayClick:Fn,onDragCreate:yn,onEventDrop:an,clearDragIndicator:y}),t==="month"&&x.jsx(Dit,{currentDate:n,events:xe,onEventClick:Rn,onDateClick:je,onEventDrop:an,onDayViewClick:Ne=>{e(Ne),r("day")}})]}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(Kv,{task:o==="new"?void 0:R.find(Ne=>Ne.id===o),onCancel:()=>{s(null),G(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{s(null),G(null),w(!0),setTimeout(()=>w(!1),100)},isCalendarContext:!0})})}),l&&u&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(Kv,{initialStartTime:u.startTime,initialEndTime:u.endTime,status:u.status,onCancel:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)},onSave:()=>{c(!1),d(null),w(!0),setTimeout(()=>w(!1),100)},isCalendarContext:!0})})}),h&&m&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-background-secondary rounded-lg shadow-xl max-w-md w-full mx-4",children:x.jsx(Kv,{initialStartTime:m.startTime,initialEndTime:m.endTime,status:m.status,isAllDay:m.isAllDay,onCancel:()=>{f(!1),v(null)},onSave:()=>{f(!1),v(null)},isCalendarContext:!0})})})]})})},Pit=()=>{const{isLeftSidebarOpen:n}=dl();return Y.useEffect(()=>{console.log("🔧 Calendar: Sidebar state changed",{isLeftSidebarOpen:n,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const e=document.getElementById("sidebar");e&&(console.log("🔧 Calendar: Sidebar element found",{currentWidth:e.style.width,className:e.className,isOpen:n}),e.style.display="flex",n?(e.style.width="16rem",e.classList.remove("w-0"),e.classList.add("w-64")):(e.style.width="0px",e.classList.remove("w-64"),e.classList.add("w-0")))})},[n]),x.jsxs("div",{className:"calendar-page-container flex h-screen overflow-hidden bg-background-primary dark:bg-[#141414]",children:[x.jsx(Pw,{}),x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsx(Mit,{})})]})},ioe=n=>Math.floor((new Date().getTime()-n.getTime())/(1e3*60)),aoe=n=>{const{workSessions:e,dailySiteUsages:t,deepFocusSessions:r,overrideSessions:i}=n,a=t.reduce((f,m)=>f+Math.round(m.totalTime/(1e3*60)),0),o=e.reduce((f,m)=>f+m.duration,0),s=r.reduce((f,m)=>f+(m.status!=="active"?m.duration:ioe(m.startTime)),0),l=i.reduce((f,m)=>f+m.duration,0),c={onScreenTime:a,workingTime:o,deepFocusTime:s,overrideTime:l},u=new Map;t.forEach(f=>{u.has(f.date)||u.set(f.date,{date:f.date,onScreenTime:0,workingTime:0,deepFocusTime:0});const m=u.get(f.date);m.onScreenTime+=Math.round(f.totalTime/(1e3*60))}),e.forEach(f=>{u.has(f.date)||u.set(f.date,{date:f.date,onScreenTime:0,workingTime:0,deepFocusTime:0});const m=u.get(f.date);m.workingTime+=f.duration}),r.forEach(f=>{if(f.duration!==void 0||f.status==="active"){const m=f.startTime.toISOString().split("T")[0];u.has(m)||u.set(m,{date:m,onScreenTime:0,workingTime:0,deepFocusTime:0});const v=u.get(m);f.status!=="active"?v.deepFocusTime+=f.duration:v.deepFocusTime+=ioe(f.startTime)}});const d=Array.from(u.values()).sort((f,m)=>f.date.localeCompare(m.date)),{siteUsage:h}=Rt.mapArrSiteUsage(t);return{timeMetrics:c,dailyUsage:d,siteUsage:h}},Nit=uh()(DI((n,e)=>({timeMetrics:{onScreenTime:0,workingTime:0,deepFocusTime:0,overrideTime:0},dailyUsage:[],siteUsage:[],comparisonData:null,isLoading:!1,isLoadingComparison:!1,loadExtensionData:async(t,r)=>{try{if(!Rt.isExtensionInstalled()){console.warn("⚠️ Extension not installed - skipping data load");return}const i=Ht.getState().user;if(!(i!=null&&i.uid)){console.warn("⚠️ User not authenticated - skipping extension data load");return}n({isLoading:!0});const a=i.uid,o=await ji.getWorkSessionsForRange(a,t,r),s=await Dc.getDailyUsage(a,t,r),l=await Mc.getUserSessions(a,t,r),c=await Xd.getUserOverrides(a,t,r),u=aoe({workSessions:o,dailySiteUsages:s,deepFocusSessions:l,overrideSessions:c});n({timeMetrics:u.timeMetrics,dailyUsage:u.dailyUsage,siteUsage:u.siteUsage})}catch(i){console.error("Extension data loading failed:",i)}finally{n({isLoading:!1})}},loadAllTimeExtensionData:async()=>{try{if(!Rt.isExtensionInstalled()){console.warn("⚠️ Extension not installed - skipping all time data load");return}const t=Ht.getState().user;if(!(t!=null&&t.uid)){console.warn("⚠️ User not authenticated - skipping all time extension data load");return}n({isLoading:!0});const r=t.uid,i=await ji.getAllWorkSessions(r),a=await Dc.getAllTimeDailyUsage(r),o=await Mc.getUserSessions(r),s=await Xd.getUserOverrides(r),l=aoe({workSessions:i,dailySiteUsages:a,deepFocusSessions:o,overrideSessions:s});n({timeMetrics:l.timeMetrics,siteUsage:l.siteUsage,dailyUsage:l.dailyUsage})}catch(t){console.error("Extension data all time loading failed:",t)}finally{n({isLoading:!1})}},loadComparisonData:async(t,r)=>{}}),{name:"deepFocusDashboardStore",partialize:n=>({timeMetrics:n.timeMetrics,dailyUsage:n.dailyUsage,siteUsage:n.siteUsage,comparisonData:n.comparisonData,isLoading:n.isLoading,isLoadingComparison:n.isLoadingComparison}),version:1}));async function JSe(n){console.log("🧪 Quick Override Test"),console.log("=====================");try{console.log("📝 Creating simple override session...");const e=await Xd.createOverrideSession({userId:n,domain:"test.com",duration:5,reason:"manual_override"});console.log("✅ Simple session created:",e),console.log("📝 Creating detailed override session...");const t=await Xd.createOverrideSession({userId:n,domain:"example.com",url:"https://example.com/page",duration:3,reason:"break_time"});console.log("✅ Detailed session created:",t),console.log("📖 Retrieving user override sessions...");const r=await Xd.getUserOverrides(n);console.log("✅ Retrieved sessions:",r.length),r.forEach((a,o)=>{console.log(`📋 Session ${o+1}:`,{domain:a.domain,duration:a.duration+"min",reason:a.reason,createdAt:a.createdAt.toISOString()})});const i=r.reduce((a,o)=>a+o.duration,0);return console.log("⏱️ Total override time:",i+" minutes"),console.log("🎉 Quick test completed successfully!"),{success:!0,totalSessions:r.length,totalMinutes:i}}catch(e){return console.error("❌ Quick test failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}typeof window<"u"&&(window.quickOverrideTest=JSe);const Rit={async testCreateSession(){const{user:n}=Ht.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={userId:n.uid,domain:"test-domain.com",duration:5,reason:"manual_override",timestamp:new Date};console.log("🔍 DEBUG: Testing override session creation with:",e);try{const t=await Xd.createOverrideSession(e);return console.log("✅ Test override session created successfully:",t),t}catch(t){throw console.error("❌ Test override session failed:",t),t}},testExtensionMessage(){const{user:n}=Ht.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for test");return}const e={domain:"extension-test.com",duration:5,userId:n.uid,timestamp:Date.now()};console.log("🔍 DEBUG: Testing extension message with:",e),window.postMessage({type:"RECORD_OVERRIDE_SESSION",payload:e,source:"make10000hours"},"*"),console.log("📤 Test extension message sent")},testUserSync(){var t,r;const{user:n}=Ht.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in for sync test");return}const e={userId:n.uid,userEmail:n.email||"",displayName:n.displayName||""};console.log("🔍 DEBUG: Testing user sync with:",e),window.postMessage({type:"SET_USER_ID",payload:e,source:"make10000hours"},"*"),typeof window.chrome<"u"&&((r=(t=window.chrome)==null?void 0:t.runtime)!=null&&r.sendMessage)&&(console.log("ℹ️ Chrome extension API available, but using window.postMessage bridge for security"),console.log("ℹ️ Direct chrome.runtime.sendMessage from web pages requires extension ID")),console.log("📤 Test user sync messages sent")},async getOverrideSessions(){const{user:n}=Ht.getState();if(!(n!=null&&n.uid)){console.error("❌ No user logged in");return}try{const e=await Xd.getUserOverrides(n.uid);return console.log("📋 Current override sessions:",e),e}catch(e){throw console.error("❌ Failed to get override sessions:",e),e}}};window.debugOverrideSession=Rit;const Oit={async testExtensionDetection(){var n;console.log("🔍 Testing extension detection..."),console.log("Extension installed:",Rt.isExtensionInstalled()),console.log("Chrome runtime available:",typeof((n=window.chrome)==null?void 0:n.runtime)<"u")},async testPostMessageCommunication(){console.log("📡 Testing postMessage communication...");try{const n=await Rt.testConnection();return console.log("PostMessage test result:",n),n}catch(n){return console.error("PostMessage test failed:",n),!1}},async testChromeRuntimeCommunication(){var n;if(console.log("🔗 Testing chrome.runtime communication..."),typeof((n=window.chrome)==null?void 0:n.runtime)>"u")return console.log("❌ Chrome runtime not available"),!1;try{const e=await window.chrome.runtime.sendMessage({type:"PING"});return console.log("Chrome runtime test result:",e),!0}catch(e){return console.error("Chrome runtime test failed:",e),!1}},async testConnection(){console.log("🧪 Running comprehensive connection test...");const n={extensionDetection:Rt.isExtensionInstalled(),postMessage:!1,chromeRuntime:!1,overall:!1};try{n.postMessage=await this.testPostMessageCommunication()}catch(e){console.error("PostMessage test error:",e)}try{n.chromeRuntime=await this.testChromeRuntimeCommunication()}catch(e){console.error("Chrome runtime test error:",e)}try{n.overall=await Rt.testConnection()}catch(e){console.error("Overall connection test error:",e)}return console.log("📊 Connection test results:",n),n},async ping(){console.log("🏓 Sending ping to extension..."),window.postMessage({type:"EXTENSION_PING",messageId:Math.random().toString(36),source:"make10000hours-webapp-debug"},"*");const n=e=>{var t;((t=e.data)==null?void 0:t.type)==="EXTENSION_PONG"&&(console.log("🏓 Received pong from extension:",e.data),window.removeEventListener("message",n))};window.addEventListener("message",n),setTimeout(()=>{window.removeEventListener("message",n),console.log("⏰ Ping timeout - no response from extension")},5e3)},checkExtensionStatusInUI(){const n=document.querySelectorAll('[class*="Extension"]');console.log("🖥️ Extension status elements found:",n.length),n.forEach((e,t)=>{console.log(`Element ${t}:`,e.textContent,e.className)})},async runFullDiagnostic(){console.log("🔧 Running full extension diagnostic..."),console.log("====================================="),await this.testExtensionDetection(),console.log("-------------------------------------");const n=await this.testConnection();console.log("-------------------------------------"),await this.ping(),console.log("-------------------------------------"),this.checkExtensionStatusInUI(),console.log("====================================="),console.log("📋 Diagnostic Summary:"),console.log("- Extension installed:",Rt.isExtensionInstalled()),console.log("- PostMessage working:",n.postMessage),console.log("- Chrome runtime working:",n.chromeRuntime),console.log("- Overall connection:",n.overall),n.overall||(console.log(""),console.log("💡 Troubleshooting tips:"),console.log("1. Make sure the Focus Time Tracker extension is installed and enabled"),console.log("2. Refresh the page and try again"),console.log("3. Check if the extension is working on other websites"),console.log("4. Try reloading the extension in chrome://extensions/"))}};window.debugExtensionCommunication=Oit;console.log("🔧 Extension communication debugger loaded. Use debugExtensionCommunication.runFullDiagnostic() to test.");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K9=function(n,e){return K9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},K9(n,e)};function _e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");K9(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Lit=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),jit=function(){function n(){this.browser=new Lit,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Mn=new jit;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Mn.wxa=!0,Mn.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Mn.worker=!0:!Mn.hasGlobalWindow||"Deno"in window?(Mn.node=!0,Mn.svgSupported=!0):Fit(navigator.userAgent,Mn);function Fit(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var Fq=12,e_e="sans-serif",ly=Fq+"px "+e_e,$it=20,Bit=100,Uit="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Vit(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-$it)/Bit;e[r]=i}return e}var zit=Vit(Uit),cy={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=cy.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||ly),n.measureText(t);t=t||"",r=r||ly;var a=/((?:\d+)?\.?\d*)px/.exec(r),o=a&&+a[1]||Fq,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var l=0;l<t.length;l++){var c=zit[t[l]];s+=c==null?o:c*o}return{width:s}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},t_e=Of(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),n_e=Of(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),yT=Object.prototype.toString,Fj=Array.prototype,Hit=Fj.forEach,Git=Fj.filter,$q=Fj.slice,Wit=Fj.map,ooe=(function(){}).constructor,HP=ooe?ooe.prototype:null,Bq="__proto__",qit=2311;function r_e(){return qit++}function Uq(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Nt(n){if(n==null||typeof n!="object")return n;var e=n,t=yT.call(n);if(t==="[object Array]"){if(!nC(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Nt(n[r])}}else if(n_e[t]){if(!nC(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!t_e[t]&&!nC(n)&&!F1(n)){e={};for(var o in n)n.hasOwnProperty(o)&&o!==Bq&&(e[o]=Nt(n[o]))}return e}function sn(n,e,t){if(!It(e)||!It(n))return t?Nt(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==Bq){var i=n[r],a=e[r];It(a)&&It(i)&&!Fe(a)&&!Fe(i)&&!F1(a)&&!F1(i)&&!soe(a)&&!soe(i)&&!nC(a)&&!nC(i)?sn(i,a,t):(t||!(r in n))&&(n[r]=Nt(e[r]))}return n}function Vq(n,e){for(var t=n[0],r=1,i=n.length;r<i;r++)t=sn(t,n[r],e);return t}function Me(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==Bq&&(n[t]=e[t]);return n}function Dt(n,e,t){for(var r=Ln(e),i=0,a=r.length;i<a;i++){var o=r[i];(t?e[o]!=null:n[o]==null)&&(n[o]=e[o])}return n}function mn(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function Yit(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Ia(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else Dt(n,e,t)}function Ns(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function Z(n,e,t){if(n&&e)if(n.forEach&&n.forEach===Hit)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function Be(n,e,t){if(!n)return[];if(!e)return zq(n);if(n.map&&n.map===Wit)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function Of(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function vr(n,e,t){if(!n)return[];if(!e)return zq(n);if(n.filter&&n.filter===Git)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function Kit(n,e,t){if(n&&e){for(var r=0,i=n.length;r<i;r++)if(e.call(t,n[r],r,n))return n[r]}}function Ln(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function Xit(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat($q.call(arguments)))}}var ut=HP&&kt(HP.bind)?HP.call.bind(HP.bind):Xit;function Qt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat($q.call(arguments)))}}function Fe(n){return Array.isArray?Array.isArray(n):yT.call(n)==="[object Array]"}function kt(n){return typeof n=="function"}function st(n){return typeof n=="string"}function X9(n){return yT.call(n)==="[object String]"}function rr(n){return typeof n=="number"}function It(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function soe(n){return!!t_e[yT.call(n)]}function ql(n){return!!n_e[yT.call(n)]}function F1(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function $j(n){return n.colorStops!=null}function Zit(n){return n.image!=null}function Qit(n){return yT.call(n)==="[object RegExp]"}function DD(n){return n!==n}function Io(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function Wt(n,e){return n??e}function Df(n,e,t){return n??e??t}function zq(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return $q.apply(n,e)}function Hq(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function pl(n,e){if(!n)throw new Error(e)}function Qd(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var i_e="__ec_primitive__";function s2(n){n[i_e]=!0}function nC(n){return n[i_e]}var Jit=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return Ln(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),a_e=typeof Map=="function";function eat(){return a_e?new Map:new Jit}var tat=function(){function n(e){var t=Fe(e);this.data=eat();var r=this;e instanceof n?e.each(i):e&&Z(e,i);function i(a,o){t?r.set(a,o):r.set(o,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return a_e?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function yt(n){return new tat(n)}function ID(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function Bj(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&Me(t,e),t}function o_e(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function ft(n,e){return n.hasOwnProperty(e)}function ma(){}var pR=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z9=function(n,e){return Z9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Z9(n,e)};function pi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Z9(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Zw(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function tl(n,e){return n[0]=e[0],n[1]=e[1],n}function vg(n){return[n[0],n[1]]}function nat(n,e,t){return n[0]=e,n[1]=t,n}function loe(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function Q9(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n}function Kb(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function J9(n){return Math.sqrt(rat(n))}function rat(n){return n[0]*n[0]+n[1]*n[1]}function gR(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function bT(n,e){var t=J9(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function eH(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var Lv=eH;function iat(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var uw=iat;function mR(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function Zo(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function jv(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Fv(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var zS=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),aat=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new zS(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,t.drift(a,o,e),this.handler.dispatchToElement(new zS(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=s,t!==s&&(l&&s!==l&&this.handler.dispatchToElement(new zS(l,e),"dragleave",e.event),s&&s!==l&&this.handler.dispatchToElement(new zS(s,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new zS(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new zS(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}(),Xu=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},c=a[e].length-1,u=a[e][c];return u&&u.callAtLast?a[e].splice(c,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=i.length,l=0;l<s;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=t[o-1],l=i.length,c=0;c<l;c++){var u=i[c];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(o){case 0:u.h.call(s);break;case 1:u.h.call(s,t[0]);break;case 2:u.h.call(s,t[0],t[1]);break;default:u.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}(),oat=Math.log(2);function tH(n,e,t,r,i,a){var o=r+"-"+i,s=n.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var l=Math.round(Math.log((1<<s)-1&~i)/oat);return n[t][l]}for(var c=r|1<<t,u=t+1;r&1<<u;)u++;for(var d=0,h=0,f=0;h<s;h++){var m=1<<h;m&i||(d+=(f%2?-1:1)*n[t][h]*tH(n,e-1,u,c,i|m,a),f++)}return a[o]=d,d}function coe(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=tH(t,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*tH(t,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(l,c,u){var d=c*a[6]+u*a[7]+1;l[0]=(c*a[0]+u*a[1]+a[2])/d,l[1]=(c*a[3]+u*a[4]+a[5])/d}}}var uoe="___zrEVENTSAVED",GB=[];function sat(n,e,t,r,i){return nH(GB,e,r,i,!0)&&nH(n,t,GB[0],GB[1])}function nH(n,e,t,r,i){if(e.getBoundingClientRect&&Mn.domSupported&&!s_e(e)){var a=e[uoe]||(e[uoe]={}),o=lat(e,a),s=cat(o,a,i);if(s)return s(n,t,r),!0}return!1}function lat(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,c=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[c]+":0",r[1-l]+":auto",i[1-c]+":auto",""].join("!important;"),n.appendChild(o),t.push(o)}return t}function cat(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,h=u.left,f=u.top;o.push(h,f),l=l&&a&&h===a[d]&&f===a[d+1],s.push(n[c].offsetLeft,n[c].offsetTop)}return l&&i?i:(e.srcCoords=o,e[r]=t?coe(s,o):coe(o,s))}function s_e(n){return n.nodeName.toUpperCase()==="CANVAS"}var uat=/([&<>"'])/g,dat={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function al(n){return n==null?"":(n+"").replace(uat,function(e,t){return dat[t]})}var hat=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,WB=[],fat=Mn.browser.firefox&&+Mn.browser.version.split(".")[0]<39;function rH(n,e,t,r){return t=t||{},r?doe(n,e,t):fat&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):doe(n,e,t),t}function doe(n,e,t){if(Mn.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(s_e(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(nH(WB,n,r,i)){t.zrX=WB[0],t.zrY=WB[1];return}}t.zrX=t.zrY=0}function Gq(n){return n||window.event}function ku(n,e,t){if(e=Gq(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&rH(n,o,e,t)}else{rH(n,e,e,t);var a=pat(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&hat.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function pat(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function iH(n,e,t,r){n.addEventListener(e,t,r)}function gat(n,e,t,r){n.removeEventListener(e,t,r)}var Mg=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function hoe(n){return n.which===2||n.which===3}var mat=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,s=i.length;o<s;o++){var l=i[o],c=rH(r,l,{});a.points.push([c.zrX,c.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in qB)if(qB.hasOwnProperty(t)){var r=qB[t](this._track,e);if(r)return r}},n}();function foe(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function vat(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var qB={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=foe(r)/foe(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=vat(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:n[0].target,event:e}}}}};function Bc(){return[1,0,0,1,0,0]}function Uj(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Wq(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function yg(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=l,n}function Lf(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function Qw(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],o=e[4],s=e[1],l=e[3],c=e[5],u=Math.sin(t),d=Math.cos(t);return n[0]=i*d+s*u,n[1]=-i*u+s*d,n[2]=a*d+l*u,n[3]=-a*u+d*l,n[4]=d*(o-r[0])+u*(c-r[1])+r[0],n[5]=d*(c-r[1])-u*(o-r[0])+r[1],n}function qq(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function wT(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],l=t*o-a*r;return l?(l=1/l,n[0]=o*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*s-o*i)*l,n[5]=(a*i-t*s)*l,n):null}function yat(n){var e=Bc();return Wq(e,n),e}var ln=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}(),GP=Math.min,WP=Math.max,Z0=new ln,Q0=new ln,J0=new ln,eb=new ln,MA=new ln,PA=new ln,dn=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=GP(e.x,this.x),r=GP(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=WP(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=WP(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=Bc();return Lf(a,a,[-t.x,-t.y]),qq(a,a,[r,i]),Lf(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,h=!(a<l||c<i||s<u||d<o);if(t){var f=1/0,m=0,v=Math.abs(a-l),y=Math.abs(c-i),w=Math.abs(s-u),S=Math.abs(d-o),T=Math.min(v,y),C=Math.min(w,S);a<l||c<i?T>m&&(m=T,v<y?ln.set(PA,-v,0):ln.set(PA,y,0)):T<f&&(f=T,v<y?ln.set(MA,v,0):ln.set(MA,-y,0)),s<u||d<o?C>m&&(m=C,w<S?ln.set(PA,0,-w):ln.set(PA,0,S)):T<f&&(f=T,w<S?ln.set(MA,0,w):ln.set(MA,0,-S))}return t&&ln.copy(t,h?MA:PA),h},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*i+o,e.y=t.y*a+s,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Z0.x=J0.x=t.x,Z0.y=eb.y=t.y,Q0.x=eb.x=t.x+t.width,Q0.y=J0.y=t.y+t.height,Z0.transform(r),eb.transform(r),Q0.transform(r),J0.transform(r),e.x=GP(Z0.x,Q0.x,J0.x,eb.x),e.y=GP(Z0.y,Q0.y,J0.y,eb.y);var l=WP(Z0.x,Q0.x,J0.x,eb.x),c=WP(Z0.y,Q0.y,J0.y,eb.y);e.width=l-e.x,e.height=c-e.y},n}(),l_e="silent";function bat(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:wat}}function wat(){Mg(this.event)}var xat=function(n){pi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Xu),NA=function(){function n(e,t){this.x=e,this.y=t}return n}(),Sat=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],YB=new dn(0,0,0,0),c_e=function(n){pi(e,n);function e(t,r,i,a,o){var s=n.call(this)||this;return s._hovered=new NA(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new xat,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new aat(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Z(Sat,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=u_e(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new NA(r,i):this.findHover(r,i),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),s&&c!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==s&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new NA(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=bat(r,t,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),o=new NA(t,r);if(poe(a,o,t,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,c=l/2,u=new dn(t-c,r-c,l,l),d=a.length-1;d>=0;d--){var h=a[d];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(YB.copy(h.getBoundingRect()),h.transform&&YB.applyTransform(h.transform),YB.intersect(u)&&s.push(h))}if(s.length)for(var f=4,m=Math.PI/12,v=Math.PI*2,y=0;y<c;y+=f)for(var w=0;w<v;w+=m){var S=t+y*Math.cos(w),T=r+y*Math.sin(w);if(poe(s,o,S,T,i),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new mat);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;t.gestureEvent=o;var s=new NA;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(Xu);Z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){c_e.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=u_e(this,t,r),a,o;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),o=a.target),n==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(n==="mouseup")this._upEl=o;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||Lv(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function _at(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?l_e:!0}return!1}function poe(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var o=n[a],s=void 0;if(o!==i&&!o.ignore&&(s=_at(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==l_e)){e.target=o;break}}}function u_e(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var d_e=32,RA=7;function Tat(n){for(var e=0;n>=d_e;)e|=n&1,n>>=1;return n+e}function goe(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;Eat(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function Eat(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function moe(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],o=e,s=r,l;o<s;)l=o+s>>>1,i(a,n[l])<0?s=l:o=l+1;var c=r-o;switch(c){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;c>0;)n[o+c]=n[o+c-1],c--}n[o]=a}}function KB(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])>0){for(s=r-i;l<s&&a(n,e[t+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(n,e[t+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])>0?o=u+1:l=u}return l}function XB(n,e,t,r,i,a){var o=0,s=0,l=1;if(a(n,e[t+i])<0){for(s=i+1;l<s&&a(n,e[t+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var c=o;o=i-l,l=i-c}else{for(s=r-i;l<s&&a(n,e[t+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var u=o+(l-o>>>1);a(n,e[t+u])<0?l=u:o=u+1}return l}function Aat(n,e){var t=RA,r,i,a=0,o=[];r=[],i=[];function s(f,m){r[a]=f,i[a]=m,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;u(f)}}function c(){for(;a>1;){var f=a-2;f>0&&i[f-1]<i[f+1]&&f--,u(f)}}function u(f){var m=r[f],v=i[f],y=r[f+1],w=i[f+1];i[f]=v+w,f===a-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),a--;var S=XB(n[y],n,m,v,0,e);m+=S,v-=S,v!==0&&(w=KB(n[m+v-1],n,y,w,w-1,e),w!==0&&(v<=w?d(m,v,y,w):h(m,v,y,w)))}function d(f,m,v,y){var w=0;for(w=0;w<m;w++)o[w]=n[f+w];var S=0,T=v,C=f;if(n[C++]=n[T++],--y===0){for(w=0;w<m;w++)n[C+w]=o[S+w];return}if(m===1){for(w=0;w<y;w++)n[C+w]=n[T+w];n[C+y]=o[S];return}for(var k=t,A,D,P;;){A=0,D=0,P=!1;do if(e(n[T],o[S])<0){if(n[C++]=n[T++],D++,A=0,--y===0){P=!0;break}}else if(n[C++]=o[S++],A++,D=0,--m===1){P=!0;break}while((A|D)<k);if(P)break;do{if(A=XB(n[T],o,S,m,0,e),A!==0){for(w=0;w<A;w++)n[C+w]=o[S+w];if(C+=A,S+=A,m-=A,m<=1){P=!0;break}}if(n[C++]=n[T++],--y===0){P=!0;break}if(D=KB(o[S],n,T,y,0,e),D!==0){for(w=0;w<D;w++)n[C+w]=n[T+w];if(C+=D,T+=D,y-=D,y===0){P=!0;break}}if(n[C++]=o[S++],--m===1){P=!0;break}k--}while(A>=RA||D>=RA);if(P)break;k<0&&(k=0),k+=2}if(t=k,t<1&&(t=1),m===1){for(w=0;w<y;w++)n[C+w]=n[T+w];n[C+y]=o[S]}else{if(m===0)throw new Error;for(w=0;w<m;w++)n[C+w]=o[S+w]}}function h(f,m,v,y){var w=0;for(w=0;w<y;w++)o[w]=n[v+w];var S=f+m-1,T=y-1,C=v+y-1,k=0,A=0;if(n[C--]=n[S--],--m===0){for(k=C-(y-1),w=0;w<y;w++)n[k+w]=o[w];return}if(y===1){for(C-=m,S-=m,A=C+1,k=S+1,w=m-1;w>=0;w--)n[A+w]=n[k+w];n[C]=o[T];return}for(var D=t;;){var P=0,N=0,R=!1;do if(e(o[T],n[S])<0){if(n[C--]=n[S--],P++,N=0,--m===0){R=!0;break}}else if(n[C--]=o[T--],N++,P=0,--y===1){R=!0;break}while((P|N)<D);if(R)break;do{if(P=m-XB(o[T],n,f,m,m-1,e),P!==0){for(C-=P,S-=P,m-=P,A=C+1,k=S+1,w=P-1;w>=0;w--)n[A+w]=n[k+w];if(m===0){R=!0;break}}if(n[C--]=o[T--],--y===1){R=!0;break}if(N=y-KB(n[S],o,0,y,y-1,e),N!==0){for(C-=N,T-=N,y-=N,A=C+1,k=T+1,w=0;w<N;w++)n[A+w]=o[k+w];if(y<=1){R=!0;break}}if(n[C--]=n[S--],--m===0){R=!0;break}D--}while(P>=RA||N>=RA);if(R)break;D<0&&(D=0),D+=2}if(t=D,t<1&&(t=1),y===1){for(C-=m,S-=m,A=C+1,k=S+1,w=m-1;w>=0;w--)n[A+w]=n[k+w];n[C]=o[T]}else{if(y===0)throw new Error;for(k=C-(y-1),w=0;w<y;w++)n[k+w]=o[w]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:s}}function vR(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<d_e){a=goe(n,t,r,e),moe(n,t,r,t+a,e);return}var o=Aat(n,e),s=Tat(i);do{if(a=goe(n,t,r,e),a<s){var l=i;l>s&&(l=s),moe(n,t,t+l,t+a,e),a=l}o.pushRun(t,a),o.mergeRuns(),i-=a,t+=a}while(i!==0);o.forceMergeRuns()}}var Rc=1,kk=2,w_=4,voe=!1;function ZB(){voe||(voe=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function yoe(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var kat=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=yoe}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,vR(r,yoe)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),l=0;l<s.length;l++){var c=s[l];e.__dirty&&(c.__dirty|=Rc),this._updateAndAddDisplayable(c,t,r)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(ZB(),u.z=0),isNaN(u.z2)&&(ZB(),u.z2=0),isNaN(u.zlevel)&&(ZB(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var f=e.getTextContent();f&&this._updateAndAddDisplayable(f,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=mn(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),l2;l2=Mn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var rC={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-rC.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?rC.bounceIn(n*2)*.5:rC.bounceOut(n*2-1)*.5+.5}},qP=Math.pow,Zv=Math.sqrt,c2=1e-8,h_e=1e-4,boe=Zv(3),YP=1/3,ff=Zw(),Pu=Zw(),Z_=Zw();function $v(n){return n>-c2&&n<c2}function f_e(n){return n>c2||n<-c2}function ao(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function woe(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function u2(n,e,t,r,i,a){var o=r+3*(e-t)-n,s=3*(t-e*2+n),l=3*(e-n),c=n-i,u=s*s-3*o*l,d=s*l-9*o*c,h=l*l-3*s*c,f=0;if($v(u)&&$v(d))if($v(s))a[0]=0;else{var m=-l/s;m>=0&&m<=1&&(a[f++]=m)}else{var v=d*d-4*u*h;if($v(v)){var y=d/u,m=-s/o+y,w=-y/2;m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w)}else if(v>0){var S=Zv(v),T=u*s+1.5*o*(-d+S),C=u*s+1.5*o*(-d-S);T<0?T=-qP(-T,YP):T=qP(T,YP),C<0?C=-qP(-C,YP):C=qP(C,YP);var m=(-s-(T+C))/(3*o);m>=0&&m<=1&&(a[f++]=m)}else{var k=(2*u*s-3*o*d)/(2*Zv(u*u*u)),A=Math.acos(k)/3,D=Zv(u),P=Math.cos(A),m=(-s-2*D*P)/(3*o),w=(-s+D*(P+boe*Math.sin(A)))/(3*o),N=(-s+D*(P-boe*Math.sin(A)))/(3*o);m>=0&&m<=1&&(a[f++]=m),w>=0&&w<=1&&(a[f++]=w),N>=0&&N<=1&&(a[f++]=N)}}return f}function p_e(n,e,t,r,i){var a=6*t-12*e+6*n,o=9*e+3*r-3*n-9*t,s=3*e-3*n,l=0;if($v(o)){if(f_e(a)){var c=-s/a;c>=0&&c<=1&&(i[l++]=c)}}else{var u=a*a-4*o*s;if($v(u))i[0]=-a/(2*o);else if(u>0){var d=Zv(u),c=(-a+d)/(2*o),h=(-a-d)/(2*o);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function uy(n,e,t,r,i,a){var o=(e-n)*i+n,s=(t-e)*i+e,l=(r-t)*i+t,c=(s-o)*i+o,u=(l-s)*i+s,d=(u-c)*i+c;a[0]=n,a[1]=o,a[2]=c,a[3]=d,a[4]=d,a[5]=u,a[6]=l,a[7]=r}function g_e(n,e,t,r,i,a,o,s,l,c,u){var d,h=.005,f=1/0,m,v,y,w;ff[0]=l,ff[1]=c;for(var S=0;S<1;S+=.05)Pu[0]=ao(n,t,i,o,S),Pu[1]=ao(e,r,a,s,S),y=uw(ff,Pu),y<f&&(d=S,f=y);f=1/0;for(var T=0;T<32&&!(h<h_e);T++)m=d-h,v=d+h,Pu[0]=ao(n,t,i,o,m),Pu[1]=ao(e,r,a,s,m),y=uw(Pu,ff),m>=0&&y<f?(d=m,f=y):(Z_[0]=ao(n,t,i,o,v),Z_[1]=ao(e,r,a,s,v),w=uw(Z_,ff),v<=1&&w<f?(d=v,f=w):h*=.5);return u&&(u[0]=ao(n,t,i,o,d),u[1]=ao(e,r,a,s,d)),Zv(f)}function Cat(n,e,t,r,i,a,o,s,l){for(var c=n,u=e,d=0,h=1/l,f=1;f<=l;f++){var m=f*h,v=ao(n,t,i,o,m),y=ao(e,r,a,s,m),w=v-c,S=y-u;d+=Math.sqrt(w*w+S*S),c=v,u=y}return d}function Co(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function aH(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function Dat(n,e,t,r,i){var a=n-2*e+t,o=2*(e-n),s=n-r,l=0;if($v(a)){if(f_e(o)){var c=-s/o;c>=0&&c<=1&&(i[l++]=c)}}else{var u=o*o-4*a*s;if($v(u)){var c=-o/(2*a);c>=0&&c<=1&&(i[l++]=c)}else if(u>0){var d=Zv(u),c=(-o+d)/(2*a),h=(-o-d)/(2*a);c>=0&&c<=1&&(i[l++]=c),h>=0&&h<=1&&(i[l++]=h)}}return l}function m_e(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function MD(n,e,t,r,i){var a=(e-n)*r+n,o=(t-e)*r+e,s=(o-a)*r+a;i[0]=n,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=t}function v_e(n,e,t,r,i,a,o,s,l){var c,u=.005,d=1/0;ff[0]=o,ff[1]=s;for(var h=0;h<1;h+=.05){Pu[0]=Co(n,t,i,h),Pu[1]=Co(e,r,a,h);var f=uw(ff,Pu);f<d&&(c=h,d=f)}d=1/0;for(var m=0;m<32&&!(u<h_e);m++){var v=c-u,y=c+u;Pu[0]=Co(n,t,i,v),Pu[1]=Co(e,r,a,v);var f=uw(Pu,ff);if(v>=0&&f<d)c=v,d=f;else{Z_[0]=Co(n,t,i,y),Z_[1]=Co(e,r,a,y);var w=uw(Z_,ff);y<=1&&w<d?(c=y,d=w):u*=.5}}return l&&(l[0]=Co(n,t,i,c),l[1]=Co(e,r,a,c)),Zv(d)}function Iat(n,e,t,r,i,a,o){for(var s=n,l=e,c=0,u=1/o,d=1;d<=o;d++){var h=d*u,f=Co(n,t,i,h),m=Co(e,r,a,h),v=f-s,y=m-l;c+=Math.sqrt(v*v+y*y),s=f,l=m}return c}var Mat=/cubic-bezier\(([0-9,\.e ]+)\)/;function Yq(n){var e=n&&Mat.exec(n);if(e){var t=e[1].split(","),r=+Qd(t[0]),i=+Qd(t[1]),a=+Qd(t[2]),o=+Qd(t[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:u2(0,r,a,1,l,s)&&ao(0,i,o,1,s[0])}}}var Pat=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||ma,this.ondestroy=e.ondestroy||ma,this.onrestart=e.onrestart||ma,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=kt(e)?e:rC[e]||Yq(e)},n}(),y_e=function(){function n(e){this.value=e}return n}(),Nat=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new y_e(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),YI=function(){function n(e){this._list=new Nat,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=t:s=new y_e(t),s.key=e,r.insertEntry(s),i[e]=s}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),xoe={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function nh(n){return n=Math.round(n),n<0?0:n>255?255:n}function Rat(n){return n=Math.round(n),n<0?0:n>360?360:n}function PD(n){return n<0?0:n>1?1:n}function QB(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?nh(parseFloat(e)/100*255):nh(parseInt(e,10))}function dw(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?PD(parseFloat(e)/100):PD(parseFloat(e))}function JB(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Bv(n,e,t){return n+(e-n)*t}function Eu(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function oH(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var b_e=new YI(20),KP=null;function HS(n,e){KP&&oH(KP,e),KP=b_e.put(n,KP||e.slice())}function Uc(n,e){if(n){e=e||[];var t=b_e.get(n);if(t)return oH(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in xoe)return oH(e,xoe[r]),HS(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Eu(e,0,0,0,1);return}return Eu(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),HS(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Eu(e,0,0,0,1);return}return Eu(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),HS(n,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),c=r.substr(o+1,s-(o+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Eu(e,+c[0],+c[1],+c[2],1):Eu(e,0,0,0,1);u=dw(c.pop());case"rgb":if(c.length>=3)return Eu(e,QB(c[0]),QB(c[1]),QB(c[2]),c.length===3?u:dw(c[3])),HS(n,e),e;Eu(e,0,0,0,1);return;case"hsla":if(c.length!==4){Eu(e,0,0,0,1);return}return c[3]=dw(c[3]),sH(c,e),HS(n,e),e;case"hsl":if(c.length!==3){Eu(e,0,0,0,1);return}return sH(c,e),HS(n,e),e;default:return}}Eu(e,0,0,0,1)}}function sH(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=dw(n[1]),i=dw(n[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],Eu(e,nh(JB(o,a,t+1/3)*255),nh(JB(o,a,t)*255),nh(JB(o,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function Oat(n){if(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,s=(a+i)/2,l,c;if(o===0)l=0,c=0;else{s<.5?c=o/(a+i):c=o/(2-a-i);var u=((a-e)/6+o/2)/o,d=((a-t)/6+o/2)/o,h=((a-r)/6+o/2)/o;e===a?l=h-d:t===a?l=1/3+u-h:r===a&&(l=2/3+d-u),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,c,s];return n[3]!=null&&f.push(n[3]),f}}function lH(n,e){var t=Uc(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return bg(t,t.length===4?"rgba":"rgb")}}function e6(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){t=t||[];var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],l=r-i;return t[0]=nh(Bv(o[0],s[0],l)),t[1]=nh(Bv(o[1],s[1],l)),t[2]=nh(Bv(o[2],s[2],l)),t[3]=PD(Bv(o[3],s[3],l)),t}}function Lat(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Uc(e[i]),s=Uc(e[a]),l=r-i,c=bg([nh(Bv(o[0],s[0],l)),nh(Bv(o[1],s[1],l)),nh(Bv(o[2],s[2],l)),PD(Bv(o[3],s[3],l))],"rgba");return t?{color:c,leftIndex:i,rightIndex:a,value:r}:c}}function iC(n,e,t,r){var i=Uc(n);if(n)return i=Oat(i),e!=null&&(i[0]=Rat(e)),t!=null&&(i[1]=dw(t)),r!=null&&(i[2]=dw(r)),bg(sH(i),"rgba")}function d2(n,e){var t=Uc(n);if(t&&e!=null)return t[3]=PD(e),bg(t,"rgba")}function bg(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function h2(n,e){var t=Uc(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var Soe=new YI(100);function cH(n){if(st(n)){var e=Soe.get(n);return e||(e=lH(n,-.1),Soe.put(n,e)),e}else if($j(n)){var t=Me({},n);return t.colorStops=Be(n.colorStops,function(r){return{offset:r.offset,color:lH(r.color,-.1)}}),t}return n}var f2=Math.round;function ND(n){var e;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var t=Uc(n);t&&(n="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:n,opacity:e??1}}var _oe=1e-4;function Uv(n){return n<_oe&&n>-_oe}function XP(n){return f2(n*1e3)/1e3}function uH(n){return f2(n*1e4)/1e4}function jat(n){return"matrix("+XP(n[0])+","+XP(n[1])+","+XP(n[2])+","+XP(n[3])+","+uH(n[4])+","+uH(n[5])+")"}var Fat={left:"start",right:"end",center:"middle",middle:"middle"};function $at(n,e,t){return t==="top"?n+=e/2:t==="bottom"&&(n-=e/2),n}function Bat(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function Uat(n){var e=n.style,t=n.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function w_e(n){return n&&!!n.image}function Vat(n){return n&&!!n.svgElement}function Kq(n){return w_e(n)||Vat(n)}function x_e(n){return n.type==="linear"}function S_e(n){return n.type==="radial"}function __e(n){return n&&(n.type==="linear"||n.type==="radial")}function Vj(n){return"url(#"+n+")"}function T_e(n){var e=n.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function E_e(n){var e=n.x||0,t=n.y||0,r=(n.rotation||0)*pR,i=Wt(n.scaleX,1),a=Wt(n.scaleY,1),o=n.skewX||0,s=n.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+f2(o*pR)+"deg, "+f2(s*pR)+"deg)"),l.join(" ")}var zat=function(){return Mn.hasGlobalWindow&&kt(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}}(),dH=Array.prototype.slice;function Qp(n,e,t){return(e-n)*t+n}function t6(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=Qp(e[a],t[a],r);return n}function Hat(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=Qp(e[o][s],t[o][s],r)}return n}function ZP(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function Toe(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=e[o][s]+t[o][s]*r}return n}function Gat(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function Wat(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(t===1?i[l]:dH.call(i[l]))}for(var c=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var u=0;u<c;u++)isNaN(r[l][u])&&(r[l][u]=i[l][u])}}function aC(n){if(Ns(n)){var e=n.length;if(Ns(n[0])){for(var t=[],r=0;r<e;r++)t.push(dH.call(n[r]));return t}return dH.call(n)}return n}function yR(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function qat(n){return Ns(n&&n[0])?2:1}var QP=0,bR=1,A_e=2,Ck=3,hH=4,fH=5,Eoe=6;function Aoe(n){return n===hH||n===fH}function JP(n){return n===bR||n===A_e}var OA=[0,0,0,0],Yat=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=Eoe,l=t;if(Ns(t)){var c=qat(t);s=c,(c===1&&!rr(t[0])||c===2&&!rr(t[0][0]))&&(o=!0)}else if(rr(t)&&!DD(t))s=QP;else if(st(t))if(!isNaN(+t))s=QP;else{var u=Uc(t);u&&(l=u,s=Ck)}else if($j(t)){var d=Me({},l);d.colorStops=Be(t.colorStops,function(f){return{offset:f.offset,color:Uc(f.color)}}),x_e(t)?s=hH:S_e(t)&&(s=fH),l=d}a===0?this.valType=s:(s!==this.valType||s===Eoe)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:l,rawValue:t,percent:0};return r&&(h.easing=r,h.easingFunc=kt(r)?r:rC[r]||Yq(r)),i.push(h),h},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(v,y){return v.time-y.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=JP(i),c=Aoe(i),u=0;u<a;u++){var d=r[u],h=d.value,f=o.value;d.percent=d.time/e,s||(l&&u!==a-1?Wat(h,f,i):c&&Gat(h.colorStops,f.colorStops))}if(!s&&i!==fH&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var m=r[0].value,u=0;u<a;u++)i===QP?r[u].additiveValue=r[u].value-m:i===Ck?r[u].additiveValue=ZP([],r[u].value,m,-1):JP(i)&&(r[u].additiveValue=i===bR?ZP([],r[u].value,m,-1):Toe([],r[u].value,m,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,c=a===Ck,u,d=this._lastFr,h=Math.min,f,m;if(s===1)f=m=o[0];else{if(t<0)u=0;else if(t<this._lastFrP){var v=h(d+1,s-1);for(u=v;u>=0&&!(o[u].percent<=t);u--);u=h(u,s-2)}else{for(u=d;u<s&&!(o[u].percent>t);u++);u=h(u-1,s-2)}m=o[u+1],f=o[u]}if(f&&m){this._lastFr=u,this._lastFrP=t;var y=m.percent-f.percent,w=y===0?1:h((t-f.percent)/y,1);m.easingFunc&&(w=m.easingFunc(w));var S=r?this._additiveValue:c?OA:e[l];if((JP(a)||c)&&!S&&(S=this._additiveValue=[]),this.discrete)e[l]=w<1?f.rawValue:m.rawValue;else if(JP(a))a===bR?t6(S,f[i],m[i],w):Hat(S,f[i],m[i],w);else if(Aoe(a)){var T=f[i],C=m[i],k=a===hH;e[l]={type:k?"linear":"radial",x:Qp(T.x,C.x,w),y:Qp(T.y,C.y,w),colorStops:Be(T.colorStops,function(D,P){var N=C.colorStops[P];return{offset:Qp(D.offset,N.offset,w),color:yR(t6([],D.color,N.color,w))}}),global:C.global},k?(e[l].x2=Qp(T.x2,C.x2,w),e[l].y2=Qp(T.y2,C.y2,w)):e[l].r=Qp(T.r,C.r,w)}else if(c)t6(S,f[i],m[i],w),r||(e[l]=yR(S));else{var A=Qp(f[i],m[i],w);r?this._additiveValue=A:e[l]=A}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===QP?e[r]=e[r]+i:t===Ck?(Uc(e[r],OA),ZP(OA,OA,i,1),e[r]=yR(OA)):t===bR?ZP(e[r],e[r],i,1):t===A_e&&Toe(e[r],e[r],i,1)},n}(),Xq=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){Uq("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Ln(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new Yat(s);var c=void 0,u=this._getAdditiveTrack(s);if(u){var d=u.keyframes,h=d[d.length-1];c=h&&h.value,u.valType===Ck&&c&&(c=yR(c))}else c=this._target[s];if(c==null)continue;e>0&&l.addKeyframe(0,aC(c),i),this._trackKeys.push(s)}l.addKeyframe(e,aC(t[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes,u=c.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var d=c[u-1];d&&(t._target[s.propName]=d.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new Pat({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var m=t._additiveAnimators;if(m){for(var v=!1,y=0;y<m.length;y++)if(m[y]._clip){v=!0;break}v||(t._additiveAnimators=null)}for(var y=0;y<r.length;y++)r[y].step(t._target,f);var w=t._onframeCbs;if(w)for(var y=0;y<w.length;y++)w[y](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Be(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(e[a]=aC(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||Ln(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();function I_(){return new Date().getTime()}var Kat=function(n){pi(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=I_()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(l2(r),!t._paused&&t.update())}l2(r)},e.prototype.start=function(){this._running||(this._time=I_(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=I_(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=I_()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new Xq(t,r.loop);return this.addAnimator(i),i},e}(Xu),Xat=300,n6=Mn.domSupported,r6=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Be(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),koe={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},Coe=!1;function pH(n){var e=n.pointerType;return e==="pen"||e==="touch"}function Zat(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function i6(n){n&&(n.zrByTouch=!0)}function Qat(n,e){return ku(n.dom,new Jat(n,e),!0)}function k_e(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var Jat=function(){function n(e,t){this.stopPropagation=ma,this.stopImmediatePropagation=ma,this.preventDefault=ma,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),jd={mousedown:function(n){n=ku(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=ku(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=ku(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=ku(this.dom,n);var e=n.toElement||n.relatedTarget;k_e(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){Coe=!0,n=ku(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){Coe||(n=ku(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=ku(this.dom,n),i6(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),jd.mousemove.call(this,n),jd.mousedown.call(this,n)},touchmove:function(n){n=ku(this.dom,n),i6(n),this.handler.processGesture(n,"change"),jd.mousemove.call(this,n)},touchend:function(n){n=ku(this.dom,n),i6(n),this.handler.processGesture(n,"end"),jd.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<Xat&&jd.click.call(this,n)},pointerdown:function(n){jd.mousedown.call(this,n)},pointermove:function(n){pH(n)||jd.mousemove.call(this,n)},pointerup:function(n){jd.mouseup.call(this,n)},pointerout:function(n){pH(n)||jd.mouseout.call(this,n)}};Z(["click","dblclick","contextmenu"],function(n){jd[n]=function(e){e=ku(this.dom,e),this.trigger(n,e)}});var gH={pointermove:function(n){pH(n)||gH.mousemove.call(this,n)},pointerup:function(n){gH.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function eot(n,e){var t=e.domHandlers;Mn.pointerEventsSupported?Z(r6.pointer,function(r){wR(e,r,function(i){t[r].call(n,i)})}):(Mn.touchEventsSupported&&Z(r6.touch,function(r){wR(e,r,function(i){t[r].call(n,i),Zat(e)})}),Z(r6.mouse,function(r){wR(e,r,function(i){i=Gq(i),e.touching||t[r].call(n,i)})}))}function tot(n,e){Mn.pointerEventsSupported?Z(koe.pointer,t):Mn.touchEventsSupported||Z(koe.mouse,t);function t(r){function i(a){a=Gq(a),k_e(n,a.target)||(a=Qat(n,a),e.domHandlers[r].call(n,a))}wR(e,r,i,{capture:!0})}}function wR(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,iH(n.domTarget,e,t,r)}function a6(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&gat(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var Doe=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),not=function(n){pi(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new Doe(t,jd),n6&&(i._globalHandlerScope=new Doe(document,gH)),eot(i,i._localHandlerScope),i}return e.prototype.dispose=function(){a6(this._localHandlerScope),n6&&a6(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,n6&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?tot(this,r):a6(r)}},e}(Xu),C_e=1;Mn.hasGlobalWindow&&(C_e=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var p2=C_e,mH=.4,vH="#333",yH="#ccc",rot="#eee",Ioe=Uj,Moe=5e-5;function tb(n){return n>Moe||n<-Moe}var nb=[],GS=[],o6=Bc(),s6=Math.abs,og=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return tb(this.rotation)||tb(this.x)||tb(this.y)||tb(this.scaleX-1)||tb(this.scaleY-1)||tb(this.skewX)||tb(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(Ioe(r),this.invTransform=null);return}r=r||Bc(),t?this.getLocalTransform(r):Ioe(r),e&&(t?yg(r,e,r):Wq(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(nb);var r=nb[0]<0?-1:1,i=nb[1]<0?-1:1,a=((nb[0]-r)*t+r)/nb[0]||0,o=((nb[1]-i)*t+i)/nb[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||Bc(),wT(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Bc(),yg(GS,e.invTransform,t),t=GS);var r=this.originX,i=this.originY;(r||i)&&(o6[4]=r,o6[5]=i,yg(GS,t,o6),GS[4]-=r,GS[5]-=i,t=GS),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&Zo(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&Zo(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&s6(e[0]-1)>1e-10&&s6(e[3]-1)>1e-10?Math.sqrt(s6(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){D_e(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,h=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||l){var m=r+s,v=i+l;t[4]=-m*a-h*v*o,t[5]=-v*o-f*m*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=f*a,t[2]=h*o,c&&Qw(t,t,c),t[4]+=r+u,t[5]+=i+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),jf=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function D_e(n,e){for(var t=0;t<jf.length;t++){var r=jf[t];n[r]=e[r]}}var Poe={};function Vc(n,e){e=e||ly;var t=Poe[e];t||(t=Poe[e]=new YI(500));var r=t.get(n);return r==null&&(r=cy.measureText(n,e).width,t.put(n,r)),r}function Noe(n,e,t,r){var i=Vc(n,e),a=zj(e),o=Dk(0,i,t),s=x_(0,a,r),l=new dn(o,s,i,a);return l}function KI(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return Noe(i[0],e,t,r);for(var o=new dn(0,0,0,0),s=0;s<i.length;s++){var l=Noe(i[s],e,t,r);s===0?o.copy(l):o.union(l)}return o}function Dk(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function x_(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function zj(n){return Vc("国",n)}function lh(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function g2(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,l=t.x,c=t.y,u="left",d="top";if(r instanceof Array)l+=lh(r[0],t.width),c+=lh(r[1],t.height),u=null,d=null;else switch(r){case"left":l-=i,c+=s,u="right",d="middle";break;case"right":l+=i+o,c+=s,d="middle";break;case"top":l+=o/2,c-=i,u="center",d="bottom";break;case"bottom":l+=o/2,c+=a+i,u="center";break;case"inside":l+=o/2,c+=s,u="center",d="middle";break;case"insideLeft":l+=i,c+=s,d="middle";break;case"insideRight":l+=o-i,c+=s,u="right",d="middle";break;case"insideTop":l+=o/2,c+=i,u="center";break;case"insideBottom":l+=o/2,c+=a-i,u="center",d="bottom";break;case"insideTopLeft":l+=i,c+=i;break;case"insideTopRight":l+=o-i,c+=i,u="right";break;case"insideBottomLeft":l+=i,c+=a-i,d="bottom";break;case"insideBottomRight":l+=o-i,c+=a-i,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var l6="__zr_normal__",c6=jf.concat(["ignore"]),iot=Of(jf,function(n,e){return n[e]=!0,n},{ignore:!1}),WS={},aot=new dn(0,0,0,0),Hj=function(){function n(e){this.id=r_e(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var c=!1;if(a.copyTransform(t),r.position!=null){var u=aot;r.layoutRect?u.copy(r.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(WS,r,u):g2(WS,r,u),a.x=WS.x,a.y=WS.y,o=WS.align,s=WS.verticalAlign;var d=r.origin;if(d&&r.rotation!=null){var h=void 0,f=void 0;d==="center"?(h=u.width*.5,f=u.height*.5):(h=lh(d[0],u.width),f=lh(d[1],u.height)),c=!0,a.originX=-a.x+h+(i?0:u.x),a.originY=-a.y+f+(i?0:u.y)}}r.rotation!=null&&(a.rotation=r.rotation);var m=r.offset;m&&(a.x+=m[0],a.y+=m[1],c||(a.originX=-m[0],a.originY=-m[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,y=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),w=void 0,S=void 0,T=void 0;v&&this.canBeInsideText()?(w=r.insideFill,S=r.insideStroke,(w==null||w==="auto")&&(w=this.getInsideTextFill()),(S==null||S==="auto")&&(S=this.getInsideTextStroke(w),T=!0)):(w=r.outsideFill,S=r.outsideStroke,(w==null||w==="auto")&&(w=this.getOutsideFill()),(S==null||S==="auto")&&(S=this.getOutsideStroke(w),T=!0)),w=w||"#000",(w!==y.fill||S!==y.stroke||T!==y.autoStroke||o!==y.align||s!==y.verticalAlign)&&(l=!0,y.fill=w,y.stroke=S,y.autoStroke=T,y.align=o,y.verticalAlign=s,t.setDefaultTextStyle(y)),t.__dirty|=Rc,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?yH:vH},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Uc(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,bg(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Me(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(It(e))for(var r=e,i=Ln(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==l6)){var o=i.targetName,s=o?t[o]:t;i.saveTo(s)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,c6)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(l6,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===l6,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(mn(s,e)>=0&&(t||s.length===1))){var c;if(this.stateProxy&&!a&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!a){Uq("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,h=this._textGuide;return d&&d.useState(e,t,r,u),h&&h.useState(e,t,r,u),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Rc),c}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(e[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&i.push(u)}var d=i[o-1],h=!!(d&&d.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),m=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&m&&m.duration>0,m);var v=this._textContent,y=this._textGuide;v&&v.useStates(e,t,h),y&&y.useStates(e,t,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Rc)}},n.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=mn(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=mn(i,e),o=mn(i,t)>=0;a>=0?o?i.splice(a,1):i[a]=t:r&&!o&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];Me(t,a),a.textConfig&&(r=r||{},Me(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,o){var s=!(t&&i);t&&t.textConfig?(this.textConfig=Me({},i?this.textConfig:r.textConfig),Me(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},c=!1,u=0;u<c6.length;u++){var d=c6[u],h=a&&iot[d];t&&t[d]!=null?h?(c=!0,l[d]=t[d]):this[d]=t[d]:s&&r[d]!=null&&(h?(c=!0,l[d]=r[d]):this[d]=r[d])}if(!a)for(var u=0;u<this.animators.length;u++){var f=this.animators[u],m=f.targetName;f.getLoop()||f.__changeFinalValue(m?(t||r)[m]:t||r)}c&&this._transitionState(e,l,o)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new og,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Me(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Rc;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new Xq(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,o=mn(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){u6(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){u6(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=u6(this,t,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Rc;function t(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,c){Object.defineProperty(c,0,{get:function(){return l[a]},set:function(u){l[a]=u}}),Object.defineProperty(c,1,{get:function(){return l[o]},set:function(u){l[o]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Ia(Hj,Xu);Ia(Hj,og);function u6(n,e,t,r,i){t=t||{};var a=[];I_e(n,"",n,e,t,r,a,i);var o=a.length,s=!1,l=t.done,c=t.aborted,u=function(){s=!0,o--,o<=0&&(s?l&&l():c&&c())},d=function(){o--,o<=0&&(s?l&&l():c&&c())};o||l&&l(),a.length>0&&t.during&&a[0].during(function(m,v){t.during(v)});for(var h=0;h<a.length;h++){var f=a[h];u&&f.done(u),d&&f.aborted(d),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function d6(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function oot(n){return Ns(n[0])}function sot(n,e,t){if(Ns(e[t]))if(Ns(n[t])||(n[t]=[]),ql(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),d6(n[t],e[t],r))}else{var i=e[t],a=n[t],o=i.length;if(oot(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?d6(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else d6(a,i,o);a.length=i.length}else n[t]=e[t]}function lot(n,e){return n===e||Ns(n)&&Ns(e)&&cot(n,e)}function cot(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function I_e(n,e,t,r,i,a,o,s){for(var l=Ln(r),c=i.duration,u=i.delay,d=i.additive,h=i.setToFinal,f=!It(a),m=n.animators,v=[],y=0;y<l.length;y++){var w=l[y],S=r[w];if(S!=null&&t[w]!=null&&(f||a[w]))if(It(S)&&!Ns(S)&&!$j(S)){if(e){s||(t[w]=S,n.updateDuringAnimation(e));continue}I_e(n,w,t[w],S,i,a&&a[w],o,s)}else v.push(w);else s||(t[w]=S,n.updateDuringAnimation(e),v.push(w))}var T=v.length;if(!d&&T)for(var C=0;C<m.length;C++){var k=m[C];if(k.targetName===e){var A=k.stopTracks(v);if(A){var D=mn(m,k);m.splice(D,1)}}}if(i.force||(v=vr(v,function(L){return!lot(r[L],t[L])}),T=v.length),T>0||i.force&&!o.length){var P=void 0,N=void 0,R=void 0;if(s){N={},h&&(P={});for(var C=0;C<T;C++){var w=v[C];N[w]=t[w],h?P[w]=r[w]:t[w]=r[w]}}else if(h){R={};for(var C=0;C<T;C++){var w=v[C];R[w]=aC(t[w]),sot(t,r,w)}}var k=new Xq(t,!1,!1,d?vr(m,function(B){return B.targetName===e}):null);k.targetName=e,i.scope&&(k.scope=i.scope),h&&P&&k.whenWithKeys(0,P,v),R&&k.whenWithKeys(0,R,v),k.whenWithKeys(c??500,s?N:r,v).delay(u||0),n.addAnimator(k,e),o.push(k)}}var jt=function(n){pi(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=mn(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=mn(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new dn(0,0,0,0),i=t||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(a);u?(dn.applyTransform(r,c,u),o=o||r.clone(),o.union(r)):(o=o||c.clone(),o.union(c))}}return o||r},e}(Hj);jt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var xR={},M_e={};function uot(n){delete M_e[n]}function dot(n){if(!n)return!1;if(typeof n=="string")return h2(n,1)<mH;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=h2(e[i].color,1);return t/=r,t<mH}return!1}var hot=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new kat,o=r.renderer||"canvas";xR[o]||(o=Ln(xR)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new xR[o](t,a,r,e),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var c=!Mn.node&&!Mn.worker&&!l?new not(s.getViewportRoot(),s.root):null,u=r.useCoarsePointer,d=u==null||u==="auto"?Mn.touchEventsSupported:!!u,h=44,f;d&&(f=Wt(r.pointerSize,h)),this.handler=new c_e(a,s,c,s.root,f),this.animation=new Kat({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=dot(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=I_();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=I_();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof jt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,uot(this.id))},n}();function Roe(n,e){var t=new hot(r_e(),n,e);return M_e[t.id]=t,t}function fot(n,e){xR[n]=e}var bH;function pot(n){if(typeof bH=="function")return bH(n)}function got(n){bH=n}var Ooe=1e-4,P_e=20;function mot(n){return n.replace(/^\s+|\s+$/g,"")}function br(n,e,t,r){var i=e[0],a=e[1],o=t[0],s=t[1],l=a-i,c=s-o;if(l===0)return c===0?o:(o+s)/2;if(r)if(l>0){if(n<=i)return o;if(n>=a)return s}else{if(n>=i)return o;if(n<=a)return s}else{if(n===i)return o;if(n===a)return s}return(n-i)/l*c+o}function tt(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return st(n)?mot(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function na(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),P_e),n=(+n).toFixed(e),t?n:+n}function Bu(n){return n.sort(function(e,t){return e-t}),n}function wf(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return vot(n)}function vot(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function N_e(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function yot(n,e){var t=Of(n,function(f,m){return f+(isNaN(m)?0:m)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=Be(n,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,o=Be(i,function(f){return Math.floor(f)}),s=Of(o,function(f,m){return f+m},0),l=Be(i,function(f,m){return f-o[m]});s<a;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,h=l.length;d<h;++d)l[d]>c&&(c=l[d],u=d);++o[u],l[u]=0,++s}return Be(o,function(f){return f/r})}function bot(n,e){var t=Math.max(wf(n),wf(e)),r=n+e;return t>P_e?r:na(r,t)}var Loe=9007199254740991;function R_e(n){var e=Math.PI*2;return(n%e+e)%e}function RD(n){return n>-Ooe&&n<Ooe}var wot=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ff(n){if(n instanceof Date)return n;if(st(n)){var e=wot.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function xot(n){return Math.pow(10,Zq(n))}function Zq(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function O_e(n,e){var t=Zq(n),r=Math.pow(10,t),i=n/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function h6(n,e){var t=(n.length-1)*e+1,r=Math.floor(t),i=+n[r-1],a=t-r;return a?i+a*(n[r]-i):i}function joe(n){n.sort(function(l,c){return s(l,c,0)?-1:1});for(var e=-1/0,t=1,r=0;r<n.length;){for(var i=n[r].interval,a=n[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-t),e=i[o],t=a[o];i[0]===i[1]&&a[0]*a[1]!==1?n.splice(r,1):r++}return n;function s(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&s(l,c,1))}}function Pg(n){var e=parseFloat(n);return e==n&&(e!==0||!st(n)||n.indexOf("x")<=0)?e:NaN}function L_e(n){return!isNaN(Pg(n))}function j_e(){return Math.round(Math.random()*9)}function F_e(n,e){return e===0?n:F_e(e,n%e)}function Foe(n,e){return n==null?e:e==null?n:n*e/F_e(n,e)}function gr(n){throw new Error(n)}function $oe(n,e,t){return(e-n)*t+n}var $_e="series\0",B_e="\0_ec_\0";function Rr(n){return n instanceof Array?n:n==null?[]:[n]}function Ow(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var Boe=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function xT(n){return It(n)&&!Fe(n)&&!(n instanceof Date)?n.value:n}function Sot(n){return It(n)&&!(n instanceof Array)}function U_e(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var o=yt();Z(e,function(l,c){if(!It(l)){e[c]=null;return}});var s=_ot(n,o,t);return(r||i)&&Tot(s,n,o,e),r&&Eot(s,e),r||i?Aot(s,e,i):a&&kot(s,e),Cot(s),s}function _ot(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||OD(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function Tot(n,e,t,r){Z(r,function(i,a){if(!(!i||i.id==null)){var o=oC(i.id),s=t.get(o);if(s!=null){var l=n[s];pl(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=e[s],r[a]=null}}})}function Eot(n,e){Z(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!OD(t)&&!OD(a)&&V_e("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function Aot(n,e,t){Z(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||OD(i.existing)||i.existing&&r.id!=null&&!V_e("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function kot(n,e){Z(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function Cot(n){var e=yt();Z(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),Z(n,function(t){var r=t.newOption;pl(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),Z(n,function(t,r){var i=t.existing,a=t.newOption,o=t.keyInfo;if(It(a)){if(o.name=a.name!=null?oC(a.name):i?i.name:$_e+r,i)o.id=oC(i.id);else if(a.id!=null)o.id=oC(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function V_e(n,e,t){var r=Ha(e[n],null),i=Ha(t[n],null);return r!=null&&i!=null&&r===i}function oC(n){return Ha(n,"")}function Ha(n,e){return n==null?e:st(n)?n:rr(n)||X9(n)?n+"":e}function Qq(n){var e=n.name;return!!(e&&e.indexOf($_e))}function OD(n){return n&&n.id!=null&&oC(n.id).indexOf(B_e)===0}function Dot(n){return B_e+n}function Iot(n,e,t){Z(n,function(r){var i=r.newOption;It(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=Mot(e,i,r.existing,t))})}function Mot(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function Pot(n,e){var t={},r={};return i(n||[],t),i(e||[],r,t),[a(t),a(r)];function i(o,s,l){for(var c=0,u=o.length;c<u;c++){var d=Ha(o[c].seriesId,null);if(d==null)return;for(var h=Rr(o[c].dataIndex),f=l&&l[d],m=0,v=h.length;m<v;m++){var y=h[m];f&&f[y]?f[y]=null:(s[d]||(s[d]={}))[y]=1}}}function a(o,s){var l=[];for(var c in o)if(o.hasOwnProperty(c)&&o[c]!=null)if(s)l.push(+c);else{var u=a(o[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function Lw(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Fe(e.dataIndex)?Be(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Fe(e.name)?Be(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Kn(){var n="__ec_inner_"+Not++;return function(e){return e[n]||(e[n]={})}}var Not=j_e();function sC(n,e,t){var r=Jq(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(c,u){var d=XI(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[u+"Models"]=d.models,s[u+"Model"]=d.models[0]}),s}function Jq(n,e){var t;if(st(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=yt(),a={},o=!1;return Z(t,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&mn(e.includeMainTypes,u)<0)){o=o||!!u;var h=i.get(u)||i.set(u,{});h[d]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Ca={useDefault:!0,enableAll:!1,enableNone:!1},Rot={useDefault:!1,enableAll:!0,enableNone:!0};function XI(n,e,t,r){r=r||Ca;var i=t.index,a=t.id,o=t.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],s}return i==="none"||i===!1?(pl(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(pl(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=n.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function z_e(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function Oot(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function Lot(n){return n==="auto"?Mn.domSupported?"html":"richText":n||"html"}function wH(n,e){var t=yt(),r=[];return Z(n,function(i){var a=e(i);(t.get(a)||(r.push(a),t.set(a,[]))).push(i)}),{keys:r,buckets:t}}function H_e(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(rr(r)){var o=$oe(t||0,r,i);return na(o,a?Math.max(wf(t||0),wf(r)):e)}else{if(st(r))return i<1?t:r;for(var s=[],l=t,c=r,u=Math.max(l?l.length:0,c.length),d=0;d<u;++d){var h=n.getDimensionInfo(d);if(h&&h.type==="ordinal")s[d]=(i<1&&l?l:c)[d];else{var f=l&&l[d]?l[d]:0,m=c[d],o=$oe(f,m,i);s[d]=na(o,a?Math.max(wf(f),wf(m)):e)}}return s}}var jot=".",rb="___EC__COMPONENT__CONTAINER___",G_e="___EC__EXTENDED_CLASS___";function xf(n){var e={main:"",sub:""};if(n){var t=n.split(jot);e.main=t[0]||"",e.sub=t[1]||""}return e}function Fot(n){pl(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function $ot(n){return!!(n&&n[G_e])}function eY(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return Bot(r)?i=function(a){_e(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},Yit(i,this)),Me(i.prototype,t),i[G_e]=!0,i.extend=this.extend,i.superCall=zot,i.superApply=Hot,i.superClass=r,i}}function Bot(n){return kt(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function W_e(n,e){n.extend=e.extend}var Uot=Math.round(Math.random()*10);function Vot(n){var e=["__\0is_clz",Uot++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function zot(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function Hot(n,e,t){return this.superClass.prototype[e].apply(n,t)}function Gj(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){Fot(i),r.prototype.type=i;var a=xf(i);if(!a.sub)e[a.main]=r;else if(a.sub!==rb){var o=t(a);o[a.sub]=r}}return r},n.getClass=function(r,i,a){var o=e[r];if(o&&o[rb]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},n.getClassesByMainType=function(r){var i=xf(r),a=[],o=e[i.main];return o&&o[rb]?Z(o,function(s,l){l!==rb&&a.push(s)}):a.push(o),a},n.hasClass=function(r){var i=xf(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return Z(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=xf(r),a=e[i.main];return a&&a[rb]};function t(r){var i=e[r.main];return(!i||!i[rb])&&(i=e[r.main]={},i[rb]=!0),i}}function jw(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<n.length;s++){var l=n[s][1];if(!(i&&mn(i,l)>=0||a&&mn(a,l)<0)){var c=r.getShallow(l,e);c!=null&&(o[n[s][0]]=c)}}return o}}var Got=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],Wot=jw(Got),qot=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return Wot(this,e,t)},n}(),xH=new YI(50);function Yot(n){if(typeof n=="string"){var e=xH.get(n);return e&&e.image}else return n}function tY(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=xH.get(n),o={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!Wj(e)&&a.pending.push(o)):(e=cy.loadImage(n,Uoe,Uoe),e.__zrImageSrc=n,xH.put(n,e.__cachedImgObj={image:e,pending:[o]})),e}else return n;else return e}function Uoe(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function Wj(n){return n&&n.width&&n.height}var f6=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Kot(n,e,t,r,i,a){if(!t){n.text="",n.isTruncated=!1;return}var o=(e+"").split(`
`);a=q_e(t,r,i,a);for(var s=!1,l={},c=0,u=o.length;c<u;c++)Y_e(l,o[c],a),o[c]=l.textLine,s=s||l.isTruncated;n.text=o.join(`
`),n.isTruncated=s}function q_e(n,e,t,r){r=r||{};var i=Me({},r);i.font=e,t=Wt(t,"..."),i.maxIterations=Wt(r.maxIterations,2);var a=i.minChar=Wt(r.minChar,0);i.cnCharWidth=Vc("国",e);var o=i.ascCharWidth=Vc("a",e);i.placeholder=Wt(r.placeholder,"");for(var s=n=Math.max(0,n-1),l=0;l<a&&s>=o;l++)s-=o;var c=Vc(t,e);return c>s&&(t="",c=0),s=n-c,i.ellipsis=t,i.ellipsisWidth=c,i.contentWidth=s,i.containerWidth=n,i}function Y_e(n,e,t){var r=t.containerWidth,i=t.font,a=t.contentWidth;if(!r){n.textLine="",n.isTruncated=!1;return}var o=Vc(e,i);if(o<=r){n.textLine=e,n.isTruncated=!1;return}for(var s=0;;s++){if(o<=a||s>=t.maxIterations){e+=t.ellipsis;break}var l=s===0?Xot(e,a,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*a/o):0;e=e.substr(0,l),o=Vc(e,i)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function Xot(n,e,t,r){for(var i=0,a=0,o=n.length;a<o&&i<e;a++){var s=n.charCodeAt(a);i+=0<=s&&s<=127?t:r}return a}function Zot(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",o=zj(i),s=Wt(e.lineHeight,o),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,d=e.width,h;d!=null&&(t==="break"||t==="breakAll")?h=n?K_e(n,e.font,d,t==="breakAll",0).lines:[]:h=n?n.split(`
`):[];var f=h.length*s,m=Wt(e.height,f);if(f>m&&c){var v=Math.floor(m/s);u=u||h.length>v,h=h.slice(0,v)}if(n&&a&&d!=null)for(var y=q_e(d,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),w={},S=0;S<h.length;S++)Y_e(w,h[S],y),h[S]=w.textLine,u=u||w.isTruncated;for(var T=m,C=0,S=0;S<h.length;S++)C=Math.max(Vc(h[S],i),C);d==null&&(d=C);var k=C;return r&&(T+=r[0]+r[2],k+=r[1]+r[3],d+=r[1]+r[3]),l&&(k=d),{lines:h,height:m,outerWidth:k,outerHeight:T,lineHeight:s,calculatedLineHeight:o,contentWidth:C,contentHeight:f,width:d,isTruncated:u}}var Qot=function(){function n(){}return n}(),Voe=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),Jot=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function est(n,e){var t=new Jot;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=f6.lastIndex=0,l;(l=f6.exec(n))!=null;){var c=l.index;c>s&&p6(t,n.substring(s,c),e,o),p6(t,l[2],e,o,l[1]),s=f6.lastIndex}s<n.length&&p6(t,n.substring(s,n.length),e,o);var u=[],d=0,h=0,f=e.padding,m=a==="truncate",v=e.lineOverflow==="truncate",y={};function w(z,se,ce){z.width=se,z.lineHeight=ce,d+=ce,h=Math.max(h,se)}e:for(var S=0;S<t.lines.length;S++){for(var T=t.lines[S],C=0,k=0,A=0;A<T.tokens.length;A++){var D=T.tokens[A],P=D.styleName&&e.rich[D.styleName]||{},N=D.textPadding=P.padding,R=N?N[1]+N[3]:0,L=D.font=P.font||e.font;D.contentHeight=zj(L);var B=Wt(P.height,D.contentHeight);if(D.innerHeight=B,N&&(B+=N[0]+N[2]),D.height=B,D.lineHeight=Df(P.lineHeight,e.lineHeight,B),D.align=P&&P.align||e.align,D.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&d+D.lineHeight>i){var $=t.lines.length;A>0?(T.tokens=T.tokens.slice(0,A),w(T,k,C),t.lines=t.lines.slice(0,S+1)):t.lines=t.lines.slice(0,S),t.isTruncated=t.isTruncated||t.lines.length<$;break e}var G=P.width,W=G==null||G==="auto";if(typeof G=="string"&&G.charAt(G.length-1)==="%")D.percentWidth=G,u.push(D),D.contentWidth=Vc(D.text,L);else{if(W){var K=P.backgroundColor,X=K&&K.image;X&&(X=Yot(X),Wj(X)&&(D.width=Math.max(D.width,X.width*B/X.height)))}var te=m&&r!=null?r-k:null;te!=null&&te<D.width?!W||te<R?(D.text="",D.width=D.contentWidth=0):(Kot(y,D.text,te-R,L,e.ellipsis,{minChar:e.truncateMinChar}),D.text=y.text,t.isTruncated=t.isTruncated||y.isTruncated,D.width=D.contentWidth=Vc(D.text,L)):D.contentWidth=Vc(D.text,L)}D.width+=R,k+=D.width,P&&(C=Math.max(C,D.lineHeight))}w(T,k,C)}t.outerWidth=t.width=Wt(r,h),t.outerHeight=t.height=Wt(i,d),t.contentHeight=d,t.contentWidth=h,f&&(t.outerWidth+=f[1]+f[3],t.outerHeight+=f[0]+f[2]);for(var S=0;S<u.length;S++){var D=u[S],ie=D.percentWidth;D.width=parseInt(ie,10)/100*t.width}return t}function p6(n,e,t,r,i){var a=e==="",o=i&&t.rich[i]||{},s=n.lines,l=o.font||t.font,c=!1,u,d;if(r){var h=o.padding,f=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var m=lh(o.width,r.width)+f;s.length>0&&m+r.accumWidth>r.width&&(u=e.split(`
`),c=!0),r.accumWidth=m}else{var v=K_e(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+f,d=v.linesWidths,u=v.lines}}else u=e.split(`
`);for(var y=0;y<u.length;y++){var w=u[y],S=new Qot;if(S.styleName=i,S.text=w,S.isLineHolder=!w&&!a,typeof o.width=="number"?S.width=o.width:S.width=d?d[y]:Vc(w,l),!y&&!c){var T=(s[s.length-1]||(s[0]=new Voe)).tokens,C=T.length;C===1&&T[0].isLineHolder?T[0]=S:(w||!C||a)&&T.push(S)}else s.push(new Voe([S]))}}function tst(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var nst=Of(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function rst(n){return tst(n)?!!nst[n]:!0}function K_e(n,e,t,r,i){for(var a=[],o=[],s="",l="",c=0,u=0,d=0;d<n.length;d++){var h=n.charAt(d);if(h===`
`){l&&(s+=l,u+=c),a.push(s),o.push(u),s="",l="",c=0,u=0;continue}var f=Vc(h,e),m=r?!1:!rst(h);if(a.length?u+f>t:i+u+f>t){u?(s||l)&&(m?(s||(s=l,l="",c=0,u=c),a.push(s),o.push(u-c),l+=h,c+=f,s="",u=c):(l&&(s+=l,l="",c=0),a.push(s),o.push(u),s=h,u=f)):m?(a.push(l),o.push(c),l=h,c=f):(a.push(h),o.push(f));continue}u+=f,m?(l+=h,c+=f):(l&&(s+=l,l="",c=0),s+=h)}return!a.length&&!s&&(s=n,l="",c=0),l&&(s+=l),s&&(a.push(s),o.push(u)),a.length===1&&(u+=i),{accumWidth:u,lines:a,linesWidths:o}}var SH="__zr_style_"+Math.round(Math.random()*10),hw={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},qj={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};hw[SH]=!0;var zoe=["z","z2","invisible"],ist=["invisible"],Yu=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=Ln(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&ast(this,t,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new dn(0,0,0,0)),r?dn.applyTransform(t,i,r):t.copy(i),(o||s||l)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(l),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+l-o));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new dn(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Me(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=kk,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&kk)},e.prototype.styleUpdated=function(){this.__dirty&=~kk},e.prototype.createStyle=function(t){return Bj(hw,t)},e.prototype.useStyle=function(t){t[SH]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[SH]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,zoe)},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.style?o?a?c=r.style:(c=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(c,r.style)):(c=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(c,r.style)):l&&(c=i.style),c)if(o){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=Ln(u),h=0;h<d.length;h++){var f=d[h];f in c&&(c[f]=c[f],this.style[f]=u[f])}for(var m=Ln(c),h=0;h<m.length;h++){var f=m[h];this.style[f]=this.style[f]}this._transitionState(t,{style:c},s,this.getAnimationStyleProps())}else this.useStyle(c);for(var v=this.__inHover?ist:zoe,h=0;h<v.length;h++){var f=v[h];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return Me(t,r),t},e.prototype.getAnimationStyleProps=function(){return qj},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Rc|kk}(),e}(Hj),g6=new dn(0,0,0,0),m6=new dn(0,0,0,0);function ast(n,e,t){return g6.copy(n.getBoundingRect()),n.transform&&g6.applyTransform(n.transform),m6.width=e,m6.height=t,!g6.intersect(m6)}var $l=Math.min,Bl=Math.max,v6=Math.sin,y6=Math.cos,ib=Math.PI*2,eN=Zw(),tN=Zw(),nN=Zw();function Yj(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<n.length;l++)r=n[l],i=$l(i,r[0]),a=Bl(a,r[0]),o=$l(o,r[1]),s=Bl(s,r[1]);e[0]=i,e[1]=o,t[0]=a,t[1]=s}}function Hoe(n,e,t,r,i,a){i[0]=$l(n,t),i[1]=$l(e,r),a[0]=Bl(n,t),a[1]=Bl(e,r)}var Goe=[],Woe=[];function ost(n,e,t,r,i,a,o,s,l,c){var u=p_e,d=ao,h=u(n,t,i,o,Goe);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var f=0;f<h;f++){var m=d(n,t,i,o,Goe[f]);l[0]=$l(m,l[0]),c[0]=Bl(m,c[0])}h=u(e,r,a,s,Woe);for(var f=0;f<h;f++){var v=d(e,r,a,s,Woe[f]);l[1]=$l(v,l[1]),c[1]=Bl(v,c[1])}l[0]=$l(n,l[0]),c[0]=Bl(n,c[0]),l[0]=$l(o,l[0]),c[0]=Bl(o,c[0]),l[1]=$l(e,l[1]),c[1]=Bl(e,c[1]),l[1]=$l(s,l[1]),c[1]=Bl(s,c[1])}function sst(n,e,t,r,i,a,o,s){var l=m_e,c=Co,u=Bl($l(l(n,t,i),1),0),d=Bl($l(l(e,r,a),1),0),h=c(n,t,i,u),f=c(e,r,a,d);o[0]=$l(n,i,h),o[1]=$l(e,a,f),s[0]=Bl(n,i,h),s[1]=Bl(e,a,f)}function lst(n,e,t,r,i,a,o,s,l){var c=jv,u=Fv,d=Math.abs(i-a);if(d%ib<1e-4&&d>1e-4){s[0]=n-t,s[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(eN[0]=y6(i)*t+n,eN[1]=v6(i)*r+e,tN[0]=y6(a)*t+n,tN[1]=v6(a)*r+e,c(s,eN,tN),u(l,eN,tN),i=i%ib,i<0&&(i=i+ib),a=a%ib,a<0&&(a=a+ib),i>a&&!o?a+=ib:i<a&&o&&(i+=ib),o){var h=a;a=i,i=h}for(var f=0;f<a;f+=Math.PI/2)f>i&&(nN[0]=y6(f)*t+n,nN[1]=v6(f)*r+e,c(s,nN,s),u(l,nN,l))}var Yr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ab=[],ob=[],tf=[],gv=[],nf=[],rf=[],b6=Math.min,w6=Math.max,sb=Math.cos,lb=Math.sin,qp=Math.abs,_H=Math.PI,Av=_H*2,x6=typeof Float32Array<"u",LA=[];function S6(n){var e=Math.round(n/_H*1e8)/1e8;return e%2*_H}function nY(n,e){var t=S6(n[0]);t<0&&(t+=Av);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Av?i=t+Av:e&&t-i>=Av?i=t-Av:!e&&t>i?i=t+(Av-S6(t-i)):e&&t<i&&(i=t-(Av-S6(i-t))),n[0]=t,n[1]=i}var $f=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=qp(r/p2/e)||0,this._uy=qp(r/p2/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Yr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=qp(e-this._xi),i=qp(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Yr.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){return this._drawPendingPt(),this.addData(Yr.C,e,t,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,o),this._xi=a,this._yi=o,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(Yr.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,o){this._drawPendingPt(),LA[0]=i,LA[1]=a,nY(LA,o),i=LA[0],a=LA[1];var s=a-i;return this.addData(Yr.A,e,t,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,o),this._xi=sb(a)*r+e,this._yi=lb(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(Yr.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Yr.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&x6&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();x6&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},n.prototype.addData=function(e,t,r,i,a,o,s,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,x6&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){tf[0]=tf[1]=nf[0]=nf[1]=Number.MAX_VALUE,gv[0]=gv[1]=rf[0]=rf[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],l=o===1;switch(l&&(t=e[o],r=e[o+1],i=t,a=r),s){case Yr.M:t=i=e[o++],r=a=e[o++],nf[0]=i,nf[1]=a,rf[0]=i,rf[1]=a;break;case Yr.L:Hoe(t,r,e[o],e[o+1],nf,rf),t=e[o++],r=e[o++];break;case Yr.C:ost(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],nf,rf),t=e[o++],r=e[o++];break;case Yr.Q:sst(t,r,e[o++],e[o++],e[o],e[o+1],nf,rf),t=e[o++],r=e[o++];break;case Yr.A:var c=e[o++],u=e[o++],d=e[o++],h=e[o++],f=e[o++],m=e[o++]+f;o+=1;var v=!e[o++];l&&(i=sb(f)*d+c,a=lb(f)*h+u),lst(c,u,d,h,f,m,v,nf,rf),t=sb(m)*d+c,r=lb(m)*h+u;break;case Yr.R:i=t=e[o++],a=r=e[o++];var y=e[o++],w=e[o++];Hoe(i,a,i+y,a+w,nf,rf);break;case Yr.Z:t=i,r=a;break}jv(tf,tf,nf),Fv(gv,gv,rf)}return o===0&&(tf[0]=tf[1]=gv[0]=gv[1]=0),new dn(tf[0],tf[1],gv[0]-tf[0],gv[1]-tf[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,h=0;h<t;){var f=e[h++],m=h===1;m&&(a=e[h],o=e[h+1],s=a,l=o);var v=-1;switch(f){case Yr.M:a=s=e[h++],o=l=e[h++];break;case Yr.L:{var y=e[h++],w=e[h++],S=y-a,T=w-o;(qp(S)>r||qp(T)>i||h===t-1)&&(v=Math.sqrt(S*S+T*T),a=y,o=w);break}case Yr.C:{var C=e[h++],k=e[h++],y=e[h++],w=e[h++],A=e[h++],D=e[h++];v=Cat(a,o,C,k,y,w,A,D,10),a=A,o=D;break}case Yr.Q:{var C=e[h++],k=e[h++],y=e[h++],w=e[h++];v=Iat(a,o,C,k,y,w,10),a=y,o=w;break}case Yr.A:var P=e[h++],N=e[h++],R=e[h++],L=e[h++],B=e[h++],$=e[h++],G=$+B;h+=1,m&&(s=sb(B)*R+P,l=lb(B)*L+N),v=w6(R,L)*b6(Av,Math.abs($)),a=sb(G)*R+P,o=lb(G)*L+N;break;case Yr.R:{s=a=e[h++],l=o=e[h++];var W=e[h++],K=e[h++];v=W*2+K*2;break}case Yr.Z:{var S=s-a,T=l-o;v=Math.sqrt(S*S+T*T),a=s,o=l;break}}v>=0&&(c[d++]=v,u+=v)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,c,u,d,h,f=t<1,m,v,y=0,w=0,S,T=0,C,k;if(!(f&&(this._pathSegLen||this._calculateLength(),m=this._pathSegLen,v=this._pathLen,S=t*v,!S)))e:for(var A=0;A<o;){var D=r[A++],P=A===1;switch(P&&(c=r[A],u=r[A+1],s=c,l=u),D!==Yr.L&&T>0&&(e.lineTo(C,k),T=0),D){case Yr.M:s=c=r[A++],l=u=r[A++],e.moveTo(c,u);break;case Yr.L:{d=r[A++],h=r[A++];var N=qp(d-c),R=qp(h-u);if(N>i||R>a){if(f){var L=m[w++];if(y+L>S){var B=(S-y)/L;e.lineTo(c*(1-B)+d*B,u*(1-B)+h*B);break e}y+=L}e.lineTo(d,h),c=d,u=h,T=0}else{var $=N*N+R*R;$>T&&(C=d,k=h,T=$)}break}case Yr.C:{var G=r[A++],W=r[A++],K=r[A++],X=r[A++],te=r[A++],ie=r[A++];if(f){var L=m[w++];if(y+L>S){var B=(S-y)/L;uy(c,G,K,te,B,ab),uy(u,W,X,ie,B,ob),e.bezierCurveTo(ab[1],ob[1],ab[2],ob[2],ab[3],ob[3]);break e}y+=L}e.bezierCurveTo(G,W,K,X,te,ie),c=te,u=ie;break}case Yr.Q:{var G=r[A++],W=r[A++],K=r[A++],X=r[A++];if(f){var L=m[w++];if(y+L>S){var B=(S-y)/L;MD(c,G,K,B,ab),MD(u,W,X,B,ob),e.quadraticCurveTo(ab[1],ob[1],ab[2],ob[2]);break e}y+=L}e.quadraticCurveTo(G,W,K,X),c=K,u=X;break}case Yr.A:var z=r[A++],se=r[A++],ce=r[A++],ee=r[A++],be=r[A++],fe=r[A++],De=r[A++],dt=!r[A++],ve=ce>ee?ce:ee,de=qp(ce-ee)>.001,me=be+fe,xe=!1;if(f){var L=m[w++];y+L>S&&(me=be+fe*(S-y)/L,xe=!0),y+=L}if(de&&e.ellipse?e.ellipse(z,se,ce,ee,De,be,me,dt):e.arc(z,se,ve,be,me,dt),xe)break e;P&&(s=sb(be)*ce+z,l=lb(be)*ee+se),c=sb(me)*ce+z,u=lb(me)*ee+se;break;case Yr.R:s=c=r[A],l=u=r[A+1],d=r[A++],h=r[A++];var pe=r[A++],$e=r[A++];if(f){var L=m[w++];if(y+L>S){var We=S-y;e.moveTo(d,h),e.lineTo(d+b6(We,pe),h),We-=pe,We>0&&e.lineTo(d+pe,h+b6(We,$e)),We-=$e,We>0&&e.lineTo(d+w6(pe-We,0),h+$e),We-=pe,We>0&&e.lineTo(d,h+w6($e-We,0));break e}y+=L}e.rect(d,h,pe,$e);break;case Yr.Z:if(f){var L=m[w++];if(y+L>S){var B=(S-y)/L;e.lineTo(c*(1-B)+s*B,u*(1-B)+l*B);break e}y+=L}e.closePath(),c=s,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=Yr,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();function Dv(n,e,t,r,i,a,o){if(i===0)return!1;var s=i,l=0,c=n;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>n+s&&a>t+s||a<n-s&&a<t-s)return!1;if(n!==t)l=(e-r)/(n-t),c=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=s/2;var u=l*a-o+c,d=u*u/(l*l+1);return d<=s/2*s/2}function cst(n,e,t,r,i,a,o,s,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>r+d&&u>a+d&&u>s+d||u<e-d&&u<r-d&&u<a-d&&u<s-d||c>n+d&&c>t+d&&c>i+d&&c>o+d||c<n-d&&c<t-d&&c<i-d&&c<o-d)return!1;var h=g_e(n,e,t,r,i,a,o,s,c,u,null);return h<=d/2}function X_e(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;if(l>e+c&&l>r+c&&l>a+c||l<e-c&&l<r-c&&l<a-c||s>n+c&&s>t+c&&s>i+c||s<n-c&&s<t-c&&s<i-c)return!1;var u=v_e(n,e,t,r,i,a,s,l,null);return u<=c/2}var qoe=Math.PI*2;function jc(n){return n%=qoe,n<0&&(n+=qoe),n}var jA=Math.PI*2;function ust(n,e,t,r,i,a,o,s,l){if(o===0)return!1;var c=o;s-=n,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(r-i)%jA<1e-4)return!0;if(a){var d=r;r=jc(i),i=jc(d)}else r=jc(r),i=jc(i);r>i&&(i+=jA);var h=Math.atan2(l,s);return h<0&&(h+=jA),h>=r&&h<=i||h+jA>=r&&h+jA<=i}function Jp(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var l=o*(t-n)+n;return l===i?1/0:l>i?s:0}var mv=$f.CMD,cb=Math.PI*2,dst=1e-4;function hst(n,e){return Math.abs(n-e)<dst}var nl=[-1,-1,-1],Du=[-1,-1];function fst(){var n=Du[0];Du[0]=Du[1],Du[1]=n}function pst(n,e,t,r,i,a,o,s,l,c){if(c>e&&c>r&&c>a&&c>s||c<e&&c<r&&c<a&&c<s)return 0;var u=u2(e,r,a,s,c,nl);if(u===0)return 0;for(var d=0,h=-1,f=void 0,m=void 0,v=0;v<u;v++){var y=nl[v],w=y===0||y===1?.5:1,S=ao(n,t,i,o,y);S<l||(h<0&&(h=p_e(e,r,a,s,Du),Du[1]<Du[0]&&h>1&&fst(),f=ao(e,r,a,s,Du[0]),h>1&&(m=ao(e,r,a,s,Du[1]))),h===2?y<Du[0]?d+=f<e?w:-w:y<Du[1]?d+=m<f?w:-w:d+=s<m?w:-w:y<Du[0]?d+=f<e?w:-w:d+=s<f?w:-w)}return d}function gst(n,e,t,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var l=Dat(e,r,a,s,nl);if(l===0)return 0;var c=m_e(e,r,a);if(c>=0&&c<=1){for(var u=0,d=Co(e,r,a,c),h=0;h<l;h++){var f=nl[h]===0||nl[h]===1?.5:1,m=Co(n,t,i,nl[h]);m<o||(nl[h]<c?u+=d<e?f:-f:u+=a<d?f:-f)}return u}else{var f=nl[0]===0||nl[0]===1?.5:1,m=Co(n,t,i,nl[0]);return m<o?0:a<e?f:-f}}function mst(n,e,t,r,i,a,o,s){if(s-=e,s>t||s<-t)return 0;var l=Math.sqrt(t*t-s*s);nl[0]=-l,nl[1]=l;var c=Math.abs(r-i);if(c<1e-4)return 0;if(c>=cb-1e-4){r=0,i=cb;var u=a?1:-1;return o>=nl[0]+n&&o<=nl[1]+n?u:0}if(r>i){var d=r;r=i,i=d}r<0&&(r+=cb,i+=cb);for(var h=0,f=0;f<2;f++){var m=nl[f];if(m+n>o){var v=Math.atan2(s,m),u=a?1:-1;v<0&&(v=cb+v),(v>=r&&v<=i||v+cb>=r&&v+cb<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(u=-u),h+=u)}}return h}function Z_e(n,e,t,r,i){for(var a=n.data,o=n.len(),s=0,l=0,c=0,u=0,d=0,h,f,m=0;m<o;){var v=a[m++],y=m===1;switch(v===mv.M&&m>1&&(t||(s+=Jp(l,c,u,d,r,i))),y&&(l=a[m],c=a[m+1],u=l,d=c),v){case mv.M:u=a[m++],d=a[m++],l=u,c=d;break;case mv.L:if(t){if(Dv(l,c,a[m],a[m+1],e,r,i))return!0}else s+=Jp(l,c,a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case mv.C:if(t){if(cst(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=pst(l,c,a[m++],a[m++],a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case mv.Q:if(t){if(X_e(l,c,a[m++],a[m++],a[m],a[m+1],e,r,i))return!0}else s+=gst(l,c,a[m++],a[m++],a[m],a[m+1],r,i)||0;l=a[m++],c=a[m++];break;case mv.A:var w=a[m++],S=a[m++],T=a[m++],C=a[m++],k=a[m++],A=a[m++];m+=1;var D=!!(1-a[m++]);h=Math.cos(k)*T+w,f=Math.sin(k)*C+S,y?(u=h,d=f):s+=Jp(l,c,h,f,r,i);var P=(r-w)*C/T+w;if(t){if(ust(w,S,C,k,k+A,D,e,P,i))return!0}else s+=mst(w,S,C,k,k+A,D,P,i);l=Math.cos(k+A)*T+w,c=Math.sin(k+A)*C+S;break;case mv.R:u=l=a[m++],d=c=a[m++];var N=a[m++],R=a[m++];if(h=u+N,f=d+R,t){if(Dv(u,d,h,d,e,r,i)||Dv(h,d,h,f,e,r,i)||Dv(h,f,u,f,e,r,i)||Dv(u,f,u,d,e,r,i))return!0}else s+=Jp(h,d,h,f,r,i),s+=Jp(u,f,u,d,r,i);break;case mv.Z:if(t){if(Dv(l,c,u,d,e,r,i))return!0}else s+=Jp(l,c,u,d,r,i);l=u,c=d;break}}return!t&&!hst(c,d)&&(s+=Jp(l,c,u,d,r,i)||0),s!==0}function vst(n,e,t){return Z_e(n,0,!1,e,t)}function yst(n,e,t,r){return Z_e(n,e,!0,t,r)}var m2=Dt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},hw),bst={style:Dt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},qj.style)},_6=jf.concat(["invisible","culling","z","z2","zlevel","parent"]),Cn=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<_6.length;++s)i[_6[s]]=this[_6[s]];i.__dirty|=Rc}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Ln(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?Me(this.style,s):this.useStyle(s):o==="shape"?Me(this.shape,s):n.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(st(t)){var r=h2(t,0);return r>.5?vH:r>.2?rot:yH}else if(t)return yH}return vH},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(st(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=h2(t,0)<mH;if(a===o)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~w_},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new $f(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&w_)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){s.copy(t);var l=r.strokeNoScale?this.getLineScale():1,c=r.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(s.width+=c/l,s.height+=c/l,s.x-=c/l/2,s.y-=c/l/2)}return s}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,c=o.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),yst(s,l/c,t,r)))return!0}if(this.hasFill())return vst(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=w_,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:Me(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&w_)},e.prototype.createStyle=function(t){return Bj(m2,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Me({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var l=!(r&&a),c;if(r&&r.shape?o?a?c=r.shape:(c=Me({},i.shape),Me(c,r.shape)):(c=Me({},a?this.shape:i.shape),Me(c,r.shape)):l&&(c=i.shape),c)if(o){this.shape=Me({},this.shape);for(var u={},d=Ln(c),h=0;h<d.length;h++){var f=d[h];typeof c[f]=="object"?this.shape[f]=c[f]:u[f]=c[f]}this._transitionState(t,{shape:u},s)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return bst},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){pi(o,a);function o(s){var l=a.call(this,s)||this;return t.init&&t.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return Nt(t.style)},o.prototype.getDefaultShape=function(){return Nt(t.shape)},o}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Rc|kk|w_}(),e}(Yu),wst=Dt({strokeFirst:!0,font:ly,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},m2),$1=function(n){pi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return Bj(wst,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=KI(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Yu);$1.prototype.type="tspan";var xst=Dt({x:0,y:0},hw),Sst={style:Dt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},qj.style)};function _st(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Ro=function(n){pi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return Bj(xst,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=_st(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Sst},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new dn(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Yu);Ro.prototype.type="image";function Tst(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,l,c,u;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=c=u=o:o instanceof Array?o.length===1?s=l=c=u=o[0]:o.length===2?(s=c=o[0],l=u=o[1]):o.length===3?(s=o[0],l=u=o[1],c=o[2]):(s=o[0],l=o[1],c=o[2],u=o[3]):s=l=c=u=0;var d;s+l>i&&(d=s+l,s*=i/d,l*=i/d),c+u>i&&(d=c+u,c*=i/d,u*=i/d),l+c>a&&(d=l+c,l*=a/d,c*=a/d),s+u>a&&(d=s+u,s*=a/d,u*=a/d),n.moveTo(t+s,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-c),c!==0&&n.arc(t+i-c,r+a-c,c,0,Math.PI/2),n.lineTo(t+u,r+a),u!==0&&n.arc(t+u,r+a-u,u,Math.PI/2,Math.PI),n.lineTo(t,r+s),s!==0&&n.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var M_=Math.round;function Q_e(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=o;var s=t&&t.lineWidth;return s&&(M_(r*2)===M_(i*2)&&(n.x1=n.x2=Xb(r,s,!0)),M_(a*2)===M_(o*2)&&(n.y1=n.y2=Xb(a,s,!0))),n}}function J_e(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;n.x=r,n.y=i,n.width=a,n.height=o;var s=t&&t.lineWidth;return s&&(n.x=Xb(r,s,!0),n.y=Xb(i,s,!0),n.width=Math.max(Xb(r+a,s,!1)-n.x,a===0?0:1),n.height=Math.max(Xb(i+o,s,!1)-n.y,o===0?0:1)),n}}function Xb(n,e,t){if(!e)return n;var r=M_(n*2);return(r+M_(e))%2===0?r/2:(r+(t?1:-1))/2}var Est=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),Ast={},Yn=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Est},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=J_e(Ast,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?Tst(t,r):t.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Cn);Yn.prototype.type="rect";var Yoe={fill:"#000"},Koe=2,kst={style:Dt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},qj.style)},Qn=function(n){pi(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=Yoe,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,Ist(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new dn(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(t.copy(l),t.applyTransform(c),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Yoe},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return Me(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=Ln(r),a=0;a<i.length;a++){var o=i[a];t[o]=t[o]||{},Me(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return kst},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||ly,i=t.padding,a=nse(t),o=Zot(a,t),s=T6(t),l=!!t.backgroundColor,c=o.outerHeight,u=o.outerWidth,d=o.contentWidth,h=o.lines,f=o.lineHeight,m=this._defaultStyle;this.isTruncated=!!o.isTruncated;var v=t.x||0,y=t.y||0,w=t.align||m.align||"left",S=t.verticalAlign||m.verticalAlign||"top",T=v,C=x_(y,o.contentHeight,S);if(s||i){var k=Dk(v,u,w),A=x_(y,c,S);s&&this._renderBackground(t,t,k,A,u,c)}C+=f/2,i&&(T=tse(v,w,i),S==="top"?C+=i[0]:S==="bottom"&&(C-=i[2]));for(var D=0,P=!1,N=ese("fill"in t?t.fill:(P=!0,m.fill)),R=Joe("stroke"in t?t.stroke:!l&&(!m.autoStroke||P)?(D=Koe,m.stroke):null),L=t.textShadowBlur>0,B=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),$=o.calculatedLineHeight,G=0;G<h.length;G++){var W=this._getOrCreateChild($1),K=W.createStyle();W.useStyle(K),K.text=h[G],K.x=T,K.y=C,K.textAlign=w,K.textBaseline="middle",K.opacity=t.opacity,K.strokeFirst=!0,L&&(K.shadowBlur=t.textShadowBlur||0,K.shadowColor=t.textShadowColor||"transparent",K.shadowOffsetX=t.textShadowOffsetX||0,K.shadowOffsetY=t.textShadowOffsetY||0),K.stroke=R,K.fill=N,R&&(K.lineWidth=t.lineWidth||D,K.lineDash=t.lineDash,K.lineDashOffset=t.lineDashOffset||0),K.font=r,Zoe(K,t),C+=f,B&&W.setBoundingRect(new dn(Dk(K.x,d,K.textAlign),x_(K.y,$,K.textBaseline),d,$))}},e.prototype._updateRichTexts=function(){var t=this.style,r=nse(t),i=est(r,t),a=i.width,o=i.outerWidth,s=i.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,h=t.align||d.align,f=t.verticalAlign||d.verticalAlign;this.isTruncated=!!i.isTruncated;var m=Dk(c,o,h),v=x_(u,s,f),y=m,w=v;l&&(y+=l[3],w+=l[0]);var S=y+a;T6(t)&&this._renderBackground(t,t,m,v,o,s);for(var T=!!t.backgroundColor,C=0;C<i.lines.length;C++){for(var k=i.lines[C],A=k.tokens,D=A.length,P=k.lineHeight,N=k.width,R=0,L=y,B=S,$=D-1,G=void 0;R<D&&(G=A[R],!G.align||G.align==="left");)this._placeToken(G,t,P,w,L,"left",T),N-=G.width,L+=G.width,R++;for(;$>=0&&(G=A[$],G.align==="right");)this._placeToken(G,t,P,w,B,"right",T),N-=G.width,B-=G.width,$--;for(L+=(a-(L-y)-(S-B)-N)/2;R<=$;)G=A[R],this._placeToken(G,t,P,w,L+G.width/2,"center",T),L+=G.width,R++;w+=P}},e.prototype._placeToken=function(t,r,i,a,o,s,l){var c=r.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=a+i/2;u==="top"?d=a+t.height/2:u==="bottom"&&(d=a+i-t.height/2);var h=!t.isLineHolder&&T6(c);h&&this._renderBackground(c,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,d-t.height/2,t.width,t.height);var f=!!c.backgroundColor,m=t.textPadding;m&&(o=tse(o,s,m),d-=t.height/2-m[0]-t.innerHeight/2);var v=this._getOrCreateChild($1),y=v.createStyle();v.useStyle(y);var w=this._defaultStyle,S=!1,T=0,C=ese("fill"in c?c.fill:"fill"in r?r.fill:(S=!0,w.fill)),k=Joe("stroke"in c?c.stroke:"stroke"in r?r.stroke:!f&&!l&&(!w.autoStroke||S)?(T=Koe,w.stroke):null),A=c.textShadowBlur>0||r.textShadowBlur>0;y.text=t.text,y.x=o,y.y=d,A&&(y.shadowBlur=c.textShadowBlur||r.textShadowBlur||0,y.shadowColor=c.textShadowColor||r.textShadowColor||"transparent",y.shadowOffsetX=c.textShadowOffsetX||r.textShadowOffsetX||0,y.shadowOffsetY=c.textShadowOffsetY||r.textShadowOffsetY||0),y.textAlign=s,y.textBaseline="middle",y.font=t.font||ly,y.opacity=Df(c.opacity,r.opacity,1),Zoe(y,c),k&&(y.lineWidth=Df(c.lineWidth,r.lineWidth,T),y.lineDash=Wt(c.lineDash,r.lineDash),y.lineDashOffset=r.lineDashOffset||0,y.stroke=k),C&&(y.fill=C);var D=t.contentWidth,P=t.contentHeight;v.setBoundingRect(new dn(Dk(y.x,D,y.textAlign),x_(y.y,P,y.textBaseline),D,P))},e.prototype._renderBackground=function(t,r,i,a,o,s){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,h=l&&!d,f=t.borderRadius,m=this,v,y;if(h||t.lineHeight||c&&u){v=this._getOrCreateChild(Yn),v.useStyle(v.createStyle()),v.style.fill=null;var w=v.shape;w.x=i,w.y=a,w.width=o,w.height=s,w.r=f,v.dirtyShape()}if(h){var S=v.style;S.fill=l||null,S.fillOpacity=Wt(t.fillOpacity,1)}else if(d){y=this._getOrCreateChild(Ro),y.onload=function(){m.dirtyStyle()};var T=y.style;T.image=l.image,T.x=i,T.y=a,T.width=o,T.height=s}if(c&&u){var S=v.style;S.lineWidth=c,S.stroke=u,S.strokeOpacity=Wt(t.strokeOpacity,1),S.lineDash=t.borderDash,S.lineDashOffset=t.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(S.strokeFirst=!0,S.lineWidth*=2)}var C=(v||y).style;C.shadowBlur=t.shadowBlur||0,C.shadowColor=t.shadowColor||"transparent",C.shadowOffsetX=t.shadowOffsetX||0,C.shadowOffsetY=t.shadowOffsetY||0,C.opacity=Df(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return t1e(t)&&(r=[t.fontStyle,t.fontWeight,e1e(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Qd(r)||t.textFont||t.font},e}(Yu),Cst={left:!0,right:1,center:1},Dst={top:1,bottom:1,middle:1},Xoe=["fontStyle","fontWeight","fontSize","fontFamily"];function e1e(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?Fq+"px":n+"px"}function Zoe(n,e){for(var t=0;t<Xoe.length;t++){var r=Xoe[t],i=e[r];i!=null&&(n[r]=i)}}function t1e(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function Ist(n){return Qoe(n),Z(n.rich,Qoe),n}function Qoe(n){if(n){n.font=Qn.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||Cst[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||Dst[t]?t:"top";var r=n.padding;r&&(n.padding=Hq(n.padding))}}function Joe(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function ese(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function tse(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function nse(n){var e=n.text;return e!=null&&(e+=""),e}function T6(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var Ut=Kn(),TH=function(n,e,t,r){if(r){var i=Ut(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=Ut(a);o.seriesIndex=n,o.dataIndex=t,o.dataType=e,o.ssrType="chart"})}},rse=1,ise={},n1e=Kn(),rY=Kn(),iY=0,ZI=1,Kj=2,gl=["emphasis","blur","select"],LD=["normal","emphasis","blur","select"],ST=10,Mst=9,fw="highlight",SR="downplay",lC="select",_R="unselect",cC="toggleSelect";function qS(n){return n!=null&&n!=="none"}function Xj(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function r1e(n){Xj(n,"emphasis",Kj)}function i1e(n){n.hoverState===Kj&&Xj(n,"normal",iY)}function aY(n){Xj(n,"blur",ZI)}function a1e(n){n.hoverState===ZI&&Xj(n,"normal",iY)}function Pst(n){n.selected=!0}function Nst(n){n.selected=!1}function ase(n,e,t){e(n,t)}function Kg(n,e,t){ase(n,e,t),n.isGroup&&n.traverse(function(r){ase(r,e,t)})}function v2(n,e){switch(e){case"emphasis":n.hoverState=Kj;break;case"normal":n.hoverState=iY;break;case"blur":n.hoverState=ZI;break;case"select":n.selected=!0}}function Rst(n,e,t,r){for(var i=n.style,a={},o=0;o<e.length;o++){var s=e[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<n.animators.length;o++){var c=n.animators[o];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(a,e)}return a}function Ost(n,e,t,r){var i=t&&mn(t,"select")>=0,a=!1;if(n instanceof Cn){var o=n1e(n),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(qS(s)||qS(l)){r=r||{};var c=r.style||{};c.fill==="inherit"?(a=!0,r=Me({},r),c=Me({},c),c.fill=s):!qS(c.fill)&&qS(s)?(a=!0,r=Me({},r),c=Me({},c),c.fill=cH(s)):!qS(c.stroke)&&qS(l)&&(a||(r=Me({},r),c=Me({},c)),c.stroke=cH(l)),r.style=c}}if(r&&r.z2==null){a||(r=Me({},r));var u=n.z2EmphasisLift;r.z2=n.z2+(u??ST)}return r}function Lst(n,e,t){if(t&&t.z2==null){t=Me({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??Mst)}return t}function jst(n,e,t){var r=mn(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:Rst(n,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Me({},t),o=Me({opacity:r?i:a.opacity*.1},o),t.style=o),t}function E6(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return Ost(this,n,e,t);if(n==="blur")return jst(this,n,t);if(n==="select")return Lst(this,n,t)}return t}function Fw(n){n.stateProxy=E6;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=E6),t&&(t.stateProxy=E6)}function ose(n,e){!c1e(n,e)&&!n.__highByOuter&&Kg(n,r1e)}function sse(n,e){!c1e(n,e)&&!n.__highByOuter&&Kg(n,i1e)}function Ng(n,e){n.__highByOuter|=1<<(e||0),Kg(n,r1e)}function Rg(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&Kg(n,i1e)}function o1e(n){Kg(n,aY)}function oY(n){Kg(n,a1e)}function s1e(n){Kg(n,Pst)}function l1e(n){Kg(n,Nst)}function c1e(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function u1e(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var o=rY(a),s=i==="series",l=s?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(c){a1e(c)}),s&&t.push(a)),o.isBlured=!1}),Z(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function EH(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(c,u){for(var d=0;d<u.length;d++){var h=c.getItemGraphicEl(u[d]);h&&oY(h)}}if(n!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(n),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(c){var u=o===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var h=d&&s?d===s:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!h||e==="series"&&u)){var f=r.getViewOfSeriesModel(c);if(f.group.traverse(function(y){y.__highByOuter&&u&&e==="self"||aY(y)}),Ns(e))a(c.getData(),e);else if(It(e))for(var m=Ln(e),v=0;v<m.length;v++)a(c.getData(m[v]),e[m[v]]);l.push(c),rY(c).isBlured=!0}}),i.eachComponent(function(c,u){if(c!=="series"){var d=r.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,i)}})}}function AH(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){rY(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){aY(a)})}}}function Fst(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=Lw(i,e);a=(Fe(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var c=Ut(o);EH(r,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&EH(r,u,d,t)}}}function sY(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(t),l,c=0;c<s.length;c++)if(Ut(s[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function $st(n,e,t){var r=Ut(n),i=sY(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,o=i.focusSelf;a?(o&&AH(r.componentMainType,r.componentIndex,t),Z(a,function(s){return ose(s,e)})):(EH(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&AH(r.componentMainType,r.componentIndex,t),ose(n,e))}function Bst(n,e,t){u1e(t);var r=Ut(n),i=sY(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?Z(i,function(a){return sse(a,e)}):sse(n,e)}function Ust(n,e,t){if(CH(e)){var r=e.dataType,i=n.getData(r),a=Lw(i,e);Fe(a)||(a=[a]),n[e.type===cC?"toggleSelect":e.type===lC?"select":"unselect"](a,r)}}function lse(n){var e=n.getAllData();Z(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,o){n.isSelected(o,i)?s1e(a):l1e(a)})})}function Vst(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();Z(r,function(i){i.data;var a=i.type,o=t.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:t.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function pw(n,e,t){Zb(n,!0),Kg(n,Fw),kH(n,e,t)}function zst(n){Zb(n,!1)}function Bi(n,e,t,r){r?zst(n):pw(n,e,t)}function kH(n,e,t){var r=Ut(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var cse=["emphasis","blur","select"],Hst={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function es(n,e,t,r){t=t||"itemStyle";for(var i=0;i<cse.length;i++){var a=cse[i],o=e.getModel([a,t]),s=n.ensureState(a);s.style=r?r(o):o[Hst[t]]()}}function Zb(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function jD(n){return!!(n&&n.__highDownDispatcher)}function Gst(n,e,t){var r=Ut(n);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function Wst(n){var e=ise[n];return e==null&&rse<=32&&(e=ise[n]=rse++),e}function CH(n){var e=n.type;return e===lC||e===_R||e===cC}function use(n){var e=n.type;return e===fw||e===SR}function qst(n){var e=n1e(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var YS=$f.CMD,Yst=[[],[],[]],dse=Math.sqrt,Kst=Math.atan2;function d1e(n,e){if(e){var t=n.data,r=n.len(),i,a,o,s,l,c,u=YS.M,d=YS.C,h=YS.L,f=YS.R,m=YS.A,v=YS.Q;for(o=0,s=0;o<r;){switch(i=t[o++],s=o,a=0,i){case u:a=1;break;case h:a=1;break;case d:a=3;break;case v:a=2;break;case m:var y=e[4],w=e[5],S=dse(e[0]*e[0]+e[1]*e[1]),T=dse(e[2]*e[2]+e[3]*e[3]),C=Kst(-e[1]/T,e[0]/S);t[o]*=S,t[o++]+=y,t[o]*=T,t[o++]+=w,t[o++]*=S,t[o++]*=T,t[o++]+=C,t[o++]+=C,o+=2,s=o;break;case f:c[0]=t[o++],c[1]=t[o++],Zo(c,c,e),t[s++]=c[0],t[s++]=c[1],c[0]+=t[o++],c[1]+=t[o++],Zo(c,c,e),t[s++]=c[0],t[s++]=c[1]}for(l=0;l<a;l++){var k=Yst[l];k[0]=t[o++],k[1]=t[o++],Zo(k,k,e),t[s++]=k[0],t[s++]=k[1]}}n.increaseVersion()}}var A6=Math.sqrt,rN=Math.sin,iN=Math.cos,FA=Math.PI;function hse(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function DH(n,e){return(n[0]*e[0]+n[1]*e[1])/(hse(n)*hse(e))}function fse(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(DH(n,e))}function pse(n,e,t,r,i,a,o,s,l,c,u){var d=l*(FA/180),h=iN(d)*(n-t)/2+rN(d)*(e-r)/2,f=-1*rN(d)*(n-t)/2+iN(d)*(e-r)/2,m=h*h/(o*o)+f*f/(s*s);m>1&&(o*=A6(m),s*=A6(m));var v=(i===a?-1:1)*A6((o*o*(s*s)-o*o*(f*f)-s*s*(h*h))/(o*o*(f*f)+s*s*(h*h)))||0,y=v*o*f/s,w=v*-s*h/o,S=(n+t)/2+iN(d)*y-rN(d)*w,T=(e+r)/2+rN(d)*y+iN(d)*w,C=fse([1,0],[(h-y)/o,(f-w)/s]),k=[(h-y)/o,(f-w)/s],A=[(-1*h-y)/o,(-1*f-w)/s],D=fse(k,A);if(DH(k,A)<=-1&&(D=FA),DH(k,A)>=1&&(D=0),D<0){var P=Math.round(D/FA*1e6)/1e6;D=FA*2+P%2*FA}u.addData(c,S,T,o,s,C,D,d,a)}var Xst=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Zst=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Qst(n){var e=new $f;if(!n)return e;var t=0,r=0,i=t,a=r,o,s=$f.CMD,l=n.match(Xst);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),h=void 0,f=u.match(Zst)||[],m=f.length,v=0;v<m;v++)f[v]=parseFloat(f[v]);for(var y=0;y<m;){var w=void 0,S=void 0,T=void 0,C=void 0,k=void 0,A=void 0,D=void 0,P=t,N=r,R=void 0,L=void 0;switch(d){case"l":t+=f[y++],r+=f[y++],h=s.L,e.addData(h,t,r);break;case"L":t=f[y++],r=f[y++],h=s.L,e.addData(h,t,r);break;case"m":t+=f[y++],r+=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="l";break;case"M":t=f[y++],r=f[y++],h=s.M,e.addData(h,t,r),i=t,a=r,d="L";break;case"h":t+=f[y++],h=s.L,e.addData(h,t,r);break;case"H":t=f[y++],h=s.L,e.addData(h,t,r);break;case"v":r+=f[y++],h=s.L,e.addData(h,t,r);break;case"V":r=f[y++],h=s.L,e.addData(h,t,r);break;case"C":h=s.C,e.addData(h,f[y++],f[y++],f[y++],f[y++],f[y++],f[y++]),t=f[y-2],r=f[y-1];break;case"c":h=s.C,e.addData(h,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r,f[y++]+t,f[y++]+r),t+=f[y-2],r+=f[y-1];break;case"S":w=t,S=r,R=e.len(),L=e.data,o===s.C&&(w+=t-L[R-4],S+=r-L[R-3]),h=s.C,P=f[y++],N=f[y++],t=f[y++],r=f[y++],e.addData(h,w,S,P,N,t,r);break;case"s":w=t,S=r,R=e.len(),L=e.data,o===s.C&&(w+=t-L[R-4],S+=r-L[R-3]),h=s.C,P=t+f[y++],N=r+f[y++],t+=f[y++],r+=f[y++],e.addData(h,w,S,P,N,t,r);break;case"Q":P=f[y++],N=f[y++],t=f[y++],r=f[y++],h=s.Q,e.addData(h,P,N,t,r);break;case"q":P=f[y++]+t,N=f[y++]+r,t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,P,N,t,r);break;case"T":w=t,S=r,R=e.len(),L=e.data,o===s.Q&&(w+=t-L[R-4],S+=r-L[R-3]),t=f[y++],r=f[y++],h=s.Q,e.addData(h,w,S,t,r);break;case"t":w=t,S=r,R=e.len(),L=e.data,o===s.Q&&(w+=t-L[R-4],S+=r-L[R-3]),t+=f[y++],r+=f[y++],h=s.Q,e.addData(h,w,S,t,r);break;case"A":T=f[y++],C=f[y++],k=f[y++],A=f[y++],D=f[y++],P=t,N=r,t=f[y++],r=f[y++],h=s.A,pse(P,N,t,r,A,D,T,C,k,h,e);break;case"a":T=f[y++],C=f[y++],k=f[y++],A=f[y++],D=f[y++],P=t,N=r,t+=f[y++],r+=f[y++],h=s.A,pse(P,N,t,r,A,D,T,C,k,h,e);break}}(d==="z"||d==="Z")&&(h=s.Z,e.addData(h),t=i,r=a),o=h}return e.toStatic(),e}var h1e=function(n){pi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Cn);function f1e(n){return n.setData!=null}function p1e(n,e){var t=Qst(n),r=Me({},e);return r.buildPath=function(i){if(f1e(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){d1e(t,i),this.dirtyShape()},r}function g1e(n,e){return new h1e(p1e(n,e))}function Jst(n,e){var t=p1e(n,e),r=function(i){pi(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(h1e);return r}function elt(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var o=new Cn(e);return o.createPathProxy(),o.buildPath=function(s){if(f1e(s)){s.appendPath(t);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function lY(n,e){e=e||{};var t=new Cn;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?d1e(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var tlt=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Xg=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new tlt},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(Cn);Xg.prototype.type="circle";var nlt=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Zj=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new nlt},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,c=s*i,u=l*i;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-u,a-c,o-l,a,o-l),t.bezierCurveTo(a+c,o-l,a+s,o-u,a+s,o),t.bezierCurveTo(a+s,o+u,a+c,o+l,a,o+l),t.bezierCurveTo(a-c,o+l,a-s,o+u,a-s,o),t.closePath()},e}(Cn);Zj.prototype.type="ellipse";var m1e=Math.PI,k6=m1e*2,ub=Math.sin,KS=Math.cos,rlt=Math.acos,bs=Math.atan2,gse=Math.abs,uC=Math.sqrt,Ik=Math.max,af=Math.min,Rd=1e-4;function ilt(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=d*l-u*c;if(!(h*h<Rd))return h=(u*(e-a)-d*(n-i))/h,[n+h*l,e+h*c]}function aN(n,e,t,r,i,a,o){var s=n-t,l=e-r,c=(o?a:-a)/uC(s*s+l*l),u=c*l,d=-c*s,h=n+u,f=e+d,m=t+u,v=r+d,y=(h+m)/2,w=(f+v)/2,S=m-h,T=v-f,C=S*S+T*T,k=i-a,A=h*v-m*f,D=(T<0?-1:1)*uC(Ik(0,k*k*C-A*A)),P=(A*T-S*D)/C,N=(-A*S-T*D)/C,R=(A*T+S*D)/C,L=(-A*S+T*D)/C,B=P-y,$=N-w,G=R-y,W=L-w;return B*B+$*$>G*G+W*W&&(P=R,N=L),{cx:P,cy:N,x0:-u,y0:-d,x1:P*(i/k-1),y1:N*(i/k-1)}}function alt(n){var e;if(Fe(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function olt(n,e){var t,r=Ik(e.r,0),i=Ik(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,h=!!e.clockwise,f=gse(c-l),m=f>k6&&f%k6;if(m>Rd&&(f=m),!(r>Rd))n.moveTo(u,d);else if(f>k6-Rd)n.moveTo(u+r*KS(l),d+r*ub(l)),n.arc(u,d,r,l,c,!h),i>Rd&&(n.moveTo(u+i*KS(c),d+i*ub(c)),n.arc(u,d,i,c,l,h));else{var v=void 0,y=void 0,w=void 0,S=void 0,T=void 0,C=void 0,k=void 0,A=void 0,D=void 0,P=void 0,N=void 0,R=void 0,L=void 0,B=void 0,$=void 0,G=void 0,W=r*KS(l),K=r*ub(l),X=i*KS(c),te=i*ub(c),ie=f>Rd;if(ie){var z=e.cornerRadius;z&&(t=alt(z),v=t[0],y=t[1],w=t[2],S=t[3]);var se=gse(r-i)/2;if(T=af(se,w),C=af(se,S),k=af(se,v),A=af(se,y),N=D=Ik(T,C),R=P=Ik(k,A),(D>Rd||P>Rd)&&(L=r*KS(c),B=r*ub(c),$=i*KS(l),G=i*ub(l),f<m1e)){var ce=ilt(W,K,$,G,L,B,X,te);if(ce){var ee=W-ce[0],be=K-ce[1],fe=L-ce[0],De=B-ce[1],dt=1/ub(rlt((ee*fe+be*De)/(uC(ee*ee+be*be)*uC(fe*fe+De*De)))/2),ve=uC(ce[0]*ce[0]+ce[1]*ce[1]);N=af(D,(r-ve)/(dt+1)),R=af(P,(i-ve)/(dt-1))}}}if(!ie)n.moveTo(u+W,d+K);else if(N>Rd){var de=af(w,N),me=af(S,N),xe=aN($,G,W,K,r,de,h),pe=aN(L,B,X,te,r,me,h);n.moveTo(u+xe.cx+xe.x0,d+xe.cy+xe.y0),N<D&&de===me?n.arc(u+xe.cx,d+xe.cy,N,bs(xe.y0,xe.x0),bs(pe.y0,pe.x0),!h):(de>0&&n.arc(u+xe.cx,d+xe.cy,de,bs(xe.y0,xe.x0),bs(xe.y1,xe.x1),!h),n.arc(u,d,r,bs(xe.cy+xe.y1,xe.cx+xe.x1),bs(pe.cy+pe.y1,pe.cx+pe.x1),!h),me>0&&n.arc(u+pe.cx,d+pe.cy,me,bs(pe.y1,pe.x1),bs(pe.y0,pe.x0),!h))}else n.moveTo(u+W,d+K),n.arc(u,d,r,l,c,!h);if(!(i>Rd)||!ie)n.lineTo(u+X,d+te);else if(R>Rd){var de=af(v,R),me=af(y,R),xe=aN(X,te,L,B,i,-me,h),pe=aN(W,K,$,G,i,-de,h);n.lineTo(u+xe.cx+xe.x0,d+xe.cy+xe.y0),R<P&&de===me?n.arc(u+xe.cx,d+xe.cy,R,bs(xe.y0,xe.x0),bs(pe.y0,pe.x0),!h):(me>0&&n.arc(u+xe.cx,d+xe.cy,me,bs(xe.y0,xe.x0),bs(xe.y1,xe.x1),!h),n.arc(u,d,i,bs(xe.cy+xe.y1,xe.cx+xe.x1),bs(pe.cy+pe.y1,pe.cx+pe.x1),h),de>0&&n.arc(u+pe.cx,d+pe.cy,de,bs(pe.y1,pe.x1),bs(pe.y0,pe.x0),!h))}else n.lineTo(u+X,d+te),n.arc(u,d,i,c,l,h)}n.closePath()}}}var slt=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),ml=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new slt},e.prototype.buildPath=function(t,r){olt(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Cn);ml.prototype.type="sector";var llt=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),QI=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new llt},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,o,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,o,!0)},e}(Cn);QI.prototype.type="ring";function clt(n,e,t,r){var i=[],a=[],o=[],s=[],l,c,u,d;if(r){u=[1/0,1/0],d=[-1/0,-1/0];for(var h=0,f=n.length;h<f;h++)jv(u,u,n[h]),Fv(d,d,n[h]);jv(u,u,r[0]),Fv(d,d,r[1])}for(var h=0,f=n.length;h<f;h++){var m=n[h];if(t)l=n[h?h-1:f-1],c=n[(h+1)%f];else if(h===0||h===f-1){i.push(vg(n[h]));continue}else l=n[h-1],c=n[h+1];Kb(a,c,l),gR(a,a,e);var v=eH(m,l),y=eH(m,c),w=v+y;w!==0&&(v/=w,y/=w),gR(o,a,-v),gR(s,a,y);var S=loe([],m,o),T=loe([],m,s);r&&(Fv(S,S,u),jv(S,S,d),Fv(T,T,u),jv(T,T,d)),i.push(S),i.push(T)}return t&&i.push(i.shift()),i}function v1e(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=clt(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(t?o:o-1);s++){var l=a[s*2],c=a[s*2+1],u=i[(s+1)%o];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var s=1,d=i.length;s<d;s++)n.lineTo(i[s][0],i[s][1])}t&&n.closePath()}}var ult=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),vl=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new ult},e.prototype.buildPath=function(t,r){v1e(t,r,!0)},e}(Cn);vl.prototype.type="polygon";var dlt=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),yl=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new dlt},e.prototype.buildPath=function(t,r){v1e(t,r,!1)},e}(Cn);yl.prototype.type="polyline";var hlt={},flt=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),so=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new flt},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var l=Q_e(hlt,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var c=r.percent;c!==0&&(t.moveTo(i,a),c<1&&(o=i*(1-c)+o*c,s=a*(1-c)+s*c),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(Cn);so.prototype.type="line";var Pl=[],plt=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function mse(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?woe:ao)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?woe:ao)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?aH:Co)(n.x1,n.cpx1,n.x2,e),(t?aH:Co)(n.y1,n.cpy1,n.y2,e)]}var JI=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new plt},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,c=r.cpy1,u=r.cpx2,d=r.cpy2,h=r.percent;h!==0&&(t.moveTo(i,a),u==null||d==null?(h<1&&(MD(i,l,o,h,Pl),l=Pl[1],o=Pl[2],MD(a,c,s,h,Pl),c=Pl[1],s=Pl[2]),t.quadraticCurveTo(l,c,o,s)):(h<1&&(uy(i,l,u,o,h,Pl),l=Pl[1],u=Pl[2],o=Pl[3],uy(a,c,d,s,h,Pl),c=Pl[1],d=Pl[2],s=Pl[3]),t.bezierCurveTo(l,c,u,d,o,s)))},e.prototype.pointAt=function(t){return mse(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=mse(this.shape,t,!0);return bT(r,r)},e}(Cn);JI.prototype.type="bezier-curve";var glt=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Qj=function(n){pi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new glt},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,c=r.clockwise,u=Math.cos(s),d=Math.sin(s);t.moveTo(u*o+i,d*o+a),t.arc(i,a,o,s,l,!c)},e}(Cn);Qj.prototype.type="arc";var cY=function(n){pi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Cn.prototype.getBoundingRect.call(this)},e}(Cn),y1e=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}(),eM=function(n){pi(e,n);function e(t,r,i,a,o,s){var l=n.call(this,o)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return e}(y1e),b1e=function(n){pi(e,n);function e(t,r,i,a,o){var s=n.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(y1e),db=[0,0],hb=[0,0],oN=new ln,sN=new ln,y2=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new ln;for(var r=0;r<2;r++)this._axes[r]=new ln;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,l=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),t)for(var c=0;c<4;c++)r[c].transform(t);ln.sub(i[0],r[1],r[0]),ln.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var c=0;c<2;c++)this._origin[c]=i[c].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return oN.set(1/0,1/0),sN.set(0,0),!this._intersectCheckOneSide(this,e,oN,sN,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,oN,sN,i,-1)&&(r=!1,i)||i||ln.copy(t,r?oN:sN),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,o){for(var s=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,db),this._getProjMinMaxOnAxis(l,t._corners,hb),db[1]<hb[0]||db[0]>hb[1]){if(s=!1,a)return s;var u=Math.abs(hb[0]-db[1]),d=Math.abs(db[0]-hb[1]);Math.min(u,d)>i.len()&&(u<d?ln.scale(i,c,-u*o):ln.scale(i,c,d*o))}else if(r){var u=Math.abs(hb[0]-db[1]),d=Math.abs(db[0]-hb[1]);Math.min(u,d)<r.len()&&(u<d?ln.scale(r,c,u*o):ln.scale(r,c,-d*o))}}return s},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,o=t[0].dot(i)+a[e],s=o,l=o,c=1;c<t.length;c++){var u=t[c].dot(i)+a[e];s=Math.min(u,s),l=Math.max(u,l)}r[0]=s,r[1]=l},n}(),mlt=[],vlt=function(n){pi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new dn(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(mlt)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(Yu),w1e=Kn();function _T(n,e,t,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),l=n==="update";if(s){var c=void 0,u=void 0,d=void 0;r?(c=Wt(r.duration,200),u=Wt(r.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(c=a.duration),a.easing!=null&&(u=a.easing),a.delay!=null&&(d=a.delay)),kt(d)&&(d=d(t,i)),kt(c)&&(c=c(t));var h={duration:c||0,delay:d,easing:u};return h}else return null}function uY(n,e,t,r,i,a,o){var s=!1,l;kt(i)?(o=a,a=i,i=null):It(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=_T(n,r,i,c?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(u&&u.duration>0){var d=u.duration,h=u.delay,f=u.easing,m={duration:d,delay:h||0,easing:f,done:a,force:!!a||!!o,setToFinal:!c,scope:n,during:o};s?e.animateFrom(t,m):e.animateTo(t,m)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function ar(n,e,t,r,i,a){uY("update",n,e,t,r,i,a)}function xi(n,e,t,r,i,a){uY("enter",n,e,t,r,i,a)}function Q_(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function dy(n,e,t,r,i,a){Q_(n)||uY("leave",n,e,t,r,i,a)}function vse(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),dy(n,{style:{opacity:0}},e,t,r)}function FD(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||vse(i,e,t,r)}):vse(n,e,t,r)}function ch(n){w1e(n).oldStyle=n.style}function ylt(n){return w1e(n).oldStyle}var b2=Math.max,w2=Math.min,IH={};function blt(n){return Cn.extend(n)}var wlt=Jst;function xlt(n,e){return wlt(n,e)}function hh(n,e){IH[n]=e}function dY(n){if(IH.hasOwnProperty(n))return IH[n]}function Jj(n,e,t,r){var i=g1e(n,e);return t&&(r==="center"&&(t=S1e(t,i.getBoundingRect())),_1e(i,t)),i}function x1e(n,e,t){var r=new Ro({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(S1e(e,a))}}});return r}function S1e(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,o=n.y+n.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Lu=elt;function _1e(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function B1(n,e){return Q_e(n,n,{lineWidth:e}),n}function Slt(n){return J_e(n.shape,n.shape,n.style),n}var TR=Xb;function gw(n,e){for(var t=Uj([]);n&&n!==e;)yg(t,n.getLocalTransform(),t),n=n.parent;return t}function rh(n,e,t){return e&&!Ns(e)&&(e=og.getLocalTransform(e)),t&&(e=wT([],e)),Zo([],n,e)}function eF(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=rh(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function yse(n){return!n.isGroup}function _lt(n){return n.shape!=null}function tM(n,e,t){if(!n||!e)return;function r(o){var s={};return o.traverse(function(l){yse(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return _lt(o)&&(s.shape=Me({},o.shape)),s}var a=r(n);e.traverse(function(o){if(yse(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),ar(o,l,t,Ut(o).dataIndex)}}})}function T1e(n,e){return Be(n,function(t){var r=t[0];r=b2(r,e.x),r=w2(r,e.x+e.width);var i=t[1];return i=b2(i,e.y),i=w2(i,e.y+e.height),[r,i]})}function Tlt(n,e){var t=b2(n.x,e.x),r=w2(n.x+n.width,e.x+e.width),i=b2(n.y,e.y),a=w2(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function nM(n,e,t){var r=Me({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Dt(i,t),new Ro(r)):Jj(n.replace("path://",""),r,t,"center")}function Mk(n,e,t,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(E1e(n,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function E1e(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=C6(u,d,l,c);if(Elt(h))return!1;var f=n-i,m=e-a,v=C6(f,m,l,c)/h;if(v<0||v>1)return!1;var y=C6(f,m,u,d)/h;return!(y<0||y>1)}function C6(n,e,t,r){return n*r-t*e}function Elt(n){return n<=1e-6&&n>=-1e-6}function Jw(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=st(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=n.formatterParamsExtra;l&&Z(Ln(l),function(u){ft(s,u)||(s[u]=l[u],s.$vars.push(u))});var c=Ut(n.el);c.componentMainType=a,c.componentIndex=o,c.tooltipConfig={name:r,option:Dt({content:r,encodeHTMLContent:!0,formatterParams:s},i)}}function bse(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function ky(n,e){if(n)if(Fe(n))for(var t=0;t<n.length;t++)bse(n[t],e);else bse(n,e)}hh("circle",Xg);hh("ellipse",Zj);hh("sector",ml);hh("ring",QI);hh("polygon",vl);hh("polyline",yl);hh("rect",Yn);hh("line",so);hh("bezierCurve",JI);hh("arc",Qj);const ex=Object.freeze(Object.defineProperty({__proto__:null,Arc:Qj,BezierCurve:JI,BoundingRect:dn,Circle:Xg,CompoundPath:cY,Ellipse:Zj,Group:jt,Image:Ro,IncrementalDisplayable:vlt,Line:so,LinearGradient:eM,OrientedBoundingRect:y2,Path:Cn,Point:ln,Polygon:vl,Polyline:yl,RadialGradient:b1e,Rect:Yn,Ring:QI,Sector:ml,Text:Qn,applyTransform:rh,clipPointsByRect:T1e,clipRectByRect:Tlt,createIcon:nM,extendPath:xlt,extendShape:blt,getShapeClass:dY,getTransform:gw,groupTransition:tM,initProps:xi,isElementRemoved:Q_,lineLineIntersect:E1e,linePolygonIntersect:Mk,makeImage:x1e,makePath:Jj,mergePath:Lu,registerShape:hh,removeElement:dy,removeElementWithFadeOut:FD,resizePath:_1e,setTooltipConfig:Jw,subPixelOptimize:TR,subPixelOptimizeLine:B1,subPixelOptimizeRect:Slt,transformDirection:eF,traverseElements:ky,updateProps:ar},Symbol.toStringTag,{value:"Module"}));var tF={};function A1e(n,e){for(var t=0;t<gl.length;t++){var r=gl[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var o=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(o,!0)}function MH(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=kt(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:s},c=0;c<gl.length;c++){var u=gl[c],d=e[u];l[u]=Wt(r?r.getFormattedLabel(i,u,null,a,d&&d.get("formatter")):null,s)}return l}function ts(n,e,t,r){t=t||tF;for(var i=n instanceof Qn,a=!1,o=0;o<LD.length;o++){var s=e[LD[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new Qn,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=MH(t,e),u=e.normal,d=!!u.getShallow("show"),h=ri(u,r&&r.normal,t,!1,!i);h.text=c.normal,i||n.setTextConfig(x2(u,t,!1));for(var o=0;o<gl.length;o++){var f=gl[o],s=e[f];if(s){var m=l.ensureState(f),v=!!Wt(s.getShallow("show"),d);if(v!==d&&(m.ignore=!v),m.style=ri(s,r&&r[f],t,!0,!i),m.style.text=c[f],!i){var y=n.ensureState(f);y.textConfig=x2(s,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!d,l.useStyle(h),l.dirty(),t.enableTextSetter&&(TT(l).setLabelText=function(w){var S=MH(t,e,w);A1e(l,S)})}else l&&(l.ignore=!0);n.dirty()}function ho(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<gl.length;r++){var i=gl[r];t[i]=n.getModel([i,e])}return t}function ri(n,e,t,r,i){var a={};return Alt(a,n,t,r,i),e&&Me(a,e),a}function x2(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),o=Wt(n.getShallow("distance"),t?null:5),s=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function Alt(n,e,t,r,i){t=t||tF;var a=e.ecModel,o=a&&a.option.textStyle,s=klt(e),l;if(s){l={};for(var c in s)if(s.hasOwnProperty(c)){var u=e.getModel(["rich",c]);_se(l[c]={},u,o,t,r,i,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var h=e.get("minMargin");h!=null&&(n.margin=h),_se(n,e,o,t,r,i,!0,!1)}function klt(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||tF).rich;if(t){e=e||{};for(var r=Ln(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var wse=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],xse=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Sse=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function _se(n,e,t,r,i,a,o,s){t=!i&&t||tF;var l=r&&r.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=Wt(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),a||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var h=Wt(e.getShallow("textBorderWidth"),t.textBorderWidth);h!=null&&(n.lineWidth=h);var f=Wt(e.getShallow("textBorderType"),t.textBorderType);f!=null&&(n.lineDash=f);var m=Wt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);m!=null&&(n.lineDashOffset=m),!i&&d==null&&!s&&(d=r&&r.defaultOpacity),d!=null&&(n.opacity=d),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var v=0;v<wse.length;v++){var y=wse[v],w=Wt(e.getShallow(y),t[y]);w!=null&&(n[y]=w)}for(var v=0;v<xse.length;v++){var y=xse[v],w=e.getShallow(y);w!=null&&(n[y]=w)}if(n.verticalAlign==null){var S=e.getShallow("baseline");S!=null&&(n.verticalAlign=S)}if(!o||!r.disableBox){for(var v=0;v<Sse.length;v++){var y=Sse[v],w=e.getShallow(y);w!=null&&(n[y]=w)}var T=e.getShallow("borderType");T!=null&&(n.borderDash=T),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function hY(n,e){var t=e&&e.getModel("textStyle");return Qd([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var TT=Kn();function k1e(n,e,t,r){if(n){var i=TT(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function C1e(n,e,t,r,i){var a=TT(n);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Wt(a.interpolatedValue,a.prevValue),l=a.value;function c(u){var d=H_e(t,a.precision,s,l,u);a.interpolatedValue=u===1?null:d;var h=MH({labelDataIndex:e,labelFetcher:i,defaultText:o?o(d):d+""},a.statesModels,d);A1e(n,h)}n.percent=0,(a.prevValue==null?xi:ar)(n,{percent:1},r,e,null,c)}var Clt=["textStyle","color"],D6=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],I6=new Qn,Dlt=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Clt):null)},n.prototype.getFont=function(){return hY({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<D6.length;r++)t[D6[r]]=this.getShallow(D6[r]);return I6.useStyle(t),I6.update(),I6.getBoundingRect()},n}(),D1e=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Ilt=jw(D1e),Mlt=function(){function n(){}return n.prototype.getLineStyle=function(e){return Ilt(this,e)},n}(),I1e=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Plt=jw(I1e),Nlt=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return Plt(this,e,t)},n}(),wr=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){sn(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Nt(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Mn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();eY(wr);Vot(wr);Ia(wr,Mlt);Ia(wr,Nlt);Ia(wr,qot);Ia(wr,Dlt);var Rlt=Math.round(Math.random()*10);function ET(n){return[n||"",Rlt++].join("_")}function Olt(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=xf(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=xf(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function Llt(n,e){n.topologicalTravel=function(a,o,s,l){if(!a.length)return;var c=t(o),u=c.graph,d=c.noEntryList,h={};for(Z(a,function(S){h[S]=!0});d.length;){var f=d.pop(),m=u[f],v=!!h[f];v&&(s.call(l,f,m.originalDeps.slice()),delete h[f]),Z(m.successor,v?w:y)}Z(h,function(){var S="";throw new Error(S)});function y(S){u[S].entryCount--,u[S].entryCount===0&&d.push(S)}function w(S){h[S]=!0,y(S)}};function t(a){var o={},s=[];return Z(a,function(l){var c=r(o,l),u=c.originalDeps=e(l),d=i(u,a);c.entryCount=d.length,c.entryCount===0&&s.push(l),Z(d,function(h){mn(c.predecessor,h)<0&&c.predecessor.push(h);var f=r(o,h);mn(f.successor,h)<0&&f.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return Z(a,function(l){mn(o,l)>=0&&s.push(l)}),s}}function Cy(n,e){return sn(sn({},n,!0),e,!0)}const jlt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Flt={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var S2="ZH",fY="EN",J_=fY,ER={},pY={},M1e=Mn.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||J_).toUpperCase();return n.indexOf(S2)>-1?S2:J_}():J_;function P1e(n,e){n=n.toUpperCase(),pY[n]=new wr(e),ER[n]=e}function $lt(n){if(st(n)){var e=ER[n.toUpperCase()]||{};return n===S2||n===fY?Nt(e):sn(Nt(e),Nt(ER[J_]),!1)}else return sn(Nt(n),Nt(ER[J_]),!1)}function PH(n){return pY[n]}function Blt(){return pY[J_]}P1e(fY,jlt);P1e(S2,Flt);var gY=1e3,mY=gY*60,dC=mY*60,ju=dC*24,Tse=ju*365,Pk={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},lN="{yyyy}-{MM}-{dd}",Ese={year:"{yyyy}",month:"{yyyy}-{MM}",day:lN,hour:lN+" "+Pk.hour,minute:lN+" "+Pk.minute,second:lN+" "+Pk.second,millisecond:Pk.none},M6=["year","month","day","hour","minute","second","millisecond"],N1e=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function vv(n,e){return n+="","0000".substr(0,e-n.length)+n}function e1(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function Ult(n){return n===e1(n)}function Vlt(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function nF(n,e,t,r){var i=Ff(n),a=i[vY(t)](),o=i[t1(t)]()+1,s=Math.floor((o-1)/3)+1,l=i[rF(t)](),c=i["get"+(t?"UTC":"")+"Day"](),u=i[$D(t)](),d=(u-1)%12+1,h=i[iF(t)](),f=i[aF(t)](),m=i[oF(t)](),v=u>=12?"pm":"am",y=v.toUpperCase(),w=r instanceof wr?r:PH(r||M1e)||Blt(),S=w.getModel("time"),T=S.get("month"),C=S.get("monthAbbr"),k=S.get("dayOfWeek"),A=S.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,v+"").replace(/{A}/g,y+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,vv(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,T[o-1]).replace(/{MMM}/g,C[o-1]).replace(/{MM}/g,vv(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,vv(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,k[c]).replace(/{ee}/g,A[c]).replace(/{e}/g,c+"").replace(/{HH}/g,vv(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,vv(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,vv(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,vv(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,vv(m,3)).replace(/{S}/g,m+"")}function zlt(n,e,t,r,i){var a=null;if(st(t))a=t;else if(kt(t))a=t(n.value,e,{level:n.level});else{var o=Me({},Pk);if(n.level>0)for(var s=0;s<M6.length;++s)o[M6[s]]="{primary|"+o[M6[s]]+"}";var l=t?t.inherit===!1?t:Dt(t,o):o,c=R1e(n.value,i);if(l[c])a=l[c];else if(l.inherit){for(var u=N1e.indexOf(c),s=u-1;s>=0;--s)if(l[c]){a=l[c];break}a=a||o.none}if(Fe(a)){var d=n.level==null?0:n.level>=0?n.level:a.length+n.level;d=Math.min(d,a.length-1),a=a[d]}}return nF(new Date(n.value),a,i,r)}function R1e(n,e){var t=Ff(n),r=t[t1(e)]()+1,i=t[rF(e)](),a=t[$D(e)](),o=t[iF(e)](),s=t[aF(e)](),l=t[oF(e)](),c=l===0,u=c&&s===0,d=u&&o===0,h=d&&a===0,f=h&&i===1,m=f&&r===1;return m?"year":f?"month":h?"day":d?"hour":u?"minute":c?"second":"millisecond"}function Ase(n,e,t){var r=rr(n)?Ff(n):n;switch(e=e||R1e(n,t),e){case"year":return r[vY(t)]();case"half-year":return r[t1(t)]()>=6?1:0;case"quarter":return Math.floor((r[t1(t)]()+1)/4);case"month":return r[t1(t)]();case"day":return r[rF(t)]();case"half-day":return r[$D(t)]()/24;case"hour":return r[$D(t)]();case"minute":return r[iF(t)]();case"second":return r[aF(t)]();case"millisecond":return r[oF(t)]()}}function vY(n){return n?"getUTCFullYear":"getFullYear"}function t1(n){return n?"getUTCMonth":"getMonth"}function rF(n){return n?"getUTCDate":"getDate"}function $D(n){return n?"getUTCHours":"getHours"}function iF(n){return n?"getUTCMinutes":"getMinutes"}function aF(n){return n?"getUTCSeconds":"getSeconds"}function oF(n){return n?"getUTCMilliseconds":"getMilliseconds"}function Hlt(n){return n?"setUTCFullYear":"setFullYear"}function O1e(n){return n?"setUTCMonth":"setMonth"}function L1e(n){return n?"setUTCDate":"setDate"}function j1e(n){return n?"setUTCHours":"setHours"}function F1e(n){return n?"setUTCMinutes":"setMinutes"}function $1e(n){return n?"setUTCSeconds":"setSeconds"}function B1e(n){return n?"setUTCMilliseconds":"setMilliseconds"}function U1e(n){if(!L_e(n))return st(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function V1e(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var AT=Hq;function NH(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(u){return u&&Qd(u)?u:"-"}function a(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var o=e==="time",s=n instanceof Date;if(o||s){var l=o?Ff(n):n;if(isNaN(+l)){if(s)return"-"}else return nF(l,r,t)}if(e==="ordinal")return X9(n)?i(n):rr(n)&&a(n)?n+"":"-";var c=Pg(n);return a(c)?U1e(c):X9(n)?i(n):typeof n=="boolean"?n+"":"-"}var kse=["a","b","c","d","e","f","g"],P6=function(n,e){return"{"+n+(e??"")+"}"};function z1e(n,e,t){Fe(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=kse[a];n=n.replace(P6(o),P6(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var c=e[s][i[l]];n=n.replace(P6(kse[l],s),t?al(c):c)}return n}function Glt(n,e,t){return Z(e,function(r,i){n=n.replace("{"+i+"}",r)}),n}function Wlt(n,e){var t=st(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+al(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+al(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function $w(n,e){return e=e||"transparent",st(n)?n:It(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function _2(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var AR=Z,H1e=["left","right","top","bottom","width","height"],Qb=[["width","left","right"],["height","top","bottom"]];function yY(n,e,t,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),h=d&&d.getBoundingRect(),f,m;if(n==="horizontal"){var v=u.width+(h?-h.x+u.x:0);f=a+v,f>r||l.newline?(a=0,f=v,o+=s+t,s=u.height):s=Math.max(s,u.height)}else{var y=u.height+(h?-h.y+u.y:0);m=o+y,m>i||l.newline?(a+=s+t,o=0,m=y,s=u.width):s=Math.max(s,u.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),n==="horizontal"?a=f+t:o=m+t)})}var mw=yY;Qt(yY,"vertical");Qt(yY,"horizontal");function qlt(n,e,t){var r=e.width,i=e.height,a=tt(n.left,r),o=tt(n.top,i),s=tt(n.right,r),l=tt(n.bottom,i);return(isNaN(a)||isNaN(parseFloat(n.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(n.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(n.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(n.bottom)))&&(l=i),t=AT(t||0),{width:Math.max(s-a-t[1]-t[3],0),height:Math.max(l-o-t[0]-t[2],0)}}function qa(n,e,t){t=AT(t||0);var r=e.width,i=e.height,a=tt(n.left,r),o=tt(n.top,i),s=tt(n.right,r),l=tt(n.bottom,i),c=tt(n.width,r),u=tt(n.height,i),d=t[2]+t[0],h=t[1]+t[3],f=n.aspect;switch(isNaN(c)&&(c=r-s-h-a),isNaN(u)&&(u=i-l-d-o),f!=null&&(isNaN(c)&&isNaN(u)&&(f>r/i?c=r*.8:u=i*.8),isNaN(c)&&(c=f*u),isNaN(u)&&(u=c/f)),isNaN(a)&&(a=r-s-c-h),isNaN(o)&&(o=i-l-u-d),n.left||n.right){case"center":a=r/2-c/2-t[3];break;case"right":a=r-c-h;break}switch(n.top||n.bottom){case"middle":case"center":o=i/2-u/2-t[0];break;case"bottom":o=i-u-d;break}a=a||0,o=o||0,isNaN(c)&&(c=r-h-a-(s||0)),isNaN(u)&&(u=i-d-o-(l||0));var m=new dn(a+t[3],o+t[0],c,u);return m.margin=t,m}function sF(n,e,t,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!o&&!s)return!1;var c;if(l==="raw")c=n.type==="group"?new dn(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(c=n.getBoundingRect(),n.needLocalTransform()){var u=n.getLocalTransform();c=c.clone(),c.applyTransform(u)}var d=qa(Dt({width:c.width,height:c.height},e),t,r),h=o?d.x-c.x:0,f=s?d.y-c.y:0;return l==="raw"?(a.x=h,a.y=f):(a.x+=h,a.y+=f),a===n&&n.markRedraw(),!0}function Ylt(n,e){return n[Qb[e][0]]!=null||n[Qb[e][1]]!=null&&n[Qb[e][2]]!=null}function BD(n){var e=n.layoutMode||n.constructor.layoutMode;return It(e)?e:e?{type:e}:null}function hy(n,e,t){var r=t&&t.ignoreSize;!Fe(r)&&(r=[r,r]);var i=o(Qb[0],0),a=o(Qb[1],1);c(Qb[0],n,i),c(Qb[1],n,a);function o(u,d){var h={},f=0,m={},v=0,y=2;if(AR(u,function(T){m[T]=n[T]}),AR(u,function(T){s(e,T)&&(h[T]=m[T]=e[T]),l(h,T)&&f++,l(m,T)&&v++}),r[d])return l(e,u[1])?m[u[2]]=null:l(e,u[2])&&(m[u[1]]=null),m;if(v===y||!f)return m;if(f>=y)return h;for(var w=0;w<u.length;w++){var S=u[w];if(!s(h,S)&&s(n,S)){h[S]=n[S];break}}return h}function s(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,h){AR(u,function(f){d[f]=h[f]})}}function kT(n){return G1e({},n)}function G1e(n,e){return e&&n&&AR(H1e,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var Klt=Kn(),On=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=ET("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=BD(this),a=i?kT(t):{},o=r.getTheme();sn(t,o.get(this.mainType)),sn(t,this.getDefaultOption()),i&&hy(t,a,i)},e.prototype.mergeOption=function(t,r){sn(this.option,t,!0);var i=BD(this);i&&hy(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!$ot(t))return t.defaultOption;var r=Klt(this);if(!r.defaultOption){for(var i=[],a=t;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=sn(s,i[l],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return XI(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(wr);W_e(On,wr);Gj(On);Olt(On);Llt(On,Xlt);function Xlt(n){var e=[];return Z(On.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Be(e,function(t){return xf(t).main}),n!=="dataset"&&mn(e,"dataset")<=0&&e.unshift("dataset"),e}var W1e="";typeof navigator<"u"&&(W1e=navigator.platform||"");var XS="rgba(0, 0, 0, 0.2)";const Zlt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:XS,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:XS,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:XS,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:XS,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:XS,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:XS,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:W1e.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var q1e=yt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Zu="original",Rs="arrayRows",Qu="objectRows",Gf="keyedColumns",Qv="typedArray",Y1e="unknown",If="column",CT="row",Ho={Must:1,Might:2,Not:3},K1e=Kn();function Qlt(n){K1e(n).datasetMap=yt()}function X1e(n,e,t){var r={},i=wY(e);if(!i||!n)return r;var a=[],o=[],s=e.ecModel,l=K1e(s).datasetMap,c=i.uid+"_"+t.seriesLayoutBy,u,d;n=n.slice(),Z(n,function(v,y){var w=It(v)?v:n[y]={name:v};w.type==="ordinal"&&u==null&&(u=y,d=m(w)),r[w.name]=[]});var h=l.get(c)||l.set(c,{categoryWayDim:d,valueWayDim:0});Z(n,function(v,y){var w=v.name,S=m(v);if(u==null){var T=h.valueWayDim;f(r[w],T,S),f(o,T,S),h.valueWayDim+=S}else if(u===y)f(r[w],0,S),f(a,0,S);else{var T=h.categoryWayDim;f(r[w],T,S),f(o,T,S),h.categoryWayDim+=S}});function f(v,y,w){for(var S=0;S<w;S++)v.push(y+S)}function m(v){var y=v.dimsDef;return y?y.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function bY(n,e,t){var r={},i=wY(n);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===Qu||a===Gf)&&Z(o,function(u,d){(It(u)?u.name:u)==="name"&&(s=d)});var l=function(){for(var u={},d={},h=[],f=0,m=Math.min(5,t);f<m;f++){var v=Q1e(e.data,a,e.seriesLayoutBy,o,e.startIndex,f);h.push(v);var y=v===Ho.Not;if(y&&u.v==null&&f!==s&&(u.v=f),(u.n==null||u.n===u.v||!y&&h[u.n]===Ho.Not)&&(u.n=f),w(u)&&h[u.n]!==Ho.Not)return u;y||(v===Ho.Might&&d.v==null&&f!==s&&(d.v=f),(d.n==null||d.n===d.v)&&(d.n=f))}function w(S){return S.v!=null&&S.n!=null}return w(u)?u:w(d)?d:null}();if(l){r.value=[l.v];var c=s??l.n;r.itemName=[c],r.seriesName=[c]}return r}function wY(n){var e=n.get("data",!0);if(!e)return XI(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Ca).models[0]}function Jlt(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:XI(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Ca).models}function Z1e(n,e){return Q1e(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function Q1e(n,e,t,r,i,a){var o,s=5;if(ql(n))return Ho.Not;var l,c;if(r){var u=r[a];It(u)?(l=u.name,c=u.type):st(u)&&(l=u)}if(c!=null)return c==="ordinal"?Ho.Must:Ho.Not;if(e===Rs){var d=n;if(t===CT){for(var h=d[a],f=0;f<(h||[]).length&&f<s;f++)if((o=C(h[i+f]))!=null)return o}else for(var f=0;f<d.length&&f<s;f++){var m=d[i+f];if(m&&(o=C(m[a]))!=null)return o}}else if(e===Qu){var v=n;if(!l)return Ho.Not;for(var f=0;f<v.length&&f<s;f++){var y=v[f];if(y&&(o=C(y[l]))!=null)return o}}else if(e===Gf){var w=n;if(!l)return Ho.Not;var h=w[l];if(!h||ql(h))return Ho.Not;for(var f=0;f<h.length&&f<s;f++)if((o=C(h[f]))!=null)return o}else if(e===Zu)for(var S=n,f=0;f<S.length&&f<s;f++){var y=S[f],T=xT(y);if(!Fe(T))return Ho.Not;if((o=C(T[a]))!=null)return o}function C(k){var A=st(k);if(k!=null&&Number.isFinite(Number(k))&&k!=="")return A?Ho.Might:Ho.Not;if(A&&k!=="-")return Ho.Must}return Ho.Not}var RH=yt();function ect(n,e){pl(RH.get(n)==null&&e),RH.set(n,e)}function tct(n,e,t){var r=RH.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var Cse=Kn(),nct=Kn(),xY=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Rr(this.get("color",!0)),a=this.get("colorLayer",!0);return J1e(this,Cse,i,a,e,t,r)},n.prototype.clearColorPalette=function(){ict(this,Cse)},n}();function OH(n,e,t,r){var i=Rr(n.get(["aria","decal","decals"]));return J1e(n,nct,i,null,e,t,r)}function rct(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function J1e(n,e,t,r,i,a,o){a=a||n;var s=e(a),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(i))return c[i];var u=o==null||!r?t:rct(r,o);if(u=u||t,!(!u||!u.length)){var d=u[l];return i&&(c[i]=d),s.paletteIdx=(l+1)%u.length,d}}function ict(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var cN,$A,Dse,Ise="\0_ec_inner",act=1,SY=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,o,s){a=a||{},this.option=null,this._theme=new wr(a),this._locale=new wr(o),this._optionManager=s},e.prototype.setOption=function(t,r,i){var a=Nse(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,Nse(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?Dse(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&Z(l,function(c){i=!0,this._mergeOption(c,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=yt(),c=r&&r.replaceMergeMainTypeMap;Qlt(this),Z(t,function(d,h){d!=null&&(On.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?Nt(d):sn(i[h],d,!0))}),c&&c.each(function(d,h){On.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),On.topologicalTravel(s,On.getAllClassMainTypes(),u,this);function u(d){var h=tct(this,d,Rr(t[d])),f=a.get(d),m=f?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",v=U_e(f,h,m);Iot(v,d,On),i[d]=null,a.set(d,null),o.set(d,0);var y=[],w=[],S=0,T;Z(v,function(C,k){var A=C.existing,D=C.newOption;if(!D)A&&(A.mergeOption({},this),A.optionUpdated({},!1));else{var P=d==="series",N=On.getClass(d,C.keyInfo.subType,!P);if(!N)return;if(d==="tooltip"){if(T)return;T=!0}if(A&&A.constructor===N)A.name=C.keyInfo.name,A.mergeOption(D,this),A.optionUpdated(D,!1);else{var R=Me({componentIndex:k},C.keyInfo);A=new N(D,this,this,R),Me(A,R),C.brandNew&&(A.__requireNewView=!0),A.init(D,this,this),A.optionUpdated(null,!0)}}A?(y.push(A.option),w.push(A),S++):(y.push(void 0),w.push(void 0))},this),i[d]=y,a.set(d,w),o.set(d,S),d==="series"&&cN(this)}this._seriesIndices||cN(this)},e.prototype.getOption=function(){var t=Nt(this.option);return Z(t,function(r,i){if(On.hasClass(i)){for(var a=Rr(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!OD(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,t[i]=a}}),delete t[Ise],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],Z(Rr(i),function(c){s[c]&&l.push(s[c])})):a!=null?l=Mse("id",a,s):o!=null?l=Mse("name",o,s):l=vr(s,function(c){return!!c}),Pse(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=s(r),o=a?this.queryComponents(a):vr(this._componentsMap.get(i),function(c){return!!c});return l(Pse(o,t));function s(c){var u=i+"Index",d=i+"Id",h=i+"Name";return c&&(c[u]!=null||c[d]!=null||c[h]!=null)?{mainType:i,index:c[u],id:c[d],name:c[h]}:null}function l(c){return t.filter?vr(c,t.filter):c}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(kt(t)){var o=r,s=t;a.each(function(d,h){for(var f=0;d&&f<d.length;f++){var m=d[f];m&&s.call(o,h,m,m.componentIndex)}})}else for(var l=st(t)?a.get(t):It(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&r.call(i,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=Ha(t,null);return vr(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return vr(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return vr(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){$A(this),Z(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){Z(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){$A(this),Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return Z(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return $A(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){$A(this);var i=[];Z(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=yt(i)},e.prototype.restoreData=function(t){cN(this);var r=this._componentsMap,i=[];r.each(function(a,o){On.hasClass(o)&&i.push(o)}),On.topologicalTravel(i,On.getAllClassMainTypes(),function(a){Z(r.get(a),function(o){o&&(a!=="series"||!oct(o,t))&&o.restoreData()})})},e.internalField=function(){cN=function(t){var r=t._seriesIndices=[];Z(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=yt(r)},$A=function(t){},Dse=function(t,r){t.option={},t.option[Ise]=act,t._componentsMap=yt({series:[]}),t._componentsCount=yt();var i=r.aria;It(i)&&i.enabled==null&&(i.enabled=!0),sct(r,t._theme.option),sn(r,Zlt,!1),t._mergeOption(r,null)}}(),e}(wr);function oct(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function sct(n,e){var t=n.color&&!n.colorLayer;Z(e,function(r,i){i==="colorLayer"&&t||On.hasClass(i)||(typeof r=="object"?n[i]=n[i]?sn(n[i],r,!1):Nt(r):n[i]==null&&(n[i]=r))})}function Mse(n,e,t){if(Fe(e)){var r=yt();return Z(e,function(a){if(a!=null){var o=Ha(a,null);o!=null&&r.set(a,!0)}}),vr(t,function(a){return a&&r.get(a[n])})}else{var i=Ha(e,null);return vr(t,function(a){return a&&i!=null&&a[n]===i})}}function Pse(n,e){return e.hasOwnProperty("subType")?vr(n,function(t){return t&&t.subType===e.subType}):n}function Nse(n){var e=yt();return n&&Z(Rr(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Ia(SY,xY);var lct=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],eTe=function(){function n(e){Z(lct,function(t){this[t]=ut(e[t],e)},this)}return n}(),N6={},rM=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];Z(N6,function(i,a){var o=i.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){Z(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){N6[e]=t},n.get=function(e){return N6[e]},n}(),cct=/^(min|max)?(.+)$/,uct=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(Z(Rr(e.series),function(o){o&&o.data&&ql(o.data)&&s2(o.data)}),Z(Rr(e.dataset),function(o){o&&o.source&&ql(o.source)&&s2(o.source)})),e=Nt(e);var i=this._optionBackup,a=dct(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Nt(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Nt(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,c=i.length;l<c;l++)hct(i[l].query,t,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!pct(o,this._currentMediaIndices)&&(s=Be(o,function(u){return Nt(u===-1?a.option:i[u].option)})),this._currentMediaIndices=o,s},n}();function dct(n,e,t){var r=[],i,a,o=n.baseOption,s=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((d||u)&&(n.options=n.media=null),a=n),u&&Fe(c)&&Z(c,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),h(a),Z(l,function(f){return h(f)}),Z(r,function(f){return h(f.option)});function h(f){Z(e,function(m){m(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function hct(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return Z(n,function(a,o){var s=o.match(cct);if(!(!s||!s[1]||!s[2])){var l=s[1],c=s[2].toLowerCase();fct(r[c],a,l)||(i=!1)}}),i}function fct(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function pct(n,e){return n.join(",")===e.join(",")}var Pd=Z,UD=It,Rse=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function R6(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=Rse.length;t<r;t++){var i=Rse[t],a=e.normal,o=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?sn(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),o&&o[i]&&(n[i]=n[i]||{},n[i].emphasis?sn(n[i].emphasis,o[i]):n[i].emphasis=o[i],o[i]=null)}}function As(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Dt(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function Nk(n){As(n,"itemStyle"),As(n,"lineStyle"),As(n,"areaStyle"),As(n,"label"),As(n,"labelLine"),As(n,"upperLabel"),As(n,"edgeLabel")}function Ea(n,e){var t=UD(n)&&n[e],r=UD(t)&&t.textStyle;if(r)for(var i=0,a=Boe.length;i<a;i++){var o=Boe[i];r.hasOwnProperty(o)&&(t[o]=r[o])}}function Cu(n){n&&(Nk(n),Ea(n,"label"),n.emphasis&&Ea(n.emphasis,"label"))}function gct(n){if(UD(n)){R6(n),Nk(n),Ea(n,"label"),Ea(n,"upperLabel"),Ea(n,"edgeLabel"),n.emphasis&&(Ea(n.emphasis,"label"),Ea(n.emphasis,"upperLabel"),Ea(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(R6(e),Cu(e));var t=n.markLine;t&&(R6(t),Cu(t));var r=n.markArea;r&&Cu(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!ql(a))for(var o=0;o<a.length;o++)Cu(a[o]);Z(n.categories,function(c){Nk(c)})}if(i&&!ql(i))for(var o=0;o<i.length;o++)Cu(i[o]);if(e=n.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)Cu(s[o]);if(t=n.markLine,t&&t.data)for(var l=t.data,o=0;o<l.length;o++)Fe(l[o])?(Cu(l[o][0]),Cu(l[o][1])):Cu(l[o]);n.type==="gauge"?(Ea(n,"axisLabel"),Ea(n,"title"),Ea(n,"detail")):n.type==="treemap"?(As(n.breadcrumb,"itemStyle"),Z(n.levels,function(c){Nk(c)})):n.type==="tree"&&Nk(n.leaves)}}function Yp(n){return Fe(n)?n:n?[n]:[]}function Ose(n){return(Fe(n)?n[0]:n)||{}}function mct(n,e){Pd(Yp(n.series),function(r){UD(r)&&gct(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Pd(t,function(r){Pd(Yp(n[r]),function(i){i&&(Ea(i,"axisLabel"),Ea(i.axisPointer,"label"))})}),Pd(Yp(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Ea(i,"axisLabel"),Ea(i&&i.axisPointer,"label")}),Pd(Yp(n.calendar),function(r){As(r,"itemStyle"),Ea(r,"dayLabel"),Ea(r,"monthLabel"),Ea(r,"yearLabel")}),Pd(Yp(n.radar),function(r){Ea(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Pd(Yp(n.geo),function(r){UD(r)&&(Cu(r),Pd(Yp(r.regions),function(i){Cu(i)}))}),Pd(Yp(n.timeline),function(r){Cu(r),As(r,"label"),As(r,"itemStyle"),As(r,"controlStyle",!0);var i=r.data;Fe(i)&&Z(i,function(a){It(a)&&(As(a,"label"),As(a,"itemStyle"))})}),Pd(Yp(n.toolbox),function(r){As(r,"iconStyle"),Pd(r.feature,function(i){As(i,"iconStyle")})}),Ea(Ose(n.axisPointer),"label"),Ea(Ose(n.tooltip).axisPointer,"label")}function vct(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function yct(n,e,t,r){for(var i=e.split(","),a=n,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=t)}function Lse(n){n&&Z(bct,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var bct=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],wct=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],O6=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function BA(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<O6.length;t++){var r=O6[t][1],i=O6[t][0];e[r]!=null&&(e[i]=e[r])}}function jse(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function Fse(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function xct(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function tTe(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&tTe(n[t].children,e)}function nTe(n,e){mct(n,e),n.series=Rr(n.series),Z(n.series,function(t){if(It(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),jse(t.label);var i=t.data;if(i&&!ql(i))for(var a=0;a<i.length;a++)jse(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=vct(t,"pointer.color");o!=null&&yct(t,"itemStyle.color",o)}else if(r==="bar"){BA(t),BA(t.backgroundStyle),BA(t.emphasis);var i=t.data;if(i&&!ql(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(BA(i[a]),BA(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),Fse(t),tTe(t.data,Fse)}else r==="graph"||r==="sankey"?xct(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Dt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),Lse(t)}}),n.dataRange&&(n.visualMap=n.dataRange),Z(wct,function(t){var r=n[t];r&&(Fe(r)||(r=[r]),Z(r,function(i){Lse(i)}))})}function Sct(n){var e=yt();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(_ct)}function _ct(n){Z(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(c,u,d){var h=o.get(e.stackedDimension,d);if(isNaN(h))return i;var f,m;s?m=o.getRawIndex(d):f=o.get(e.stackedByDimension,d);for(var v=NaN,y=t-1;y>=0;y--){var w=n[y];if(s||(m=w.data.rawIndexOf(w.stackedByDimension,f)),m>=0){var S=w.data.getByRawIndex(w.stackResultDimension,m);if(l==="all"||l==="positive"&&S>0||l==="negative"&&S<0||l==="samesign"&&h>=0&&S>0||l==="samesign"&&h<=0&&S<0){h=bot(h,S),v=S;break}}}return r[0]=h,r[1]=v,r})})}var lF=function(){function n(e){this.data=e.data||(e.sourceFormat===Gf?{}:[]),this.sourceFormat=e.sourceFormat||Y1e,this.seriesLayoutBy=e.seriesLayoutBy||If,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&Z1e(this,r)===Ho.Must&&(i.type="ordinal")}}return n}();function _Y(n){return n instanceof lF}function LH(n,e,t){t=t||rTe(n);var r=e.seriesLayoutBy,i=Ect(n,t,r,e.sourceHeader,e.dimensions),a=new lF({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Nt(e)});return a}function TY(n){return new lF({data:n,sourceFormat:ql(n)?Qv:Zu})}function Tct(n){return new lF({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Nt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function rTe(n){var e=Y1e;if(ql(n))e=Qv;else if(Fe(n)){n.length===0&&(e=Rs);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(Fe(i)||ql(i)){e=Rs;break}else if(It(i)){e=Qu;break}}}}else if(It(n)){for(var a in n)if(ft(n,a)&&Ns(n[a])){e=Gf;break}}return e}function Ect(n,e,t,r,i){var a,o;if(!n)return{dimensionsDefine:$se(i),startIndex:o,dimensionsDetectedCount:a};if(e===Rs){var s=n;r==="auto"||r==null?Bse(function(c){c!=null&&c!=="-"&&(st(c)?o==null&&(o=1):o=0)},t,s,10):o=rr(r)?r:r?1:0,!i&&o===1&&(i=[],Bse(function(c,u){i[u]=c!=null?c+"":""},t,s,1/0)),a=i?i.length:t===CT?s.length:s[0]?s[0].length:null}else if(e===Qu)i||(i=Act(n));else if(e===Gf)i||(i=[],Z(n,function(c,u){i.push(u)}));else if(e===Zu){var l=xT(n[0]);a=Fe(l)&&l.length||1}return{startIndex:o,dimensionsDefine:$se(i),dimensionsDetectedCount:a}}function Act(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return Ln(t)}function $se(n){if(n){var e=yt();return Be(n,function(t,r){t=It(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function Bse(n,e,t,r){if(e===CT)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function iTe(n){var e=n.sourceFormat;return e===Qu||e===Gf}var fb,pb,gb,Use,Vse,aTe=function(){function n(e,t){var r=_Y(e)?e:TY(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Qv&&(this._offset=0,this._dimSize=t,this._data=i),Vse(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;Vse=function(o,s,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,h=l.dimensionsDefine,f=Use[EY(c,u)];if(Me(o,f),c===Qv)o.getItem=t,o.count=i,o.fillStorage=r;else{var m=oTe(c,u);o.getItem=ut(m,null,s,d,h);var v=sTe(c,u);o.count=ut(v,null,s,d,h)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,c=this._dimSize,u=c*o,d=0;d<c;d++)s[d]=l[u+d];return s},r=function(o,s,l,c){for(var u=this._data,d=this._dimSize,h=0;h<d;h++){for(var f=c[h],m=f[0]==null?1/0:f[0],v=f[1]==null?-1/0:f[1],y=s-o,w=l[h],S=0;S<y;S++){var T=u[S*d+h];w[o+S]=T,T<m&&(m=T),T>v&&(v=T)}f[0]=m,f[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};Use=(e={},e[Rs+"_"+If]={pure:!0,appendData:a},e[Rs+"_"+CT]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Qu]={pure:!0,appendData:a},e[Gf]={pure:!0,appendData:function(o){var s=this._data;Z(o,function(l,c){for(var u=s[c]||(s[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[Zu]={appendData:a},e[Qv]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),n}(),zse=function(n,e,t,r){return n[r]},kct=(fb={},fb[Rs+"_"+If]=function(n,e,t,r){return n[r+e]},fb[Rs+"_"+CT]=function(n,e,t,r,i){r+=e;for(var a=i||[],o=n,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},fb[Qu]=zse,fb[Gf]=function(n,e,t,r,i){for(var a=i||[],o=0;o<t.length;o++){var s=t[o].name,l=n[s];a[o]=l?l[r]:null}return a},fb[Zu]=zse,fb);function oTe(n,e){var t=kct[EY(n,e)];return t}var Hse=function(n,e,t){return n.length},Cct=(pb={},pb[Rs+"_"+If]=function(n,e,t){return Math.max(0,n.length-e)},pb[Rs+"_"+CT]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},pb[Qu]=Hse,pb[Gf]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},pb[Zu]=Hse,pb);function sTe(n,e){var t=Cct[EY(n,e)];return t}var L6=function(n,e,t){return n[e]},Dct=(gb={},gb[Rs]=L6,gb[Qu]=function(n,e,t){return n[t]},gb[Gf]=L6,gb[Zu]=function(n,e,t){var r=xT(n);return r instanceof Array?r[e]:r},gb[Qv]=L6,gb);function lTe(n){var e=Dct[n];return e}function EY(n,e){return n===Rs?n+"_"+e:n}function U1(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var o=n.getDimensionIndex(t),s=i.getDimensionProperty(o);return lTe(a)(r,o,s)}else{var l=r;return a===Zu&&(l=xT(r)),l}}}}var Ict=/\{@(.+?)\}/g,cF=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),c=l&&l[r.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,h=d==="series",f=r.userOutput&&r.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:i,color:c,borderColor:u,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,o){t=t||"normal";var s=this.getData(r),l=this.getDataParams(e,r);if(o&&(l.value=o.interpolatedValue),i!=null&&Fe(l.value)&&(l.value=l.value[i]),!a){var c=s.getItemModel(e);a=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(kt(a))return l.status=t,l.dimensionIndex=i,a(l);if(st(a)){var u=z1e(a,l);return u.replace(Ict,function(d,h){var f=h.length,m=h;m.charAt(0)==="["&&m.charAt(f-1)==="]"&&(m=+m.slice(1,f-1));var v=U1(s,e,m);if(o&&Fe(o.interpolatedValue)){var y=s.getDimensionIndex(m);y>=0&&(v=o.interpolatedValue[y])}return v!=null?v+"":""})}},n.prototype.getRawValue=function(e,t){return U1(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function Gse(n){var e,t;return It(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function hC(n){return new Mct(n)}var Mct=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=u(this._modBy),s=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(o!==l||s!==c)&&(a="reset");function u(S){return!(S>=1)&&(S=1),S}var d;(this._dirty||a==="reset")&&(this._dirty=!1,d=this._doReset(r)),this._modBy=l,this._modDataCount=c;var h=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,m=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(d||f<m)){var v=this._progress;if(Fe(v))for(var y=0;y<v.length;y++)this._doProgress(v[y],f,m,l,c);else this._doProgress(v,f,m,l,c)}this._dueIndex=m;var w=this._settedOutputEnd!=null?this._settedOutputEnd:m;this._outputDueEnd=w}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){Wse.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:Wse.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Fe(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),Wse=function(){var n,e,t,r,i,a={reset:function(l,c,u,d){e=l,n=c,t=u,r=d,i=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<n?e++:null}function s(){var l=e%i*t+Math.ceil(e/i),c=e>=n?null:l<r?l:e;return e++,c}}();function Jv(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!rr(n)&&n!=null&&n!=="-"&&(n=+Ff(n)),n==null||n===""?NaN:Number(n))}var Pct=yt({number:function(n){return parseFloat(n)},time:function(n){return+Ff(n)},trim:function(n){return st(n)?Qd(n):n}});function cTe(n){return Pct.get(n)}var uTe={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},Nct=function(){function n(e,t){if(!rr(t)){var r="";gr(r)}this._opFn=uTe[e],this._rvalFloat=Pg(t)}return n.prototype.evaluate=function(e){return rr(e)?this._opFn(e,this._rvalFloat):this._opFn(Pg(e),this._rvalFloat)},n}(),dTe=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=rr(e)?e:Pg(e),i=rr(t)?t:Pg(t),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=st(e),l=st(t);s&&(r=l?e:0),l&&(i=s?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),Rct=function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=Pg(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=Pg(e)===this._rvalFloat)}return this._isEQ?t:!t},n}();function Oct(n,e){return n==="eq"||n==="ne"?new Rct(n==="eq",e):ft(uTe,n)?new Nct(n,e):null}var Lct=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return Jv(e,t)},n}();function jct(n,e){var t=new Lct,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,o="";n.seriesLayoutBy!==If&&gr(o);var s=[],l={},c=n.dimensionsDefine;if(c)Z(c,function(v,y){var w=v.name,S={index:y,name:w,displayName:v.displayName};if(s.push(S),w!=null){var T="";ft(l,w)&&gr(T),l[w]=S}});else for(var u=0;u<n.dimensionsDetectedCount;u++)s.push({index:u});var d=oTe(i,If);e.__isBuiltIn&&(t.getRawDataItem=function(v){return d(r,a,s,v)},t.getRawData=ut(Fct,null,n)),t.cloneRawData=ut($ct,null,n);var h=sTe(i,If);t.count=ut(h,null,r,a,s);var f=lTe(i);t.retrieveValue=function(v,y){var w=d(r,a,s,v);return m(w,y)};var m=t.retrieveValueFromItem=function(v,y){if(v!=null){var w=s[y];if(w)return f(v,y,w.name)}};return t.getDimensionInfo=ut(Bct,null,s,l),t.cloneAllDimensionInfo=ut(Uct,null,s),t}function Fct(n){var e=n.sourceFormat;if(!AY(e)){var t="";gr(t)}return n.data}function $ct(n){var e=n.sourceFormat,t=n.data;if(!AY(e)){var r="";gr(r)}if(e===Rs){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].slice());return i}else if(e===Qu){for(var i=[],a=0,o=t.length;a<o;a++)i.push(Me({},t[a]));return i}}function Bct(n,e,t){if(t!=null){if(rr(t)||!isNaN(t)&&!ft(e,t))return n[t];if(ft(e,t))return e[t]}}function Uct(n){return Nt(n)}var hTe=yt();function Vct(n){n=Nt(n);var e=n.type,t="";e||gr(t);var r=e.split(":");r.length!==2&&gr(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,hTe.set(e,n)}function zct(n,e,t){var r=Rr(n),i=r.length,a="";i||gr(a);for(var o=0,s=i;o<s;o++){var l=r[o];e=Hct(l,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function Hct(n,e,t,r){var i="";e.length||gr(i),It(n)||gr(i);var a=n.type,o=hTe.get(a);o||gr(i);var s=Be(e,function(c){return jct(c,o)}),l=Rr(o.transform({upstream:s[0],upstreamList:s,config:Nt(n.config)}));return Be(l,function(c,u){var d="";It(c)||gr(d),c.data||gr(d);var h=rTe(c.data);AY(h)||gr(d);var f,m=e[0];if(m&&u===0&&!c.dimensions){var v=m.startIndex;v&&(c.data=m.data.slice(0,v).concat(c.data)),f={seriesLayoutBy:If,sourceHeader:v,dimensions:m.metaRawOption.dimensions}}else f={seriesLayoutBy:If,sourceHeader:0,dimensions:c.dimensions};return LH(c.data,f,null)})}function AY(n){return n===Rs||n===Qu}var uF="undefined",Gct=typeof Uint32Array===uF?Array:Uint32Array,Wct=typeof Uint16Array===uF?Array:Uint16Array,fTe=typeof Int32Array===uF?Array:Int32Array,qse=typeof Float64Array===uF?Array:Float64Array,pTe={float:qse,int:fTe,ordinal:Array,number:Array,time:qse},j6;function ZS(n){return n>65535?Gct:Wct}function QS(){return[1/0,-1/0]}function qct(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function Yse(n,e,t,r,i){var a=pTe[t||"float"];if(i){var o=n[e],s=o&&o.length;if(s!==r){for(var l=new a(r),c=0;c<s;c++)l[c]=o[c];n[e]=l}}else n[e]=new a(r)}var jH=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=yt()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=j6[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],iTe(i),this._dimensions=Be(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new pTe[t||"float"](this._rawCount),this._rawExtent[a]=QS(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=QS());for(var l=a[e],c=o;c<s;c++){var u=r[c]=t.parseAndCollect(r[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}i.ordinalMeta=t,i.ordinalOffset=s,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(e.length,t||0),c=0;c<a;c++){var u=i[c];Yse(r,c,u.type,l,!0)}for(var d=[],h=s;h<l;h++)for(var f=h-s,m=0;m<a;m++){var u=i[m],v=j6.arrayRows.call(this,e[f]||d,u.property,f,m);r[m][h]=v;var y=o[m];v<y[0]&&(y[0]=v),v>y[1]&&(y[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,c=Be(o,function(S){return S.property}),u=0;u<s;u++){var d=o[u];l[u]||(l[u]=QS()),Yse(a,u,d.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var h=[],f=e;f<t;f++){h=i.getItem(f,h);for(var m=0;m<s;m++){var v=a[m],y=this._dimValueGetter(h,c[m],f,m);v[f]=y;var w=l[m];y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=o+1;else if(t[o]>e)a=o-1;else return o}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var h=this.getRawIndex(u),f=t-a[h],m=Math.abs(f);m<=r&&((m<s||m===s&&f>=0&&l<0)&&(s=m,l=f,c=0),f===l&&(o[c++]=u))}return o.length=c,o},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=ZS(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=ZS(r._rawCount),o=new a(i),s=[],l=e.length,c=0,u=e[0],d=r._chunks,h=0;h<i;h++){var f=void 0,m=r.getRawIndex(h);if(l===0)f=t(h);else if(l===1){var v=d[u][m];f=t(v,h)}else{for(var y=0;y<l;y++)s[y]=d[e[y]][m];s[y]=h,f=t.apply(null,s)}f&&(o[c++]=m)}return c<i&&(r._indices=o),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=Ln(e),a=i.length;if(!a)return this;var o=t.count(),s=ZS(t._rawCount),l=new s(o),c=0,u=i[0],d=e[u][0],h=e[u][1],f=t._chunks,m=!1;if(!t._indices){var v=0;if(a===1){for(var y=f[i[0]],w=0;w<r;w++){var S=y[w];(S>=d&&S<=h||isNaN(S))&&(l[c++]=v),v++}m=!0}else if(a===2){for(var y=f[i[0]],T=f[i[1]],C=e[i[1]][0],k=e[i[1]][1],w=0;w<r;w++){var S=y[w],A=T[w];(S>=d&&S<=h||isNaN(S))&&(A>=C&&A<=k||isNaN(A))&&(l[c++]=v),v++}m=!0}}if(!m)if(a===1)for(var w=0;w<o;w++){var D=t.getRawIndex(w),S=f[i[0]][D];(S>=d&&S<=h||isNaN(S))&&(l[c++]=D)}else for(var w=0;w<o;w++){for(var P=!0,D=t.getRawIndex(w),N=0;N<a;N++){var R=i[N],S=f[R][D];(S<e[R][0]||S>e[R][1])&&(P=!1)}P&&(l[c++]=t.getRawIndex(w))}return c<o&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],o=t.length,s=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=QS();for(var d=0;d<s;d++){for(var h=e.getRawIndex(d),f=0;f<o;f++)l[f]=i[t[f]][h];l[o]=d;var m=r&&r.apply(null,l);if(m!=null){typeof m!="object"&&(a[0]=m,m=a);for(var u=0;u<m.length;u++){var v=t[u],y=m[u],w=c[v],S=i[v];S&&(S[h]=y),y<w[0]&&(w[0]=y),y>w[1]&&(w[1]=y)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,h,f=new(ZS(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));f[s++]=c;for(var m=1;m<o-1;m+=l){for(var v=Math.min(m+l,o-1),y=Math.min(m+l*2,o),w=(y+v)/2,S=0,T=v;T<y;T++){var C=this.getRawIndex(T),k=a[C];isNaN(k)||(S+=k)}S/=y-v;var A=m,D=Math.min(m+l,o),P=m-1,N=a[c];u=-1,h=A;for(var R=-1,L=0,T=A;T<D;T++){var C=this.getRawIndex(T),k=a[C];if(isNaN(k)){L++,R<0&&(R=C);continue}d=Math.abs((P-w)*(k-N)-(P-T)*(S-N)),d>u&&(u=d,h=C)}L>0&&L<D-A&&(f[s++]=Math.min(R,h),h=Math.max(R,h)),f[s++]=h,c=h}return f[s++]=this.getRawIndex(o-1),r._count=s,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/t),o=i[e],s=this.count(),l=new(ZS(this._rawCount))(Math.ceil(s/a)*2),c=0,u=0;u<s;u+=a){var d=u,h=o[this.getRawIndex(d)],f=u,m=o[this.getRawIndex(f)],v=a;u+a>s&&(v=s-u);for(var y=0;y<v;y++){var w=this.getRawIndex(u+y),S=o[w];S<h&&(h=S,d=u+y),S>m&&(m=S,f=u+y)}var T=this.getRawIndex(d),C=this.getRawIndex(f);d<f?(l[c++]=T,l[c++]=C):(l[c++]=C,l[c++]=T)}return r._count=c,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],l=Math.floor(1/t),c=o[e],u=this.count(),d=a._rawExtent[e]=QS(),h=new(ZS(this._rawCount))(Math.ceil(u/l)),f=0,m=0;m<u;m+=l){l>u-m&&(l=u-m,s.length=l);for(var v=0;v<l;v++){var y=this.getRawIndex(m+v);s[v]=c[y]}var w=r(s),S=this.getRawIndex(Math.min(m+i(s,w)||0,u-1));c[S]=w,w<d[0]&&(d[0]=w),w>d[1]&&(d[1]=w),h[f++]=S}return a._count=f,a._indices=h,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][s],a);break;case 2:t(i[e[0]][s],i[e[1]][s],a);break;default:for(var l=0,c=[];l<r;l++)c[l]=i[e[l]][s];c[l]=a,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=QS();if(!t)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],l=o[1],c=0;c<i;c++){var u=this.getRawIndex(c),d=t[u];d<s&&(s=d),d>l&&(l=d)}return o=[s,l],this._extent[e]=o,o},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&Of(e,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?qct(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Nt(this._extent),e._rawExtent=Nt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return Jv(t[a],this._dimensions[a])}j6={arrayRows:e,objectRows:function(t,r,i,a){return Jv(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var o=t&&(t.value==null?t:t.value);return Jv(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),gTe=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(uN(e)){var o=e,s=void 0,l=void 0,c=void 0;if(r){var u=t[0];u.prepareSource(),c=u.getSource(),s=c.data,l=c.sourceFormat,a=[u._getVersionSign()]}else s=o.get("data",!0),l=ql(s)?Qv:Zu,a=[];var d=this._getSourceMetaRawOption()||{},h=c&&c.metaRawOption||{},f=Wt(d.seriesLayoutBy,h.seriesLayoutBy)||null,m=Wt(d.sourceHeader,h.sourceHeader),v=Wt(d.dimensions,h.dimensions),y=f!==h.seriesLayoutBy||!!m!=!!h.sourceHeader||v;i=y?[LH(s,{seriesLayoutBy:f,sourceHeader:m,dimensions:v},l)]:[]}else{var w=e;if(r){var S=this._applyTransform(t);i=S.sourceList,a=S.upstreamSignList}else{var T=w.get("source",!0);i=[LH(T,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&Xse(a)}var o,s=[],l=[];return Z(e,function(c){c.prepareSource();var u=c.getSource(i||0),d="";i!=null&&!u&&Xse(d),s.push(u),l.push(c._getVersionSign())}),r?o=zct(r,s,{datasetIndex:t.componentIndex}):i!=null&&(o=[Tct(s[0])]),{sourceList:o,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];uN(this._sourceHost)&&l?s=l._innerGetDataStore(e,t,r):(s=new jH,s.initData(new aTe(t,e.length),e)),o[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(uN(e)){var t=wY(e);return t?[t.getSourceManager()]:[]}else return Be(Jlt(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(uN(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function Kse(n){var e=n.option.transform;e&&s2(n.option.transform)}function uN(n){return n.mainType==="series"}function Xse(n){throw new Error(n)}var Yct="line-height:1";function mTe(n){var e=n.lineHeight;return e==null?Yct:"line-height:"+al(e+"")+"px"}function vTe(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",o=n.fontSize||14,s=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+al(r+"")+"px;color:"+al(t)+";font-weight:"+al(i+""),valueStyle:"font-size:"+al(o+"")+"px;color:"+al(a)+";font-weight:"+al(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var Kct=[0,10,20,30],Xct=["",`
`,`

`,`


`];function fo(n,e){return e.type=n,e}function FH(n){return n.type==="section"}function yTe(n){return FH(n)?Zct:Qct}function bTe(n){if(FH(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return Z(n.blocks,function(i){var a=bTe(i);a>=e&&(e=a+ +(r&&(!a||FH(i)&&!i.noHeader)))}),e}return 0}function Zct(n,e,t,r){var i=e.noHeader,a=Jct(bTe(e)),o=[],s=e.blocks||[];pl(!s||Fe(s)),s=s||[];var l=n.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(ft(c,l)){var u=new dTe(c[l],null);s.sort(function(v,y){return u.evaluate(v.sortParam,y.sortParam)})}else l==="seriesDesc"&&s.reverse()}Z(s,function(v,y){var w=e.valueFormatter,S=yTe(v)(w?Me(Me({},n),{valueFormatter:w}):n,v,y>0?a.html:0,r);S!=null&&o.push(S)});var d=n.renderMode==="richText"?o.join(a.richText):$H(r,o.join(""),i?t:a.html);if(i)return d;var h=NH(e.header,"ordinal",n.useUTC),f=vTe(r,n.renderMode).nameStyle,m=mTe(r);return n.renderMode==="richText"?wTe(n,h,f)+a.richText+d:$H(r,'<div style="'+f+";"+m+';">'+al(h)+"</div>"+d,t)}function Qct(n,e,t,r){var i=n.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(C){return C=Fe(C)?C:[C],Be(C,function(k,A){return NH(k,Fe(f)?f[A]:f,c)})};if(!(a&&o)){var d=s?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":NH(l,"ordinal",c),f=e.valueType,m=o?[]:u(e.value,e.dataIndex),v=!s||!a,y=!s&&a,w=vTe(r,i),S=w.nameStyle,T=w.valueStyle;return i==="richText"?(s?"":d)+(a?"":wTe(n,h,S))+(o?"":nut(n,m,v,y,T)):$H(r,(s?"":d)+(a?"":eut(h,!s,S))+(o?"":tut(m,v,y,T)),t)}}function Zse(n,e,t,r,i,a){if(n){var o=yTe(n),s={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return o(s,n,0,a)}}function Jct(n){return{html:Kct[n],richText:Xct[n]}}function $H(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",a=mTe(n);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function eut(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+al(n)+"</span>"}function tut(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=Fe(n)?n:[n],'<span style="'+a+";"+r+'">'+Be(n,function(o){return al(o)}).join("&nbsp;&nbsp;")+"</span>"}function wTe(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function nut(n,e,t,r,i){var a=[i],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Fe(e)?e.join("  "):e,a)}function xTe(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return $w(r)}function STe(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var F6=function(){function n(){this.richTextStyles={},this._nextStyleNameId=j_e()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=Wlt({color:t,type:e,renderMode:r,markerId:i});return st(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};Fe(t)?Z(t,function(a){return Me(r,a)}):Me(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function _Te(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),l=Fe(s),c=xTe(e,t),u,d,h,f;if(o>1||l&&!o){var m=rut(s,e,t,a,c);u=m.inlineValues,d=m.inlineValueTypes,h=m.blocks,f=m.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);f=u=U1(i,t,a[0]),d=v.type}else f=u=l?s[0]:s;var y=Qq(e),w=y&&e.name||"",S=i.getName(t),T=r?w:S;return fo("section",{header:w,noHeader:r||!y,sortParam:f,blocks:[fo("nameValue",{markerType:"item",markerColor:c,name:T,noName:!Qd(T),value:u,valueType:d,dataIndex:t})].concat(h||[])})}function rut(n,e,t,r,i){var a=e.getData(),o=Of(n,function(d,h,f){var m=a.getDimensionInfo(f);return d=d||m&&m.tooltip!==!1&&m.displayName!=null},!1),s=[],l=[],c=[];r.length?Z(r,function(d){u(U1(a,t,d),d)}):Z(n,u);function u(d,h){var f=a.getDimensionInfo(h);!f||f.otherDims.tooltip===!1||(o?c.push(fo("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:d,valueType:f.type})):(s.push(d),l.push(f.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:c}}var yv=Kn();function dN(n,e){return n.getName(e)||n.getId(e)}var kR="__universalTransitionEnabled",ai=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=hC({count:aut,reset:out}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=yv(this).sourceManager=new gTe(this);a.prepareSource();var o=this.getInitialData(t,i);Jse(o,this),this.dataTask.context.data=o,yv(this).dataBeforeProcessed=o,Qse(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=BD(this),a=i?kT(t):{},o=this.subType;On.hasClass(o)&&(o+="Series"),sn(t,r.getTheme().get(this.subType)),sn(t,this.getDefaultOption()),Ow(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&hy(t,a,i)},e.prototype.mergeOption=function(t,r){t=sn(this.option,t,!0),this.fillDataTextStyle(t.data);var i=BD(this);i&&hy(this.option,t,i);var a=yv(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);Jse(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,yv(this).dataBeforeProcessed=o,Qse(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!ql(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&Ow(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=BH(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return yv(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=BH(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}yv(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return yt(t)},e.prototype.getSourceManager=function(){return yv(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return yv(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return _Te({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Mn.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,o=xY.prototype.getColorFromPalette.call(this,t,r,i);return o||(o=a.getColorFromPalette(t,r,i)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var l=t[s],c=dN(o,l);i[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Ln(t),i=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[dN(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[kR])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){It(o.selectedMap)||(o.selectedMap={});for(var c=o.selectedMap,u=0;u<l;u++){var d=r[u],h=dN(t,d);c[h]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(d)}}else if(s==="single"||s===!0){var f=r[l-1],h=dN(t,f);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return On.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(On);Ia(ai,cF);Ia(ai,xY);W_e(ai,On);function Qse(n){var e=n.name;Qq(n)||(n.name=iut(n)||e)}function iut(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return Z(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function aut(n){return n.model.getRawData().count()}function out(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),sut}function sut(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Jse(n,e){Z(ID(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Qt(lut,e))})}function lut(n,e){var t=BH(n);return t&&t.setOutputEnd((e||this).count()),e}function BH(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}var Mi=function(){function n(){this.group=new jt,this.uid=ET("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();eY(Mi);Gj(Mi);function DT(){var n=Kn();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var TTe=Kn(),cut=DT(),zr=function(){function n(){this.group=new jt,this.uid=ET("viewChart"),this.renderTask=hC({plan:uut,reset:dut}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&tle(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&tle(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){ky(this.group,e)},n.markUpdateMethod=function(e,t){TTe(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function ele(n,e,t){n&&jD(n)&&(e==="emphasis"?Ng:Rg)(n,t)}function tle(n,e,t){var r=Lw(n,e),i=e&&e.highlightKey!=null?Wst(e.highlightKey):null;r!=null?Z(Rr(r),function(a){ele(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){ele(a,t,i)})}eY(zr);Gj(zr);function uut(n){return cut(n.model)}function dut(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,o=n.view,s=i&&TTe(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](e,t,r,i),hut[l]}var hut={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},T2="\0__throttleOriginMethod",nle="\0__throttleRate",rle="\0__throttleType";function kY(n,e,t){var r,i=0,a=0,o=null,s,l,c,u;e=e||0;function d(){a=new Date().getTime(),o=null,n.apply(l,c||[])}var h=function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];r=new Date().getTime(),l=this,c=f;var v=u||e,y=u||t;u=null,s=r-(y?i:a)-v,clearTimeout(o),y?o=setTimeout(d,v):s>=0?d():o=setTimeout(d,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(f){u=f},h}function IT(n,e,t,r){var i=n[e];if(i){var a=i[T2]||i,o=i[rle],s=i[nle];if(s!==t||o!==r){if(t==null||!r)return n[e]=a;i=n[e]=kY(a,t,r==="debounce"),i[T2]=a,i[rle]=r,i[nle]=t}return i}}function VD(n,e){var t=n[e];t&&t[T2]&&(t.clear&&t.clear(),n[e]=t[T2])}var ile=Kn(),ale={itemStyle:jw(I1e,!0),lineStyle:jw(D1e,!0)},fut={lineStyle:"stroke",itemStyle:"fill"};function ETe(n,e){var t=n.visualStyleMapper||ale[e];return t||(console.warn("Unknown style type '"+e+"'."),ale.itemStyle)}function ATe(n,e){var t=n.visualDrawType||fut[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var put={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=ETe(n,r),o=a(i),s=i.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var l=ATe(n,r),c=o[l],u=kt(c)?c:null,d=o.fill==="auto"||o.stroke==="auto";if(!o[l]||u||d){var h=n.getColorFromPalette(n.name,null,e.getSeriesCount());o[l]||(o[l]=h,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||kt(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||kt(o.stroke)?h:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,m){var v=n.getDataParams(m),y=Me({},o);y[l]=u(v),f.setItemVisual(m,"style",y)}}}},UA=new wr,gut={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=ETe(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){UA.option=l[r];var c=i(UA),u=o.ensureUniqueItemVisual(s,"style");Me(u,c),UA.option.decal&&(o.setItemVisual(s,"decal",UA.option.decal),UA.option.decal.dirty=!0),a in c&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},mut={performRawSeries:!0,overallReset:function(n){var e=yt();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),ile(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),o=ile(t).scope,s=t.visualStyleAccessPath||"itemStyle",l=ATe(t,s);a.each(function(c){var u=a.getRawIndex(c);i[u]=c}),r.each(function(c){var u=i[c],d=a.getItemVisual(u,"colorFromPalette");if(d){var h=a.ensureUniqueItemVisual(u,"style"),f=r.getName(c)||c+"",m=r.count();h[l]=t.getColorFromPalette(f,o,m)}})}})}},hN=Math.PI;function vut(n,e){e=e||{},Dt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new jt,r=new Yn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new Qn({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Yn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new Qj({shape:{startAngle:-hN/2,endAngle:-hN/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:hN*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:hN*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:l),u=n.getHeight()/2;e.showSpinner&&o.setShape({cx:c,cy:u}),a.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var kTe=function(){function n(e,t,r,i){this._stageTaskMap=yt(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=yt();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;Z(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";pl(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,o=this;Z(e,function(l,c){if(!(i.visualType&&i.visualType!==l.visualType)){var u=o._stageTaskMap.get(l.uid),d=u.seriesTaskMap,h=u.overallTask;if(h){var f,m=h.agentStubMap;m.each(function(y){s(i,y)&&(y.dirty(),f=!0)}),f&&h.dirty(),o.updatePayload(h,r);var v=o.getPerformArgs(h,i.block);m.each(function(y){y.perform(v)}),h.perform(v)&&(a=!0)}else d&&d.each(function(y,w){s(i,y)&&y.dirty();var S=o.getPerformArgs(y,i.block);S.skip=!l.performRawSeries&&t.isSeriesFiltered(y.context.model),o.updatePayload(y,r),y.perform(S)&&(a=!0)})}});function s(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=yt(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(u):l?r.eachRawSeriesByType(l,u):c&&c(r,i).each(u);function u(d){var h=d.uid,f=s.set(h,o&&o.get(h)||hC({plan:Sut,reset:_ut,count:Eut}));f.context={model:d,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(d,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,o=t.overallTask=t.overallTask||hC({reset:yut});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=yt(),c=e.seriesType,u=e.getTargetSeries,d=!0,h=!1,f="";pl(!e.createOnAllSeries,f),c?r.eachRawSeriesByType(c,m):u?u(r,i).each(m):(d=!1,Z(r.getSeries(),m));function m(v){var y=v.uid,w=l.set(y,s&&s.get(y)||(h=!0,hC({reset:but,onDirty:xut})));w.context={model:v,overallProgress:d},w.agent=o,w.__block=d,a._pipe(v,w)}h&&o.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return kt(e)&&(e={overallReset:e,seriesType:Aut(e)}),e.uid=ET("stageHandler"),t&&(e.visualType=t),e},n}();function yut(n){n.overallReset(n.ecModel,n.api,n.payload)}function but(n){return n.overallProgress&&wut}function wut(){this.agent.dirty(),this.getDownstream().dirty()}function xut(){this.agent&&this.agent.dirty()}function Sut(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function _ut(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Rr(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Be(e,function(t,r){return CTe(r)}):Tut}var Tut=CTe(0);function CTe(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Eut(n){return n.data.count()}function Aut(n){E2=null;try{n(zD,DTe)}catch{}return E2}var zD={},DTe={},E2;ITe(zD,SY);ITe(DTe,eTe);zD.eachSeriesByType=zD.eachRawSeriesByType=function(n){E2=n};zD.eachComponent=function(n){n.mainType==="series"&&n.subType&&(E2=n.subType)};function ITe(n,e){for(var t in e.prototype)n[t]=ma}var ole=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const kut={color:ole,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],ole]};var xs="#B9B8CE",sle="#100C2A",fN=function(){return{axisLine:{lineStyle:{color:xs}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},lle=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],MTe={darkMode:!0,color:lle,backgroundColor:sle,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:xs},pageTextStyle:{color:xs}},textStyle:{color:xs},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:xs}},dataZoom:{borderColor:"#71708A",textStyle:{color:xs},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:xs}},timeline:{lineStyle:{color:xs},label:{color:xs},controlStyle:{color:xs,borderColor:xs}},calendar:{itemStyle:{color:sle},dayLabel:{color:xs},monthLabel:{color:xs},yearLabel:{color:xs}},timeAxis:fN(),logAxis:fN(),valueAxis:fN(),categoryAxis:fN(),line:{symbol:"circle"},graph:{color:lle},gauge:{title:{color:xs},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:xs},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};MTe.categoryAxis.splitLine.show=!1;var Cut=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(st(e)){var a=xf(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};Z(e,function(l,c){for(var u=!1,d=0;d<o.length;d++){var h=o[d],f=c.lastIndexOf(h);if(f>0&&f===c.length-h.length){var m=c.slice(0,f);m!=="data"&&(t.mainType=m,t[h.toLowerCase()]=l,u=!0)}}s.hasOwnProperty(c)&&(r[c]=l,u=!0),u||(i[c]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,o,"mainType")&&u(l,o,"subType")&&u(l,o,"index","componentIndex")&&u(l,o,"name")&&u(l,o,"id")&&u(c,a,"name")&&u(c,a,"dataIndex")&&u(c,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,a));function u(d,h,f,m){return d[f]==null||h[m||f]===d[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),UH=["symbol","symbolSize","symbolRotate","symbolOffset"],cle=UH.concat(["symbolKeepAspect"]),Dut={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<UH.length;o++){var s=UH[o],l=n.get(s);kt(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(Me({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var c=Ln(i);function u(d,h){for(var f=n.getRawValue(h),m=n.getDataParams(h),v=0;v<c.length;v++){var y=c[v];d.setItemVisual(h,y,i[y](f,m))}}return{dataEach:a?u:null}}},Iut={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<cle.length;s++){var l=cle[s],c=o.getShallow(l,!0);c!=null&&i.setItemVisual(a,l,c)}}return{dataEach:t.hasItemOption?r:null}}};function CY(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function iM(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function PTe(n,e,t,r){switch(t){case"color":var i=n.ensureUniqueItemVisual(e,"style");i[n.getVisual("drawType")]=r,n.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(e,t,r);break}}function NTe(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(o){a.push(o.seriesIndex)}),a}Z([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=Me({},i),o.dispatchAction(Me(i,{type:r[1],seriesIndex:t(a,i)}))})})}function JS(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,c=i.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===s){var d=o.getData(),h=Lw(d,i.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:Fe(h)?d.getName(h[0]):d.getName(h),selected:st(l)?l:Me({},l)})}})}function Mut(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(JS("map","selectchanged",e,i,r),JS("pie","selectchanged",e,i,r)):r.fromAction==="select"?(JS("map","selected",e,i,r),JS("pie","selected",e,i,r)):r.fromAction==="unselect"&&(JS("map","unselected",e,i,r),JS("pie","unselected",e,i,r))})}function Jb(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var Put=Math.round(Math.random()*9),Nut=typeof Object.defineProperty=="function",Rut=function(){function n(){this._id="__ec_inner_"+Put++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return Nut?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}(),Out=Cn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),Lut=Cn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),jut=Cn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,c=Math.asin(s/o),u=Math.cos(c)*o,d=Math.sin(c),h=Math.cos(c),f=o*.6,m=o*.7;n.moveTo(t-u,l+s),n.arc(t,l,o,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*f,l+s+h*f,t,r-m,t,r),n.bezierCurveTo(t,r-m,t-u+d*f,l+s+h*f,t-u,l+s),n.closePath()}}),Fut=Cn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;n.moveTo(i,a),n.lineTo(i+o,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-o,a+t),n.lineTo(i,a),n.closePath()}}),$ut={line:so,rect:Yn,roundRect:Yn,square:Yn,circle:Xg,diamond:Lut,pin:jut,arrow:Fut,triangle:Out},But={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},A2={};Z($ut,function(n,e){A2[e]=new n});var Uut=Cn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=g2(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=A2[r];i||(r="rect",i=A2[r]),But[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function Vut(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function Da(n,e,t,r,i,a,o){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=x1e(n.slice(8),new dn(e,t,r,i),o?"center":"cover"):n.indexOf("path://")===0?l=Jj(n.slice(7),{},new dn(e,t,r,i),o?"center":"cover"):l=new Uut({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=Vut,a&&l.setColor(a),l}function MT(n){return Fe(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function tx(n,e){if(n!=null)return Fe(n)||(n=[n,n]),[tt(n[0],e[0])||0,tt(Wt(n[1],n[0]),e[1])||0]}function ew(n){return isFinite(n)}function zut(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=ew(r)?r:0,i=ew(i)?i:1,a=ew(a)?a:0,o=ew(o)?o:0;var s=n.createLinearGradient(r,a,i,o);return s}function Hut(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*i+t.y,l=l*a),o=ew(o)?o:.5,s=ew(s)?s:.5,l=l>=0&&ew(l)?l:.5;var c=n.createRadialGradient(o,s,0,o,s,l);return c}function VH(n,e,t){for(var r=e.type==="radial"?Hut(n,e,t):zut(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function Gut(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function pN(n){return parseInt(n,10)}function P_(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(n);return(n[i]||pN(s[r])||pN(n.style[r]))-(pN(s[a])||0)-(pN(s[o])||0)|0}function Wut(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:rr(n)?[n]:Fe(n)?n:null}function DY(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&Wut(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=Be(t,function(a){return a/i}),r/=i)}return[t,r]}var qut=new $f(!0);function k2(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function ule(n){return typeof n=="string"&&n!=="none"}function C2(n){var e=n.fill;return e!=null&&e!=="none"}function dle(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function hle(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function zH(n,e,t){var r=tY(e.image,e.__image,t);if(Wj(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*pR),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function Yut(n,e,t,r){var i,a=k2(t),o=C2(t),s=t.strokePercent,l=s<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||qut,d=e.__dirty;if(!r){var h=t.fill,f=t.stroke,m=o&&!!h.colorStops,v=a&&!!f.colorStops,y=o&&!!h.image,w=a&&!!f.image,S=void 0,T=void 0,C=void 0,k=void 0,A=void 0;(m||v)&&(A=e.getBoundingRect()),m&&(S=d?VH(n,h,A):e.__canvasFillGradient,e.__canvasFillGradient=S),v&&(T=d?VH(n,f,A):e.__canvasStrokeGradient,e.__canvasStrokeGradient=T),y&&(C=d||!e.__canvasFillPattern?zH(n,h,e):e.__canvasFillPattern,e.__canvasFillPattern=C),w&&(k=d||!e.__canvasStrokePattern?zH(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=C),m?n.fillStyle=S:y&&(C?n.fillStyle=C:o=!1),v?n.strokeStyle=T:w&&(k?n.strokeStyle=k:a=!1)}var D=e.getGlobalScale();u.setScale(D[0],D[1],e.segmentIgnoreThreshold);var P,N;n.setLineDash&&t.lineDash&&(i=DY(e),P=i[0],N=i[1]);var R=!0;(c||d&w_)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),R=!1),u.reset(),e.buildPath(u,e.shape,r),u.toStatic(),e.pathUpdated()),R&&u.rebuildPath(n,l?s:1),P&&(n.setLineDash(P),n.lineDashOffset=N),r||(t.strokeFirst?(a&&hle(n,t),o&&dle(n,t)):(o&&dle(n,t),a&&hle(n,t))),P&&n.setLineDash([])}function Kut(n,e,t){var r=e.__image=tY(t.image,e.__image,e,e.onload);if(!(!r||!Wj(r))){var i=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(r,c,u,t.sWidth,t.sHeight,i,a,o,s)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=o-c,h=s-u;n.drawImage(r,c,u,d,h,i,a,o,s)}else n.drawImage(r,i,a,o,s)}}function Xut(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||ly,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,o=void 0;n.setLineDash&&t.lineDash&&(r=DY(e),a=r[0],o=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=o),t.strokeFirst?(k2(t)&&n.strokeText(i,t.x,t.y),C2(t)&&n.fillText(i,t.x,t.y)):(C2(t)&&n.fillText(i,t.x,t.y),k2(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var fle=["shadowBlur","shadowOffsetX","shadowOffsetY"],ple=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function RTe(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){Vl(n,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(o)?hw.opacity:o}(r||e.blend!==t.blend)&&(a||(Vl(n,i),a=!0),n.globalCompositeOperation=e.blend||hw.blend);for(var s=0;s<fle.length;s++){var l=fle[s];(r||e[l]!==t[l])&&(a||(Vl(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(Vl(n,i),a=!0),n.shadowColor=e.shadowColor||hw.shadowColor),a}function gle(n,e,t,r,i){var a=HD(e,i.inHover),o=r?null:t&&HD(t,i.inHover)||{};if(a===o)return!1;var s=RTe(n,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(Vl(n,i),s=!0),ule(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(Vl(n,i),s=!0),ule(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(Vl(n,i),s=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,c=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(s||(Vl(n,i),s=!0),n.lineWidth=c)}for(var u=0;u<ple.length;u++){var d=ple[u],h=d[0];(r||a[h]!==o[h])&&(s||(Vl(n,i),s=!0),n[h]=a[h]||d[1])}return s}function Zut(n,e,t,r,i){return RTe(n,HD(e,i.inHover),t&&HD(t,i.inHover),r,i)}function OTe(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function Qut(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),OTe(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function Jut(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var mle=1,vle=2,yle=3,ble=4;function edt(n){var e=C2(n),t=k2(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function Vl(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function HD(n,e){return e&&n.__hoverStyle||n.style}function LTe(n,e){tw(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function tw(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Rc,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,l=!1;if((!o||Gut(a,o))&&(o&&o.length&&(Vl(n,t),n.restore(),l=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(Vl(n,t),n.save(),Qut(a,n,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=s=!0);var u=e instanceof Cn&&e.autoBatch&&edt(e.style);s||Jut(i,c.transform)?(Vl(n,t),OTe(n,e)):u||Vl(n,t);var d=HD(e,t.inHover);e instanceof Cn?(t.lastDrawType!==mle&&(l=!0,t.lastDrawType=mle),gle(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),Yut(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof $1?(t.lastDrawType!==yle&&(l=!0,t.lastDrawType=yle),gle(n,e,c,l,t),Xut(n,e,d)):e instanceof Ro?(t.lastDrawType!==vle&&(l=!0,t.lastDrawType=vle),Zut(n,e,c,l,t),Kut(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==ble&&(l=!0,t.lastDrawType=ble),tdt(n,e,t)),u&&r&&Vl(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function tdt(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),tw(n,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var c=0,u=i.length;c<u;c++){var l=i[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),tw(n,l,a,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var $6=new Rut,wle=new YI(100),xle=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function V1(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&$6.delete(n);var a=$6.get(n);if(a)return a;var o=Dt(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/t,$6.set(n,s),n.dirty=!1,s;function l(c){for(var u=[t],d=!0,h=0;h<xle.length;++h){var f=o[xle[h]];if(f!=null&&!Fe(f)&&!st(f)&&!rr(f)&&typeof f!="boolean"){d=!1;break}u.push(f)}var m;if(d){m=u.join(",")+(i?"-svg":"");var v=wle.get(m);v&&(i?c.svgElement=v:c.image=v)}var y=FTe(o.dashArrayX),w=ndt(o.dashArrayY),S=jTe(o.symbol),T=rdt(y),C=$Te(w),k=!i&&cy.createCanvas(),A=i&&{tag:"g",attrs:{},key:"dcl",children:[]},D=N(),P;k&&(k.width=D.width*t,k.height=D.height*t,P=k.getContext("2d")),R(),d&&wle.put(m,k||A),c.image=k,c.svgElement=A,c.svgWidth=D.width,c.svgHeight=D.height;function N(){for(var L=1,B=0,$=T.length;B<$;++B)L=Foe(L,T[B]);for(var G=1,B=0,$=S.length;B<$;++B)G=Foe(G,S[B].length);L*=G;var W=C*T.length*S.length;return{width:Math.max(1,Math.min(L,o.maxTileWidth)),height:Math.max(1,Math.min(W,o.maxTileHeight))}}function R(){P&&(P.clearRect(0,0,k.width,k.height),o.backgroundColor&&(P.fillStyle=o.backgroundColor,P.fillRect(0,0,k.width,k.height)));for(var L=0,B=0;B<w.length;++B)L+=w[B];if(L<=0)return;for(var $=-C,G=0,W=0,K=0;$<D.height;){if(G%2===0){for(var X=W/2%S.length,te=0,ie=0,z=0;te<D.width*2;){for(var se=0,B=0;B<y[K].length;++B)se+=y[K][B];if(se<=0)break;if(ie%2===0){var ce=(1-o.symbolSize)*.5,ee=te+y[K][ie]*ce,be=$+w[G]*ce,fe=y[K][ie]*o.symbolSize,De=w[G]*o.symbolSize,dt=z/2%S[X].length;ve(ee,be,fe,De,S[X][dt])}te+=y[K][ie],++z,++ie,ie===y[K].length&&(ie=0)}++K,K===y.length&&(K=0)}$+=w[G],++W,++G,G===w.length&&(G=0)}function ve(de,me,xe,pe,$e){var We=i?1:t,ct=Da($e,de*We,me*We,xe*We,pe*We,o.color,o.symbolKeepAspect);if(i){var xt=r.painter.renderOneToVNode(ct);xt&&A.children.push(xt)}else LTe(P,ct)}}}}function jTe(n){if(!n||n.length===0)return[["rect"]];if(st(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!st(n[t])){e=!1;break}if(e)return jTe([n]);for(var r=[],t=0;t<n.length;++t)st(n[t])?r.push([n[t]]):r.push(n[t]);return r}function FTe(n){if(!n||n.length===0)return[[0,0]];if(rr(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!rr(n[r])){t=!1;break}if(t)return FTe([n]);for(var i=[],r=0;r<n.length;++r)if(rr(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=Be(n[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function ndt(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(rr(n)){var e=Math.ceil(n);return[e,e]}var t=Be(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function rdt(n){return Be(n,function(e){return $Te(e)})}function $Te(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function idt(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=V1(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=V1(i,e)}}})}var Fd=new Xu,BTe={};function adt(n,e){BTe[n]=e}function odt(n){return BTe[n]}var sdt=1,ldt=800,cdt=900,udt=1e3,ddt=2e3,hdt=5e3,UTe=1e3,fdt=1100,IY=2e3,VTe=3e3,pdt=4e3,dF=4500,gdt=4600,mdt=5e3,vdt=6e3,zTe=7e3,ydt={PROCESSOR:{FILTER:udt,SERIES_FILTER:ldt,STATISTIC:hdt},VISUAL:{LAYOUT:UTe,PROGRESSIVE_LAYOUT:fdt,GLOBAL:IY,CHART:VTe,POST_CHART_LAYOUT:gdt,COMPONENT:pdt,BRUSH:mdt,CHART_ITEM:dF,ARIA:vdt,DECAL:zTe}},ws="__flagInMainProcess",Nl="__pendingUpdate",B6="__needsUpdateStatus",Sle=/^[a-zA-Z0-9_]+$/,U6="__connectUpdateStatus",_le=0,bdt=1,wdt=2;function HTe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return WTe(this,n,e)}}function GTe(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return WTe(this,n,e)}}function WTe(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),Xu.prototype[e].apply(n,t)}var qTe=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Xu),YTe=qTe.prototype;YTe.on=GTe("on");YTe.off=GTe("off");var e_,V6,gN,bv,z6,H6,G6,VA,zA,Tle,Ele,W6,Ale,mN,kle,KTe,wu,Cle,XTe=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,new Cut)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},st(r)&&(r=ZTe[r]),a._dom=t;var o="canvas",s="auto",l=!1;i.ssr&&got(function(h){var f=Ut(h),m=f.dataIndex;if(m!=null){var v=yt();return v.set("series_index",f.seriesIndex),v.set("data_index",m),f.ssrType&&v.set("ssr_type",f.ssrType),v}});var c=a._zr=Roe(t,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Wt(i.useDirtyRect,l),useCoarsePointer:Wt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=kY(ut(c.flush,c),17),r=Nt(r),r&&nTe(r,!0),a._theme=r,a._locale=$lt(i.locale||M1e),a._coordSysMgr=new rM;var u=a._api=kle(a);function d(h,f){return h.__prio-f.__prio}return vR(I2,d),vR(HH,d),a._scheduler=new kTe(a,u,HH,I2),a._messageCenter=new qTe,a._initEvents(),a.resize=ut(a.resize,a),c.animation.on("frame",a._onframe,a),Tle(c,a),Ele(c,a),s2(a),a}return e.prototype._onframe=function(){if(!this._disposed){Cle(this);var t=this._scheduler;if(this[Nl]){var r=this[Nl].silent;this[ws]=!0;try{e_(this),bv.update.call(this,null,this[Nl].updateParams)}catch(l){throw this[ws]=!1,this[Nl]=null,l}this._zr.flush(),this[ws]=!1,this[Nl]=null,VA.call(this,r),zA.call(this,r)}else if(t.unfinished){var i=sdt,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),H6(this,a),t.performVisualTasks(a),mN(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[ws]){if(this._disposed){this.id;return}var a,o,s;if(It(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[ws]=!0,!this._model||r){var l=new uct(this._api),c=this._theme,u=this._model=new SY;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:o},GH);var d={seriesTransition:s,optionChanged:!0};if(i)this[Nl]={silent:a,updateParams:d},this[ws]=!1,this.getZr().wakeUp();else{try{e_(this),bv.update.call(this,null,d)}catch(h){throw this[Nl]=null,this[ws]=!1,h}this._ssr||this._zr.flush(),this[Nl]=null,this[ws]=!1,VA.call(this,a),zA.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Mn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Mn.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return Z(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],o=this;Z(r,function(l){i.eachComponent({mainType:l},function(c){var u=o._componentsMap[c.__viewId];u.group.ignore||(a.push(u),u.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Z(a,function(l){l.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(Dle[i]){var l=s,c=s,u=-s,d=-s,h=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();Z(pC,function(T,C){if(T.group===i){var k=r?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(Nt(t)),A=T.getDom().getBoundingClientRect();l=a(A.left,l),c=a(A.top,c),u=o(A.right,u),d=o(A.bottom,d),h.push({dom:k,left:A.left,top:A.top})}}),l*=f,c*=f,u*=f,d*=f;var m=u-l,v=d-c,y=cy.createCanvas(),w=Roe(y,{renderer:r?"svg":"canvas"});if(w.resize({width:m,height:v}),r){var S="";return Z(h,function(T){var C=T.left-l,k=T.top-c;S+='<g transform="translate('+C+","+k+')">'+T.dom+"</g>"}),w.painter.getSvgRoot().innerHTML=S,t.connectedBackgroundColor&&w.painter.setBackgroundColor(t.connectedBackgroundColor),w.refreshImmediately(),w.painter.toDataURL()}else return t.connectedBackgroundColor&&w.add(new Yn({shape:{x:0,y:0,width:m,height:v},style:{fill:t.connectedBackgroundColor}})),Z(h,function(T){var C=new Ro({style:{x:T.left*f-l,y:T.top*f-c,image:T.dom}});w.add(C)}),w.refreshImmediately(),y.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return z6(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return z6(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,o=sC(i,t);return Z(o,function(s,l){l.indexOf("Models")>=0&&Z(s,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)a=a||!!u.containPoint(r);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(a=a||d.containPoint(r,c))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=sC(i,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?CY(s,l,r):iM(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Z(xdt,function(r){var i=function(a){var o=t.getModel(),s=a.target,l,c=r==="globalout";if(c?l={}:s&&Jb(s,function(m){var v=Ut(m);if(v&&v.dataIndex!=null){var y=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=y&&y.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=Me({},v.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var h=u&&d!=null&&o.getComponent(u,d),f=h&&t[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:f},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),Z(fC,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),Z(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),Mut(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&z_e(this.getDom(),PY,"");var r=this,i=r._api,a=r._model;Z(r._componentsViews,function(o){o.dispose(a,i)}),Z(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete pC[r.id]},e.prototype.resize=function(t){if(!this[ws]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[Nl]&&(a==null&&(a=this[Nl].silent),i=!0,this[Nl]=null),this[ws]=!0;try{i&&e_(this),bv.update.call(this,{type:"resize",animation:Me({duration:0},t&&t.animation)})}catch(o){throw this[ws]=!1,o}this[ws]=!1,VA.call(this,a),zA.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(It(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!WH[t]){var i=WH[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Me({},t);return r.type=fC[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(It(r)||(r={silent:!!r}),!!D2[t.type]&&this._model){if(this[ws]){this._pendingActions.push(t);return}var i=r.silent;G6.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&Mn.browser.weChat&&this._throttledZrFlush(),VA.call(this,i),zA.call(this,i)}},e.prototype.updateLabelLayout=function(){Fd.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){e_=function(d){var h=d._scheduler;h.restorePipelines(d._model),h.prepareStageTasks(),V6(d,!0),V6(d,!1),h.plan()},V6=function(d,h){for(var f=d._model,m=d._scheduler,v=h?d._componentsViews:d._chartsViews,y=h?d._componentsMap:d._chartsMap,w=d._zr,S=d._api,T=0;T<v.length;T++)v[T].__alive=!1;h?f.eachComponent(function(A,D){A!=="series"&&C(D)}):f.eachSeries(C);function C(A){var D=A.__requireNewView;A.__requireNewView=!1;var P="_ec_"+A.id+"_"+A.type,N=!D&&y[P];if(!N){var R=xf(A.type),L=h?Mi.getClass(R.main,R.sub):zr.getClass(R.sub);N=new L,N.init(f,S),y[P]=N,v.push(N),w.add(N.group)}A.__viewId=N.__id=P,N.__alive=!0,N.__model=A,N.group.__ecComponentInfo={mainType:A.mainType,index:A.componentIndex},!h&&m.prepareView(N,A,f,S)}for(var T=0;T<v.length;){var k=v[T];k.__alive?T++:(!h&&k.renderTask.dispose(),w.remove(k.group),k.dispose(f,S),v.splice(T,1),y[k.__id]===k&&delete y[k.__id],k.__id=k.group.__ecComponentInfo=null)}},gN=function(d,h,f,m,v){var y=d._model;if(y.setUpdatePayload(f),!m){Z([].concat(d._componentsViews).concat(d._chartsViews),k);return}var w={};w[m+"Id"]=f[m+"Id"],w[m+"Index"]=f[m+"Index"],w[m+"Name"]=f[m+"Name"];var S={mainType:m,query:w};v&&(S.subType=v);var T=f.excludeSeriesId,C;T!=null&&(C=yt(),Z(Rr(T),function(A){var D=Ha(A,null);D!=null&&C.set(D,!0)})),y&&y.eachComponent(S,function(A){var D=C&&C.get(A.id)!=null;if(!D)if(use(f))if(A instanceof ai)f.type===fw&&!f.notBlur&&!A.get(["emphasis","disabled"])&&Fst(A,f,d._api);else{var P=sY(A.mainType,A.componentIndex,f.name,d._api),N=P.focusSelf,R=P.dispatchers;f.type===fw&&N&&!f.notBlur&&AH(A.mainType,A.componentIndex,d._api),R&&Z(R,function(L){f.type===fw?Ng(L):Rg(L)})}else CH(f)&&A instanceof ai&&(Ust(A,f,d._api),lse(A),wu(d))},d),y&&y.eachComponent(S,function(A){var D=C&&C.get(A.id)!=null;D||k(d[m==="series"?"_chartsMap":"_componentsMap"][A.__viewId])},d);function k(A){A&&A.__alive&&A[h]&&A[h](A.__model,y,d._api,f)}},bv={prepareAndUpdate:function(d){e_(this),bv.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,h){var f=this._model,m=this._api,v=this._zr,y=this._coordSysMgr,w=this._scheduler;if(f){f.setUpdatePayload(d),w.restoreData(f,d),w.performSeriesTasks(f),y.create(f,m),w.performDataProcessorTasks(f,d),H6(this,f),y.update(f,m),t(f),w.performVisualTasks(f,d),W6(this,f,m,d,h);var S=f.get("backgroundColor")||"transparent",T=f.get("darkMode");v.setBackgroundColor(S),T!=null&&T!=="auto"&&v.setDarkMode(T),Fd.trigger("afterupdate",f,m)}},updateTransform:function(d){var h=this,f=this._model,m=this._api;if(f){f.setUpdatePayload(d);var v=[];f.eachComponent(function(w,S){if(w!=="series"){var T=h.getViewOfComponentModel(S);if(T&&T.__alive)if(T.updateTransform){var C=T.updateTransform(S,f,m,d);C&&C.update&&v.push(T)}else v.push(T)}});var y=yt();f.eachSeries(function(w){var S=h._chartsMap[w.__viewId];if(S.updateTransform){var T=S.updateTransform(w,f,m,d);T&&T.update&&y.set(w.uid,1)}else y.set(w.uid,1)}),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0,dirtyMap:y}),mN(this,f,m,d,{},y),Fd.trigger("afterupdate",f,m)}},updateView:function(d){var h=this._model;h&&(h.setUpdatePayload(d),zr.markUpdateMethod(d,"updateView"),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0}),W6(this,h,this._api,d,{}),Fd.trigger("afterupdate",h,this._api))},updateVisual:function(d){var h=this,f=this._model;f&&(f.setUpdatePayload(d),f.eachSeries(function(m){m.getData().clearAllVisual()}),zr.markUpdateMethod(d,"updateVisual"),t(f),this._scheduler.performVisualTasks(f,d,{visualType:"visual",setDirty:!0}),f.eachComponent(function(m,v){if(m!=="series"){var y=h.getViewOfComponentModel(v);y&&y.__alive&&y.updateVisual(v,f,h._api,d)}}),f.eachSeries(function(m){var v=h._chartsMap[m.__viewId];v.updateVisual(m,f,h._api,d)}),Fd.trigger("afterupdate",f,this._api))},updateLayout:function(d){bv.update.call(this,d)}},z6=function(d,h,f,m){if(d._disposed){d.id;return}for(var v=d._model,y=d._coordSysMgr.getCoordinateSystems(),w,S=sC(v,f),T=0;T<y.length;T++){var C=y[T];if(C[h]&&(w=C[h](v,S,m))!=null)return w}},H6=function(d,h){var f=d._chartsMap,m=d._scheduler;h.eachSeries(function(v){m.updateStreamModes(v,f[v.__viewId])})},G6=function(d,h){var f=this,m=this.getModel(),v=d.type,y=d.escapeConnect,w=D2[v],S=w.actionInfo,T=(S.update||"update").split(":"),C=T.pop(),k=T[0]!=null&&xf(T[0]);this[ws]=!0;var A=[d],D=!1;d.batch&&(D=!0,A=Be(d.batch,function(G){return G=Dt(Me({},G),d),G.batch=null,G}));var P=[],N,R=CH(d),L=use(d);if(L&&u1e(this._api),Z(A,function(G){if(N=w.action(G,f._model,f._api),N=N||Me({},G),N.type=S.event||N.type,P.push(N),L){var W=Jq(d),K=W.queryOptionMap,X=W.mainTypeSpecified,te=X?K.keys()[0]:"series";gN(f,C,G,te),wu(f)}else R?(gN(f,C,G,"series"),wu(f)):k&&gN(f,C,G,k.main,k.sub)}),C!=="none"&&!L&&!R&&!k)try{this[Nl]?(e_(this),bv.update.call(this,d),this[Nl]=null):bv[C].call(this,d)}catch(G){throw this[ws]=!1,G}if(D?N={type:S.event||v,escapeConnect:y,batch:P}:N=P[0],this[ws]=!1,!h){var B=this._messageCenter;if(B.trigger(N.type,N),R){var $={type:"selectchanged",escapeConnect:y,selected:Vst(m),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};B.trigger($.type,$)}}},VA=function(d){for(var h=this._pendingActions;h.length;){var f=h.shift();G6.call(this,f,d)}},zA=function(d){!d&&this.trigger("updated")},Tle=function(d,h){d.on("rendered",function(f){h.trigger("rendered",f),d.animation.isFinished()&&!h[Nl]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},Ele=function(d,h){d.on("mouseover",function(f){var m=f.target,v=Jb(m,jD);v&&($st(v,f,h._api),wu(h))}).on("mouseout",function(f){var m=f.target,v=Jb(m,jD);v&&(Bst(v,f,h._api),wu(h))}).on("click",function(f){var m=f.target,v=Jb(m,function(S){return Ut(S).dataIndex!=null},!0);if(v){var y=v.selected?"unselect":"select",w=Ut(v);h._api.dispatchAction({type:y,dataType:w.dataType,dataIndexInside:w.dataIndex,seriesIndex:w.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(h){h.clearColorPalette()})}function r(d){var h=[],f=[],m=!1;if(d.eachComponent(function(S,T){var C=T.get("zlevel")||0,k=T.get("z")||0,A=T.getZLevelKey();m=m||!!A,(S==="series"?f:h).push({zlevel:C,z:k,idx:T.componentIndex,type:S,key:A})}),m){var v=h.concat(f),y,w;vR(v,function(S,T){return S.zlevel===T.zlevel?S.z-T.z:S.zlevel-T.zlevel}),Z(v,function(S){var T=d.getComponent(S.type,S.idx),C=S.zlevel,k=S.key;y!=null&&(C=Math.max(y,C)),k?(C===y&&k!==w&&C++,w=k):w&&(C===y&&C++,w=""),y=C,T.setZLevel(C)})}}W6=function(d,h,f,m,v){r(h),Ale(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive=!1}),mN(d,h,f,m,v),Z(d._chartsViews,function(y){y.__alive||y.remove(h,f)})},Ale=function(d,h,f,m,v,y){Z(y||d._componentsViews,function(w){var S=w.__model;c(S,w),w.render(S,h,f,m),s(S,w),u(S,w)})},mN=function(d,h,f,m,v,y){var w=d._scheduler;v=Me(v||{},{updatedSeries:h.getSeries()}),Fd.trigger("series:beforeupdate",h,f,v);var S=!1;h.eachSeries(function(T){var C=d._chartsMap[T.__viewId];C.__alive=!0;var k=C.renderTask;w.updatePayload(k,m),c(T,C),y&&y.get(T.uid)&&k.dirty(),k.perform(w.getPerformArgs(k))&&(S=!0),C.group.silent=!!T.get("silent"),o(T,C),lse(T)}),w.unfinished=S||w.unfinished,Fd.trigger("series:layoutlabels",h,f,v),Fd.trigger("series:transition",h,f,v),h.eachSeries(function(T){var C=d._chartsMap[T.__viewId];s(T,C),u(T,C)}),a(d,h),Fd.trigger("series:afterupdate",h,f,v)},wu=function(d){d[B6]=!0,d.getZr().wakeUp()},Cle=function(d){d[B6]&&(d.getZr().storage.traverse(function(h){Q_(h)||i(h)}),d[B6]=!1)};function i(d){for(var h=[],f=d.currentStates,m=0;m<f.length;m++){var v=f[m];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}d.selected&&d.states.select&&h.push("select"),d.hoverState===Kj&&d.states.emphasis?h.push("emphasis"):d.hoverState===ZI&&d.states.blur&&h.push("blur"),d.useStates(h)}function a(d,h){var f=d._zr,m=f.storage,v=0;m.traverse(function(y){y.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Mn.node&&!Mn.worker&&h.eachSeries(function(y){if(!y.preventUsingHoverLayer){var w=d._chartsMap[y.__viewId];w.__alive&&w.eachRendered(function(S){S.states.emphasis&&(S.states.emphasis.hoverLayer=!0)})}})}function o(d,h){var f=d.get("blendMode")||null;h.eachRendered(function(m){m.isGroup||(m.style.blend=f)})}function s(d,h){if(!d.preventAutoZ){var f=d.get("z")||0,m=d.get("zlevel")||0;h.eachRendered(function(v){return l(v,f,m,-1/0),!0})}}function l(d,h,f,m){var v=d.getTextContent(),y=d.getTextGuideLine(),w=d.isGroup;if(w)for(var S=d.childrenRef(),T=0;T<S.length;T++)m=Math.max(l(S[T],h,f,m),m);else d.z=h,d.zlevel=f,m=Math.max(d.z2,m);if(v&&(v.z=h,v.zlevel=f,isFinite(m)&&(v.z2=m+2)),y){var C=d.textGuideLineConfig;y.z=h,y.zlevel=f,isFinite(m)&&(y.z2=m+(C&&C.showAbove?1:-1))}return m}function c(d,h){h.eachRendered(function(f){if(!Q_(f)){var m=f.getTextContent(),v=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function u(d,h){var f=d.getModel("stateAnimation"),m=d.isAnimationEnabled(),v=f.get("duration"),y=v>0?{duration:v,delay:f.get("delay"),easing:f.get("easing")}:null;h.eachRendered(function(w){if(w.states&&w.states.emphasis){if(Q_(w))return;if(w instanceof Cn&&qst(w),w.__dirty){var S=w.prevStates;S&&w.useStates(S)}if(m){w.stateTransition=y;var T=w.getTextContent(),C=w.getTextGuideLine();T&&(T.stateTransition=y),C&&(C.stateTransition=y)}w.__dirty&&i(w)}})}kle=function(d){return new(function(h){_e(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(m){for(;m;){var v=m.__ecComponentInfo;if(v!=null)return d._model.getComponent(v.mainType,v.index);m=m.parent}},f.prototype.enterEmphasis=function(m,v){Ng(m,v),wu(d)},f.prototype.leaveEmphasis=function(m,v){Rg(m,v),wu(d)},f.prototype.enterBlur=function(m){o1e(m),wu(d)},f.prototype.leaveBlur=function(m){oY(m),wu(d)},f.prototype.enterSelect=function(m){s1e(m),wu(d)},f.prototype.leaveSelect=function(m){l1e(m),wu(d)},f.prototype.getModel=function(){return d.getModel()},f.prototype.getViewOfComponentModel=function(m){return d.getViewOfComponentModel(m)},f.prototype.getViewOfSeriesModel=function(m){return d.getViewOfSeriesModel(m)},f}(eTe))(d)},KTe=function(d){function h(f,m){for(var v=0;v<f.length;v++){var y=f[v];y[U6]=m}}Z(fC,function(f,m){d._messageCenter.on(m,function(v){if(Dle[d.group]&&d[U6]!==_le){if(v&&v.escapeConnect)return;var y=d.makeActionFromEvent(v),w=[];Z(pC,function(S){S!==d&&S.group===d.group&&w.push(S)}),h(w,_le),Z(w,function(S){S[U6]!==bdt&&S.dispatchAction(y)}),h(w,wdt)}})})}}(),e}(Xu),MY=XTe.prototype;MY.on=HTe("on");MY.off=HTe("off");MY.one=function(n,e,t){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var xdt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var D2={},fC={},HH=[],GH=[],I2=[],ZTe={},WH={},pC={},Dle={},Sdt=+new Date-0,PY="_echarts_instance_";function QTe(n,e,t){{var r=_dt(n);if(r)return r}var i=new XTe(n,e,t);return i.id="ec_"+Sdt++,pC[i.id]=i,z_e(n,PY,i.id),KTe(i),Fd.trigger("afterinit",i),i}function _dt(n){return pC[Oot(n,PY)]}function JTe(n,e){ZTe[n]=e}function eEe(n){mn(GH,n)<0&&GH.push(n)}function tEe(n,e){RY(HH,n,e,ddt)}function Tdt(n){NY("afterinit",n)}function Edt(n){NY("afterupdate",n)}function NY(n,e){Fd.on(n,e)}function Wf(n,e,t){kt(e)&&(t=e,e="");var r=It(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!fC[e]&&(pl(Sle.test(r)&&Sle.test(e)),D2[r]||(D2[r]={action:t,actionInfo:n}),fC[e]=r)}function Adt(n,e){rM.register(n,e)}function kdt(n,e){RY(I2,n,e,UTe,"layout")}function nx(n,e){RY(I2,n,e,VTe,"visual")}var Ile=[];function RY(n,e,t,r,i){if((kt(e)||It(e))&&(t=e,e=r),!(mn(Ile,t)>=0)){Ile.push(t);var a=kTe.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function nEe(n,e){WH[n]=e}function Cdt(n,e,t){var r=odt("registerMap");r&&r(n,e,t)}var Ddt=Vct;nx(IY,put);nx(dF,gut);nx(dF,mut);nx(IY,Dut);nx(dF,Iut);nx(zTe,idt);eEe(nTe);tEe(cdt,Sct);nEe("default",vut);Wf({type:fw,event:fw,update:fw},ma);Wf({type:SR,event:SR,update:SR},ma);Wf({type:lC,event:lC,update:lC},ma);Wf({type:_R,event:_R,update:_R},ma);Wf({type:cC,event:cC,update:cC},ma);JTe("light",kut);JTe("dark",MTe);var Mle=[],Idt={registerPreprocessor:eEe,registerProcessor:tEe,registerPostInit:Tdt,registerPostUpdate:Edt,registerUpdateLifecycle:NY,registerAction:Wf,registerCoordinateSystem:Adt,registerLayout:kdt,registerVisual:nx,registerTransform:Ddt,registerLoading:nEe,registerMap:Cdt,registerImpl:adt,PRIORITY:ydt,ComponentModel:On,ComponentView:Mi,SeriesModel:ai,ChartView:zr,registerComponentModel:function(n){On.registerClass(n)},registerComponentView:function(n){Mi.registerClass(n)},registerSeriesModel:function(n){ai.registerClass(n)},registerChartView:function(n){zr.registerClass(n)},registerSubTypeDefaulter:function(n,e){On.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){fot(n,e)}};function En(n){if(Fe(n)){Z(n,function(e){En(e)});return}mn(Mle,n)>=0||(Mle.push(n),kt(n)&&(n={install:n}),n.install(Idt))}function HA(n){return n==null?0:n.length||1}function Ple(n){return n}var Og=function(){function n(e,t,r,i,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||Ple,this._newKeyGetter=i||Ple,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],l=r[s],c=HA(l);if(c>1){var u=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(u,o)}else c===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],c=r[l],u=i[l],d=HA(c),h=HA(u);if(d>1&&h===1)this._updateManyToOne&&this._updateManyToOne(u,c),i[l]=null;else if(d===1&&h>1)this._updateOneToMany&&this._updateOneToMany(u,c),i[l]=null;else if(d===1&&h===1)this._update&&this._update(u,c),i[l]=null;else if(d>1&&h>1)this._updateManyToMany&&this._updateManyToMany(u,c),i[l]=null;else if(d>1)for(var f=0;f<d;f++)this._remove&&this._remove(c[f]);else this._remove&&this._remove(c)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],o=HA(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!t){var l=t[s],c=HA(l);c===0?(t[s]=o,a&&r.push(s)):c===1?t[s]=[l,o]:l.push(o)}}},n}(),Mdt=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function Pdt(n,e){var t={},r=t.encode={},i=yt(),a=[],o=[],s={};Z(n.dimensions,function(h){var f=n.getDimensionInfo(h),m=f.coordDim;if(m){var v=f.coordDimIndex;q6(r,m)[v]=h,f.isExtraCoord||(i.set(m,1),Ndt(f.type)&&(a[0]=h),q6(s,m)[v]=n.getDimensionIndex(f.name)),f.defaultTooltip&&o.push(h)}q1e.each(function(y,w){var S=q6(r,w),T=f.otherDims[w];T!=null&&T!==!1&&(S[T]=f.name)})});var l=[],c={};i.each(function(h,f){var m=r[f];c[f]=m[0],l=l.concat(m)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Be(l,function(h){return n.getDimensionInfo(h).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=r.label;u&&u.length&&(a=u.slice());var d=r.tooltip;return d&&d.length?o=d.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new Mdt(s,e),t}function q6(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function M2(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Ndt(n){return!(n==="ordinal"||n==="time")}var CR=function(){function n(e){this.otherDims={},e!=null&&Me(this,e)}return n}(),Rdt=Kn(),Odt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},rEe=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=oEe(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return Wt(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=iTe(this.source),r=!sEe(e),i="",a=[],o=0,s=0;o<e;o++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[s];if(d&&d.storeDimIndex===o)l=t?d.name:null,c=d.type,u=d.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(l=t?h.name:null,c=h.type)}a.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Odt[c]||"f",u&&(i+=u.uid),i+="$"}var f=this.source,m=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:a,hash:m}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function iEe(n){return n instanceof rEe}function aEe(n){for(var e=yt(),t=0;t<(n||[]).length;t++){var r=n[t],i=It(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function oEe(n){var e=Rdt(n);return e.dimNameMap||(e.dimNameMap=aEe(n.dimensionsDefine))}function sEe(n){return n>30}var GA=It,wv=Be,Ldt=typeof Int32Array>"u"?Array:Int32Array,jdt="e\0\0",Nle=-1,Fdt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],$dt=["_approximateExtent"],Rle,vN,WA,qA,Y6,YA,K6,hl=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;iEe(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},l=!1,c={},u=0;u<r.length;u++){var d=r[u],h=st(d)?new CR({name:d}):d instanceof CR?d:new CR(d),f=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=f,h.coordDimIndex=0);var m=h.otherDims=h.otherDims||{};o.push(f),a[f]=h,c[f]!=null&&(l=!0),h.createInvertedIndices&&(s[f]=[]),m.itemName===0&&(this._nameDimIdx=u),m.itemId===0&&(this._idDimIdx=u),i&&(h.storeDimIndex=u)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=yt();Z(o,function(y){v.set(a[y].storeDimIndex,y)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(rr(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof jH&&(a=e),!a){var o=this.dimensions,s=_Y(e)||Ns(e)?new aTe(e,o.length):e;a=new jH;var l=wv(o,function(c){return{type:i._dimInfos[c].type,property:c}});a.initData(s,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Pdt(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=t[l],o&&K6(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Qv&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===Zu;if(l&&!i.pure)for(var c=[],u=e;u<t;u++){var d=i.getItem(u,c);if(!this.hasItemOption&&Sot(d)&&(this.hasItemOption=!0),d){var h=d.name;a[u]==null&&h!=null&&(a[u]=Ha(h,null));var f=d.id;o[u]==null&&f!=null&&(o[u]=Ha(f,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)K6(this,u);Rle(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){GA(e)?Me(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=WA(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return vN(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return Fe(e)?i.getValues(wv(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?Nle:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){kt(e)&&(r=t,t=e,e=[]);var i=r||this,a=wv(qA(e),this._getStoreDimIndex,this);this._store.each(a,i?ut(t,i):t)},n.prototype.filterSelf=function(e,t,r){kt(e)&&(r=t,t=e,e=[]);var i=r||this,a=wv(qA(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?ut(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=Ln(e);return Z(i,function(a){var o=t._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){kt(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,o=wv(qA(e),this._getStoreDimIndex,this),s=YA(this);return s._store=this._store.map(o,a?ut(t,a):t),s},n.prototype.modify=function(e,t,r,i){var a=r||i||this,o=wv(qA(e),this._getStoreDimIndex,this);this._store.modify(o,a?ut(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=YA(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.minmaxDownSample=function(e,t){var r=YA(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=YA(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new wr(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Og(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return vN(e,r)},function(r){return vN(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},GA(e)?Me(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),Fe(a)?a=a.slice():GA(a)&&(a=Me({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,GA(t)?Me(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){GA(e)?Me(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Me(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;TH(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){Z(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:wv(this.dimensions,this._getDimInfo,this),this.hostModel)),Y6(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];kt(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(zq(arguments)))})},n.internalField=function(){Rle=function(e){var t=e._invertedIndicesMap;Z(t,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=t[i]=new Ldt(o.categories.length);for(var l=0;l<r.length;l++)r[l]=Nle;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},WA=function(e,t,r){return Ha(e._getCategory(t,r),null)},vN=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=WA(e,e._idDimIdx,t)),r==null&&(r=jdt+t),r},qA=function(e){return Fe(e)||(e=e!=null?[e]:[]),e},YA=function(e){var t=new n(e._schema?e._schema:wv(e.dimensions,e._getDimInfo,e),e.hostModel);return Y6(t,e),t},Y6=function(e,t){Z(Fdt.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,Z($dt,function(r){e[r]=Nt(t[r])}),e._calculationInfo=Me({},t._calculationInfo)},K6=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],l=i[t];if(s==null&&a!=null&&(r[t]=s=WA(e,a,t)),l==null&&o!=null&&(i[t]=l=WA(e,o,t)),l==null&&s!=null){var c=e._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),i[t]=l}}}(),n}();function aM(n,e){_Y(n)||(n=TY(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=yt(),a=[],o=Udt(n,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&sEe(o),l=r===n.dimensionsDefine,c=l?oEe(n):aEe(r),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,o));for(var d=yt(u),h=new fTe(o),f=0;f<h.length;f++)h[f]=-1;function m(N){var R=h[N];if(R<0){var L=r[N],B=It(L)?L:{name:L},$=new CR,G=B.name;G!=null&&c.get(G)!=null&&($.name=$.displayName=G),B.type!=null&&($.type=B.type),B.displayName!=null&&($.displayName=B.displayName);var W=a.length;return h[N]=W,$.storeDimIndex=N,a.push($),$}return a[R]}if(!s)for(var f=0;f<o;f++)m(f);d.each(function(N,R){var L=Rr(N).slice();if(L.length===1&&!st(L[0])&&L[0]<0){d.set(R,!1);return}var B=d.set(R,[]);Z(L,function($,G){var W=st($)?c.get($):$;W!=null&&W<o&&(B[G]=W,y(m(W),R,G))})});var v=0;Z(t,function(N){var R,L,B,$;if(st(N))R=N,$={};else{$=N,R=$.name;var G=$.ordinalMeta;$.ordinalMeta=null,$=Me({},$),$.ordinalMeta=G,L=$.dimsDef,B=$.otherDims,$.name=$.coordDim=$.coordDimIndex=$.dimsDef=$.otherDims=null}var W=d.get(R);if(W!==!1){if(W=Rr(W),!W.length)for(var K=0;K<(L&&L.length||1);K++){for(;v<o&&m(v).coordDim!=null;)v++;v<o&&W.push(v++)}Z(W,function(X,te){var ie=m(X);if(l&&$.type!=null&&(ie.type=$.type),y(Dt(ie,$),R,te),ie.name==null&&L){var z=L[te];!It(z)&&(z={name:z}),ie.name=ie.displayName=z.name,ie.defaultTooltip=z.defaultTooltip}B&&Dt(ie.otherDims,B)})}});function y(N,R,L){q1e.get(R)!=null?N.otherDims[R]=L:(N.coordDim=R,N.coordDimIndex=L,i.set(R,!0))}var w=e.generateCoord,S=e.generateCoordCount,T=S!=null;S=w?S||1:0;var C=w||"value";function k(N){N.name==null&&(N.name=N.coordDim)}if(s)Z(a,function(N){k(N)}),a.sort(function(N,R){return N.storeDimIndex-R.storeDimIndex});else for(var A=0;A<o;A++){var D=m(A),P=D.coordDim;P==null&&(D.coordDim=Vdt(C,i,T),D.coordDimIndex=0,(!w||S<=0)&&(D.isExtraCoord=!0),S--),k(D),D.type==null&&(Z1e(n,A)===Ho.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return Bdt(a),new rEe({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function Bdt(n){for(var e=yt(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function Udt(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return Z(e,function(a){var o;It(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function Vdt(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var zdt=function(){function n(e){this.coordSysDims=[],this.axisMap=yt(),this.categoryAxisMap=yt(),this.coordSysName=e}return n}();function Hdt(n){var e=n.get("coordinateSystem"),t=new zdt(e),r=Gdt[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var Gdt={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",Ca).models[0],a=n.getReferringComponents("yAxis",Ca).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),t_(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),t_(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",Ca).models[0];e.coordSysDims=["single"],t.set("single",i),t_(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",Ca).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),t_(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),t_(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();Z(a.parallelAxisIndex,function(s,l){var c=i.getComponent("parallelAxis",s),u=o[l];t.set(u,c),t_(c)&&(r.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function t_(n){return n.get("type")==="category"}function Wdt(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,o,s;qdt(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var l=!!(n&&n.get("stack")),c,u,d,h;if(Z(a,function(S,T){st(S)&&(a[T]=S={name:S}),l&&!S.isExtraCoord&&(!r&&!c&&S.ordinalMeta&&(c=S),!u&&S.type!=="ordinal"&&S.type!=="time"&&(!i||i===S.coordDim)&&(u=S))}),u&&!r&&!c&&(r=!0),u){d="__\0ecstackresult_"+n.id,h="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var f=u.coordDim,m=u.type,v=0;Z(a,function(S){S.coordDim===f&&v++});var y={name:d,coordDim:f,coordDimIndex:v,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},w={name:h,coordDim:h,coordDimIndex:v+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(y.storeDimIndex=s.ensureCalculationDimension(h,m),w.storeDimIndex=s.ensureCalculationDimension(d,m)),o.appendCalculationDimension(y),o.appendCalculationDimension(w)):(a.push(y),a.push(w))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:d}}function qdt(n){return!iEe(n.schema)}function fy(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function lEe(n,e){return fy(n,e)?n.getCalculationInfo("stackResultDimension"):e}function Ydt(n,e){var t=n.get("coordinateSystem"),r=rM.get(t),i;return e&&e.coordSysDims&&(i=Be(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var l=s.get("type");o.type=M2(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function Kdt(n,e,t){var r,i;return t&&Z(n,function(a,o){var s=a.coordDim,l=t.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function Zg(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=TY(n)):(i=r.getSource(),a=i.sourceFormat===Zu);var o=Hdt(e),s=Ydt(e,o),l=t.useEncodeDefaulter,c=kt(l)?l:l?Qt(X1e,s,e):null,u={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!a},d=aM(i,u),h=Kdt(d.dimensions,t.createInvertedIndices,o),f=a?null:r.getSharedDataStore(d),m=Wdt(e,{schema:d,store:f}),v=new hl(d,e);v.setCalculationInfo(m);var y=h!=null&&Xdt(i)?function(w,S,T,C){return C===h?T:this.defaultDimValueGetter(w,S,T,C)}:null;return v.hasItemOption=!1,v.initData(a?i:f,null,y),v}function Xdt(n){if(n.sourceFormat===Zu){var e=Zdt(n.data||[]);return!Fe(xT(e))}}function Zdt(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var qf=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();Gj(qf);var Qdt=0,qH=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Qdt}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&Be(r,Jdt);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!st(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=yt(this.categories))},n}();function Jdt(n){return It(n)&&n.value!=null?n.value:n+""}function YH(n){return n.type==="interval"||n.type==="log"}function eht(n,e,t,r){var i={},a=n[1]-n[0],o=i.interval=O_e(a/e);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=cEe(o),l=i.niceTickExtent=[na(Math.ceil(n[0]/o)*o,s),na(Math.floor(n[1]/o)*o,s)];return tht(l,n),i}function X6(n){var e=Math.pow(10,Zq(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,na(t*e)}function cEe(n){return wf(n)+2}function Ole(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function tht(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),Ole(n,0,e),Ole(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function hF(n,e){return n>=e[0]&&n<=e[1]}function fF(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function pF(n,e){return n*(e[1]-e[0])+e[0]}var gF=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new qH({})),Fe(i)&&(i=new qH({categories:Be(i,function(a){return It(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:st(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),hF(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),fF(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(pF(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var c=r[o];i[o]=c,a[c]=o}for(var u=0;o<s;++o){for(;a[u]!=null;)u++;i.push(u),a[u]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(qf);qf.registerClass(gF);var mb=na,Lg=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return hF(t,this._extent)},e.prototype.normalize=function(t){return fF(t,this._extent)},e.prototype.scale=function(t){return pF(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=cEe(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(t?s.push({value:mb(a[0]-r,o)}):s.push({value:i[0]}));for(var c=a[0];c<=a[1]&&(s.push({value:c}),c=mb(c+r,o),c!==s[s.length-1].value);)if(s.length>l)return[];var u=s.length?s[s.length-1].value:a[1];return i[1]>u&&(t?s.push({value:mb(u+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],c=0,u=[],d=s.value-l.value,h=d/t;c<t-1;){var f=mb(l.value+(c+1)*h);f>a[0]&&f<a[1]&&u.push(f),c++}i.push(u)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=wf(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=mb(t.value,i,!0);return U1e(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=eht(a,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=mb(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=mb(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(qf);qf.registerClass(Lg);var uEe=typeof Float32Array<"u",nht=uEe?Float32Array:Array;function Sf(n){return Fe(n)?uEe?new Float32Array(n):n:new nht(n)}var KH="__ec_stack_";function dEe(n){return n.get("stack")||KH+n.seriesIndex}function OY(n){return n.dim+n.index}function rht(n){var e=[],t=n.axis,r="axis0";if(t.type==="category"){for(var i=t.getBandWidth(),a=0;a<n.count;a++)e.push(Dt({bandWidth:i,axisKey:r,stackId:KH+a},n));for(var o=pEe(e),s=[],a=0;a<n.count;a++){var l=o[r][KH+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function hEe(n,e){var t=[];return e.eachSeriesByType(n,function(r){vEe(r)&&t.push(r)}),t}function iht(n){var e={};Z(n,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var d=l.getData(),h=u.dim+"_"+u.index,f=d.getDimensionIndex(d.mapDimension(u.dim)),m=d.getStore(),v=0,y=m.count();v<y;++v){var w=m.get(f,v);e[h]?e[h].push(w):e[h]=[w]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,c){return l-c});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function fEe(n){var e=iht(n),t=[];return Z(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,c=e[l],u=Math.abs(o[1]-o[0]),d=a.scale.getExtent(),h=Math.abs(d[1]-d[0]);s=c?u/h*c:u}else{var f=r.getData();s=Math.abs(o[1]-o[0])/f.count()}var m=tt(r.get("barWidth"),s),v=tt(r.get("barMaxWidth"),s),y=tt(r.get("barMinWidth")||(yEe(r)?.5:1),s),w=r.get("barGap"),S=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:m,barMaxWidth:v,barMinWidth:y,barGap:w,barCategoryGap:S,axisKey:OY(a),stackId:dEe(r)})}),pEe(t)}function pEe(n){var e={};Z(n,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;e[a]=s;var c=r.stackId;l[c]||s.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=r.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(s.remainedWidth,u),s.remainedWidth-=u);var d=r.barMaxWidth;d&&(l[c].maxWidth=d);var h=r.barMinWidth;h&&(l[c].minWidth=h);var f=r.barGap;f!=null&&(s.gap=f);var m=r.barCategoryGap;m!=null&&(s.categoryGap=m)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=Ln(a).length;s=Math.max(35-l*4,15)+"%"}var c=tt(s,o),u=tt(r.gap,1),d=r.remainedWidth,h=r.autoWidthCount,f=(d-c)/(h+(h-1)*u);f=Math.max(f,0),Z(a,function(w){var S=w.maxWidth,T=w.minWidth;if(w.width){var C=w.width;S&&(C=Math.min(C,S)),T&&(C=Math.max(C,T)),w.width=C,d-=C+u*C,h--}else{var C=f;S&&S<C&&(C=Math.min(S,d)),T&&T>C&&(C=T),C!==f&&(w.width=C,d-=C+u*C,h--)}}),f=(d-c)/(h+(h-1)*u),f=Math.max(f,0);var m=0,v;Z(a,function(w,S){w.width||(w.width=f),v=w,m+=w.width*(1+u)}),v&&(m-=v.width*u);var y=-m/2;Z(a,function(w,S){t[i][S]=t[i][S]||{bandWidth:o,offset:y,width:w.width},y+=w.width*(1+u)})}),t}function aht(n,e,t){if(n&&e){var r=n[OY(e)];return r}}function gEe(n,e){var t=hEe(n,e),r=fEe(t);Z(t,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=dEe(i),c=r[OY(s)][l],u=c.offset,d=c.width;a.setLayout({bandWidth:c.bandWidth,offset:u,size:d})})}function mEe(n){return{seriesType:n,plan:DT(),reset:function(e){if(vEe(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),c=t.mapDimension(a.dim),u=t.getCalculationInfo("stackResultDimension"),d=fy(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),f=oht(i,a),m=yEe(e),v=e.get("barMinHeight")||0,y=u&&t.getDimensionIndex(u),w=t.getLayout("size"),S=t.getLayout("offset");return{progress:function(T,C){for(var k=T.count,A=m&&Sf(k*3),D=m&&l&&Sf(k*3),P=m&&Sf(k),N=r.master.getRect(),R=h?N.width:N.height,L,B=C.getStore(),$=0;(L=T.next())!=null;){var G=B.get(d?y:o,L),W=B.get(s,L),K=f,X=void 0;d&&(X=+G-B.get(o,L));var te=void 0,ie=void 0,z=void 0,se=void 0;if(h){var ce=r.dataToPoint([G,W]);if(d){var ee=r.dataToPoint([X,W]);K=ee[0]}te=K,ie=ce[1]+S,z=ce[0]-K,se=w,Math.abs(z)<v&&(z=(z<0?-1:1)*v)}else{var ce=r.dataToPoint([W,G]);if(d){var ee=r.dataToPoint([W,X]);K=ee[1]}te=ce[0]+S,ie=K,z=w,se=ce[1]-K,Math.abs(se)<v&&(se=(se<=0?-1:1)*v)}m?(A[$]=te,A[$+1]=ie,A[$+2]=h?z:se,D&&(D[$]=h?N.x:te,D[$+1]=h?ie:N.y,D[$+2]=R),P[L]=L):C.setItemLayout(L,{x:te,y:ie,width:z,height:se}),$+=3}m&&C.setLayout({largePoints:A,largeDataIndices:P,largeBackgroundPoints:D,valueAxisHorizontal:h})}}}}}}function vEe(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function yEe(n){return n.pipelineContext&&n.pipelineContext.large}function oht(n,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var sht=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},LY=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return nF(t.value,Ese[Vlt(e1(this._minLevelUnit))]||Ese.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return zlt(t,r,i,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=pht(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=ju,r[1]+=ju),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-ju}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=yN.length,l=Math.min(sht(yN,this._approxInterval,0,s),s-1);this._interval=yN[l][1],this._minLevelUnit=yN[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return rr(t)?t:+Ff(t)},e.prototype.contain=function(t){return hF(this.parse(t),this._extent)},e.prototype.normalize=function(t){return fF(this.parse(t),this._extent)},e.prototype.scale=function(t){return pF(t,this._extent)},e.type="time",e}(Lg),yN=[["second",gY],["minute",mY],["hour",dC],["quarter-day",dC*6],["half-day",dC*12],["day",ju*1.2],["half-week",ju*3.5],["week",ju*7],["month",ju*31],["quarter",ju*95],["half-year",Tse/2],["year",Tse]];function lht(n,e,t,r){var i=Ff(e),a=Ff(t),o=function(m){return Ase(i,m,r)===Ase(a,m,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},c=function(){return l()&&o("day")},u=function(){return c()&&o("hour")},d=function(){return u()&&o("minute")},h=function(){return d()&&o("second")},f=function(){return h()&&o("millisecond")};switch(n){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return d();case"second":return h();case"millisecond":return f()}}function cht(n,e){return n/=ju,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function uht(n){var e=30*ju;return n/=e,n>6?6:n>3?3:n>2?2:1}function dht(n){return n/=dC,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function Lle(n,e){return n/=e?mY:gY,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function hht(n){return O_e(n)}function fht(n,e,t){var r=new Date(n);switch(e1(e)){case"year":case"month":r[O1e(t)](0);case"day":r[L1e(t)](1);case"hour":r[j1e(t)](0);case"minute":r[F1e(t)](0);case"second":r[$1e(t)](0),r[B1e(t)](0)}return r.getTime()}function pht(n,e,t,r){var i=1e4,a=N1e,o=0;function s(R,L,B,$,G,W,K){for(var X=new Date(L),te=L,ie=X[$]();te<B&&te<=r[1];)K.push({value:te}),ie+=R,X[G](ie),te=X.getTime();K.push({value:te,notAdd:!0})}function l(R,L,B){var $=[],G=!L.length;if(!lht(e1(R),r[0],r[1],t)){G&&(L=[{value:fht(new Date(r[0]),R,t)},{value:r[1]}]);for(var W=0;W<L.length-1;W++){var K=L[W].value,X=L[W+1].value;if(K!==X){var te=void 0,ie=void 0,z=void 0,se=!1;switch(R){case"year":te=Math.max(1,Math.round(e/ju/365)),ie=vY(t),z=Hlt(t);break;case"half-year":case"quarter":case"month":te=uht(e),ie=t1(t),z=O1e(t);break;case"week":case"half-week":case"day":te=cht(e),ie=rF(t),z=L1e(t),se=!0;break;case"half-day":case"quarter-day":case"hour":te=dht(e),ie=$D(t),z=j1e(t);break;case"minute":te=Lle(e,!0),ie=iF(t),z=F1e(t);break;case"second":te=Lle(e,!1),ie=aF(t),z=$1e(t);break;case"millisecond":te=hht(e),ie=oF(t),z=B1e(t);break}s(te,K,X,ie,z,se,$),R==="year"&&B.length>1&&W===0&&B.unshift({value:B[0].value-te})}}for(var W=0;W<$.length;W++)B.push($[W]);return $}}for(var c=[],u=[],d=0,h=0,f=0;f<a.length&&o++<i;++f){var m=e1(a[f]);if(Ult(a[f])){l(a[f],c[c.length-1]||[],u);var v=a[f+1]?e1(a[f+1]):null;if(m!==v){if(u.length){h=d,u.sort(function(R,L){return R.value-L.value});for(var y=[],w=0;w<u.length;++w){var S=u[w].value;(w===0||u[w-1].value!==S)&&(y.push(u[w]),S>=r[0]&&S<=r[1]&&d++)}var T=(r[1]-r[0])/e;if(d>T*1.5&&h>T/1.5||(c.push(y),d>T||n===a[f]))break}u=[]}}}for(var C=vr(Be(c,function(R){return vr(R,function(L){return L.value>=r[0]&&L.value<=r[1]&&!L.notAdd})}),function(R){return R.length>0}),k=[],A=C.length-1,f=0;f<C.length;++f)for(var D=C[f],P=0;P<D.length;++P)k.push({value:D[P].value,level:A-f});k.sort(function(R,L){return R.value-L.value});for(var N=[],f=0;f<k.length;++f)(f===0||k[f].value!==k[f-1].value)&&N.push(k[f]);return N}qf.registerClass(LY);var jle=qf.prototype,gC=Lg.prototype,ght=na,mht=Math.floor,vht=Math.ceil,bN=Math.pow,Nd=Math.log,jY=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Lg,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=gC.getTicks.call(this,t);return Be(o,function(s){var l=s.value,c=na(bN(this.base,l));return c=l===i[0]&&this._fixMin?wN(c,a[0]):c,c=l===i[1]&&this._fixMax?wN(c,a[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,r){var i=Nd(this.base);t=Nd(Math.max(0,t))/i,r=Nd(Math.max(0,r))/i,gC.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=jle.getExtent.call(this);r[0]=bN(t,r[0]),r[1]=bN(t,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=wN(r[0],a[0])),this._fixMax&&(r[1]=wN(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=Nd(t[0])/Nd(r),t[1]=Nd(t[1])/Nd(r),jle.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=xot(i),o=t/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[na(vht(r[0]/a)*a),na(mht(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){gC.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Nd(t)/Nd(this.base),hF(t,this._extent)},e.prototype.normalize=function(t){return t=Nd(t)/Nd(this.base),fF(t,this._extent)},e.prototype.scale=function(t){return t=pF(t,this._extent),bN(this.base,t)},e.type="log",e}(qf),bEe=jY.prototype;bEe.getMinorTicks=gC.getMinorTicks;bEe.getLabel=gC.getLabel;function wN(n,e){return ght(n,wf(e))}qf.registerClass(jY);var yht=function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=t.get("min",!0);a==null&&(a=t.get("startValue",!0));var o=this._modelMinRaw=a;kt(o)?this._modelMinNum=xN(e,o({min:r[0],max:r[1]})):o!=="dataMin"&&(this._modelMinNum=xN(e,o));var s=this._modelMaxRaw=t.get("max",!0);if(kt(s)?this._modelMaxNum=xN(e,s({min:r[0],max:r[1]})):s!=="dataMax"&&(this._modelMaxNum=xN(e,s)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),c=Fe(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[lh(c[0],1),lh(c[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,c=s!=null,u=l!=null;s==null&&(s=e?i?0:NaN:t-a[0]*o),l==null&&(l=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var d=DD(s)||DD(l)||e&&!i;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var h=this._determinedMin,f=this._determinedMax;return h!=null&&(s=h,c=!0),f!=null&&(l=f,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:d}},n.prototype.modifyDataMinMax=function(e,t){this[wht[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=bht[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),bht={min:"_determinedMin",max:"_determinedMax"},wht={min:"_dataMin",max:"_dataMax"};function wEe(n,e,t){var r=n.rawExtentInfo;return r||(r=new yht(n,e,t),n.rawExtentInfo=r,r)}function xN(n,e){return e==null?null:DD(e)?NaN:n.parse(e)}function xEe(n,e){var t=n.type,r=wEe(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=hEe("bar",o),l=!1;if(Z(s,function(d){l=l||d.getBaseAxis()===e.axis}),l){var c=fEe(s),u=xht(i,a,e,c);i=u.min,a=u.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function xht(n,e,t,r){var i=t.axis.getExtent(),a=Math.abs(i[1]-i[0]),o=aht(r,t.axis);if(o===void 0)return{min:n,max:e};var s=1/0;Z(o,function(f){s=Math.min(f.offset,s)});var l=-1/0;Z(o,function(f){l=Math.max(f.offset+f.width,l)}),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-n,d=1-(s+l)/a,h=u/d-u;return e+=h*(l/c),n-=h*(s/c),{min:n,max:e}}function z1(n,e){var t=e,r=xEe(n,t),i=r.extent,a=t.get("splitNumber");n instanceof jY&&(n.base=t.get("logBase"));var o=n.type,s=t.get("interval"),l=o==="interval"||o==="time";n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function mF(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new gF({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new LY({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(qf.getClass(e)||Lg)}}function Sht(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function PT(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(i,a){return n.scale.getFormattedLabel(i,a,r)}}(e):st(e)?function(r){return function(i){var a=n.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):kt(e)?function(r){return function(i,a){return t!=null&&(a=i.value-t),r(FY(n,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return n.scale.getLabel(r)}}function FY(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function _ht(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,a=t.getExtent();t instanceof gF?i=t.count():(r=t.getTicks(),i=r.length);var o=n.getLabelModel(),s=PT(n),l,c=1;i>40&&(c=Math.ceil(i/40));for(var u=0;u<i;u+=c){var d=r?r[u]:{value:a[0]+u},h=s(d,u),f=o.getTextRect(h),m=Tht(f,o.get("rotate")||0);l?l.union(m):l=m}return l}}function Tht(n,e){var t=e*Math.PI/180,r=n.width,i=n.height,a=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new dn(n.x,n.y,a,o);return s}function $Y(n){var e=n.get("interval");return e??"auto"}function SEe(n){return n.type==="category"&&$Y(n.getLabelModel())===0}function P2(n,e){var t={};return Z(n.mapDimensionsAll(e),function(r){t[lEe(n,r)]=!0}),Ln(t)}function Eht(n,e,t){e&&Z(P2(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}var oM=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),Aht=1e-8;function Fle(n,e){return Math.abs(n-e)<Aht}function Rb(n,e,t){var r=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var o=n[a];r+=Jp(i[0],i[1],o[0],o[1],e,t),i=o}var s=n[0];return(!Fle(i[0],s[0])||!Fle(i[1],s[1]))&&(r+=Jp(i[0],i[1],s[0],s[1],e,t)),r!==0}var kht=[];function Z6(n,e){for(var t=0;t<n.length;t++)Zo(n[t],n[t],e)}function $le(n,e,t,r){for(var i=0;i<n.length;i++){var a=n[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(jv(e,e,a),Fv(t,t,a))}}function Cht(n){for(var e=0,t=0,r=0,i=n.length,a=n[i-1][0],o=n[i-1][1],s=0;s<i;s++){var l=n[s][0],c=n[s][1],u=a*c-l*o;e+=u,t+=(a+l)*u,r+=(o+c)*u,a=l,o=c}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var _Ee=function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n}(),Ble=function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n}(),Ule=function(){function n(e){this.type="linestring",this.points=e}return n}(),TEe=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,i=0,a=0;a<t.length;a++){var o=t[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return Cht(r.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return Z(o,function(s){s.type==="polygon"?$le(s.exterior,i,a,t):Z(s.points,function(l){$le(l,i,a,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new dn(i[0],i[1],a[0]-i[0],a[1]-i[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,c=s.interiors;if(Rb(l,t[0],t[1])){for(var u=0;u<(c?c.length:0);u++)if(Rb(c[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new dn(t,r,i,a),c=o.calculateTransform(l),u=this.geometries,d=0;d<u.length;d++){var h=u[d];h.type==="polygon"?(Z6(h.exterior,c),Z(h.interiors,function(f){Z6(f,c)})):Z(h.points,function(f){Z6(f,c)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e}(_Ee),Dht=function(n){_e(e,n);function e(t,r){var i=n.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=Uj(kht),o=t;o&&!o.isGeoSVGGraphicRoot;)yg(a,o.getLocalTransform(),a),o=o.parent;return wT(a,a),Zo(i,i,a),i},e}(_Ee);function Iht(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return Z(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=EEe(s,o,t);break;case"Polygon":Q6(s,o,t);break;case"MultiLineString":Q6(s,o,t);break;case"MultiPolygon":Z(s,function(l,c){return Q6(l,o[c],t)})}}),e.UTF8Encoding=!1,e}function Q6(n,e,t){for(var r=0;r<n.length;r++)n[r]=EEe(n[r],e[r],t)}function EEe(n,e,t){for(var r=[],i=e[0],a=e[1],o=0;o<n.length;o+=2){var s=n.charCodeAt(o)-64,l=n.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/t,l/t])}return r}function Mht(n,e){return n=Iht(n),Be(vr(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,i=t.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new Ble(o[0],o.slice(1)));break;case"MultiPolygon":Z(i.coordinates,function(l){l[0]&&a.push(new Ble(l[0],l.slice(1)))});break;case"LineString":a.push(new Ule([i.coordinates]));break;case"MultiLineString":a.push(new Ule(i.coordinates))}var s=new TEe(r[e||"name"],a,r.cp);return s.properties=r,s})}var GD=Kn();function AEe(n,e){var t=Be(e,function(r){return n.scale.parse(r)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function Pht(n){var e=n.getLabelModel().get("customValues");if(e){var t=PT(n),r=n.scale.getExtent(),i=AEe(n,e),a=vr(i,function(o){return o>=r[0]&&o<=r[1]});return{labels:Be(a,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:n.scale.getLabel(s),tickValue:o}})}}return n.type==="category"?Rht(n):Lht(n)}function Nht(n,e){var t=n.getTickModel().get("customValues");if(t){var r=n.scale.getExtent(),i=AEe(n,t);return{ticks:vr(i,function(a){return a>=r[0]&&a<=r[1]})}}return n.type==="category"?Oht(n,e):{ticks:Be(n.scale.getTicks(),function(a){return a.value})}}function Rht(n){var e=n.getLabelModel(),t=kEe(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function kEe(n,e){var t=CEe(n,"labels"),r=$Y(e),i=DEe(t,r);if(i)return i;var a,o;return kt(r)?a=PEe(n,r):(o=r==="auto"?jht(n):r,a=MEe(n,o)),IEe(t,r,{labels:a,labelCategoryInterval:o})}function Oht(n,e){var t=CEe(n,"ticks"),r=$Y(e),i=DEe(t,r);if(i)return i;var a,o;if((!e.get("show")||n.scale.isBlank())&&(a=[]),kt(r))a=PEe(n,r,!0);else if(r==="auto"){var s=kEe(n,n.getLabelModel());o=s.labelCategoryInterval,a=Be(s.labels,function(l){return l.tickValue})}else o=r,a=MEe(n,o,!0);return IEe(t,r,{ticks:a,tickCategoryInterval:o})}function Lht(n){var e=n.scale.getTicks(),t=PT(n);return{labels:Be(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function CEe(n,e){return GD(n)[e]||(GD(n)[e]=[])}function DEe(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function IEe(n,e,t){return n.push({key:e,value:t}),t}function jht(n){var e=GD(n).autoInterval;return e??(GD(n).autoInterval=n.calculateCategoryInterval())}function Fht(n){var e=$ht(n),t=PT(n),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],c=n.dataToCoord(l+1)-n.dataToCoord(l),u=Math.abs(c*Math.cos(r)),d=Math.abs(c*Math.sin(r)),h=0,f=0;l<=a[1];l+=s){var m=0,v=0,y=KI(t({value:l}),e.font,"center","top");m=y.width*1.3,v=y.height*1.3,h=Math.max(h,m,7),f=Math.max(f,v,7)}var w=h/u,S=f/d;isNaN(w)&&(w=1/0),isNaN(S)&&(S=1/0);var T=Math.max(0,Math.floor(Math.min(w,S))),C=GD(n.model),k=n.getExtent(),A=C.lastAutoInterval,D=C.lastTickCount;return A!=null&&D!=null&&Math.abs(A-T)<=1&&Math.abs(D-o)<=1&&A>T&&C.axisExtent0===k[0]&&C.axisExtent1===k[1]?T=A:(C.lastTickCount=o,C.lastAutoInterval=T,C.axisExtent0=k[0],C.axisExtent1=k[1]),T}function $ht(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function MEe(n,e,t){var r=PT(n),i=n.scale,a=i.getExtent(),o=n.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=a[0],u=i.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var d=SEe(n),h=o.get("showMinLabel")||d,f=o.get("showMaxLabel")||d;h&&c!==a[0]&&v(a[0]);for(var m=c;m<=a[1];m+=l)v(m);f&&m-l!==a[1]&&v(a[1]);function v(y){var w={value:y};s.push(t?y:{formattedLabel:r(w),rawLabel:i.getLabel(w),tickValue:y})}return s}function PEe(n,e,t){var r=n.scale,i=PT(n),a=[];return Z(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;e(o.value,s)&&a.push(t?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var Vle=[0,1],fh=function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return N_e(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),zle(r,i.count())),br(e,Vle,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),zle(r,i.count()));var a=br(e,r,Vle,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=Nht(this,t),i=r.ticks,a=Be(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return Bht(this,a,o,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=Be(r,function(a){return Be(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},n.prototype.getViewLabels=function(){return Pht(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(){return Fht(this)},n}();function zle(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function Bht(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[1],tickValue:e[0].tickValue};else{var l=e[i-1].tickValue-e[0].tickValue,c=(e[i-1].coord-e[0].coord)/l;Z(e,function(f){f.coord-=c/2});var u=n.scale.getExtent();s=1+u[1]-e[i-1].tickValue,o={coord:e[i-1].coord+c*s,tickValue:u[1]+1},e.push(o)}var d=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(f,m){return f=na(f),m=na(m),d?f>m:f<m}}var KA=Math.PI*2,vb=$f.CMD,Uht=["top","right","bottom","left"];function Vht(n,e,t,r,i){var a=t.width,o=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),i.set(1,0);break}}function zht(n,e,t,r,i,a,o,s,l){o-=n,s-=e;var c=Math.sqrt(o*o+s*s);o/=c,s/=c;var u=o*t+n,d=s*t+e;if(Math.abs(r-i)%KA<1e-4)return l[0]=u,l[1]=d,c-t;if(a){var h=r;r=jc(i),i=jc(h)}else r=jc(r),i=jc(i);r>i&&(i+=KA);var f=Math.atan2(s,o);if(f<0&&(f+=KA),f>=r&&f<=i||f+KA>=r&&f+KA<=i)return l[0]=u,l[1]=d,c-t;var m=t*Math.cos(r)+n,v=t*Math.sin(r)+e,y=t*Math.cos(i)+n,w=t*Math.sin(i)+e,S=(m-o)*(m-o)+(v-s)*(v-s),T=(y-o)*(y-o)+(w-s)*(w-s);return S<T?(l[0]=m,l[1]=v,Math.sqrt(S)):(l[0]=y,l[1]=w,Math.sqrt(T))}function N2(n,e,t,r,i,a,o,s){var l=i-n,c=a-e,u=t-n,d=r-e,h=Math.sqrt(u*u+d*d);u/=h,d/=h;var f=l*u+c*d,m=f/h;s&&(m=Math.min(Math.max(m,0),1)),m*=h;var v=o[0]=n+m*u,y=o[1]=e+m*d;return Math.sqrt((v-i)*(v-i)+(y-a)*(y-a))}function NEe(n,e,t,r,i,a,o){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var s=n+t,l=e+r,c=o[0]=Math.min(Math.max(i,n),s),u=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((c-i)*(c-i)+(u-a)*(u-a))}var Bd=[];function Hht(n,e,t){var r=NEe(e.x,e.y,e.width,e.height,n.x,n.y,Bd);return t.set(Bd[0],Bd[1]),r}function Ght(n,e,t){for(var r=0,i=0,a=0,o=0,s,l,c=1/0,u=e.data,d=n.x,h=n.y,f=0;f<u.length;){var m=u[f++];f===1&&(r=u[f],i=u[f+1],a=r,o=i);var v=c;switch(m){case vb.M:a=u[f++],o=u[f++],r=a,i=o;break;case vb.L:v=N2(r,i,u[f],u[f+1],d,h,Bd,!0),r=u[f++],i=u[f++];break;case vb.C:v=g_e(r,i,u[f++],u[f++],u[f++],u[f++],u[f],u[f+1],d,h,Bd),r=u[f++],i=u[f++];break;case vb.Q:v=v_e(r,i,u[f++],u[f++],u[f],u[f+1],d,h,Bd),r=u[f++],i=u[f++];break;case vb.A:var y=u[f++],w=u[f++],S=u[f++],T=u[f++],C=u[f++],k=u[f++];f+=1;var A=!!(1-u[f++]);s=Math.cos(C)*S+y,l=Math.sin(C)*T+w,f<=1&&(a=s,o=l);var D=(d-y)*T/S+y;v=zht(y,w,T,C,C+k,A,D,h,Bd),r=Math.cos(C+k)*S+y,i=Math.sin(C+k)*T+w;break;case vb.R:a=r=u[f++],o=i=u[f++];var P=u[f++],N=u[f++];v=NEe(a,o,P,N,d,h,Bd);break;case vb.Z:v=N2(r,i,a,o,d,h,Bd,!0),r=a,i=o;break}v<c&&(c=v,t.set(Bd[0],Bd[1]))}return c}var Jd=new ln,ti=new ln,ha=new ln,_f=new ln,pf=new ln;function Hle(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||Uht,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,c=i.anchor,u=n.getComputedTransform(),d=u&&wT([],u),h=e.get("length2")||0;c&&ha.copy(c);for(var f=0;f<o.length;f++){var m=o[f];Vht(m,0,s,Jd,_f),ln.scaleAndAdd(ti,Jd,_f,h),ti.transform(d);var v=n.getBoundingRect(),y=c?c.distance(ti):n instanceof Cn?Ght(ti,n.path,ha):Hht(ti,v,ha);y<l&&(l=y,ti.transform(u),ha.transform(u),ha.toArray(a[0]),ti.toArray(a[1]),Jd.toArray(a[2]))}REe(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var R2=[],rl=new ln;function REe(n,e){if(e<=180&&e>0){e=e/180*Math.PI,Jd.fromArray(n[0]),ti.fromArray(n[1]),ha.fromArray(n[2]),ln.sub(_f,Jd,ti),ln.sub(pf,ha,ti);var t=_f.len(),r=pf.len();if(!(t<.001||r<.001)){_f.scale(1/t),pf.scale(1/r);var i=_f.dot(pf),a=Math.cos(e);if(a<i){var o=N2(ti.x,ti.y,ha.x,ha.y,Jd.x,Jd.y,R2,!1);rl.fromArray(R2),rl.scaleAndAdd(pf,o/Math.tan(Math.PI-e));var s=ha.x!==ti.x?(rl.x-ti.x)/(ha.x-ti.x):(rl.y-ti.y)/(ha.y-ti.y);if(isNaN(s))return;s<0?ln.copy(rl,ti):s>1&&ln.copy(rl,ha),rl.toArray(n[1])}}}}function Wht(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Jd.fromArray(n[0]),ti.fromArray(n[1]),ha.fromArray(n[2]),ln.sub(_f,ti,Jd),ln.sub(pf,ha,ti);var r=_f.len(),i=pf.len();if(!(r<.001||i<.001)){_f.scale(1/r),pf.scale(1/i);var a=_f.dot(e),o=Math.cos(t);if(a<o){var s=N2(ti.x,ti.y,ha.x,ha.y,Jd.x,Jd.y,R2,!1);rl.fromArray(R2);var l=Math.PI/2,c=Math.acos(pf.dot(e)),u=l+c-t;if(u>=l)ln.copy(rl,ha);else{rl.scaleAndAdd(pf,s/Math.tan(Math.PI/2-u));var d=ha.x!==ti.x?(rl.x-ti.x)/(ha.x-ti.x):(rl.y-ti.y)/(ha.y-ti.y);if(isNaN(d))return;d<0?ln.copy(rl,ti):d>1&&ln.copy(rl,ha)}rl.toArray(n[1])}}}}function J6(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?n.useStyle(s):a.style=s}function qht(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=Lv(r[0],r[1]),a=Lv(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*t,s=mR([],r[1],r[0],o/i),l=mR([],r[1],r[2],o/a),c=mR([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)n.lineTo(r[u][0],r[u][1])}function BY(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<LD.length;l++){var c=LD[l],u=e[c],d=c==="normal";if(u){var h=u.get("show"),f=d?s:Wt(i.states[c]&&i.states[c].ignore,s);if(f||!Wt(h,o)){var m=d?r:r&&r.states[c];m&&(m.ignore=!0),r&&J6(r,!0,c,u);continue}r||(r=new yl,n.setTextGuideLine(r),!d&&(s||!o)&&J6(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),J6(r,!1,c,u)}}if(r){Dt(r.style,t),r.style.fill=null;var v=a.get("showAbove"),y=n.textGuideLineConfig=n.textGuideLineConfig||{};y.showAbove=v||!1,r.buildPath=qht}}function UY(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<gl.length;r++){var i=gl[r];t[i]=n.getModel([i,e])}return t}function OEe(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,c=o.clone();c.applyTransform(a),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new y2(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:c,localRect:o,obb:u,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function LEe(n,e,t,r,i,a){var o=n.length;if(o<2)return;n.sort(function(A,D){return A.rect[e]-D.rect[e]});for(var s=0,l,c=!1,u=0;u<o;u++){var d=n[u],h=d.rect;l=h[e]-s,l<0&&(h[e]-=l,d.label[e]-=l,c=!0),s=h[e]+h[t]}var f=n[0],m=n[o-1],v,y;w(),v<0&&C(-v,.8),y<0&&C(y,.8),w(),S(v,y,1),S(y,v,-1),w(),v<0&&k(-v),y<0&&k(y);function w(){v=f.rect[e]-r,y=i-m.rect[e]-m.rect[t]}function S(A,D,P){if(A<0){var N=Math.min(D,-A);if(N>0){T(N*P,0,o);var R=N+A;R<0&&C(-R*P,1)}else C(-A*P,1)}}function T(A,D,P){A!==0&&(c=!0);for(var N=D;N<P;N++){var R=n[N],L=R.rect;L[e]+=A,R.label[e]+=A}}function C(A,D){for(var P=[],N=0,R=1;R<o;R++){var L=n[R-1].rect,B=Math.max(n[R].rect[e]-L[e]-L[t],0);P.push(B),N+=B}if(N){var $=Math.min(Math.abs(A)/N,D);if(A>0)for(var R=0;R<o-1;R++){var G=P[R]*$;T(G,0,R+1)}else for(var R=o-1;R>0;R--){var G=P[R-1]*$;T(-G,R,o)}}}function k(A){var D=A<0?-1:1;A=Math.abs(A);for(var P=Math.ceil(A/(o-1)),N=0;N<o-1;N++)if(D>0?T(P,0,N+1):T(-P,o-N-1,o),A-=P,A<=0)return}return c}function Yht(n,e,t,r){return LEe(n,"x","width",e,t)}function jEe(n,e,t,r){return LEe(n,"y","height",e,t)}function FEe(n){var e=[];n.sort(function(v,y){return y.priority-v.priority});var t=new dn(0,0,0,0);function r(v){if(!v.ignore){var y=v.ensureState("emphasis");y.ignore==null&&(y.ignore=!1)}v.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],o=a.axisAligned,s=a.localRect,l=a.transform,c=a.label,u=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=a.obb,h=!1,f=0;f<e.length;f++){var m=e[f];if(t.intersect(m.rect)){if(o&&m.axisAligned){h=!0;break}if(m.obb||(m.obb=new y2(m.localRect,m.transform)),d||(d=new y2(s,l)),d.intersect(m.obb)){h=!0;break}}}h?(r(c),u&&r(u)):(c.attr("ignore",a.defaultAttr.ignore),u&&u.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function Kht(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function Xht(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:Kht(r&&r.shape.points)}}var Gle=["align","verticalAlign","width","height","fontSize"],Js=new og,eU=Kn(),Zht=Kn();function SN(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var _N=["x","y","rotation"],Qht=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},c=i.getComputedTransform(),u=i.getBoundingRect().plain();dn.applyTransform(u,u,c),c?Js.setLocalTransform(c):(Js.x=Js.y=Js.rotation=Js.originX=Js.originY=0,Js.scaleX=Js.scaleY=1),Js.rotation=jc(Js.rotation);var d=i.__hostTarget,h;if(d){h=d.getBoundingRect().plain();var f=d.getComputedTransform();dn.applyTransform(h,h,f)}var m=h&&d.getTextGuideLine();this._labelList.push({label:i,labelLine:m,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:u,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:m&&m.ignore,x:Js.x,y:Js.y,scaleX:Js.scaleX,scaleY:Js.scaleY,rotation:Js.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(kt(i)||Ln(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=Ut(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(T,C){return function(){Hle(T,C)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,c=o.defaultAttr,u=void 0;kt(o.layoutOption)?u=o.layoutOption(Xht(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var d=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*d:c.attachedRot,offset:[u.dx||0,u.dy||0]});var h=!1;if(u.x!=null?(s.x=tt(u.x,t),s.setStyle("x",0),h=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=tt(u.y,r),s.setStyle("y",0),h=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:u.labelLinePoints}),h=!1)}var m=eU(s);m.needsUpdateLabelLine=h,s.rotation=u.rotate!=null?u.rotate*d:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var v=0;v<Gle.length;v++){var y=Gle[v];s.setStyle(y,u[y]!=null?u[y]:c.style[y])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var w=o.seriesModel;if(o.dataIndex!=null){var S=o.seriesModel.getData(o.dataType);w=S.getItemModel(o.dataIndex)}s.on("drag",i(l,w.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=OEe(this._labelList),a=vr(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=vr(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});Yht(a,0,t),jEe(o,0,r);var s=vr(i,function(l){return l.layoutOption.hideOverlap});FEe(s)},n.prototype.processLabelsOverall=function(){var e=this;Z(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=eU(l).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=Ut(e),a=i.dataIndex;if(r&&a!=null){var o=t.getData(i.dataType),s=o.getItemModel(a),l={},c=o.getItemVisual(a,"style");if(c){var u=o.getVisual("drawType");l.stroke=c[u]}var d=s.getModel("labelLine");BY(e,UY(s),l),Hle(e,d)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Q_(e))){var a=eU(r),o=a.oldLayout,s=Ut(e),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},u=t.getData(s.dataType);if(o){r.attr(o);var h=e.prevStates;h&&(mn(h,"select")>=0&&r.attr(a.oldLayoutSelect),mn(h,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),ar(r,c,t,l)}else if(r.attr(c),!TT(r).valueAnimation){var d=Wt(r.style.opacity,1);r.style.opacity=0,xi(r,{style:{opacity:d}},t,l)}if(a.oldLayout=c,r.states.select){var f=a.oldLayoutSelect={};SN(f,c,_N),SN(f,r.states.select,_N)}if(r.states.emphasis){var m=a.oldLayoutEmphasis={};SN(m,c,_N),SN(m,r.states.emphasis,_N)}C1e(r,l,u,t,t)}if(i&&!i.ignore&&!i.invisible){var a=Zht(i),o=a.oldLayout,v={points:i.shape.points};o?(i.attr({shape:o}),ar(i,{shape:v},t)):(i.setShape(v),i.style.strokePercent=0,xi(i,{style:{strokePercent:1}},t)),a.oldLayout=v}},n}(),tU=Kn();function Jht(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=tU(t).labelManager;i||(i=tU(t).labelManager=new Qht),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=tU(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var nU=Math.sin,rU=Math.cos,$Ee=Math.PI,yb=Math.PI*2,eft=180/$Ee,BEe=function(){function n(){}return n.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},n.prototype.moveTo=function(e,t){this._add("M",e,t)},n.prototype.lineTo=function(e,t){this._add("L",e,t)},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){this._add("C",e,t,r,i,a,o)},n.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},n.prototype.arc=function(e,t,r,i,a,o){this.ellipse(e,t,r,r,0,i,a,o)},n.prototype.ellipse=function(e,t,r,i,a,o,s,l){var c=s-o,u=!l,d=Math.abs(c),h=Uv(d-yb)||(u?c>=yb:-c>=yb),f=c>0?c%yb:c%yb+yb,m=!1;h?m=!0:Uv(d)?m=!1:m=f>=$Ee==!!u;var v=e+r*rU(o),y=t+i*nU(o);this._start&&this._add("M",v,y);var w=Math.round(a*eft);if(h){var S=1/this._p,T=(u?1:-1)*(yb-S);this._add("A",r,i,w,1,+u,e+r*rU(o+T),t+i*nU(o+T)),S>.01&&this._add("A",r,i,w,0,+u,v,y)}else{var C=e+r*rU(s),k=t+i*nU(s);this._add("A",r,i,w,+m,+u,C,k)}},n.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(e,t,r,i,a,o,s,l,c){for(var u=[],d=this._p,h=1;h<arguments.length;h++){var f=arguments[h];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*d)/d)}this._d.push(e+u.join(" ")),this._start=e==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),VY="none",tft=Math.round;function nft(n){var e=n.fill;return e!=null&&e!==VY}function rft(n){var e=n.stroke;return e!=null&&e!==VY}var XH=["lineCap","miterLimit","lineJoin"],ift=Be(XH,function(n){return"stroke-"+n.toLowerCase()});function aft(n,e,t,r){var i=e.opacity==null?1:e.opacity;if(t instanceof Ro){n("opacity",i);return}if(nft(e)){var a=ND(e.fill);n("fill",a.color);var o=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;o<1&&n("fill-opacity",o)}else n("fill",VY);if(rft(e)){var s=ND(e.stroke);n("stroke",s.color);var l=e.strokeNoScale?t.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*s.opacity*i:s.opacity*i,d=e.strokeFirst;if(c!==1&&n("stroke-width",c),d&&n("paint-order",d?"stroke":"fill"),u<1&&n("stroke-opacity",u),e.lineDash){var h=DY(t),f=h[0],m=h[1];f&&(m=tft(m||0),n("stroke-dasharray",f.join(",")),(m||r)&&n("stroke-dashoffset",m))}for(var v=0;v<XH.length;v++){var y=XH[v];if(e[y]!==m2[y]){var w=e[y]||m2[y];w&&n(ift[v],w)}}}}var UEe="http://www.w3.org/2000/svg",VEe="http://www.w3.org/1999/xlink",oft="http://www.w3.org/2000/xmlns/",sft="http://www.w3.org/XML/1998/namespace",Wle="ecmeta_";function zEe(n){return document.createElementNS(UEe,n)}function lo(n,e,t,r,i){return{tag:n,attrs:t||{},children:r,text:i,key:e}}function lft(n,e){var t=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),t.push(a))}return"<"+n+" "+t.join(" ")+">"}function cft(n){return"</"+n+">"}function zY(n,e){e=e||{};var t=e.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return lft(o,s)+(o!=="style"?al(l):l||"")+(a?""+t+Be(a,function(c){return r(c)}).join(t)+t:"")+cft(o)}return r(n)}function uft(n,e,t){t=t||{};var r=t.newline?`
`:"",i=" {"+r,a=r+"}",o=Be(Ln(n),function(l){return l+i+Be(Ln(n[l]),function(c){return c+":"+n[l][c]+";"}).join(r)+a}).join(r),s=Be(Ln(e),function(l){return"@keyframes "+l+i+Be(Ln(e[l]),function(c){return c+i+Be(Ln(e[l][c]),function(u){var d=e[l][c][u];return u==="d"&&(d='path("'+d+'")'),u+":"+d+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function ZH(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function qle(n,e,t,r){return lo("svg","root",{width:n,height:e,xmlns:UEe,"xmlns:xlink":VEe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+n+" "+e:!1},t)}var dft=0;function HEe(){return dft++}var Yle={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Ab="transform-origin";function hft(n,e,t){var r=Me({},n.shape);Me(r,e),n.buildPath(t,r);var i=new BEe;return i.reset(T_e(n)),t.rebuildPath(i,1),i.generateStr(),i.getStr()}function fft(n,e){var t=e.originX,r=e.originY;(t||r)&&(n[Ab]=t+"px "+r+"px")}var pft={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function GEe(n,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=n,t}function gft(n,e,t){var r=n.shape.paths,i={},a,o;if(Z(r,function(l){var c=ZH(t.zrId);c.animation=!0,vF(l,{},c,!0);var u=c.cssAnims,d=c.cssNodes,h=Ln(u),f=h.length;if(f){o=h[f-1];var m=u[o];for(var v in m){var y=m[v];i[v]=i[v]||{d:""},i[v].d+=y.d||""}for(var w in d){var S=d[w].animation;S.indexOf(o)>=0&&(a=S)}}}),!!a){e.d=!1;var s=GEe(i,t);return a.replace(o,s)}}function Kle(n){return st(n)?Yle[n]?"cubic-bezier("+Yle[n]+")":Yq(n)?n:"":""}function vF(n,e,t,r){var i=n.animators,a=i.length,o=[];if(n instanceof cY){var s=gft(n,e,t);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},c=0;c<a;c++){var u=i[c],d=[u.getMaxTime()/1e3+"s"],h=Kle(u.getClip().easing),f=u.getDelay();h?d.push(h):d.push("linear"),f&&d.push(f/1e3+"s"),u.getLoop()&&d.push("infinite");var m=d.join(" ");l[m]=l[m]||[m,[]],l[m][1].push(u)}function v(S){var T=S[1],C=T.length,k={},A={},D={},P="animation-timing-function";function N(ve,de,me){for(var xe=ve.getTracks(),pe=ve.getMaxTime(),$e=0;$e<xe.length;$e++){var We=xe[$e];if(We.needsAnimate()){var ct=We.keyframes,xt=We.propName;if(me&&(xt=me(xt)),xt)for(var At=0;At<ct.length;At++){var pn=ct[At],Yt=Math.round(pn.time/pe*100)+"%",Rn=Kle(pn.easing),vn=pn.rawValue;(st(vn)||rr(vn))&&(de[Yt]=de[Yt]||{},de[Yt][xt]=pn.rawValue,Rn&&(de[Yt][P]=Rn))}}}}for(var R=0;R<C;R++){var L=T[R],B=L.targetName;B?B==="shape"&&N(L,A):!r&&N(L,k)}for(var $ in k){var G={};D_e(G,n),Me(G,k[$]);var W=E_e(G),K=k[$][P];D[$]=W?{transform:W}:{},fft(D[$],G),K&&(D[$][P]=K)}var X,te=!0;for(var $ in A){D[$]=D[$]||{};var ie=!X,K=A[$][P];ie&&(X=new $f);var z=X.len();X.reset(),D[$].d=hft(n,A[$],X);var se=X.len();if(!ie&&z!==se){te=!1;break}K&&(D[$][P]=K)}if(!te)for(var $ in D)delete D[$].d;if(!r)for(var R=0;R<C;R++){var L=T[R],B=L.targetName;B==="style"&&N(L,D,function(xe){return pft[xe]})}for(var ce=Ln(D),ee=!0,be,R=1;R<ce.length;R++){var fe=ce[R-1],De=ce[R];if(D[fe][Ab]!==D[De][Ab]){ee=!1;break}be=D[fe][Ab]}if(ee&&be){for(var $ in D)D[$][Ab]&&delete D[$][Ab];e[Ab]=be}if(vr(ce,function(ve){return Ln(D[ve]).length>0}).length){var dt=GEe(D,t);return dt+" "+S[0]+" both"}}for(var y in l){var s=v(l[y]);s&&o.push(s)}if(o.length){var w=t.zrId+"-cls-"+HEe();t.cssNodes["."+w]={animation:o.join(",")},e.class=w}}function mft(n,e,t){if(!n.ignore)if(n.isSilent()){var r={"pointer-events":"none"};Xle(r,e,t)}else{var i=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},a=i.fill;if(!a){var o=n.style&&n.style.fill,s=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&s||o;l&&(a=cH(l))}var c=i.lineWidth;if(c){var u=!i.strokeNoScale&&n.transform?n.transform[0]:1;c=c/u}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),c&&(r["stroke-width"]=c),Xle(r,e,t)}}function Xle(n,e,t,r){var i=JSON.stringify(n),a=t.cssStyleCache[i];a||(a=t.zrId+"-cls-"+HEe(),t.cssStyleCache[i]=a,t.cssNodes["."+a+":hover"]=n),e.class=e.class?e.class+" "+a:a}var WD=Math.round;function WEe(n){return n&&st(n.src)}function qEe(n){return n&&kt(n.toDataURL)}function HY(n,e,t,r){aft(function(i,a){var o=i==="fill"||i==="stroke";o&&__e(a)?KEe(e,n,i,r):o&&Kq(a)?XEe(t,n,i,r):n[i]=a,o&&r.ssr&&a==="none"&&(n["pointer-events"]="visible")},e,t,!1),_ft(t,n,r)}function GY(n,e){var t=pot(e);t&&(t.each(function(r,i){r!=null&&(n[(Wle+i).toLowerCase()]=r+"")}),e.isSilent()&&(n[Wle+"silent"]="true"))}function Zle(n){return Uv(n[0]-1)&&Uv(n[1])&&Uv(n[2])&&Uv(n[3]-1)}function vft(n){return Uv(n[4])&&Uv(n[5])}function WY(n,e,t){if(e&&!(vft(e)&&Zle(e))){var r=1e4;n.transform=Zle(e)?"translate("+WD(e[4]*r)/r+" "+WD(e[5]*r)/r+")":jat(e)}}function Qle(n,e,t){for(var r=n.points,i=[],a=0;a<r.length;a++)i.push(WD(r[a][0]*t)/t),i.push(WD(r[a][1]*t)/t);e.points=i.join(" ")}function Jle(n){return!n.smooth}function yft(n){var e=Be(n,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,i){for(var a=0;a<e.length;a++){var o=e[a],s=t[o[0]];s!=null&&(r[o[1]]=WD(s*i)/i)}}}var bft={circle:[yft(["cx","cy","r"])],polyline:[Qle,Jle],polygon:[Qle,Jle]};function wft(n){for(var e=n.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function YEe(n,e){var t=n.style,r=n.shape,i=bft[n.type],a={},o=e.animation,s="path",l=n.style.strokePercent,c=e.compress&&T_e(n)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&wft(n))&&!(l<1)){s=n.type;var u=Math.pow(10,c);i[0](r,a,u)}else{var d=!n.path||n.shapeChanged();n.path||n.createPathProxy();var h=n.path;d&&(h.beginPath(),n.buildPath(h,n.shape),n.pathUpdated());var f=h.getVersion(),m=n,v=m.__svgPathBuilder;(m.__svgPathVersion!==f||!v||l!==m.__svgPathStrokePercent)&&(v||(v=m.__svgPathBuilder=new BEe),v.reset(c),h.rebuildPath(v,l),v.generateStr(),m.__svgPathVersion=f,m.__svgPathStrokePercent=l),a.d=v.getStr()}return WY(a,n.transform),HY(a,t,n,e),GY(a,n),e.animation&&vF(n,a,e),e.emphasis&&mft(n,a,e),lo(s,n.id+"",a)}function xft(n,e){var t=n.style,r=t.image;if(r&&!st(r)&&(WEe(r)?r=r.src:qEe(r)&&(r=r.toDataURL())),!!r){var i=t.x||0,a=t.y||0,o=t.width,s=t.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),WY(l,n.transform),HY(l,t,n,e),GY(l,n),e.animation&&vF(n,l,e),lo("image",n.id+"",l)}}function Sft(n,e){var t=n.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var i=t.font||ly,a=t.x||0,o=$at(t.y||0,zj(i),t.textBaseline),s=Fat[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(t1e(t)){var c="",u=t.fontStyle,d=e1e(t.fontSize);if(!parseFloat(d))return;var h=t.fontFamily||e_e,f=t.fontWeight;c+="font-size:"+d+";font-family:"+h+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),f&&f!=="normal"&&(c+="font-weight:"+f+";"),l.style=c}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),WY(l,n.transform),HY(l,t,n,e),GY(l,n),e.animation&&vF(n,l,e),lo("text",n.id+"",l,void 0,r)}}function ece(n,e){if(n instanceof Cn)return YEe(n,e);if(n instanceof Ro)return xft(n,e);if(n instanceof $1)return Sft(n,e)}function _ft(n,e,t){var r=n.style;if(Bat(r)){var i=Uat(n),a=t.shadowCache,o=a[i];if(!o){var s=n.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,d=r.shadowOffsetY||0,h=r.shadowBlur,f=ND(r.shadowColor),m=f.opacity,v=f.color,y=h/2/l,w=h/2/c,S=y+" "+w;o=t.zrId+"-s"+t.shadowIdx++,t.defs[o]=lo("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[lo("feDropShadow","",{dx:u/l,dy:d/c,stdDeviation:S,"flood-color":v,"flood-opacity":m})]),a[i]=o}e.filter=Vj(o)}}function KEe(n,e,t,r){var i=n[t],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(x_e(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(S_e(i))a="radialGradient",o.cx=Wt(i.x,.5),o.cy=Wt(i.y,.5),o.r=Wt(i.r,.5);else return;for(var s=i.colorStops,l=[],c=0,u=s.length;c<u;++c){var d=uH(s[c].offset)*100+"%",h=s[c].color,f=ND(h),m=f.color,v=f.opacity,y={offset:d};y["stop-color"]=m,v<1&&(y["stop-opacity"]=v),l.push(lo("stop",c+"",y))}var w=lo(a,"",o,l),S=zY(w),T=r.gradientCache,C=T[S];C||(C=r.zrId+"-g"+r.gradientIdx++,T[S]=C,o.id=C,r.defs[C]=lo(a,C,o,l)),e[t]=Vj(C)}function XEe(n,e,t,r){var i=n.style[t],a=n.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",d;if(w_e(i)){var h=i.imageWidth,f=i.imageHeight,m=void 0,v=i.image;if(st(v)?m=v:WEe(v)?m=v.src:qEe(v)&&(m=v.toDataURL()),typeof Image>"u"){var y="Image width/height must been given explictly in svg-ssr renderer.";pl(h,y),pl(f,y)}else if(h==null||f==null){var w=function(R,L){if(R){var B=R.elm,$=h||L.width,G=f||L.height;R.tag==="pattern"&&(c?(G=1,$/=a.width):u&&($=1,G/=a.height)),R.attrs.width=$,R.attrs.height=G,B&&(B.setAttribute("width",$),B.setAttribute("height",G))}},S=tY(m,null,n,function(R){l||w(A,R),w(d,R)});S&&S.width&&S.height&&(h=h||S.width,f=f||S.height)}d=lo("image","img",{href:m,width:h,height:f}),o.width=h,o.height=f}else i.svgElement&&(d=Nt(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(d){var T,C;l?T=C=1:c?(C=1,T=o.width/a.width):u?(T=1,C=o.height/a.height):o.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(o.width=T),C!=null&&!isNaN(C)&&(o.height=C);var k=E_e(i);k&&(o.patternTransform=k);var A=lo("pattern","",o,[d]),D=zY(A),P=r.patternCache,N=P[D];N||(N=r.zrId+"-p"+r.patternIdx++,P[D]=N,o.id=N,A=r.defs[N]=lo("pattern",N,o,[d])),e[t]=Vj(N)}}function Tft(n,e,t){var r=t.clipPathCache,i=t.defs,a=r[n.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var o={id:a};r[n.id]=a,i[a]=lo("clipPath",a,o,[YEe(n,t)])}e["clip-path"]=Vj(a)}function tce(n){return document.createTextNode(n)}function Ob(n,e,t){n.insertBefore(e,t)}function nce(n,e){n.removeChild(e)}function rce(n,e){n.appendChild(e)}function ZEe(n){return n.parentNode}function QEe(n){return n.nextSibling}function iU(n,e){n.textContent=e}var ice=58,Eft=120,Aft=lo("","");function QH(n){return n===void 0}function hf(n){return n!==void 0}function kft(n,e,t){for(var r={},i=e;i<=t;++i){var a=n[i].key;a!==void 0&&(r[a]=i)}return r}function Rk(n,e){var t=n.key===e.key,r=n.tag===e.tag;return r&&t}function qD(n){var e,t=n.children,r=n.tag;if(hf(r)){var i=n.elm=zEe(r);if(qY(Aft,n),Fe(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&rce(i,qD(a))}else hf(n.text)&&!It(n.text)&&rce(i,tce(n.text))}else n.elm=tce(n.text);return n.elm}function JEe(n,e,t,r,i){for(;r<=i;++r){var a=t[r];a!=null&&Ob(n,qD(a),e)}}function O2(n,e,t,r){for(;t<=r;++t){var i=e[t];if(i!=null)if(hf(i.tag)){var a=ZEe(i.elm);nce(a,i.elm)}else nce(n,i.elm)}}function qY(n,e){var t,r=e.elm,i=n&&n.attrs||{},a=e.attrs||{};if(i!==a){for(t in a){var o=a[t],s=i[t];s!==o&&(o===!0?r.setAttribute(t,""):o===!1?r.removeAttribute(t):t==="style"?r.style.cssText=o:t.charCodeAt(0)!==Eft?r.setAttribute(t,o):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(oft,t,o):t.charCodeAt(3)===ice?r.setAttributeNS(sft,t,o):t.charCodeAt(5)===ice?r.setAttributeNS(VEe,t,o):r.setAttribute(t,o))}for(t in i)t in a||r.removeAttribute(t)}}function Cft(n,e,t){for(var r=0,i=0,a=e.length-1,o=e[0],s=e[a],l=t.length-1,c=t[0],u=t[l],d,h,f,m;r<=a&&i<=l;)o==null?o=e[++r]:s==null?s=e[--a]:c==null?c=t[++i]:u==null?u=t[--l]:Rk(o,c)?(S_(o,c),o=e[++r],c=t[++i]):Rk(s,u)?(S_(s,u),s=e[--a],u=t[--l]):Rk(o,u)?(S_(o,u),Ob(n,o.elm,QEe(s.elm)),o=e[++r],u=t[--l]):Rk(s,c)?(S_(s,c),Ob(n,s.elm,o.elm),s=e[--a],c=t[++i]):(QH(d)&&(d=kft(e,r,a)),h=d[c.key],QH(h)?Ob(n,qD(c),o.elm):(f=e[h],f.tag!==c.tag?Ob(n,qD(c),o.elm):(S_(f,c),e[h]=void 0,Ob(n,f.elm,o.elm))),c=t[++i]);(r<=a||i<=l)&&(r>a?(m=t[l+1]==null?null:t[l+1].elm,JEe(n,m,t,i,l)):O2(n,e,r,a))}function S_(n,e){var t=e.elm=n.elm,r=n.children,i=e.children;n!==e&&(qY(n,e),QH(e.text)?hf(r)&&hf(i)?r!==i&&Cft(t,r,i):hf(i)?(hf(n.text)&&iU(t,""),JEe(t,null,i,0,i.length-1)):hf(r)?O2(t,r,0,r.length-1):hf(n.text)&&iU(t,""):n.text!==e.text&&(hf(r)&&O2(t,r,0,r.length-1),iU(t,e.text)))}function Dft(n,e){if(Rk(n,e))S_(n,e);else{var t=n.elm,r=ZEe(t);qD(e),r!==null&&(Ob(r,e.elm,QEe(t)),O2(r,[n],0,0))}return e}var Ift=0,Mft=function(){function n(e,t,r){if(this.type="svg",this.refreshHover=ace(),this.configLayer=ace(),this.storage=t,this._opts=r=Me({},r),this.root=e,this._id="zr"+Ift++,this._oldVNode=qle(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=zEe("svg");qY(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",Dft(this._oldVNode,e),this._oldVNode=e}},n.prototype.renderOneToVNode=function(e){return ece(e,ZH(this._id))},n.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=ZH(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var o=[],s=this._bgVNode=Pft(r,i,this._backgroundColor,a);s&&o.push(s);var l=e.compress?null:this._mainVNode=lo("g","main",{},[]);this._paintList(t,a,l?l.children:o),l&&o.push(l);var c=Be(Ln(a.defs),function(h){return a.defs[h]});if(c.length&&o.push(lo("defs","defs",{},c)),e.animation){var u=uft(a.cssNodes,a.cssAnims,{newline:!0});if(u){var d=lo("style","stl",{},[],u);o.push(d)}}return qle(r,i,o,e.useViewBox)},n.prototype.renderToString=function(e){return e=e||{},zY(this.renderToVNode({animation:Wt(e.cssAnimation,!0),emphasis:Wt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Wt(e.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(e,t,r){for(var i=e.length,a=[],o=0,s,l,c=0,u=0;u<i;u++){var d=e[u];if(!d.invisible){var h=d.__clipPaths,f=h&&h.length||0,m=l&&l.length||0,v=void 0;for(v=Math.max(f-1,m-1);v>=0&&!(h&&l&&h[v]===l[v]);v--);for(var y=m-1;y>v;y--)o--,s=a[o-1];for(var w=v+1;w<f;w++){var S={};Tft(h[w],S,t);var T=lo("g","clip-g-"+c++,S,[]);(s?s.children:r).push(T),a[o++]=T,s=T}l=h;var C=ece(d,t);C&&(s?s.children:r).push(C)}}},n.prototype.resize=function(e,t){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),i&&a&&(a.style.display="none",e=P_(i,0,r),t=P_(i,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var o=a.style;o.width=e+"px",o.height=t+"px"}if(Kq(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",e),s.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=zat(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},n}();function ace(n){return function(){}}function Pft(n,e,t,r){var i;if(t&&t!=="none")if(i=lo("rect","bg",{width:n,height:e,x:"0",y:"0"}),__e(t))KEe({fill:t},i.attrs,"fill",r);else if(Kq(t))XEe({style:{fill:t},dirty:ma,getBoundingRect:function(){return{width:n,height:e}}},i.attrs,"fill",r);else{var a=ND(t),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function Nft(n){n.registerPainter("svg",Mft)}function oce(n,e,t){var r=cy.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var aU=function(n){pi(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||p2,typeof t=="string"?o=oce(t,r,i):It(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(o_e(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=oce("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new dn(0,0,0,0);function u(S){if(!(!S.isFinite()||S.isZero()))if(o.length===0){var T=new dn(0,0,0,0);T.copy(S),o.push(T)}else{for(var C=!1,k=1/0,A=0,D=0;D<o.length;++D){var P=o[D];if(P.intersect(S)){var N=new dn(0,0,0,0);N.copy(P),N.union(S),o[D]=N,C=!0;break}else if(l){c.copy(S),c.union(P);var R=S.width*S.height,L=P.width*P.height,B=c.width*c.height,$=B-R-L;$<k&&(k=$,A=D)}}if(l&&(o[A].union(S),C=!0),!C){var T=new dn(0,0,0,0);T.copy(S),o.push(T)}l||(l=o.length>=s)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var h=t[d];if(h){var f=h.shouldBePainted(i,a,!0,!0),m=h.__isRendered&&(h.__dirty&Rc||!f)?h.getPrevPaintRect():null;m&&u(m);var v=f&&(h.__dirty&Rc||!h.__isRendered)?h.getPaintRect():null;v&&u(v)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var h=r[d],f=h&&h.shouldBePainted(i,a,!0,!0);if(h&&(!f||!h.__zr)&&h.__isRendered){var m=h.getPrevPaintRect();m&&u(m)}}var y;do{y=!1;for(var d=0;d<o.length;){if(o[d].isZero()){o.splice(d,1);continue}for(var w=d+1;w<o.length;)o[d].intersect(o[w])?(y=!0,o[d].union(o[w]),o.splice(w,1)):w++;d++}}while(y);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*i,a.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,h=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/d,l/d));var f=this.domBack;function m(v,y,w,S){if(o.clearRect(v,y,w,S),r&&r!=="transparent"){var T=void 0;if($j(r)){var C=r.global||r.__width===w&&r.__height===S;T=C&&r.__canvasGradient||VH(o,r,{x:0,y:0,width:w,height:S}),r.__canvasGradient=T,r.__width=w,r.__height=S}else Zit(r)&&(r.scaleX=r.scaleX||d,r.scaleY=r.scaleY||d,T=zH(o,r,{dirty:function(){h.setUnpainted(),h.painter.refresh()}}));o.save(),o.fillStyle=T||r,o.fillRect(v,y,w,S),o.restore()}c&&(o.save(),o.globalAlpha=u,o.drawImage(f,v,y,w,S),o.restore())}!i||c?m(0,0,s,l):i.length&&Z(i,function(v){m(v.x*d,v.y*d,v.width*d,v.height*d)})},e}(Xu),sce=1e5,bb=314159,TN=.01,Rft=.001;function Oft(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Lft(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var jft=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Me({},r||{}),this.dpr=r.devicePixelRatio||p2,this._singleCanvas=a,this.root=e;var o=e.style;o&&(o_e(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var u=e,d=u.width,h=u.height;r.width!=null&&(d=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,u.width=d*this.dpr,u.height=h*this.dpr,this._width=d,this._height=h;var f=new aU(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[bb]=f,f.zlevel=bb,s.push(bb),this._domRoot=e}else{this._width=P_(e,0,r),this._height=P_(e,1,r);var c=this._domRoot=Lft(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(sce)),a||(a=r.ctx,a.save()),tw(a,s,i,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(sce)},n.prototype.paintOne=function(e,t){LTe(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;l2(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(bb).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&a.push(c)}for(var u=!0,d=!1,h=function(v){var y=a[v],w=y.ctx,S=o&&y.createRepaintRects(e,t,f._width,f._height),T=r?y.__startIndex:y.__drawIndex,C=!r&&y.incremental&&Date.now,k=C&&Date.now(),A=y.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(y.__startIndex===y.__endIndex)y.clear(!1,A,S);else if(T===y.__startIndex){var D=e[T];(!D.incremental||!D.notClear||r)&&y.clear(!1,A,S)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=y.__startIndex);var P,N=function($){var G={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(P=T;P<y.__endIndex;P++){var W=e[P];if(W.__inHover&&(d=!0),i._doPaintEl(W,y,o,$,G,P===y.__endIndex-1),C){var K=Date.now()-k;if(K>15)break}}G.prevElClipPaths&&w.restore()};if(S)if(S.length===0)P=y.__endIndex;else for(var R=f.dpr,L=0;L<S.length;++L){var B=S[L];w.save(),w.beginPath(),w.rect(B.x*R,B.y*R,B.width*R,B.height*R),w.clip(),N(B),w.restore()}else w.save(),N(),w.restore();y.__drawIndex=P,y.__drawIndex<y.__endIndex&&(u=!1)},f=this,m=0;m<a.length;m++)h(m);return Mn.wxa&&Z(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,r,i,a,o){var s=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(tw(s,e,a,o),e.setPrevPaintRect(l))}else tw(s,e,a,o)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=bb);var r=this._layers[e];return r||(r=new aU("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?sn(r,this._layerConfig[e],!0):this._layerConfig[e-TN]&&sn(r,this._layerConfig[e-TN],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[e]&&Oft(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);s=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(t.dom,c.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,h){d.__dirty=d.__used=!1});function t(d){a&&(a.__endIndex!==d&&(a.__dirty=!0),a.__endIndex=d)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<e.length;l++){var i=e[l],c=i.zlevel,u=void 0;s!==c&&(s=c,o=0),i.incremental?(u=this.getLayer(c+Rft,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(c+(o>0?TN:0),this._needsManuallyCompositing),u.__builtin__||Uq("ZLevel "+c+" has been used by unkown layer "+u.id),u!==a&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),a=u),i.__dirty&Rc&&!i.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,h){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Z(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?sn(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+TN){var o=this._layers[a];sn(o,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(mn(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=P_(a,0,i),t=P_(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(bb).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[bb].dom;var t=new aU("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(d){d.__builtin__?r.drawImage(d.dom,0,0,i,a):d.renderToCanvas&&(r.save(),d.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];tw(r,u,o,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();function Fft(n){n.registerPainter("canvas",jft)}var $ft=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new jt,i=Da("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=t.itemHeight*.8,c=Da(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?o:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ai);function H1(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=U1(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(U1(n,e,t[o]));return a.join(" ")}}function eAe(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Fe(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var sM=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this)||this;return o.updateData(t,r,i,a),o}return e.prototype._createSymbol=function(t,r,i,a,o){this.removeAll();var s=Da(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=Bft,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Ng(this.childAt(0))},e.prototype.downplay=function(){Rg(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,l=e.getSymbolSize(t,r),c=o!==this._symbolType,u=a&&a.disableAnimation;if(c){var d=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,l,d)}else{var h=this.childAt(0);h.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?h.attr(f):ar(h,f,s,r),ch(h)}if(this._updateCommon(t,r,l,i,a),c){var h=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,xi(h,f,s,r)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,o){var s=this.childAt(0),l=t.hostModel,c,u,d,h,f,m,v,y,w;if(a&&(c=a.emphasisItemStyle,u=a.blurItemStyle,d=a.selectItemStyle,h=a.focus,f=a.blurScope,v=a.labelStatesModels,y=a.hoverScale,w=a.cursorStyle,m=a.emphasisDisabled),!a||t.hasItemOption){var S=a&&a.itemModel?a.itemModel:t.getItemModel(r),T=S.getModel("emphasis");c=T.getModel("itemStyle").getItemStyle(),d=S.getModel(["select","itemStyle"]).getItemStyle(),u=S.getModel(["blur","itemStyle"]).getItemStyle(),h=T.get("focus"),f=T.get("blurScope"),m=T.get("disabled"),v=ho(S),y=T.getShallow("scale"),w=S.getShallow("cursor")}var C=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(C||0)*Math.PI/180||0);var k=tx(t.getItemVisual(r,"symbolOffset"),i);k&&(s.x=k[0],s.y=k[1]),w&&s.attr("cursor",w);var A=t.getItemVisual(r,"style"),D=A.fill;if(s instanceof Ro){var P=s.style;s.useStyle(Me({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},A))}else s.__isEmptyBrush?s.useStyle(Me({},A)):s.useStyle(A),s.style.decal=null,s.setColor(D,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var N=t.getItemVisual(r,"liftZ"),R=this._z2;N!=null?R==null&&(this._z2=s.z2,s.z2+=N):R!=null&&(s.z2=R,this._z2=null);var L=o&&o.useNameLabel;ts(s,v,{labelFetcher:l,labelDataIndex:r,defaultText:B,inheritColor:D,defaultOpacity:A.opacity});function B(W){return L?t.getName(W):H1(t,W)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var $=s.ensureState("emphasis");$.style=c,s.ensureState("select").style=d,s.ensureState("blur").style=u;var G=y==null||y===!0?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;$.scaleX=this._sizeX*G,$.scaleY=this._sizeY*G,this.setSymbolScale(1),Bi(this,h,f,m)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),o=Ut(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&dy(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();dy(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return MT(t.getItemVisual(r,"symbolSize"))},e}(jt);function Bft(n,e){this.parent.drift(n,e)}function oU(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function lce(n){return n!=null&&!It(n)&&(n={isIgnore:n}),n||{}}function cce(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:ho(e),cursorStyle:e.get("cursor")}}var lM=function(){function n(e){this.group=new jt,this._SymbolCtor=e||sM}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=lce(t);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,l=cce(e),c={disableAnimation:s},u=t.getSymbolPoint||function(d){return e.getItemLayout(d)};a||r.removeAll(),e.diff(a).add(function(d){var h=u(d);if(oU(e,h,d,t)){var f=new o(e,d,l,c);f.setPosition(h),e.setItemGraphicEl(d,f),r.add(f)}}).update(function(d,h){var f=a.getItemGraphicEl(h),m=u(d);if(!oU(e,m,d,t)){r.remove(f);return}var v=e.getItemVisual(d,"symbol")||"circle",y=f&&f.getSymbolType&&f.getSymbolType();if(!f||y&&y!==v)r.remove(f),f=new o(e,d,l,c),f.setPosition(m);else{f.updateData(e,d,l,c);var w={x:m[0],y:m[1]};s?f.attr(w):ar(f,w,i)}r.add(f),e.setItemGraphicEl(d,f)}).remove(function(d){var h=a.getItemGraphicEl(d);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=u,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=cce(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=lce(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if(oU(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(e){ky(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n}();function tAe(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=Uft(i,t),o=r.dim,s=i.dim,l=e.mapDimension(s),c=e.mapDimension(o),u=s==="x"||s==="radius"?1:0,d=Be(n.dimensions,function(m){return e.mapDimension(m)}),h=!1,f=e.getCalculationInfo("stackResultDimension");return fy(e,d[0])&&(h=!0,d[0]=f),fy(e,d[1])&&(h=!0,d[1]=f),{dataDimsForPoint:d,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Uft(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:rr(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function nAe(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,o=[];return o[a]=t.get(n.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function Vft(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function zft(n,e,t,r,i,a,o,s){for(var l=Vft(n,e),c=[],u=[],d=[],h=[],f=[],m=[],v=[],y=tAe(i,e,o),w=n.getLayout("points")||[],S=e.getLayout("points")||[],T=0;T<l.length;T++){var C=l[T],k=!0,A=void 0,D=void 0;switch(C.cmd){case"=":A=C.idx*2,D=C.idx1*2;var P=w[A],N=w[A+1],R=S[D],L=S[D+1];(isNaN(P)||isNaN(N))&&(P=R,N=L),c.push(P,N),u.push(R,L),d.push(t[A],t[A+1]),h.push(r[D],r[D+1]),v.push(e.getRawIndex(C.idx1));break;case"+":var B=C.idx,$=y.dataDimsForPoint,G=i.dataToPoint([e.get($[0],B),e.get($[1],B)]);D=B*2,c.push(G[0],G[1]),u.push(S[D],S[D+1]);var W=nAe(y,i,e,B);d.push(W[0],W[1]),h.push(r[D],r[D+1]),v.push(e.getRawIndex(B));break;case"-":k=!1}k&&(f.push(C),m.push(m.length))}m.sort(function(fe,De){return v[fe]-v[De]});for(var K=c.length,X=Sf(K),te=Sf(K),ie=Sf(K),z=Sf(K),se=[],T=0;T<m.length;T++){var ce=m[T],ee=T*2,be=ce*2;X[ee]=c[be],X[ee+1]=c[be+1],te[ee]=u[be],te[ee+1]=u[be+1],ie[ee]=d[be],ie[ee+1]=d[be+1],z[ee]=h[be],z[ee+1]=h[be+1],se[T]=f[ce]}return{current:X,next:te,stackedOnCurrent:ie,stackedOnNext:z,status:se}}var xv=Math.min,Sv=Math.max;function vw(n,e){return isNaN(n)||isNaN(e)}function JH(n,e,t,r,i,a,o,s,l){for(var c,u,d,h,f,m,v=t,y=0;y<r;y++){var w=e[v*2],S=e[v*2+1];if(v>=i||v<0)break;if(vw(w,S)){if(l){v+=a;continue}break}if(v===t)n[a>0?"moveTo":"lineTo"](w,S),d=w,h=S;else{var T=w-c,C=S-u;if(T*T+C*C<.5){v+=a;continue}if(o>0){for(var k=v+a,A=e[k*2],D=e[k*2+1];A===w&&D===S&&y<r;)y++,k+=a,v+=a,A=e[k*2],D=e[k*2+1],w=e[v*2],S=e[v*2+1],T=w-c,C=S-u;var P=y+1;if(l)for(;vw(A,D)&&P<r;)P++,k+=a,A=e[k*2],D=e[k*2+1];var N=.5,R=0,L=0,B=void 0,$=void 0;if(P>=r||vw(A,D))f=w,m=S;else{R=A-c,L=D-u;var G=w-c,W=A-w,K=S-u,X=D-S,te=void 0,ie=void 0;if(s==="x"){te=Math.abs(G),ie=Math.abs(W);var z=R>0?1:-1;f=w-z*te*o,m=S,B=w+z*ie*o,$=S}else if(s==="y"){te=Math.abs(K),ie=Math.abs(X);var se=L>0?1:-1;f=w,m=S-se*te*o,B=w,$=S+se*ie*o}else te=Math.sqrt(G*G+K*K),ie=Math.sqrt(W*W+X*X),N=ie/(ie+te),f=w-R*o*(1-N),m=S-L*o*(1-N),B=w+R*o*N,$=S+L*o*N,B=xv(B,Sv(A,w)),$=xv($,Sv(D,S)),B=Sv(B,xv(A,w)),$=Sv($,xv(D,S)),R=B-w,L=$-S,f=w-R*te/ie,m=S-L*te/ie,f=xv(f,Sv(c,w)),m=xv(m,Sv(u,S)),f=Sv(f,xv(c,w)),m=Sv(m,xv(u,S)),R=w-f,L=S-m,B=w+R*ie/te,$=S+L*ie/te}n.bezierCurveTo(d,h,f,m,w,S),d=B,h=$}else n.lineTo(w,S)}c=w,u=S,v+=a}return y}var rAe=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),Hft=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new rAe},e.prototype.buildPath=function(t,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&vw(i[o*2-2],i[o*2-1]);o--);for(;a<o&&vw(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=JH(t,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=$f.CMD,s,l,c=r==="x",u=[],d=0;d<a.length;){var h=a[d++],f=void 0,m=void 0,v=void 0,y=void 0,w=void 0,S=void 0,T=void 0;switch(h){case o.M:s=a[d++],l=a[d++];break;case o.L:if(f=a[d++],m=a[d++],T=c?(t-s)/(f-s):(t-l)/(m-l),T<=1&&T>=0){var C=c?(m-l)*T+l:(f-s)*T+s;return c?[t,C]:[C,t]}s=f,l=m;break;case o.C:f=a[d++],m=a[d++],v=a[d++],y=a[d++],w=a[d++],S=a[d++];var k=c?u2(s,f,v,w,t,u):u2(l,m,y,S,t,u);if(k>0)for(var A=0;A<k;A++){var D=u[A];if(D<=1&&D>=0){var C=c?ao(l,m,y,S,D):ao(s,f,v,w,D);return c?[t,C]:[C,t]}}s=w,l=S;break}}},e}(Cn),Gft=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(rAe),iAe=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new Gft},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&vw(i[s*2-2],i[s*2-1]);s--);for(;o<s&&vw(i[o*2],i[o*2+1]);o++);}for(;o<s;){var c=JH(t,i,o,s,s,1,r.smooth,l,r.connectNulls);JH(t,a,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,t.closePath()}},e}(Cn);function aAe(n,e,t,r,i){var a=n.getArea(),o=a.x,s=a.y,l=a.width,c=a.height,u=t.get(["lineStyle","width"])||0;o-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new Yn({shape:{x:o,y:s,width:l,height:c}});if(e){var h=n.getBaseAxis(),f=h.isHorizontal(),m=h.inverse;f?(m&&(d.shape.x+=l),d.shape.width=0):(m||(d.shape.y+=c),d.shape.height=0);var v=kt(i)?function(y){i(y,d)}:null;xi(d,{shape:{width:l,height:c,x:o,y:s}},t,null,r,v)}return d}function oAe(n,e,t){var r=n.getArea(),i=na(r.r0,1),a=na(r.r,1),o=new ml({shape:{cx:na(n.cx,1),cy:na(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=n.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,xi(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function cM(n,e,t,r,i){if(n){if(n.type==="polar")return oAe(n,e,t);if(n.type==="cartesian2d")return aAe(n,e,t,r,i)}else return null;return null}function rx(n,e){return n.type===e}function uce(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function dce(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var o=n[a++],s=n[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function hce(n,e){var t=dce(n),r=t[0],i=t[1],a=dce(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function fce(n){return rr(n)?n:n?.5:0}function Wft(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=Sf(r*2),a=0;a<r;a++){var o=nAe(t,n,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function _v(n,e,t,r,i){var a=t.getBaseAxis(),o=a.dim==="x"||a.dim==="radius"?0:1,s=[],l=0,c=[],u=[],d=[],h=[];if(i){for(l=0;l<n.length;l+=2){var f=e||n;!isNaN(f[l])&&!isNaN(f[l+1])&&h.push(n[l],n[l+1])}n=h}for(l=0;l<n.length-2;l+=2)switch(d[0]=n[l+2],d[1]=n[l+3],u[0]=n[l],u[1]=n[l+1],s.push(u[0],u[1]),r){case"end":c[o]=d[o],c[1-o]=u[1-o],s.push(c[0],c[1]);break;case"middle":var m=(u[o]+d[o])/2,v=[];c[o]=v[o]=m,c[1-o]=u[1-o],v[1-o]=d[1-o],s.push(c[0],c[1]),s.push(v[0],v[1]);break;default:c[o]=u[o],c[1-o]=d[1-o],s.push(c[0],c[1])}return s.push(n[l++],n[l++]),s}function qft(n,e){var t=[],r=n.length,i,a;function o(u,d,h){var f=u.coord,m=(h-f)/(d.coord-f),v=Lat(m,[u.color,d.color]);return{coord:h,color:v}}for(var s=0;s<r;s++){var l=n[s],c=l.coord;if(c<0)i=l;else if(c>e){a?t.push(o(a,l,e)):i&&t.push(o(i,l,0),o(i,l,e));break}else i&&(t.push(o(i,l,0)),i=null),t.push(l),a=l}return t}function Yft(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=n.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=e.getAxis(i),c=Be(a.stops,function(T){return{coord:l.toGlobalCoord(l.dataToCoord(T.value)),color:T.color}}),u=c.length,d=a.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),d.reverse());var h=qft(c,i==="x"?t.getWidth():t.getHeight()),f=h.length;if(!f&&u)return c[0].coord<0?d[1]?d[1]:c[u-1].color:d[0]?d[0]:c[0].color;var m=10,v=h[0].coord-m,y=h[f-1].coord+m,w=y-v;if(w<.001)return"transparent";Z(h,function(T){T.offset=(T.coord-v)/w}),h.push({offset:f?h[f-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:f?h[0].offset:.5,color:d[0]||"transparent"});var S=new eM(0,0,0,0,h,!0);return S[i]=v,S[i+"2"]=y,S}}}function Kft(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&Xft(a,e))){var o=e.mapDimension(a.dim),s={};return Z(a.getViewLabels(),function(l){var c=a.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(e.get(o,l))}}}}function Xft(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(sM.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Zft(n,e){return isNaN(n)||isNaN(e)}function Qft(n){for(var e=n.length/2;e>0&&Zft(n[e*2-2],n[e*2-1]);e--);return e-1}function pce(n,e){return[n[e*2],n[e*2+1]]}function Jft(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,o,s=0,l=-1,c=0;c<r;c++)if(o=n[c*2+i],!(isNaN(o)||isNaN(n[c*2+1-i]))){if(c===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){l=c;break}s=c,a=o}return{range:[s,l],t:(e-a)/(o-a)}}function sAe(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<gl.length;e++)if(n.get([gl[e],"endLabel","show"]))return!0;return!1}function sU(n,e,t,r){if(rx(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=sAe(r)?function(f,m){n._endLabelOnDuring(f,m,o,s,a,i,e)}:null,c=e.getBaseAxis().isHorizontal(),u=aAe(e,t,r,function(){var f=n._endLabel;f&&t&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var d=u.shape,h=Math.max(d.width,d.height);c?(d.y-=h,d.height+=h*2):(d.x-=h,d.width+=h*2)}return l&&l(1,u),u}else return oAe(e,t,r)}function ept(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||o}}}var tpt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new jt,r=new lM;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=ut(this._changePolyState,this)},e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),u=s.getLayout("points")||[],d=a.type==="polar",h=this._coordSys,f=this._symbolDraw,m=this._polyline,v=this._polygon,y=this._lineGroup,w=!r.ssr&&t.get("animation"),S=!c.isEmpty(),T=c.get("origin"),C=tAe(a,s,T),k=S&&Wft(a,s,C),A=t.get("showSymbol"),D=t.get("connectNulls"),P=A&&!d&&Kft(t,s,a),N=this._data;N&&N.eachItemGraphicEl(function(fe,De){fe.__temp&&(o.remove(fe),N.setItemGraphicEl(De,null))}),A||f.remove(),o.add(y);var R=d?!1:t.get("step"),L;a&&a.getArea&&t.get("clip",!0)&&(L=a.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var B=Yft(s,a,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(m&&h.type===a.type&&R===this._step))A&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(fe){return[u[fe*2],u[fe*2+1]]}}),w&&this._initSymbolLabelAnimation(s,a,L),R&&(k&&(k=_v(k,u,a,R,D)),u=_v(u,null,a,R,D)),m=this._newPolyline(u),S?v=this._newPolygon(u,k):v&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,$w(B)),y.setClipPath(sU(this,a,!0,t));else{S&&!v?v=this._newPolygon(u,k):v&&!S&&(y.remove(v),v=this._polygon=null),d||this._initOrUpdateEndLabel(t,a,$w(B));var $=y.getClipPath();if($){var G=sU(this,a,!1,t);xi($,{shape:G.shape},t)}else y.setClipPath(sU(this,a,!0,t));A&&f.updateData(s,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(fe){return[u[fe*2],u[fe*2+1]]}}),(!uce(this._stackedOnPoints,k)||!uce(this._points,u))&&(w?this._doUpdateAnimation(s,k,a,i,R,T,D):(R&&(k&&(k=_v(k,u,a,R,D)),u=_v(u,null,a,R,D)),m.setShape({points:u}),v&&v.setShape({points:u,stackedOnPoints:k})))}var W=t.getModel("emphasis"),K=W.get("focus"),X=W.get("blurScope"),te=W.get("disabled");if(m.useStyle(Dt(l.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),es(m,t,"lineStyle"),m.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var ie=m.getState("emphasis").style;ie.lineWidth=+m.style.lineWidth+1}Ut(m).seriesIndex=t.seriesIndex,Bi(m,K,X,te);var z=fce(t.get("smooth")),se=t.get("smoothMonotone");if(m.setShape({smooth:z,smoothMonotone:se,connectNulls:D}),v){var ce=s.getCalculationInfo("stackedOnSeries"),ee=0;v.useStyle(Dt(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),ce&&(ee=fce(ce.get("smooth"))),v.setShape({smooth:z,stackedOnSmooth:ee,smoothMonotone:se,connectNulls:D}),es(v,t,"areaStyle"),Ut(v).seriesIndex=t.seriesIndex,Bi(v,K,X,te)}var be=this._changePolyState;s.eachItemGraphicEl(function(fe){fe&&(fe.onHoverStateChange=be)}),this._polyline.onHoverStateChange=be,this._data=s,this._coordSys=a,this._stackedOnPoints=k,this._points=u,this._step=R,this._valueOrigin=T,t.get("triggerLineEvent")&&(this.packEventData(t,m),v&&this.packEventData(t,v))},e.prototype.packEventData=function(t,r){Ut(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var o=t.getData(),s=Lw(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var u=l[s*2],d=l[s*2+1];if(isNaN(u)||isNaN(d)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,d))return;var h=t.get("zlevel")||0,f=t.get("z")||0;c=new sM(o,s),c.x=u,c.y=d,c.setZ(h,f);var m=c.getSymbolPath().getTextContent();m&&(m.zlevel=h,m.z=f,m.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else zr.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var o=t.getData(),s=Lw(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else zr.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;v2(this._polyline,t),r&&v2(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new Hft({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new iAe({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var c=t.hostModel,u=c.get("animationDuration");kt(u)&&(u=u(null));var d=c.get("animationDelay")||0,h=kt(d)?d(null):d;t.eachItemGraphicEl(function(f,m){var v=f;if(v){var y=[f.x,f.y],w=void 0,S=void 0,T=void 0;if(i)if(o){var C=i,k=r.pointToCoord(y);a?(w=C.startAngle,S=C.endAngle,T=-k[1]/180*Math.PI):(w=C.r0,S=C.r,T=k[0])}else{var A=i;a?(w=A.x,S=A.x+A.width,T=f.x):(w=A.y+A.height,S=A.y,T=f.y)}var D=S===w?0:(T-w)/(S-w);l&&(D=1-D);var P=kt(d)?d(m):u*D+h,N=v.getSymbolPath(),R=N.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),R&&R.animateFrom({style:{opacity:0}},{duration:300,delay:P}),N.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(sAe(t)){var o=t.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Qn({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=Qft(l);u>=0&&(ts(s,ho(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:u,defaultText:function(d,h,f){return f!=null?eAe(o,f):H1(o,d)},enableTextSetter:!0},ept(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,o,s,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&a.originalX==null&&(a.originalX=c.x,a.originalY=c.y);var d=i.getLayout("points"),h=i.hostModel,f=h.get("connectNulls"),m=s.get("precision"),v=s.get("distance")||0,y=l.getBaseAxis(),w=y.isHorizontal(),S=y.inverse,T=r.shape,C=S?w?T.x:T.y+T.height:w?T.x+T.width:T.y,k=(w?v:0)*(S?-1:1),A=(w?0:-v)*(S?-1:1),D=w?"x":"y",P=Jft(d,C,D),N=P.range,R=N[1]-N[0],L=void 0;if(R>=1){if(R>1&&!f){var B=pce(d,N[0]);c.attr({x:B[0]+k,y:B[1]+A}),o&&(L=h.getRawValue(N[0]))}else{var B=u.getPointOn(C,D);B&&c.attr({x:B[0]+k,y:B[1]+A});var $=h.getRawValue(N[0]),G=h.getRawValue(N[1]);o&&(L=H_e(i,m,$,G,P.t))}a.lastFrameIndex=N[0]}else{var W=t===1||a.lastFrameIndex>0?N[0]:0,B=pce(d,W);o&&(L=h.getRawValue(W)),c.attr({x:B[0]+k,y:B[1]+A})}if(o){var K=TT(c);typeof K.setLabelText=="function"&&K.setLabelText(L)}}},e.prototype._doUpdateAnimation=function(t,r,i,a,o,s,l){var c=this._polyline,u=this._polygon,d=t.hostModel,h=zft(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=h.current,m=h.stackedOnCurrent,v=h.next,y=h.stackedOnNext;if(o&&(m=_v(h.stackedOnCurrent,h.current,i,o,l),f=_v(h.current,null,i,o,l),y=_v(h.stackedOnNext,h.next,i,o,l),v=_v(h.next,null,i,o,l)),hce(f,v)>3e3||u&&hce(m,y)>3e3){c.stopAnimation(),c.setShape({points:v}),u&&(u.stopAnimation(),u.setShape({points:v,stackedOnPoints:y}));return}c.shape.__points=h.current,c.shape.points=f;var w={shape:{points:v}};h.current!==f&&(w.shape.__points=h.next),c.stopAnimation(),ar(c,w,d),u&&(u.setShape({points:f,stackedOnPoints:m}),u.stopAnimation(),ar(u,{shape:{stackedOnPoints:y}},d),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var S=[],T=h.status,C=0;C<T.length;C++){var k=T[C].cmd;if(k==="="){var A=t.getItemGraphicEl(T[C].idx1);A&&S.push({el:A,ptIdx:C})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var D=c.shape.__points,P=0;P<S.length;P++){var N=S[P].el,R=S[P].ptIdx*2;N.x=D[R],N.y=D[R+1],N.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(zr);function uM(n,e){return{seriesType:n,plan:DT(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(i){var s=Be(i.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");fy(r,s[0])&&(s[0]=c),fy(r,s[1])&&(s[1]=c);var u=r.getStore(),d=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return l&&{progress:function(f,m){for(var v=f.end-f.start,y=o&&Sf(v*l),w=[],S=[],T=f.start,C=0;T<f.end;T++){var k=void 0;if(l===1){var A=u.get(d,T);k=i.dataToPoint(A,null,S)}else w[0]=u.get(d,T),w[1]=u.get(h,T),k=i.dataToPoint(w,null,S);o?(y[C++]=k[0],y[C++]=k[1]):m.setItemLayout(T,k.slice())}o&&m.setLayout("points",y)}}}}}}var npt={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},rpt=function(n){return Math.round(n.length/2)};function lAe(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),c=o.getOtherAxis(l),u=l.getExtent(),d=r.getDevicePixelRatio(),h=Math.abs(u[1]-u[0])*(d||1),f=Math.round(s/h);if(isFinite(f)&&f>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(c.dim),1/f)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(c.dim),1/f));var m=void 0;st(a)?m=npt[a]:kt(a)&&(m=a),m&&e.setData(i.downSample(i.mapDimension(c.dim),1/f,m,rpt))}}}}}function ipt(n){n.registerChartView(tpt),n.registerSeriesModel($ft),n.registerLayout(uM("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,lAe("line"))}var YD=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(t),s=a.dataToPoint(o);if(i)Z(a.getAxes(),function(h,f){if(h.type==="category"&&r!=null){var m=h.getTicksCoords(),v=h.getTickModel().get("alignWithLabel"),y=o[f],w=r[f]==="x1"||r[f]==="y1";if(w&&!v&&(y+=1),m.length<2)return;if(m.length===2){s[f]=h.toGlobalCoord(h.getExtent()[w?1:0]);return}for(var S=void 0,T=void 0,C=1,k=0;k<m.length;k++){var A=m[k].coord,D=k===m.length-1?m[k-1].tickValue+C:m[k].tickValue;if(D===y){T=A;break}else if(D<y)S=A;else if(S!=null&&D>y){T=(A+S)/2;break}k===1&&(C=D-m[0].tickValue)}T==null&&(S?S&&(T=m[m.length-1].coord):T=m[0].coord),s[f]=h.toGlobalCoord(T)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=a.getBaseAxis().isHorizontal()?0:1;s[d]+=c+u/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(ai);ai.registerClass(YD);var apt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Zg(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Cy(YD.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(YD),opt=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),L2=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new opt},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,u=r.startAngle,d=r.endAngle,h=r.clockwise,f=Math.PI*2,m=h?d-u<f:u-d<f;m||(u=d-(h?f:-f));var v=Math.cos(u),y=Math.sin(u),w=Math.cos(d),S=Math.sin(d);m?(t.moveTo(v*o+i,y*o+a),t.arc(v*c+i,y*c+a,l,-Math.PI+u,u,!h)):t.moveTo(v*s+i,y*s+a),t.arc(i,a,s,u,d,!h),t.arc(w*c+i,S*c+a,l,d-Math.PI*2,d-Math.PI,!h),o!==0&&t.arc(i,a,o,d,u,h)},e}(Cn);function spt(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return g2(r,i,a);var s=n(o),l=i.distance!=null?i.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,f=c.r0,m=(h+f)/2,v=c.startAngle,y=c.endAngle,w=(v+y)/2,S=t?Math.abs(h-f)/2:0,T=Math.cos,C=Math.sin,k=u+h*T(v),A=d+h*C(v),D="left",P="top";switch(s){case"startArc":k=u+(f-l)*T(w),A=d+(f-l)*C(w),D="center",P="top";break;case"insideStartArc":k=u+(f+l)*T(w),A=d+(f+l)*C(w),D="center",P="bottom";break;case"startAngle":k=u+m*T(v)+EN(v,l+S,!1),A=d+m*C(v)+AN(v,l+S,!1),D="right",P="middle";break;case"insideStartAngle":k=u+m*T(v)+EN(v,-l+S,!1),A=d+m*C(v)+AN(v,-l+S,!1),D="left",P="middle";break;case"middle":k=u+m*T(w),A=d+m*C(w),D="center",P="middle";break;case"endArc":k=u+(h+l)*T(w),A=d+(h+l)*C(w),D="center",P="bottom";break;case"insideEndArc":k=u+(h-l)*T(w),A=d+(h-l)*C(w),D="center",P="top";break;case"endAngle":k=u+m*T(y)+EN(y,l+S,!0),A=d+m*C(y)+AN(y,l+S,!0),D="left",P="middle";break;case"insideEndAngle":k=u+m*T(y)+EN(y,-l+S,!0),A=d+m*C(y)+AN(y,-l+S,!0),D="right",P="middle";break;default:return g2(r,i,a)}return r=r||{},r.x=k,r.y=A,r.align=D,r.verticalAlign=P,r}}function lpt(n,e,t,r){if(rr(r)){n.setTextConfig({rotation:r});return}else if(Fe(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,c=t(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:n.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),n.setTextConfig({rotation:u})}function EN(n,e,t){return e*Math.sin(n)*(t?-1:1)}function AN(n,e,t){return e*Math.cos(n)*(t?1:-1)}function nw(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Fe(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Be(r,function(a){return lh(a,i)})}}var lU=Math.max,cU=Math.min;function cpt(n,e){var t=n.getArea&&n.getArea();if(rx(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var upt=function(n){_e(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){ky(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var o=this.group,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=t.isAnimationEnabled()?t:null,f=dpt(t,c);f&&this._enableRealtimeSort(f,s,i);var m=t.get("clip",!0)||f,v=cpt(c,s);o.removeClipPath();var y=t.get("roundCap",!0),w=t.get("showBackground",!0),S=t.getModel("backgroundStyle"),T=S.get("borderRadius")||0,C=[],k=this._backgroundEls,A=a&&a.isInitSort,D=a&&a.type==="changeAxisOrder";function P(L){var B=kN[c.type](s,L),$=ypt(c,d,B);return $.useStyle(S.getItemStyle()),c.type==="cartesian2d"?$.setShape("r",T):$.setShape("cornerRadius",T),C[L]=$,$}s.diff(l).add(function(L){var B=s.getItemModel(L),$=kN[c.type](s,L,B);if(w&&P(L),!(!s.hasValue(L)||!bce[c.type]($))){var G=!1;m&&(G=gce[c.type](v,$));var W=mce[c.type](t,s,L,$,d,h,u.model,!1,y);f&&(W.forceLabelAnimation=!0),wce(W,s,L,B,$,t,d,c.type==="polar"),A?W.attr({shape:$}):f?vce(f,h,W,$,L,d,!1,!1):xi(W,{shape:$},t,L),s.setItemGraphicEl(L,W),o.add(W),W.ignore=G}}).update(function(L,B){var $=s.getItemModel(L),G=kN[c.type](s,L,$);if(w){var W=void 0;k.length===0?W=P(B):(W=k[B],W.useStyle(S.getItemStyle()),c.type==="cartesian2d"?W.setShape("r",T):W.setShape("cornerRadius",T),C[L]=W);var K=kN[c.type](s,L),X=uAe(d,K,c);ar(W,{shape:X},h,L)}var te=l.getItemGraphicEl(B);if(!s.hasValue(L)||!bce[c.type](G)){o.remove(te);return}var ie=!1;if(m&&(ie=gce[c.type](v,G),ie&&o.remove(te)),te?ch(te):te=mce[c.type](t,s,L,G,d,h,u.model,!!te,y),f&&(te.forceLabelAnimation=!0),D){var z=te.getTextContent();if(z){var se=TT(z);se.prevValue!=null&&(se.prevValue=se.value)}}else wce(te,s,L,$,G,t,d,c.type==="polar");A?te.attr({shape:G}):f?vce(f,h,te,G,L,d,!0,D):ar(te,{shape:G},t,L,null),s.setItemGraphicEl(L,te),te.ignore=ie,o.add(te)}).remove(function(L){var B=l.getItemGraphicEl(L);B&&FD(B,t,L)}).execute();var N=this._backgroundGroup||(this._backgroundGroup=new jt);N.removeAll();for(var R=0;R<C.length;++R)N.add(C[R]);o.add(N),this._backgroundEls=C,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),Sce(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),Sce(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&cM(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Be(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,c=a.getOrdinalMeta().categories.length;l<c;++l){var u=t.rawIndexOf(o,a.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:r(t.indexOfRawIndex(u));if(d>s)return!0;s=d}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){FD(a,t,Ut(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(zr),gce={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,o=lU(e.x,n.x),s=cU(e.x+e.width,i),l=lU(e.y,n.y),c=cU(e.y+e.height,a),u=s<o,d=c<l;return e.x=u&&o>i?s:o,e.y=d&&l>a?c:l,e.width=u?0:s-o,e.height=d?0:c-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||d},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=cU(e.r,n.r),a=lU(e.r0,n.r0);e.r=i,e.r0=a;var o=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},mce={cartesian2d:function(n,e,t,r,i,a,o,s,l){var c=new Yn({shape:Me({},r),z2:1});if(c.__dataIndex=t,c.name="item",a){var u=c.shape,d=i?"height":"width";u[d]=0}return c},polar:function(n,e,t,r,i,a,o,s,l){var c=!i&&l?L2:ml,u=new c({shape:r,z2:1});u.name="item";var d=cAe(i);if(u.calculateTextPosition=spt(d,{isRoundCap:c===L2}),a){var h=u.shape,f=i?"r":"endAngle",m={};h[f]=i?r.r0:r.startAngle,m[f]=r[f],(s?ar:xi)(u,{shape:m},a)}return u}};function dpt(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function vce(n,e,t,r,i,a,o,s){var l,c;a?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?ar:xi)(t,{shape:l},e,i,null);var u=e?n.baseAxis.model:null;(o?ar:xi)(t,{shape:c},u,i)}function yce(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var hpt=["x","y","width","height"],fpt=["cx","cy","r","startAngle","endAngle"],bce={cartesian2d:function(n){return!yce(n,hpt)},polar:function(n){return!yce(n,fpt)}},kN={cartesian2d:function(n,e,t){var r=n.getItemLayout(e),i=t?gpt(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function ppt(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function cAe(n){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(n)}function wce(n,e,t,r,i,a,o,s){var l=e.getItemVisual(t,"style");if(s){if(!a.get("roundCap")){var u=n.shape,d=nw(r.getModel("itemStyle"),u,!0);Me(u,d),n.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(l);var h=r.getShallow("cursor");h&&n.attr("cursor",h);var f=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",m=ho(r);ts(n,m,{labelFetcher:a,labelDataIndex:t,defaultText:H1(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var v=n.getTextContent();if(s&&v){var y=r.get(["label","position"]);n.textConfig.inside=y==="middle"?!0:null,lpt(n,y==="outside"?f:y,cAe(o),r.get(["label","rotate"]))}k1e(v,m,a.getRawValue(t),function(S){return eAe(e,S)});var w=r.getModel(["emphasis"]);Bi(n,w.get("focus"),w.get("blurScope"),w.get("disabled")),es(n,r),ppt(i)&&(n.style.fill="none",n.style.stroke="none",Z(n.states,function(S){S.style&&(S.style.fill=S.style.stroke="none")}))}function gpt(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var mpt=function(){function n(){}return n}(),xce=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new mpt},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<i.length;u+=3)l[a]=c,l[o]=i[u+2],s[a]=i[u+a],s[o]=i[u+o],t.rect(s[0],s[1],l[0],l[1])},e}(Cn);function Sce(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=n.getModel("backgroundStyle"),c=i.getLayout("largeBackgroundPoints");if(c){var u=new xce({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=a,u.largeDataIndices=o,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),t&&t.push(u)}var d=new xce({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=a,d.largeDataIndices=o,d.barWidth=s,e.add(d),d.useStyle(i.getVisual("style")),d.style.stroke=null,Ut(d).seriesIndex=n.seriesIndex,n.get("silent")||(d.on("mousedown",_ce),d.on("mousemove",_ce)),t&&t.push(d)}var _ce=kY(function(n){var e=this,t=vpt(e,n.offsetX,n.offsetY);Ut(e).dataIndex=t>=0?t:null},30,!1);function vpt(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,o=n.largeDataIndices,s=[],l=[],c=n.barWidth,u=0,d=a.length/3;u<d;u++){var h=u*3;if(l[r]=c,l[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&t>=s[1]&&t<=s[1]+l[1])return o[u]}return-1}function uAe(n,e,t){if(rx(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function ypt(n,e,t){var r=n.type==="polar"?ml:Yn;return new r({shape:uAe(e,t,n),silent:!0,z2:0})}function bpt(n){n.registerChartView(upt),n.registerSeriesModel(apt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Qt(gEe,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,mEe("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,lAe("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var Tce=Math.PI*2,CN=Math.PI/180;function dAe(n,e){return qa(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function hAe(n,e){var t=dAe(n,e),r=n.get("center"),i=n.get("radius");Fe(i)||(i=[0,i]);var a=tt(t.width,e.getWidth()),o=tt(t.height,e.getHeight()),s=Math.min(a,o),l=tt(i[0],s/2),c=tt(i[1],s/2),u,d,h=n.coordinateSystem;if(h){var f=h.dataToPoint(r);u=f[0]||0,d=f[1]||0}else Fe(r)||(r=[r,r]),u=tt(r[0],a)+t.x,d=tt(r[1],o)+t.y;return{cx:u,cy:d,r0:l,r:c}}function wpt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),o=dAe(r,t),s=hAe(r,t),l=s.cx,c=s.cy,u=s.r,d=s.r0,h=-r.get("startAngle")*CN,f=r.get("endAngle"),m=r.get("padAngle")*CN;f=f==="auto"?h-Tce:-f*CN;var v=r.get("minAngle")*CN,y=v+m,w=0;i.each(a,function(X){!isNaN(X)&&w++});var S=i.getSum(a),T=Math.PI/(S||w)*2,C=r.get("clockwise"),k=r.get("roseType"),A=r.get("stillShowZeroSum"),D=i.getDataExtent(a);D[0]=0;var P=C?1:-1,N=[h,f],R=P*m/2;nY(N,!C),h=N[0],f=N[1];var L=fAe(r);L.startAngle=h,L.endAngle=f,L.clockwise=C;var B=Math.abs(f-h),$=B,G=0,W=h;if(i.setLayout({viewRect:o,r:u}),i.each(a,function(X,te){var ie;if(isNaN(X)){i.setItemLayout(te,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:C,cx:l,cy:c,r0:d,r:k?NaN:u});return}k!=="area"?ie=S===0&&A?T:X*T:ie=B/w,ie<y?(ie=y,$-=y):G+=X;var z=W+P*ie,se=0,ce=0;m>ie?(se=W+P*ie/2,ce=se):(se=W+R,ce=z-R),i.setItemLayout(te,{angle:ie,startAngle:se,endAngle:ce,clockwise:C,cx:l,cy:c,r0:d,r:k?br(X,D,[d,u]):u}),W=z}),$<Tce&&w)if($<=.001){var K=B/w;i.each(a,function(X,te){if(!isNaN(X)){var ie=i.getItemLayout(te);ie.angle=K;var z=0,se=0;K<m?(z=h+P*(te+1/2)*K,se=z):(z=h+P*te*K+R,se=h+P*(te+1)*K-R),ie.startAngle=z,ie.endAngle=se}})}else T=$/G,W=h,i.each(a,function(X,te){if(!isNaN(X)){var ie=i.getItemLayout(te),z=ie.angle===y?y:X*T,se=0,ce=0;z<m?(se=W+P*z/2,ce=se):(se=W+R,ce=W+P*z-R),ie.startAngle=se,ie.endAngle=ce,W+=P*z}})})}var fAe=Kn();function dM(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var xpt=Math.PI/180;function Ece(n,e,t,r,i,a,o,s,l,c){if(n.length<2)return;function u(v){for(var y=v.rB,w=y*y,S=0;S<v.list.length;S++){var T=v.list[S],C=Math.abs(T.label.y-t),k=r+T.len,A=k*k,D=Math.sqrt(Math.abs((1-C*C/w)*A)),P=e+(D+T.len2)*i,N=P-T.label.x,R=T.targetTextWidth-N*i;pAe(T,R,!0),T.label.x=P}}function d(v){for(var y={list:[],maxY:0},w={list:[],maxY:0},S=0;S<v.length;S++)if(v[S].labelAlignTo==="none"){var T=v[S],C=T.label.y>t?w:y,k=Math.abs(T.label.y-t);if(k>=C.maxY){var A=T.label.x-e-T.len2*i,D=r+T.len,P=Math.abs(A)<D?Math.sqrt(k*k/(1-A*A/D/D)):D;C.rB=P,C.maxY=k}C.list.push(T)}u(y),u(w)}for(var h=n.length,f=0;f<h;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var m=n[f].label.x-c;n[f].linePoints[1][0]+=m,n[f].label.x=c}jEe(n,l,l+o)&&d(n)}function Spt(n,e,t,r,i,a,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<n.length;h++){var f=n[h].label;uU(n[h])||(f.x<e?(u=Math.min(u,f.x),l.push(n[h])):(d=Math.max(d,f.x),c.push(n[h])))}for(var h=0;h<n.length;h++){var m=n[h];if(!uU(m)&&m.linePoints){if(m.labelStyleWidth!=null)continue;var f=m.label,v=m.linePoints,y=void 0;m.labelAlignTo==="edge"?f.x<e?y=v[2][0]-m.labelDistance-o-m.edgeDistance:y=o+i-m.edgeDistance-v[2][0]-m.labelDistance:m.labelAlignTo==="labelLine"?f.x<e?y=u-o-m.bleedMargin:y=o+i-d-m.bleedMargin:f.x<e?y=f.x-o-m.bleedMargin:y=o+i-f.x-m.bleedMargin,m.targetTextWidth=y,pAe(m,y)}}Ece(c,e,t,r,1,i,a,o,s,d),Ece(l,e,t,r,-1,i,a,o,s,u);for(var h=0;h<n.length;h++){var m=n[h];if(!uU(m)&&m.linePoints){var f=m.label,v=m.linePoints,w=m.labelAlignTo==="edge",S=f.style.padding,T=S?S[1]+S[3]:0,C=f.style.backgroundColor?0:T,k=m.rect.width+C,A=v[1][0]-v[2][0];w?f.x<e?v[2][0]=o+m.edgeDistance+k+m.labelDistance:v[2][0]=o+i-m.edgeDistance-k-m.labelDistance:(f.x<e?v[2][0]=f.x+m.labelDistance:v[2][0]=f.x-m.labelDistance,v[1][0]=v[2][0]+A),v[1][1]=v[2][1]=f.y}}}function pAe(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,c=i.overflow,u=a.width+(o?0:l);if(e<u||t){var d=a.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var f=e-l,m=e<u?f:t?f>n.unconstrainedWidth?null:f:null;r.setStyle("width",m)}var v=r.getBoundingRect();a.width=v.width;var y=(r.style.margin||0)+2.1;a.height=v.height+y,a.y-=(a.height-d)/2}}}function uU(n){return n.position==="center"}function _pt(n){var e=n.getData(),t=[],r,i,a=!1,o=(n.get("minShowLabelAngle")||0)*xpt,s=e.getLayout("viewRect"),l=e.getLayout("r"),c=s.width,u=s.x,d=s.y,h=s.height;function f(A){A.ignore=!0}function m(A){if(!A.ignore)return!0;for(var D in A.states)if(A.states[D].ignore===!1)return!0;return!1}e.each(function(A){var D=e.getItemGraphicEl(A),P=D.shape,N=D.getTextContent(),R=D.getTextGuideLine(),L=e.getItemModel(A),B=L.getModel("label"),$=B.get("position")||L.get(["emphasis","label","position"]),G=B.get("distanceToLabelLine"),W=B.get("alignTo"),K=tt(B.get("edgeDistance"),c),X=B.get("bleedMargin"),te=L.getModel("labelLine"),ie=te.get("length");ie=tt(ie,c);var z=te.get("length2");if(z=tt(z,c),Math.abs(P.endAngle-P.startAngle)<o){Z(N.states,f),N.ignore=!0,R&&(Z(R.states,f),R.ignore=!0);return}if(m(N)){var se=(P.startAngle+P.endAngle)/2,ce=Math.cos(se),ee=Math.sin(se),be,fe,De,dt;r=P.cx,i=P.cy;var ve=$==="inside"||$==="inner";if($==="center")be=P.cx,fe=P.cy,dt="center";else{var de=(ve?(P.r+P.r0)/2*ce:P.r*ce)+r,me=(ve?(P.r+P.r0)/2*ee:P.r*ee)+i;if(be=de+ce*3,fe=me+ee*3,!ve){var xe=de+ce*(ie+l-P.r),pe=me+ee*(ie+l-P.r),$e=xe+(ce<0?-1:1)*z,We=pe;W==="edge"?be=ce<0?u+K:u+c-K:be=$e+(ce<0?-G:G),fe=We,De=[[de,me],[xe,pe],[$e,We]]}dt=ve?"center":W==="edge"?ce>0?"right":"left":ce>0?"left":"right"}var ct=Math.PI,xt=0,At=B.get("rotate");if(rr(At))xt=At*(ct/180);else if($==="center")xt=0;else if(At==="radial"||At===!0){var pn=ce<0?-se+ct:-se;xt=pn}else if(At==="tangential"&&$!=="outside"&&$!=="outer"){var Yt=Math.atan2(ce,ee);Yt<0&&(Yt=ct*2+Yt);var Rn=ee>0;Rn&&(Yt=ct+Yt),xt=Yt-ct}if(a=!!xt,N.x=be,N.y=fe,N.rotation=xt,N.setStyle({verticalAlign:"middle"}),ve){N.setStyle({align:dt});var je=N.states.select;je&&(je.x+=N.x,je.y+=N.y)}else{var vn=N.getBoundingRect().clone();vn.applyTransform(N.getComputedTransform());var Fn=(N.style.margin||0)+2.1;vn.y-=Fn/2,vn.height+=Fn,t.push({label:N,labelLine:R,position:$,len:ie,len2:z,minTurnAngle:te.get("minTurnAngle"),maxSurfaceAngle:te.get("maxSurfaceAngle"),surfaceNormal:new ln(ce,ee),linePoints:De,textAlign:dt,labelDistance:G,labelAlignTo:W,edgeDistance:K,bleedMargin:X,rect:vn,unconstrainedWidth:vn.width,labelStyleWidth:N.style.width})}D.setTextConfig({inside:ve})}}),!a&&n.get("avoidLabelOverlap")&&Spt(t,r,i,l,c,h,u,d);for(var v=0;v<t.length;v++){var y=t[v],w=y.label,S=y.labelLine,T=isNaN(w.x)||isNaN(w.y);if(w){w.setStyle({align:y.textAlign}),T&&(Z(w.states,f),w.ignore=!0);var C=w.states.select;C&&(C.x+=w.x,C.y+=w.y)}if(S){var k=y.linePoints;T||!k?(Z(S.states,f),S.ignore=!0):(REe(k,y.minTurnAngle),Wht(k,y.surfaceNormal,y.maxSurfaceAngle),S.setShape({points:k}),w.__hostTarget.textGuideLineConfig={anchor:new ln(k[0][0],k[0][1])})}}}var Tpt=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var o=new Qn;return a.setTextContent(o),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var o=this,s=t.hostModel,l=t.getItemModel(r),c=l.getModel("emphasis"),u=t.getItemLayout(r),d=Me(nw(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){o.setShape(d);return}if(a){o.setShape(d);var h=s.getShallow("animationType");s.ecModel.ssr?(xi(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=d.cx,o.originY=d.cy):h==="scale"?(o.shape.r=u.r0,xi(o,{shape:{r:u.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),xi(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,ar(o,{shape:{endAngle:u.endAngle}},s,r))}else ch(o),ar(o,{shape:d},s,r);o.useStyle(t.getItemVisual(r,"style")),es(o,l);var f=(u.startAngle+u.endAngle)/2,m=s.get("selectedOffset"),v=Math.cos(f)*m,y=Math.sin(f)*m,w=l.getShallow("cursor");w&&o.attr("cursor",w),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=Me({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},nw(c.getModel("itemStyle"),u)),Me(o.ensureState("select"),{x:v,y,shape:nw(l.getModel(["select","itemStyle"]),u)}),Me(o.ensureState("blur"),{shape:nw(l.getModel(["blur","itemStyle"]),u)});var S=o.getTextGuideLine(),T=o.getTextContent();S&&Me(S.ensureState("select"),{x:v,y}),Me(T.ensureState("select"),{x:v,y}),Bi(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),c=l&&l.fill,u=l&&l.opacity;ts(a,ho(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var d=a.getTextContent();a.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var h=t.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new yl,this.setTextGuideLine(f)),BY(this,UY(o),{stroke:c,opacity:Df(s.get(["lineStyle","opacity"]),u,1)})}},e}(ml),Ept=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var o=t.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<o.count();++d)u=o.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var h=fAe(t),f=new ml({shape:Me(hAe(t,i),h)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(m){var v=new Tpt(o,m,c);o.setItemGraphicEl(m,v),l.add(v)}).update(function(m,v){var y=s.getItemGraphicEl(v);y.updateData(o,m,c),y.off("click"),l.add(y),o.setItemGraphicEl(m,y)}).remove(function(m){var v=s.getItemGraphicEl(m);FD(v,t,m)}).execute(),_pt(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(zr);function NT(n,e,t){e=Fe(e)&&{coordDimensions:e}||Me({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=aM(r,e).dimensions,a=new hl(i,n);return a.initData(r,t),a}var hM=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}(),Apt=Kn(),kpt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new hM(ut(this.getData,this),ut(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return NT(this,{coordDimensions:["value"],encodeDefaulter:Qt(bY,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=Apt(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=yot(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){Ow(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(ai);function Cpt(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(rr(o)&&!isNaN(o)&&o<0)})}}}function Dpt(n){n.registerChartView(Ept),n.registerSeriesModel(kpt),NTe("pie",n.registerAction),n.registerLayout(Qt(wpt,"pie")),n.registerProcessor(dM("pie")),n.registerProcessor(Cpt("pie"))}var Ipt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ai),gAe=4,Mpt=function(){function n(){}return n}(),Ppt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Mpt},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=t.getContext?t.getContext():t,c=l&&a[0]<gAe,u=this.softClipShape,d;if(c){this._ctx=l;return}for(this._ctx=null,d=this._off;d<i.length;){var h=i[d++],f=i[d++];isNaN(h)||isNaN(f)||u&&!u.contain(h,f)||(s.x=h-a[0]/2,s.y=f-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(t,s,!0))}this.incremental&&(this._off=d,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,i=t.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||a.fillRect(l-i[0]/2,c-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=a.length/2-1;c>=0;c--){var u=c*2,d=a[u]-s/2,h=a[u+1]-l/2;if(t>=d&&r>=h&&t<=d+s&&r<=h+l)return c}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,c=1/0,u=-1/0,d=-1/0,h=0;h<i.length;){var f=i[h++],m=i[h++];l=Math.min(f,l),u=Math.max(f,u),c=Math.min(m,c),d=Math.max(m,d)}t=this._rect=new dn(l-o/2,c-s/2,u-l+o,d-c+s)}return t},e}(Cn),Npt=function(){function n(){this.group=new jt}return n.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,i)}r.setShape("points",t),r.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,r){var i=this._newAdded[0],a=t.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:a}),this._setCommon(c,t,r)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new Ppt({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Da(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<gAe;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=t.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var c=Ut(e);c.seriesIndex=i.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var d=e.hoverDataIdx;d>=0&&(c.dataIndex=d+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Rpt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateSymbolDraw(a,t);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,i){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=uM("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Npt:new lM,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(zr),Opt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(On),eG=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Ca).models[0]},e.type="cartesian2dAxis",e}(On);Ia(eG,oM);var mAe={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Lpt=sn({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},mAe),YY=sn({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},mAe),jpt=sn({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},YY),Fpt=Dt({logBase:10},YY);const vAe={category:Lpt,value:YY,time:jpt,log:Fpt};var $pt={value:1,category:1,time:1,log:1};function G1(n,e,t,r){Z($pt,function(i,a){var o=sn(sn({},vAe[a],!0),r,!0),s=function(l){_e(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+a,u}return c.prototype.mergeDefaultAndTheme=function(u,d){var h=BD(this),f=h?kT(u):{},m=d.getTheme();sn(u,m.get(a+"Axis")),sn(u,this.getDefaultOption()),u.type=Ace(u),h&&hy(u,f,h)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=qH.createByAxisModel(this))},c.prototype.getCategories=function(u){var d=this.option;if(d.type==="category")return u?d.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+a,c.defaultOption=o,c}(t);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(e+"Axis",Ace)}function Ace(n){return n.type||(n.data?"category":"value")}var Bpt=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return Be(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),vr(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}(),tG=["x","y"];function kce(n){return n.type==="interval"||n.type==="time"}var Upt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=tG,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!kce(t)||!kce(r))){var i=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],c=a[1]-a[0];if(!(!l||!c)){var u=(s[0]-o[0])/l,d=(s[1]-o[1])/c,h=o[0]-i[0]*u,f=o[1]-a[0]*d,m=this._transform=[u,0,0,d,h,f];this._invTransform=wT([],m)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new dn(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Zo(i,t,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(t[0]),c=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return Zo(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(r[0],r[1])-a+t,l=Math.max(i[0],i[1])-o+t;return new dn(a,o,s,l)},e}(Bpt),Vpt=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(fh);function nG(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,c=i.dim,u=r.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,m=c==="x"?[d[2]-f,d[3]+f]:[d[0]-f,d[1]+f];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));m[h.onZero]=Math.max(Math.min(v,m[1]),m[0])}a.position=[c==="y"?m[h[l]]:d[0],c==="x"?m[h[l]]:d[3]],a.rotation=Math.PI/2*(c==="x"?0:1);var y={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=y[s],a.labelOffset=o?m[h[s]]-m[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Io(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var w=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-w:w,a.z2=1,a}function Cce(n){return n.get("coordinateSystem")==="cartesian2d"}function Dce(n){var e={xAxisModel:null,yAxisModel:null};return Z(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,Ca).models[0];e[r]=a}),e}var dU=Math.log;function yAe(n,e,t){var r=Lg.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),l=xEe(n,e),c=l.extent,u=l.fixMin,d=l.fixMax;if(n.type==="log"){var h=dU(n.base);c=[dU(c[0])/h,dU(c[1])/h]}n.setExtent(c[0],c[1]),n.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:d});var f=r.getExtent.call(n);u&&(c[0]=f[0]),d&&(c[1]=f[1]);var m=r.getInterval.call(n),v=c[0],y=c[1];if(u&&d)m=(y-v)/o;else if(u)for(y=c[0]+m*o;y<c[1]&&isFinite(y)&&isFinite(c[1]);)m=X6(m),y=c[0]+m*o;else if(d)for(v=c[1]-m*o;v>c[0]&&isFinite(v)&&isFinite(c[0]);)m=X6(m),v=c[1]-m*o;else{var w=n.getTicks().length-1;w>o&&(m=X6(m));var S=m*o;y=Math.ceil(c[1]/m)*m,v=na(y-S),v<0&&c[0]>=0?(v=0,y=na(S)):y>0&&c[1]<=0&&(y=0,v=-na(S))}var T=(i[0].value-a[0].value)/s,C=(i[o].value-a[o].value)/s;r.setExtent.call(n,v+m*T,y+m*C),r.setInterval.call(n,m),(T||C)&&r.setNiceExtent.call(n,v+m,y-m)}var zpt=function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=tG,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,l=Ln(o),c=l.length;if(c){for(var u=[],d=c-1;d>=0;d--){var h=+l[d],f=o[h],m=f.model,v=f.scale;YH(v)&&m.get("alignTicks")&&m.get("interval")==null?u.push(f):(z1(v,m),YH(v)&&(s=f))}u.length&&(s||(s=u.pop(),z1(s.scale,s.model)),Z(u,function(y){yAe(y.scale,y.model,s.scale)}))}}i(r.x),i(r.y);var a={};Z(r.x,function(o){Ice(r,"y",o,a)}),Z(r.y,function(o){Ice(r,"x",o,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=qa(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(Z(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=_ht(c);if(u){var d=c.isHorizontal()?"height":"width",h=c.model.get(["axisLabel","margin"]);o[d]-=u[d]+h,c.position==="top"?o.y+=u.height+h:c.position==="left"&&(o.x+=u.width+h)}}}),l()),Z(this._coordsList,function(c){c.calcAffineTransform()});function l(){Z(s,function(c){var u=c.isHorizontal(),d=u?[0,o.width]:[0,o.height],h=c.inverse?1:0;c.setExtent(d[h],d[1-h]),Hpt(c,u?o.x:o.y)})}},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}It(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Ca).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Ca).models[0],a=e.gridModel,o=this._coordsList,s,l;if(t)s=t.coordinateSystem,mn(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var c=a.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,Z(s.x,function(u,d){Z(s.y,function(h,f){var m="x"+d+"y"+f,v=new Upt(m);v.master=i,v.model=e,i._coordsMap[m]=v,i._coordsList.push(v),v.addAxis(u),v.addAxis(h)})});function c(u){return function(d,h){if(hU(d,e)){var f=d.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var m=new Vpt(u,mF(d),[0,0],d.get("type"),f),v=m.type==="category";m.onBand=v&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.grid=a,m.index=h,a._axesList.push(m),s[u][h]=m,l[u]++}}}},n.prototype._updateScale=function(e,t){Z(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(Cce(i)){var a=Dce(i),o=a.xAxisModel,s=a.yAxisModel;if(!hU(o,t)||!hU(s,t))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=i.getData(),u=l.getAxis("x"),d=l.getAxis("y");r(c,u),r(c,d)}},this);function r(i,a){Z(P2(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return Z(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);mn(t,a)<0&&t.push(a),mn(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var o=new n(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(Cce(i)){var a=Dce(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;i.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},n.dimensions=tG,n}();function hU(n,e){return n.getCoordSysModel()===e}function Ice(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,o=t.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)Mce(i[l])&&(a=i[l]);else for(var c in i)if(i.hasOwnProperty(c)&&Mce(i[c])&&!r[u(i[c])]){a=i[c];break}a&&(r[u(a)]=!0);function u(d){return d.dim+"_"+d.index}}function Mce(n){return n&&n.type!=="category"&&n.type!=="time"&&Sht(n)}function Hpt(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}var Vv=Math.PI,fl=function(){function n(e,t){this.group=new jt,this.opt=t,this.axisModel=e,Dt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new jt({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!Pce[e]},n.prototype.add=function(e){Pce[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=R_e(t-e),a,o;return RD(i)?(o=r>0?"top":"bottom",a="center"):RD(i-Vv)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Vv?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),Pce={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],c=s[0]>l[0];o&&(Zo(s,s,o),Zo(l,l,o));var u=Me({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new so({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});B1(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var h=e.get(["axisLine","symbol"]);if(h!=null){var f=e.get(["axisLine","symbolSize"]);st(h)&&(h=[h,h]),(st(f)||rr(f))&&(f=[f,f]);var m=tx(e.get(["axisLine","symbolOffset"])||0,f),v=f[0],y=f[1];Z([{rotate:n.rotation+Math.PI/2,offset:m[0],r:0},{rotate:n.rotation-Math.PI/2,offset:m[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(w,S){if(h[S]!=="none"&&h[S]!=null){var T=Da(h[S],-v/2,-y/2,v,y,u.stroke,!0),C=w.r+w.offset,k=c?l:s;T.attr({rotation:w.rotate,x:k[0]+C*Math.cos(n.rotation),y:k[1]-C*Math.sin(n.rotation),silent:!0,z2:11}),t.add(T)}})}}},axisTickLabel:function(n,e,t,r){var i=qpt(t,r,e,n),a=Kpt(t,r,e,n);if(Wpt(e,a,i),Ypt(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=OEe(Be(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));FEe(o)}},axisName:function(n,e,t,r){var i=Io(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=n.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[a==="start"?c[0]-u*l:a==="end"?c[1]+u*l:(c[0]+c[1])/2,Rce(a)?n.labelOffset+o*l:0],h,f=e.get("nameRotate");f!=null&&(f=f*Vv/180);var m;Rce(a)?h=fl.innerTextLayout(n.rotation,f??n.rotation,o):(h=Gpt(n.rotation,a,f||0,c),m=n.axisNameAvailableWidth,m!=null&&(m=Math.abs(m/Math.sin(h.rotation)),!isFinite(m)&&(m=null)));var v=s.getFont(),y=e.get("nameTruncate",!0)||{},w=y.ellipsis,S=Io(n.nameTruncateMaxWidth,y.maxWidth,m),T=new Qn({x:d[0],y:d[1],rotation:h.rotation,silent:fl.isLabelSilent(e),style:ri(s,{text:i,font:v,overflow:"truncate",width:S,ellipsis:w,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(Jw({el:T,componentModel:e,itemName:i}),T.__fullText=i,T.anid="name",e.get("triggerEvent")){var C=fl.makeAxisEventDataBase(e);C.targetType="axisName",C.name=i,Ut(T).eventData=C}r.add(T),T.updateTransform(),t.add(T),T.decomposeTransform()}}};function Gpt(n,e,t,r){var i=R_e(t-n),a,o,s=r[0]>r[1],l=e==="start"&&!s||e!=="start"&&s;return RD(i-Vv/2)?(o=l?"bottom":"top",a="center"):RD(i-Vv*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<Vv*1.5&&i>Vv/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function Wpt(n,e,t){if(!SEe(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],h=t[t.length-2];r===!1?(xu(a),xu(c)):Nce(a,o)&&(r?(xu(o),xu(u)):(xu(a),xu(c))),i===!1?(xu(s),xu(d)):Nce(l,s)&&(i?(xu(l),xu(h)):(xu(s),xu(d)))}}function xu(n){n&&(n.ignore=!0)}function Nce(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=Uj([]);return Qw(i,i,-n.rotation),t.applyTransform(yg([],i,n.getLocalTransform())),r.applyTransform(yg([],i,e.getLocalTransform())),t.intersect(r)}}function Rce(n){return n==="middle"||n==="center"}function bAe(n,e,t,r,i){for(var a=[],o=[],s=[],l=0;l<n.length;l++){var c=n[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=t,e&&(Zo(o,o,e),Zo(s,s,e));var u=new so({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});B1(u.shape,u.style.lineWidth),u.anid=i+"_"+n[l].tickValue,a.push(u)}return a}function qpt(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),c=i.getTicksCoords(),u=bAe(c,e.transform,l,Dt(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function Ypt(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),c=Dt(s.getLineStyle(),Dt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var d=bAe(o[u],e.transform,l,c,"minorticks_"+u),h=0;h<d.length;h++)n.add(d[h])}}function Kpt(n,e,t,r){var i=t.axis,a=Io(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),c=(Io(r.labelRotate,o.get("rotate"))||0)*Vv/180,u=fl.innerTextLayout(r.rotation,c,r.labelDirection),d=t.getCategories&&t.getCategories(!0),h=[],f=fl.isLabelSilent(t),m=t.get("triggerEvent");return Z(l,function(v,y){var w=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,S=v.formattedLabel,T=v.rawLabel,C=o;if(d&&d[w]){var k=d[w];It(k)&&k.textStyle&&(C=new wr(k.textStyle,o,t.ecModel))}var A=C.getTextColor()||t.get(["axisLine","lineStyle","color"]),D=i.dataToCoord(w),P=C.getShallow("align",!0)||u.textAlign,N=Wt(C.getShallow("alignMinLabel",!0),P),R=Wt(C.getShallow("alignMaxLabel",!0),P),L=C.getShallow("verticalAlign",!0)||C.getShallow("baseline",!0)||u.textVerticalAlign,B=Wt(C.getShallow("verticalAlignMinLabel",!0),L),$=Wt(C.getShallow("verticalAlignMaxLabel",!0),L),G=new Qn({x:D,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(v.level||0),style:ri(C,{text:S,align:y===0?N:y===l.length-1?R:P,verticalAlign:y===0?B:y===l.length-1?$:L,fill:kt(A)?A(i.type==="category"?T:i.type==="value"?w+"":w,y):A})});if(G.anid="label_"+w,Jw({el:G,componentModel:t,itemName:S,formatterParamsExtra:{isTruncated:function(){return G.isTruncated},value:T,tickIndex:y}}),m){var W=fl.makeAxisEventDataBase(t);W.targetType="axisLabel",W.value=T,W.tickIndex=y,i.type==="category"&&(W.dataIndex=w),Ut(G).eventData=W}e.add(G),G.updateTransform(),h.push(G),n.add(G),G.decomposeTransform()}),h}}function Xpt(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Zpt(t,n,e),t.seriesInvolved&&Jpt(t,n),t}function Zpt(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];Z(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=KD(s.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=s;var u=s.model,d=u.getModel("tooltip",r);if(Z(s.getAxes(),Qt(v,!1,null)),s.getTooltipAxes&&r&&d.get("show")){var h=d.get("trigger")==="axis",f=d.get(["axisPointer","type"])==="cross",m=s.getTooltipAxes(d.get(["axisPointer","axis"]));(h||f)&&Z(m.baseAxes,Qt(v,f?"cross":!0,h)),f&&Z(m.otherAxes,Qt(v,"cross",!1))}function v(y,w,S){var T=S.model.getModel("axisPointer",i),C=T.get("show");if(!(!C||C==="auto"&&!y&&!rG(T))){w==null&&(w=T.get("triggerTooltip")),T=y?Qpt(S,d,i,e,y,w):T;var k=T.get("snap"),A=T.get("triggerEmphasis"),D=KD(S.model),P=w||k||S.type==="category",N=n.axesInfo[D]={key:D,axis:S,coordSys:s,axisPointerModel:T,triggerTooltip:w,triggerEmphasis:A,involveSeries:P,snap:k,useHandle:rG(T),seriesModels:[],linkGroup:null};c[D]=N,n.seriesInvolved=n.seriesInvolved||P;var R=egt(a,S);if(R!=null){var L=o[R]||(o[R]={axesInfo:{}});L.axesInfo[D]=N,L.mapper=a[R].mapper,N.linkGroup=L}}}})}function Qpt(n,e,t,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Z(s,function(h){l[h]=Nt(o.get(h))}),l.snap=n.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),i==="cross"){var u=o.get(["label","show"]);if(c.show=u??!0,!a){var d=l.lineStyle=o.get("crossStyle");d&&Dt(c,d.textStyle)}}return n.model.getModel("axisPointer",new wr(l,t,r))}function Jpt(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||Z(n.coordSysAxesInfo[KD(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function egt(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(fU(a[r+"AxisId"],t.id)||fU(a[r+"AxisIndex"],t.componentIndex)||fU(a[r+"AxisName"],t.name))return i}}function fU(n,e){return n==="all"||Fe(n)&&mn(n,e)>=0||n===e}function tgt(n){var e=KY(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=rG(t);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function KY(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[KD(n)]}function ngt(n){var e=KY(n);return e&&e.axisPointerModel}function rG(n){return!!n.get(["handle","show"])}function KD(n){return n.type+"||"+n.id}var Oce={},ix=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&tgt(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=ngt(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){Oce[t]=r},e.getAxisPointerClass=function(t){return t&&Oce[t]},e.type="axis",e}(Mi),iG=Kn();function wAe(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:a,clamp:!0});if(c.length){var u=s.length,d=iG(n).splitAreaColors,h=yt(),f=0;if(d)for(var m=0;m<c.length;m++){var v=d.get(c[m].tickValue);if(v!=null){f=(v+(u-1)*m)%u;break}}var y=i.toGlobalCoord(c[0].coord),w=o.getAreaStyle();s=Fe(s)?s:[s];for(var m=1;m<c.length;m++){var S=i.toGlobalCoord(c[m].coord),T=void 0,C=void 0,k=void 0,A=void 0;i.isHorizontal()?(T=y,C=l.y,k=S-T,A=l.height,y=T+k):(T=l.x,C=y,k=l.width,A=S-C,y=C+A);var D=c[m-1].tickValue;D!=null&&h.set(D,f),e.add(new Yn({anid:D!=null?"area_"+D:null,shape:{x:T,y:C,width:k,height:A},style:Dt({fill:s[f]},w),autoBatch:!0,silent:!0})),f=(f+1)%u}iG(n).splitAreaColors=h}}}function xAe(n){iG(n).splitAreaColors=null}var rgt=["axisLine","axisTickLabel","axisName"],igt=["splitArea","splitLine","minorSplitLine"],SAe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new jt,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),l=nG(s,t),c=new fl(t,Me({handleAutoShown:function(d){for(var h=s.coordinateSystem.getCartesians(),f=0;f<h.length;f++)if(YH(h[f].getOtherAxis(t.axis).scale))return!0;return!1}},l));Z(rgt,c.add,c),this._axisGroup.add(c.getGroup()),Z(igt,function(d){t.get([d,"show"])&&agt[d](this,this._axisGroup,t,s)},this);var u=a&&a.type==="changeAxisOrder"&&a.isInitSort;u||tM(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){xAe(this)},e.type="cartesianAxis",e}(ix),agt={splitLine:function(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=a.get("showMinLine")!==!1,c=a.get("showMaxLine")!==!1;s=Fe(s)?s:[s];for(var u=r.coordinateSystem.getRect(),d=i.isHorizontal(),h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=o.getLineStyle(),w=0;w<f.length;w++){var S=i.toGlobalCoord(f[w].coord);if(!(w===0&&!l||w===f.length-1&&!c)){var T=f[w].tickValue;d?(m[0]=S,m[1]=u.y,v[0]=S,v[1]=u.y+u.height):(m[0]=u.x,m[1]=S,v[0]=u.x+u.width,v[1]=S);var C=h++%s.length,k=new so({anid:T!=null?"line_"+T:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},style:Dt({stroke:s[C]},y),silent:!0});B1(k.shape,y.lineWidth),e.add(k)}}}},minorSplitLine:function(n,e,t,r){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=i.getMinorTicksCoords();if(c.length)for(var u=[],d=[],h=o.getLineStyle(),f=0;f<c.length;f++)for(var m=0;m<c[f].length;m++){var v=i.toGlobalCoord(c[f][m].coord);l?(u[0]=v,u[1]=s.y,d[0]=v,d[1]=s.y+s.height):(u[0]=s.x,u[1]=v,d[0]=s.x+s.width,d[1]=v);var y=new so({anid:"minor_line_"+c[f][m].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:h,silent:!0});B1(y.shape,h.lineWidth),e.add(y)}},splitArea:function(n,e,t,r){wAe(n,e,t,r)}},_Ae=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(SAe),ogt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=_Ae.type,t}return e.type="yAxis",e}(SAe),sgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new Yn({shape:t.coordinateSystem.getRect(),style:Dt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Mi),Lce={offset:0};function TAe(n){n.registerComponentView(sgt),n.registerComponentModel(Opt),n.registerCoordinateSystem("cartesian2d",zpt),G1(n,"x",eG,Lce),G1(n,"y",eG,Lce),n.registerComponentView(_Ae),n.registerComponentView(ogt),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function lgt(n){En(TAe),n.registerSeriesModel(Ipt),n.registerChartView(Rpt),n.registerLayout(uM("scatter"))}function cgt(n){n.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();Z(a,function(o,s){t.each(t.mapDimension(a[s].dim),function(l,c){r[c]=r[c]||[];var u=i.dataToPoint(l,s);r[c][s]=jce(u)?u:Fce(i)})}),t.each(function(o){var s=Kit(r[o],function(l){return jce(l)})||Fce(i);r[o].push(s.slice()),t.setItemLayout(o,r[o])})}})}function jce(n){return!isNaN(n[0])&&!isNaN(n[1])}function Fce(n){return[n.cx,n.cy]}function ugt(n){var e=n.polar;if(e){Fe(e)||(e=[e]);var t=[];Z(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],Fe(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):t.push(r)}),n.polar=t}Z(n.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var dgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;function c(h,f){var m=h.getItemVisual(f,"symbol")||"circle";if(m!=="none"){var v=MT(h.getItemVisual(f,"symbolSize")),y=Da(m,-1,-1,2,2),w=h.getItemVisual(f,"symbolRotate")||0;return y.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:w*Math.PI/180||0}),y}}function u(h,f,m,v,y,w){m.removeAll();for(var S=0;S<f.length-1;S++){var T=c(v,y);T&&(T.__dimIdx=S,h[S]?(T.setPosition(h[S]),ex[w?"initProps":"updateProps"](T,{x:f[S][0],y:f[S][1]},t,y)):T.setPosition(f[S]),m.add(T))}}function d(h){return Be(h,function(f){return[a.cx,a.cy]})}s.diff(l).add(function(h){var f=s.getItemLayout(h);if(f){var m=new vl,v=new yl,y={shape:{points:f}};m.shape.points=d(f),v.shape.points=d(f),xi(m,y,t,h),xi(v,y,t,h);var w=new jt,S=new jt;w.add(v),w.add(m),w.add(S),u(v.shape.points,f,S,s,h,!0),s.setItemGraphicEl(h,w)}}).update(function(h,f){var m=l.getItemGraphicEl(f),v=m.childAt(0),y=m.childAt(1),w=m.childAt(2),S={shape:{points:s.getItemLayout(h)}};S.shape.points&&(u(v.shape.points,S.shape.points,w,s,h,!1),ch(y),ch(v),ar(v,S,t),ar(y,S,t),s.setItemGraphicEl(h,m))}).remove(function(h){o.remove(l.getItemGraphicEl(h))}).execute(),s.eachItemGraphicEl(function(h,f){var m=s.getItemModel(f),v=h.childAt(0),y=h.childAt(1),w=h.childAt(2),S=s.getItemVisual(f,"style"),T=S.fill;o.add(h),v.useStyle(Dt(m.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),es(v,m,"lineStyle"),es(y,m,"areaStyle");var C=m.getModel("areaStyle"),k=C.isEmpty()&&C.parentModel.isEmpty();y.ignore=k,Z(["emphasis","select","blur"],function(P){var N=m.getModel([P,"areaStyle"]),R=N.isEmpty()&&N.parentModel.isEmpty();y.ensureState(P).ignore=R&&k}),y.useStyle(Dt(C.getAreaStyle(),{fill:T,opacity:.7,decal:S.decal}));var A=m.getModel("emphasis"),D=A.getModel("itemStyle").getItemStyle();w.eachChild(function(P){if(P instanceof Ro){var N=P.style;P.useStyle(Me({image:N.image,x:N.x,y:N.y,width:N.width,height:N.height},S))}else P.useStyle(S),P.setColor(T),P.style.strokeNoScale=!0;var R=P.ensureState("emphasis");R.style=Nt(D);var L=s.getStore().get(s.getDimensionIndex(P.__dimIdx),f);(L==null||isNaN(L))&&(L=""),ts(P,ho(m),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:P.__dimIdx,defaultText:L,inheritColor:T,defaultOpacity:S.opacity})}),Bi(h,A.get("focus"),A.get("blurScope"),A.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(zr),hgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new hM(ut(this.getData,this),ut(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return NT(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(t),c=l===""?this.name:l,u=xTe(this,t);return fo("section",{header:c,sortBlocks:!0,blocks:Be(s,function(d){var h=a.get(a.mapDimension(d.dim),t);return fo("nameValue",{markerType:"subItem",markerColor:u,name:d.name,value:h,sortParam:h})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(Be(i.dimensions,function(c){return r.mapDimension(c)}),t),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(ai),XA=vAe.value;function DN(n,e){return Dt({show:e},n)}var fgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),d=this.get("axisNameGap"),h=this.get("triggerEvent"),f=Be(this.get("indicator")||[],function(m){m.max!=null&&m.max>0&&!m.min?m.min=0:m.min!=null&&m.min<0&&!m.max&&(m.max=0);var v=l;m.color!=null&&(v=Dt({color:m.color},l));var y=sn(Nt(m),{boundaryGap:t,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:m.text,showName:c,nameLocation:"end",nameGap:d,nameTextStyle:v,triggerEvent:h},!1);if(st(u)){var w=y.name;y.name=u.replace("{value}",w??"")}else kt(u)&&(y.name=u(y.name,y));var S=new wr(y,null,this.ecModel);return Ia(S,oM.prototype),S.mainType="radar",S.componentIndex=this.componentIndex,S},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:sn({lineStyle:{color:"#bbb"}},XA.axisLine),axisLabel:DN(XA.axisLabel,!1),axisTick:DN(XA.axisTick,!1),splitLine:DN(XA.splitLine,!0),splitArea:DN(XA.splitArea,!0),indicator:[]},e}(On),pgt=["axisLine","axisTickLabel","axisName"],ggt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes(),a=Be(i,function(o){var s=o.model.get("showName")?o.name:"",l=new fl(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});Z(a,function(o){Z(pgt,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=t.get("shape"),o=t.getModel("splitLine"),s=t.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),u=o.get("show"),d=s.get("show"),h=l.get("color"),f=c.get("color"),m=Fe(h)?h:[h],v=Fe(f)?f:[f],y=[],w=[];function S(W,K,X){var te=X%K.length;return W[te]=W[te]||[],te}if(a==="circle")for(var T=i[0].getTicksCoords(),C=r.cx,k=r.cy,A=0;A<T.length;A++){if(u){var D=S(y,m,A);y[D].push(new Xg({shape:{cx:C,cy:k,r:T[A].coord}}))}if(d&&A<T.length-1){var D=S(w,v,A);w[D].push(new QI({shape:{cx:C,cy:k,r0:T[A].coord,r:T[A+1].coord}}))}}else for(var P,N=Be(i,function(W,K){var X=W.getTicksCoords();return P=P==null?X.length-1:Math.min(X.length-1,P),Be(X,function(te){return r.coordToPoint(te.coord,K)})}),R=[],A=0;A<=P;A++){for(var L=[],B=0;B<i.length;B++)L.push(N[B][A]);if(L[0]&&L.push(L[0].slice()),u){var D=S(y,m,A);y[D].push(new yl({shape:{points:L}}))}if(d&&R){var D=S(w,v,A-1);w[D].push(new vl({shape:{points:L.concat(R)}}))}R=L.slice().reverse()}var $=l.getLineStyle(),G=c.getAreaStyle();Z(w,function(W,K){this.group.add(Lu(W,{style:Dt({stroke:"none",fill:v[K%v.length]},G),silent:!0}))},this),Z(y,function(W,K){this.group.add(Lu(W,{style:Dt({fill:"none",stroke:m[K%m.length]},$),silent:!0}))},this)},e.type="radar",e}(Mi),mgt=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(fh),vgt=function(){function n(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=Be(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new mgt(o,new Lg);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},n.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],i=r.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},n.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var a=Math.atan2(-r,t),o=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],d=Math.abs(a-u.angle);d<o&&(s=u,l=c,o=d)}return[l,+(s&&s.coordToData(i))]},n.prototype.resize=function(e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight(),o=Math.min(i,a)/2;this.cx=tt(r[0],i),this.cy=tt(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(st(s)||rr(s))&&(s=[0,s]),this.r0=tt(s[0],o),this.r=tt(s[1],o),Z(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},n.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;Z(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var c=s.getData();Z(r,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var a=i.get("splitNumber"),o=new Lg;o.setExtent(0,a),o.setInterval(1),Z(r,function(s,l){yAe(s.scale,s.model,o)})},n.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.create=function(e,t){var r=[];return e.eachComponent("radar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},n.dimensions=[],n}();function ygt(n){n.registerCoordinateSystem("radar",vgt),n.registerComponentModel(fgt),n.registerComponentView(ggt),n.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function bgt(n){En(ygt),n.registerChartView(dgt),n.registerSeriesModel(hgt),n.registerLayout(cgt),n.registerProcessor(dM("radar")),n.registerPreprocessor(ugt)}var $ce="\0_ec_interaction_mutex";function wgt(n,e,t){var r=XY(n);r[e]=t}function xgt(n,e,t){var r=XY(n),i=r[e];i===t&&(r[e]=null)}function Bce(n,e){return!!XY(n)[e]}function XY(n){return n[$ce]||(n[$ce]={})}Wf({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ma);var fM=function(n){_e(e,n);function e(t){var r=n.call(this)||this;r._zr=t;var i=ut(r._mousedownHandler,r),a=ut(r._mousemoveHandler,r),o=ut(r._mouseupHandler,r),s=ut(r._mousewheelHandler,r),l=ut(r._pinchHandler,r);return r.enable=function(c,u){this.disable(),this._opt=Dt(Nt(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(t.on("mousedown",i),t.on("mousemove",a),t.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(t.on("mousewheel",s),t.on("pinch",l))},r.disable=function(){t.off("mousedown",i),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",s),t.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!hoe(t)){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,a=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!DR("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||Bce(this._zr,"globalPan"))){var r=t.offsetX,i=t.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&Mg(t.event),EAe(this,"pan","moveOnMouseMove",t,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){hoe(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var r=DR("zoomOnMouseWheel",t,this._opt),i=DR("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,o=Math.abs(a),s=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!i)){if(r){var c=o>3?1.4:o>1?1.2:1.1,u=a>0?c:1/c;pU(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(i){var d=Math.abs(a),h=(a>0?1:-1)*(d>3?.4:d>1?.15:.05);pU(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!Bce(this._zr,"globalPan")){var r=t.pinchScale>1?1.1:1/1.1;pU(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(Xu);function pU(n,e,t,r,i){n.pointerChecker&&n.pointerChecker(r,i.originX,i.originY)&&(Mg(r.event),EAe(n,e,t,r,i))}function EAe(n,e,t,r,i){i.isAvailableBehavior=ut(DR,null,t,r),n.trigger(e,i)}function DR(n,e,t){var r=t[n];return!n||r&&(!st(r)||e.event[r+"Key"])}function ZY(n,e,t){var r=n.target;r.x+=e,r.y+=t,r.dirty()}function QY(n,e,t,r){var i=n.target,a=n.zoomLimit,o=n.zoom=n.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var c=o/n.zoom;n.zoom=o,i.x-=(t-i.x)*(c-1),i.y-=(r-i.y)*(c-1),i.scaleX*=c,i.scaleY*=c,i.dirty()}var Sgt={axisPointer:1,tooltip:1,brush:1};function yF(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!Sgt.hasOwnProperty(r.mainType)&&i&&i.model!==t}function AAe(n){if(st(n)){var e=new DOMParser;n=e.parseFromString(n,"text/xml")}var t=n;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var gU,j2={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Uce=Ln(j2),F2={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Vce=Ln(F2),_gt=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(e,t){t=t||{};var r=AAe(e);this._defsUsePending=[];var i=new jt;this._root=i;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),xc(r,i,null,!0,!1);for(var c=r.firstChild;c;)this._parseNode(c,i,a,null,!1,!1),c=c.nextSibling;Agt(this._defs,this._defsUsePending),this._defsUsePending=[];var u,d;if(o){var h=bF(o);h.length>=4&&(u={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(u&&s!=null&&l!=null&&(d=CAe(u,{x:0,y:0,width:s,height:l}),!t.ignoreViewBox)){var f=i;i=new jt,i.add(f),f.scaleX=f.scaleY=d.scale,f.x=d.x,f.y=d.y}return!t.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new Yn({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:u,viewBoxTransform:d,named:a}},n.prototype._parseNode=function(e,t,r,i,a,o){var s=e.nodeName.toLowerCase(),l,c=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=t;else{if(!a){var u=gU[s];if(u&&ft(gU,s)){l=u.call(this,e,t);var d=e.getAttribute("name");if(d){var h={name:d,namedFrom:null,svgNodeTagLower:s,el:l};r.push(h),s==="g"&&(c=h)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});t.add(l)}}var f=zce[s];if(f&&ft(zce,s)){var m=f.call(this,e),v=e.getAttribute("id");v&&(this._defs[v]=m)}}if(l&&l.isGroup)for(var y=e.firstChild;y;)y.nodeType===1?this._parseNode(y,l,r,c,a,o):y.nodeType===3&&o&&this._parseText(y,l),y=y.nextSibling},n.prototype._parseText=function(e,t){var r=new $1({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Su(t,r),xc(e,r,this._defsUsePending,!1,!1),Tgt(r,t);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=r.getBoundingRect();return this._textX+=s.width,t.add(r),r},n.internalField=function(){gU={g:function(e,t){var r=new jt;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new Yn;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new Xg;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new so;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new Zj;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Wce(r));var a=new vl({shape:{points:i||[]},silent:!0});return Su(t,a),xc(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),i;r&&(i=Wce(r));var a=new yl({shape:{points:i||[]},silent:!0});return Su(t,a),xc(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new Ro;return Su(t,r),xc(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new jt;return Su(t,s),xc(e,s,this._defsUsePending,!1,!0),s},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",o=e.getAttribute("dy")||"0",s=new jt;return Su(t,s),xc(e,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(e,t){var r=e.getAttribute("d")||"",i=g1e(r);return Su(t,i),xc(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),n}(),zce={lineargradient:function(n){var e=parseInt(n.getAttribute("x1")||"0",10),t=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new eM(e,t,r,i);return Hce(n,a),Gce(n,a),a},radialgradient:function(n){var e=parseInt(n.getAttribute("cx")||"0",10),t=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),i=new b1e(e,t,r);return Hce(n,i),Gce(n,i),i}};function Hce(n,e){var t=n.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function Gce(n,e){for(var t=n.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};kAe(t,a,a);var o=a.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:o})}t=t.nextSibling}}function Su(n,e){n&&n.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Dt(e.__inheritedStyle,n.__inheritedStyle))}function Wce(n){for(var e=bF(n),t=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([i,a])}return t}function xc(n,e,t,r,i){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};n.nodeType===1&&(Dgt(n,e),kAe(n,o,s),r||Igt(n,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=qce(a,"fill",o.fill,t)),o.stroke!=null&&(a.style.stroke=qce(a,"stroke",o.stroke,t)),Z(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),Z(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=Be(bF(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function Tgt(n,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),n.style.textAlign=s)}}var Egt=/^url\(\s*#(.*?)\)/;function qce(n,e,t,r){var i=t&&t.match(Egt);if(i){var a=Qd(i[1]);r.push([n,e,a]);return}return t==="none"&&(t=null),t}function Agt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=n[r[2]]}}var kgt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function bF(n){return n.match(kgt)||[]}var Cgt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,mU=Math.PI/180;function Dgt(n,e){var t=n.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],i=null;t.replace(Cgt,function(d,h,f){return r.push(h,f),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=bF(o);switch(i=i||Bc(),s){case"translate":Lf(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":qq(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Qw(i,i,-parseFloat(l[0])*mU,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*mU);yg(i,[1,0,c,1,0,0],i);break;case"skewY":var u=Math.tan(parseFloat(l[0])*mU);yg(i,[1,u,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var Yce=/([^\s:;]+)\s*:\s*([^:;]+)/g;function kAe(n,e,t){var r=n.getAttribute("style");if(r){Yce.lastIndex=0;for(var i;(i=Yce.exec(r))!=null;){var a=i[1],o=ft(j2,a)?j2[a]:null;o&&(e[o]=i[2]);var s=ft(F2,a)?F2[a]:null;s&&(t[s]=i[2])}}}function Igt(n,e,t){for(var r=0;r<Uce.length;r++){var i=Uce[r],a=n.getAttribute(i);a!=null&&(e[j2[i]]=a)}for(var r=0;r<Vce.length;r++){var i=Vce[r],a=n.getAttribute(i);a!=null&&(t[F2[i]]=a)}}function CAe(n,e){var t=e.width/n.width,r=e.height/n.height,i=Math.min(t,r);return{scale:i,x:-(n.x+n.width/2)*i+(e.x+e.width/2),y:-(n.y+n.height/2)*i+(e.y+e.height/2)}}function Mgt(n,e){var t=new _gt;return t.parse(n,e)}var Pgt=yt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Ngt=function(){function n(e,t){this.type="geoSVG",this._usedGraphicMap=yt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=AAe(t)}return n.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=Ogt(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(e){var t,r;try{t=e&&Mgt(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,pl(r!=null)}catch(y){throw new Error(`Invalid svg format
`+y.message)}var i=new jt;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=t.width,o=t.height,s=t.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,d=void 0,h=void 0;if(a!=null?(c=0,d=a):s&&(c=s.x,d=s.width),o!=null?(u=0,h=o):s&&(u=s.y,h=s.height),c==null||u==null){var f=r.getBoundingRect();c==null&&(c=f.x,d=f.width),u==null&&(u=f.y,h=f.height)}l=this._boundingRect=new dn(c,u,d,h)}if(s){var m=CAe(s,l);r.scaleX=r.scaleY=m.scale,r.x=m.x,r.y=m.y}i.setClipPath(new Yn({shape:l.plain()}));var v=[];return Z(t.named,function(y){Pgt.get(y.svgNodeTagLower)!=null&&(v.push(y),Rgt(y.el))}),{root:i,boundingRect:l,named:v}},n.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},n.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},n}();function Rgt(n){n.silent=!1,n.isGroup&&n.traverse(function(e){e.silent=!1})}function Ogt(n){var e=[],t=yt();return Z(n,function(r){if(r.namedFrom==null){var i=new Dht(r.name,r.el);e.push(i),t.set(r.name,i)}}),{regions:e,regionsMap:t}}var aG=[126,25],Kce="南海诸岛",kb=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var wb=0;wb<kb.length;wb++)for(var n_=0;n_<kb[wb].length;n_++)kb[wb][n_][0]/=10.5,kb[wb][n_][1]/=-10.5/.75,kb[wb][n_][0]+=aG[0],kb[wb][n_][1]+=aG[1];function Lgt(n,e){if(n==="china"){for(var t=0;t<e.length;t++)if(e[t].name===Kce)return;e.push(new TEe(Kce,Be(kb,function(r){return{type:"polygon",exterior:r}}),aG))}}var jgt={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function Fgt(n,e){if(n==="china"){var t=jgt[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var $gt=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Bgt(n,e){n==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:$gt[0]})}var Ugt="name",Vgt=function(){function n(e,t,r){this.type="geoJSON",this._parsedMap=yt(),this._mapName=e,this._specialAreas=r,this._geoJSON=Hgt(t)}return n.prototype.load=function(e,t){t=t||Ugt;var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:zgt(i)})}var a=yt(),o=[];return Z(r.regions,function(s){var l=s.name;e&&ft(e,l)&&(s=s.cloneShallow(l=e[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new dn(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,i;try{i=r?Mht(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return Lgt(t,i),Z(i,function(a){var o=a.name;Fgt(t,a),Bgt(t,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function zgt(n){for(var e,t=0;t<n.length;t++){var r=n[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function Hgt(n){return st(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var ZA=yt();const jg={registerMap:function(n,e,t){if(e.svg){var r=new Ngt(n,e.svg);ZA.set(n,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?t=e.specialAreas:i=e;var r=new Vgt(n,i,t);ZA.set(n,r)}},getGeoResource:function(n){return ZA.get(n)},getMapForUser:function(n){var e=ZA.get(n);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(n,e,t){var r=ZA.get(n);if(r)return r.load(e,t)}};var JY=["rect","circle","line","ellipse","polygon","polyline","path"],Ggt=yt(JY),Wgt=yt(JY.concat(["g"])),qgt=yt(JY.concat(["g"])),DAe=Kn();function IN(n){var e=n.getItemStyle(),t=n.get("areaColor");return t!=null&&(e.fill=t),e}function Xce(n){var e=n.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var IAe=function(){function n(e){var t=new jt;this.uid=ET("ec_map_draw"),this._controller=new fM(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new jt),t.add(this._svgGroup=new jt)}return n.prototype.draw=function(e,t,r,i,a){var o=e.mainType==="geo",s=e.getData&&e.getData();o&&t.eachComponent({mainType:"series",subType:"map"},function(w){!s&&w.getHostGeoModel()===e&&(s=w.getData())});var l=e.coordinateSystem,c=this._regionsGroup,u=this.group,d=l.getTransformInfo(),h=d.raw,f=d.roam,m=!c.childAt(0)||a;m?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):ar(u,f,e);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,y={api:r,geo:l,mapOrGeoModel:e,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:h};l.resourceType==="geoJSON"?this._buildGeoJSON(y):l.resourceType==="geoSVG"&&this._buildSVG(y),this._updateController(e,t,r),this._updateMapSelectHandler(e,c,r,i)},n.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=yt(),r=yt(),i=this._regionsGroup,a=e.transformInfoRaw,o=e.mapOrGeoModel,s=e.data,l=e.geo.projection,c=l&&l.stream;function u(f,m){return m&&(f=m(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function d(f){for(var m=[],v=!c&&l&&l.project,y=0;y<f.length;++y){var w=u(f[y],v);w&&m.push(w)}return m}function h(f){return{shape:{points:d(f)}}}i.removeAll(),Z(e.geo.regions,function(f){var m=f.name,v=t.get(m),y=r.get(m)||{},w=y.dataIdx,S=y.regionModel;if(!v){v=t.set(m,new jt),i.add(v),w=s?s.indexOfName(m):null,S=e.isGeo?o.getRegionModel(m):s?s.getItemModel(w):null;var T=S.get("silent",!0);T!=null&&(v.silent=T),r.set(m,{dataIdx:w,regionModel:S})}var C=[],k=[];Z(f.geometries,function(P){if(P.type==="polygon"){var N=[P.exterior].concat(P.interiors||[]);c&&(N=nue(N,c)),Z(N,function(L){C.push(new vl(h(L)))})}else{var R=P.points;c&&(R=nue(R,c,!0)),Z(R,function(L){k.push(new yl(h(L)))})}});var A=u(f.getCenter(),l&&l.project);function D(P,N){if(P.length){var R=new cY({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});v.add(R),Zce(e,R,w,S),Qce(e,R,m,S,o,w,A),N&&(Xce(R),Z(R.states,Xce))}}D(C),D(k,!0)}),t.each(function(f,m){var v=r.get(m),y=v.dataIdx,w=v.regionModel;Jce(e,f,m,w,o,y),eue(e,f,m,w,o),tue(e,f,m,w,o)},this)},n.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=yt(),a=!1;Z(this._svgGraphicRecord.named,function(o){var s=o.name,l=e.mapOrGeoModel,c=e.data,u=o.svgNodeTagLower,d=o.el,h=c?c.indexOfName(s):null,f=l.getRegionModel(s);Ggt.get(u)!=null&&d instanceof Yu&&Zce(e,d,h,f),d instanceof Yu&&(d.culling=!0);var m=f.get("silent",!0);if(m!=null&&(d.silent=m),d.z2EmphasisLift=0,!o.namedFrom&&(qgt.get(u)!=null&&Qce(e,d,s,f,l,h,null),Jce(e,d,s,f,l,h),eue(e,d,s,f,l),Wgt.get(u)!=null)){var v=tue(e,d,s,f,l);v==="self"&&(a=!0);var y=i.get(s)||i.set(s,[]);y.push(d)}},this),this._enableBlurEntireSVG(a,e)},n.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Fw(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},n.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},n.prototype._useSVG=function(e){var t=jg.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},n.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=jg.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(e,t,r){var i=e.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(e.get("roam")||!1);var s=e.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=e.id,c}a.off("pan").on("pan",function(c){this._mouseDownFlag=!1,ZY(o,c.dx,c.dy),r.dispatchAction(Me(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,QY(o,c.scale,c.originX,c.originY),r.dispatchAction(Me(l(),{totalZoom:o.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(c,u,d){return i.containPoint([u,d])&&!yF(c,r,e)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=DAe(t).ignore)})},n.prototype._updateMapSelectHandler=function(e,t,r,i){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n}();function Zce(n,e,t,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=IN(i),c=IN(a),u=IN(s),d=IN(o),h=n.data;if(h){var f=h.getItemVisual(t,"style"),m=h.getItemVisual(t,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),m&&(l.decal=V1(m,n.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=d,Fw(e)}function Qce(n,e,t,r,i,a,o){var s=n.data,l=n.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),a)),u=s&&s.getItemLayout(a);if(l||c||u&&u.showLabel){var d=l?t:a,h=void 0;(!s||a>=0)&&(h=i);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;ts(e,ho(r),{labelFetcher:h,labelDataIndex:d,defaultText:t},f);var m=e.getTextContent();if(m&&(DAe(m).ignore=m.ignore,e.textConfig&&o)){var v=e.getBoundingRect().clone();e.textConfig.layoutRect=v,e.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function Jce(n,e,t,r,i,a){n.data?n.data.setItemGraphicEl(a,e):Ut(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:t,region:r&&r.option||{}}}function eue(n,e,t,r,i){n.data||Jw({el:e,componentModel:i,itemName:t,itemTooltipOption:r.get("tooltip")})}function tue(n,e,t,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return Bi(e,o,a.get("blurScope"),a.get("disabled")),n.isGeo&&Gst(e,i,t),o}function nue(n,e,t){var r=[],i;function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,c){isFinite(l)&&isFinite(c)&&i.push([l,c])},sphere:function(){}});return!t&&s.polygonStart(),Z(n,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!t&&s.polygonEnd(),r}var Ygt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var s=this._mapDraw;s&&o.add(s.group)}else if(t.needsDrawMap){var s=this._mapDraw||new IAe(i);o.add(s.group),s.draw(t,r,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,i){var a=t.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=a.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,d=c.offset,h=new Xg({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+d*9,cy:u[1],r:3},silent:!0,z2:8+(d?0:ST+1)});if(!d){var f=t.mainSeries.getData(),m=a.getName(l),v=f.indexOfName(m),y=a.getItemModel(l),w=y.getModel("label"),S=f.getItemGraphicEl(v);ts(h,ho(y),{labelFetcher:{getFormattedLabel:function(T,C){return t.getFormattedLabel(v,C)}},defaultText:m}),h.disableLabelAnimation=!0,w.get("position")||h.setTextConfig({position:"bottom"}),S.onHoverStateChange=function(T){v2(h,T)}}o.add(h)}}})},e.type="map",e}(zr),Kgt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=NT(this,{coordDimensions:["value"],encodeDefaulter:Qt(bY,this)}),i=yt(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);i.set(l,o)}var c=jg.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return Z(c.regions,function(u){var d=u.name,h=i.get(d),f=u.properties&&u.properties.echartsStyle,m;h==null?(m={name:d},a.push(m)):m=r.getRawDataItem(h),f&&sn(m,f)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData(),o=this.getRawValue(t),s=a.getName(t),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var d=l[u].originalData.indexOfName(s),h=a.mapDimension("value");isNaN(l[u].originalData.get(h,d))||c.push(l[u].name)}return fo("section",{header:c.join(", "),noHeader:!c.length,blocks:[fo("nameValue",{name:s,value:o})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=Da(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(ai);function Xgt(n,e){var t={};return Z(n,function(r){r.each(r.mapDimension("value"),function(i,a){var o="ec-"+r.getName(a);t[o]=t[o]||[],isNaN(i)||t[o].push(i)})}),n[0].map(n[0].mapDimension("value"),function(r,i){for(var a="ec-"+n[0].getName(i),o=0,s=1/0,l=-1/0,c=t[a].length,u=0;u<c;u++)s=Math.min(s,t[a][u]),l=Math.max(l,t[a][u]),o+=t[a][u];var d;return e==="min"?d=s:e==="max"?d=l:e==="average"?d=o/c:d=o,c===0?NaN:d})}function Zgt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),Z(e,function(t,r){for(var i=Xgt(Be(t,function(o){return o.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(i.cloneShallow()),t[a].mainSeries=t[0]})}function Qgt(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var i={};Z(t.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var d=l.getName(u),h=s.getRegion(d);if(!(!h||isNaN(c))){var f=i[d]||0,m=s.dataToPoint(h.getCenter());i[d]=f+1,l.setItemLayout(u,{point:m,offset:f})}})});var a=t.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),e[r]=!0}})}var rue=Zo,pM=function(n){_e(e,n);function e(t){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new og,r._rawTransformable=new og,r.name=t,r}return e.prototype.setBoundingRect=function(t,r,i,a){return this._rect=new dn(t,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,a){this._transformTo(t,r,i,a),this._viewRect=new dn(t,r,i,a)},e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new dn(t,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,r){t&&(this._center=[tt(t[0],r.getWidth()),tt(t[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var r=this.zoomLimit;r&&(r.max!=null&&(t=Math.min(r.max,t)),r.min!=null&&(t=Math.max(r.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Zo([],a,t),i=Zo([],i,t),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),Wq(this.transform||(this.transform=[]),r.transform||Bc()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],wT(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new og;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?rue(i,t,a):tl(i,t)},e.prototype.pointToData=function(t){var r=this.invTransform;return r?rue([],t,r):[t[0],t[1]]},e.prototype.convertToPixel=function(t,r,i){var a=iue(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=iue(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(og);function iue(n){var e=n.seriesModel;return e?e.coordinateSystem:null}var Jgt={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},MAe=["lng","lat"],oG=function(n){_e(e,n);function e(t,r,i){var a=n.call(this,t)||this;a.dimensions=MAe,a.type="geo",a._nameCoordMap=yt(),a.map=r;var o=i.projection,s=jg.load(r,i.nameMap,i.nameProperty),l=jg.getGeoResource(r);a.resourceType=l?l.type:null;var c=a.regions=s.regions,u=Jgt[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var d;if(o)for(var h=0;h<c.length;h++){var f=c[h].getBoundingRect(o);d=d||f.clone(),d.union(f)}else d=s.boundingRect;return a.setBoundingRect(d.x,d.y,d.width,d.height),a.aspectScale=o?1:Wt(i.aspectScale,u.aspectScale),a._invertLongitute=o?!1:u.invertLongitute,a}return e.prototype._transformTo=function(t,r,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new dn(t,r,i,a));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(t))return r[i]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,i){if(st(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,i)}},e.prototype.pointToData=function(t){var r=this.projection;return r&&(t=r.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return n.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,r,i){return n.prototype.dataToPoint.call(this,t,r,i)},e.prototype.convertToPixel=function(t,r,i){var a=aue(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=aue(r);return a===this?a.pointToData(i):null},e}(pM);Ia(oG,pM);function aue(n){var e=n.geoModel,t=n.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Ca).models[0]||{}).coordinateSystem:null}function oue(n,e){var t=n.get("boundingCoords");if(t!=null){var r=t[0],i=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=i[0],c=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var u=function(A,D,P,N){for(var R=P-A,L=N-D,B=0;B<=100;B++){var $=B/100,G=a.project([A+R*$,D+L*$]);jv(r,r,G),Fv(i,i,G)}};u(o,s,l,s),u(l,s,l,c),u(l,c,o,c),u(o,c,l,s)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var d=this.getBoundingRect(),h=n.get("layoutCenter"),f=n.get("layoutSize"),m=e.getWidth(),v=e.getHeight(),y=d.width/d.height*this.aspectScale,w=!1,S,T;h&&f&&(S=[tt(h[0],m),tt(h[1],v)],T=tt(f,Math.min(m,v)),!isNaN(S[0])&&!isNaN(S[1])&&!isNaN(T)&&(w=!0));var C;if(w)C={},y>1?(C.width=T,C.height=T/y):(C.height=T,C.width=T*y),C.y=S[1]-C.height/2,C.x=S[0]-C.width/2;else{var k=n.getBoxLayoutParams();k.aspect=y,C=qa(k,{width:m,height:v})}this.setViewRect(C.x,C.y,C.width,C.height),this.setCenter(n.get("center"),e),this.setZoom(n.get("zoom"))}function emt(n,e){Z(e.get("geoCoord"),function(t,r){n.addGeoCoord(r,t)})}var tmt=function(){function n(){this.dimensions=MAe}return n.prototype.create=function(e,t){var r=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}e.eachComponent("geo",function(o,s){var l=o.get("map"),c=new oG(l+s,l,Me({nameMap:o.get("nameMap")},i(o)));c.zoomLimit=o.get("scaleLimit"),r.push(c),o.coordinateSystem=c,c.model=o,c.resize=oue,c.resize(o,t)}),e.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return e.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),Z(a,function(o,s){var l=Be(o,function(u){return u.get("nameMap")}),c=new oG(s,s,Me({nameMap:Vq(l)},i(o[0])));c.zoomLimit=Io.apply(null,Be(o,function(u){return u.get("scaleLimit")})),r.push(c),c.resize=oue,c.resize(o[0],t),Z(o,function(u){u.coordinateSystem=c,emt(c,u)})}),r},n.prototype.getFilledRegions=function(e,t,r,i){for(var a=(e||[]).slice(),o=yt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=jg.load(t,r,i);return Z(l.regions,function(c){var u=c.name,d=o.get(u),h=c.properties&&c.properties.echartsStyle;d||(d={name:u},a.push(d)),h&&sn(d,h)}),a},n}(),PAe=new tmt,nmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=jg.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var o=t.itemStyle=t.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(t,i),Ow(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=PAe.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Of(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new wr(o,t,t.ecModel)),o.selected&&(i[s]=!0)),a},yt()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new wr(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:t};if(kt(a))return o.status=r,a(o);if(st(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(On);function sue(n,e){return n.pointToProjected?n.pointToProjected(e):n.pointToData(e)}function eK(n,e,t,r){var i=n.getZoom(),a=n.getCenter(),o=e.zoom,s=n.projectedToPoint?n.projectedToPoint(a):n.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,n.setCenter(sue(n,s),r)),o!=null){if(t){var l=t.min||0,c=t.max||1/0;o=Math.max(Math.min(i*o,c),l)/i}n.scaleX*=o,n.scaleY*=o;var u=(e.originX-n.x)*(o-1),d=(e.originY-n.y)*(o-1);n.x-=u,n.y-=d,n.updateTransform(),n.setCenter(sue(n,s),r),n.setZoom(o*i)}return{center:n.getCenter(),zoom:n.getZoom()}}var rmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,i,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new IAe(i));var o=this._mapDraw;o.draw(t,r,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=t.get("silent"),this.group.add(o.group),this.updateSelectStatus(t,r,i)},e.prototype._handleRegionClick=function(t){var r;Jb(t.target,function(i){return(r=Ut(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,i){var a=this;this._mapDraw.group.traverse(function(o){var s=Ut(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Mi);function imt(n,e,t){jg.registerMap(n,e,t)}function NAe(n){n.registerCoordinateSystem("geo",PAe),n.registerComponentModel(nmt),n.registerComponentView(rmt),n.registerImpl("registerMap",imt),n.registerImpl("getMap",function(t){return jg.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[t](i.name);var c=l.coordinateSystem;Z(c.regions,function(d){o[d.name]=l.isSelected(d.name)||!1});var u=[];Z(o,function(d,h){o[h]&&u.push(h)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:o,allSelected:s,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var a=t.componentType||"series";r.eachComponent({mainType:a,query:t},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=eK(s,t,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&Z(o.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function amt(n){En(NAe),n.registerChartView(Ygt),n.registerSeriesModel(Kgt),n.registerLayout(Qgt),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Zgt),NTe("map",n.registerAction)}function omt(n){var e=n;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,i;r=t.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},t.push(s)}}function smt(n,e){var t=n.isExpand?n.children:[],r=n.parentNode.children,i=n.hierNode.i?r[n.hierNode.i-1]:null;if(t.length){umt(n);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;i?(n.hierNode.prelim=i.hierNode.prelim+e(n,i),n.hierNode.modifier=n.hierNode.prelim-a):n.hierNode.prelim=a}else i&&(n.hierNode.prelim=i.hierNode.prelim+e(n,i));n.parentNode.hierNode.defaultAncestor=dmt(n,i,n.parentNode.hierNode.defaultAncestor||r[0],e)}function lmt(n){var e=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:e},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function lue(n){return arguments.length?n:pmt}function Ok(n,e){return n-=Math.PI/2,{x:e*Math.cos(n),y:e*Math.sin(n)}}function cmt(n,e){return qa(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function umt(n){for(var e=n.children,t=e.length,r=0,i=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function dmt(n,e,t,r){if(e){for(var i=n,a=n,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,c=a.hierNode.modifier,u=o.hierNode.modifier,d=s.hierNode.modifier;s=vU(s),a=yU(a),s&&a;){i=vU(i),o=yU(o),i.hierNode.ancestor=n;var h=s.hierNode.prelim+d-a.hierNode.prelim-c+r(s,a);h>0&&(fmt(hmt(s,n,t),n,h),c+=h,l+=h),d+=s.hierNode.modifier,c+=a.hierNode.modifier,l+=i.hierNode.modifier,u+=o.hierNode.modifier}s&&!vU(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=d-l),a&&!yU(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=c-u,t=n)}return t}function vU(n){var e=n.children;return e.length&&n.isExpand?e[e.length-1]:n.hierNode.thread}function yU(n){var e=n.children;return e.length&&n.isExpand?e[0]:n.hierNode.thread}function hmt(n,e,t){return n.hierNode.ancestor.parentNode===e.parentNode?n.hierNode.ancestor:t}function fmt(n,e,t){var r=t/(e.hierNode.i-n.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,n.hierNode.change+=r}function pmt(n,e){return n.parentNode===e.parentNode?1:2}var gmt=function(){function n(){this.parentPoint=[],this.childPoints=[]}return n}(),mmt=function(n){_e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new gmt},e.prototype.buildPath=function(t,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){t.moveTo(o[0],o[1]),t.lineTo(s[0],s[1]);return}var c=r.orient,u=c==="TB"||c==="BT"?0:1,d=1-u,h=tt(r.forkPosition,1),f=[];f[u]=o[u],f[d]=o[d]+(l[d]-o[d])*h,t.moveTo(o[0],o[1]),t.lineTo(f[0],f[1]),t.moveTo(s[0],s[1]),f[u]=s[u],t.lineTo(f[0],f[1]),f[u]=l[u],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var m=1;m<a-1;m++){var v=i[m];t.moveTo(v[0],v[1]),f[u]=v[u],t.lineTo(f[0],f[1])}},e}(Cn),vmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new jt,t}return e.prototype.init=function(t,r){this._controller=new fM(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=t.getData(),o=t.layoutInfo,s=this._mainGroup,l=t.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(t,i),this._updateController(t,r,i);var c=this._data;a.diff(c).add(function(u){cue(a,u)&&uue(a,u,null,s,t)}).update(function(u,d){var h=c.getItemGraphicEl(d);if(!cue(a,u)){h&&hue(c,d,h,s,t);return}uue(a,u,h,s,t)}).remove(function(u){var d=c.getItemGraphicEl(u);d&&hue(c,u,d,s,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(u,d){u.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:d})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),a=[];i.each(function(d){var h=i.getItemLayout(d);h&&!isNaN(h.x)&&!isNaN(h.y)&&a.push([+h.x,+h.y])});var o=[],s=[];Yj(a,o,s);var l=this._min,c=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=c?c[1]:s[1]+1);var u=t.coordinateSystem=new pM;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),u.setCenter(t.get("center"),r),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!yF(c,i,t)}),o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ZY(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){QY(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(t),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(zr);function cue(n,e){var t=n.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function uue(n,e,t,r,i){var a=!t,o=n.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,c=o.isExpand===!1&&o.children.length!==0?l:"#fff",u=n.tree.root,d=o.parentNode===u?o:o.parentNode||o,h=n.getItemGraphicEl(d.dataIndex),f=d.getLayout(),m=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:f,v=o.getLayout();a?(t=new sM(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.x=m.x,t.y=m.y):t.updateData(n,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=v.rawX,t.__radialRawY=v.rawY,r.add(t),n.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,ar(t,{x:v.x,y:v.y},i);var y=t.getSymbolPath();if(i.get("layout")==="radial"){var w=u.children[0],S=w.getLayout(),T=w.children.length,C=void 0,k=void 0;if(v.x===S.x&&o.isExpand===!0&&w.children.length){var A={x:(w.children[0].getLayout().x+w.children[T-1].getLayout().x)/2,y:(w.children[0].getLayout().y+w.children[T-1].getLayout().y)/2};C=Math.atan2(A.y-S.y,A.x-S.x),C<0&&(C=Math.PI*2+C),k=A.x<S.x,k&&(C=C-Math.PI)}else C=Math.atan2(v.y-S.y,v.x-S.x),C<0&&(C=Math.PI*2+C),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(k=v.x<S.x,k&&(C=C-Math.PI)):(k=v.x>S.x,k||(C=C-Math.PI));var D=k?"left":"right",P=s.getModel("label"),N=P.get("rotate"),R=N*(Math.PI/180),L=y.getTextContent();L&&(y.setTextConfig({position:P.get("position")||D,rotation:N==null?-C:R,origin:"center"}),L.setStyle("verticalAlign","middle"))}var B=s.get(["emphasis","focus"]),$=B==="relative"?ID(o.getAncestorsIndices(),o.getDescendantIndices()):B==="ancestor"?o.getAncestorsIndices():B==="descendant"?o.getDescendantIndices():null;$&&(Ut(t).focus=$),ymt(i,o,u,t,m,f,v,r),t.__edge&&(t.onHoverStateChange=function(G){if(G!=="blur"){var W=o.parentNode&&n.getItemGraphicEl(o.parentNode.dataIndex);W&&W.hoverState===ZI||v2(t.__edge,G)}})}function ymt(n,e,t,r,i,a,o,s){var l=e.getModel(),c=n.get("edgeShape"),u=n.get("layout"),d=n.getOrient(),h=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),m=l.getModel("lineStyle").getLineStyle(),v=r.__edge;if(c==="curve")e.parentNode&&e.parentNode!==t&&(v||(v=r.__edge=new JI({shape:sG(u,d,h,i,i)})),ar(v,{shape:sG(u,d,h,a,o)},n));else if(c==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var y=e.children,w=[],S=0;S<y.length;S++){var T=y[S].getLayout();w.push([T.x,T.y])}v||(v=r.__edge=new mmt({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:f}})),ar(v,{shape:{parentPoint:[o.x,o.y],childPoints:w}},n)}v&&!(c==="polyline"&&!e.isExpand)&&(v.useStyle(Dt({strokeNoScale:!0,fill:null},m)),es(v,l,"lineStyle"),Fw(v),s.add(v))}function due(n,e,t,r,i){var a=e.tree.root,o=RAe(a,n),s=o.source,l=o.sourceLayout,c=e.getItemGraphicEl(n.dataIndex);if(c){var u=e.getItemGraphicEl(s.dataIndex),d=u.__edge,h=c.__edge||(s.isExpand===!1||s.children.length===1?d:void 0),f=r.get("edgeShape"),m=r.get("layout"),v=r.get("orient"),y=r.get(["lineStyle","curveness"]);h&&(f==="curve"?dy(h,{shape:sG(m,v,y,l,l),style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}):f==="polyline"&&r.get("layout")==="orthogonal"&&dy(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(h)},removeOpt:i}))}}function RAe(n,e){for(var t=e.parentNode===n?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===n?t:t.parentNode||t;return{source:t,sourceLayout:r}}function hue(n,e,t,r,i){var a=n.tree.getNodeByDataIndex(e),o=n.tree.root,s=RAe(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};dy(t,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(t),n.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(c){due(c,n,r,i,l)}),due(a,n,r,i,l)}function sG(n,e,t,r,i){var a,o,s,l,c,u,d,h;if(n==="radial"){c=r.rawX,d=r.rawY,u=i.rawX,h=i.rawY;var f=Ok(c,d),m=Ok(c,d+(h-d)*t),v=Ok(u,h+(d-h)*t),y=Ok(u,h);return{x1:f.x||0,y1:f.y||0,x2:y.x||0,y2:y.y||0,cpx1:m.x||0,cpy1:m.y||0,cpx2:v.x||0,cpy2:v.y||0}}else c=r.x,d=r.y,u=i.x,h=i.y,(e==="LR"||e==="RL")&&(a=c+(u-c)*t,o=d,s=u+(c-u)*t,l=h),(e==="TB"||e==="BT")&&(a=c,o=d+(h-d)*t,s=u,l=h+(d-h)*t);return{x1:c,y1:d,x2:u,y2:h,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Hu=Kn();function OAe(n){var e=n.mainData,t=n.datas;t||(t={main:e},n.datasAttr={main:"data"}),n.datas=n.mainData=null,LAe(e,t,n),Z(t,function(r){Z(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Qt(bmt,n))})}),e.wrapMethod("cloneShallow",Qt(xmt,n)),Z(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Qt(wmt,n))}),pl(t[e.dataType]===e)}function bmt(n,e){if(Tmt(this)){var t=Me({},Hu(this).datas);t[this.dataType]=e,LAe(e,t,n)}else tK(e,this.dataType,Hu(this).mainData,n);return e}function wmt(n,e){return n.struct&&n.struct.update(),e}function xmt(n,e){return Z(Hu(e).datas,function(t,r){t!==e&&tK(t.cloneShallow(),r,e,n)}),e}function Smt(n){var e=Hu(this).mainData;return n==null||e==null?e:Hu(e).datas[n]}function _mt(){var n=Hu(this).mainData;return n==null?[{data:n}]:Be(Ln(Hu(n).datas),function(e){return{type:e,data:Hu(n).datas[e]}})}function Tmt(n){return Hu(n).mainData===n}function LAe(n,e,t){Hu(n).datas={},Z(e,function(r,i){tK(r,i,n,t)})}function tK(n,e,t,r){Hu(t).datas[e]=n,Hu(n).mainData=t,n.dataType=e,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=n),n.getLinkedData=Smt,n.getLinkedDataAll=_mt}var Emt=function(){function n(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(e,t,r){kt(e)&&(r=t,t=e,e=null),e=e||{},st(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=t.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},n.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},n.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].getNodeById(e);if(a)return a}},n.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].contains(e);if(a)return a}},n.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},n.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},n.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},n.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},n.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},n.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},n.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},n.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},n}(),nK=function(){function n(e){this.type="tree",this._nodes=[],this.hostModel=e}return n.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},n.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(e,t,r){var i=new n(t),a=[],o=1;s(e);function s(u,d){var h=u.value;o=Math.max(o,Fe(h)?h.length:1),a.push(u);var f=new Emt(Ha(u.name,""),i);d?Amt(f,d):i.root=f,i._nodes.push(f);var m=u.children;if(m)for(var v=0;v<m.length;v++)s(m[v],f)}i.root.updateDepthAndHeight(0);var l=aM(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,c=new hl(l,t);return c.initData(a),r&&r(c),OAe({mainData:c,struct:i,structAttr:"tree"}),i.update(),i},n}();function Amt(n,e){var t=e.children;n.parentNode!==e&&(t.push(n),n.parentNode=e)}function XD(n,e,t){if(n&&mn(e,n.type)>=0){var r=t.getData().tree.root,i=n.targetNode;if(st(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=n.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function jAe(n){for(var e=[];n;)n=n.parentNode,n&&e.push(n);return e.reverse()}function rK(n,e){var t=jAe(n);return mn(t,e)>=0}function wF(n,e){for(var t=[];n;){var r=n.dataIndex;t.push({name:n.name,dataIndex:r,value:e.getRawValue(r)}),n=n.parentNode}return t.reverse(),t}var kmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=t.leaves||{},a=new wr(i,this,this.ecModel),o=nK.createTree(r,this,s);function s(d){d.wrapMethod("getItemModel",function(h,f){var m=o.getNodeByDataIndex(f);return m&&m.children.length&&m.isExpand||(h.parentModel=a),h})}var l=0;o.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var c=t.expandAndCollapse,u=c&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return o.root.eachNode("preorder",function(d){var h=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=h&&h.collapsed!=null?!h.collapsed:d.depth<=u}),o.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(t),l=s.getValue(),c=s.name;s&&s!==o;)c=s.parentNode.name+"."+c,s=s.parentNode;return fo("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=wF(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(ai);function Cmt(n,e,t){for(var r=[n],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)e(a,t)}function QA(n,e){for(var t=[n],r;r=t.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)t.push(i[a])}}function Dmt(n,e){n.eachSeriesByType("tree",function(t){Imt(t,e)})}function Imt(n,e){var t=cmt(n,e);n.layoutInfo=t;var r=n.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(t.height,t.width)/2,o=lue(function(T,C){return(T.parentNode===C.parentNode?1:2)/T.depth})):(i=t.width,a=t.height,o=lue());var s=n.getData().tree.root,l=s.children[0];if(l){omt(s),Cmt(l,smt,o),s.hierNode.modifier=-l.hierNode.prelim,QA(l,lmt);var c=l,u=l,d=l;QA(l,function(T){var C=T.getLayout().x;C<c.getLayout().x&&(c=T),C>u.getLayout().x&&(u=T),T.depth>d.depth&&(d=T)});var h=c===u?1:o(c,u)/2,f=h-c.getLayout().x,m=0,v=0,y=0,w=0;if(r==="radial")m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),QA(l,function(T){y=(T.getLayout().x+f)*m,w=(T.depth-1)*v;var C=Ok(y,w);T.setLayout({x:C.x,y:C.y,rawX:y,rawY:w},!0)});else{var S=n.getOrient();S==="RL"||S==="LR"?(v=a/(u.getLayout().x+h+f),m=i/(d.depth-1||1),QA(l,function(T){w=(T.getLayout().x+f)*v,y=S==="LR"?(T.depth-1)*m:i-(T.depth-1)*m,T.setLayout({x:y,y:w},!0)})):(S==="TB"||S==="BT")&&(m=i/(u.getLayout().x+h+f),v=a/(d.depth-1||1),QA(l,function(T){y=(T.getLayout().x+f)*m,w=S==="TB"?(T.depth-1)*v:a-(T.depth-1)*v,T.setLayout({x:y,y:w},!0)}))}}}function Mmt(n){n.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=t.ensureUniqueItemVisual(i.dataIndex,"style");Me(s,o)})})}function Pmt(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=eK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function Nmt(n){n.registerChartView(vmt),n.registerSeriesModel(kmt),n.registerLayout(Dmt),n.registerVisual(Mmt),Pmt(n)}var fue=["treemapZoomToNode","treemapRender","treemapMove"];function Rmt(n){for(var e=0;e<fue.length;e++)n.registerAction({type:fue[e],update:"updateView"},ma);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=XD(t,s,a);if(l){var c=a.getViewRoot();c&&(t.direction=rK(c,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function FAe(n){var e=n.getData(),t=e.tree,r={};t.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=OH(n.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var Omt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};$Ae(i);var a=t.levels||[],o=this.designatedVisualItemStyle={},s=new wr({itemStyle:o},this,r);a=t.levels=Lmt(a,r);var l=Be(a||[],function(d){return new wr(d,s,r)},this),c=nK.createTree(i,this,u);function u(d){d.wrapMethod("getItemModel",function(h,f){var m=c.getNodeByDataIndex(f),v=m?l[m.depth]:null;return h.parentModel=v||s,h})}return c.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return fo("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=wF(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Me(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=yt(),this._idIndexMapCount=0);var i=r.get(t);return i==null&&r.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){FAe(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(ai);function $Ae(n){var e=0;Z(n.children,function(r){$Ae(r);var i=r.value;Fe(i)&&(i=i[0]),e+=i});var t=n.value;Fe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Fe(n.value)?n.value[0]=t:n.value=t}function Lmt(n,e){var t=Rr(e.get("color")),r=Rr(e.get(["aria","decal","decals"]));if(t){n=n||[];var i,a;Z(n,function(s){var l=new wr(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(a=!0)});var o=n[0]||(n[0]={});return i||(o.color=t.slice()),!a&&r&&(o.decal=r.slice()),n}}var jmt=8,pue=8,bU=5,Fmt=function(){function n(e){this.group=new jt,e.add(this.group)}return n.prototype.render=function(e,t,r,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),d={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,d,c),this._renderContent(e,d,s,l,c,u,i),sF(o,d.pos,d.box)}},n.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var a=Ha(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+jmt*2,t.emptyItemWidth);t.totalWidth+=s+pue,t.renderList.push({node:i,text:a,width:s})}},n.prototype._renderContent=function(e,t,r,i,a,o,s){for(var l=0,c=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),d=qlt(t.pos,t.box),h=t.totalWidth,f=t.renderList,m=i.getModel("itemStyle").getItemStyle(),v=f.length-1;v>=0;v--){var y=f[v],w=y.node,S=y.width,T=y.text;h>d.width&&(h-=S-c,S=c,T=null);var C=new vl({shape:{points:$mt(l,0,S,u,v===f.length-1,v===0)},style:Dt(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Qn({style:ri(a,{text:T})}),textConfig:{position:"inside"},z2:ST*1e4,onclick:Qt(s,w)});C.disableLabelAnimation=!0,C.getTextContent().ensureState("emphasis").style=ri(o,{text:T}),C.ensureState("emphasis").style=m,Bi(C,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(C),Bmt(C,e,w),l+=S+pue}},n.prototype.remove=function(){this.group.removeAll()},n}();function $mt(n,e,t,r,i,a){var o=[[i?n:n-bU,e],[n+t,e],[n+t,e+r],[i?n:n-bU,e+r]];return!a&&o.splice(2,0,[n+t+bU,e+r/2]),!i&&o.push([n,e+r/2]),o}function Bmt(n,e,t){Ut(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&wF(t,e)}}var Umt=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(e,t,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:a}),!0)},n.prototype.finished=function(e){return this._finishedCallback=e,this},n.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},n}();function Vmt(){return new Umt}var lG=jt,gue=Yn,mue=3,vue="label",yue="upperLabel",zmt=ST*10,Hmt=ST*2,Gmt=ST*3,Cb=jw([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),bue=function(n){var e=Cb(n);return e.stroke=e.fill=e.lineWidth=null,e},$2=Kn(),Wmt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=JA(),t}return e.prototype.render=function(t,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(mn(o,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=XD(a,s,t),c=a&&a.type,u=t.layoutInfo,d=!this._oldTree,h=this._storage,f=c==="treemapRootToNode"&&l&&h?{rootNodeGroup:h.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,m=this._giveContainerGroup(u),v=t.get("animation"),y=this._doRender(m,t,f);v&&!d&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(m,y,t,f):y.renderFinally(),this._resetController(i),this._renderBreadcrumb(t,i,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new lG,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,i){var a=r.getData().tree,o=this._oldTree,s=JA(),l=JA(),c=this._storage,u=[];function d(S,T,C,k){return qmt(r,l,c,i,s,u,S,T,C,k)}v(a.root?[a.root]:[],o&&o.root?[o.root]:[],t,a===o||!o,0);var h=y(c);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,m=a.root.getLayout();m.width===f.width&&m.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:h,renderFinally:w};function v(S,T,C,k,A){k?(T=S,Z(S,function(N,R){!N.isRemoved()&&P(R,R)})):new Og(T,S,D,D).add(P).update(P).remove(Qt(P,null)).execute();function D(N){return N.getId()}function P(N,R){var L=N!=null?S[N]:null,B=R!=null?T[R]:null,$=d(L,B,C,A);$&&v(L&&L.viewChildren||[],B&&B.viewChildren||[],$,k,A+1)}}function y(S){var T=JA();return S&&Z(S,function(C,k){var A=T[k];Z(C,function(D){D&&(A.push(D),$2(D).willDelete=!0)})}),T}function w(){Z(h,function(S){Z(S,function(T){T.parent&&T.parent.remove(T)})}),Z(u,function(S){S.invisible=!0,S.dirty()})}},e.prototype._doAnimation=function(t,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(kt(o)?0:o)||0,c=(kt(s)?null:s)||"cubicOut",u=Vmt();Z(r.willDeleteEls,function(d,h){Z(d,function(f,m){if(!f.invisible){var v=f.parent,y,w=$2(v);if(a&&a.direction==="drillDown")y=v===a.rootNodeGroup?{shape:{x:0,y:0,width:w.nodeWidth,height:w.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var S=0,T=0;w.willDelete||(S=w.nodeWidth/2,T=w.nodeHeight/2),y=h==="nodeGroup"?{x:S,y:T,style:{opacity:0}}:{shape:{x:S,y:T,width:0,height:0},style:{opacity:0}}}y&&u.add(f,y,l,0,c)}})}),Z(this._storage,function(d,h){Z(d,function(f,m){var v=r.lastsForAnimation[h][m],y={};v&&(f instanceof jt?v.oldX!=null&&(y.x=f.x,y.y=f.y,f.x=v.oldX,f.y=v.oldY):(v.oldShape&&(y.shape=Me({},f.shape),f.setShape(v.oldShape)),v.fadein?(f.setStyle("opacity",0),y.style={opacity:1}):f.style.opacity!==1&&(y.style={opacity:1})),u.add(f,y,l,0,c))})},this),this._state="animating",u.finished(ut(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new fM(t.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",ut(this._onPan,this)),r.on("zoom",ut(this._onZoom,this)));var a=new dn(0,0,t.getWidth(),t.getHeight());r.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>mue||Math.abs(t.dy)>mue)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(t){var r=t.originX,i=t.originY,a=t.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new dn(s.x,s.y,s.width,s.height),c=null,u=this._controllerHost;c=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=a,c){var h=c.min||0,f=c.max||1/0;d=Math.max(Math.min(f,d),h)}var m=d/u.zoom;u.zoom=d;var v=this.seriesModel.layoutInfo;r-=v.x,i-=v.y;var y=Bc();Lf(y,y,[-r,-i]),qq(y,y,[m,m]),Lf(y,y,[r,i]),l.applyTransform(y),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&_2(c,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,i){var a=this;i||(i=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Fmt(this.group))).render(t,r,i.node,function(o){a._state!=="animating"&&(rK(t.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=JA(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(t,r),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(zr);function JA(){return{nodeGroup:[],background:[],content:[]}}function qmt(n,e,t,r,i,a,o,s,l,c){if(!o)return;var u=o.getLayout(),d=n.getData(),h=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var f=u.width,m=u.height,v=u.borderWidth,y=u.invisible,w=o.getRawIndex(),S=s&&s.getRawIndex(),T=o.viewChildren,C=u.upperHeight,k=T&&T.length,A=h.getModel("itemStyle"),D=h.getModel(["emphasis","itemStyle"]),P=h.getModel(["blur","itemStyle"]),N=h.getModel(["select","itemStyle"]),R=A.get("borderRadius")||0,L=fe("nodeGroup",lG);if(!L)return;if(l.add(L),L.x=u.x||0,L.y=u.y||0,L.markRedraw(),$2(L).nodeWidth=f,$2(L).nodeHeight=m,u.isAboveViewRoot)return L;var B=fe("background",gue,c,Hmt);B&&z(L,B,k&&u.upperLabelHeight);var $=h.getModel("emphasis"),G=$.get("focus"),W=$.get("blurScope"),K=$.get("disabled"),X=G==="ancestor"?o.getAncestorsIndices():G==="descendant"?o.getDescendantIndices():G;if(k)jD(L)&&Zb(L,!1),B&&(Zb(B,!K),d.setItemGraphicEl(o.dataIndex,B),kH(B,X,W));else{var te=fe("content",gue,c,Gmt);te&&se(L,te),B.disableMorphing=!0,B&&jD(B)&&Zb(B,!1),Zb(L,!K),d.setItemGraphicEl(o.dataIndex,L);var ie=h.getShallow("cursor");ie&&te.attr("cursor",ie),kH(L,X,W)}return L;function z(ve,de,me){var xe=Ut(de);if(xe.dataIndex=o.dataIndex,xe.seriesIndex=n.seriesIndex,de.setShape({x:0,y:0,width:f,height:m,r:R}),y)ce(de);else{de.invisible=!1;var pe=o.getVisual("style"),$e=pe.stroke,We=bue(A);We.fill=$e;var ct=Cb(D);ct.fill=D.get("borderColor");var xt=Cb(P);xt.fill=P.get("borderColor");var At=Cb(N);if(At.fill=N.get("borderColor"),me){var pn=f-2*v;ee(de,$e,pe.opacity,{x:v,y:0,width:pn,height:C})}else de.removeTextContent();de.setStyle(We),de.ensureState("emphasis").style=ct,de.ensureState("blur").style=xt,de.ensureState("select").style=At,Fw(de)}ve.add(de)}function se(ve,de){var me=Ut(de);me.dataIndex=o.dataIndex,me.seriesIndex=n.seriesIndex;var xe=Math.max(f-2*v,0),pe=Math.max(m-2*v,0);if(de.culling=!0,de.setShape({x:v,y:v,width:xe,height:pe,r:R}),y)ce(de);else{de.invisible=!1;var $e=o.getVisual("style"),We=$e.fill,ct=bue(A);ct.fill=We,ct.decal=$e.decal;var xt=Cb(D),At=Cb(P),pn=Cb(N);ee(de,We,$e.opacity,null),de.setStyle(ct),de.ensureState("emphasis").style=xt,de.ensureState("blur").style=At,de.ensureState("select").style=pn,Fw(de)}ve.add(de)}function ce(ve){!ve.invisible&&a.push(ve)}function ee(ve,de,me,xe){var pe=h.getModel(xe?yue:vue),$e=Ha(h.get("name"),null),We=pe.getShallow("show");ts(ve,ho(h,xe?yue:vue),{defaultText:We?$e:null,inheritColor:de,defaultOpacity:me,labelFetcher:n,labelDataIndex:o.dataIndex});var ct=ve.getTextContent();if(ct){var xt=ct.style,At=Hq(xt.padding||0);xe&&(ve.setTextConfig({layoutRect:xe}),ct.disableLabelLayout=!0),ct.beforeUpdate=function(){var Yt=Math.max((xe?xe.width:ve.shape.width)-At[1]-At[3],0),Rn=Math.max((xe?xe.height:ve.shape.height)-At[0]-At[2],0);(xt.width!==Yt||xt.height!==Rn)&&ct.setStyle({width:Yt,height:Rn})},xt.truncateMinChar=2,xt.lineOverflow="truncate",be(xt,xe,u);var pn=ct.getState("emphasis");be(pn?pn.style:null,xe,u)}}function be(ve,de,me){var xe=ve?ve.text:null;if(!de&&me.isLeafRoot&&xe!=null){var pe=n.get("drillDownIcon",!0);ve.text=pe?pe+" "+xe:xe}}function fe(ve,de,me,xe){var pe=S!=null&&t[ve][S],$e=i[ve];return pe?(t[ve][S]=null,De($e,pe)):y||(pe=new de,pe instanceof Yu&&(pe.z2=Ymt(me,xe)),dt($e,pe)),e[ve][w]=pe}function De(ve,de){var me=ve[w]={};de instanceof lG?(me.oldX=de.x,me.oldY=de.y):me.oldShape=Me({},de.shape)}function dt(ve,de){var me=ve[w]={},xe=o.parentNode,pe=de instanceof jt;if(xe&&(!r||r.direction==="drillDown")){var $e=0,We=0,ct=i.background[xe.getRawIndex()];!r&&ct&&ct.oldShape&&($e=ct.oldShape.width,We=ct.oldShape.height),pe?(me.oldX=0,me.oldY=We):me.oldShape={x:$e,y:We,width:0,height:0}}me.fadein=!pe}}function Ymt(n,e){return n*zmt+e}var ZD=Z,Kmt=It,B2=-1,uo=function(){function n(e){var t=e.mappingMethod,r=e.type,i=this.option=Nt(e);this.type=r,this.mappingMethod=t,this._normalizeData=Qmt[t];var a=n.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(wU(i),Xmt(i)):t==="category"?i.categories?Zmt(i):wU(i,!0):(pl(t!=="linear"||i.dataExtent),wU(i))}return n.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},n.prototype.getNormalizer=function(){return ut(this._normalizeData,this)},n.listVisualTypes=function(){return Ln(n.visualHandlers)},n.isValidType=function(e){return n.visualHandlers.hasOwnProperty(e)},n.eachVisual=function(e,t,r){It(e)?Z(e,t,r):t.call(r,e)},n.mapVisual=function(e,t,r){var i,a=Fe(e)?[]:It(e)?{}:(i=!0,null);return n.eachVisual(e,function(o,s){var l=t.call(r,o,s);i?a=l:a[s]=l}),a},n.retrieveVisuals=function(e){var t={},r;return e&&ZD(n.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},n.prepareVisualTypes=function(e){if(Fe(e))e=e.slice();else if(Kmt(e)){var t=[];ZD(e,function(r,i){t.push(i)}),e=t}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},n.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},n.findPieceIndex=function(e,t,r){for(var i,a=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===e||st(l)&&l===e+"")return o;r&&h(l,o)}}for(var o=0,s=t.length;o<s;o++){var c=t[o],u=c.interval,d=c.close;if(u){if(u[0]===-1/0){if(PN(d[1],e,u[1]))return o}else if(u[1]===1/0){if(PN(d[0],u[0],e))return o}else if(PN(d[0],u[0],e)&&PN(d[1],e,u[1]))return o;r&&h(u[0],o),r&&h(u[1],o)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function h(f,m){var v=Math.abs(f-e);v<a&&(a=v,i=m)}},n.visualHandlers={color:{applyVisual:ek("color"),getColorMapper:function(){var e=this.option;return ut(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),Lk.call(this,t)}:function(t,r,i){var a=!!i;return!r&&(t=this._normalizeData(t)),i=e6(t,e.parsedVisual,i),a?i:bg(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return bg(e6(e,this.option.parsedVisual),"rgba")},category:Lk,piecewise:function(e,t){var r=uG.call(this,t);return r==null&&(r=bg(e6(e,this.option.parsedVisual),"rgba")),r},fixed:Db}},colorHue:MN(function(e,t){return iC(e,t)}),colorSaturation:MN(function(e,t){return iC(e,null,t)}),colorLightness:MN(function(e,t){return iC(e,null,null,t)}),colorAlpha:MN(function(e,t){return d2(e,t)}),decal:{applyVisual:ek("decal"),_normalizedToVisual:{linear:null,category:Lk,piecewise:null,fixed:null}},opacity:{applyVisual:ek("opacity"),_normalizedToVisual:cG([0,1])},liftZ:{applyVisual:ek("liftZ"),_normalizedToVisual:{linear:Db,category:Db,piecewise:Db,fixed:Db}},symbol:{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:wue,category:Lk,piecewise:function(e,t){var r=uG.call(this,t);return r==null&&(r=wue.call(this,e)),r},fixed:Db}},symbolSize:{applyVisual:ek("symbolSize"),_normalizedToVisual:cG([0,1])}},n}();function Xmt(n){var e=n.pieceList;n.hasSpecialVisual=!1,Z(e,function(t,r){t.originIndex=r,t.visual!=null&&(n.hasSpecialVisual=!0)})}function Zmt(n){var e=n.categories,t=n.categoryMap={},r=n.visual;if(ZD(e,function(o,s){t[o]=s}),!Fe(r)){var i=[];It(r)?ZD(r,function(o,s){var l=t[s];i[l??B2]=o}):i[B2]=r,r=BAe(n,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function wU(n,e){var t=n.visual,r=[];It(t)?ZD(t,function(a){r.push(a)}):t!=null&&r.push(t);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(n.type)&&(r[1]=r[0]),BAe(n,r)}function MN(n){return{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("color",n(t("color"),i))},_normalizedToVisual:cG([0,1])}}function wue(n){var e=this.option.visual;return e[Math.round(br(n,[0,1],[0,e.length-1],!0))]||{}}function ek(n){return function(e,t,r){r(n,this.mapValueToVisual(e))}}function Lk(n){var e=this.option.visual;return e[this.option.loop&&n!==B2?n%e.length:n]}function Db(){return this.option.visual[0]}function cG(n){return{linear:function(e){return br(e,n,this.option.visual,!0)},category:Lk,piecewise:function(e,t){var r=uG.call(this,t);return r==null&&(r=br(e,n,this.option.visual,!0)),r},fixed:Db}}function uG(n){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=uo.findPieceIndex(n,t),i=t[r];if(i&&i.visual)return i.visual[this.type]}}function BAe(n,e){return n.visual=e,n.type==="color"&&(n.parsedVisual=Be(e,function(t){var r=Uc(t);return r||[0,0,0,1]})),e}var Qmt={linear:function(n){return br(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var e=this.option.pieceList,t=uo.findPieceIndex(n,e,!0);if(t!=null)return br(t,[0,e.length-1],[0,1],!0)},category:function(n){var e=this.option.categories?this.option.categoryMap[n]:n;return e??B2},fixed:ma};function PN(n,e,t){return n?e<=t:e<t}var Jmt="itemStyle",UAe=Kn();const evt={seriesType:"treemap",reset:function(n){var e=n.getData().tree,t=e.root;t.isRemoved()||VAe(t,{},n.getViewRoot().getAncestors(),n)}};function VAe(n,e,t,r){var i=n.getModel(),a=n.getLayout(),o=n.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(Jmt),l=tvt(s,e,r),c=o.ensureUniqueItemVisual(n.dataIndex,"style"),u=s.get("borderColor"),d=s.get("borderColorSaturation"),h;d!=null&&(h=xue(l),u=nvt(d,h)),c.stroke=u;var f=n.viewChildren;if(!f||!f.length)h=xue(l),c.fill=h;else{var m=rvt(n,i,a,s,l,f);Z(f,function(v,y){if(v.depth>=t.length||v===t[v.depth]){var w=ivt(i,l,v,y,m,r);VAe(v,w,t,r)}})}}}function tvt(n,e,t){var r=Me({},e),i=t.designatedVisualItemStyle;return Z(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=n.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function xue(n){var e=xU(n,"color");if(e){var t=xU(n,"colorAlpha"),r=xU(n,"colorSaturation");return r&&(e=iC(e,null,null,r)),t&&(e=d2(e,t)),e}}function nvt(n,e){return e!=null?iC(e,null,null,n):null}function xU(n,e){var t=n[e];if(t!=null&&t!=="none")return t}function rvt(n,e,t,r,i,a){if(!(!a||!a.length)){var o=SU(e,"color")||i.color!=null&&i.color!=="none"&&(SU(e,"colorAlpha")||SU(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),c=t.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),d={type:o.name,dataExtent:c,visual:o.range};d.type==="color"&&(u==="index"||u==="id")?(d.mappingMethod="category",d.loop=!0):d.mappingMethod="linear";var h=new uo(d);return UAe(h).drColorMappingBy=u,h}}}function SU(n,e){var t=n.get(e);return Fe(t)&&t.length?{name:e,range:t}:null}function ivt(n,e,t,r,i,a){var o=Me({},e);if(i){var s=i.type,l=s==="color"&&UAe(i).drColorMappingBy,c=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(n.get("visualDimension"));o[s]=i.mapValueToVisual(c)}return o}var QD=Math.max,U2=Math.min,Sue=Io,iK=Z,zAe=["itemStyle","borderWidth"],avt=["itemStyle","gapWidth"],ovt=["upperLabel","show"],svt=["upperLabel","height"];const lvt={seriesType:"treemap",reset:function(n,e,t,r){var i=t.getWidth(),a=t.getHeight(),o=n.option,s=qa(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=o.size||[],c=tt(Sue(s.width,l[0]),i),u=tt(Sue(s.height,l[1]),a),d=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],f=XD(r,h,n),m=d==="treemapRender"||d==="treemapMove"?r.rootRect:null,v=n.getViewRoot(),y=jAe(v);if(d!=="treemapMove"){var w=d==="treemapZoomToNode"?pvt(n,f,v,c,u):m?[m.width,m.height]:[c,u],S=o.sort;S&&S!=="asc"&&S!=="desc"&&(S="desc");var T={squareRatio:o.squareRatio,sort:S,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var C={x:0,y:0,width:w[0],height:w[1],area:w[0]*w[1]};v.setLayout(C),HAe(v,T,!1,0),C=v.getLayout(),iK(y,function(A,D){var P=(y[D+1]||v).getValue();A.setLayout(Me({dataExtent:[P,P],borderWidth:0,upperHeight:0},C))})}var k=n.getData().tree.root;k.setLayout(gvt(s,m,f),!0),n.setLayoutInfo(s),GAe(k,new dn(-s.x,-s.y,i,a),y,v,0)}};function HAe(n,e,t,r){var i,a;if(!n.isRemoved()){var o=n.getLayout();i=o.width,a=o.height;var s=n.getModel(),l=s.get(zAe),c=s.get(avt)/2,u=WAe(s),d=Math.max(l,u),h=l-c,f=d-c;n.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:u},!0),i=QD(i-2*h,0),a=QD(a-h-f,0);var m=i*a,v=cvt(n,s,m,e,t,r);if(v.length){var y={x:h,y:f,width:i,height:a},w=U2(i,a),S=1/0,T=[];T.area=0;for(var C=0,k=v.length;C<k;){var A=v[C];T.push(A),T.area+=A.getLayout().area;var D=fvt(T,w,e.squareRatio);D<=S?(C++,S=D):(T.area-=T.pop().getLayout().area,_ue(T,w,y,c,!1),w=U2(y.width,y.height),T.length=T.area=0,S=1/0)}if(T.length&&_ue(T,w,y,c,!0),!t){var P=s.get("childrenVisibleMin");P!=null&&m<P&&(t=!0)}for(var C=0,k=v.length;C<k;C++)HAe(v[C],e,t,r+1)}}}function cvt(n,e,t,r,i,a){var o=n.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return n.viewChildren=[];o=vr(o,function(f){return!f.isRemoved()}),dvt(o,s);var c=hvt(e,o,s);if(c.sum===0)return n.viewChildren=[];if(c.sum=uvt(e,t,c.sum,s,o),c.sum===0)return n.viewChildren=[];for(var u=0,d=o.length;u<d;u++){var h=o[u].getValue()/c.sum*t;o[u].setLayout({area:h})}return l&&(o.length&&n.setLayout({isLeafRoot:!0},!0),o.length=0),n.viewChildren=o,n.setLayout({dataExtent:c.dataExtent},!0),o}function uvt(n,e,t,r,i){if(!r)return t;for(var a=n.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var c=i[r==="asc"?o-l-1:l].getValue();c/t*e<a&&(s=l,t-=c)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),t}function dvt(n,e){return e&&n.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i}),n}function hvt(n,e,t){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=n.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&t?(s=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&s.reverse()):(s=[1/0,-1/0],iK(e,function(l){var c=l.getValue(o);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:r,dataExtent:s}}function fvt(n,e,t){for(var r=0,i=1/0,a=0,o=void 0,s=n.length;a<s;a++)o=n[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=n.area*n.area,c=e*e*t;return l?QD(c*r/l,l/(c*i)):1/0}function _ue(n,e,t,r,i){var a=e===t.width?0:1,o=1-a,s=["x","y"],l=["width","height"],c=t[s[a]],u=e?n.area/e:0;(i||u>t[l[o]])&&(u=t[l[o]]);for(var d=0,h=n.length;d<h;d++){var f=n[d],m={},v=u?f.getLayout().area/u:0,y=m[l[o]]=QD(u-2*r,0),w=t[s[a]]+t[l[a]]-c,S=d===h-1||w<v?w:v,T=m[l[a]]=QD(S-2*r,0);m[s[o]]=t[s[o]]+U2(r,y/2),m[s[a]]=c+U2(r,T/2),c+=S,f.setLayout(m,!0)}t[s[o]]+=u,t[l[o]]-=u}function pvt(n,e,t,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===t)return o;for(var s,l=r*i,c=l*n.option.zoomToNodeRatio;s=a.parentNode;){for(var u=0,d=s.children,h=0,f=d.length;h<f;h++)u+=d[h].getValue();var m=a.getValue();if(m===0)return o;c*=u/m;var v=s.getModel(),y=v.get(zAe),w=Math.max(y,WAe(v));c+=4*y*y+(3*y+w)*Math.pow(c,.5),c>Loe&&(c=Loe),a=s}c<l&&(c=l);var S=Math.pow(c/l,.5);return[r*S,i*S]}function gvt(n,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var i=t.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:n.width/2-o[0],y:n.height/2-o[1]}}function GAe(n,e,t,r,i){var a=n.getLayout(),o=t[i],s=o&&o===n;if(!(o&&!s||i===t.length&&n!==r)){n.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new dn(e.x-a.x,e.y-a.y,e.width,e.height);iK(n.viewChildren||[],function(c){GAe(c,l,t,r,i+1)})}}function WAe(n){return n.get(ovt)?n.get(svt):0}function mvt(n){n.registerSeriesModel(Omt),n.registerChartView(Wmt),n.registerVisual(evt),n.registerLayout(lvt),Rmt(n)}function vvt(n){var e=n.findComponents({mainType:"legend"});!e||!e.length||n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),c=l.getShallow("category");if(c!=null){rr(c)&&(c=o[c]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(c))return!1}return!0})})}function yvt(n){var e={};n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t.getColorFromPalette(s,e)),r.setItemVisual(o,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],d=0;d<u.length;d++){var h=l.getShallow(u[d],!0);h!=null&&r.setItemVisual(o,u[d],h)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){st(l)&&(l=a["ec-"+l]);var c=r.getItemVisual(l,"style"),u=i.ensureUniqueItemVisual(o,"style");Me(u,c);for(var d=["symbol","symbolSize","symbolKeepAspect"],h=0;h<d.length;h++)i.setItemVisual(o,d[h],r.getItemVisual(l,d[h]))}})})}function NN(n){return n instanceof Array||(n=[n,n]),n}function bvt(n){n.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=NN(e.get("edgeSymbol")),a=NN(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=t.getEdgeByIndex(o),c=NN(s.getShallow("symbol",!0)),u=NN(s.getShallow("symbolSize",!0)),d=s.getModel("lineStyle").getLineStyle(),h=r.ensureUniqueItemVisual(o,"style");switch(Me(h,d),h.stroke){case"source":{var f=l.node1.getVisual("style");h.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");h.stroke=f&&f.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var dG="-->",xF=function(n){return n.get("autoCurveness")||null},qAe=function(n,e){var t=xF(n),r=20,i=[];if(rr(t))r=t;else if(Fe(t)){n.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));n.__curvenessList=i},JD=function(n,e,t){var r=[n.id,n.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(dG)},YAe=function(n){var e=n.split(dG);return[e[0],e[2],e[1]].join(dG)},wvt=function(n,e){var t=JD(n.node1,n.node2,e);return e.__edgeMap[t]},xvt=function(n,e){var t=hG(JD(n.node1,n.node2,e),e),r=hG(JD(n.node2,n.node1,e),e);return t+r},hG=function(n,e){var t=e.__edgeMap;return t[n]?t[n].length:0};function Svt(n){xF(n)&&(n.__curvenessList=[],n.__edgeMap={},qAe(n))}function _vt(n,e,t,r){if(xF(t)){var i=JD(n,e,t),a=t.__edgeMap,o=a[YAe(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function aK(n,e,t,r){var i=xF(e),a=Fe(i);if(!i)return null;var o=wvt(n,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===t){s=l;break}var c=xvt(n,e);qAe(e,c),n.lineStyle=n.lineStyle||{};var u=JD(n.node1,n.node2,e),d=e.__curvenessList,h=a||c%2?0:1;if(o.isForward)return d[h+s];var f=YAe(u),m=hG(f,e),v=d[s+m+h];return r?a?i&&i[0]===0?(m+h)%2?v:-v:((m%2?0:1)+h)%2?v:-v:(m+h)%2?v:-v:d[s+m+h]}function KAe(n){var e=n.coordinateSystem;if(!(e&&e.type!=="view")){var t=n.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),oK(t,n)}}function oK(n,e){n.eachEdge(function(t,r){var i=Df(t.getModel().get(["lineStyle","curveness"]),-aK(t,e,r,!0),0),a=vg(t.node1.getLayout()),o=vg(t.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),t.setLayout(s)})}function Tvt(n,e){n.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var a=t.getData(),o=[];Z(i.dimensions,function(h){o=o.concat(a.mapDimensionsAll(h))});for(var s=0;s<a.count();s++){for(var l=[],c=!1,u=0;u<o.length;u++){var d=a.get(o[u],s);isNaN(d)||(c=!0),l.push(d)}c?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}oK(a.graph,t)}else(!r||r==="none")&&KAe(t)})}function jk(n){var e=n.coordinateSystem;if(e.type!=="view")return 1;var t=n.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*t+1;return a/r}function Fk(n){var e=n.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Tue=Math.PI,_U=[];function sK(n,e,t,r){var i=n.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=n.getData(),s=o.graph,l=a.width/2+a.x,c=a.height/2+a.y,u=Math.min(a.width,a.height)/2,d=o.count();if(o.setLayout({cx:l,cy:c}),!!d){if(t){var h=i.pointToData(r),f=h[0],m=h[1],v=[f-l,m-c];bT(v,v),gR(v,v,u),t.setLayout([l+v[0],c+v[1]],!0);var y=n.get(["circular","rotateLabel"]);XAe(t,y,l,c)}Evt[e](n,s,o,u,l,c,d),s.eachEdge(function(w,S){var T=Df(w.getModel().get(["lineStyle","curveness"]),aK(w,n,S),0),C=vg(w.node1.getLayout()),k=vg(w.node2.getLayout()),A,D=(C[0]+k[0])/2,P=(C[1]+k[1])/2;+T&&(T*=3,A=[l*T+D*(1-T),c*T+P*(1-T)]),w.setLayout([C,k,A])})}}}var Evt={value:function(n,e,t,r,i,a,o){var s=0,l=t.getSum("value"),c=Math.PI*2/(l||o);e.eachNode(function(u){var d=u.getValue("value"),h=c*(l?d:1)/2;s+=h,u.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=h})},symbolSize:function(n,e,t,r,i,a,o){var s=0;_U.length=o;var l=jk(n);e.eachNode(function(d){var h=Fk(d);isNaN(h)&&(h=2),h<0&&(h=0),h*=l;var f=Math.asin(h/2/r);isNaN(f)&&(f=Tue/2),_U[d.dataIndex]=f,s+=f*2});var c=(2*Tue-s)/o/2,u=0;e.eachNode(function(d){var h=c+_U[d.dataIndex];u+=h,(!d.getLayout()||!d.getLayout().fixed)&&d.setLayout([r*Math.cos(u)+i,r*Math.sin(u)+a]),u+=h})}};function XAe(n,e,t,r){var i=n.getGraphicEl();if(i){var a=n.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=n.getLayout(),c=Math.atan2(l[1]-r,l[0]-t);c<0&&(c=Math.PI*2+c);var u=l[0]<t;u&&(c=c-Math.PI);var d=u?"left":"right";s.setTextConfig({rotation:-c,position:d,origin:"center"});var h=s.ensureState("emphasis");Me(h.textConfig||(h.textConfig={}),{position:d})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function Avt(n){n.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&sK(e,"symbolSize")})}var r_=Q9;function kvt(n,e,t){for(var r=n,i=e,a=t.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],c=t.gravity==null?.1:t.gravity,u=0;u<r.length;u++){var d=r[u];d.p||(d.p=Zw(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=vg(d.p),d.edges=null}var h=t.friction==null?.6:t.friction,f=h,m,v;return{warmUp:function(){f=h*.8},setFixed:function(y){r[y].fixed=!0},setUnfixed:function(y){r[y].fixed=!1},beforeStep:function(y){m=y},afterStep:function(y){v=y},step:function(y){m&&m(r,i);for(var w=[],S=r.length,T=0;T<i.length;T++){var C=i[T];if(!C.ignoreForceLayout){var k=C.n1,A=C.n2;Kb(w,A.p,k.p);var D=J9(w)-C.d,P=A.w/(k.w+A.w);isNaN(P)&&(P=0),bT(w,w),!k.fixed&&r_(k.p,k.p,w,P*D*f),!A.fixed&&r_(A.p,A.p,w,-(1-P)*D*f)}}for(var T=0;T<S;T++){var N=r[T];N.fixed||(Kb(w,l,N.p),r_(N.p,N.p,w,c*f))}for(var T=0;T<S;T++)for(var k=r[T],R=T+1;R<S;R++){var A=r[R];Kb(w,A.p,k.p);var D=J9(w);D===0&&(nat(w,Math.random()-.5,Math.random()-.5),D=1);var L=(k.rep+A.rep)/D/D;!k.fixed&&r_(k.pp,k.pp,w,L),!A.fixed&&r_(A.pp,A.pp,w,-L)}for(var B=[],T=0;T<S;T++){var N=r[T];N.fixed||(Kb(B,N.p,N.pp),r_(N.p,N.p,B,f),tl(N.pp,N.p))}f=f*.992;var $=f<.01;v&&v(r,i,$),y&&y($)}}}function Cvt(n){n.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(T){var C=a.getId(T);a.setItemLayout(T,r[C]||[NaN,NaN])}):!l||l==="none"?KAe(e):l==="circular"&&sK(e,"value");var c=a.getDataExtent("value"),u=o.getDataExtent("value"),d=s.get("repulsion"),h=s.get("edgeLength"),f=Fe(d)?d:[d,d],m=Fe(h)?h:[h,h];m=[m[1],m[0]];var v=a.mapArray("value",function(T,C){var k=a.getItemLayout(C),A=br(T,c,f);return isNaN(A)&&(A=(f[0]+f[1])/2),{w:A,rep:A,fixed:a.getItemModel(C).get("fixed"),p:!k||isNaN(k[0])||isNaN(k[1])?null:k}}),y=o.mapArray("value",function(T,C){var k=i.getEdgeByIndex(C),A=br(T,u,m);isNaN(A)&&(A=(m[0]+m[1])/2);var D=k.getModel(),P=Df(k.getModel().get(["lineStyle","curveness"]),-aK(k,e,C,!0),0);return{n1:v[k.node1.dataIndex],n2:v[k.node2.dataIndex],d:A,curveness:P,ignoreForceLayout:D.get("ignoreForceLayout")}}),w=t.getBoundingRect(),S=kvt(v,y,{rect:w,gravity:s.get("gravity"),friction:s.get("friction")});S.beforeStep(function(T,C){for(var k=0,A=T.length;k<A;k++)T[k].fixed&&tl(T[k].p,i.getNodeByIndex(k).getLayout())}),S.afterStep(function(T,C,k){for(var A=0,D=T.length;A<D;A++)T[A].fixed||i.getNodeByIndex(A).setLayout(T[A].p),r[a.getId(A)]=T[A].p;for(var A=0,D=C.length;A<D;A++){var P=C[A],N=i.getEdgeByIndex(A),R=P.n1.p,L=P.n2.p,B=N.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],tl(B[0],R),tl(B[1],L),+P.curveness&&(B[2]=[(R[0]+L[0])/2-(R[1]-L[1])*P.curveness,(R[1]+L[1])/2-(L[0]-R[0])*P.curveness]),N.setLayout(B)}}),e.forceLayout=S,e.preservedPoints=r,S.step()}else e.forceLayout=null})}function Dvt(n,e,t){var r=Me(n.getBoxLayoutParams(),{aspect:t});return qa(r,{width:e.getWidth(),height:e.getHeight()})}function Ivt(n,e){var t=[];return n.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(y){var w=a.getItemModel(y);return[+w.get("x"),+w.get("y")]}),s=[],l=[];Yj(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=Dvt(r,e,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var d=l[0]-s[0],h=l[1]-s[1],f=u.width,m=u.height,v=r.coordinateSystem=new pM;v.zoomLimit=r.get("scaleLimit"),v.setBoundingRect(s[0],s[1],d,h),v.setViewRect(u.x,u.y,f,m),v.setCenter(r.get("center"),e),v.setZoom(r.get("zoom")),t.push(v)}}),t}var Eue=so.prototype,TU=JI.prototype,ZAe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}();(function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(ZAe);function EU(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var Mvt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ZAe},e.prototype.buildPath=function(t,r){EU(r)?Eue.buildPath.call(this,t,r):TU.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return EU(this.shape)?Eue.pointAt.call(this,t):TU.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=EU(r)?[r.x2-r.x1,r.y2-r.y1]:TU.tangentAt.call(this,t);return bT(i,i)},e}(Cn),AU=["fromSymbol","toSymbol"];function Aue(n){return"_"+n+"Type"}function kue(n,e,t){var r=e.getItemVisual(t,n);if(!r||r==="none")return r;var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=MT(i),c=tx(o||0,l);return r+l+c+(a||"")+(s||"")}function Cue(n,e,t){var r=e.getItemVisual(t,n);if(!(!r||r==="none")){var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),o=e.getItemVisual(t,n+"Offset"),s=e.getItemVisual(t,n+"KeepAspect"),l=MT(i),c=tx(o||0,l),u=Da(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,u.name=n,u}}function Pvt(n){var e=new Mvt({name:"line",subPixelOptimize:!0});return fG(e.shape,n),e}function fG(n,e){n.x1=e[0][0],n.y1=e[0][1],n.x2=e[1][0],n.y2=e[1][1],n.percent=1;var t=e[2];t?(n.cpx1=t[0],n.cpy1=t[1]):(n.cpx1=NaN,n.cpy1=NaN)}var lK=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createLine(t,r,i),a}return e.prototype._createLine=function(t,r,i){var a=t.hostModel,o=t.getItemLayout(r),s=Pvt(o);s.shape.percent=0,xi(s,{shape:{percent:1}},a,r),this.add(s),Z(AU,function(l){var c=Cue(l,t,r);this.add(c),this[Aue(l)]=kue(l,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=t.getItemLayout(r),l={shape:{}};fG(l.shape,s),ar(o,l,a,r),Z(AU,function(c){var u=kue(c,t,r),d=Aue(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=Cue(c,t,r);this.add(h)}this[d]=u},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var a=t.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,c=i&&i.selectLineStyle,u=i&&i.labelStatesModels,d=i&&i.emphasisDisabled,h=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var m=t.getItemModel(r),v=m.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),c=m.getModel(["select","lineStyle"]).getLineStyle(),d=v.get("disabled"),h=v.get("focus"),f=v.get("blurScope"),u=ho(m)}var y=t.getItemVisual(r,"style"),w=y.stroke;o.useStyle(y),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=c,Z(AU,function(A){var D=this.childOfName(A);if(D){D.setColor(w),D.style.opacity=y.opacity;for(var P=0;P<gl.length;P++){var N=gl[P],R=o.getState(N);if(R){var L=R.style||{},B=D.ensureState(N),$=B.style||(B.style={});L.stroke!=null&&($[D.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&($.opacity=L.opacity)}}D.markRedraw()}},this);var S=a.getRawValue(r);ts(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(A,D){return a.getFormattedLabel(A,D,t.dataType)}},inheritColor:w||"#000",defaultOpacity:y.opacity,defaultText:(S==null?t.getName(r):isFinite(S)?na(S):S)+""});var T=this.getTextContent();if(T){var C=u.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=C.get("position")||"middle";var k=C.get("distance");Fe(k)||(k=[k,k]),T.__labelDistance=k}this.setTextConfig({position:null,local:!0,inside:!1}),Bi(this,h,f,d)},e.prototype.highlight=function(){Ng(this)},e.prototype.downplay=function(){Rg(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");fG(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=Kb([],d,u);bT(h,h);function f(R,L){var B=R.__specifiedRotation;if(B==null){var $=l.tangentAt(L);R.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2($[1],$[0]))}else R.attr("rotation",B)}if(r&&(r.setPosition(u),f(r,0),r.scaleX=r.scaleY=o*c,r.markRedraw()),i&&(i.setPosition(d),f(i,1),i.scaleX=i.scaleY=o*c,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var m=void 0,v=void 0,y=a.__labelDistance,w=y[0]*o,S=y[1]*o,T=c/2,C=l.tangentAt(T),k=[C[1],-C[0]],A=l.pointAt(T);k[1]>0&&(k[0]=-k[0],k[1]=-k[1]);var D=C[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var P=-Math.atan2(C[1],C[0]);d[0]<u[0]&&(P=Math.PI+P),a.rotation=P}var N=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":N=-S,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":N=S,v="top";break;default:N=0,v="middle"}switch(a.__position){case"end":a.x=h[0]*w+d[0],a.y=h[1]*S+d[1],m=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":a.x=-h[0]*w+u[0],a.y=-h[1]*S+u[1],m=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=w*D+u[0],a.y=u[1]+N,m=C[0]<0?"right":"left",a.originX=-w*D,a.originY=-N;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=A[0],a.y=A[1]+N,m="center",a.originY=-N;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-w*D+d[0],a.y=d[1]+N,m=C[0]>=0?"right":"left",a.originX=w*D,a.originY=-N;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||m})}},e}(jt),cK=function(){function n(e){this.group=new jt,this._LineCtor=e||lK}return n.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var o=Due(e);e.diff(a).add(function(s){t._doAdd(e,s,o)}).update(function(s,l){t._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},n.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Due(e),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(s){!s.isGroup&&!Nvt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(kU(a)){var o=new this._LineCtor(t,i,this._seriesScope);o.traverse(r),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(e){ky(this._progressiveEls||this.group,e)},n.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(kU(i)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},n.prototype._doUpdate=function(e,t,r,i,a){var o=e.getItemGraphicEl(r);if(!kU(t.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(t,i,a):o=new this._LineCtor(t,i,a),t.setItemGraphicEl(i,o),this.group.add(o)},n}();function Nvt(n){return n.animators&&n.animators.length>0}function Due(n){var e=n.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:ho(e)}}function Iue(n){return isNaN(n[0])||isNaN(n[1])}function kU(n){return n&&!Iue(n[0])&&!Iue(n[1])}var CU=[],DU=[],IU=[],i_=Co,MU=uw,Mue=Math.abs;function Pue(n,e,t){for(var r=n[0],i=n[1],a=n[2],o=1/0,s,l=t*t,c=.1,u=.1;u<=.9;u+=.1){CU[0]=i_(r[0],i[0],a[0],u),CU[1]=i_(r[1],i[1],a[1],u);var d=Mue(MU(CU,e)-l);d<o&&(o=d,s=u)}for(var h=0;h<32;h++){var f=s+c;DU[0]=i_(r[0],i[0],a[0],s),DU[1]=i_(r[1],i[1],a[1],s),IU[0]=i_(r[0],i[0],a[0],f),IU[1]=i_(r[1],i[1],a[1],f);var d=MU(DU,e)-l;if(Mue(d)<.01)break;var m=MU(IU,e)-l;c/=2,d<0?m>=0?s=s+c:s=s-c:m>=0?s=s-c:s=s+c}return s}function PU(n,e){var t=[],r=MD,i=[[],[],[]],a=[[],[]],o=[];e/=2,n.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),d=s.getVisual("toSymbol");c.__original||(c.__original=[vg(c[0]),vg(c[1])],c[2]&&c.__original.push(vg(c[2])));var h=c.__original;if(c[2]!=null){if(tl(i[0],h[0]),tl(i[1],h[2]),tl(i[2],h[1]),u&&u!=="none"){var f=Fk(s.node1),m=Pue(i,h[0],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],m,t),i[0][1]=t[3],i[1][1]=t[4]}if(d&&d!=="none"){var f=Fk(s.node2),m=Pue(i,h[1],f*e);r(i[0][0],i[1][0],i[2][0],m,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],m,t),i[1][1]=t[1],i[2][1]=t[2]}tl(c[0],i[0]),tl(c[1],i[2]),tl(c[2],i[1])}else{if(tl(a[0],h[0]),tl(a[1],h[1]),Kb(o,a[1],a[0]),bT(o,o),u&&u!=="none"){var f=Fk(s.node1);Q9(a[0],a[0],o,f*e)}if(d&&d!=="none"){var f=Fk(s.node2);Q9(a[1],a[1],o,-f*e)}tl(c[0],a[0]),tl(c[1],a[1])}})}function Nue(n){return n.type==="view"}var Rvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new lM,a=new cK,o=this.group;this._controller=new fM(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(t,r,i){var a=this,o=t.coordinateSystem;this._model=t;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(Nue(o)){var u={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?c.attr(u):ar(c,u,t)}PU(t.getGraph(),jk(t));var d=t.getData();s.updateData(d);var h=t.getEdgeData();l.updateData(h),this._updateNodeAndLinkScale(),this._updateController(t,r,i),clearTimeout(this._layoutTimeout);var f=t.forceLayout,m=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,m);var v=t.get("layout");d.graph.eachNode(function(T){var C=T.dataIndex,k=T.getGraphicEl(),A=T.getModel();if(k){k.off("drag").off("dragend");var D=A.get("draggable");D&&k.on("drag",function(N){switch(v){case"force":f.warmUp(),!a._layouting&&a._startForceLayoutIteration(f,m),f.setFixed(C),d.setItemLayout(C,[k.x,k.y]);break;case"circular":d.setItemLayout(C,[k.x,k.y]),T.setLayout({fixed:!0},!0),sK(t,"symbolSize",T,[N.offsetX,N.offsetY]),a.updateLayout(t);break;case"none":default:d.setItemLayout(C,[k.x,k.y]),oK(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){f&&f.setUnfixed(C)}),k.setDraggable(D,!!A.get("cursor"));var P=A.get(["emphasis","focus"]);P==="adjacency"&&(Ut(k).focus=T.getAdjacentDataIndices())}}),d.graph.eachEdge(function(T){var C=T.getGraphicEl(),k=T.getModel().get(["emphasis","focus"]);C&&k==="adjacency"&&(Ut(C).focus={edge:[T.dataIndex],node:[T.node1.dataIndex,T.node2.dataIndex]})});var y=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),w=d.getLayout("cx"),S=d.getLayout("cy");d.graph.eachNode(function(T){XAe(T,y,w,S)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r){var i=this;(function a(){t.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(t,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(c,u,d){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(u,d)&&!yF(c,i,t)}),!Nue(t.coordinateSystem)){o.disable();return}o.enable(t.get("roam")),s.zoomLimit=t.get("scaleLimit"),s.zoom=t.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ZY(s,c.dx,c.dy),i.dispatchAction({seriesId:t.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){QY(s,c.scale,c.originX,c.originY),i.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),a._updateNodeAndLinkScale(),PU(t.getGraph(),jk(t)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=jk(t);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(t){PU(t.getGraph(),jk(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(zr);function a_(n){return"_EC_"+n}var Ovt=function(){function n(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[a_(e)]){var i=new Ib(e,t);return i.hostGraph=this,this.nodes.push(i),r[a_(e)]=i,i}},n.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},n.prototype.getNodeById=function(e){return this._nodesMap[a_(e)]},n.prototype.addEdge=function(e,t,r){var i=this._nodesMap,a=this._edgesMap;if(rr(e)&&(e=this.nodes[e]),rr(t)&&(t=this.nodes[t]),e instanceof Ib||(e=i[a_(e)]),t instanceof Ib||(t=i[a_(t)]),!(!e||!t)){var o=e.id+"-"+t.id,s=new QAe(e,t,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),t.inEdges.push(s)),e.edges.push(s),e!==t&&t.edges.push(s),this.edges.push(s),a[o]=s,s}},n.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},n.prototype.getEdge=function(e,t){e instanceof Ib&&(e=e.id),t instanceof Ib&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},n.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},n.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},n.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof Ib||(t=this._nodesMap[a_(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,t,null))for(var s=[t];s.length;)for(var l=s.shift(),c=l[a],o=0;o<c.length;o++){var u=c[o],d=u.node1===l?u.node2:u.node1;if(!d.__visited){if(e.call(i,d,l))return;s.push(d),d.__visited=!0}}}},n.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(s){var l=i[t.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)i[t.getRawIndex(a)].dataIndex=a},n.prototype.clone=function(){for(var e=new n(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},n}(),Ib=function(){function n(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},n.prototype.getTrajectoryDataIndices=function(){for(var e=yt(),t=yt(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,t.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),a.push(l.inEdges[c].node1)}for(s=0;s<o.length;){var u=o[s];s++,t.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),o.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},n}(),QAe=function(){function n(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var e=yt(),t=yt();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,t.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,t.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:t.keys()}},n}();function JAe(n,e){return{getValue:function(t){var r=this[n][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[n][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[n][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[n][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[n][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][e].getRawIndex(this.dataIndex)}}}Ia(Ib,JAe("hostGraph","data"));Ia(QAe,JAe("hostGraph","edgeData"));function eke(n,e,t,r,i){for(var a=new Ovt(r),o=0;o<n.length;o++)a.addNode(Io(n[o].id,n[o].name,o),o);for(var s=[],l=[],c=0,o=0;o<e.length;o++){var u=e[o],d=u.source,h=u.target;a.addEdge(d,h,c)&&(l.push(u),s.push(Io(Ha(u.id,null),d+" > "+h)),c++)}var f=t.get("coordinateSystem"),m;if(f==="cartesian2d"||f==="polar")m=Zg(n,t);else{var v=rM.get(f),y=v?v.dimensions||[]:[];mn(y,"value")<0&&y.concat(["value"]);var w=aM(n,{coordDimensions:y,encodeDefine:t.getEncode()}).dimensions;m=new hl(w,t),m.initData(n)}var S=new hl(["value"],t);return S.initData(l,s),i&&i(m,S),OAe({mainData:m,struct:a,structAttr:"graph",datas:{node:m,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var Lvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new hM(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){n.prototype.mergeDefaultAndTheme.apply(this,arguments),Ow(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=this;if(a&&i){Svt(this);var s=eke(a,i,this,!0,l);return Z(s.edges,function(c){_vt(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(m){var v=o._categoriesModels,y=m.getShallow("category"),w=v[y];return w&&(w.parentModel=m.parentModel,m.parentModel=w),m});var d=wr.prototype.getModel;function h(m,v){var y=d.call(this,m,v);return y.resolveParentPath=f,y}u.wrapMethod("getItemModel",function(m){return m.resolveParentPath=f,m.getModel=h,m});function f(m){if(m&&(m[0]==="label"||m[1]==="label")){var v=m.slice();return m[0]==="label"?v[0]="edgeLabel":m[1]==="label"&&(v[1]="edgeLabel"),v}return m}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(t,i),s=a.graph.getEdgeByIndex(t),l=a.getName(s.node1.dataIndex),c=a.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),fo("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var d=_Te({series:this,dataIndex:t,multipleSeries:r});return d},e.prototype._updateCategoriesData=function(){var t=Be(this.option.categories||[],function(i){return i.value!=null?i:Me({value:0},i)}),r=new hl(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ai),jvt={type:"graphRoam",event:"graphRoam",update:"none"};function Fvt(n){n.registerChartView(Rvt),n.registerSeriesModel(Lvt),n.registerProcessor(vvt),n.registerVisual(yvt),n.registerVisual(bvt),n.registerLayout(Tvt),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,Avt),n.registerLayout(Cvt),n.registerCoordinateSystem("graphView",{dimensions:pM.dimensions,create:Ivt}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},ma),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},ma),n.registerAction(jvt,function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=eK(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var $vt=function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n}(),Bvt=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new $vt},e.prototype.buildPath=function(t,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-i(l)*s*(s>=o/3?1:2),u=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,t.moveTo(c,u),t.lineTo(r.x+i(l)*s,r.y+a(l)*s),t.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),t.lineTo(r.x-i(l)*s,r.y-a(l)*s),t.lineTo(c,u)},e}(Cn);function Uvt(n,e){var t=n.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),o=tt(t[0],e.getWidth()),s=tt(t[1],e.getHeight()),l=tt(n.get("radius"),a/2);return{cx:o,cy:s,r:l}}function RN(n,e){var t=n==null?"":n+"";return e&&(st(e)?t=e.replace("{value}",t):kt(e)&&(t=e(n))),t}var Vvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),o=Uvt(t,i);this._renderMain(t,r,i,a,o),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,a,o){var s=this.group,l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,d=t.getModel("axisLine"),h=d.get("roundCap"),f=h?L2:ml,m=d.get("show"),v=d.getModel("lineStyle"),y=v.get("width"),w=[c,u];nY(w,!l),c=w[0],u=w[1];for(var S=u-c,T=c,C=[],k=0;m&&k<a.length;k++){var A=Math.min(Math.max(a[k][0],0),1);u=c+S*A;var D=new f({shape:{startAngle:T,endAngle:u,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-y,r:o.r},silent:!0});D.setStyle({fill:a[k][1]}),D.setStyle(v.getLineStyle(["color","width"])),C.push(D),T=u}C.reverse(),Z(C,function(N){return s.add(N)});var P=function(N){if(N<=0)return a[0][1];var R;for(R=0;R<a.length;R++)if(a[R][0]>=N&&(R===0?0:a[R-1][0])<N)return a[R][1];return a[R-1][1]};this._renderTicks(t,r,i,P,o,c,u,l,y),this._renderTitleAndDetail(t,r,i,P,o),this._renderAnchor(t,o),this._renderPointer(t,r,i,P,o,c,u,l,y)},e.prototype._renderTicks=function(t,r,i,a,o,s,l,c,u){for(var d=this.group,h=o.cx,f=o.cy,m=o.r,v=+t.get("min"),y=+t.get("max"),w=t.getModel("splitLine"),S=t.getModel("axisTick"),T=t.getModel("axisLabel"),C=t.get("splitNumber"),k=S.get("splitNumber"),A=tt(w.get("length"),m),D=tt(S.get("length"),m),P=s,N=(l-s)/C,R=N/k,L=w.getModel("lineStyle").getLineStyle(),B=S.getModel("lineStyle").getLineStyle(),$=w.get("distance"),G,W,K=0;K<=C;K++){if(G=Math.cos(P),W=Math.sin(P),w.get("show")){var X=$?$+u:u,te=new so({shape:{x1:G*(m-X)+h,y1:W*(m-X)+f,x2:G*(m-A-X)+h,y2:W*(m-A-X)+f},style:L,silent:!0});L.stroke==="auto"&&te.setStyle({stroke:a(K/C)}),d.add(te)}if(T.get("show")){var X=T.get("distance")+$,ie=RN(na(K/C*(y-v)+v),T.get("formatter")),z=a(K/C),se=G*(m-A-X)+h,ce=W*(m-A-X)+f,ee=T.get("rotate"),be=0;ee==="radial"?(be=-P+2*Math.PI,be>Math.PI/2&&(be+=Math.PI)):ee==="tangential"?be=-P-Math.PI/2:rr(ee)&&(be=ee*Math.PI/180),be===0?d.add(new Qn({style:ri(T,{text:ie,x:se,y:ce,verticalAlign:W<-.8?"top":W>.8?"bottom":"middle",align:G<-.4?"left":G>.4?"right":"center"},{inheritColor:z}),silent:!0})):d.add(new Qn({style:ri(T,{text:ie,x:se,y:ce,verticalAlign:"middle",align:"center"},{inheritColor:z}),silent:!0,originX:se,originY:ce,rotation:be}))}if(S.get("show")&&K!==C){var X=S.get("distance");X=X?X+u:u;for(var fe=0;fe<=k;fe++){G=Math.cos(P),W=Math.sin(P);var De=new so({shape:{x1:G*(m-X)+h,y1:W*(m-X)+f,x2:G*(m-D-X)+h,y2:W*(m-D-X)+f},silent:!0,style:B});B.stroke==="auto"&&De.setStyle({stroke:a((K+fe/k)/C)}),d.add(De),P+=R}P-=R}else P+=N}},e.prototype._renderPointer=function(t,r,i,a,o,s,l,c,u){var d=this.group,h=this._data,f=this._progressEls,m=[],v=t.get(["pointer","show"]),y=t.getModel("progress"),w=y.get("show"),S=t.getData(),T=S.mapDimension("value"),C=+t.get("min"),k=+t.get("max"),A=[C,k],D=[s,l];function P(R,L){var B=S.getItemModel(R),$=B.getModel("pointer"),G=tt($.get("width"),o.r),W=tt($.get("length"),o.r),K=t.get(["pointer","icon"]),X=$.get("offsetCenter"),te=tt(X[0],o.r),ie=tt(X[1],o.r),z=$.get("keepAspect"),se;return K?se=Da(K,te-G/2,ie-W,G,W,null,z):se=new Bvt({shape:{angle:-Math.PI/2,width:G,r:W,x:te,y:ie}}),se.rotation=-(L+Math.PI/2),se.x=o.cx,se.y=o.cy,se}function N(R,L){var B=y.get("roundCap"),$=B?L2:ml,G=y.get("overlap"),W=G?y.get("width"):u/S.count(),K=G?o.r-W:o.r-(R+1)*W,X=G?o.r:o.r-R*W,te=new $({shape:{startAngle:s,endAngle:L,cx:o.cx,cy:o.cy,clockwise:c,r0:K,r:X}});return G&&(te.z2=br(S.get(T,R),[C,k],[100,0],!0)),te}(w||v)&&(S.diff(h).add(function(R){var L=S.get(T,R);if(v){var B=P(R,s);xi(B,{rotation:-((isNaN(+L)?D[0]:br(L,A,D,!0))+Math.PI/2)},t),d.add(B),S.setItemGraphicEl(R,B)}if(w){var $=N(R,s),G=y.get("clip");xi($,{shape:{endAngle:br(L,A,D,G)}},t),d.add($),TH(t.seriesIndex,S.dataType,R,$),m[R]=$}}).update(function(R,L){var B=S.get(T,R);if(v){var $=h.getItemGraphicEl(L),G=$?$.rotation:s,W=P(R,G);W.rotation=G,ar(W,{rotation:-((isNaN(+B)?D[0]:br(B,A,D,!0))+Math.PI/2)},t),d.add(W),S.setItemGraphicEl(R,W)}if(w){var K=f[L],X=K?K.shape.endAngle:s,te=N(R,X),ie=y.get("clip");ar(te,{shape:{endAngle:br(B,A,D,ie)}},t),d.add(te),TH(t.seriesIndex,S.dataType,R,te),m[R]=te}}).execute(),S.each(function(R){var L=S.getItemModel(R),B=L.getModel("emphasis"),$=B.get("focus"),G=B.get("blurScope"),W=B.get("disabled");if(v){var K=S.getItemGraphicEl(R),X=S.getItemVisual(R,"style"),te=X.fill;if(K instanceof Ro){var ie=K.style;K.useStyle(Me({image:ie.image,x:ie.x,y:ie.y,width:ie.width,height:ie.height},X))}else K.useStyle(X),K.type!=="pointer"&&K.setColor(te);K.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),K.style.fill==="auto"&&K.setStyle("fill",a(br(S.get(T,R),A,[0,1],!0))),K.z2EmphasisLift=0,es(K,L),Bi(K,$,G,W)}if(w){var z=m[R];z.useStyle(S.getItemVisual(R,"style")),z.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),z.z2EmphasisLift=0,es(z,L),Bi(z,$,G,W)}}),this._progressEls=m)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),c=i.get("keepAspect"),u=Da(s,r.cx-o/2+tt(l[0],r.r),r.cy-o/2+tt(l[1],r.r),o,o,null,c);u.z2=i.get("showAbove")?1:0,u.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,r,i,a,o){var s=this,l=t.getData(),c=l.mapDimension("value"),u=+t.get("min"),d=+t.get("max"),h=new jt,f=[],m=[],v=t.isAnimationEnabled(),y=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(w){f[w]=new Qn({silent:!0}),m[w]=new Qn({silent:!0})}).update(function(w,S){f[w]=s._titleEls[S],m[w]=s._detailEls[S]}).execute(),l.each(function(w){var S=l.getItemModel(w),T=l.get(c,w),C=new jt,k=a(br(T,[u,d],[0,1],!0)),A=S.getModel("title");if(A.get("show")){var D=A.get("offsetCenter"),P=o.cx+tt(D[0],o.r),N=o.cy+tt(D[1],o.r),R=f[w];R.attr({z2:y?0:2,style:ri(A,{x:P,y:N,text:l.getName(w),align:"center",verticalAlign:"middle"},{inheritColor:k})}),C.add(R)}var L=S.getModel("detail");if(L.get("show")){var B=L.get("offsetCenter"),$=o.cx+tt(B[0],o.r),G=o.cy+tt(B[1],o.r),W=tt(L.get("width"),o.r),K=tt(L.get("height"),o.r),X=t.get(["progress","show"])?l.getItemVisual(w,"style").fill:k,R=m[w],te=L.get("formatter");R.attr({z2:y?0:2,style:ri(L,{x:$,y:G,text:RN(T,te),width:isNaN(W)?null:W,height:isNaN(K)?null:K,align:"center",verticalAlign:"middle"},{inheritColor:X})}),k1e(R,{normal:L},T,function(z){return RN(z,te)}),v&&C1e(R,w,l,t,{getFormattedLabel:function(z,se,ce,ee,be,fe){return RN(fe?fe.interpolatedValue:T,te)}}),C.add(R)}h.add(C)}),this.group.add(h),this._titleEls=f,this._detailEls=m},e.type="gauge",e}(zr),zvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return NT(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(ai);function Hvt(n){n.registerChartView(Vvt),n.registerSeriesModel(zvt)}var Gvt=["itemStyle","opacity"],Wvt=function(n){_e(e,n);function e(t,r){var i=n.call(this)||this,a=i,o=new yl,s=new Qn;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var a=this,o=t.hostModel,s=t.getItemModel(r),l=t.getItemLayout(r),c=s.getModel("emphasis"),u=s.get(Gvt);u=u??1,i||ch(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,xi(a,{style:{opacity:u}},o,r)):ar(a,{style:{opacity:u},shape:{points:l.points}},o,r),es(a,s),this._updateLabel(t,r),Bi(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=t.hostModel,l=t.getItemModel(r),c=t.getItemLayout(r),u=c.label,d=t.getItemVisual(r,"style"),h=d.fill;ts(o,ho(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:d.opacity,defaultText:t.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),i.setTextConfig({local:!0,inside:!!u.inside,insideStroke:h,outsideFill:h});var f=u.linePoints;a.setShape({points:f}),i.textGuideLineConfig={anchor:f?new ln(f[0][0],f[0][1]):null},ar(o,{style:{x:u.x,y:u.y}},s,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),BY(i,UY(l),{stroke:h})},e}(vl),qvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var c=new Wvt(a,l);a.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=o.getItemGraphicEl(c);u.updateData(a,l),s.add(u),a.setItemGraphicEl(l,u)}).remove(function(l){var c=o.getItemGraphicEl(l);FD(c,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(zr),Yvt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new hM(ut(this.getData,this),ut(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return NT(this,{coordDimensions:["value"],encodeDefaulter:Qt(bY,this)})},e.prototype._defaultLabelLine=function(t){Ow(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=n.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,t)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ai);function Kvt(n,e){return qa(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Xvt(n,e){for(var t=n.mapDimension("value"),r=n.mapArray(t,function(l){return l}),i=[],a=e==="ascending",o=0,s=n.count();o<s;o++)i[o]=o;return kt(e)?i.sort(e):e!=="none"&&i.sort(function(l,c){return a?r[l]-r[c]:r[c]-r[l]}),i}function Zvt(n){var e=n.hostModel,t=e.get("orient");n.each(function(r){var i=n.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=n.getItemLayout(r),c=l.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",d,h,f,m;if(u)o==="insideLeft"?(h=(c[0][0]+c[3][0])/2+5,f=(c[0][1]+c[3][1])/2,d="left"):o==="insideRight"?(h=(c[1][0]+c[2][0])/2-5,f=(c[1][1]+c[2][1])/2,d="right"):(h=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,f=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,d="center"),m=[[h,f],[h,f]];else{var v=void 0,y=void 0,w=void 0,S=void 0,T=s.get("length");o==="left"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,w=v-T,h=w-5,d="right"):o==="right"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,w=v+T,h=w+5,d="left"):o==="top"?(v=(c[3][0]+c[0][0])/2,y=(c[3][1]+c[0][1])/2,S=y-T,f=S-5,d="center"):o==="bottom"?(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,S=y+T,f=S+5,d="center"):o==="rightTop"?(v=t==="horizontal"?c[3][0]:c[1][0],y=t==="horizontal"?c[3][1]:c[1][1],t==="horizontal"?(S=y-T,f=S-5,d="center"):(w=v+T,h=w+5,d="top")):o==="rightBottom"?(v=c[2][0],y=c[2][1],t==="horizontal"?(S=y+T,f=S+5,d="center"):(w=v+T,h=w+5,d="bottom")):o==="leftTop"?(v=c[0][0],y=t==="horizontal"?c[0][1]:c[1][1],t==="horizontal"?(S=y-T,f=S-5,d="center"):(w=v-T,h=w-5,d="right")):o==="leftBottom"?(v=t==="horizontal"?c[1][0]:c[3][0],y=t==="horizontal"?c[1][1]:c[2][1],t==="horizontal"?(S=y+T,f=S+5,d="center"):(w=v-T,h=w-5,d="right")):(v=(c[1][0]+c[2][0])/2,y=(c[1][1]+c[2][1])/2,t==="horizontal"?(S=y+T,f=S+5,d="center"):(w=v+T,h=w+5,d="left")),t==="horizontal"?(w=v,h=w):(S=y,f=S),m=[[v,y],[w,S]]}l.label={linePoints:m,x:h,y:f,verticalAlign:"middle",textAlign:d,inside:u}})}function Qvt(n,e){n.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),a=t.get("sort"),o=Kvt(t,e),s=t.get("orient"),l=o.width,c=o.height,u=Xvt(r,a),d=o.x,h=o.y,f=s==="horizontal"?[tt(t.get("minSize"),c),tt(t.get("maxSize"),c)]:[tt(t.get("minSize"),l),tt(t.get("maxSize"),l)],m=r.getDataExtent(i),v=t.get("min"),y=t.get("max");v==null&&(v=Math.min(m[0],0)),y==null&&(y=m[1]);var w=t.get("funnelAlign"),S=t.get("gap"),T=s==="horizontal"?l:c,C=(T-S*(r.count()-1))/r.count(),k=function(G,W){if(s==="horizontal"){var K=r.get(i,G)||0,X=br(K,[v,y],f,!0),te=void 0;switch(w){case"top":te=h;break;case"center":te=h+(c-X)/2;break;case"bottom":te=h+(c-X);break}return[[W,te],[W,te+X]]}var ie=r.get(i,G)||0,z=br(ie,[v,y],f,!0),se;switch(w){case"left":se=d;break;case"center":se=d+(l-z)/2;break;case"right":se=d+l-z;break}return[[se,W],[se+z,W]]};a==="ascending"&&(C=-C,S=-S,s==="horizontal"?d+=l:h+=c,u=u.reverse());for(var A=0;A<u.length;A++){var D=u[A],P=u[A+1],N=r.getItemModel(D);if(s==="horizontal"){var R=N.get(["itemStyle","width"]);R==null?R=C:(R=tt(R,l),a==="ascending"&&(R=-R));var L=k(D,d),B=k(P,d+R);d+=R+S,r.setItemLayout(D,{points:L.concat(B.slice().reverse())})}else{var $=N.get(["itemStyle","height"]);$==null?$=C:($=tt($,c),a==="ascending"&&($=-$));var L=k(D,h),B=k(P,h+$);h+=$+S,r.setItemLayout(D,{points:L.concat(B.slice().reverse())})}}Zvt(r)})}function Jvt(n){n.registerChartView(qvt),n.registerSeriesModel(Yvt),n.registerLayout(Qvt),n.registerProcessor(dM("funnel"))}var eyt=.3,tyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new jt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=t.getData(),l=this._data,c=t.coordinateSystem,u=c.dimensions,d=Oue(t);s.diff(l).add(h).update(f).remove(m).execute();function h(y){var w=Rue(s,o,y,u,c);NU(w,s,y,d)}function f(y,w){var S=l.getItemGraphicEl(w),T=tke(s,y,u,c);s.setItemGraphicEl(y,S),ar(S,{shape:{points:T}},t,y),ch(S),NU(S,s,y,d)}function m(y){var w=l.getItemGraphicEl(y);o.remove(w)}if(!this._initialized){this._initialized=!0;var v=nyt(c,t,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=Oue(r),c=this._progressiveEls=[],u=t.start;u<t.end;u++){var d=Rue(a,this._dataGroup,u,s,o);d.incremental=!0,NU(d,a,u,l),c.push(d)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(zr);function nyt(n,e,t){var r=n.model,i=n.getRect(),a=new Yn({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),xi(a,{shape:{width:i.width,height:i.height}},e,t),a}function tke(n,e,t,r){for(var i=[],a=0;a<t.length;a++){var o=t[a],s=n.get(n.mapDimension(o),e);ryt(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function Rue(n,e,t,r,i){var a=tke(n,t,r,i),o=new yl({shape:{points:a},z2:10});return e.add(o),n.setItemGraphicEl(t,o),o}function Oue(n){var e=n.get("smooth",!0);return e===!0&&(e=eyt),e=Pg(e),DD(e)&&(e=0),{smooth:e}}function NU(n,e,t,r){n.useStyle(e.getItemVisual(t,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var i=e.getItemModel(t),a=i.getModel("emphasis");es(n,i,"lineStyle"),Bi(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function ryt(n,e){return e==="category"?n==null:n==null||isNaN(n)}var iyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:ut(ayt,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){t===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(ai);function ayt(n){var e=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(e){var t={};return Z(e.dimensions,function(r){var i=oyt(r);t[r]=i}),t}}function oyt(n){return+n.replace("dim","")}var syt=["lineStyle","opacity"],lyt={seriesType:"parallel",reset:function(n,e){var t=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(i,a){t.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var c=a.getItemModel(s).get(syt,!0);c!=null&&(l=c)}var u=a.ensureUniqueItemVisual(s,"style");u.opacity=l},i.start,i.end)}}}};function cyt(n){uyt(n),dyt(n)}function uyt(n){if(!n.parallel){var e=!1;Z(n.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(n.parallel=[{}])}}function dyt(n){var e=Rr(n.parallelAxis);Z(e,function(t){if(It(t)){var r=t.parallelIndex||0,i=Rr(n.parallel)[r];i&&i.parallelAxisDefault&&sn(t,i.parallelAxisDefault,!1)}})}var hyt=5,fyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this._model=t,this._api=i,this._handlers||(this._handlers={},Z(pyt,function(a,o){i.getZr().on(o,this._handlers[o]=ut(a,this))},this)),IT(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){VD(this,"_throttledDispatchExpand"),Z(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Me({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Mi),pyt={mousedown:function(n){RU(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var e=this._mouseDownPoint;if(RU(this,"click")&&e){var t=[n.offsetX,n.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>hyt)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!RU(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function RU(n,e){var t=n._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var gyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&sn(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var i=t.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){Z(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],i=vr(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);Z(i,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(On),myt=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(fh);function ax(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=o_(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=o_(s,[0,o]),i=a=o_(s,[i,a]),r=0}e[0]=o_(e[0],t),e[1]=o_(e[1],t);var l=OU(e,r);e[r]+=n;var c=i||0,u=t.slice();l.sign<0?u[0]+=c:u[1]-=c,e[r]=o_(e[r],u);var d;return d=OU(e,r),i!=null&&(d.sign!==l.sign||d.span<i)&&(e[1-r]=e[r]+l.sign*i),d=OU(e,r),a!=null&&d.span>a&&(e[1-r]=e[r]+d.sign*a),e}function OU(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function o_(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var LU=Z,nke=Math.min,rke=Math.max,Lue=Math.floor,vyt=Math.ceil,jue=na,yyt=Math.PI,byt=function(){function n(e,t,r){this.type="parallel",this._axesMap=yt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=e.dimensions,a=e.parallelAxisIndex;LU(i,function(o,s){var l=a[s],c=t.getComponent("parallelAxis",l),u=this._axesMap.set(o,new myt(o,mF(c),[0,0],c.get("type"),l)),d=u.type==="category";u.onBand=d&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},n.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},n.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+t.axisLength&&s>=i&&s<=i+t.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var i=r.getData();LU(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),z1(o.scale,o.model)},this)}},this)},n.prototype.resize=function(e,t){this._rect=qa(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=t[i[o]],l=[0,s],c=this.dimensions.length,u=ON(e.get("axisExpandWidth"),l),d=ON(e.get("axisExpandCount")||0,[0,c]),h=e.get("axisExpandable")&&c>3&&c>d&&d>1&&u>0&&s>0,f=e.get("axisExpandWindow"),m;if(f)m=ON(f[1]-f[0],l),f[1]=f[0]+m;else{m=ON(u*(d-1),l);var v=e.get("axisExpandCenter")||Lue(c/2);f=[u*v-m/2],f[1]=f[0]+m}var y=(s-m)/(c-d);y<3&&(y=0);var w=[Lue(jue(f[0]/u,1))+1,vyt(jue(f[1]/u,1))-1],S=y/u*f[0];return{layout:a,pixelDimIndex:o,layoutBase:t[r[o]],layoutLength:s,axisBase:t[r[1-o]],axisLength:t[i[1-o]],axisExpandable:h,axisExpandWidth:u,axisCollapseWidth:y,axisExpandWindow:f,axisCount:c,winInnerIndices:w,axisExpandWindow0Pos:S}},n.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),LU(r,function(o,s){var l=(i.axisExpandable?xyt:wyt)(s,i),c={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},u={horizontal:yyt/2,vertical:0},d=[c[a].x+e.x,c[a].y+e.y],h=u[a],f=Bc();Qw(f,f,h),Lf(f,f,d),this._axesLayout[o]={position:d,rotation:h,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(e){return this._axesMap.get(e)},n.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},n.prototype.eachActiveState=function(e,t,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];Z(o,function(y){s.push(e.mapDimension(y)),l.push(a.get(y).model)});for(var c=this.hasAxisBrushed(),u=r;u<i;u++){var d=void 0;if(!c)d="normal";else{d="active";for(var h=e.getValues(s,u),f=0,m=o.length;f<m;f++){var v=l[f].getActiveState(h[f]);if(v==="inactive"){d="inactive";break}}}t(d,u)}},n.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)t.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},n.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return rh([e,0],r.transform)},n.prototype.getAxisLayout=function(e){return Nt(this._axesLayout[e])},n.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,c="slide",u=t.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),h=d[0]!=null;if(u)h&&u&&s<a*d[0]?(c="jump",l=s-a*d[2]):h&&u&&s>a*(1-d[0])?(c="jump",l=s-a*(1-d[2])):(l=s-a*d[1])>=0&&(l=s-a*(1-d[1]))<=0&&(l=0),l*=t.axisExpandWidth/u,l?ax(l,i,o,"all"):c="none";else{var f=i[1]-i[0],m=o[1]*s/f;i=[rke(0,m-f/2)],i[1]=nke(o[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:c}},n}();function ON(n,e){return nke(rke(n,e[0]),e[1])}function wyt(n,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*n,axisNameAvailableWidth:t,axisLabelShow:!0}}function xyt(n,e){var t=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,c=!1,u;return n<o[0]?(s=n*a,u=a):n<=o[1]?(s=e.axisExpandWindow0Pos+n*r-e.axisExpandWindow[0],l=r,c=!0):(s=t-(i-1-n)*a,u=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}function Syt(n,e){var t=[];return n.eachComponent("parallel",function(r,i){var a=new byt(r,n,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Ca).models[0];r.coordinateSystem=i.coordinateSystem}}),t}var _yt={create:Syt},pG=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return jw([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Nt(t);if(r)for(var i=r.length-1;i>=0;i--)Bu(r[i])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e}(On);Ia(pG,oM);var Bw=!0,eI=Math.min,W1=Math.max,Tyt=Math.pow,Eyt=1e4,Ayt=6,kyt=6,Fue="globalPan",Cyt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Dyt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},$ue={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Iyt=0,uK=function(n){_e(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new jt,r._uid="brushController_"+Iyt++,Z(jyt,function(i,a){this._handlers[a]=ut(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||wgt(r,Fue,this._uid),Z(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=sn(Nt($ue),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;xgt(t,Fue,this._uid),Z(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};Z(t,function(i){r[i.panelId]=Nt(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Be(t,function(h){return sn(Nt($ue),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Og(i,t,c,l).add(u).update(u).remove(d).execute(),this;function l(h,f){return(h.id!=null?h.id:r+f)+"-"+h.brushType}function c(h,f){return l(h.__brushOption,f)}function u(h,f){var m=t[h];if(f!=null&&i[f]===s)a[h]=i[f];else{var v=a[h]=f!=null?(i[f].__brushOption=m,i[f]):ake(o,ike(o,m));dK(o,v)}}function d(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),gG(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Xu);function ike(n,e){var t=SF[e.brushType].createCover(n,e);return t.__brushOption=e,ske(t,e),n.group.add(t),t}function ake(n,e){var t=hK(e);return t.endCreating&&(t.endCreating(n,e),ske(e,e.__brushOption)),e}function oke(n,e){var t=e.__brushOption;hK(e).updateCoverShape(n,e,t.range,t)}function ske(n,e){var t=e.z;t==null&&(t=Eyt),n.traverse(function(r){r.z=t,r.z2=t})}function dK(n,e){hK(e).updateCommon(n,e),oke(n,e)}function hK(n){return SF[n.__brushOption.brushType]}function fK(n,e,t){var r=n._panels;if(!r)return Bw;var i,a=n._transform;return Z(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function lke(n,e){var t=n._panels;if(!t)return Bw;var r=e.__brushOption.panelId;return r!=null?t[r]:Bw}function gG(n){var e=n._covers,t=e.length;return Z(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function Uw(n,e){var t=Be(n._covers,function(r){var i=r.__brushOption,a=Nt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Myt(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=Tyt(i*i+a*a,.5);return o>Ayt}function cke(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function uke(n,e,t,r){var i=new jt;return i.add(new Yn({name:"main",style:pK(t),silent:!0,draggable:!0,cursor:"move",drift:Qt(Bue,n,e,i,["n","s","w","e"]),ondragend:Qt(Uw,e,{isEnd:!0})})),Z(r,function(a){i.add(new Yn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Qt(Bue,n,e,i,a),ondragend:Qt(Uw,e,{isEnd:!0})}))}),i}function dke(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=W1(i,kyt),o=t[0][0],s=t[1][0],l=o-i/2,c=s-i/2,u=t[0][1],d=t[1][1],h=u-a+i/2,f=d-a+i/2,m=u-o,v=d-s,y=m+i,w=v+i;Kp(n,e,"main",o,s,m,v),r.transformable&&(Kp(n,e,"w",l,c,a,w),Kp(n,e,"e",h,c,a,w),Kp(n,e,"n",l,c,y,a),Kp(n,e,"s",l,f,y,a),Kp(n,e,"nw",l,c,a,a),Kp(n,e,"ne",h,c,a,a),Kp(n,e,"sw",l,f,a,a),Kp(n,e,"se",h,f,a,a))}function mG(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(pK(t)),i.attr({silent:!r,cursor:r?"move":"default"}),Z([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?vG(n,a[0]):Nyt(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?Dyt[s]+"-resize":null})})}function Kp(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(Oyt(gK(n,e,[[r,i],[r+a,i+o]])))}function pK(n){return Dt({strokeNoScale:!0},n.brushStyle)}function hke(n,e,t,r){var i=[eI(n,t),eI(e,r)],a=[W1(n,t),W1(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Pyt(n){return gw(n.group)}function vG(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=eF(t[e],Pyt(n));return r[i]}function Nyt(n,e){var t=[vG(n,e[0]),vG(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function Bue(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),l=fke(e,i,a);Z(r,function(c){var u=Cyt[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=n.fromRectRange(hke(s[0][0],s[1][0],s[0][1],s[1][1])),dK(e,t),Uw(e,{isEnd:!1})}function Ryt(n,e,t,r){var i=e.__brushOption.range,a=fke(n,t,r);Z(i,function(o){o[0]+=a[0],o[1]+=a[1]}),dK(n,e),Uw(n,{isEnd:!1})}function fke(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function gK(n,e,t){var r=lke(n,e);return r&&r!==Bw?r.clipPath(t,n._transform):Nt(t)}function Oyt(n){var e=eI(n[0][0],n[1][0]),t=eI(n[0][1],n[1][1]),r=W1(n[0][0],n[1][0]),i=W1(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function Lyt(n,e,t){if(!(!n._brushType||Fyt(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=fK(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Bw||s.panelId===a.panelId)&&SF[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function yG(n){var e=n.event;e.preventDefault&&e.preventDefault()}function bG(n,e,t){return n.childOfName("main").contain(e,t)}function pke(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),Myt(n)||i){if(a&&!i){o.brushMode==="single"&&gG(n);var l=Nt(o);l.brushType=Uue(l.brushType,a),l.panelId=a===Bw?null:a.panelId,i=n._creatingCover=ike(n,l),n._covers.push(i)}if(i){var c=SF[Uue(n._brushType,a)],u=i.__brushOption;u.range=c.getCreatingRange(gK(n,i,n._track)),r&&(ake(n,i),c.updateCommon(n,i)),oke(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&fK(n,e,t)&&gG(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Uue(n,e){return n==="auto"?e.defaultBrushType:n}var jyt={mousedown:function(n){if(this._dragging)Vue(this,n);else if(!n.target||!n.target.draggable){yG(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=fK(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(Lyt(this,n,r),this._dragging){yG(n);var i=pke(this,n,r,!1);i&&Uw(this,i)}},mouseup:function(n){Vue(this,n)}};function Vue(n,e){if(n._dragging){yG(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=pke(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&Uw(n,a)}}function Fyt(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var SF={lineX:zue(0),lineY:zue(1),rect:{createCover:function(n,e){function t(r){return r}return uke({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=cke(n);return hke(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){dke(n,e,t,r)},updateCommon:mG,contain:bG},polygon:{createCover:function(n,e){var t=new jt;return t.add(new yl({name:"main",style:pK(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new vl({name:"main",draggable:!0,drift:Qt(Ryt,n,e),ondragend:Qt(Uw,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:gK(n,e,t)})},updateCommon:mG,contain:bG}};function zue(n){return{createCover:function(e,t){return uke({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=cke(e),r=eI(t[0][n],t[1][n]),i=W1(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=lke(e,t);if(o!==Bw&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[r,a];n&&l.reverse(),dke(e,t,l,i)},updateCommon:mG,contain:bG}}function gke(n){return n=mK(n),function(e){return T1e(e,n)}}function mke(n,e){return n=mK(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function vke(n,e,t){var r=mK(n);return function(i,a){return r.contain(a[0],a[1])&&!yF(i,e,t)}}function mK(n){return dn.create(n)}var $yt=["axisLine","axisTickLabel","axisName"],Byt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){n.prototype.init.apply(this,arguments),(this._brushController=new uK(r.getZr())).on("brush",ut(this._onBrush,this))},e.prototype.render=function(t,r,i,a){if(!Uyt(t,r,a)){this.axisModel=t,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new jt,this.group.add(this._axisGroup),!!t.get("show")){var s=zyt(t,r),l=s.coordinateSystem,c=t.getAreaSelectStyle(),u=c.width,d=t.axis.dim,h=l.getAxisLayout(d),f=Me({strokeContainThreshold:u},h),m=new fl(t,f);Z($yt,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(f,c,t,s,u,i),tM(o,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,i,a,o,s){var l=i.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),d=dn.create({x:l[0],y:-o/2,width:c,height:o});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:gke(d),isTargetByCursor:vke(d,s,a),getLinearBrushOtherExtent:mke(d,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(Vyt(i))},e.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,a=i.axis,o=Be(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Mi);function Uyt(n,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===n}function Vyt(n){var e=n.axis;return Be(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function zyt(n,e){return e.getComponent("parallel",n.get("parallelIndex"))}var Hyt={type:"axisAreaSelect",event:"axisAreaSelected"};function Gyt(n){n.registerAction(Hyt,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),n.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var Wyt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function yke(n){n.registerComponentView(fyt),n.registerComponentModel(gyt),n.registerCoordinateSystem("parallel",_yt),n.registerPreprocessor(cyt),n.registerComponentModel(pG),n.registerComponentView(Byt),G1(n,"parallel",pG,Wyt),Gyt(n)}function qyt(n){En(yke),n.registerChartView(tyt),n.registerSeriesModel(iyt),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,lyt)}var Yyt=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n}(),Kyt=function(n){_e(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Yyt},e.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},e.prototype.highlight=function(){Ng(this)},e.prototype.downplay=function(){Rg(this)},e}(Cn),Xyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,r,i){var a=this,o=t.getGraph(),s=this.group,l=t.layoutInfo,c=l.width,u=l.height,d=t.getData(),h=t.getData("edge"),f=t.get("orient");this._model=t,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(m){var v=new Kyt,y=Ut(v);y.dataIndex=m.dataIndex,y.seriesIndex=t.seriesIndex,y.dataType="edge";var w=m.getModel(),S=w.getModel("lineStyle"),T=S.get("curveness"),C=m.node1.getLayout(),k=m.node1.getModel(),A=k.get("localX"),D=k.get("localY"),P=m.node2.getLayout(),N=m.node2.getModel(),R=N.get("localX"),L=N.get("localY"),B=m.getLayout(),$,G,W,K,X,te,ie,z;v.shape.extent=Math.max(1,B.dy),v.shape.orient=f,f==="vertical"?($=(A!=null?A*c:C.x)+B.sy,G=(D!=null?D*u:C.y)+C.dy,W=(R!=null?R*c:P.x)+B.ty,K=L!=null?L*u:P.y,X=$,te=G*(1-T)+K*T,ie=W,z=G*T+K*(1-T)):($=(A!=null?A*c:C.x)+C.dx,G=(D!=null?D*u:C.y)+B.sy,W=R!=null?R*c:P.x,K=(L!=null?L*u:P.y)+B.ty,X=$*(1-T)+W*T,te=G,ie=$*T+W*(1-T),z=K),v.setShape({x1:$,y1:G,x2:W,y2:K,cpx1:X,cpy1:te,cpx2:ie,cpy2:z}),v.useStyle(S.getItemStyle()),Hue(v.style,f,m);var se=""+w.get("value"),ce=ho(w,"edgeLabel");ts(v,ce,{labelFetcher:{getFormattedLabel:function(fe,De,dt,ve,de,me){return t.getFormattedLabel(fe,De,"edge",ve,Df(de,ce.normal&&ce.normal.get("formatter"),se),me)}},labelDataIndex:m.dataIndex,defaultText:se}),v.setTextConfig({position:"inside"});var ee=w.getModel("emphasis");es(v,w,"lineStyle",function(fe){var De=fe.getItemStyle();return Hue(De,f,m),De}),s.add(v),h.setItemGraphicEl(m.dataIndex,v);var be=ee.get("focus");Bi(v,be==="adjacency"?m.getAdjacentDataIndices():be==="trajectory"?m.getTrajectoryDataIndices():be,ee.get("blurScope"),ee.get("disabled"))}),o.eachNode(function(m){var v=m.getLayout(),y=m.getModel(),w=y.get("localX"),S=y.get("localY"),T=y.getModel("emphasis"),C=y.get(["itemStyle","borderRadius"])||0,k=new Yn({shape:{x:w!=null?w*c:v.x,y:S!=null?S*u:v.y,width:v.dx,height:v.dy,r:C},style:y.getModel("itemStyle").getItemStyle(),z2:10});ts(k,ho(y),{labelFetcher:{getFormattedLabel:function(D,P){return t.getFormattedLabel(D,P,"node")}},labelDataIndex:m.dataIndex,defaultText:m.id}),k.disableLabelAnimation=!0,k.setStyle("fill",m.getVisual("color")),k.setStyle("decal",m.getVisual("style").decal),es(k,y),s.add(k),d.setItemGraphicEl(m.dataIndex,k),Ut(k).dataType="node";var A=T.get("focus");Bi(k,A==="adjacency"?m.getAdjacentDataIndices():A==="trajectory"?m.getTrajectoryDataIndices():A,T.get("blurScope"),T.get("disabled"))}),d.eachItemGraphicEl(function(m,v){var y=d.getItemModel(v);y.get("draggable")&&(m.drift=function(w,S){a._focusAdjacencyDisabled=!0,this.shape.x+=w,this.shape.y+=S,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(v),localX:this.shape.x/c,localY:this.shape.y/u})},m.ondragend=function(){a._focusAdjacencyDisabled=!1},m.draggable=!0,m.cursor="move")}),!this._data&&t.isAnimationEnabled()&&s.setClipPath(Zyt(s.getBoundingRect(),t,function(){s.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(zr);function Hue(n,e,t){switch(n.fill){case"source":n.fill=t.node1.getVisual("color"),n.decal=t.node1.getVisual("style").decal;break;case"target":n.fill=t.node2.getVisual("color"),n.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),i=t.node2.getVisual("color");st(r)&&st(i)&&(n.fill=new eM(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function Zyt(n,e,t){var r=new Yn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return xi(r,{shape:{width:n.width+20}},e,t),r}var Qyt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],o=t.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new wr(o[l],this,r));var c=eke(a,i,this,!0,u);return c.data;function u(d,h){d.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getData().getItemLayout(m);if(y){var w=y.depth,S=v.levelModels[w];S&&(f.parentModel=S)}return f}),h.wrapMethod("getItemModel",function(f,m){var v=f.parentModel,y=v.getGraph().getEdgeByIndex(m),w=y.node1.getLayout();if(w){var S=w.depth,T=v.levelModels[S];T&&(f.parentModel=T)}return f})}},e.prototype.setNodePosition=function(t,r){var i=this.option.data||this.option.nodes,a=i[t];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){function a(f){return isNaN(f)||f==null}if(i==="edge"){var o=this.getDataParams(t,i),s=o.data,l=o.value,c=s.source+" -- "+s.target;return fo("nameValue",{name:c,value:l,noValue:a(l)})}else{var u=this.getGraph().getNodeByIndex(t),d=u.getLayout().value,h=this.getDataParams(t,i).data.name;return fo("nameValue",{name:h!=null?h+"":null,value:d,noValue:a(d)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(ai);function Jyt(n,e){n.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),i=t.get("nodeGap"),a=e0t(t,e);t.layoutInfo=a;var o=a.width,s=a.height,l=t.getGraph(),c=l.nodes,u=l.edges;n0t(c);var d=vr(c,function(v){return v.getLayout().value===0}),h=d.length!==0?0:t.get("layoutIterations"),f=t.get("orient"),m=t.get("nodeAlign");t0t(c,u,r,i,o,s,h,f,m)})}function e0t(n,e){return qa(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function t0t(n,e,t,r,i,a,o,s,l){r0t(n,e,t,i,a,s,l),s0t(n,e,a,i,r,o,s),m0t(n,s)}function n0t(n){Z(n,function(e){var t=ey(e.outEdges,V2),r=ey(e.inEdges,V2),i=e.getValue()||0,a=Math.max(t,r,i);e.setLayout({value:a},!0)})}function r0t(n,e,t,r,i,a,o){for(var s=[],l=[],c=[],u=[],d=0,h=0;h<e.length;h++)s[h]=1;for(var h=0;h<n.length;h++)l[h]=n[h].inEdges.length,l[h]===0&&c.push(n[h]);for(var f=-1;c.length;){for(var m=0;m<c.length;m++){var v=c[m],y=v.hostGraph.data.getRawDataItem(v.dataIndex),w=y.depth!=null&&y.depth>=0;w&&y.depth>f&&(f=y.depth),v.setLayout({depth:w?y.depth:d},!0),a==="vertical"?v.setLayout({dy:t},!0):v.setLayout({dx:t},!0);for(var S=0;S<v.outEdges.length;S++){var T=v.outEdges[S],C=e.indexOf(T);s[C]=0;var k=T.node2,A=n.indexOf(k);--l[A]===0&&u.indexOf(k)<0&&u.push(k)}}++d,c=u,u=[]}for(var h=0;h<s.length;h++)if(s[h]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var D=f>d-1?f:d-1;o&&o!=="left"&&i0t(n,o,a,D);var P=a==="vertical"?(i-t)/D:(r-t)/D;o0t(n,P,a)}function bke(n){var e=n.hostGraph.data.getRawDataItem(n.dataIndex);return e.depth!=null&&e.depth>=0}function i0t(n,e,t,r){if(e==="right"){for(var i=[],a=n,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];i.indexOf(u.node1)<0&&i.push(u.node1)}}a=i,i=[],++o}Z(n,function(d){bke(d)||d.setLayout({depth:Math.max(0,r-d.getLayout().skNodeHeight)},!0)})}else e==="justify"&&a0t(n,r)}function a0t(n,e){Z(n,function(t){!bke(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function o0t(n,e,t){Z(n,function(r){var i=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function s0t(n,e,t,r,i,a,o){var s=l0t(n,o);c0t(s,e,t,r,i,o),jU(s,i,t,r,o);for(var l=1;a>0;a--)l*=.99,u0t(s,l,o),jU(s,i,t,r,o),g0t(s,l,o),jU(s,i,t,r,o)}function l0t(n,e){var t=[],r=e==="vertical"?"y":"x",i=wH(n,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),Z(i.keys,function(a){t.push(i.buckets.get(a))}),t}function c0t(n,e,t,r,i,a){var o=1/0;Z(n,function(s){var l=s.length,c=0;Z(s,function(d){c+=d.getLayout().value});var u=a==="vertical"?(r-(l-1)*i)/c:(t-(l-1)*i)/c;u<o&&(o=u)}),Z(n,function(s){Z(s,function(l,c){var u=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),Z(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function jU(n,e,t,r,i){var a=i==="vertical"?"x":"y";Z(n,function(o){o.sort(function(v,y){return v.getLayout()[a]-y.getLayout()[a]});for(var s,l,c,u=0,d=o.length,h=i==="vertical"?"dx":"dy",f=0;f<d;f++)l=o[f],c=u-l.getLayout()[a],c>0&&(s=l.getLayout()[a]+c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]+l.getLayout()[h]+e;var m=i==="vertical"?r:t;if(c=u-e-m,c>0){s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=d-2;f>=0;--f)l=o[f],c=l.getLayout()[a]+l.getLayout()[h]+e-u,c>0&&(s=l.getLayout()[a]-c,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[a]}})}function u0t(n,e,t){Z(n.slice().reverse(),function(r){Z(r,function(i){if(i.outEdges.length){var a=ey(i.outEdges,d0t,t)/ey(i.outEdges,V2);if(isNaN(a)){var o=i.outEdges.length;a=o?ey(i.outEdges,h0t,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-py(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-py(i,t))*e;i.setLayout({y:l},!0)}}})})}function d0t(n,e){return py(n.node2,e)*n.getValue()}function h0t(n,e){return py(n.node2,e)}function f0t(n,e){return py(n.node1,e)*n.getValue()}function p0t(n,e){return py(n.node1,e)}function py(n,e){return e==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function V2(n){return n.getValue()}function ey(n,e,t){for(var r=0,i=n.length,a=-1;++a<i;){var o=+e(n[a],t);isNaN(o)||(r+=o)}return r}function g0t(n,e,t){Z(n,function(r){Z(r,function(i){if(i.inEdges.length){var a=ey(i.inEdges,f0t,t)/ey(i.inEdges,V2);if(isNaN(a)){var o=i.inEdges.length;a=o?ey(i.inEdges,p0t,t)/o:0}if(t==="vertical"){var s=i.getLayout().x+(a-py(i,t))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-py(i,t))*e;i.setLayout({y:l},!0)}}})})}function m0t(n,e){var t=e==="vertical"?"x":"y";Z(n,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[t]-a.node1.getLayout()[t]})}),Z(n,function(r){var i=0,a=0;Z(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),Z(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function v0t(n){n.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,i=t.edges;if(r.length){var a=1/0,o=-1/0;Z(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),Z(r,function(s){var l=new uo({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}i.length&&Z(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function y0t(n){n.registerChartView(Xyt),n.registerSeriesModel(Qyt),n.registerLayout(Jyt),n.registerVisual(v0t),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var wke=function(){function n(){}return n.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},n.prototype.getInitialData=function(e,t){var r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],f=[i,a],m=f[u].get("type"),v=f[1-u].get("type"),y=e.data;if(y&&l){var w=[];Z(y,function(C,k){var A;Fe(C)?(A=C.slice(),C.unshift(k)):Fe(C.value)?(A=Me({},C),A.value=A.value.slice(),C.value.unshift(k)):A=C,w.push(A)}),e.data=w}var S=this.defaultValueDimensions,T=[{name:d,type:M2(m),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:M2(v),dimsDef:S.slice()}];return NT(this,{coordDimensions:T,dimensionsCount:S.length+1,encodeDefaulter:Qt(X1e,T,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n}(),xke=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(ai);Ia(xke,wke,!0);var b0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(s).add(function(c){if(a.hasValue(c)){var u=a.getItemLayout(c),d=Gue(u,a,c,l,!0);a.setItemGraphicEl(c,d),o.add(d)}}).update(function(c,u){var d=s.getItemGraphicEl(u);if(!a.hasValue(c)){o.remove(d);return}var h=a.getItemLayout(c);d?(ch(d),Ske(h,d,a,c)):d=Gue(h,a,c,l),o.add(d),a.setItemGraphicEl(c,d)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&o.remove(u)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(zr),w0t=function(){function n(){}return n}(),x0t=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new w0t},e.prototype.buildPath=function(t,r){var i=r.points,a=0;for(t.moveTo(i[a][0],i[a][1]),a++;a<4;a++)t.lineTo(i[a][0],i[a][1]);for(t.closePath();a<i.length;a++)t.moveTo(i[a][0],i[a][1]),a++,t.lineTo(i[a][0],i[a][1])},e}(Cn);function Gue(n,e,t,r,i){var a=n.ends,o=new x0t({shape:{points:i?S0t(a,r,n):a}});return Ske(n,o,e,t,i),o}function Ske(n,e,t,r,i){var a=t.hostModel,o=ex[i?"initProps":"updateProps"];o(e,{shape:{points:n.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=t.getItemModel(r),l=s.getModel("emphasis");es(e,s),Bi(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function S0t(n,e,t){return Be(n,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var mC=Z;function _0t(n){var e=T0t(n);mC(e,function(t){var r=t.seriesModels;r.length&&(E0t(t),mC(r,function(i,a){A0t(i,t.boxOffsetList[a],t.boxWidthList[a])}))})}function T0t(n){var e=[],t=[];return n.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=mn(t,i);a<0&&(a=t.length,t[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function E0t(n){var e=n.axis,t=n.seriesModels,r=t.length,i=n.boxWidthList=[],a=n.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;mC(t,function(m){l=Math.max(l,m.getData().count())});var c=e.getExtent();s=Math.abs(c[1]-c[0])/l}mC(t,function(m){var v=m.get("boxWidth");Fe(v)||(v=[v,v]),o.push([tt(v[0],s)||0,tt(v[1],s)||0])});var u=s*.8-2,d=u/r*.3,h=(u-d*(r-1))/r,f=h/2-u/2;mC(t,function(m,v){a.push(f),f+=d+h,i.push(Math.min(Math.max(h,o[v][0]),o[v][1]))})}function A0t(n,e,t){var r=n.coordinateSystem,i=n.getData(),a=t/2,o=n.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],c=i.mapDimension(l[o]),u=i.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var d=0;d<i.count();d++){var h=i.get(c,d),f=T(h,u[2],d),m=T(h,u[0],d),v=T(h,u[1],d),y=T(h,u[3],d),w=T(h,u[4],d),S=[];C(S,v,!1),C(S,y,!0),S.push(m,v,w,y),k(S,m),k(S,w),k(S,f),i.setItemLayout(d,{initBaseline:f[s],ends:S})}function T(A,D,P){var N=i.get(D,P),R=[];R[o]=A,R[s]=N;var L;return isNaN(A)||isNaN(N)?L=[NaN,NaN]:(L=r.dataToPoint(R),L[o]+=e),L}function C(A,D,P){var N=D.slice(),R=D.slice();N[o]+=a,R[o]-=a,P?A.push(N,R):A.push(R,N)}function k(A,D){var P=D.slice(),N=D.slice();P[o]-=a,N[o]+=a,A.push(P,N)}}function k0t(n,e){e=e||{};for(var t=[],r=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<n.length;o++){var s=Bu(n[o].slice()),l=h6(s,.25),c=h6(s,.5),u=h6(s,.75),d=s[0],h=s[s.length-1],f=(i??1.5)*(u-l),m=a?d:Math.max(d,l-f),v=a?h:Math.min(h,u+f),y=e.itemNameFormatter,w=kt(y)?y({value:o}):st(y)?y.replace("{value}",o+""):o+"";t.push([w,m,l,c,u,v]);for(var S=0;S<s.length;S++){var T=s[S];if(T<m||T>v){var C=[w,T];r.push(C)}}}return{boxData:t,outliers:r}}var C0t={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Rs){var r="";gr(r)}var i=k0t(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function D0t(n){n.registerSeriesModel(xke),n.registerChartView(b0t),n.registerLayout(_0t),n.registerTransform(C0t)}var I0t=["itemStyle","borderColor"],M0t=["itemStyle","borderColor0"],P0t=["itemStyle","borderColorDoji"],N0t=["itemStyle","color"],R0t=["itemStyle","color0"];function vK(n,e){return e.get(n>0?N0t:R0t)}function yK(n,e){return e.get(n===0?P0t:n>0?I0t:M0t)}var O0t={seriesType:"candlestick",plan:DT(),performRawSeries:!0,reset:function(n,e){if(!e.isSeriesFiltered(n)){var t=n.pipelineContext.large;return!t&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var o=i.getItemModel(a),s=i.getItemLayout(a).sign,l=o.getItemStyle();l.fill=vK(s,o),l.stroke=yK(s,o)||l.fill;var c=i.ensureUniqueItemVisual(a,"style");Me(c,l)}}}}}},L0t=["color","borderColor"],j0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){ky(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=t.get("clip",!0),l=t.coordinateSystem,c=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(u){if(r.hasValue(u)){var d=r.getItemLayout(u);if(s&&Wue(c,d))return;var h=FU(d,u,!0);xi(h,{shape:{points:d.ends}},t,u),$U(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}}).update(function(u,d){var h=i.getItemGraphicEl(d);if(!r.hasValue(u)){a.remove(h);return}var f=r.getItemLayout(u);if(s&&Wue(c,f)){a.remove(h);return}h?(ar(h,{shape:{points:f.ends}},t,u),ch(h)):h=FU(f),$U(h,r,u,o),a.add(h),r.setItemGraphicEl(u,h)}).remove(function(u){var d=i.getItemGraphicEl(u);d&&a.remove(d)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),que(t,this.group);var r=t.get("clip",!0)?cM(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=t.next())!=null;){var s=i.getItemLayout(o),l=FU(s);$U(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){que(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(zr),F0t=function(){function n(){}return n}(),$0t=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new F0t},e.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e}(Cn);function FU(n,e,t){var r=n.ends;return new $0t({shape:{points:t?B0t(r,n):r},z2:100})}function Wue(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function $U(n,e,t,r){var i=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,es(n,i);var a=e.getItemLayout(t).sign;Z(n.states,function(s,l){var c=i.getModel(l),u=vK(a,c),d=yK(a,c)||u,h=s.style||(s.style={});u&&(h.fill=u),d&&(h.stroke=d)});var o=i.getModel("emphasis");Bi(n,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function B0t(n,e){return Be(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var U0t=function(){function n(){}return n}(),BU=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new U0t},e.prototype.buildPath=function(t,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];t.moveTo(o,i[a++]),t.lineTo(o,i[a++])}else a+=3},e}(Cn);function que(n,e,t,r){var i=n.getData(),a=i.getLayout("largePoints"),o=new BU({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new BU({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new BU({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),UU(1,o,n),UU(-1,s,n),UU(0,l,n),r&&(o.incremental=!0,s.incremental=!0),t&&t.push(o,s)}function UU(n,e,t,r){var i=yK(n,t)||vK(n,t),a=t.getModel("itemStyle").getItemStyle(L0t);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var _ke=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,i){var a=r.getItemLayout(t);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(ai);Ia(_ke,wke,!0);function V0t(n){!n||!Fe(n.series)||Z(n.series,function(e){It(e)&&e.type==="k"&&(e.type="candlestick")})}var z0t={seriesType:"candlestick",plan:DT(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=H0t(n,t),i=0,a=1,o=["x","y"],s=t.getDimensionIndex(t.mapDimension(o[i])),l=Be(t.mapDimensionsAll(o[a]),t.getDimensionIndex,t),c=l[0],u=l[1],d=l[2],h=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:n.pipelineContext.large?m:f};function f(v,y){for(var w,S=y.getStore();(w=v.next())!=null;){var T=S.get(s,w),C=S.get(c,w),k=S.get(u,w),A=S.get(d,w),D=S.get(h,w),P=Math.min(C,k),N=Math.max(C,k),R=X(P,T),L=X(N,T),B=X(A,T),$=X(D,T),G=[];te(G,L,0),te(G,R,1),G.push(z($),z(L),z(B),z(R));var W=y.getItemModel(w),K=!!W.get(["itemStyle","borderColorDoji"]);y.setItemLayout(w,{sign:Yue(S,w,C,k,u,K),initBaseline:C>k?L[a]:R[a],ends:G,brushRect:ie(A,D,T)})}function X(se,ce){var ee=[];return ee[i]=ce,ee[a]=se,isNaN(ce)||isNaN(se)?[NaN,NaN]:e.dataToPoint(ee)}function te(se,ce,ee){var be=ce.slice(),fe=ce.slice();be[i]=TR(be[i]+r/2,1,!1),fe[i]=TR(fe[i]-r/2,1,!0),ee?se.push(be,fe):se.push(fe,be)}function ie(se,ce,ee){var be=X(se,ee),fe=X(ce,ee);return be[i]-=r/2,fe[i]-=r/2,{x:be[0],y:be[1],width:r,height:fe[1]-be[1]}}function z(se){return se[i]=TR(se[i],1),se}}function m(v,y){for(var w=Sf(v.count*4),S=0,T,C=[],k=[],A,D=y.getStore(),P=!!n.get(["itemStyle","borderColorDoji"]);(A=v.next())!=null;){var N=D.get(s,A),R=D.get(c,A),L=D.get(u,A),B=D.get(d,A),$=D.get(h,A);if(isNaN(N)||isNaN(B)||isNaN($)){w[S++]=NaN,S+=3;continue}w[S++]=Yue(D,A,R,L,u,P),C[i]=N,C[a]=B,T=e.dataToPoint(C,null,k),w[S++]=T?T[0]:NaN,w[S++]=T?T[1]:NaN,C[a]=$,T=e.dataToPoint(C,null,k),w[S++]=T?T[1]:NaN}y.setLayout("largePoints",w)}}};function Yue(n,e,t,r,i,a){var o;return t>r?o=-1:t<r?o=1:o=a?0:e>0?n.get(i,e-1)<=r?1:-1:1,o}function H0t(n,e){var t=n.getBaseAxis(),r,i=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=tt(Wt(n.get("barMaxWidth"),i),i),o=tt(Wt(n.get("barMinWidth"),1),i),s=n.get("barWidth");return s!=null?tt(s,i):Math.max(Math.min(i/2,a),o)}function G0t(n){n.registerChartView(j0t),n.registerSeriesModel(_ke),n.registerPreprocessor(V0t),n.registerVisual(O0t),n.registerLayout(z0t)}function Kue(n,e){var t=e.rippleEffectColor||e.color;n.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var W0t=function(n){_e(e,n);function e(t,r){var i=n.call(this)||this,a=new sM(t,r),o=new jt;return i.add(a),i.add(o),i.updateData(t,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,a=t.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Da(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(c).start(),o.add(l)}Kue(o,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==t[s]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}Kue(i,t)},e.prototype.highlight=function(){Ng(this)},e.prototype.downplay=function(){Rg(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var i=this,a=t.hostModel;this.childAt(0).updateData(t,r);var o=this.childAt(1),s=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),c=MT(t.getItemVisual(r,"symbolSize")),u=t.getItemVisual(r,"style"),d=u&&u.fill,h=s.getModel("emphasis");o.setScale(c),o.traverse(function(y){y.setStyle("fill",d)});var f=tx(t.getItemVisual(r,"symbolOffset"),c);f&&(o.x=f[0],o.y=f[1]);var m=t.getItemVisual(r,"symbolRotate");o.rotation=(m||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=r/t.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=d,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(y){y==="emphasis"?v.showEffectOn!=="render"&&i.startEffectAnimation(v):y==="normal"&&v.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=v,Bi(this,h.get("focus"),h.get("blurScope"),h.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(jt),q0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new lM(W0t)},e.prototype.render=function(t,r,i){var a=t.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(o.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,r,i){var a=t.getData();this.group.dirty();var o=uM("").reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=yat(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(zr),Y0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(ai);function K0t(n){n.registerChartView(q0t),n.registerSeriesModel(Y0t),n.registerLayout(uM("effectScatter"))}var Tke=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a.add(a.createLine(t,r,i)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,i){return new lK(t,r,i)},e.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");Fe(o)||(o=[o,o]);var l=t.getItemVisual(r,"style"),c=a.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=Da(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(a.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(c),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,i){var a=this.childAt(1);if(a){var o=t.getItemLayout(i),s=r.get("period")*1e3,l=r.get("loop"),c=r.get("roundTrip"),u=r.get("constantSpeed"),d=Io(r.get("delay"),function(f){return f/t.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),u>0&&(s=this._getLineLength(a)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){a.stopAnimation();var h=void 0;kt(d)?h=d(i):h=d,a.__t>0&&(h=-s*a.__t),this._animateSymbol(a,s,h,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},e.prototype._animateSymbol=function(t,r,i,a,o){if(r>0){t.__t=0;var s=this,l=t.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(t)});a||l.done(function(){s.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return Lv(t.__p1,t.__cp1)+Lv(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,a=t.__cp1,o=t.__t<1?t.__t:2-t.__t,s=[t.x,t.y],l=s.slice(),c=Co,u=aH;s[0]=c(r[0],a[0],i[0],o),s[1]=c(r[1],a[1],i[1],o);var d=t.__t<1?u(r[0],a[0],i[0],o):u(i[0],a[0],r[0],1-o),h=t.__t<1?u(r[1],a[1],i[1],o):u(i[1],a[1],r[1],1-o);t.rotation=-Math.atan2(h,d)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Lv(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*Lv(r,s):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=s[0],t.y=s[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},e}(jt),Eke=function(n){_e(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createPolyline(t,r,i),a}return e.prototype._createPolyline=function(t,r,i){var a=t.getItemLayout(r),o=new yl({shape:{points:a}});this.add(o),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,o=this.childAt(0),s={shape:{points:t.getItemLayout(r)}};ar(o,s,a,r),this._updateCommonStl(t,r,i)},e.prototype._updateCommonStl=function(t,r,i){var a=this.childAt(0),o=t.getItemModel(r),s=i&&i.emphasisLineStyle,l=i&&i.focus,c=i&&i.blurScope,u=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var d=o.getModel("emphasis");s=d.getModel("lineStyle").getLineStyle(),u=d.get("disabled"),l=d.get("focus"),c=d.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var h=a.ensureState("emphasis");h.style=s,Bi(this,l,c,u)},e.prototype.updateLayout=function(t,r){var i=this.childAt(0);i.setShape("points",t.getItemLayout(r))},e}(jt),X0t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,i){return new Eke(t,r,i)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=Lv(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var c=Math.min(s+1,o-1);for(l=c;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var u=(r-a[l])/(a[l+1]-a[l]),d=i[l],h=i[l+1];t.x=d[0]*(1-u)+u*h[0],t.y=d[1]*(1-u)+u*h[1];var f=t.__t<1?h[0]-d[0]:d[0]-h[0],m=t.__t<1?h[1]-d[1]:d[1]-h[1];t.rotation=-Math.atan2(m,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e}(Tke),Z0t=function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n}(),Q0t=function(n){_e(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Z0t},e.prototype.buildPath=function(t,r){var i=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){t.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)t.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var c=i[o++],u=i[o++],d=i[o++],h=i[o++];if(t.moveTo(c,u),a>0){var f=(c+d)/2-(u-h)*a,m=(u+h)/2-(d-c)*a;t.quadraticCurveTo(f,m,d,h)}else t.lineTo(d,h)}this.incremental&&(this._off=o,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,c=0;c<a.length;){var u=a[c++];if(u>0)for(var d=a[c++],h=a[c++],f=1;f<u;f++){var m=a[c++],v=a[c++];if(Dv(d,h,m,v,s,t,r))return l}l++}else for(var l=0,c=0;c<a.length;){var d=a[c++],h=a[c++],m=a[c++],v=a[c++];if(o>0){var y=(d+m)/2-(h-v)*o,w=(h+v)/2-(m-d)*o;if(X_e(d,h,y,w,m,v,s,t,r))return l}else if(Dv(d,h,m,v,s,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var o=this.hoverDataIdx=this.findDataIndex(t,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<i.length;){var u=i[c++],d=i[c++];a=Math.min(u,a),s=Math.max(u,s),o=Math.min(d,o),l=Math.max(d,l)}t=this._rect=new dn(a,o,s,l)}return t},e}(Cn),J0t=function(){function n(){this.group=new jt}return n.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],i=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,t),l.__startIndex=e.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new Q0t({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var o=Ut(e);o.seriesIndex=i.seriesIndex,e.on("mousemove",function(s){o.dataIndex=null;var l=e.hoverDataIdx;l>0&&(o.dataIndex=l+e.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Ake={seriesType:"lines",plan:DT(),reset:function(n){var e=n.coordinateSystem;if(e){var t=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s=void 0,l=i.end-i.start;if(t){for(var c=0,u=i.start;u<i.end;u++)c+=n.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var d=0,h=[],u=i.start;u<i.end;u++){var f=n.getLineCoords(u,o);t&&(s[d++]=f);for(var m=0;m<f;m++)h=e.dataToPoint(o[m],!1,h),s[d++]=h[0],s[d++]=h[1]}a.setLayout("linesPoints",s)}else for(var u=i.start;u<i.end;u++){var v=a.getItemModel(u),f=n.getLineCoords(u,o),y=[];if(t)for(var w=0;w<f;w++)y.push(e.dataToPoint(o[w]));else{y[0]=e.dataToPoint(o[0]),y[1]=e.dataToPoint(o[1]);var S=v.get(["lineStyle","curveness"]);+S&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*S,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*S])}a.setItemLayout(u,y)}}}}}},ebt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t),s=t.get("zlevel"),l=t.get(["effect","trailLength"]),c=i.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var d=t.get("clip",!0)&&cM(t.coordinateSystem,!1,t);d?this.group.setClipPath(d):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),o=this._updateLineDraw(a,t);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,i){var a=t.getData(),o=t.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=Ake.reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new J0t:new cK(o?a?X0t:Eke:a?Tke:lK),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e}(zr),tbt=typeof Uint32Array>"u"?Array:Uint32Array,nbt=typeof Float64Array>"u"?Array:Float64Array;function Xue(n){var e=n.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(n.data=Be(e,function(t){var r=[t[0].coord,t[1].coord],i={coords:r};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),Vq([i,t[0],t[1]])}))}var rbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],Xue(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(Xue(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=ID(this._flatCoords,r.flatCoords),this._flatCoordsOffset=ID(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[i+o*2],r[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(t),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),rr(t[0])){for(var i=t.length,a=new tbt(i),o=new nbt(i),s=0,l=0,c=0,u=0;u<i;){c++;var d=t[u++];a[l++]=s+r,a[l++]=d;for(var h=0;h<d;h++){var f=t[u++],m=t[u++];o[s++]=f,o[s++]=m}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var i=new hl(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var c=a.value;if(c!=null)return c instanceof Array?c[l]:c}),i},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getItemModel(t),s=o.get("name");if(s)return s;var l=o.get("fromName"),c=o.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),fo("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(ai);function LN(n){return n instanceof Array||(n=[n,n]),n}var ibt={seriesType:"lines",reset:function(n){var e=LN(n.get("symbol")),t=LN(n.get("symbolSize")),r=n.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function i(a,o){var s=a.getItemModel(o),l=LN(s.getShallow("symbol",!0)),c=LN(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),c[0]&&a.setItemVisual(o,"fromSymbolSize",c[0]),c[1]&&a.setItemVisual(o,"toSymbolSize",c[1])}return{dataEach:r.hasItemOption?i:null}}};function abt(n){n.registerChartView(ebt),n.registerSeriesModel(rbt),n.registerLayout(Ake),n.registerVisual(ibt)}var obt=256,sbt=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=cy.createCanvas();this.canvas=e}return n.prototype.update=function(e,t,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,h=d.getContext("2d"),f=e.length;d.width=t,d.height=r;for(var m=0;m<f;++m){var v=e[m],y=v[0],w=v[1],S=v[2],T=i(S);h.globalAlpha=T,h.drawImage(s,y-u,w-u)}if(!d.width||!d.height)return d;for(var C=h.getImageData(0,0,d.width,d.height),k=C.data,A=0,D=k.length,P=this.minOpacity,N=this.maxOpacity,R=N-P;A<D;){var T=k[A+3]/256,L=Math.floor(T*(obt-1))*4;if(T>0){var B=o(T)?l:c;T>0&&(T=T*R+P),k[A++]=B[L],k[A++]=B[L+1],k[A++]=B[L+2],k[A++]=B[L+3]*T*256}else A+=4}return h.putImageData(C,0,0),d},n.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=cy.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},n.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[t](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},n}();function lbt(n,e,t){var r=n[1]-n[0];e=Be(e,function(o){return{interval:[(o.interval[0]-n[0])/r,(o.interval[1]-n[0])/r]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&t[s]}}function cbt(n,e){var t=n[1]-n[0];return e=[(e[0]-n[0])/t,(e[1]-n[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function Zue(n){var e=n.dimensions;return e[0]==="lng"&&e[1]==="lat"}var ubt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):Zue(o)&&this._renderOnGeo(o,t,a,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,a){var o=r.coordinateSystem;o&&(Zue(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){ky(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,r,i,a,o){var s=t.coordinateSystem,l=rx(s,"cartesian2d"),c,u,d,h;if(l){var f=s.getAxis("x"),m=s.getAxis("y");c=f.getBandWidth()+.5,u=m.getBandWidth()+.5,d=f.scale.getExtent(),h=m.scale.getExtent()}for(var v=this.group,y=t.getData(),w=t.getModel(["emphasis","itemStyle"]).getItemStyle(),S=t.getModel(["blur","itemStyle"]).getItemStyle(),T=t.getModel(["select","itemStyle"]).getItemStyle(),C=t.get(["itemStyle","borderRadius"]),k=ho(t),A=t.getModel("emphasis"),D=A.get("focus"),P=A.get("blurScope"),N=A.get("disabled"),R=l?[y.mapDimension("x"),y.mapDimension("y"),y.mapDimension("value")]:[y.mapDimension("time"),y.mapDimension("value")],L=i;L<a;L++){var B=void 0,$=y.getItemVisual(L,"style");if(l){var G=y.get(R[0],L),W=y.get(R[1],L);if(isNaN(y.get(R[2],L))||isNaN(G)||isNaN(W)||G<d[0]||G>d[1]||W<h[0]||W>h[1])continue;var K=s.dataToPoint([G,W]);B=new Yn({shape:{x:K[0]-c/2,y:K[1]-u/2,width:c,height:u},style:$})}else{if(isNaN(y.get(R[1],L)))continue;B=new Yn({z2:1,shape:s.dataToRect([y.get(R[0],L)]).contentShape,style:$})}if(y.hasItemOption){var X=y.getItemModel(L),te=X.getModel("emphasis");w=te.getModel("itemStyle").getItemStyle(),S=X.getModel(["blur","itemStyle"]).getItemStyle(),T=X.getModel(["select","itemStyle"]).getItemStyle(),C=X.get(["itemStyle","borderRadius"]),D=te.get("focus"),P=te.get("blurScope"),N=te.get("disabled"),k=ho(X)}B.shape.r=C;var ie=t.getRawValue(L),z="-";ie&&ie[2]!=null&&(z=ie[2]+""),ts(B,k,{labelFetcher:t,labelDataIndex:L,defaultOpacity:$.opacity,defaultText:z}),B.ensureState("emphasis").style=w,B.ensureState("blur").style=S,B.ensureState("select").style=T,Bi(B,D,P,N),B.incremental=o,o&&(B.states.emphasis.hoverLayer=!0),v.add(B),y.setItemGraphicEl(L,B),this._progressiveEls&&this._progressiveEls.push(B)}},e.prototype._renderOnGeo=function(t,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new sbt;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var u=t.getViewRect().clone(),d=t.getRoamTransform();u.applyTransform(d);var h=Math.max(u.x,0),f=Math.max(u.y,0),m=Math.min(u.width+u.x,a.getWidth()),v=Math.min(u.height+u.y,a.getHeight()),y=m-h,w=v-f,S=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],T=l.mapArray(S,function(D,P,N){var R=t.dataToPoint([D,P]);return R[0]-=h,R[1]-=f,R.push(N),R}),C=i.getExtent(),k=i.type==="visualMap.continuous"?cbt(C,i.option.range):lbt(C,i.getPieceList(),i.option.selected);c.update(T,y,w,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},k);var A=new Ro({style:{width:y,height:w,x:h,y:f,image:c.canvas},silent:!0});this.group.add(A)},e.type="heatmap",e}(zr),dbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Zg(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=rM.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(ai);function hbt(n){n.registerChartView(ubt),n.registerSeriesModel(dbt)}var fbt=["itemStyle","borderWidth"],Que=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],VU=new Xg,pbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),d=l.master.getRect(),h={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[d.x,d.x+d.width],[d.y,d.y+d.height]],isHorizontal:u,valueDim:Que[+u],categoryDim:Que[1-+u]};o.diff(s).add(function(m){if(o.hasValue(m)){var v=ede(o,m),y=Jue(o,m,v,h),w=tde(o,h,y);o.setItemGraphicEl(m,w),a.add(w),rde(w,h,y)}}).update(function(m,v){var y=s.getItemGraphicEl(v);if(!o.hasValue(m)){a.remove(y);return}var w=ede(o,m),S=Jue(o,m,w,h),T=Pke(o,S);y&&T!==y.__pictorialShapeStr&&(a.remove(y),o.setItemGraphicEl(m,null),y=null),y?xbt(y,h,S):y=tde(o,h,S,!0),o.setItemGraphicEl(m,y),y.__pictorialSymbolMeta=S,a.add(y),rde(y,h,S)}).remove(function(m){var v=s.getItemGraphicEl(m);v&&nde(s,m,v.__pictorialSymbolMeta.animationModel,v)}).execute();var f=t.get("clip",!0)?cM(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(t,r){var i=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(o){nde(a,Ut(o).dataIndex,t,o)}):i.removeAll()},e.type="pictorialBar",e}(zr);function Jue(n,e,t,r){var i=n.getItemLayout(e),a=t.get("symbolRepeat"),o=t.get("symbolClip"),s=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,d=t.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:t,symbolType:n.getItemVisual(e,"symbol")||"circle",style:n.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:d?t:null,hoverScale:d&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};gbt(t,a,i,r,h),mbt(n,e,i,a,o,h.boundingLength,h.pxSign,u,r,h),vbt(t,h.symbolScale,c,r,h);var f=h.symbolSize,m=tx(t.get("symbolOffset"),f);return ybt(t,f,i,a,o,m,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,r,h),h}function gbt(n,e,t,r,i){var a=r.valueDim,o=n.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(t[a.wh]<=0),u;if(Fe(o)){var d=[zU(s,o[0])-l,zU(s,o[1])-l];d[1]<d[0]&&d.reverse(),u=d[c]}else o!=null?u=zU(s,o)-l:e?u=r.coordSysExtent[a.index][c]-l:u=t[a.wh];i.boundingLength=u,e&&(i.repeatCutLength=t[a.wh]);var h=a.xy==="x",f=s.inverse;i.pxSign=h&&!f||!h&&f?u>=0?1:-1:u>0?1:-1}function zU(n,e){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(e)))}function mbt(n,e,t,r,i,a,o,s,l,c){var u=l.valueDim,d=l.categoryDim,h=Math.abs(t[d.wh]),f=n.getItemVisual(e,"symbolSize"),m;Fe(f)?m=f.slice():f==null?m=["100%","100%"]:m=[f,f],m[d.index]=tt(m[d.index],h),m[u.index]=tt(m[u.index],r?h:Math.abs(a)),c.symbolSize=m;var v=c.symbolScale=[m[0]/s,m[1]/s];v[u.index]*=(l.isHorizontal?-1:1)*o}function vbt(n,e,t,r,i){var a=n.get(fbt)||0;a&&(VU.attr({scaleX:e[0],scaleY:e[1],rotation:t}),VU.updateTransform(),a/=VU.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function ybt(n,e,t,r,i,a,o,s,l,c,u,d){var h=u.categoryDim,f=u.valueDim,m=d.pxSign,v=Math.max(e[f.index]+s,0),y=v;if(r){var w=Math.abs(l),S=Io(n.get("symbolMargin"),"15%")+"",T=!1;S.lastIndexOf("!")===S.length-1&&(T=!0,S=S.slice(0,S.length-1));var C=tt(S,e[f.index]),k=Math.max(v+C*2,0),A=T?0:C*2,D=L_e(r),P=D?r:ide((w+A)/k),N=w-P*v;C=N/2/(T?P:Math.max(P-1,1)),k=v+C*2,A=T?0:C*2,!D&&r!=="fixed"&&(P=c?ide((Math.abs(c)+A)/k):0),y=P*k-A,d.repeatTimes=P,d.symbolMargin=C}var R=m*(y/2),L=d.pathPosition=[];L[h.index]=t[h.wh]/2,L[f.index]=o==="start"?R:o==="end"?l-R:l/2,a&&(L[0]+=a[0],L[1]+=a[1]);var B=d.bundlePosition=[];B[h.index]=t[h.xy],B[f.index]=t[f.xy];var $=d.barRectShape=Me({},t);$[f.wh]=m*Math.max(Math.abs(t[f.wh]),Math.abs(L[f.index]+R)),$[h.wh]=t[h.wh];var G=d.clipShape={};G[h.xy]=-t[h.xy],G[h.wh]=u.ecSize[h.wh],G[f.xy]=0,G[f.wh]=t[f.wh]}function kke(n){var e=n.symbolPatternSize,t=Da(n.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function Cke(n,e,t,r){var i=n.__pictorialBundle,a=t.symbolSize,o=t.valueLineWidth,s=t.pathPosition,l=e.valueDim,c=t.repeatTimes||0,u=0,d=a[e.valueDim.index]+o+t.symbolMargin*2;for(bK(n,function(v){v.__pictorialAnimationIndex=u,v.__pictorialRepeatTimes=c,u<c?n1(v,null,m(u),t,r):n1(v,null,{scaleX:0,scaleY:0},t,r,function(){i.remove(v)}),u++});u<c;u++){var h=kke(t);h.__pictorialAnimationIndex=u,h.__pictorialRepeatTimes=c,i.add(h);var f=m(u);n1(h,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function m(v){var y=s.slice(),w=t.pxSign,S=v;return(t.symbolRepeatDirection==="start"?w>0:w<0)&&(S=c-1-v),y[l.index]=d*(S-c/2+.5)+s[l.index],{x:y[0],y:y[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function Dke(n,e,t,r){var i=n.__pictorialBundle,a=n.__pictorialMainPath;a?n1(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=n.__pictorialMainPath=kke(t),i.add(a),n1(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function Ike(n,e,t){var r=Me({},e.barRectShape),i=n.__pictorialBarRect;i?n1(i,null,{shape:r},e,t):(i=n.__pictorialBarRect=new Yn({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,n.add(i))}function Mke(n,e,t,r){if(t.symbolClip){var i=n.__pictorialClipPath,a=Me({},t.clipShape),o=e.valueDim,s=t.animationModel,l=t.dataIndex;if(i)ar(i,{shape:a},s,l);else{a[o.wh]=0,i=new Yn({shape:a}),n.__pictorialBundle.setClipPath(i),n.__pictorialClipPath=i;var c={};c[o.wh]=t.clipShape[o.wh],ex[r?"updateProps":"initProps"](i,{shape:c},s,l)}}}function ede(n,e){var t=n.getItemModel(e);return t.getAnimationDelayParams=bbt,t.isAnimationEnabled=wbt,t}function bbt(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function wbt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function tde(n,e,t,r){var i=new jt,a=new jt;return i.add(a),i.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?Cke(i,e,t):Dke(i,e,t),Ike(i,t,r),Mke(i,e,t,r),i.__pictorialShapeStr=Pke(n,t),i.__pictorialSymbolMeta=t,i}function xbt(n,e,t){var r=t.animationModel,i=t.dataIndex,a=n.__pictorialBundle;ar(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,i),t.symbolRepeat?Cke(n,e,t,!0):Dke(n,e,t,!0),Ike(n,t,!0),Mke(n,e,t,!0)}function nde(n,e,t,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];bK(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),Z(a,function(o){dy(o,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(e,null)}function Pke(n,e){return[n.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function bK(n,e,t){Z(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&e.call(t,r)})}function n1(n,e,t,r,i,a){e&&n.attr(e),r.symbolClip&&!i?t&&n.attr(t):t&&ex[i?"updateProps":"initProps"](n,t,r.animationModel,r.dataIndex,a)}function rde(n,e,t){var r=t.dataIndex,i=t.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),c=i.getShallow("cursor"),u=a.get("focus"),d=a.get("blurScope"),h=a.get("scale");bK(n,function(v){if(v instanceof Ro){var y=v.style;v.useStyle(Me({image:y.image,x:y.x,y:y.y,width:y.width,height:y.height},t.style))}else v.useStyle(t.style);var w=v.ensureState("emphasis");w.style=o,h&&(w.scaleX=v.scaleX*1.1,w.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,c&&(v.cursor=c),v.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],m=n.__pictorialBarRect;m.ignoreClip=!0,ts(m,ho(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:H1(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),Bi(n,u,d,a.get("disabled"))}function ide(n){var e=Math.round(n);return Math.abs(n-e)<1e-4?e:Math.ceil(n)}var Sbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,n.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Cy(YD.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(YD);function _bt(n){n.registerChartView(pbt),n.registerSeriesModel(Sbt),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Qt(gEe,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,mEe("pictorialBar"))}var Tbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,i){var a=t.getData(),o=this,s=this.group,l=t.getLayerSeries(),c=a.getLayout("layoutInfo"),u=c.rect,d=c.boundaryGap;s.x=0,s.y=u.y+d[0];function h(y){return y.name}var f=new Og(this._layersSeries||[],l,h,h),m=[];f.add(ut(v,this,"add")).update(ut(v,this,"update")).remove(ut(v,this,"remove")).execute();function v(y,w,S){var T=o._layers;if(y==="remove"){s.remove(T[w]);return}for(var C=[],k=[],A,D=l[w].indices,P=0;P<D.length;P++){var N=a.getItemLayout(D[P]),R=N.x,L=N.y0,B=N.y;C.push(R,L),k.push(R,L+B),A=a.getItemVisual(D[P],"style")}var $,G=a.getItemLayout(D[0]),W=t.getModel("label"),K=W.get("margin"),X=t.getModel("emphasis");if(y==="add"){var te=m[w]=new jt;$=new iAe({shape:{points:C,stackedOnPoints:k,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),te.add($),s.add(te),t.isAnimationEnabled()&&$.setClipPath(Ebt($.getBoundingRect(),t,function(){$.removeClipPath()}))}else{var te=T[S];$=te.childAt(0),s.add(te),m[w]=te,ar($,{shape:{points:C,stackedOnPoints:k}},t),ch($)}ts($,ho(t),{labelDataIndex:D[P-1],defaultText:a.getName(D[P-1]),inheritColor:A.fill},{normal:{verticalAlign:"middle"}}),$.setTextConfig({position:null,local:!0});var ie=$.getTextContent();ie&&(ie.x=G.x-K,ie.y=G.y0+G.y/2),$.useStyle(A),a.setItemGraphicEl(w,$),es($,t),Bi($,X.get("focus"),X.get("blurScope"),X.get("disabled"))}this._layersSeries=l,this._layers=m},e.type="themeRiver",e}(zr);function Ebt(n,e,t){var r=new Yn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return xi(r,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},e,t),r}var HU=2,Abt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new hM(ut(this.getData,this),ut(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,i={},a=wH(t,function(h){return i.hasOwnProperty(h[0]+"")||(i[h[0]+""]=-1),h[2]}),o=[];a.buckets.each(function(h,f){o.push({name:f,dataList:h})});for(var s=o.length,l=0;l<s;++l){for(var c=o[l].name,u=0;u<o[l].dataList.length;++u){var d=o[l].dataList[u][0]+"";i[d]=l}for(var d in i)i.hasOwnProperty(d)&&i[d]!==l&&(i[d]=l,t[r]=[d,0,c],r++)}return t},e.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",Ca).models[0],a=i.get("type"),o=vr(t.data,function(m){return m[2]!==void 0}),s=this.fixData(o||[]),l=[],c=this.nameMap=yt(),u=0,d=0;d<s.length;++d)l.push(s[d][HU]),c.get(s[d][HU])||(c.set(s[d][HU],u),u++);var h=aM(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:M2(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new hl(h,this);return f.initData(s),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],a=0;a<r;++a)i[a]=a;var o=t.mapDimension("single"),s=wH(i,function(c){return t.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(d,h){return t.get(o,d)-t.get(o,h)}),l.push({name:u,indices:c})}),l},e.prototype.getAxisTooltipData=function(t,r,i){Fe(t)||(t=t?[t]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,c,u=0;u<l;++u){for(var d=Number.MAX_VALUE,h=-1,f=o[u].indices.length,m=0;m<f;++m){var v=a.get(t[0],o[u].indices[m]),y=Math.abs(v-r);y<=d&&(c=v,d=y,h=o[u].indices[m])}s.push(h)}return{dataIndices:s,nestestValue:c}},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=a.getName(t),s=a.get(a.mapDimension("value"),t);return fo("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(ai);function kbt(n,e){n.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=t.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=tt(s[0],o.height),s[1]=tt(s[1],o.height);var c=o.height-s[0]-s[1];ade(r,t,c)}else{s[0]=tt(s[0],o.width),s[1]=tt(s[1],o.width);var u=o.width-s[0]-s[1];ade(r,t,u)}r.setLayout("layoutInfo",a)})}function ade(n,e,t){if(n.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=n.mapDimension("single"),o=n.mapDimension("value"),s=Be(i,function(y){return Be(y.indices,function(w){var S=r.dataToPoint(n.get(a,w));return S[1]=n.get(o,w),S})}),l=Cbt(s),c=l.y0,u=t/l.max,d=i.length,h=i[0].indices.length,f,m=0;m<h;++m){f=c[m]*u,n.setItemLayout(i[0].indices[m],{layerIndex:0,x:s[0][m][0],y0:f,y:s[0][m][1]*u});for(var v=1;v<d;++v)f+=s[v-1][m][1]*u,n.setItemLayout(i[v].indices[m],{layerIndex:v,x:s[v][m][0],y0:f,y:s[v][m][1]*u})}}function Cbt(n){for(var e=n.length,t=n[0].length,r=[],i=[],a=0,o=0;o<t;++o){for(var s=0,l=0;l<e;++l)s+=n[l][o][1];s>a&&(a=s),r.push(s)}for(var c=0;c<t;++c)i[c]=(a-r[c])/2;a=0;for(var u=0;u<t;++u){var d=r[u]+i[u];d>a&&(a=d)}return{y0:i,max:a}}function Dbt(n){n.registerChartView(Tbt),n.registerSeriesModel(Abt),n.registerLayout(kbt),n.registerProcessor(dM("themeRiver"))}var Ibt=2,Mbt=4,ode=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this)||this;o.z2=Ibt,o.textConfig={inside:!0},Ut(o).seriesIndex=r.seriesIndex;var s=new Qn({z2:Mbt,silent:t.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,t,r,i,a),o}return e.prototype.updateData=function(t,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;Ut(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),d=Me({},u);d.label=null;var h=r.getVisual("style");h.lineJoin="bevel";var f=r.getVisual("decal");f&&(h.decal=V1(f,o));var m=nw(l.getModel("itemStyle"),d,!0);Me(d,m),Z(gl,function(S){var T=s.ensureState(S),C=l.getModel([S,"itemStyle"]);T.style=C.getItemStyle();var k=nw(C,d);k&&(T.shape=k)}),t?(s.setShape(d),s.shape.r=u.r0,xi(s,{shape:{r:u.r}},i,r.dataIndex)):(ar(s,{shape:d},i),ch(s)),s.useStyle(h),this._updateLabel(i);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var y=c.get("focus"),w=y==="relative"?ID(r.getAncestorsIndices(),r.getDescendantIndices()):y==="ancestor"?r.getAncestorsIndices():y==="descendant"?r.getDescendantIndices():y;Bi(this,w,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),u=Math.sin(l),d=this,h=d.getTextContent(),f=this.node.dataIndex,m=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(m!=null&&Math.abs(s)<m);h.ignore=!v,Z(LD,function(w){var S=w==="normal"?i.getModel("label"):i.getModel([w,"label"]),T=w==="normal",C=T?h:h.ensureState(w),k=t.getFormattedLabel(f,w);T&&(k=k||r.node.name),C.style=ri(S,{},null,w!=="normal",!0),k&&(C.style.text=k);var A=S.get("show");A!=null&&!T&&(C.ignore=!A);var D=y(S,"position"),P=T?d:d.states[w],N=P.style.fill;P.textConfig={outsideFill:S.get("color")==="inherit"?N:null,inside:D!=="outside"};var R,L=y(S,"distance")||0,B=y(S,"align"),$=y(S,"rotate"),G=Math.PI*.5,W=Math.PI*1.5,K=jc($==="tangential"?Math.PI/2-l:l),X=K>G&&!RD(K-G)&&K<W;D==="outside"?(R=o.r+L,B=X?"right":"left"):!B||B==="center"?(s===2*Math.PI&&o.r0===0?R=0:R=(o.r+o.r0)/2,B="center"):B==="left"?(R=o.r0+L,B=X?"right":"left"):B==="right"&&(R=o.r-L,B=X?"left":"right"),C.style.align=B,C.style.verticalAlign=y(S,"verticalAlign")||"middle",C.x=R*c+o.cx,C.y=R*u+o.cy;var te=0;$==="radial"?te=jc(-l)+(X?Math.PI:0):$==="tangential"?te=jc(Math.PI/2-l)+(X?Math.PI:0):rr($)&&(te=$*Math.PI/180),C.rotation=jc(te)});function y(w,S){var T=w.get(S);return T??a.get(S)}h.dirtyStyle()},e}(ml),wG="sunburstRootToNode",sde="sunburstHighlight",Pbt="sunburstUnhighlight";function Nbt(n){n.registerAction({type:wG,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var o=XD(e,[wG],i);if(o){var s=i.getViewRoot();s&&(e.direction=rK(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),n.registerAction({type:sde,update:"none"},function(e,t,r){e=Me({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=XD(e,[sde],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(Me(e,{type:"highlight"}))}),n.registerAction({type:Pbt,update:"updateView"},function(e,t,r){e=Me({},e),r.dispatchAction(Me(e,{type:"downplay"}))})}var Rbt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){var o=this;this.seriesModel=t,this.api=i,this.ecModel=r;var s=t.getData(),l=s.tree.root,c=t.getViewRoot(),u=this.group,d=t.get("renderLabelForZeroData"),h=[];c.eachNode(function(S){h.push(S)});var f=this._oldChildren||[];m(h,f),w(l,c),this._initEvents(),this._oldChildren=h;function m(S,T){if(S.length===0&&T.length===0)return;new Og(T,S,C,C).add(k).update(k).remove(Qt(k,null)).execute();function C(A){return A.getId()}function k(A,D){var P=A==null?null:S[A],N=D==null?null:T[D];v(P,N)}}function v(S,T){if(!d&&S&&!S.getValue()&&(S=null),S!==l&&T!==l){if(T&&T.piece)S?(T.piece.updateData(!1,S,t,r,i),s.setItemGraphicEl(S.dataIndex,T.piece)):y(T);else if(S){var C=new ode(S,t,r,i);u.add(C),s.setItemGraphicEl(S.dataIndex,C)}}}function y(S){S&&S.piece&&(u.remove(S.piece),S.piece=null)}function w(S,T){T.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,S,t,r,i):(o.virtualPiece=new ode(S,t,r,i),u.add(o.virtualPiece)),T.piece.off("click"),o.virtualPiece.on("click",function(C){o._rootToNode(T.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")t._rootToNode(o);else if(s==="link"){var l=o.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";_2(c,u)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:wG,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(zr),Obt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};Nke(i);var a=this._levelModels=Be(t.levels||[],function(l){return new wr(l,this,r)},this),o=nK.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var d=o.getNodeByDataIndex(u),h=a[d.depth];return h&&(c.parentModel=h),c})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=wF(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){FAe(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(ai);function Nke(n){var e=0;Z(n.children,function(r){Nke(r);var i=r.value;Fe(i)&&(i=i[0]),e+=i});var t=n.value;Fe(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Fe(n.value)?n.value[0]=t:n.value=t}var lde=Math.PI/180;function Lbt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.get("center"),a=r.get("radius");Fe(a)||(a=[0,a]),Fe(i)||(i=[i,i]);var o=t.getWidth(),s=t.getHeight(),l=Math.min(o,s),c=tt(i[0],o),u=tt(i[1],s),d=tt(a[0],l/2),h=tt(a[1],l/2),f=-r.get("startAngle")*lde,m=r.get("minAngle")*lde,v=r.getData().tree.root,y=r.getViewRoot(),w=y.depth,S=r.get("sort");S!=null&&Rke(y,S);var T=0;Z(y.children,function(K){!isNaN(K.getValue())&&T++});var C=y.getValue(),k=Math.PI/(C||T)*2,A=y.depth>0,D=y.height-(A?-1:1),P=(h-d)/(D||1),N=r.get("clockwise"),R=r.get("stillShowZeroSum"),L=N?1:-1,B=function(K,X){if(K){var te=X;if(K!==v){var ie=K.getValue(),z=C===0&&R?k:ie*k;z<m&&(z=m),te=X+L*z;var se=K.depth-w-(A?-1:1),ce=d+P*se,ee=d+P*(se+1),be=r.getLevelModel(K);if(be){var fe=be.get("r0",!0),De=be.get("r",!0),dt=be.get("radius",!0);dt!=null&&(fe=dt[0],De=dt[1]),fe!=null&&(ce=tt(fe,l/2)),De!=null&&(ee=tt(De,l/2))}K.setLayout({angle:z,startAngle:X,endAngle:te,clockwise:N,cx:c,cy:u,r0:ce,r:ee})}if(K.children&&K.children.length){var ve=0;Z(K.children,function(de){ve+=B(de,X+ve)})}return te-X}};if(A){var $=d,G=d+P,W=Math.PI*2;v.setLayout({angle:W,startAngle:f,endAngle:f+W,clockwise:N,cx:c,cy:u,r0:$,r:G})}B(y,f)})}function Rke(n,e){var t=n.children||[];n.children=jbt(t,e),t.length&&Z(n.children,function(r){Rke(r,e)})}function jbt(n,e){if(kt(e)){var t=Be(n,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return t.sort(function(i,a){return e(i.params,a.params)}),Be(t,function(i){return n[i.index]})}else{var r=e==="asc";return n.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function Fbt(n){var e={};function t(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&st(s)&&(s=lH(s,(r.depth-1)/(a-1)*.5)),s}n.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(o,r,a.root.height));var c=i.ensureUniqueItemVisual(o.dataIndex,"style");Me(c,l)})})}function $bt(n){n.registerChartView(Rbt),n.registerSeriesModel(Obt),n.registerLayout(Qt(Lbt,"sunburst")),n.registerProcessor(Qt(dM,"sunburst")),n.registerVisual(Fbt),Nbt(n)}var cde={color:"fill",borderColor:"stroke"},Bbt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},wg=Kn(),Ubt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return Zg(null,this)},e.prototype.getDataParams=function(t,r,i){var a=n.prototype.getDataParams.call(this,t,r);return i&&(a.info=wg(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(ai);function Vbt(n,e){return e=e||[0,0],Be(["x","y"],function(t,r){var i=this.getAxis(t),a=e[r],o=n[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function zbt(n){var e=n.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:ut(Vbt,n)}}}function Hbt(n,e){return e=e||[0,0],Be([0,1],function(t){var r=e[t],i=n[t]/2,a=[],o=[];return a[t]=r-i,o[t]=r+i,a[1-t]=o[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(o)[t])},this)}function Gbt(n){var e=n.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:ut(Hbt,n)}}}function Wbt(n,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,i=(n instanceof Array?n[0]:n)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-i)-t.dataToCoord(r+i))}function qbt(n){var e=n.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:ut(Wbt,n)}}}function Ybt(n,e){return e=e||[0,0],Be(["Radius","Angle"],function(t,r){var i="get"+t+"Axis",a=this[i](),o=e[r],s=n[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function Kbt(n){var e=n.getRadiusAxis(),t=n.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),o=t.dataToAngle(i[1]),s=n.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:ut(Ybt,n)}}}function Xbt(n){var e=n.getRect(),t=n.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,i){return n.dataToPoint(r,i)}}}}function Oke(n,e,t,r){return n&&(n.legacy||n.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||ft(n,"text")))}function Lke(n,e,t){var r=n,i,a,o;if(e==="text")o=r;else{o={},ft(r,"text")&&(o.text=r.text),ft(r,"rich")&&(o.rich=r.rich),ft(r,"textFill")&&(o.fill=r.textFill),ft(r,"textStroke")&&(o.stroke=r.textStroke),ft(r,"fontFamily")&&(o.fontFamily=r.fontFamily),ft(r,"fontSize")&&(o.fontSize=r.fontSize),ft(r,"fontStyle")&&(o.fontStyle=r.fontStyle),ft(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=ft(r,"textPosition");t?i.position=s?r.textPosition:"inside":s&&(i.position=r.textPosition),ft(r,"textPosition")&&(i.position=r.textPosition),ft(r,"textOffset")&&(i.offset=r.textOffset),ft(r,"textRotation")&&(i.rotation=r.textRotation),ft(r,"textDistance")&&(i.distance=r.textDistance)}return ude(o,n),Z(o.rich,function(l){ude(l,l)}),{textConfig:i,textContent:a}}function ude(n,e){e&&(e.font=e.textFont||e.font,ft(e,"textStrokeWidth")&&(n.lineWidth=e.textStrokeWidth),ft(e,"textAlign")&&(n.align=e.textAlign),ft(e,"textVerticalAlign")&&(n.verticalAlign=e.textVerticalAlign),ft(e,"textLineHeight")&&(n.lineHeight=e.textLineHeight),ft(e,"textWidth")&&(n.width=e.textWidth),ft(e,"textHeight")&&(n.height=e.textHeight),ft(e,"textBackgroundColor")&&(n.backgroundColor=e.textBackgroundColor),ft(e,"textPadding")&&(n.padding=e.textPadding),ft(e,"textBorderColor")&&(n.borderColor=e.textBorderColor),ft(e,"textBorderWidth")&&(n.borderWidth=e.textBorderWidth),ft(e,"textBorderRadius")&&(n.borderRadius=e.textBorderRadius),ft(e,"textBoxShadowColor")&&(n.shadowColor=e.textBoxShadowColor),ft(e,"textBoxShadowBlur")&&(n.shadowBlur=e.textBoxShadowBlur),ft(e,"textBoxShadowOffsetX")&&(n.shadowOffsetX=e.textBoxShadowOffsetX),ft(e,"textBoxShadowOffsetY")&&(n.shadowOffsetY=e.textBoxShadowOffsetY))}function dde(n,e,t){var r=n;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var i=r.textPosition.indexOf("inside")>=0,a=n.fill||"#000";hde(r,e);var o=r.textFill==null;return i?o&&(r.textFill=t.insideFill||"#fff",!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=n.fill||t.outsideFill||"#000"),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,Z(e.rich,function(s){hde(s,s)}),r}function hde(n,e){e&&(ft(e,"fill")&&(n.textFill=e.fill),ft(e,"stroke")&&(n.textStroke=e.fill),ft(e,"lineWidth")&&(n.textStrokeWidth=e.lineWidth),ft(e,"font")&&(n.font=e.font),ft(e,"fontStyle")&&(n.fontStyle=e.fontStyle),ft(e,"fontWeight")&&(n.fontWeight=e.fontWeight),ft(e,"fontSize")&&(n.fontSize=e.fontSize),ft(e,"fontFamily")&&(n.fontFamily=e.fontFamily),ft(e,"align")&&(n.textAlign=e.align),ft(e,"verticalAlign")&&(n.textVerticalAlign=e.verticalAlign),ft(e,"lineHeight")&&(n.textLineHeight=e.lineHeight),ft(e,"width")&&(n.textWidth=e.width),ft(e,"height")&&(n.textHeight=e.height),ft(e,"backgroundColor")&&(n.textBackgroundColor=e.backgroundColor),ft(e,"padding")&&(n.textPadding=e.padding),ft(e,"borderColor")&&(n.textBorderColor=e.borderColor),ft(e,"borderWidth")&&(n.textBorderWidth=e.borderWidth),ft(e,"borderRadius")&&(n.textBorderRadius=e.borderRadius),ft(e,"shadowColor")&&(n.textBoxShadowColor=e.shadowColor),ft(e,"shadowBlur")&&(n.textBoxShadowBlur=e.shadowBlur),ft(e,"shadowOffsetX")&&(n.textBoxShadowOffsetX=e.shadowOffsetX),ft(e,"shadowOffsetY")&&(n.textBoxShadowOffsetY=e.shadowOffsetY),ft(e,"textShadowColor")&&(n.textShadowColor=e.textShadowColor),ft(e,"textShadowBlur")&&(n.textShadowBlur=e.textShadowBlur),ft(e,"textShadowOffsetX")&&(n.textShadowOffsetX=e.textShadowOffsetX),ft(e,"textShadowOffsetY")&&(n.textShadowOffsetY=e.textShadowOffsetY))}var jke={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},fde=Ln(jke);Of(jf,function(n,e){return n[e]=1,n},{});jf.join(", ");var z2=["","style","shape","extra"],q1=Kn();function wK(n,e,t,r,i){var a=n+"Animation",o=_T(n,r,i)||{},s=q1(e).userDuring;return o.duration>0&&(o.during=s?ut(twt,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=n),Me(o,t[a]),o}function IR(n,e,t,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=t.isAnimationEnabled(),l=q1(n),c=e.style;l.userDuring=e.during;var u={},d={};if(rwt(n,e,d),gde("shape",e,d),gde("extra",e,d),!a&&s&&(nwt(n,e,u),pde("shape",n,e,u),pde("extra",n,e,u),iwt(n,e,c,u)),d.style=c,Zbt(n,d,o),Jbt(n,e),s)if(a){var h={};Z(z2,function(m){var v=m?e[m]:e;v&&v.enterFrom&&(m&&(h[m]=h[m]||{}),Me(m?h[m]:h,v.enterFrom))});var f=wK("enter",n,e,t,i);f.duration>0&&n.animateFrom(h,f)}else Qbt(n,e,i||0,t,u);Fke(n,e),c?n.dirty():n.markRedraw()}function Fke(n,e){for(var t=q1(n).leaveToProps,r=0;r<z2.length;r++){var i=z2[r],a=i?e[i]:e;a&&a.leaveTo&&(t||(t=q1(n).leaveToProps={}),i&&(t[i]=t[i]||{}),Me(i?t[i]:t,a.leaveTo))}}function _F(n,e,t,r){if(n){var i=n.parent,a=q1(n).leaveToProps;if(a){var o=wK("update",n,e,t,0);o.done=function(){i.remove(n)},n.animateTo(a,o)}else i.remove(n)}}function yw(n){return n==="all"}function Zbt(n,e,t){var r=e.style;if(!n.isGroup&&r){if(t){n.useStyle({});for(var i=n.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(n.style)}}n.setStyle(r)}e&&(e.style=null,e&&n.attr(e),e.style=r)}function Qbt(n,e,t,r,i){if(i){var a=wK("update",n,e,r,t);a.duration>0&&n.animateFrom(i,a)}}function Jbt(n,e){ft(e,"silent")&&(n.silent=e.silent),ft(e,"ignore")&&(n.ignore=e.ignore),n instanceof Yu&&ft(e,"invisible")&&(n.invisible=e.invisible),n instanceof Cn&&ft(e,"autoBatch")&&(n.autoBatch=e.autoBatch)}var sf={},ewt={setTransform:function(n,e){return sf.el[n]=e,this},getTransform:function(n){return sf.el[n]},setShape:function(n,e){var t=sf.el,r=t.shape||(t.shape={});return r[n]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(n){var e=sf.el.shape;if(e)return e[n]},setStyle:function(n,e){var t=sf.el,r=t.style;return r&&(r[n]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(n){var e=sf.el.style;if(e)return e[n]},setExtra:function(n,e){var t=sf.el.extra||(sf.el.extra={});return t[n]=e,this},getExtra:function(n){var e=sf.el.extra;if(e)return e[n]}};function twt(){var n=this,e=n.el;if(e){var t=q1(e).userDuring,r=n.userDuring;if(t!==r){n.el=n.userDuring=null;return}sf.el=e,r(ewt)}}function pde(n,e,t,r){var i=t[n];if(i){var a=e[n],o;if(a){var s=t.transition,l=i.transition;if(l)if(!o&&(o=r[n]={}),yw(l))Me(o,a);else for(var c=Rr(l),u=0;u<c.length;u++){var d=c[u],h=a[d];o[d]=h}else if(yw(s)||mn(s,n)>=0){!o&&(o=r[n]={});for(var f=Ln(a),u=0;u<f.length;u++){var d=f[u],h=a[d];awt(i[d],h)&&(o[d]=h)}}}}}function gde(n,e,t){var r=e[n];if(r)for(var i=t[n]={},a=Ln(r),o=0;o<a.length;o++){var s=a[o];i[s]=aC(r[s])}}function nwt(n,e,t){for(var r=e.transition,i=yw(r)?jf:Rr(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=n[o];t[o]=s}}}function rwt(n,e,t){for(var r=0;r<fde.length;r++){var i=fde[r],a=jke[i],o=e[i];o&&(t[a[0]]=o[0],t[a[1]]=o[1])}for(var r=0;r<jf.length;r++){var s=jf[r];e[s]!=null&&(t[s]=e[s])}}function iwt(n,e,t,r){if(t){var i=n.style,a;if(i){var o=t.transition,s=e.transition;if(o&&!yw(o)){var l=Rr(o);!a&&(a=r.style={});for(var c=0;c<l.length;c++){var u=l[c],d=i[u];a[u]=d}}else if(n.getAnimationStyleProps&&(yw(s)||yw(o)||mn(s,"style")>=0)){var h=n.getAnimationStyleProps(),f=h?h.style:null;if(f){!a&&(a=r.style={});for(var m=Ln(t),c=0;c<m.length;c++){var u=m[c];if(f[u]){var d=i[u];a[u]=d}}}}}}}function awt(n,e){return Ns(n)?n!==e:n!=null&&isFinite(n)}var $ke=Kn(),owt=["percent","easing","shape","style","extra"];function Bke(n){n.stopAnimation("keyframe"),n.attr($ke(n))}function H2(n,e,t){if(!(!t.isAnimationEnabled()||!e)){if(Fe(e)){Z(e,function(s){H2(n,s,t)});return}var r=e.keyframes,i=e.duration;if(t&&i==null){var a=_T("enter",t,0);i=a&&a.duration}if(!(!r||!i)){var o=$ke(n);Z(z2,function(s){if(!(s&&!n[s])){var l;r.sort(function(c,u){return c.percent-u.percent}),Z(r,function(c){var u=n.animators,d=s?c[s]:c;if(d){var h=Ln(d);if(s||(h=vr(h,function(v){return mn(owt,v)<0})),!!h.length){l||(l=n.animate(s,e.loop,!0),l.scope="keyframe");for(var f=0;f<u.length;f++)u[f]!==l&&u[f].targetName===l.targetName&&u[f].stopTracks(h);s&&(o[s]=o[s]||{});var m=s?o[s]:o;Z(h,function(v){m[v]=((s?n[s]:n)||{})[v]}),l.whenWithKeys(i*c.percent,d,h,c.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var xg="emphasis",zv="normal",xK="blur",SK="select",gy=[zv,xg,xK,SK],GU={normal:["itemStyle"],emphasis:[xg,"itemStyle"],blur:[xK,"itemStyle"],select:[SK,"itemStyle"]},WU={normal:["label"],emphasis:[xg,"label"],blur:[xK,"label"],select:[SK,"label"]},swt=["x","y"],lwt="e\0\0",_u={normal:{},emphasis:{},blur:{},select:{}},cwt={cartesian2d:zbt,geo:Gbt,single:qbt,polar:Kbt,calendar:Xbt};function xG(n){return n instanceof Cn}function SG(n){return n instanceof Yu}function uwt(n,e){e.copyTransform(n),SG(e)&&SG(n)&&(e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e.invisible=n.invisible,e.ignore=n.ignore,xG(e)&&xG(n)&&e.setShape(n.shape))}var dwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var o=this._data,s=t.getData(),l=this.group,c=mde(t,s,r,i);o||l.removeAll(),s.diff(o).add(function(d){qU(i,null,d,c(d,a),t,l,s)}).remove(function(d){var h=o.getItemGraphicEl(d);h&&_F(h,wg(h).option,t)}).update(function(d,h){var f=o.getItemGraphicEl(h);qU(i,f,d,c(d,a),t,l,s)}).execute();var u=t.get("clip",!0)?cM(t.coordinateSystem,!1,t):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,i,a,o){var s=r.getData(),l=mde(r,s,i,a),c=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var d=t.start;d<t.end;d++){var h=qU(null,null,d,l(d,o),r,this.group,s);h&&(h.traverse(u),c.push(h))}},e.prototype.eachRendered=function(t){ky(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,i,a){var o=r.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},e.type="custom",e}(zr);function _K(n){var e=n.type,t;if(e==="path"){var r=n.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=zke(r);t=Jj(a,null,i,r.layout||"center"),wg(t).customPathData=a}else if(e==="image")t=new Ro({}),wg(t).customImagePath=n.style.image;else if(e==="text")t=new Qn({});else if(e==="group")t=new jt;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=dY(e);if(!o){var s="";gr(s)}t=new o}return wg(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function TK(n,e,t,r,i,a,o){Bke(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),r&&r.transition==null&&(r.transition=swt);var l=r&&r.style;if(l){if(e.type==="text"){var c=l;ft(c,"textFill")&&(c.fill=c.textFill),ft(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,d=xG(e)?l.decal:null;n&&d&&(d.dirty=!0,u=V1(d,n)),l.__decalPattern=u}if(SG(e)&&l){var u=l.__decalPattern;u&&(l.decal=u)}IR(e,r,a,{dataIndex:t,isInit:o,clearStyle:!0}),H2(e,r.keyframeAnimation,a)}function Uke(n,e,t,r,i){var a=e.isGroup?null:e,o=i&&i[n].cfg;if(a){var s=a.ensureState(n);if(r===!1){var l=a.getState(n);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),Fw(a)}}function hwt(n,e,t){if(!n.isGroup){var r=n,i=t.currentZ,a=t.currentZLevel;r.z=i,r.zlevel=a;var o=e.z2;o!=null&&(r.z2=o||0);for(var s=0;s<gy.length;s++)fwt(r,e,gy[s])}}function fwt(n,e,t){var r=t===zv,i=r?e:G2(e,t),a=i?i.z2:null,o;a!=null&&(o=r?n:n.ensureState(t),o.z2=a||0)}function mde(n,e,t,r){var i=n.get("renderItem"),a=n.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):cwt[a.type](a));for(var s=Dt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:C,style:A,ordinalRawValue:k,styleEmphasis:D,visual:R,barLayout:L,currentSeriesIndices:B,font:$},o.api||{}),l={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:pwt(n.getData())},c,u,d={},h={},f={},m={},v=0;v<gy.length;v++){var y=gy[v];f[y]=n.getModel(GU[y]),m[y]=n.getModel(WU[y])}function w(G){return G===c?u||(u=e.getItemModel(G)):e.getItemModel(G)}function S(G,W){return e.hasItemOption?G===c?d[W]||(d[W]=w(G).getModel(GU[W])):w(G).getModel(GU[W]):f[W]}function T(G,W){return e.hasItemOption?G===c?h[W]||(h[W]=w(G).getModel(WU[W])):w(G).getModel(WU[W]):m[W]}return function(G,W){return c=G,u=null,d={},h={},i&&i(Dt({dataIndexInside:G,dataIndex:e.getRawIndex(G),actionType:W?W.type:null},l),s)};function C(G,W){return W==null&&(W=c),e.getStore().get(e.getDimensionIndex(G||0),W)}function k(G,W){W==null&&(W=c),G=G||0;var K=e.getDimensionInfo(G);if(!K){var X=e.getDimensionIndex(G);return X>=0?e.getStore().get(X,W):void 0}var te=e.get(K.name,W),ie=K&&K.ordinalMeta;return ie?ie.categories[te]:te}function A(G,W){W==null&&(W=c);var K=e.getItemVisual(W,"style"),X=K&&K.fill,te=K&&K.opacity,ie=S(W,zv).getItemStyle();X!=null&&(ie.fill=X),te!=null&&(ie.opacity=te);var z={inheritColor:st(X)?X:"#000"},se=T(W,zv),ce=ri(se,null,z,!1,!0);ce.text=se.getShallow("show")?Wt(n.getFormattedLabel(W,zv),H1(e,W)):null;var ee=x2(se,z,!1);return N(G,ie),ie=dde(ie,ce,ee),G&&P(ie,G),ie.legacy=!0,ie}function D(G,W){W==null&&(W=c);var K=S(W,xg).getItemStyle(),X=T(W,xg),te=ri(X,null,null,!0,!0);te.text=X.getShallow("show")?Df(n.getFormattedLabel(W,xg),n.getFormattedLabel(W,zv),H1(e,W)):null;var ie=x2(X,null,!0);return N(G,K),K=dde(K,te,ie),G&&P(K,G),K.legacy=!0,K}function P(G,W){for(var K in W)ft(W,K)&&(G[K]=W[K])}function N(G,W){G&&(G.textFill&&(W.textFill=G.textFill),G.textPosition&&(W.textPosition=G.textPosition))}function R(G,W){if(W==null&&(W=c),ft(cde,G)){var K=e.getItemVisual(W,"style");return K?K[cde[G]]:null}if(ft(Bbt,G))return e.getItemVisual(W,G)}function L(G){if(a.type==="cartesian2d"){var W=a.getBaseAxis();return rht(Dt({axis:W},G))}}function B(){return t.getCurrentSeriesIndices()}function $(G){return hY(G,t)}}function pwt(n){var e={};return Z(n.dimensions,function(t){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=n.getDimensionIndex(t)}}),e}function qU(n,e,t,r,i,a,o){if(!r){a.remove(e);return}var s=EK(n,e,t,r,i,a);return s&&o.setItemGraphicEl(t,s),s&&Bi(s,r.focus,r.blurScope,r.emphasisDisabled),s}function EK(n,e,t,r,i,a){var o=-1,s=e;e&&Vke(e,r,i)&&(o=mn(a.childrenRef(),e),e=null);var l=!e,c=e;c?c.clearStates():(c=_K(r),s&&uwt(s,c)),r.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),_u.normal.cfg=_u.normal.conOpt=_u.emphasis.cfg=_u.emphasis.conOpt=_u.blur.cfg=_u.blur.conOpt=_u.select.cfg=_u.select.conOpt=null,_u.isLegacy=!1,mwt(c,t,r,i,l,_u),gwt(c,t,r,i,l),TK(n,c,t,r,_u,i,l),ft(r,"info")&&(wg(c).info=r.info);for(var u=0;u<gy.length;u++){var d=gy[u];if(d!==zv){var h=G2(r,d),f=AK(r,h,d);Uke(d,c,h,f,_u)}}return hwt(c,r,i),r.type==="group"&&vwt(n,c,t,r,i),o>=0?a.replaceAt(c,o):a.add(c),c}function Vke(n,e,t){var r=wg(n),i=e.type,a=e.shape,o=e.style;return t.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&xwt(a)&&zke(a)!==r.customPathData||i==="image"&&ft(o,"image")&&o.image!==r.customImagePath}function gwt(n,e,t,r,i){var a=t.clipPath;if(a===!1)n&&n.getClipPath()&&n.removeClipPath();else if(a){var o=n.getClipPath();o&&Vke(o,a,r)&&(o=null),o||(o=_K(a),n.setClipPath(o)),TK(null,o,e,a,null,r,i)}}function mwt(n,e,t,r,i,a){if(!n.isGroup){vde(t,null,a),vde(t,xg,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,c=a.select.conOpt;if(o!=null||s!=null||c!=null||l!=null){var u=n.getTextContent();if(o===!1)u&&n.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=_K(o),n.setTextContent(u)),TK(null,u,e,o,null,r,i);for(var d=o&&o.style,h=0;h<gy.length;h++){var f=gy[h];if(f!==zv){var m=a[f].conOpt;Uke(f,u,m,AK(o,m,f),null)}}d?u.dirty():u.markRedraw()}}}}function vde(n,e,t){var r=e?G2(n,e):n,i=e?AK(n,r,xg):n.style,a=n.type,o=r?r.textConfig:null,s=n.textContent,l=s?e?G2(s,e):s:null;if(i&&(t.isLegacy||Oke(i,a,!!o,!!l))){t.isLegacy=!0;var c=Lke(i,a,!e);!o&&c.textConfig&&(o=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var d=e?t[e]:t.normal;d.cfg=o,d.conOpt=l}function G2(n,e){return e?n?n[e]:null:n}function AK(n,e,t){var r=e&&e.style;return r==null&&t===xg&&n&&(r=n.styleEmphasis),r}function vwt(n,e,t,r,i){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,c=s===!1;if(!(!o&&!l&&!c)){if(l){bwt({api:n,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:i,group:e});return}c&&e.removeAll();for(var u=0;u<o;u++){var d=a[u],h=e.childAt(u);d?(d.ignore==null&&(d.ignore=!1),EK(n,h,t,d,i,e)):h.ignore=!0}for(var f=e.childCount()-1;f>=u;f--){var m=e.childAt(f);ywt(e,m,i)}}}function ywt(n,e,t){e&&_F(e,wg(n).option,t)}function bwt(n){new Og(n.oldChildren,n.newChildren,yde,yde,n).add(bde).update(bde).remove(wwt).execute()}function yde(n,e){var t=n&&n.name;return t??lwt+e}function bde(n,e){var t=this.context,r=n!=null?t.newChildren[n]:null,i=e!=null?t.oldChildren[e]:null;EK(t.api,i,t.dataIndex,r,t.seriesModel,t.group)}function wwt(n){var e=this.context,t=e.oldChildren[n];t&&_F(t,wg(t).option,e.seriesModel)}function zke(n){return n&&(n.pathData||n.d)}function xwt(n){return n&&(ft(n,"pathData")||ft(n,"d"))}function Swt(n){n.registerChartView(dwt),n.registerSeriesModel(Ubt)}var Lb=Kn(),wde=Nt,YU=ut,kK=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,a,e,t,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new jt,this.createPointerEl(s,c,e,t),this.createLabelEl(s,c,e,t),r.getZr().add(s);else{var h=Qt(xde,t,d);this.updatePointerEl(s,c,h),this.updateLabelEl(s,c,h,t)}_de(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=KY(e).seriesDataCount,c=i.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var o=Lb(e).pointerEl=new ex[a.type](wde(t.pointer));e.add(o)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=Lb(e).labelEl=new Qn(wde(t.label));e.add(a),Sde(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=Lb(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=Lb(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),Sde(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=nM(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Mg(c.event)},onmousedown:YU(this._onHandleDragMove,this,0,0),drift:YU(this._onHandleDragMove,this),ondragend:YU(this._onHandleDragEnd,this)}),r.add(i)),_de(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Fe(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,IT(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},n.prototype._moveHandleToValue=function(e,t){xde(this._axisPointerModel,!t&&this._moveAnimation,this._handle,KU(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(KU(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(KU(i)),Lb(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),VD(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function xde(n,e,t,r){Hke(Lb(t).lastProp,r)||(Lb(t).lastProp=r,e?ar(t,r,n):(t.stopAnimation(),t.attr(r)))}function Hke(n,e){if(It(n)&&It(e)){var t=!0;return Z(e,function(r,i){t=t&&Hke(n[i],r)}),!!t}else return n===e}function Sde(n,e){n[e.get(["label","show"])?"show":"hide"]()}function KU(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function _de(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}function CK(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function Gke(n,e,t,r,i){var a=t.get("value"),o=Wke(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),l=AT(s.get("padding")||0),c=s.getFont(),u=KI(o,c),d=i.position,h=u.width+l[1]+l[3],f=u.height+l[0]+l[2],m=i.align;m==="right"&&(d[0]-=h),m==="center"&&(d[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(d[1]-=f),v==="middle"&&(d[1]-=f/2),_wt(d,h,f,r);var y=s.get("backgroundColor");(!y||y==="auto")&&(y=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:ri(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:y}),z2:10}}function _wt(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function Wke(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),o=i.formatter;if(o){var s={value:FY(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Z(r,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&s.seriesData.push(d)}),st(o)?a=o.replace("{value}",a):kt(o)&&(a=o(s))}return a}function DK(n,e,t){var r=Bc();return Qw(r,r,t.rotation),Lf(r,r,t.position),rh([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function qke(n,e,t,r,i,a){var o=fl.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),Gke(e,r,i,a,{position:DK(r.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function IK(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function Yke(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function Tde(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var Twt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.grid,c=a.get("type"),u=Ede(l,s).getOtherAxis(s).getGlobalExtent(),d=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var h=CK(a),f=Ewt[c](s,d,u);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=nG(l.model,i);qke(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=nG(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=DK(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),c=Ede(s,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,d=[t.x,t.y];d[u]+=r[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var h=(c[1]+c[0])/2,f=[h,h];f[u]=d[u];var m=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:f,tooltipOption:m[u]}},e}(kK);function Ede(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var Ewt={line:function(n,e,t){var r=IK([e,t[0]],[e,t[1]],Ade(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:Yke([e-r/2,t[0]],[r,i],Ade(n))}}};function Ade(n){return n.dim==="x"?0:1}var Awt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(On),sg=Kn(),kwt=Z;function Kke(n,e,t){if(!Mn.node){var r=e.getZr();sg(r).records||(sg(r).records={}),Cwt(r,e);var i=sg(r).records[n]||(sg(r).records[n]={});i.handler=t}}function Cwt(n,e){if(sg(n).initialized)return;sg(n).initialized=!0,t("click",Qt(kde,"click")),t("mousemove",Qt(kde,"mousemove")),t("globalout",Iwt);function t(r,i){n.on(r,function(a){var o=Mwt(e);kwt(sg(n).records,function(s){s&&i(s,a,o.dispatchAction)}),Dwt(o.pendings,e)})}}function Dwt(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Iwt(n,e,t){n.handler("leave",null,t)}function kde(n,e,t,r){e.handler(n,t,r)}function Mwt(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function _G(n,e){if(!Mn.node){var t=e.getZr(),r=(sg(t).records||{})[n];r&&(sg(t).records[n]=null)}}var Pwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Kke("axisPointer",i,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){_G("axisPointer",r)},e.prototype.dispose=function(t,r){_G("axisPointer",r)},e.type="axisPointer",e}(Mi);function Xke(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=Lw(a,n);if(o==null||o<0||Fe(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,h=c.dim,f=d==="x"||d==="radius"?1:0,m=a.mapDimension(h),v=[];v[f]=a.get(m,o),v[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=l.dataToPoint(v)||[]}else t=l.dataToPoint(a.getValues(Be(l.dimensions,function(w){return a.mapDimension(w)}),o))||[];else if(s){var y=s.getBoundingRect().clone();y.applyTransform(s.transform),t=[y.x+y.width/2,y.y+y.height/2]}return{point:t,el:s}}var Cde=Kn();function Nwt(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,o=n.dispatchAction||ut(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){MR(i)&&(i=Xke({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=MR(i),c=a.axesInfo,u=s.axesInfo,d=r==="leave"||MR(i),h={},f={},m={list:[],map:{}},v={showPointer:Qt(Owt,f),showTooltip:Qt(Lwt,m)};Z(s.coordSysMap,function(w,S){var T=l||w.containPoint(i);Z(s.coordSysAxesInfo[S],function(C,k){var A=C.axis,D=Bwt(c,C);if(!d&&T&&(!c||D)){var P=D&&D.value;P==null&&!l&&(P=A.pointToData(i)),P!=null&&Dde(C,P,v,!1,h)}})});var y={};return Z(u,function(w,S){var T=w.linkGroup;T&&!f[S]&&Z(T.axesInfo,function(C,k){var A=f[k];if(C!==w&&A){var D=A.value;T.mapper&&(D=w.axis.scale.parse(T.mapper(D,Ide(C),Ide(w)))),y[w.key]=D}})}),Z(y,function(w,S){Dde(u[S],w,v,!0,h)}),jwt(f,u,h),Fwt(m,i,n,o),$wt(u,o,t),h}}function Dde(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var o=Rwt(e,n),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&Me(i,s[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,s),t.showTooltip(n,o,l)}}function Rwt(n,e){var t=e.axis,r=t.dim,i=n,a=[],o=Number.MAX_VALUE,s=-1;return Z(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),d,h;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,n,t);h=f.dataIndices,d=f.nestestValue}else{if(h=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!h.length)return;d=l.getData().get(u[0],h[0])}if(!(d==null||!isFinite(d))){var m=n-d,v=Math.abs(m);v<=o&&((v<o||m>=0&&s<0)&&(o=v,s=m,i=d,a.length=0),Z(h,function(y){a.push({seriesIndex:l.seriesIndex,dataIndexInside:y,dataIndex:l.getData().getRawIndex(y)})}))}}),{payloadBatch:a,snapToValue:i}}function Owt(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function Lwt(n,e,t,r){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,c=KD(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function jwt(n,e,t){var r=t.axesInfo=[];Z(e,function(i,a){var o=i.axisPointerModel.option,s=n[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Fwt(n,e,t,r){if(MR(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function $wt(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=Cde(r)[i]||{},o=Cde(r)[i]={};Z(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&Z(d.seriesDataIndices,function(h){var f=h.seriesIndex+" | "+h.dataIndex;o[f]=h})});var s=[],l=[];Z(a,function(c,u){!o[u]&&l.push(c)}),Z(o,function(c,u){!a[u]&&s.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Bwt(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function Ide(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function MR(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function gM(n){ix.registerAxisPointerClass("CartesianAxisPointer",Twt),n.registerComponentModel(Awt),n.registerComponentView(Pwt),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Fe(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Xpt(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Nwt)}function Uwt(n){En(TAe),En(gM)}var Vwt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),d=s.dataToCoord(r),h=a.get("type");if(h&&h!=="none"){var f=CK(a),m=Hwt[h](s,l,d,u);m.style=f,t.graphicKey=m.type,t.pointer=m}var v=a.get(["label","margin"]),y=zwt(r,i,a,l,v);Gke(t,i,a,o,y)},e}(kK);function zwt(n,e,t,r,i){var a=e.axis,o=a.dataToCoord(n),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),c,u,d;if(a.dim==="radius"){var h=Bc();Qw(h,h,s),Lf(h,h,[r.cx,r.cy]),c=rh([o,-i],h);var f=e.getModel("axisLabel").get("rotate")||0,m=fl.innerTextLayout(s,f*Math.PI/180,-1);u=m.textAlign,d=m.textVerticalAlign}else{var v=l[1];c=r.coordToPoint([v+i,o]);var y=r.cx,w=r.cy;u=Math.abs(c[0]-y)/v<.3?"center":c[0]>y?"left":"right",d=Math.abs(c[1]-w)/v<.3?"middle":c[1]>w?"top":"bottom"}return{position:c,align:u,verticalAlign:d}}var Hwt={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:IK(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:Tde(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:Tde(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}},Gwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(On),MK=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Ca).models[0]},e.type="polarAxis",e}(On);Ia(MK,oM);var Wwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(MK),qwt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(MK),PK=function(n){_e(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(fh);PK.prototype.dataToRadius=fh.prototype.dataToCoord;PK.prototype.radiusToData=fh.prototype.coordToData;var Ywt=Kn(),NK=function(n){_e(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=t.dataToCoord(s+1)-t.dataToCoord(s),c=Math.abs(l),u=KI(s==null?"":s+"",r.getFont(),"center","top"),d=Math.max(u.height,7),h=d/c;isNaN(h)&&(h=1/0);var f=Math.max(0,Math.floor(h)),m=Ywt(t.model),v=m.lastAutoInterval,y=m.lastTickCount;return v!=null&&y!=null&&Math.abs(v-f)<=1&&Math.abs(y-o)<=1&&v>f?f=v:(m.lastTickCount=o,m.lastAutoInterval=f),f},e}(fh);NK.prototype.dataToAngle=fh.prototype.dataToCoord;NK.prototype.angleToData=fh.prototype.coordToData;var Zke=["radius","angle"],Kwt=function(){function n(e){this.dimensions=Zke,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new PK,this._angleAxis=new NK,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},n.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var c=Math.atan2(-r,t)/Math.PI*180,u=c<o?1:-1;c<o||c>s;)c+=u*360;return[l,c]},n.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[i,a]},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(s,l){var c=s-this.cx,u=l-this.cy,d=c*c+u*u,h=this.r,f=this.r0;return h!==f&&d-o<=h*h&&d+o>=f*f}}},n.prototype.convertToPixel=function(e,t,r){var i=Mde(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Mde(t);return i===this?this.pointToData(r):null},n}();function Mde(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function Xwt(n,e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight();n.cx=tt(r[0],i),n.cy=tt(r[1],a);var o=n.getRadiusAxis(),s=Math.min(i,a)/2,l=e.get("radius");l==null?l=[0,"100%"]:Fe(l)||(l=[0,l]);var c=[tt(l[0],s),tt(l[1],s)];o.inverse?o.setExtent(c[1],c[0]):o.setExtent(c[0],c[1])}function Zwt(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===t){var l=s.getData();Z(P2(l,"radius"),function(c){i.scale.unionExtentFromData(l,c)}),Z(P2(l,"angle"),function(c){r.scale.unionExtentFromData(l,c)})}}),z1(r.scale,r.model),z1(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function Qwt(n){return n.mainType==="angleAxis"}function Pde(n,e){var t;if(n.type=e.get("type"),n.scale=mF(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),Qwt(e)){n.inverse=n.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(n.inverse?-360:360);n.setExtent(r,i)}e.axis=n,n.model=e}var Jwt={dimensions:Zke,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new Kwt(i+"");a.update=Zwt;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");Pde(o,l),Pde(s,c),Xwt(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Ca).models[0];r.coordinateSystem=i.coordinateSystem}}),t}},ext=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function jN(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function FN(n){var e=n.getRadiusAxis();return e.inverse?0:1}function Nde(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var txt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),c=Be(i.getViewLabels(),function(u){u=Nt(u);var d=i.scale,h=d.type==="ordinal"?d.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=i.dataToCoord(h),u});Nde(c),Nde(s),Z(ext,function(u){t.get([u,"show"])&&(!i.scale.isBlank()||u==="axisLine")&&nxt[u](this.group,t,a,s,l,o,c)},this)}},e.type="angleAxis",e}(ix),nxt={axisLine:function(n,e,t,r,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=t.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=FN(t),d=u?0:1,h,f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";a[d]===0?h=new ex[f]({shape:{cx:t.cx,cy:t.cy,r:a[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):h=new QI({shape:{cx:t.cx,cy:t.cy,r:a[u],r0:a[d]},style:o.getLineStyle(),z2:1,silent:!0}),h.style.fill=null,n.add(h)},axisTick:function(n,e,t,r,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[FN(t)],c=Be(r,function(u){return new so({shape:jN(t,[l,l+s],u.coord)})});n.add(Lu(c,{style:Dt(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),c=a[FN(t)],u=[],d=0;d<i.length;d++)for(var h=0;h<i[d].length;h++)u.push(new so({shape:jN(t,[c,c+l],i[d][h].coord)}));n.add(Lu(u,{style:Dt(s.getModel("lineStyle").getLineStyle(),Dt(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");Z(o,function(d,h){var f=l,m=d.tickValue,v=a[FN(t)],y=t.coordToPoint([v+c,d.coord]),w=t.cx,S=t.cy,T=Math.abs(y[0]-w)/v<.3?"center":y[0]>w?"left":"right",C=Math.abs(y[1]-S)/v<.3?"middle":y[1]>S?"top":"bottom";if(s&&s[m]){var k=s[m];It(k)&&k.textStyle&&(f=new wr(k.textStyle,l,l.ecModel))}var A=new Qn({silent:fl.isLabelSilent(e),style:ri(f,{x:y[0],y:y[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:d.formattedLabel,align:T,verticalAlign:C})});if(n.add(A),u){var D=fl.makeAxisEventDataBase(e);D.targetType="axisLabel",D.value=d.rawLabel,Ut(A).eventData=D}},this)},splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=0;d<r.length;d++){var h=c++%l.length;u[h]=u[h]||[],u[h].push(new so({shape:jN(t,a,r[d].coord)}))}for(var d=0;d<u.length;d++)n.add(Lu(u[d],{style:Dt({stroke:l[d%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],c=0;c<i.length;c++)for(var u=0;u<i[c].length;u++)l.push(new so({shape:jN(t,a,i[c][u].coord)}));n.add(Lu(l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=Math.PI/180,h=-r[0].coord*d,f=Math.min(a[0],a[1]),m=Math.max(a[0],a[1]),v=e.get("clockwise"),y=1,w=r.length;y<=w;y++){var S=y===w?r[0].coord:r[y].coord,T=c++%l.length;u[T]=u[T]||[],u[T].push(new ml({shape:{cx:t.cx,cy:t.cy,r0:f,r:m,startAngle:h,endAngle:-S*d,clockwise:v},silent:!0})),h=-S*d}for(var y=0;y<u.length;y++)n.add(Lu(u[y],{style:Dt({fill:l[y%l.length]},s.getAreaStyle()),silent:!0}))}}},rxt=["axisLine","axisTickLabel","axisName"],ixt=["splitLine","splitArea","minorSplitLine"],axt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,a=this._axisGroup=new jt;this.group.add(a);var o=t.axis,s=o.polar,l=s.getAngleAxis(),c=o.getTicksCoords(),u=o.getMinorTicksCoords(),d=l.getExtent()[0],h=o.getExtent(),f=sxt(s,t,d),m=new fl(t,f);Z(rxt,m.add,m),a.add(m.getGroup()),tM(i,a,t),Z(ixt,function(v){t.get([v,"show"])&&!o.scale.isBlank()&&oxt[v](this.group,t,s,d,h,c,u)},this)}},e.type="radiusAxis",e}(ix),oxt={splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0,u=t.getAngleAxis(),d=Math.PI/180,h=u.getExtent(),f=Math.abs(h[1]-h[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var m=[],v=0;v<a.length;v++){var y=c++%l.length;m[y]=m[y]||[],m[y].push(new ex[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[v].coord,0),startAngle:-h[0]*d,endAngle:-h[1]*d,clockwise:u.inverse}}))}for(var v=0;v<m.length;v++)n.add(Lu(m[v],{style:Dt({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<o.length;u++)for(var d=0;d<o[u].length;d++)c.push(new Xg({shape:{cx:t.cx,cy:t.cy,r:o[u][d].coord}}));n.add(Lu(c,{style:Dt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],d=a[0].coord,h=1;h<a.length;h++){var f=c++%l.length;u[f]=u[f]||[],u[f].push(new ml({shape:{cx:t.cx,cy:t.cy,r0:d,r:a[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),d=a[h].coord}for(var h=0;h<u.length;h++)n.add(Lu(u[h],{style:Dt({fill:l[h%l.length]},s.getAreaStyle()),silent:!0}))}}};function sxt(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function Qke(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function Jke(n,e){return e.dim+n.model.componentIndex}function lxt(n,e,t){var r={},i=cxt(vr(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),c=Jke(s,l),u=Qke(a),d=i[c][u],h=d.offset,f=d.width,m=s.getOtherAxis(l),v=a.coordinateSystem.cx,y=a.coordinateSystem.cy,w=a.get("barMinHeight")||0,S=a.get("barMinAngle")||0;r[u]=r[u]||[];for(var T=o.mapDimension(m.dim),C=o.mapDimension(l.dim),k=fy(o,T),A=l.dim!=="radius"||!a.get("roundCap",!0),D=m.model,P=D.get("startValue"),N=m.dataToCoord(P||0),R=0,L=o.count();R<L;R++){var B=o.get(T,R),$=o.get(C,R),G=B>=0?"p":"n",W=N;k&&(r[u][$]||(r[u][$]={p:N,n:N}),W=r[u][$][G]);var K=void 0,X=void 0,te=void 0,ie=void 0;if(m.dim==="radius"){var z=m.dataToCoord(B)-N,se=l.dataToCoord($);Math.abs(z)<w&&(z=(z<0?-1:1)*w),K=W,X=W+z,te=se-h,ie=te-f,k&&(r[u][$][G]=X)}else{var ce=m.dataToCoord(B,A)-N,ee=l.dataToCoord($);Math.abs(ce)<S&&(ce=(ce<0?-1:1)*S),K=ee+h,X=K+f,te=W,ie=W+ce,k&&(r[u][$][G]=ie)}o.setItemLayout(R,{cx:v,cy:y,r0:K,r:X,startAngle:-te*Math.PI/180,endAngle:-ie*Math.PI/180,clockwise:te>=ie})}}})}function cxt(n){var e={};Z(n,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=Jke(o,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/a.count(),d=e[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=d.stacks;e[l]=d;var f=Qke(r);h[f]||d.autoWidthCount++,h[f]=h[f]||{width:0,maxWidth:0};var m=tt(r.get("barWidth"),u),v=tt(r.get("barMaxWidth"),u),y=r.get("barGap"),w=r.get("barCategoryGap");m&&!h[f].width&&(m=Math.min(d.remainedWidth,m),h[f].width=m,d.remainedWidth-=m),v&&(h[f].maxWidth=v),y!=null&&(d.gap=y),w!=null&&(d.categoryGap=w)});var t={};return Z(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=tt(r.categoryGap,o),l=tt(r.gap,1),c=r.remainedWidth,u=r.autoWidthCount,d=(c-s)/(u+(u-1)*l);d=Math.max(d,0),Z(a,function(v,y){var w=v.maxWidth;w&&w<d&&(w=Math.min(w,c),v.width&&(w=Math.min(w,v.width)),c-=w,v.width=w,u--)}),d=(c-s)/(u+(u-1)*l),d=Math.max(d,0);var h=0,f;Z(a,function(v,y){v.width||(v.width=d),f=v,h+=v.width*(1+l)}),f&&(h-=f.width*l);var m=-h/2;Z(a,function(v,y){t[i][y]=t[i][y]||{offset:m,width:v.width},m+=v.width*(1+l)})}),t}var uxt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},dxt={splitNumber:5},hxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(Mi);function fxt(n){En(gM),ix.registerAxisPointerClass("PolarAxisPointer",Vwt),n.registerCoordinateSystem("polar",Jwt),n.registerComponentModel(Gwt),n.registerComponentView(hxt),G1(n,"angle",Wwt,uxt),G1(n,"radius",qwt,dxt),n.registerComponentView(txt),n.registerComponentView(axt),n.registerLayout(Qt(lxt,"bar"))}function TG(n,e){e=e||{};var t=n.coordinateSystem,r=n.axis,i={},a=r.position,o=r.orient,s=t.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?c.vertical[a]:l[0],o==="horizontal"?c.horizontal[a]:l[3]];var u={horizontal:0,vertical:1};i.rotation=Math.PI/2*u[o];var d={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=d[a],n.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Io(e.labelInside,n.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var h=e.rotate;return h==null&&(h=n.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-h:h,i.z2=1,i}var pxt=["axisLine","axisTickLabel","axisName"],gxt=["splitArea","splitLine"],mxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new jt;var l=TG(t),c=new fl(t,l);Z(pxt,c.add,c),o.add(this._axisGroup),o.add(c.getGroup()),Z(gxt,function(u){t.get([u,"show"])&&vxt[u](this,this.group,this._axisGroup,t)},this),tM(s,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)},e.prototype.remove=function(){xAe(this)},e.type="singleAxis",e}(ix),vxt={splitLine:function(n,e,t,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),c=r.coordinateSystem.getRect(),u=i.isHorizontal(),d=[],h=0,f=i.getTicksCoords({tickModel:a}),m=[],v=[],y=0;y<f.length;++y){var w=i.toGlobalCoord(f[y].coord);u?(m[0]=w,m[1]=c.y,v[0]=w,v[1]=c.y+c.height):(m[0]=c.x,m[1]=w,v[0]=c.x+c.width,v[1]=w);var S=new so({shape:{x1:m[0],y1:m[1],x2:v[0],y2:v[1]},silent:!0});B1(S.shape,l);var T=h++%s.length;d[T]=d[T]||[],d[T].push(S)}for(var C=o.getLineStyle(["color"]),y=0;y<d.length;++y)e.add(Lu(d[y],{style:Dt({stroke:s[y%s.length]},C),silent:!0}))}},splitArea:function(n,e,t,r){wAe(n,t,r,r)}},PR=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(On);Ia(PR,oM.prototype);var yxt=function(n){_e(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e}(fh),eCe=["single"],bxt=function(){function n(e,t,r){this.type="single",this.dimension="single",this.dimensions=eCe,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=this.dimension,a=new yxt(i,mF(e),[0,0],e.get("type"),e.get("position")),o=a.type==="category";a.onBand=o&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},n.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();Z(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),z1(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(e,t){this._rect=qa({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},n.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(o){return o+t}:function(o){return i-o+t},e.toLocalCoord=a?function(o){return o-t}:function(o){return i-o+t}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},n.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},n.prototype.dataToPoint=function(e){var t=this.getAxis(),r=this.getRect(),i=[],a=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),i[a]=t.toGlobalCoord(t.dataToCoord(+e)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},n.prototype.convertToPixel=function(e,t,r){var i=Rde(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=Rde(t);return i===this?this.pointToData(r):null},n}();function Rde(n){var e=n.seriesModel,t=n.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function wxt(n,e){var t=[];return n.eachComponent("singleAxis",function(r,i){var a=new bxt(r,n,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",Ca).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),t}var xxt={create:wxt,dimensions:eCe},Ode=["x","y"],Sxt=["width","height"],_xt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,l=s.coordinateSystem,c=XU(l,1-W2(s)),u=l.dataToPoint(r)[0],d=a.get("type");if(d&&d!=="none"){var h=CK(a),f=Txt[d](s,u,c);f.style=h,t.graphicKey=f.type,t.pointer=f}var m=TG(i);qke(r,t,m,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=TG(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=DK(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.coordinateSystem,l=W2(o),c=XU(s,l),u=[t.x,t.y];u[l]+=r[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var d=XU(s,1-l),h=(d[1]+d[0])/2,f=[h,h];return f[l]=u[l],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e}(kK),Txt={line:function(n,e,t){var r=IK([e,t[0]],[e,t[1]],W2(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=n.getBandWidth(),i=t[1]-t[0];return{type:"Rect",shape:Yke([e-r/2,t[0]],[r,i],W2(n))}}};function W2(n){return n.isHorizontal()?0:1}function XU(n,e){var t=n.getRect();return[t[Ode[e]],t[Ode[e]]+t[Sxt[e]]]}var Ext=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(Mi);function Axt(n){En(gM),ix.registerAxisPointerClass("SingleAxisPointer",_xt),n.registerComponentView(Ext),n.registerComponentView(mxt),n.registerComponentModel(PR),G1(n,"single",PR,PR.defaultOption),n.registerCoordinateSystem("single",xxt)}var kxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=kT(t);n.prototype.init.apply(this,arguments),Lde(t,a)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),Lde(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(On);function Lde(n,e){var t=n.cellSize,r;Fe(t)?r=t:r=n.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var i=Be([0,1],function(a){return Ylt(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});hy(n,e,{type:"box",ignoreSize:i})}var Cxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll();var o=t.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,c,l,a),this._renderWeekText(t,c,s,l,a)},e.prototype._renderDayRect=function(t,r,i){for(var a=t.coordinateSystem,o=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=r.start.time;c<=r.end.time;c=a.getNextNDay(c,1).time){var u=a.dataToRect([c],!1).tl,d=new Yn({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:o});i.add(d)}},e.prototype._renderLines=function(t,r,i,a){var o=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=r.start,h=0;d.time<=r.end.time;h++){m(d.formatedDate),h===0&&(d=s.getDateInfo(r.start.y+"-"+r.start.m));var f=d.date;f.setMonth(f.getMonth()+1),d=s.getDateInfo(f)}m(s.getNextNDay(r.end.time,1).formatedDate);function m(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var y=o._getLinePointsOfOneWeek(t,v,i);o._tlpoints.push(y[0]),o._blpoints.push(y[y.length-1]),c&&o._drawSplitline(y,l,a)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,i),l,a),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,i),l,a)},e.prototype._getEdgesPoints=function(t,r,i){var a=[t[0].slice(),t[t.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},e.prototype._drawSplitline=function(t,r,i){var a=new yl({z2:20,shape:{points:t},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var a=t.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var c=a.getNextNDay(o.time,l),u=a.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[i==="horizontal"?"bl":"tr"]}return s},e.prototype._formatterLabel=function(t,r){return st(t)&&t?Glt(t,r):kt(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,i,a,o){var s=r[0],l=r[1],c=["center","bottom"];a==="bottom"?(l+=o,c=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,c=["center","top"]):l-=o;var u=0;return(a==="left"||a==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,r,i,a){var o=t.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,d=(c[0][1]+c[1][1])/2,h=i==="horizontal"?0:1,f={top:[u,c[h][1]],bottom:[u,c[1-h][1]],left:[c[1-h][0],d],right:[c[h][0],d]},m=r.start.y;+r.end.y>+r.start.y&&(m=m+"-"+r.end.y);var v=o.get("formatter"),y={start:r.start.y,end:r.end.y,nameMap:m},w=this._formatterLabel(v,y),S=new Qn({z2:30,style:ri(o,{text:w}),silent:o.get("silent")});S.attr(this._yearTextPositionControl(S,f[l],i,l,s)),a.add(S)}},e.prototype._monthTextPositionControl=function(t,r,i,a,o){var s="left",l="top",c=t[0],u=t[1];return i==="horizontal"?(u=u+o,r&&(s="center"),a==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),a==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,i,a){var o=t.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),u=o.get("align"),d=[this._tlpoints,this._blpoints];(!s||st(s))&&(s&&(r=PH(s)||r),s=r.get(["time","monthAbbr"])||[]);var h=c==="start"?0:1,f=i==="horizontal"?0:1;l=c==="start"?-l:l;for(var m=u==="center",v=o.get("silent"),y=0;y<d[h].length-1;y++){var w=d[h][y].slice(),S=this._firstDayOfMonth[y];if(m){var T=this._firstDayPoints[y];w[f]=(T[f]+d[0][y+1][f])/2}var C=o.get("formatter"),k=s[+S.m-1],A={yyyy:S.y,yy:(S.y+"").slice(2),MM:S.m,M:+S.m,nameMap:k},D=this._formatterLabel(C,A),P=new Qn({z2:30,style:Me(ri(o,{text:D}),this._monthTextPositionControl(w,m,i,c,l)),silent:v});a.add(P)}}},e.prototype._weekTextPositionControl=function(t,r,i,a,o){var s="center",l="middle",c=t[0],u=t[1],d=i==="start";return r==="horizontal"?(c=c+a+(d?1:-1)*o[0]/2,s=d?"right":"left"):(u=u+a+(d?1:-1)*o[1]/2,l=d?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,i,a,o){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),d=s.get("margin"),h=l.getFirstDayOfWeek();if(!u||st(u)){u&&(r=PH(u)||r);var f=r.get(["time","dayOfWeekShort"]);u=f||Be(r.get(["time","dayOfWeekAbbr"]),function(A){return A[0]})}var m=l.getNextNDay(i.end.time,7-i.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];d=tt(d,Math.min(v[1],v[0])),c==="start"&&(m=l.getNextNDay(i.start.time,-(7+i.fweek)).time,d=-d);for(var y=s.get("silent"),w=0;w<7;w++){var S=l.getNextNDay(m,w),T=l.dataToRect([S.time],!1).center,C=w;C=Math.abs((w+h)%7);var k=new Qn({z2:30,style:Me(ri(s,{text:u[C]}),this._weekTextPositionControl(T,a,c,d,v)),silent:y});o.add(k)}}},e.type="calendar",e}(Mi),ZU=864e5,Dxt=function(){function n(e,t,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=Ff(e);var t=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),o=a<10?"0"+a:""+a,s=e.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:o,day:s,time:e.getTime(),formatedDate:t+"-"+i+"-"+o,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];Z([0,1],function(d){u(a,d)&&(o[i[d]]=a[d]*s[d])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=qa(o,l);Z([0,1],function(d){u(a,d)||(a[d]=c[i[d]]/s[d])});function u(d,h){return d[h]!=null&&d[h]!=="auto"}this._sw=a[0],this._sh=a[1]},n.prototype.dataToPoint=function(e,t){Fe(e)&&(e=e[0]),t==null&&(t=!0);var r=this.getDateInfo(e),i=this._rangeInfo,a=r.formatedDate;if(t&&!(r.time>=i.start.time&&r.time<i.end.time+ZU))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToRect=function(e,t){var r=this.dataToPoint(e,t);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},n.prototype.convertToPixel=function(e,t,r){var i=jde(t);return i===this?i.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=jde(t);return i===this?i.pointToData(r):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(Fe(e)&&e.length===1&&(e=e[0]),Fe(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var i=Math.floor(t[1].time/ZU)-Math.floor(t[0].time/ZU)+1,a=new Date(t[0].time),o=a.getDate(),s=t[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*c>0;)i-=c,a.setDate(l-c);var u=Math.floor((i+t[0].day+6)/7),d=r?-u+1:u-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:u,nthWeek:d,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var a=(e-1)*7-i.fweek+t,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},n.create=function(e,t){var r=[];return e.eachComponent("calendar",function(i){var a=new n(i);r.push(a),i.coordinateSystem=a}),e.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function jde(n){var e=n.calendarModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function Ixt(n){n.registerComponentModel(kxt),n.registerComponentView(Cxt),n.registerCoordinateSystem("calendar",Dxt)}function Mxt(n,e){var t=n.existing;if(e.id=n.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function Fde(n,e){var t;return Z(e,function(r){n[r]!=null&&n[r]!=="auto"&&(t=!0)}),t}function Pxt(n,e,t){var r=Me({},t),i=n[e],a=t.$action||"merge";a==="merge"?i?(sn(i,r,!0),hy(i,r,{ignoreSize:!0}),G1e(t,i),$N(t,i),$N(t,i,"shape"),$N(t,i,"style"),$N(t,i,"extra"),t.clipPath=i.clipPath):n[e]=r:a==="replace"?n[e]=r:a==="remove"&&i&&(n[e]=null)}var tCe=["transition","enterFrom","leaveTo"],Nxt=tCe.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function $N(n,e,t){if(t&&(!n[t]&&e[t]&&(n[t]={}),n=n[t],e=e[t]),!(!n||!e))for(var r=t?tCe:Nxt,i=0;i<r.length;i++){var a=r[i];n[a]==null&&e[a]!=null&&(n[a]=e[a])}}function Rxt(n,e){if(n&&(n.hv=e.hv=[Fde(e,["left","right"]),Fde(e,["top","bottom"])],n.type==="group")){var t=n,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var Oxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,t,r),this.option.elements=i},e.prototype.optionUpdated=function(t,r){var i=this.option,a=(r?i:t).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=U_e(o,s,"normalMerge"),c=this._elOptionsToUpdate=[];Z(l,function(u,d){var h=u.newOption;h&&(c.push(h),Mxt(u,h),Pxt(o,d,h),Rxt(o[d],h))},this),i.elements=vr(o,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,r,i){Z(t,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(On),$de={path:null,compoundPath:null,group:jt,image:Ro,text:Qn},Iu=Kn(),Lxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=yt()},e.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=t.get("z"),s=t.get("zlevel");Z(r,function(l){var c=Ha(l.id,null),u=c!=null?i.get(c):null,d=Ha(l.parentId,null),h=d!=null?i.get(d):a,f=l.type,m=l.style;f==="text"&&m&&l.hv&&l.hv[1]&&(m.textVerticalAlign=m.textBaseline=m.verticalAlign=m.align=null);var v=l.textContent,y=l.textConfig;if(m&&Oke(m,f,!!y,!!v)){var w=Lke(m,f,!0);!y&&w.textConfig&&(y=l.textConfig=w.textConfig),!v&&w.textContent&&(v=w.textContent)}var S=jxt(l),T=l.$action||"merge",C=T==="merge",k=T==="replace";if(C){var A=!u,D=u;A?D=Bde(c,h,l.type,i):(D&&(Iu(D).isNew=!1),Bke(D)),D&&(IR(D,S,t,{isInit:A}),Ude(D,l,o,s))}else if(k){NR(u,l,i,t);var P=Bde(c,h,l.type,i);P&&(IR(P,S,t,{isInit:!0}),Ude(P,l,o,s))}else T==="remove"&&(Fke(u,l),NR(u,l,i,t));var N=i.get(c);if(N&&v)if(C){var R=N.getTextContent();R?R.attr(v):N.setTextContent(new Qn(v))}else k&&N.setTextContent(new Qn(v));if(N){var L=l.clipPath;if(L){var B=L.type,$=void 0,A=!1;if(C){var G=N.getClipPath();A=!G||Iu(G).type!==B,$=A?EG(B):G}else k&&(A=!0,$=EG(B));N.setClipPath($),IR($,L,t,{isInit:A}),H2($,L.keyframeAnimation,t)}var W=Iu(N);N.setTextConfig(y),W.option=l,Fxt(N,t,l),Jw({el:N,componentModel:t,itemName:N.name,itemTooltipOption:l.tooltip}),H2(N,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var i=t.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),c=["x","y"],u=0;u<i.length;u++){var d=i[u],h=Ha(d.id,null),f=h!=null?o.get(h):null;if(!(!f||!f.isGroup)){var m=f.parent,v=m===a,y=Iu(f),w=Iu(m);y.width=tt(y.option.width,v?s:w.width)||0,y.height=tt(y.option.height,v?l:w.height)||0}}for(var u=i.length-1;u>=0;u--){var d=i[u],h=Ha(d.id,null),f=h!=null?o.get(h):null;if(f){var m=f.parent,w=Iu(m),S=m===a?{width:s,height:l}:{width:w.width,height:w.height},T={},C=sF(f,d,S,null,{hv:d.hv,boundingMode:d.bounding},T);if(!Iu(f).isNew&&C){for(var k=d.transition,A={},D=0;D<c.length;D++){var P=c[D],N=T[P];k&&(yw(k)||mn(k,P)>=0)?A[P]=N:f[P]=N}ar(f,A,t,0)}else f.attr(T)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){NR(i,Iu(i).option,r,t._lastGraphicModel)}),this._elMap=yt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Mi);function EG(n){var e=ft($de,n)?$de[n]:dY(n),t=new e({});return Iu(t).type=n,t}function Bde(n,e,t,r){var i=EG(t);return e.add(i),r.set(n,i),Iu(i).id=n,Iu(i).isNew=!0,i}function NR(n,e,t,r){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(a){NR(a,e,t,r)}),_F(n,e,r),t.removeKey(Iu(n).id))}function Ude(n,e,t,r){n.isGroup||Z([["cursor",Yu.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(i){var a=i[0];ft(e,a)?n[a]=Wt(e[a],i[1]):n[a]==null&&(n[a]=i[1])}),Z(Ln(e),function(i){if(i.indexOf("on")===0){var a=e[i];n[i]=kt(a)?a:null}}),ft(e,"draggable")&&(n.draggable=e.draggable),e.name!=null&&(n.name=e.name),e.id!=null&&(n.id=e.id)}function jxt(n){return n=Me({},n),Z(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(H1e),function(e){delete n[e]}),n}function Fxt(n,e,t){var r=Ut(n).eventData;!n.silent&&!n.ignore&&!r&&(r=Ut(n).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:n.name}),r&&(r.info=t.info)}function $xt(n){n.registerComponentModel(Oxt),n.registerComponentView(Lxt),n.registerPreprocessor(function(e){var t=e.graphic;Fe(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var Vde=["x","y","radius","angle","single"],Bxt=["cartesian2d","polar","singleAxis"];function Uxt(n){var e=n.get("coordinateSystem");return mn(Bxt,e)>=0}function Hv(n){return n+"Axis"}function Vxt(n,e){var t=yt(),r=[],i=yt();n.eachComponent({mainType:"dataZoom",query:e},function(u){i.get(u.uid)||s(u)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(u){!i.get(u.uid)&&l(u)&&(s(u),a=!0)}function s(u){i.set(u.uid,!0),r.push(u),c(u)}function l(u){var d=!1;return u.eachTargetAxis(function(h,f){var m=t.get(h);m&&m[f]&&(d=!0)}),d}function c(u){u.eachTargetAxis(function(d,h){(t.get(d)||t.set(d,[]))[h]=!0})}return r}function nCe(n){var e=n.ecModel,t={infoList:[],infoMap:yt()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(Hv(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=t.infoMap.get(s);l||(l={model:o,axisModels:[]},t.infoList.push(l),t.infoMap.set(s,l)),l.axisModels.push(a)}}}),t}var QU=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),tI=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=zde(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=zde(t);sn(this.option,t,!0),sn(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=yt(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return Z(Vde,function(i){var a=this.getReferringComponents(Hv(i),Rot);if(a.specified){r=!0;var o=new QU;Z(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var d=c[0];if(d){var h=new QU;if(h.add(d.componentIndex),t.set(u,h),a=!1,u==="x"||u==="y"){var f=d.getReferringComponents("grid",Ca).models[0];f&&Z(c,function(m){d.componentIndex!==m.componentIndex&&f===m.getReferringComponents("grid",Ca).models[0]&&h.add(m.componentIndex)})}}}a&&Z(Vde,function(c){if(a){var u=i.findComponents({mainType:Hv(c),filter:function(h){return h.get("type",!0)==="category"}});if(u[0]){var d=new QU;d.add(u[0].componentIndex),t.set(c,d),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");Z([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,l=t[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(Hv(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){Z(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(Hv(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;Z([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;Z(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(On);function zde(n){var e={};return Z(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var zxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(tI),RK=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Mi),Hxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(RK),__=Z,Hde=Bu,Gxt=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(Uxt(t)){var r=Hv(this._dimName),i=t.getReferringComponents(r,Ca).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Nt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;__(["start","end"],function(h,f){var m=e[h],v=e[h+"Value"];a[f]==="percent"?(m==null&&(m=o[f]),v=i.parse(br(m,o,t))):(c=!0,v=v==null?t[f]:i.parse(v),m=br(v,t,o)),l[f]=v==null||isNaN(v)?t[f]:v,s[f]=m==null||isNaN(m)?o[f]:m}),Hde(l),Hde(s);var u=this._minMaxSpan;c?d(l,s,t,o,!1):d(s,l,o,t,!0);function d(h,f,m,v,y){var w=y?"Span":"ValueSpan";ax(0,h,m,"all",u["min"+w],u["max"+w]);for(var S=0;S<2;S++)f[S]=br(h[S],m,v,!0),y&&(f[S]=i.parse(f[S]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=Wxt(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;__(i,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(a==="weakFilter"){var d=c.getStore(),h=Be(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var m,v,y,w=0;w<u.length;w++){var S=d.get(h[w],f),T=!isNaN(S),C=S<o[0],k=S>o[1];if(T&&!C&&!k)return!0;T&&(y=!0),C&&(m=!0),k&&(v=!0)}return y&&m&&v})}else __(u,function(f){if(a==="empty")l.setData(c=c.map(f,function(v){return s(v)?v:NaN}));else{var m={};m[f]=o,c.selectRange(m)}});__(u,function(f){c.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;__(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=br(r[0]+o,r,[0,100],!0):a!=null&&(o=br(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=N_e(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function Wxt(n,e,t){var r=[1/0,-1/0];__(t,function(o){Eht(r,o.getData(),e)});var i=n.getAxisModel(),a=wEe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var qxt={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=n.getComponent(Hv(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Gxt(i,a,s,n),t.push(o.__dzAxisProxy))});var r=yt();return Z(t,function(i){Z(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function Yxt(n){n.registerAction("dataZoom",function(e,t){var r=Vxt(t,e);Z(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Gde=!1;function OK(n){Gde||(Gde=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,qxt),Yxt(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Kxt(n){n.registerComponentModel(zxt),n.registerComponentView(Hxt),OK(n)}var Nu=function(){function n(){}return n}(),rCe={};function T_(n,e){rCe[n]=e}function iCe(n){return rCe[n]}var Xxt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;Z(this.option.feature,function(r,i){var a=iCe(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),sn(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(On);function Zxt(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=qa(r,a,i);mw(e.get("orient"),n,e.get("itemGap"),o.width,o.height),sF(n,r,a,i)}function aCe(n,e){var t=AT(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new Yn({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var Qxt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),l=t.get("orient")==="vertical",c=t.get("feature")||{},u=this._features||(this._features={}),d=[];Z(c,function(m,v){d.push(v)}),new Og(this._featureNames||[],d).add(h).update(h).remove(Qt(h,null)).execute(),this._featureNames=d;function h(m,v){var y=d[m],w=d[v],S=c[y],T=new wr(S,t,t.ecModel),C;if(a&&a.newTitle!=null&&a.featureName===y&&(S.title=a.newTitle),y&&!w){if(Jxt(y))C={onclick:T.option.onclick,featureName:y};else{var k=iCe(y);if(!k)return;C=new k}u[y]=C}else if(C=u[w],!C)return;C.uid=ET("toolbox-feature"),C.model=T,C.ecModel=r,C.api=i;var A=C instanceof Nu;if(!y&&w){A&&C.dispose&&C.dispose(r,i);return}if(!T.get("show")||A&&C.unusable){A&&C.remove&&C.remove(r,i);return}f(T,C,y),T.setIconStatus=function(D,P){var N=this.option,R=this.iconPaths;N.iconStatus=N.iconStatus||{},N.iconStatus[D]=P,R[D]&&(P==="emphasis"?Ng:Rg)(R[D])},C instanceof Nu&&C.render&&C.render(T,r,i,a)}function f(m,v,y){var w=m.getModel("iconStyle"),S=m.getModel(["emphasis","iconStyle"]),T=v instanceof Nu&&v.getIcons?v.getIcons():m.get("icon"),C=m.get("title")||{},k,A;st(T)?(k={},k[y]=T):k=T,st(C)?(A={},A[y]=C):A=C;var D=m.iconPaths={};Z(k,function(P,N){var R=nM(P,{},{x:-s/2,y:-s/2,width:s,height:s});R.setStyle(w.getItemStyle());var L=R.ensureState("emphasis");L.style=S.getItemStyle();var B=new Qn({style:{text:A[N],align:S.get("textAlign"),borderRadius:S.get("textBorderRadius"),padding:S.get("textPadding"),fill:null,font:hY({fontStyle:S.get("textFontStyle"),fontFamily:S.get("textFontFamily"),fontSize:S.get("textFontSize"),fontWeight:S.get("textFontWeight")},r)},ignore:!0});R.setTextContent(B),Jw({el:R,componentModel:t,itemName:N,formatterParamsExtra:{title:A[N]}}),R.__title=A[N],R.on("mouseover",function(){var $=S.getItemStyle(),G=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";B.setStyle({fill:S.get("textFill")||$.fill||$.stroke||"#000",backgroundColor:S.get("textBackgroundColor")}),R.setTextConfig({position:S.get("textPosition")||G}),B.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){m.get(["iconStatus",N])!=="emphasis"&&i.leaveEmphasis(this),B.hide()}),(m.get(["iconStatus",N])==="emphasis"?Ng:Rg)(R),o.add(R),R.on("click",ut(v.onclick,v,r,i,N)),D[N]=R})}Zxt(o,t,i),o.add(aCe(o.getBoundingRect(),t)),l||o.eachChild(function(m){var v=m.__title,y=m.ensureState("emphasis"),w=y.textConfig||(y.textConfig={}),S=m.getTextContent(),T=S&&S.ensureState("emphasis");if(T&&!kt(T)&&v){var C=T.style||(T.style={}),k=KI(v,Qn.makeFont(C)),A=m.x+o.x,D=m.y+o.y+s,P=!1;D+k.height>i.getHeight()&&(w.position="top",P=!0);var N=P?-5-k.height:s+10;A+k.width/2>i.getWidth()?(w.position=["100%",N],C.align="right"):A-k.width/2<0&&(w.position=[0,N],C.align="left")}})},e.prototype.updateView=function(t,r,i,a){Z(this._features,function(o){o instanceof Nu&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){Z(this._features,function(i){i instanceof Nu&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){Z(this._features,function(i){i instanceof Nu&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(Mi);function Jxt(n){return n.indexOf("my")===0}var eSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),c=Mn.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=a+"."+s,u.target="_blank",u.href=l;var d=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(d)}else if(window.navigator.msSaveOrOpenBlob||o){var h=l.split(","),f=h[0].indexOf("base64")>-1,m=o?decodeURIComponent(h[1]):h[1];f&&(m=window.atob(m));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var y=m.length,w=new Uint8Array(y);y--;)w[y]=m.charCodeAt(y);var S=new Blob([w]);window.navigator.msSaveOrOpenBlob(S,v)}else{var T=document.createElement("iframe");document.body.appendChild(T);var C=T.contentWindow,k=C.document;k.open("image/svg+xml","replace"),k.write(m),k.close(),C.focus(),k.execCommand("SaveAs",!0,v),document.body.removeChild(T)}}else{var A=i.get("lang"),D='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(A&&A[0]||"")+'" /></body>',P=window.open();P.document.write(D),P.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(Nu),Wde="__ec_magicType_stack__",tSt=[["line","bar"],["stack"]],nSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return Z(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(qde[i]){var s={series:[]},l=function(d){var h=d.subType,f=d.id,m=qde[i](h,f,d,a);m&&(Dt(m,d.option),s.series.push(m));var v=d.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var y=v.getAxesByScale("ordinal")[0];if(y){var w=y.dim,S=w+"Axis",T=d.getReferringComponents(S,Ca).models[0],C=T.componentIndex;s[S]=s[S]||[];for(var k=0;k<=C;k++)s[S][C]=s[S][C]||{};s[S][C].boundaryGap=i==="bar"}}};Z(tSt,function(d){mn(d,i)>=0&&Z(d,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=i;i==="stack"&&(c=sn({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},e}(Nu),qde={line:function(n,e,t,r){if(n==="bar")return sn({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return sn({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===Wde;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),sn({id:e,stack:i?"":Wde},r.get(["option","stack"])||{},!0)}};Wf({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var TF=new Array(60).join("-"),Y1="	";function rSt(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function iSt(n){var e=[];return Z(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(Be(t.series,function(f){return f.name})),l=[i.model.getCategories()];Z(t.series,function(f){var m=f.getRawData();l.push(f.getRawData().mapArray(m.mapDimension(o),function(v){return v}))});for(var c=[s.join(Y1)],u=0;u<l[0].length;u++){for(var d=[],h=0;h<l.length;h++)d.push(l[h][u]);c.push(d.join(Y1))}e.push(c.join(`
`))}),e.join(`

`+TF+`

`)}function aSt(n){return Be(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+Y1:"")+i.join(Y1))}),r.join(`
`)}).join(`

`+TF+`

`)}function oSt(n){var e=rSt(n);return{value:vr([iSt(e.seriesGroupByCategoryAxis),aSt(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+TF+`

`),meta:e.meta}}function q2(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function sSt(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(Y1)>=0)return!0}var AG=new RegExp("["+Y1+"]+","g");function lSt(n){for(var e=n.split(/\n+/g),t=q2(e.shift()).split(AG),r=[],i=Be(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=q2(e[a]).split(AG);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function cSt(n){for(var e=n.split(/\n+/g),t=q2(e.shift()),r=[],i=0;i<e.length;i++){var a=q2(e[i]);if(a){var o=a.split(AG),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[i].value=l[0]:r[i]=l[0])}}return{name:t,data:r}}function uSt(n,e){var t=n.split(new RegExp(`
*`+TF+`
*`,"g")),r={series:[]};return Z(t,function(i,a){if(sSt(i)){var o=lSt(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=cSt(i);r.series.push(o)}}),r}var dSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var d=a.get("optionToContent"),h=a.get("contentToOption"),f=oSt(t);if(kt(d)){var m=d(r.getOption());st(m)?c.innerHTML=m:F1(m)&&c.appendChild(m)}else{u.readOnly=a.get("readOnly");var v=u.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),u.value=f.value,c.appendChild(u)}var y=f.meta,w=document.createElement("div");w.style.cssText="position:absolute;bottom:5px;left:0;right:0";var S="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),C=document.createElement("div");S+=";background-color:"+a.get("buttonColor"),S+=";color:"+a.get("buttonTextColor");var k=this;function A(){i.removeChild(o),k._dom=null}iH(T,"click",A),iH(C,"click",function(){if(h==null&&d!=null||h!=null&&d==null){A();return}var D;try{kt(h)?D=h(c,r.getOption()):D=uSt(u.value,y)}catch(P){throw A(),new Error("Data view format error "+P)}D&&r.dispatchAction({type:"changeDataView",newOption:D}),A()}),T.innerHTML=l[1],C.innerHTML=l[2],C.style.cssText=T.style.cssText=S,!a.get("readOnly")&&w.appendChild(C),w.appendChild(T),o.appendChild(s),o.appendChild(c),o.appendChild(w),c.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(Nu);function hSt(n,e){return Be(n,function(t,r){var i=e&&e[r];if(It(i)&&!Fe(i)){var a=It(t)&&!Fe(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=Dt(t,i),o&&delete t.name,t}else return t})}Wf({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];Z(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Me({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:hSt(r.data,a)})}}),e.mergeOption(Dt({series:t},n.newOption))});var oCe=Z,sCe=Kn();function fSt(n,e){var t=LK(n);oCe(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function pSt(n){var e=LK(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return oCe(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function gSt(n){sCe(n).snapshots=null}function mSt(n){return LK(n).length}function LK(n){var e=sCe(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var vSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){gSt(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(Nu);Wf({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var ySt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],jK=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=Yde(t,e);Z(bSt,function(o,s){(!r||!r.include||mn(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=JU[r.brushType](0,a,i);r.__rangeOffset={offset:Qde[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){Z(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&Z(a.coordSyses,function(o){var s=JU[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){Z(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=JU[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Qde[r.brushType](a.values,o.offset,wSt(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return Be(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:gke(i),isTargetByCursor:vke(i,e,r.coordSysModel),getLinearBrushOtherExtent:mke(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&mn(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=Yde(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<Kde.length;l++)if(Kde[l](i,o))return o}return!0},n}();function kG(n){return n[0]>n[1]&&n.reverse(),n}function Yde(n,e){return sC(n,e,{includeMainTypes:ySt})}var bSt={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=yt(),o={},s={};!t&&!r&&!i||(Z(t,function(l){var c=l.axis.grid.model;a.set(c.id,c),o[c.id]=!0}),Z(r,function(l){var c=l.axis.grid.model;a.set(c.id,c),s[c.id]=!0}),Z(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var c=l.coordinateSystem,u=[];Z(c.getCartesians(),function(d,h){(mn(t,d.getAxis("x").model)>=0||mn(r,d.getAxis("y").model)>=0)&&u.push(d)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Xde.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,e){Z(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:Xde.geo})})}},Kde=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Xde={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(gw(n)),e}},JU={lineX:Qt(Zde,0),lineY:Qt(Zde,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[kG([i[0],a[0]]),kG([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=Be(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function Zde(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=kG(Be([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var Qde={lineX:Qt(Jde,0),lineY:Qt(Jde,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return Be(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function Jde(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function wSt(n,e){var t=ehe(n),r=ehe(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function ehe(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var CG=Z,xSt=Dot("toolbox-dataZoom_"),SSt=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new uK(i.getZr()),this._brushController.on("brush",ut(this._onBrush,this)).mount()),ESt(t,r,this,a,i),TSt(t,r)},e.prototype.onclick=function(t,r,i){_St[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new jK(FK(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(c,u,d){if(d.type==="cartesian2d"){var h=c.brushType;h==="rect"?(s("x",d,u[0]),s("y",d,u[1])):s({lineX:"x",lineY:"y"}[h],d,u)}}),fSt(a,i),this._dispatchZoomAction(i);function s(c,u,d){var h=u.getAxis(c),f=h.model,m=l(c,f,a),v=m.findRepresentativeAxisProxy(f).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(d=ax(0,d.slice(),h.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),m&&(i[m.id]={dataZoomId:m.id,startValue:d[0],endValue:d[1]})}function l(c,u,d){var h;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var m=f.getAxisModel(c,u.componentIndex);m&&(h=f)}),h}},e.prototype._dispatchZoomAction=function(t){var r=[];CG(t,function(i,a){r.push(Nt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(Nu),_St={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(pSt(this.ecModel))}};function FK(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function TSt(n,e){n.setIconStatus("back",mSt(e)>1?"emphasis":"normal")}function ESt(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new jK(FK(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}ect("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=FK(r),o=sC(n,a);CG(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),CG(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var d=l.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:xSt+c+d};h[u]=d,i.push(h)}return i});function ASt(n){n.registerComponentModel(Xxt),n.registerComponentView(Qxt),T_("saveAsImage",eSt),T_("magicType",nSt),T_("dataView",dSt),T_("dataZoom",SSt),T_("restore",vSt),En(Kxt)}var kSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(On);function lCe(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function cCe(n){if(Mn.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var uCe=cCe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),CSt=cCe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function dCe(n,e){if(!n)return e;e=V1e(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function DSt(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var ISt=dCe(CSt,"transition"),$K=dCe(uCe,"transform"),MSt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Mn.transform3dSupported?"will-change:transform;":"");function PSt(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function NSt(n,e,t){if(!st(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=$w(e);var a=PSt(t),o=Math.max(Math.round(i)*1.5,6),s="",l=$K+":",c;mn(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=a==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=o+i,h=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),f=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-d)/2)*100)/100;s+=";"+a+":-"+f+"px";var m=e+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+m,"border-right:"+m,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function RSt(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=Mn.transformSupported?","+$K+r:",left"+r+",top"+r),ISt+":"+i}function the(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Mn.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Mn.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+$K+":"+o+";":[["top",0],["left",0],[uCe,o]]}function OSt(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=Wt(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var a=n.get("textShadowColor"),o=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return a&&o&&e.push("text-shadow:"+s+"px "+l+"px "+o+"px "+a),Z(["decoration","align"],function(c){var u=n.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function LSt(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=STe(n,"html"),h=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(RSt(i,t)),a&&r.push("background-color:"+a),Z(["width","color","radius"],function(f){var m="border-"+f,v=V1e(m),y=n.get(v);y!=null&&r.push(m+":"+y+(f==="color"?"":"px"))}),r.push(OSt(u)),d!=null&&r.push("padding:"+AT(d).join("px ")+"px"),r.join(";")+";"}function nhe(n,e,t,r,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&sat(n,o,t,r,i)}else{n[0]=r,n[1]=i;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var jSt=function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Mn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=t.appendTo,o=a&&(st(a)?document.querySelector(a):F1(a)?a:kt(a)&&a(e.getDom()));nhe(this._styleCoord,i,o,e.getWidth()/2,e.getHeight()/2),(o||e.getDom()).appendChild(r),this._api=e,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=i.handler,u=i.painter.getViewportRoot();ku(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=DSt(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=MSt+LSt(e,!this._firstShow,this._longHide)+the(a[0],a[1],!0)+("border-color:"+$w(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(st(a)&&r.get("trigger")==="item"&&!lCe(r)&&(s=NSt(r,i,a)),st(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Fe(e)||(e=[e]);for(var l=0;l<e.length;l++)F1(e[l])&&e[l].parentNode!==o&&o.appendChild(e[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(nhe(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=the(r[0],r[1]);Z(a,function(o){i[o[0]]=o[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Mn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},n}(),FSt=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),ihe(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var o=this;It(e)&&gr(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Qn({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:STe(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),Z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=rhe(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;ihe(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,o=kv(a.borderWidth||0),s=rhe(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ut(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function kv(n){return Math.max(0,n)}function rhe(n){var e=kv(n.shadowBlur||0),t=kv(n.shadowOffsetX||0),r=kv(n.shadowOffsetY||0);return{left:kv(e-t),right:kv(e+t),top:kv(e-r),bottom:kv(e+r)}}function ihe(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var $St=new Yn({shape:{x:-1,y:-1,width:2,height:2}}),BSt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Mn.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=Lot(i.get("renderMode"));this._tooltipContent=a==="richText"?new FSt(r):new jSt(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(Mn.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?IT(this,"_updatePosition",50,"fixRate"):VD(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");Kke("itemTooltip",this._api,ut(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||Mn.node||!i.getDom())){var o=ahe(a,i);this._ticket="";var s=a.dataByCoordSys,l=HSt(a,r,i);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var u=$St;u.x=a.x,u.y=a.y,u.update(),Ut(u).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:u},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var d=Xke(a,r),h=d.point[0],f=d.point[1];h!=null&&f!=null&&this._tryShow({offsetX:h,offsetY:f,target:d.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(ahe(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),d=tk([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){var s=Ut(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;Jb(i,function(u){if(Ut(u).dataIndex!=null)return l=u,!0;if(Ut(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,r):c?this._showComponentItemTooltip(t,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=ut(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=tk([r.tooltipOption],a),l=this._renderMode,c=[],u=fo("section",{blocks:[],noHeader:!0}),d=[],h=new F6;Z(t,function(S){Z(S.dataByAxis,function(T){var C=i.getComponent(T.axisDim+"Axis",T.axisIndex),k=T.value;if(!(!C||k==null)){var A=Wke(k,C.axis,i,T.seriesDataIndices,T.valueLabelOpt),D=fo("section",{header:A,noHeader:!Qd(A),sortBlocks:!0,blocks:[]});u.blocks.push(D),Z(T.seriesDataIndices,function(P){var N=i.getSeriesByIndex(P.seriesIndex),R=P.dataIndexInside,L=N.getDataParams(R);if(!(L.dataIndex<0)){L.axisDim=T.axisDim,L.axisIndex=T.axisIndex,L.axisType=T.axisType,L.axisId=T.axisId,L.axisValue=FY(C.axis,{value:k}),L.axisValueLabel=A,L.marker=h.makeTooltipMarker("item",$w(L.color),l);var B=Gse(N.formatTooltip(R,!0,null)),$=B.frag;if($){var G=tk([N],a).get("valueFormatter");D.blocks.push(G?Me({valueFormatter:G},$):$)}B.text&&d.push(B.text),c.push(L)}})}})}),u.blocks.reverse(),d.reverse();var f=r.position,m=s.get("order"),v=Zse(u,h,l,m,i.get("useUTC"),s.get("textStyle"));v&&d.unshift(v);var y=l==="richText"?`

`:"<br/>",w=d.join(y);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,w,c,Math.random()+"",o[0],o[1],f,null,h)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,o=Ut(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,d=o.dataType,h=c.getData(d),f=this._renderMode,m=t.positionDefault,v=tk([h.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,m?{position:m}:null),y=v.get("trigger");if(!(y!=null&&y!=="item")){var w=c.getDataParams(u,d),S=new F6;w.marker=S.makeTooltipMarker("item",$w(w.color),f);var T=Gse(c.formatTooltip(u,!1,d)),C=v.get("order"),k=v.get("valueFormatter"),A=T.frag,D=A?Zse(k?Me({valueFormatter:k},A):A,S,f,C,a.get("useUTC"),v.get("textStyle")):T.text,P="item_"+c.name+"_"+u;this._showOrMove(v,function(){this._showTooltipContent(v,D,w,P,t.offsetX,t.offsetY,t.position,t.target,S)}),i({type:"showTip",dataIndexInside:u,dataIndex:h.getRawIndex(u),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=this._renderMode==="html",o=Ut(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(st(l)){var u=l;l={content:u,formatter:u},c=!0}c&&a&&l.content&&(l=Nt(l),l.content=al(l.content));var d=[l],h=this._ecModel.getComponent(o.componentMainType,o.componentIndex);h&&d.push(h),d.push({formatter:l.content});var f=t.positionDefault,m=tk(d,this._tooltipModel,f?{position:f}:null),v=m.get("content"),y=Math.random()+"",w=new F6;this._showOrMove(m,function(){var S=Nt(m.get("formatterParams")||{});this._showTooltipContent(m,v,S,y,t.offsetX,t.offsetY,t.position,r,w)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,o,s,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var h=t.get("formatter");l=l||t.get("position");var f=r,m=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),v=m.color;if(h)if(st(h)){var y=t.ecModel.get("useUTC"),w=Fe(i)?i[0]:i,S=w&&w.axisType&&w.axisType.indexOf("time")>=0;f=h,S&&(f=nF(w.axisValue,f,y)),f=z1e(f,i,!0)}else if(kt(h)){var T=ut(function(C,k){C===this._ticket&&(d.setContent(k,u,t,v,l),this._updatePosition(t,l,o,s,d,i,c))},this);this._ticket=a,f=h(i,a,T)}else f=h;d.setContent(f,u,t,v,l),d.show(t,v),this._updatePosition(t,l,o,s,d,i,c)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||Fe(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Fe(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||t.get("position");var d=o.getSize(),h=t.get("align"),f=t.get("verticalAlign"),m=l&&l.getBoundingRect().clone();if(l&&m.applyTransform(l.transform),kt(r)&&(r=r([i,a],s,o.el,m,{viewSize:[c,u],contentSize:d.slice()})),Fe(r))i=tt(r[0],c),a=tt(r[1],u);else if(It(r)){var v=r;v.width=d[0],v.height=d[1];var y=qa(v,{width:c,height:u});i=y.x,a=y.y,h=null,f=null}else if(st(r)&&l){var w=zSt(r,m,d,t.get("borderWidth"));i=w[0],a=w[1]}else{var w=USt(i,a,o,c,u,h?null:20,f?null:20);i=w[0],a=w[1]}if(h&&(i-=ohe(h)?d[0]/2:h==="right"?d[0]:0),f&&(a-=ohe(f)?d[1]/2:f==="bottom"?d[1]:0),lCe(t)){var w=VSt(i,a,o,c,u);i=w[0],a=w[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&Z(i,function(s,l){var c=s.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];o=o&&c.length===d.length,o&&Z(c,function(h,f){var m=d[f]||{},v=h.seriesDataIndices||[],y=m.seriesDataIndices||[];o=o&&h.value===m.value&&h.axisType===m.axisType&&h.axisId===m.axisId&&v.length===y.length,o&&Z(v,function(w,S){var T=y[S];o=o&&w.seriesIndex===T.seriesIndex&&w.dataIndex===T.dataIndex}),a&&Z(h.seriesDataIndices,function(w){var S=w.seriesIndex,T=r[S],C=a[S];T&&C&&C.data!==T.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Mn.node||!r.getDom()||(VD(this,"_updatePosition"),this._tooltipContent.dispose(),_G("itemTooltip",r))},e.type="tooltip",e}(Mi);function tk(n,e,t){var r=e.ecModel,i;t?(i=new wr(t,r,r),i=new wr(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof wr&&(o=o.get("tooltip",!0)),st(o)&&(o={formatter:o}),o&&(i=new wr(o,i,r)))}return i}function ahe(n,e){return n.dispatchAction||ut(e.dispatchAction,e)}function USt(n,e,t,r,i,a,o){var s=t.getSize(),l=s[0],c=s[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),o!=null&&(e+c+o>i?e-=c+o:e+=o),[n,e]}function VSt(n,e,t,r,i){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,r)-o,e=Math.min(e+s,i)-s,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function zSt(n,e,t,r){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=e.width,u=e.height;switch(n){case"inside":s=e.x+c/2-i/2,l=e.y+u/2-a/2;break;case"top":s=e.x+c/2-i/2,l=e.y-a-o;break;case"bottom":s=e.x+c/2-i/2,l=e.y+u+o;break;case"left":s=e.x-i-o,l=e.y+u/2-a/2;break;case"right":s=e.x+c+o,l=e.y+u/2-a/2}return[s,l]}function ohe(n){return n==="center"||n==="middle"}function HSt(n,e,t){var r=Jq(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=XI(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=Ut(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function GSt(n){En(gM),n.registerComponentModel(kSt),n.registerComponentView(BSt),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ma),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ma)}var WSt=["rect","polygon","keep","clear"];function qSt(n,e){var t=Rr(n?n.brush:[]);if(t.length){var r=[];Z(t,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(r=r.concat(c))});var i=n&&n.toolbox;Fe(i)&&(i=i[0]),i||(i={feature:{}},n.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),YSt(s),e&&!s.length&&s.push.apply(s,WSt)}}function YSt(n){var e={};Z(n,function(t){e[t]=1}),n.length=0,Z(e,function(t,r){n.push(r)})}var she=Z;function lhe(n){if(n){for(var e in n)if(n.hasOwnProperty(e))return!0}}function DG(n,e,t){var r={};return she(e,function(a){var o=r[a]=i();she(n[a],function(s,l){if(uo.isValidType(l)){var c={type:l,visual:s};t&&t(c,a),o[l]=new uo(c),l==="opacity"&&(c=Nt(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new uo(c))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function hCe(n,e,t){var r;Z(t,function(i){e.hasOwnProperty(i)&&lhe(e[i])&&(r=!0)}),r&&Z(t,function(i){e.hasOwnProperty(i)&&lhe(e[i])?n[i]=Nt(e[i]):delete n[i]})}function KSt(n,e,t,r,i,a){var o={};Z(n,function(d){var h=uo.prepareVisualTypes(e[d]);o[d]=h});var s;function l(d){return CY(t,s,d)}function c(d,h){PTe(t,s,d,h)}t.each(u);function u(d,h){s=d;var f=t.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var m=r.call(i,d),v=e[m],y=o[m],w=0,S=y.length;w<S;w++){var T=y[w];v[T]&&v[T].applyVisual(d,l,c)}}}function XSt(n,e,t,r){var i={};return Z(n,function(a){var o=uo.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(k){return CY(s,d,k)}function u(k,A){PTe(s,d,k,A)}for(var d,h=s.getStore();(d=o.next())!=null;){var f=s.getRawDataItem(d);if(!(f&&f.visualMap===!1))for(var m=r!=null?h.get(l,d):d,v=t(m),y=e[v],w=i[v],S=0,T=w.length;S<T;S++){var C=w[S];y[C]&&y[C].applyVisual(m,c,u)}}}}}function ZSt(n){var e=n.brushType,t={point:function(r){return che[e].point(r,t,n)},rect:function(r){return che[e].rect(r,t,n)}};return t}var che={lineX:uhe(0),lineY:uhe(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&Rb(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var i=n.x,a=n.y,o=n.width,s=n.height,l=r[0];if(Rb(r,i,a)||Rb(r,i+o,a)||Rb(r,i,a+s)||Rb(r,i+o,a+s)||dn.create(n).contain(l[0],l[1])||Mk(i,a,i+o,a,r)||Mk(i,a,i,a+s,r)||Mk(i+o,a,i+o,a+s,r)||Mk(i,a+s,i+o,a+s,r))return!0}}};function uhe(n){var e=["x","y"],t=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[n];return nk(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[n]],r[e[n]]+r[t[n]]];return s[1]<s[0]&&s.reverse(),nk(s[0],o)||nk(s[1],o)||nk(o[0],s)||nk(o[1],s)}}}}function nk(n,e){return e[0]<=n&&n<=e[1]}var dhe=["inBrush","outOfBrush"],eV="__ecBrushSelect",IG="__ecInBrushSelectEvent";function fCe(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new jK(e.option,n);t.setInputRanges(e.areas,n)})}function QSt(n,e,t){var r=[],i,a;n.eachComponent({mainType:"brush"},function(o){t&&t.type==="takeGlobalCursor"&&o.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),fCe(n),n.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Nt(o.areas),selected:[]};r.push(l);var c=o.option,u=c.brushLink,d=[],h=[],f=[],m=!1;s||(i=c.throttleType,a=c.throttleDelay);var v=Be(o.areas,function(k){var A=n_t[k.brushType],D=Dt({boundingRect:A?A(k):void 0},k);return D.selectors=ZSt(D),D}),y=DG(o.option,dhe,function(k){k.mappingMethod="fixed"});Fe(u)&&Z(u,function(k){d[k]=1});function w(k){return u==="all"||!!d[k]}function S(k){return!!k.length}n.eachSeries(function(k,A){var D=f[A]=[];k.subType==="parallel"?T(k,A):C(k,A,D)});function T(k,A){var D=k.coordinateSystem;m=m||D.hasAxisBrushed(),w(A)&&D.eachActiveState(k.getData(),function(P,N){P==="active"&&(h[N]=1)})}function C(k,A,D){if(!(!k.brushSelector||t_t(o,A))&&(Z(v,function(N){o.brushTargetManager.controlSeries(N,k,n)&&D.push(N),m=m||S(D)}),w(A)&&S(D))){var P=k.getData();P.each(function(N){hhe(k,D,P,N)&&(h[N]=1)})}}n.eachSeries(function(k,A){var D={seriesId:k.id,seriesIndex:A,seriesName:k.name,dataIndex:[]};l.selected.push(D);var P=f[A],N=k.getData(),R=w(A)?function(L){return h[L]?(D.dataIndex.push(N.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return hhe(k,P,N,L)?(D.dataIndex.push(N.getRawIndex(L)),"inBrush"):"outOfBrush"};(w(A)?m:S(P))&&KSt(dhe,y,N,R)})}),JSt(e,i,a,r,t)}function JSt(n,e,t,r,i){if(i){var a=n.getZr();if(!a[IG]){a[eV]||(a[eV]=e_t);var o=IT(a,eV,t,e);o(n,r)}}}function e_t(n,e){if(!n.isDisposed()){var t=n.getZr();t[IG]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[IG]=!1}}function hhe(n,e,t,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(n.brushSelector(r,t,o.selectors,o))return!0}}function t_t(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&(Fe(t)?mn(t,e)<0:e!==t)}var n_t={rect:function(n){return fhe(n.range)},polygon:function(n){for(var e,t=n.range,r=0,i=t.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&fhe(e)}};function fhe(n){return new dn(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var r_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new uK(r.getZr())).on("brush",ut(this._onBrush,this)).mount()},e.prototype.render=function(t,r,i,a){this.model=t,this._updateController(t,r,i,a)},e.prototype.updateTransform=function(t,r,i,a){fCe(r),this._updateController(t,r,i,a)},e.prototype.updateVisual=function(t,r,i,a){this.updateTransform(t,r,i,a)},e.prototype.updateView=function(t,r,i,a){this._updateController(t,r,i,a)},e.prototype._updateController=function(t,r,i,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Nt(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Nt(i),$from:r})},e.type="brush",e}(Mi),i_t="#ddd",a_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&hCe(i,t,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:i_t},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=Be(t,function(r){return phe(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=phe(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(On);function phe(n,e){return sn({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new wr(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var o_t=["rect","polygon","lineX","lineY","keep","clear"],s_t=function(n){_e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,Z(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,i){this.render(t,r,i)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return Z(t.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(t,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(t){var r={show:!0,type:o_t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(Nu);function l_t(n){n.registerComponentView(r_t),n.registerComponentModel(a_t),n.registerPreprocessor(qSt),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,QSt),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},ma),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},ma),T_("brush",s_t)}var c_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(On),u_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),l=t.get("textAlign"),c=Wt(t.get("textBaseline"),t.get("textVerticalAlign")),u=new Qn({style:ri(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),h=t.get("subtext"),f=new Qn({style:ri(s,{text:h,fill:s.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),v=t.get("sublink"),y=t.get("triggerEvent",!0);u.silent=!m&&!y,f.silent=!v&&!y,m&&u.on("click",function(){_2(m,"_"+t.get("target"))}),v&&f.on("click",function(){_2(v,"_"+t.get("subtarget"))}),Ut(u).eventData=Ut(f).eventData=y?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(u),h&&a.add(f);var w=a.getBoundingRect(),S=t.getBoxLayoutParams();S.width=w.width,S.height=w.height;var T=qa(S,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?T.x+=T.width:l==="center"&&(T.x+=T.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?T.y+=T.height:c==="middle"&&(T.y+=T.height/2),c=c||"top"),a.x=T.x,a.y=T.y,a.markRedraw();var C={align:l,verticalAlign:c};u.setStyle(C),f.setStyle(C),w=a.getBoundingRect();var k=T.margin,A=t.getItemStyle(["color","opacity"]);A.fill=t.get("backgroundColor");var D=new Yn({shape:{x:w.x-k[3],y:w.y-k[0],width:w.width+k[1]+k[3],height:w.height+k[0]+k[2],r:t.get("borderRadius")},style:A,subPixelOptimize:!0,silent:!0});a.add(D)}},e.type="title",e}(Mi);function d_t(n){n.registerComponentModel(c_t),n.registerComponentView(u_t)}var ghe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],i=t.axisType,a=this._names=[],o;i==="category"?(o=[],Z(r,function(c,u){var d=Ha(xT(c),""),h;It(c)?(h=Nt(c),h.value=u):h=u,o.push(h),a.push(d)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new hl([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(On),pCe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=Cy(ghe.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(ghe);Ia(pCe,cF.prototype);var h_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(Mi),f_t=function(n){_e(e,n);function e(t,r,i,a){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(fh),tV=Math.PI,mhe=Kn(),p_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return fo("nameValue",{noName:!0,value:u})},Z(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](a,o,l,t)},this),this._renderAxisLabel(a,s,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var i=t.get(["label","position"]),a=t.get("orient"),o=m_t(t,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":st(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:tV/2},d=a==="vertical"?o.height:o.width,h=t.getModel("controlStyle"),f=h.get("show",!0),m=f?h.get("itemSize"):0,v=f?h.get("itemGap"):0,y=m+v,w=t.get(["label","rotate"])||0;w=w*tV/180;var S,T,C,k=h.get("position",!0),A=f&&h.get("showPlayBtn",!0),D=f&&h.get("showPrevBtn",!0),P=f&&h.get("showNextBtn",!0),N=0,R=d;k==="left"||k==="bottom"?(A&&(S=[0,0],N+=y),D&&(T=[N,0],N+=y),P&&(C=[R-m,0],R-=y)):(A&&(S=[R-m,0],R-=y),D&&(T=[0,0],N+=y),P&&(C=[R-m,0],R-=y));var L=[N,R];return t.get("inverse")&&L.reverse(),{viewRect:o,mainLength:d,orient:a,rotation:u[a],labelRotation:w,labelPosOpt:s,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[a],playPosition:S,prevBtnPosition:T,nextBtnPosition:C,axisExtent:L,controlSize:m,controlGap:v}},e.prototype._position=function(t,r){var i=this._mainGroup,a=this._labelGroup,o=t.viewRect;if(t.orient==="vertical"){var s=Bc(),l=o.x,c=o.y+o.height;Lf(s,s,[-l,-c]),Qw(s,s,-tV/2),Lf(s,s,[l,c]),o=o.clone(),o.applyTransform(s)}var u=S(o),d=S(i.getBoundingRect()),h=S(a.getBoundingRect()),f=[i.x,i.y],m=[a.x,a.y];m[0]=f[0]=u[0][0];var v=t.labelPosOpt;if(v==null||st(v)){var y=v==="+"?0:1;T(f,d,u,1,y),T(m,h,u,1,1-y)}else{var y=v>=0?0:1;T(f,d,u,1,y),m[1]=f[1]+v}i.setPosition(f),a.setPosition(m),i.rotation=a.rotation=t.rotation,w(i),w(a);function w(C){C.originX=u[0][0]-C.x,C.originY=u[1][0]-C.y}function S(C){return[[C.x,C.x+C.width],[C.y,C.y+C.height]]}function T(C,k,A,D,P){C[D]+=A[D][P]-k[D][P]}},e.prototype._createAxis=function(t,r){var i=r.getData(),a=r.get("axisType"),o=g_t(r,a);o.getTicks=function(){return i.mapArray(["value"],function(c){return{value:c}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new f_t("value",o,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new jt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new so({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Me({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new so({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Dt({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],Z(l,function(c){var u=i.dataToCoord(c.value),d=s.getItemModel(c.value),h=d.getModel("itemStyle"),f=d.getModel(["emphasis","itemStyle"]),m=d.getModel(["progress","itemStyle"]),v={x:u,y:0,onclick:ut(o._changeTimeline,o,c.value)},y=vhe(d,h,r,v);y.ensureState("emphasis").style=f.getItemStyle(),y.ensureState("progress").style=m.getItemStyle(),pw(y);var w=Ut(y);d.get("tooltip")?(w.dataIndex=c.value,w.dataModel=a):w.dataIndex=w.dataModel=null,o._tickSymbols.push(y)})},e.prototype._renderAxisLabel=function(t,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),c=i.getViewLabels();this._tickLabels=[],Z(c,function(u){var d=u.tickValue,h=l.getItemModel(d),f=h.getModel("label"),m=h.getModel(["emphasis","label"]),v=h.getModel(["progress","label"]),y=i.dataToCoord(u.tickValue),w=new Qn({x:y,y:0,rotation:t.labelRotation-t.rotation,onclick:ut(o._changeTimeline,o,d),silent:!1,style:ri(f,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});w.ensureState("emphasis").style=ri(m),w.ensureState("progress").style=ri(v),r.add(w),pw(w),mhe(w).dataIndex=d,o._tickLabels.push(w)})}},e.prototype._renderControl=function(t,r,i,a){var o=t.controlSize,s=t.rotation,l=a.getModel("controlStyle").getItemStyle(),c=a.getModel(["emphasis","controlStyle"]).getItemStyle(),u=a.getPlayState(),d=a.get("inverse",!0);h(t.nextBtnPosition,"next",ut(this._changeTimeline,this,d?"-":"+")),h(t.prevBtnPosition,"prev",ut(this._changeTimeline,this,d?"+":"-")),h(t.playPosition,u?"stop":"play",ut(this._handlePlayClick,this,!u),!0);function h(f,m,v,y){if(f){var w=lh(Wt(a.get(["controlStyle",m+"BtnSize"]),o),o),S=[0,-w/2,w,w],T=v_t(a,m+"Icon",S,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:y?-s:0,rectHover:!0,style:l,onclick:v});T.ensureState("emphasis").style=c,r.add(T),pw(T)}}},e.prototype._renderCurrentPointer=function(t,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(d){d.draggable=!0,d.drift=ut(c._handlePointerDrag,c),d.ondragend=ut(c._handlePointerDragend,c),yhe(d,c._progressLine,s,i,a,!0)},onUpdate:function(d){yhe(d,c._progressLine,s,i,a)}};this._currentPointer=vhe(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],a=this._axis,o=Bu(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return rh(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var c=o.dataToCoord(s),u=Math.abs(c-t);u<i&&(i=u,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",mhe(i[a]).dataIndex<=t)},e.type="timeline.slider",e}(h_t);function g_t(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new gF({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new LY({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new Lg}}function m_t(n,e){return qa(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},n.get("padding"))}function v_t(n,e,t,r){var i=r.style,a=nM(n.get(["controlStyle",e]),r||{},new dn(t[0],t[1],t[2],t[3]));return i&&a.setStyle(i),a}function vhe(n,e,t,r,i,a){var o=e.get("color");if(i)i.setColor(o),t.add(i),a&&a.onUpdate(i);else{var s=n.get("symbol");i=Da(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),t.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=sn({rectHover:!0,z2:100},r,!0);var c=MT(n.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var u=tx(n.get("symbolOffset"),c);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var d=n.get("symbolRotate");return r.rotation=(d||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function yhe(n,e,t,r,i,a){if(!n.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",t));if(a||!o.get("animation",!0))n.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function y_t(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var i=t.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Dt({currentIndex:i.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function b_t(n){var e=n&&n.timeline;Fe(e)||(e=e?[e]:[]),Z(e,function(t){t&&w_t(t)})}function w_t(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),bhe(n),jb(n,"controlPosition")){var r=n.controlStyle||(n.controlStyle={});jb(r,"position")||(r.position=n.controlPosition),r.position==="none"&&!jb(r,"show")&&(r.show=!1,delete r.position),delete n.controlPosition}Z(n.data||[],function(i){It(i)&&!Fe(i)&&(!jb(i,"value")&&jb(i,"name")&&(i.value=i.name),bhe(i))})}function bhe(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=n.label||n.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};Z(r,function(o,s){!a[s]&&!jb(i,s)&&(i[s]=o)}),t.label&&!jb(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function jb(n,e){return n.hasOwnProperty(e)}function x_t(n){n.registerComponentModel(pCe),n.registerComponentView(p_t),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),y_t(n),n.registerPreprocessor(b_t)}function BK(n,e){if(!n)return!1;for(var t=Fe(n)?n:[n],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function BN(n){Ow(n,"label",["show"])}var UN=Kn(),Fg=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(Mn.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),c=UN(s)[o];if(!l||!l.data){UN(s)[o]=null;return}c?c._mergeOption(l,r,!0):(a&&BN(l),Z(l.data,function(u){u instanceof Array?(BN(u[0]),BN(u[1])):BN(u)}),c=this.createMarkerModelFromSeries(l,this,r),Me(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),UN(s)[o]=c},this)},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),o=this.getRawValue(t),s=a.getName(t);return fo("section",{header:this.name,blocks:[fo("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=cF.prototype.getDataParams.call(this,t,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(t,r){return UN(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(On);Ia(Fg,cF.prototype);var S_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Fg);function MG(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function __t(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function VN(n,e,t,r,i,a){var o=[],s=fy(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,c=UK(e,l,n),u=e.indicesOfNearest(l,c)[0];o[i]=e.get(t,u),o[a]=e.get(l,u);var d=e.get(r,u),h=wf(e.get(r,u));return h=Math.min(h,20),h>=0&&(o[a]=+o[a].toFixed(h)),[o,d]}var nV={min:Qt(VN,"min"),max:Qt(VN,"max"),average:Qt(VN,"average"),median:Qt(VN,"median")};function nI(n,e){if(e){var t=n.getData(),r=n.coordinateSystem,i=r&&r.dimensions;if(!__t(e)&&!Fe(e.coord)&&Fe(i)){var a=gCe(e,t,r,n);if(e=Nt(e),e.type&&nV[e.type]&&a.baseAxis&&a.valueAxis){var o=mn(i,a.baseAxis.dim),s=mn(i,a.valueAxis.dim),l=nV[e.type](t,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Fe(i))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)nV[c[u]]&&(c[u]=UK(t,t.mapDimension(i[u]),c[u]));return e}}function gCe(n,e,t,r){var i={};return n.valueIndex!=null||n.valueDim!=null?(i.valueDataDim=n.valueIndex!=null?e.getDimension(n.valueIndex):n.valueDim,i.valueAxis=t.getAxis(T_t(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function T_t(n,e){var t=n.getData().getDimensionInfo(e);return t&&t.coordDim}function rI(n,e){return n&&n.containData&&e.coord&&!MG(e)?n.containData(e.coord):!0}function E_t(n,e,t){return n&&n.containZone&&e.coord&&t.coord&&!MG(e)&&!MG(t)?n.containZone(e.coord,t.coord):!0}function mCe(n,e){return n?function(t,r,i,a){var o=a<2?t.coord&&t.coord[a]:t.value;return Jv(o,e[a])}:function(t,r,i,a){return Jv(t.value,e[a])}}function UK(n,e,t){if(t==="average"){var r=0,i=0;return n.each(e,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return t==="median"?n.getMedian(e):n.getDataExtent(e)[t==="max"?1:0]}var rV=Kn(),VK=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=yt()},e.prototype.render=function(t,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){rV(s).keep=!1}),r.eachSeries(function(s){var l=Fg.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!rV(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(t){rV(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;Z(t,function(a){var o=Fg.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?o1e(l):oY(l))})}})},e.type="marker",e}(Mi);function whe(n,e,t){var r=e.coordinateSystem;n.each(function(i){var a=n.getItemModel(i),o,s=tt(a.get("x"),t.getWidth()),l=tt(a.get("y"),t.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(n.getValues(n.dimensions,i));else if(r){var c=n.get(r.dimensions[0],i),u=n.get(r.dimensions[1],i);o=r.dataToPoint([c,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),n.setItemLayout(i,o)})}var A_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markPoint");o&&(whe(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new lM),d=k_t(o,t,r);r.setData(d),whe(r.getData(),t,a),d.each(function(h){var f=d.getItemModel(h),m=f.getShallow("symbol"),v=f.getShallow("symbolSize"),y=f.getShallow("symbolRotate"),w=f.getShallow("symbolOffset"),S=f.getShallow("symbolKeepAspect");if(kt(m)||kt(v)||kt(y)||kt(w)){var T=r.getRawValue(h),C=r.getDataParams(h);kt(m)&&(m=m(T,C)),kt(v)&&(v=v(T,C)),kt(y)&&(y=y(T,C)),kt(w)&&(w=w(T,C))}var k=f.getModel("itemStyle").getItemStyle(),A=iM(l,"color");k.fill||(k.fill=A),d.setItemVisual(h,{symbol:m,symbolSize:v,symbolRotate:y,symbolOffset:w,symbolKeepAspect:S,style:k})}),u.updateData(d),this.group.add(u.group),d.eachItemGraphicEl(function(h){h.traverse(function(f){Ut(f).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e}(VK);function k_t(n,e,t){var r;n?r=Be(n&&n.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return Me(Me({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new hl(r,t),a=Be(t.get("data"),Qt(nI,e));n&&(a=vr(a,Qt(rI,n)));var o=mCe(!!n,r);return i.initData(a,null,o),i}function C_t(n){n.registerComponentModel(S_t),n.registerComponentView(A_t),n.registerPreprocessor(function(e){BK(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var D_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Fg),zN=Kn(),I_t=function(n,e,t,r){var i=n.getData(),a;if(Fe(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Io(r.yAxis,r.xAxis);else{var c=gCe(r,i,e,n);s=c.valueAxis;var u=lEe(i,c.valueDataDim);l=UK(i,u,o)}var d=s.dim==="x"?0:1,h=1-d,f=Nt(r),m={coord:[]};f.type=null,f.coord=[],f.coord[h]=-1/0,m.coord[h]=1/0;var v=t.get("precision");v>=0&&rr(l)&&(l=+l.toFixed(Math.min(v,20))),f.coord[d]=m.coord[d]=l,a=[f,m,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var y=[nI(n,a[0]),nI(n,a[1]),Me({},a[2])];return y[2].type=y[2].type||null,sn(y[2],y[0]),sn(y[2],y[1]),y};function Y2(n){return!isNaN(n)&&!isFinite(n)}function xhe(n,e,t,r){var i=1-n,a=r.dimensions[n];return Y2(e[i])&&Y2(t[i])&&e[n]===t[n]&&r.getAxis(a).containData(e[n])}function M_t(n,e){if(n.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(xhe(1,t,r,n)||xhe(0,t,r,n)))return!0}return rI(n,e[0])&&rI(n,e[1])}function iV(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=tt(o.get("x"),i.getWidth()),c=tt(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition)s=r.getMarkerPosition(n.getValues(n.dimensions,e));else{var u=a.dimensions,d=n.get(u[0],e),h=n.get(u[1],e);s=a.dataToPoint([d,h])}if(rx(a,"cartesian2d")){var f=a.getAxis("x"),m=a.getAxis("y"),u=a.dimensions;Y2(n.get(u[0],e))?s[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):Y2(n.get(u[1],e))&&(s[1]=m.toGlobalCoord(m.getExtent()[t?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}n.setItemLayout(e,s)}var P_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=zN(o).from,c=zN(o).to;l.each(function(u){iV(l,u,!0,a,i),iV(c,u,!1,a,i)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new cK);this.group.add(u.group);var d=N_t(o,t,r),h=d.from,f=d.to,m=d.line;zN(r).from=h,zN(r).to=f,r.setData(m);var v=r.get("symbol"),y=r.get("symbolSize"),w=r.get("symbolRotate"),S=r.get("symbolOffset");Fe(v)||(v=[v,v]),Fe(y)||(y=[y,y]),Fe(w)||(w=[w,w]),Fe(S)||(S=[S,S]),d.from.each(function(C){T(h,C,!0),T(f,C,!1)}),m.each(function(C){var k=m.getItemModel(C).getModel("lineStyle").getLineStyle();m.setItemLayout(C,[h.getItemLayout(C),f.getItemLayout(C)]),k.stroke==null&&(k.stroke=h.getItemVisual(C,"style").fill),m.setItemVisual(C,{fromSymbolKeepAspect:h.getItemVisual(C,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(C,"symbolOffset"),fromSymbolRotate:h.getItemVisual(C,"symbolRotate"),fromSymbolSize:h.getItemVisual(C,"symbolSize"),fromSymbol:h.getItemVisual(C,"symbol"),toSymbolKeepAspect:f.getItemVisual(C,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(C,"symbolOffset"),toSymbolRotate:f.getItemVisual(C,"symbolRotate"),toSymbolSize:f.getItemVisual(C,"symbolSize"),toSymbol:f.getItemVisual(C,"symbol"),style:k})}),u.updateData(m),d.line.eachItemGraphicEl(function(C){Ut(C).dataModel=r,C.traverse(function(k){Ut(k).dataModel=r})});function T(C,k,A){var D=C.getItemModel(k);iV(C,k,A,t,a);var P=D.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=iM(l,"color")),C.setItemVisual(k,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:Wt(D.get("symbolOffset",!0),S[A?0:1]),symbolRotate:Wt(D.get("symbolRotate",!0),w[A?0:1]),symbolSize:Wt(D.get("symbolSize"),y[A?0:1]),symbol:Wt(D.get("symbol",!0),v[A?0:1]),style:P})}this.markKeep(u),u.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e}(VK);function N_t(n,e,t){var r;n?r=Be(n&&n.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return Me(Me({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new hl(r,t),a=new hl(r,t),o=new hl([],t),s=Be(t.get("data"),Qt(I_t,e,n,t));n&&(s=vr(s,Qt(M_t,n)));var l=mCe(!!n,r);return i.initData(Be(s,function(c){return c[0]}),null,l),a.initData(Be(s,function(c){return c[1]}),null,l),o.initData(Be(s,function(c){return c[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function R_t(n){n.registerComponentModel(D_t),n.registerComponentView(P_t),n.registerPreprocessor(function(e){BK(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var O_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Fg),HN=Kn(),L_t=function(n,e,t,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=nI(n,i),s=nI(n,a),l=o.coord,c=s.coord;l[0]=Io(l[0],-1/0),l[1]=Io(l[1],-1/0),c[0]=Io(c[0],1/0),c[1]=Io(c[1],1/0);var u=Vq([{},o,s]);return u.coord=[o.coord,s.coord],u.x0=o.x,u.y0=o.y,u.x1=s.x,u.y1=s.y,u}};function K2(n){return!isNaN(n)&&!isFinite(n)}function She(n,e,t,r){var i=1-n;return K2(e[i])&&K2(t[i])}function j_t(n,e){var t=e.coord[0],r=e.coord[1],i={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return rx(n,"cartesian2d")?t&&r&&(She(1,t,r)||She(0,t,r))?!0:E_t(n,i,a):rI(n,i)||rI(n,a)}function _he(n,e,t,r,i){var a=r.coordinateSystem,o=n.getItemModel(e),s,l=tt(o.get(t[0]),i.getWidth()),c=tt(o.get(t[1]),i.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition){var u=n.getValues(["x0","y0"],e),d=n.getValues(["x1","y1"],e),h=a.clampData(u),f=a.clampData(d),m=[];t[0]==="x0"?m[0]=h[0]>f[0]?d[0]:u[0]:m[0]=h[0]>f[0]?u[0]:d[0],t[1]==="y0"?m[1]=h[1]>f[1]?d[1]:u[1]:m[1]=h[1]>f[1]?u[1]:d[1],s=r.getMarkerPosition(m,t,!0)}else{var v=n.get(t[0],e),y=n.get(t[1],e),w=[v,y];a.clampData&&a.clampData(w,w),s=a.dataToPoint(w,!0)}if(rx(a,"cartesian2d")){var S=a.getAxis("x"),T=a.getAxis("y"),v=n.get(t[0],e),y=n.get(t[1],e);K2(v)?s[0]=S.toGlobalCoord(S.getExtent()[t[0]==="x0"?0:1]):K2(y)&&(s[1]=T.toGlobalCoord(T.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var The=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],F_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var o=Fg.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var c=Be(The,function(d){return _he(s,l,d,a,i)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},e.prototype.renderSeries=function(t,r,i,a){var o=t.coordinateSystem,s=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new jt});this.group.add(u.group),this.markKeep(u);var d=$_t(o,t,r);r.setData(d),d.each(function(h){var f=Be(The,function(P){return _he(d,h,P,t,a)}),m=o.getAxis("x").scale,v=o.getAxis("y").scale,y=m.getExtent(),w=v.getExtent(),S=[m.parse(d.get("x0",h)),m.parse(d.get("x1",h))],T=[v.parse(d.get("y0",h)),v.parse(d.get("y1",h))];Bu(S),Bu(T);var C=!(y[0]>S[1]||y[1]<S[0]||w[0]>T[1]||w[1]<T[0]),k=!C;d.setItemLayout(h,{points:f,allClipped:k});var A=d.getItemModel(h).getModel("itemStyle").getItemStyle(),D=iM(l,"color");A.fill||(A.fill=D,st(A.fill)&&(A.fill=d2(A.fill,.4))),A.stroke||(A.stroke=D),d.setItemVisual(h,"style",A)}),d.diff(HN(u).data).add(function(h){var f=d.getItemLayout(h);if(!f.allClipped){var m=new vl({shape:{points:f.points}});d.setItemGraphicEl(h,m),u.group.add(m)}}).update(function(h,f){var m=HN(u).data.getItemGraphicEl(f),v=d.getItemLayout(h);v.allClipped?m&&u.group.remove(m):(m?ar(m,{shape:{points:v.points}},r,h):m=new vl({shape:{points:v.points}}),d.setItemGraphicEl(h,m),u.group.add(m))}).remove(function(h){var f=HN(u).data.getItemGraphicEl(h);u.group.remove(f)}).execute(),d.eachItemGraphicEl(function(h,f){var m=d.getItemModel(f),v=d.getItemVisual(f,"style");h.useStyle(d.getItemVisual(f,"style")),ts(h,ho(m),{labelFetcher:r,labelDataIndex:f,defaultText:d.getName(f)||"",inheritColor:st(v.fill)?d2(v.fill,1):"#000"}),es(h,m),Bi(h,null,null,m.get(["emphasis","disabled"])),Ut(h).dataModel=r}),HN(u).data=d,u.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e}(VK);function $_t(n,e,t){var r,i,a=["x0","y0","x1","y1"];if(n){var o=Be(n&&n.dimensions,function(c){var u=e.getData(),d=u.getDimensionInfo(u.mapDimension(c))||{};return Me(Me({},d),{name:c,ordinalMeta:null})});i=Be(a,function(c,u){return{name:c,type:o[u%2].type}}),r=new hl(i,t)}else i=[{name:"value",type:"float"}],r=new hl(i,t);var s=Be(t.get("data"),Qt(L_t,e,n,t));n&&(s=vr(s,Qt(j_t,n)));var l=n?function(c,u,d,h){var f=c.coord[Math.floor(h/2)][h%2];return Jv(f,i[h])}:function(c,u,d,h){return Jv(c.value,i[h])};return r.initData(s,null,l),r.hasItemOption=!0,r}function B_t(n){n.registerComponentModel(O_t),n.registerComponentView(F_t),n.registerPreprocessor(function(e){BK(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var U_t=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},PG=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Fe(r)&&Z(r,function(a,o){st(a)&&(a={type:a}),r[o]=sn(a,U_t(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var c=l.name;i.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,h=d.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(h)),h.length?r=r.concat(h):u=!0}else u=!0;u&&Qq(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=yt(),s=Be(a,function(l){return(st(l)||rr(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new wr(l,this,this.ecModel))},this);this._data=vr(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;Z(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;Z(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&mn(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(On),s_=Qt,NG=Z,GN=jt,vCe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new GN),this.group.add(this._selectorGroup=new GN),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,l,s,c);var u=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),f=qa(u,d,h),m=this.layoutInner(t,o,f,a,l,c),v=qa(Dt({width:m.width,height:m.height},u),d,h);this.group.x=v.x-m.x,this.group.y=v.y-m.y,this.group.markRedraw(),this.group.add(this._backgroundEl=aCe(m,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this.getContentGroup(),u=yt(),d=r.get("selectedMode"),h=[];i.eachRawSeries(function(f){!f.get("legendHoverLink")&&h.push(f.id)}),NG(r.getData(),function(f,m){var v=f.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var y=new GN;y.newline=!0,c.add(y);return}var w=i.getSeriesByName(v)[0];if(!u.get(v))if(w){var S=w.getData(),T=S.getVisual("legendLineStyle")||{},C=S.getVisual("legendIcon"),k=S.getVisual("style"),A=this._createItem(w,v,m,f,r,t,T,k,C,d,a);A.on("click",s_(Ehe,v,null,a,h)).on("mouseover",s_(RG,w.name,null,a,h)).on("mouseout",s_(OG,w.name,null,a,h)),i.ssr&&A.eachChild(function(D){var P=Ut(D);P.seriesIndex=w.seriesIndex,P.dataIndex=m,P.ssrType="legend"}),u.set(v,!0)}else i.eachRawSeries(function(D){if(!u.get(v)&&D.legendVisualProvider){var P=D.legendVisualProvider;if(!P.containName(v))return;var N=P.indexOfName(v),R=P.getItemVisual(N,"style"),L=P.getItemVisual(N,"legendIcon"),B=Uc(R.fill);B&&B[3]===0&&(B[3]=.2,R=Me(Me({},R),{fill:bg(B,"rgba")}));var $=this._createItem(D,v,m,f,r,t,{},R,L,d,a);$.on("click",s_(Ehe,null,v,a,h)).on("mouseover",s_(RG,null,v,a,h)).on("mouseout",s_(OG,null,v,a,h)),i.ssr&&$.eachChild(function(G){var W=Ut(G);W.seriesIndex=D.seriesIndex,W.dataIndex=m,W.ssrType="legend"}),u.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(t,r,i,a,o){var s=this.getSelectorGroup();NG(t,function(c){var u=c.type,d=new Qn({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(d);var h=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);ts(d,{normal:h,emphasis:f},{defaultText:c.title}),pw(d)})},e.prototype._createItem=function(t,r,i,a,o,s,l,c,u,d,h){var f=t.visualDrawType,m=o.get("itemWidth"),v=o.get("itemHeight"),y=o.isSelected(r),w=a.get("symbolRotate"),S=a.get("symbolKeepAspect"),T=a.get("icon");u=T||u||"roundRect";var C=V_t(u,a,l,c,f,y,h),k=new GN,A=a.getModel("textStyle");if(kt(t.getLegendIcon)&&(!T||T==="inherit"))k.add(t.getLegendIcon({itemWidth:m,itemHeight:v,icon:u,iconRotate:w,itemStyle:C.itemStyle,lineStyle:C.lineStyle,symbolKeepAspect:S}));else{var D=T==="inherit"&&t.getData().getVisual("symbol")?w==="inherit"?t.getData().getVisual("symbolRotate"):w:0;k.add(z_t({itemWidth:m,itemHeight:v,icon:u,iconRotate:D,itemStyle:C.itemStyle,symbolKeepAspect:S}))}var P=s==="left"?m+5:-5,N=s,R=o.get("formatter"),L=r;st(R)&&R?L=R.replace("{name}",r??""):kt(R)&&(L=R(r));var B=y?A.getTextColor():a.get("inactiveColor");k.add(new Qn({style:ri(A,{text:L,x:P,y:v/2,fill:B,align:N,verticalAlign:"middle"},{inheritColor:B})}));var $=new Yn({shape:k.getBoundingRect(),style:{fill:"transparent"}}),G=a.getModel("tooltip");return G.get("show")&&Jw({el:$,componentModel:o,itemName:r,itemTooltipOption:G.option}),k.add($),k.eachChild(function(W){W.silent=!0}),$.silent=!d,this.getContentGroup().add(k),pw(k),k.__legendDataIndex=i,k},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();mw(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){mw("horizontal",c,t.get("selectorItemGap",!0));var h=c.getBoundingRect(),f=[-h.x,-h.y],m=t.get("selectorButtonGap",!0),v=t.getOrient().index,y=v===0?"width":"height",w=v===0?"height":"width",S=v===0?"y":"x";s==="end"?f[v]+=u[y]+m:d[v]+=h[y]+m,f[1-v]+=u[w]/2-h[w]/2,c.x=f[0],c.y=f[1],l.x=d[0],l.y=d[1];var T={x:0,y:0};return T[y]=u[y]+m+h[y],T[w]=Math.max(u[w],h[w]),T[S]=Math.min(0,h[S]+f[1-v]),T}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Mi);function V_t(n,e,t,r,i,a,o){function s(y,w){y.lineWidth==="auto"&&(y.lineWidth=w.lineWidth>0?2:0),NG(y,function(S,T){y[T]==="inherit"&&(y[T]=w[T])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?r.decal:V1(d,o),c.fill==="inherit"&&(c.fill=r[i]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(i==="fill"?r:t).opacity),s(c,r);var h=e.getModel("lineStyle"),f=h.getLineStyle();if(s(f,t),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),v=c[u];c.lineWidth=m==="auto"?r.lineWidth>0&&v?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),f.stroke=h.get("inactiveColor"),f.lineWidth=h.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function z_t(n){var e=n.icon||"roundRect",t=Da(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function Ehe(n,e,t,r){OG(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),RG(n,e,t,r)}function yCe(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function RG(n,e,t,r){yCe(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function OG(n,e,t,r){yCe(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function H_t(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function rk(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},a=[];t.eachComponent({mainType:"legend",query:e},function(s){r?s[n]():s[n](e.name),Ahe(s,i),a.push(s.componentIndex)});var o={};return t.eachComponent("legend",function(s){Z(i,function(l,c){s[l?"select":"unSelect"](c)}),Ahe(s,o)}),r?{selected:o,legendIndex:a}:{name:e.name,selected:o}}function Ahe(n,e){var t=e||{};return Z(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=n.isSelected(i);ft(t,i)?t[i]=t[i]&&a:t[i]=a}}),t}function G_t(n){n.registerAction("legendToggleSelect","legendselectchanged",Qt(rk,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Qt(rk,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Qt(rk,"inverseSelect")),n.registerAction("legendSelect","legendselected",Qt(rk,"select")),n.registerAction("legendUnSelect","legendunselected",Qt(rk,"unSelect"))}function bCe(n){n.registerComponentModel(PG),n.registerComponentView(vCe),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,H_t),n.registerSubTypeDefaulter("legend",function(){return"plain"}),G_t(n)}var W_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=kT(t);n.prototype.init.call(this,t,r,i),khe(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),khe(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Cy(PG.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(PG);function khe(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,hy(e,t,{type:"box",ignoreSize:!!i})}var Che=jt,aV=["width","height"],oV=["x","y"],q_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Che),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Che)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,s,l){var c=this;n.prototype.renderInner.call(this,t,r,i,a,o,s,l);var u=this._controllerGroup,d=r.get("pageIconSize",!0),h=Fe(d)?d:[d,d];m("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new Qn({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),m("pageNext",1);function m(v,y){var w=v+"DataIndex",S=nM(r.get("pageIcons",!0)[r.getOrient().name][y],{onclick:ut(c._pageGo,c,w,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});S.name=v,u.add(S)}},e.prototype.layoutInner=function(t,r,i,a,o,s){var l=this.getSelectorGroup(),c=t.getOrient().index,u=aV[c],d=oV[c],h=aV[1-c],f=oV[1-c];o&&mw("horizontal",l,t.get("selectorItemGap",!0));var m=t.get("selectorButtonGap",!0),v=l.getBoundingRect(),y=[-v.x,-v.y],w=Nt(i);o&&(w[u]=i[u]-v[u]-m);var S=this._layoutContentAndController(t,a,w,c,u,h,f,d);if(o){if(s==="end")y[c]+=S[u]+m;else{var T=v[u]+m;y[c]-=T,S[d]-=T}S[u]+=v[u]+m,y[1-c]+=S[f]+S[h]/2-v[h]/2,S[h]=Math.max(S[h],v[h]),S[f]=Math.min(S[f],v[f]+y[1-c]),l.x=y[0],l.y=y[1],l.markRedraw()}return S},e.prototype._layoutContentAndController=function(t,r,i,a,o,s,l,c){var u=this.getContentGroup(),d=this._containerGroup,h=this._controllerGroup;mw(t.get("orient"),u,t.get("itemGap"),a?i.width:null,a?null:i.height),mw("horizontal",h,t.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),m=h.getBoundingRect(),v=this._showController=f[o]>i[o],y=[-f.x,-f.y];r||(y[a]=u[c]);var w=[0,0],S=[-m.x,-m.y],T=Wt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(v){var C=t.get("pageButtonPosition",!0);C==="end"?S[a]+=i[o]-m[o]:w[a]+=m[o]+T}S[1-a]+=f[s]/2-m[s]/2,u.setPosition(y),d.setPosition(w),h.setPosition(S);var k={x:0,y:0};if(k[o]=v?i[o]:f[o],k[s]=Math.max(f[s],m[s]),k[l]=Math.min(0,m[l]+S[1-a]),d.__rectSize=i[o],v){var A={x:0,y:0};A[o]=Math.max(i[o]-m[o]-T,0),A[s]=k[s],d.setClipPath(new Yn({shape:A})),d.__rectSize=A[o]}else h.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(t);return D.pageIndex!=null&&ar(u,{x:D.contentPosition[0],y:D.contentPosition[1]},v?t:null),this._updatePageInfoView(t,D),k},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;Z(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",h=r[d]!=null,f=i.childOfName(u);f&&(f.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;a&&o&&a.setStyle("text",st(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=aV[o],l=oV[o],c=this._findTargetItemIndex(r),u=i.children(),d=u[c],h=u.length,f=h?1:0,m={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return m;var v=C(d);m.contentPosition[o]=-v.s;for(var y=c+1,w=v,S=v,T=null;y<=h;++y)T=C(u[y]),(!T&&S.e>w.s+a||T&&!k(T,w.s))&&(S.i>w.i?w=S:w=T,w&&(m.pageNextDataIndex==null&&(m.pageNextDataIndex=w.i),++m.pageCount)),S=T;for(var y=c-1,w=v,S=v,T=null;y>=-1;--y)T=C(u[y]),(!T||!k(S,T.s))&&w.i<S.i&&(S=w,m.pagePrevDataIndex==null&&(m.pagePrevDataIndex=w.i),++m.pageCount,++m.pageIndex),w=T;return m;function C(A){if(A){var D=A.getBoundingRect(),P=D[l]+A[l];return{s:P,e:P+D[s],i:A.__legendDataIndex}}}function k(A,D){return A.e>=D&&A.s<=D+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===t&&(r=s)}),r??a},e.type="legend.scroll",e}(vCe);function Y_t(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function K_t(n){En(bCe),n.registerComponentModel(W_t),n.registerComponentView(q_t),Y_t(n)}function X_t(n){En(bCe),En(K_t)}var Z_t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=Cy(tI.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(tI),zK=Kn();function Q_t(n,e,t){zK(n).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=t)})}function J_t(n,e){for(var t=zK(n).coordSysRecordMap,r=t.keys(),i=0;i<r.length;i++){var a=r[i],o=t.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||wCe(t,o))}}}function wCe(n,e){if(e){n.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function e1t(n,e){var t={model:e,containsPoint:Qt(n1t,e),dispatchAction:Qt(t1t,n),dataZoomInfoMap:null,controller:null},r=t.controller=new fM(n.getZr());return Z(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];t.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],c=l&&l(s.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&t.dispatchAction(o)})}),t}function t1t(n,e){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function n1t(n,e,t,r){return n.coordinateSystem.containPoint([t,r])}function r1t(n){var e,t="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return n.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[t+s]>r[t+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function i1t(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=zK(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=yt());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=nCe(a);Z(o.infoList,function(s){var l=s.model.uid,c=i.get(l)||i.set(l,e1t(t,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=yt());u.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){wCe(i,a);return}var u=r1t(l);o.enable(u.controlType,u.opt),o.setPointerChecker(a.containsPoint),IT(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var a1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,i){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),Q_t(i,t,{pan:ut(sV.pan,this),zoom:ut(sV.zoom,this),scrollMove:ut(sV.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){J_t(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(RK),sV={zoom:function(n,e,t,r){var i=this.range,a=i.slice(),o=n.axisModels[0];if(o){var s=lV[e](null,[r.originX,r.originY],o,t,n),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],c=Math.max(1/r.scale,0);a[0]=(a[0]-l)*c+l,a[1]=(a[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(ax(0,a,[0,100],0,u.minSpan,u.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Dhe(function(n,e,t,r,i,a){var o=lV[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,t);return o.signal*(n[1]-n[0])*o.pixel/o.pixelLength}),scrollMove:Dhe(function(n,e,t,r,i,a){var o=lV[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,t);return o.signal*(n[1]-n[0])*a.scrollDelta})};function Dhe(n){return function(e,t,r,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=n(o,s,e,t,r,i);if(ax(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var lV={grid:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(o.pixel=e[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(n,e,t,r,i){var a=t.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return n=n?s.pointToCoord(n):[0,0],e=s.pointToCoord(e),t.mainType==="radiusAxis"?(o.pixel=e[0]-n[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=a.inverse?-1:1),o},singleAxis:function(n,e,t,r,i){var a=t.axis,o=i.model.coordinateSystem.getRect(),s={};return n=n||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function xCe(n){OK(n),n.registerComponentModel(Z_t),n.registerComponentView(a1t),i1t(n)}var o1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Cy(tI.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(tI),ik=Yn,Ihe=7,s1t=1,cV=30,l1t=7,ak="horizontal",Mhe="vertical",c1t=5,u1t=["line","bar","candlestick","scatter"],d1t={easing:"cubicOut",duration:100,delay:0},h1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=ut(this._onBrush,this),this._onBrushEnd=ut(this._onBrushEnd,this)},e.prototype.render=function(t,r,i,a){if(n.prototype.render.apply(this,arguments),IT(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){VD(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new jt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),a=i?l1t:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===ak?{right:s.width-o.x-o.width,top:s.height-cV-Ihe-a,width:o.width,height:cV}:{right:Ihe,top:o.y,width:cV,height:o.height},c=kT(t.option);Z(["right","top","width","height"],function(d){c[d]==="ph"&&(c[d]=l[d])});var u=qa(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===Mhe&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===ak&&!o?{scaleY:l?1:-1,scaleX:1}:i===ak&&o?{scaleY:l?1:-1,scaleX:-1}:i===Mhe&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=t.getBoundingRect([s]);t.x=r.x-c.x,t.y=r.y-c.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=t.get("brushSelect");i.add(new ik({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var o=new ik({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:ut(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],a=t.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():t.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var d=o.getDataExtent(l),h=(d[1]-d[0])*.3;d=[d[0]-h,d[1]+h];var f=[0,r[1]],m=[0,r[0]],v=[[r[0],0],[0,0]],y=[],w=m[1]/(o.count()-1),S=0,T=Math.round(o.count()/r[0]),C;o.each([l],function(N,R){if(T>0&&R%T){S+=w;return}var L=N==null||isNaN(N)||N==="",B=L?0:br(N,d,f,!0);L&&!C&&R?(v.push([v[v.length-1][0],0]),y.push([y[y.length-1][0],0])):!L&&C&&(v.push([S,0]),y.push([S,0])),v.push([S,B]),y.push([S,B]),S+=w,C=L}),c=this._shadowPolygonPts=v,u=this._shadowPolylinePts=y}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var k=this.dataZoomModel;function A(N){var R=k.getModel(N?"selectedDataBackground":"dataBackground"),L=new jt,B=new vl({shape:{points:c},segmentIgnoreThreshold:1,style:R.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),$=new yl({shape:{points:u},segmentIgnoreThreshold:1,style:R.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(B),L.add($),L}for(var D=0;D<3;D++){var P=A(D===1);this._displayables.sliderGroup.add(P),this._displayables.dataShadowSegs.push(P)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return t.eachTargetAxis(function(o,s){var l=t.getAxisProxy(o,s).getTargetSeriesModels();Z(l,function(c){if(!i&&!(r!==!0&&mn(u1t,c.get("type"))<0)){var u=a.getComponent(Hv(o),s).axis,d=f1t(o),h,f=c.coordinateSystem;d!=null&&f.getOtherAxis&&(h=f.getOtherAxis(u).inverse),d=c.getData().mapDimension(d),i={thisAxis:u,series:c,thisDim:o,otherDim:d,otherAxisInverse:h}}},this)},this),i}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,d=l.get("brushSelect"),h=r.filler=new ik({silent:d,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(h),o.add(new ik({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:s1t,fill:"rgba(0,0,0,0)"}})),Z([0,1],function(T){var C=l.get("handleIcon");!A2[C]&&C.indexOf("path://")<0&&C.indexOf("image://")<0&&(C="path://"+C);var k=Da(C,-1,0,2,2,null,!0);k.attr({cursor:Phe(this._orient),draggable:!0,drift:ut(this._onDragMove,this,T),ondragend:ut(this._onDragEnd,this),onmouseover:ut(this._showDataInfo,this,!0),onmouseout:ut(this._showDataInfo,this,!1),z2:5});var A=k.getBoundingRect(),D=l.get("handleSize");this._handleHeight=tt(D,this._size[1]),this._handleWidth=A.width/A.height*this._handleHeight,k.setStyle(l.getModel("handleStyle").getItemStyle()),k.style.strokeNoScale=!0,k.rectHover=!0,k.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),pw(k);var P=l.get("handleColor");P!=null&&(k.style.fill=P),o.add(i[T]=k);var N=l.getModel("textStyle"),R=l.get("handleLabel")||{},L=R.show||!1;t.add(a[T]=new Qn({silent:!0,invisible:!L,style:ri(N,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:N.getTextColor(),font:N.getFont()}),z2:10}))},this);var f=h;if(d){var m=tt(l.get("moveHandleSize"),s[1]),v=r.moveHandle=new Yn({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:m}}),y=m*.8,w=r.moveHandleIcon=Da(l.get("moveHandleIcon"),-y/2,-y/2,y,y,"#fff",!0);w.silent=!0,w.y=s[1]+m/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var S=Math.min(s[1]/2,Math.max(m,10));f=r.moveZone=new Yn({invisible:!0,shape:{y:s[1]-S,height:m+S}}),f.on("mouseover",function(){c.enterEmphasis(v)}).on("mouseout",function(){c.leaveEmphasis(v)}),o.add(v),o.add(w),o.add(f)}f.attr({draggable:!0,cursor:Phe(this._orient),drift:ut(this._onDragMove,this,"all"),ondragstart:ut(this._showDataInfo,this,!0),ondragend:ut(this._onDragEnd,this),onmouseover:ut(this._showDataInfo,this,!0),onmouseout:ut(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[br(t[0],[0,100],r,!0),br(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];ax(r,a,o,i.get("zoomLock")?"all":t,s.minSpan!=null?br(s.minSpan,l,o,!0):null,s.maxSpan!=null?br(s.maxSpan,l,o,!0):null);var c=this._range,u=this._range=Bu([br(a[0],o,l,!0),br(a[1],o,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},e.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,a=Bu(i.slice()),o=this._size;Z([0,1],function(f){var m=r.handles[f],v=this._handleHeight;m.attr({scaleX:v/2,scaleY:v/2,x:i[f]+(f?-1:1),y:o[1]/2-v/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,a[0],a[1],o[0]],u=0;u<l.length;u++){var d=l[u],h=d.getClipPath();h||(h=new Yn,d.setClipPath(h)),h.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:o[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,d=t?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(d[0],c),this._formatLabel(d[1],c)]}}var h=Bu(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(m){var v=gw(i.handles[m].parent,this.group),y=eF(m===0?"right":"left",v),w=this._handleWidth/2+c1t,S=rh([h[m]+(m===0?-w:w),this._size[1]/2],v);a[m].setStyle({x:S[0],y:S[1],verticalAlign:o===ak?"middle":y,align:o===ak?y:"center",text:s[m]})}},e.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(o,20));return kt(a)?a(t,s):st(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=a.get("show")||!1,s=t||this._dragging?o:i,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,r,i,a){this._dragging=!0,Mg(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=rh([r,i],o,!0),l=this._updateInterval(t,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new ln(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Bu([br(i.x,o,s,!0),br(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Mg(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new ik({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(t,r),u=l.transformCoordToLocal(s.x,s.y),d=this._size;c[0]=Math.max(Math.min(d[0],c[0]),0),o.setShape({x:u[0],y:0,width:c[0]-u[0],height:d[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?d1t:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=nCe(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var a=this.api.getWidth(),o=this.api.getHeight();t={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return t},e.type="dataZoom.slider",e}(RK);function f1t(n){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[n]}function Phe(n){return n==="vertical"?"ns-resize":"ew-resize"}function SCe(n){n.registerComponentModel(o1t),n.registerComponentView(h1t),OK(n)}function p1t(n){En(xCe),En(SCe)}var _Ce={get:function(n,e,t){var r=Nt((g1t[n]||{})[e]);return t&&Fe(r)?r[r.length-1]:r}},g1t={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Nhe=uo.mapVisual,m1t=uo.eachVisual,v1t=Fe,Rhe=Z,y1t=Bu,b1t=br,X2=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&hCe(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=ut(t,this),this.controllerVisuals=DG(this.option.controller,r,t),this.targetVisuals=DG(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,r=[];return t==null||t==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=Rr(t),r},e.prototype.eachTargetSeries=function(t,r){Z(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,c;i=i||["<",">"],Fe(t)&&(t=t.slice(),c=!0);var u=r?t:c?[d(t[0]),d(t[1])]:d(t);if(st(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(kt(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?i[0]+" "+u[1]:t[1]===s[1]?i[1]+" "+u[0]:u[0]+" - "+u[1];return u;function d(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,r=y1t([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});sn(a,i),sn(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),c.call(this,a,"inRange","outOfRange"),u.call(this,o);function l(d){v1t(r.color)&&!d.inRange&&(d.inRange={color:r.color.slice().reverse()}),d.inRange=d.inRange||{color:t.get("gradientColor")}}function c(d,h,f){var m=d[h],v=d[f];m&&!v&&(v=d[f]={},Rhe(m,function(y,w){if(uo.isValidType(w)){var S=_Ce.get(w,"inactive",s);S!=null&&(v[w]=S,w==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function u(d){var h=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,f=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,m=this.get("inactiveColor"),v=this.getItemSymbol(),y=v||"roundRect";Rhe(this.stateList,function(w){var S=this.itemSize,T=d[w];T||(T=d[w]={color:s?m:[m]}),T.symbol==null&&(T.symbol=h&&Nt(h)||(s?y:[y])),T.symbolSize==null&&(T.symbolSize=f&&Nt(f)||(s?S[0]:[S[0],S[0]])),T.symbol=Nhe(T.symbol,function(A){return A==="none"?y:A});var C=T.symbolSize;if(C!=null){var k=-1/0;m1t(C,function(A){A>k&&(k=A)}),T.symbolSize=Nhe(C,function(A){return b1t(A,[0,k],[0,S[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(On),Ohe=[20,140],w1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Ohe[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Ohe[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):Fe(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),Z(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=Bu((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=t)&&(r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=Lhe(this,"outOfRange",this.getExtent()),i=Lhe(this,"inRange",this.option.range.slice()),a=[];function o(f,m){a.push({value:f,color:t(f,m)})}for(var s=0,l=0,c=i.length,u=r.length;l<u&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var d=1;s<c;s++,d=0)d&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var d=1;l<u;l++)(!i.length||i[i.length-1]<r[l])&&(d&&(a.length&&o(a[a.length-1].value,"outOfRange"),d=0),o(r[l],"outOfRange"));var h=a.length;return{stops:a,outerColors:[h?a[0].color:"transparent",h?a[h-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Cy(X2.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(X2);function Lhe(n,e,t){if(t[0]===t[1])return t.slice();for(var r=200,i=(t[1]-t[0])/r,a=t[0],o=[],s=0;s<=r&&a<t[1];s++)o.push(a),a+=i;return o.push(t[1]),o}var TCe=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,i,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,i=AT(r.get("padding")||0),a=t.getBoundingRect();t.add(new Yn({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(f){return s[f]}function u(f,m){s[f]=m}var d=o.controllerVisuals[a||o.getValueState(t)],h=uo.prepareVisualTypes(d);return Z(h,function(f){var m=d[f];i.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",m=d.__alphaForOpacity),uo.dependsOn(f,r)&&m&&m.applyVisual(t,c,u)}),s[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api;sF(t,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(t,r,i,a){},e.type="visualMap",e}(Mi),jhe=[["left","right","width"],["top","bottom","height"]];function ECe(n,e,t){var r=n.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=jhe[o],l=[0,null,10],c={},u=0;u<3;u++)c[jhe[1-o][u]]=l[u],c[s[u]]=u===2?t[0]:r[s[u]];var d=[["x","width",3],["y","height",0]][o],h=qa(c,a,r.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+h[d[1]]*.5<a[d[1]]*.5?0:1]}function RR(n,e){return Z(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),n}var lf=br,x1t=Z,Fhe=Math.min,uV=Math.max,S1t=12,_1t=6,T1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){n.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=ut(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ut(this._hideIndicator,this)},e.prototype.doRender=function(t,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],c),d=this._applyTransform(i===0?"bottom":"top",c),h=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Qn({style:ri(f,{x:u[0],y:u[1],verticalAlign:h==="horizontal"?"middle":d,align:h==="horizontal"?d:"center",text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=ECe(r,this.api,a),c=i.mainGroup=this._createBarGroup(l),u=new jt;c.add(u),u.add(i.outOfRange=$he()),u.add(i.inRange=$he(null,s?Uhe(this._orient):null,ut(this._dragHandle,this,"all",!1),ut(this._dragHandle,this,"all",!0))),u.setClipPath(new Yn({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var d=r.textStyleModel.getTextRect("国"),h=uV(d.width,d.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,c,0,a,h,o),this._createHandle(r,c,1,a,h,o)),this._createIndicator(r,c,a,h,o),t.add(c)},e.prototype._createHandle=function(t,r,i,a,o,s){var l=ut(this._dragHandle,this,i,!1),c=ut(this._dragHandle,this,i,!0),u=lh(t.get("handleSize"),a[0]),d=Da(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),h=Uhe(this._orient);d.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(w){Mg(w.event)}}),d.x=a[0]/2,d.useStyle(t.getModel("handleStyle").getItemStyle()),d.setStyle({strokeNoScale:!0,strokeFirst:!0}),d.style.lineWidth*=2,d.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Zb(d,!0),r.add(d);var f=this.visualMapModel.textStyleModel,m=new Qn({cursor:h,draggable:!0,drift:l,onmousemove:function(w){Mg(w.event)},ondragend:c,style:ri(f,{x:0,y:0,text:""})});m.ensureState("blur").style={opacity:.1},m.stateTransition={duration:200},this.group.add(m);var v=[u,0],y=this._shapes;y.handleThumbs[i]=d,y.handleLabelPoints[i]=v,y.handleLabels[i]=m},e.prototype._createIndicator=function(t,r,i,a,o){var s=lh(t.get("indicatorSize"),i[0]),l=Da(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof Ro){var u=l.style;l.useStyle(Me({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);r.add(l);var d=this.visualMapModel.textStyleModel,h=new Qn({silent:!0,invisible:!0,style:ri(d,{x:0,y:0,text:""})});this.group.add(h);var f=[(o==="horizontal"?a/2:_1t)+i[0]/2,0],m=this._shapes;m.indicator=l,m.indicatorLabel=h,m.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():Bhe(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[lf(r[0],i,a,!0),lf(r[1],i,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];ax(r,a,o,t,0);var s=i.getExtent();this._dataInterval=[lf(a[0],o,s,!0),lf(a[1],o,s,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),c=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(t,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(i,l);return{barColor:new eM(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var i=100,a=[],o=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=t[0]+o*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new jt(r==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,c=a.getExtent(),u=this._applyTransform("left",i.mainGroup);x1t([0,1],function(d){var h=o[d];h.setStyle("fill",r.handlesColor[d]),h.y=t[d];var f=lf(t[d],[0,l[1]],c,!0),m=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=m/l[0],h.x=l[0]-m/2;var v=rh(i.handleLabelPoints[d],gw(h,this.group));if(this._orient==="horizontal"){var y=u==="left"||u==="top"?(l[0]-m)/2:(l[0]-m)/-2;v[1]+=y}s[d].setStyle({x:v[0],y:v[1],text:a.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],u=this._shapes,d=u.indicator;if(d){d.attr("invisible",!1);var h={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",h),m=this.getControllerVisual(t,"symbolSize"),v=lf(t,s,c,!0),y=l[0]-m/2,w={x:d.x,y:d.y};d.y=v,d.x=y;var S=rh(u.indicatorLabelPoint,gw(d,this.group)),T=u.indicatorLabel;T.attr("invisible",!1);var C=this._applyTransform("left",u.mainGroup),k=this._orient,A=k==="horizontal";T.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:A?C:"middle",align:A?"center":C});var D={x:y,y:v,style:{fill:f}},P={style:{x:S[0],y:S[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var N={duration:100,easing:"cubicInOut",additive:!0};d.x=w.x,d.y=w.y,d.animateTo(D,N),T.animateTo(P,N)}else d.attr(D),T.attr(P);this._firstShowIndicator=!1;var R=this._shapes.handleLabels;if(R)for(var L=0;L<R.length;L++)this.api.enterBlur(R[L])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Fhe(uV(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();t=Fhe(uV(o[0],t),o[1]);var l=E1t(i,s,o),c=[t-l,t+l],u=lf(t,o,s,!0),d=[lf(c[0],o,s,!0),lf(c[1],o,s,!0)];c[0]<o[0]&&(d[0]=-1/0),c[1]>o[1]&&(d[1]=1/0),r&&(d[0]===-1/0?this._showIndicator(u,d[1],"< ",l):d[1]===1/0?this._showIndicator(u,d[0],"> ",l):this._showIndicator(u,u,"≈ ",l));var h=this._hoverLinkDataIndices,f=[];(r||Bhe(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(d));var m=Pot(h,f);this._dispatchHighDown("downplay",RR(m[0],i)),this._dispatchHighDown("highlight",RR(m[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(Jb(t.target,function(l){var c=Ut(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",RR(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,i,a){var o=gw(r,a?null:this.group);return Fe(t)?rh(t,o,i):eF(t,o,i)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(TCe);function $he(n,e,t,r){return new vl({shape:{points:n},draggable:!!t,cursor:e,drift:t,onmousemove:function(i){Mg(i.event)},ondragend:r})}function E1t(n,e,t){var r=S1t/2,i=n.get("hoverLinkDataSize");return i&&(r=lf(i,e,t,!0)/2),r}function Bhe(n){var e=n.get("hoverLinkOnHandle");return!!(e??n.get("realtime"))}function Uhe(n){return n==="vertical"?"ns-resize":"ew-resize"}var A1t={type:"selectDataRange",event:"dataRangeSelected",update:"update"},k1t=function(n,e){e.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},C1t=[{createOnAllSeries:!0,reset:function(n,e){var t=[];return e.eachComponent("visualMap",function(r){var i=n.pipelineContext;!r.isTargetSeries(n)||i&&i.large||t.push(XSt(r.stateList,r.targetVisuals,ut(r.getValueState,r),r.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,e){var t=n.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(ut(D1t,null,n,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(t);o>=0&&(a.dimension=o,r.push(a))}}),n.getData().setVisual("visualMeta",r)}}];function D1t(n,e,t,r){for(var i=e.targetVisuals[r],a=uo.prepareVisualTypes(i),o={color:iM(n.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],u=i[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(t,d,h)}return o.color;function d(f){return o[f]}function h(f,m){o[f]=m}}var Vhe=Z;function I1t(n){var e=n&&n.visualMap;Fe(e)||(e=e?[e]:[]),Vhe(e,function(t){if(t){l_(t,"splitList")&&!l_(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&Fe(r)&&Vhe(r,function(i){It(i)&&(l_(i,"start")&&!l_(i,"min")&&(i.min=i.start),l_(i,"end")&&!l_(i,"max")&&(i.max=i.end))})}})}function l_(n,e){return n&&n.hasOwnProperty&&n.hasOwnProperty(e)}var zhe=!1;function ACe(n){zhe||(zhe=!0,n.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),n.registerAction(A1t,k1t),Z(C1t,function(e){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,e)}),n.registerPreprocessor(I1t))}function kCe(n){n.registerComponentModel(w1t),n.registerComponentView(T1t),ACe(n)}var M1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],P1t[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=Nt(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Be(this._pieceList,function(l){return l=Nt(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},i=uo.listVisualTypes(),a=this.isCategory();Z(t.pieces,function(s){Z(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),Z(r,function(s,l){var c=!1;Z(this.stateList,function(u){c=c||o(t,u,l)||o(t.target,u,l)},this),!c&&Z(this.stateList,function(u){(t[u]||(t[u]={}))[l]=_Ce.get(l,u==="inRange"?"active":"inactive",a)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var i=this.option,a=this._pieceList,o=(r?i:t).selected||{};if(i.selected=o,Z(a,function(l,c){var u=this.getSelectedMapKey(l);o.hasOwnProperty(u)||(o[u]=!0)},this),i.selectedMode==="single"){var s=!1;Z(a,function(l,c){var u=this.getSelectedMapKey(l);o[u]&&(s?o[u]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Nt(t)},e.prototype.getValueState=function(t){var r=uo.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=uo.findPieceIndex(l,i);u===t&&o.push(c)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(u,d){var h=a.getRepresentValue({interval:u});d||(d=a.getValueState(h));var f=t(h,d);u[0]===-1/0?i[0]=f:u[1]===1/0?i[1]=f:r.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return Z(s,function(u){var d=u.interval;d&&(d[0]>c&&o([c,d[0]],"outOfRange"),o(d.slice()),c=d[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=Cy(X2.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(X2),P1t={splitNumber:function(n){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;n.push({interval:[s,l],close:[1,1]})}e.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),joe(n),Z(n,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var e=this.option;Z(e.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Hhe(e,n)},pieces:function(n){var e=this.option;Z(e.pieces,function(t,r){It(t)||(t={value:t});var i={text:"",index:r};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],d=0;d<2;d++){for(var h=[["gte","gt","min"],["lte","lt","max"]][d],f=0;f<3&&o[d]==null;f++)o[d]=t[h[f]],s[d]=l[f],u[d]=f===2;o[d]==null&&(o[d]=c[d])}u[0]&&o[1]===1/0&&(s[0]=0),u[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=uo.retrieveVisuals(t),n.push(i)},this),Hhe(e,n),joe(n),Z(n,function(t){var r=t.close,i=[["<","≤"][r[1]],[">","≥"][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function Hhe(n,e){var t=n.inverse;(n.orient==="vertical"?!t:t)&&e.reverse()}var N1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),d=u.endsText,h=Io(r.get("showLabel",!0),!d),f=!r.get("selectedMode");d&&this._renderEndsText(t,d[0],c,h,l),Z(u.viewPieceList,function(m){var v=m.piece,y=new jt;y.onclick=ut(this._onItemClick,this,v),this._enableHoverLink(y,m.indexInModelPieceList);var w=r.getRepresentValue(v);if(this._createItemSymbol(y,w,[0,0,c[0],c[1]],f),h){var S=this.visualMapModel.getValueState(w);y.add(new Qn({style:{x:l==="right"?-i:c[0]+i,y:c[1]/2,text:v.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:S==="outOfRange"?.5:1},silent:f}))}t.add(y)},this),d&&this._renderEndsText(t,d[1],c,h,l),mw(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:RR(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return ECe(t,this.api,t.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(t,r,i,a,o){if(r){var s=new jt,l=this.visualMapModel.textStyleModel;s.add(new Qn({style:ri(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),t.add(s)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=Be(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),o=t.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(t,r,i,a){var o=Da(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));o.silent=a,t.add(o)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=Nt(i.selected),s=r.getSelectedMapKey(t);a==="single"||a===!0?(o[s]=!0,Z(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(TCe);function CCe(n){n.registerComponentModel(M1t),n.registerComponentView(N1t),ACe(n)}function R1t(n){En(kCe),En(CCe)}var O1t={label:{enabled:!0},decal:{show:!1}},Ghe=Kn(),L1t={};function j1t(n,e){var t=n.getModel("aria");if(!t.get("enabled"))return;var r=Nt(O1t);sn(r.label,n.getLocaleModel().get("aria"),!1),sn(t.option,r,!1),i(),a();function i(){var c=t.getModel("decal"),u=c.get("show");if(u){var d=yt();n.eachSeries(function(h){if(!h.isColorBySeries()){var f=d.get(h.type);f||(f={},d.set(h.type,f)),Ghe(h).scope=f}}),n.eachRawSeries(function(h){if(n.isSeriesFiltered(h))return;if(kt(h.enableAriaDecal)){h.enableAriaDecal();return}var f=h.getData();if(h.isColorBySeries()){var S=OH(h.ecModel,h.name,L1t,n.getSeriesCount()),T=f.getVisual("decal");f.setVisual("decal",C(T,S))}else{var m=h.getRawData(),v={},y=Ghe(h).scope;f.each(function(k){var A=f.getRawIndex(k);v[A]=k});var w=m.count();m.each(function(k){var A=v[k],D=m.getName(k)||k+"",P=OH(h.ecModel,D,y,w),N=f.getItemVisual(A,"decal");f.setItemVisual(A,"decal",C(N,P))})}function C(k,A){var D=k?Me(Me({},A),k):A;return D.dirty=!0,D}})}}function a(){var c=e.getZr().dom;if(c){var u=n.getLocaleModel().get("aria"),d=t.getModel("label");if(d.option=Dt(d.option,u),!!d.get("enabled")){if(c.setAttribute("role","img"),d.get("description")){c.setAttribute("aria-label",d.get("description"));return}var h=n.getSeriesCount(),f=d.get(["data","maxCount"])||10,m=d.get(["series","maxCount"])||10,v=Math.min(h,m),y;if(!(h<1)){var w=s();if(w){var S=d.get(["general","withTitle"]);y=o(S,{title:w})}else y=d.get(["general","withoutTitle"]);var T=[],C=h>1?d.get(["series","multiple","prefix"]):d.get(["series","single","prefix"]);y+=o(C,{seriesCount:h}),n.eachSeries(function(P,N){if(N<v){var R=void 0,L=P.get("name"),B=L?"withName":"withoutName";R=h>1?d.get(["series","multiple",B]):d.get(["series","single",B]),R=o(R,{seriesId:P.seriesIndex,seriesName:P.get("name"),seriesType:l(P.subType)});var $=P.getData();if($.count()>f){var G=d.get(["data","partialData"]);R+=o(G,{displayCnt:f})}else R+=d.get(["data","allData"]);for(var W=d.get(["data","separator","middle"]),K=d.get(["data","separator","end"]),X=d.get(["data","excludeDimensionId"]),te=[],ie=0;ie<$.count();ie++)if(ie<f){var z=$.getName(ie),se=X?vr($.getValues(ie),function(ee,be){return mn(X,be)===-1}):$.getValues(ie),ce=d.get(["data",z?"withName":"withoutName"]);te.push(o(ce,{name:z,value:se.join(W)}))}R+=te.join(W)+K,T.push(R)}});var k=d.getModel(["series","multiple","separator"]),A=k.get("middle"),D=k.get("end");y+=T.join(A)+D,c.setAttribute("aria-label",y)}}}}function o(c,u){if(!st(c))return c;var d=c;return Z(u,function(h,f){d=d.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),h)}),d}function s(){var c=n.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=n.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function F1t(n){if(!(!n||!n.aria)){var e=n.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},Z(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function $1t(n){n.registerPreprocessor(F1t),n.registerVisual(n.PRIORITY.VISUAL.ARIA,j1t)}var Whe={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},B1t=function(){function n(e){var t=this._condVal=st(e)?new RegExp(e):Qit(e)?e:null;if(t==null){var r="";gr(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return st(t)?this._condVal.test(e):rr(t)?this._condVal.test(e+""):!1},n}(),U1t=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),V1t=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n}(),z1t=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n}(),H1t=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),G1t=function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n}();function HK(n,e){if(n===!0||n===!1){var t=new U1t;return t.value=n,t}var r="";return DCe(n)||gr(r),n.and?qhe("and",n,e):n.or?qhe("or",n,e):n.not?W1t(n,e):q1t(n,e)}function qhe(n,e,t){var r=e[n],i="";Fe(r)||gr(i),r.length||gr(i);var a=n==="and"?new V1t:new z1t;return a.children=Be(r,function(o){return HK(o,t)}),a.children.length||gr(i),a}function W1t(n,e){var t=n.not,r="";DCe(t)||gr(r);var i=new H1t;return i.child=HK(t,e),i.child||gr(r),i}function q1t(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=Ln(n),o=n.parser,s=o?cTe(o):null,l=0;l<a.length;l++){var c=a[l];if(!(c==="parser"||e.valueGetterAttrMap.get(c))){var u=ft(Whe,c)?Whe[c]:c,d=n[c],h=s?s(d):d,f=Oct(u,h)||u==="reg"&&new B1t(h);f||gr(t),i.push(f)}}i.length||gr(t);var m=new G1t;return m.valueGetterParam=r,m.valueParser=s,m.getValue=e.getValue,m.subCondList=i,m}function DCe(n){return It(n)&&!Ns(n)}var Y1t=function(){function n(e,t){this._cond=HK(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function K1t(n,e){return new Y1t(n,e)}var X1t={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=K1t(n.config,{valueGetterAttrMap:yt({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;ft(s,"dimension")||gr(l);var u=e.getDimensionInfo(c);return u||gr(l),{dimIdx:u.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},Z1t={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=Rr(t);i.length||gr(r);var a=[];Z(i,function(u){var d=u.dimension,h=u.order,f=u.parser,m=u.incomparable;if(d==null&&gr(r),h!=="asc"&&h!=="desc"&&gr(r),m&&m!=="min"&&m!=="max"){var v="";gr(v)}if(h!=="asc"&&h!=="desc"){var y="";gr(y)}var w=e.getDimensionInfo(d);w||gr(r);var S=f?cTe(f):null;f&&!S&&gr(r),a.push({dimIdx:w.index,parser:S,comparator:new dTe(h,m)})});var o=e.sourceFormat;o!==Rs&&o!==Qu&&gr(r);for(var s=[],l=0,c=e.count();l<c;l++)s.push(e.getRawDataItem(l));return s.sort(function(u,d){for(var h=0;h<a.length;h++){var f=a[h],m=e.retrieveValueFromItem(u,f.dimIdx),v=e.retrieveValueFromItem(d,f.dimIdx);f.parser&&(m=f.parser(m),v=f.parser(v));var y=f.comparator.evaluate(m,v);if(y!==0)return y}return 0}),{data:s}}};function Q1t(n){n.registerTransform(X1t),n.registerTransform(Z1t)}var J1t=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new gTe(this),Kse(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),Kse(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:If},e}(On),eTt=function(n){_e(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(Mi);function tTt(n){n.registerComponentModel(J1t),n.registerComponentView(eTt)}var of=$f.CMD;function N_(n,e){return Math.abs(n-e)<1e-5}function LG(n){var e=n.data,t=n.len(),r=[],i,a=0,o=0,s=0,l=0;function c($,G){i&&i.length>2&&r.push(i),i=[$,G]}function u($,G,W,K){N_($,W)&&N_(G,K)||i.push($,G,W,K,W,K)}function d($,G,W,K,X,te){var ie=Math.abs(G-$),z=Math.tan(ie/4)*4/3,se=G<$?-1:1,ce=Math.cos($),ee=Math.sin($),be=Math.cos(G),fe=Math.sin(G),De=ce*X+W,dt=ee*te+K,ve=be*X+W,de=fe*te+K,me=X*z*se,xe=te*z*se;i.push(De-me*ee,dt+xe*ce,ve+me*fe,de-xe*be,ve,de)}for(var h,f,m,v,y=0;y<t;){var w=e[y++],S=y===1;switch(S&&(a=e[y],o=e[y+1],s=a,l=o,(w===of.L||w===of.C||w===of.Q)&&(i=[s,l])),w){case of.M:a=s=e[y++],o=l=e[y++],c(s,l);break;case of.L:h=e[y++],f=e[y++],u(a,o,h,f),a=h,o=f;break;case of.C:i.push(e[y++],e[y++],e[y++],e[y++],a=e[y++],o=e[y++]);break;case of.Q:h=e[y++],f=e[y++],m=e[y++],v=e[y++],i.push(a+2/3*(h-a),o+2/3*(f-o),m+2/3*(h-m),v+2/3*(f-v),m,v),a=m,o=v;break;case of.A:var T=e[y++],C=e[y++],k=e[y++],A=e[y++],D=e[y++],P=e[y++]+D;y+=1;var N=!e[y++];h=Math.cos(D)*k+T,f=Math.sin(D)*A+C,S?(s=h,l=f,c(s,l)):u(a,o,h,f),a=Math.cos(P)*k+T,o=Math.sin(P)*A+C;for(var R=(N?-1:1)*Math.PI/2,L=D;N?L>P:L<P;L+=R){var B=N?Math.max(L+R,P):Math.min(L+R,P);d(L,B,T,C,k,A)}break;case of.R:s=a=e[y++],l=o=e[y++],h=s+e[y++],f=l+e[y++],c(h,l),u(h,l,h,f),u(h,f,s,f),u(s,f,s,l),u(s,l,h,l);break;case of.Z:i&&u(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function jG(n,e,t,r,i,a,o,s,l,c){if(N_(n,t)&&N_(e,r)&&N_(i,o)&&N_(a,s)){l.push(o,s);return}var u=2/c,d=u*u,h=o-n,f=s-e,m=Math.sqrt(h*h+f*f);h/=m,f/=m;var v=t-n,y=r-e,w=i-o,S=a-s,T=v*v+y*y,C=w*w+S*S;if(T<d&&C<d){l.push(o,s);return}var k=h*v+f*y,A=-h*w-f*S,D=T-k*k,P=C-A*A;if(D<d&&k>=0&&P<d&&A>=0){l.push(o,s);return}var N=[],R=[];uy(n,t,i,o,.5,N),uy(e,r,a,s,.5,R),jG(N[0],R[0],N[1],R[1],N[2],R[2],N[3],R[3],l,c),jG(N[4],R[4],N[5],R[5],N[6],R[6],N[7],R[7],l,c)}function nTt(n,e){var t=LG(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var c=2;c<a.length;){var u=a[c++],d=a[c++],h=a[c++],f=a[c++],m=a[c++],v=a[c++];jG(s,l,u,d,h,f,m,v,o,e),s=m,l=v}r.push(o)}return r}function ICe(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var l=[],c=0;c<o;c++)l.push(s);var u=o*s,d=t-u;if(d>0)for(var c=0;c<d;c++)l[c%o]+=1;return l}function Yhe(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,o=n.endAngle,s=Math.abs(o-a),l=s*i,c=i-r,u=l>Math.abs(c),d=ICe([l,c],u?0:1,e),h=(u?s:c)/d.length,f=0;f<d.length;f++)for(var m=(u?c:s)/d[f],v=0;v<d[f];v++){var y={};u?(y.startAngle=a+h*f,y.endAngle=a+h*(f+1),y.r0=r+m*v,y.r=r+m*(v+1)):(y.startAngle=a+m*v,y.endAngle=a+m*(v+1),y.r0=r+h*f,y.r=r+h*(f+1)),y.clockwise=n.clockwise,y.cx=n.cx,y.cy=n.cy,t.push(y)}}function rTt(n,e,t){for(var r=n.width,i=n.height,a=r>i,o=ICe([r,i],a?0:1,e),s=a?"width":"height",l=a?"height":"width",c=a?"x":"y",u=a?"y":"x",d=n[s]/o.length,h=0;h<o.length;h++)for(var f=n[l]/o[h],m=0;m<o[h];m++){var v={};v[c]=h*d,v[u]=m*f,v[s]=d,v[l]=f,v.x+=n.x,v.y+=n.y,t.push(v)}}function Khe(n,e,t,r){return n*r-t*e}function iTt(n,e,t,r,i,a,o,s){var l=t-n,c=r-e,u=o-i,d=s-a,h=Khe(u,d,l,c);if(Math.abs(h)<1e-6)return null;var f=n-i,m=e-a,v=Khe(f,m,u,d)/h;return v<0||v>1?null:new ln(v*l+n,v*c+e)}function aTt(n,e,t){var r=new ln;ln.sub(r,t,e),r.normalize();var i=new ln;ln.sub(i,n,e);var a=i.dot(r);return a}function c_(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function oTt(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var o=n[a],s=n[(a+1)%r],l=iTt(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);l&&i.push({projPt:aTt(l,e,t),pt:l,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(y,w){return y.projPt-w.projPt});var c=i[0],u=i[i.length-1];if(u.idx<c.idx){var d=c;c=u,u=d}for(var h=[c.pt.x,c.pt.y],f=[u.pt.x,u.pt.y],m=[h],v=[f],a=c.idx+1;a<=u.idx;a++)c_(m,n[a].slice());c_(m,f),c_(m,h);for(var a=u.idx+1;a<=c.idx+r;a++)c_(v,n[a%r].slice());return c_(v,h),c_(v,f),[{points:m},{points:v}]}function Xhe(n){var e=n.points,t=[],r=[];Yj(e,t,r);var i=new dn(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,o=i.height,s=i.x,l=i.y,c=new ln,u=new ln;return a>o?(c.x=u.x=s+a/2,c.y=l,u.y=l+o):(c.y=u.y=l+o/2,c.x=s,u.x=s+a),oTt(e,c,u)}function Z2(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);Z2(n,a[0],i,r),Z2(n,a[1],t-i,r)}return r}function sTt(n,e){for(var t=[],r=0;r<e;r++)t.push(lY(n));return t}function lTt(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function cTt(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function uTt(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":rTt(r,e,t),i=Yn;break;case"sector":Yhe(r,e,t),i=ml;break;case"circle":Yhe({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=ml;break;default:var a=n.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=Be(nTt(n.getUpdatedPathProxy(),o),function(w){return cTt(w)}),l=s.length;if(l===0)Z2(Xhe,{points:s[0]},e,t);else if(l===e)for(var c=0;c<l;c++)t.push({points:s[c]});else{var u=0,d=Be(s,function(w){var S=[],T=[];Yj(w,S,T);var C=(T[1]-S[1])*(T[0]-S[0]);return u+=C,{poly:w,area:C}});d.sort(function(w,S){return S.area-w.area});for(var h=e,c=0;c<l;c++){var f=d[c];if(h<=0)break;var m=c===l-1?h:Math.ceil(f.area/u*e);m<0||(Z2(Xhe,{points:f.poly},m,t),h-=m)}}i=vl;break}if(!i)return sTt(n,e);for(var v=[],c=0;c<t.length;c++){var y=new i;y.setShape(t[c]),lTt(n,y),v.push(y)}return v}function dTt(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],o=t<r?n:e,s=Math.min(t,r),l=Math.abs(r-t)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,d=[o[0],o[1]],h=l,f=2;f<s;){var m=o[f-2],v=o[f-1],y=o[f++],w=o[f++],S=o[f++],T=o[f++],C=o[f++],k=o[f++];if(h<=0){d.push(y,w,S,T,C,k);continue}for(var A=Math.min(h,u-1)+1,D=1;D<=A;D++){var P=D/A;uy(m,y,S,C,P,i),uy(v,w,T,k,P,a),m=i[3],v=a[3],d.push(i[1],a[1],i[2],a[2],m,v),y=i[5],w=a[5],S=i[6],T=a[6]}h-=A-1}return o===n?[d,e]:[n,d]}function Zhe(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function hTt(n,e){for(var t,r,i,a=[],o=[],s=0;s<Math.max(n.length,e.length);s++){var l=n[s],c=e[s],u=void 0,d=void 0;l?c?(t=dTt(l,c),u=t[0],d=t[1],r=u,i=d):(d=Zhe(i||l,l),u=l):(u=Zhe(r||c,c),d=c),a.push(u),o.push(d)}return[a,o]}function Qhe(n){for(var e=0,t=0,r=0,i=n.length,a=0,o=i-2;a<i;o=a,a+=2){var s=n[o],l=n[o+1],c=n[a],u=n[a+1],d=s*u-c*l;e+=d,t+=(s+c)*d,r+=(l+u)*d}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function fTt(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,o=0,s=n.length,l=s-2,c=0;c<i;c++){for(var u=c*6,d=0,h=0;h<s;h+=2){var f=h===0?u:(u+h-2)%l+2,m=n[f]-t[0],v=n[f+1]-t[1],y=e[h]-r[0],w=e[h+1]-r[1],S=y-m,T=w-v;d+=S*S+T*T}d<a&&(a=d,o=c)}return o}function pTt(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function gTt(n,e,t,r){for(var i=[],a,o=0;o<n.length;o++){var s=n[o],l=e[o],c=Qhe(s),u=Qhe(l);a==null&&(a=c[2]<0!=u[2]<0);var d=[],h=[],f=0,m=1/0,v=[],y=s.length;a&&(s=pTt(s));for(var w=fTt(s,l,c,u)*6,S=y-2,T=0;T<S;T+=2){var C=(w+T)%S+2;d[T+2]=s[C]-c[0],d[T+3]=s[C+1]-c[1]}d[0]=s[w]-c[0],d[1]=s[w+1]-c[1];for(var k=r/t,A=-r/2;A<=r/2;A+=k){for(var D=Math.sin(A),P=Math.cos(A),N=0,T=0;T<s.length;T+=2){var R=d[T],L=d[T+1],B=l[T]-u[0],$=l[T+1]-u[1],G=B*P-$*D,W=B*D+$*P;v[T]=G,v[T+1]=W;var K=G-R,X=W-L;N+=K*K+X*X}if(N<m){m=N,f=A;for(var te=0;te<v.length;te++)h[te]=v[te]}}i.push({from:d,to:h,fromCp:c,toCp:u,rotation:-f})}return i}function Q2(n){return n.__isCombineMorphing}var MCe="__mOriginal_";function J2(n,e,t){var r=MCe+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,o=t.after,s=t.before;n[e]=function(){var l=arguments,c;return s&&s.apply(this,l),a?c=a.apply(this,l):c=i.apply(this,l),o&&o.apply(this,l),c}}function vC(n,e){var t=MCe+e;n[t]&&(n[e]=n[t],n[t]=null)}function Jhe(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function PCe(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=hTt(LG(t),LG(r)),a=i[0],o=i[1],s=n.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}s&&Jhe(a,s),l&&Jhe(o,l),J2(e,"updateTransform",{replace:c}),e.transform=null;var u=gTt(a,o,10,Math.PI),d=[];J2(e,"buildPath",{replace:function(h){for(var f=e.__morphT,m=1-f,v=[],y=0;y<u.length;y++){var w=u[y],S=w.from,T=w.to,C=w.rotation*f,k=w.fromCp,A=w.toCp,D=Math.sin(C),P=Math.cos(C);mR(v,k,A,f);for(var N=0;N<S.length;N+=2){var R=S[N],L=S[N+1],B=T[N],$=T[N+1],G=R*m+B*f,W=L*m+$*f;d[N]=G*P-W*D+v[0],d[N+1]=G*D+W*P+v[1]}var K=d[0],X=d[1];h.moveTo(K,X);for(var N=2;N<S.length;){var B=d[N++],$=d[N++],te=d[N++],ie=d[N++],z=d[N++],se=d[N++];K===B&&X===$&&te===z&&ie===se?h.lineTo(z,se):h.bezierCurveTo(B,$,te,ie,z,se),K=z,X=se}}}})}function GK(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;PCe(n,e),e.__morphT=0;function a(){vC(e,"buildPath"),vC(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Dt({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},t)),e}function mTt(n,e,t,r,i,a){var o=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,l,c=(1<<o)/2;c>0;c/=2){var u=0,d=0;(n&c)>0&&(u=1),(e&c)>0&&(d=1),s+=c*c*(3*u^d),d===0&&(u===1&&(n=c-1-n,e=c-1-e),l=n,n=e,e=l)}return s}function eL(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=Be(n,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),d=l.y+l.height/2+(c?c[5]:0);return e=Math.min(u,e),t=Math.min(d,t),r=Math.max(u,r),i=Math.max(d,i),[u,d]}),o=Be(a,function(s,l){return{cp:s,z:mTt(s[0],s[1],e,t,r,i),path:n[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function NCe(n){return uTt(n.path,n.count)}function FG(){return{fromIndividuals:[],toIndividuals:[],count:0}}function vTt(n,e,t){var r=[];function i(k){for(var A=0;A<k.length;A++){var D=k[A];Q2(D)?i(D.childrenRef()):D instanceof Cn&&r.push(D)}}i(n);var a=r.length;if(!a)return FG();var o=t.dividePath||NCe,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),FG();r=eL(r),s=eL(s);for(var l=t.done,c=t.during,u=t.individualDelay,d=new og,h=0;h<a;h++){var f=r[h],m=s[h];m.parent=e,m.copyTransform(d),u||PCe(f,m)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function v(k){for(var A=0;A<s.length;A++)s[A].addSelfToZr(k)}J2(e,"addSelfToZr",{after:function(k){v(k)}}),J2(e,"removeSelfFromZr",{after:function(k){for(var A=0;A<s.length;A++)s[A].removeSelfFromZr(k)}});function y(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,vC(e,"addSelfToZr"),vC(e,"removeSelfFromZr")}var w=s.length;if(u)for(var S=w,T=function(){S--,S===0&&(y(),l&&l())},h=0;h<w;h++){var C=u?Dt({delay:(t.delay||0)+u(h,w,r[h],s[h]),done:T},t):t;GK(r[h],s[h],C)}else e.__morphT=0,e.animateTo({__morphT:1},Dt({during:function(k){for(var A=0;A<w;A++){var D=s[A];D.__morphT=e.__morphT,D.dirtyShape()}c&&c(k)},done:function(){y();for(var k=0;k<n.length;k++)vC(n[k],"updateTransform");l&&l()}},t));return e.__zr&&v(e.__zr),{fromIndividuals:r,toIndividuals:s,count:w}}function yTt(n,e,t){var r=e.length,i=[],a=t.dividePath||NCe;function o(f){for(var m=0;m<f.length;m++){var v=f[m];Q2(v)?o(v.childrenRef()):v instanceof Cn&&i.push(v)}}if(Q2(n)){o(n.childrenRef());var s=i.length;if(s<r)for(var l=0,c=s;c<r;c++)i.push(lY(i[l++%s]));i.length=r}else{i=a({path:n,count:r});for(var u=n.getComputedTransform(),c=0;c<i.length;c++)i[c].setLocalTransform(u);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),FG()}i=eL(i),e=eL(e);for(var d=t.individualDelay,c=0;c<r;c++){var h=d?Dt({delay:(t.delay||0)+d(c,r,i[c],e[c])},t):t;GK(i[c],e[c],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function efe(n){return Fe(n[0])}function tfe(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!t[i].many.length){var l=t[s].many;if(l.length<=1)if(s)s=0;else return t;var a=l.length,c=Math.ceil(a/2);t[i].many=l.slice(c,a),t[s].many=l.slice(0,c),s++}return t}var bTt={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=lY(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function dV(n,e,t,r,i,a){if(!n.length||!e.length)return;var o=_T("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),c,u;efe(n)&&(c=n,u=e),efe(e)&&(c=e,u=n);function d(w,S,T,C,k){var A=w.many,D=w.one;if(A.length===1&&!k){var P=S?A[0]:D,N=S?D:A[0];if(Q2(P))d({many:[P],one:N},!0,T,C,!0);else{var R=s?Dt({delay:s(T,C)},l):l;GK(P,N,R),a(P,N,P,N,R)}}else for(var L=Dt({dividePath:bTt[t],individualDelay:s&&function(X,te,ie,z){return s(X+T,C)}},l),B=S?vTt(A,D,L):yTt(D,A,L),$=B.fromIndividuals,G=B.toIndividuals,W=$.length,K=0;K<W;K++){var R=s?Dt({delay:s(K,W)},l):l;a($[K],G[K],S?A[K]:w.one,S?w.one:A[K],R)}}for(var h=c?c===n:n.length>e.length,f=c?tfe(u,c):tfe(h?e:n,[h?n:e]),m=0,v=0;v<f.length;v++)m+=f[v].many.length;for(var y=0,v=0;v<f.length;v++)d(f[v],h,y,m),y+=f[v].many.length}function Mb(n){if(!n)return[];if(Fe(n)){for(var e=[],t=0;t<n.length;t++)e.push(Mb(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof Cn&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var RCe=1e4,wTt=0,nfe=1,rfe=2,xTt=Kn();function STt(n,e){for(var t=n.dimensions,r=0;r<t.length;r++){var i=n.getDimensionInfo(t[r]);if(i&&i.otherDims[e]===0)return t[r]}}function _Tt(n,e,t){var r=n.getDimensionInfo(t),i=r&&r.ordinalMeta;if(r){var a=n.get(r.name,e);return i&&i.categories[a]||a+""}}function ife(n,e,t,r){var i=r?"itemChildGroupId":"itemGroupId",a=STt(n,i);if(a){var o=_Tt(n,e,a);return o}var s=n.getRawDataItem(e),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return t||n.getId(e)}function afe(n){var e=[];return Z(n,function(t){var r=t.data,i=t.dataGroupId;if(!(r.count()>RCe))for(var a=r.getIndices(),o=0;o<a.length;o++)e.push({data:r,groupId:ife(r,o,i,!1),childGroupId:ife(r,o,i,!0),divide:t.divide,dataIndex:o})}),e}function hV(n,e,t){n.traverse(function(r){r instanceof Cn&&xi(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function fV(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function u_(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function TTt(n,e,t){var r=_T("update",t,e);r&&n.traverse(function(i){if(i instanceof Yu){var a=ylt(i);a&&i.animateFrom({style:a},r)}})}function ETt(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function OCe(n,e,t){var r=afe(n),i=afe(e);function a(T,C,k,A,D){(k||T)&&C.animateFrom({style:k&&k!==T?Me(Me({},k.style),T.style):T.style},D)}var o=!1,s=wTt,l=yt(),c=yt();r.forEach(function(T){T.groupId&&l.set(T.groupId,!0),T.childGroupId&&c.set(T.childGroupId,!0)});for(var u=0;u<i.length;u++){var d=i[u].groupId;if(c.get(d)){s=nfe;break}var h=i[u].childGroupId;if(h&&l.get(h)){s=rfe;break}}function f(T,C){return function(k){var A=k.data,D=k.dataIndex;return C?A.getId(D):T?s===nfe?k.childGroupId:k.groupId:s===rfe?k.childGroupId:k.groupId}}var m=ETt(r,i),v={};if(!m)for(var u=0;u<i.length;u++){var y=i[u],w=y.data.getItemGraphicEl(y.dataIndex);w&&(v[w.id]=!0)}function S(T,C){var k=r[C],A=i[T],D=A.data.hostModel,P=k.data.getItemGraphicEl(k.dataIndex),N=A.data.getItemGraphicEl(A.dataIndex);if(P===N){N&&TTt(N,A.dataIndex,D);return}P&&v[P.id]||N&&(u_(N),P?(u_(P),fV(P),o=!0,dV(Mb(P),Mb(N),A.divide,D,T,a)):hV(N,D,T))}new Og(r,i,f(!0,m),f(!1,m),null,"multiple").update(S).updateManyToOne(function(T,C){var k=i[T],A=k.data,D=A.hostModel,P=A.getItemGraphicEl(k.dataIndex),N=vr(Be(C,function(R){return r[R].data.getItemGraphicEl(r[R].dataIndex)}),function(R){return R&&R!==P&&!v[R.id]});P&&(u_(P),N.length?(Z(N,function(R){u_(R),fV(R)}),o=!0,dV(Mb(N),Mb(P),k.divide,D,T,a)):hV(P,D,k.dataIndex))}).updateOneToMany(function(T,C){var k=r[C],A=k.data.getItemGraphicEl(k.dataIndex);if(!(A&&v[A.id])){var D=vr(Be(T,function(N){return i[N].data.getItemGraphicEl(i[N].dataIndex)}),function(N){return N&&N!==A}),P=i[T[0]].data.hostModel;D.length&&(Z(D,function(N){return u_(N)}),A?(u_(A),fV(A),o=!0,dV(Mb(A),Mb(D),k.divide,P,T[0],a)):Z(D,function(N){return hV(N,P,T[0])}))}}).updateManyToMany(function(T,C){new Og(C,T,function(k){return r[k].data.getId(r[k].dataIndex)},function(k){return i[k].data.getId(i[k].dataIndex)}).update(function(k,A){S(T[k],C[A])}).execute()}).execute(),o&&Z(e,function(T){var C=T.data,k=C.hostModel,A=k&&t.getViewOfSeriesModel(k),D=_T("update",k,0);A&&k.isAnimationEnabled()&&D&&D.duration>0&&A.group.traverse(function(P){P instanceof Cn&&!P.animators.length&&P.animateFrom({style:{opacity:0}},D)})})}function ofe(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function sfe(n){return Fe(n)?n.sort().join(","):n}function Iv(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function ATt(n,e){var t=yt(),r=yt(),i=yt();return Z(n.oldSeries,function(a,o){var s=n.oldDataGroupIds[o],l=n.oldData[o],c=ofe(a),u=sfe(c);r.set(u,{dataGroupId:s,data:l}),Fe(c)&&Z(c,function(d){i.set(d,{key:u,dataGroupId:s,data:l})})}),Z(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=ofe(a),c=sfe(l),u=r.get(c);if(u)t.set(c,{oldSeries:[{dataGroupId:u.dataGroupId,divide:Iv(u.data),data:u.data}],newSeries:[{dataGroupId:o,divide:Iv(s),data:s}]});else if(Fe(l)){var d=[];Z(l,function(m){var v=r.get(m);v.data&&d.push({dataGroupId:v.dataGroupId,divide:Iv(v.data),data:v.data})}),d.length&&t.set(c,{oldSeries:d,newSeries:[{dataGroupId:o,data:s,divide:Iv(s)}]})}else{var h=i.get(l);if(h){var f=t.get(h.key);f||(f={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:Iv(h.data)}],newSeries:[]},t.set(h.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:Iv(s)})}}}}),t}function lfe(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function kTt(n,e,t,r){var i=[],a=[];Z(Rr(n.from),function(o){var s=lfe(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Iv(e.oldData[s]),groupIdDim:o.dimension})}),Z(Rr(n.to),function(o){var s=lfe(t.updatedSeries,o);if(s>=0){var l=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:l,divide:Iv(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&OCe(i,a,r)}function CTt(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){Z(Rr(r.seriesTransition),function(i){Z(Rr(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][kR]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=xTt(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)Z(Rr(a),function(f){kTt(f,i,r,t)});else{var o=ATt(i,r);Z(o.keys(),function(f){var m=o.get(f);OCe(m.oldSeries,m.newSeries,t)})}Z(r.updatedSeries,function(f){f[kR]&&(f[kR]=!1)})}for(var s=e.getSeries(),l=i.oldSeries=[],c=i.oldDataGroupIds=[],u=i.oldData=[],d=0;d<s.length;d++){var h=s[d].getData();h.count()<RCe&&(l.push(s[d]),c.push(s[d].get("dataGroupId")),u.push(h))}})}En([Fft]);En([Nft]);En([ipt,bpt,Dpt,lgt,bgt,amt,Nmt,mvt,Fvt,Hvt,Jvt,qyt,y0t,D0t,G0t,K0t,abt,hbt,_bt,Dbt,$bt,Swt]);En(Uwt);En(fxt);En(NAe);En(Axt);En(yke);En(Ixt);En($xt);En(ASt);En(GSt);En(gM);En(l_t);En(d_t);En(x_t);En(C_t);En(R_t);En(B_t);En(X_t);En(p1t);En(xCe);En(SCe);En(R1t);En(kCe);En(CCe);En($1t);En(Q1t);En(tTt);En(CTt);En(Jht);const cfe=n=>{if(n===0)return"0m";const e=Math.floor(n/60),t=n%60;return e===0?`${t}m`:t===0?`${e}h`:`${e}h ${t}m`},DTt=({data:n})=>{const e=Y.useRef(null),t=Y.useRef(null),{isLeftSidebarOpen:r}=dl();return Y.useEffect(()=>{if(!e.current)return;console.log("📊 UsageLineChart received data:",{dataLength:(n==null?void 0:n.length)||0,data:n==null?void 0:n.slice(0,5),totalOnScreenTime:(n==null?void 0:n.reduce((m,v)=>m+v.onScreenTime,0))||0,isEmpty:!n||n.length===0,sampleData:n==null?void 0:n[0]}),t.current&&(t.current.dispose(),t.current=null),t.current=QTe(e.current);const i=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()==="#141414",a=getComputedStyle(document.documentElement).getPropertyValue("--border-color").trim()||(i?"#2a2a2a":"#e5e7eb");if(!n||n.length===0){console.warn("📊 UsageLineChart: No data available, showing empty chart");const m={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No usage data available",fontSize:16,fill:i?"#a1a1aa":"#666"}}};t.current.setOption(m);return}const o=m=>{const v=new Date(m),y=v.toLocaleDateString("en-US",{month:"long"}),w=v.getDate();return`${y} ${w}`},l=n.map(m=>m.date).map(o),c=n.map(m=>m.onScreenTime),u=n.map(m=>m.workingTime),d=n.map(m=>m.deepFocusTime),h={animation:!1,tooltip:{trigger:"axis",backgroundColor:i?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:i?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,extraCssText:"min-width: 200px; white-space: nowrap;",textStyle:{color:i?"#ffffff":"#1f2937"},formatter:function(m){if(!m||m.length===0)return"";let v=`<div style="font-weight: 600; margin-bottom: 4px;">${m[0].axisValue}</div>`;return m.forEach(y=>{const w=y.color,S=y.seriesName,T=cfe(y.value||0);v+=`<div style="display: flex; align-items: center; margin: 2px 0;">
              <span style="display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: ${w}; margin-right: 8px;"></span>
              <span style="color: ${i?"#a1a1aa":"#6b7280"};">${S}</span>
              <span style="margin-left: auto; font-weight: 600; color: ${i?"#ffffff":"#1f2937"};">${T}</span>
            </div>`}),v}},legend:{data:["On Screen Time","Working Time","Deep Focus Time"],bottom:"0",icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:i?"#a1a1aa":"#666",fontSize:12}},grid:{left:"0",right:"20",top:"10",bottom:"30",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l,axisLine:{lineStyle:{color:i?"#404040":"#eee"}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m,v){return v===l.length-1?"{right|"+m+"}":m},rich:{right:{align:"right"}}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:a,type:[3,3],width:1}},axisLabel:{color:i?"#a1a1aa":"#666",formatter:function(m){return cfe(m)}}},series:[{name:"On Screen Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(87, 181, 231, 1)"},itemStyle:{color:"rgba(87, 181, 231, 1)",borderColor:"rgba(87, 181, 231, 1)",borderWidth:0},data:c},{name:"Working Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(34, 197, 94, 1)"},itemStyle:{color:"rgba(34, 197, 94, 1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:0},data:u},{name:"Deep Focus Time",type:"line",smooth:!0,symbol:"circle",symbolSize:8,showSymbol:!0,lineStyle:{width:3,color:"rgba(239, 68, 68, 1)"},itemStyle:{color:"rgba(239, 68, 68, 1)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:0},data:d}]};t.current.setOption(h);const f=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),t.current&&(t.current.dispose(),t.current=null)}},[n]),Y.useEffect(()=>{(()=>{setTimeout(()=>{t.current&&t.current.resize()},100)})()},[r]),x.jsx("div",{ref:e,className:"w-full h-full"})},ITt=({data:n})=>{const e=Y.useRef(null),t=Y.useRef(null);console.log("🥧 UsagePieChart received data:",{hasData:!!n,dataLength:(n==null?void 0:n.length)||0,totalTime:(n==null?void 0:n.reduce((i,a)=>i+a.timeSpent,0))||0,sampleData:(n==null?void 0:n.slice(0,3))||[],timestamp:new Date().toISOString()});const r=i=>{const a=Math.floor(i/60),o=i%60;return a===0?`${o}m`:o===0?`${a}h`:`${a}h ${o}m`};return Y.useEffect(()=>{if(!e.current)return;t.current=QTe(e.current);const i=document.documentElement,o=getComputedStyle(i).getPropertyValue("--bg-primary").trim()==="#141414"||i.classList.contains("dark")||i.getAttribute("data-theme")==="dark";if(!n||n.length===0){console.warn("🥧 UsagePieChart: No data available, showing empty chart");const v={animation:!1,graphic:{type:"text",left:"center",top:"middle",style:{text:"No site usage data available",fontSize:16,fill:o?"#a1a1aa":"#666"}},series:[]};t.current.setOption(v,!0);return}const s=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],l=n.slice(0,5),c=n.slice(5),u=c.reduce((v,y)=>v+y.timeSpent,0),d=c.reduce((v,y)=>v+y.sessions,0),h=[...l.map((v,y)=>{const w=sxe(v.url||v.name),S=s[y],T=oxe(w,S);return{value:v.timeSpent,name:v.name,timeSpent:v.timeSpent,sessions:v.sessions,itemStyle:{color:T}}})];n.length>5&&u>0&&h.push({value:u,name:"Others",timeSpent:u,sessions:d,itemStyle:{color:"#9CA3AF"}}),console.log("🥧 UsagePieChart: Rendering chart with data:",{chartDataLength:h.length,totalValue:h.reduce((v,y)=>v+y.value,0),hasOthers:h.some(v=>v.name==="Others")});const f={animation:!1,graphic:[],tooltip:{trigger:"item",backgroundColor:o?"rgba(42, 42, 42, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:o?"#404040":"#e2e8f0",borderWidth:1,borderRadius:8,padding:[12,16],textStyle:{color:o?"#ffffff":"#1f2937",fontSize:13},formatter:function(v){const y=v.data,w=v.percent,S=o?"#a1a1aa":"#6b7280";return`
            <div style="font-weight: 600; font-size: 14px; margin-bottom: 8px; color: ${o?"#ffffff":"#111827"};">
              ${y.name}
            </div>
            <div style="line-height: 1.5;">
              <div style="margin-bottom: 4px;">
                <span style="color: ${S};">Total time visited:</span>
                <span style="float: right; font-weight: 500;">${r(y.timeSpent)}</span>
              </div>
              <div style="margin-bottom: 4px;">
                <span style="color: ${S};">Total sessions:</span>
                <span style="float: right; font-weight: 500;">${y.sessions}</span>
              </div>
              <div>
                <span style="color: ${S};">Percentage:</span>
                <span style="float: right; font-weight: 500;">${w.toFixed(1)}%</span>
              </div>
            </div>
          `}},series:[{name:"Usage",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:o?"transparent":"#fff",borderWidth:o?0:2},label:{show:!0,position:"inside",formatter:"{d}%",fontSize:12,color:"#fff",fontWeight:"500",align:"center",verticalAlign:"middle",distance:"25%"},emphasis:{label:{show:!0,fontSize:14,fontWeight:"600"}},labelLine:{show:!1},data:h}]};t.current.setOption(f,!0),console.log("🥧 UsagePieChart: Chart updated with",h.length,"data points");const m=()=>{t.current&&t.current.resize()};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),t.current&&t.current.dispose()}},[n]),x.jsx("div",{ref:e,className:"w-full h-full"})},WK=({domain:n,size:e=32,className:t="",fallbackIcon:r="ri-global-line",onLoad:i,onError:a})=>{const o=r||ol.getDomainIcon(n),[s,l]=Y.useState(null),[c,u]=Y.useState(!0),[d,h]=Y.useState(!1),[f,m]=Y.useState(!1);return Y.useEffect(()=>{let v=!0;return n&&(async()=>{try{u(!0),h(!1),m(!1);const S=`https://www.google.com/s2/favicons?domain=${ol.cleanDomain(n)}&sz=${e*2}`,T=await new Promise(C=>{const k=new Image,A=setTimeout(()=>{C(!1)},2e3);k.onload=()=>{clearTimeout(A),k.width>16||k.height>16?C(!0):C(!1)},k.onerror=()=>{clearTimeout(A),C(!1)},k.src=S});v&&(T?(l(S),u(!1),i==null||i()):(m(!0),u(!1),a==null||a()))}catch{v&&(h(!0),u(!1),m(!0),a==null||a())}})(),()=>{v=!1}},[n,e,i,a,o]),c||f||!s?x.jsx("div",{className:`flex items-center justify-center bg-gray-100 rounded ${t}`,style:{width:e,height:e},children:x.jsx(mt,{name:o,className:"text-gray-600",size:Math.floor(e*.6)})}):x.jsx("div",{className:`flex items-center justify-center overflow-hidden rounded ${t}`,style:{width:e,height:e},title:`${n} favicon`,children:x.jsx("img",{src:s,alt:`${n} favicon`,width:e,height:e,className:"favicon-image",style:{objectFit:"contain",maxWidth:e,maxHeight:e},onError:v=>{m(!0),h(!0)}})})};class MTt{constructor(){$t(this,"cacheKey","siteUsage30Days");$t(this,"cacheDurationMs",24*60*60*1e3)}getTodayKey(){return new Date().toISOString().split("T")[0]}isCacheValid(e){const t=this.getTodayKey(),r=e.dateKey===t,i=Date.now()-e.timestamp<this.cacheDurationMs;return r&&i}async getLast30DaysUsage(){var e;try{const t=localStorage.getItem(this.cacheKey);if(t){const d=JSON.parse(t);if(this.isCacheValid(d))return console.log("📋 Using cached 30-day usage data"),d.data}console.log("🔄 Fetching fresh 30-day usage data");const{user:r}=Ht.getState();if(!(r!=null&&r.uid))return console.warn("⚠️ No user ID available for fetching usage data"),[];const i=new Date().toISOString().split("T")[0],a=new Date;a.setDate(a.getDate()-30);const o=a.toISOString().split("T")[0];let s;try{s=await Dc.getUserData(r.uid,o,i)}catch(d){if((e=d==null?void 0:d.message)!=null&&e.includes("index"))return console.warn("⚠️ Firebase index required for site usage query. Using fallback empty data."),[];throw d}const l=new Map;s.forEach(d=>{Object.entries(d.sites).forEach(([h,f])=>{const m=l.get(h),v=this.formatDomainName(h);m?(m.timeSpent+=f.timeSpent,m.visits+=f.visits):l.set(h,{timeSpent:f.timeSpent,visits:f.visits,name:v,icon:void 0})})});const c=Array.from(l.entries()).map(([d,h],f)=>({id:`cached_${d}_${f}`,name:h.name,url:d,timeSpent:Math.floor(h.timeSpent/(1e3*60)),sessions:h.visits,percentage:0,backgroundColor:this.getColorForSite(d),icon:ol.getDomainIcon(d)})).sort((d,h)=>h.timeSpent-d.timeSpent),u={data:c,timestamp:Date.now(),dateKey:this.getTodayKey()};return localStorage.setItem(this.cacheKey,JSON.stringify(u)),c}catch(t){return console.error("❌ Error fetching 30-day usage data:",t),[]}}formatDomainName(e){return e.replace(/^www\./,"").replace(/\b\w/g,t=>t.toUpperCase())}formatTimeSpent(e){const t=Math.floor(e/6e4),r=Math.floor(t/60),i=t%60;return r>0?`${r}h ${i}m`:`${i}m`}getColorForSite(e){let t=0;for(let i=0;i<e.length;i++)t=e.charCodeAt(i)+((t<<5)-t);return`hsl(${Math.abs(t)%360}, 70%, 50%)`}parseTimeToMinutes(e){const t=e.match(/(\d+)h/),r=e.match(/(\d+)m/),i=t?parseInt(t[1]):0,a=r?parseInt(r[1]):0;return i*60+a}clearCache(){localStorage.removeItem(this.cacheKey),console.log("🗑️ Site usage cache cleared")}}const ufe=new MTt,PTt=()=>{const[n,e]=Y.useState([]),[t,r]=Y.useState(!1),[i,a]=Y.useState(null),o=Y.useCallback(async()=>{r(!0),a(null);try{const l=await ufe.getLast30DaysUsage();e(l)}catch(l){a(l instanceof Error?l.message:"Failed to load usage data"),console.error("❌ Error loading cached site usage:",l),e([])}finally{r(!1)}},[]);return{siteUsage:n,isLoading:t,error:i,loadUsageData:o,clearCache:()=>{ufe.clearCache(),e([])}}},NTt=({isOpen:n,onClose:e,onAddSites:t})=>{const{siteUsage:r,isLoading:i,loadUsageData:a}=PTt(),[o,s]=Y.useState("visited"),[l,c]=Y.useState(new Set),[u,d]=Y.useState(!1),[h,f]=Y.useState(""),[m,v]=Y.useState(""),[y,w]=Y.useState(!1);Y.useEffect(()=>{n&&o==="visited"&&r.length===0&&!i&&a()},[n,o,r.length,i,a]);const S=r.map(R=>({name:R.name,url:R.url,icon:R.icon,backgroundColor:R.backgroundColor})),T=S.filter(R=>R.name.toLowerCase().includes(m.toLowerCase())||R.url.toLowerCase().includes(m.toLowerCase()));if(Y.useEffect(()=>(n?(w(!0),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",setTimeout(()=>{c(new Set),d(!1),f(""),v(""),s("visited"),w(!1)},300)),()=>{document.body.style.overflow="unset"}),[n]),!n&&!y)return null;const C=R=>{const L=new Set(l);L.has(R)?L.delete(R):L.add(R),c(L),d(L.size===T.length)},k=R=>{c(R?new Set(T.map(L=>L.url)):new Set),d(R)},A=()=>{if(o==="visited"){const R=S.filter(L=>l.has(L.url)).map(L=>({name:L.name,url:L.url,icon:L.icon,backgroundColor:L.backgroundColor,isActive:!0}));t(R)}else if(o==="manual"&&h){const R=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=R.split(".")[0];t([{name:L.charAt(0).toUpperCase()+L.slice(1),url:R,icon:"ri-global-line",backgroundColor:"#6B7280",isActive:!0}])}e()},D=o==="visited"?l.size:h?1:0,N=(()=>{if(!h)return null;const R=h.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0],L=R.split(".")[0];return{name:L.charAt(0).toUpperCase()+L.slice(1),domain:R}})();return x.jsx("div",{className:`fixed inset-0 bg-black flex items-center justify-center z-50 transition-all duration-300 ${n?"bg-opacity-50":"bg-opacity-0"}`,onClick:R=>{R.target===R.currentTarget&&e()},children:x.jsxs("div",{className:`bg-background-primary rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl transition-all duration-300 ${n?"scale-100 opacity-100 translate-y-0":"scale-95 opacity-0 translate-y-4"}`,style:{maxHeight:"85vh"},children:[x.jsxs("div",{className:"flex justify-between items-center mb-6 flex-shrink-0",children:[x.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Add Site to Block"}),x.jsx("button",{onClick:e,className:"text-text-secondary hover:text-text-primary transition-colors",children:x.jsx(mt,{name:"close-line",className:"w-6 h-6"})})]}),x.jsxs("div",{className:"flex gap-6 mb-6 flex-shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>s("visited"),children:[x.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",border:o==="visited"?"2px solid #BA4949":"2px solid #d1d5db",backgroundColor:"#00000000",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:x.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:o==="visited"?"#BA4949":"#00000000",transition:"all 0.2s ease"}})}),x.jsx("span",{className:"text-base text-text-primary",children:"Select visited sites"})]}),x.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>s("manual"),children:[x.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",border:o==="manual"?"2px solid #BA4949":"2px solid #d1d5db",backgroundColor:"#00000000",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:x.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:o==="manual"?"#BA4949":"#00000000",transition:"all 0.2s ease"}})}),x.jsx("span",{className:"text-base text-text-primary",children:"Input site URL"})]})]}),x.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[o==="visited"&&x.jsxs("div",{className:"flex flex-col min-h-0",children:[x.jsxs("div",{className:"relative mb-4 flex-shrink-0",children:[x.jsx("input",{type:"text",value:m,onChange:R=>v(R.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"Search sites..."}),x.jsx("div",{className:"absolute left-3 top-2.5 flex items-center h-5 text-text-secondary pointer-events-none",children:x.jsx("i",{className:"ri-search-line text-base"})})]}),x.jsx("div",{className:"flex-1 min-h-0",children:x.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto custom-scrollbar",children:i?x.jsxs("div",{className:"flex items-center justify-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),x.jsx("span",{className:"ml-3 text-text-secondary",children:"Loading sites..."})]}):T.length===0?x.jsxs("div",{className:"text-center py-8 text-text-secondary",children:[x.jsx("i",{className:"ri-global-line text-5xl mx-auto mb-3 opacity-50 block"}),x.jsx("p",{children:"No sites found"})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>k(!u),children:[x.jsx(_D,{checked:u,onChange:k}),x.jsx("span",{className:"text-base font-medium text-text-primary",children:"Select all sites"}),l.size>0&&x.jsxs("span",{className:"text-sm text-primary font-medium ml-auto",children:[l.size," selected"]})]}),T.map(R=>x.jsxs("div",{className:"add-site-modal-item flex items-center gap-3 p-3 rounded-lg transition-colors cursor-pointer",onClick:()=>C(R.url),children:[x.jsx(_D,{checked:l.has(R.url),onChange:()=>C(R.url)}),x.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 pointer-events-none",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(WK,{domain:R.url,size:32,fallbackIcon:R.icon})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"font-medium text-text-primary truncate",children:R.name}),x.jsx("div",{className:"text-sm text-text-secondary truncate",children:R.url})]})]})]},R.url))]})})})]}),o==="manual"&&x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"relative mb-4",children:x.jsx("input",{type:"text",value:h,onChange:R=>f(R.target.value),className:"w-full px-4 py-3 text-base border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-background-container text-text-primary placeholder-text-secondary",placeholder:"https://www.facebook.com/"})}),N&&x.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-background-container rounded-lg",children:[x.jsx("div",{className:"w-10 h-10 bg-[#1877F2] rounded-lg flex items-center justify-center",children:x.jsx(mt,{name:"global-line",className:"text-xl text-white"})}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-text-primary",children:N.name}),x.jsx("div",{className:"text-sm text-text-secondary",children:N.domain})]})]})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6 flex-shrink-0",children:[x.jsx("button",{onClick:e,className:"px-6 py-2 border border-border rounded-lg text-text-secondary hover:bg-background-container hover:text-text-primary font-medium transition-colors",children:"Cancel"}),x.jsxs("button",{onClick:A,disabled:D===0,className:`px-6 py-2 rounded-lg font-medium transition-colors ${D>0?"bg-primary text-white hover:bg-primary/90":"bg-background-container text-text-secondary cursor-not-allowed"}`,children:["Add Site (",D,")"]})]})]})})},RTt=({checked:n,onChange:e,disabled:t=!1})=>x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:n,onChange:r=>e(r.target.checked),disabled:t,className:"sr-only peer"}),x.jsx("div",{className:"w-10 h-5 bg-background-container peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-[20px] peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-border after:border after:rounded-full after:h-4 after:w-4 after:transition-all duration-300 peer-checked:bg-[#BB5F5A] peer-disabled:opacity-50 peer-disabled:cursor-not-allowed"})]}),OTt=({site:n,onToggle:e,onRemove:t})=>{const[r,i]=Y.useState(!1),a=n.icon,o=()=>{i(!0),setTimeout(()=>{t()},300)};return x.jsxs("div",{className:`flex items-center justify-between p-4 bg-background-container rounded-lg transition-all duration-300 ease-in-out border border-border
        ${r?"opacity-0 scale-95 h-0 py-0 my-0 overflow-hidden":"opacity-100 scale-100"}
        ${n.isActive?"":"opacity-60"}`,children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"mr-4 transition-all duration-200",children:x.jsx(WK,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:a})}),x.jsx("span",{className:"font-medium text-text-primary",children:n.name})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("button",{onClick:o,className:"p-1.5 text-text-secondary hover:text-red-500 transition-colors duration-200 hover:scale-110",title:"Remove site",children:x.jsx(mt,{name:"delete-bin-line",className:"w-5 h-5"})}),x.jsx(RTt,{checked:n.isActive,onChange:e})]})]})},LTt=({site:n,formatTime:e,color:t,percentage:r})=>{const i=t||n.backgroundColor,a=r!==void 0?r:n.percentage;return x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"mr-3",children:x.jsx(WK,{domain:n.url,size:32,className:"shadow-sm",fallbackIcon:n.icon})}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-text-primary",children:n.name}),x.jsxs("div",{className:"text-xs text-text-secondary",children:[n.sessions," sessions"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"font-medium text-text-primary",children:e(n.timeSpent)}),x.jsxs("div",{className:"text-xs text-text-secondary",children:[a.toFixed(1),"%"]})]})]}),x.jsx("div",{className:"w-full bg-background-container rounded-full h-1.5 overflow-hidden",children:x.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500 ease-out",style:{width:`${a}%`,backgroundColor:i}})})]})},jTt=({isBackingUp:n,lastBackupTime:e,backupError:t,onRetryBackup:r})=>{var m;const[i,a]=Y.useState(null),{getSyncStatus:o,retryBackup:s}=il(),l=n!==void 0?n:i==null?void 0:i.isBackingUp,c=e!==void 0?e:i==null?void 0:i.lastBackupTime,u=t!==void 0?t:i==null?void 0:i.backupError;Y.useEffect(()=>{if(n===void 0&&e===void 0&&t===void 0){const v=()=>{a(o())};v();const y=setInterval(v,5e3);return()=>clearInterval(y)}},[o,n,e,t]);const d=()=>l?"⏳":u?"❌":c?"✅":"🔄",h=()=>l?"Syncing...":u?`Error: ${u}`:c?`Last sync: ${new Date(c).toLocaleTimeString()}`:"No sync yet",f=()=>{r?r():s()};return x.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[x.jsx("span",{className:"text-lg",children:d()}),x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:h()}),u&&x.jsx("button",{onClick:f,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Retry"}),((m=i==null?void 0:i.circuitBreaker)==null?void 0:m.state)==="OPEN"&&x.jsxs("span",{className:"text-xs text-orange-500",children:["Cooling down... (",Math.ceil(i.circuitBreaker.timeUntilRetry/1e3),"s)"]})]})},FTt=()=>{const{enableDeepFocus:n,disableDeepFocus:e}=GW(),{blockedSites:t,isExtensionConnected:r,isDeepFocusActive:i,totalSessionsCount:a,deepFocusSessions:o,loadDeepFocusSessions:s,subscribeToSessions:l,unsubscribeFromSessions:c,toggleBlockedSite:u,removeBlockedSite:d,addBlockedSite:h,loadBlockedSites:f,blockSiteInExtension:m,unblockSiteInExtension:v,toggleDeepFocus:y,loadFocusStatus:w,activeSessionId:S,activeSessionDuration:T,initializeDailyBackup:C,isBackingUp:k,lastBackupTime:A,backupError:D,backupTodayData:P,loadHybridTimeRangeData:N,isSessionPaused:R,autoSessionManagement:L,setAutoSessionManagement:B,recordOverrideSession:$,overrideSessions:G,loadOverrideSessions:W,comparisonData:K,isLoadingComparison:X,comparisonError:te,loadComparisonData:ie}=il(),{user:z}=Ht(),{isLeftSidebarOpen:se,toggleLeftSidebar:ce}=dl(),[ee,be]=Y.useState(!1),[fe,De]=Y.useState(!1),[dt,ve]=Y.useState(!1),de=()=>{const Ue=new Date,ne=new Date(Ue.getFullYear(),Ue.getMonth(),Ue.getDate()),oe=new Date(ne);oe.setHours(0,0,0,0);const ge=new Date(ne);return ge.setHours(23,59,59,999),{startDate:oe,endDate:ge,rangeType:"today"}},[me,xe]=Y.useState(de()),[pe,$e]=Y.useState(null),[We,ct]=Y.useState(null),[xt,At]=Y.useState(!1),{timeMetrics:pn,dailyUsage:Yt,siteUsage:Rn,isLoading:vn,loadExtensionData:Fn,loadAllTimeExtensionData:je}=Nit(),[an,yn]=Y.useState(!1),Te=(vn||k||X)&&!an;QSe(),Y.useEffect(()=>{if(k||vn||X){yn(!1);const Ue=setTimeout(()=>{yn(!0),console.warn("⚠️ Loading operation timed out after 8 seconds")},8e3);return()=>clearTimeout(Ue)}},[k,vn,X]),we.useEffect(()=>{window.debugBackupTodayData=async()=>{try{if(console.log("🔧 Manual debug backup triggered..."),await P(),console.log("✅ Manual debug backup completed"),console.log("🔄 Reloading data after manual sync..."),me.rangeType==="all time")je();else{const Ue=me.startDate||new Date,ne=me.endDate||new Date;Ue&&ne&&Fn(Ue,ne)}console.log("✅ Data reloaded after manual sync")}catch(Ue){console.error("❌ Manual debug backup failed:",Ue)}},window.debugUser=z,window.resetBackupState=()=>{console.log("🔧 Manually resetting backup state...");const Ue=il.getState();console.log("🔍 Current state:",{isBackingUp:Ue.isBackingUp,lastBackupTime:Ue.lastBackupTime,backupError:Ue.backupError}),il.setState({isBackingUp:!1,backupError:null,lastBackupTime:new Date}),console.log("✅ Backup state reset")},console.log("🔧 Debug functions exposed:",{debugBackupTodayData:typeof P,debugUser:(z==null?void 0:z.uid)||"No user",resetBackupState:"function"})},[P,z]);const Oe=Gg(),et=ns(),Ne=Y.useRef(null),Je=Y.useRef(null),pt=Y.useRef(null),Kt=async()=>{console.log("🔄 Resetting extension connection...");const{default:Ue}=await nn(async()=>{const{default:ne}=await Promise.resolve().then(()=>Vje);return{default:ne}},void 0);Ue.resetCircuitBreaker(),await vt(),console.log("✅ Extension connection reset complete")},vt=async()=>{if(console.log("🔄 handleLoadData called for range:",me.rangeType),z!=null&&z.uid)try{console.log("🚀 Triggering sync before loading data..."),await P(),console.log("✅ Sync completed before data load")}catch(Ue){console.error("❌ Sync failed before data load:",Ue)}if(me.rangeType==="all time")console.log("🔄 Reloading all time data after sync..."),je();else{const Ue=me.startDate||new Date,ne=me.endDate||new Date;Ue&&ne&&(console.log("🔄 Reloading range data after sync...",{startDate:Ue,endDate:ne}),Fn(Ue,ne))}};Y.useEffect(()=>{vt()},[me]),Y.useEffect(()=>{z!=null&&z.uid&&f(z.uid)},[z==null?void 0:z.uid]),Y.useEffect(()=>{console.log("🔧 Deep Focus: Sidebar state changed",{isLeftSidebarOpen:se,timestamp:new Date().toISOString()}),requestAnimationFrame(()=>{const Ue=document.getElementById("sidebar");Ue&&(console.log("🔧 Deep Focus: Sidebar element found",{currentWidth:Ue.style.width,className:Ue.className,isOpen:se}),Ue.style.display="flex",se?(Ue.style.width="16rem",Ue.classList.remove("w-0"),Ue.classList.add("w-64")):(Ue.style.width="0px",Ue.classList.remove("w-64"),Ue.classList.add("w-0")))})},[se]),Y.useEffect(()=>{C(),setTimeout(async()=>{try{if(console.log("🔍 triggerImmediateSync called (page load/reload)"),console.log("🔍 user:",z),console.log("🔍 user?.uid:",z==null?void 0:z.uid),console.log("🔍 backupTodayData type:",typeof P),z!=null&&z.uid){if(console.log("🚀 Deep Focus page loaded/reloaded - triggering immediate sync..."),console.log("🔍 About to call backupTodayData..."),await P(),console.log("✅ Immediate sync completed on page load"),console.log("🔄 Reloading data after initial sync..."),me.rangeType==="all time")je();else{const ne=me.startDate||new Date,oe=me.endDate||new Date;ne&&oe&&Fn(ne,oe)}console.log("✅ Data reloaded after initial sync")}else console.warn("⚠️ User not authenticated, skipping immediate sync")}catch(ne){console.error("❌ Immediate sync failed:",ne),console.error("🔍 Error details:",{name:ne.name,message:ne.message,stack:ne.stack})}},500)},[C,P,z==null?void 0:z.uid]),Y.useEffect(()=>{const Ue=async()=>{try{const ne=[...t.map(oe=>oe.url),...Rn.map(oe=>oe.url)];await Promise.all([ol.preloadFavicons(ne,32),ol.preloadFavicons(ne,40)]),console.log("Favicons preloaded for",ne.length,"domains")}catch(ne){console.warn("Failed to preload some favicons:",ne)}};(t.length>0||Rn.length>0)&&Ue()},[t,Rn]),Y.useEffect(()=>{const Ue=ne=>{if(Ne.current&&!Ne.current.contains(ne.target)){if(De(!1),pt.current&&pt.current.isOpen)return;ve(!1)}};return document.addEventListener("mousedown",Ue),()=>{document.removeEventListener("mousedown",Ue)}},[]),Y.useEffect(()=>{if(dt&&Je.current&&!pt.current){At(!0);const Ue=ka(Je.current,{mode:"range",dateFormat:"M d, Y",maxDate:new Date,defaultDate:[de().startDate,de().endDate].filter(Boolean),onChange:function(ne){if(ne.length===2)if(Math.ceil((ne[1].getTime()-ne[0].getTime())/864e5)>365){const ge=new Date(ne[0]);ge.setDate(ge.getDate()+364),Ue.setDate([ne[0],ge])}else $e(ne[0]),ct(ne[1]);else ne.length===1&&($e(ne[0]),ct(null))},onClose:function(){if(xt){At(!1);return}}});pt.current=Ue,Ue.open()}return()=>{!dt&&pt.current&&(pt.current.destroy(),pt.current=null)}},[dt,xt]);const Sn=async Ue=>{const ne=t.find(oe=>oe.id===Ue);if(ne){await u(Ue);try{ne.isActive?await v(ne.url):await m(ne.url)}catch(oe){console.error("Failed to sync with extension:",oe)}}},on=async Ue=>{const ne=t.find(oe=>oe.id===Ue);if(ne){await d(Ue);try{await v(ne.url)}catch(oe){console.error("Failed to unblock site in extension:",oe)}}},Jt=async Ue=>{for(const ne of Ue){await h(ne);try{await m(ne.url)}catch(oe){console.error("Failed to block site in extension:",oe)}}},Cr=Ue=>Ue.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),hn=Ue=>{const ne=new Date,oe=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()),ge=new Date(oe);ge.setHours(23,59,59,999);const ke=new Date(oe);ke.setHours(0,0,0,0);let qe="today";switch(Ue){case"Today":qe="today",xe({startDate:ke,endDate:ge,rangeType:qe});break;case"Yesterday":{const nt=new Date(oe);nt.setDate(oe.getDate()-1);const _t=new Date(nt);_t.setHours(0,0,0,0);const ot=new Date(nt);ot.setHours(23,59,59,999),qe="yesterday",xe({startDate:_t,endDate:ot,rangeType:qe});break}case"Last 7 Days":{const nt=new Date(oe);nt.setDate(oe.getDate()-6),nt.setHours(0,0,0,0),qe="last 7 days",xe({startDate:nt,endDate:ge,rangeType:qe});break}case"Last 30 Days":{const nt=new Date(oe);nt.setDate(oe.getDate()-29),nt.setHours(0,0,0,0),qe="last 30 days",xe({startDate:nt,endDate:ge,rangeType:qe});break}case"Custom Range":ve(!0),De(!1);return;default:qe="all time",xe({startDate:null,endDate:null,rangeType:qe})}De(!1)},Si=()=>{if(pe&&We){const Ue=new Date;if(Ue.setHours(23,59,59,999),pe>Ue||We>Ue){console.warn("Cannot select future dates for productivity analysis");return}const ne=new Date(pe);ne.setHours(0,0,0,0);const oe=new Date(We);if(oe.setHours(23,59,59,999),xe({startDate:ne,endDate:oe,rangeType:"custom"}),ve(!1),pt.current){try{pt.current.destroy()}catch(ge){console.warn("Error destroying date picker:",ge)}pt.current=null}}},mo=()=>{switch(me.rangeType){case"today":return"Today";case"yesterday":return"Yesterday";case"last 7 days":return"Last 7 days";case"last 30 days":return"Last 30 days";case"custom":return me.startDate&&me.endDate?`${Cr(me.startDate)} - ${Cr(me.endDate)}`:"Custom Range";default:return"All time"}},ze=Ue=>{const ne=Math.floor(Ue/60),oe=Ue%60;return ne===0?`${oe}m`:oe===0?`${ne}h`:`${ne}h ${oe}m`},bn=Ue=>{if(!K||me.rangeType==="all time")return{label:"All time data",color:"text-gray-500",icon:"—"};const ne=K.current[Ue],oe=K.previous[Ue];let ge="previous period";switch(me.rangeType){case"today":ge="yesterday";break;case"last 7 days":ge="previous week";break;case"last 30 days":ge="previous month";break;default:ge="previous period"}return JQe(ne,oe,ge)};return x.jsxs("div",{className:"deep-focus-page-container flex h-screen bg-background-primary dark:bg-[#141414]",children:[x.jsx(Pw,{}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsxs("div",{className:"h-16 border-b border-border flex items-center justify-between px-4 bg-background-secondary transition-colors duration-200 relative",children:[x.jsxs("div",{className:"flex items-center",children:[!se&&x.jsx("button",{onClick:ce,className:"p-2 mr-2 rounded-md hover:bg-background-primary hover:shadow-sm hover:scale-105 transition-all duration-200 group","aria-label":"Show Sidebar",children:x.jsx("div",{className:"w-5 h-5 flex items-center justify-center text-text-secondary group-hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"menu-line",size:20})})}),x.jsx("div",{className:`text-lg font-semibold transition-all duration-500 ${i?"bg-gradient-to-r from-[rgb(187,95,90)] via-[rgb(236,72,153)] to-[rgb(251,146,60)] bg-clip-text text-transparent font-bold":"text-text-primary"}`,children:"Deep Focus"}),x.jsx("div",{className:"ml-4 flex items-center gap-4",children:x.jsx("div",{className:"flex flex-col",children:x.jsxs("label",{className:"relative inline-flex items-center cursor-pointer group",children:[x.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i,onChange:async Ue=>{console.log("Deep Focus switch toggled:",Ue.target.checked,"User:",z);try{Ue.target.checked?(console.log("🟢 Enabling Deep Focus..."),await n("web"),console.log("✅ Deep Focus enabled successfully")):(console.log("🔴 Disabling Deep Focus..."),await e(),console.log("✅ Deep Focus disabled successfully"))}catch(ne){console.error("❌ Failed to toggle Deep Focus:",ne),setTimeout(()=>{const oe=Ue.target;oe&&(oe.checked=!Ue.target.checked)},100),alert(`Failed to ${Ue.target.checked?"enable":"disable"} Deep Focus: ${ne instanceof Error?ne.message:"Unknown error"}`)}}}),x.jsx("div",{className:`w-[120px] h-[33px] flex items-center rounded-full transition-all duration-500 relative ${i?"bg-gradient-to-r from-[rgba(187,95,90,0.9)] via-[rgba(236,72,153,0.9)] to-[rgba(251,146,60,0.9)] shadow-[0_0_15px_rgba(236,72,153,0.3)] border border-white/20 justify-start pl-[10.5px]":"bg-gray-100/80 border-0 justify-end pr-[10.5px]"}`,children:x.jsx("span",{className:`text-sm font-medium transition-colors duration-500 relative z-10 whitespace-nowrap ${i?"text-white font-semibold [text-shadow:0_0_12px_rgba(255,255,255,0.5)]":"text-gray-600 font-semibold"}`,children:i?"Deep Focus":"Focus Off"})}),x.jsx("div",{className:`absolute w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-500 ${i?"left-[calc(100%-27px)] shadow-[0_6px_20px_rgba(187,95,90,0.2)]":"left-1.5 shadow-[0_2px_8px_rgba(0,0,0,0.1)]"}`})]})})})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"relative",ref:Ne,children:[x.jsxs("button",{className:"px-4 py-1.5 text-sm font-medium bg-background-secondary border border-border rounded-button text-text-primary hover:bg-background-container flex items-center space-x-2",onClick:()=>{if(De(!fe),dt&&(ve(!1),pt.current)){try{pt.current.destroy()}catch(Ue){console.warn("Error destroying date picker:",Ue)}pt.current=null}},children:[x.jsx("span",{children:mo()}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(mt,{name:"arrow-down-s-line",className:"w-4 h-4"})})]}),fe&&x.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-background-secondary rounded-lg shadow-lg border border-border py-2 z-10",children:[x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>hn("Today"),children:"Today"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>hn("Yesterday"),children:"Yesterday"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>hn("Last 7 Days"),children:"Last 7 days"}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>hn("Last 30 Days"),children:"Last 30 days"}),x.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container flex items-center justify-between",onClick:()=>hn("Custom Range"),children:[x.jsx("span",{children:"Time range"}),x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",className:"w-4 h-4"})})]}),x.jsx("button",{className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-background-container",onClick:()=>hn("All time"),children:"All time"})]}),dt&&x.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-background-secondary rounded-lg shadow-lg border border-border p-4 z-10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Select date range"}),x.jsx("button",{className:"text-text-secondary hover:text-text-primary",onClick:()=>{if(ve(!1),pt.current){try{pt.current.destroy()}catch(Ue){console.warn("Error destroying date picker:",Ue)}pt.current=null}},children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(mt,{name:"close-line",className:"w-4 h-4"})})})]}),x.jsx("div",{children:x.jsx("input",{ref:Je,type:"text",id:"date-range-input",name:"date-range",className:"w-full px-3 py-1.5 text-sm border border-border rounded-button focus:outline-none focus:border-primary bg-background-primary text-text-primary",placeholder:"Select date range",readOnly:!0})}),x.jsxs("div",{className:"mt-2 text-xs text-text-secondary",children:[pe&&!We?"Select end date":pe?"":"Select start date",(!pe||!We)&&x.jsx("div",{className:"text-text-secondary mt-1",children:"Note: Future dates cannot be selected for productivity analysis"})]}),x.jsx("div",{className:"mt-4 flex justify-end",children:x.jsx("button",{className:"px-4 py-1.5 text-sm font-medium bg-primary border border-primary rounded-button text-white hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Si,disabled:!pe||!We,children:"Apply"})})]})]}),x.jsx(ni,{text:"Pomodoro Timer",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${et.pathname==="/pomodoro"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:et.pathname==="/pomodoro"?void 0:()=>Oe("/pomodoro"),"aria-label":et.pathname==="/pomodoro"?"Current page: Pomodoro Timer":"Go to Pomodoro Timer",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"timer-line",size:20})})})}),x.jsx(ni,{text:"Task management",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${et.pathname==="/projects"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:et.pathname==="/projects"?void 0:()=>Oe("/projects"),"aria-label":et.pathname==="/projects"?"Current page: Task Management":"Go to Task Management",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"task-line",size:20})})})}),x.jsx(ni,{text:"Productivity Insights",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${et.pathname==="/dashboard"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:et.pathname==="/dashboard"?void 0:()=>Oe("/dashboard"),"aria-label":et.pathname==="/dashboard"?"Current page: Productivity Insights":"Go to Productivity Insights",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"dashboard-line",size:20})})})}),x.jsx(ni,{text:"Calendar",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${et.pathname==="/calendar"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:et.pathname==="/calendar"?void 0:()=>Oe("/calendar"),"aria-label":et.pathname==="/calendar"?"Current page: Calendar":"Go to Calendar",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"calendar-line",size:20})})})}),x.jsx(ni,{text:"Deep Focus",children:x.jsx("button",{className:`p-2 rounded-full !rounded-button whitespace-nowrap text-text-secondary ${et.pathname==="/deep-focus"?"bg-background-container text-text-primary":"hover:bg-background-container hover:text-text-primary"}`,onClick:et.pathname==="/deep-focus"?void 0:()=>Oe("/deep-focus"),"aria-label":et.pathname==="/deep-focus"?"Current page: Deep Focus":"Go to Deep Focus",children:x.jsx("span",{className:"w-5 h-5 flex items-center justify-center",children:x.jsx(mt,{name:"brain-line",size:20})})})})]})]}),x.jsxs("main",{className:"flex-1 p-6 flex gap-6 overflow-y-auto scrollbar-thin relative",children:[Te&&x.jsx("div",{className:"absolute inset-0 bg-background-primary/50 flex items-center justify-center z-10",children:x.jsx("div",{className:"bg-background-secondary rounded-lg p-6 shadow-lg border border-border",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),x.jsx("span",{className:"text-text-primary font-medium",children:k?"Syncing with extension...":X?"Loading comparison data...":vn?me.rangeType==="today"?"Loading today's data...":`Loading ${mo().toLowerCase()} data...`:"Loading..."})]})})}),x.jsxs("div",{className:"w-2/3 space-y-6",children:[x.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"On Screen Time",value:pn.onScreenTime,metricKey:"onScreenTime",icon:"computer-line",iconColor:"text-blue-500",iconBg:"bg-blue-50",valueColor:"text-blue-500",hoverBorder:"hover:border-blue-100"},{label:"Working Time",value:pn.workingTime,metricKey:"workingTime",icon:"timer-line",iconColor:"text-green-500",iconBg:"bg-green-50",valueColor:"text-green-500",hoverBorder:"hover:border-green-100"},{label:"Deep Focus Time",value:pn.deepFocusTime,metricKey:"deepFocusTime",icon:"focus-3-line",iconColor:"text-red-500",iconBg:"bg-red-50",valueColor:"text-red-500",hoverBorder:"hover:border-red-100",isDeepFocusTime:!0},{label:"Override Time",value:pn.overrideTime,metricKey:"overrideTime",icon:"time-line",iconColor:"text-orange-500",iconBg:"bg-orange-50",valueColor:"text-orange-500",hoverBorder:"hover:border-orange-100"}].map((Ue,ne)=>{const oe=bn(Ue.metricKey),ge=ke=>{switch(ke){case"On Screen Time":return"Total time spent on all websites";case"Working Time":return"Total time in active Pomodoro sessions";case"Deep Focus Time":return"Total time with Deep Focus mode enabled";case"Override Time":return"Total time spent overriding blocked websites";default:return ke}};return x.jsxs("div",{className:`bg-background-secondary p-6 rounded-lg border border-border ${Ue.hoverBorder} transition-all duration-300 group`,children:[x.jsxs("div",{className:"flex justify-between items-start mb-3",children:[x.jsx("div",{className:`w-10 h-10 ${Ue.iconBg} rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:x.jsx(mt,{name:Ue.icon,className:`text-xl ${Ue.iconColor}`,size:20})}),x.jsx(ni,{text:ge(Ue.label),placement:"bottom",children:x.jsx("button",{className:"text-text-secondary hover:text-text-primary opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:x.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:x.jsx(mt,{name:"information-line",className:"w-4 h-4"})})})})]}),x.jsx("h3",{className:"text-sm text-text-secondary mb-1",children:Ue.label}),x.jsx("div",{className:`text-2xl font-semibold ${Ue.valueColor}`,children:ze(Ue.value)}),x.jsx("div",{className:`flex items-center mt-3 text-xs font-medium ${oe.color}`,children:x.jsx("span",{children:oe.label})})]},ne)})}),x.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"text-sm font-medium text-text-primary",children:["Usage Time: ",x.jsx("span",{className:"text-text-secondary",children:ze(0)})]}),x.jsx("div",{className:"flex space-x-2",children:x.jsx("button",{className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",children:x.jsx(mt,{name:"more-2-fill",className:"w-5 h-5"})})})]}),x.jsx("div",{className:`w-full transition-all duration-500 ${se?"h-72":"h-80"}`,children:x.jsx(DTt,{data:Yt})})]}),x.jsxs("div",{className:"bg-background-secondary rounded-lg p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:"text-lg font-medium text-text-primary",children:"BLOCKED"}),x.jsxs("div",{className:"flex items-center gap-2",style:{display:"none"},children:[x.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${r?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[x.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-yellow-500"}`}),r?"Extension Connected":"Extension Offline",!r&&x.jsx("button",{onClick:Kt,className:"ml-2 px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reset"})]}),x.jsx("button",{onClick:()=>{vt()},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Refresh extension data",children:x.jsx(mt,{name:"refresh-line",className:"w-4 h-4"})}),x.jsx("div",{className:"border-l border-border pl-2",children:x.jsx(jTt,{isBackingUp:k,lastBackupTime:A,backupError:D,onRetryBackup:P})}),(z==null?void 0:z.uid)&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:async()=>{try{if(console.log("🧪 Quick override test..."),z!=null&&z.uid){const Ue=await JSe(z.uid);Ue.success&&(console.log("✅ Quick test completed:",Ue),await W(z.uid,me.startDate||void 0,me.endDate||void 0))}}catch(Ue){console.error("❌ Quick test failed:",Ue)}},className:"p-1 text-text-secondary hover:text-text-primary transition-colors duration-200",title:"Quick Override Test (simple test)",style:{display:"none"},children:x.jsx(mt,{name:"play-line",className:"w-4 h-4"})}),x.jsx("button",{onClick:async()=>{try{if(console.log("🔧 Fixing blocked sites icons..."),z!=null&&z.uid){const{fixBlockedSitesIcons:Ue}=await nn(async()=>{const{fixBlockedSitesIcons:oe}=await import("./fixBlockedSitesIcons-BNX4ht9_.js");return{fixBlockedSitesIcons:oe}},[]),ne=await Ue(z.uid);console.log("✅ Icon fix completed:",ne,"sites fixed"),await f(z.uid),alert(`Fixed ${ne} blocked sites with proper icons!`)}}catch(Ue){console.error("❌ Failed to fix icons:",Ue),alert("Failed to fix icons. Check console for details.")}},className:"p-1 text-orange-500 hover:text-orange-600 transition-colors duration-200",title:"Fix Missing Icons (one-time migration)",style:{display:"none"},children:x.jsx(mt,{name:"tools-line",className:"w-4 h-4"})})]})]})]}),x.jsx("button",{onClick:()=>be(!0),className:"p-2 bg-[#BA4949] text-white rounded-full hover:bg-opacity-90 transition-all duration-200 hover:scale-105",children:x.jsx(mt,{name:"add-line",className:"w-5 h-5"})})]}),x.jsx("div",{className:"space-y-4",children:t.map(Ue=>x.jsx(OTt,{site:Ue,onToggle:()=>Sn(Ue.id),onRemove:()=>on(Ue.id)},Ue.id))})]})]}),x.jsx("div",{className:"w-1/3 space-y-6",children:x.jsxs("div",{className:"bg-background-secondary rounded-lg",children:[x.jsx("h2",{className:"text-lg font-medium mb-6 text-text-primary p-6 pb-0",children:"Your Usage"}),x.jsx("div",{className:"w-full h-48 mb-4",children:x.jsx(ITt,{data:Rn})}),x.jsx("div",{className:"space-y-4 px-6 pb-6",children:Rn.map((Ue,ne)=>{const oe=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de"],ge=sxe(Ue.url||Ue.name),ke=ne<5?oe[ne]:"#9CA3AF",qe=oxe(ge,ke),nt=Rn.reduce((ot,St)=>ot+St.timeSpent,0),_t=nt>0?Ue.timeSpent/nt*100:0;return x.jsx(LTt,{site:Ue,formatTime:ze,color:qe,percentage:_t},Ue.id)})})]})})]})]}),x.jsx(NTt,{isOpen:ee,onClose:()=>be(!1),onAddSites:Jt})]})},$Tt=({title:n="Loading",subtitle:e="Please wait...",variant:t="full"})=>t==="inline"?x.jsxs("div",{className:"flex items-center justify-center space-x-3 p-4",children:[x.jsx("div",{className:"w-32 h-1 bg-gray-200 rounded-full overflow-hidden",children:x.jsx("div",{className:"w-full h-full bg-primary rounded-full animate-pulse"})}),x.jsx("span",{className:"text-sm text-gray-600",children:n})]}):t==="minimal"?x.jsx("div",{className:"flex items-center justify-center p-8",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden mx-auto mb-4",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full animate-pulse"})}),x.jsx("p",{className:"text-sm font-medium text-gray-700",children:n}),e&&x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e})]})}):x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:x.jsxs("div",{className:"text-center max-w-md w-full",children:[x.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:n}),x.jsx("p",{className:"text-gray-500 mb-8",children:e}),x.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-4",children:x.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full",style:{animation:"loading-progress 2s ease-in-out infinite"}})})]})});function BTt(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const UTt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,VTt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zTt={};function dfe(n,e){return(zTt.jsx?VTt:UTt).test(n)}const HTt=/[ \t\n\f\r]/g;function GTt(n){return typeof n=="object"?n.type==="text"?hfe(n.value):!1:hfe(n)}function hfe(n){return n.replace(HTt,"")===""}class mM{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}mM.prototype.normal={};mM.prototype.property={};mM.prototype.space=void 0;function LCe(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new mM(t,r,e)}function $G(n){return n.toLowerCase()}class Kl{constructor(e,t){this.attribute=t,this.property=e}}Kl.prototype.attribute="";Kl.prototype.booleanish=!1;Kl.prototype.boolean=!1;Kl.prototype.commaOrSpaceSeparated=!1;Kl.prototype.commaSeparated=!1;Kl.prototype.defined=!1;Kl.prototype.mustUseProperty=!1;Kl.prototype.number=!1;Kl.prototype.overloadedBoolean=!1;Kl.prototype.property="";Kl.prototype.spaceSeparated=!1;Kl.prototype.space=void 0;let WTt=0;const Zn=ox(),Ua=ox(),BG=ox(),lt=ox(),Ci=ox(),r1=ox(),Tc=ox();function ox(){return 2**++WTt}const UG=Object.freeze(Object.defineProperty({__proto__:null,boolean:Zn,booleanish:Ua,commaOrSpaceSeparated:Tc,commaSeparated:r1,number:lt,overloadedBoolean:BG,spaceSeparated:Ci},Symbol.toStringTag,{value:"Module"})),pV=Object.keys(UG);class qK extends Kl{constructor(e,t,r,i){let a=-1;if(super(e,t),ffe(this,"space",i),typeof r=="number")for(;++a<pV.length;){const o=pV[a];ffe(this,pV[a],(r&UG[o])===UG[o])}}}qK.prototype.defined=!0;function ffe(n,e,t){t&&(n[e]=t)}function RT(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const a=new qK(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,t[$G(r)]=r,t[$G(a.attribute)]=r}return new mM(e,t,n.space)}const jCe=RT({properties:{ariaActiveDescendant:null,ariaAtomic:Ua,ariaAutoComplete:null,ariaBusy:Ua,ariaChecked:Ua,ariaColCount:lt,ariaColIndex:lt,ariaColSpan:lt,ariaControls:Ci,ariaCurrent:null,ariaDescribedBy:Ci,ariaDetails:null,ariaDisabled:Ua,ariaDropEffect:Ci,ariaErrorMessage:null,ariaExpanded:Ua,ariaFlowTo:Ci,ariaGrabbed:Ua,ariaHasPopup:null,ariaHidden:Ua,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ci,ariaLevel:lt,ariaLive:null,ariaModal:Ua,ariaMultiLine:Ua,ariaMultiSelectable:Ua,ariaOrientation:null,ariaOwns:Ci,ariaPlaceholder:null,ariaPosInSet:lt,ariaPressed:Ua,ariaReadOnly:Ua,ariaRelevant:null,ariaRequired:Ua,ariaRoleDescription:Ci,ariaRowCount:lt,ariaRowIndex:lt,ariaRowSpan:lt,ariaSelected:Ua,ariaSetSize:lt,ariaSort:null,ariaValueMax:lt,ariaValueMin:lt,ariaValueNow:lt,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function FCe(n,e){return e in n?n[e]:e}function $Ce(n,e){return FCe(n,e.toLowerCase())}const qTt=RT({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:r1,acceptCharset:Ci,accessKey:Ci,action:null,allow:null,allowFullScreen:Zn,allowPaymentRequest:Zn,allowUserMedia:Zn,alt:null,as:null,async:Zn,autoCapitalize:null,autoComplete:Ci,autoFocus:Zn,autoPlay:Zn,blocking:Ci,capture:null,charSet:null,checked:Zn,cite:null,className:Ci,cols:lt,colSpan:null,content:null,contentEditable:Ua,controls:Zn,controlsList:Ci,coords:lt|r1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Zn,defer:Zn,dir:null,dirName:null,disabled:Zn,download:BG,draggable:Ua,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Zn,formTarget:null,headers:Ci,height:lt,hidden:BG,high:lt,href:null,hrefLang:null,htmlFor:Ci,httpEquiv:Ci,id:null,imageSizes:null,imageSrcSet:null,inert:Zn,inputMode:null,integrity:null,is:null,isMap:Zn,itemId:null,itemProp:Ci,itemRef:Ci,itemScope:Zn,itemType:Ci,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Zn,low:lt,manifest:null,max:null,maxLength:lt,media:null,method:null,min:null,minLength:lt,multiple:Zn,muted:Zn,name:null,nonce:null,noModule:Zn,noValidate:Zn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Zn,optimum:lt,pattern:null,ping:Ci,placeholder:null,playsInline:Zn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Zn,referrerPolicy:null,rel:Ci,required:Zn,reversed:Zn,rows:lt,rowSpan:lt,sandbox:Ci,scope:null,scoped:Zn,seamless:Zn,selected:Zn,shadowRootClonable:Zn,shadowRootDelegatesFocus:Zn,shadowRootMode:null,shape:null,size:lt,sizes:null,slot:null,span:lt,spellCheck:Ua,src:null,srcDoc:null,srcLang:null,srcSet:null,start:lt,step:null,style:null,tabIndex:lt,target:null,title:null,translate:null,type:null,typeMustMatch:Zn,useMap:null,value:Ua,width:lt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ci,axis:null,background:null,bgColor:null,border:lt,borderColor:null,bottomMargin:lt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Zn,declare:Zn,event:null,face:null,frame:null,frameBorder:null,hSpace:lt,leftMargin:lt,link:null,longDesc:null,lowSrc:null,marginHeight:lt,marginWidth:lt,noResize:Zn,noHref:Zn,noShade:Zn,noWrap:Zn,object:null,profile:null,prompt:null,rev:null,rightMargin:lt,rules:null,scheme:null,scrolling:Ua,standby:null,summary:null,text:null,topMargin:lt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:lt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Zn,disableRemotePlayback:Zn,prefix:null,property:null,results:lt,security:null,unselectable:null},space:"html",transform:$Ce}),YTt=RT({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Tc,accentHeight:lt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:lt,amplitude:lt,arabicForm:null,ascent:lt,attributeName:null,attributeType:null,azimuth:lt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:lt,by:null,calcMode:null,capHeight:lt,className:Ci,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:lt,diffuseConstant:lt,direction:null,display:null,dur:null,divisor:lt,dominantBaseline:null,download:Zn,dx:null,dy:null,edgeMode:null,editable:null,elevation:lt,enableBackground:null,end:null,event:null,exponent:lt,externalResourcesRequired:null,fill:null,fillOpacity:lt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:r1,g2:r1,glyphName:r1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:lt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:lt,horizOriginX:lt,horizOriginY:lt,id:null,ideographic:lt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:lt,k:lt,k1:lt,k2:lt,k3:lt,k4:lt,kernelMatrix:Tc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:lt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:lt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:lt,overlineThickness:lt,paintOrder:null,panose1:null,path:null,pathLength:lt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ci,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:lt,pointsAtY:lt,pointsAtZ:lt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Tc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Tc,rev:Tc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Tc,requiredFeatures:Tc,requiredFonts:Tc,requiredFormats:Tc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:lt,specularExponent:lt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:lt,strikethroughThickness:lt,string:null,stroke:null,strokeDashArray:Tc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:lt,strokeOpacity:lt,strokeWidth:null,style:null,surfaceScale:lt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Tc,tabIndex:lt,tableValues:null,target:null,targetX:lt,targetY:lt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Tc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:lt,underlineThickness:lt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:lt,values:null,vAlphabetic:lt,vMathematical:lt,vectorEffect:null,vHanging:lt,vIdeographic:lt,version:null,vertAdvY:lt,vertOriginX:lt,vertOriginY:lt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:lt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:FCe}),BCe=RT({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),UCe=RT({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$Ce}),VCe=RT({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),KTt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},XTt=/[A-Z]/g,pfe=/-[a-z]/g,ZTt=/^data[-\w.:]+$/i;function QTt(n,e){const t=$G(e);let r=e,i=Kl;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&ZTt.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(pfe,eEt);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!pfe.test(a)){let o=a.replace(XTt,JTt);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=qK}return new i(r,e)}function JTt(n){return"-"+n.toLowerCase()}function eEt(n){return n.charAt(1).toUpperCase()}const tEt=LCe([jCe,qTt,BCe,UCe,VCe],"html"),YK=LCe([jCe,YTt,BCe,UCe,VCe],"svg");function nEt(n){return n.join(" ").trim()}var d_={},gV,gfe;function rEt(){if(gfe)return gV;gfe=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,c="/",u="*",d="",h="comment",f="declaration";gV=function(v,y){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];y=y||{};var w=1,S=1;function T($){var G=$.match(e);G&&(w+=G.length);var W=$.lastIndexOf(l);S=~W?$.length-W:S+$.length}function C(){var $={line:w,column:S};return function(G){return G.position=new k($),P(),G}}function k($){this.start=$,this.end={line:w,column:S},this.source=y.source}k.prototype.content=v;function A($){var G=new Error(y.source+":"+w+":"+S+": "+$);if(G.reason=$,G.filename=y.source,G.line=w,G.column=S,G.source=v,!y.silent)throw G}function D($){var G=$.exec(v);if(G){var W=G[0];return T(W),v=v.slice(W.length),G}}function P(){D(t)}function N($){var G;for($=$||[];G=R();)G!==!1&&$.push(G);return $}function R(){var $=C();if(!(c!=v.charAt(0)||u!=v.charAt(1))){for(var G=2;d!=v.charAt(G)&&(u!=v.charAt(G)||c!=v.charAt(G+1));)++G;if(G+=2,d===v.charAt(G-1))return A("End of comment missing");var W=v.slice(2,G-2);return S+=2,T(W),v=v.slice(G),S+=2,$({type:h,comment:W})}}function L(){var $=C(),G=D(r);if(G){if(R(),!D(i))return A("property missing ':'");var W=D(a),K=$({type:f,property:m(G[0].replace(n,d)),value:W?m(W[0].replace(n,d)):d});return D(o),K}}function B(){var $=[];N($);for(var G;G=L();)G!==!1&&($.push(G),N($));return $}return P(),B()};function m(v){return v?v.replace(s,d):d}return gV}var mfe;function iEt(){if(mfe)return d_;mfe=1;var n=d_&&d_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d_,"__esModule",{value:!0}),d_.default=t;var e=n(rEt());function t(r,i){var a=null;if(!r||typeof r!="string")return a;var o=(0,e.default)(r),s=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var c=l.property,u=l.value;s?i(c,u,l):u&&(a=a||{},a[c]=u)}}),a}return d_}var ok={},vfe;function aEt(){if(vfe)return ok;vfe=1,Object.defineProperty(ok,"__esModule",{value:!0}),ok.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(c){return!c||t.test(c)||n.test(c)},o=function(c,u){return u.toUpperCase()},s=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),a(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,s):c=c.replace(r,s),c.replace(e,o))};return ok.camelCase=l,ok}var sk,yfe;function oEt(){if(yfe)return sk;yfe=1;var n=sk&&sk.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(iEt()),t=aEt();function r(i,a){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(o[(0,t.camelCase)(s,a)]=l)}),o}return r.default=r,sk=r,sk}var sEt=oEt();const lEt=Lr(sEt),zCe=HCe("end"),KK=HCe("start");function HCe(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function cEt(n){const e=KK(n),t=zCe(n);if(e&&t)return{start:e,end:t}}function yC(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?bfe(n.position):"start"in n||"end"in n?bfe(n):"line"in n||"column"in n?VG(n):""}function VG(n){return wfe(n&&n.line)+":"+wfe(n&&n.column)}function bfe(n){return VG(n&&n.start)+"-"+VG(n&&n.end)}function wfe(n){return n&&typeof n=="number"?n:1}class Ls extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},o=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=yC(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ls.prototype.file="";Ls.prototype.name="";Ls.prototype.reason="";Ls.prototype.message="";Ls.prototype.stack="";Ls.prototype.column=void 0;Ls.prototype.line=void 0;Ls.prototype.ancestors=void 0;Ls.prototype.cause=void 0;Ls.prototype.fatal=void 0;Ls.prototype.place=void 0;Ls.prototype.ruleId=void 0;Ls.prototype.source=void 0;const XK={}.hasOwnProperty,uEt=new Map,dEt=/[A-Z]/g,hEt=new Set(["table","tbody","thead","tfoot","tr"]),fEt=new Set(["td","th"]),GCe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function pEt(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=SEt(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=xEt(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?YK:tEt,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=WCe(i,n,void 0);return a&&typeof a!="string"?a:i.create(n,i.Fragment,{children:a||void 0},void 0)}function WCe(n,e,t){if(e.type==="element")return gEt(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mEt(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return yEt(n,e,t);if(e.type==="mdxjsEsm")return vEt(n,e);if(e.type==="root")return bEt(n,e,t);if(e.type==="text")return wEt(n,e)}function gEt(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=YK,n.schema=i),n.ancestors.push(e);const a=YCe(n,e.tagName,!1),o=_Et(n,e);let s=QK(n,e);return hEt.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!GTt(l):!0})),qCe(n,o,a,e),ZK(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function mEt(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}iI(n,e.position)}function vEt(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);iI(n,e.position)}function yEt(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=YK,n.schema=i),n.ancestors.push(e);const a=e.name===null?n.Fragment:YCe(n,e.name,!0),o=TEt(n,e),s=QK(n,e);return qCe(n,o,a,e),ZK(o,s),n.ancestors.pop(),n.schema=r,n.create(e,a,o,t)}function bEt(n,e,t){const r={};return ZK(r,QK(n,e)),n.create(e,n.Fragment,r,t)}function wEt(n,e){return e.value}function qCe(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function ZK(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function xEt(n,e,t){return r;function r(i,a,o,s){const c=Array.isArray(o.children)?t:e;return s?c(a,o,s):c(a,o)}}function SEt(n,e){return t;function t(r,i,a,o){const s=Array.isArray(a.children),l=KK(r);return e(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function _Et(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&XK.call(e.properties,i)){const a=EEt(n,i,e.properties[i]);if(a){const[o,s]=a;n.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&fEt.has(e.tagName)?r=s:t[o]=s}}if(r){const a=t.style||(t.style={});a[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function TEt(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(t,n.evaluater.evaluateExpression(s.argument))}else iI(n,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const s=r.value.data.estree.body[0];s.type,a=n.evaluater.evaluateExpression(s.expression)}else iI(n,e.position);else a=r.value===null?!0:r.value;t[i]=a}return t}function QK(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:uEt;for(;++r<e.children.length;){const a=e.children[r];let o;if(n.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=WCe(n,a,o);s!==void 0&&t.push(s)}return t}function EEt(n,e,t){const r=QTt(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?BTt(t):nEt(t)),r.property==="style"){let i=typeof t=="object"?t:AEt(n,String(t));return n.stylePropertyNameCase==="css"&&(i=kEt(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?KTt[r.property]||r.property:r.attribute,t]}}function AEt(n,e){try{return lEt(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new Ls("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=GCe+"#cannot-parse-style-attribute",i}}function YCe(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,o;for(;++a<i.length;){const s=dfe(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}r=o}else r=dfe(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return XK.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);iI(n)}function iI(n,e){const t=new Ls("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=GCe+"#cannot-handle-mdx-estrees-without-createevaluater",t}function kEt(n){const e={};let t;for(t in n)XK.call(n,t)&&(e[CEt(t)]=n[t]);return e}function CEt(n){let e=n.replace(dEt,DEt);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function DEt(n){return"-"+n.toLowerCase()}const mV={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},IEt={};function MEt(n,e){const t=IEt,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return KCe(n,r,i)}function KCe(n,e,t){if(PEt(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return xfe(n.children,e,t)}return Array.isArray(n)?xfe(n,e,t):""}function xfe(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=KCe(n[i],e,t);return r.join("")}function PEt(n){return!!(n&&typeof n=="object")}const Sfe=document.createElement("i");function JK(n){const e="&"+n+";";Sfe.innerHTML=e;const t=Sfe.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Bf(n,e,t,r){const i=n.length;let a=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),n.splice(...o),a+=1e4,e+=1e4}function Ru(n,e){return n.length>0?(Bf(n,n.length,0,e),n):e}const _fe={}.hasOwnProperty;function NEt(n){const e={};let t=-1;for(;++t<n.length;)REt(e,n[t]);return e}function REt(n,e){let t;for(t in e){const i=(_fe.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let o;if(a)for(o in a){_fe.call(i,o)||(i[o]=[]);const s=a[o];OEt(i[o],Array.isArray(s)?s:s?[s]:[])}}}function OEt(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Bf(n,0,0,r)}function XCe(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function i1(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const gf=Dy(/[A-Za-z]/),Fc=Dy(/[\dA-Za-z]/),LEt=Dy(/[#-'*+\--9=?A-Z^-~]/);function zG(n){return n!==null&&(n<32||n===127)}const HG=Dy(/\d/),jEt=Dy(/[\dA-Fa-f]/),FEt=Dy(/[!-/:-@[-`{-~]/);function In(n){return n!==null&&n<-2}function Gl(n){return n!==null&&(n<0||n===32)}function Ur(n){return n===-2||n===-1||n===32}const $Et=Dy(new RegExp("\\p{P}|\\p{S}","u")),BEt=Dy(/\s/);function Dy(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function OT(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const a=n.charCodeAt(t);let o="";if(a===37&&Fc(n.charCodeAt(t+1))&&Fc(n.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=n.charCodeAt(t+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o="�"}else o=String.fromCharCode(a);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+i+1,o=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function Ii(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Ur(l)?(n.enter(t),s(l)):e(l)}function s(l){return Ur(l)&&a++<i?(n.consume(l),s):(n.exit(t),e(l))}}const UEt={tokenize:VEt};function VEt(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Ii(n,e,"linePrefix")}function i(s){return n.enter("paragraph"),a(s)}function a(s){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(s)}function o(s){if(s===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(s);return}return In(s)?(n.consume(s),n.exit("chunkText"),a):(n.consume(s),o)}}const zEt={tokenize:HEt},Tfe={tokenize:GEt};function HEt(n){const e=this,t=[];let r=0,i,a,o;return s;function s(T){if(r<t.length){const C=t[r];return e.containerState=C[1],n.attempt(C[0].continuation,l,c)(T)}return c(T)}function l(T){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const C=e.events.length;let k=C,A;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){A=e.events[k][1].end;break}w(r);let D=C;for(;D<e.events.length;)e.events[D][1].end={...A},D++;return Bf(e.events,k+1,0,e.events.slice(C)),e.events.length=D,c(T)}return s(T)}function c(T){if(r===t.length){if(!i)return h(T);if(i.currentConstruct&&i.currentConstruct.concrete)return m(T);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(Tfe,u,d)(T)}function u(T){return i&&S(),w(r),h(T)}function d(T){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,m(T)}function h(T){return e.containerState={},n.attempt(Tfe,f,m)(T)}function f(T){return r++,t.push([e.currentConstruct,e.containerState]),h(T)}function m(T){if(T===null){i&&S(),w(0),n.consume(T);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),v(T)}function v(T){if(T===null){y(n.exit("chunkFlow"),!0),w(0),n.consume(T);return}return In(T)?(n.consume(T),y(n.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(n.consume(T),v)}function y(T,C){const k=e.sliceStream(T);if(C&&k.push(null),T.previous=a,a&&(a.next=T),a=T,i.defineSkip(T.start),i.write(k),e.parser.lazy[T.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const D=e.events.length;let P=D,N,R;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(N){R=e.events[P][1].end;break}N=!0}for(w(r),A=D;A<e.events.length;)e.events[A][1].end={...R},A++;Bf(e.events,P+1,0,e.events.slice(D)),e.events.length=A}}function w(T){let C=t.length;for(;C-- >T;){const k=t[C];e.containerState=k[1],k[0].exit.call(e,n)}t.length=T}function S(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function GEt(n,e,t){return Ii(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Efe(n){if(n===null||Gl(n)||BEt(n))return 1;if($Et(n))return 2}function eX(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const a=n[i].resolveAll;a&&!r.includes(a)&&(e=a(e,t),r.push(a))}return e}const GG={name:"attention",resolveAll:WEt,tokenize:qEt};function WEt(n,e){let t=-1,r,i,a,o,s,l,c,u;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const d={...n[r][1].end},h={...n[t][1].start};Afe(d,-l),Afe(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...n[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},n[r][1].end={...o.start},n[t][1].start={...s.end},c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=Ru(c,[["enter",n[r][1],e],["exit",n[r][1],e]])),c=Ru(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",a,e]]),c=Ru(c,eX(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),c=Ru(c,[["exit",a,e],["enter",s,e],["exit",s,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(u=2,c=Ru(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):u=0,Bf(n,r-1,t-r+3,c),t=r+c.length-u-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function qEt(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Efe(r);let a;return o;function o(l){return a=l,n.enter("attentionSequence"),s(l)}function s(l){if(l===a)return n.consume(l),s;const c=n.exit("attentionSequence"),u=Efe(l),d=!u||u===2&&i||t.includes(l),h=!i||i===2&&u||t.includes(r);return c._open=!!(a===42?d:d&&(i||!h)),c._close=!!(a===42?h:h&&(u||!d)),e(l)}}function Afe(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const YEt={name:"autolink",tokenize:KEt};function KEt(n,e,t){let r=0;return i;function i(f){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(f){return gf(f)?(n.consume(f),o):f===64?t(f):c(f)}function o(f){return f===43||f===45||f===46||Fc(f)?(r=1,s(f)):c(f)}function s(f){return f===58?(n.consume(f),r=0,l):(f===43||f===45||f===46||Fc(f))&&r++<32?(n.consume(f),s):(r=0,c(f))}function l(f){return f===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):f===null||f===32||f===60||zG(f)?t(f):(n.consume(f),l)}function c(f){return f===64?(n.consume(f),u):LEt(f)?(n.consume(f),c):t(f)}function u(f){return Fc(f)?d(f):t(f)}function d(f){return f===46?(n.consume(f),r=0,u):f===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):h(f)}function h(f){if((f===45||Fc(f))&&r++<63){const m=f===45?h:d;return n.consume(f),m}return t(f)}}const EF={partial:!0,tokenize:XEt};function XEt(n,e,t){return r;function r(a){return Ur(a)?Ii(n,i,"linePrefix")(a):i(a)}function i(a){return a===null||In(a)?e(a):t(a)}}const ZCe={continuation:{tokenize:QEt},exit:JEt,name:"blockQuote",tokenize:ZEt};function ZEt(n,e,t){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(n.enter("blockQuote",{_container:!0}),s.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),a}return t(o)}function a(o){return Ur(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function QEt(n,e,t){const r=this;return i;function i(o){return Ur(o)?Ii(n,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return n.attempt(ZCe,e,t)(o)}}function JEt(n){n.exit("blockQuote")}const QCe={name:"characterEscape",tokenize:eAt};function eAt(n,e,t){return r;function r(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),i}function i(a){return FEt(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const JCe={name:"characterReference",tokenize:tAt};function tAt(n,e,t){const r=this;let i=0,a,o;return s;function s(d){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),l}function l(d){return d===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(d),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),a=31,o=Fc,u(d))}function c(d){return d===88||d===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(d),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,o=jEt,u):(n.enter("characterReferenceValue"),a=7,o=HG,u(d))}function u(d){if(d===59&&i){const h=n.exit("characterReferenceValue");return o===Fc&&!JK(r.sliceSerialize(h))?t(d):(n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(d)&&i++<a?(n.consume(d),u):t(d)}}const kfe={partial:!0,tokenize:rAt},Cfe={concrete:!0,name:"codeFenced",tokenize:nAt};function nAt(n,e,t){const r=this,i={partial:!0,tokenize:k};let a=0,o=0,s;return l;function l(A){return c(A)}function c(A){const D=r.events[r.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,s=A,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),u(A)}function u(A){return A===s?(o++,n.consume(A),u):o<3?t(A):(n.exit("codeFencedFenceSequence"),Ur(A)?Ii(n,d,"whitespace")(A):d(A))}function d(A){return A===null||In(A)?(n.exit("codeFencedFence"),r.interrupt?e(A):n.check(kfe,v,C)(A)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),h(A))}function h(A){return A===null||In(A)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),d(A)):Ur(A)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ii(n,f,"whitespace")(A)):A===96&&A===s?t(A):(n.consume(A),h)}function f(A){return A===null||In(A)?d(A):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),m(A))}function m(A){return A===null||In(A)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),d(A)):A===96&&A===s?t(A):(n.consume(A),m)}function v(A){return n.attempt(i,C,y)(A)}function y(A){return n.enter("lineEnding"),n.consume(A),n.exit("lineEnding"),w}function w(A){return a>0&&Ur(A)?Ii(n,S,"linePrefix",a+1)(A):S(A)}function S(A){return A===null||In(A)?n.check(kfe,v,C)(A):(n.enter("codeFlowValue"),T(A))}function T(A){return A===null||In(A)?(n.exit("codeFlowValue"),S(A)):(n.consume(A),T)}function C(A){return n.exit("codeFenced"),e(A)}function k(A,D,P){let N=0;return R;function R(W){return A.enter("lineEnding"),A.consume(W),A.exit("lineEnding"),L}function L(W){return A.enter("codeFencedFence"),Ur(W)?Ii(A,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):B(W)}function B(W){return W===s?(A.enter("codeFencedFenceSequence"),$(W)):P(W)}function $(W){return W===s?(N++,A.consume(W),$):N>=o?(A.exit("codeFencedFenceSequence"),Ur(W)?Ii(A,G,"whitespace")(W):G(W)):P(W)}function G(W){return W===null||In(W)?(A.exit("codeFencedFence"),D(W)):P(W)}}}function rAt(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const vV={name:"codeIndented",tokenize:aAt},iAt={partial:!0,tokenize:oAt};function aAt(n,e,t){const r=this;return i;function i(c){return n.enter("codeIndented"),Ii(n,a,"linePrefix",5)(c)}function a(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):t(c)}function o(c){return c===null?l(c):In(c)?n.attempt(iAt,o,l)(c):(n.enter("codeFlowValue"),s(c))}function s(c){return c===null||In(c)?(n.exit("codeFlowValue"),o(c)):(n.consume(c),s)}function l(c){return n.exit("codeIndented"),e(c)}}function oAt(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):In(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):Ii(n,a,"linePrefix",5)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):In(o)?i(o):t(o)}}const sAt={name:"codeText",previous:cAt,resolve:lAt,tokenize:uAt};function lAt(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function cAt(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uAt(n,e,t){let r=0,i,a;return o;function o(d){return n.enter("codeText"),n.enter("codeTextSequence"),s(d)}function s(d){return d===96?(n.consume(d),r++,s):(n.exit("codeTextSequence"),l(d))}function l(d){return d===null?t(d):d===32?(n.enter("space"),n.consume(d),n.exit("space"),l):d===96?(a=n.enter("codeTextSequence"),i=0,u(d)):In(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||In(d)?(n.exit("codeTextData"),l(d)):(n.consume(d),c)}function u(d){return d===96?(n.consume(d),i++,u):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(d)):(a.type="codeTextData",c(d))}}class dAt{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&lk(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),lk(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),lk(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);lk(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);lk(this.left,t.reverse())}}}function lk(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function eDe(n){const e={};let t=-1,r,i,a,o,s,l,c;const u=new dAt(n);for(;++t<u.length;){for(;t in e;)t=e[t];if(r=u.get(t),t&&r[1].type==="chunkFlow"&&u.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,hAt(u,t)),t=e[t],c=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,t),s.unshift(r),u.splice(i,t-i+1,s))}}return Bf(n,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function hAt(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const a=[];let o=t._tokenizer;o||(o=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let u,d,h=-1,f=t,m=0,v=0;const y=[v];for(;f;){for(;n.get(++i)[1]!==f;);a.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=t;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(v=h+1,y.push(v),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const w=s.slice(y[h],y[h+1]),S=a.pop();l.push([S,S+w.length-1]),n.splice(S,2,w)}for(l.reverse(),h=-1;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c}const fAt={resolve:gAt,tokenize:mAt},pAt={partial:!0,tokenize:vAt};function gAt(n){return eDe(n),n}function mAt(n,e){let t;return r;function r(s){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):In(s)?n.check(pAt,o,a)(s):(n.consume(s),i)}function a(s){return n.exit("chunkContent"),n.exit("content"),e(s)}function o(s){return n.consume(s),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function vAt(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Ii(n,a,"linePrefix")}function a(o){if(o===null||In(o))return t(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function tDe(n,e,t,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(w){return w===60?(n.enter(r),n.enter(i),n.enter(a),n.consume(w),n.exit(a),h):w===null||w===32||w===41||zG(w)?t(w):(n.enter(r),n.enter(o),n.enter(s),n.enter("chunkString",{contentType:"string"}),v(w))}function h(w){return w===62?(n.enter(a),n.consume(w),n.exit(a),n.exit(i),n.exit(r),e):(n.enter(s),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===62?(n.exit("chunkString"),n.exit(s),h(w)):w===null||w===60||In(w)?t(w):(n.consume(w),w===92?m:f)}function m(w){return w===60||w===62||w===92?(n.consume(w),f):f(w)}function v(w){return!u&&(w===null||w===41||Gl(w))?(n.exit("chunkString"),n.exit(s),n.exit(o),n.exit(r),e(w)):u<c&&w===40?(n.consume(w),u++,v):w===41?(n.consume(w),u--,v):w===null||w===32||w===40||zG(w)?t(w):(n.consume(w),w===92?y:v)}function y(w){return w===40||w===41||w===92?(n.consume(w),v):v(w)}}function nDe(n,e,t,r,i,a){const o=this;let s=0,l;return c;function c(f){return n.enter(r),n.enter(i),n.consume(f),n.exit(i),n.enter(a),u}function u(f){return s>999||f===null||f===91||f===93&&!l||f===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?t(f):f===93?(n.exit(a),n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):In(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),u):(n.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||In(f)||s++>999?(n.exit("chunkString"),u(f)):(n.consume(f),l||(l=!Ur(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(n.consume(f),s++,d):d(f)}}function rDe(n,e,t,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(n.enter(r),n.enter(i),n.consume(h),n.exit(i),o=h===40?41:h,l):t(h)}function l(h){return h===o?(n.enter(i),n.consume(h),n.exit(i),n.exit(r),e):(n.enter(a),c(h))}function c(h){return h===o?(n.exit(a),l(o)):h===null?t(h):In(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),Ii(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||In(h)?(n.exit("chunkString"),c(h)):(n.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(n.consume(h),u):u(h)}}function bC(n,e){let t;return r;function r(i){return In(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Ur(i)?Ii(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const yAt={name:"definition",tokenize:wAt},bAt={partial:!0,tokenize:xAt};function wAt(n,e,t){const r=this;let i;return a;function a(f){return n.enter("definition"),o(f)}function o(f){return nDe.call(r,n,s,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function s(f){return i=i1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(n.enter("definitionMarker"),n.consume(f),n.exit("definitionMarker"),l):t(f)}function l(f){return Gl(f)?bC(n,c)(f):c(f)}function c(f){return tDe(n,u,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return n.attempt(bAt,d,d)(f)}function d(f){return Ur(f)?Ii(n,h,"whitespace")(f):h(f)}function h(f){return f===null||In(f)?(n.exit("definition"),r.parser.defined.push(i),e(f)):t(f)}}function xAt(n,e,t){return r;function r(s){return Gl(s)?bC(n,i)(s):t(s)}function i(s){return rDe(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Ur(s)?Ii(n,o,"whitespace")(s):o(s)}function o(s){return s===null||In(s)?e(s):t(s)}}const SAt={name:"hardBreakEscape",tokenize:_At};function _At(n,e,t){return r;function r(a){return n.enter("hardBreakEscape"),n.consume(a),i}function i(a){return In(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const TAt={name:"headingAtx",resolve:EAt,tokenize:AAt};function EAt(n,e){let t=n.length-2,r=3,i,a;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},a={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Bf(n,r,t-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),n}function AAt(n,e,t){let r=0;return i;function i(u){return n.enter("atxHeading"),a(u)}function a(u){return n.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(n.consume(u),o):u===null||Gl(u)?(n.exit("atxHeadingSequence"),s(u)):t(u)}function s(u){return u===35?(n.enter("atxHeadingSequence"),l(u)):u===null||In(u)?(n.exit("atxHeading"),e(u)):Ur(u)?Ii(n,s,"whitespace")(u):(n.enter("atxHeadingText"),c(u))}function l(u){return u===35?(n.consume(u),l):(n.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||Gl(u)?(n.exit("atxHeadingText"),s(u)):(n.consume(u),c)}}const kAt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dfe=["pre","script","style","textarea"],CAt={concrete:!0,name:"htmlFlow",resolveTo:MAt,tokenize:PAt},DAt={partial:!0,tokenize:RAt},IAt={partial:!0,tokenize:NAt};function MAt(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function PAt(n,e,t){const r=this;let i,a,o,s,l;return c;function c(ee){return u(ee)}function u(ee){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(ee),d}function d(ee){return ee===33?(n.consume(ee),h):ee===47?(n.consume(ee),a=!0,v):ee===63?(n.consume(ee),i=3,r.interrupt?e:z):gf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function h(ee){return ee===45?(n.consume(ee),i=2,f):ee===91?(n.consume(ee),i=5,s=0,m):gf(ee)?(n.consume(ee),i=4,r.interrupt?e:z):t(ee)}function f(ee){return ee===45?(n.consume(ee),r.interrupt?e:z):t(ee)}function m(ee){const be="CDATA[";return ee===be.charCodeAt(s++)?(n.consume(ee),s===be.length?r.interrupt?e:B:m):t(ee)}function v(ee){return gf(ee)?(n.consume(ee),o=String.fromCharCode(ee),y):t(ee)}function y(ee){if(ee===null||ee===47||ee===62||Gl(ee)){const be=ee===47,fe=o.toLowerCase();return!be&&!a&&Dfe.includes(fe)?(i=1,r.interrupt?e(ee):B(ee)):kAt.includes(o.toLowerCase())?(i=6,be?(n.consume(ee),w):r.interrupt?e(ee):B(ee)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(ee):a?S(ee):T(ee))}return ee===45||Fc(ee)?(n.consume(ee),o+=String.fromCharCode(ee),y):t(ee)}function w(ee){return ee===62?(n.consume(ee),r.interrupt?e:B):t(ee)}function S(ee){return Ur(ee)?(n.consume(ee),S):R(ee)}function T(ee){return ee===47?(n.consume(ee),R):ee===58||ee===95||gf(ee)?(n.consume(ee),C):Ur(ee)?(n.consume(ee),T):R(ee)}function C(ee){return ee===45||ee===46||ee===58||ee===95||Fc(ee)?(n.consume(ee),C):k(ee)}function k(ee){return ee===61?(n.consume(ee),A):Ur(ee)?(n.consume(ee),k):T(ee)}function A(ee){return ee===null||ee===60||ee===61||ee===62||ee===96?t(ee):ee===34||ee===39?(n.consume(ee),l=ee,D):Ur(ee)?(n.consume(ee),A):P(ee)}function D(ee){return ee===l?(n.consume(ee),l=null,N):ee===null||In(ee)?t(ee):(n.consume(ee),D)}function P(ee){return ee===null||ee===34||ee===39||ee===47||ee===60||ee===61||ee===62||ee===96||Gl(ee)?k(ee):(n.consume(ee),P)}function N(ee){return ee===47||ee===62||Ur(ee)?T(ee):t(ee)}function R(ee){return ee===62?(n.consume(ee),L):t(ee)}function L(ee){return ee===null||In(ee)?B(ee):Ur(ee)?(n.consume(ee),L):t(ee)}function B(ee){return ee===45&&i===2?(n.consume(ee),K):ee===60&&i===1?(n.consume(ee),X):ee===62&&i===4?(n.consume(ee),se):ee===63&&i===3?(n.consume(ee),z):ee===93&&i===5?(n.consume(ee),ie):In(ee)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(DAt,ce,$)(ee)):ee===null||In(ee)?(n.exit("htmlFlowData"),$(ee)):(n.consume(ee),B)}function $(ee){return n.check(IAt,G,ce)(ee)}function G(ee){return n.enter("lineEnding"),n.consume(ee),n.exit("lineEnding"),W}function W(ee){return ee===null||In(ee)?$(ee):(n.enter("htmlFlowData"),B(ee))}function K(ee){return ee===45?(n.consume(ee),z):B(ee)}function X(ee){return ee===47?(n.consume(ee),o="",te):B(ee)}function te(ee){if(ee===62){const be=o.toLowerCase();return Dfe.includes(be)?(n.consume(ee),se):B(ee)}return gf(ee)&&o.length<8?(n.consume(ee),o+=String.fromCharCode(ee),te):B(ee)}function ie(ee){return ee===93?(n.consume(ee),z):B(ee)}function z(ee){return ee===62?(n.consume(ee),se):ee===45&&i===2?(n.consume(ee),z):B(ee)}function se(ee){return ee===null||In(ee)?(n.exit("htmlFlowData"),ce(ee)):(n.consume(ee),se)}function ce(ee){return n.exit("htmlFlow"),e(ee)}}function NAt(n,e,t){const r=this;return i;function i(o){return In(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),a):t(o)}function a(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function RAt(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(EF,e,t)}}const OAt={name:"htmlText",tokenize:LAt};function LAt(n,e,t){const r=this;let i,a,o;return s;function s(z){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(z),l}function l(z){return z===33?(n.consume(z),c):z===47?(n.consume(z),k):z===63?(n.consume(z),T):gf(z)?(n.consume(z),P):t(z)}function c(z){return z===45?(n.consume(z),u):z===91?(n.consume(z),a=0,m):gf(z)?(n.consume(z),S):t(z)}function u(z){return z===45?(n.consume(z),f):t(z)}function d(z){return z===null?t(z):z===45?(n.consume(z),h):In(z)?(o=d,X(z)):(n.consume(z),d)}function h(z){return z===45?(n.consume(z),f):d(z)}function f(z){return z===62?K(z):z===45?h(z):d(z)}function m(z){const se="CDATA[";return z===se.charCodeAt(a++)?(n.consume(z),a===se.length?v:m):t(z)}function v(z){return z===null?t(z):z===93?(n.consume(z),y):In(z)?(o=v,X(z)):(n.consume(z),v)}function y(z){return z===93?(n.consume(z),w):v(z)}function w(z){return z===62?K(z):z===93?(n.consume(z),w):v(z)}function S(z){return z===null||z===62?K(z):In(z)?(o=S,X(z)):(n.consume(z),S)}function T(z){return z===null?t(z):z===63?(n.consume(z),C):In(z)?(o=T,X(z)):(n.consume(z),T)}function C(z){return z===62?K(z):T(z)}function k(z){return gf(z)?(n.consume(z),A):t(z)}function A(z){return z===45||Fc(z)?(n.consume(z),A):D(z)}function D(z){return In(z)?(o=D,X(z)):Ur(z)?(n.consume(z),D):K(z)}function P(z){return z===45||Fc(z)?(n.consume(z),P):z===47||z===62||Gl(z)?N(z):t(z)}function N(z){return z===47?(n.consume(z),K):z===58||z===95||gf(z)?(n.consume(z),R):In(z)?(o=N,X(z)):Ur(z)?(n.consume(z),N):K(z)}function R(z){return z===45||z===46||z===58||z===95||Fc(z)?(n.consume(z),R):L(z)}function L(z){return z===61?(n.consume(z),B):In(z)?(o=L,X(z)):Ur(z)?(n.consume(z),L):N(z)}function B(z){return z===null||z===60||z===61||z===62||z===96?t(z):z===34||z===39?(n.consume(z),i=z,$):In(z)?(o=B,X(z)):Ur(z)?(n.consume(z),B):(n.consume(z),G)}function $(z){return z===i?(n.consume(z),i=void 0,W):z===null?t(z):In(z)?(o=$,X(z)):(n.consume(z),$)}function G(z){return z===null||z===34||z===39||z===60||z===61||z===96?t(z):z===47||z===62||Gl(z)?N(z):(n.consume(z),G)}function W(z){return z===47||z===62||Gl(z)?N(z):t(z)}function K(z){return z===62?(n.consume(z),n.exit("htmlTextData"),n.exit("htmlText"),e):t(z)}function X(z){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(z),n.exit("lineEnding"),te}function te(z){return Ur(z)?Ii(n,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):ie(z)}function ie(z){return n.enter("htmlTextData"),o(z)}}const tX={name:"labelEnd",resolveAll:BAt,resolveTo:UAt,tokenize:VAt},jAt={tokenize:zAt},FAt={tokenize:HAt},$At={tokenize:GAt};function BAt(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&Bf(n,0,n.length,t),n}function UAt(n,e){let t=n.length,r=0,i,a,o,s;for(;t--;)if(i=n[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},c={type:"label",start:{...n[a][1].start},end:{...n[o][1].end}},u={type:"labelText",start:{...n[a+r+2][1].end},end:{...n[o-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=Ru(s,n.slice(a+1,a+r+3)),s=Ru(s,[["enter",u,e]]),s=Ru(s,eX(e.parser.constructs.insideSpan.null,n.slice(a+r+4,o-3),e)),s=Ru(s,[["exit",u,e],n[o-2],n[o-1],["exit",c,e]]),s=Ru(s,n.slice(o+1)),s=Ru(s,[["exit",l,e]]),Bf(n,a,n.length,s),n}function VAt(n,e,t){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?d(h):(o=r.parser.defined.includes(i1(r.sliceSerialize({start:a.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(h),n.exit("labelMarker"),n.exit("labelEnd"),l):t(h)}function l(h){return h===40?n.attempt(jAt,u,o?u:d)(h):h===91?n.attempt(FAt,u,o?c:d)(h):o?u(h):d(h)}function c(h){return n.attempt($At,u,d)(h)}function u(h){return e(h)}function d(h){return a._balanced=!0,t(h)}}function zAt(n,e,t){return r;function r(d){return n.enter("resource"),n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),i}function i(d){return Gl(d)?bC(n,a)(d):a(d)}function a(d){return d===41?u(d):tDe(n,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Gl(d)?bC(n,l)(d):u(d)}function s(d){return t(d)}function l(d){return d===34||d===39||d===40?rDe(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Gl(d)?bC(n,u)(d):u(d)}function u(d){return d===41?(n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),n.exit("resource"),e):t(d)}}function HAt(n,e,t){const r=this;return i;function i(s){return nDe.call(r,n,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(i1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):t(s)}function o(s){return t(s)}}function GAt(n,e,t){return r;function r(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),i}function i(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const WAt={name:"labelStartImage",resolveAll:tX.resolveAll,tokenize:qAt};function qAt(n,e,t){const r=this;return i;function i(s){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(s),n.exit("labelImageMarker"),a}function a(s){return s===91?(n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelImage"),o):t(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):e(s)}}const YAt={name:"labelStartLink",resolveAll:tX.resolveAll,tokenize:KAt};function KAt(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const yV={name:"lineEnding",tokenize:XAt};function XAt(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Ii(n,e,"linePrefix")}}const OR={name:"thematicBreak",tokenize:ZAt};function ZAt(n,e,t){let r=0,i;return a;function a(c){return n.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||In(c))?(n.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===i?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),Ur(c)?Ii(n,s,"whitespace")(c):s(c))}}const Ol={continuation:{tokenize:tkt},exit:rkt,name:"list",tokenize:ekt},QAt={partial:!0,tokenize:ikt},JAt={partial:!0,tokenize:nkt};function ekt(n,e,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(f){const m=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:HG(f)){if(r.containerState.type||(r.containerState.type=m,n.enter(m,{_container:!0})),m==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(OR,t,c)(f):c(f);if(!r.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(f)}return t(f)}function l(f){return HG(f)&&++o<10?(n.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),c(f)):t(f)}function c(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,n.check(EF,r.interrupt?t:u,n.attempt(QAt,h,d))}function u(f){return r.containerState.initialBlankLine=!0,a++,h(f)}function d(f){return Ur(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),h):t(f)}function h(f){return r.containerState.size=a+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(f)}}function tkt(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(EF,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ii(n,e,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!Ur(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(JAt,e,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ii(n,n.attempt(Ol,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function nkt(n,e,t){const r=this;return Ii(n,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(a):t(a)}}function rkt(n){n.exit(this.containerState.type)}function ikt(n,e,t){const r=this;return Ii(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Ur(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const Ife={name:"setextUnderline",resolveTo:akt,tokenize:okt};function akt(n,e){let t=n.length,r,i,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const o={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",a?(n.splice(i,0,["enter",o,e]),n.splice(a+1,0,["exit",n[r][1],e]),n[r][1].end={...n[a][1].end}):n[r][1]=o,n.push(["exit",o,e]),n}function okt(n,e,t){const r=this;let i;return a;function a(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(n.enter("setextHeadingLine"),i=c,o(c)):t(c)}function o(c){return n.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(n.consume(c),s):(n.exit("setextHeadingLineSequence"),Ur(c)?Ii(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||In(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const skt={tokenize:lkt};function lkt(n){const e=this,t=n.attempt(EF,r,n.attempt(this.parser.constructs.flowInitial,i,Ii(n,n.attempt(this.parser.constructs.flow,i,n.attempt(fAt,i)),"linePrefix")));return t;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const ckt={resolveAll:aDe()},ukt=iDe("string"),dkt=iDe("text");function iDe(n){return{resolveAll:aDe(n==="text"?hkt:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],a=t.attempt(i,o,s);return o;function o(u){return c(u)?a(u):s(u)}function s(u){if(u===null){t.consume(u);return}return t.enter("data"),t.consume(u),l}function l(u){return c(u)?(t.exit("data"),a(u)):(t.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function aDe(n){return e;function e(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return n?n(t,r):t}}function hkt(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(s=0),s){const c={type:t===n.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}const fkt={42:Ol,43:Ol,45:Ol,48:Ol,49:Ol,50:Ol,51:Ol,52:Ol,53:Ol,54:Ol,55:Ol,56:Ol,57:Ol,62:ZCe},pkt={91:yAt},gkt={[-2]:vV,[-1]:vV,32:vV},mkt={35:TAt,42:OR,45:[Ife,OR],60:CAt,61:Ife,95:OR,96:Cfe,126:Cfe},vkt={38:JCe,92:QCe},ykt={[-5]:yV,[-4]:yV,[-3]:yV,33:WAt,38:JCe,42:GG,60:[YEt,OAt],91:YAt,92:[SAt,QCe],93:tX,95:GG,96:sAt},bkt={null:[GG,ckt]},wkt={null:[42,95]},xkt={null:[]},Skt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wkt,contentInitial:pkt,disable:xkt,document:fkt,flow:mkt,flowInitial:gkt,insideSpan:bkt,string:vkt,text:ykt},Symbol.toStringTag,{value:"Module"}));function _kt(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:D(k),check:D(A),consume:S,enter:T,exit:C,interrupt:D(A,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:m,parser:n,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function d(L){return o=Ru(o,L),y(),o[o.length-1]!==null?[]:(P(e,0),c.events=eX(a,c.events,c),c.events)}function h(L,B){return Ekt(f(L),B)}function f(L){return Tkt(o,L)}function m(){const{_bufferIndex:L,_index:B,line:$,column:G,offset:W}=r;return{_bufferIndex:L,_index:B,line:$,column:G,offset:W}}function v(L){i[L.line]=L.column,R()}function y(){let L;for(;r._index<o.length;){const B=o[r._index];if(typeof B=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<B.length;)w(B.charCodeAt(r._bufferIndex));else w(B)}}function w(L){u=u(L)}function S(L){In(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,R()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=L}function T(L,B){const $=B||{};return $.type=L,$.start=m(),c.events.push(["enter",$,c]),s.push($),$}function C(L){const B=s.pop();return B.end=m(),c.events.push(["exit",B,c]),B}function k(L,B){P(L,B.from)}function A(L,B){B.restore()}function D(L,B){return $;function $(G,W,K){let X,te,ie,z;return Array.isArray(G)?ce(G):"tokenize"in G?ce([G]):se(G);function se(De){return dt;function dt(ve){const de=ve!==null&&De[ve],me=ve!==null&&De.null,xe=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(me)?me:me?[me]:[]];return ce(xe)(ve)}}function ce(De){return X=De,te=0,De.length===0?K:ee(De[te])}function ee(De){return dt;function dt(ve){return z=N(),ie=De,De.partial||(c.currentConstruct=De),De.name&&c.parser.constructs.disable.null.includes(De.name)?fe():De.tokenize.call(B?Object.assign(Object.create(c),B):c,l,be,fe)(ve)}}function be(De){return L(ie,z),W}function fe(De){return z.restore(),++te<X.length?ee(X[te]):K}}}function P(L,B){L.resolveAll&&!a.includes(L)&&a.push(L),L.resolve&&Bf(c.events,B,c.events.length-B,L.resolve(c.events.slice(B),c)),L.resolveTo&&(c.events=L.resolveTo(c.events,c))}function N(){const L=m(),B=c.previous,$=c.currentConstruct,G=c.events.length,W=Array.from(s);return{from:G,restore:K};function K(){r=L,c.previous=B,c.currentConstruct=$,c.events.length=G,s=W,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Tkt(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,a)];else{if(o=n.slice(t,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(n[i].slice(0,a))}return o}function Ekt(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const a=n[t];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function Akt(n){const r={constructs:NEt([Skt,...(n||{}).extensions||[]]),content:i(UEt),defined:[],document:i(zEt),flow:i(skt),lazy:{},string:i(ukt),text:i(dkt)};return r;function i(a){return o;function o(s){return _kt(r,a,s)}}}function kkt(n){for(;!eDe(n););return n}const Mfe=/[\0\t\n\r]/g;function Ckt(){let n=1,e="",t=!0,r;return i;function i(a,o,s){const l=[];let c,u,d,h,f;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),d=0,e="",t&&(a.charCodeAt(0)===65279&&d++,t=void 0);d<a.length;){if(Mfe.lastIndex=d,c=Mfe.exec(a),h=c&&c.index!==void 0?c.index:a.length,f=a.charCodeAt(h),!c){e=a.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(a.slice(d,h)),n+=h-d),f){case 0:{l.push(65533),n++;break}case 9:{for(u=Math.ceil(n/4)*4,l.push(-2);n++<u;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}d=h+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Dkt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ikt(n){return n.replace(Dkt,Mkt)}function Mkt(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return XCe(t.slice(a?2:1),a?16:10)}return JK(t)||n}const oDe={}.hasOwnProperty;function Pkt(n,e,t){return typeof e!="string"&&(t=e,e=void 0),Nkt(t)(kkt(Akt(t).document().write(Ckt()(n,e,!0))))}function Nkt(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Yt),autolinkProtocol:N,autolinkEmail:N,atxHeading:a(ct),blockQuote:a(me),characterEscape:N,characterReference:N,codeFenced:a(xe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(xe,o),codeText:a(pe,o),codeTextData:N,data:N,codeFlowValue:N,definition:a($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(We),hardBreakEscape:a(xt),hardBreakTrailing:a(xt),htmlFlow:a(At,o),htmlFlowData:N,htmlText:a(At,o),htmlTextData:N,image:a(pn),label:o,link:a(Yt),listItem:a(vn),listItemValue:h,listOrdered:a(Rn,d),listUnordered:a(Rn),paragraph:a(Fn),reference:ee,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(ct),strong:a(je),thematicBreak:a(yn)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:de,autolinkProtocol:ve,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:De,characterReference:dt,codeFenced:l(y),codeFencedFence:v,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:R,codeIndented:l(w),codeText:l(W),codeTextData:R,data:R,definition:l(),definitionDestinationString:C,definitionLabelString:S,definitionTitleString:T,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l($),htmlFlowData:R,htmlText:l(G),htmlTextData:R,image:l(X),label:ie,labelText:te,lineEnding:L,link:l(K),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:be,resourceDestinationString:z,resourceTitleString:se,resource:ce,setextHeading:l(P),setextHeadingLineSequence:D,setextHeadingText:A,strong:l(),thematicBreak:l()}};sDe(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(Te){let Oe={type:"root",children:[]};const et={stack:[Oe],tokenStack:[],config:e,enter:s,exit:c,buffer:o,resume:u,data:t},Ne=[];let Je=-1;for(;++Je<Te.length;)if(Te[Je][1].type==="listOrdered"||Te[Je][1].type==="listUnordered")if(Te[Je][0]==="enter")Ne.push(Je);else{const pt=Ne.pop();Je=i(Te,pt,Je)}for(Je=-1;++Je<Te.length;){const pt=e[Te[Je][0]];oDe.call(pt,Te[Je][1].type)&&pt[Te[Je][1].type].call(Object.assign({sliceSerialize:Te[Je][2].sliceSerialize},et),Te[Je][1])}if(et.tokenStack.length>0){const pt=et.tokenStack[et.tokenStack.length-1];(pt[1]||Pfe).call(et,void 0,pt[0])}for(Oe.position={start:Tv(Te.length>0?Te[0][1].start:{line:1,column:1,offset:0}),end:Tv(Te.length>0?Te[Te.length-2][1].end:{line:1,column:1,offset:0})},Je=-1;++Je<e.transforms.length;)Oe=e.transforms[Je](Oe)||Oe;return Oe}function i(Te,Oe,et){let Ne=Oe-1,Je=-1,pt=!1,Kt,vt,Sn,on;for(;++Ne<=et;){const Jt=Te[Ne];switch(Jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Jt[0]==="enter"?Je++:Je--,on=void 0;break}case"lineEndingBlank":{Jt[0]==="enter"&&(Kt&&!on&&!Je&&!Sn&&(Sn=Ne),on=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:on=void 0}if(!Je&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||Je===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(Kt){let Cr=Ne;for(vt=void 0;Cr--;){const hn=Te[Cr];if(hn[1].type==="lineEnding"||hn[1].type==="lineEndingBlank"){if(hn[0]==="exit")continue;vt&&(Te[vt][1].type="lineEndingBlank",pt=!0),hn[1].type="lineEnding",vt=Cr}else if(!(hn[1].type==="linePrefix"||hn[1].type==="blockQuotePrefix"||hn[1].type==="blockQuotePrefixWhitespace"||hn[1].type==="blockQuoteMarker"||hn[1].type==="listItemIndent"))break}Sn&&(!vt||Sn<vt)&&(Kt._spread=!0),Kt.end=Object.assign({},vt?Te[vt][1].start:Jt[1].end),Te.splice(vt||Ne,0,["exit",Kt,Jt[2]]),Ne++,et++}if(Jt[1].type==="listItemPrefix"){const Cr={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start),end:void 0};Kt=Cr,Te.splice(Ne,0,["enter",Cr,Jt[2]]),Ne++,et++,Sn=void 0,on=!0}}}return Te[Oe][1]._spread=pt,et}function a(Te,Oe){return et;function et(Ne){s.call(this,Te(Ne),Ne),Oe&&Oe.call(this,Ne)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(Te,Oe,et){this.stack[this.stack.length-1].children.push(Te),this.stack.push(Te),this.tokenStack.push([Oe,et||void 0]),Te.position={start:Tv(Oe.start),end:void 0}}function l(Te){return Oe;function Oe(et){Te&&Te.call(this,et),c.call(this,et)}}function c(Te,Oe){const et=this.stack.pop(),Ne=this.tokenStack.pop();if(Ne)Ne[0].type!==Te.type&&(Oe?Oe.call(this,Te,Ne[0]):(Ne[1]||Pfe).call(this,Te,Ne[0]));else throw new Error("Cannot close `"+Te.type+"` ("+yC({start:Te.start,end:Te.end})+"): it’s not open");et.position.end=Tv(Te.end)}function u(){return MEt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(Te){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(Te),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=Te}function m(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=Te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te.replace(/(\r?\n|\r)$/g,"")}function S(Te){const Oe=this.resume(),et=this.stack[this.stack.length-1];et.label=Oe,et.identifier=i1(this.sliceSerialize(Te)).toLowerCase()}function T(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Te}function C(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Te}function k(Te){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const et=this.sliceSerialize(Te).length;Oe.depth=et}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function D(Te){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(Te).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function N(Te){const et=this.stack[this.stack.length-1].children;let Ne=et[et.length-1];(!Ne||Ne.type!=="text")&&(Ne=an(),Ne.position={start:Tv(Te.start),end:void 0},et.push(Ne)),this.stack.push(Ne)}function R(Te){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(Te),Oe.position.end=Tv(Te.end)}function L(Te){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const et=Oe.children[Oe.children.length-1];et.position.end=Tv(Te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Oe.type)&&(N.call(this,Te),R.call(this,Te))}function B(){this.data.atHardBreak=!0}function $(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function G(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function W(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Te}function K(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Oe,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function X(){const Te=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Te.type+="Reference",Te.referenceType=Oe,delete Te.url,delete Te.title}else delete Te.identifier,delete Te.label;this.data.referenceType=void 0}function te(Te){const Oe=this.sliceSerialize(Te),et=this.stack[this.stack.length-2];et.label=Ikt(Oe),et.identifier=i1(Oe).toLowerCase()}function ie(){const Te=this.stack[this.stack.length-1],Oe=this.resume(),et=this.stack[this.stack.length-1];if(this.data.inReference=!0,et.type==="link"){const Ne=Te.children;et.children=Ne}else et.alt=Oe}function z(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Te}function se(){const Te=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Te}function ce(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function be(Te){const Oe=this.resume(),et=this.stack[this.stack.length-1];et.label=Oe,et.identifier=i1(this.sliceSerialize(Te)).toLowerCase(),this.data.referenceType="full"}function fe(Te){this.data.characterReferenceType=Te.type}function De(Te){const Oe=this.sliceSerialize(Te),et=this.data.characterReferenceType;let Ne;et?(Ne=XCe(Oe,et==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ne=JK(Oe);const Je=this.stack[this.stack.length-1];Je.value+=Ne}function dt(Te){const Oe=this.stack.pop();Oe.position.end=Tv(Te.end)}function ve(Te){R.call(this,Te);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(Te)}function de(Te){R.call(this,Te);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(Te)}function me(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function We(){return{type:"emphasis",children:[]}}function ct(){return{type:"heading",depth:0,children:[]}}function xt(){return{type:"break"}}function At(){return{type:"html",value:""}}function pn(){return{type:"image",title:null,url:"",alt:null}}function Yt(){return{type:"link",title:null,url:"",children:[]}}function Rn(Te){return{type:"list",ordered:Te.type==="listOrdered",start:null,spread:Te._spread,children:[]}}function vn(Te){return{type:"listItem",spread:Te._spread,checked:null,children:[]}}function Fn(){return{type:"paragraph",children:[]}}function je(){return{type:"strong",children:[]}}function an(){return{type:"text",value:""}}function yn(){return{type:"thematicBreak"}}}function Tv(n){return{line:n.line,column:n.column,offset:n.offset}}function sDe(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?sDe(n,r):Rkt(n,r)}}function Rkt(n,e){let t;for(t in e)if(oDe.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Pfe(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+yC({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+yC({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+yC({start:e.start,end:e.end})+") is still open")}function Okt(n){const e=this;e.parser=t;function t(r){return Pkt(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Lkt(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function jkt(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function Fkt(n,e){const t=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),n.patch(e,i),i=n.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},n.patch(e,i),i}function $kt(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Bkt(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Ukt(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=OT(r.toLowerCase()),a=n.footnoteOrder.indexOf(r);let o,s=n.footnoteCounts.get(r);s===void 0?(s=0,n.footnoteOrder.push(r),o=n.footnoteOrder.length):o=a+1,s+=1,n.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,c),n.applyData(e,c)}function Vkt(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function zkt(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function lDe(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Hkt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return lDe(n,e);const i={src:OT(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,a),n.applyData(e,a)}function Gkt(n,e){const t={src:OT(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function Wkt(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function qkt(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return lDe(n,e);const i={href:OT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,a),n.applyData(e,a)}function Ykt(n,e){const t={href:OT(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function Kkt(n,e,t){const r=n.all(e),i=t?Xkt(t):cDe(e),a={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const u=r[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return n.patch(e,c),n.applyData(e,c)}function Xkt(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=cDe(t[r])}return e}function cDe(n){const e=n.spread;return e??n.children.length>1}function Zkt(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,a),n.applyData(e,a)}function Qkt(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Jkt(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function eCt(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function tCt(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),i.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},s=KK(e.children[1]),l=zCe(e.children[e.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,a),n.applyData(e,a)}function nCt(n,e,t){const r=t?t.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,s=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<s;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let m={type:"element",tagName:a,properties:h,children:[]};d&&(m.children=n.all(d),n.patch(d,m),m=n.applyData(d,m)),c.push(m)}const u={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,u),n.applyData(e,u)}function rCt(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const Nfe=9,Rfe=32;function iCt(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const a=[];for(;r;)a.push(Ofe(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return a.push(Ofe(e.slice(i),i>0,!1)),a.join("")}function Ofe(n,e,t){let r=0,i=n.length;if(e){let a=n.codePointAt(r);for(;a===Nfe||a===Rfe;)r++,a=n.codePointAt(r)}if(t){let a=n.codePointAt(i-1);for(;a===Nfe||a===Rfe;)i--,a=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function aCt(n,e){const t={type:"text",value:iCt(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function oCt(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const sCt={blockquote:Lkt,break:jkt,code:Fkt,delete:$kt,emphasis:Bkt,footnoteReference:Ukt,heading:Vkt,html:zkt,imageReference:Hkt,image:Gkt,inlineCode:Wkt,linkReference:qkt,link:Ykt,listItem:Kkt,list:Zkt,paragraph:Qkt,root:Jkt,strong:eCt,table:tCt,tableCell:rCt,tableRow:nCt,text:aCt,thematicBreak:oCt,toml:WN,yaml:WN,definition:WN,footnoteDefinition:WN};function WN(){}const uDe=-1,AF=0,wC=1,tL=2,nX=3,rX=4,iX=5,aX=6,dDe=7,hDe=8,Lfe=typeof self=="object"?self:globalThis,lCt=(n,e)=>{const t=(i,a)=>(n.set(a,i),i),r=i=>{if(n.has(i))return n.get(i);const[a,o]=e[i];switch(a){case AF:case uDe:return t(o,i);case wC:{const s=t([],i);for(const l of o)s.push(r(l));return s}case tL:{const s=t({},i);for(const[l,c]of o)s[r(l)]=r(c);return s}case nX:return t(new Date(o),i);case rX:{const{source:s,flags:l}=o;return t(new RegExp(s,l),i)}case iX:{const s=t(new Map,i);for(const[l,c]of o)s.set(r(l),r(c));return s}case aX:{const s=t(new Set,i);for(const l of o)s.add(r(l));return s}case dDe:{const{name:s,message:l}=o;return t(new Lfe[s](l),i)}case hDe:return t(BigInt(o),i);case"BigInt":return t(Object(BigInt(o)),i);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return t(new DataView(s),o)}}return t(new Lfe[a](o),i)};return r},jfe=n=>lCt(new Map,n)(0),h_="",{toString:cCt}={},{keys:uCt}=Object,ck=n=>{const e=typeof n;if(e!=="object"||!n)return[AF,e];const t=cCt.call(n).slice(8,-1);switch(t){case"Array":return[wC,h_];case"Object":return[tL,h_];case"Date":return[nX,h_];case"RegExp":return[rX,h_];case"Map":return[iX,h_];case"Set":return[aX,h_];case"DataView":return[wC,t]}return t.includes("Array")?[wC,t]:t.includes("Error")?[dDe,t]:[tL,t]},qN=([n,e])=>n===AF&&(e==="function"||e==="symbol"),dCt=(n,e,t,r)=>{const i=(o,s)=>{const l=r.push(o)-1;return t.set(s,l),l},a=o=>{if(t.has(o))return t.get(o);let[s,l]=ck(o);switch(s){case AF:{let u=o;switch(l){case"bigint":s=hDe,u=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([uDe],o)}return i([s,u],o)}case wC:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],d=i([s,u],o);for(const h of o)u.push(a(h));return d}case tL:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const u=[],d=i([s,u],o);for(const h of uCt(o))(n||!qN(ck(o[h])))&&u.push([a(h),a(o[h])]);return d}case nX:return i([s,o.toISOString()],o);case rX:{const{source:u,flags:d}=o;return i([s,{source:u,flags:d}],o)}case iX:{const u=[],d=i([s,u],o);for(const[h,f]of o)(n||!(qN(ck(h))||qN(ck(f))))&&u.push([a(h),a(f)]);return d}case aX:{const u=[],d=i([s,u],o);for(const h of o)(n||!qN(ck(h)))&&u.push(a(h));return d}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},Ffe=(n,{json:e,lossy:t}={})=>{const r=[];return dCt(!(e||t),!!e,new Map,r)(n),r},nL=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?jfe(Ffe(n,e)):structuredClone(n):(n,e)=>jfe(Ffe(n,e));function hCt(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function fCt(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function pCt(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||hCt,r=n.options.footnoteBackLabel||fCt,i=n.options.footnoteLabel||"Footnotes",a=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<n.footnoteOrder.length;){const c=n.footnoteById.get(n.footnoteOrder[l]);if(!c)continue;const u=n.all(c),d=String(c.identifier).toUpperCase(),h=OT(d.toLowerCase());let f=0;const m=[],v=n.footnoteCounts.get(d);for(;v!==void 0&&++f<=v;){m.length>0&&m.push({type:"text",value:" "});let S=typeof t=="string"?t:t(l,f);typeof S=="string"&&(S={type:"text",value:S}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const S=y.children[y.children.length-1];S&&S.type==="text"?S.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...m)}else u.push(...m);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:n.wrap(u,!0)};n.patch(c,w),s.push(w)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...nL(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(s,!0)},{type:"text",value:`
`}]}}const fDe=function(n){if(n==null)return yCt;if(typeof n=="function")return kF(n);if(typeof n=="object")return Array.isArray(n)?gCt(n):mCt(n);if(typeof n=="string")return vCt(n);throw new Error("Expected function, string, or object as test")};function gCt(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=fDe(n[t]);return kF(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function mCt(n){const e=n;return kF(t);function t(r){const i=r;let a;for(a in n)if(i[a]!==e[a])return!1;return!0}}function vCt(n){return kF(e);function e(t){return t&&t.type===n}}function kF(n){return e;function e(t,r,i){return!!(bCt(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function yCt(){return!0}function bCt(n){return n!==null&&typeof n=="object"&&"type"in n}const pDe=[],wCt=!0,$fe=!1,xCt="skip";function SCt(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const a=fDe(i),o=r?-1:1;s(n,void 0,[])();function s(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=pDe,m,v,y;if((!e||a(l,c,u[u.length-1]||void 0))&&(f=_Ct(t(l,u)),f[0]===$fe))return f;if("children"in l&&l.children){const w=l;if(w.children&&f[0]!==xCt)for(v=(r?w.children.length:-1)+o,y=u.concat(w);v>-1&&v<w.children.length;){const S=w.children[v];if(m=s(S,v,y)(),m[0]===$fe)return m;v=typeof m[1]=="number"?m[1]:v+o}}return f}}}function _Ct(n){return Array.isArray(n)?n:typeof n=="number"?[wCt,n]:n==null?pDe:[n]}function gDe(n,e,t,r){let i,a,o;typeof e=="function"&&typeof t!="function"?(a=void 0,o=e,i=t):(a=e,o=t,i=r),SCt(n,a,s,i);function s(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const WG={}.hasOwnProperty,TCt={};function ECt(n,e){const t=e||TCt,r=new Map,i=new Map,a=new Map,o={...sCt,...t.handlers},s={all:c,applyData:kCt,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:t,patch:ACt,wrap:DCt};return gDe(n,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),s;function l(u,d){const h=u.type,f=s.handlers[h];if(WG.call(s.handlers,h)&&f)return f(s,u,d);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in u){const{children:v,...y}=u,w=nL(y);return w.children=s.all(u),w}return nL(u)}return(s.options.unknownHandler||CCt)(s,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const m=s.one(h[f],u);if(m){if(f&&h[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Bfe(m.value)),!Array.isArray(m)&&m.type==="element")){const v=m.children[0];v&&v.type==="text"&&(v.value=Bfe(v.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function ACt(n,e){n.position&&(e.position=cEt(n))}function kCt(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,a=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const o="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:o}}t.type==="element"&&a&&Object.assign(t.properties,nL(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function CCt(n,e){const t=e.data||{},r="value"in e&&!(WG.call(t,"hProperties")||WG.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function DCt(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function Bfe(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Ufe(n,e){const t=ECt(n,e),r=t.one(n,void 0),i=pCt(t),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function ICt(n,e){return n&&"run"in n?async function(t,r){const i=Ufe(t,{file:r,...e});await n.run(i,r)}:function(t,r){return Ufe(t,{file:r,...n||e})}}function Vfe(n){if(n)throw n}var bV,zfe;function MCt(){if(zfe)return bV;zfe=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=n.call(c,"constructor"),d=c.constructor&&c.constructor.prototype&&n.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!d)return!1;var h;for(h in c);return typeof h>"u"||n.call(c,h)},o=function(c,u){t&&u.name==="__proto__"?t(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},s=function(c,u){if(u==="__proto__")if(n.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return bV=function l(){var c,u,d,h,f,m,v=arguments[0],y=1,w=arguments.length,S=!1;for(typeof v=="boolean"&&(S=v,v=arguments[1]||{},y=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});y<w;++y)if(c=arguments[y],c!=null)for(u in c)d=s(v,u),h=s(c,u),v!==h&&(S&&h&&(a(h)||(f=i(h)))?(f?(f=!1,m=d&&i(d)?d:[]):m=d&&a(d)?d:{},o(v,{name:u,newValue:l(S,m,h)})):typeof h<"u"&&o(v,{name:u,newValue:h}));return v},bV}var PCt=MCt();const wV=Lr(PCt);function qG(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function NCt(){const n=[],e={run:t,use:r};return e;function t(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const u=n[++a];let d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?RCt(u,s)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function RCt(n,e){let t;return r;function r(...o){const s=n.length>o.length;let l;s&&o.push(i);try{l=n.apply(this,o)}catch(c){const u=c;if(s&&t)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){t||(t=!0,e(o,...s))}function a(o){i(null,o)}}const cf={basename:OCt,dirname:LCt,extname:jCt,join:FCt,sep:"/"};function OCt(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');vM(n);let t=0,r=-1,i=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,s=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(n.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function LCt(n){if(vM(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function jCt(n){vM(n);let e=n.length,t=-1,r=0,i=-1,a=0,o;for(;e--;){const s=n.codePointAt(e);if(s===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),s===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function FCt(...n){let e=-1,t;for(;++e<n.length;)vM(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":$Ct(t)}function $Ct(n){vM(n);const e=n.codePointAt(0)===47;let t=BCt(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function BCt(n,e){let t="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=n.length;){if(o<n.length)s=n.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,a=0;continue}}else if(t.length>0){t="",r=0,i=o,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return t}function vM(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const UCt={cwd:VCt};function VCt(){return"/"}function YG(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function zCt(n){if(typeof n=="string")n=new URL(n);else if(!YG(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return HCt(n)}function HCt(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const xV=["history","path","basename","stem","extname","dirname"];class mDe{constructor(e){let t;e?YG(e)?t={path:e}:typeof e=="string"||GCt(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":UCt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<xV.length;){const a=xV[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)xV.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?cf.basename(this.path):void 0}set basename(e){_V(e,"basename"),SV(e,"basename"),this.path=cf.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?cf.dirname(this.path):void 0}set dirname(e){Hfe(this.basename,"dirname"),this.path=cf.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?cf.extname(this.path):void 0}set extname(e){if(SV(e,"extname"),Hfe(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=cf.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){YG(e)&&(e=zCt(e)),_V(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?cf.basename(this.path,this.extname):void 0}set stem(e){_V(e,"stem"),SV(e,"stem"),this.path=cf.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Ls(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function SV(n,e){if(n&&n.includes(cf.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+cf.sep+"`")}function _V(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Hfe(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function GCt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const WCt=function(n){const r=this.constructor.prototype,i=r[n],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},qCt={}.hasOwnProperty;class oX extends WCt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=NCt()}copy(){const e=new oX;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(wV(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(AV("data",this.frozen),this.namespace[e]=t,this):qCt.call(this.namespace,e)&&this.namespace[e]||void 0:e?(AV("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=YN(e),r=this.parser||this.Parser;return TV("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),TV("process",this.parser||this.Parser),EV("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,o){const s=YN(e),l=r.parse(s);r.run(l,s,function(u,d,h){if(u||!d||!h)return c(u);const f=d,m=r.stringify(f,h);XCt(m)?h.value=m:h.result=m,c(u,h)});function c(u,d){u||!d?o(u):a?a(d):t(void 0,d)}}}processSync(e){let t=!1,r;return this.freeze(),TV("processSync",this.parser||this.Parser),EV("processSync",this.compiler||this.Compiler),this.process(e,i),Wfe("processSync","process",t),r;function i(a,o){t=!0,Vfe(a),r=o}}run(e,t,r){Gfe(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(o,s){const l=YN(t);i.run(e,l,c);function c(u,d,h){const f=d||e;u?s(u):o?o(f):r(void 0,f,h)}}}runSync(e,t){let r=!1,i;return this.run(e,t,a),Wfe("runSync","run",r),i;function a(o,s){Vfe(o),i=s,r=!0}}stringify(e,t){this.freeze();const r=YN(t),i=this.compiler||this.Compiler;return EV("stringify",i),Gfe(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(AV("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?s(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=wV(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];a(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[f,...m]=u;const v=r[h][1];qG(v)&&qG(f)&&(f=wV(!0,v,f)),r[h]=[c,f,...m]}}}}const YCt=new oX().freeze();function TV(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function EV(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function AV(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Gfe(n){if(!qG(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Wfe(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function YN(n){return KCt(n)?n:new mDe(n)}function KCt(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function XCt(n){return typeof n=="string"||ZCt(n)}function ZCt(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const QCt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",qfe=[],Yfe={allowDangerousHtml:!0},JCt=/^(https?|ircs?|mailto|xmpp)$/i,eDt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function tDt(n){const e=nDt(n),t=rDt(n);return iDt(e.runSync(e.parse(t),t),n)}function nDt(n){const e=n.rehypePlugins||qfe,t=n.remarkPlugins||qfe,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Yfe}:Yfe;return YCt().use(Okt).use(t).use(ICt,r).use(e)}function rDt(n){const e=n.children||"",t=new mDe;return typeof e=="string"&&(t.value=e),t}function iDt(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,o=e.skipHtml,s=e.unwrapDisallowed,l=e.urlTransform||aDt;for(const u of eDt)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+QCt+u.id,void 0);return e.className&&(n={type:"element",tagName:"div",properties:{className:e.className},children:n.type==="root"?n.children:[n]}),gDe(n,c),pEt(n,{Fragment:x.Fragment,components:i,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in mV)if(Object.hasOwn(mV,f)&&Object.hasOwn(u.properties,f)){const m=u.properties[f],v=mV[f];(v===null||v.includes(u.tagName))&&(u.properties[f]=l(String(m||""),f,u))}}if(u.type==="element"){let f=t?!t.includes(u.tagName):a?a.includes(u.tagName):!1;if(!f&&r&&typeof d=="number"&&(f=!r(u,d,h)),f&&h&&typeof d=="number")return s&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function aDt(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||JCt.test(n.slice(0,e))?n:""}console.warn("⚠️ Supabase Configuration Warning:",`Missing or invalid Supabase environment variables:
    - VITE_SUPABASE_URL: ❌ Missing
    - VITE_SUPABASE_ANON_KEY: ❌ Missing
    
    For production: Add these as GitHub repository secrets
    For development: Create a .env file in project root with these values`),console.log("🔧 App will continue without Supabase features until configuration is complete");const oDt=null,Ot=oDt,sDt=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ot},Symbol.toStringTag,{value:"Module"}));class Ll{static generateSessionText(e,t,r){const i=e.startTime?new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"Unknown time",a=Math.round(e.duration||0),o=e.sessionType||"work session";let s=`User completed ${a}-minute ${o} on '${t.title}' task from '${r.name}' project at ${i}.`;if(e.status&&(s+=` Session status: ${e.status}.`),t.timeEstimated){const l=Math.round(t.timeSpent/t.timeEstimated*100);s+=` Task progress: ${l}% (${Math.round(t.timeSpent)}/${t.timeEstimated} minutes).`}return e.notes&&(s+=` Session notes: ${e.notes}`),s+=` Task category: ${this.determineTaskCategory(t,r)}.`,s+=` Environment: ${this.getTimeContext(e.startTime)}.`,s}static generateTaskAggregateText(e,t,r){const i=Math.round(e.timeSpent||0),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(i/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has accumulated ${i} minutes across ${a} work sessions.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`),l+=` Current status: ${e.completed?"Completed":"In Progress"}.`;const c=new Date,u=e;if(e.createdAt){const d=new Date(e.createdAt);l+=` Created: ${this.formatRelativeDate(d,c)}.`}if(u.scheduledDate){const d=new Date(u.scheduledDate);let h=` Scheduled: ${this.formatRelativeDate(d,c)}`;u.scheduledStartTime&&u.scheduledEndTime&&(h+=` from ${u.scheduledStartTime} to ${u.scheduledEndTime}`),l+=h+"."}if(u.dueDate&&!u.scheduledDate){const d=new Date(u.dueDate);l+=` Due: ${this.formatDueDate(d,c)}.`}if(u.priority&&(l+=` Priority: ${u.priority}.`),e.updatedAt){const d=new Date(e.updatedAt);l+=` Last updated: ${this.formatRelativeDate(d,c)}.`}if(e.description&&(l+=` Task description: ${e.description}`),a>0){const d=this.analyzeWorkPattern(t);l+=` Time investment pattern: ${d}.`}return l}static generateProjectSummaryText(e,t,r){const i=t.length;if(i===0)return`Project "${e.name}" is newly created with no tasks yet.`;const a=t.filter(T=>T.status==="todo"||!T.completed&&T.status!=="pomodoro"),o=t.filter(T=>T.status==="pomodoro"),s=t.filter(T=>T.completed||T.status==="completed"),l=Math.round(t.reduce((T,C)=>T+(C.timeSpent||0),0)),c=r.length,u=this.calculateProjectAge(e,t);let d=0;a.length>0&&d++,o.length>0&&d++,s.length>0&&d++;let h=`Project "${e.name}" created ${u}, containing ${i} tasks across ${d} status.`;h+=`

`,h+=`TO-DO LIST STATUS (${a.length} tasks):
`,a.length>0?this.prioritizeTasksForDisplay(a,a.length).forEach(C=>{const k=C.timeEstimated?`estimated ${C.timeEstimated} min`:"no estimate",A=this.inferTaskPriority(C),D=this.getTaskDueInfo(C);h+=`- "${C.title}" (${k}, priority: ${A}${D})
`}):h+=`- No tasks in to-do list
`,h+=`
`,h+=`IN POMODORO STATUS (${o.length} tasks):
`,o.length>0?o.forEach(T=>{const C=T.timeEstimated?`${T.timeSpent}/${T.timeEstimated} min completed, ${Math.round(T.timeSpent/T.timeEstimated*100)}% progress`:`${T.timeSpent} min invested`,k=r.filter(D=>D.taskId===T.id).length,A=this.analyzeTaskWorkPattern(T,r);h+=`- "${T.title}" (${C}, ${k} sessions, ${A})
`}):h+=`- No tasks currently in pomodoro
`,h+=`
`,h+=`COMPLETED STATUS (${s.length} tasks):
`,s.length>0?this.getRecentCompletedTasks(s,s.length).forEach(C=>{const k=C.timeSpent?`${C.timeSpent} min`:"no time logged",A=this.getCompletionTimeframe(C);h+=`- "${C.title}" (${k}, completed ${A})
`}):h+=`- No completed tasks yet
`,h+=`
`,Math.round(s.length/i*100);const f=c>0?Math.round(r.reduce((T,C)=>T+(C.duration||0),0)/c):0,m=this.calculateTimeEstimationAccuracy(s),v=this.analyzeProjectMomentum(r),y=this.findPeakProductivityPattern(r),w=this.calculateTaskVelocity(s,u);h+=`PROJECT ANALYTICS: Total ${l} minutes invested across ${c} work sessions over ${this.getProjectDuration(t,r)}. `,h+=`Average session duration: ${f} minutes. `,h+=`Completion velocity: ${w.current} tasks per week${w.target?` (${w.comparison} target of ${w.target})`:""}. `,h+=`Time estimation accuracy: ${m}%. `,h+=`Peak productivity: ${y}. `,h+=`Current momentum: ${v}.`;const S=this.identifyProjectRisks(t,r,o);return S.length>0&&(h+=`

RISK INDICATORS: ${S.join(". ")}.`),e.description&&(h+=`

Project description: ${e.description}`),h}static generateTemporalSummaryText(e,t,r,i=[],a=[]){if(e==="weekly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateWeeklySummary(s,l,c,o)}else if(e==="monthly"){const o=new Date(r),s=i.map(u=>({...u,status:u.status})),l=a.map(u=>({...u})),c=t.map(u=>({...u,sessionType:u.sessionType||"work"}));return this.generateMonthlySummary(s,l,c,o)}else return this.generateDailySummaryText(t,r,i,a)}static generateDailySummaryText(e,t,r,i){const a=e.reduce((l,c)=>l+(c.duration||0),0),o=e.length;let s=`DAILY PRODUCTIVITY SUMMARY: ${new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}

`;return s+=`OVERVIEW: ${a} minutes of productive work across ${o} work sessions. `,s+=`Worked on ${i.length} projects, ${r.length} tasks. `,s+=`Created ${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length} new task${r.filter(l=>{const c=new Date(l.createdAt);return c>=new Date(t)&&c<=new Date(t)}).length>1?"s":""} today.

`,s+=this.generateProjectSummary(e,r,i,a),s+=this.generateTaskSummary(e,r,i),s+=this.generateMetricsAndInsights(e,a,o),s}static generateWeeklySummary(e,t,r,i=th(new Date)){const a=qW(i),s=e2({start:i,end:a}).map(S=>_n(S,"EEE do")).join(", "),l=r.filter(S=>{let T=this.safeToDate(S.date||S.startTime);return T?T>=i&&T<=a:(console.warn("Invalid session date, skipping:",{sessionId:S.id,date:S.date,startTime:S.startTime,userId:S.userId}),!1)});console.log(`📊 Weekly filter stats for week ${_n(i,"yyyy-MM-dd")} to ${_n(a,"yyyy-MM-dd")}:`,{totalSessions:r.length,filteredSessions:l.length,weekStart:i.toISOString(),weekEnd:a.toISOString()});const c=l.reduce((S,T)=>S+(T.duration||0),0),u=e.filter(S=>{const T=this.safeToDate(S.updatedAt);return S.completed&&T&&T>=i&&T<=a}),d=e.filter(S=>{const T=this.safeToDate(S.createdAt);return T&&T>=i&&T<=a}),h=t.map(S=>this.calculateProjectProgress(S,e,l,i,a,c)).sort((S,T)=>T.totalDuration-S.totalDuration).filter(S=>S.totalDuration>0);let f=`WEEKLY PRODUCTIVITY SUMMARY: Week of ${_n(i,"MMMM d")}-${_n(a,"d")}, ${_n(i,"yyyy")} (${s})

`;const m=Math.floor(c/60),v=c%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`;f+=`OVERVIEW: ${y} total productive time across ${l.length} work sessions. `,f+=`Worked on ${h.length} projects, ${e.length} tasks. `,f+=`Completed ${u.length} tasks, created ${d.length} new tasks this week.

`,f+=`TOP PROJECTS BY TIME INVESTMENT:

`,h.forEach((S,T)=>{const C=Math.floor(S.totalDuration/60),k=S.totalDuration%60,A=C>0?`${C}h ${k}m`:`${k}m`;f+=`${T+1}. "${S.project.name}" - ${A} (${S.percentageOfWeek.toFixed(1)}% of week)
`,f+=`└─ ${this.formatDailyDistribution(S.dailyWork)}
`,S.tasks.sort((D,P)=>P.totalDuration-D.totalDuration).filter(D=>D.totalDuration>0).forEach(D=>{const P=Math.floor(D.totalDuration/60),N=D.totalDuration%60,R=P>0?`${P}h ${N}m`:`${N}m`;f+=`└─ "${D.task.title}" (time spent: ${R})
`})}),f+=`
`,f+=`TOP TASKS BY TIME SPENT:

`;const w=h.flatMap(S=>S.tasks).sort((S,T)=>T.totalDuration-S.totalDuration).filter(S=>S.totalDuration>0);return w.forEach((S,T)=>{const C=t.find(N=>N.id===S.task.projectId);if(!C)return;const k=Math.floor(S.totalDuration/60),A=S.totalDuration%60,D=k>0?`${k}h ${A}m`:`${A}m`;f+=`${T+1}. "${S.task.title}" - ${D} (${C.name} project)
`,f+="└─ Progress: ",S.task.timeEstimated>0?f+=`${S.totalDuration}/${S.task.timeEstimated} estimated minutes (${Math.round(S.progress)}% complete)${S.isCompleted?" ✅":""}
`:f+=`No time estimate set${S.isCompleted?" ✅":""}
`,f+=`└─ Created: ${_n(S.createdDate,"MMMM d, yyyy")}
`,S.isCompleted&&S.completedDate&&(f+=`└─ Completed: ${_n(S.completedDate,"MMMM d, yyyy")}
`);const P=S.dailyWork.filter(N=>N.duration>0).map(N=>`${_n(N.date,"EEE")}(${N.duration}m)`).join(", ");f+=`└─ Daily work: ${P||"No work recorded"}
`}),f+=this.generateWeeklyAnalytics(l,w,h,i,a),f+=this.generateWeeklyPatterns(l,h,i,a),f+=this.generateMomentumIndicators(w,h,l),f}static generateMonthlySummary(e,t,r,i=new Date(new Date().getFullYear(),new Date().getMonth(),1)){const a=i.getFullYear(),o=i.getMonth(),s=new Date(a,o+1,0),l=_n(i,"MMMM yyyy"),c=`${_n(i,"MMMM d")}-${_n(s,"d")}, ${_n(i,"yyyy")}`,u=r.filter(D=>{let P=this.safeToDate(D.date||D.startTime);return P&&P>=i&&P<=s}),d=e.filter(D=>u.some(N=>N.taskId===D.id)),h=t.filter(D=>d.some(P=>P.projectId===D.id));console.log(`📊 Monthly summary stats for ${l}:`,{sessions:u.length,tasks:d.length,projects:h.length});const f=u.reduce((D,P)=>D+(P.duration||0),0),m=Math.floor(f/60),v=f%60,y=m>0?`${m} hours ${v} minutes`:`${v} minutes`,w=d.filter(D=>D.completed),S=d.filter(D=>{const P=this.safeToDate(D.createdAt);return P&&P>=i&&P<=s}),T=h.filter(D=>{const P=this.safeToDate(D.createdAt);return P&&P>=i&&P<=s}),C=h.map(D=>this.calculateMonthlyProjectProgress(D,d,u,i,s,f)).sort((D,P)=>P.totalDuration-D.totalDuration).filter(D=>D.totalDuration>0);let k=`MONTHLY PRODUCTIVITY SUMMARY: ${c}

`;if(k+=`OVERVIEW: ${y} total productive time across ${u.length} work sessions. `,k+=`Worked on ${h.length} projects, ${d.length} tasks. `,k+=`Completed ${w.length} tasks, created ${S.length} new tasks`,T.length>0&&(k+=`, ${T.length} new projects`),k+=` this month.

`,k+=`TOP PROJECTS BY TIME INVESTMENT:

`,C.forEach((D,P)=>{const N=Math.floor(D.totalDuration/60),R=D.totalDuration%60,L=N>0?`${N}h ${R}m`:`${R}m`;k+=`${P+1}. "${D.project.name}" - ${L} (${D.percentageOfMonth.toFixed(0)}% of month)
`,k+=`└─ ${this.formatWeeklyDistribution(D.weeklyWork,i)}
`,D.tasks.sort((B,$)=>$.totalDuration-B.totalDuration).filter(B=>B.totalDuration>0).slice(0,6).forEach(B=>{const $=B.totalDuration;k+=`└─ "${B.task.title}" (time spent: ${$}m)
`})}),d.some(D=>!D.projectId||!h.find(P=>P.id===D.projectId))){const D=d.filter(N=>!N.projectId||!h.find(R=>R.id===N.projectId)),P=u.filter(N=>D.some(R=>R.id===N.taskId)).reduce((N,R)=>N+(R.duration||0),0);if(P>0){const N=Math.floor(P/60),R=P%60,L=N>0?`${N}h ${R}m`:`${R}m`,B=(P/f*100).toFixed(0);k+=`${C.length+1}. Unassigned Tasks - ${L} (${B}% of month)
`,k+=`└─ ${this.formatWeeklyDistribution(this.calculateWeeklyWork(u.filter($=>D.some(G=>G.id===$.taskId)),i,s),i)}
`,D.sort(($,G)=>{const W=u.filter(X=>X.taskId===$.id).reduce((X,te)=>X+(te.duration||0),0);return u.filter(X=>X.taskId===G.id).reduce((X,te)=>X+(te.duration||0),0)-W}).slice(0,3).forEach($=>{const G=u.filter(W=>W.taskId===$.id).reduce((W,K)=>W+(K.duration||0),0);G>0&&(k+=`└─ "${$.title}" (time spent: ${G}m)
`)})}}k+=`
`,k+=`TOP TASKS BY TIME SPENT (MONTH):

`;const A=C.flatMap(D=>D.tasks).sort((D,P)=>P.totalDuration-D.totalDuration).filter(D=>D.totalDuration>0).slice(0,12);return A.forEach((D,P)=>{const N=h.find(B=>B.id===D.task.projectId),R=(N==null?void 0:N.name)||"Unassigned";if(k+=`${P+1}. "${D.task.title}" - ${D.totalDuration}m (${R} project)
`,D.task.timeEstimated>0){const B=Math.round(D.totalDuration/D.task.timeEstimated*100);k+=`└─ Progress: ${D.isCompleted?"Completed ✅":`${B}% complete`} (${D.totalDuration}/${D.task.timeEstimated} estimated minutes)
`}else k+=`└─ Progress: ${D.isCompleted?"Completed ✅":"In progress"} (No time estimate set)
`;k+=`└─ Created: ${_n(D.createdDate,"MMMM d, yyyy")}
`,D.isCompleted&&D.completedDate&&(k+=`└─ Completed: ${_n(D.completedDate,"MMMM d, yyyy")}
`);const L=this.formatWeeklyWorkDistribution(D.weeklyWork,i);k+=`└─ Weekly work: ${L}
`}),k+=`
`,k+=this.generateMonthlyAnalytics(u,A,C,i,s),k+=this.generateMonthlyPatterns(u,C,A,i,s),k+=this.generateMonthlyAchievements(w,S,T,C),k+=this.generateMonthlyRecommendations(u,A,C,d),k}static generateTaskSessionSummaryText(e,t,r){const i=Math.round(t.reduce((m,v)=>m+(v.duration||0),0)),a=t.length,o=a>0?Math.round(i/a):0,s=e.timeEstimated?Math.round(e.timeSpent/e.timeEstimated*100):0;let l=`Task '${e.title}' from project '${r.name}' has been worked on across ${a} sessions, totaling ${i} minutes.`;o>0&&(l+=` Average session duration: ${o} minutes.`),e.timeEstimated&&(l+=` Progress: ${s}% of estimated ${e.timeEstimated} minutes.`);const c=this.analyzeWorkPattern(t);l+=` Work pattern: ${c}.`;const u=this.findPeakProductivityHour(t);u&&(l+=` Most productive time for this task: ${u}.`);const d=t.map(m=>{try{let v=m.date||"";if(typeof v=="string"&&v.includes("_")&&(v=v.split("_")[0]),typeof v=="string"){const w=v.match(/(\d{4}-\d{2}-\d{2})/);w&&(v=w[1])}return(this.safeToDate(v)||(m.startTime?this.safeToDate(m.startTime):null)||new Date).toDateString()}catch(v){return console.warn("Error parsing session date for distribution analysis:",m,v),new Date().toDateString()}}),h=new Set(d).size;h>1&&(l+=` Worked on across ${h} different days.`);const f=t.filter(m=>m.notes&&m.notes.trim().length>0);if(f.length>0){const m=f.map(v=>v.notes).join(" ");l+=` Session insights: ${m}`}return l+=` Current status: ${e.completed?"Completed":"In Progress"}.`,e.description&&(l+=` Task description: ${e.description}`),l}static determineTaskCategory(e,t){return e.title.toLowerCase().includes("bug")||e.title.toLowerCase().includes("fix")?"Bug Fix":e.title.toLowerCase().includes("feature")||e.title.toLowerCase().includes("implement")?"Feature Development":e.title.toLowerCase().includes("test")||e.title.toLowerCase().includes("testing")?"Testing":t.name||"General"}static analyzeWorkPattern(e){if(e.length<2)return"limited session data";const t=e.map(i=>i.duration||0),r=t.reduce((i,a)=>i+a,0)/t.length;return r>30?"sustained long-form focus sessions":r<15?"frequent short burst sessions":"balanced work session rhythm"}static extractKeyCategories(e,t){const r=new Set;return e.forEach(i=>{i.title.toLowerCase().includes("bug")&&r.add("Bug Fixes"),i.title.toLowerCase().includes("feature")&&r.add("Features"),i.title.toLowerCase().includes("test")&&r.add("Testing"),i.title.toLowerCase().includes("design")&&r.add("Design")}),r.size===0&&r.add(t.name),Array.from(r).slice(0,3)}static analyzeProjectMomentum(e){if(e.length<3)return"insufficient data for momentum analysis";const t=e.filter(o=>o.startTime).sort((o,s)=>new Date(o.startTime).getTime()-new Date(s.startTime).getTime());if(t.length<3)return"consistent activity";const i=t.slice(-3).reduce((o,s)=>o+(s.duration||0),0)/3,a=t.slice(0,-3).reduce((o,s)=>o+(s.duration||0),0)/Math.max(1,t.length-3);return i>a*1.2?"accelerating momentum":i<a*.8?"declining momentum":"steady momentum"}static findPeakProductivityHour(e){if(!e.length)return null;const t=new Map;if(e.forEach(i=>{if(i.startTime){const a=new Date(i.startTime).getHours();t.set(a,(t.get(a)||0)+(i.duration||0))}}),t.size===0)return null;const r=Array.from(t.entries()).reduce((i,[a,o])=>o>(t.get(i)||0)?a:i,0);return`${r}:00-${r+1}:00`}static analyzeTemporalPattern(e){if(!e.length)return"No sessions recorded";const t=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=5&&o<12}).length,r=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=12&&o<17}).length,i=e.filter(a=>{const o=a.startTime?new Date(a.startTime).getHours():0;return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static assessFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static getTimeContext(e){if(!e)return"standard workspace";const t=new Date(e).getHours();return t<6?"late night focused environment":t<12?"morning productivity environment":t<17?"afternoon work environment":t<22?"evening work environment":"night work environment"}static formatRelativeDate(e,t=new Date){return e.toLocaleDateString()}static formatDueDate(e,t=new Date){const r=Math.floor((e.getTime()-t.getTime())/864e5),i=e.toLocaleDateString();return r<0?`${i} - OVERDUE`:i}static calculateProjectAge(e,t){if(t.length===0)return"recently";const r=t.reduce((a,o)=>new Date(o.createdAt)<new Date(a.createdAt)?o:a);return`on ${new Date(r.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static getTaskCategoryCount(e){const t=new Set;return e.forEach(r=>{r.title.toLowerCase().includes("bug")||r.title.toLowerCase().includes("fix")?t.add("Bug Fixes"):r.title.toLowerCase().includes("feature")||r.title.toLowerCase().includes("implement")?t.add("Features"):r.title.toLowerCase().includes("test")||r.title.toLowerCase().includes("testing")?t.add("Testing"):r.title.toLowerCase().includes("design")?t.add("Design"):t.add("General")}),t.size}static prioritizeTasksForDisplay(e,t){return e.sort((r,i)=>{const a=r.timeEstimated||0,o=i.timeEstimated||0;return a!==o?o-a:new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime()}).slice(0,t)}static inferTaskPriority(e){return e.timeEstimated?e.timeEstimated>300?"high":e.timeEstimated>120?"medium":"low":"low"}static getTaskDueInfo(e){return""}static analyzeTaskWorkPattern(e,t){const r=t.filter(a=>a.taskId===e.id);if(r.length===0)return"no sessions yet";const i=r.reduce((a,o)=>a+(o.duration||0),0)/r.length;return i>30?"sustained focus sessions":i<15?"short burst sessions":"balanced work rhythm"}static getRecentCompletedTasks(e,t){return e.sort((r,i)=>new Date(i.updatedAt||i.createdAt).getTime()-new Date(r.updatedAt||r.createdAt).getTime()).slice(0,t)}static getCompletionTimeframe(e){return`on ${new Date(e.updatedAt||e.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`}static calculateTimeEstimationAccuracy(e){const t=e.filter(i=>i.timeEstimated&&i.timeEstimated>0);if(t.length===0)return 0;const r=t.reduce((i,a)=>{const o=Math.min(a.timeSpent/a.timeEstimated,a.timeEstimated/a.timeSpent)*100;return i+o},0);return Math.round(r/t.length)}static findPeakProductivityPattern(e){if(e.length===0)return"no data available";const t={},r={};e.forEach(u=>{if(u.startTime){const d=new Date(u.startTime),h=d.getDay(),f=d.getHours();t[h]=(t[h]||0)+(u.duration||0),r[f]=(r[f]||0)+(u.duration||0)}});const i=Object.entries(t).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),a=Object.entries(r).reduce((u,[d,h])=>h>u[1]?[d,h]:u,["0",0]),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(i[0])],c=parseInt(a[0])>=12?"afternoon":"morning";return`${s} ${c}s`}static calculateTaskVelocity(e,t){if(e.length===0)return{current:0};const r=t.match(/(\d+)\s+weeks?/),i=r?parseInt(r[1]):1,a=Number((e.length/i).toFixed(1)),o=2.5;let s="below";return a>=o&&(s="meeting"),a>o*1.1&&(s="exceeding"),{current:a,target:o,comparison:s}}static getProjectDuration(e,t){if(e.length===0)return"no duration data";const r=[...e.map(l=>new Date(l.createdAt)),...t.map(l=>l.startTime?new Date(l.startTime):new Date)].filter(l=>l);if(r.length===0)return"no duration data";const i=new Date(Math.min(...r.map(l=>l.getTime()))),a=new Date(Math.max(...r.map(l=>l.getTime()))),o=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s=a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o===s?`since ${o}`:`from ${o} to ${s}`}static identifyProjectRisks(e,t,r){const i=[],a=r.filter(l=>l.timeEstimated?l.timeSpent>l.timeEstimated*1.2:!1);a.length>0&&i.push(`${a.length} task${a.length>1?"s":""} behind schedule`),t.filter(l=>l.startTime?(Date.now()-new Date(l.startTime).getTime())/(1e3*60*60*24)<=7:!1).length===0&&t.length>0&&i.push("No recent activity in past week");const s=e.filter(l=>l.completed);return e.length>5&&s.length/e.length<.3&&i.push("Low completion rate, recommend schedule review"),i}static generateDailyInsights(e,t,r,i){const a=[],o=r/i;o<15&&a.push(`Short session durations (${Math.round(o)}-minute average) suggest frequent task switching`);const s=t.filter(l=>{if(!l.timeEstimated||!l.timeSpent)return!1;const c=l.timeSpent/l.timeEstimated;return c>.3&&c<.8});if(s.length>0){const l=s[0];l.timeEstimated&&l.timeSpent&&a.push(`The ${Math.round(l.timeSpent/l.timeEstimated*100)}% progress on "${l.title}" makes it a good completion candidate for tomorrow`)}return e.some(l=>!l.projectId)&&a.push("Consider consolidating unassigned tasks into proper projects for better focus"),a.join(". ")}static generateProgressBar(e){const r=Math.round(e/100*20),i=20-r;return"█".repeat(r)+"░".repeat(i)}static parseSessionDate(e){try{if(e.startTime){const t=new Date(e.startTime);if(!isNaN(t.getTime()))return t}if(e.date){let t=e.date;if(typeof t=="string"&&t.includes("_")&&(t=t.split("_")[0]),typeof t=="string"){const i=t.match(/(\d{4}-\d{2}-\d{2})/);i&&(t=i[1])}const r=new Date(t);if(!isNaN(r.getTime()))return new Date(_n(r,"yyyy-MM-dd"));if(typeof t=="string"&&t.match(/^\d{4}-W\d{1,2}$/)){const i=this.parseISOWeekDate(t);if(i&&!isNaN(i.getTime()))return i}}return console.warn("No valid date found in session:",e),null}catch(t){return console.warn("Error parsing session date:",e,t),null}}static parseISOWeekDate(e){try{const[t,r]=e.split("-W").map(Number);if(!t||!r||r<1||r>53)return console.warn("Invalid ISO week format:",e),null;const i=new Date(t,0,1);for(;i.getDay()!==1;)i.setDate(i.getDate()+1);return i.setDate(i.getDate()+(r-1)*7),isNaN(i.getTime())?null:i}catch(t){return console.warn("Error parsing ISO week date:",e,t),null}}static isWithinTimeframe(e,t,r){try{if(!e)return!1;let i;const a=new Date(t);if(!isNaN(a.getTime()))i=a;else if(t.match(/^\d{4}-W\d{1,2}$/)){const o=this.parseISOWeekDate(t);if(!o)return!1;i=o}else throw new Error("Invalid reference date format");if(isNaN(i.getTime()))throw new Error("Invalid reference date");if(r==="weekly"){const o=i.getDay(),s=i.getDate()-o+(o===0?-6:1);i=new Date(i.setDate(s));const l=new Date(i);l.setDate(l.getDate()+6);const c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else if(r==="monthly"){const o=i.getMonth(),s=i.getFullYear();i=new Date(s,o,1);const l=new Date(s,o+1,0),c=new Date(e);return c.setHours(0,0,0,0),i.setHours(0,0,0,0),l.setHours(23,59,59,999),c>=i&&c<=l}else return e.getFullYear()===i.getFullYear()&&e.getMonth()===i.getMonth()&&e.getDate()===i.getDate()}catch(i){return console.error("Error checking timeframe:",i),!1}}static getOrdinalSuffix(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static generateProjectSummary(e,t,r,i){let a=`TOP PROJECTS BY TIME INVESTMENT:

`;const o=new Map;return e.forEach(l=>{var u;const c=(u=t.find(d=>d.id===l.taskId))==null?void 0:u.projectId;c&&o.set(c,(o.get(c)||0)+(l.duration||0))}),Array.from(o.entries()).sort((l,c)=>c[1]-l[1]).forEach(([l,c],u)=>{const d=r.find(w=>w.id===l),h=l==="unassigned"?"Unassigned Tasks":(d==null?void 0:d.name)||"Unknown Project",f=Math.round(c/i*100),m=Math.floor(c/60),v=c%60,y=m>0?`${m}h ${v}m`:`${v}m`;a+=`${u+1}. "${h}" - ${y} (${f}% of total time)
`}),a}static generateTaskSummary(e,t,r){let i=`TOP TASKS BY TIME SPENT:

`;const a=new Map;return e.forEach(s=>{s.taskId&&a.set(s.taskId,(a.get(s.taskId)||0)+(s.duration||0))}),Array.from(a).sort((s,l)=>l[1]-s[1]).map(([s,l])=>({taskId:s,duration:l})).forEach(({taskId:s,duration:l},c)=>{const u=t.find(h=>h.id===s),d=r.find(h=>h.id===(u==null?void 0:u.projectId));if(u){const h=Math.floor(l/60),f=l%60,m=h>0?`${h}h ${f}m`:`${f}m`;i+=`${c+1}. "${u.title}" - ${m} (${(d==null?void 0:d.name)||"Unassigned"} project)
`}}),i}static generateMetricsAndInsights(e,t,r){const i=t/r;let a=`PRODUCTIVITY METRICS:
`;return a+=`- Total Productive Time: ${Math.floor(t/60)}h ${t%60}m
`,a+=`- Session Count: ${r} work sessions
`,a+=`- Average Session: ~${Math.round(i)} minutes
`,a+=`- Session Distribution: ${this.analyzeTimeOfDayDistribution(e)}
`,a+=`- Focus Quality: ${this.analyzeFocusQuality(e)}

`,a}static analyzeTimeOfDayDistribution(e){if(e.length===0)return"No sessions recorded";const t=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=5&&o<12}).length,r=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=12&&o<17}).length,i=e.filter(a=>{if(!a.startTime)return!1;const o=new Date(a.startTime).getHours();return o>=17&&o<22}).length;return t>r&&t>i?"Morning-focused":r>t&&r>i?"Afternoon-focused":i>t&&i>r?"Evening-focused":"Evenly distributed"}static analyzeFocusQuality(e){if(!e.length)return"No data available";const t=e.reduce((a,o)=>a+(o.duration||0),0)/e.length,r=e.some(a=>(a.duration||0)>=25),i=e.filter(a=>(a.duration||0)<15).length;return t>=20&&r&&i<=e.length*.2?"Excellent - consistent long focus periods":t>=15&&i<=e.length*.3?"Good - balanced focus periods":t>=10?"Fair - moderate focus with room for improvement":"Needs improvement - consider longer focus sessions"}static formatDayHeader(e){return _n(e,"EEE do")}static formatMinutes(e){const t=Math.floor(e/60),r=e%60;return t>0?`${t} hours ${r} minutes`:`${r} minutes`}static formatDailyWork(e){return e.map(t=>`${_n(t.date,"EEE")}: ${t.duration}m`).join(", ")}static calculateDailyWork(e,t,r,i){return e2({start:t,end:r}).map(o=>{const s=e.filter(l=>{try{const c=l.date||l.startTime;if(!c)return!1;let u=c;if(typeof u=="string"){u.includes("_")&&(u=u.split("_")[0]);const m=u.match(/(\d{4}-\d{2}-\d{2})/);m&&(u=m[1])}const d=this.safeToDate(u);if(!d)return console.warn("Invalid session date in calculateDailyWork:",{original:c,cleaned:u}),!1;const h=_n(d,"yyyy-MM-dd"),f=_n(o,"yyyy-MM-dd");return h===f&&(!i||i(l))}catch(c){return console.warn("Error processing session in calculateDailyWork:",l,c),!1}});return{date:o,duration:s.reduce((l,c)=>l+(c.duration||0),0),sessions:s.length}})}static calculateProjectProgress(e,t,r,i,a,o){const s=r.filter(f=>t.some(m=>m.projectId===e.id&&m.id===f.taskId)),l=this.calculateDailyWork(s,i,a),c=l.reduce((f,m)=>f+m.duration,0),u=o>0?c/o*100:0,h=t.filter(f=>f.projectId===e.id).map(f=>this.calculateTaskProgress(f,e,r,i,a));return{project:e,tasks:h,dailyWork:l,totalDuration:c,percentageOfWeek:u}}static calculateTaskProgress(e,t,r,i,a){const o=r.filter(h=>h.taskId===e.id),s=this.calculateDailyWork(o,i,a),l=s.reduce((h,f)=>h+f.duration,0),c=e.timeEstimated>0?l/e.timeEstimated*100:0;let u,d;try{u=new Date(e.createdAt),isNaN(u.getTime())&&(console.warn("Invalid task createdAt date, using current date:",e),u=new Date)}catch(h){console.warn("Error parsing task createdAt, using current date:",e,h),u=new Date}try{e.completed&&e.updatedAt&&(d=new Date(e.updatedAt),isNaN(d.getTime())&&(console.warn("Invalid task updatedAt date, ignoring completion date:",e),d=void 0))}catch(h){console.warn("Error parsing task updatedAt, ignoring completion date:",e,h),d=void 0}return{task:e,project:t,dailyWork:s,totalDuration:l,progress:c,isCompleted:e.completed,createdDate:u,completedDate:d}}static formatDailyDistribution(e){return e.map(t=>`${_n(t.date,"EEE")}: ${t.duration}m`).join(", ")}static safeToDate(e){try{if(!e)return null;if(typeof e=="object"&&typeof e.toDate=="function"&&(e=e.toDate()),e instanceof Date)return isNaN(e.getTime())?null:e;if(typeof e=="number"||/^\d+$/.test(e)){const t=new Date(Number(e));return isNaN(t.getTime())?null:t}if(typeof e=="string"){let t=e;if(t.includes("_")&&(t=t.split("_")[0]),/^\d{4}-W\d{1,2}$/.test(t)){const a=this.parseISOWeekDate(t);return a&&!isNaN(a.getTime())?a:null}const r=t.match(/(\d{4}-\d{2}-\d{2})/);r&&(t=r[1]);const i=new Date(t);return isNaN(i.getTime())?null:i}return null}catch{return null}}static generateWeeklyAnalytics(e,t,r,i,a){let o=`

WEEKLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateDailyWork(e,i,a);s.filter(k=>k.duration>0);const l=s.reduce((k,A)=>A.duration>k.duration?A:k,s[0]),c=s.reduce((k,A)=>A.duration<k.duration&&A.duration>0?A:k,s.find(k=>k.duration>0)||s[0]);if(o+=`- Most Productive Day: ${_n(l.date,"EEE")} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,c&&c.duration>0)o+=`- Least Productive Day: ${_n(c.date,"EEE")} (${this.formatMinutes(c.duration)})
`;else{const k=s.filter(A=>A.duration===0);if(k.length>0){const A=k.map(D=>_n(D.date,"EEE")).join(" & ");o+=`- Least Productive Day: ${A} (planned rest days)
`}}const u=s.filter(k=>![0,6].includes(k.date.getDay())),d=u.length>0?Math.round(u.reduce((k,A)=>k+A.duration,0)/u.length):0;o+=`- Average Daily Time: ${d} minutes (weekdays only)
`;const h=e.length>0?Math.round(e.reduce((k,A)=>k+A.duration,0)/e.length*10)/10:0;o+=`- Average Session Duration: ${h} minutes
`;const f=t.filter(k=>k.isCompleted).length,m=t.length>0?Math.round(f/t.length*100):0;o+=`- Task Completion Rate: ${m}% (${f}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const v=t.filter(k=>k.createdDate>=i&&k.createdDate<=a).length,y=r.filter(k=>{const A=k.project.createdAt;return A&&A>=i&&A<=a}).length;let w=`- Task Creation Activity: ${v} new tasks`;y>0&&(w+=`, ${y} new project${y>1?"s":""} created`),o+=w+`
`;const S=t.filter(k=>k.task.timeEstimated>0),T=S.filter(k=>Math.abs(k.totalDuration-k.task.timeEstimated)/k.task.timeEstimated<=.1),C=S.length>0?Math.round(T.length/S.length*100):0;return o+=`- Time Estimation Accuracy: ${C}% of completed tasks within 10% of estimate
`,o}static generateWeeklyPatterns(e,t,r,i){let a=`
WEEKLY PATTERNS:

`;const o=this.calculateDailyWork(e,r,i),s=o.filter(v=>![0,6].includes(v.date.getDay())),l=o.filter(v=>[0,6].includes(v.date.getDay())),c=s.reduce((v,y)=>v+y.duration,0),u=l.reduce((v,y)=>v+y.duration,0);c>0&&u===0?a+=`- Strong Mon-Fri productivity pattern (no weekend work)
`:c>u*3?a+=`- Weekday-focused productivity pattern (limited weekend work)
`:a+=`- Consistent work pattern across all days
`;const d=o.reduce((v,y)=>y.duration>v.duration?y:v);d.duration>0&&(a+=`- Mid-week peak on ${_n(d.date,"EEE")} (${this.formatMinutes(d.duration)})
`);const h=t.find(v=>v.totalDuration>0);h&&(a+=`- Consistent focus on ${h.project.name} project (${h.percentageOfWeek.toFixed(0)}% of total time)
`);const f=t.filter(v=>v.totalDuration>0);f.length>1?a+=`- Project diversification: ${f.length} active projects maintained
`:f.length===1&&(a+=`- Single-project focus maintained throughout week
`);const m=e.filter(v=>v.startTime);if(m.length>0){const v=m.filter(w=>{const S=w.startTime.getHours();return S>=6&&S<12}).reduce((w,S)=>w+S.duration,0),y=m.filter(w=>{const S=w.startTime.getHours();return S>=12&&S<18}).reduce((w,S)=>w+S.duration,0);v>y*1.5?a+=`- Morning-heavy work pattern based on session timing
`:y>v*1.5?a+=`- Afternoon-focused work pattern based on session timing
`:a+=`- Balanced morning-afternoon work distribution
`}return a}static generateMomentumIndicators(e,t,r){let i=`
MOMENTUM INDICATORS: `;const a=e.filter(u=>u.progress>=60),o=e.filter(u=>u.isCompleted),s=t.filter(u=>u.dailyWork.filter(h=>h.duration>0).length>=3),l=[];if(a.length>0&&l.push(`Good progress momentum with ${Math.round(a.reduce((u,d)=>u+d.progress,0)/a.length)}% completion on ${a.length} major tasks`),s.length>0){const u=s[0];l.push(`"${u.project.name}" project showing strong consistency`)}o.length>0&&l.push(`${o.length} task completion${o.length>1?"s":""} demonstrate good follow-through`);const c=e.filter(u=>u.progress>=80&&!u.isCompleted);return c.length>0&&l.push(`Ready to push ${c.length} tasks across completion threshold next week`),l.length===0?i+="Building momentum with steady progress across active tasks and projects.":i+=l.join(". ")+".",i}static calculateMonthlyProjectProgress(e,t,r,i,a,o){const s=t.filter(f=>f.projectId===e.id),l=r.filter(f=>f.projectId===e.id),c=l.reduce((f,m)=>f+(m.duration||0),0),u=o>0?c/o*100:0,d=this.calculateWeeklyWork(l,i,a),h=s.map(f=>this.calculateMonthlyTaskProgress(f,e,r,i,a));return{project:e,tasks:h,weeklyWork:d,totalDuration:c,percentageOfMonth:u}}static calculateMonthlyTaskProgress(e,t,r,i,a){const o=r.filter(f=>f.taskId===e.id),s=o.reduce((f,m)=>f+(m.duration||0),0),l=e.timeEstimated>0?s/e.timeEstimated*100:0,c=e.completed,u=this.safeToDate(e.createdAt)||new Date,d=c&&this.safeToDate(e.updatedAt)||void 0,h=this.calculateWeeklyWork(o,i,a);return{task:e,project:t,weeklyWork:h,totalDuration:s,progress:l,isCompleted:c,createdDate:u,completedDate:d}}static calculateWeeklyWork(e,t,r){const i={},a=new Date(t);for(;a<=r;){const o=this.getWeekKeyFromDate(a),s=this.getWeekStart(a);i[o]||(i[o]={week:o,weekStart:s,duration:0,sessions:0}),a.setDate(a.getDate()+7)}return e.forEach(o=>{const s=this.safeToDate(o.date||o.startTime);if(!s)return;const l=this.getWeekKeyFromDate(s);i[l]&&(i[l].duration+=o.duration||0,i[l].sessions+=1)}),Object.values(i).sort((o,s)=>o.weekStart.getTime()-s.weekStart.getTime())}static getWeekKeyFromDate(e){const t=this.getWeekStart(e);return _n(t,"MM/dd")}static getWeekStart(e){const t=new Date(e),r=t.getDay(),i=t.getDate()-r+(r===0?-6:1);return t.setDate(i),t.setHours(0,0,0,0),t}static formatWeeklyDistribution(e,t){return e.map(r=>{const i=Math.floor(r.duration/60),a=r.duration%60,o=i>0?`${i}h ${a}m`:`${a}m`;return`Week ${r.week}: ${o}`}).join(", ")}static formatWeeklyWorkDistribution(e,t){return e.filter(r=>r.duration>0).map(r=>`Week ${r.week}(${r.duration}m)`).join(", ")||"No work recorded"}static generateMonthlyAnalytics(e,t,r,i,a){let o=`MONTHLY PRODUCTIVITY ANALYTICS:

`;const s=this.calculateWeeklyWork(e,i,a),l=s.reduce((k,A)=>A.duration>k.duration?A:k,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date}),c=s.reduce((k,A)=>A.duration<k.duration&&A.duration>0?A:k,s[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});o+=`- Most Productive Week: Week ${l.week} (${this.formatMinutes(l.duration)} across ${l.sessions} sessions)
`,o+=`- Least Productive Week: Week ${c.week} (${this.formatMinutes(c.duration)}${c.duration===0?" - planned rest":""})
`;const u=this.analyzeDayOfWeekPattern(e),d=Object.entries(u).reduce((k,[A,D])=>D.avgDuration>k[1].avgDuration?[A,D]:k,Object.entries(u)[0]||["None",{avgDuration:0}]),h=Object.entries(u).reduce((k,[A,D])=>D.avgDuration<k[1].avgDuration?[A,D]:k,Object.entries(u)[0]||["None",{avgDuration:0}]);o+=`- Most Productive Day Type: ${d[0]} (average ${Math.round(d[1].avgDuration)}m per session)
`,o+=`- Least Productive Day Type: ${h[0]} ${h[1].avgDuration===0?"(planned rest day)":`(average ${Math.round(h[1].avgDuration)}m per session)`}
`,Math.ceil((a.getTime()-i.getTime())/(1e3*60*60*24));const f=e.filter(k=>{const A=this.safeToDate(k.date||k.startTime);return A&&A.getDay()>=1&&A.getDay()<=5}),m=e.filter(k=>{const A=this.safeToDate(k.date||k.startTime);return A&&(A.getDay()===0||A.getDay()===6)}),v=f.length>0?Math.round(f.reduce((k,A)=>k+(A.duration||0),0)/f.length):0,y=m.length>0?Math.round(m.reduce((k,A)=>k+(A.duration||0),0)/m.length):0;o+=`- Average Daily Time: ${v} minutes (weekdays), ${y} minutes (weekends)
`;const w=e.length>0?e.reduce((k,A)=>k+(A.duration||0),0)/e.length:0;o+=`- Average Session Duration: ${w.toFixed(1)} minutes
`;const S=t.filter(k=>k.isCompleted).length,T=t.length>0?Math.round(S/t.length*100):0;o+=`- Task Completion Rate: ${T}% (${S}/${t.length} tasks completed)
`,o+=`- Projects Worked On: ${r.length} projects
`;const C=this.calculateMonthlyEstimationAccuracy(t);return o+=`- Time Estimation Accuracy: ${C}% of completed tasks within 15% of estimate

`,o}static analyzeDayOfWeekPattern(e){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={};return t.forEach(i=>{r[i]={totalDuration:0,sessionCount:0,avgDuration:0}}),e.forEach(i=>{const a=this.safeToDate(i.date||i.startTime);if(!a)return;const o=t[a.getDay()];r[o].totalDuration+=i.duration||0,r[o].sessionCount+=1}),Object.keys(r).forEach(i=>{const a=r[i];a.avgDuration=a.sessionCount>0?a.totalDuration/a.sessionCount:0}),r}static calculateMonthlyEstimationAccuracy(e){const t=e.filter(i=>i.isCompleted&&i.task.timeEstimated>0);if(t.length===0)return 0;const r=t.filter(i=>Math.abs(i.totalDuration-i.task.timeEstimated)/i.task.timeEstimated<=.15);return Math.round(r.length/t.length*100)}static generateMonthlyPatterns(e,t,r,i,a){let o=`MONTHLY PATTERNS & INSIGHTS:

`;const s=e.filter(S=>{const T=this.safeToDate(S.date||S.startTime);return T&&T.getDay()>=1&&T.getDay()<=5}).length,l=e.filter(S=>{const T=this.safeToDate(S.date||S.startTime);return T&&(T.getDay()===0||T.getDay()===6)}).length;l===0?o+=`- Strong weekday productivity with strategic weekend rest
`:o+=`- Balanced weekday/weekend approach (${s} weekday vs ${l} weekend sessions)
`;const c=this.calculateWeeklyWork(e,i,a),u=c.reduce((S,T)=>T.duration>S.duration?T:S,c[0]||{week:"None",duration:0,sessions:0,weekStart:new Date});if(u.duration>0){const S=Math.floor(u.duration/60),T=u.duration%60,C=S>0?`${S}h ${T}m`:`${T}m`;o+=`- Mid-month productivity peak (Week ${u.week}) with ${C}
`}const d=t[0];d&&d.percentageOfMonth>30&&(o+=`- Consistent ${d.project.name} focus (${d.percentageOfMonth.toFixed(0)}% of total time) showing strong learning commitment
`);const h=r.filter(S=>S.isCompleted),f=r.length>0?h.length/r.length*100:0;f>30?o+=`- Excellent task completion follow-through (${Math.round(f)}% completion rate)
`:f>15&&(o+=`- Good task completion momentum (${Math.round(f)}% completion rate)
`),t.length>=3&&(o+=`- Project diversification balanced with deep focus areas
`);const m=r.filter(S=>S.createdDate<new Date(i.getTime()+14*24*60*60*1e3)),v=r.filter(S=>S.createdDate>=new Date(i.getTime()+14*24*60*60*1e3)),y=this.calculateMonthlyEstimationAccuracy(m),w=this.calculateMonthlyEstimationAccuracy(v);return w>y&&w>80&&(o+=`- Improved time estimation accuracy throughout month (early: ${y}%, late: ${w}%)
`),o+`
`}static generateMonthlyAchievements(e,t,r,i){let a=`ACHIEVEMENT HIGHLIGHTS:
`;const o=i.find(d=>d.project.name.toLowerCase().includes("learn")||d.project.name.toLowerCase().includes("study")||d.project.name.toLowerCase().includes("course"));if(o&&o.percentageOfMonth>20){const d=Math.round(o.percentageOfMonth);a+=`✅ Major Learning: "${o.project.name}" curriculum focus (${d}% of time investment)
`}const s=e.filter(d=>d.title.toLowerCase().includes("implement")||d.title.toLowerCase().includes("build")||d.title.toLowerCase().includes("develop")||d.title.toLowerCase().includes("create"));s.length>0&&(a+=`✅ Development Milestone: ${s[0].title} completed
`);const l=e.filter(d=>d.title.toLowerCase().includes("write")||d.title.toLowerCase().includes("blog")||d.title.toLowerCase().includes("article")||d.title.toLowerCase().includes("post"));l.length>0&&(a+=`✅ Content Creation: ${l.length} technical ${l.length===1?"post":"posts"} published
`);const c=e.filter(d=>d.title.toLowerCase().includes("docker")||d.title.toLowerCase().includes("kubernetes")||d.title.toLowerCase().includes("aws")||d.title.toLowerCase().includes("learn"));return c.length>0&&(a+=`✅ Skills Expansion: ${c[0].title} foundation established
`),e.filter(d=>d.title.toLowerCase().includes("contribute")||d.title.toLowerCase().includes("open source")||d.title.toLowerCase().includes("github")).length>0&&(a+=`✅ Open Source: First meaningful contribution to React ecosystem
`),a+`
`}static generateMonthlyRecommendations(e,t,r,i){let a=`RISK FACTORS & RECOMMENDATIONS:
`;const o=i.filter(y=>!y.projectId||!r.find(w=>w.project.id===y.projectId));o.length>0&&(a+=`⚠️ Unassigned tasks present (${o.length}) - maintain project organization
`);const s=this.analyzeDayOfWeekPattern(e),l=Object.entries(s).reduce((y,[w,S])=>S.avgDuration>y[1].avgDuration?[w,S]:y,Object.entries(s)[0]||["None",{avgDuration:0}]);l[1].avgDuration>0&&(a+=`💡 ${l[0]} productivity peak suggests optimal deep work scheduling
`),this.calculateWeeklyWork(e,new Date,new Date).filter(y=>y.duration>0).length>=3&&(a+=`💡 Consistent weekly momentum pattern - consider monthly sprint cycles
`),this.calculateMonthlyEstimationAccuracy(t)>80&&(a+=`💡 Time estimation improving - maintain estimation discipline
`),a+=`
`;const h=t.filter(y=>y.isCompleted).length,f=t.filter(y=>!y.isCompleted&&y.totalDuration>0).length;let m="NEXT MONTH MOMENTUM: ";h>=3&&(m+=`Excellent foundation with ${h} major completions ready. `);const v=r[0];return v&&(m+=`Strong learning velocity in ${v.project.name} ecosystem. `),f>0?m+="Ready for advanced feature development phase with proven productivity patterns and estimation accuracy.":m+="Ready to establish new productivity patterns and project momentum.",a+m}}class KG{static async createMultiLevelChunks(e){console.log(`🔄 Creating multi-level chunks for user: ${e}`);const t=await this.getUserData(e),{sessions:r,tasks:i,projects:a}=t;console.log(`📊 Data fetched - Sessions: ${r.length}, Tasks: ${i.length}, Projects: ${a.length}`),this.validateUserData(r,i,a);const o=[],s=await this.createMonthlyTemporalChunks(r,i,a,e);o.push(...s);const l=await this.createWeeklyTemporalChunks(r,i,a,e);o.push(...l);const c=await this.createDailyTemporalChunks(r,i,a,e);o.push(...c);const u=await this.createProjectSummaryChunks(a,i,r,e);o.push(...u);const d=await this.createTaskAggregateChunks(i,r,a,e);o.push(...d);const h=await this.createSessionChunks(r,i,a,e);return o.push(...h),console.log(`✅ Created ${o.length} total chunks with priority: Monthly → Weekly → Daily → Project → Task → Session`),o}static async getUserData(e){try{const t=zt(qt(Qe,"tasks"),gt("userId","==",e)),i=(await kn(t)).docs.map(d=>{var f,m;const h=d.data();return{id:d.id,title:h.title||h.text||"Untitled Task",description:h.description||h.notes||"",projectId:h.projectId||"",completed:h.completed||!1,status:h.status||(h.completed?"completed":"active"),timeSpent:h.timeSpent||0,timeEstimated:h.timeEstimated||0,userId:h.userId,createdAt:((f=h.createdAt)==null?void 0:f.toDate())||new Date,updatedAt:((m=h.updatedAt)==null?void 0:m.toDate())||new Date,order:h.order??0}}),a=zt(qt(Qe,"workSessions"),gt("userId","==",e)),s=(await kn(a)).docs.map(d=>{var w,S,T,C;const h=d.data(),f=(w=h.startTime)!=null&&w.toDate?h.startTime.toDate():void 0,m=(S=h.createdAt)!=null&&S.toDate?h.createdAt.toDate():new Date,v=(T=h.updatedAt)!=null&&T.toDate?h.updatedAt.toDate():new Date,y=(Ll.safeToDate(f||h.date)||new Date).toISOString().split("T")[0];return{id:d.id,taskId:h.taskId||"",projectId:h.projectId||"",duration:h.duration||0,sessionType:h.sessionType||"work",startTime:f,endTime:(C=h.endTime)==null?void 0:C.toDate(),notes:h.notes||"",status:h.status||"completed",userId:h.userId,date:h.date||y,createdAt:m,updatedAt:v}}),l=zt(qt(Qe,"projects"),gt("userId","==",e)),u=(await kn(l)).docs.map(d=>{const h=d.data();return{id:d.id,name:h.name||"Untitled Project",color:h.color||"#3498db",description:h.description||"",userId:h.userId}});return{sessions:s,tasks:i,projects:u}}catch(t){return console.error("❌ Error loading user data:",t),{sessions:[],tasks:[],projects:[]}}}static async createSessionChunks(e,t,r,i){const a=[],o=e.reduce((s,l)=>(s[l.taskId]||(s[l.taskId]=[]),s[l.taskId].push(l),s),{});for(const[s,l]of Object.entries(o)){const c=t.find(h=>h.id===s),u=r.find(h=>h.id===(c==null?void 0:c.projectId));if(!c||!u||l.length===0)continue;const d=Ll.generateTaskSessionSummaryText(c,l,u);a.push({id:`task_sessions_${c.id}`,content:d,content_type:"task_sessions",originalContent:JSON.stringify({task:c,sessions:l}),metadata:{chunkType:"task_sessions",chunkLevel:6,sourceIds:[c.id,...l.map(h=>h.id)],created:new Date().toISOString(),entities:{taskId:c.id,projectId:u.id,sessionIds:l.map(h=>h.id),userId:i},analytics:{duration:l.reduce((h,f)=>h+f.duration,0),sessionCount:l.length,productivity:this.calculateTaskSessionsProductivity(l,c),completionRate:c.timeEstimated?Math.round(c.timeSpent/c.timeEstimated*100):0}},chunkIndex:0,tokenCount:kr.estimateTokens(d)})}return a}static getMostCommonTimeSlot(e){const r=e.map(i=>this.getTimeSlot(i.startTime)).reduce((i,a)=>(i[a]=(i[a]||0)+1,i),{});return Object.entries(r).reduce((i,a)=>r[i[0]]>r[a[0]]?i:a)[0]}static calculateTaskSessionsProductivity(e,t){if(e.length===0)return .5;const r=e.reduce((a,o)=>a+this.calculateSessionProductivity(o,t),0)/e.length,i=e.length>3?.1:0;return Math.max(0,Math.min(1,r+i))}static async createTaskAggregateChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.taskId===o.id),l=r.find(u=>u.id===o.projectId);if(!l)continue;const c=Ll.generateTaskAggregateText(o,s,l);a.push({id:`task_aggregate_${o.id}`,content:c,content_type:"task_aggregate",originalContent:JSON.stringify({task:o,sessions:s}),metadata:{chunkType:"task_aggregate",chunkLevel:5,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{taskId:o.id,projectId:l.id,sessionIds:s.map(u=>u.id),userId:i},analytics:{duration:o.timeSpent,sessionCount:s.length,completionRate:o.timeEstimated?Math.round(o.timeSpent/o.timeEstimated*100):0,productivity:this.calculateTaskProductivity(o,s)}},chunkIndex:0,tokenCount:kr.estimateTokens(c)})}return a}static async createProjectSummaryChunks(e,t,r,i){const a=[];for(const o of e){const s=t.filter(u=>u.projectId===o.id),l=r.filter(u=>u.projectId===o.id);if(s.length===0)continue;const c=Ll.generateProjectSummaryText(o,s,l);a.push({id:`project_summary_${o.id}`,content:c,content_type:"project_summary",originalContent:JSON.stringify({project:o,tasks:s,sessions:l}),metadata:{chunkType:"project_summary",chunkLevel:4,sourceIds:[o.id,...s.map(u=>u.id)],created:new Date().toISOString(),entities:{projectId:o.id,sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:s.reduce((u,d)=>u+d.timeSpent,0),sessionCount:l.length,completionRate:Math.round(s.filter(u=>u.completed).length/s.length*100),productivity:this.calculateProjectProductivity(s,l)}},chunkIndex:0,tokenCount:kr.estimateTokens(c)})}return a}static async createMonthlyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByMonth(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseMonthKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing monthly chunk for month ${s}:`,{monthStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Ll.generateTemporalSummaryText("monthly",l,c.toISOString(),u,d);a.push({id:`monthly_${s}`,content:h,content_type:"monthly_summary",originalContent:JSON.stringify({month:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:1,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`monthly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l),tasksCreated:u.length,projectsWorkedOn:d.length}},chunkIndex:0,tokenCount:kr.estimateTokens(h)})}),a}static async createWeeklyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByWeek(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=this.parseWeekKey(s),u=t.filter(f=>l.filter(v=>v.taskId===f.id).length>0),d=r.filter(f=>u.some(m=>m.projectId===f.id));console.log(`📅 Processing weekly chunk for week ${s}:`,{weekStartDate:c.toISOString(),sessionsCount:l.length,tasksCount:u.length,projectsCount:d.length});const h=Ll.generateTemporalSummaryText("weekly",l,c.toISOString(),u,d);a.push({id:`weekly_${s}`,content:h,content_type:"weekly_summary",originalContent:JSON.stringify({week:s,sessions:l,tasks:u,projects:d}),metadata:{chunkType:"temporal_pattern",chunkLevel:2,sourceIds:[...l.map(f=>f.id),...u.map(f=>f.id)],timeframe:`weekly_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(f=>f.id),userId:i},analytics:{duration:l.reduce((f,m)=>f+(m.duration||0),0),sessionCount:l.length,completionRate:u.length>0?Math.round(u.filter(f=>f.completed).length/u.length*100):0,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:kr.estimateTokens(h)})}),a}static async createDailyTemporalChunks(e,t,r,i){const a=[],o=this.groupSessionsByDate(e);return Object.entries(o).forEach(([s,l])=>{if(l.length===0)return;const c=Ll.generateTemporalSummaryText("daily",l,s,t,r);a.push({id:`daily_${s}`,content:c,content_type:"daily_summary",originalContent:JSON.stringify({date:s,sessions:l}),metadata:{chunkType:"temporal_pattern",chunkLevel:3,sourceIds:l.map(u=>u.id),timeframe:`daily_${s}`,created:new Date().toISOString(),entities:{sessionIds:l.map(u=>u.id),userId:i},analytics:{duration:l.reduce((u,d)=>u+(d.duration||0),0),sessionCount:l.length,productivity:this.calculateTemporalProductivity(l)}},chunkIndex:0,tokenCount:kr.estimateTokens(c)})}),a}static getTimeSlot(e){if(!e)return"unknown";const t=new Date(e).getHours();return t<6?"late_night":t<12?"morning":t<17?"afternoon":t<22?"evening":"night"}static calculateSessionProductivity(e,t){let r=.5;return e.status==="completed"&&(r+=.3),e.duration>=25&&(r+=.2),t.timeEstimated&&e.duration<=t.timeEstimated*.5&&(r-=.2),Math.max(0,Math.min(1,r))}static calculateTaskProductivity(e,t){if(t.length===0)return .5;let i=t.reduce((a,o)=>a+this.calculateSessionProductivity(o,e),0)/t.length;return e.completed&&(i+=.2),e.timeEstimated&&e.timeSpent<=e.timeEstimated*1.2&&(i+=.1),Math.max(0,Math.min(1,i))}static calculateProjectProductivity(e,t){if(e.length===0)return .5;const r=e.filter(a=>a.completed).length/e.length,i=e.reduce((a,o)=>{const s=t.filter(l=>l.taskId===o.id);return a+this.calculateTaskProductivity(o,s)},0)/e.length;return r*.6+i*.4}static calculateTemporalProductivity(e){if(e.length===0)return .5;const r=e.filter(o=>o.status==="completed").length/e.length,i=e.reduce((o,s)=>o+s.duration,0)/e.length,a=Math.min(1,i/30);return r*.7+a*.3}static groupSessionsByDate(e){console.log(`📊 Grouping ${e.length} sessions by date...`);const t=e.reduce((i,a)=>{const s=(Ll.safeToDate(a.date||a.startTime)||new Date).toISOString().split("T")[0];return i[s]||(i[s]=[]),i[s].push(a),i},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} days:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static groupSessionsByWeek(e){console.log(`📊 Grouping ${e.length} sessions by week...`);const t=e.reduce((i,a)=>{try{const o=Ll.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getWeekKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for weekly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} weeks:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`)),t}static getWeekKey(e){const t=e.getFullYear(),r=this.getWeekNumber(e);return`${t}-W${r.toString().padStart(2,"0")}`}static getWeekNumber(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);const i=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)}static parseWeekKey(e){const t=e.match(/(\d{4})-W(\d{2})/);if(!t)return console.warn("Invalid week key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2]),a=new Date(r,0,1),o=(i-1)*7,s=new Date(a.getTime()+o*24*60*60*1e3),l=s.getDay(),c=l===0?-6:1-l;return s.setDate(s.getDate()+c),s}static groupSessionsByMonth(e){console.log(`📊 Grouping ${e.length} sessions by month...`);const t=e.reduce((i,a)=>{try{const o=Ll.safeToDate(a.startTime||a.date);if(!o)return console.warn("Invalid date in session, skipping:",{sessionId:a.id,date:a.date,startTime:a.startTime}),i;const s=this.getMonthKey(o);return i[s]||(i[s]=[]),i[s].push(a),i}catch(o){return console.error("Error processing session for monthly grouping:",o,a),i}},{}),r=Object.keys(t).length;return console.log(`📅 Grouped sessions into ${r} months:`,Object.entries(t).map(([i,a])=>`${i}: ${a.length} sessions`).join(", ")),t}static getMonthKey(e){const t=e.getFullYear(),r=e.getMonth()+1;return`${t}-${r.toString().padStart(2,"0")}`}static parseMonthKey(e){const t=e.match(/(\d{4})-(\d{2})/);if(!t)return console.warn("Invalid month key format:",e),new Date;const r=parseInt(t[1]),i=parseInt(t[2])-1;return new Date(r,i,1)}static validateUserData(e,t,r){console.log("🔍 Validating user data...");const i=e.filter(c=>c.duration>0&&c.taskId),a=e.filter(c=>Ll.safeToDate(c.date||c.startTime)!==null);console.log("📊 Session validation:",{total:e.length,withDuration:i.length,withValidDates:a.length,sampleDates:e.slice(0,3).map(c=>({id:c.id,date:c.date,startTime:c.startTime}))});const o=t.filter(c=>r.some(u=>u.id===c.projectId));console.log("📊 Task validation:",{total:t.length,withValidProjects:o.length,sampleTasks:t.slice(0,3).map(c=>({id:c.id,title:c.title,projectId:c.projectId,timeSpent:c.timeSpent}))}),console.log("📊 Project validation:",{total:r.length,sampleProjects:r.slice(0,3).map(c=>({id:c.id,name:c.name}))});const s=e.filter(c=>t.some(u=>u.id===c.taskId)),l=e.filter(c=>r.some(u=>u.id===c.projectId));console.log("🔗 Cross-reference validation:",{sessionsWithValidTasks:s.length,sessionsWithValidProjects:l.length}),i.length===0&&console.warn("⚠️  No valid sessions found! This will result in empty weekly summaries."),a.length===0&&console.warn("⚠️  No sessions with valid dates found! Date filtering will fail.")}}class Uu{static classifyQuery(e){const t=e.toLowerCase();let r="general",i=.3,a=[];const o=this.TASK_PRIORITY_PATTERNS.filter(S=>S.test(t)),s=this.PROJECT_FOCUS_PATTERNS.filter(S=>S.test(t)),l=this.SUMMARY_INSIGHTS_PATTERNS.filter(S=>S.test(t)),c=/\b(task|tasks|todo|to-do)\b/i.test(t),u=/\b(project|projects)\b/i.test(t),d=/\b(list|show|give\s+me|tell\s+me|what|which)\b/i.test(t),h=/\b(in\s+the\s+|from\s+|for\s+)["']?[a-zA-Z0-9\s]+["']?\s*(project|tasks?)/i.test(t),f=Math.max(o.length,s.length,l.length);f>0?o.length>0&&o.length>=f?(r="task_priority",i=Math.min(.95,.5+o.length*.15),a.push("task_management"),h&&c&&(i=Math.min(.95,i+.2))):s.length>0&&s.length>=f?(r="project_focus",i=Math.min(.95,.5+s.length*.15),a.push("project_management")):l.length>0&&(r="summary_insights",i=Math.min(.95,.5+l.length*.15),a.push("analytics")):c&&d?(r="task_priority",i=.6,a.push("task_management"),h&&(i=.75)):u&&d?(r="project_focus",i=.65,a.push("project_management")):(c||u)&&(r=c?"task_priority":"project_focus",i=.45,a.push(c?"task_management":"project_management")),s.length>0&&r!=="project_focus"&&a.push("project_management"),l.length>0&&r!=="summary_insights"&&a.push("analytics");const m=e.split(/\s+/).length,v=a.length>1;let y="prioritized";v&&m>10?y="comprehensive":(i<.7||v)&&(y="balanced");const w=this.CONTENT_TYPE_MAPPINGS[r];return console.log("🔍 Query Classification Debug:",{query:e.substring(0,100),taskMatches:o.length,projectMatches:s.length,summaryMatches:l.length,hasTaskKeywords:c,hasProjectKeywords:u,hasListingKeywords:d,hasSpecificProject:h,primaryIntent:r,confidence:i.toFixed(2),secondaryIntents:a,mixingStrategy:y,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)]}),{primaryIntent:r,secondaryIntents:a,confidence:i,suggestedContentTypes:[...w.primary,...w.secondary.slice(0,2),...w.tertiary.slice(0,1)],suggestedChunkTypes:this.mapContentTypesToChunkTypes(w),mixingStrategy:y}}static mapContentTypesToChunkTypes(e){const t={task_aggregate:"task_aggregate",task_sessions:"task_sessions",project_summary:"project_summary",daily_summary:"temporal_pattern",weekly_summary:"temporal_pattern",monthly_summary:"temporal_pattern",session:"session"},r=[...e.primary,...e.secondary,...e.tertiary];return[...new Set(r.map(i=>t[i]||i))]}static getOptimalSourceMix(e,t,r=20){const{mixingStrategy:i,suggestedContentTypes:a}=e,o=this.groupSourcesByContentType(t,a);switch(i){case"prioritized":return this.selectPrioritizedSources(o,a,r);case"balanced":return this.selectBalancedSources(o,a,r);case"comprehensive":return this.selectComprehensiveSources(o,a,r);default:return this.selectPrioritizedSources(o,a,r)}}static groupSourcesByContentType(e,t){const r={};return t.forEach(i=>{r[i]=[]}),e.forEach(i=>{var o;const a=i.content_type||((o=i.metadata)==null?void 0:o.chunkType)||"unknown";t.includes(a)?r[a].push(i):(r.other||(r.other=[]),r.other.push(i))}),Object.keys(r).forEach(i=>{r[i].sort((a,o)=>{const s=a.similarity_score||a.relevanceScore||0;return(o.similarity_score||o.relevanceScore||0)-s})}),r}static selectPrioritizedSources(e,t,r){const i=[],a=[.4,.25,.2,.15];t.forEach((s,l)=>{if(i.length>=r)return;const c=e[s]||[],u=a[l]||.1,d=Math.ceil(r*u),h=c.slice(0,d);i.push(...h)});const o=r-i.length;if(o>0){const s=new Set(i.map(c=>c.id)),l=Object.values(e).flat().filter(c=>!s.has(c.id)).sort((c,u)=>{const d=c.similarity_score||c.relevanceScore||c.final_score||0;return(u.similarity_score||u.relevanceScore||u.final_score||0)-d});i.push(...l.slice(0,o))}return console.log(`📊 Prioritized selection: ${i.length}/${r} sources distributed across ${t.length} content types`),i.slice(0,r)}static selectBalancedSources(e,t,r){const i=[],a=Math.max(3,Math.floor(r*.15)),o=Math.max(a,Math.floor(r/t.length));t.forEach(l=>{const c=e[l]||[];i.push(...c.slice(0,Math.min(o,c.length)))});const s=r-i.length;if(s>0){const l=new Set(i.map(u=>u.id)),c=Object.values(e).flat().filter(u=>!l.has(u.id)).sort((u,d)=>{const h=u.similarity_score||u.relevanceScore||u.final_score||0;return(d.similarity_score||d.relevanceScore||d.final_score||0)-h});i.push(...c.slice(0,s))}return console.log(`📊 Balanced selection: ${i.length} sources (~${o} per type)`),i.slice(0,r)}static selectComprehensiveSources(e,t,r){var d;const i=[],a=Object.keys(e),o=[...new Set([...t,...a])],s=Math.max(2,Math.floor(r*.1)),l=Math.max(s*2,Math.floor(r*.3));o.forEach(h=>{const f=e[h]||[];if(f.length>0){const m=Math.min(s,f.length);i.push(...f.slice(0,m))}});const c=r-i.length;if(c>0){const h=new Set(i.map(y=>y.id)),f=Object.values(e).flat().filter(y=>!h.has(y.id)).sort((y,w)=>{const S=y.similarity_score||y.relevanceScore||y.final_score||0;return(w.similarity_score||w.relevanceScore||w.final_score||0)-S}),m={};i.forEach(y=>{var S;const w=y.content_type||((S=y.metadata)==null?void 0:S.chunkType)||"unknown";m[w]=(m[w]||0)+1});const v=[];for(const y of f){if(v.length>=c)break;const w=y.content_type||((d=y.metadata)==null?void 0:d.chunkType)||"unknown",S=m[w]||0;S<l&&(v.push(y),m[w]=S+1)}i.push(...v)}const u=this.getTypeDistribution(i);return console.log(`📊 Comprehensive selection: ${i.length} sources across ${Object.keys(u).length} content types`),console.log(`📊 Distribution: ${Object.entries(u).map(([h,f])=>`${h}(${f})`).join(", ")}`),i.slice(0,r)}static getTypeDistribution(e){return e.reduce((t,r)=>{var a;const i=r.content_type||((a=r.metadata)==null?void 0:a.chunkType)||"unknown";return t[i]=(t[i]||0)+1,t},{})}static async selectBestContentTypesWithAI(e,t){try{const r=this.buildContentTypeSelectionPrompt(e,{}),i=await kr.generateChatResponse({query:r,context:`User Query: "${e}"`,conversationHistory:[]});return this.parseAIContentTypeResponse(i)}catch(r){console.error("AI content type selection failed:",r);const i=this.classifyQuery(e);return this.convertClassificationToAIFormat(i)}}static buildContentTypeSelectionPrompt(e,t){return`You are an expert content type selector for a productivity tracking system. Your goal is to select the content types that will provide the most comprehensive and relevant data to answer the user's question.

USER QUERY: "${e}"

AVAILABLE CONTENT TYPES WITH REAL SAMPLE DATA:

1. MONTHLY_SUMMARY (Level 1 - Highest priority, most comprehensive):
MONTHLY PRODUCTIVITY SUMMARY: June 1-30, 2025

OVERVIEW: 138 hours 32 minutes total productive time across 1537 work sessions. Worked on 8 projects, 109 tasks. Completed 98 tasks, created 108 new tasks this month.

TOP PROJECTS BY TIME INVESTMENT:
1. "Make10000hours" - 64h 5m (46% of month)
└─ Week 05/26: 0m, Week 06/02: 30h 56m, Week 06/09: 23h 53m, Week 06/16: 9h 16m, Week 06/23: 0m
└─ "Focus Mode - Front End Design & Building" (time spent: 262m)
└─ "Go hard on AI DB & BE & Logic set up, just use random UI for AI" (time spent: 228m)
└─ "Calendar improvement - Drag & Drop" (time spent: 218m)

2. "AI" - 46h 22m (33% of month)
└─ Week 05/26: 0m, Week 06/02: 7h 36m, Week 06/09: 16h 10m, Week 06/16: 22h 36m, Week 06/23: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (time spent: 497m)
└─ "Optimize lại cái synthetic text chunking" (time spent: 438m)
└─ "Components in the AI EconomyEconomy" (time spent: 364m)

3. "Make10000hours-Bugfixing" - 10h 2m (7% of month)
4. "Lifework" - 9h 10m (7% of month)
5. "Zalopay" - 2h 5m (1% of month)

TOP TASKS BY TIME INVESTMENT:
1. "Research về các công ty founded by YC trong năm 2024-2025" - 497m (8h 17m)
2. "Optimize lại cái synthetic text chunking" - 438m (7h 18m)
3. "Components in the AI EconomyEconomy" - 364m (6h 4m)

PRODUCTIVITY ANALYTICS:
- Average daily productive time: 4h 37m
- Most productive day: Wednesday, June 11 (8h 53m)
- Least productive day: Multiple days (0m)
- Peak productivity time: 10:00-12:00 (19% of total time)
- Task completion rate: 89.9% (98/109 tasks)
- Average task duration: 76 minutes
- Project focus distribution: 46% Make10000hours, 33% AI, 21% Others

ACHIEVEMENTS THIS MONTH:
✅ Completed major AI optimization sprint (438m invested)
✅ Built focus mode frontend (262m)
✅ Enhanced calendar functionality (218m)
✅ Research milestone reached (497m on YC research)

RISK FACTORS & INSIGHTS:
⚠️ 11 incomplete tasks may impact next month's velocity
⚠️ Zero productivity on final week suggests potential burnout
📈 Strong momentum in weeks 2-4 with consistent 20+ hour weeks

2. WEEKLY_SUMMARY (Level 2 - Weekly overviews):
WEEKLY PRODUCTIVITY SUMMARY: Week of June 16-21, 2025

OVERVIEW: 33 hours 10 minutes total productive time across 364 work sessions. Worked on 4 projects, 19 tasks. Completed 19 tasks, created 17 new tasks this week.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 22h 36m (68.1% of week)
└─ Monday 06/16: 7h 41m, Tuesday 06/17: 5h 3m, Wednesday 06/18: 6h 50m, Thursday 06/19: 3h 2m, Friday 06/20: 0m
└─ "Research về các công ty founded by YC trong năm 2024-2025" (daily: 461m → 363m → 410m → 182m)
└─ "Components in the AI EconomyEconomy" (daily: 0m → 120m → 0m → 0m)

2. "Make10000hours" - 9h 16m (27.9% of week)
└─ "Mang cái Calendar vào My project & Optimize UI" (time spent: 199m)
└─ "Calendar improvement - Drag & Drop" (time spent: 157m)

3. "Lifework" - 1h 8m (3.4% of week)
4. "Zalopay" - 11m (0.6% of week)

DAILY MOMENTUM ANALYSIS:
- Monday: Peak performance (7h 41m) - deep research focus
- Tuesday: Strong continuation (5h 3m) - balanced project work
- Wednesday: Sustained effort (6h 50m) - research completion
- Thursday: Declining momentum (3h 2m) - task wrap-up
- Friday: No activity (0m) - momentum break

TASK COMPLETION VELOCITY:
- Tasks completed: 19 (100% completion rate this week)
- Average task completion time: 104 minutes
- Fastest completion: 5 minutes
- Longest task: 461 minutes
- Daily completion pattern: 5→4→6→4→0 tasks

FOCUS QUALITY INDICATORS:
- Average session length: 5.5 minutes
- Longest focus session: 45 minutes (research work)
- Session efficiency: 73% (based on time estimation accuracy)
- Context switching: Moderate (4 projects active)

3. DAILY_SUMMARY (Level 3 - Daily breakdowns):
DAILY PRODUCTIVITY SUMMARY: Wednesday, June 11, 2025

OVERVIEW: 533 minutes (8h 53m) of productive work across 91 work sessions. Worked on 13 projects, 176 tasks. Created 0 new tasks today.

TOP PROJECTS BY TIME INVESTMENT:
1. "AI" - 461m (86.5% of total time)
└─ "Research về các công ty founded by YC trong năm 2024-2025" (410 minutes across 32 sessions)
└─ "Components in the AI EconomyEconomy" (31 minutes across 8 sessions)
└─ "Optimize lại cái synthetic text chunking" (20 minutes across 4 sessions)

2. "Make10000hours" - 71m (13.3% of time)
└─ "Focus Mode - Front End Design & Building" (35 minutes)
└─ "Mang cái Calendar vào My project & Optimize UI" (36 minutes)

3. "Lifework" - 1m (0.2% of time)

HOURLY BREAKDOWN:
10:00-11:00: 95m (Research peak)
11:00-12:00: 87m (Sustained research)
14:00-15:00: 82m (Post-lunch productivity)
15:00-16:00: 76m (Afternoon focus)
09:00-10:00: 65m (Morning startup)
16:00-17:00: 45m (Late afternoon)
17:00-18:00: 38m (Evening wrap-up)
12:00-13:00: 35m (Pre-lunch completion)
08:00-09:00: 10m (Early start)

SESSION QUALITY METRICS:
- Average session duration: 5.9 minutes
- Longest session: 28 minutes (deep research)
- Shortest session: 1 minute (quick tasks)
- Session breaks: 67 breaks averaging 3.2 minutes
- Focus efficiency: 89% (estimated vs actual time)

TASK COMPLETION DETAILS:
✅ "Research về các công ty founded by YC" - 410m (exceeded estimate by 15%)
✅ "Focus Mode frontend work" - 35m (met estimate exactly)
✅ "Calendar UI optimization" - 36m (under estimate by 10%)
⏳ 173 other tasks tracked but not actively worked on

PRODUCTIVITY INSIGHTS:
📈 Peak performance day this week
🎯 Single-project focus (86% on AI research)
⚡ High session count indicates good momentum
🔄 Minimal context switching optimized flow

4. PROJECT_SUMMARY (Level 4 - Rich project overviews):
Project "AI" created on Monday, May 26, 2025, containing 27 tasks across 3 statuses.

BACKLOG STATUS (8 tasks):
- "Build a Claude-3.5-Sonnet-like competitor model" (estimated 600 min, priority: high)
- "Research xem giờ nếu muốn build cái AI chat bot cho product của mình thì cần phải làm gì" (estimated 240 min, priority: medium)
- "AI Tool to help startup build their MVP faster" (estimated 180 min, priority: medium)
- "Optimize lại cách con AI của mình Retrieve Data" (estimated 120 min, priority: medium)

IN-PROGRESS STATUS (2 tasks):
- "Components in the AI EconomyEconomy" (364 min spent, estimated 180 min, 202% progress, priority: high)
- "Optimize lại cái synthetic text chunking" (438 min spent, estimated 300 min, 146% progress, priority: high)

COMPLETED STATUS (17 tasks):
- "Research về các công ty founded by YC trong năm 2024-2025" (497 min, completed June 19, 2025)
- "On Finding AI Startup Idea" (34 min, completed June 19, 2025)
- "Build an AI Agent to help startup get accepted to YC" (25 min, completed June 5, 2025)

PROJECT ANALYTICS:
Total time invested: 46h 22m across 447 work sessions
Average session duration: 6.2 minutes
Task completion rate: 63% (17/27 tasks completed)
Time estimation accuracy: 127% (tasks taking 27% longer than estimated)
Project velocity: 2.4 tasks completed per week
Risk level: MEDIUM (2 overrunning tasks, 8 unstarted tasks)

COMPLETION VELOCITY TRENDS:
- Week 1 (May 26-June 1): 3 tasks completed
- Week 2 (June 2-8): 5 tasks completed
- Week 3 (June 9-15): 4 tasks completed  
- Week 4 (June 16-22): 5 tasks completed
- Trend: Consistent 4-5 tasks/week velocity

TIME INVESTMENT PATTERNS:
Monday-Friday: 89% of project time
Weekend work: 11% of project time
Peak hours: 10:00-12:00 (31% of project time)
Research-heavy: 67% time on research tasks
Implementation: 33% time on building tasks

PROJECT HEALTH INDICATORS:
✅ Strong weekly completion velocity
✅ Consistent time investment
⚠️ Time estimation challenges (27% overrun)
⚠️ Growing backlog (8 unstarted tasks)
📈 High engagement (447 sessions)

5. TASK_AGGREGATE (Level 5 - Comprehensive task details):
Task 'Research về các công ty founded by YC trong năm 2024-2025' from project 'AI' has accumulated 497 minutes (8h 17m) across 47 work sessions. 

TASK DETAILS:
- Average session duration: 10.6 minutes
- Progress: 207% of estimated 240 minutes (overran by 257 minutes)
- Current status: Completed on Thursday, June 19, 2025
- Created: Monday, June 16, 2025
- Priority: High
- Last updated: Thursday, June 19, 2025

TIME INVESTMENT PATTERN: Intensive focused research with daily progression
Daily breakdown:
- June 16: 461 minutes (26 sessions) - Initial deep dive
- June 17: 36 minutes (4 sessions) - Follow-up research  
- June 18: 0 minutes - No work
- June 19: 0 minutes - Task completion/wrap-up

SESSION ANALYTICS:
- Longest session: 34 minutes (deep research phase)
- Shortest session: 1 minute (quick notes)
- Session frequency: High intensity over 4 days
- Break patterns: Frequent short breaks (2-5 minutes)
- Focus quality: Excellent (sustained 400+ minute days)

ESTIMATION ACCURACY:
- Original estimate: 240 minutes (4 hours)
- Actual time: 497 minutes (8h 17m)
- Variance: +257 minutes (+107% overrun)
- Learning: Research tasks require 2x time estimates

COMPLETION FACTORS:
✅ Thorough research methodology
✅ Comprehensive data collection
✅ High-quality output achieved
⚠️ Scope creep contributed to overrun
📊 Generated extensive insights for project

TASK DEPENDENCIES:
- Feeds into: "Build an AI Agent to help startup get accepted to YC"
- Related tasks: "Components in the AI Economy", "On Finding AI Startup Idea"
- Project impact: Foundation for multiple AI initiatives

6. TASK_SESSIONS (Level 6 - Granular session details):
Task 'Define task to do' from project 'Make10000hours' has accumulated 20 minutes across 1 work session.

SESSION BREAKDOWN:
Session #1: June 15, 2025, 14:32-14:52 (20 minutes)
- Session type: Planning/Definition
- Focus quality: High (single uninterrupted session)
- Context: Task creation and scope definition
- Output: Clear task requirements established
- Break pattern: None (continuous 20-minute block)

TASK DETAILS:
- Average session duration: 20 minutes (only 1 session)
- Progress: 100% of estimated 20 minutes (perfect estimation)
- Current status: Completed on Saturday, June 15, 2025
- Created: Saturday, June 15, 2025  
- Priority: Medium
- Last updated: Saturday, June 15, 2025

TIME INVESTMENT PATTERN: Single-session completion (planning task)
- Immediate execution after creation
- No procrastination or delays
- Efficient task scoping achieved
- Clean start-to-finish workflow

ESTIMATION ACCURACY:
- Original estimate: 20 minutes  
- Actual time: 20 minutes
- Variance: 0 minutes (perfect accuracy)
- Task type: Planning tasks well-estimated

SESSION QUALITY INDICATORS:
✅ Perfect time estimation
✅ Single-session completion
✅ No interruptions or context switching
✅ Immediate task execution
📋 Efficient planning methodology

PRODUCTIVITY INSIGHTS:
- Task type: Definition/Planning
- Execution style: Focused single session
- Estimation skill: Excellent for planning tasks
- Work pattern: Immediate action orientation

INTELLIGENT SELECTION STRATEGY:
Analyze the user query and select content types that will provide the most comprehensive answer:

- TIME PERIOD QUERIES: Match the scope (monthly_summary for "this month", weekly_summary for "this week", daily_summary for "today")
- PROJECT QUERIES: Start with project_summary, add task_aggregate for detailed tasks within projects
- TASK QUERIES: Use task_aggregate (comprehensive task data), add task_sessions for detailed session info
- PRODUCTIVITY ANALYTICS: Use higher-level summaries (monthly/weekly) that contain analytics and patterns
- PROGRESS TRACKING: Use task_aggregate and project_summary which contain progress data
- TIME TRACKING DETAILS: Use task_sessions and daily_summary for granular time data
- OVERVIEW QUESTIONS: Start with monthly_summary (most comprehensive) and add supporting levels

Consider what DATA is actually needed to answer the question comprehensively:
- Higher levels contain more context, analytics, and insights
- Lower levels contain more granular detail
- Select types that together provide complete information

EXAMPLES:
- "How productive was I this month?" → PRIMARY: monthly_summary
- "What tasks are in my AI project?" → PRIMARY: project_summary, task_aggregate
- "Show me my work sessions today" → PRIMARY: daily_summary, task_sessions
- "What's my task completion rate?" → PRIMARY: monthly_summary, weekly_summary (contain completion analytics)

Respond in JSON format:
{
  "primaryTypes": ["type1", "type2"],
  "secondaryTypes": ["type3"],
  "reasoning": "Explanation based on what data each selected type provides and why it answers the query",
  "confidence": 85
}`}static getContentTypeDescription(e){return{task_aggregate:"Individual task details with progress tracking, time spent, session count, completion status, and time investment patterns",task_sessions:"Session-level details for specific tasks with duration, session patterns, and completion tracking",project_summary:"Project overviews with task breakdowns by status, analytics including completion velocity, time estimation accuracy, and risk indicators",daily_summary:"Daily productivity breakdowns with project time investment, task-by-task details, session metrics, and focus quality analysis",weekly_summary:"Weekly productivity reports with project time distribution, task progress, completion rates, daily patterns, and momentum indicators",monthly_summary:"Comprehensive monthly overviews with project analytics, top tasks, weekly breakdowns, productivity patterns, achievements, and strategic insights",session:"Legacy session data (use task_sessions instead)"}[e]||"Unknown content type"}static parseAIContentTypeResponse(e){try{const t=e.match(/\{[\s\S]*\}/);if(t){const r=JSON.parse(t[0]),i=a=>a.toLowerCase().replace(/\s+/g,"_");return{primaryTypes:Array.isArray(r.primaryTypes)?r.primaryTypes.map(i):[],secondaryTypes:Array.isArray(r.secondaryTypes)?r.secondaryTypes.map(i):[],reasoning:r.reasoning||"AI analysis completed",confidence:Math.min(100,Math.max(0,r.confidence||70))}}return this.parseAIResponseFallback(e)}catch(t){return console.error("Failed to parse AI content type response:",t),{primaryTypes:["task_aggregate","project_summary"],secondaryTypes:["daily_summary"],reasoning:"Fallback to default types due to parsing error",confidence:50}}}static parseAIResponseFallback(e){const t=["task_aggregate","task_sessions","project_summary","daily_summary","weekly_summary","monthly_summary"],r=e.toLowerCase(),i=t.filter(a=>r.includes(a)||r.includes(a.replace("_"," "))||e.includes(a.toUpperCase().replace("_"," "))||e.includes(a.toUpperCase()));return{primaryTypes:i.slice(0,2),secondaryTypes:i.slice(2,4),reasoning:"Extracted from AI response text analysis",confidence:60}}static convertClassificationToAIFormat(e){const t=this.CONTENT_TYPE_MAPPINGS[e.primaryIntent];return{primaryTypes:t.primary.slice(0,2),secondaryTypes:t.secondary.slice(0,2),reasoning:`Rule-based classification: ${e.primaryIntent} with ${Math.round(e.confidence*100)}% confidence`,confidence:Math.round(e.confidence*100)}}static getContentTypeMappings(){return this.CONTENT_TYPE_MAPPINGS}}$t(Uu,"TASK_PRIORITY_PATTERNS",[/\b(task|tasks)\s+(priorit|urgent|important|deadline|due)/i,/\b(what\s+should\s+i\s+work\s+on|next\s+task|current\s+tasks)/i,/\b(focus|concentrate|working\s+on|task\s+list)/i,/\b(pomodoro|session|active\s+task|in\s+progress)/i,/\b(complete|finish|accomplish|productivity)/i,/\b(efficiency|optimize\s+work|time\s+management)/i,/\b(list\s+of\s+tasks?|tasks?\s+in\s+|tasks?\s+for\s+|show\s+.*tasks?)/i,/\b(give\s+me.*tasks?|tasks?\s+from|tasks?\s+belonging\s+to)/i,/\b(what\s+tasks?|which\s+tasks?|all\s+tasks?)/i,/\b(tasks?\s+in\s+the\s+.*project|project.*tasks?)/i]),$t(Uu,"PROJECT_FOCUS_PATTERNS",[/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(projects?\s+(available|existing|current))/i,/\b(portfolio|initiative|workstream|deliverable)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i,/\b(milestone|roadmap|project\s+plan)/i,/\b(project\s+comparison|project\s+metrics)/i,/\b(overall\s+progress|total\s+work|project\s+distribution)/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(in\s+the\s+["']?[a-zA-Z0-9\s]+["']?\s+project)/i,/\b(project\s+["']?[a-zA-Z0-9\s]+["']?)/i,/\b(from\s+project|belonging\s+to\s+project)/i]),$t(Uu,"SUMMARY_INSIGHTS_PATTERNS",[/\b(summary|overview|recap|insight|analysis)/i,/\b(daily|weekly|monthly)\s+(summary|report|pattern|trend)/i,/\b(productivity\s+(insight|analysis|pattern|trend))/i,/\b(time\s+spent|total\s+time|overall\s+stats)/i,/\b(performance|metrics|analytics|statistics)/i,/\b(how\s+productive|productivity\s+review)/i,/\b(last\s+(week|month)|this\s+(week|month)|past\s+(week|month))/i]),$t(Uu,"CONTENT_TYPE_MAPPINGS",{task_priority:{primary:["task_aggregate","task_sessions"],secondary:["project_summary","daily_summary"],tertiary:["weekly_summary","monthly_summary"]},project_focus:{primary:["project_summary","task_aggregate"],secondary:["weekly_summary","task_sessions"],tertiary:["monthly_summary","daily_summary"]},summary_insights:{primary:["daily_summary","weekly_summary","monthly_summary"],secondary:["task_aggregate","project_summary"],tertiary:["task_sessions","session"]},general:{primary:["task_aggregate","project_summary"],secondary:["daily_summary","weekly_summary"],tertiary:["monthly_summary","task_sessions"]}});class XG{static generateContextualPrompt(e,t,r,i){let o=`${this.INTENT_SPECIFIC_PROMPTS[r.primaryIntent].systemMessage}

`;return o+="CRITICAL FORMATTING REQUIREMENTS:\\n",o+="• Use clean, scannable format with minimal clutter\\n",o+="• Start with ONE emoji section header: 🎯 **This Week's Focus**\\n",o+="• Use simple hierarchy:\\n",o+="  **Main Category** (bold, no bullets)\\n",o+="  • Key item (bullet + normal text)\\n",o+="  • Another key item\\n",o+="• **Bold only** project names and key metrics like **Make10000hours**\\n",o+="• Limit to 3-5 main points maximum\\n",o+="• NO sub-bullets, NO checkboxes mixed with bullets\\n",o+="• ONE blank line between sections only\\n",o+="• Keep responses short and actionable\\n\\n",o+="FORMATTING EXAMPLE:\\n",o+="🎯 **This Week's Focus**\\n\\n",o+="**Priority Tasks**\\n",o+="• **Make10000hours** project needs **2h 15m** more work\\n",o+="• Calendar improvements are **66% complete**\\n\\n",o+="**Key Metrics**\\n",o+="• **20 tasks completed** out of 22 this week\\n",o+="• **Strong momentum** with daily completion rate\\n\\n",o+="**Next Actions**\\n",o+="• Focus on morning productivity sessions\\n",o+="• Complete remaining calendar features\\n\\n",o+=`RESPONSE REQUIREMENTS:
`,o+=`1. Answer only what was asked - no extra information
`,o+=`2. Be direct and specific
`,o+=`3. Keep responses brief and scannable
`,o+=`4. Focus on actionable information only

`,o+=`USER QUESTION: ${e}

`,o+=`RELEVANT CONTEXT:
${t}
`,o}static getIntentSpecificGuidance(e){switch(e.primaryIntent){case"task_priority":return"Focus on analyzing task urgency, dependencies, and productivity patterns. Provide specific recommendations about what to work on next and when. Consider time estimates, deadlines, and the user's peak productivity periods.";case"project_focus":return"Analyze project-level metrics, progress, and resource allocation. Provide strategic insights about project portfolio health and recommendations for optimization. Compare projects and identify patterns.";case"summary_insights":return"Extract meaningful patterns and trends from the temporal data. Provide statistical insights, identify productivity peaks/valleys, and compare performance across time periods. Make data-driven recommendations.";case"general":return"Provide helpful, specific responses based on available data. Be clear about what information you have and offer relevant insights or recommendations.";default:return""}}static enhancePromptWithDataContext(e,t,r){let i=e;return i+=`

**Data Context:**
`,i+=`- Available data types: ${t.join(", ")}
`,i+=`- Data quality: ${r}
`,r==="low"?i+=`- Note: Limited data available. Provide general guidance and suggest ways to improve data collection.
`:r==="medium"?i+=`- Note: Moderate data available. Provide insights where possible and note any limitations.
`:i+=`- Note: Rich data available. Provide detailed, specific insights and recommendations.
`,i}static generateFallbackPrompt(e,t){return`You are a helpful productivity AI assistant. The user has asked: "${e}"

Available context: ${t}

Please provide a helpful response based on the available information. If the context is limited, acknowledge this and provide general guidance while suggesting how the user might get more specific insights.

Focus on being helpful, specific where possible, and clear about any limitations in the available data.`}}$t(XG,"INTENT_SPECIFIC_PROMPTS",{task_priority:{systemMessage:"You are a productivity AI assistant focused on task prioritization. Provide direct, actionable answers about what to work on next.",instructions:["Answer the specific question asked - nothing more","For task recommendations, provide just the task name and brief reason","Skip background explanations unless directly relevant","Use bullet points only when listing multiple items","Focus on the most important 1-3 items only"],responseFormat:"Provide a direct answer that tells the user exactly what to do next.",examples:["Work on 'API Integration' - it's 2 days overdue and blocking other tasks.","Focus on Project Alpha today - deadline is tomorrow.","Complete the Database task - it has the highest impact."]},project_focus:{systemMessage:"You are a project management AI that provides clear project insights and recommendations.",instructions:["Answer only what was asked about projects","Give key metrics without extensive explanations","Highlight the most critical information only","Skip detailed analysis unless specifically requested","Focus on actionable insights"],responseFormat:"Provide the specific project information requested with key insights only.",examples:["Project Alpha: 60% complete, 2 weeks behind schedule.","You're spending most time on Mobile App (40% of total hours).","Website project needs attention - no progress in 5 days."]},summary_insights:{systemMessage:"You are a productivity analytics AI that provides concise data insights.",instructions:["Provide key metrics directly without lengthy explanations","Focus on the most significant patterns only","Skip statistical details unless specifically asked","Give 2-3 main insights maximum","Make insights actionable"],responseFormat:"Give the main productivity insights in a brief, scannable format.",examples:["This week: 23 hours focused work, 12 tasks completed. Peak productivity on Tuesdays.","You're 15% more productive in mornings. Consider scheduling important tasks then.","Average task time increased 20% - consider breaking large tasks down."]},general:{systemMessage:"You are a helpful productivity AI. Answer questions directly and concisely using available data.",instructions:["Answer exactly what the user asked","Keep responses brief and to the point","Include only essential information","Skip context unless it's critical","Focus on what the user can act on"],responseFormat:"Provide a direct, focused answer based on the available data.",examples:["You completed 5 tasks today.","Current project status: 3 active, 1 completed this week.","Most productive time: 9-11 AM based on your patterns."]}});class R_{static async queryWithRAG(e,t,r){const i=Date.now();try{console.log("🎯 Enhanced RAG Service: Processing query:",e);let a;try{console.log("🤖 Getting AI-powered content type selection..."),a=await Uu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",a)}catch(l){console.warn("⚠️ AI content type selection failed, using rule-based fallback:",l);const c=Uu.classifyQuery(e),u=Uu.getContentTypeMappings()[c.primaryIntent];a={primaryTypes:u.primary.slice(0,2),secondaryTypes:u.secondary.slice(0,2),reasoning:`Rule-based fallback: ${c.primaryIntent}`,confidence:Math.round(c.confidence*100)}}const o=await this.performIntelligentSearch(e,t,a.primaryTypes,a.secondaryTypes),s=await this.generateResponseFromDocs(e,o,i,a,r);return s.metadata.contentTypeSelection=a,s.metadata.searchStrategy=`ai_content_selection_${a.confidence>80?"high":"medium"}_confidence`,s}catch(a){return console.error("❌ Enhanced RAG Service failed:",a),this.generateFallbackResponse(e,i,[])}}static async queryWithHybridSearch(e,t,r,i){const a=Date.now();try{console.log(`🔍 Enhanced RAG query: "${e}" with filters:`,r);const o=this.determineOptimalChunkLevels(e);console.log(`🎯 Optimal chunk levels: [${o.join(", ")}]`);const s=await this.executeHybridSearch(e,t,{...r,chunkLevels:(r==null?void 0:r.chunkLevels)||o});console.log(`📚 Retrieved ${s.length} relevant documents`);const l=this.selectDiverseProjectSources(s,30);console.log(`🎯 Hybrid diverse selection: ${l.length}/${s.length} sources across multiple projects`);const c={primaryIntent:"general",secondaryIntents:[],confidence:.5,suggestedContentTypes:["task_aggregate","project_summary","daily_summary"],suggestedChunkTypes:["task_aggregate","project_summary","temporal_pattern"],mixingStrategy:"balanced"};return await this.generateResponseFromDocs(e,l,a,c,i)}catch(o){return console.error("❌ Enhanced RAG query error:",o),this.generateFallbackResponse(e,a)}}static async executeEnhancedSearch(e,t,r){try{const i=await this.performSemanticSearch(e,t,r);return i.length>0?(console.log(`✅ Semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using keyword search"),await this.performKeywordSearch(e,t,r))}catch(i){return console.error("❌ Enhanced search failed:",i),[]}}static async executeIntelligentSearch(e,t,r){try{console.log(`🔍 Starting intelligent search with ${r.suggestedContentTypes.length} prioritized content types`);const i=await this.performContentAwareSemanticSearch(e,t,r.suggestedContentTypes);return i.length>0?(console.log(`✅ Content-aware semantic search returned ${i.length} results`),i):(console.log("⚠️ Semantic search failed, using content-aware keyword search"),await this.performContentAwareKeywordSearch(e,t,r.suggestedContentTypes))}catch(i){return console.error("❌ Intelligent search failed:",i),await this.executeEnhancedSearch(e,t,{chunkLevels:[1,2,3,4,5,6]})}}static async performContentAwareSemanticSearch(e,t,r){try{const i=await kr.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Content-aware search for types: [${r.join(", ")}]`);const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{console.log(`🔍 Searching table: ${s} for prioritized content types`);let l=Ot.from(s).select("*").eq("user_id",t).not("embedding","is",null);r.length>0&&(console.log(`🎯 Filtering by content types: [${r.join(", ")}]`),l=l.in("content_type",r));const{data:c,error:u}=await l.limit(100);if(!u&&c&&c.length>0){console.log(`✅ Found ${c.length} documents with prioritized content types in ${s}`);const h=c.map((f,m)=>{let v=f.embedding;if(typeof f.embedding=="string")try{v=JSON.parse(f.embedding)}catch(k){return console.error("Failed to parse embedding:",k),{...f,similarity_score:0,content_type_boost:0}}if(!Array.isArray(v))return{...f,similarity_score:0,content_type_boost:0};const y=this.calculateCosineSimilarity(i,v),w=f.content_type||"unknown",S=r.indexOf(w),T=S!==-1?(r.length-S)/r.length*.3:0,C=Math.min(1,y+T);return{...f,similarity_score:y,content_type_boost:T,final_score:C,embedding:v}}).sort((f,m)=>m.final_score-f.final_score).filter(f=>f.final_score>.1);console.log(`📊 Content-aware semantic results: ${h.length} docs above threshold`),h.length>0&&console.log(`Top scores: ${h.slice(0,3).map(f=>`${f.content_type}(${f.final_score.toFixed(3)})`).join(", ")}`),o=h.slice(0,80);break}else if(c&&c.length===0&&r.length>0){console.log(`⚠️ No documents found with prioritized content types [${r.join(", ")}], falling back to broader search`);let d=Ot.from(s).select("*").eq("user_id",t).not("embedding","is",null);const{data:h,error:f}=await d.limit(100);if(!f&&h&&h.length>0){console.log(`✅ Fallback search found ${h.length} documents in ${s}`);const v=h.map((y,w)=>{let S=y.embedding;if(typeof y.embedding=="string")try{S=JSON.parse(y.embedding)}catch(C){return console.error("Failed to parse embedding:",C),{...y,similarity_score:0,content_type_boost:0}}if(!Array.isArray(S))return{...y,similarity_score:0,content_type_boost:0};const T=this.calculateCosineSimilarity(i,S);return{...y,similarity_score:T,content_type_boost:0,final_score:T,embedding:S}}).sort((y,w)=>w.final_score-y.final_score).filter(y=>y.final_score>.1);console.log(`📊 Fallback semantic results: ${v.length} docs above threshold`),v.length>0&&(console.log(`Available content types: ${[...new Set(v.map(y=>y.content_type))].join(", ")}`),console.log(`Top scores: ${v.slice(0,3).map(y=>`${y.content_type}(${y.final_score.toFixed(3)})`).join(", ")}`)),o=v.slice(0,80);break}}}catch(l){console.warn(`⚠️ Error searching ${s}:`,l);continue}return o}catch(i){return console.warn("Content-aware semantic search failed:",i),[]}}static async performContentAwareKeywordSearch(e,t,r){try{console.log(`🔍 Content-aware keyword search for types: [${r.join(", ")}]`);const i=e.toLowerCase().split(/\s+/).filter(u=>u.length>2);console.log(`🔍 Keyword search terms: [${i.join(", ")}]`);let a=Ot.from("user_productivity_documents").select("*").eq("user_id",t);if(r.length>0&&(a=a.in("content_type",r)),i.length>0){const u=i.join(" | ");a=a.textSearch("content",u)}const{data:o,error:s}=await a.order("created_at",{ascending:!1}).limit(80);if(s)return console.error("❌ Content-aware keyword search error:",s),[];if(!o||o.length===0)return console.log("ℹ️ No documents found with content-aware keyword search"),[];const c=o.map(u=>{const d=(u.content||"").toLowerCase();let h=0;i.forEach(w=>{const S=(d.match(new RegExp(w,"g"))||[]).length;h+=S*(1/Math.sqrt(w.length))}),h=Math.min(1,h/i.length);const f=u.content_type||"unknown",m=r.indexOf(f),v=m!==-1?(r.length-m)/r.length*.4:0,y=Math.min(1,h+v);return{...u,relevanceScore:y,keywordScore:h,contentTypeBoost:v}}).sort((u,d)=>d.relevanceScore-u.relevanceScore).filter(u=>u.relevanceScore>.05);return console.log(`📊 Content-aware keyword search found ${c.length} relevant documents`),c.length>0&&console.log(`Top matches: ${c.slice(0,3).map(u=>`${u.content_type}(${u.relevanceScore.toFixed(3)})`).join(", ")}`),c.slice(0,60)}catch(i){return console.error("❌ Content-aware keyword search failed:",i),[]}}static async performSemanticSearch(e,t,r){try{const i=await kr.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)throw new Error("Failed to generate query embedding");console.log(`📊 Query embedding generated: ${i.length} dimensions`);const a=["user_productivity_documents","postgres","embeddings"];let o=[],s="";for(const d of a)try{console.log(`🔍 Trying table: ${d}`);let h=Ot.from(d).select("*").eq("user_id",t);if(d==="postgres"){const v=["user_id","userId","user"];for(const y of v)try{h=Ot.from(d).select("*").eq(y,t);break}catch{continue}}d!=="postgres"&&(h=h.not("embedding","is",null)),r.chunkLevels.length>0&&d!=="postgres"&&(h=h.in("metadata->chunkLevel",r.chunkLevels));const{data:f,error:m}=await h.limit(100);if(!m&&f&&f.length>0){o=f,s=d,console.log(`✅ Successfully found ${f.length} documents in table: ${d}`);break}else console.log(m?`⚠️ Table ${d} error: ${m.message}`:`⚠️ Table ${d} returned no documents`)}catch(h){console.log(`❌ Table ${d} failed: ${h}`);continue}if(console.log(`🔍 Semantic search found ${(o==null?void 0:o.length)||0} documents with embeddings from table: ${s}`),console.log(`📊 Query embedding length: ${i.length}`),!o||o.length===0)return console.log("⚠️ No documents found in any table for user"),[];if(s==="postgres"){console.log("🔄 Using postgres table - checking structure...");const d=o[0];if(console.log("📋 Sample document keys:",Object.keys(d)),d.embedding)console.log("✅ Postgres table has embeddings, attempting similarity search");else return console.log("⚠️ Postgres table has no embeddings, returning documents directly"),o.slice(0,10)}const c=o.map((d,h)=>{var v,y;h===0&&(console.log("🔍 Debug first document embedding:"),console.log("- Embedding type:",typeof d.embedding),console.log("- Embedding is array:",Array.isArray(d.embedding)),console.log("- Embedding length:",(v=d.embedding)==null?void 0:v.length),console.log("- First few values:",(y=d.embedding)==null?void 0:y.slice(0,5)),console.log("- Query embedding type:",typeof i),console.log("- Query embedding length:",i.length),console.log("- Query first few values:",i.slice(0,5)));let f=d.embedding;if(typeof d.embedding=="string")try{f=JSON.parse(d.embedding),h===0&&console.log("✅ Successfully parsed embedding from string")}catch(w){return console.error("❌ Failed to parse embedding string:",w),{...d,similarity_score:0}}if(!Array.isArray(f))return h===0&&console.error("❌ Embedding is not an array:",typeof f),{...d,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return h===0&&console.log("🎯 First document similarity score:",m),{...d,similarity_score:m,embedding:f}}).sort((d,h)=>h.similarity_score-d.similarity_score);let u=c.filter(d=>d.similarity_score>.3);return u.length===0&&(console.log("⚠️ No docs above 0.3 threshold, trying 0.15 threshold"),u=c.filter(d=>d.similarity_score>.15)),u.length===0&&(console.log("⚠️ No docs above 0.15 threshold, taking top 5 docs"),u=c.slice(0,5)),u=u.slice(0,20),console.log(`🔍 Semantic search found ${u.length} relevant documents`),console.log(`📊 Similarity scores: ${u.slice(0,3).map(d=>{var h;return(h=d.similarity_score)==null?void 0:h.toFixed(3)}).join(", ")}`),u.length>0&&u.every(d=>d.similarity_score===0)?(console.log("🔄 All similarities are 0, trying PostgreSQL native vector search..."),await this.performNativeVectorSearch(i,t,s)):u}catch(i){return console.warn("Semantic search failed:",i),[]}}static async performNativeVectorSearch(e,t,r){try{console.log("🚀 Starting direct vector comparison...");const{data:i,error:a}=await Ot.from(r).select("*").eq("user_id",t).not("embedding","is",null).limit(100);if(a||!i)return console.error("❌ Failed to fetch documents for native search:",a),[];console.log(`📊 Processing ${i.length} documents with direct comparison...`);const s=i.map((l,c)=>{let u=l.embedding;if(typeof l.embedding=="string")try{u=JSON.parse(l.embedding)}catch(h){return console.error(`❌ Failed to parse embedding for doc ${c}:`,h),{...l,similarity_score:0}}let d=0;if(Array.isArray(u)&&u.length===e.length)try{for(let h=0;h<e.length;h++)d+=e[h]*u[h];d=Math.max(0,(d+1)/2)}catch(h){console.error(`❌ Similarity calculation failed for doc ${c}:`,h),d=0}return{...l,similarity_score:d,embedding:u}}).sort((l,c)=>c.similarity_score-l.similarity_score).slice(0,20);return console.log(`✅ Native search returned ${s.length} results`),console.log(`📊 Top similarities: ${s.slice(0,3).map(l=>{var c;return(c=l.similarity_score)==null?void 0:c.toFixed(3)}).join(", ")}`),s}catch(i){return console.error("❌ Native vector search error:",i),[]}}static async performKeywordSearch(e,t,r){const i=e.toLowerCase().split(" ").filter(a=>a.length>2);try{const a=["user_productivity_documents","postgres"];for(const o of a){console.log(`🔍 Keyword search trying table: ${o}`);let s=Ot.from(o).select("*").eq("user_id",t);if(o==="postgres"){const c=["user_id","userId","user"];for(const u of c)try{s=Ot.from(o).select("*").eq(u,t);break}catch{continue}}r.chunkLevels.length>0&&o!=="postgres"&&(s=s.in("metadata->chunkLevel",r.chunkLevels));const l=[()=>s.textSearch("content",e),()=>s.ilike("content",`%${e}%`),()=>{let c=s;return i.forEach(u=>{c=c.ilike("content",`%${u}%`)}),c},()=>s.order("created_at",{ascending:!1})];for(let c=0;c<l.length;c++){const u=l[c];try{console.log(`🔍 Trying keyword search strategy ${c+1}/${l.length} on table ${o}`);const{data:d,error:h}=await u().order("created_at",{ascending:!1}).limit(15);if(!h&&d&&d.length>0)return console.log(`✅ Keyword search strategy ${c+1} succeeded with ${d.length} results from table ${o}`),d;h?console.log(`⚠️ Keyword search strategy ${c+1} error on table ${o}:`,h.message):console.log(`⚠️ Keyword search strategy ${c+1} returned no results from table ${o}`)}catch(d){console.log(`❌ Keyword search strategy ${c+1} failed on table ${o}:`,d);continue}}}return[]}catch(a){return console.error("All keyword search strategies failed:",a),[]}}static async processAndStoreChunks(e){console.log(`🚀 Processing and storing chunks for user: ${e}`);try{const t=await KG.createMultiLevelChunks(e);let r=0;const i=[];for(const a of t)try{await this.storeChunkWithEmbedding(a,e),r++,r%10===0&&await new Promise(o=>setTimeout(o,100))}catch(o){i.push(`Chunk ${a.id}: ${o instanceof Error?o.message:"Unknown error"}`)}return console.log(`✅ Stored ${r}/${t.length} chunks`),{success:i.length===0,chunksProcessed:r,errors:i}}catch(t){return console.error("❌ Error processing chunks:",t),{success:!1,chunksProcessed:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}static async executeHybridSearch(e,t,r){console.log("🔀 Using NEW True Hybrid Search (Vector + BM25 + RRF)");try{const{HybridSearchService:i}=await nn(async()=>{const{HybridSearchService:l}=await Promise.resolve().then(()=>vDt);return{HybridSearchService:l}},void 0),a={chunkLevels:r.chunkLevels,timeframe:r.timeframe||"all",projects:r.projects||[],vectorWeight:1,keywordWeight:1,rrfK:60,maxResults:20,minVectorSimilarity:.1,minKeywordScore:0,enableEnhancedBM25:!0,contentTypeBoosts:{task_aggregate:1.2,project_summary:1.1,session:1,daily_summary:1},enableReranking:!0,rerankingModel:"hybrid",rerankingCandidates:50,minRerankScore:.1,rerankingWeights:{diversityWeight:.1,recencyWeight:.05,contentTypeWeights:{project_summary:1.2,task_aggregate:1.1,session:1,daily_summary:.9}}};r.productivityRange&&(a.contentTypeBoosts={...a.contentTypeBoosts,task_aggregate:1.3,session:1.2}),r.timeOfDay&&(a.contentTypeBoosts={...a.contentTypeBoosts,session:1.3,daily_summary:1.2});const o=await i.performHybridSearch(e,t,a);console.log(`✅ Hybrid search completed: ${o.documents.length} results`),console.log(`📊 Vector: ${o.metadata.vectorResultCount}, Keyword: ${o.metadata.keywordResultCount}, Processing: ${o.metadata.processingTime}ms`);let s=o.documents;if(r.completionStatus&&r.completionStatus!=="all"){const l=r.completionStatus==="completed";s=s.filter(c=>{var d,h;const u=(h=(d=c.metadata)==null?void 0:d.analytics)==null?void 0:h.completionRate;return l?u===100:u!==100})}return r.productivityRange&&(s=s.filter(l=>{var u,d;const c=(d=(u=l.metadata)==null?void 0:u.analytics)==null?void 0:d.productivity;return c>=r.productivityRange[0]&&c<=r.productivityRange[1]})),r.timeOfDay&&(s=s.filter(l=>{var c,u;return((u=(c=l.metadata)==null?void 0:c.analytics)==null?void 0:u.timeOfDay)===r.timeOfDay})),console.log(`🎯 After additional filtering: ${s.length} results`),s}catch(i){console.error("❌ Hybrid search failed, falling back to basic search:",i);const{data:a}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).ilike("content",`%${e}%`).limit(10);return a||[]}}static determineOptimalChunkLevels(e){const t=e.toLowerCase();return t.includes("task")||t.includes("working on")||t.includes("progress")||t.includes("complete")||t.includes("productivity")||t.includes("efficiency")?[1,3]:t.includes("project")||t.includes("overall")||t.includes("summary")||t.includes("total")||t.includes("portfolio")?[2,1]:t.includes("session")||t.includes("today")||t.includes("this morning")||t.includes("right now")||t.includes("current")||t.includes("detailed")?[3,1]:t.includes("pattern")||t.includes("week")||t.includes("productivity trends")||t.includes("when")||t.includes("daily")||t.includes("weekly")?[4,2]:t.includes("yesterday")||t.includes("last week")||t.includes("this week")||t.includes("timeline")?[4,3]:t.includes("insight")||t.includes("recommend")||t.includes("analyze")||t.includes("improve")?[1,2,4]:[1,2,3,4]}static selectDiverseProjectSources(e,t=12){if(!e||e.length===0)return[];const r={},i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.metadata)==null?void 0:f.projectId)||c.project_id||"unknown";u!=="unknown"?(r[u]||(r[u]=[]),r[u].push(c)):i.push(c)});const a=Object.keys(r);console.log(`📊 Found docs from ${a.length} projects + ${i.length} uncategorized docs`),a.length>0&&a.forEach(c=>{console.log(`   - Project ${c}: ${r[c].length} docs`)});const o=Math.max(3,Math.floor(t/Math.max(a.length,1))),s=t-o*a.length;console.log(`📈 Source distribution: ${o} per project + ${s} bonus slots = target ${t} sources`);let l=[];if(a.forEach((c,u)=>{const d=r[c].sort((f,m)=>(m.similarity_score||m.relevanceScore||0)-(f.similarity_score||f.relevanceScore||0)),h=o+(u<s?1:0);l.push(...d.slice(0,h))}),l.length<t&&i.length>0){const c=i.sort((d,h)=>(h.similarity_score||h.relevanceScore||0)-(d.similarity_score||d.relevanceScore||0)),u=t-l.length;l.push(...c.slice(0,u))}return l.sort((c,u)=>(u.similarity_score||u.relevanceScore||0)-(c.similarity_score||c.relevanceScore||0)).slice(0,t)}static rankDocsByRelevance(e,t,r){const i=t.toLowerCase().split(" ");return e.map(a=>{var u,d,h;let o=0;const s=((u=a.metadata)==null?void 0:u.chunkLevel)||1,l=r.indexOf(s);l!==-1&&(o+=(r.length-l)*10);const c=a.content.toLowerCase();if(i.forEach(f=>{c.includes(f)&&(o+=5)}),a.created_at){const f=(Date.now()-new Date(a.created_at).getTime())/864e5;o+=Math.max(0,5-f)}return(h=(d=a.metadata)==null?void 0:d.analytics)!=null&&h.productivity&&(o+=a.metadata.analytics.productivity),{...a,relevanceScore:o}}).sort((a,o)=>o.relevanceScore-a.relevanceScore)}static async generateResponseFromDocs(e,t,r,i,a){var c,u;try{console.log(`📊 generateResponseFromDocs called with ${t.length} docs:`,t.map(y=>{var w;return{id:y.id,type:y.content_type,similarity:y.similarity,relevanceScore:y.relevanceScore,hasContent:!!y.content,contentLength:((w=y.content)==null?void 0:w.length)||0}}));const d=t.map(y=>`${y.content} (Type: ${y.content_type}, Relevance: ${y.similarity||.5})`).join(`

`),{AdvancedPromptService:h}=await nn(async()=>{const{AdvancedPromptService:y}=await import("./advancedPromptService-BzeP5Ya4.js");return{AdvancedPromptService:y}},[]),f="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,m=await h.processWithAdvancedPrompting(e,d,f,a||[]);console.log(`🎯 Advanced prompting: ${m.technique_used}, confidence: ${m.confidence}`);const v=t.map((y,w)=>{var S,T,C,k,A;return{id:y.id||`doc_${w}`,type:((S=y.metadata)==null?void 0:S.chunkType)||y.content_type||"session",contentId:((C=(T=y.metadata)==null?void 0:T.entities)==null?void 0:C.taskId)||((A=(k=y.metadata)==null?void 0:k.entities)==null?void 0:A.projectId)||y.id,title:this.generateSourceTitle(y),snippet:y.content.substring(0,150)+"...",relevanceScore:y.similarity||y.relevanceScore||1-w*.1}});return console.log("🔍 Final sources structure (Advanced path):",v.map(y=>{var w;return{id:y.id,type:y.type,title:y.title,relevanceScore:y.relevanceScore,hasSnippet:!!y.snippet,snippetLength:((w=y.snippet)==null?void 0:w.length)||0}})),{response:m.response,sources:v,metadata:{totalSources:t.length,responseTime:Date.now()-r,searchStrategy:`enhanced_with_${m.technique_used}`,confidence:m.confidence,retrievedDocuments:t.length,relevanceScore:t.length>0?t[0].similarity||t[0].relevanceScore||.8:0,tokens:this.estimateTokens(m.response),model:"gpt-4o-mini",chunkLevelsUsed:Array.from(new Set(t.map(y=>{var w;return(w=y.metadata)==null?void 0:w.chunkLevel}).filter(Boolean))),advancedPrompting:{technique:m.technique_used,confidence:m.confidence,processingTime:m.processing_time,reasoningSteps:((c=m.reasoning)==null?void 0:c.reasoning_steps.length)||0,validationScore:(u=m.validation)==null?void 0:u.overall_score,correctionApplied:!!m.correction}}}}catch(d){console.error("❌ Advanced prompting failed, using standard approach:",d)}if(t.length===0)return this.generateFallbackResponse(e,r,t);const o=t.map((d,h)=>{var y;const f=d.metadata||{},m=((y=f.entities)==null?void 0:y.projectId)||f.projectId||d.project_id||"Unknown Project";return`${f.chunkType?`[Project: ${m} | ${f.chunkType} - Level ${f.chunkLevel}]`:`[Project: ${m} | Document]`} ${d.content}`}).join(`

`),s="primaryTypes"in i?{primaryIntent:"general",secondaryIntents:[],confidence:i.confidence/100,suggestedContentTypes:[...i.primaryTypes,...i.secondaryTypes],suggestedChunkTypes:[...i.primaryTypes,...i.secondaryTypes],mixingStrategy:"comprehensive"}:i,l=this.buildEnhancedPrompt(e,o,t,s);try{const d=await kr.generateChatResponse({query:l,context:o,conversationHistory:a||[]}),h=this.cleanResponse(d),f=t.map((m,v)=>{var y,w,S,T,C;return{id:m.id||`doc_${v}`,type:((y=m.metadata)==null?void 0:y.chunkType)||m.content_type||"session",contentId:((S=(w=m.metadata)==null?void 0:w.entities)==null?void 0:S.taskId)||((C=(T=m.metadata)==null?void 0:T.entities)==null?void 0:C.projectId)||m.id,title:this.generateSourceTitle(m),snippet:m.content.substring(0,150)+"...",relevanceScore:m.similarity||m.relevanceScore||1-v*.1}});return console.log("🔍 Final sources structure (Fallback path):",f.map(m=>{var v;return{id:m.id,type:m.type,title:m.title,relevanceScore:m.relevanceScore,hasSnippet:!!m.snippet,snippetLength:((v=m.snippet)==null?void 0:v.length)||0}})),{response:h,sources:f,metadata:{responseTime:Date.now()-r,relevanceScore:t.length>0?t[0].relevanceScore||.8:0,tokens:this.estimateTokens(h),model:"gpt-4o-mini",retrievedDocuments:t.length,chunkLevelsUsed:Array.from(new Set(t.map(m=>{var v;return(v=m.metadata)==null?void 0:v.chunkLevel}).filter(Boolean))),searchStrategy:"hybrid_multi_level"}}}catch(d){return console.error("❌ OpenAI response generation failed:",d),this.generateFallbackResponse(e,r,t)}}static async storeChunkWithEmbedding(e,t){var r,i;try{const a=await kr.generateEmbedding({content:e.content,contentType:e.content_type}),o=e.content_type,s=((r=e.metadata.entities)==null?void 0:r.taskId)||((i=e.metadata.entities)==null?void 0:i.projectId)||e.id,{data:l}=await Ot.from("user_productivity_documents").select("id").eq("user_id",t).eq("content_type",o).eq("metadata->>documentId",s).single(),c={user_id:t,content_type:o,content:e.content,embedding:a,metadata:{...e.metadata,isEnhanced:!0,documentId:s}};let u;if(l?u=(await Ot.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await Ot.from("user_productivity_documents").insert(c)).error,u)throw u}catch(a){throw console.error(`Failed to store chunk ${e.id}:`,a),a}}static buildEnhancedPrompt(e,t,r,i){const a=XG.generateContextualPrompt(e,t,i),o=Array.from(new Set(r.map(c=>{var u;return c.content_type||((u=c.metadata)==null?void 0:u.chunkType)||"unknown"}).filter(c=>c!=="unknown")));let s="low";r.length>=15&&o.length>=3?s="high":r.length>=8&&o.length>=2&&(s="medium");const l=XG.enhancePromptWithDataContext(a,o,s);return console.log(`🎯 Generated ${i.primaryIntent} prompt with ${s} data quality`),l}static generateSourceTitle(e){switch((e.metadata||{}).chunkType){case"session":return"Work Session";case"task_aggregate":return"Task Summary";case"project_summary":return"Project Overview";case"task_sessions":return"Task Sessions Summary";case"temporal_pattern":return"Productivity Pattern";default:return e.content_type||"Document"}}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getFullYear(),t.getMonth()-1,t.getDate()).toISOString();default:return new Date(0).toISOString()}}static generateFallbackResponse(e,t,r){const i=["Try asking about your recent work sessions or tasks","Ask about specific projects you're working on","Request information for a specific time period","Ask for help finding specific data"];return{response:r&&r.length>0?`I found ${r.length} related items in your productivity data, but I'm having trouble generating a detailed analysis right now. ${i[Math.floor(Math.random()*i.length)]}.`:`I couldn't find specific productivity data related to your query. This might be because your data hasn't been synced yet. Try running a data sync first, or ${i[Math.floor(Math.random()*i.length)]}.`,sources:r?r.slice(0,8).map((a,o)=>({id:a.id||`fallback_${o}`,type:a.content_type||"document",contentId:a.id||`fallback_${o}`,title:a.content_type||"Document",snippet:a.content.substring(0,100)+"...",relevanceScore:.3})):[],metadata:{responseTime:Date.now()-t,relevanceScore:.2,tokens:50,model:"fallback",retrievedDocuments:(r==null?void 0:r.length)||0,chunkLevelsUsed:[],searchStrategy:"fallback"}}}static estimateTokens(e){return Math.ceil(e.length/4)}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static calculateCosineSimilarity(e,t){if(!e||!t)return console.error("❌ One or both vectors are null/undefined"),0;if(!Array.isArray(e)||!Array.isArray(t))return console.error("❌ One or both vectors are not arrays:",typeof e,typeof t),0;if(e.length!==t.length)return console.error(`❌ Vector length mismatch: ${e.length} vs ${t.length}`),0;if(e.length===0)return console.error("❌ Empty vectors provided"),0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++){const l=Number(e[s]),c=Number(t[s]);if(isNaN(l)||isNaN(c))return console.error(`❌ NaN value found at index ${s}: vecA[${s}]=${e[s]}, vecB[${s}]=${t[s]}`),0;r+=l*c,i+=l*l,a+=c*c}if(i===0||a===0)return console.error("❌ One or both vectors have zero magnitude"),0;const o=r/(Math.sqrt(i)*Math.sqrt(a));return isNaN(o)?(console.error("❌ Cosine similarity calculation resulted in NaN"),0):o}static async ensureRichContext(e,t,r,i){console.log(`🎯 Rich context analysis: ${e.length} initial sources (target: 40-80)`);let s=[...e];if(s.length>=40)return console.log("✅ Sufficient sources found, applying diversity optimization"),this.optimizeSourceDiversity(s,80);console.log(`📈 Insufficient sources (${s.length}/40), applying progressive enrichment`);try{const c=await this.performRelaxedSimilaritySearch(t,r,i);if(s=this.mergeUniqueDocuments(s,c),console.log(`📊 After relaxed similarity: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const u=await this.performExpandedContentTypeSearch(t,r,i);if(s=this.mergeUniqueDocuments(s,u),console.log(`📊 After expanded content types: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const d=await this.performTemporalDiversifiedSearch(t,r);if(s=this.mergeUniqueDocuments(s,d),console.log(`📊 After temporal diversification: ${s.length} sources`),s.length>=40)return this.optimizeSourceDiversity(s,80);const h=await this.performSemanticNeighborExpansion(s,r);s=this.mergeUniqueDocuments(s,h),console.log(`📊 After semantic neighbor expansion: ${s.length} sources`)}catch(c){console.error("❌ Error during rich context enrichment:",c)}const l=this.optimizeSourceDiversity(s,80);return console.log(`🎯 Final rich context: ${l.length} sources (${l.length>=40?"✅ sufficient":"⚠️ limited"})`),l}static async performRelaxedSimilaritySearch(e,t,r){try{const i=await kr.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return[];console.log("🔍 Relaxed similarity search (threshold: 0.05)");const a=["user_productivity_documents","embeddings"];let o=[];for(const s of a)try{const{data:l,error:c}=await Ot.from(s).select("*").eq("user_id",t).not("embedding","is",null).limit(200);if(!c&&l&&l.length>0){o=l.map(h=>{let f=h.embedding;if(typeof h.embedding=="string")try{f=JSON.parse(h.embedding)}catch{return{...h,similarity_score:0}}if(!Array.isArray(f))return{...h,similarity_score:0};const m=this.calculateCosineSimilarity(i,f);return{...h,similarity_score:m,embedding:f}}).filter(h=>h.similarity_score>.05).sort((h,f)=>f.similarity_score-h.similarity_score).slice(0,100);break}}catch{continue}return console.log(`📊 Relaxed similarity found: ${o.length} additional sources`),o}catch(i){return console.warn("⚠️ Relaxed similarity search failed:",i),[]}}static async performExpandedContentTypeSearch(e,t,r){try{console.log("🔍 Expanded content type search beyond prioritized types");const{data:i,error:a}=await Ot.from("user_productivity_documents").select("content_type").eq("user_id",t).not("content_type","is",null);if(a||!i)return[];const s=[...new Set(i.map(m=>m.content_type))].filter(m=>!r.suggestedContentTypes.includes(m));if(s.length===0)return[];console.log(`📊 Searching expanded content types: [${s.join(", ")}]`);const l=e.toLowerCase().split(/\s+/).filter(m=>m.length>2);let c=Ot.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",s);if(l.length>0){const m=l.join(" | ");c=c.textSearch("content",m)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(80);if(d||!u)return[];const f=u.map(m=>{const v=(m.content||"").toLowerCase();let y=0;return l.forEach(w=>{const S=(v.match(new RegExp(w,"g"))||[]).length;y+=S}),{...m,relevanceScore:y/Math.max(1,l.length),source:"expanded_content_types"}}).sort((m,v)=>v.relevanceScore-m.relevanceScore).filter(m=>m.relevanceScore>0);return console.log(`📊 Expanded content types found: ${f.length} additional sources`),f.slice(0,50)}catch(i){return console.warn("⚠️ Expanded content type search failed:",i),[]}}static async performTemporalDiversifiedSearch(e,t){try{console.log("🔍 Temporal diversification search");const r=e.toLowerCase().split(/\s+/).filter(s=>s.length>2),i=[{label:"last_7_days",days:7},{label:"last_30_days",days:30},{label:"last_90_days",days:90},{label:"older",days:365}];let a=[];for(const s of i)try{const l=new Date;l.setDate(l.getDate()-s.days);let c=Ot.from("user_productivity_documents").select("*").eq("user_id",t);if(s.label==="older"?c=c.lt("created_at",l.toISOString()):c=c.gte("created_at",l.toISOString()),r.length>0){const h=r.join(" | ");c=c.textSearch("content",h)}const{data:u,error:d}=await c.order("created_at",{ascending:!1}).limit(20);if(!d&&u&&u.length>0){const h=u.map(f=>({...f,temporal_range:s.label,relevanceScore:this.calculateTemporalRelevance(f,e),source:"temporal_diversification"}));a.push(...h),console.log(`📊 ${s.label}: ${u.length} sources`)}}catch(l){console.warn(`⚠️ Temporal range ${s.label} search failed:`,l);continue}const o=a.sort((s,l)=>l.relevanceScore-s.relevanceScore).filter(s=>s.relevanceScore>0);return console.log(`📊 Temporal diversification found: ${o.length} additional sources`),o.slice(0,60)}catch(r){return console.warn("⚠️ Temporal diversification search failed:",r),[]}}static async performSemanticNeighborExpansion(e,t){try{if(console.log(`🔍 Semantic neighbor expansion from ${e.length} seed sources`),e.length===0)return[];const r=e.filter(o=>(o.similarity_score||o.relevanceScore||0)>.2).slice(0,10);if(r.length===0)return[];let i=[];for(const o of r)try{if(!o.embedding)continue;const{data:s,error:l}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).neq("id",o.id).limit(30);if(!l&&s&&s.length>0){const c=s.map(u=>{let d=u.embedding;if(typeof u.embedding=="string")try{d=JSON.parse(u.embedding)}catch{return null}if(!Array.isArray(d))return null;const h=this.calculateCosineSimilarity(o.embedding,d);return h>.3?{...u,neighbor_similarity:h,seed_id:o.id,source:"semantic_neighbor",embedding:d}:null}).filter(Boolean);i.push(...c)}}catch(s){console.warn(`⚠️ Neighbor expansion for seed ${o.id} failed:`,s);continue}const a=this.deduplicateById(i).sort((o,s)=>s.neighbor_similarity-o.neighbor_similarity);return console.log(`📊 Semantic neighbor expansion found: ${a.length} additional sources`),a.slice(0,40)}catch(r){return console.warn("⚠️ Semantic neighbor expansion failed:",r),[]}}static optimizeSourceDiversity(e,t){if(console.log(`🎯 Optimizing source diversity: ${e.length} → ${t} sources`),e.length<=t)return e;const r=this.groupBy(e,"content_type"),i=this.groupBy(e,"project_id"),a=this.groupBy(e,"temporal_range");console.log("📊 Diversity analysis:",{contentTypes:Object.keys(r).length,projects:Object.keys(i).length,temporalRanges:Object.keys(a).length});const o=[],s=Math.max(1,Math.floor(t*.6/Object.keys(r).length)),l=Math.max(1,Math.floor(t*.3/Object.keys(i).length));Math.max(1,Math.floor(t*.1/Object.keys(a).length)),Object.entries(r).forEach(([u,d])=>{const h=d.sort((f,m)=>(m.similarity_score||m.relevanceScore||m.final_score||0)-(f.similarity_score||f.relevanceScore||f.final_score||0));o.push(...h.slice(0,s))}),Object.entries(i).forEach(([u,d])=>{const f=d.sort((m,v)=>(v.similarity_score||v.relevanceScore||v.final_score||0)-(m.similarity_score||m.relevanceScore||m.final_score||0)).filter(m=>!o.some(v=>v.id===m.id));o.push(...f.slice(0,l))});const c=t-o.length;if(c>0){const u=e.filter(d=>!o.some(h=>h.id===d.id)).sort((d,h)=>(h.similarity_score||h.relevanceScore||h.final_score||0)-(d.similarity_score||d.relevanceScore||d.final_score||0));o.push(...u.slice(0,c))}return console.log(`✅ Diversity optimization complete: ${o.length} sources selected`),o.slice(0,t)}static mergeUniqueDocuments(e,t){const r=new Set(e.map(a=>a.id)),i=t.filter(a=>!r.has(a.id));return[...e,...i]}static deduplicateById(e){const t=new Set;return e.filter(r=>t.has(r.id)?!1:(t.add(r.id),!0))}static groupBy(e,t){return e.reduce((r,i)=>{const a=i[t]||"unknown";return r[a]||(r[a]=[]),r[a].push(i),r},{})}static calculateTemporalRelevance(e,t){const r=(e.content||"").toLowerCase(),i=t.toLowerCase().split(/\s+/).filter(c=>c.length>2);let a=0;i.forEach(c=>{const u=(r.match(new RegExp(c,"g"))||[]).length;a+=u});const o=new Date(e.created_at||e.timestamp||Date.now()),s=(Date.now()-o.getTime())/(1e3*60*60*24),l=Math.max(0,1-s/365);return a/Math.max(1,i.length)+l*.1}static generateRelevanceExplanation(e,t){const r=e.content_type||"unknown",i=e.similarity||.5;return i>.8?`High relevance (${(i*100).toFixed(0)}%) - Strong semantic match with your query`:i>.6?`Good relevance (${(i*100).toFixed(0)}%) - Related ${r} content`:i>.4?`Moderate relevance (${(i*100).toFixed(0)}%) - Contains related information`:`Basic relevance (${(i*100).toFixed(0)}%) - Contextual match`}static async performIntelligentSearch(e,t,r,i){const{supabase:a}=await nn(async()=>{const{supabase:s}=await Promise.resolve().then(()=>sDt);return{supabase:s}},void 0);let o=[];try{for(const s of r){console.log(`🔍 Searching primary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.6,max_results:8});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!0,contentTypeRank:"primary"}));o.push(...u)}}if(o.length<6)for(const s of i){console.log(`🔍 Searching secondary content type: ${s}`);const{data:l,error:c}=await a.rpc("search_productivity_chunks",{query_text:e,user_id_param:t,content_type_filter:s,similarity_threshold:.5,max_results:4});if(!c&&l){const u=l.map(d=>({...d,isPrimary:!1,contentTypeRank:"secondary"}));o.push(...u)}}return o.sort((s,l)=>s.isPrimary&&!l.isPrimary?-1:!s.isPrimary&&l.isPrimary?1:(l.similarity||0)-(s.similarity||0)),console.log(`✅ Found ${o.length} results using AI content type selection`),o.slice(0,12)}catch(s){return console.error("❌ Intelligent search failed:",s),[]}}}class vDe{static async queryWithHierarchicalPriority(e,t,r){const i=Date.now();try{console.log(`🔍 Starting hierarchical priority search for query: "${e}"`);const a=Uu.classifyQuery(e);console.log(`🎯 Query classification: ${a.primaryIntent} (confidence: ${a.confidence})`);const o=await this.executeHierarchicalSearch(e,t,a);return o.docs.length===0?(console.log("🔄 No docs found in hierarchical search, using simple fallback response"),this.generateFallbackResponse(e,i)):await this.generatePriorityAwareResponse(e,o,a,r,i)}catch(a){return console.error("❌ Hierarchical priority search error:",a),this.generateFallbackResponse(e,i)}}static async executeHierarchicalSearch(e,t,r){const i=Date.now(),a=[];let o=[],s;console.log("📊 Starting priority cascade search...");for(const c of this.PRIORITY_LEVELS){console.log(`🔍 Searching ${c.name} (priority ${c.priority})...`),a.push(c.name);let u=[];if(c.name==="relevant_sources"){console.log("🤖 Using AI-powered content type selection for relevant sources...");try{s=await Uu.selectBestContentTypesWithAI(e,t),console.log("✅ AI Content Type Selection:",s),u=await this.searchRelevantSourcesWithAI(e,t,s)}catch(d){console.warn("⚠️ AI content type selection failed, using fallback:",d),u=await this.searchPriorityLevel(e,t,c,r)}}else u=await this.searchPriorityLevel(e,t,c,r);if(u.length>0){if(console.log(`✅ Found ${u.length} docs at ${c.name} level`),o.push(...u),this.shouldStopSearch(c,u,o,e)){console.log(`🛑 Stopping search at ${c.name} level - sufficient context found`);break}}else console.log(`⚠️ No docs found at ${c.name} level, continuing to next priority`)}const l=Date.now()-i;return{foundAt:a[a.findIndex((c,u)=>this.PRIORITY_LEVELS[u]&&o.some(d=>this.PRIORITY_LEVELS[u].contentTypes.includes(d.content_type)))]||"relevant_sources",docs:this.optimizePriorityResults(o),searchMetadata:{levelsSearched:a,totalDocs:o.length,processingTime:l,aiContentTypeSelection:s}}}static async searchPriorityLevel(e,t,r,i){try{let a=await this.performSemanticSearchByPriority(e,t,r);return a.length===0&&(a=await this.performKeywordSearchByPriority(e,t,r)),this.rankByPriorityAndRelevance(a,r,e)}catch(a){return console.error(`❌ Error searching ${r.name}:`,a),[]}}static async searchRelevantSourcesWithAI(e,t,r){try{let i=[];for(const a of r.primaryTypes){console.log(`🔍 Searching AI-selected primary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"primary");i.push(...o)}if(i.length<6)for(const a of r.secondaryTypes){console.log(`🔍 Searching AI-selected secondary content type: ${a}`);const o=await this.searchSpecificContentType(e,t,a,"secondary");i.push(...o)}return i.sort((a,o)=>a.contentTypeRank==="primary"&&o.contentTypeRank!=="primary"?-1:a.contentTypeRank!=="primary"&&o.contentTypeRank==="primary"?1:(o.similarity||o.similarity_score||0)-(a.similarity||a.similarity_score||0)),console.log(`✅ AI-powered search found ${i.length} relevant sources`),i.slice(0,12)}catch(i){return console.error("❌ AI-powered relevant sources search failed:",i),[]}}static async searchSpecificContentType(e,t,r,i){try{console.log(`🔍 Searching content type: ${r} for query: "${e}"`);const{data:a,error:o}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).not("embedding","is",null).limit(20);if(o)return console.warn(`⚠️ Error fetching ${r} docs:`,o.message),[];if(!a||a.length===0){console.log(`⚠️ No ${r} docs found for user ${t}`);const{data:s,error:l}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).eq("content_type",r).limit(i==="primary"?8:4);if(!l&&s&&s.length>0){console.log(`📝 Found ${s.length} ${r} docs via basic query`);const c=e.toLowerCase().split(" ").filter(d=>d.length>2);return s.map(d=>{let h=0;const f=(d.content||"").toLowerCase();return c.forEach(m=>{const v=(f.match(new RegExp(m,"g"))||[]).length;h+=v}),{...d,keywordScore:h,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,h*.1+.3)}}).filter(d=>d.keywordScore>0||r==="monthly_summary").sort((d,h)=>h.keywordScore-d.keywordScore).slice(0,i==="primary"?8:4)}return[]}console.log(`📊 Found ${a.length} ${r} docs with embeddings`);try{const s=await kr.generateEmbedding({content:e,contentType:"query"}),l=a.filter(c=>c.embedding&&Array.isArray(c.embedding)).map(c=>({...c,similarity:this.calculateCosineSimilarity(s,c.embedding),contentTypeRank:i,aiSelected:!0})).filter(c=>c.similarity>(i==="primary"?.3:.2)).sort((c,u)=>u.similarity-c.similarity);return console.log(`✅ Found ${l.length} relevant ${r} docs with similarity > threshold`),l.slice(0,i==="primary"?8:4)}catch(s){console.warn(`⚠️ Embedding generation failed for ${r}:`,s);const l=e.toLowerCase().split(" ").filter(u=>u.length>2),c=a.map(u=>{let d=0;const h=(u.content||"").toLowerCase();return l.forEach(f=>{const m=(h.match(new RegExp(f,"g"))||[]).length;d+=m}),{...u,keywordScore:d,contentTypeRank:i,aiSelected:!0,similarity:Math.min(.8,d*.1+.3)}}).filter(u=>u.keywordScore>0||r==="monthly_summary").sort((u,d)=>d.keywordScore-u.keywordScore);return console.log(`🔍 Keyword search fallback found ${c.length} ${r} docs`),c.slice(0,i==="primary"?8:4)}}catch(a){return console.error(`❌ Error searching content type ${r}:`,a),[]}}static async performSemanticSearchByPriority(e,t,r){try{const{data:i,error:a}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).not("embedding","is",null).limit(20);if(a)return console.warn(`⚠️ Semantic search error for ${r.name}:`,a.message),a.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!i||i.length===0)return console.log(`⚠️ No docs with embeddings found for ${r.name}`),[];try{const o=await kr.generateEmbedding({content:e,contentType:"query"}),s=i.filter(l=>l.embedding&&Array.isArray(l.embedding)).map(l=>({...l,similarity:this.calculateCosineSimilarity(o,l.embedding)})).filter(l=>l.similarity>.1).sort((l,c)=>c.similarity-l.similarity);return console.log(`🔍 Semantic search for ${r.name}: ${s.length} relevant docs`),s.slice(0,10)}catch(o){return console.warn(`⚠️ Embedding generation failed for ${r.name}:`,o),[]}}catch(i){return console.error(`❌ Semantic search failed for ${r.name}:`,i),[]}}static async performKeywordSearchByPriority(e,t,r){try{const i=e.toLowerCase().split(" ").filter(l=>l.length>2);if(i.length===0)return[];const{data:a,error:o}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).in("content_type",r.contentTypes).limit(15);if(o)return console.warn(`⚠️ Keyword search error for ${r.name}:`,o.message),o.code==="42P01"?(console.log(`📝 Table user_productivity_documents doesn't exist yet. Skipping ${r.name} search.`),[]):[];if(!a||a.length===0)return console.log(`⚠️ No docs found for keyword search on ${r.name}`),[];const s=a.map(l=>{let c=0;const u=(l.content||"").toLowerCase();return i.forEach(d=>{const h=(u.match(new RegExp(d,"g"))||[]).length;c+=h}),{...l,keywordScore:c}}).filter(l=>l.keywordScore>0).sort((l,c)=>c.keywordScore-l.keywordScore);return console.log(`🔍 Keyword search for ${r.name}: ${s.length} relevant docs`),s.slice(0,8)}catch(i){return console.error(`❌ Keyword search failed for ${r.name}:`,i),[]}}static shouldStopSearch(e,t,r,i){if(e.name==="monthly_summary"||e.name==="weekly_summary")return!1;const a=this.analyzeQueryContext(i);if(e.name==="relevant_sources"){const o=r.filter(c=>c.content_type==="monthly_summary"||c.content_type==="weekly_summary").length>=2,s=t.length>=4,l=r.length>=8;return a.needsRecent||a.needsSpecific||a.complexityLevel==="complex"?(console.log(`🔄 Query needs ${a.needsRecent?"recent":""} ${a.needsSpecific?"specific":""} ${a.complexityLevel==="complex"?"complex":""} context - continuing to daily summaries`),!1):a.complexityLevel==="simple"&&o&&s?(console.log(`✅ Simple query with good context (${r.length} docs), sufficient for response`),!0):a.complexityLevel==="moderate"&&o&&t.length>=6&&l?(console.log(`✅ Moderate query with comprehensive context (${r.length} docs), sufficient for response`),!0):(console.log(`🔄 Continuing to daily summaries for more comprehensive context (current: ${r.length} docs)`),!1)}if(e.name==="daily_summary"){const o=t.length>=2||r.length>=12;return o&&console.log(`✅ Daily summaries complete - total context: ${r.length} docs`),o}return!1}static analyzeQueryContext(e){const t=e.toLowerCase(),r=t.includes("today")||t.includes("yesterday")||t.includes("recent")||t.includes("latest")||t.includes("current")||t.includes("now"),i=t.includes("specific")||t.includes("detailed")||t.includes("exact")||t.includes("particular"),a=e.includes("?")||t.startsWith("what")||t.startsWith("how")||t.startsWith("when")||t.startsWith("where")||t.startsWith("why"),o=e.split(" ").length,s=t.includes("analysis")||t.includes("comprehensive")||t.includes("breakdown")||t.includes("compare")||t.includes("trend")||t.includes("pattern");let l="simple";return o>10||s?l="complex":(o>5||a)&&(l="moderate"),{needsRecent:r,needsSpecific:i,isQuestionBased:a,complexityLevel:l}}static rankByPriorityAndRelevance(e,t,r){return e.map(i=>({...i,priorityScore:(5-t.priority)*10,totalScore:(i.similarity||i.keywordScore||0)+(5-t.priority)*10})).sort((i,a)=>a.totalScore-i.totalScore)}static optimizePriorityResults(e){var i,a,o,s,l,c,u,d;const t=this.PRIORITY_LEVELS.reduce((h,f)=>(h[f.name]=e.filter(m=>f.contentTypes.includes(m.content_type)),h),{}),r=[];if(((i=t.monthly_summary)==null?void 0:i.length)>0&&r.push(...t.monthly_summary.slice(0,3)),((a=t.weekly_summary)==null?void 0:a.length)>0&&r.length<18&&r.push(...t.weekly_summary.slice(0,4)),((o=t.relevant_sources)==null?void 0:o.length)>0&&r.length<15){const h=Math.min(8,15-r.length);r.push(...t.relevant_sources.slice(0,h))}if(((s=t.daily_summary)==null?void 0:s.length)>0&&r.length<20){const h=20-r.length;r.push(...t.daily_summary.slice(0,Math.min(5,h)))}return console.log(`📊 Optimized results: ${r.length} total docs prioritized by hierarchy (Monthly→Weekly→Relevant→Daily)`),console.log(`📊 Breakdown: Monthly(${((l=t.monthly_summary)==null?void 0:l.length)||0}), Weekly(${((c=t.weekly_summary)==null?void 0:c.length)||0}), Relevant(${((u=t.relevant_sources)==null?void 0:u.length)||0}), Daily(${((d=t.daily_summary)==null?void 0:d.length)||0})`),r}static async generatePriorityAwareResponse(e,t,r,i=[],a){const o=t.docs.map(l=>`[${l.content_type.toUpperCase()}] ${l.content}`).join(`

`),s=this.buildPriorityAwarePrompt(e,o,t.foundAt,t.searchMetadata);try{const l=await kr.generateChatResponse({query:s,context:o,conversationHistory:i}),c=t.docs.map((d,h)=>{var f,m;return{id:d.id||`doc_${h}`,type:d.content_type||"unknown",contentId:((m=(f=d.metadata)==null?void 0:f.entities)==null?void 0:m.taskId)||d.id,title:this.generateSourceTitle(d),snippet:d.content.substring(0,150)+"...",relevanceScore:d.similarity||d.totalScore||1-h*.1}}),u={responseTime:Date.now()-a,relevanceScore:Math.min(.95,.6+t.docs.length*.05),tokens:kr.estimateTokens(l),model:"gpt-4o-mini",retrievedDocuments:t.docs.length,totalSources:t.searchMetadata.totalDocs,confidence:Math.min(.95,.6+t.docs.length*.05),searchStrategy:`hierarchical_priority_${t.foundAt}${t.searchMetadata.aiContentTypeSelection?"_ai_enhanced":""}`,aiContentTypeSelection:t.searchMetadata.aiContentTypeSelection,priorityLevels:t.searchMetadata.levelsSearched};return{response:l.trim(),sources:c,metadata:u}}catch(l){return console.error("❌ Error generating priority-aware response:",l),this.generateFallbackResponse(e,a)}}static buildPriorityAwarePrompt(e,t,r,i){const a=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`You are an AI assistant that analyzes productivity data using a hierarchical approach.

CURRENT DATE & TIME: ${a} at ${o}

SEARCH HIERARCHY USED:
- Data was found at: ${r} level
- Levels searched: ${i.levelsSearched.join(" → ")}
- This follows the priority: Monthly Summary → Weekly Summary → Relevant Sources → Daily Summary (if needed)

CONTEXT PRIORITY EXPLANATION:
The context below has been prioritized to give you high-level insights first, then drill down to specifics as needed. Higher-level summaries provide better strategic context.

CONTEXT:
${t}

INSTRUCTIONS:
1. Answer based on the hierarchical context provided
2. Start with high-level insights when available
3. Mention the level of data you're drawing from (monthly/weekly/daily/detailed)
4. Provide specific examples when helpful
5. If using lower-level data, frame it within the broader context

USER QUESTION: ${e}`}static generateSourceTitle(e){var t,r,i,a,o,s;return e.content_type==="monthly_summary"?`Monthly Summary - ${((t=e.metadata)==null?void 0:t.timeframe)||"Recent Month"}`:e.content_type==="weekly_summary"?`Weekly Summary - ${((r=e.metadata)==null?void 0:r.timeframe)||"Recent Week"}`:e.content_type==="daily_summary"?`Daily Summary - ${((i=e.metadata)==null?void 0:i.timeframe)||"Recent Day"}`:e.content_type==="project_summary"?`Project: ${((a=e.metadata)==null?void 0:a.projectName)||"Unknown Project"}`:e.content_type==="task_aggregate"?`Task: ${((o=e.metadata)==null?void 0:o.taskTitle)||"Unknown Task"}`:`${e.content_type} - ${((s=e.id)==null?void 0:s.substring(0,8))||"Unknown"}`}static calculateCosineSimilarity(e,t){if(!e||!t||e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static generateFallbackResponse(e,t){return{response:`I don't have enough context in your productivity data to answer "${e}". This could mean you haven't used the app long enough to generate summaries, or the data hasn't been synced yet. Try asking about more recent activities or check if your data has been properly synced.`,sources:[],metadata:{responseTime:Date.now()-t,relevanceScore:.1,tokens:50,model:"gpt-4o-mini",retrievedDocuments:0,confidence:.1,searchStrategy:"hierarchical_priority_no_data"}}}}$t(vDe,"PRIORITY_LEVELS",[{name:"monthly_summary",contentTypes:["monthly_summary"],chunkLevels:[1],priority:1},{name:"weekly_summary",contentTypes:["weekly_summary"],chunkLevels:[2],priority:2},{name:"relevant_sources",contentTypes:["task_aggregate","project_summary","task_sessions"],chunkLevels:[4,5,6],priority:3},{name:"daily_summary",contentTypes:["daily_summary"],chunkLevels:[3],priority:4}]);const yDe=uh()(W4e((n,e)=>({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:["What were my key achievements this month?","How was my productivity this week?","What did I work on today?","Which project needs my attention?","Show me my focus patterns","What should I prioritize next?"],quickActions:[],ragConfig:{prioritizeCost:!1,maxSources:8,responseQuality:"balanced",includeHistoricalData:!0,autoOptimize:!0},_isInitialized:!1,_userId:null,sendMessage:async t=>{var a,o;const{currentConversationId:r,_userId:i}=e();if(console.log("🤖 sendMessage called with:",{content:t,_userId:i,currentConversationId:r}),console.log("🤖 Chat store state:",{isInitialized:e()._isInitialized,userId:i,conversationCount:e().conversations.length}),!i){console.error("Chat store not initialized - no user ID"),n({error:"Please log in to use AI Assistant"});return}r||e().createConversation(),n({isLoading:!0,error:null});try{const s=e().currentConversationId,l={id:`msg_${Date.now()}_user`,conversationId:s,userId:i,role:"user",content:t,timestamp:new Date};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,l]}:h)}));let c;try{console.log("🎯 Attempting Hierarchical Priority search..."),c=await vDe.queryWithHierarchicalPriority(t,i,((a=e().conversations.find(d=>d.id===s))==null?void 0:a.messages.slice(-5).map(d=>({role:d.role,content:d.content})))||[]),(o=c.metadata.searchStrategy)!=null&&o.includes("no_data")&&(console.log("🔄 Hierarchical search returned no data, trying Enhanced RAG..."),c=await R_.queryWithRAG(t,i))}catch(d){console.warn("⚠️ Hierarchical Priority service failed, falling back to Enhanced RAG:",d),c=await R_.queryWithRAG(t,i)}const u={id:`msg_${Date.now()}_assistant`,conversationId:s,userId:i,role:"assistant",content:c.response,timestamp:new Date,metadata:{tokens:c.metadata.tokens,responseTime:c.metadata.responseTime,relevanceScore:c.metadata.relevanceScore,model:c.metadata.model,retrievedDocuments:c.metadata.retrievedDocuments},sources:c.sources};n(d=>({conversations:d.conversations.map(h=>h.id===s?{...h,messages:[...h.messages,u]}:h),isLoading:!1}))}catch(s){console.error("Error sending message:",s),n({error:s instanceof Error?s.message:"Failed to send message",isLoading:!1})}},createConversation:()=>{const{_userId:t}=e();if(!t)return n({error:"User not authenticated"}),"";const r={id:`conv_${Date.now()}`,userId:t,title:"New Conversation",messages:[],createdAt:new Date,updatedAt:new Date,isActive:!0};return n(i=>({conversations:[r,...i.conversations],currentConversationId:r.id,error:null})),r.id},setActiveConversation:t=>{const{conversations:r}=e(),i=r.find(a=>a.id===t);n(i?{currentConversationId:t,error:null}:{error:"Conversation not found"})},deleteConversation:t=>{n(r=>({conversations:r.conversations.filter(i=>i.id!==t),currentConversationId:r.currentConversationId===t?null:r.currentConversationId,error:null}))},clearError:()=>{n({error:null})},generateSuggestions:()=>{n({suggestedQueries:["How productive was I this week?","What projects need my attention?","Show me my focus time breakdown","What should I prioritize today?","How am I progressing toward my goals?"]})},executeQuickAction:t=>{console.log("Executing quick action:",t),n(r=>({quickActions:r.quickActions.filter(i=>i.id!==t.id)}))},updateRAGConfig:t=>{n(r=>({ragConfig:{...r.ragConfig,...t}}))},_setUserId:t=>{n({_userId:t}),t&&!e()._isInitialized&&(e().generateSuggestions(),n({_isInitialized:!0}))},_reset:()=>{n({conversations:[],currentConversationId:null,isLoading:!1,error:null,suggestedQueries:[],quickActions:[],_isInitialized:!1,_userId:null})}}))),lDt=({isOpen:n,onClose:e})=>{const[t,r]=Y.useState(""),[i,a]=Y.useState(!1),o=Y.useRef(null),s=Y.useRef(null),{user:l}=Ht(),{conversations:c,currentConversationId:u,isLoading:d,error:h,suggestedQueries:f,sendMessage:m,createConversation:v,setActiveConversation:y,clearError:w}=yDe(),S=c.find(D=>D.id===u),T=(S==null?void 0:S.messages)||[];Y.useEffect(()=>{var D;(D=o.current)==null||D.scrollIntoView({behavior:"smooth"})},[T]),Y.useEffect(()=>{n&&setTimeout(()=>{var D;return(D=s.current)==null?void 0:D.focus()},100)},[n]);const C=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),k())},k=async()=>{if(!t.trim()||d)return;if(!l){alert("Please log in to use the AI Assistant");return}const D=t.trim();r(""),u||v(),await m(D)},A=D=>{var P;r(D),(P=s.current)==null||P.focus()};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:`bg-white rounded-lg shadow-xl transition-all duration-300 ${i?"w-full h-full max-w-6xl max-h-full":"w-full max-w-2xl h-[80vh]"}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx(aR,{className:"w-5 h-5 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Work Assistant"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Direct, focused answers about your productivity data"})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>a(!i),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",title:i?"Minimize":"Expand",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),x.jsx("button",{onClick:e,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:x.jsx(rz,{className:"w-4 h-4"})})]})]}),h&&x.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 border-l-4 border-red-400 p-4 mx-4 mt-4",children:[x.jsx(Mv,{className:"w-5 h-5 text-red-400"}),x.jsx("div",{className:"flex-1",children:x.jsx("p",{className:"text-sm text-red-700",children:h})}),x.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-600",children:x.jsx(rz,{className:"w-4 h-4"})})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{height:"calc(100% - 200px)"},children:[T.length===0?x.jsxs("div",{className:"text-center py-8",children:[x.jsx(aR,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Welcome to your AI Assistant!"}),x.jsx("p",{className:"text-gray-500 mb-6",children:"Ask me anything about your productivity data, work patterns, or get insights about your progress."}),x.jsxs("div",{className:"max-w-md mx-auto",children:[x.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Try asking:"}),x.jsx("div",{className:"space-y-2",children:f.map((D,P)=>x.jsxs("button",{onClick:()=>A(D),className:"w-full text-left p-3 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:['"',D,'"']},P))})]})]}):x.jsxs(x.Fragment,{children:[T.map(D=>x.jsx(cDt,{message:D},D.id)),d&&x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx(aR,{className:"w-4 h-4 text-blue-600"})}),x.jsx("div",{className:"flex-1",children:x.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full"}),x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"animate-bounce w-2 h-2 bg-gray-400 rounded-full",style:{animationDelay:"0.2s"}})]})})})]})]}),x.jsx("div",{ref:o})]}),x.jsx("div",{className:"border-t border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-end space-x-3",children:[x.jsx("div",{className:"flex-1",children:x.jsx("textarea",{ref:s,value:t,onChange:D=>r(D.target.value),onKeyDown:C,placeholder:"Ask about your productivity data...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none text-gray-900 placeholder-gray-500",rows:1,style:{maxHeight:"120px"}})}),x.jsx("button",{onClick:k,disabled:!t.trim()||d,className:"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x.jsx(o4e,{className:"w-4 h-4"})})]})})]})}):null},cDt=({message:n})=>{const e=n.role==="user";return x.jsxs("div",{className:`flex items-start space-x-3 ${e?"flex-row-reverse space-x-reverse":""}`,children:[x.jsx("div",{className:`p-2 rounded-lg ${e?"bg-blue-100":"bg-gray-100"}`,children:e?x.jsx(I4e,{className:"w-4 h-4 text-blue-600"}):x.jsx(aR,{className:"w-4 h-4 text-gray-600"})}),x.jsxs("div",{className:`flex-1 max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl ${e?"text-right":""}`,children:[x.jsxs("div",{className:`rounded-lg ${e?"bg-blue-600 text-white ml-auto p-3":"bg-white border border-gray-200 text-gray-900 p-5 shadow-sm"}`,children:[e?x.jsx("p",{className:"text-sm whitespace-pre-wrap text-white",children:n.content}):x.jsx(tDt,{className:"text-sm text-gray-900 leading-normal break-words whitespace-pre-wrap",components:{strong:({node:t,...r})=>x.jsx("strong",{className:"font-bold text-gray-900",...r}),em:({node:t,...r})=>x.jsx("em",{className:"italic text-gray-900",...r}),ul:({node:t,...r})=>x.jsx("ul",{className:"space-y-2 my-3",...r}),li:({node:t,...r})=>x.jsxs("li",{className:"flex items-start pl-0 mb-2",...r,children:[x.jsx("span",{className:"text-gray-900 font-bold mr-2 mt-0.5 flex-shrink-0",children:"•"}),x.jsx("div",{className:"text-sm leading-normal flex-1 break-words",children:r.children})]}),p:({node:t,...r})=>x.jsx("div",{className:"text-sm mb-3 last:mb-0 leading-normal break-words",...r}),h1:({node:t,...r})=>x.jsx("h1",{className:"text-lg font-bold mb-3 text-gray-900 border-b border-gray-200 pb-2 mt-4 first:mt-0",...r}),h2:({node:t,...r})=>x.jsx("h2",{className:"text-base font-bold mb-2 text-gray-900 mt-4 first:mt-0",...r}),h3:({node:t,...r})=>x.jsx("h3",{className:"text-sm font-bold mb-2 text-gray-900 mt-3 first:mt-0",...r}),code:({node:t,...r})=>x.jsx("code",{className:"bg-blue-50 text-blue-800 px-1.5 py-0.5 rounded text-xs font-mono font-semibold",...r})},children:n.content}),!e&&n.metadata&&x.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{children:["Response time: ",n.metadata.responseTime,"ms"]}),n.metadata.retrievedDocuments&&x.jsxs("span",{children:[n.metadata.retrievedDocuments," sources"]})]})})]}),n.sources&&n.sources.length>0&&x.jsx(uDt,{sources:n.sources}),x.jsx("div",{className:`text-xs text-gray-500 mt-1 ${e?"text-right":""}`,children:new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(n.timestamp))})]})]})},uDt=({sources:n})=>{const[e,t]=Y.useState(!1),r=n.reduce((a,o)=>a+(o.relevanceScore||0),0)/n.length,i=n.reduce((a,o)=>(o.relevanceScore||0)>(a.relevanceScore||0)?o:a);return x.jsxs("div",{className:"mt-2 bg-gray-50 border border-gray-200 rounded-lg overflow-hidden",children:[x.jsxs("button",{onClick:()=>t(!e),className:"w-full px-3 py-2 flex items-center justify-between hover:bg-gray-100 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset","aria-expanded":e,"aria-label":`${e?"Hide":"Show"} source references`,children:[x.jsxs("div",{className:"flex items-center space-x-2 text-left",children:[x.jsx(FL,{className:"w-4 h-4 text-gray-500"}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[n.length," source",n.length!==1?"s":""," referenced"]}),!e&&x.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(r*100),'% avg relevance • "',i.title,'"']})]})]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:"text-xs text-gray-500 mr-1",children:e?"Hide":"Show"}),e?x.jsx(kye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"}):x.jsx(Cye,{className:"w-4 h-4 text-gray-500 transition-transform duration-200"})]})]}),x.jsx("div",{className:`transition-all duration-300 ease-in-out ${e?"max-h-80 opacity-100":"max-h-0 opacity-0"} overflow-hidden`,children:x.jsx("div",{className:"px-3 pb-3 space-y-2 border-t border-gray-200 max-h-80 overflow-y-auto",children:n.map((a,o)=>x.jsx(dDt,{source:a,isExpanded:!0},a.id||o))})})]})},dDt=({source:n,isExpanded:e=!1})=>x.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3 text-xs shadow-sm",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(FL,{className:"w-3 h-3 text-gray-400"}),x.jsx("span",{className:"font-medium text-gray-700 truncate",children:n.title})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("span",{className:"text-gray-500 font-mono",children:[Math.round((n.relevanceScore||0)*100),"%"]}),x.jsx("span",{className:"bg-gray-200 px-2 py-0.5 rounded text-gray-600 text-xs",children:n.type})]})]}),e&&x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"text-gray-600 mb-2 line-clamp-3",children:n.snippet}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"text-gray-500 text-xs",children:n.contentId&&x.jsxs("span",{className:"font-mono bg-gray-100 px-1 py-0.5 rounded",children:["ID: ",n.contentId.slice(0,8),"..."]})}),n.contentId&&x.jsxs("button",{className:"text-blue-600 hover:text-blue-800 flex items-center space-x-1 transition-colors",children:[x.jsx("span",{children:"View details"}),x.jsx(Dye,{className:"w-3 h-3"})]})]})]})]}),hDt=()=>{const[n,e]=Y.useState(!1),{user:t}=Ht();return t?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 z-40 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300","aria-label":"Open AI Assistant",children:x.jsx(v_,{className:"w-6 h-6"})}),x.jsx(lDt,{isOpen:n,onClose:()=>e(!1)})]}):null};class fDt{static async testUserSync(e){try{console.log(`🔍 Testing sync for user: ${e}`);const t=await this.countFirebaseData(e),r=await this.countSupabaseData(e),i=Object.values(t).reduce((s,l)=>s+l,0),a=this.determineSyncStatus(i,r.documents),o=this.generateRecommendations(t,r,a);return{firebaseData:t,supabaseData:r,syncStatus:a,recommendations:o}}catch(t){throw console.error("Error testing user sync:",t),new Error(`Failed to test user sync: ${t instanceof Error?t.message:"Unknown error"}`)}}static async countFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions"],r={};for(const i of t)try{const a=zt(qt(Qe,i),gt("userId","==",e)),o=await kn(a);r[i]=o.size}catch(a){console.warn(`Error counting ${i}:`,a),r[i]=0}return r}static async countSupabaseData(e){try{const{count:t,error:r}=await Ot.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e);if(r)throw r;const{count:i,error:a}=await Ot.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(a)throw a;return{documents:t||0,withEmbeddings:i||0,withoutEmbeddings:(t||0)-(i||0)}}catch(t){return console.error("Error counting Supabase data:",t),{documents:0,withEmbeddings:0,withoutEmbeddings:0}}}static determineSyncStatus(e,t){return t===0?"missing":t>=e*.8?"complete":"partial"}static generateRecommendations(e,t,r){const i=[];return r==="missing"&&(i.push("Run comprehensive Firebase sync to migrate all data"),i.push("Use DataSyncDashboard to initiate full sync")),r==="partial"&&(i.push("Some data may be missing - run comprehensive sync"),i.push("Check for sync errors in console logs")),t.withoutEmbeddings>0&&(i.push(`${t.withoutEmbeddings} documents need embeddings`),i.push('Use "Fix Embeddings" button in DataSyncDashboard')),t.withEmbeddings===0&&t.documents>0&&(i.push("Critical: All documents missing embeddings - RAG system non-functional"),i.push("Immediately run embedding generation")),i.length===0&&(i.push("✅ Sync appears complete and healthy"),i.push("Test chat interface to verify RAG functionality")),i}static async quickValidation(e){try{const t=await this.testUserSync(e);return t.syncStatus==="complete"&&t.supabaseData.withEmbeddings>0}catch(t){return console.error("Quick validation failed:",t),!1}}}class rL{static async syncAllUserData(e,t){try{console.log(`🔄 Starting comprehensive Firebase to Supabase sync for user: ${e}`);const r=[{name:"tasks",contentType:"task_aggregate"},{name:"projects",contentType:"project_summary"},{name:"workSessions",contentType:"session"},{name:"dailySiteUsage",contentType:"site_usage"},{name:"deepFocusSessions",contentType:"deep_focus"}];let i=0;const a=[],o={};let s=0;for(const{name:c}of r){const u=await this.countFirebaseCollection(e,c);o[c]=u,s+=u}let l=0;for(const{name:c,contentType:u}of r)try{t==null||t({current:l,total:s,status:`Syncing ${c}...`});const d=await this.syncCollection(e,c,u,h=>{t==null||t({current:l+h,total:s,status:`Syncing ${c}: ${h}/${o[c]}`})});i+=d,l+=o[c],console.log(`✅ Synced ${d} documents from ${c}`)}catch(d){const h=`Failed to sync ${c}: ${d instanceof Error?d.message:"Unknown error"}`;console.error(h),a.push(h)}return t==null||t({current:s,total:s,status:"Sync complete!"}),{synced:i,errors:a,details:o}}catch(r){throw console.error("Error in comprehensive sync:",r),new Error(`Comprehensive sync failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async syncCollection(e,t,r,i){try{const a=zt(qt(Qe,t),gt("userId","==",e)),s=(await kn(a)).docs.map(c=>({id:c.id,...c.data()}));let l=0;for(let c=0;c<s.length;c+=this.BATCH_SIZE){const u=s.slice(c,c+this.BATCH_SIZE);await Promise.all(u.map(async d=>{try{await this.syncSingleDocument(d,r,e),l++,i==null||i(l)}catch(h){console.error(`Error syncing document ${d.id}:`,h)}})),c+this.BATCH_SIZE<s.length&&await new Promise(d=>setTimeout(d,this.DELAY_BETWEEN_BATCHES))}return l}catch(a){throw console.error(`Error syncing collection ${t}:`,a),a}}static async syncSingleDocument(e,t,r){try{const i=this.formatDocumentContent(e,t),{data:a}=await Ot.from("user_productivity_documents").select("id").eq("user_id",r).eq("metadata->>documentId",e.id).single();if(a){console.log(`Document ${e.id} already exists, skipping`);return}const o=await kr.generateEmbedding({content:i,contentType:t}),{error:s}=await Ot.from("user_productivity_documents").insert({user_id:r,content_type:t,content:i,embedding:o,metadata:{documentId:e.id,sourceCollection:t,originalData:e,syncedAt:new Date().toISOString()}});if(s)throw s}catch(i){throw console.error(`Error syncing document ${e.id}:`,i),i}}static formatDocumentContent(e,t){switch(t){case"task_aggregate":return[`Task: ${e.text||e.title||"Untitled"}`,e.notes?`Notes: ${e.notes}`:"",e.project?`Project: ${e.project}`:"",e.completed?"Status: Completed":"Status: Incomplete",e.pomodoroCount?`Pomodoros: ${e.pomodoroCount}`:""].filter(Boolean).join(`
`);case"project_summary":return`Project: ${e.name||"Untitled Project"}
${e.description?`Description: ${e.description}`:""}
${e.category?`Category: ${e.category}`:""}
Goal Hours: ${e.goalHours||"Not set"}
Progress: ${e.totalHours||0} hours logged`.trim();case"session":return`Work Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Type: ${e.sessionType||"Work Session"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();case"site_usage":return`Website Usage: ${e.domain||"Unknown site"}
Time Spent: ${e.timeSpent||0} seconds
Category: ${e.category||"Uncategorized"}
Date: ${e.date||"Unknown date"}`.trim();case"deep_focus":return`Deep Focus Session: ${e.duration||0} minutes
${e.taskTitle?`Task: ${e.taskTitle}`:""}
${e.projectName?`Project: ${e.projectName}`:""}
Break Type: ${e.breakType||"Standard"}
${e.notes?`Notes: ${e.notes}`:""}`.trim();default:return JSON.stringify(e,null,2)}}static async countFirebaseCollection(e,t){try{const r=zt(qt(Qe,t),gt("userId","==",e));return(await kn(r)).size}catch(r){return console.error(`Error counting ${t}:`,r),0}}static async generateMissingEmbeddings(e,t){try{console.log(`🔍 Checking for documents without embeddings for user: ${e}`);const{data:r,error:i}=await Ot.from("user_productivity_documents").select("id, content, content_type").eq("user_id",e).is("embedding",null);if(i)throw i;if(!r||r.length===0)return console.log("✅ All documents already have embeddings"),0;console.log(`📋 Found ${r.length} documents without embeddings`);let a=0;for(const o of r)try{t==null||t({current:a,total:r.length,status:`Generating embedding ${a+1}/${r.length}`});const s=await kr.generateEmbedding({content:o.content,contentType:o.content_type}),{error:l}=await Ot.from("user_productivity_documents").update({embedding:s}).eq("id",o.id);if(l)throw l;a++,await new Promise(c=>setTimeout(c,this.DELAY_BETWEEN_BATCHES))}catch(s){console.error(`Error generating embedding for document ${o.id}:`,s)}return t==null||t({current:r.length,total:r.length,status:"Embedding generation complete!"}),console.log(`✅ Generated embeddings for ${a} documents`),a}catch(r){throw console.error("Error generating missing embeddings:",r),new Error(`Failed to generate missing embeddings: ${r instanceof Error?r.message:"Unknown error"}`)}}}$t(rL,"BATCH_SIZE",10),$t(rL,"DELAY_BETWEEN_BATCHES",100);class Kfe{static async generateComprehensiveReport(e){try{console.log(`📊 Generating comprehensive data report for user: ${e}`);const t=await this.collectFirebaseData(e),r=await this.collectSupabaseData(e),i=this.calculateSummaryMetrics(t,r),a=this.performDataAnalysis(t,r),o=await this.generateTechnicalDetails(e);return{summary:i,firebase:t,supabase:r,analysis:a,technicalDetails:o}}catch(t){throw console.error("Error generating comprehensive report:",t),new Error(`Failed to generate report: ${t instanceof Error?t.message:"Unknown error"}`)}}static async collectFirebaseData(e){const t=["tasks","projects","workSessions","dailySiteUsage","deepFocusSessions","users"],r={};for(const i of t)try{if(i==="users"){const a=zt(qt(Qe,i)),o=await kn(a);r[i]=o.docs.filter(s=>s.id===e).length}else{const a=zt(qt(Qe,i),gt("userId","==",e)),o=await kn(a);r[i]=o.size}}catch(a){console.warn(`Error collecting ${i}:`,a),r[i]=0}return r}static async collectSupabaseData(e){try{const{data:t,error:r}=await Ot.from("user_productivity_documents").select("*").eq("user_id",e);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=(t==null?void 0:t.filter(l=>l.embedding!==null).length)||0,o=i-a,s={};return t==null||t.forEach(l=>{const c=l.content_type||"unknown";s[c]=(s[c]||0)+1}),{totalDocuments:i,withEmbeddings:a,withoutEmbeddings:o,contentTypes:s}}catch(t){return console.error("Error collecting Supabase data:",t),{totalDocuments:0,withEmbeddings:0,withoutEmbeddings:0,contentTypes:{}}}}static calculateSummaryMetrics(e,t){const r=Object.values(e).reduce((o,s)=>o+s,0),i=t.totalDocuments>0?t.withEmbeddings/t.totalDocuments:0;let a;return i>=.95&&t.totalDocuments>=r*.8?a="excellent":i>=.8&&t.totalDocuments>=r*.6?a="good":i>=.3&&t.totalDocuments>0?a="poor":a="critical",{totalFirebaseItems:r,totalSupabaseDocuments:t.totalDocuments,embeddingCoverage:Math.round(i*100),syncHealth:a}}static performDataAnalysis(e,t){const r=[],i=[],a=[];return Object.entries(e).forEach(([o,s])=>{s===0?r.push(o):s<5&&i.push(o)}),t.totalDocuments===0?a.push("🚨 Critical: No data in Supabase - run comprehensive sync immediately"):t.withoutEmbeddings>0&&a.push(`⚠️ ${t.withoutEmbeddings} documents missing embeddings - run embedding generation`),r.length>0&&a.push(`📭 Empty collections: ${r.join(", ")}`),i.length>0&&a.push(`📉 Low data collections: ${i.join(", ")}`),t.totalDocuments<Object.values(e).reduce((o,s)=>o+s,0)*.8&&a.push("🔄 Supabase appears incomplete - consider re-running comprehensive sync"),a.length===0&&a.push("✅ Data looks healthy - no immediate action required"),{missingCollections:r,lowDataCollections:i,embeddingGaps:t.withoutEmbeddings,recommendations:a}}static async generateTechnicalDetails(e){try{const{data:t,error:r}=await Ot.from("user_productivity_documents").select("content, created_at").eq("user_id",e).order("created_at",{ascending:!0});if(r||!t)return{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"};const i=t.length>0?Math.round(t.reduce((l,c)=>l+c.content.length,0)/t.length):0,a=t.length>0?t[0].created_at:null,o=t.length>0?t[t.length-1].created_at:null,s=t.length>100?"high":t.length>50?"medium":"low";return{avgDocumentSize:i,oldestDocument:a,newestDocument:o,duplicateRisk:s}}catch(t){return console.error("Error generating technical details:",t),{avgDocumentSize:0,oldestDocument:null,newestDocument:null,duplicateRisk:"low"}}}static async quickHealthCheck(e){try{const{data:t,error:r}=await Ot.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e),{data:i,error:a}=await Ot.from("user_productivity_documents").select("*",{count:"exact",head:!0}).eq("user_id",e).not("embedding","is",null);if(r||a)throw r||a;const o=t||0,s=i||0,l=o>0?s/o*100:0;let c,u;return o===0?(c="critical",u="No data found - run comprehensive sync"):l>=90?(c="healthy",u="Data sync and embeddings are healthy"):l>=50?(c="warning",u="Some embeddings missing - consider running embedding generation"):(c="critical",u="Most embeddings missing - RAG functionality impaired"),{status:c,message:u,embeddingCoverage:Math.round(l)}}catch(t){return console.error("Error in quick health check:",t),{status:"critical",message:"Health check failed - please check system status",embeddingCoverage:0}}}static async getQuickSyncStatus(e){try{const{data:t,error:r}=await Ot.from("user_productivity_documents").select("id, created_at").eq("user_id",e).not("embedding","is",null);if(r)throw r;const i=(t==null?void 0:t.length)||0,a=t&&t.length>0?new Date(Math.max(...t.map(l=>new Date(l.created_at).getTime()))):null;let o="low",s=!1;return i===0?(o="high",s=!0):a&&Date.now()-a.getTime()>24*60*60*1e3&&(o="medium",s=!0),{priority:o,needsSync:s,embeddingCount:i,lastSync:a}}catch(t){return console.error("Error getting quick sync status:",t),{priority:"high",needsSync:!0,embeddingCount:0,lastSync:null}}}static async generateUserDataReport(e){try{const t=await this.collectFirebaseData(e),r=Object.values(t).reduce((c,u)=>c+u,0),i=await this.collectSupabaseData(e),a=r>0?Math.round(i.totalDocuments/r*100):0,o=a>=95&&i.withoutEmbeddings===0,s=[];i.withoutEmbeddings>0&&s.push(`${i.withoutEmbeddings} documents without embeddings`);const l=[];return o||(i.totalDocuments===0?l.push("Run complete data sync to migrate Firebase data"):i.withoutEmbeddings>0&&l.push("Generate embeddings for remaining documents")),{firebase:{totalDocuments:r,...t},supabase:{totalEmbeddings:i.withEmbeddings,...i},syncStatus:{isComplete:o,syncPercentage:a,missingEmbeddings:s,recommendations:l}}}catch(t){throw console.error("Error generating user data report:",t),t}}static printReport(e){console.log(`
📊 USER DATA REPORT`),console.log("==================="),console.log(`Firebase Documents: ${e.firebase.totalDocuments}`),console.log(`Supabase Documents: ${e.supabase.totalDocuments}`),console.log(`With Embeddings: ${e.supabase.withEmbeddings}`),console.log(`Sync Status: ${e.syncStatus.isComplete?"✅ Complete":"❌ Incomplete"} (${e.syncStatus.syncPercentage}%)`),e.syncStatus.recommendations.length>0&&(console.log(`
Recommendations:`),e.syncStatus.recommendations.forEach(t=>console.log(`  • ${t}`)))}}class ZG{static async executeIncrementalSync(e){const t=Date.now();console.log(`🔄 Starting incremental sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncTasksIncremental(e,i.tasks),o=await this.syncProjectsIncremental(e,i.projects),s=await this.syncSessionsIncremental(e,i.workSessions);return r.processedDocuments=a.processed+o.processed+s.processed,r.skippedDocuments=a.skipped+o.skipped+s.skipped,r.collections.tasks=a.processed,r.collections.projects=o.processed,r.collections.workSessions=s.processed,r.errors=[...a.errors,...o.errors,...s.errors],await this.updateSyncTrackers(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Incremental sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Incremental sync failed:",i),r}}static async getLastSyncTimes(e){try{const{data:t}=await Ot.from("sync_trackers").select("collection, last_sync_time").eq("user_id",e),r={tasks:null,projects:null,workSessions:null};return t&&t.forEach(i=>{r[i.collection]=i.last_sync_time?new Date(i.last_sync_time):null}),r}catch(t){return console.error("Failed to get sync times:",t),{tasks:null,projects:null,workSessions:null}}}static async syncTasksIncremental(e,t){var i,a,o,s;const r={processed:0,skipped:0,errors:[]};try{let l=zt(qt(Qe,"tasks"),gt("userId","==",e));t&&(l=zt(qt(Qe,"tasks"),gt("userId","==",e),gt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const c=await kn(l);if(console.log(`📝 Found ${c.size} tasks to process (last sync: ${(t==null?void 0:t.toISOString())||"never"})`),c.size===0)return console.log("✅ No tasks need syncing"),r;const u=await this.getProjectsMap(e),d=await this.getSessionsMap(e);for(const h of c.docs){const f=h.data();try{const m=await this.getExistingDocument(e,"task_aggregate",h.id);if(m&&this.isDocumentCurrent(m,(i=f.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping task ${h.id}: already current`);continue}const v={id:h.id,title:f.title||f.text||"Untitled Task",description:f.description||f.notes||"",projectId:f.projectId,completed:f.completed||!1,status:f.status,timeSpent:f.timeSpent||0,timeEstimated:f.timeEstimated,userId:f.userId,createdAt:((a=f.createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((o=f.updatedAt)==null?void 0:o.toDate())||new Date,order:f.order||0},y=u[v.projectId],w=d[v.id]||[],S=Ll.generateTaskAggregateText(v,w,y);await this.storeDocumentWithEmbedding(e,"task_aggregate",h.id,S,{...v,projectName:y==null?void 0:y.name,sessionCount:w.length,lastUpdated:(s=v.updatedAt)==null?void 0:s.toISOString()}),r.processed++}catch(m){r.errors.push(`Task ${h.id}: ${m instanceof Error?m.message:"Unknown error"}`)}}return r}catch(l){return r.errors.push(`Tasks sync failed: ${l instanceof Error?l.message:"Unknown error"}`),r}}static async syncProjectsIncremental(e,t){var i,a,o;const r={processed:0,skipped:0,errors:[]};try{let s=zt(qt(Qe,"projects"),gt("userId","==",e));t&&(s=zt(qt(Qe,"projects"),gt("userId","==",e),gt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const l=await kn(s);if(console.log(`📁 Found ${l.size} projects to process`),l.size===0)return console.log("✅ No projects need syncing"),r;const c=await this.getTasksByProjectMap(e),u=await this.getSessionsMap(e);for(const d of l.docs){const h=d.data();try{const f=await this.getExistingDocument(e,"project_summary",d.id);if(f&&this.isDocumentCurrent(f,(i=h.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping project ${d.id}: already current`);continue}const m={id:d.id,name:h.name||"Untitled Project",color:h.color,description:h.description,userId:h.userId},v=c[m.id]||[],y=v.flatMap(S=>u[S.id]||[]),w=Ll.generateProjectSummaryText(m,v,y);await this.storeDocumentWithEmbedding(e,"project_summary",d.id,w,{...m,taskCount:v.length,sessionCount:y.length,lastUpdated:(o=(a=h.updatedAt)==null?void 0:a.toDate())==null?void 0:o.toISOString()}),r.processed++}catch(f){r.errors.push(`Project ${d.id}: ${f instanceof Error?f.message:"Unknown error"}`)}}return r}catch(s){return r.errors.push(`Projects sync failed: ${s instanceof Error?s.message:"Unknown error"}`),r}}static async syncSessionsIncremental(e,t){var i,a,o,s,l,c,u;const r={processed:0,skipped:0,errors:[]};try{let d=zt(qt(Qe,"workSessions"),gt("userId","==",e));t&&(d=zt(qt(Qe,"workSessions"),gt("userId","==",e),gt("updatedAt",">",Kr.fromDate(t)),ta("updatedAt","desc")));const h=await kn(d);if(console.log(`⏱️ Found ${h.size} sessions to process`),h.size===0)return console.log("✅ No sessions need syncing"),r;const f=await this.getTasksMap(e),m=await this.getProjectsMap(e);for(const v of h.docs){const y=v.data();try{const w=await this.getExistingDocument(e,"task_sessions",v.id);if(w&&this.isDocumentCurrent(w,(i=y.updatedAt)==null?void 0:i.toDate())){r.skipped++,console.log(`⏭️ Skipping session ${v.id}: already current`);continue}const S={id:v.id,taskId:y.taskId,projectId:y.projectId,duration:y.duration||0,sessionType:y.sessionType,startTime:(a=y.startTime)==null?void 0:a.toDate(),endTime:(o=y.endTime)==null?void 0:o.toDate(),notes:y.notes,status:y.status,userId:y.userId,date:y.date||new Date().toISOString().split("T")[0],createdAt:((s=y.createdAt)==null?void 0:s.toDate())||new Date,updatedAt:((l=y.updatedAt)==null?void 0:l.toDate())||new Date},T=f[S.taskId],C=m[S.projectId];if(T&&C){const k=Ll.generateSessionText(S,T,C);await this.storeDocumentWithEmbedding(e,"task_sessions",v.id,k,{...S,taskName:T.title,projectName:C.name,lastUpdated:(u=(c=y.updatedAt)==null?void 0:c.toDate())==null?void 0:u.toISOString()}),r.processed++}else r.skipped++}catch(w){r.errors.push(`Session ${v.id}: ${w instanceof Error?w.message:"Unknown error"}`)}}return r}catch(d){return r.errors.push(`Sessions sync failed: ${d instanceof Error?d.message:"Unknown error"}`),r}}static isDocumentCurrent(e,t){var r;if(!t||!((r=e==null?void 0:e.metadata)!=null&&r.lastUpdated))return!1;try{const i=new Date(e.metadata.lastUpdated),a=new Date(t);return i>=a}catch(i){return console.warn("Error comparing document timestamps:",i),!1}}static async getExistingDocument(e,t,r){try{const i=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,{data:a,error:o}=await Ot.from("user_productivity_documents").select("id, metadata, content").eq("user_id",e).eq("content_type",i).eq("metadata->>documentId",r).single();return o?null:a}catch{return null}}static async storeDocumentWithEmbedding(e,t,r,i,a){const o=t==="task"?"task_aggregate":t==="project"?"project_summary":t==="session"?"task_sessions":t,s=await kr.generateEmbedding({content:i,contentType:o}),{data:l}=await Ot.from("user_productivity_documents").select("id").eq("user_id",e).eq("content_type",o).eq("metadata->>documentId",r).single(),c={user_id:e,content_type:o,content:i,embedding:s,metadata:{documentId:r,...a,syncedAt:new Date().toISOString(),lastUpdated:a.lastUpdated||new Date().toISOString(),isIncremental:!0}};let u;if(l?u=(await Ot.from("user_productivity_documents").update(c).eq("id",l.id)).error:u=(await Ot.from("user_productivity_documents").insert(c)).error,u)throw u}static async updateSyncTrackers(e){const t=new Date,r=["tasks","projects","workSessions"];for(const i of r)await Ot.from("sync_trackers").upsert({user_id:e,collection:i,last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}static async getProjectsMap(e){const t=await kn(zt(qt(Qe,"projects"),gt("userId","==",e))),r={};return t.forEach(i=>{const a=i.data();r[i.id]={id:i.id,name:a.name||"Untitled Project",color:a.color,description:a.description,userId:a.userId}}),r}static async getTasksMap(e){const t=await kn(zt(qt(Qe,"tasks"),gt("userId","==",e))),r={};return t.forEach(i=>{var o,s;const a=i.data();r[i.id]={id:i.id,title:a.title||a.text||"Untitled Task",description:a.description||a.notes||"",projectId:a.projectId,completed:a.completed||!1,status:a.status,timeSpent:a.timeSpent||0,timeEstimated:a.timeEstimated,userId:a.userId,createdAt:((o=a.createdAt)==null?void 0:o.toDate())||new Date,updatedAt:((s=a.updatedAt)==null?void 0:s.toDate())||new Date,order:a.order||0}}),r}static async getTasksByProjectMap(e){const t=await this.getTasksMap(e),r={};return Object.values(t).forEach(i=>{r[i.projectId]||(r[i.projectId]=[]),r[i.projectId].push(i)}),r}static async getSessionsMap(e){const t=await kn(zt(qt(Qe,"workSessions"),gt("userId","==",e))),r={};return t.forEach(i=>{var s,l,c,u;const a=i.data(),o={id:i.id,taskId:a.taskId,projectId:a.projectId,duration:a.duration||0,sessionType:a.sessionType,startTime:(s=a.startTime)==null?void 0:s.toDate(),endTime:(l=a.endTime)==null?void 0:l.toDate(),notes:a.notes,status:a.status,userId:a.userId,date:a.date||new Date().toISOString().split("T")[0],createdAt:((c=a.createdAt)==null?void 0:c.toDate())||new Date,updatedAt:((u=a.updatedAt)==null?void 0:u.toDate())||new Date};r[o.taskId]||(r[o.taskId]=[]),r[o.taskId].push(o)}),r}static async isIncrementalSyncNeeded(e){try{const t=await this.getLastSyncTimes(e),r=Object.values(t).filter(a=>a!==null).reduce((a,o)=>!a||o&&o<a?o:a,null);if(!r)return{needed:!0,lastSyncTime:null,pendingChanges:-1};let i=0;for(const[a,o]of Object.entries(t))if(o){const s=zt(qt(Qe,a),gt("userId","==",e),gt("updatedAt",">",Kr.fromDate(o))),l=await kn(s);i+=l.size}return{needed:i>0,lastSyncTime:r,pendingChanges:i}}catch(t){return console.error("Failed to check sync status:",t),{needed:!0,lastSyncTime:null,pendingChanges:-1}}}static async executeProjectSync(e){const t=Date.now();console.log(`📁 Starting project sync for user: ${e}`);const r={success:!0,processedDocuments:0,skippedDocuments:0,errors:[],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}};try{const i=await this.getLastSyncTimes(e),a=await this.syncProjectsIncremental(e,i.projects);return r.processedDocuments=a.processed,r.skippedDocuments=a.skipped,r.collections.projects=a.processed,r.errors=a.errors,await this.updateProjectSyncTracker(e),r.executionTime=Date.now()-t,r.success=r.errors.length===0,console.log(`✅ Project sync complete: ${r.processedDocuments} processed, ${r.skippedDocuments} skipped in ${r.executionTime}ms`),r}catch(i){return r.errors.push(i instanceof Error?i.message:"Unknown error"),r.success=!1,r.executionTime=Date.now()-t,console.error("❌ Project sync failed:",i),r}}static async updateProjectSyncTracker(e){const t=new Date;await Ot.from("sync_trackers").upsert({user_id:e,collection:"projects",last_sync_time:t.toISOString(),updated_at:t.toISOString()},{onConflict:"user_id,collection"})}}class pDt{static async initializeDatabase(){const e=Date.now(),t=[],r=[];try{console.log("🔧 Starting Supabase database setup..."),await this.enableExtensions(t,r),await this.createCoreTables(t,r),await this.applyHNSWOptimizations(t,r),await this.createAdvancedFunctions(t,r),await this.setupRLSPolicies(t,r),await this.createMaterializedViews(t,r);const i=Date.now()-e;return console.log(`✅ Database setup completed in ${i}ms`),{success:r.length===0,steps:t,errors:r,executionTime:i}}catch(i){const a=i instanceof Error?i.message:"Unknown error";return r.push(`Critical setup failure: ${a}`),console.error("❌ Database setup failed:",a),{success:!1,steps:t,errors:r,executionTime:Date.now()-e}}}static async enableExtensions(e,t){try{const{error:r}=await Ot.rpc("exec_sql",{sql:"CREATE EXTENSION IF NOT EXISTS vector;"});r?t.push(`Failed to enable vector extension: ${r.message}`):e.push("✅ Enabled pgvector extension");const i=["pg_stat_statements","pg_trgm","btree_gin"];for(const a of i)try{const{error:o}=await Ot.rpc("exec_sql",{sql:`CREATE EXTENSION IF NOT EXISTS ${a};`});o||e.push(`✅ Enabled ${a} extension`)}catch{console.warn(`⚠️ Could not enable ${a} extension (non-critical)`)}}catch(r){t.push(`Extension setup failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async createCoreTables(e,t){const r=[{name:"embeddings",sql:`
          CREATE TABLE IF NOT EXISTS embeddings (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL CHECK (content_type IN ('task_aggregate', 'project_summary', 'session', 'site_usage', 'deep_focus', 'user_insight')),
            content_id text NOT NULL,
            content text NOT NULL,
            embedding vector(1536) NOT NULL,
            metadata jsonb NOT NULL DEFAULT '{}',
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now(),
            UNIQUE(user_id, content_type, content_id)
          );
        `},{name:"conversations",sql:`
          CREATE TABLE IF NOT EXISTS conversations (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            title text NOT NULL,
            is_active boolean DEFAULT true,
            created_at timestamptz DEFAULT now(),
            updated_at timestamptz DEFAULT now()
          );
        `},{name:"chat_messages",sql:`
          CREATE TABLE IF NOT EXISTS chat_messages (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            conversation_id uuid NOT NULL REFERENCES conversations(id) ON DELETE CASCADE,
            user_id text NOT NULL,
            role text NOT NULL CHECK (role IN ('user', 'assistant')),
            content text NOT NULL,
            sources jsonb,
            metadata jsonb,
            created_at timestamptz DEFAULT now()
          );
        `},{name:"embedding_jobs",sql:`
          CREATE TABLE IF NOT EXISTS embedding_jobs (
            id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
            user_id text NOT NULL,
            content_type text NOT NULL,
            content_ids text[] NOT NULL,
            status text NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),
            progress integer DEFAULT 0 CHECK (progress >= 0 AND progress <= 100),
            error text,
            created_at timestamptz DEFAULT now(),
            completed_at timestamptz
          );
        `}];for(const i of r)try{const{error:a}=await Ot.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name} table: ${a.message}`):e.push(`✅ Created ${i.name} table`)}catch(a){t.push(`Table creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async applyHNSWOptimizations(e,t){const r=[{name:"Drop old IVFFlat index",sql:"DROP INDEX IF EXISTS embeddings_embedding_idx;"},{name:"Create HNSW index for embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_embedding_hnsw_idx 
          ON embeddings USING hnsw (embedding vector_cosine_ops) 
          WITH (m = 16, ef_construction = 200);
        `},{name:"Create partial index for active content",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_active_idx 
          ON embeddings (user_id, content_type, created_at DESC) 
          WHERE metadata->>'status' != 'archived';
        `},{name:"Create partial index for recent embeddings",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_recent_idx 
          ON embeddings (user_id, created_at DESC) 
          WHERE created_at > (now() - interval '30 days');
        `},{name:"Create GIN index for metadata queries",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_metadata_gin_idx 
          ON embeddings USING gin (metadata);
        `},{name:"Create composite index for user content lookups",sql:`
          CREATE INDEX IF NOT EXISTS embeddings_user_content_composite_idx 
          ON embeddings (user_id, content_type, content_id);
        `}];for(const i of r)try{const{error:a}=await Ot.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`Optimization error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createAdvancedFunctions(e,t){const r=[{name:"Enhanced match documents function",sql:`
          CREATE OR REPLACE FUNCTION enhanced_match_documents(
            query_embedding vector(1536),
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            filter_user_id text DEFAULT NULL,
            filter_content_type text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            similarity float
          )
          LANGUAGE plpgsql
          AS $$
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              1 - (e.embedding <=> query_embedding) AS similarity
            FROM embeddings e
            WHERE 
              (filter_user_id IS NULL OR e.user_id = filter_user_id)
              AND (filter_content_type IS NULL OR e.content_type = filter_content_type)
              AND 1 - (e.embedding <=> query_embedding) > match_threshold
            ORDER BY e.embedding <=> query_embedding
            LIMIT match_count;
          END;
          $$;
        `},{name:"Hybrid search function",sql:`
          CREATE OR REPLACE FUNCTION hybrid_search_documents(
            query_embedding vector(1536),
            search_text text DEFAULT NULL,
            match_threshold float DEFAULT 0.78,
            match_count int DEFAULT 10,
            user_id_filter text DEFAULT NULL
          )
          RETURNS TABLE (
            id uuid,
            content text,
            metadata jsonb,
            vector_similarity float,
            text_rank float,
            hybrid_score float
          )
          LANGUAGE plpgsql
          AS $$
          DECLARE
            vector_weight float := 0.7;
            text_weight float := 0.3;
          BEGIN
            RETURN QUERY
            SELECT
              e.id,
              e.content,
              e.metadata,
              (1 - (e.embedding <=> query_embedding)) AS vector_similarity,
              CASE 
                WHEN search_text IS NOT NULL THEN 
                  ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                ELSE 0.0
              END AS text_rank,
              (vector_weight * (1 - (e.embedding <=> query_embedding)) + 
               text_weight * CASE 
                 WHEN search_text IS NOT NULL THEN 
                   ts_rank_cd(to_tsvector('english', e.content), plainto_tsquery('english', search_text))
                 ELSE 0.0
               END) AS hybrid_score
            FROM embeddings e
            WHERE 
              (user_id_filter IS NULL OR e.user_id = user_id_filter)
              AND (1 - (e.embedding <=> query_embedding)) > match_threshold
              AND (search_text IS NULL OR to_tsvector('english', e.content) @@ plainto_tsquery('english', search_text))
            ORDER BY hybrid_score DESC
            LIMIT match_count;
          END;
          $$;
        `},{name:"Update timestamp trigger function",sql:`
          CREATE OR REPLACE FUNCTION update_updated_at_column()
          RETURNS TRIGGER AS $$
          BEGIN
            NEW.updated_at = now();
            RETURN NEW;
          END;
          $$ language 'plpgsql';
        `}];for(const i of r)try{const{error:a}=await Ot.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`Function creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async setupRLSPolicies(e,t){const r=[{name:"Enable RLS on embeddings",sql:"ALTER TABLE embeddings ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on conversations",sql:"ALTER TABLE conversations ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on chat_messages",sql:"ALTER TABLE chat_messages ENABLE ROW LEVEL SECURITY;"},{name:"Enable RLS on embedding_jobs",sql:"ALTER TABLE embedding_jobs ENABLE ROW LEVEL SECURITY;"},{name:"Embeddings RLS policy",sql:`
          CREATE POLICY "Users can only access their own embeddings" ON embeddings
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Conversations RLS policy",sql:`
          CREATE POLICY "Users can only access their own conversations" ON conversations
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Chat messages RLS policy",sql:`
          CREATE POLICY "Users can only access their own chat messages" ON chat_messages
          FOR ALL USING (user_id = auth.uid()::text);
        `},{name:"Embedding jobs RLS policy",sql:`
          CREATE POLICY "Users can only access their own embedding jobs" ON embedding_jobs
          FOR ALL USING (user_id = auth.uid()::text);
        `}];for(const i of r)try{const{error:a}=await Ot.rpc("exec_sql",{sql:i.sql});a&&!a.message.includes("already exists")?t.push(`Failed to apply ${i.name}: ${a.message}`):e.push(`✅ Applied ${i.name}`)}catch(a){t.push(`RLS policy error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async createMaterializedViews(e,t){const r=[{name:"User embedding statistics view",sql:`
          CREATE MATERIALIZED VIEW IF NOT EXISTS user_embedding_stats AS
          SELECT 
            user_id,
            content_type,
            COUNT(*) as total_embeddings,
            AVG(length(content)) as avg_content_length,
            MAX(created_at) as last_embedding_created,
            COUNT(CASE WHEN created_at > now() - interval '7 days' THEN 1 END) as recent_embeddings
          FROM embeddings
          GROUP BY user_id, content_type;
        `},{name:"Create unique index on user embedding stats",sql:`
          CREATE UNIQUE INDEX IF NOT EXISTS user_embedding_stats_unique_idx 
          ON user_embedding_stats (user_id, content_type);
        `}];for(const i of r)try{const{error:a}=await Ot.rpc("exec_sql",{sql:i.sql});a?t.push(`Failed to create ${i.name}: ${a.message}`):e.push(`✅ Created ${i.name}`)}catch(a){t.push(`View creation error for ${i.name}: ${a instanceof Error?a.message:"Unknown error"}`)}}static async checkDatabaseHealth(){const e=[],t=[];try{const r=["embeddings","conversations","chat_messages","embedding_jobs"];for(const i of r)try{const{error:a}=await Ot.from(i).select("id").limit(1);a&&a.code==="42P01"&&e.push(`Table: ${i}`)}catch{e.push(`Table: ${i}`)}try{const{error:i}=await Ot.rpc("exec_sql",{sql:"SELECT 1 FROM pg_extension WHERE extname = 'vector';"});i&&e.push("Extension: pgvector")}catch{e.push("Extension: pgvector")}return e.length>0&&t.push("Run DatabaseSetup.initializeDatabase() to fix missing components"),e.some(i=>i.includes("embeddings"))&&t.push("Critical: Embeddings table missing - RAG functionality will not work"),{isHealthy:e.length===0,missingComponents:e,recommendations:t}}catch{return{isHealthy:!1,missingComponents:["Database connection failed"],recommendations:["Check Supabase connection and credentials"]}}}static async applyMigrationIfNeeded(){console.log("🔍 Checking database health...");const e=await this.checkDatabaseHealth();return e.isHealthy?(console.log("✅ Database is healthy, no migration needed"),{success:!0,steps:["Database already healthy"],errors:[],executionTime:0}):(console.log("⚠️ Database needs setup. Missing components:",e.missingComponents),await this.initializeDatabase())}static async createTables(){try{console.log("🔧 Setting up database tables...");const{error:e}=await Ot.rpc("create_user_productivity_documents_table");if(e&&!e.message.includes("already exists"))throw e;const{error:t}=await Ot.rpc("create_sync_trackers_table");t&&!t.message.includes("already exists")&&(console.log("Creating sync_trackers table manually..."),await this.createSyncTrackersTable());const{error:r}=await Ot.rpc("create_match_documents_function");if(r&&!r.message.includes("already exists"))throw r;console.log("✅ Database setup complete")}catch(e){throw console.error("❌ Database setup failed:",e),e}}static async createSyncTrackersTable(){const e=`
      CREATE TABLE IF NOT EXISTS sync_trackers (
        id SERIAL PRIMARY KEY,
        user_id TEXT NOT NULL,
        collection TEXT NOT NULL,
        last_sync_time TIMESTAMPTZ,
        updated_at TIMESTAMPTZ DEFAULT NOW(),
        UNIQUE(user_id, collection)
      );
      
      -- Enable RLS
      ALTER TABLE sync_trackers ENABLE ROW LEVEL SECURITY;
      
      -- Create policy for users to only access their own sync trackers
      CREATE POLICY "Users can only access their own sync trackers" ON sync_trackers
        FOR ALL USING (auth.uid()::text = user_id);
      
      -- Create index for efficient queries
      CREATE INDEX IF NOT EXISTS idx_sync_trackers_user_collection 
        ON sync_trackers(user_id, collection);
    `,{error:t}=await Ot.rpc("exec_sql",{sql:e});if(t)throw console.error("Failed to create sync_trackers table:",t),t;console.log("✅ sync_trackers table created successfully")}}class xC{static analyzeQuery(e,t){const r=this.detectComplexity(e),i=this.detectDomain(e),a=this.detectTimeScope(e),o=this.CONFIG_PROFILES[r];return{complexity:r,domain:i,timeScope:a,expectedSourceCount:o.optimalSources,maxTokenBudget:o.tokenBudget,confidence:this.calculateConfidence(e,r,i)}}static getOptimalConfig(e,t){const i={...this.CONFIG_PROFILES[e.complexity]};return e.confidence<.7&&(i.optimalSources=Math.min(i.maxSources,Math.ceil(i.optimalSources*1.3))),t!=null&&t.prioritizeCost&&(i.costWeight+=.2,i.performanceWeight-=.2,i.optimalSources=Math.max(i.minSources,Math.floor(i.optimalSources*.8))),i}static detectComplexity(e){const t=e.toLowerCase();for(const a of this.COMPLEXITY_PATTERNS.analytical)if(a.test(t))return"analytical";for(const a of this.COMPLEXITY_PATTERNS.complex)if(a.test(t))return"complex";for(const a of this.COMPLEXITY_PATTERNS.moderate)if(a.test(t))return"moderate";for(const a of this.COMPLEXITY_PATTERNS.simple)if(a.test(t))return"simple";const r=e.split(/\s+/).length,i=/\b(what|how|why|when|where|which|who)\b/i.test(e);return r>15||!i&&r>10?"complex":r>8||!i?"moderate":"simple"}static detectDomain(e){const t=e.toLowerCase();for(const[r,i]of Object.entries(this.DOMAIN_PATTERNS))if(i.test(t))return r;return"general"}static detectTimeScope(e){const t=e.toLowerCase();return/\b(today|now|current|recent|latest|this\s+week)\b/i.test(t)?"recent":/\b(yesterday|last\s+\w+|ago|previous|past)\b/i.test(t)?"historical":/\b(\d{4}|january|february|march|april|may|june|july|august|september|october|november|december)\b/i.test(t)?"specific":"broad"}static calculateConfidence(e,t,r){let i=.5;/\b(what|how|why|when|where|which|who)\b/i.test(e)&&(i+=.2),r!=="general"&&(i+=.15);const o=e.split(/\s+/).length;return(t==="simple"&&o<=8||t==="moderate"&&o<=12||t==="complex"&&o<=20)&&(i+=.15),Math.min(1,i)}}$t(xC,"CONFIG_PROFILES",{simple:{minSources:2,maxSources:5,optimalSources:3,tokenBudget:2e3,costWeight:.7,performanceWeight:.3},moderate:{minSources:3,maxSources:8,optimalSources:5,tokenBudget:4e3,costWeight:.5,performanceWeight:.5},complex:{minSources:5,maxSources:12,optimalSources:8,tokenBudget:6e3,costWeight:.3,performanceWeight:.7},analytical:{minSources:8,maxSources:15,optimalSources:10,tokenBudget:8e3,costWeight:.2,performanceWeight:.8}}),$t(xC,"COMPLEXITY_PATTERNS",{simple:[/^(what|when|where|who|which)\s+is\s+/i,/^(show|list|get)\s+/i,/^(how\s+many|how\s+much)\s+/i],moderate:[/^(how\s+do\s+i|help\s+me)\s+/i,/\b(compare|contrast|difference|similar)\b/i,/\b(recent|latest|last\s+\w+)\b/i],complex:[/\b(analyze|analysis|pattern|trend|insight)\b/i,/\b(why|because|reason|cause|effect)\b/i,/\b(best|optimal|improve|optimize|recommend)\b/i],analytical:[/\b(comprehensive|detailed|in-depth|thorough)\b/i,/\b(correlation|relationship|impact|influence)\b/i,/\b(strategy|plan|approach|methodology)\b/i]}),$t(xC,"DOMAIN_PATTERNS",{task:/\b(task|todo|assignment|activity|action)\b/i,project:/\b(project|milestone|deliverable|goal)\b/i,productivity:/\b(productive|focus|distraction|efficiency|performance)\b/i,time:/\b(time|hour|minute|day|week|month|schedule|calendar)\b/i});class bDe{static async selectOptimalSources(e,t,r,i={}){const a=xC.analyzeQuery(e,t),o=xC.getOptimalConfig(a,i);console.log("🎯 Query Analysis:",{complexity:a.complexity,domain:a.domain,expectedSources:a.expectedSourceCount,confidence:a.confidence});const s=await this.scoreSourcesByRelevance(e,r,a),l=this.selectSourcesByStrategy(s,o,a,i),c=this.estimateTokenUsage(e,l),u=this.calculateCost(c,"gpt-4o-mini");return{selectedSources:l,totalAvailableSources:r.length,selectionStrategy:this.getSelectionStrategy(a,o,i),estimatedTokens:c,estimatedCost:u,confidence:a.confidence}}static async scoreSourcesByRelevance(e,t,r){const i=e.toLowerCase().split(/\s+/).filter(a=>a.length>2);return t.map(a=>{let o=0,s=0;const l=(a.content||"").toLowerCase(),c=a.metadata||{},u=i.filter(d=>l.includes(d));if(o+=u.length/i.length*.4,r.domain!=="general"){const d=this.getDomainKeywords(r.domain),h=d.filter(f=>l.includes(f));o+=h.length/d.length*.3}if(r.timeScope==="recent"){const d=a.created_at?(Date.now()-new Date(a.created_at).getTime())/864e5:999;o+=Math.max(0,(30-d)/30)*.2}if(a.content_type){const d=this.getContentTypeRelevance(a.content_type,r.domain);o+=d*.1}return s+=Math.min(1,l.length/500)*.4,s+=(c.importance||.5)*.3,s+=a.embeddings?.3:0,{...a,relevanceScore:Math.min(1,o),qualityScore:Math.min(1,s)}}).sort((a,o)=>{const s=a.relevanceScore*.7+a.qualityScore*.3;return o.relevanceScore*.7+o.qualityScore*.3-s})}static selectSourcesByStrategy(e,t,r,i){const a=i.minQualityThreshold||.3,o=e.filter(l=>l.qualityScore>=a);let s=t.optimalSources;return o.length<s&&(s=Math.max(t.minSources,o.length)),i.prioritizeCost&&o.length>t.minSources&&(s=Math.max(t.minSources,Math.ceil(s*.7))),i.maxTokenBudget&&(s=this.adjustForTokenBudget(o,s,i.maxTokenBudget)),this.selectDiverseSources(o,s)}static selectDiverseSources(e,t){if(e.length<=t)return e;const r=[],i=[...e];for(r.push(i.shift());r.length<t&&i.length>0;){let a=i[0],o=0;for(const s of i){const l=this.calculateDiversityScore(s,r),c=s.relevanceScore*.6+l*.4;c>o&&(o=c,a=s)}r.push(a),i.splice(i.indexOf(a),1)}return r}static calculateDiversityScore(e,t){if(t.length===0)return 1;const r=(e.content||"").toLowerCase();let i=1;for(const a of t){const o=(a.content||"").toLowerCase(),s=this.calculateContentSimilarity(r,o);i=Math.min(i,1-s)}return i}static calculateContentSimilarity(e,t){const r=new Set(e.split(/\s+/)),i=new Set(t.split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return a.size/o.size}static adjustForTokenBudget(e,t,r){let i=0,a=0;for(let o=0;o<Math.min(t,e.length);o++){const s=this.estimateSourceTokens(e[o]);if(i+s<=r)i+=s,a++;else break}return Math.max(1,a)}static estimateSourceTokens(e){const t=e.content||"";return Math.ceil(t.length/4)}static estimateTokenUsage(e,t){const r=Math.ceil(e.length/4),i=t.reduce((o,s)=>o+this.estimateSourceTokens(s),0);return r+i+150}static calculateCost(e,t){const r=this.TOKEN_COSTS[t]||this.TOKEN_COSTS["gpt-4o-mini"];return e*r.input}static getDomainKeywords(e){return{task:["task","todo","assignment","activity","action","complete","finish"],project:["project","milestone","deliverable","goal","objective","phase"],productivity:["productive","focus","distraction","efficiency","performance","work"],time:["time","hour","minute","day","week","month","schedule","calendar"]}[e]||[]}static getContentTypeRelevance(e,t){const i={task:{task:1,project:.7,session:.5,document:.3},project:{project:1,task:.8,session:.6,document:.4},productivity:{session:1,task:.8,project:.6,document:.5},time:{session:1,task:.7,project:.5,document:.3}}[t];return(i==null?void 0:i[e])||.5}static getSelectionStrategy(e,t,r){const i=[];return i.push(`${e.complexity}-complexity`),r.prioritizeCost&&i.push("cost-optimized"),r.maxTokenBudget&&i.push("token-constrained"),e.confidence<.7&&i.push("uncertainty-boosted"),i.join(", ")}}$t(bDe,"TOKEN_COSTS",{"gpt-4o":{input:5e-6,output:15e-6},"gpt-4o-mini":{input:15e-8,output:6e-7},"gpt-4":{input:3e-5,output:6e-5}});class gDt{static async queryWithRAG(e,t,r){try{const i=Date.now();let a=[];try{const f=await kr.generateEmbedding({content:e,contentType:"query"}),{data:m,error:v}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).not("embedding","is",null).limit(12);v?console.warn("Vector search error:",v):(a=m||[],console.log(`✅ Found ${a.length} documents with embeddings`))}catch(f){console.warn("Embedding generation failed, falling back to simple retrieval:",f)}if(a.length===0){console.log("No vector results, using fallback document retrieval");const{data:f,error:m}=await Ot.from("user_productivity_documents").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(10);m?console.error("Fallback document retrieval error:",m):(a=f||[],console.log(`📚 Fallback found ${a.length} documents`))}let o=a;if(a&&a.length>0){const f=await bDe.selectOptimalSources(e,t,a,{prioritizeCost:!0,minQualityThreshold:.25,maxTokenBudget:4e3});o=f.selectedSources,console.log(`📊 Simple RAG selection: ${o.length}/${a.length} sources, estimated cost: $${f.estimatedCost.toFixed(5)}`)}const s=(o==null?void 0:o.map((f,m)=>`[${m+1}] ${f.content}`).join(`

`))||"No relevant documents found.";console.log("Generating chat response with context:",{query:e,contextLength:s.length,documentCount:o.length});const l=await kr.generateChatResponse({query:e,context:s,conversationHistory:r}),c=this.cleanResponse(l);console.log("Chat response generated successfully:",c.substring(0,100)+"...");const d=Date.now()-i,h=(o==null?void 0:o.map((f,m)=>{var v,y;return{id:`source_${m+1}`,type:f.content_type||"document",contentId:((v=f.metadata)==null?void 0:v.documentId)||f.id,title:((y=f.metadata)==null?void 0:y.title)||`Document ${m+1}`,snippet:f.content.substring(0,200)+"...",relevanceScore:.8}}))||[];return{response:c,sources:h,metadata:{responseTime:d,relevanceScore:h.length>0?h[0].relevanceScore:0,tokens:kr.estimateTokens(c),model:"gpt-4o-mini",retrievedDocuments:(o==null?void 0:o.length)||0}}}catch(i){throw console.error("Simple RAG query error:",i),console.error("Error details:",{message:i instanceof Error?i.message:"Unknown error",stack:i instanceof Error?i.stack:void 0,userId:t,query:e.substring(0,50)+"..."}),new Error(`Failed to process RAG query: ${i instanceof Error?i.message:"Unknown error"}`)}}static cleanResponse(e){return e.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").trim()}static async addDocumentToVectorStore(e,t,r){try{const i=await kr.generateEmbedding({content:e,contentType:t.contentType||"document"}),{error:a}=await Ot.from("user_productivity_documents").insert({user_id:r,content_type:"text",content:e,metadata:t,embedding:i});if(a)throw a;console.log("✅ Document added to vector store:",{userId:r,contentLength:e.length})}catch(i){throw console.error("Error adding document to vector store:",i),new Error("Failed to add document to vector store")}}static async deleteUserDocuments(e){try{const{error:t}=await Ot.from("user_productivity_documents").delete().eq("user_id",e);if(t)throw t}catch(t){throw console.error("Error deleting user documents:",t),new Error("Failed to delete user documents")}}}class QG{static async initializeUserSync(e){try{console.log("Initializing data sync for user:",e),this.stopSync(),await Promise.all([this.syncTasks(e),this.syncSessions(e),this.syncProjects(e)]),console.log("Data sync initialized for user:",e)}catch(t){throw console.error("Failed to initialize data sync:",t),new Error("Failed to initialize data sync")}}static stopSync(){console.log(`🛑 Stopping ${this.syncListeners.length} active Firebase listeners`),this.syncListeners.forEach(e=>e()),this.syncListeners=[],console.log("✅ All Firebase listeners cleaned up")}static getActiveListenerCount(){return this.syncListeners.length}static isActive(){return this.syncListeners.length>0}static async syncTasks(e){const t=zt(qt(Qe,"tasks"),gt("userId","==",e),ta("updatedAt","desc")),r=cg(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatTaskForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncSessions(e){const t=zt(qt(Qe,"workSessions"),gt("userId","==",e),ta("updatedAt","desc")),r=cg(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatSessionForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static async syncProjects(e){const t=zt(qt(Qe,"projects"),gt("userId","==",e),ta("updatedAt","desc")),r=cg(t,async i=>{const a=[];i.docChanges().forEach(o=>{if(o.type==="added"||o.type==="modified"){const s=o.doc.data(),l=this.formatProjectForEmbedding(o.doc.id,s);l&&a.push(l)}}),a.length>0&&await this.processBatch(a)});this.syncListeners.push(r)}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null},userId:t.userId,updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",metadata:{documentId:e,name:t.name,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static async processBatch(e){try{await Promise.all(e.map(async t=>{try{await gDt.addDocumentToVectorStore(t.content,t.metadata,t.userId)}catch(r){console.error(`Failed to sync document ${t.id}:`,r)}})),console.log(`Synced ${e.length} documents to vector store`)}catch(t){console.error("Batch processing failed:",t)}}static async performInitialSync(e){try{console.log("🔄 Starting initial sync for user:",e);const t=[];console.log("📝 Syncing existing tasks...");const r=zt(qt(Qe,"tasks"),gt("userId","==",e)),i=await kn(r);i.docs.forEach(u=>{const d=u.data(),h=this.formatTaskForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📝 Found ${i.size} tasks to sync`),console.log("⏱️ Syncing existing work sessions...");const a=zt(qt(Qe,"workSessions"),gt("userId","==",e)),o=await kn(a),s=o.docs.slice(0,50).forEach(u=>{const d=u.data(),h=this.formatSessionForEmbedding(u.id,d);h&&t.push(h)});console.log(`⏱️ Found ${Math.min(o.size,50)} work sessions to sync`),console.log("📁 Syncing existing projects...");const l=zt(qt(Qe,"projects"),gt("userId","==",e)),c=await kn(l);c.docs.forEach(u=>{const d=u.data(),h=this.formatProjectForEmbedding(u.id,d);h&&t.push(h)}),console.log(`📁 Found ${c.size} projects to sync`),console.log(`🚀 Processing ${t.length} total documents...`),t.length>0?(await this.processBatch(t),console.log(`✅ Initial sync completed: ${t.length} documents processed`)):console.log("⚠️ No documents found to sync")}catch(t){throw console.error("❌ Initial sync failed:",t),t}}}$t(QG,"syncListeners",[]);class JG{static async initializeCompleteSync(e){const t=Date.now();console.log("🚀 Starting complete data synchronization for user:",e);try{await this.ensureSupabaseSchema();const r=await this.performBulkSync(e);await this.setupRealtimeSync(e),this.scheduleMaintenanceTasks(e),this.isInitialized=!0;const i=Date.now()-t;return console.log(`✅ Complete data sync initialized in ${i}ms`),{...r,executionTime:i}}catch(r){throw console.error("❌ Failed to initialize complete data sync:",r),new Error(`Complete sync initialization failed: ${r instanceof Error?r.message:"Unknown error"}`)}}static async performBulkSync(e){const t=[{name:"tasks",processor:this.processTasks},{name:"projects",processor:this.processProjects},{name:"workSessions",processor:this.processWorkSessions},{name:"dailySiteUsage",processor:this.processSiteUsage},{name:"deepFocusSessions",processor:this.processDeepFocusSessions}],r={};let i=0,a=0;for(const{name:o,processor:s}of t){console.log(`📋 Processing collection: ${o}`);try{const l=await s.call(this,e);r[o]=l,i+=l.processed,a+=l.errors.length,console.log(`✅ ${o}: ${l.processed} documents processed, ${l.errors.length} errors`)}catch(l){const c=l instanceof Error?l.message:"Unknown error";r[o]={collection:o,processed:0,total:0,status:"failed",errors:[c]},a++,console.error(`❌ Failed to process ${o}:`,c)}}return{success:a===0,totalProcessed:i,totalErrors:a,collectionResults:r,executionTime:0}}static async processTasks(e){const t={collection:"tasks",processed:0,total:0,status:"processing",errors:[]};try{const r=zt(qt(Qe,"tasks"),gt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatTaskForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processProjects(e){const t={collection:"projects",processed:0,total:0,status:"processing",errors:[]};try{const r=zt(qt(Qe,"projects"),gt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatProjectForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processWorkSessions(e){const t={collection:"workSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=zt(qt(Qe,"workSessions"),gt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSessionForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processSiteUsage(e){const t={collection:"dailySiteUsage",processed:0,total:0,status:"processing",errors:[]};try{const r=zt(qt(Qe,"dailySiteUsage"),gt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatSiteUsageForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static async processDeepFocusSessions(e){const t={collection:"deepFocusSessions",processed:0,total:0,status:"processing",errors:[]};try{const r=zt(qt(Qe,"deepFocusSessions"),gt("userId","==",e),ta("updatedAt","desc")),i=await kn(r);t.total=i.docs.length;const a=[];return i.forEach(o=>{const s=o.data(),l=this.formatDeepFocusForEmbedding(o.id,s);l&&a.push(l)}),a.length>0&&(await this.processBatchWithPipeline(a),t.processed=a.length),t.status="completed",t}catch(r){return t.status="failed",t.errors.push(r instanceof Error?r.message:"Unknown error"),t}}static formatTaskForEmbedding(e,t){var i,a,o,s,l;if(!t.title)return null;const r=[`Task: ${t.title}`,t.description?`Description: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.priority?`Priority: ${t.priority}`:"",t.status?`Status: ${t.status}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:"",t.timeSpent?`Time spent: ${Math.round(t.timeSpent/60)} minutes`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"task_aggregate",contentId:e,metadata:{documentId:e,title:t.title,category:t.category,priority:t.priority,status:t.status,tags:t.tags||[],timeSpent:t.timeSpent||0,projectId:t.projectId,completionStatus:t.status==="completed",createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatProjectForEmbedding(e,t){var i,a,o,s,l;if(!t.name)return null;const r=[`Project: ${t.name}`,t.description?`Description: ${t.description}`:"",t.status?`Status: ${t.status}`:"",t.priority?`Priority: ${t.priority}`:"",t.category?`Category: ${t.category}`:"",(i=t.tags)!=null&&i.length?`Tags: ${t.tags.join(", ")}`:""].filter(Boolean).join(`
`);return{id:e,content:r,contentType:"project_summary",contentId:e,metadata:{documentId:e,name:t.name,description:t.description,status:t.status,priority:t.priority,category:t.category,tags:t.tags||[],createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date},userId:t.userId,priority:t.priority==="high"?"high":t.priority==="medium"?"medium":"low",updatedAt:((l=(s=t.updatedAt)==null?void 0:s.toDate)==null?void 0:l.call(s))||new Date}}static formatSessionForEmbedding(e,t){var a,o,s,l,c,u;if(!t.startTime)return null;const r=t.endTime&&t.startTime?Math.round((t.endTime.toDate()-t.startTime.toDate())/6e4):0,i=["Work Session",t.projectName?`Project: ${t.projectName}`:"",t.taskName?`Task: ${t.taskName}`:"",`Duration: ${r} minutes`,t.description?`Notes: ${t.description}`:"",t.category?`Category: ${t.category}`:"",t.sessionType?`Type: ${t.sessionType}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"task_sessions",contentId:e,metadata:{documentId:e,projectName:t.projectName,taskName:t.taskName,duration:r,category:t.category,sessionType:t.sessionType,startTime:((o=(a=t.startTime)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date,endTime:((l=(s=t.endTime)==null?void 0:s.toDate)==null?void 0:l.call(s))||null,projectId:t.projectId,taskId:t.taskId},userId:t.userId,priority:r>60?"high":r>30?"medium":"low",updatedAt:((u=(c=t.updatedAt)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date}}static formatSiteUsageForEmbedding(e,t){var o,s,l,c;if(!t.date||!t.totalTime)return null;const r=Math.round(t.totalTime/(1e3*60*60)*10)/10,i=Object.entries(t.sites||{}).sort(([,u],[,d])=>d.timeSpent-u.timeSpent).slice(0,5).map(([u,d])=>`${u} (${Math.round(d.timeSpent/(1e3*60))} mins)`).join(", "),a=[`Daily Site Usage - ${t.date}`,`Total time: ${r} hours`,`Sites visited: ${t.sitesVisited}`,`Productivity score: ${t.productivityScore}%`,i?`Top sites: ${i}`:"",`Extension version: ${t.extensionVersion||"unknown"}`].filter(Boolean).join(`
`);return{id:e,content:a,contentType:"site_usage",contentId:e,metadata:{documentId:e,date:t.date,totalTime:t.totalTime,timeInHours:r,sitesVisited:t.sitesVisited,productivityScore:t.productivityScore,extensionVersion:t.extensionVersion,topSites:Object.keys(t.sites||{}).slice(0,10),syncedAt:((s=(o=t.syncedAt)==null?void 0:o.toDate)==null?void 0:s.call(o))||new Date},userId:t.userId,priority:t.productivityScore>=80?"high":t.productivityScore>=60?"medium":"low",updatedAt:((c=(l=t.updatedAt)==null?void 0:l.toDate)==null?void 0:c.call(l))||new Date}}static formatDeepFocusForEmbedding(e,t){var a,o;if(!t.sessionDate||!t.duration)return null;const r=Math.round(t.duration/60),i=[`Deep Focus Session - ${t.sessionDate}`,`Duration: ${r} minutes`,t.sessionType?`Type: ${t.sessionType}`:"",t.distractionCount!==void 0?`Distractions: ${t.distractionCount}`:"",t.focusScore!==void 0?`Focus score: ${t.focusScore}%`:"",t.notes?`Notes: ${t.notes}`:""].filter(Boolean).join(`
`);return{id:e,content:i,contentType:"deep_focus",contentId:e,metadata:{documentId:e,sessionDate:t.sessionDate,duration:t.duration,durationInMinutes:r,sessionType:t.sessionType,distractionCount:t.distractionCount,focusScore:t.focusScore,notes:t.notes},userId:t.userId,priority:t.focusScore>=80?"high":t.focusScore>=60?"medium":"low",updatedAt:((o=(a=t.updatedAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||new Date}}static async processBatchWithPipeline(e){if(e.length!==0)try{const t=e.map(r=>({id:r.contentId,title:r.content.split(`
`)[0],description:r.content,category:r.metadata.category||"general",priority:r.priority,status:r.metadata.status||"active",tags:r.metadata.tags||[],userId:r.userId,timeSpent:r.metadata.timeSpent||r.metadata.duration||0,projectId:r.metadata.projectId,createdAt:r.metadata.createdAt||new Date,updatedAt:r.updatedAt,contentType:r.contentType,originalMetadata:r.metadata}));for(const r of e)try{const i=await kr.generateEmbedding({content:r.content,contentType:r.contentType}),{error:a}=await Ot.from("user_productivity_documents").insert({user_id:r.userId,content_type:r.contentType,content:r.content,embedding:i,metadata:{documentId:r.id,sourceCollection:r.contentType,originalData:r.metadata,syncedAt:new Date().toISOString()}});if(a)throw a}catch(i){console.error(`Error processing document ${r.id}:`,i)}console.log(`✅ Processed ${e.length} documents of type ${e[0].contentType}`)}catch(t){throw console.error("❌ Failed to process batch with pipeline:",t),t}}static async ensureSupabaseSchema(){try{const{data:e,error:t}=await Ot.from("embeddings").select("id").limit(1);if(t&&t.code==="42P01")throw console.log("⚠️ Supabase schema not ready. Please run the schema setup first."),new Error("Supabase database schema not initialized. Please run the database migration.");if(t)throw t;console.log("✅ Supabase schema verified")}catch(e){throw console.error("❌ Schema verification failed:",e),e}}static async setupRealtimeSync(e){this.stopSync();const t=[{name:"tasks",formatter:this.formatTaskForEmbedding},{name:"projects",formatter:this.formatProjectForEmbedding},{name:"workSessions",formatter:this.formatSessionForEmbedding},{name:"dailySiteUsage",formatter:this.formatSiteUsageForEmbedding},{name:"deepFocusSessions",formatter:this.formatDeepFocusForEmbedding}];for(const{name:r,formatter:i}of t){const a=zt(qt(Qe,r),gt("userId","==",e),ta("updatedAt","desc")),o=cg(a,async s=>{const l=[];if(s.docChanges().forEach(c=>{if(c.type==="added"||c.type==="modified"){const u=c.doc.data(),d=i.call(this,c.doc.id,u);d&&l.push(d)}}),l.length>0)try{await this.processBatchWithPipeline(l),console.log(`🔄 Real-time sync: ${l.length} ${r} documents updated`)}catch(c){console.error(`❌ Real-time sync failed for ${r}:`,c)}});this.syncListeners.push(o)}console.log("👂 Real-time sync listeners established for all collections")}static scheduleMaintenanceTasks(e){const t=new Date;t.setDate(t.getDate()+1),t.setHours(3,0,0,0);const r=t.getTime()-Date.now();setTimeout(()=>{this.performMaintenanceCleanup(e),setInterval(()=>{this.performMaintenanceCleanup(e)},24*60*60*1e3)},r),console.log("⏰ Maintenance tasks scheduled")}static async performMaintenanceCleanup(e){try{console.log("🧹 Starting maintenance cleanup for user:",e);const{data:t}=await Ot.from("embeddings").select("id, content_id, created_at").eq("user_id",e).order("content_id").order("created_at",{ascending:!1});if(t&&t.length>0){const r=new Set,i=[];for(const a of t)r.has(a.content_id)?i.push(a.id):r.add(a.content_id);if(i.length>0){const{error:a}=await Ot.from("embeddings").delete().in("id",i);a||console.log(`🗑️ Cleaned up ${i.length} duplicate embeddings`)}}console.log("✅ Maintenance cleanup completed")}catch(t){console.error("❌ Maintenance cleanup failed:",t)}}static stopSync(){this.syncListeners.forEach(e=>e()),this.syncListeners=[],this.isInitialized=!1,console.log("🛑 All sync listeners stopped")}static async getSyncStatus(e){try{const{data:t}=await Ot.from("embeddings").select("content_type, created_at").eq("user_id",e),r={},i={};return t&&t.forEach(a=>{r[a.content_type]=(r[a.content_type]||0)+1;const o=new Date(a.created_at);(!i[a.content_type]||o>i[a.content_type])&&(i[a.content_type]=o)}),{isInitialized:this.isInitialized,embeddingCounts:r,lastSyncTimes:i,totalEmbeddings:(t==null?void 0:t.length)||0}}catch(t){return console.error("❌ Failed to get sync status:",t),{isInitialized:!1,embeddingCounts:{},lastSyncTimes:{},totalEmbeddings:0}}}}$t(JG,"syncListeners",[]),$t(JG,"isInitialized",!1);class iL{static calculateBM25Scores(e,t){if(!t||t.length===0)return[];const r=this.tokenize(e);if(r.length===0)return t.map(l=>({docId:l.id,score:0,document:l}));const i=t.map(l=>({...l,tokens:this.tokenize(l.content),termFreqs:this.calculateTermFrequencies(this.tokenize(l.content))})),a=i.reduce((l,c)=>l+c.tokens.length,0)/i.length,o=this.calculateDocumentFrequencies(i,r);return i.map(l=>{let c=0;for(const u of r){const d=l.termFreqs[u]||0,h=o[u]||0;if(d>0&&h>0){const f=Math.log((t.length-h+.5)/(h+.5)),m=d*(this.K1+1),v=d+this.K1*(1-this.B+this.B*(l.tokens.length/a));c+=f*(m/v)}}return{docId:l.id,score:Math.max(0,c),document:l}}).sort((l,c)=>c.score-l.score)}static tokenize(e){return e?e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>=2).filter(t=>!this.isStopWord(t)):[]}static calculateTermFrequencies(e){const t={};for(const r of e)t[r]=(t[r]||0)+1;return t}static calculateDocumentFrequencies(e,t){const r={};for(const i of t){let a=0;for(const o of e)o.termFreqs[i]>0&&a++;r[i]=a}return r}static isStopWord(e){return new Set(["a","an","and","are","as","at","be","by","for","from","has","he","in","is","it","its","of","on","that","the","to","was","will","with","have","had","this","these","they","been","their","said","each","which","she","do","how","his","or","but","what","some","we","can","out","other","were","all","any","your","when","up","use","word","way","about","many","then","them","would","like","so","these","her","long","make","thing","see","him","two","more","go","no","way","could","my","than","first","water","been","call","who","oil","sit","now","find","down","day","did","get","come","made","may","part"]).has(e)}static calculateEnhancedBM25Scores(e,t,r={}){const{positionWeight:i=.1,proximityWeight:a=.1,titleBoost:o=1.5}=r,s=this.calculateBM25Scores(e,t),l=this.tokenize(e);return s.map(c=>{let u=c.score;const d=c.document,h=this.tokenize(d.content);for(const f of l){const m=h.indexOf(f);if(m!==-1){const v=i*(h.length-m)/h.length;u+=v}}if(l.length>1){const f=l.map(m=>h.indexOf(m)).filter(m=>m!==-1);if(f.length>1){const m=Math.max(...f)-Math.min(...f),v=a*Math.max(0,1-m/h.length);u+=v}}return d.content.length<100&&d.content.includes(":")&&(u*=o),{...c,score:u}})}}$t(iL,"K1",1.2),$t(iL,"B",.75);class Xfe{static fuseResults(e){const{vectorResults:t,keywordResults:r,k:i=60,vectorWeight:a=1,keywordWeight:o=1}=e;console.log(`🔀 RRF: Fusing ${t.length} vector results + ${r.length} keyword results`);const s=new Map,l=new Map,c=new Map;t.forEach((h,f)=>{const m=this.extractDocumentId(h);s.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)}),r.forEach((h,f)=>{const m=this.extractDocumentId(h);l.set(m,{rank:f+1,score:h.score,document:h.document}),c.set(m,h.document)});const u=[];for(const[h,f]of c){const m=s.get(h),v=l.get(h);let y=0;m&&(y+=a/(i+m.rank)),v&&(y+=o/(i+v.rank)),u.push({document:f,vectorScore:m==null?void 0:m.score,keywordScore:v==null?void 0:v.score,fusedScore:y,vectorRank:m==null?void 0:m.rank,keywordRank:v==null?void 0:v.rank,documentId:h})}const d=u.sort((h,f)=>f.fusedScore-h.fusedScore);return console.log(`✅ RRF: Generated ${d.length} fused results`),console.log(`📊 Top 3 RRF scores: ${d.slice(0,3).map(h=>h.fusedScore.toFixed(4)).join(", ")}`),d}static fuseResultsAdvanced(e){const{contentTypeBoosts:t={},recencyWeight:r=.1,diversityWeight:i=.1}=e,s=this.fuseResults(e).map(l=>{var h,f,m;let c=l.fusedScore;const u=l.document,d=u.content_type||((h=u.metadata)==null?void 0:h.contentType);if(d&&t[d]&&(c*=t[d]),u.created_at){const v=(Date.now()-new Date(u.created_at).getTime())/864e5,y=Math.exp(-v/30)*r;c+=y}return(m=(f=u.metadata)==null?void 0:f.analytics)!=null&&m.productivity&&(c+=u.metadata.analytics.productivity*.1),{...l,fusedScore:c}}).sort((l,c)=>c.fusedScore-l.fusedScore);return i>0?this.applyDiversityFiltering(s,i):s}static extractDocumentId(e){var t,r,i;return e.documentId||((t=e.document)==null?void 0:t.id)||((r=e.document)==null?void 0:r.document_id)||((i=e.document)==null?void 0:i.content)||`doc_${Math.random().toString(36).substr(2,9)}`}static applyDiversityFiltering(e,t){const r=new Map,i=[];e.forEach(c=>{var d,h,f;const u=((h=(d=c.document.metadata)==null?void 0:d.entities)==null?void 0:h.projectId)||((f=c.document.metadata)==null?void 0:f.projectId)||c.document.project_id;u?(r.has(u)||r.set(u,[]),r.get(u).push(c)):i.push(c)});const a=[],o=Math.max(2,Math.floor(e.length/Math.max(r.size,1))),s=Array.from(r.values());let l=Math.max(...s.map(c=>c.length),i.length);for(let c=0;c<l&&a.length<e.length;c++){for(const u of s)c<u.length&&a.length<e.length&&a.filter(h=>{var f,m,v,y;return((m=(f=h.document.metadata)==null?void 0:f.entities)==null?void 0:m.projectId)===((y=(v=u[0].document.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)}).length<o&&a.push(u[c]);c<i.length&&a.length<e.length&&a.push(i[c])}return console.log(`🎯 Diversity filtering: ${r.size} projects, max ${o} per project`),a}static analyzeRRFEffectiveness(e){const t=e.filter(l=>l.vectorScore&&!l.keywordScore).length,r=e.filter(l=>l.keywordScore&&!l.vectorScore).length,i=e.filter(l=>l.vectorScore&&l.keywordScore).length,a=e.map(l=>l.fusedScore).sort((l,c)=>l-c),o=a[Math.floor(a.length/2)]||0,s=a.reduce((l,c)=>l+c,0)/a.length||0;return{totalResults:e.length,vectorOnlyResults:t,keywordOnlyResults:r,hybridResults:i,averageFusedScore:s,scoreDistribution:{min:a[0]||0,max:a[a.length-1]||0,median:o}}}}class mDt{static async rerankDocuments(e,t,r={}){const i=Date.now(),{model:a="hybrid",maxCandidates:o=50,minRelevanceScore:s=.1,contextWindow:l=512,diversityWeight:c=.1,recencyWeight:u=.05,contentTypeWeights:d={}}=r;if(console.log(`🔄 Starting re-ranking with ${a} strategy for ${t.length} documents`),t.length===0)return this.createEmptyResult(i);const h=t.slice(0,o);try{let f;switch(a){case"cross-encoder":f=await this.crossEncoderRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"semantic-similarity":f=await this.semanticSimilarityRerank(e,h,{contextWindow:l,minRelevanceScore:s});break;case"hybrid":default:f=await this.hybridRerank(e,h,{contextWindow:l,minRelevanceScore:s,diversityWeight:c,recencyWeight:u,contentTypeWeights:d});break}const m=f.filter(w=>w.rerankScore>=s).sort((w,S)=>S.rerankScore-w.rerankScore).map((w,S)=>({...w,rank:S+1})),v=Date.now()-i,y=this.generateMetadata(h,m,v,a);return console.log(`✅ Re-ranking completed: ${m.length} results in ${v}ms`),console.log(`📊 Score distribution - High: ${y.scoreDistribution.high}, Medium: ${y.scoreDistribution.medium}, Low: ${y.scoreDistribution.low}`),{rerankedResults:m,metadata:y}}catch(f){return console.error("❌ Re-ranking failed:",f),this.createEmptyResult(i,f)}}static async crossEncoderRerank(e,t,r){console.log("🧠 Applying cross-encoder re-ranking");const i=[],a=this.extractKeyTerms(e);for(const o of t){const{document:s,score:l}=o,c=s.content||"",u=this.simulateCrossEncoderScore(e,c,a),d=this.calculateContextualRelevance(e,s),h=this.calculatePositionBonus(c,a),f=u*.6+d*.3+h*.1;i.push({document:s,originalScore:l,rerankScore:f,rank:0,confidence:Math.min(.95,u+.1),explanation:`Cross-encoder: ${u.toFixed(3)}, Context: ${d.toFixed(3)}, Position: ${h.toFixed(3)}`})}return i}static async semanticSimilarityRerank(e,t,r){console.log("🔍 Applying semantic similarity re-ranking");const i=[],a=await this.generateQueryRepresentation(e);for(const o of t){const{document:s,score:l}=o,c=this.calculateEnhancedSemanticScore(e,s,a),u=this.calculateCoherenceScore(s),d=this.calculateDiversityPenalty(s,i),h=c*u*(1-d);i.push({document:s,originalScore:l,rerankScore:h,rank:0,confidence:c,explanation:`Semantic: ${c.toFixed(3)}, Coherence: ${u.toFixed(3)}, Diversity: ${(1-d).toFixed(3)}`})}return i}static async hybridRerank(e,t,r){console.log("🔀 Applying hybrid re-ranking strategy");const i=[],a=this.extractKeyTerms(e),o=this.analyzeQueryIntent(e);for(const s of t){const{document:l,score:c}=s,u=this.calculateAdvancedSemanticScore(e,l),d=this.calculateLexicalOverlap(a,l.content||""),h=this.calculateStructuralRelevance(l,o),f=this.calculateFreshnessScore(l,r.recencyWeight),m=this.calculateContentTypeScore(l,r.contentTypeWeights),v=this.calculatePositionRelevance(l.content||"",a),y=u*.35+d*.25+h*.15+f*.1+m*.1+v*.05,w=Math.min(.95,(u+d)/2+.1);i.push({document:l,originalScore:c,rerankScore:y,rank:0,confidence:w,explanation:`Hybrid: Sem(${u.toFixed(2)}) + Lex(${d.toFixed(2)}) + Struct(${h.toFixed(2)}) + Fresh(${f.toFixed(2)}) + Type(${m.toFixed(2)})`})}return i}static simulateCrossEncoderScore(e,t,r){const i=e.toLowerCase(),a=t.toLowerCase(),o=a.includes(i)?1:0,l=r.filter(d=>a.includes(d.toLowerCase())).length/Math.max(r.length,1),c=r.some(d=>a.indexOf(d.toLowerCase())<100)?.2:0,u=Math.min(1,500/Math.max(t.length,100));return(o*.4+l*.4+c+u*.2)*.9}static calculateContextualRelevance(e,t){let r=.5;const i=t.metadata||{},a=t.content_type||"";if(e.toLowerCase().includes("project")&&a.includes("project")&&(r+=.3),e.toLowerCase().includes("task")&&a.includes("task")&&(r+=.3),e.toLowerCase().includes("summary")&&a.includes("summary")&&(r+=.2),i.created_at){const s=(Date.now()-new Date(i.created_at).getTime())/(1e3*60*60*24),l=Math.max(0,1-s/30);r+=l*.1}return Math.min(1,r)}static calculatePositionBonus(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=Math.max(0,1-s/Math.min(e.length,500));i+=l,a++}}return a>0?i/a:0}static extractKeyTerms(e){const t=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","how","what","when","where","why","who","which","many","much","some","any","all","my","me","i","you","he","she","it","we","they","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","tell","show","give","please"]);return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(r=>r.length>2&&!t.has(r)).slice(0,10)}static async generateQueryRepresentation(e){return{terms:this.extractKeyTerms(e),intent:this.analyzeQueryIntent(e),complexity:e.split(/\s+/).length}}static analyzeQueryIntent(e){const t=e.toLowerCase();return t.includes("how many")||t.includes("count")||t.includes("number")?"quantitative":t.includes("what")||t.includes("which")||t.includes("show")?"informational":t.includes("why")||t.includes("how")||t.includes("explain")?"analytical":t.includes("status")||t.includes("progress")||t.includes("update")?"status":"general"}static calculateEnhancedSemanticScore(e,t,r){const i=t.content||"",a=this.extractKeyTerms(e),o=this.extractKeyTerms(i),s=a.filter(d=>o.includes(d)).length,l=new Set([...a,...o]).size,c=l>0?s/l:0,u=a.reduce((d,h)=>{const f=(i.toLowerCase().match(new RegExp(h.toLowerCase(),"g"))||[]).length;return d+Math.log(1+f)},0)/Math.max(a.length,1);return(c*.6+u*.4)*.8}static calculateCoherenceScore(e){const t=e.content||"",r=(t.match(/[.!?]+/g)||[]).length,i=t.split(/\s+/).length,a=r>0?i/r:0,o=a>0?Math.max(0,1-Math.abs(a-20)/20):.5,s=/[:\-\*\d+\.]/.test(t)?.1:0;return Math.min(1,o+s+.3)}static calculateDiversityPenalty(e,t){if(t.length===0)return 0;const r=e.content||"",i=e.content_type||"",a=t.filter(c=>c.document.content_type===i).length,o=Math.min(.3,a*.1),l=t.reduce((c,u)=>{const d=this.calculateSimpleSimilarity(r,u.document.content||"");return Math.max(c,d)},0)*.2;return Math.min(.5,o+l)}static calculateSimpleSimilarity(e,t){const r=new Set(e.toLowerCase().split(/\s+/)),i=new Set(t.toLowerCase().split(/\s+/)),a=new Set([...r].filter(s=>i.has(s))),o=new Set([...r,...i]);return o.size>0?a.size/o.size:0}static calculateAdvancedSemanticScore(e,t){const r=t.content||"",i=this.extractKeyTerms(e),a=this.calculateExactMatchScore(e,r),o=this.calculatePartialMatchScore(i,r),s=this.calculateSemanticProximity(i,r);return a*.5+o*.3+s*.2}static calculateLexicalOverlap(e,t){const r=t.toLowerCase(),a=e.filter(s=>r.includes(s.toLowerCase())).length/Math.max(e.length,1),o=this.findConsecutiveMatches(e,t)*.2;return Math.min(1,a+o)}static calculateStructuralRelevance(e,t){const r=e.content_type||"",i=e.metadata||{};let a=.5;switch(t){case"quantitative":(r==="monthly_summary"||r==="weekly_summary"||r==="daily_summary"||r==="task_aggregate")&&(a+=.3);break;case"informational":(r==="project_summary"||r==="task_aggregate")&&(a+=.3);break;case"analytical":(r==="task_sessions"||r==="task_aggregate"||r==="project_summary")&&(a+=.3);break;case"status":(r.includes("summary")||r==="task_aggregate")&&(a+=.3);break}return(i.entities||i.analytics)&&(a+=.1),Math.min(1,a)}static calculateFreshnessScore(e,t){var s;if(t===0)return .5;const r=e.created_at||((s=e.metadata)==null?void 0:s.created_at);if(!r)return .3;const a=(Date.now()-new Date(r).getTime())/(1e3*60*60*24);return Math.exp(-a/30)*t+(1-t)*.5}static calculateContentTypeScore(e,t){const r=e.content_type||"";for(const[i,a]of Object.entries(t))if(r.includes(i))return Math.min(1,a);return .5}static calculatePositionRelevance(e,t){const r=e.toLowerCase();let i=0,a=0;for(const o of t){const s=r.indexOf(o.toLowerCase());if(s!==-1){const l=s/Math.max(e.length,1),c=Math.max(0,1-l);i+=c,a++}}return a>0?i/a:0}static calculateExactMatchScore(e,t){const r=e.toLowerCase().trim(),i=t.toLowerCase();if(i.includes(r)){const a=i.indexOf(r);return .8+Math.max(0,1-a/Math.max(t.length,1))*.2}return 0}static calculatePartialMatchScore(e,t){const r=t.toLowerCase(),i=e.filter(s=>r.includes(s.toLowerCase()));if(i.length===0)return 0;const a=i.length/e.length,o=this.calculateTermDensity(i,t);return a*.7+o*.3}static calculateSemanticProximity(e,t){const r=t.toLowerCase().split(/\s+/);let i=0,a=0;for(let o=0;o<e.length;o++)for(let s=o+1;s<e.length;s++){const l=e[o].toLowerCase(),c=e[s].toLowerCase(),u=r.indexOf(l),d=r.indexOf(c);if(u!==-1&&d!==-1){const h=Math.abs(u-d),f=Math.max(0,1-h/20);i+=f,a++}}return a>0?i/a:0}static findConsecutiveMatches(e,t){const r=t.toLowerCase().split(/\s+/);let i=0;for(let a=0;a<=r.length-e.length;a++){let o=0;for(let s=0;s<e.length&&(a+s<r.length&&r[a+s].includes(e[s].toLowerCase()));s++)o++;i=Math.max(i,o)}return i/Math.max(e.length,1)}static calculateTermDensity(e,t){const r=t.split(/\s+/).length,i=e.reduce((a,o)=>{const s=t.toLowerCase().match(new RegExp(o.toLowerCase(),"g"));return a+(s?s.length:0)},0);return Math.min(1,i/Math.max(r,1))}static generateMetadata(e,t,r,i){const a={high:0,medium:0,low:0};let o=0;return t.forEach(s=>{o+=s.confidence,s.rerankScore>.8?a.high++:s.rerankScore>.4?a.medium++:a.low++}),{totalCandidates:e.length,rerankedResults:t.length,processingTime:r,strategy:i,averageConfidence:t.length>0?o/t.length:0,scoreDistribution:a}}static createEmptyResult(e,t){return{rerankedResults:[],metadata:{totalCandidates:0,rerankedResults:0,processingTime:Date.now()-e,strategy:"error",averageConfidence:0,scoreDistribution:{high:0,medium:0,low:0}}}}}class e8{static async performHybridSearch(e,t,r={}){const i=Date.now(),{vectorWeight:a=1,keywordWeight:o=1,rrfK:s=60,maxResults:l=20,minVectorSimilarity:c=.1,minKeywordScore:u=0,contentTypeBoosts:d={},chunkLevels:h=[],timeframe:f="all",projects:m=[],enableEnhancedBM25:v=!0,enableReranking:y=!1,rerankingModel:w="hybrid",rerankingCandidates:S=50,minRerankScore:T=.1,rerankingWeights:C={}}=r;console.log(`🔍 Starting hybrid search for: "${e}"`),console.log(`🎛️ Options: vector=${a}, keyword=${o}, k=${s}`);const k=this.detectProjectQuery(e);let A={...d};k&&(console.log("🎯 Detected PROJECT query - applying project content boosting"),A={...A,project:2,project_summary:1.8,task_aggregate:.6,task_sessions:.5,weekly_summary:1.2,monthly_summary:1.3});try{const D=await this.fetchCandidateDocuments(t,{chunkLevels:h,timeframe:f,projects:m});if(!D||D.length===0)return console.warn("⚠️ No candidate documents found for user"),this.createEmptyResult(i);console.log(`📚 Found ${D.length} candidate documents`);const P=await this.performVectorSearch(e,D,c),N=await this.performBM25Search(e,D,u,v);console.log(`🎯 Vector: ${P.length} results, Keyword: ${N.length} results`);const R=Xfe.fuseResultsAdvanced({vectorResults:P,keywordResults:N,k:s,vectorWeight:a,keywordWeight:o,contentTypeBoosts:A,recencyWeight:.1,diversityWeight:.1});let L=[],B=null,$;if(y&&R.length>0){console.log(`🔄 Re-ranking enabled with model: ${w}`);const K=R.slice(0,S).map(z=>({document:z.document,score:z.fusedScore})),X={model:w,maxCandidates:S,minRelevanceScore:T,contextWindow:512,diversityWeight:C.diversityWeight||.1,recencyWeight:C.recencyWeight||.05,contentTypeWeights:C.contentTypeWeights||A},{rerankedResults:te,metadata:ie}=await mDt.rerankDocuments(e,K,X);L=te,B=ie,L.length>0?($=L.slice(0,l).map((z,se)=>{var ce;return{documentId:z.document.id||`rerank_${se}`,document:z.document,fusedScore:z.rerankScore,vectorScore:((ce=K.find(ee=>ee.document.id===z.document.id))==null?void 0:ce.score)||0,keywordScore:0,vectorRank:se+1,keywordRank:se+1}}),console.log(`✨ Re-ranking improved results: ${L.length} documents reordered`)):($=R.slice(0,l),console.log("⚠️ Re-ranking produced no results, falling back to RRF results"))}else $=R.slice(0,l),console.log("📋 Using RRF results without re-ranking");const G=Xfe.analyzeRRFEffectiveness(R),W=Date.now()-i;return console.log(`✅ Hybrid search completed in ${W}ms`),console.log(`📊 Final results: ${$.length} documents`),{documents:$.map(K=>({...K.document,hybrid_score:K.fusedScore,vector_score:K.vectorScore,keyword_score:K.keywordScore,vector_rank:K.vectorRank,keyword_rank:K.keywordRank})),vectorResults:P,keywordResults:N,fusedResults:$,rerankedResults:y?L:void 0,metadata:{totalDocuments:D.length,vectorResultCount:P.length,keywordResultCount:N.length,hybridResultCount:$.length,rerankedResultCount:y?L.length:void 0,processingTime:W,searchStrategy:y?"hybrid_vector_bm25_rrf_reranked":"hybrid_vector_bm25_rrf",rrfAnalysis:G,rerankingMetadata:y?B:void 0}}}catch(D){return console.error("❌ Hybrid search failed:",D),this.createEmptyResult(i,D)}}static detectProjectQuery(e){return[/\b(how\s+many\s+projects?|number\s+of\s+projects?|count\s+of\s+projects?)/i,/\b(tell\s+me.*projects?|projects?\s+i\s+have|projects?\s+do\s+i\s+have)/i,/\b(all\s+projects?|list\s+projects?|show\s+projects?)/i,/\b(projects?\s+(available|existing|current))/i,/\b(my\s+projects?|which\s+projects?)/i,/\b(project|projects)\s+(overview|status|summary|progress)/i,/\b(project\s+breakdown|project\s+analysis|across\s+projects)/i].some(r=>r.test(e))}static async fetchCandidateDocuments(e,t){let r=Ot.from("user_productivity_documents").select("*").eq("user_id",e);if(t.chunkLevels&&t.chunkLevels.length>0&&(r=r.in("metadata->chunkLevel",t.chunkLevels)),t.timeframe&&t.timeframe!=="all"){const o=this.getDateFilter(t.timeframe);r=r.gte("created_at",o)}t.projects&&t.projects.length>0&&(r=r.in("metadata->entities->projectId",t.projects));const{data:i,error:a}=await r.order("created_at",{ascending:!1}).limit(200);return a?(console.error("❌ Error fetching candidate documents:",a),[]):i||[]}static async performVectorSearch(e,t,r){try{const i=await kr.generateEmbedding({content:e,contentType:"query"});if(!i||i.length===0)return console.warn("⚠️ Failed to generate query embedding"),[];console.log(`🧮 Generated query embedding: ${i.length} dimensions`);const a=[];for(const o of t){if(!o.embedding)continue;let s=o.embedding;if(typeof o.embedding=="string")try{s=JSON.parse(o.embedding)}catch{continue}if(!Array.isArray(s))continue;const l=this.calculateCosineSimilarity(i,s);l>=r&&a.push({document:o,score:l})}return a.sort((o,s)=>s.score-o.score),console.log(`🎯 Vector search: ${a.length} results above ${r} threshold`),a.length>0&&console.log(`📊 Top similarities: ${a.slice(0,3).map(o=>o.score.toFixed(3)).join(", ")}`),a}catch(i){return console.error("❌ Vector search failed:",i),[]}}static async performBM25Search(e,t,r,i){try{const a=t.map(l=>({id:l.id||l.document_id||`doc_${Math.random().toString(36).substr(2,9)}`,content:l.content||"",metadata:l.metadata})),s=(i?iL.calculateEnhancedBM25Scores(e,a,{positionWeight:.1,proximityWeight:.1,titleBoost:1.3}):iL.calculateBM25Scores(e,a)).filter(l=>l.score>=r).map(l=>({document:t.find(c=>(c.id||c.document_id)===l.docId||c.content===l.document.content)||l.document,score:l.score}));return console.log(`🔤 BM25 search: ${s.length} results above ${r} threshold`),s.length>0&&console.log(`📊 Top BM25 scores: ${s.slice(0,3).map(l=>l.score.toFixed(3)).join(", ")}`),s}catch(a){return console.error("❌ BM25 search failed:",a),[]}}static calculateCosineSimilarity(e,t){if(e.length!==t.length)return 0;let r=0,i=0,a=0;for(let s=0;s<e.length;s++)r+=e[s]*t[s],i+=e[s]*e[s],a+=t[s]*t[s];const o=Math.sqrt(i)*Math.sqrt(a);return o===0?0:r/o}static getDateFilter(e){const t=new Date;switch(e){case"today":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString();case"week":return new Date(t.getTime()-7*24*60*60*1e3).toISOString();case"month":return new Date(t.getTime()-30*24*60*60*1e3).toISOString();default:return new Date(0).toISOString()}}static createEmptyResult(e,t){return{documents:[],vectorResults:[],keywordResults:[],fusedResults:[],metadata:{totalDocuments:0,vectorResultCount:0,keywordResultCount:0,hybridResultCount:0,processingTime:Date.now()-e,searchStrategy:"hybrid_failed",rrfAnalysis:{totalResults:0,vectorOnlyResults:0,keywordOnlyResults:0,hybridResults:0,averageFusedScore:0,scoreDistribution:{min:0,max:0,median:0}}}}}static async testHybridSearch(e,t){var r,i,a;console.log(`🧪 Testing hybrid search for user: ${e}`);for(const o of t){console.log(`
🔍 Testing query: "${o}"`);const s=await this.performHybridSearch(o,e,{maxResults:5,enableEnhancedBM25:!0});if(console.log(`📊 Results: ${s.documents.length} documents`),console.log(`🎯 Vector: ${s.metadata.vectorResultCount}, Keyword: ${s.metadata.keywordResultCount}`),console.log(`⚡ Processing time: ${s.metadata.processingTime}ms`),s.documents.length>0){const l=s.documents[0];console.log(`🏆 Top result: hybrid=${(r=l.hybrid_score)==null?void 0:r.toFixed(3)}, vector=${(i=l.vector_score)==null?void 0:i.toFixed(3)}, keyword=${(a=l.keyword_score)==null?void 0:a.toFixed(3)}`)}}}}const vDt=Object.freeze(Object.defineProperty({__proto__:null,HybridSearchService:e8},Symbol.toStringTag,{value:"Module"})),yDt=({userId:n})=>{const[e,t]=Y.useState(""),[r,i]=Y.useState(!1),[a,o]=Y.useState(null),[s,l]=Y.useState(null),c=["productivity today","tasks in progress","project status","deep focus sessions","time spent coding","meeting notes","completed tasks"],u=async()=>{if(e.trim()){i(!0),l(null);try{console.log(`🔍 Testing hybrid search: "${e}"`);const f=await e8.performHybridSearch(e,n,{maxResults:10,vectorWeight:1,keywordWeight:1,enableEnhancedBM25:!0,contentTypeBoosts:{task:1.2,project:1.1,session:1,daily_summary:1}});o(f),console.log("✅ Hybrid search result:",f)}catch(f){console.error("❌ Hybrid search test failed:",f),l(f instanceof Error?f.message:"Unknown error")}finally{i(!1)}}},d=f=>{t(f)},h=async()=>{console.log("🧪 Running all hybrid search tests...");for(const f of c){console.log(`
🔍 Testing: "${f}"`);try{const m=await e8.performHybridSearch(f,n,{maxResults:5,enableEnhancedBM25:!0});console.log(`✅ ${f}: ${m.documents.length} results in ${m.metadata.processingTime}ms`)}catch(m){console.error(`❌ ${f}: Failed -`,m)}}console.log("🏁 All tests completed")};return x.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔍 Hybrid Search Tester"}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),placeholder:"Enter search query...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:f=>f.key==="Enter"&&u()}),x.jsx("button",{onClick:u,disabled:r||!e.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Searching...":"Search"})]})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),x.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(f=>x.jsx("button",{onClick:()=>d(f),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm",children:f},f))})]}),x.jsx("div",{className:"mb-4",children:x.jsx("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"🧪 Run All Tests (Check Console)"})}),s&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:x.jsxs("p",{className:"text-red-800 text-sm",children:["❌ Error: ",s]})}),a&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Search Metadata"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Processing Time:"})," ",a.metadata.processingTime,"ms"]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Strategy:"})," ",a.metadata.searchStrategy]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Vector Results:"})," ",a.metadata.vectorResultCount]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Keyword Results:"})," ",a.metadata.keywordResultCount]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Total Docs:"})," ",a.metadata.totalDocuments]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Final Results:"})," ",a.metadata.hybridResultCount]})]})]}),a.metadata.rrfAnalysis&&x.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"RRF Analysis"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Vector Only:"})," ",a.metadata.rrfAnalysis.vectorOnlyResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Keyword Only:"})," ",a.metadata.rrfAnalysis.keywordOnlyResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Hybrid:"})," ",a.metadata.rrfAnalysis.hybridResults]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Avg Score:"})," ",a.metadata.rrfAnalysis.averageFusedScore.toFixed(4)]})]})]}),x.jsxs("div",{children:[x.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:["Results (",a.documents.length,")"]}),x.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.documents.map((f,m)=>{var v,y;return x.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[x.jsxs("div",{className:"flex justify-between items-start mb-2",children:[x.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.content_type||"Unknown Type"}),x.jsxs("div",{className:"text-xs text-gray-500 space-x-2",children:[f.hybrid_score&&x.jsxs("span",{children:["H: ",f.hybrid_score.toFixed(3)]}),f.vector_score&&x.jsxs("span",{children:["V: ",f.vector_score.toFixed(3)]}),f.keyword_score&&x.jsxs("span",{children:["K: ",f.keyword_score.toFixed(3)]})]})]}),x.jsxs("p",{className:"text-sm text-gray-700 line-clamp-3",children:[f.content.substring(0,200),f.content.length>200&&"..."]}),((y=(v=f.metadata)==null?void 0:v.entities)==null?void 0:y.projectId)&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Project: ",f.metadata.entities.projectId]})]},f.id||m)})})]})]})]})},bDt=()=>{const[n,e]=Y.useState(""),[t,r]=Y.useState(null),[i,a]=Y.useState(null),[o,s]=Y.useState(!1),{user:l}=Ht(),c=["please tell me how many project i have","how many projects do i have","show me all my projects","what tasks are urgent","productivity summary this week","project status overview"],u=async()=>{if(n.trim()){s(!0);try{const h=Uu.classifyQuery(n);if(r(h),l!=null&&l.uid)try{const f=await Uu.selectBestContentTypesWithAI(n,l.uid);a(f)}catch(f){console.error("AI classification failed:",f),a({error:"AI classification unavailable"})}}catch(h){console.error("Classification failed:",h)}finally{s(!1)}}},d=h=>{e(h);const f=Uu.classifyQuery(h);r(f),console.log(`🔍 Testing: "${h}":`,f)};return x.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🧠 Query Classification Tester"}),x.jsx("div",{className:"mb-4",children:x.jsxs("div",{className:"flex gap-2",children:[x.jsx("input",{type:"text",value:n,onChange:h=>e(h.target.value),placeholder:"Enter query to classify...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-900",onKeyPress:h=>h.key==="Enter"&&u()}),x.jsx("button",{onClick:u,disabled:o||!n.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Analyzing...":"Classify"})]})}),x.jsxs("div",{className:"mb-4",children:[x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Quick test queries:"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map(h=>x.jsxs("button",{onClick:()=>d(h),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm text-left",children:['"',h,'"']},h))})]}),t&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"📋 Rule-based Classification"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-900",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Primary Intent:"}),x.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${t.primaryIntent==="project_focus"?"bg-green-100 text-green-800":t.primaryIntent==="task_priority"?"bg-blue-100 text-blue-800":t.primaryIntent==="summary_insights"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:t.primaryIntent})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Confidence:"})," ",x.jsxs("span",{className:"text-blue-900",children:[(t.confidence*100).toFixed(1),"%"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Strategy:"})," ",x.jsx("span",{className:"text-blue-900",children:t.mixingStrategy})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-blue-900",children:"Secondary:"})," ",x.jsx("span",{className:"text-blue-900",children:t.secondaryIntents.join(", ")||"none"})]})]})]}),i&&x.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:[x.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"🤖 AI-powered Content Type Selection"}),i.error?x.jsx("div",{className:"text-red-600 text-sm",children:i.error}):x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Primary Types:"}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.primaryTypes.map((h,f)=>x.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:h},f))})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Secondary Types:"}),x.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:i.secondaryTypes.map((h,f)=>x.jsx("span",{className:"bg-green-50 text-green-700 px-2 py-1 rounded text-xs border border-green-200",children:h},f))})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"AI Confidence:"}),x.jsxs("span",{className:"ml-2 text-green-900",children:[i.confidence,"%"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-green-900",children:"Reasoning:"}),x.jsx("p",{className:"mt-1 text-sm text-green-800",children:i.reasoning})]})]})]}),!l&&x.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:x.jsxs("p",{className:"text-sm text-yellow-700",children:["💡 ",x.jsx("strong",{children:"Tip:"})," Log in to test AI-powered content type selection with your actual data chunks!"]})})]})]})},wDt=()=>{var $,G,W,K,X,te,ie,z,se,ce,ee,be;const{user:n}=Ht(),[e,t]=Y.useState({status:"loading",message:"Checking sync status..."}),[r,i]=Y.useState(!1),[a,o]=Y.useState(!1),[s,l]=Y.useState(!1),[c,u]=Y.useState(!1),[d,h]=Y.useState(null),[f,m]=Y.useState(null),[v,y]=Y.useState(!1),[w,S]=Y.useState(null);Y.useEffect(()=>{n!=null&&n.uid&&(T(),C())},[n]);const T=async()=>{if(n!=null&&n.uid)try{t({status:"loading",message:"Checking sync status..."});const fe=await Kfe.quickHealthCheck(n.uid),De=await fDt.testUserSync(n.uid);let dt,ve;fe.status==="healthy"?(dt="success",ve=`✅ Sync healthy - ${fe.embeddingCoverage}% coverage`):fe.status==="warning"?(dt="warning",ve=`⚠️ Sync needs attention - ${fe.embeddingCoverage}% coverage`):(dt="error",ve=`❌ ${fe.message}`),t({status:dt,message:ve,lastSync:new Date,details:{healthCheck:fe,testResult:De}})}catch(fe){console.error("Error checking sync status:",fe),t({status:"error",message:`Failed to check sync status: ${fe instanceof Error?fe.message:"Unknown error"}`})}},C=async()=>{if(n!=null&&n.uid)try{const fe=await ZG.isIncrementalSyncNeeded(n.uid);S(fe)}catch(fe){console.error("Error checking incremental sync status:",fe),S(null)}},k=async()=>{try{u(!0),await pDt.createTables(),t({status:"success",message:"✅ Database tables initialized successfully",lastSync:new Date})}catch(fe){console.error("Error initializing tables:",fe),t({status:"error",message:`Failed to initialize tables: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{u(!1)}},A=async()=>{if(n!=null&&n.uid)try{l(!0),h({current:0,total:100,status:"Running incremental sync..."});const fe=await ZG.executeIncrementalSync(n.uid);fe.success?t({status:"success",message:`✅ Incremental sync complete: ${fe.processedDocuments} processed, ${fe.skippedDocuments} skipped`,lastSync:new Date,details:fe}):t({status:"warning",message:`⚠️ Incremental sync completed with ${fe.errors.length} errors`,lastSync:new Date,details:fe}),setTimeout(()=>{T(),C()},1e3)}catch(fe){console.error("Error running incremental sync:",fe),t({status:"error",message:`Incremental sync failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{l(!1),h(null)}},D=async()=>{if(n!=null&&n.uid)try{i(!0),h({current:0,total:100,status:"Starting comprehensive sync..."});const fe=await rL.syncAllUserData(n.uid,De=>h(De));fe.errors.length>0?t({status:"warning",message:`Sync completed with ${fe.errors.length} errors`,lastSync:new Date,details:fe}):t({status:"success",message:`✅ Successfully synced ${fe.synced} documents`,lastSync:new Date,details:fe}),setTimeout(()=>{T(),C()},1e3)}catch(fe){console.error("Error running comprehensive sync:",fe),t({status:"error",message:`Sync failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{i(!1),h(null)}},P=async()=>{if(n!=null&&n.uid)try{o(!0),h({current:0,total:100,status:"Generating missing embeddings..."});const fe=await rL.generateMissingEmbeddings(n.uid,De=>h(De));t({status:"success",message:`✅ Generated embeddings for ${fe} documents`,lastSync:new Date}),setTimeout(()=>{T(),C()},1e3)}catch(fe){console.error("Error generating embeddings:",fe),t({status:"error",message:`Embedding generation failed: ${fe instanceof Error?fe.message:"Unknown error"}`})}finally{o(!1),h(null)}},N=async()=>{if(n!=null&&n.uid)try{const fe=await Kfe.generateComprehensiveReport(n.uid);m(fe),y(!0)}catch(fe){console.error("Error generating report:",fe),alert(`Failed to generate report: ${fe instanceof Error?fe.message:"Unknown error"}`)}},R=async()=>{if(n!=null&&n.uid)try{QG.stopSync(),JG.stopSync(),t({status:"success",message:`✅ All sync listeners stopped (${QG.getActiveListenerCount()} active)`,lastSync:new Date})}catch(fe){console.error("Error stopping all sync listeners:",fe),t({status:"error",message:`Failed to stop all sync listeners: ${fe instanceof Error?fe.message:"Unknown error"}`})}},L=()=>{switch(e.status){case"loading":return x.jsx(UC,{className:"w-5 h-5 text-gray-500 animate-spin"});case"success":return x.jsx(hg,{className:"w-5 h-5 text-green-500"});case"warning":return x.jsx(O7,{className:"w-5 h-5 text-yellow-500"});case"error":return x.jsx(rO,{className:"w-5 h-5 text-red-500"})}},B=()=>{switch(e.status){case"loading":return"border-gray-300 bg-gray-50";case"success":return"border-green-300 bg-green-50";case"warning":return"border-yellow-300 bg-yellow-50";case"error":return"border-red-300 bg-red-50"}};return n?x.jsxs("div",{className:"space-y-6 w-full mx-auto px-4 py-6",children:[x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Data Sync Dashboard"}),x.jsx("p",{className:"text-gray-500 mt-1",children:"Monitor and manage Firebase to Supabase data synchronization"})]}),x.jsxs("button",{onClick:T,disabled:e.status==="loading",className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[x.jsx(UC,{className:`w-4 h-4 ${e.status==="loading"?"animate-spin":""}`}),x.jsx("span",{children:"Refresh"})]})]})}),x.jsx("div",{className:`border rounded-lg p-6 ${B()}`,children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[L(),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Status"}),x.jsx("p",{className:"text-sm text-gray-600",children:e.message}),e.lastSync&&x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last checked: ",e.lastSync.toLocaleString()]})]})]}),e.details&&x.jsx("div",{className:"text-right",children:x.jsxs("div",{className:"text-sm text-gray-600",children:[x.jsxs("div",{children:["Firebase: ",($=e.details.testResult)!=null&&$.firebaseData?Object.values(e.details.testResult.firebaseData).reduce((fe,De)=>fe+(typeof De=="number"?De:0),0):0," items"]}),x.jsxs("div",{children:["Supabase: ",((W=(G=e.details.testResult)==null?void 0:G.supabaseData)==null?void 0:W.documents)||0," docs"]}),x.jsxs("div",{children:["With embeddings: ",((X=(K=e.details.testResult)==null?void 0:K.supabaseData)==null?void 0:X.withEmbeddings)||0]})]})})]})}),d&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h3",{className:"font-medium text-gray-900",children:"Sync Progress"}),x.jsxs("span",{className:"text-sm text-gray-500",children:[d.current,"/",d.total]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:x.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.current/d.total*100}%`}})}),x.jsx("p",{className:"text-sm text-gray-600",children:d.status})]}),w&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Incremental Sync"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Only sync updated documents to reduce costs"})]}),x.jsx("div",{className:"text-right",children:x.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w.needed?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:w.needed?`${w.pendingChanges} pending`:"Up to date"})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Last Sync:"}),x.jsx("div",{className:"font-medium",children:w.lastSyncTime?w.lastSyncTime.toLocaleString():"Never"})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Pending Changes:"}),x.jsx("div",{className:"font-medium",children:w.pendingChanges>=0?w.pendingChanges:"Unknown"})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Status:"}),x.jsx("div",{className:"font-medium",children:w.needed?"Sync needed":"Up to date"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[x.jsxs("button",{onClick:A,disabled:s||r||a,className:`flex items-center justify-center space-x-2 p-4 rounded-lg disabled:opacity-50 ${w!=null&&w.needed?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:[x.jsx(L7,{className:"w-5 h-5"}),x.jsx("span",{children:s?"Syncing...":"Smart Sync"})]}),x.jsxs("button",{onClick:D,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[x.jsx(nz,{className:"w-5 h-5"}),x.jsx("span",{children:r?"Syncing...":"Full Sync"})]}),x.jsxs("button",{onClick:P,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[x.jsx(tz,{className:"w-5 h-5"}),x.jsx("span",{children:a?"Generating...":"Fix Embeddings"})]}),x.jsxs("button",{onClick:N,disabled:r||a||s,className:"flex items-center justify-center space-x-2 p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[x.jsx(E4e,{className:"w-5 h-5"}),x.jsx("span",{children:"Full Report"})]}),x.jsxs("button",{onClick:R,className:"flex items-center justify-center space-x-2 p-4 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[x.jsx(rO,{className:"w-5 h-5"}),x.jsx("span",{children:"Stop Sync"})]})]}),x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Database Setup"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Initialize required tables for incremental sync"})]}),x.jsxs("button",{onClick:k,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[x.jsx(nz,{className:`w-4 h-4 ${c?"animate-pulse":""}`}),x.jsx("span",{children:c?"Initializing...":"Setup Tables"})]})]})}),x.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"🚀 Query Enhancement System"}),x.jsx("p",{className:"text-sm text-purple-700",children:"HyDE + Multi-Query + Re-ranking Active"})]}),x.jsx("div",{className:"flex items-center space-x-2",children:x.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ PHASE 5 COMPLETE"})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"HyDE (Hypothetical Document Embeddings)"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Multi-Query Decomposition"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Intelligent Strategy Selection"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Hybrid Search Integration"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Re-ranking Enhancement"})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-green-600",children:"✓"}),x.jsx("span",{className:"text-purple-800",children:"Performance Optimization"})]})]})]}),x.jsx("div",{className:"mt-4 p-3 bg-white bg-opacity-70 rounded",children:x.jsxs("p",{className:"text-sm text-purple-700",children:[x.jsx("strong",{children:"Expected Performance:"})," 70-90% overall precision improvement",x.jsx("br",{}),x.jsx("strong",{children:"Recommended Test Queries:"}),' "How productive was I last week?", "Which tasks need attention?", "Show me my project insights"']})})]}),((te=e.details)==null?void 0:te.testResult)&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Stats"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((ie=e.details.testResult.firebaseData)==null?void 0:ie.tasks)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Tasks"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-green-600",children:((z=e.details.testResult.firebaseData)==null?void 0:z.projects)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Projects"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-purple-600",children:((se=e.details.testResult.firebaseData)==null?void 0:se.workSessions)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"Sessions"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((ce=e.details.testResult.supabaseData)==null?void 0:ce.withEmbeddings)||0}),x.jsx("div",{className:"text-sm text-gray-500",children:"With Embeddings"})]})]})]}),((be=(ee=e.details)==null?void 0:ee.testResult)==null?void 0:be.recommendations)&&x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recommendations"}),x.jsx("div",{className:"space-y-2",children:e.details.testResult.recommendations.map((fe,De)=>x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),x.jsx("p",{className:"text-sm text-gray-700",children:fe})]},De))})]}),v&&f&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[x.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Comprehensive Data Report"}),x.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),x.jsxs("div",{className:"p-6 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Summary"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Firebase Items"}),x.jsx("div",{className:"text-xl font-bold",children:f.summary.totalFirebaseItems})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Supabase Docs"}),x.jsx("div",{className:"text-xl font-bold",children:f.summary.totalSupabaseDocuments})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Embedding Coverage"}),x.jsxs("div",{className:"text-xl font-bold",children:[f.summary.embeddingCoverage,"%"]})]}),x.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[x.jsx("div",{className:"text-sm text-gray-500",children:"Health"}),x.jsx("div",{className:`text-xl font-bold ${f.summary.syncHealth==="excellent"?"text-green-600":f.summary.syncHealth==="good"?"text-blue-600":f.summary.syncHealth==="poor"?"text-yellow-600":"text-red-600"}`,children:f.summary.syncHealth})]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Recommendations"}),x.jsx("div",{className:"space-y-2",children:f.analysis.recommendations.map((fe,De)=>x.jsxs("div",{className:"flex items-start space-x-2",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),x.jsx("p",{className:"text-sm text-gray-700",children:fe})]},De))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Technical Details"}),x.jsx("div",{className:"bg-gray-50 p-4 rounded",children:x.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Average Document Size:"}),x.jsxs("span",{className:"ml-2 font-medium",children:[f.technicalDetails.avgDocumentSize," chars"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Duplicate Risk:"}),x.jsx("span",{className:"ml-2 font-medium",children:f.technicalDetails.duplicateRisk})]}),f.technicalDetails.oldestDocument&&x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Oldest Document:"}),x.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.oldestDocument).toLocaleDateString()})]}),f.technicalDetails.newestDocument&&x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-500",children:"Newest Document:"}),x.jsx("span",{className:"ml-2 font-medium",children:new Date(f.technicalDetails.newestDocument).toLocaleDateString()})]})]})})]})]})]})}),x.jsx(bDt,{}),(n==null?void 0:n.uid)&&x.jsx(yDt,{userId:n.uid}),(n==null?void 0:n.uid)&&x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"🔄 Re-ranking Performance Test"}),x.jsx("div",{className:"text-sm text-gray-500",children:"Test re-ranking improvements vs baseline"})]}),x.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"✅ Re-ranking is Now Active"}),x.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[x.jsx("div",{children:"• Re-ranking is automatically enabled in Enhanced RAG Service"}),x.jsx("div",{children:"• Uses Hybrid re-ranking model for optimal results"}),x.jsx("div",{children:"• Expected improvements: 20-40% relevance boost"}),x.jsx("div",{children:"• Test directly in the chat interface for real results"})]})]}),x.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[x.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"🎯 Test These Queries in Chat"}),x.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[x.jsx("div",{children:'• "How many projects do I have?"'}),x.jsx("div",{children:'• "What tasks am I working on?"'}),x.jsx("div",{children:'• "Show me my productivity summary"'}),x.jsx("div",{children:'• "Tell me about my recent work sessions"'})]})]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-purple-500",children:[x.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[x.jsx("span",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded mr-3",children:"PHASE 6"}),"🎯 Advanced Prompt Engineering System"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Chain-of-Thought Reasoning"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Dynamic Persona Selection"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Response Validation"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Self-Correction System"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Few-Shot Learning"}),x.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"✅ ACTIVE"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"Expert Personas (5)"}),x.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:"📊 READY"})]})]})]}),x.jsxs("div",{className:"bg-purple-50 p-4 rounded mb-4",children:[x.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Available Expert Personas:"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-purple-700",children:[x.jsx("div",{children:"• Senior Productivity Coach"}),x.jsx("div",{children:"• Senior Data Analyst"}),x.jsx("div",{children:"• Agile Project Manager"}),x.jsx("div",{children:"• Time Management Specialist"}),x.jsx("div",{children:"• Productivity Assistant"})]})]}),x.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[x.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Performance Impact:"}),x.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Response Quality:"})," 85-95% improvement with advanced techniques"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Reasoning Transparency:"})," Step-by-step analytical process"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Domain Expertise:"})," Specialized knowledge application"]}),x.jsxs("div",{children:["• ",x.jsx("strong",{children:"Self-Validation:"})," Automatic quality assurance and correction"]})]})]}),x.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[x.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Test Advanced Prompting:"}),x.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"Analyze my productivity patterns and provide strategic insights"'})]}),x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"What should I work on next and why, considering all my projects?"'})]}),x.jsxs("div",{children:["Try: ",x.jsx("em",{children:'"Compare my morning vs afternoon productivity trends"'})]})]})]})]})]}):x.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x.jsxs("div",{className:"text-center",children:[x.jsx(P4e,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Login Required"}),x.jsx("p",{className:"text-gray-500",children:"Please log in to view data sync dashboard"})]})})};class uk{static async executeCompleteSync(e){const t=Date.now();console.log(`🚀 Starting advanced multi-level sync for user: ${e}`);try{await this.clearExistingChunks(e);const r=await R_.processAndStoreChunks(e),i=await this.analyzeChunkDistribution(e),a=Date.now()-t;return console.log(`✅ Advanced sync complete: ${r.chunksProcessed} chunks in ${a}ms`),{success:r.success,totalChunks:r.chunksProcessed,chunksByLevel:i,processingTime:a,errors:r.errors}}catch(r){return console.error("❌ Advanced sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeWeeklySync(e){const t=Date.now();console.log(`🚀 Starting weekly summary sync for user: ${e}`);try{await this.clearExistingWeeklySummaries(e);const i=(await KG.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="weekly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("weekly_"))});let a=0;const o=[];for(const l of i)try{await R_.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store weekly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Weekly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{2:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Weekly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async executeMonthlySync(e){const t=Date.now();console.log(`🚀 Starting monthly summary sync for user: ${e}`);try{await this.clearExistingMonthlySummaries(e);const i=(await KG.createMultiLevelChunks(e)).filter(l=>{var c;return l.content_type==="monthly_summary"||l.metadata.chunkType==="temporal_pattern"&&((c=l.metadata.timeframe)==null?void 0:c.startsWith("monthly_"))});let a=0;const o=[];for(const l of i)try{await R_.storeChunkWithEmbedding(l,e),a++}catch(c){console.error("Failed to store monthly chunk:",c),o.push(c instanceof Error?c.message:"Unknown error")}const s=Date.now()-t;return console.log(`✅ Monthly sync complete: ${a} chunks in ${s}ms`),{success:o.length===0,totalChunks:a,chunksByLevel:{5:a},processingTime:s,errors:o}}catch(r){return console.error("❌ Monthly sync failed:",r),{success:!1,totalChunks:0,chunksByLevel:{},processingTime:Date.now()-t,errors:[r instanceof Error?r.message:"Unknown error"]}}}static async clearExistingWeeklySummaries(e){{console.warn("⚠️ Supabase not configured, skipping weekly summaries cleanup");return}}static async clearExistingMonthlySummaries(e){{console.warn("⚠️ Supabase not configured, skipping monthly summaries cleanup");return}}static async clearExistingChunks(e){{console.warn("⚠️ Supabase not configured, skipping chunks cleanup");return}}static async analyzeChunkDistribution(e){return console.warn("⚠️ Supabase not configured, returning empty distribution"),{}}static async testEnhancedRAG(e){const t=Date.now(),r=[],i=[];try{const a=["What did I work on this week?","Show me my most productive sessions","What projects am I behind on?","What are my work patterns?"];for(const o of a)try{const s=await R_.queryWithHybridSearch(o,e);i.push(s)}catch(s){r.push(`Query "${o}" failed: ${s instanceof Error?s.message:"Unknown error"}`)}return{success:r.length===0,queryResults:i,processingTime:Date.now()-t,errors:r}}catch(a){return{success:!1,queryResults:[],processingTime:Date.now()-t,errors:[a instanceof Error?a.message:"Unknown error"]}}}static async migrateSyntheticChunks(e){try{if(!Ot)return console.warn("⚠️ Supabase not configured, skipping synthetic chunks migration"),{success:!1,removedChunks:0,errors:["Supabase not configured"]};const{data:t,error:r}=await Ot.from("user_productivity_documents").delete().eq("user_id",e).eq("content_type","synthetic_chunk").select();if(r)throw r;return{success:!0,removedChunks:(t==null?void 0:t.length)||0,errors:[]}}catch(t){return console.error("Migration failed:",t),{success:!1,removedChunks:0,errors:[t instanceof Error?t.message:"Unknown error"]}}}}const xDt=()=>{var L;const{user:n}=Ht(),[e,t]=Y.useState(!1),[r,i]=Y.useState(!1),[a,o]=Y.useState(!1),[s,l]=Y.useState(!1),[c,u]=Y.useState(!1),[d,h]=Y.useState(null),[f,m]=Y.useState(null),[v,y]=Y.useState(!1),[w,S]=Y.useState(null),[T,C]=Y.useState(null),k=async()=>{if(n!=null&&n.uid){t(!0),h(null);try{const B=await uk.executeCompleteSync(n.uid);h(B)}catch(B){console.error("Advanced sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{t(!1)}}},A=async()=>{if(n!=null&&n.uid){o(!0),h(null);try{const B=await uk.executeWeeklySync(n.uid);h(B)}catch(B){console.error("Weekly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{o(!1)}}},D=async()=>{if(n!=null&&n.uid){l(!0),h(null);try{const B=await uk.executeMonthlySync(n.uid);h(B)}catch(B){console.error("Monthly sync failed:",B),h({success:!1,totalChunks:0,chunksByLevel:{},processingTime:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{l(!1)}}},P=async()=>{if(n!=null&&n.uid){i(!0),m(null);try{const B=await uk.testEnhancedRAG(n.uid);m(B)}catch(B){console.error("RAG testing failed:",B)}finally{i(!1)}}},N=async()=>{if(n!=null&&n.uid){y(!0),S(null);try{const B=await uk.migrateSyntheticChunks(n.uid);S(B)}catch(B){console.error("Migration failed:",B),S({success:!1,removedChunks:0,errors:[B instanceof Error?B.message:"Unknown error"]})}finally{y(!1)}}},R=async()=>{if(n!=null&&n.uid){u(!0),C(null);try{const B=await ZG.executeProjectSync(n.uid);C(B)}catch(B){console.error("Project sync failed:",B),C({success:!1,processedDocuments:0,skippedDocuments:0,errors:[B instanceof Error?B.message:"Unknown error"],executionTime:0,collections:{tasks:0,projects:0,workSessions:0}})}finally{u(!1)}}};return x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[x.jsxs("div",{className:"flex flex-wrap gap-4",children:[x.jsx("button",{onClick:k,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x.jsx("span",{children:e?"Running Full Sync...":"Run Full Sync"})}),x.jsx("button",{onClick:A,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:x.jsx("span",{children:a?"Syncing Weekly Summary...":"Sync Weekly Summary"})}),x.jsx("button",{onClick:D,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:x.jsx("span",{children:s?"Syncing Monthly Summary...":"Sync Monthly Summary"})}),x.jsx("button",{onClick:P,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:x.jsx("span",{children:r?"Testing...":"Test RAG"})}),x.jsx("button",{onClick:N,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:x.jsx("span",{children:v?"Migrating...":"Run Migration"})}),x.jsx("button",{onClick:R,disabled:e||r||v||a||s||c,className:"flex items-center space-x-2 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50",children:x.jsx("span",{children:c?"Syncing Projects...":"Sync Project Chunks"})})]}),d&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a?"Weekly Summary Sync Results":s?"Monthly Summary Sync Results":"Sync Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",d.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Total Chunks: ",d.totalChunks]}),x.jsxs("p",{children:["Processing Time: ",d.processingTime,"ms"]}),d.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:d.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),f&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"RAG Test Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",f.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Processing Time: ",f.processingTime,"ms"]}),x.jsxs("p",{children:["Results Found: ",f.queryResults.length]}),f.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:f.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),w&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Migration Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",w.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Removed Chunks: ",w.removedChunks]}),((L=w.errors)==null?void 0:L.length)>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:w.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]}),T&&x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Project Sync Results"}),x.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[x.jsxs("p",{children:["Status: ",T.success?"✅ Success":"❌ Failed"]}),x.jsxs("p",{children:["Processed Documents: ",T.processedDocuments]}),x.jsxs("p",{children:["Skipped Documents: ",T.skippedDocuments]}),x.jsxs("p",{children:["Execution Time: ",T.executionTime,"ms"]}),x.jsxs("p",{children:["Collections: Tasks - ",T.collections.tasks,", Projects - ",T.collections.projects,", Work Sessions - ",T.collections.workSessions]}),T.errors.length>0&&x.jsxs("div",{className:"text-red-600",children:[x.jsx("p",{children:"Errors:"}),x.jsx("ul",{className:"list-disc list-inside",children:T.errors.map((B,$)=>x.jsx("li",{children:B},$))})]})]})]})]})})},SDt=()=>{const[n,e]=Y.useState("standard");return x.jsx("div",{className:"w-full bg-gray-50 py-8",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data Synchronization"}),x.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your Firebase to Supabase data sync and monitor AI embedding generation."})]}),x.jsx("div",{className:"mb-6",children:x.jsx("div",{className:"border-b border-gray-200",children:x.jsxs("nav",{className:"-mb-px flex space-x-8",children:[x.jsx("button",{onClick:()=>e("standard"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="standard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(zb,{className:"w-4 h-4"}),"Standard Sync"]})}),x.jsx("button",{onClick:()=>e("advanced"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="advanced"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(L7,{className:"w-4 h-4"}),"Advanced Multi-Level Sync",x.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full ml-1",children:"NEW"})]})})]})})}),n==="standard"&&x.jsx(wDt,{}),n==="advanced"&&x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"text-green-600 mt-1",children:x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"🤖 Chat Interface Enhanced!"}),x.jsxs("div",{className:"text-green-700 space-y-1 text-sm",children:[x.jsx("p",{children:"✅ Fixed white text visibility issue - now using black text"}),x.jsx("p",{children:"✅ Enhanced RAG search with multiple fallback strategies"}),x.jsx("p",{children:"✅ Better query analysis for optimal chunk level selection"}),x.jsx("p",{children:"✅ Improved ranking algorithm for diverse, relevant responses"}),x.jsx("p",{children:"✅ Updated suggested queries for better user engagement"})]}),x.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded text-sm text-green-800",children:[x.jsx("strong",{children:"Try the chat button (bottom right) with these improved queries:"}),x.jsxs("ul",{className:"mt-1 space-y-1 ml-4",children:[x.jsx("li",{children:'• "What tasks are in my Learn React project?"'}),x.jsx("li",{children:'• "Show me my recent work sessions"'}),x.jsx("li",{children:'• "How productive was I this week?"'}),x.jsx("li",{children:'• "What are my completed tasks today?"'})]})]})]})]})}),x.jsx(xDt,{})]})]})})},_Dt=()=>x.jsx("div",{className:"w-full max-w-4xl mx-auto px-6 py-12",children:x.jsxs("div",{className:"space-y-12",children:[x.jsxs("header",{className:"text-center border-b border-border pb-8",children:[x.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-4",children:"Privacy Policy"}),x.jsx("p",{className:"text-text-secondary",children:"Effective Date: July 8, 2025 | Last Updated: July 8, 2025"})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Our Privacy Commitment"}),x.jsx("p",{className:"text-text-secondary leading-relaxed",children:"Make10000hours is built by productivity enthusiasts who understand the importance of privacy. We designed this extension with privacy-first principles: your data stays primarily on your device, we never sell your information, and you maintain complete control over what gets shared and when."})]}),x.jsxs("section",{className:"space-y-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data We Collect & Why"}),x.jsx("p",{className:"text-text-secondary leading-relaxed",children:"To provide you with meaningful productivity insights and help you build better focus habits, Make10000hours needs to collect certain data about your computer usage. Here's exactly what we collect and why it's necessary:"}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"border-l-4 border-text-primary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Website Activity & Browsing Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• URLs and titles of websites you visit while the extension is active"}),x.jsx("li",{children:"• Time spent on each website (precise timestamps and duration)"}),x.jsx("li",{children:"• Tab focus events (when you switch between tabs)"}),x.jsx("li",{children:"• Window focus/blur events (when you switch between applications)"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," This core data enables us to show you where your time goes, identify productivity patterns, and help you understand your digital habits."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"User Activity & Behavior"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Mouse movements and clicks (for activity detection)"}),x.jsx("li",{children:"• Keyboard activity indicators (not keystrokes - just activity presence)"}),x.jsx("li",{children:"• Scroll events and window interactions"}),x.jsx("li",{children:"• System sleep/wake detection"}),x.jsx("li",{children:"• Idle time detection (when you're away from computer)"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Activity detection helps us differentiate between active work and idle time, ensuring accurate productivity measurements and automatic session pausing when you're away."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Focus Sessions & Productivity Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Pomodoro timer sessions (start/end times, duration, completion status)"}),x.jsx("li",{children:"• Deep focus session data and blocking preferences"}),x.jsx("li",{children:"• Websites you choose to block during focus modes"}),x.jsx("li",{children:"• Task management data (tasks you create, time tracking)"}),x.jsx("li",{children:"• Productivity goals and achievements"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," This data powers your productivity insights, progress tracking, and helps us provide personalized recommendations for better focus habits."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Account & Authentication Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect (only when you sign in):"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Google account email address and user ID"}),x.jsx("li",{children:"• Display name and profile picture (if provided)"}),x.jsx("li",{children:"• Authentication tokens for secure access"}),x.jsx("li",{children:"• Sync preferences and device information"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Authentication enables secure data sync across your devices and provides backup of your productivity data."]})]})]}),x.jsxs("div",{className:"border-l-4 border-text-secondary pl-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Technical & Usage Data"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-text-primary mb-2",children:"What we collect:"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Extension version and browser information"}),x.jsx("li",{children:"• Error logs and crash reports (for debugging)"}),x.jsx("li",{children:"• Feature usage statistics (which features you use most)"}),x.jsx("li",{children:"• Performance metrics (loading times, response times)"}),x.jsx("li",{children:"• Extension settings and preferences"})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"Why we need this:"})," Technical data helps us fix bugs, improve performance, and understand which features provide the most value to users."]})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"How We Use Your Data"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"What We DO"}),x.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[x.jsx("li",{children:"✓ Display your personal productivity insights"}),x.jsx("li",{children:"✓ Calculate time spent on different websites and categories"}),x.jsx("li",{children:"✓ Provide focus session tracking and analytics"}),x.jsx("li",{children:"✓ Sync your data securely across your devices"}),x.jsx("li",{children:"✓ Generate productivity reports and trends"}),x.jsx("li",{children:"✓ Improve extension performance and fix bugs"}),x.jsx("li",{children:"✓ Provide customer support when you contact us"})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"What We NEVER Do"}),x.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[x.jsx("li",{children:"✗ Sell your data to anyone, ever"}),x.jsx("li",{children:"✗ Use your data for advertising or marketing"}),x.jsx("li",{children:"✗ Share your browsing data with advertisers"}),x.jsx("li",{children:"✗ Allow human access to your personal data without permission"}),x.jsx("li",{children:"✗ Track you across the web outside our extension"}),x.jsx("li",{children:"✗ Store passwords or sensitive form data"}),x.jsx("li",{children:"✗ Monitor your data for non-productivity purposes"})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Storage & Third Party Services"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Local Storage (Your Device)"}),x.jsxs("p",{className:"text-text-secondary leading-relaxed",children:[x.jsx("strong",{children:"Primary storage:"})," All your data is stored locally on your device using Chrome's secure storage APIs. This data remains on your device and is encrypted by Chrome's built-in security. You can use the extension fully offline without any cloud services."]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Cloud Storage (Optional - Only When You Sign In)"}),x.jsx("p",{className:"text-text-secondary leading-relaxed mb-4",children:"When you choose to sign in with Google, we use secure cloud services to sync your data across devices:"}),x.jsxs("div",{className:"space-y-4 text-text-secondary",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:"Google Firebase (Google LLC)"}),x.jsxs("ul",{className:"ml-4 space-y-1",children:[x.jsx("li",{children:"• Secure database hosting for your productivity data"}),x.jsx("li",{children:"• User authentication and identity management"}),x.jsx("li",{children:"• Real-time data synchronization between devices"}),x.jsx("li",{children:"• All data encrypted in transit and at rest"})]})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:"Google APIs & Services"}),x.jsxs("ul",{className:"ml-4 space-y-1",children:[x.jsx("li",{children:"• Google Sign-In for secure authentication"}),x.jsx("li",{children:"• Google Favicon API for website icons (URLs only)"}),x.jsx("li",{children:"• Google Analytics for anonymous usage statistics"})]})]})]})]}),x.jsx("p",{className:"text-text-secondary italic",children:"Security: All data transmission uses HTTPS encryption. Firebase provides enterprise-grade security with SOC 2 Type II compliance. Your data is never transmitted in plain text."})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Sharing & International Transfers"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Who We Share Data With"}),x.jsxs("div",{className:"space-y-3 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Google/Firebase:"})," When you enable sync, your encrypted productivity data is stored on Google's secure Firebase servers for synchronization purposes only."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"No Other Third Parties:"})," We do not share your personal data with any other companies, advertisers, or third parties."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Legal Requirements:"})," We may disclose data only if required by law, court order, or to protect our legal rights, but we will notify you unless legally prohibited."]})]})]}),x.jsxs("p",{className:"text-text-secondary",children:[x.jsx("strong",{children:"International Transfers:"})," If you enable sync, your data may be processed on Google's servers located in various countries including the United States. Google complies with international privacy frameworks including GDPR and provides adequate data protection safeguards."]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Data Retention"}),x.jsxs("div",{className:"space-y-3 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Local Data:"})," Retained on your device until you uninstall the extension, clear browser data, or manually delete through extension settings."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Cloud Data:"})," Retained while your account is active. Automatically deleted 90 days after account deletion or upon request."]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Analytics Data:"})," Anonymous usage statistics retained for up to 26 months per Google Analytics standards."]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Your Privacy Rights & Controls"}),x.jsx("p",{className:"text-text-secondary mb-6",children:"You have complete control over your data and privacy:"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Data Access & Control"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• View all collected data in the extension"}),x.jsx("li",{children:"• Export your data in JSON format"}),x.jsx("li",{children:"• Delete specific data points or entire history"}),x.jsx("li",{children:"• Clear all local data instantly"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Privacy Settings"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Enable/disable data collection features"}),x.jsx("li",{children:"• Control sync settings independently"}),x.jsx("li",{children:"• Opt out of analytics collection"}),x.jsx("li",{children:"• Manage website tracking exceptions"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Account Management"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Sign out to stop cloud sync immediately"}),x.jsx("li",{children:"• Delete account and all cloud data"}),x.jsx("li",{children:"• Revoke extension permissions"}),x.jsx("li",{children:"• Use extension without signing in"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Legal Rights (GDPR/CCPA)"}),x.jsxs("ul",{className:"space-y-1 text-text-secondary",children:[x.jsx("li",{children:"• Right to access your data"}),x.jsx("li",{children:"• Right to rectification (correction)"}),x.jsx("li",{children:'• Right to erasure ("right to be forgotten")'}),x.jsx("li",{children:"• Right to data portability"})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Chrome Extension Permissions"}),x.jsx("p",{className:"text-text-secondary mb-4",children:"Chrome extensions require explicit permissions to function. Here's what each permission does:"}),x.jsxs("div",{className:"space-y-4 text-text-secondary",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Read and change all your data on all websites"'}),x.jsx("p",{className:"ml-4",children:"Required to track time spent on websites and detect user activity for productivity measurement."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Read your browsing history"'}),x.jsx("p",{className:"ml-4",children:"Required to identify visited websites for time tracking and productivity categorization."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Block content on any page you visit"'}),x.jsx("p",{className:"ml-4",children:"Required for focus mode functionality to block distracting websites during focus sessions."})]}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium",children:'"Store unlimited amount of client-side data"'}),x.jsx("p",{className:"ml-4",children:"Required to store your productivity data locally on your device for offline access."})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Contact & Data Requests"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Get in Touch"}),x.jsxs("div",{className:"space-y-2 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Privacy Officer:"})," privacy@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"General Support:"})," support@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Data Requests:"})," data@make10000hours.com"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Website:"})," https://make10000hours.com"]})]})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Response Times"}),x.jsxs("div",{className:"space-y-2 text-text-secondary",children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Privacy requests:"})," Within 30 days"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Data deletion:"})," Immediate (local), 72 hours (cloud)"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Support inquiries:"})," Within 48 hours"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Urgent requests:"}),' Mark email "URGENT - Privacy"']})]})]})]})]}),x.jsxs("section",{className:"space-y-6",children:[x.jsx("h2",{className:"text-2xl font-semibold text-text-primary",children:"Policy Updates"}),x.jsxs("div",{className:"text-text-secondary space-y-4",children:[x.jsx("p",{children:"We may update this Privacy Policy to reflect changes in our practices, legal requirements, or new features. When we make changes:"}),x.jsxs("ul",{className:"space-y-1",children:[x.jsx("li",{children:"• Material changes will be notified through the extension interface"}),x.jsx("li",{children:"• Minor updates will be posted on this page with updated date"}),x.jsx("li",{children:"• Email notifications for significant changes (if you're signed in)"}),x.jsx("li",{children:"• Continued use after changes constitutes acceptance"})]}),x.jsx("p",{children:"You can always review the current policy at any time through the extension or our website."})]})]}),x.jsxs("footer",{className:"border-t border-border pt-8",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-text-secondary mb-6",children:[x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Policy Version:"})," 3.0"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Effective Date:"})," July 8, 2025"]})]}),x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Compliance:"})," GDPR, CCPA, PIPEDA"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Chrome Web Store:"})," Compliant"]})]}),x.jsxs("div",{children:[x.jsxs("p",{children:[x.jsx("strong",{children:"Framework:"})," Privacy by Design"]}),x.jsxs("p",{children:[x.jsx("strong",{children:"Audit:"})," Last reviewed July 2025"]})]})]}),x.jsx("div",{className:"text-center text-text-secondary",children:x.jsx("p",{className:"leading-relaxed",children:"By installing and using Make10000hours, you acknowledge that you have read, understood, and agree to this Privacy Policy. Your privacy is important to us, and we're committed to protecting it while helping you achieve your productivity goals."})})]})]})});class t8{static initialize(){this.unsubscribeUserStore&&this.unsubscribeUserStore(),console.log("🤖 Initializing chat integration service...");let e=Ht.getState().user;this.unsubscribeUserStore=Ht.subscribe(t=>{const r=t.user,i=yDe.getState();r&&r.uid?(console.log("🤖 User authenticated, initializing chat store for:",r.uid),i._userId!==r.uid&&i._setUserId(r.uid)):e&&!r&&(console.log("🤖 User logged out, resetting chat store"),i._reset()),e=r})}static cleanup(){this.unsubscribeUserStore&&(this.unsubscribeUserStore(),this.unsubscribeUserStore=null),console.log("🤖 Chat integration service cleaned up")}static getCurrentUserContext(){const e=Ht.getState();return e.user?{userId:e.user.uid,userName:e.user.userName||"User",isAuthenticated:e.isAuthenticated}:null}static isChatAvailable(){const e=Ht.getState();return e.isAuthenticated&&!!e.user}}$t(t8,"unsubscribeUserStore",null);const O_={testSessionCreationLocking:async n=>{console.log("🧪 Testing session creation locking...");try{const e=[Mc.startSession(n),Mc.startSession(n),Mc.startSession(n)],t=await Promise.all(e);return new Set(t).size===1?(console.log("✅ Session creation locking works - all calls returned same session ID:",t[0]),{success:!0,sessionId:t[0]}):(console.error("❌ Session creation locking failed - multiple session IDs created:",t),{success:!1,sessionIds:t})}catch(e){return console.error("❌ Session creation locking test failed:",e),{success:!1,error:e}}},testExtensionMessageDeduplication:()=>{console.log("🧪 Testing extension message deduplication...");let n=0;const e=window.dispatchEvent;window.dispatchEvent=function(t){return t instanceof CustomEvent&&t.type==="extensionFocusHandled"&&(n++,console.log(`📥 Extension focus handled event #${n}`)),e.call(this,t)};try{const t=Date.now(),r={type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:[],timestamp:t,messageId:`test-extension_true_${t}`},source:"test-extension",extensionId:"test-extension"};for(let i=0;i<5;i++)window.postMessage(r,"*");setTimeout(()=>{n<=1?console.log("✅ Extension message deduplication works - only",n,"message(s) processed"):console.error("❌ Extension message deduplication failed - processed",n,"messages"),window.dispatchEvent=e},1e3)}catch(t){console.error("❌ Extension message deduplication test failed:",t),window.dispatchEvent=e}},testSingleSessionFromExtension:async n=>{console.log("🧪 Testing single session creation from extension toggle...");try{await Mc.cleanupOrphanedSessions(n);const t=(await Mc.getUserSessions(n)).filter(o=>o.status==="active").length;console.log("📊 Initial active sessions:",t);const r=Date.now();window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!0,isVisible:!0,isFocused:!0,blockedSites:["facebook.com","twitter.com"],targetUserId:n,timestamp:r,messageId:`test-extension_true_${r}`,source:"extension-content-script"},source:"test-extension",extensionId:"test-extension",messageTimestamp:r,messageSource:"focus-time-tracker-extension"},"*"),await new Promise(o=>setTimeout(o,2e3));const a=(await Mc.getUserSessions(n)).filter(o=>o.status==="active").length;if(console.log("📊 Final active sessions:",a),a===t+1)return console.log("✅ Single session creation from extension works - exactly 1 new session created"),{success:!0,newSessionCount:1};{const o=a-t;return console.error("❌ Multiple sessions created from extension toggle:",o),{success:!1,newSessionCount:o}}}catch(e){return console.error("❌ Single session creation test failed:",e),{success:!1,error:e}}},testDisableFromExtension:()=>{console.log("🧪 Testing Deep Focus disable from extension...");try{nn(async()=>{const{useDeepFocusStore:n}=await Promise.resolve().then(()=>tJe);return{useDeepFocusStore:n}},void 0).then(({useDeepFocusStore:n})=>{const e=n.getState();console.log("📊 Initial state:",{isDeepFocusActive:e.isDeepFocusActive,activeSessionId:e.activeSessionId}),console.log("📤 Simulating extension disable message..."),window.postMessage({type:"EXTENSION_FOCUS_STATE_CHANGED",payload:{isActive:!1,isVisible:!1,isFocused:!1,blockedSites:[],targetUserId:null,timestamp:Date.now(),messageId:`test-extension_false_${Date.now()}`,source:"extension-content-script"},source:"test-extension-id",extensionId:"test-extension-id",messageTimestamp:Date.now(),messageSource:"focus-time-tracker-extension"},"*"),setTimeout(()=>{const t=n.getState();console.log("📊 Final state:",{isDeepFocusActive:t.isDeepFocusActive,activeSessionId:t.activeSessionId}),t.isDeepFocusActive?console.error("❌ Deep Focus did not disable from extension message"):console.log("✅ Deep Focus disable from extension works correctly")},1e3)})}catch(n){console.error("❌ Deep Focus disable test failed:",n)}},runAllTests:async n=>{console.log("🔬 Running all Deep Focus duplicate session fixes tests..."),console.log("====================================="),await O_.testSessionCreationLocking(n),console.log("-------------------------------------"),O_.testExtensionMessageDeduplication(),console.log("-------------------------------------"),await O_.testSingleSessionFromExtension(n),console.log("-------------------------------------"),O_.testDisableFromExtension(),console.log("====================================="),console.log("📋 All tests completed. Check console for individual results.")}};window.testDeepFocusFixes=O_;nn(()=>import("./cleanupSessions-B56sRXOT.js"),[]);const TDt=()=>{const n=ei(i=>i.isRunning),e=ei(i=>i.currentTime),t=ei(i=>i.currentTask),r=Y.useRef("");return Y.useEffect(()=>{r.current=document.title},[]),Y.useEffect(()=>{if(n){const i=C7(e),a=t?t.title:"Focus Session";document.title=`${i} - ${a}`}else document.title=r.current;return()=>{document.title=r.current}},[n,e,t]),null},EDt=({children:n})=>{const e=ns(),{user:t}=Ht();return Y.useEffect(()=>{const r=e.pathname==="/"?"home":e.pathname.replace("/","");k7(r)},[e]),Y.useEffect(()=>{t!=null&&t.uid&&eye(t.uid)},[t]),x.jsx(x.Fragment,{children:n})},ADt=()=>x.jsx("div",{className:"w-full max-w-7xl mx-auto px-6 py-8",children:x.jsxs("div",{className:"bg-background-primary rounded-lg border border-border p-8",children:[x.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-8",children:"Help & Support"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Documentation"}),x.jsx("div",{className:"space-y-3",children:x.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[x.jsx("h3",{className:"font-medium text-text-primary mb-2",children:"Privacy Policy"}),x.jsx("p",{className:"text-sm text-text-secondary",children:"Learn how we protect your data and privacy"})]})})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Contact Us"}),x.jsxs("div",{className:"bg-background-secondary rounded-lg border border-border p-4",children:[x.jsx("p",{className:"text-text-secondary mb-2",children:"For support, feedback, or questions about the Focus Time Tracker extension:"}),x.jsxs("p",{className:"text-text-primary",children:[x.jsx("strong",{children:"Email:"})," support@app.make10000hours.com"]})]})]})]}),x.jsxs("div",{className:"mt-8 pt-8 border-t border-border",children:[x.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"About Focus Time Tracker"}),x.jsx("p",{className:"text-text-secondary",children:"Focus Time Tracker is a Chrome extension designed to help you track your website usage time and maintain focus during work sessions. All your data is stored locally on your device for maximum privacy and security."})]})]})});let kV=!1,CV=null;const wDe=we.memo(()=>{const n=ns(),e=Gg(),{isRightSidebarOpen:t,toggleRightSidebar:r,toggleLeftSidebar:i}=dl(),{setIsAddingTask:a}=Vt(),{toggleDeepFocus:o}=GW(),{start:s,pause:l,isRunning:c}=ei(),u=ei(m=>m.enableStartPauseBtn),d=Y.useCallback(m=>{e(m)},[e]),h=Y.useCallback(async()=>{const{checkAuthenticationStatus:m,triggerAuthenticationFlow:v}=await nn(async()=>{const{checkAuthenticationStatus:w,triggerAuthenticationFlow:S}=await Promise.resolve().then(()=>t2);return{checkAuthenticationStatus:w,triggerAuthenticationFlow:S}},void 0),y=m();if(!y.isAuthenticated&&y.shouldShowAuth){v();return}t||r(),a(!0)},[t,r,a]),f=Y.useCallback(()=>{c?l():s()},[c,l,s]);return Y.useEffect(()=>{if(kV)return CV||void 0;kV=!0,console.log("🔧 GlobalKeyboardShortcuts: Component mounted and event listener attached");const m=y=>{const w=y.target,S=w.tagName==="INPUT"||w.tagName==="TEXTAREA"||w.isContentEditable||w.getAttribute("role")==="textbox";if(y.code==="Space"&&!S&&(n.pathname==="/pomodoro"||n.pathname==="/")&&u){y.preventDefault(),console.log("🔑 Space detected - toggling pomodoro timer"),f();return}if(y.shiftKey&&(y.key==="D"||y.key==="d")&&!S){console.log("🔑 Shift+D detected - toggling deep focus mode"),y.preventDefault(),o();return}y.shiftKey&&y.key==="N"&&!S&&(console.log("🔑 Shift+N detected - creating new task"),y.preventDefault(),h()),y.metaKey&&(y.key==="\\"||y.key==="|")&&(console.log("🔑 Cmd+\\ detected - toggling right sidebar"),y.preventDefault(),r()),y.altKey&&(y.key==="\\"||y.key==="|"||y.code==="Backslash")&&(console.log("🔑 Alt+\\ detected - toggling left sidebar"),y.preventDefault(),i()),!S&&!y.metaKey&&!y.ctrlKey&&!y.altKey&&!y.shiftKey&&((y.key==="P"||y.key==="p")&&(console.log("🔑 P detected - navigating to Pomodoro Timer"),y.preventDefault(),d("/pomodoro")),(y.key==="C"||y.key==="c")&&(console.log("🔑 C detected - navigating to Calendar"),y.preventDefault(),d("/calendar")),(y.key==="T"||y.key==="t")&&(console.log("🔑 T detected - navigating to Task Management"),y.preventDefault(),d("/projects")),(y.key==="I"||y.key==="i")&&(console.log("🔑 I detected - navigating to Productivity Insights"),y.preventDefault(),d("/dashboard")),(y.key==="F"||y.key==="f")&&(console.log("🔑 F detected - navigating to Deep Focus"),y.preventDefault(),d("/deep-focus")),(y.key==="D"||y.key==="d")&&(console.log("🔑 D detected - navigating to Calendar Day view"),y.preventDefault(),d("/calendar?view=day")),(y.key==="W"||y.key==="w")&&(console.log("🔑 W detected - navigating to Calendar Week view"),y.preventDefault(),d("/calendar?view=week")),(y.key==="M"||y.key==="m")&&(console.log("🔑 M detected - navigating to Calendar Month view"),y.preventDefault(),d("/calendar?view=month")))};document.addEventListener("keydown",m);const v=()=>{document.removeEventListener("keydown",m),kV=!1,CV=null};return CV=v,v},[n.pathname,u,o]),null});wDe.displayName="GlobalKeyboardShortcuts";const kDt=()=>{const{initialize:n,user:e,isLoading:t,isInitialized:r}=Ht(),{initializeTheme:i}=HW();Zet(),Mq(),Y.useEffect(()=>{let u=null;const d=()=>{const{isRunning:f,isActiveDevice:m}=ei.getState();u&&(clearInterval(u),u=null),f&&m&&(u=setInterval(()=>{ei.getState().tick()},1e3))};d();const h=ei.subscribe((f,m)=>{(f.isRunning!==m.isRunning||f.isActiveDevice!==m.isActiveDevice)&&d()});return()=>{u&&clearInterval(u),h(),t8.cleanup()}},[]),Y.useEffect(()=>{var u;n(),i(),t8.initialize(),window.debugExtension=async()=>await new sye().runAllTests(),window.cleanupDuplicates=async()=>{try{const{DeepFocusSync:d}=await nn(async()=>{const{DeepFocusSync:v}=await import("./deepFocusSync-DfaSkCbQ.js");return{DeepFocusSync:v}},[]),{useUserStore:h}=await nn(async()=>{const{useUserStore:v}=await Promise.resolve().then(()=>to);return{useUserStore:v}},void 0),f=h.getState().user;if(!(f!=null&&f.uid))return console.error("❌ User not authenticated"),{success:!1,error:"User not authenticated"};console.log("🧹 Starting duplicate cleanup...");const m=await d.removeDuplicateSessions(f.uid);return m.success?console.log(`✅ Cleanup completed: ${m.removedCount} duplicate sessions removed`):console.error("❌ Cleanup failed:",m.error),m}catch(d){return console.error("❌ Cleanup error:",d),{success:!1,error:d instanceof Error?d.message:String(d)}}},window.checkDeepFocusSessions=async()=>{try{const{deepFocusSessionService:d}=await nn(async()=>{const{deepFocusSessionService:k}=await Promise.resolve().then(()=>Kwe);return{deepFocusSessionService:k}},void 0),{useUserStore:h}=await nn(async()=>{const{useUserStore:k}=await Promise.resolve().then(()=>to);return{useUserStore:k}},void 0),f=h.getState().user;if(!(f!=null&&f.uid)){console.error("❌ User not authenticated");return}console.log("🔍 Checking Deep Focus sessions...");const m=new Date,v=new Date(m.getFullYear(),m.getMonth(),m.getDate()),y=new Date(m.getFullYear(),m.getMonth(),m.getDate(),23,59,59),w=await d.getUserSessions(f.uid,v,y);console.log(`📊 Today's Deep Focus sessions: ${w.length}`),console.log("Sessions:",w.map(k=>{var A;return{id:k.id.substring(0,8),extensionId:((A=k.extensionSessionId)==null?void 0:A.substring(0,8))||"none",duration:k.duration,status:k.status,createdAt:k.createdAt.toISOString()}}));const S=w.filter(k=>k.status==="completed"&&k.duration).reduce((k,A)=>k+(A.duration||0),0);console.log(`⏱️ Total Deep Focus time: ${Math.floor(S/60)}h ${S%60}m`);const T=w.reduce((k,A)=>(A.extensionSessionId&&(k[A.extensionSessionId]||(k[A.extensionSessionId]=[]),k[A.extensionSessionId].push(A)),k),{}),C=Object.keys(T).filter(k=>T[k].length>1);return C.length>0?(console.log("⚠️ Found duplicates:",C.length),C.forEach(k=>{console.log(`🔍 Extension ID ${k.substring(0,8)}:`,T[k].map(A=>({id:A.id.substring(0,8),duration:A.duration,status:A.status})))})):console.log("✅ No duplicates found"),{sessions:w,totalTime:S,duplicates:C.length}}catch(d){return console.error("❌ Check sessions error:",d),{error:d instanceof Error?d.message:String(d)}}},window.testDeepFocusSync=async()=>{try{const{DeepFocusSync:d}=await nn(async()=>{const{DeepFocusSync:v}=await import("./deepFocusSync-DfaSkCbQ.js");return{DeepFocusSync:v}},[]),{useUserStore:h}=await nn(async()=>{const{useUserStore:v}=await Promise.resolve().then(()=>to);return{useUserStore:v}},void 0),f=h.getState().user;if(!(f!=null&&f.uid)){console.error("❌ User not authenticated");return}console.log("🧪 Testing Deep Focus sync process...");const m=await d.syncTodaySessionsFromExtension(f.uid);return console.log("🔄 Sync result:",m),m.success?console.log(`✅ Sync test passed: ${m.synced} sessions synced`):console.error("❌ Sync test failed:",m.error),m}catch(d){return console.error("❌ Sync test error:",d),{success:!1,error:d instanceof Error?d.message:String(d)}}},console.log("🔧 Extension Debug Available:"),console.log("  Run debugExtension() in console to test extension communication"),console.log("  Run cleanupDuplicates() in console to remove duplicate sessions"),console.log("  Run testDeepFocusSync() in console to test sync process"),console.log("  Run checkDeepFocusSessions() in console to check session count and duplicates"),setTimeout(()=>{MSe()},2e3);try{const d=localStorage.getItem("focus-time-storage");if(d){const h=JSON.parse(d);if(h.state&&h.state.focusStreak&&h.state.focusStreak.streakDates){const f=(u=h.state.focusStreak.streakDates[0])==null?void 0:u.date;f&&typeof f=="string"&&console.log("Converting date format in localStorage")}}}catch(d){console.error("Error with localStorage data, clearing storage:",d),localStorage.removeItem("focus-time-storage"),window.location.reload()}},[]),Y.useEffect(()=>{const u=async d=>{var f,m,v,y;const h=il.getState();if(h.isDeepFocusActive){const w=((m=(f=window.performance)==null?void 0:f.navigation)==null?void 0:m.type)===1||((y=(v=window.performance)==null?void 0:v.getEntriesByType("navigation")[0])==null?void 0:y.type)==="reload";h.setReloading(w),w||(d.preventDefault(),d.returnValue="",await h.disableDeepFocus())}};return window.addEventListener("beforeunload",u),()=>window.removeEventListener("beforeunload",u)},[]);const a=()=>x.jsx(cae,{rightSidebarContent:x.jsx(dxe,{}),children:x.jsx(V4e,{})}),o=()=>{const{isLeftSidebarOpen:u}=dl();return x.jsx("div",{className:"min-h-screen bg-background-primary",children:x.jsxs("div",{className:"flex h-screen overflow-hidden",children:[x.jsx("div",{className:`${u?"w-64":"w-0"} transition-all duration-300 overflow-hidden`,children:x.jsx(Pw,{})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(A9,{}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx(ADt,{})})]})]})})},s=()=>{const{isLeftSidebarOpen:u}=dl();return x.jsx("div",{className:"min-h-screen bg-background-primary",children:x.jsxs("div",{className:"flex h-screen overflow-hidden",children:[x.jsx("div",{className:`${u?"w-64":"w-0"} transition-all duration-300 overflow-hidden`,children:x.jsx(Pw,{})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx(A9,{}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx(_Dt,{})})]})]})})},l=()=>x.jsx(qet,{children:x.jsx(Wet,{})}),c=()=>x.jsx(cae,{children:x.jsx(SDt,{})});return r?(typeof window<"u"&&(window.testDeepFocusFixes=O_),x.jsx(aJe,{children:x.jsxs(a5e,{children:[x.jsx(TDt,{}),x.jsx(wDe,{},"global-shortcuts"),x.jsx(EDt,{children:x.jsxs(OFe,{children:[x.jsx(Tu,{path:"/",element:x.jsx(a,{})}),x.jsx(Tu,{path:"pomodoro",element:x.jsx(a,{})}),x.jsx(Tu,{path:"projects",element:x.jsx(l,{})}),x.jsxs(Tu,{path:"dashboard/*",element:x.jsx(jet,{}),children:[x.jsx(Tu,{index:!0,element:x.jsx(BZe,{})}),x.jsx(Tu,{path:"settings",element:x.jsx(cnt,{})})]}),x.jsx(Tu,{path:"calendar",element:x.jsx(Pit,{})}),x.jsx(Tu,{path:"deep-focus",element:x.jsx(FTt,{})}),x.jsx(Tu,{path:"data-sync",element:x.jsx(c,{})}),x.jsx(Tu,{path:"support",element:x.jsx(o,{})}),x.jsx(Tu,{path:"privacy-policy",element:x.jsx(s,{})})]})}),x.jsx(Ket,{}),x.jsx(hDt,{})]})})):x.jsx($Tt,{title:"Make10000hours",subtitle:"Setting up your workspace..."})},CDt=n=>{n&&n instanceof Function&&nn(async()=>{const{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}=await import("./web-vitals-CFX8QzIp.js");return{getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a}},[]).then(({getCLS:e,getFID:t,getFCP:r,getLCP:i,getTTFB:a})=>{e(n),t(n),r(n),i(n),a(n)})};NDe.createRoot(document.getElementById("root")).render(x.jsx(we.StrictMode,{children:x.jsx(Uje,{children:x.jsx(kDt,{})})}));CDt(console.log);export{Rt as E,ol as F,kr as O,Kr as T,Qe as a,fa as b,qt as c,Mc as d,Zt as e,qR as f,kn as g,Jh as h,zt as q,zd as s,Ht as u,gt as w};
